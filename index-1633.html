<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1633) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1633.html">
<link rel="prev" href="index-1634.html" type="text/html">
<link rel="next" href="index-1632.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/capture-ios-simulator-video-for-app-preview/" class="u-url">Capture iOS Simulator video for App Preview</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/capture-ios-simulator-video-for-app-preview/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:41:11+08:00" itemprop="datePublished" title="2023-03-03 05:41">2023-03-03 05:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Okay, so we can now submit video previews of our apps on the App Store.
According to Apple we should do so with an iOS8 device and <strong><code>OSX 10.10.</code></strong>
The problem is you have to have all the different devices (4", 4.7", 5.5" and
iPad).</p>
<p>Is there an alternative to this?</p>
<p>I am thinking of capturing a video of the simulator. The problem is the device
screen is bigger than my <strong><code>FullHD</code></strong> monitor when shown in 100% resolution.
Any solution that can capture a video right from the simulator in full
resolution?</p>
<p>Edit: Since a lot of people are answering questions I'm not asking let me say:
- Recording one device size and scaling it is not what I'm asking; - How to
record <em>any</em> app preview is not what I'm asking; - How you do your previews
is not what I'm asking;</p>
<p>What <strong>I am</strong> asking is <strong>can you record a video from the simulator in 100%
resolution if it doesn't fit on the screen?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p>Using the new release of Xcode 12.5 you can simply record the simulator screen
using <strong>⌘ + R</strong>. For details you can visit here.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Using<code>xcrun simctl</code>:</strong></p>
<p><code>xcrun simctl io booted screenshot &lt;filename&gt;.&lt;file extension&gt;</code></p>
<p><strong>Using Screen Capture:</strong></p>
<p>Use <code>cmd + shift + 5</code> and the resize the selection so that the simulator is
recorded.</p>
<p><strong>Using QuickTime Player:</strong></p>
<p>You can use <code>QuickTime Player</code> to record the screen.</p>
<ul>
<li>Open <code>QuickTime Player</code>
</li>
<li>Select <code>File</code> from the menu</li>
<li>Select <code>New Screen recording</code>
</li>
</ul>
<p>Now from the <code>Screen Recording</code> window, click on the record button.</p>
<p>It will provide you with an option to record the entire screen or a selected
portion of your screen.</p>
<p>You will have to make a selection of your simulator so that only the simulator
portion will be recorded.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/in-pytest-what-is-the-use-of-conftest-py-files/" class="u-url">In pytest, what is the use of conftest.py files?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/in-pytest-what-is-the-use-of-conftest-py-files/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:40:45+08:00" itemprop="datePublished" title="2023-03-03 05:40">2023-03-03 05:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to understand what <code>conftest.py</code> files are meant to be used for.</p>
<p>In my (currently small) test suite I have one <code>conftest.py</code> file at the
project root. I use it to define the fixtures that I inject into my tests.</p>
<p>I have two questions:</p>
<ol>
<li>Is this the correct use of <code>conftest.py</code>? Does it have other uses?</li>
<li>Can I have more than one <code>conftest.py</code> file? When would I want to do that? Examples will be appreciated.</li>
</ol>
<p>More generally, how would you define the purpose and correct use of
<code>conftest.py</code> file(s) in a pytest test suite?</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>Is this the correct use of conftest.py?</p>
</blockquote>
<p>Yes it is. Fixtures are a potential and common use of <code>conftest.py</code>. The
fixtures that you will define will be shared among all tests in your test
suite. However, defining fixtures in the root <code>conftest.py</code> might be useless
and it would slow down testing if such fixtures are not used by all tests.</p>
<blockquote>
<p>Does it have other uses?</p>
</blockquote>
<p>Yes it does.</p>
<ul>
<li>
<p><strong>Fixtures</strong> : Define fixtures for static data used by tests. This data can be accessed by all tests in the suite unless specified otherwise. This could be data as well as helpers of modules which will be passed to all tests.</p>
</li>
<li>
<p><strong>External plugin loading</strong> : <code>conftest.py</code> is used to import external plugins or modules. By defining the following global variable, pytest will load the module and make it available for its test. Plugins are generally files defined in your project or other modules which might be needed in your tests. You can also load a set of predefined plugins as explained here.</p>
</li>
</ul>
<p><code>pytest_plugins = "someapp.someplugin"</code></p>
<ul>
<li>
<p><strong>Hooks</strong> : You can specify hooks such as setup and teardown methods and much more to improve your tests. For a set of available hooks, read Hooks link. Example:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nv">def</span><span class="w"> </span><span class="nv">pytest_runtest_setup</span><span class="ss">(</span><span class="nv">item</span><span class="ss">)</span>:
<span class="w">   </span><span class="s2">""" called before ``pytest_runtest_call(item). """</span>
<span class="w">   </span>#<span class="k">do</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">stuff</span>`
</pre></div>

</li>
<li>
<p><strong>Test root path</strong> : This is a bit of a hidden feature. By defining <code>conftest.py</code> in your root path, you will have <code>pytest</code> recognizing your application modules without specifying <code>PYTHONPATH</code>. In the background, py.test modifies your <code>sys.path</code> by including all submodules which are found from the root path.</p>
</li>
</ul>
<blockquote>
<p>Can I have more than one conftest.py file?</p>
</blockquote>
<p>Yes you can and it is strongly recommended if your test structure is somewhat
complex. <code>conftest.py</code> files have directory scope. Therefore, creating
targeted fixtures and helpers is good practice.</p>
<blockquote>
<p>When would I want to do that? Examples will be appreciated.</p>
</blockquote>
<p>Several cases could fit:</p>
<p>Creating a set of tools or <strong>hooks</strong> for a particular group of tests.</p>
<p><strong>root/mod/conftest.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">pytest_runtest_setup</span><span class="ss">(</span><span class="nv">item</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"I am mod"</span><span class="ss">)</span>
<span class="w">    </span>#<span class="k">do</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">stuff</span>


<span class="nv">test</span><span class="w"> </span><span class="nv">root</span><span class="o">/</span><span class="nv">mod2</span><span class="o">/</span><span class="nv">test</span>.<span class="nv">py</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">NOT</span><span class="w"> </span><span class="nv">produce</span><span class="w"> </span><span class="s2">"I am mod"</span>
</pre></div>

<p>Loading a set of <strong>fixtures</strong> for some tests but not for others.</p>
<p><strong>root/mod/conftest.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">@pytest</span><span class="p">.</span><span class="n">fixture</span><span class="p">()</span>
<span class="n">def</span><span class="w"> </span><span class="n">fixture</span><span class="p">()</span><span class="err">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ss">"some stuff"</span>
</pre></div>

<p><strong>root/mod2/conftest.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">@pytest</span><span class="p">.</span><span class="n">fixture</span><span class="p">()</span>
<span class="n">def</span><span class="w"> </span><span class="n">fixture</span><span class="p">()</span><span class="err">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ss">"some other stuff"</span>
</pre></div>

<p><strong>root/mod2/test.py</strong></p>
<div class="code"><pre class="code literal-block">def test(fixture):
    print(fixture)
</pre></div>

<p>Will print "some other stuff".</p>
<p><strong>Overriding</strong> hooks inherited from the root <code>conftest.py</code>.</p>
<p><strong>root/mod/conftest.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">pytest_runtest_setup</span><span class="ss">(</span><span class="nv">item</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"I am mod"</span><span class="ss">)</span>
<span class="w">    </span>#<span class="k">do</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">stuff</span>
</pre></div>

<p><strong>root/conftest.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">pytest_runtest_setup</span><span class="ss">(</span><span class="nv">item</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"I am root"</span><span class="ss">)</span>
<span class="w">    </span>#<span class="k">do</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">stuff</span>
</pre></div>

<p>By running any test inside <code>root/mod</code>, only "I am mod" is printed.</p>
<p>You can read more about <code>conftest.py</code> here.</p>
<p><strong>EDIT:</strong></p>
<blockquote>
<p>What if I need plain-old helper functions to be called from a number of
tests in different modules - will they be available to me if I put them in a
conftest.py? Or should I simply put them in a helpers.py module and import
and use it in my test modules?</p>
</blockquote>
<p>You can use <code>conftest.py</code> to define your helpers. However, you should follow
common practice. Helpers can be used as fixtures at least in <code>pytest</code>. For
example in my tests I have a mock redis helper which I inject into my tests
this way.</p>
<p><strong>root/helper/redis/redis.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">@pytest</span><span class="p">.</span><span class="n">fixture</span>
<span class="n">def</span><span class="w"> </span><span class="n">mock_redis</span><span class="p">()</span><span class="err">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">MockRedis</span><span class="p">()</span>
</pre></div>

<p><strong>root/tests/stuff/conftest.py</strong></p>
<div class="code"><pre class="code literal-block">pytest_plugin="helper.redis.redis"
</pre></div>

<p><strong>root/tests/stuff/test.py</strong></p>
<div class="code"><pre class="code literal-block">def test(mock_redis):
    print(mock_redis.get('stuff'))
</pre></div>

<p>This will be a test module that you can freely import in your tests. <strong>NOTE</strong>
that you could potentially name <code>redis.py</code> as <code>conftest.py</code> if your module
<code>redis</code> contains more tests. However, that practice is discouraged because of
ambiguity.</p>
<p>If you want to use <code>conftest.py</code>, you can simply put that helper in your root
<code>conftest.py</code> and inject it when needed.</p>
<p><strong>root/tests/conftest.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">@pytest</span><span class="p">.</span><span class="n">fixture</span>
<span class="n">def</span><span class="w"> </span><span class="n">mock_redis</span><span class="p">()</span><span class="err">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">MockRedis</span><span class="p">()</span>
</pre></div>

<p><strong>root/tests/stuff/test.py</strong></p>
<div class="code"><pre class="code literal-block">def test(mock_redis):
    print(mock_redis.get(stuff))
</pre></div>

<p>Another thing you can do is to write an installable plugin. In that case your
helper can be written anywhere but it needs to define an entry point to be
installed in your and other potential test frameworks. See this.</p>
<p>If you don't want to use fixtures, you could of course define a simple helper
and just use the plain old import wherever it is needed.</p>
<p><strong>root/tests/helper/redis.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">MockRedis</span>():
    <span class="c1"># stuff</span>
</pre></div>

<p><strong>root/tests/stuff/test.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">helper.redis</span> <span class="kn">import</span> <span class="n">MockRedis</span>

<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">MockRedis</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stuff</span><span class="p">))</span>
</pre></div>

<p>However, here you might have problems with the path since the module is not in
a child folder of the test. You should be able to overcome this (not tested)
by adding an <code>__init__.py</code> to your helper</p>
<p><strong>root/tests/helper/ </strong>init<strong>.py</strong></p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">.redis</span> <span class="kn">import</span> <span class="n">MockRedis</span>
</pre></div>

<p>Or simply adding the helper module to your <code>PYTHONPATH</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In a wide meaning <code>conftest.py</code> is a local per-directory plugin. Here you
define directory-specific hooks and fixtures. In my case a have a root
directory containing project specific tests directories. Some common magic is
stationed in 'root' <code>conftest.py</code>. Project specific - in their own ones. Can't
see anything bad in storing fixtures in <code>conftest.py</code> unless they are not used
widely (In that case I prefer to define them in test files directly)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-mark-up-phone-numbers/" class="u-url">How to mark-up phone numbers?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-mark-up-phone-numbers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:40:21+08:00" itemprop="datePublished" title="2023-03-03 05:40">2023-03-03 05:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to mark up a phone number as callable link in an HTML document. I have
read the microformats approach, and I know, that the <code>tel:</code> scheme would be
standard, but is quite literally nowhere implemented.</p>
<p>Skype defines, as far as I know, <code>skype:</code> and <code>callto:</code>, the latter having
gained some popularity. I assume, that other companies have either other
schemes or jump on the <code>callto:</code> train.</p>
<p>What would be a best practice to mark-up a phone number, so that as many
people as possible with VoIP software can just click on a link to get a call?</p>
<p>Bonus question: Does anyone know about complications with emergency numbers
such as 911 in US or 110 in Germany?</p>
<p><strong>Update:</strong> Microsoft NetMeeting takes <code>callto:</code> schemes under WinXP. This
question suggests, that Microsoft Office Communicator will handle <code>tel:</code>
schemes but not <code>callto:</code> ones. Great, Redmond!</p>
<p><strong>Update 2:</strong> Two and a half years later now. It seems to boil down to what
you want to do with the number. In mobile context, <code>tel:</code> is the way to go.
Targeting desktops it's up to you, if you think your users are more Skype
people (<code>callto:</code>) or will more likely have something like Google Voice
(<code>tel:</code>) installed. My personal opinion is, when in doubt use <code>tel:</code> (in line
with @Sidnicious' answer).</p>
<p><strong>Update 3:</strong> User @rybo111 noted, that Skype in Chrome has meanwhile jumped
on the <code>tel:</code> bandwagon. I cannot verify this, because no machine with both at
hand, but if it's true, it means we have finally a winner here: <code>tel:</code></p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>tel:</code> scheme was used in the late 1990s and documented in early 2000 with
RFC 2806 (which was obsoleted by the more-thorough RFC 3966 in 2004) and
continues to be improved. Supporting <code>tel:</code> on the iPhone was not an arbitrary
decision.</p>
<p><code>callto:</code>, while supported by Skype, <strong>is not a standard</strong> and should be
avoided unless specifically targeting Skype users.</p>
<p>Me? I'd just start including properly-formed <code>tel:</code> URIs on your pages
(without sniffing the user agent) and wait for the rest of the world's phones
to catch up :) .</p>
<p><strong>Example</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"tel:+18475555555"</span><span class="nt">&gt;</span>1-847-555-5555<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>My test results:</p>
<p><strong>callto:</strong></p>
<ul>
<li>Nokia Browser: nothing happens</li>
<li>Google Chrome: asks to run skype to call the number</li>
<li>Firefox: asks to choose a program to call the number</li>
<li>IE: asks to run skype to call the number</li>
</ul>
<p><strong>tel:</strong></p>
<ul>
<li>Nokia Browser: working</li>
<li>Google Chrome: nothing happens</li>
<li>Firefox: "Firefox doesnt know how to open this url"</li>
<li>IE: could not find url</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1634.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1632.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
