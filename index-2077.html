<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2077) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2077.html">
<link rel="prev" href="index-2078.html" type="text/html">
<link rel="next" href="index-2076.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/shell-script-remove-first-and-last-quote-from-a-variable/" class="u-url">Shell script - remove first and last quote (") from a variable</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/shell-script-remove-first-and-last-quote-from-a-variable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:23:56+08:00" itemprop="datePublished" title="2023-03-03 16:23">2023-03-03 16:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Below is the snippet of a shell script from a larger script. It removes the
quotes from the string that is held by a variable. I am doing it using sed,
but is it efficient? If not, then what is the efficient way?</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/shell-script-remove-first-and-last-quote-from-a-variable/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/sh</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/shell-script-remove-first-and-last-quote-from-a-variable/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/shell-script-remove-first-and-last-quote-from-a-variable/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="nv">opt</span><span class="o">=</span><span class="s2">"\"html\\test\\\""</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/shell-script-remove-first-and-last-quote-from-a-variable/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="nv">temp</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$opt</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">'s/.\(.*\)/\1/'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">'s/\(.*\)./\1/'</span><span class="sb">`</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/shell-script-remove-first-and-last-quote-from-a-variable/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$temp</span>
</code></td>
</tr>
</table></div>
<p><br><br></p>
<h2>Answer</h2>
<p>There's a simpler and more efficient way, using the native shell prefix/suffix
removal feature:</p>
<div class="code"><pre class="code literal-block">temp="<span class="cp">${</span><span class="n">opt</span><span class="o">%</span>\<span class="s2">"</span><span class="cp">}</span>"
temp="<span class="cp">${</span><span class="n">temp</span><span class="c1">#\"</span><span class="cp">}</span>"
echo<span class="w"> </span>"<span class="nv">$temp</span>"
</pre></div>

<p><code>${opt%\"}</code> will remove the suffix <code>"</code> (escaped with a backslash to prevent
shell interpretation).</p>
<p><code>${temp#\"}</code> will remove the prefix <code>"</code> (escaped with a backslash to prevent
shell interpretation).</p>
<p>Another advantage is that it will remove surrounding quotes only if there are
surrounding quotes.</p>
<p>BTW, your solution always removes the first and last character, whatever they
may be (of course, I'm sure you know your data, but it's always better to be
sure of what you're removing).</p>
<p>Using sed:</p>
<div class="code"><pre class="code literal-block">echo "$opt" | sed -e 's/^"//' -e 's/"$//'
</pre></div>

<p><strong>(Improved version, as indicated by jfgagne, getting rid of echo)</strong></p>
<div class="code"><pre class="code literal-block">sed -e 's/^"//' -e 's/"$//' &lt;&lt;&lt;"$opt"
</pre></div>

<p>So it replaces a leading <code>"</code> with nothing, and a trailing <code>"</code> with nothing
too. In the same invocation (there isn't any need to pipe and start another
sed. Using <code>-e</code> you can have multiple text processing).</p>
<p><br></p>
<h3>Suggest</h3>
<p>There's a simpler and more efficient way, using the native shell prefix/suffix
removal feature:</p>
<div class="code"><pre class="code literal-block">temp="<span class="cp">${</span><span class="n">opt</span><span class="o">%</span>\<span class="s2">"</span><span class="cp">}</span>"
temp="<span class="cp">${</span><span class="n">temp</span><span class="c1">#\"</span><span class="cp">}</span>"
echo<span class="w"> </span>"<span class="nv">$temp</span>"
</pre></div>

<p><code>${opt%\"}</code> will remove the suffix <code>"</code> (escaped with a backslash to prevent
shell interpretation).</p>
<p><code>${temp#\"}</code> will remove the prefix <code>"</code> (escaped with a backslash to prevent
shell interpretation).</p>
<p>Another advantage is that it will remove surrounding quotes only if there are
surrounding quotes.</p>
<p>BTW, your solution always removes the first and last character, whatever they
may be (of course, I'm sure you know your data, but it's always better to be
sure of what you're removing).</p>
<p>Using sed:</p>
<div class="code"><pre class="code literal-block">echo "$opt" | sed -e 's/^"//' -e 's/"$//'
</pre></div>

<p><strong>(Improved version, as indicated by jfgagne, getting rid of echo)</strong></p>
<div class="code"><pre class="code literal-block">sed -e 's/^"//' -e 's/"$//' &lt;&lt;&lt;"$opt"
</pre></div>

<p>So it replaces a leading <code>"</code> with nothing, and a trailing <code>"</code> with nothing
too. In the same invocation (there isn't any need to pipe and start another
sed. Using <code>-e</code> you can have multiple text processing).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-npm-install-say-i-have-unmet-dependencies/" class="u-url">Why does npm install say I have unmet dependencies?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-npm-install-say-i-have-unmet-dependencies/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:23:31+08:00" itemprop="datePublished" title="2023-03-03 16:23">2023-03-03 16:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a node package. When I run <code>npm install</code> from the package root, it
installs a bunch of things, but then prints several error messages that look
like this:</p>
<blockquote>
<p>npm WARN unmet dependency
/Users/seanmackesey/google_drive/code/explore/generator/node_modules/findup-
sync/node_modules/glob requires graceful-fs@'~1.2.0' but will load</p>
</blockquote>
<p>I must be confused about what exactly <code>npm install</code> does. If it detects a
dependency, shouldn't it install it? Under what conditions does it give me
error messages like this, and how can I resolve the dependencies?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I believe it is because the dependency resolution is a bit broken, see
https://github.com/npm/npm/issues/1341#issuecomment-20634338</p>
<p>Following are the possible solution :</p>
<ol>
<li>
<p>Manually need to install the top-level modules, containing unmet dependencies: <code>npm install findup-sync@0.1.2</code></p>
</li>
<li>
<p>Re-structure your package.json. Place all the high-level modules (serves as a dependency for others modules) at the bottom.</p>
</li>
<li>
<p>Re-run the <code>npm install</code> command. </p>
</li>
</ol>
<p>The problem could be caused by npm's failure to download all the package due
to timed-out or something else.</p>
<p>Note: You can also install the failed packages manually as well using <code>npm
install findup-sync@0.1.2</code>.</p>
<p>Before running <code>npm install</code>, performing the following steps may help:</p>
<ul>
<li>remove node_modules using <code>rm -rf node_modules/</code>
</li>
<li>run <code>npm cache clean</code>
</li>
</ul>
<p>Why 'removing node_modules' sometimes is necessary? When a nested module fails
to install during <code>npm install</code>, subsequent <code>npm install</code> won't detect those
missing nested dependencies.</p>
<p>If that's the case, sometimes it's sufficient to remove the top-level
dependency of those missing nested modules, and running <code>npm install</code> again.
See</p>
<p><br></p>
<h3>Suggest</h3>
<p>It happened to me when the WIFI went down during an <code>npm install</code>. Removing
<code>node_modules</code> and re-running <code>npm install</code> fixed it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-difference-between-console-dir-and-console-log/" class="u-url">What's the difference between console.dir and console.log?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-difference-between-console-dir-and-console-log/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:23:07+08:00" itemprop="datePublished" title="2023-03-03 16:23">2023-03-03 16:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Chrome the <code>console</code> object defines two methods that seem to do the same
thing:</p>
<div class="code"><pre class="code literal-block">console.log(...)
console.dir(...)
</pre></div>

<p>I read somewhere online that <code>dir</code> takes a copy of the object before logging
it, whereas <code>log</code> just passes the reference to the console, meaning that by
the time you go to inspect the object you logged, it may have changed. However
some preliminary testing suggests that there's no difference and that they
both suffer from potentially showing objects in different states than when
they were logged.</p>
<p>Try this in the Chrome console (<code>Ctrl</code>+<code>Shift</code>+<code>J</code>) to see what I mean:</p>
<div class="code"><pre class="code literal-block">&gt; o = { foo: 1 }
&gt; console.log(o)
&gt; o.foo = 2
</pre></div>

<p>Now, expand the <code>[Object]</code> beneath the log statement and notice that it shows
<code>foo</code> with a value of 2. The same is true if you repeat the experiment using
<code>dir</code> instead of <code>log</code>.</p>
<p>My question is, why do these two seemingly identical functions exist on
<code>console</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In Firefox, these function behave quite differently: <code>log</code> only prints out a
<code>toString</code> representation, whereas <code>dir</code> prints out a navigable tree.</p>
<p>In Chrome, <code>log</code> already prints out a tree -- <em>most of the time</em>. However,
Chrome's <code>log</code> still stringifies certain classes of objects, even if they have
properties. Perhaps the clearest example of a difference is a regular
expression:</p>
<div class="code"><pre class="code literal-block">&gt; console.log(/foo/);
/foo/

&gt; console.dir(/foo/);
* /foo/
    global: false
    ignoreCase: false
    lastIndex: 0
    ...
</pre></div>

<p>You can also see a clear difference with arrays (e.g., <code>console.dir([1,2,3])</code>)
which are <code>log</code>ged differently from normal objects:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>

<span class="o">&gt;</span><span class="w"> </span><span class="n">console</span><span class="p">.</span><span class="n">dir</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="o">*</span><span class="w"> </span><span class="n">Array</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="w">    </span><span class="mi">0</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="nl">length</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="o">*</span><span class="w"> </span><span class="n">__proto__</span><span class="o">:</span><span class="w"> </span><span class="n">Array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="nl">concat</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">concat</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="n">native</span><span class="w"> </span><span class="n">code</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="nl">constructor</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">Array</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="n">native</span><span class="w"> </span><span class="n">code</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="nl">entries</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">entries</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="n">native</span><span class="w"> </span><span class="n">code</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">...</span>
</pre></div>

<p>DOM objects also exhibit differing behavior, as noted on another answer.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Another useful difference in Chrome exists when sending DOM elements to the
console.</p>
<p><img alt="" src="https://i.imgur.com/DozDcYR.png"></p>
<p>Notice:</p>
<ul>
<li>
<code>console.log</code> prints the element in an HTML-like tree</li>
<li>
<code>console.dir</code> prints the element in a JSON-like tree</li>
</ul>
<p>Specifically, <code>console.log</code> gives special treatment to DOM elements, whereas
<code>console.dir</code> does not. This is often useful when trying to see the full
representation of the DOM JS object.</p>
<p>There's more information in the Chrome Console API reference about this and
other functions.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2078.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2076.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
