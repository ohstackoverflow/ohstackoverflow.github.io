<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 876) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-876.html">
<link rel="prev" href="index-877.html" type="text/html">
<link rel="next" href="index-875.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wo-ying-gai-ru-he-chu-li-package-xxx-is-not-available-for-r-version-xyz-jing-gao/" class="u-url">我应该如何处理“package 'xxx' is not available (for R version xyz)”警告？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/wo-ying-gai-ru-he-chu-li-package-xxx-is-not-available-for-r-version-xyz-jing-gao/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:32:34+08:00" itemprop="datePublished" title="2023-02-17 18:32">2023-02-17 18:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我试图安装一个包，使用</p>
<div class="code"><pre class="code literal-block">install.packages("foobarbaz")
</pre></div>

<p>但收到警告</p>
<div class="code"><pre class="code literal-block"><span class="nv">Warning</span><span class="w"> </span><span class="nv">message</span>:
<span class="nv">package</span><span class="w"> </span><span class="s1">'foobarbaz'</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="ss">(</span><span class="k">for</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="nv">x</span>.<span class="nv">y</span>.<span class="nv">z</span><span class="ss">)</span>
</pre></div>

<p>为什么 R 认为包不可用？</p>
<p>另请参阅这些问题，这些问题涉及此问题的特定实例：</p>
<p>我的包不适用于 R 2.15.2<br>
包 'Rbbg' 不可用（对于 R 版本 2.15.2）<br>
包不可用（对于 R 版本 2.15.2）<br>
包 doMC NOT available for R version 3.0.0 warning in install.packages<br>
依赖项“Rglpk”不适用于包“fPortfolio”<br>
当包不适用于我们的 R 版本时该怎么办？<br>
R 的 bigvis 包是否不适用于 R 版本 3.0.1？<br>
包“syncwave”/“mvcwt”不可用（对于 R 版本 3.0.2）<br>
包“钻石”不可用（对于 R 版本 3.0.0）<br>
R 的 plyr 包是否不适用于 R 版本 3.0.2？<br>
包 bigmemory 未安装在 R 64 3.0.2<br>
包“makeR”不可用（对于版本 3.0.2）<br>
包“RTN”不可用（对于 R 版本 3.0.1）<br>
安装 geoR 包时遇到问题<br>
包“twitterR”不可用（对于 R 版本 3.1.0）<br>
如何安装“Rcpp，包？我得到“包不可用”<br>
包“数据集”不可用（对于 R 版本 3.1.1）<br>
“包'rhipe'不可用（对于 R 版本 3.1.2）”</p>
<p><br><br></p>
<h2>解答</h2>
<p><strong>1.你不会拼写</strong></p>
<p>首先要测试的是 <em>您是否正确拼写了包的名称？</em> 包名称在 R 中区分大小写。</p>
<hr>
<p><strong>2.你没有查看正确的存储库</strong></p>
<p>接下来，您应该检查包是否可用。类型</p>
<div class="code"><pre class="code literal-block">setRepositories()
</pre></div>

<p>另见?setRepositories。</p>
<p>查看 R 将在哪些存储库中查找您的包，并可选择选择一些额外的存储库。至少，如果您使用
Windows，您通常希望<code>CRAN</code>被选中，如果您进行任何生物分析，则通常希望被选中。<code>CRAN (extras)``Bioc*</code></p>
<p><code>setRepositories(ind = c(1:6, 8))</code>要永久更改此设置，请在您的文件中添加一行<code>Rprofile.site</code>。</p>
<hr>
<p><strong>3.包不在你选择的仓库中</strong></p>
<p>使用返回所有可用的包</p>
<div class="code"><pre class="code literal-block"><span class="n">ap</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">available.packages</span><span class="p">()</span>
</pre></div>

<p>另请参阅R 可用包的名称? available.packages。</p>
<p>由于这是一个大矩阵，您可能希望使用数据查看器来检查它。或者，您可以通过对行名称进行测试来快速检查包是否可用。</p>
<div class="code"><pre class="code literal-block">View(ap)
"foobarbaz" %in% rownames(ap)
</pre></div>

<p>或者，可以在浏览器中查看CRAN、CRAN (extras)、Bioconductor、R-forge、RForge和GitHub的可用包列表。</p>
<p>与 CRAN 镜像交互时，您可能会收到的另一个可能的警告消息是：</p>
<div class="code"><pre class="code literal-block"><span class="n">Warning</span><span class="o">:</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">repository</span>
</pre></div>

<p>这可能表明所选的 CRAN 存储库当前不可用。您可以选择不同的镜像并<code>chooseCRANmirror()</code>再次尝试安装。</p>
<hr>
<p>软件包可能不可用的原因有多种。</p>
<hr>
<p><strong>4.你不想要包裹</strong></p>
<p>也许你真的不想要一个包裹。人们很容易混淆包和库，或者包和数据集之间的区别。</p>
<blockquote>
<p>包是扩展 R 的材料的标准化集合，例如提供代码、数据或文档。库是一个地方（目录），R 知道在其中找到它可以使用的包</p>
</blockquote>
<p>要查看可用数据集，请键入</p>
<div class="code"><pre class="code literal-block">data()
</pre></div>

<hr>
<p><strong>5. R 或 Bioconductor 已过时</strong></p>
<p>它可能依赖于更新版本的 R（或者它导入/依赖的包之一）。看着</p>
<div class="code"><pre class="code literal-block">ap["foobarbaz", "Depends"]
</pre></div>

<p>并考虑将您的 R 安装更新到当前版本。在 Windows 上，这最容易通过<code>installr</code>包完成。</p>
<div class="code"><pre class="code literal-block">library(installr)
updateR()
</pre></div>

<p>（当然，你可能需要<code>install.packages("installr")</code>先。）</p>
<p>等效于 Bioconductor 包，您可能需要更新您的 Bioconductor 安装。</p>
<div class="code"><pre class="code literal-block">source("http://bioconductor.org/biocLite.R")
biocLite("BiocUpgrade")
</pre></div>

<hr>
<p><strong>6. 包裹过期</strong></p>
<p>它可能已被存档（如果它不再维护并且不再通过<code>R CMD check</code>测试）。</p>
<p>在这种情况下，您可以使用加载旧版本的包<code>install_version()</code></p>
<div class="code"><pre class="code literal-block">library(remotes)
install_version("foobarbaz", "0.1.2")
</pre></div>

<p>另一种方法是从 GitHub CRAN 镜像安装。</p>
<div class="code"><pre class="code literal-block">library(remotes)
install_github("cran/foobarbaz")
</pre></div>

<hr>
<p><strong>7.没有Windows/OS X/Linux二进制文件</strong></p>
<p>由于需要 CRAN 没有的额外软件，它可能没有Windows
二进制文件。此外，某些软件包只能通过某些或所有平台的源代码获得。在这种情况下，存储库中可能有一个版本<code>CRAN
(extras)</code>（见<code>setRepositories</code>上文）。</p>
<p>如果软件包需要编译代码（例如 C、C++、FORTRAN），则在 Windows 上安装Rtools或在 OS X 上安装XCode
附带的开发人员工具，并通过以下方式安装软件包的源版本：</p>
<div class="code"><pre class="code literal-block"><span class="nv">install</span>.<span class="nv">packages</span><span class="ss">(</span><span class="s2">"foobarbaz"</span>,<span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">Or</span><span class="w"> </span><span class="nv">equivalently</span>,<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Bioconductor</span><span class="w"> </span><span class="nv">packages</span>:
<span class="nv">source</span><span class="ss">(</span><span class="s2">"http://bioconductor.org/biocLite.R"</span><span class="ss">)</span>
<span class="nv">biocLite</span><span class="ss">(</span><span class="s2">"foobarbaz"</span>,<span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="ss">)</span>
</pre></div>

<p><code>NeedsCompilation</code>在 CRAN 上，您可以通过查看描述中的标志来判断是否需要特殊工具来从源代码构建包。</p>
<hr>
<p><strong>8. 包在GitHub/Bitbucket/Gitorious</strong></p>
<p>它可能在 GitHub/Bitbucket/Gitorious 上有一个存储库。这些包需要<code>remotes</code>安装包。</p>
<div class="code"><pre class="code literal-block">library(remotes)
install_github("packageauthor/foobarbaz")
install_bitbucket("packageauthor/foobarbaz")
install_gitorious("packageauthor/foobarbaz")
</pre></div>

<p>（与 一样<code>installr</code>，您可能需要<code>install.packages("remotes")</code>先这样做。）</p>
<hr>
<p><strong>9.没有源版本包</strong></p>
<p>虽然您的包的二进制版本可用，但源版本不可用。您可以通过设置关闭此检查</p>
<div class="code"><pre class="code literal-block">options(install.packages.check.source = "no")
</pre></div>

<p>如imanuelc 的此 SO 回答和 的详细信息部分所述<code>?install.packages</code>。</p>
<hr>
<p><strong>10. 包在非标准仓库中</strong></p>
<p>您的包位于非标准存储库中（例如<code>Rbbg</code>）。假设它合理地符合 CRAN 标准，您仍然可以使用下载它<code>install.packages</code>；您只需指定存储库
URL。</p>
<div class="code"><pre class="code literal-block">install.packages("Rbbg", repos = "http://r.findata.org")
</pre></div>

<p><code>RHIPE</code>另一方面，它不在类似 CRAN 的存储库中，并且有自己的安装说明。</p>
<p><br></p>
<h3>更多建议</h3>
<p>在 R 3.2.3（2016 年新版本）中有一个错误，有时会阻止它找到正确的包。解决方法是手动设置存储库：</p>
<div class="code"><pre class="code literal-block">install.packages("lubridate", dependencies=TRUE, repos='http://cran.rstudio.com/')
</pre></div>

<p>在其他问题中找到解决方案</p>
<p><br><br><a href="posts/how-should-i-deal-with-package-xxx-is-not-available-for-r-version-x-y-z-warning/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/shi-yao-shi-mo-ni/" class="u-url">什么是模拟？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/shi-yao-shi-mo-ni/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:32:08+08:00" itemprop="datePublished" title="2023-02-17 18:32">2023-02-17 18:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>什么是模拟？.</p>
<p><br><br></p>
<h2>解答</h2>
<p>序言：如果你查字典里的名词 <em>mock，</em> 你会发现这个词的其中一个定义是 <em>something made as an imitation</em> 。</p>
<hr>
<p>模拟主要用于单元测试。被测对象可能依赖于其他（复杂）对象。为了隔离您要测试的对象的行为，您可以用模拟真实对象行为的模拟来替换其他对象。如果将真实对象合并到单元测试中是不切实际的，这将很有用。</p>
<p>简而言之，模拟就是创建模拟真实对象行为的对象。</p>
<hr>
<p>有时您可能想要区分 <em>mocking</em> 和 <em>stubbing</em>
。关于这个主题可能会有一些分歧，但我对存根的定义是“最小”模拟对象。存根实现的行为刚好足以让被测对象执行测试。</p>
<p>模拟类似于存根，但测试还将验证被测对象是否按预期调用了模拟。测试的一部分是验证模拟是否被正确使用。</p>
<p>举个例子：你可以通过实现一个简单的内存结构来存储记录来存根数据库。然后被测对象可以读取记录并将记录写入数据库存根以允许它执行测试。这可以测试与数据库无关的对象的一些行为，并且将包含数据库存根只是为了让测试运行。</p>
<p>相反，如果您想要验证被测对象是否将某些特定数据写入数据库，则必须模拟数据库。然后，您的测试将包含关于写入数据库模拟的内容的断言。</p>
<p><br></p>
<h3>更多建议</h3>
<p>其他答案解释了什么是嘲笑。 <em>让我用不同的例子</em> 向您介绍它。相信我，它实际上比您想象的要简单得多。</p>
<p><strong>tl;dr</strong> 它是原始类的一个实例。它注入了其他数据，因此您可以避免测试注入的部分，而只 <em>专注</em> 于测试类/函数的 <strong>实现细节。</strong></p>
<h2>简单示例：</h2>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">func</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="n">num1</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="n">A</span><span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num2</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="n">B</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">let</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">test</span>
<span class="n">assertEqual</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="mi">6</span><span class="p">)</span>
</pre></div>

<p>如您所见，我没有测试 LineA，即我没有验证输入参数。我没有验证 num1、num2 是否为整数。我对此没有断言。</p>
<p>我只是在测试 LineB（我的 <em>实现</em> ）是否给出了模拟值<code>1</code>并且<code>5</code>是否按照我的预期进行。</p>
<p>显然，在现实中这会变得更加复杂。参数可以是自定义对象，如 Person、Address，或者实现细节可以是多个<code>+</code>. 但是测试的逻辑是一样的。</p>
<h3>非编码示例：</h3>
<p>假设您正在构建一台机器来识别用于机场安检的电子设备的类型和品牌名称。机器通过处理它用相机看到的东西来做到这一点。</p>
<p>现在你的经理走进门，要求你对它进行单元测试。</p>
<p>然后，作为开发人员，您可以将 1000 个真实对象（如 MacBook pro、Google Nexus、香蕉、iPad
等）放在它前面，然后测试它是否一切正常。</p>
<p>但您也可以使用 <strong>模拟</strong> 对象，例如外观相同的 MacBook pro（没有真正的内部零件）或它前面的塑料香蕉。您可以避免投资 1000
台真正的笔记本电脑和腐烂的香蕉。</p>
<p>关键是你不是要测试香蕉是不是假的。也没有测试笔记本电脑是否是假的。您所做的只是测试您的机器是否在看到香蕉后会说，<code>not an electronic
device</code>而对于 MacBook Pro，它会说：<code>Laptop,
Apple</code>。对于机器来说，其检测结果对于伪造/模拟电子设备和真实电子设备应该是相同的。如果您的机器还考虑了笔记本电脑（X
射线扫描）或香蕉的内部结构，那么您的模拟机内部结构也需要看起来相同。但您也可以使用不再工作的 MacBook。</p>
<p>如果您的机器测试了设备是否可以开机，那么您需要真正的设备。</p>
<p>上面提到的逻辑也适用于实际代码的单元测试。也就是说，函数应该与您从真实 <em>输入</em> （和交互）中获得的真实值或您在单元测试期间注入的 <em>模拟值一样工作。</em>
就像你如何避免使用真正的香蕉或 MacBook 一样，通过单元测试（和模拟）你可以避免做一些导致服务器返回 500、403、200
等状态代码的事情（强制您的服务器仅在服务器关闭时触发 500，而 200 是在服务器启动时触发。</p>
<p>如果您必须在服务器启动和关闭之间不断等待 10 秒，则很难运行 100 个以网络为中心的测试）。因此，您可以注入/模拟状态代码为 500、200、403
等的响应，并使用注入/模拟值测试您的单元/函数。</p>
<p><strong>意识到：</strong></p>
<p>有时您没有正确模拟实际对象。或者你不嘲笑每一种可能性。例如，你的假笔记本电脑是黑色的，你的机器可以准确地与它们一起工作，但它不能准确地与 <em>白色</em>
假笔记本电脑一起工作。稍后当您将这台机器运送给客户时，他们会抱怨它不能一直工作。您收到随机报告说它不起作用。您需要 3
个月的时间才能弄清楚假冒笔记本电脑的颜色需要更多样，以便您可以适当地测试您的模块。</p>
<p>对于真实的编码示例，对于返回图像数据的状态代码 200 和未返回图像数据的状态代码 200，您的实现可能有所不同。出于这个原因，最好使用提供代码覆盖率的
IDE ，例如下图显示您的单元测试永远不会通过标有 <em>brown</em> 的行。</p>
<p><img alt="在此处输入图像描述" src="images/ias4p.jpg"></p>
<p>图片来源</p>
<h3>真实世界的编码示例：</h3>
<p>假设您正在编写一个 iOS 应用程序并进行网络调用。您的工作是测试 <em>您的</em>
应用程序。测试/确定网络呼叫是否按预期工作不是您的责任。测试它是另一方（服务器团队）的责任。您必须删除此（网络）依赖项，然后继续测试 <em>围绕</em>
它工作的所有代码。</p>
<p>网络调用可以通过 JSON 响应返回不同的状态代码 404、500、200、303 等。</p>
<p>您的应用程序应该适用于 <em>所有</em> 这些（如果出现错误，您的应用程序应该抛出预期的错误）。您使用 mocking
所做的是创建“假想的——类似于真实的”网络响应（例如带有 JSON 文件的 200 代码）并测试您的代码，而 <em>无需</em>
“进行真实的网络调用并等待您的网络响应”。您手动硬编码/返回所有类型网络响应的网络响应，并查看您的应用程序是否按预期工作。（你 <em>永远不会</em>
用不正确的数据假设/测试 200，因为那不是你的责任，你的责任是用正确的 200 测试 <em>你的</em> 应用程序，或者在 400、500
的情况下，你测试你的应用程序是否抛出正确的错误）</p>
<p>这种创造虚构的——类似于真实的东西被称为模拟。</p>
<p>为此，您 <strong>不能</strong> 使用原始代码（您的原始代码没有预先插入的响应，对吗？）。您 <strong>必须</strong>
向其中添加一些东西，注入/插入通常不需要的虚拟数据（或您班级的一部分）。</p>
<p>因此，您创建了一个原始类的实例，并添加了您需要的任何内容（这里是网络 HTTPResponse、数据，或者在失败的情况下，您传递了正确的
errorString、HTTPResponse），然后测试模拟 <em>类</em> 。</p>
<p>长话短说，模拟是为了 <em>简化</em> 和 <em>限制</em> 您正在测试的内容，并让您提供类所依赖的内容。在这个例子中，你 <strong>避免测试</strong> 网络 <strong>调用本身</strong> ，而是
<strong>测试</strong> 你的应用程序是否像你期望的那样 <strong>使用注入的输出/响应</strong> ——通过 <em>模拟</em> 类</p>
<p>不用说，您可以分别测试每个网络响应。</p>
<hr>
<p>现在我一直在想的一个问题是：合同/端点和基本上我的 API 的 JSON 响应不断更新。我如何编写考虑到这一点的单元测试？</p>
<p>对此进行详细说明：假设模型需要一个名为<code>username</code>. 你测试这个并且你的测试通过。2 周后后端将密钥的名称更改为<code>id</code>.
您的测试仍然通过。正确的？或不？</p>
<p>更新模拟是后端开发人员的责任吗？他们提供更新的模拟是否应该成为我们协议的一部分？</p>
<p>上述问题的答案是：单元测试+您作为客户端开发人员的开发过程应该/会捕获过时的模拟响应。如果你问我如何？那么答案是：</p>
<p>如果不使用更新的
API，我们实际的应用程序会失败（或没有失败但没有所需的行为）......因此如果失败......我们将对我们的开发代码进行更改。这再次导致我们的测试失败......我们必须纠正它。（实际上，如果我们要正确地执行
TDD 过程，我们就不会编写任何关于该字段的代码，除非我们为它编写测试......并且看到它失败然后去为它编写实际的开发代码。）</p>
<p>这一切都意味着后端不必说：“嘿，我们更新了模拟”……它 <em>最终</em>
会通过您的代码开发/调试发生。‌ّ因为这是开发过程的一部分！尽管如果后端为您提供模拟响应，那么它会更容易。</p>
<p>我的全部观点是（如果你不能自动获取更新的模拟 API 响应）可能需要人工交互，即手动 <strong>更新</strong> JSON
和召开简短会议以确保它们的值是最新的将成为你流程的一部分</p>
<p>本节的编写得益于我们 CocoaHead 聚会小组中的闲散讨论</p>
<h3>困惑：</h3>
<p>我花了一段时间才不混淆“类的单元测试”和“类的存根/模拟”。例如，在我们的代码库中，我们有：</p>
<ul>
<li>类设备</li>
<li>类 DeviceTests</li>
<li>模拟设备类</li>
<li>类设备管理器</li>
</ul>
<hr>
<ul>
<li>
<code>class Device</code>是实际的类本身。</li>
<li>
<code>class DeviceTests``Device</code>是我们为课程编写单元测试的地方</li>
<li>
<code>class MockDevice</code> is a <em>mock</em> class of <code>Device</code>. We use it only for the purpose of testing. e.g. if our <code>DeviceManager</code> needs to get <em>unit-tested</em> then we need dummy/mock instances of the <code>Device</code> class. The <code>MockDevice</code> can be used to fulfill the need of dummy/mock instances.</li>
</ul>
<p>tldr you use mock classes/objects to test <em>other</em> objects. You don't use mock
objects to test themselves.</p>
<hr>
<p><strong>For iOS devs only:</strong></p>
<p>A very good example of mocking is this Practical Protocol-Oriented talk by
Natasha Muraschev. Just skip to minute 18:30, though the slides may become out
of sync with the actual video 🤷‍♂️</p>
<p>I really like this part from the transcript:</p>
<blockquote>
<p>Because this is testing...we do want to make sure that the <code>get</code> function
from the <code>Gettable</code> is called, <strong>because it can return and the function
could theoretically assign an array of food items from anywhere</strong>. We need
to make sure that it is called;</p>
</blockquote>
<p><br><br><a href="posts/what-is-mocking/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-zai-wo-de-cheng-xu-beng-kui-shi-zi-dong-sheng-cheng-dui-zhan-gen-zong/" class="u-url">如何在我的程序崩溃时自动生成堆栈跟踪</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-zai-wo-de-cheng-xu-beng-kui-shi-zi-dong-sheng-cheng-dui-zhan-gen-zong/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:31:43+08:00" itemprop="datePublished" title="2023-02-17 18:31">2023-02-17 18:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我正在使用 GCC 编译器在 Linux 上工作。当我的 C++ 程序崩溃时，我希望它自动生成堆栈跟踪。</p>
<p>我的程序由许多不同的用户运行，它也在 Linux、Windows 和 Macintosh 上运行（所有版本都使用<code>gcc</code>）。</p>
<p>我希望我的程序能够在崩溃时生成堆栈跟踪，并且下次用户运行它时，它会询问他们是否可以将堆栈跟踪发送给我，以便我可以追踪问题。我可以处理向我发送信息，但我不知道如何生成跟踪字符串。有任何想法吗？</p>
<p><br><br></p>
<h2>解答</h2>
<p>对于 Linux 和我相信 Mac OS X，如果您使用的是 gcc 或任何使用 glibc 的编译器，则可以使用 backtrace()
函数来打印堆栈<code>execinfo.h</code>跟踪并在遇到分段错误时优雅地退出。可以在 libc 手册中找到文档。</p>
<p>这是一个示例程序，它安装一个<code>SIGSEGV</code>处理程序并在出现段错误时打印堆栈跟踪<code>stderr</code>。这里的函数<code>baz()</code>会导致触发处理程序的段错误：</p>
<div class="code"><pre class="code literal-block"><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &lt;execinfo.h&gt;</span>
<span class="c1">#include &lt;signal.h&gt;</span>
<span class="c1">#include &lt;stdlib.h&gt;</span>
<span class="c1">#include &lt;unistd.h&gt;</span>


<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">handler</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">sig</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="o">*</span><span class="n">array</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="w">  </span><span class="n">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="o">*</span><span class="s1">'s for all entries on the stack</span>
<span class="w">  </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">backtrace</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nb">print</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">frames</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stderr</span>
<span class="w">  </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s2">"Error: signal </span><span class="si">%d</span><span class="s2">:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w"> </span><span class="n">sig</span><span class="p">);</span>
<span class="w">  </span><span class="n">backtrace_symbols_fd</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">STDERR_FILENO</span><span class="p">);</span>
<span class="w">  </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">baz</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nb nb-Type">int</span><span class="o">*</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="n">pointer</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="p">);</span><span class="w">       </span><span class="o">//</span><span class="w"> </span><span class="n">causes</span><span class="w"> </span><span class="n">segfault</span>
<span class="p">}</span>

<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">baz</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">bar</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>


<span class="nb nb-Type">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="nb">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">signal</span><span class="p">(</span><span class="n">SIGSEGV</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">);</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">handler</span>
<span class="w">  </span><span class="n">foo</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">baz</span><span class="o">.</span><span class="w">  </span><span class="n">baz</span><span class="w"> </span><span class="n">segfaults</span><span class="o">.</span>
<span class="p">}</span>
</pre></div>

<p>使用 编译<code>-g -rdynamic</code>可以在输出中获取符号信息，glibc 可以使用它来制作漂亮的堆栈跟踪：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>gcc<span class="w"> </span>-g<span class="w"> </span>-rdynamic<span class="w"> </span>./test.c<span class="w"> </span>-o<span class="w"> </span><span class="nb">test</span>
</pre></div>

<p>执行此操作会得到以下输出：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>./test
Error:<span class="w"> </span>signal<span class="w"> </span><span class="m">11</span>:
./test<span class="o">(</span>handler+0x19<span class="o">)[</span>0x400911<span class="o">]</span>
/lib64/tls/libc.so.6<span class="o">[</span>0x3a9b92e380<span class="o">]</span>
./test<span class="o">(</span>baz+0x14<span class="o">)[</span>0x400962<span class="o">]</span>
./test<span class="o">(</span>bar+0xe<span class="o">)[</span>0x400983<span class="o">]</span>
./test<span class="o">(</span>foo+0xe<span class="o">)[</span>0x400993<span class="o">]</span>
./test<span class="o">(</span>main+0x28<span class="o">)[</span>0x4009bd<span class="o">]</span>
/lib64/tls/libc.so.6<span class="o">(</span>__libc_start_main+0xdb<span class="o">)[</span>0x3a9b91c4bb<span class="o">]</span>
./test<span class="o">[</span>0x40086a<span class="o">]</span>
</pre></div>

<p>这显示了堆栈中每个帧的加载模块、偏移量和函数。在这里您可以看到堆栈顶部的信号处理程序，以及之前的 libc
函数<code>main</code>以及<code>main</code>、<code>foo</code>、<code>bar</code>和<code>baz</code>。</p>
<p><br></p>
<h3>更多建议</h3>
<p>它甚至比“man backtrace”更容易，有一个文档很少的库（GNU 特定的）作为 libSegFault.so 与 glibc 一起分发，我相信它是由
Ulrich Drepper 编写的以支持程序 catchsegv（参见“man catchsegv”）。</p>
<p>这给了我们 3 种可能性。而不是运行“program -o hai”：</p>
<ol>
<li>
<p>在 catchsegv 中运行：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>catchsegv<span class="w"> </span>program<span class="w"> </span>-o<span class="w"> </span>hai
</pre></div>

</li>
<li>
<p>在运行时与 libSegFault 链接：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">LD_PRELOAD</span><span class="o">=</span>/lib/libSegFault.so<span class="w"> </span>program<span class="w"> </span>-o<span class="w"> </span>hai
</pre></div>

</li>
<li>
<p>在编译时与 libSegFault 链接：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>gcc<span class="w"> </span>-g1<span class="w"> </span>-lSegFault<span class="w"> </span>-o<span class="w"> </span>program<span class="w"> </span>program.cc
</pre></div>

<p>$ program -o hai</p>
</li>
</ol>
<p>在所有 3 种情况下，您将通过更少的优化（gcc -O0 或 -O1）和调试符号（gcc -g）获得更清晰的回溯。否则，您可能只会得到一堆内存地址。</p>
<p>您还可以通过以下方式捕获更多堆栈跟踪信号：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">SEGFAULT_SIGNALS</span><span class="o">=</span><span class="s2">"all"</span><span class="w">       </span><span class="c1"># "all" signals</span>
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">SEGFAULT_SIGNALS</span><span class="o">=</span><span class="s2">"bus abrt"</span><span class="w">  </span><span class="c1"># SIGBUS and SIGABRT</span>
</pre></div>

<p>输出看起来像这样（注意底部的回溯）：</p>
<div class="code"><pre class="code literal-block"><span class="o">***</span><span class="w"> </span><span class="n">Segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">dump</span><span class="p">:</span>

<span class="w"> </span><span class="n">EAX</span><span class="p">:</span><span class="w"> </span><span class="mi">0000000</span><span class="n">c</span><span class="w">   </span><span class="n">EBX</span><span class="p">:</span><span class="w"> </span><span class="mi">00000080</span><span class="w">   </span><span class="n">ECX</span><span class="p">:</span>
<span class="mi">00000000</span><span class="w">   </span><span class="n">EDX</span><span class="p">:</span><span class="w"> </span><span class="mi">0000000</span><span class="n">c</span><span class="w">  </span><span class="n">ESI</span><span class="p">:</span>
<span class="n">bfdbf080</span><span class="w">   </span><span class="n">EDI</span><span class="p">:</span><span class="w"> </span><span class="mf">080497e0</span><span class="w">   </span><span class="n">EBP</span><span class="p">:</span>
<span class="n">bfdbee38</span><span class="w">   </span><span class="n">ESP</span><span class="p">:</span><span class="w"> </span><span class="n">bfdbee20</span>

<span class="w"> </span><span class="n">EIP</span><span class="p">:</span><span class="w"> </span><span class="mi">0805640</span><span class="n">f</span><span class="w">   </span><span class="n">EFLAGS</span><span class="p">:</span><span class="w"> </span><span class="mi">00010282</span>

<span class="w"> </span><span class="n">CS</span><span class="p">:</span><span class="w"> </span><span class="mi">0073</span><span class="w">   </span><span class="n">DS</span><span class="p">:</span><span class="w"> </span><span class="mi">007</span><span class="n">b</span><span class="w">   </span><span class="n">ES</span><span class="p">:</span><span class="w"> </span><span class="mi">007</span><span class="n">b</span><span class="w">   </span><span class="n">FS</span><span class="p">:</span>
<span class="mi">0000</span><span class="w">   </span><span class="n">GS</span><span class="p">:</span><span class="w"> </span><span class="mi">0033</span><span class="w">   </span><span class="n">SS</span><span class="p">:</span><span class="w"> </span><span class="mi">007</span><span class="n">b</span>

<span class="w"> </span><span class="n">Trap</span><span class="p">:</span><span class="w"> </span><span class="mi">0000000</span><span class="n">e</span><span class="w">   </span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="mi">00000004</span><span class="w">  </span>
<span class="n">OldMask</span><span class="p">:</span><span class="w"> </span><span class="mi">00000000</span><span class="w">  </span><span class="n">ESP</span><span class="o">/</span><span class="k">signal</span><span class="p">:</span>
<span class="n">bfdbee20</span><span class="w">   </span><span class="n">CR2</span><span class="p">:</span><span class="w"> </span><span class="mi">00000024</span>

<span class="w"> </span><span class="n">FPUCW</span><span class="p">:</span><span class="w"> </span><span class="n">ffff037f</span><span class="w">   </span><span class="n">FPUSW</span><span class="p">:</span><span class="w"> </span><span class="n">ffff0000</span><span class="w">  </span>
<span class="n">TAG</span><span class="p">:</span><span class="w"> </span><span class="n">ffffffff</span><span class="w">  </span><span class="n">IPOFF</span><span class="p">:</span><span class="w"> </span><span class="mi">00000000</span><span class="w">  </span>
<span class="n">CSSEL</span><span class="p">:</span><span class="w"> </span><span class="mi">0000</span><span class="w">   </span><span class="n">DATAOFF</span><span class="p">:</span><span class="w"> </span><span class="mi">00000000</span><span class="w">  </span>
<span class="n">DATASEL</span><span class="p">:</span><span class="w"> </span><span class="mi">0000</span>

<span class="w"> </span><span class="n">ST</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span><span class="w"> </span><span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">0000</span><span class="w"> </span><span class="mi">0000000000000000</span><span class="w">  </span><span class="n">ST</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">  </span><span class="n">ST</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">  </span><span class="n">ST</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span>

<span class="n">Backtrace</span><span class="p">:</span>
<span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libSegFault</span><span class="o">.</span><span class="n">so</span><span class="p">[</span><span class="mh">0xb7f9e100</span><span class="p">]</span>
<span class="err">??</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="err">??</span><span class="p">)[</span><span class="mh">0xb7fa3400</span><span class="p">]</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">c</span><span class="o">++/</span><span class="mf">4.3</span><span class="o">/</span><span class="n">bits</span><span class="o">/</span><span class="n">stl_queue</span><span class="o">.</span><span class="n">h</span><span class="p">:</span><span class="mi">226</span><span class="p">(</span><span class="n">_ZNSt5queueISsSt5dequeISsSaISsEEE4pushERKSs</span><span class="p">)[</span><span class="mh">0x805647a</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">player</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">73</span><span class="p">(</span><span class="n">_ZN6Player5inputESs</span><span class="p">)[</span><span class="mh">0x805377c</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">socket</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">159</span><span class="p">(</span><span class="n">_ZN6Socket4ReadEv</span><span class="p">)[</span><span class="mh">0x8050698</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">socket</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">413</span><span class="p">(</span><span class="n">_ZN12ServerSocket4ReadEv</span><span class="p">)[</span><span class="mh">0x80507ad</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">socket</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">300</span><span class="p">(</span><span class="n">_ZN12ServerSocket4pollEv</span><span class="p">)[</span><span class="mh">0x8050b44</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">34</span><span class="p">(</span><span class="n">main</span><span class="p">)[</span><span class="mh">0x8049a72</span><span class="p">]</span>
<span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">i686</span><span class="o">/</span><span class="n">cmov</span><span class="o">/</span><span class="n">libc</span><span class="o">.</span><span class="n">so</span><span class="o">.</span><span class="mi">6</span><span class="p">(</span><span class="n">__libc_start_main</span><span class="o">+</span><span class="mh">0xe5</span><span class="p">)[</span><span class="mh">0xb7d1b775</span><span class="p">]</span>
<span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">buildd</span><span class="o">/</span><span class="n">glibc</span><span class="o">-</span><span class="mf">2.9</span><span class="o">/</span><span class="n">csu</span><span class="o">/../</span><span class="n">sysdeps</span><span class="o">/</span><span class="n">i386</span><span class="o">/</span><span class="n">elf</span><span class="o">/</span><span class="n">start</span><span class="o">.</span><span class="n">S</span><span class="p">:</span><span class="mi">122</span><span class="p">(</span><span class="n">_start</span><span class="p">)[</span><span class="mh">0x8049801</span><span class="p">]</span>
</pre></div>

<p>如果您想了解血淋淋的细节，不幸的是，最好的来源是来源：请参阅http://sourceware.org/git/?p=glibc.git;a=blob;f=debug/segfault.c及其父目录http://sourceware.org/git/?p=glibc.git;a=tree;f=debug</p>
<p><br><br><a href="posts/how-to-automatically-generate-a-stacktrace-when-my-program-crashes/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-877.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-875.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
