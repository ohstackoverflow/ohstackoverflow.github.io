<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 335) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-335.html">
<link rel="prev" href="index-336.html" type="text/html">
<link rel="next" href="index-334.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/dealing-with-java-lang-outofmemoryerror-permgen-space-error/" class="u-url">Dealing with "java.lang.OutOfMemoryError: PermGen space" error</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/dealing-with-java-lang-outofmemoryerror-permgen-space-error/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:14:48+08:00" itemprop="datePublished" title="2023-02-17 04:14">2023-02-17 04:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Recently I ran into this error in my web application:</p>
<blockquote>
<p>java.lang.OutOfMemoryError: PermGen space</p>
</blockquote>
<p>It's a typical Hibernate/JPA + IceFaces/JSF application running on Tomcat 6
and JDK 1.6. Apparently this can occur after redeploying an application a few
times.</p>
<p>What causes it and what can be done to avoid it? How do I fix the problem?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The solution was to add these flags to JVM command line when Tomcat is
started:</p>
<div class="code"><pre class="code literal-block"><span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">CMSClassUnloadingEnabled</span><span class="w"> </span><span class="o">-</span><span class="n">XX</span><span class="p">:</span><span class="o">+</span><span class="n">CMSPermGenSweepingEnabled</span>
</pre></div>

<p>You can do that by shutting down the tomcat service, then going into the
Tomcat/bin directory and running tomcat6w.exe. Under the "Java" tab, add the
arguments to the "Java Options" box. Click "OK" and then restart the service.</p>
<p>If you get an error <em>the specified service does not exist as an installed
service</em> you should run:</p>
<div class="code"><pre class="code literal-block">tomcat6w //ES//servicename
</pre></div>

<p>where <em><strong>servicename</strong></em> is the name of the server as viewed in services.msc</p>
<p>Source: orx's comment on Eric's Agile Answers.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You better try <strong><code>-XX:MaxPermSize=128M</code></strong> rather than <code>-XX:MaxPermGen=128M</code>.</p>
<p>I can not tell the precise use of this memory pool, but it have to do with the
number of classes loaded into the JVM. (Thus enabling class unloading for
tomcat can resolve the problem.) If your applications generates and compiles
classes on the run it is more likely to need a memory pool bigger than the
default.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-quitting-an-application-frowned-upon/" class="u-url">Is quitting an application frowned upon?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-quitting-an-application-frowned-upon/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:14:18+08:00" itemprop="datePublished" title="2023-02-17 04:14">2023-02-17 04:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Moving on in my attempt to learn Android, I just read the following:</p>
<blockquote>
<p>Question: <em>Does the user have a choice to kill the application unless we put
a menu option in to kill it? If no such option exists, how does the user
terminate the application?</em></p>
<p>Answer: (Romain Guy): <em>The user doesn't, the system handles this
automatically. That's what the activity lifecycle (especially
onPause/onStop/onDestroy) is for. No matter what you do, do not put a "quit"
or "exit" application button. It is useless with Android's application
model. This is also contrary to how core applications work.</em></p>
</blockquote>
<p>Hehe, for every step I take in the Android world I run into some sort of
problem =(</p>
<p>Apparently, you cannot quit an application in Android (but the Android system
can very well totally destroy your app whenever it feels like it). What's up
with that? I am starting to think that it's impossible to write an app that
functions as a "normal app" - that the user can quit the app when he/she
decides to do so. That is not something that should be relied upon the OS to
do.</p>
<p>The application I am trying to create is not an application for the Android
Market. It is not an application for "wide use" by the general public, it is a
business app that is going to be used in a very narrow business field.</p>
<p>I was actually really looking forward to developing for the Android platform,
since it addresses a lot of issues that exist in Windows Mobile and .NET.
However, the last week has been somewhat of a turnoff for me... I hope I don't
have to abandon Android, but it doesn't look very good right now =(</p>
<p>Is there a way for me to <strong>really</strong> quit the application?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This will eventually get to your question, but I first want to address a
number of issues you raise in your various comments to the various answers
already given at the time of this writing. I have no intention of changing
your mind -- rather, these are here for others who come to read this post in
the future.</p>
<blockquote>
<p>The point is that I cannot allow for Android to determine when my app is
going to be terminated. that must be the choice of the user.</p>
</blockquote>
<p>Millions of people are perfectly happy with the model where the environment
closes up the application as needed. Those users simply don't think about
"terminating" the Android app, any more than they think about "terminating" a
Web page or "terminating" a thermostat.</p>
<p>iPhone users are much the same way, in that pressing the iPhone button does
not necessarily "feel" like the app was terminated since many iPhone apps pick
up where the user left off, even if the app really was shut down (since iPhone
only allows one third-party app at a time, at present).</p>
<blockquote>
<p>As I said above, there is a lot of things going on in my app (data being
PUSHed to the device, lists with tasks that always should be there, etc.).</p>
</blockquote>
<p>I don't know what "lists with tasks that always should be there" means, but
the "data being PUSHed to the device" is a pleasant fiction and should not be
done by activity in any case. Use a scheduled task (via <code>AlarmManager</code>) to
update your data for maximum reliability.</p>
<blockquote>
<p>Our users log in and can't be doing that every time they get a phone call
and Android decides to kill the app.</p>
</blockquote>
<p>There are many iPhone and Android applications that deal with this. Usually,
it is because they hold onto login credentials, rather than forcing users to
log in every time manually.</p>
<blockquote>
<p>For example, we want to check updates when exiting the application</p>
</blockquote>
<p>That is a mistake on any operating system. For all you know, the reason your
application is being "exited" is because the OS is shutting down, and then
your update process will fail mid-stream. Generally, that's not a good thing.
Either check updates on start or check updates totally asynchronously (e.g.,
via a scheduled task), never on exit.</p>
<blockquote>
<p>Some comments suggest that hitting the back button does not kill the app at
all (see link in my question above).</p>
</blockquote>
<p>Pressing the BACK button does not "kill the app". It finishes the activity
that was on-screen when the user pressed the BACK button.</p>
<blockquote>
<p>It should only terminate when the users want to terminate it - never ever
any other way. If you can't write apps that behave like that in Android,
then I think that Android can't be used for writing real apps =(</p>
</blockquote>
<p>Then neither can Web applications. Or WebOS, if I understand their model
correctly (haven't had a chance to play with one yet). In all of those, users
don't "terminate" anything -- they just leave. iPhone is a bit different, in
that it only presently allows one thing to run at a time (with a few
exceptions), and so the act of leaving implies a fairly immediate termination
of the app.</p>
<blockquote>
<p>Is there a way for me to really quit the application?</p>
</blockquote>
<p>As everybody else told you, users (via BACK) or your code (via <code>finish()</code>) can
close up your currently-running activity. Users generally don't need anything
else, for properly-written applications, any more than they need a "quit"
option for using Web applications.</p>
<hr>
<p>No two application environments are the same, by definition. This means that
you can see trends in environments as new ones arise and others get buried.</p>
<p>For example, there is a growing movement to try to eliminate the notion of the
"file". Most Web applications don't force users to think of files. iPhone apps
typically don't force users to think of files. Android apps generally don't
force users to think of files. And so on.</p>
<p>Similarly, there is a growing movement to try to eliminate the notion of
"terminating" an app. Most Web applications don't force the user to log out,
but rather implicitly log the user out after a period of inactivity. Same
thing with Android, and to a lesser extent, iPhone (and possibly WebOS).</p>
<p>This requires more emphasis on application design, focusing on business goals,
and not sticking with an implementation model tied to a previous application
environment. Developers who lack the time or inclination to do this will get
frustrated with newer environments that break their existing mental model.
This is not the fault of either environment, any more than it is the fault of
a mountain for storms flowing around it rather than through it.</p>
<p>For example, some development environments, like Hypercard and Smalltalk, had
the application and the development tools co-mingled in one setup. This
concept did not catch on much, outside of language extensions to apps (e.g.,
VBA in Excel, Lisp in AutoCAD). Developers who came up with mental models that
presumed the existence of development tools in the app itself, therefore,
either had to change their model or limit themselves to environments where
their model would hold true.</p>
<p>So, when you write:</p>
<blockquote>
<p>Along with other messy things I discovered, I think that developing our app
for Android is not going to happen.</p>
</blockquote>
<p>That would appear to be for the best, for you, for right now. Similarly, I
would counsel you against attempting to port your application to the Web,
since some of the same problems you have reported with Android you will find
in Web applications as well (e.g., no "termination"). Or, conversely, someday
if you <em>do</em> port your app to the Web, you may find that the Web application's
flow may be a better match for Android, and you can revisit an Android port at
that time.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I'd just like to add a correction here for the future readers of this thread.
This particular nuance has escaped my understanding for a long time so I want
to make sure none of you make the same mistakes:</p>
<p><strong><code>System.exit()</code> does not kill your app if you have more than one activity on
the stack.</strong> What actually happens is that <strong>the process is killed and
immediately restarted</strong> with one fewer activity on the stack. This is also
what happens when your app is killed by the Force Close dialog, or even when
you try to kill the process from DDMS. This is a fact that is entirely
undocumented, to my knowledge.</p>
<p>The short answer is, if you want to exit your application, you've got to keep
track of all activities in your stack and <code>finish()</code> ALL of them when the user
wants to exit (and no, there is no way to iterate through the Activity stack,
so you have to manage all of this yourself). Even this does not actually kill
the process or any dangling references you may have. It simply finishes the
activities. Also, I'm not sure whether <code>Process.killProcess(Process.myPid())</code>
works any better; I haven't tested it.</p>
<p>If, on the other hand, it is okay for you to have activities remaining in your
stack, there is another method which makes things super easy for you:
<code>Activity.moveTaskToBack(true)</code> will simply background your process and show
the home screen.</p>
<p>The long answer involves explanation of the philosophy behind this behavior.
The philosophy is born out of a number of assumptions:</p>
<ol>
<li>First of all, this only happens when your app is in the foreground. If it is in the background the process will terminate just fine. However, if it is in the foreground, the OS assumes that the user wants to keep doing whatever he/she was doing. (If you are trying to kill the process from DDMS, you should hit the home button first, and then kill it)</li>
<li>It also assumes that each activity is independent of all the other activities. This is often true, for example in the case that your app launches the Browser Activity, which is entirely separate and was not written by you. The Browser Activity may or may not be created on the same Task, depending on its manifest attributes.</li>
<li>It assumes that each of your activities is completely self-reliant and can be killed/restored in a moment's notice. (I rather dislike this particular assumption, since my app has many activities which rely on a large amount of cached data, too large to be efficiently serialized during <code>onSaveInstanceState</code>, but whaddya gonna do?) For most well-written Android apps this should be true, since you never know when your app is going to be killed off in the background.</li>
<li>The final factor is not so much an assumption, but rather a limitation of the OS: <em>killing the app explicitly is the same as the app crashing, and also the same as Android killing the app to reclaim memory.</em> This culminates in our coup de grace: since Android can't tell if the app exited or crashed or was killed in the background, it assumes the user wants to return where they left off, and so the ActivityManager restarts the process.</li>
</ol>
<p>When you think about it, this is appropriate for the platform. First, this is
exactly what happens when the process is killed in the background and the user
comes back to it, so it needs to be restarted where it left off. Second, this
is what happens when the app crashes and presents the dreaded Force Close
dialog.</p>
<p>Say I want my users to be able to take a picture and upload it. I launch the
Camera Activity from my activity, and ask it to return an image. The Camera is
pushed onto the top of my current Task (rather than being created in its own
Task). If the Camera has an error and it crashes, should that result in the
whole app crashing? From the standpoint of the user, only the Camera failed,
and they should be returned to their previous activity. So it just restarts
the process with all the same Activities in the stack, minus the Camera. Since
your Activities <em>should</em> be designed so that they can be killed and restored
at the drop of a hat, this shouldn't be a problem. Unfortunately, not all apps
can be designed that way, so it <em>is</em> a problem for many of us, no matter what
Romain Guy or anyone else tells you. So, we need to use workarounds.</p>
<p>So, my closing advice:</p>
<ul>
<li>Don't try to kill the process. Either call <code>finish()</code> on all activities or call <code>moveTaskToBack(true)</code>.</li>
<li>If your process crashes or gets killed, and if, like me, you need the data that was in memory which is now lost, you'll need to return to the root activity. To do this, you should call <code>startActivity()</code> with an Intent that contains the <code>Intent.FLAG_ACTIVITY_CLEAR_TOP</code> flag.</li>
<li>If you want to kill your app from the Eclipse DDMS perspective, it had better not be in the foreground, or it will restart itself. You should press the Home button first, and <em>then</em> kill the process.</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/secure-hash-and-salt-for-php-passwords/" class="u-url">Secure hash and salt for PHP passwords</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/secure-hash-and-salt-for-php-passwords/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:13:51+08:00" itemprop="datePublished" title="2023-02-17 04:13">2023-02-17 04:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It is currently said that MD5 is partially unsafe. Taking this into
consideration, I'd like to know which mechanism to use for password
protection.</p>
<p>This question, Is “double hashing” a password less secure than just hashing it
once? suggests that hashing multiple times may be a good idea, whereas How to
implement password protection for individual files? suggests using salt.</p>
<p>I'm using PHP. I want a safe and fast password encryption system. Hashing a
password a million times may be safer, but also slower. How to achieve a good
balance between speed and safety? Also, I'd prefer the result to have a
constant number of characters.</p>
<ol>
<li>The hashing mechanism must be available in PHP</li>
<li>It must be safe</li>
<li>It can use salt (in this case, are all salts equally good? Is there any way to generate good salts?)</li>
</ol>
<p>Also, should I store two fields in the database (one using MD5 and another one
using SHA, for example)? Would it make it safer or unsafer?</p>
<p>In case I wasn't clear enough, I want to know which hashing function(s) to use
and how to pick a good salt in order to have a safe and fast password
protection mechanism.</p>
<p><em>Related questions that don't quite cover my question:</em></p>
<p>What's the difference between SHA and MD5 in PHP<br>
Simple Password Encryption<br>
Secure methods of storing keys, passwords for asp.net<br>
How would you implement salted passwords in Tomcat 5.5</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p><strong>DISCLAIMER</strong> : This answer was written in 2008.</p>
<p>Since then, PHP has given us <code>password_hash</code> and <code>password_verify</code> and,
since their introduction, they are the recommended password hashing &amp;
checking method.</p>
<p>The theory of the answer is still a good read though.</p>
</blockquote>
<h3>TL;DR</h3>
<h4>Don'ts</h4>
<ul>
<li>Don't limit what characters users can enter for passwords. Only idiots do this.</li>
<li>Don't limit the length of a password. If your users want a sentence with supercalifragilisticexpialidocious in it, don't prevent them from using it.</li>
<li>Don't strip or escape HTML and special characters in the password.</li>
<li>Never store your user's password in plain-text.</li>
<li>Never email a password to your user <em>except when they have lost theirs, and you sent a temporary one.</em>
</li>
<li>Never, ever log passwords in any manner.</li>
<li>Never hash passwords with SHA1 or MD5 or even SHA256! Modern crackers can exceed 60 and 180 billion hashes/second (respectively).</li>
<li>Don't mix bcrypt and with the <em>raw</em> output of hash(), either use hex output or base64_encode it. (This applies to any input that may have a rogue <code>\0</code> in it, which can seriously weaken security.)</li>
</ul>
<h4>Dos</h4>
<ul>
<li>Use scrypt when you can; bcrypt if you cannot.</li>
<li>Use PBKDF2 if you cannot use either bcrypt or scrypt, with SHA2 hashes.</li>
<li>Reset everyone's passwords when the database is compromised.</li>
<li>Implement a reasonable 8-10 character minimum length, plus require at least 1 upper case letter, 1 lower case letter, a number, and a symbol. This will improve the entropy of the password, in turn making it harder to crack. (See the "What makes a good password?" section for some debate.)</li>
</ul>
<h3>Why hash passwords anyway?</h3>
<p>The objective behind hashing passwords is simple: preventing malicious access
to user accounts by compromising the database. So the goal of password hashing
is to deter a hacker or cracker by costing them too much time or money to
calculate the plain-text passwords. And time/cost are the best deterrents in
your arsenal.</p>
<p>Another reason that you want a good, robust hash on a user accounts is to give
you enough time to change all the passwords in the system. If your database is
compromised you will need enough time to at <em>least</em> lock the system down, if
not change every password in the database.</p>
<p>Jeremiah Grossman, CTO of Whitehat Security, stated on White Hat Security blog
after a recent password recovery that required brute-force breaking of his
password protection:</p>
<blockquote>
<p>Interestingly, in living out this nightmare, I learned A LOT I didn’t know
about password cracking, storage, and complexity. <em>I’ve come to appreciate
why password storage is ever so much more important than password
complexity. If you don’t know how your password is stored, then all you
really can depend upon is complexity.</em> This might be common knowledge to
password and crypto pros, but for the average InfoSec or Web Security
expert, I highly doubt it.</p>
</blockquote>
<p>(Emphasis mine.)</p>
<h3>What makes a <em>good</em> password anyway?</h3>
<p>Entropy. (Not that I fully subscribe to Randall's viewpoint.)</p>
<p>In short, entropy is how much variation is within the password. When a
password is only lowercase roman letters, that's only 26 characters. That
isn't much variation. Alpha-numeric passwords are better, with 36 characters.
But allowing upper and lower case, with symbols, is roughly 96 characters.
That's a lot better than just letters. One problem is, to make our passwords
memorable we insert patterns—which reduces entropy. Oops!</p>
<p>Password entropy is approximated easily. Using the full range of ascii
characters (roughly 96 typeable characters) yields an entropy of 6.6 per
character, which at 8 characters for a password is still too low (52.679 bits
of entropy) for future security. But the good news is: longer passwords, and
passwords with unicode characters, really increase the entropy of a password
and make it harder to crack.</p>
<p>There's a longer discussion of password entropy on the Crypto StackExchange
site. A good Google search will also turn up a lot of results.</p>
<p>In the comments I talked with @popnoodles, who pointed out that <em>enforcing</em> a
password policy of X length with X many letters, numbers, symbols, etc, can
actually reduce entropy by making the password scheme more predictable. I do
agree. Randomess, as truly random as possible, is always the safest but least
memorable solution.</p>
<p>So far as I've been able to tell, making the world's best password is a
Catch-22. Either its not memorable, too predictable, too short, too many
unicode characters (hard to type on a Windows/Mobile device), too long, etc.
No password is truly good enough for our purposes, so we must protect them as
though they were in Fort Knox.</p>
<h3>Best practices</h3>
<p>Bcrypt and scrypt are the current best practices. Scrypt will be better than
bcrypt in time, but it hasn't seen adoption as a standard by Linux/Unix or by
webservers, and hasn't had in-depth reviews of its algorithm posted yet. But
still, the future of the algorithm does look promising. If you are working
with Ruby there is an scrypt gem that will help you out, and Node.js now has
its own scrypt package. You can use Scrypt in PHP either via the Scrypt
extension or the Libsodium extension (both are available in PECL).</p>
<p>I highly suggest reading the documentation for the crypt function if you want
to understand how to use bcrypt, or finding yourself a good wrapper or use
something like PHPASS for a more legacy implementation. I recommend a minimum
of 12 rounds of bcrypt, if not 15 to 18.</p>
<p>I changed my mind about using bcrypt when I learned that bcrypt only uses
blowfish's key schedule, with a variable cost mechanism. The latter lets you
increase the cost to brute-force a password by increasing blowfish's already
expensive key schedule.</p>
<h3>Average practices</h3>
<p>I almost can't imagine this situation anymore. PHPASS supports PHP 3.0.18
through 5.3, so it is usable on almost every installation imaginable—and
should be used if you don't <em>know for certain</em> that your environment supports
bcrypt.</p>
<p>But suppose that you cannot use bcrypt or PHPASS at all. What then?</p>
<p>Try an implementation of PDKBF2 with the maximum number of rounds that your
environment/application/user-perception can tolerate. The lowest number I'd
recommend is 2500 rounds. Also, make sure to use hash_hmac() if it is
available to make the operation harder to reproduce.</p>
<h3>Future Practices</h3>
<p>Coming in PHP 5.5 is a full password protection library that abstracts away
any pains of working with bcrypt. While most of us are stuck with PHP 5.2 and
5.3 in most common environments, especially shared hosts, @ircmaxell has built
a compatibility layer for the coming API that is backward compatible to PHP
5.3.7.</p>
<h3>Cryptography Recap &amp; Disclaimer</h3>
<p>The computational power required to actually <em>crack</em> a hashed password doesn't
exist. The only way for computers to "crack" a password is to recreate it and
simulate the hashing algorithm used to secure it. The speed of the hash is
linearly related to its ability to be brute-forced. Worse still, most hash
algorithms can be easily parallelized to perform even faster. This is why
costly schemes like bcrypt and scrypt are so important.</p>
<p>You cannot possibly foresee all threats or avenues of attack, and so you must
make your best effort to protect your users <strong>up front</strong>. If you do not, then
you might even miss the fact that you were attacked until it's too late...
<em>and you're liable</em>. To avoid that situation, act paranoid to begin with.
Attack your own software (internally) and attempt to steal user credentials,
or modify other user's accounts or access their data. If you don't test the
security of your system, then you cannot blame anyone but yourself.</p>
<p>Lastly: I am not a cryptographer. Whatever I've said is my opinion, but I
happen to think it's based on good ol' common sense ... and lots of reading.
Remember, be as paranoid as possible, make things as hard to intrude as
possible, and then, if you are still worried, contact a white-hat hacker or
cryptographer to see what they say about your code/system.</p>
<p><br></p>
<h3>Suggest</h3>
<p>A much shorter and safer answer - <strong>don't write your own password mechanism at
all</strong> , use a tried and tested mechanism.</p>
<ul>
<li>PHP 5.5 or higher: password_hash() is good quality and part of PHP core.</li>
<li>PHP 4.x (obsolete): OpenWall's phpass library is much better than most custom code - used in WordPress, Drupal, etc.</li>
</ul>
<p>Most programmers just don't have the expertise to write crypto related code
safely without introducing vulnerabilities.</p>
<p><strong>Quick self-test:</strong> what is password stretching and how many iterations
should you use? If you don't know the answer, you should use
<code>password_hash()</code>, as password stretching is now a critical feature of
password mechanisms due to much faster CPUs and the use of GPUs and FPGAs to
crack passwords at rates of billions of guesses per second (with GPUs).</p>
<p>As of 2012, you could crack all 8-character Windows passwords in 6 hours using
25 GPUs installed in 5 desktop PCs. This is brute-forcing i.e. enumerating and
checking <em>every 8-character Windows password</em> , including special characters,
and is not a dictionary attack. With modern GPUs, you can of course crack more
passwords or use fewer GPUs - or rent the GPUs in the cloud for a few hours at
reasonable cost.</p>
<p>There are also many rainbow table attacks on Windows passwords that run on
ordinary CPUs and are very fast.</p>
<p>All this is because Windows <em>still</em> doesn't salt or stretch its passwords,
even in Windows 10. This is still true in 2021. Don't make the same mistake as
Microsoft did!</p>
<p><strong>See also:</strong></p>
<ul>
<li>excellent answer with more about why <code>password_hash()</code> or <code>phpass</code> are the best way to go.</li>
<li>good blog article giving recommmended 'work factors' (number of iterations) for main algorithms including bcrypt, scrypt and PBKDF2.</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-336.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-334.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
