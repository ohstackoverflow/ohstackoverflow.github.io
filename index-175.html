<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 175) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-175.html">
<link rel="prev" href="index-176.html" type="text/html">
<link rel="next" href="index-174.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/shi-yong-pip-an-zhuang-te-ding-de-bao-ban-ben/" class="u-url">使用 pip 安装特定的包版本</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/shi-yong-pip-an-zhuang-te-ding-de-bao-ban-ben/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:00:41+08:00" itemprop="datePublished" title="2023-02-17 00:00">2023-02-17 00:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>MySQL_python</code>我正在尝试使用通过选项创建的新 virtualenv安装 1.2.2 版<code>--no-site-packages</code>。PyPi
中显示的当前版本是1.2.3。有没有办法安装旧版本？我努力了：</p>
<div class="code"><pre class="code literal-block">pip install MySQL_python==1.2.2
</pre></div>

<p>但是，安装后，它仍然显示<code>MySQL_python-1.2.3-py2.6.egg-info</code>在站点包中。这是这个包特有的问题，还是我做错了什么？</p>
<p><br><br></p>
<h2>解答</h2>
<p><strong>长话短说</strong> ：</p>
<p><strong>截至 2022-12-28 的更新</strong> ：</p>
<p><code>pip install --force-reinstall -v</code></p>
<p>例如：<code>pip install --force-reinstall -v "MySQL_python==1.2.2"</code></p>
<p>这些选项的含义：</p>
<ul>
<li>
<code>--force-reinstall</code>是重新安装所有软件包的选项，即使它们已经是最新的。</li>
<li>
<code>-v</code>是冗长的。您可以组合使用最多<code>-vv</code>3 次（例如 ）以获得更详细的信息（即<code>--force-reinstall -vvv</code>）。</li>
</ul>
<p>感谢@Peter强调了这一点（考虑到首次提出问题的时间，问题的上下文似乎已经扩大了！），Python 的文档讨论了 using
的一个警告<code>-I</code>，因为它可能会破坏您的安装，如果它是用不同的包管理器安装的，或者如果你的包是/是不同的版本。</p>
<hr>
<p>原答案：</p>
<ul>
<li>
<code>pip install -Iv</code>（即<code>pip install -Iv MySQL_python==1.2.2</code>）</li>
</ul>
<hr>
<p>这些选项的含义：</p>
<ul>
<li>
<code>-I</code>代表<code>--ignore-installed</code>将忽略已安装的软件包，覆盖它们。</li>
<li>
<code>-v</code>是冗长的。您可以组合使用最多<code>-vv</code>3 次（例如 ）以获得更详细的信息（即<code>-Ivvv</code>）。</li>
</ul>
<p>有关详细信息，请参阅<code>pip install --help</code></p>
<p>首先，我发现您正在尝试做的事情有两个问题。由于您已经安装了版本，因此您应该卸载当前现有的驱动程序或使用<code>pip install -I
MySQL_python==1.2.2</code></p>
<p>但是，您很快就会发现这是行不通的。如果您查看 pip 的安装日志，或者如果您执行 a，<code>pip install -Iv
MySQL_python==1.2.2</code>您会发现 PyPI URL 链接不适用于 MySQL_python
v1.2.2。您可以在此处验证：http://pypi.python.org/pypi/MySQL-python/1.2.2</p>
<p>由于 sourceforge.net 最近的升级和 PyPI 的陈旧 URL，下载链接 404s 和回退 URL 链接正在无限重定向。</p>
<p>因此要正确安装驱动程序，您可以按照以下步骤操作：</p>
<div class="code"><pre class="code literal-block"><span class="n">pip</span><span class="w"> </span><span class="n">uninstall</span><span class="w"> </span><span class="n">MySQL_python</span>
<span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">-</span><span class="n">Iv</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">sourceforge</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="n">python</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">mysql</span><span class="o">-</span><span class="n">python</span><span class="o">/</span><span class="mf">1.2</span><span class="o">.</span><span class="mi">2</span><span class="o">/</span><span class="n">MySQL</span><span class="o">-</span><span class="n">python</span><span class="o">-</span><span class="mf">1.2</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span><span class="o">/</span><span class="n">download</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>您甚至可以使用带有命令的版本范围<code>pip install</code>。是这样的：</p>
<div class="code"><pre class="code literal-block">pip install 'stevedore&gt;=1.3.0,&lt;1.4.0'
</pre></div>

<p>如果包已经安装并且你想降级它添加<code>--force-reinstall</code>这样的：</p>
<div class="code"><pre class="code literal-block">pip install 'stevedore&gt;=1.3.0,&lt;1.4.0' --force-reinstall
</pre></div>

<p><br><br><a href="posts/installing-specific-package-version-with-pip/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-zai-hui-diao-zhong-fang-wen-zheng-que-de-this/" class="u-url">如何在回调中访问正确的“this”</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-zai-hui-diao-zhong-fang-wen-zheng-que-de-this/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:00:09+08:00" itemprop="datePublished" title="2023-02-17 00:00">2023-02-17 00:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我有一个注册事件处理程序的构造函数：</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">MyConstructor</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">transport</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="n">transport</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Mock</span><span class="w"> </span><span class="n">transport</span><span class="w"> </span><span class="n">object</span>
<span class="k">var</span><span class="w"> </span><span class="n">transport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">on</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">setTimeout</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="o">//</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="k">as</span>
<span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">MyConstructor</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">transport</span><span class="p">);</span>
</pre></div>

<p>但是，我无法<code>data</code>在回调中访问已创建对象的属性。看起来<code>this</code>不是指创建的对象，而是指另一个对象。</p>
<p>我还尝试使用对象方法而不是匿名函数：</p>
<div class="code"><pre class="code literal-block">function MyConstructor(data, transport) {
    this.data = data;
    transport.on('data', this.alert);
}

MyConstructor.prototype.alert = function() {
    alert(this.name);
};
</pre></div>

<p>但它表现出同样的问题。</p>
<p>我怎样才能访问正确的对象？</p>
<p><br><br></p>
<h2>解答</h2>
<h3>你应该知道什么<code>this</code>
</h3>
<p><code>this</code>（又名“上下文”）是每个函数内部的一个特殊关键字，它的值仅取决于函数的调用 <em>方式，而不取决于函数的定义方式/时间/位置。</em>
它不像其他变量那样受词法作用域的影响（箭头函数除外，见下文）。这里有些例子：</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">foo</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<span class="err">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="k">call</span>
<span class="n">foo</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`this`</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n n-Quoted">`window`</span>

<span class="o">//</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">method</span>
<span class="n">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="n">bar</span><span class="o">:</span><span class="w"> </span><span class="n">foo</span><span class="err">}</span><span class="p">;</span>
<span class="n">obj</span><span class="p">.</span><span class="n">bar</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`this`</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n n-Quoted">`obj`</span>

<span class="o">//</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="k">function</span>
<span class="k">new</span><span class="w"> </span><span class="n">foo</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`this`</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">refer</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">inherits</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n n-Quoted">`foo.prototype`</span>
</pre></div>

<p>要了解更多信息<code>this</code>，请查看MDN 文档。</p>
<hr>
<h3>如何正确引用<code>this</code>
</h3>
<h4>使用箭头函数</h4>
<p>ECMAScript 6 引入了 <em>箭头函数</em> ，可以将其视为 lambda
函数。他们没有自己的<code>this</code>绑定。相反，<code>this</code>就像普通变量一样在范围内查找。这意味着您不必调用<code>.bind</code>. 这不是它们唯一的特殊行为，请参阅
MDN 文档以获取更多信息。</p>
<div class="code"><pre class="code literal-block">function MyConstructor(data, transport) {
    this.data = data;
    transport.on('data', () =&gt; alert(this.data));
}
</pre></div>

<h4>不要使用<code>this</code>
</h4>
<p>你其实并不是<code>this</code>特别想访问，而是 <em>它引用的对象</em>
。这就是为什么一个简单的解决方案是简单地创建一个也引用该对象的新变量。变量可以有任何名称，但常见的是<code>self</code>和<code>that</code>。</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">MyConstructor</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">transport</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="bp">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">    </span><span class="n">transport</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>因为<code>self</code>是一个普通变量，它遵守词法范围规则并且可以在回调内部访问。这还有一个好处，就是您可以访问<code>this</code>回调本身的值。</p>
<h4>显式设置<code>this</code>回调 - 第 1 部分</h4>
<p>看起来您无法控制 的值，<code>this</code>因为它的值是自动设置的，但实际上并非如此。</p>
<p>每个函数都有方法<code>.bind</code> <em>[docs]</em>
，它返回一个绑定到一个值的新函数<code>this</code>。该函数与您调用的函数具有完全相同的行为<code>.bind</code>，只是它<code>this</code>是由您设置的。无论该函数如何或何时被调用，<code>this</code>都将始终引用传递的值。</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">MyConstructor</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">transport</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">boundFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">parenthesis</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">necessary</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="p">);</span><span class="w">             </span><span class="o">//</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">improve</span><span class="w"> </span><span class="n">readability</span>
<span class="w">    </span><span class="p">})</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">calling</span><span class="w"> </span><span class="err">`</span><span class="o">.</span><span class="n">bind</span><span class="p">()</span><span class="err">`</span><span class="w"> </span>
<span class="w">    </span><span class="n">transport</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="n">boundFunction</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>在这种情况下，我们将回调绑定到's<code>this</code>的值。<code>MyConstructor``this</code></p>
<p><strong>注意：</strong> 当 jQuery 的绑定上下文时，请改用<code>jQuery.proxy</code> <em>[docs]</em>
。这样做的原因是您在取消绑定事件回调时不需要存储对函数的引用。jQuery 在内部处理。</p>
<h4>
<code>this</code>回调集 - 第 2部分</h4>
<p>一些接受回调的函数/方法也接受回调<code>this</code>应该引用的值。这基本上与自己绑定相同，但函数/方法会为您完成。<code>Array#map</code> <em>[docs]</em>
就是这样一种方法。它的签名是：</p>
<div class="code"><pre class="code literal-block">array.map(callback[, thisArg])
</pre></div>

<p><code>this</code>第一个参数是回调，第二个参数是应该引用的值。这是一个人为的例子：</p>
<div class="code"><pre class="code literal-block"><span class="n">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="err">]</span><span class="p">;</span>
<span class="n">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="n">multiplier</span><span class="o">:</span><span class="w"> </span><span class="mi">42</span><span class="err">}</span><span class="p">;</span>

<span class="n">var</span><span class="w"> </span><span class="n">new_arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">multiplier</span><span class="p">;</span>
<span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="n n-Quoted">`obj`</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">second</span><span class="w"> </span><span class="n">argument</span>
</pre></div>

<p><strong>注意：</strong> 您是否可以传递一个值<code>this</code>通常在该函数/方法的文档中提到。例如，jQuery 的<code>$.ajax</code>方法 <em>[docs]</em>
描述了一个名为的选项<code>context</code>：</p>
<blockquote>
<p>该对象将成为所有与 Ajax 相关的回调的上下文。</p>
</blockquote>
<hr>
<h3>常见问题：使用对象方法作为回调/事件处理程序</h3>
<p>此问题的另一个常见表现是将对象方法用作回调/事件处理程序。函数是 JavaScript
中的一等公民，术语“方法”只是作为对象属性值的函数的口语术语。但是该函数没有指向其“包含”对象的特定链接。</p>
<p>考虑以下示例：</p>
<div class="code"><pre class="code literal-block">function Foo() {
    this.data = 42,
    document.body.onclick = this.method;
}

Foo.prototype.method = function() {
    console.log(this.data);
};
</pre></div>

<p>该函数<code>this.method</code>被指定为单击事件处理程序，但如果<code>document.body</code>单击
，记录的值将为<code>undefined</code>，因为在事件处理程序内部，<code>this</code>引用<code>document.body</code>，而不是 的实例<code>Foo</code>。<br>
正如开头已经提到的，<code>this</code>指的是什么取决于函数是如何 <strong>被调用的</strong> ，而不是它是如何 <strong>定义的</strong> 。<br>
如果代码如下所示，则该函数没有对该对象的隐式引用可能会更明显：</p>
<div class="code"><pre class="code literal-block">function method() {
    console.log(this.data);
}


function Foo() {
    this.data = 42,
    document.body.onclick = this.method;
}

Foo.prototype.method = method;
</pre></div>

<p><strong>解决方法</strong> 和上面说的一样：如果可用，使用<code>.bind</code>显式绑定<code>this</code>到特定值</p>
<div class="code"><pre class="code literal-block">document.body.onclick = this.method.bind(this);
</pre></div>

<p>或者通过使用匿名函数作为回调/事件处理程序并将对象 ( <code>this</code>) 分配给另一个变量来显式调用该函数作为对象的“方法”：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="bp">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>

<p>或者使用箭头函数：</p>
<div class="code"><pre class="code literal-block">document.body.onclick = () =&gt; this.method();
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<h3>以下是在子上下文中访问父上下文的几种方法 -</h3>
<ol>
<li>您可以使用该<code>bind()</code>功能。</li>
<li>将对 context/this 的引用存储在另一个变量中（参见下面的示例）。</li>
<li>使用 ES6箭头函数。</li>
<li>更改代码、功能设计和架构 - 为此，您应该掌握JavaScript 中的设计模式。</li>
</ol>
<h2>1.使用<code>bind()</code>函数</h2>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">MyConstructor</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">transport</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="n">transport</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="p">})</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
<span class="o">//</span><span class="w"> </span><span class="n">Mock</span><span class="w"> </span><span class="n">transport</span><span class="w"> </span><span class="n">object</span>
<span class="k">var</span><span class="w"> </span><span class="n">transport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">on</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">setTimeout</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
<span class="o">//</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="k">as</span>
<span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">MyConstructor</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="n">transport</span><span class="p">);</span>
</pre></div>

<p>如果您使用的是 Underscore.js - http://underscorejs.org/#bind</p>
<div class="code"><pre class="code literal-block">transport.on('data', _.bind(function () {
    alert(this.data);
}, this));
</pre></div>

<h2>2. 将对 context/this 的引用存储在另一个变量中</h2>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">MyConstructor</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">transport</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="bp">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">  </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">transport</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>

<h2>3.箭头功能</h2>
<div class="code"><pre class="code literal-block">function MyConstructor(data, transport) {
  this.data = data;
  transport.on('data', () =&gt; {
    alert(this.data);
  });
}
</pre></div>

<p><br><br><a href="posts/how-to-access-the-correct-this-inside-a-callback/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wo-men-ru-he-kong-zhi-suo-you-liu-lan-qi-de-wang-ye-huan-cun/" class="u-url">我们如何控制所有浏览器的网页缓存？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/wo-men-ru-he-kong-zhi-suo-you-liu-lan-qi-de-wang-ye-huan-cun/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:59:38+08:00" itemprop="datePublished" title="2023-02-16 23:59">2023-02-16 23:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我们的调查表明，并非所有浏览器都以统一的方式遵守 HTTP 缓存指令。</p>
<p><strong>出于安全原因，我们不</strong> 希望Web 浏览器缓存我们应用程序中的某些页面。这必须至少适用于以下浏览器：</p>
<ul>
<li>浏览器 6+</li>
<li>火狐 1.5+</li>
<li>野生动物园 3+</li>
<li>歌剧 9+</li>
<li>铬合金</li>
</ul>
<p>我们的要求来自安全测试。从我们的网站注销后，您可以按后退按钮并查看缓存的页面。</p>
<p><br><br></p>
<h2>解答</h2>
<h2>介绍</h2>
<p>适用于所有提到的客户端（和代理）的正确的最小标头集：</p>
<div class="code"><pre class="code literal-block">Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
</pre></div>

<p>这<code>Cache-Control</code>是针对客户端和代理的 HTTP 1.1
规范（并且一些客户端隐式要求<code>Expires</code>）。这<code>Pragma</code>是针对史前客户端的 HTTP 1.0 规范。这<code>Expires</code>是针对客户端和代理的
HTTP 1.0 和 1.1 规范。在 HTTP 1.1 中，<code>Cache-Control</code>优先于<code>Expires</code>，所以它毕竟仅适用于 HTTP 1.0
代理。</p>
<p>如果您不关心 IE6 及其在仅使用 HTTPS 提供页面时损坏的缓存<code>no-store</code>，那么您可以省略<code>Cache-Control: no-cache</code>.</p>
<div class="code"><pre class="code literal-block">Cache-Control: no-store, must-revalidate
Pragma: no-cache
Expires: 0
</pre></div>

<p>如果您既不关心 IE6 也不关心 HTTP 1.0 客户端（HTTP 1.1 于 1997 年推出），那么您可以省略<code>Pragma</code>.</p>
<div class="code"><pre class="code literal-block">Cache-Control: no-store, must-revalidate
Expires: 0
</pre></div>

<p>如果您也不关心 HTTP 1.0 代理，那么您可以省略<code>Expires</code>.</p>
<div class="code"><pre class="code literal-block">Cache-Control: no-store, must-revalidate
</pre></div>

<p>另一方面，如果服务器自动包含有效<code>Date</code>标头，那么理论上您<code>Cache-Control</code>也可以省略并仅依赖<code>Expires</code>。</p>
<div class="code"><pre class="code literal-block"><span class="n">Date</span><span class="o">:</span><span class="w"> </span><span class="n">Wed</span><span class="o">,</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="mi">18</span><span class="o">:</span><span class="mi">32</span><span class="o">:</span><span class="mi">02</span><span class="w"> </span><span class="n">GMT</span>
<span class="n">Expires</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span>
</pre></div>

<p>但是，如果最终用户操纵操作系统日期并且客户端软件依赖于它，那么这可能会失败。</p>
<p>如果指定了上述参数，则其他<code>Cache-Control</code>参数<code>max-age</code>无关紧要。此处大多数其他答案中包含的标头<code>Cache-Control</code>仅
<em>在</em> 您 <strong>真正想要</strong> 缓存请求时才有意义，因此您根本不需要指定它。<code>Last-Modified</code> __ ****</p>
<h2>如何设置？</h2>
<p>使用 PHP：</p>
<div class="code"><pre class="code literal-block"><span class="nt">header</span><span class="o">(</span><span class="s2">"Cache-Control: no-cache, no-store, must-revalidate"</span><span class="o">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">HTTP</span><span class="w"> </span><span class="nt">1</span><span class="p">.</span><span class="nc">1</span><span class="o">.</span>
<span class="nt">header</span><span class="o">(</span><span class="s2">"Pragma: no-cache"</span><span class="o">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">HTTP</span><span class="w"> </span><span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">.</span>
<span class="nt">header</span><span class="o">(</span><span class="s2">"Expires: 0"</span><span class="o">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">Proxies</span><span class="o">.</span>
</pre></div>

<p>使用 Java Servlet 或 Node.js：</p>
<div class="code"><pre class="code literal-block">response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
response.setHeader("Expires", "0"); // Proxies.
</pre></div>

<p>使用 ASP.NET-MVC</p>
<div class="code"><pre class="code literal-block">Response.Cache.SetCacheability(HttpCacheability.NoCache);  // HTTP 1.1.
Response.Cache.AppendCacheExtension("no-store, must-revalidate");
Response.AppendHeader("Pragma", "no-cache"); // HTTP 1.0.
Response.AppendHeader("Expires", "0"); // Proxies.
</pre></div>

<p>使用 ASP.NET 网络 API：</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`response`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">instance</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="n">Net</span><span class="p">.</span><span class="n">Http</span><span class="p">.</span><span class="n">HttpResponseMessage</span>
<span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">CacheControl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CacheControlHeaderValue</span>
<span class="err">{</span>
<span class="w">    </span><span class="n">NoCache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="p">,</span>
<span class="w">    </span><span class="n">NoStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="p">,</span>
<span class="w">    </span><span class="n">MustRevalidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="err">}</span><span class="p">;</span>
<span class="n">response</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="n">Pragma</span><span class="p">.</span><span class="n">ParseAdd</span><span class="p">(</span><span class="s2">"no-cache"</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">can</span><span class="s1">'t use `response.Content.Headers.Expires` directly</span>
<span class="s1">// since it allows only `DateTimeOffset?` values.</span>
<span class="s1">response.Content?.Headers.TryAddWithoutValidation("Expires", 0.ToString());</span>
</pre></div>

<p>使用 ASP.NET：</p>
<div class="code"><pre class="code literal-block">Response.AppendHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
Response.AppendHeader("Pragma", "no-cache"); // HTTP 1.0.
Response.AppendHeader("Expires", "0"); // Proxies.
</pre></div>

<p>使用 ASP.NET Core v3</p>
<div class="code"><pre class="code literal-block"><span class="c1">// using Microsoft.Net.Http.Headers</span>
<span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">HeaderNames</span><span class="p">.</span><span class="n">CacheControl</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"no-cache, no-store, must-revalidate"</span><span class="p">;</span>
<span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">HeaderNames</span><span class="p">.</span><span class="n">Expires</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"0"</span><span class="p">;</span>
<span class="n">Response</span><span class="p">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">HeaderNames</span><span class="p">.</span><span class="n">Pragma</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"no-cache"</span><span class="p">;</span>
</pre></div>

<p>使用 ASP：</p>
<div class="code"><pre class="code literal-block">Response.addHeader "Cache-Control", "no-cache, no-store, must-revalidate" ' HTTP 1.1.
Response.addHeader "Pragma", "no-cache" ' HTTP 1.0.
Response.addHeader "Expires", "0" ' Proxies.
</pre></div>

<p>在 Rails 上使用 Ruby：</p>
<div class="code"><pre class="code literal-block">headers["Cache-Control"] = "no-cache, no-store, must-revalidate" # HTTP 1.1.
headers["Pragma"] = "no-cache" # HTTP 1.0.
headers["Expires"] = "0" # Proxies.
</pre></div>

<p>使用 Python/烧瓶：</p>
<div class="code"><pre class="code literal-block">response = make_response(render_template(...))
response.headers["Cache-Control"] = "no-cache, no-store, must-revalidate" # HTTP 1.1.
response.headers["Pragma"] = "no-cache" # HTTP 1.0.
response.headers["Expires"] = "0" # Proxies.
</pre></div>

<p>使用 Python/Django：</p>
<div class="code"><pre class="code literal-block">response["Cache-Control"] = "no-cache, no-store, must-revalidate" # HTTP 1.1.
response["Pragma"] = "no-cache" # HTTP 1.0.
response["Expires"] = "0" # Proxies.
</pre></div>

<p>使用 Python/金字塔：</p>
<div class="code"><pre class="code literal-block">request.response.headerlist.extend(
    (
        ('Cache-Control', 'no-cache, no-store, must-revalidate'),
        ('Pragma', 'no-cache'),
        ('Expires', '0')
    )
)
</pre></div>

<p>使用围棋：</p>
<div class="code"><pre class="code literal-block">responseWriter.Header().Set("Cache-Control", "no-cache, no-store, must-revalidate") // HTTP 1.1.
responseWriter.Header().Set("Pragma", "no-cache") // HTTP 1.0.
responseWriter.Header().Set("Expires", "0") // Proxies.
</pre></div>

<p>使用 Clojure（需要 Ring utils）：</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">require</span><span class="w"> </span><span class="s">'[ring.util.response :as r])</span>
<span class="s">(-&gt; response</span>
<span class="s">  (r/header "</span><span class="n">Cache</span><span class="o">-</span><span class="n">Control</span><span class="s">" "</span><span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="kr">store</span><span class="p">,</span><span class="w"> </span><span class="n">must</span><span class="o">-</span><span class="n">revalidate</span><span class="s">")</span>
<span class="s">  (r/header "</span><span class="n">Pragma</span><span class="s">" "</span><span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="s">")</span>
<span class="s">  (r/header "</span><span class="n">Expires</span><span class="s">" 0))</span>
</pre></div>

<p>使用 Apache<code>.htaccess</code>文件：</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;IfModule</span><span class="w"> </span><span class="err">mod_headers.c</span><span class="nt">&gt;</span>
<span class="w">    </span>Header<span class="w"> </span>set<span class="w"> </span>Cache-Control<span class="w"> </span>"no-cache,<span class="w"> </span>no-store,<span class="w"> </span>must-revalidate"
<span class="w">    </span>Header<span class="w"> </span>set<span class="w"> </span>Pragma<span class="w"> </span>"no-cache"
<span class="w">    </span>Header<span class="w"> </span>set<span class="w"> </span>Expires<span class="w"> </span>0
<span class="nt">&lt;/IfModule&gt;</span>
</pre></div>

<p>使用 HTML：</p>
<div class="code"><pre class="code literal-block">&lt;meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"&gt;
&lt;meta http-equiv="Pragma" content="no-cache"&gt;
&lt;meta http-equiv="Expires" content="0"&gt;
</pre></div>

<h2>HTML 元标记与 HTTP 响应标头</h2>
<p>重要的是要知道，当通过 HTTP 连接提供 HTML 页面时， HTTP 响应标头和 HTML标记中 <strong>都</strong> 存在标头<code>&lt;meta http-
equiv&gt;</code>，那么 HTTP 响应标头中指定的标头将优先于 HTML 元标记。仅当通过 URL 从本地磁盘文件系统查看页面时，才会使用 HTML
元标记<code>file://</code>。另请参阅W3 HTML 规范第 5.2.2 章。当您没有以编程方式指定它们时要小心，因为网络服务器可以包含一些默认值。</p>
<p>通常，您最好 <strong>不要</strong> 指定 HTML 元标记以避免初学者混淆并依赖硬 HTTP 响应标头。此外，特别是那些<code>&lt;meta http-equiv&gt;</code>标签在
HTML5 中是 <strong>无效的</strong> 。仅允许使用HTML5 规范<code>http-equiv</code>中列出的值。</p>
<h2>验证实际的 HTTP 响应标头</h2>
<p>要验证两者，您可以在 Web 浏览器开发人员工具集的 HTTP 流量监视器中查看/调试它们。您可以通过在 Chrome/Firefox23+/IE9+ 中按
F12，然后打开“网络”或“网络”选项卡面板，然后单击感兴趣的 HTTP 请求来查看有关 HTTP 请求和响应的所有详细信息。以下屏幕截图来自
Chrome：</p>
<p><img alt="Chrome 开发人员工具集 HTTP 流量监视器在 stackoverflow.com 上显示 HTTP
响应标头" src="images/fSnXH.png"></p>
<h2>I want to set those headers on file downloads too</h2>
<p>First of all, this question and answer are targeted on "web pages" (HTML
pages), not "file downloads" (PDF, zip, Excel, etc). You'd better have them
cached and make use of some file version identifier somewhere in the URI path
or query string to force a redownload on a changed file. When applying those
no-cache headers on file downloads anyway, then beware of the IE7/8 bug when
serving a file download over HTTPS instead of HTTP. For detail, see IE cannot
download foo.jsf. IE was not able to open this internet site. The requested
site is either unavailable or cannot be found.</p>
<p><br></p>
<h3>更多建议</h3>
<p>（嘿，大家：请不要只是盲目的复制粘贴所有你能找到的标题）</p>
<p>首先，后退按钮历史不是 <em>缓存</em> ：</p>
<blockquote>
<p>新鲜度模型（第 4.2 节）不一定适用于历史机制。也就是说，历史机制可以显示以前的表示，即使它已经过期。</p>
</blockquote>
<p>在旧的 HTTP 规范中，措辞更加强烈，明确告诉浏览器忽略后退按钮历史记录的缓存指令。</p>
<p>Back 应该及时返回（回到用户登录的时间 <em>）</em> 。它不会向前导航到先前打开的 URL。</p>
<p>但是，实际上，在非常特殊的情况下，缓存会影响后退按钮：</p>
<ul>
<li>页面 <em>必须通过</em> <strong>HTTPS</strong> 传送，否则，这种缓存破坏将不可靠。另外，如果您不使用 HTTPS，那么您的页面很容易受到许多其他方式的登录窃取。</li>
<li>你必须发送<code>Cache-Control: no-store, must-revalidate</code>（一些浏览器观察<code>no-store</code>和一些观察<code>must-revalidate</code>）</li>
</ul>
<p>你 <em>永远</em> 不需要任何：</p>
<ul>
<li>
<code>&lt;meta&gt;</code>带有缓存标头——它根本不起作用。完全没用。</li>
<li>
<code>post-check</code>/ <code>pre-check</code>— 这是仅适用于 IE 的指令，仅适用于 <em>可缓存</em> 资源。</li>
<li>发送相同的标头两次或分成十几个部分。那里的一些 PHP 片段实际上替换了以前的标头，导致仅发送最后一个标头。</li>
</ul>
<p>如果你愿意，你可以添加：</p>
<ul>
<li>
<code>no-cache</code>or <code>max-age=0</code>，这将使资源（URL）“过时”并要求浏览器检查服务器是否有更新的版本（<code>no-store</code>已经暗示这更强大）。</li>
<li>
<code>Expires</code>为 HTTP/1.0 客户端设置了过去的日期（尽管现在 <em>真正的</em> HTTP/1.0-only 客户端完全不存在）。</li>
</ul>
<hr>
<p>奖励：新的 HTTP 缓存 RFC。</p>
<p><br><br><a href="posts/how-do-we-control-web-page-caching-across-all-browsers/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-176.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-174.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
