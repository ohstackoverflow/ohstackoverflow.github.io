<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2001) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2001.html">
<link rel="prev" href="index-2002.html" type="text/html">
<link rel="next" href="index-2000.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-make-if-not-true-condition/" class="u-url">How to make "if not true condition"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-make-if-not-true-condition/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T14:30:05+08:00" itemprop="datePublished" title="2023-03-03 14:30">2023-03-03 14:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would like to have the <code>echo</code> command executed when <code>cat /etc/passwd | grep
"sysa"</code> is not true.</p>
<p>What am I doing wrong?</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="w"> </span>[<span class="w"> </span>$<span class="ss">(</span><span class="nv">cat</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="s2">"sysa"</span><span class="ss">)</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">        </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"ERROR - The user sysa could not be looked up"</span>
<span class="w">        </span><span class="k">exit</span><span class="w"> </span><span class="mi">2</span>
<span class="nv">fi</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>try</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">q</span><span class="w"> </span><span class="nv">sysa</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span><span class="w"> </span><span class="c1">; then</span>
</pre></div>

<p><code>grep</code> returns <code>true</code> if it finds the search target, and <code>false</code> if it
doesn't.</p>
<p>So NOT false (<code>! false</code>) == <code>true</code>.</p>
<p><code>if</code> evaluation in shells are designed to be very flexible, and many times
doesn't require chains of commands (as you have written).</p>
<p>Also, looking at your code as is, your use of the <code>$( ... )</code> form of cmd-
substitution is to be commended, but think about what is coming out of the
process. Try <code>echo $(cat /etc/passwd | grep "sysa")</code> to see what I mean. You
can take that further by using the <code>-c</code> (count) option to grep and then do <code>if
! [ $(grep -c "sysa" /etc/passwd) -eq 0 ] ; then</code> which works but is rather
old school.</p>
<p>BUT, you could use the newest shell features (arithmetic evaluation) like</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="ss">((</span><span class="w"> </span>$<span class="ss">(</span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">c</span><span class="w"> </span><span class="s2">"sysa"</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ss">))</span><span class="w"> </span><span class="c1">; then ...`</span>
</pre></div>

<p>which also gives you the benefit of using the c-lang based comparison
operators, <code>==,&lt;,&gt;,&gt;=,&lt;=,%</code> and maybe a few others.</p>
<p>In this case, per a comment by Orwellophile, the arithmetic evaluation can be
pared down even further, like</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="ss">((</span><span class="w"> </span>$<span class="ss">(</span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">c</span><span class="w"> </span><span class="s2">"sysa"</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span><span class="ss">)</span><span class="w"> </span><span class="ss">))</span><span class="w"> </span><span class="c1">; then ....</span>
</pre></div>

<p>OR</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">((</span><span class="w"> </span><span class="o">!</span><span class="w"> </span>$<span class="ss">(</span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">c</span><span class="w"> </span><span class="s2">"sysa"</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span><span class="ss">)</span><span class="w"> </span><span class="ss">))</span><span class="w"> </span><span class="c1">; then ....</span>
</pre></div>

<p>Finally, there is an <em>award</em> called the <code>Useless Use of Cat (UUOC)</code>. :-) Some
people will jump up and down and cry gothca! I'll just say that <code>grep</code> can
take a file name on its cmd-line, so why invoke extra processes and pipe
constructions when you don't have to? ;-)</p>
<p>I hope this helps.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I think it can be simplified into:</p>
<div class="code"><pre class="code literal-block"><span class="nv">grep</span><span class="w"> </span><span class="nv">sysa</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"ERROR - The user sysa could not be looked up"</span>
<span class="w">    </span><span class="k">exit</span><span class="w"> </span><span class="mi">2</span>
}
</pre></div>

<p>or in a single command line</p>
<p><code>$ grep sysa /etc/passwd || { echo "ERROR - The user sysa could not be looked
up"; exit 2; }</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/java-generics-with-a-class-an-interface-together/" class="u-url">Java Generics With a Class &amp; an Interface - Together</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/java-generics-with-a-class-an-interface-together/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T14:29:45+08:00" itemprop="datePublished" title="2023-03-03 14:29">2023-03-03 14:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to have a Class object, but I want to force whatever class it
represents to extend class A and implement interface B.</p>
<p>I can do:</p>
<div class="code"><pre class="code literal-block"><span class="n">Class</span><span class="o">&lt;</span><span class="err">?</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">ClassA</span><span class="o">&gt;</span>
</pre></div>

<p>Or:</p>
<div class="code"><pre class="code literal-block"><span class="n">Class</span><span class="o">&lt;</span><span class="err">?</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">InterfaceB</span><span class="o">&gt;</span>
</pre></div>

<p>but I can't do both. Is there a way to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Actually, you <em>can</em> do what you want. If you want to provide multiple
interfaces or a class plus interfaces, you have to have your wildcard look
something like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">ClassA</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">InterfaceB</span><span class="o">&gt;</span>
</pre></div>

<p>See the Generics Tutorial at sun.com, specifically the Bounded Type Parameters
section, at the bottom of the page. You can actually list more than one
interface if you wish, using <code>&amp; InterfaceName</code> for each one that you need.</p>
<p>This can get arbitrarily complicated. To demonstrate, see the JavaDoc
declaration of <code>Collections#max</code>, which (wrapped onto two lines) is:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">Comparable</span><span class="o">&lt;</span><span class="err">?</span><span class="w"> </span><span class="n">super</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">T</span>
<span class="w">                                           </span><span class="nb">max</span><span class="p">(</span><span class="n">Collection</span><span class="o">&lt;</span><span class="err">?</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">coll</span><span class="p">)</span>
</pre></div>

<p>why so complicated? As said in the Java Generics FAQ: To preserve binary
compatibility.</p>
<p>It looks like this doesn't work for variable declaration, but it does work
when putting a generic boundary on a class. Thus, to do what you want, you may
have to jump through a few hoops. But you can do it. You can do something like
this, putting a generic boundary on your class and then:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">classB</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="n">interface</span><span class="w"> </span><span class="n">interfaceC</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyClass</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">classB</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">interfaceC</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">variable</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>to get <code>variable</code> that has the restriction that you want. For more information
and examples, check out page 3 of Generics in Java 5.0. Note, in <code>&lt;T extends B
&amp; C&gt;</code>, the class name must come first, and interfaces follow. And of course
you can only list a single class.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can't do it with "anonymous" type parameters (ie, wildcards that use <code>?</code>),
but you can do it with "named" type parameters. Simply declare the type
parameter at method or class level.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>
<span class="n">interface</span> <span class="n">A</span><span class="p">{}</span>
<span class="n">interface</span> <span class="n">B</span><span class="p">{}</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">Test</span><span class="o">&lt;</span><span class="n">E</span> <span class="n">extends</span> <span class="n">B</span> <span class="o">&amp;</span> <span class="n">A</span><span class="p">,</span> <span class="n">T</span> <span class="n">extends</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
    <span class="n">T</span> <span class="n">t</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-use-icollection-and-not-ienumerable-or-list-t-on-many-many-one-many-relationships/" class="u-url">Why use ICollection and not IEnumerable or List&lt;T&gt; on many-many/one-many relationships?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-use-icollection-and-not-ienumerable-or-list-t-on-many-many-one-many-relationships/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T14:29:20+08:00" itemprop="datePublished" title="2023-03-03 14:29">2023-03-03 14:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I see this a lot in tutorials, with navigation properties as <code>ICollection&lt;T&gt;</code>.</p>
<p>Is this a mandatory requirement for Entity Framework? Can I use <code>IEnumerable</code>?</p>
<p>What's the main purpose of using <code>ICollection</code> instead of <code>IEnumerable</code> or
even <code>List&lt;T&gt;</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Usually what you choose will depend on which methods you need access to. In
general - <code>IEnumerable&lt;&gt;</code> (MSDN: http://msdn.microsoft.com/en-
us/library/system.collections.ienumerable.aspx) for a list of objects that
only needs to be iterated through, <code>ICollection&lt;&gt;</code> (MSDN:
http://msdn.microsoft.com/en-us/library/92t2ye13.aspx) for a list of objects
that needs to be iterated through and modified, <code>List&lt;&gt;</code> for a list of objects
that needs to be iterated through, modified, sorted, etc (See here for a full
list: http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx).</p>
<p>From a more specific standpoint, lazy loading comes in to play with choosing
the type. By default, navigation properties in Entity Framework come with
change tracking and are proxies. In order for the dynamic proxy to be created
as a navigation property, the virtual type <em>must</em> implement <code>ICollection</code>.</p>
<blockquote>
<p>A navigation property that represents the "many" end of a relationship must
return a type that implements ICollection, where T is the type of the object
at the other end of the relationship. -Requirements for Creating POCO
ProxiesMSDN</p>
</blockquote>
<p>More information on Defining and Managing RelationshipsMSDN</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>ICollection&lt;T&gt;</code> is used because the <code>IEnumerable&lt;T&gt;</code> interface provides no
way of adding items, removing items, or otherwise modifying the collection.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2002.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2000.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
