<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1688) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1688.html">
<link rel="prev" href="index-1689.html" type="text/html">
<link rel="next" href="index-1687.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-update-top-100-records-in-sql-server/" class="u-url">how can I Update top 100 records in sql server</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-update-top-100-records-in-sql-server/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:59:59+08:00" itemprop="datePublished" title="2023-03-03 06:59">2023-03-03 06:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to update the top 100 records in SQL Server. I have a table <code>T1</code> with
fields <code>F1</code> and <code>F2</code>. <code>T1</code> has 200 records. I want to update the <code>F1</code> field in
the top 100 records. How can I update based on <code>TOP 100</code> in SQL Server?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Note, the parentheses are required for <code>UPDATE</code> statements:</p>
<div class="code"><pre class="code literal-block">update top (100) table1 set field1 = 1
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Without an <code>ORDER BY</code> the whole idea of <code>TOP</code> doesn't make much sense. You
need to have a consistent definition of which direction is "up" and which is
"down" for the concept of top to be meaningful.</p>
<p>Nonetheless SQL Server allows it but doesn't guarantee a deterministic result.</p>
<p>The <code>UPDATE TOP</code> syntax in the accepted answer does not support an <code>ORDER BY</code>
clause but it is possible to get deterministic semantics here by using a CTE
or derived table to define the desired sort order as below.</p>
<div class="code"><pre class="code literal-block">;WITH CTE AS 
( 
SELECT TOP 100 * 
FROM T1 
ORDER BY F2 
) 
UPDATE CTE SET F1='foo'
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/download-a-file-by-jquery-ajax/" class="u-url">Download a file by jQuery.Ajax</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/download-a-file-by-jquery-ajax/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:59:32+08:00" itemprop="datePublished" title="2023-03-03 06:59">2023-03-03 06:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a Struts2 action in the server side for file downloading.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;action</span><span class="w"> </span><span class="na">name=</span><span class="s">"download"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.xxx.DownAction"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;result</span><span class="w"> </span><span class="na">name=</span><span class="s">"success"</span><span class="w"> </span><span class="na">type=</span><span class="s">"stream"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">"contentType"</span><span class="nt">&gt;</span>text/plain<span class="nt">&lt;/param&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">"inputName"</span><span class="nt">&gt;</span>imageStream<span class="nt">&lt;/param&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">"contentDisposition"</span><span class="nt">&gt;</span>attachment;filename={fileName}<span class="nt">&lt;/param&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">"bufferSize"</span><span class="nt">&gt;</span>1024<span class="nt">&lt;/param&gt;</span>
<span class="w">    </span><span class="nt">&lt;/result&gt;</span>
<span class="nt">&lt;/action&gt;</span>
</pre></div>

<p>However when I call the action using the jQuery:</p>
<div class="code"><pre class="code literal-block"><span class="o">$.</span><span class="n">post</span><span class="p">(</span>
<span class="w">  </span><span class="s2">"/download.action"</span><span class="p">,{</span>
<span class="w">    </span><span class="n">para1</span><span class="p">:</span><span class="n">value1</span><span class="p">,</span>
<span class="w">    </span><span class="n">para2</span><span class="p">:</span><span class="n">value2</span>
<span class="w">    </span><span class="o">....</span>
<span class="w">  </span><span class="p">},</span><span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">){</span>
<span class="w">      </span><span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">);</span>
</pre></div>

<p>in Firebug I see the data is retrieved with the <strong>Binary stream</strong>. I wonder
how to open the <strong>file downloading window</strong> with which the user can save the
file locally?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>2019 modern browsers update</strong></p>
<p>This is the approach I'd now recommend with a few caveats:</p>
<ul>
<li>A relatively modern browser is required</li>
<li>
<p>If the file is expected to be <strong>very large</strong> you should likely do something similar to the original approach (iframe and cookie) because some of the below operations could likely consume system memory at least as large as the file being downloaded and/or other interesting CPU side effects.</p>
<p>fetch('https://jsonplaceholder.typicode.com/todos/1')
  .then(resp =&gt; resp.blob())
  .then(blob =&gt; {
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.style.display = 'none';
    a.href = url;
    // the filename you want
    a.download = 'todo-1.json';
    document.body.appendChild(a);
    a.click();
    window.URL.revokeObjectURL(url);
    alert('your file has downloaded!'); // or you know, something with better UX...
  })
  .catch(() =&gt; alert('oh no!'));</p>
</li>
</ul>
<p><strong>2012 Original jQuery/iframe/Cookie based approach</strong></p>
<p>Bluish is completely right about this, you can't do it through Ajax because
JavaScript cannot save files directly to a user's computer (out of security
concerns). Unfortunately pointing the <em>main window's</em> URL at your file
download means you have little control over what the user experience is when a
file download occurs.</p>
<p>I created jQuery File Download which allows for an "Ajax like" experience with
file downloads complete with OnSuccess and OnFailure callbacks to provide for
a better user experience. Take a look at my blog post on the common problem
that the plugin solves and some ways to use it and also a demo of jQuery File
Download in action. Here is the source</p>
<p>Here is a simple use case demo using the plugin source with promises. The demo
page includes many other, 'better UX' examples as well.</p>
<div class="code"><pre class="code literal-block"><span class="o">$.</span><span class="n">fileDownload</span><span class="p">(</span><span class="s1">'some/file.pdf'</span><span class="p">)</span>
<span class="w">    </span><span class="o">.</span><span class="n">done</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">alert</span><span class="p">(</span><span class="s1">'File download a success!'</span><span class="p">);</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">alert</span><span class="p">(</span><span class="s1">'File download failed!'</span><span class="p">);</span><span class="w"> </span><span class="p">});</span>
</pre></div>

<p>Depending on what browsers you need to support you may be able to use
https://github.com/eligrey/FileSaver.js/ which allows more explicit control
than the IFRAME method jQuery File Download uses.</p>
<p><br></p>
<h3>Suggest</h3>
<p><em>Noone posted this @Pekka's solution... so I'll post it. It can help someone.</em></p>
<p>You don't need to do this through Ajax. Just use</p>
<div class="code"><pre class="code literal-block"><span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">=</span><span class="s2">"download.action?para1=value1...."</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-debug-false-setting-make-my-django-static-files-access-fail/" class="u-url">Why does DEBUG=False setting make my django Static Files Access fail?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-debug-false-setting-make-my-django-static-files-access-fail/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:59:05+08:00" itemprop="datePublished" title="2023-03-03 06:59">2023-03-03 06:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Am building an app using Django as my workhorse. All has been well so far -
specified db settings, configured static directories, urls, views etc. But
trouble started sneaking in the moment I wanted to render my own beautiful and
custom 404.html and 500.html pages.</p>
<p>I read the docs on custom error handling, and set necessary configurations in
UrlsConf, created corresponding views and added the 404.html and the 500.html
to my app's template directory (specified in the settings.py too).</p>
<p>But the docs say <code>you can actually view custom error views until Debug is
Off</code>, so I did turn it off to test my stuff, and that's when stuff goes
berserk!</p>
<p>Not only do I fail to view the custom 404.html (actually, it loads, but
because my error pages each contain a graphic error message -as some nice
image), the source of the error page loads, but nothing else loads! Not even
linked CSS or Javascript!</p>
<p>Generally, once I set <code>DEBUG = False</code>, all views will load, but any linked
content (CSS, Javascript, Images, etc) wont load! What's happening? Is there
something am missing, concerning static files and the <code>DEBUG</code> setting?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>With debug turned off Django won't handle static files for you any more - your
production web server (Apache or something) should take care of that.</p>
<p><br></p>
<h3>Suggest</h3>
<p>With debug turned off Django won't handle static files for you any more - your
production web server (Apache or something) should take care of that.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1689.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1687.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
