<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2292) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2292.html">
<link rel="prev" href="index-2293.html" type="text/html">
<link rel="next" href="index-2291.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-find-elements-by-text-content-with-jquery/" class="u-url">How can I find elements by text content with jQuery?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-find-elements-by-text-content-with-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T05:20:07+08:00" itemprop="datePublished" title="2023-03-04 05:20">2023-03-04 05:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Can anyone tell me if it's possible to find an element based on its content
rather than by an <strong>ID</strong> or <strong>class</strong>?</p>
<p>I am attempting to find elements that don't have distinct classes or IDs.
(Then I then need to find that element's parent.)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the <code>:contains</code> selector to get elements based on their content.</p>
<p>Demo here</p>
<div class="code"><pre class="code literal-block">$('div:contains("test")').css('background-color',<span class="w"> </span>'red');


<span class="nt">&lt;div&gt;</span>This<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>test<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>Another<span class="w"> </span>Div<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>In jQuery documentation it says:</p>
<blockquote>
<p>The matching text can appear directly within the selected element, in any of
that element's descendants, or a combination</p>
</blockquote>
<p>Therefore it is not enough that you use <code>:contains()</code> <em>selector</em> , you also
need to check if the text you search for is the <strong>direct content</strong> of the
element you are targeting for, something like that:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">findElementByText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">jSpot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s2">"b:contains("</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">")"</span><span class="p">)</span>
<span class="w">                </span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="o">.</span><span class="n">children</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="p">;})</span>
<span class="w">                </span><span class="o">.</span><span class="n">parent</span><span class="p">();</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">asked</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">element</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">jSpot</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-find-first-element-of-array-matching-a-boolean-condition-in-javascript/" class="u-url">How to find first element of array matching a boolean condition in JavaScript?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-find-first-element-of-array-matching-a-boolean-condition-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T05:18:35+08:00" itemprop="datePublished" title="2023-03-04 05:18">2023-03-04 05:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm wondering if there's a known, built-in/elegant way to find the first
element of a JS array matching a given condition. A C# equivalent would be
List.Find.</p>
<p>So far I've been using a two-function combo like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="k">Returns</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="k">element</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">array</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">satisfies</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">predicate</span>
<span class="k">Array</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">findFirst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">predicateCallback</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">typeof</span><span class="w"> </span><span class="n">predicateCallback</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">'function'</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">undefined</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">arr</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">predicateCallback</span><span class="p">(</span><span class="n">this</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">undefined</span><span class="p">;</span>
<span class="err">}</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="k">Check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">element</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">null</span>
<span class="n">isNotNullNorUndefined</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">typeof</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">'undefined'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="k">null</span><span class="p">);</span>
<span class="err">}</span><span class="p">;</span>
</pre></div>

<p>And then I can use:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someArray</span><span class="o">.</span><span class="n">findFirst</span><span class="p">(</span><span class="n">isNotNullNorUndefined</span><span class="p">);</span>
</pre></div>

<p>But since there are so many functional-style array methods in ECMAScript,
perhaps there's something out there already like this? I imagine lots of
people have to implement stuff like this all the time...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Since ES6 there is the native <code>find</code> method for arrays; this stops enumerating
the array once it finds the first match and returns the value.</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someArray</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">isNotNullNorUndefined</span><span class="p">);</span>
</pre></div>

<hr>
<p>Old answer:</p>
<p>I have to post an answer to stop these <code>filter</code> suggestions :-)</p>
<blockquote>
<p>since there are so many functional-style array methods in ECMAScript,
perhaps there's something out there already like this?</p>
</blockquote>
<p>You can use the <code>some</code> Array method to iterate the array until a condition is
met (and then stop). Unfortunately it will only return whether the condition
was met once, not by which element (or at what index) it was met. So we have
to amend it a little:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">find</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="w">    </span><span class="n">arr</span><span class="o">.</span><span class="n">some</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">el</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">test</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="n">el</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">arr</span><span class="p">)</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="p">((</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">el</span><span class="p">),</span><span class="w"> </span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="p">}</span>



<span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find</span><span class="p">(</span><span class="n">someArray</span><span class="p">,</span><span class="w"> </span><span class="n">isNotNullNorUndefined</span><span class="p">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>As of ECMAScript 6, you can use <code>Array.prototype.find</code> for this. This is
implemented and working in Firefox (25.0), Chrome (45.0), Edge (12), and
Safari (7.1), but not in Internet Explorer or a bunch of other old or uncommon
platforms.</p>
<p>For example, <code>x</code> below is <code>106</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">104</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">107</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">109</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">el</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">105</span><span class="p">;</span>
<span class="p">});</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre></div>

<p>If you want to use this right now but need support for IE or other
unsupporting browsers, you can use a shim. I recommend the es6-shim. MDN also
offers a shim if for some reason you don't want to put the whole es6-shim into
your project. For maximum compatibility you want the es6-shim, because unlike
the MDN version it detects buggy native implementations of <code>find</code> and
overwrites them (see the comment that begins <em>"Work around bugs in Array#find
and Array#findIndex"</em> and the lines immediately following it).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pandas-count-distinct-equivalent/" class="u-url">Pandas 'count(distinct)' equivalent</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pandas-count-distinct-equivalent/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T05:17:10+08:00" itemprop="datePublished" title="2023-03-04 05:17">2023-03-04 05:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am using Pandas as a database substitute as I have multiple databases
(Oracle, SQL Server, etc.), and I am unable to make a sequence of commands to
a SQL equivalent.</p>
<p>I have a table loaded in a DataFrame with some columns:</p>
<div class="code"><pre class="code literal-block">YEARMONTH, CLIENTCODE, SIZE, etc., etc.
</pre></div>

<p>In SQL, to count the amount of different clients per year would be:</p>
<div class="code"><pre class="code literal-block">SELECT count(distinct CLIENTCODE) FROM table GROUP BY YEARMONTH;
</pre></div>

<p>And the result would be</p>
<div class="code"><pre class="code literal-block"><span class="mf">201301</span><span class="w">    </span><span class="mf">5000</span>
<span class="mf">201302</span><span class="w">    </span><span class="mf">13245</span>
</pre></div>

<p>How can I do that in Pandas?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I believe this is what you want:</p>
<div class="code"><pre class="code literal-block">table.groupby('YEARMONTH').CLIENTCODE.nunique()
</pre></div>

<p>Example:</p>
<div class="code"><pre class="code literal-block">In [2]: table
Out[2]: 
   CLIENTCODE  YEARMONTH
0           1     201301
1           1     201301
2           2     201301
3           1     201302
4           2     201302
5           2     201302
6           3     201302

In [3]: table.groupby('YEARMONTH').CLIENTCODE.nunique()
Out[3]: 
YEARMONTH
201301       2
201302       3
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Here is another method and it is much simpler. Let’s say your dataframe name
is <code>daat</code> and the column name is <code>YEARMONTH</code>:</p>
<div class="code"><pre class="code literal-block">daat.YEARMONTH.value_counts()
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2293.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2291.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
