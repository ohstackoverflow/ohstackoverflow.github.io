<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 896) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-896.html">
<link rel="prev" href="index-897.html" type="text/html">
<link rel="next" href="index-895.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/about-d-ts-in-typescript/" class="u-url">About "*.d.ts" in TypeScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/about-d-ts-in-typescript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:53:16+08:00" itemprop="datePublished" title="2023-02-17 18:53">2023-02-17 18:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am curious about <code>.d.ts</code> declaration files because I am new to the
TypeScript programming language. I was told by someone that <code>.d.ts</code> files are
are similar to <code>.h</code> header files in the C &amp; C++ programming languages,
however, the <code>.d.ts</code> files don't seem to work quite the same. Currently, I am
failing to understand how to properly use the .d.ts files. It would appear
that I cant add my <code>.js</code> or <code>.ts</code> files to the <code>.d.ts</code> files, so the only way
my project will work is if it contains all three file types. That seems like a
lot of files. To help me better understand how the .d.ts files are related to
JavaScript &amp; TypeScript, I have some questions I would like to ask.</p>
<hr>
<ol>
<li>
<p>What is the relationship between the three files? the relationship between them?</p>
</li>
<li>
<p>How can I use the <code>*.d.ts</code> file? Does it mean I can delete the <code>*.ts</code> file permanently?</p>
</li>
<li>
<p>If so, how can the <code>*.d.ts</code> file know which JS file is mapping to itself?</p>
</li>
</ol>
<hr>
<p>It would be very nice if someone can give me an example.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The "d.ts" file is used to provide typescript type information about an API
that's written in JavaScript. The idea is that you're using something like
jQuery or underscore, an existing javascript library. You want to consume
those from your typescript code.</p>
<p>Rather than rewriting jquery or underscore or whatever in typescript, you can
instead write the d.ts file, which contains only the type annotations. Then
from your typescript code you get the typescript benefits of static type
checking while still using a pure JS library.</p>
<p>This works thanks to TypeScript's constraint of not letting you add the ".ts"
extension at the end of the <code>import</code> statement. Because of that, when you
reference some file, let's say, <code>my-module.js</code>, if there is a <code>my-module.d.ts</code>
next to it, then TypeScript will include its content:</p>
<div class="code"><pre class="code literal-block">src/
  my-module.js
  my-module.d.ts
  index.ts
</pre></div>

<p><em>my-module.js</em></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">thing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>

<span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">thing</span><span class="w"> </span><span class="p">};</span>
</pre></div>

<p><em>my-module.d.ts</em></p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">declare</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">thing</span><span class="p">:</span><span class="w"> </span><span class="n">number</span><span class="p">;</span>
</pre></div>

<p><em>index.ts</em></p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">thing</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"./my-module"</span><span class="p">;</span> <span class="o">//</span> <span class="o">&lt;-</span> <span class="n">no</span> <span class="n">extension</span>

<span class="o">//</span> <span class="n">runtime</span> <span class="n">implementation</span> <span class="n">of</span> <span class="err">`</span><span class="n">thing</span><span class="err">`</span> <span class="ow">is</span> <span class="n">taken</span> <span class="kn">from</span> <span class="s2">".js"</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">thing</span><span class="p">);</span> <span class="o">//</span> <span class="mi">42</span>

<span class="o">//</span> <span class="nb">type</span> <span class="n">declaration</span> <span class="n">of</span> <span class="err">`</span><span class="n">thing</span><span class="err">`</span> <span class="ow">is</span> <span class="n">taken</span> <span class="kn">from</span> <span class="s2">".d.ts"</span>
<span class="nb">type</span> <span class="n">TypeOfThing</span> <span class="o">=</span> <span class="n">typeof</span> <span class="n">thing</span><span class="p">;</span> <span class="o">//</span> <span class="n">number</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><code>d</code> stands for Declaration Files:</p>
<blockquote>
<p>When a TypeScript script gets compiled there is an option to generate a
declaration file (with the extension .d.ts) that functions as an interface
to the components in the compiled JavaScript. In the process the compiler
strips away all function and method bodies and preserves only the signatures
of the types that are exported. The resulting declaration file can then be
used to describe the exported virtual TypeScript types of a JavaScript
library or module when a third-party developer consumes it from TypeScript.</p>
<p>The concept of declaration files is analogous to the concept of header file
found in C/C++.</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="nt">declare</span><span class="w"> </span><span class="nt">module</span><span class="w"> </span><span class="nt">arithmetics</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">add(</span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="kc">right</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">;</span>
<span class="w">    </span><span class="err">subtract(</span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="kc">right</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">;</span>
<span class="w">    </span><span class="err">multiply(</span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="kc">right</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">;</span>
<span class="w">    </span><span class="err">divide(</span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="kc">right</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<blockquote>
<p>Type declaration files can be written by hand for existing JavaScript
libraries, as has been done for jQuery and Node.js.</p>
<p>Large collections of declaration files for popular JavaScript libraries are
hosted on GitHub in DefinitelyTyped and the Typings Registry. A command-line
utility called typings is provided to help search and install declaration
files from the repositories.</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-filter-object-array-based-on-attributes/" class="u-url">How to filter object array based on attributes?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-filter-object-array-based-on-attributes/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:52:50+08:00" itemprop="datePublished" title="2023-02-17 18:52">2023-02-17 18:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have the following JavaScript array of real estate home objects:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s1">'homes'</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">            </span><span class="s2">"home_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"925"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"sqft"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1100"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_beds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_baths"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s2">"home_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1425"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"sqft"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1900"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_beds"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_baths"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.5"</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">(</span><span class="n">more</span><span class="w"> </span><span class="n">homes</span><span class="p">)</span><span class="w"> </span><span class="o">...</span><span class="w">     </span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>

<span class="k">var</span><span class="w"> </span><span class="n">xmlhttp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eval</span><span class="p">(</span><span class="s1">'('</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">')'</span><span class="p">);</span>
<span class="n">homes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xmlhttp</span><span class="o">.</span><span class="n">homes</span><span class="p">;</span>
</pre></div>

<p>What I would like to do is be able to perform a filter on the object to return
a subset of "home" objects.</p>
<p>For example, I want to be able to filter based on: <code>price</code>, <code>sqft</code>,
<code>num_of_beds</code>, and <code>num_of_baths</code>.</p>
<p>How can I perform something in JavaScript like the pseudo-code below:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">newArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homes</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
<span class="w">    </span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span>
<span class="w">    </span><span class="n">sqft</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span>
<span class="w">    </span><span class="n">num_of_beds</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span>
<span class="w">    </span><span class="n">num_of_baths</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">2.5</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>Note, the syntax does not have to be exactly like above. This is just an
example.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the <code>Array.prototype.filter</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">newArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">homes</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">el</span><span class="o">.</span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">         </span><span class="n">el</span><span class="o">.</span><span class="n">sqft</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">         </span><span class="n">el</span><span class="o">.</span><span class="n">num_of_beds</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">         </span><span class="n">el</span><span class="o">.</span><span class="n">num_of_baths</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">2.5</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<p>Live Example:</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block"><span class="n">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="s1">'homes'</span><span class="o">:</span><span class="w"> </span><span class="err">[{</span>
<span class="w">            </span><span class="s2">"home_id"</span><span class="o">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"price"</span><span class="o">:</span><span class="w"> </span><span class="s2">"925"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"sqft"</span><span class="o">:</span><span class="w"> </span><span class="s2">"1100"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_beds"</span><span class="o">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_baths"</span><span class="o">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span>
<span class="w">        </span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="s2">"home_id"</span><span class="o">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"price"</span><span class="o">:</span><span class="w"> </span><span class="s2">"1425"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"sqft"</span><span class="o">:</span><span class="w"> </span><span class="s2">"1900"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_beds"</span><span class="o">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"num_of_baths"</span><span class="o">:</span><span class="w"> </span><span class="s2">"2.5"</span><span class="p">,</span>
<span class="w">        </span><span class="err">}</span><span class="p">,</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">(</span><span class="n">more</span><span class="w"> </span><span class="n">homes</span><span class="p">)</span><span class="w"> </span><span class="p">...</span><span class="w">     </span>
<span class="w">    </span><span class="err">]</span>
<span class="err">}</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="p">(</span><span class="n">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n n-Quoted">`price`</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">object</span><span class="p">,</span>
<span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="n">relies</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">fact</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">string</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">number</span>
<span class="o">//</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">coerce</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">string</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">number</span><span class="w"> </span><span class="k">before</span><span class="w"> </span><span class="n">comparing</span><span class="p">.)</span>
<span class="n">var</span><span class="w"> </span><span class="n">newArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="p">.</span><span class="n">homes</span><span class="p">.</span><span class="k">filter</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">el</span><span class="p">.</span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">         </span><span class="n">el</span><span class="p">.</span><span class="n">sqft</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">         </span><span class="n">el</span><span class="p">.</span><span class="n">num_of_beds</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">         </span><span class="n">el</span><span class="p">.</span><span class="n">num_of_baths</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">1.5</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">Changed</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">home</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="k">match</span>
<span class="err">}</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">newArray</span><span class="p">);</span>
</pre></div>

<p>This method is part of the new ECMAScript 5th Edition standard, and can be
found on almost all modern browsers.</p>
<p>For IE, you can include the following method for compatibility:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="k">Array</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="k">filter</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="k">Array</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="k">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">fun</span><span class="w"> </span><span class="cm">/*, thisp*/</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="nf">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">typeof</span><span class="w"> </span><span class="n">fun</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="ss">"function"</span><span class="p">)</span>
<span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TypeError</span><span class="p">();</span>

<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">thisp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arguments</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fun</span><span class="p">.</span><span class="k">call</span><span class="p">(</span><span class="n">thisp</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="p">))</span>
<span class="w">          </span><span class="n">res</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="w">      </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">res</span><span class="p">;</span>
<span class="w">  </span><span class="err">}</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I'm surprised no one has posted the one-line response:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">filteredHomes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="o">.</span><span class="n">homes</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">sqft</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">num_of_beds</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">num_of_baths</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">2.5</span><span class="p">);</span>
</pre></div>

<p>...and just so you can read it easier:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">filteredHomes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json</span><span class="o">.</span><span class="n">homes</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="n">x</span><span class="o">.</span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">  </span><span class="n">x</span><span class="o">.</span><span class="n">sqft</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">  </span><span class="n">x</span><span class="o">.</span><span class="n">num_of_beds</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">  </span><span class="n">x</span><span class="o">.</span><span class="n">num_of_baths</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">2.5</span>
<span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-a-normal-git-repository-to-a-bare-one/" class="u-url">How to convert a normal Git repository to a bare one?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-a-normal-git-repository-to-a-bare-one/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:52:24+08:00" itemprop="datePublished" title="2023-02-17 18:52">2023-02-17 18:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I convert a 'normal' Git repository to a bare one?</p>
<p>The main difference seems to be:</p>
<ul>
<li>
<p>in the normal Git repository, you have a <code>.git</code> folder inside the repository containing all relevant data and all other files making up your working copy</p>
</li>
<li>
<p>in a bare Git repository, there is no working copy and the folder (let's call it <code>repo.git</code>) contains the actual repository data</p>
</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>In short: replace the contents of <code>repo</code> with the contents of <code>repo/.git</code>,
then tell the repository that it is now a bare repository.</p>
<p>To do this, execute the following commands:</p>
<div class="code"><pre class="code literal-block"><span class="nv">cd</span><span class="w"> </span><span class="nv">repo</span>
<span class="nv">mv</span><span class="w"> </span>.<span class="nv">git</span><span class="w"> </span>..<span class="o">/</span><span class="nv">repo</span>.<span class="nv">git</span><span class="w"> </span>#<span class="w"> </span><span class="nv">renaming</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">clarity</span>
<span class="nv">cd</span><span class="w"> </span>..
<span class="nv">rm</span><span class="w"> </span><span class="o">-</span><span class="nv">fr</span><span class="w"> </span><span class="nv">repo</span>
<span class="nv">cd</span><span class="w"> </span><span class="nv">repo</span>.<span class="nv">git</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">config</span><span class="w"> </span><span class="o">--</span><span class="nv">bool</span><span class="w"> </span><span class="nv">core</span>.<span class="nv">bare</span><span class="w"> </span><span class="nv">true</span>
</pre></div>

<p>Note that this is different from doing a <code>git clone --bare</code> to a new location
(see below).</p>
<p><br></p>
<h3>Suggest</h3>
<p>Your method looks like it would work; the file structure of a bare repository
is just what is inside the .git directory. But I don't know if any of the
files are actually changed, so if that fails, you can just do</p>
<div class="code"><pre class="code literal-block">git clone --bare /path/to/repo
</pre></div>

<p>You'll probably need to do it in a different directory to avoid a name
conflict, and then you can just move it back to where you want. And you may
need to change the config file to point to wherever your origin repo is.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-897.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-895.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
