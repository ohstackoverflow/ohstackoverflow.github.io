<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2835) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2835.html">
<link rel="prev" href="index-2836.html" type="text/html">
<link rel="next" href="index-2834.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-does-character-set-and-collation-mean-exactly/" class="u-url">What does character set and collation mean exactly?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-does-character-set-and-collation-mean-exactly/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T21:31:13+08:00" itemprop="datePublished" title="2023-03-05 21:31">2023-03-05 21:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I can read the <em>MySQL</em> documentation and it's pretty clear. But, how does one
decide which character set to use? On what data does collation have an effect?</p>
<p>I'm asking for an explanation of the two and how to choose them.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From MySQL docs:</p>
<blockquote>
<p>A <strong>character set</strong> is a set of symbols and encodings. A <strong>collation</strong> is a
set of rules for comparing characters in a character set. Let's make the
distinction clear with an example of an imaginary character set.</p>
<p>Suppose that we have an alphabet with four letters: 'A', 'B', 'a', 'b'. We
give each letter a number: 'A' = 0, 'B' = 1, 'a' = 2, 'b' = 3. The letter
'A' is a symbol, the number 0 is the encoding for 'A', and the combination
of all four letters and their encodings is a character set.</p>
<p>Now, suppose that we want to compare two string values, 'A' and 'B'. The
simplest way to do this is to look at the encodings: 0 for 'A' and 1 for
'B'. Because 0 is less than 1, we say 'A' is less than 'B'. Now, what we've
just done is apply a collation to our character set. The collation is a set
of rules (only one rule in this case): "compare the encodings." We call this
simplest of all possible collations a binary collation.</p>
<p>But what if we want to say that the lowercase and uppercase letters are
equivalent? Then we would have at least two rules: (1) treat the lowercase
letters 'a' and 'b' as equivalent to 'A' and 'B'; (2) then compare the
encodings. We call this a case-insensitive collation. It's a little more
complex than a binary collation.</p>
<p>In real life, most character sets have many characters: not just 'A' and 'B'
but whole alphabets, sometimes multiple alphabets or eastern writing systems
with thousands of characters, along with many special symbols and
punctuation marks. Also in real life, most collations have many rules: not
just case insensitivity but also accent insensitivity (an "accent" is a mark
attached to a character as in German 'ö') and multiple-character mappings
(such as the rule that 'ö' = 'OE' in one of the two German collations).</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>A character encoding is a way to encode characters so that they fit in memory.
That is, if the charset is ISO-8859-15, the euro symbol, €, will be encoded as
0xa4, and in UTF-8, it will be 0xe282ac.</p>
<p>The collation is how to compare characters, in latin9, there are letters as <code>e
é è ê f</code>, if sorted by their binary representation, it will go <code>e f é ê è</code> but
if the collation is set to, for example, French, you'll have them in the order
you thought they would be, which is all of <code>e é è ê</code> are equal, and then <code>f</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/css3-rotate-animation/" class="u-url">CSS3 Rotate Animation</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/css3-rotate-animation/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T21:29:43+08:00" itemprop="datePublished" title="2023-03-05 21:29">2023-03-05 21:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div class="code"><pre class="code literal-block">&lt;img class="image" src="" alt="" width="120" height="120"&gt;
</pre></div>

<p>Cannot get this animated image to work, it is supposed to do a 360 degrees
rotation.</p>
<p>I guess something's wrong with the CSS below, as it just stays still.</p>
<div class="code"><pre class="code literal-block"><span class="na">.image</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">float:</span><span class="w"> </span><span class="nf">left</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">margin:</span><span class="w"> </span><span class="err">0</span><span class="w"> </span><span class="nf">auto</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">position:</span><span class="w"> </span><span class="nf">absolute</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">top:</span><span class="w"> </span><span class="err">50%</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">left:</span><span class="w"> </span><span class="err">50%</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">width:</span><span class="w"> </span><span class="err">120</span><span class="nf">px</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">height:</span><span class="w"> </span><span class="err">120</span><span class="nf">px</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">margin-top:</span><span class="w"> </span><span class="err">-60</span><span class="nf">px</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">margin-left:</span><span class="w"> </span><span class="err">-60</span><span class="nf">px</span><span class="c1">;</span>

<span class="w">    </span><span class="err">-</span><span class="nl">webkit-animation-name:</span><span class="w"> </span><span class="nf">spin</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">webkit-animation-duration:</span><span class="w"> </span><span class="err">4000</span><span class="nf">ms</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">webkit-animation-iteration-count:</span><span class="w"> </span><span class="nf">infinite</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">webkit-animation-timing-function:</span><span class="w"> </span><span class="nf">linear</span><span class="c1">;</span>

<span class="w">    </span><span class="err">-</span><span class="nl">moz-animation-name:</span><span class="w"> </span><span class="nf">spin</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">moz-animation-duration:</span><span class="w"> </span><span class="err">4000</span><span class="nf">ms</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">moz-animation-iteration-count:</span><span class="w"> </span><span class="nf">infinite</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">moz-animation-timing-function:</span><span class="w"> </span><span class="nf">linear</span><span class="c1">;</span>

<span class="w">    </span><span class="err">-</span><span class="nl">ms-animation-name:</span><span class="w"> </span><span class="nf">spin</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">ms-animation-duration:</span><span class="w"> </span><span class="err">4000</span><span class="nf">ms</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">ms-animation-iteration-count:</span><span class="w"> </span><span class="nf">infinite</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">ms-animation-timing-function:</span><span class="w"> </span><span class="nf">linear</span><span class="c1">;</span>

<span class="w">    </span><span class="nl">animation-name:</span><span class="w"> </span><span class="nf">spin</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">animation-duration:</span><span class="w"> </span><span class="err">4000</span><span class="nf">ms</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">animation-iteration-count:</span><span class="w"> </span><span class="nf">infinite</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">animation-timing-function:</span><span class="w"> </span><span class="nf">linear</span><span class="c1">;</span>

<span class="w">    </span><span class="err">@-</span><span class="nf">ms-keyframes</span><span class="w"> </span><span class="no">spin</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="no">from</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="p">-</span><span class="no">ms-transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">0</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span><span class="w"> </span><span class="nf">to</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="p">-</span><span class="no">ms-transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">360</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="err">@-</span><span class="nf">moz-keyframes</span><span class="w"> </span><span class="no">spin</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="no">from</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="p">-</span><span class="no">moz-transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">0</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span><span class="w"> </span><span class="nf">to</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="p">-</span><span class="no">moz-transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">360</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="err">@-</span><span class="nf">webkit-keyframes</span><span class="w"> </span><span class="no">spin</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="no">from</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="p">-</span><span class="no">webkit-transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">0</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span><span class="w"> </span><span class="nf">to</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="p">-</span><span class="no">webkit-transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">360</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="err">@</span><span class="nf">keyframes</span><span class="w"> </span><span class="no">spin</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="no">from</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="no">transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">0</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span><span class="w"> </span><span class="nf">to</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="no">transform</span><span class="p">:</span><span class="w"> </span><span class="no">rotate</span><span class="p">(</span><span class="mi">360</span><span class="no">deg</span><span class="p">)</span><span class="c1">; </span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Here is a <strong>demo</strong>. The correct animation CSS:</p>
<div class="code"><pre class="code literal-block"><span class="p">.</span><span class="s s-Atom">image</span> <span class="p">{</span>
    <span class="s s-Atom">position</span><span class="p">:</span> <span class="s s-Atom">absolute</span><span class="p">;</span>
    <span class="s s-Atom">top</span><span class="p">:</span> <span class="mi">50</span><span class="c1">%;</span>
    <span class="s s-Atom">left</span><span class="p">:</span> <span class="mi">50</span><span class="c1">%;</span>
    <span class="s s-Atom">width</span><span class="p">:</span> <span class="mi">120</span><span class="s s-Atom">px</span><span class="p">;</span>
    <span class="s s-Atom">height</span><span class="p">:</span> <span class="mi">120</span><span class="s s-Atom">px</span><span class="p">;</span>
    <span class="s s-Atom">margin</span><span class="p">:</span><span class="o">-</span><span class="mi">60</span><span class="s s-Atom">px</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">60</span><span class="s s-Atom">px</span><span class="p">;</span>
    <span class="o">-</span><span class="s s-Atom">webkit</span><span class="o">-</span><span class="s s-Atom">animation</span><span class="p">:</span><span class="s s-Atom">spin</span> <span class="mi">4</span><span class="s s-Atom">s</span> <span class="s s-Atom">linear</span> <span class="s s-Atom">infinite</span><span class="p">;</span>
    <span class="o">-</span><span class="s s-Atom">moz</span><span class="o">-</span><span class="s s-Atom">animation</span><span class="p">:</span><span class="s s-Atom">spin</span> <span class="mi">4</span><span class="s s-Atom">s</span> <span class="s s-Atom">linear</span> <span class="s s-Atom">infinite</span><span class="p">;</span>
    <span class="s s-Atom">animation</span><span class="p">:</span><span class="s s-Atom">spin</span> <span class="mi">4</span><span class="s s-Atom">s</span> <span class="s s-Atom">linear</span> <span class="s s-Atom">infinite</span><span class="p">;</span>
<span class="p">}</span>
<span class="s s-Atom">@-moz</span><span class="o">-</span><span class="s s-Atom">keyframes</span> <span class="s s-Atom">spin</span> <span class="p">{</span> 
    <span class="mi">100</span><span class="c1">% { -moz-transform: rotate(360deg); } </span>
<span class="p">}</span>
<span class="s s-Atom">@-webkit</span><span class="o">-</span><span class="s s-Atom">keyframes</span> <span class="s s-Atom">spin</span> <span class="p">{</span> 
    <span class="mi">100</span><span class="c1">% { -webkit-transform: rotate(360deg); } </span>
<span class="p">}</span>
<span class="s s-Atom">@keyframes</span> <span class="s s-Atom">spin</span> <span class="p">{</span> 
    <span class="mi">100</span><span class="c1">% { </span>
        <span class="o">-</span><span class="s s-Atom">webkit</span><span class="o">-</span><span class="s s-Atom">transform</span><span class="p">:</span> <span class="nf">rotate</span><span class="p">(</span><span class="mi">360</span><span class="s s-Atom">deg</span><span class="p">);</span> 
        <span class="s s-Atom">transform</span><span class="p">:</span><span class="nf">rotate</span><span class="p">(</span><span class="mi">360</span><span class="s s-Atom">deg</span><span class="p">);</span> 
    <span class="p">}</span> 
<span class="p">}</span>


<span class="o">&lt;</span><span class="s s-Atom">img</span> <span class="s s-Atom">class=</span><span class="s2">"image"</span> <span class="s s-Atom">src=</span><span class="s2">"http://i.stack.imgur.com/pC1Tv.jpg"</span> <span class="s s-Atom">alt=</span><span class="s2">""</span> <span class="s s-Atom">width=</span><span class="s2">"120"</span> <span class="s s-Atom">height=</span><span class="s2">"120"</span><span class="o">&gt;</span>
</pre></div>

<hr>
<p>Some notes on your code:</p>
<ol>
<li>You've nested the keyframes inside the <code>.image</code> rule, and that's incorrect</li>
<li>
<code>float:left</code> won't work on absolutely positioned elements</li>
<li>Have a look at caniuse: IE10 doesn't need the <code>-ms-</code> prefix</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>To achieve the 360 degree rotation, here is the Working Solution.</p>
<p><strong>The HTML:</strong></p>
<div class="code"><pre class="code literal-block">&lt;img class="image" src="your-image.png"&gt;
</pre></div>

<p><strong>The CSS:</strong></p>
<div class="code"><pre class="code literal-block"><span class="na">.image</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">overflow:</span><span class="w"> </span><span class="nf">hidden</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">transition-duration:</span><span class="w"> </span><span class="err">0</span><span class="nf">.8s</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">transition-property:</span><span class="w"> </span><span class="nf">transform</span><span class="c1">;</span>
<span class="err">}</span>
<span class="nl">.image:</span><span class="nf">hover</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">transform:</span><span class="w"> </span><span class="nf">rotate</span><span class="p">(</span><span class="mi">360</span><span class="no">deg</span><span class="p">)</span><span class="c1">;</span>
<span class="w">    </span><span class="err">-</span><span class="nl">webkit-transform:</span><span class="w"> </span><span class="nf">rotate</span><span class="p">(</span><span class="mi">360</span><span class="no">deg</span><span class="p">)</span><span class="c1">;</span>
<span class="err">}</span>
</pre></div>

<p>You have to hover on the image and you will get the 360 degree rotation
effect.</p>
<p>PS: Add a <code>-webkit-</code> extension for it to work on chrome and other webkit
browers. You can check the updated fiddle for webkit <strong>HERE</strong></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-does-content-security-policy-csp-work/" class="u-url">How does Content Security Policy (CSP) work?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-does-content-security-policy-csp-work/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T21:28:11+08:00" itemprop="datePublished" title="2023-03-05 21:28">2023-03-05 21:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm getting a bunch of errors in the developer console:</p>
<blockquote>
<p>Refused to evaluate a string</p>
<p>Refused to execute inline script because it violates the following Content
Security Policy directive</p>
<p>Refused to load the script</p>
<p>Refused to load the stylesheet</p>
</blockquote>
<p>What's this all about? How does Content Security Policy (CSP) work? How do I
use the <code>Content-Security-Policy</code> HTTP header?</p>
<p>Specifically, how to...</p>
<ol>
<li>...allow multiple sources?</li>
<li>...use different directives?</li>
<li>...use multiple directives?</li>
<li>...handle ports?</li>
<li>...handle different protocols?</li>
<li>...allow <code>file://</code> protocol?</li>
<li>...use inline styles, scripts, and tags <code>&lt;style&gt;</code> and <code>&lt;script&gt;</code>?</li>
<li>...allow <code>eval()</code>?</li>
</ol>
<p>And finally:</p>
<ol>
<li>What exactly does <code>'self'</code> mean?</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>Content-Security-Policy</code> meta-tag allows you to reduce the risk of XSS
attacks by allowing you to define where resources can be loaded from,
preventing browsers from loading data from any other locations. This makes it
harder for an attacker to inject malicious code into your site.</p>
<p>I banged my head against a brick wall trying to figure out why I was getting
CSP errors one after another, and there didn't seem to be any concise, clear
instructions on just how does it work. So here's my attempt at explaining
<strong>some</strong> points of CSP briefly, mostly concentrating on the things I found
hard to solve.</p>
<p>For brevity I won’t write the full tag in each sample. Instead I'll only show
the <code>content</code> property, so a sample that says <code>content="default-src 'self'"</code>
means this:</p>
<div class="code"><pre class="code literal-block">&lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'"&gt;
</pre></div>

<p><strong>1. How can I allow multiple sources?</strong></p>
<p>You can simply list your sources after a directive as a space-separated list:</p>
<div class="code"><pre class="code literal-block">content="default-src 'self' https://example.com/js/"
</pre></div>

<p>Note that there are no quotes around parameters other than the <em>special</em> ones,
like <code>'self'</code>. Also, there's no colon (<code>:</code>) after the directive. Just the
directive, then a space-separated list of parameters.</p>
<p>Everything below the specified parameters is implicitly allowed. That means
that in the example above these would be valid sources:</p>
<div class="code"><pre class="code literal-block">https://example.com/js/file.js
https://example.com/js/subdir/anotherfile.js
</pre></div>

<p>These, however, would not be valid:</p>
<div class="code"><pre class="code literal-block">http://example.com/js/file.js
^^^^ wrong protocol

https://example.com/file.js
                   ^^ above the specified path
</pre></div>

<p><strong>2. How can I use different directives? What do they each do?</strong></p>
<p>The most common directives are:</p>
<ul>
<li>
<code>default-src</code> the default policy for loading javascript, images, CSS, fonts, AJAX requests, etc</li>
<li>
<code>script-src</code> defines valid sources for javascript files</li>
<li>
<code>style-src</code> defines valid sources for css files</li>
<li>
<code>img-src</code> defines valid sources for images</li>
<li>
<code>connect-src</code> defines valid targets for to XMLHttpRequest (AJAX), WebSockets or EventSource. If a connection attempt is made to a host that's not allowed here, the browser will emulate a <code>400</code> error</li>
</ul>
<p>There are others, but these are the ones you're most likely to need.</p>
<p><strong>3. How can I use multiple directives?</strong></p>
<p>You define all your directives inside one meta-tag by terminating them with a
semicolon (<code>;</code>):</p>
<div class="code"><pre class="code literal-block"><span class="nt">content</span><span class="o">=</span><span class="s2">"default-src 'self' https://example.com/js/; style-src 'self'"</span>
</pre></div>

<p><strong>4. How can I handle ports?</strong></p>
<p>Everything but the default ports needs to be allowed explicitly by adding the
port number or an asterisk after the allowed domain:</p>
<div class="code"><pre class="code literal-block">content="default-src 'self' https://ajax.googleapis.com http://example.com:123/free/stuff/"
</pre></div>

<p>The above would result in:</p>
<div class="code"><pre class="code literal-block">https://ajax.googleapis.com:123
                           ^^^^ Not ok, wrong port

https://ajax.googleapis.com - OK

http://example.com/free/stuff/file.js
                 ^^ Not ok, only the port 123 is allowed

http://example.com:123/free/stuff/file.js - OK
</pre></div>

<p>As I mentioned, you can also use an asterisk to explicitly allow all ports:</p>
<div class="code"><pre class="code literal-block">content="default-src example.com:*"
</pre></div>

<p><strong>5. How can I handle different protocols?</strong></p>
<p>By default, only standard protocols are allowed. For example to allow
WebSockets <code>ws://</code> you will have to allow it explicitly:</p>
<div class="code"><pre class="code literal-block"><span class="nv">content</span><span class="o">=</span><span class="s2">"default-src 'self'; connect-src ws:; style-src 'self'"</span>
<span class="w">                                         </span><span class="o">^^^</span><span class="w"> </span><span class="nv">web</span><span class="w"> </span><span class="nv">Sockets</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">allowed</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">domains</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">ports</span>.
</pre></div>

<p><strong>6. How can I allow the file protocol<code>file://</code>?</strong></p>
<p>If you'll try to define it as such it won’t work. Instead, you'll allow it
with the <code>filesystem</code> parameter:</p>
<div class="code"><pre class="code literal-block">content="default-src filesystem"
</pre></div>

<p><strong>7. How can I use inline scripts and style definitions?</strong></p>
<p>Unless explicitly allowed, you can't use inline style definitions, code inside
<code>&lt;script&gt;</code> tags or in tag properties like <code>onclick</code>. You allow them like so:</p>
<div class="code"><pre class="code literal-block">content="script-src 'unsafe-inline'; style-src 'unsafe-inline'"
</pre></div>

<p>You'll also have to explicitly allow inline, base64 encoded images:</p>
<div class="code"><pre class="code literal-block">content="img-src data:"
</pre></div>

<p><strong>8. How can I allow<code>eval()</code>?</strong></p>
<p>I'm sure many people would say that you don't, since 'eval is evil' and the
most likely cause for the impending end of the world. Those people would be
wrong. Sure, you can definitely punch major holes into your site's security
with eval, but it has perfectly valid use cases. You just have to be smart
about using it. You allow it like so:</p>
<div class="code"><pre class="code literal-block">content="script-src 'unsafe-eval'"
</pre></div>

<p><strong>9. What exactly does<code>'self'</code> mean?</strong></p>
<p>You might take <code>'self'</code> to mean localhost, local filesystem, or anything on
the same host. It doesn't mean any of those. It means sources that have the
same scheme (protocol), same host, and same port as the file the content
policy is defined in. Serving your site over HTTP? No https for you then,
unless you define it explicitly.</p>
<p>I've used <code>'self'</code> in most examples as it usually makes sense to include it,
but it's by no means mandatory. Leave it out if you don't need it.</p>
<p><strong>But hang on a minute!</strong> Can't I just use <code>content="default-src *"</code> and be
done with it?</p>
<p>No. In addition to the obvious security vulnerabilities, this also won’t work
as you'd expect. Even though some docs claim it allows anything, that's not
true. It doesn't allow inlining or evals, so to really, really make your site
extra vulnerable, you would use this:</p>
<div class="code"><pre class="code literal-block">content="default-src * 'unsafe-inline' 'unsafe-eval'"
</pre></div>

<p>... but I trust you won’t.</p>
<p><strong>Further reading:</strong></p>
<p>http://content-security-policy.com</p>
<p>http://en.wikipedia.org/wiki/Content_Security_Policy</p>
<p><br></p>
<h3>Suggest</h3>
<h4>Apache 2 mod_headers</h4>
<p>You could also enable Apache 2 mod_headers. On Fedora it's already enabled by
default. If you use Ubuntu/Debian, enable it like this:</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">First</span><span class="w"> </span><span class="nv">enable</span><span class="w"> </span><span class="nv">headers</span><span class="w"> </span><span class="nv">module</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Apache</span><span class="w"> </span><span class="mi">2</span>,
#<span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">restart</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Apache2</span><span class="w"> </span><span class="nv">service</span>
<span class="nv">a2enmod</span><span class="w"> </span><span class="nv">headers</span>
<span class="nv">apache2</span><span class="w"> </span><span class="o">-</span><span class="nv">k</span><span class="w"> </span><span class="nv">graceful</span>
</pre></div>

<p>On Ubuntu/Debian you can configure headers in the file <code>/etc/apache2/conf-
enabled/security.conf</code></p>
<div class="code"><pre class="code literal-block"><span class="err">#</span>
<span class="err">#</span><span class="w"> </span><span class="nt">Setting</span><span class="w"> </span><span class="nt">this</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="nt">will</span><span class="w"> </span><span class="nt">prevent</span><span class="w"> </span><span class="nt">MSIE</span><span class="w"> </span><span class="nt">from</span><span class="w"> </span><span class="nt">interpreting</span><span class="w"> </span><span class="nt">files</span><span class="w"> </span><span class="nt">as</span><span class="w"> </span><span class="nt">something</span>
<span class="err">#</span><span class="w"> </span><span class="nt">else</span><span class="w"> </span><span class="nt">than</span><span class="w"> </span><span class="nt">declared</span><span class="w"> </span><span class="nt">by</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">content</span><span class="w"> </span><span class="nt">type</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">HTTP</span><span class="w"> </span><span class="nt">headers</span><span class="o">.</span>
<span class="err">#</span><span class="w"> </span><span class="nt">Requires</span><span class="w"> </span><span class="nt">mod_headers</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">be</span><span class="w"> </span><span class="nt">enabled</span><span class="o">.</span>
<span class="err">#</span>
<span class="p">#</span><span class="nn">Header</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">X-Content-Type-Options</span><span class="o">:</span><span class="w"> </span><span class="s2">"nosniff"</span>

<span class="err">#</span>
<span class="err">#</span><span class="w"> </span><span class="nt">Setting</span><span class="w"> </span><span class="nt">this</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="nt">will</span><span class="w"> </span><span class="nt">prevent</span><span class="w"> </span><span class="nt">other</span><span class="w"> </span><span class="nt">sites</span><span class="w"> </span><span class="nt">from</span><span class="w"> </span><span class="nt">embedding</span><span class="w"> </span><span class="nt">pages</span><span class="w"> </span><span class="nt">from</span><span class="w"> </span><span class="nt">this</span>
<span class="err">#</span><span class="w"> </span><span class="nt">site</span><span class="w"> </span><span class="nt">as</span><span class="w"> </span><span class="nt">frames</span><span class="o">.</span><span class="w"> </span><span class="nt">This</span><span class="w"> </span><span class="nt">defends</span><span class="w"> </span><span class="nt">against</span><span class="w"> </span><span class="nt">clickjacking</span><span class="w"> </span><span class="nt">attacks</span><span class="o">.</span>
<span class="err">#</span><span class="w"> </span><span class="nt">Requires</span><span class="w"> </span><span class="nt">mod_headers</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">be</span><span class="w"> </span><span class="nt">enabled</span><span class="o">.</span>
<span class="err">#</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">X-Frame-Options</span><span class="o">:</span><span class="w"> </span><span class="s2">"sameorigin"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">X-Content-Type-Options</span><span class="w"> </span><span class="nt">nosniff</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">X-XSS-Protection</span><span class="w"> </span><span class="s2">"1; mode=block"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">X-Permitted-Cross-Domain-Policies</span><span class="w"> </span><span class="s2">"master-only"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">Cache-Control</span><span class="w"> </span><span class="s2">"no-cache, no-store, must-revalidate"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">Pragma</span><span class="w"> </span><span class="s2">"no-cache"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">Expires</span><span class="w"> </span><span class="s2">"-1"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">Content-Security-Policy</span><span class="o">:</span><span class="w"> </span><span class="s2">"default-src 'none';"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">Content-Security-Policy</span><span class="o">:</span><span class="w"> </span><span class="s2">"script-src 'self' www.google-analytics.com adserver.example.com www.example.com;"</span>
<span class="nt">Header</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="nt">Content-Security-Policy</span><span class="o">:</span><span class="w"> </span><span class="s2">"style-src 'self' www.example.com;"</span>
</pre></div>

<p>Note: This is the bottom part of the file. Only the last three entries are CSP
settings.</p>
<p>The first parameter is the directive, the second is the sources to be white-
listed. I've added Google analytics and an adserver, which you might have.
Furthermore, I found that if you have aliases, e.g, www.example.com and
example.com configured in Apache 2 you should add them to the white-list as
well.</p>
<p>Inline code is considered harmful, and you should avoid it. Copy all the
JavaScript code and CSS to separate files and add them to the white-list.</p>
<p>While you're at it you could take a look at the other header settings and
install mod_security</p>
<p><strong>Further reading:</strong></p>
<p>https://developers.google.com/web/fundamentals/security/csp/</p>
<p>https://www.w3.org/TR/CSP/</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2836.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2834.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
