<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 499) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-499.html">
<link rel="prev" href="index-500.html" type="text/html">
<link rel="next" href="index-498.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-the-git-commit-count/" class="u-url">How do I get the Git commit count?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-the-git-commit-count/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:25:29+08:00" itemprop="datePublished" title="2023-02-17 08:25">2023-02-17 08:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to get the number of commits of my Git repository, a bit like SVN
revision numbers.</p>
<p>The goal is to use it as a unique, incrementing build number.</p>
<p>I currently do like that, on Unix/Cygwin/msysGit:</p>
<div class="code"><pre class="code literal-block">git log --pretty=format:'' | wc -l
</pre></div>

<p>But I feel it's a bit of a hack.</p>
<p>Is there a better way to do that? It would be cool if I actually didn't need
<code>wc</code> or even Git, so it could work on a bare Windows. Just read a file or a
directory structure...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To get a commit count for a revision (<code>HEAD</code>, <code>master</code>, a commit hash):</p>
<div class="code"><pre class="code literal-block">git rev-list --count &lt;revision&gt;
</pre></div>

<p>To get the commit count across all branches:</p>
<div class="code"><pre class="code literal-block">git rev-list --all --count
</pre></div>

<p>I recommend against using this for build identifier, but if you must, it's
probably best to use the count for the branch you're building against. That
way the same revision will always have the same number. If you use the count
for all branches, activity on other branches could change the number.</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>git shortlog</code> is one way.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-use-pip-over-easy-install/" class="u-url">Why use pip over easy_install?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-use-pip-over-easy-install/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:25:03+08:00" itemprop="datePublished" title="2023-02-17 08:25">2023-02-17 08:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>A tweet reads:</p>
<blockquote>
<p>Don't use easy_install, unless you like stabbing yourself in the face. Use
pip.</p>
</blockquote>
<p>Why use pip over easy_install? Doesn't the fault lie with PyPI and package
authors mostly? If an author uploads crap source tarball (eg: missing files,
no setup.py) to PyPI, then both pip and easy_install will fail. Other than
cosmetic differences, why do Python people (like in the above tweet) seem to
<strong>strongly</strong> favor pip over easy_install?</p>
<p>(Let's assume that we're talking about easy_install from the Distribute
package, that is maintained by the community)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Many of the answers here are out of date for 2015 (although the initially
accepted one from Daniel Roseman is not). Here's the current state of things:</p>
<ul>
<li>Binary packages are now distributed as wheels (<code>.whl</code> files)—not just on PyPI, but in third-party repositories like Christoph Gohlke's Extension Packages for Windows. <code>pip</code> can handle wheels; <code>easy_install</code> cannot.</li>
<li>Virtual environments (which come built-in with 3.4, or can be added to 2.6+/3.1+ with <code>virtualenv</code>) have become a very important and prominent tool (and recommended in the official docs); they include <code>pip</code> out of the box, but don't even work properly with <code>easy_install</code>.</li>
<li>The <code>distribute</code> package that included <code>easy_install</code> is no longer maintained. Its improvements over <code>setuptools</code> got merged back into <code>setuptools</code>. Trying to install <code>distribute</code> will just install <code>setuptools</code> instead.</li>
<li>
<code>easy_install</code> itself is only quasi-maintained.</li>
<li>All of the cases where <code>pip</code> used to be inferior to <code>easy_install</code>—installing from an unpacked source tree, from a DVCS repo, etc.—are long-gone; you can <code>pip install .</code>, <code>pip install git+https://</code>.</li>
<li>
<code>pip</code> comes with the official Python 2.7 and 3.4+ packages from python.org, and a <code>pip</code> bootstrap is included by default if you build from source.</li>
<li>The various incomplete bits of documentation on installing, using, and building packages have been replaced by the Python Packaging User Guide. Python's own documentation on Installing Python Modules now defers to this user guide, and explicitly calls out <code>pip</code> as "the preferred installer program".</li>
<li>Other new features have been added to <code>pip</code> over the years that will never be in <code>easy_install</code>. For example, <code>pip</code> makes it easy to clone your site-packages by building a requirements file and then installing it with a single command on each side. Or to convert your requirements file to a local repo to use for in-house development. And so on.</li>
</ul>
<p>The only good reason that I know of to use <code>easy_install</code> in 2015 is the
special case of using Apple's pre-installed Python versions with OS X
10.5-10.8. Since 10.5, Apple has included <code>easy_install</code>, but as of 10.10 they
still don't include <code>pip</code>. With 10.9+, you should still just use <code>get-pip.py</code>,
but for 10.5-10.8, this has some problems, so it's easier to <code>sudo
easy_install pip</code>. (In general, <code>easy_install pip</code> is a bad idea; it's only
for OS X 10.5-10.8 that you want to do this.) Also, 10.5-10.8 include
<code>readline</code> in a way that <code>easy_install</code> knows how to kludge around but <code>pip</code>
doesn't, so you also want to <code>sudo easy_install readline</code> if you want to
upgrade that.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Many of the answers here are out of date for 2015 (although the initially
accepted one from Daniel Roseman is not). Here's the current state of things:</p>
<ul>
<li>Binary packages are now distributed as wheels (<code>.whl</code> files)—not just on PyPI, but in third-party repositories like Christoph Gohlke's Extension Packages for Windows. <code>pip</code> can handle wheels; <code>easy_install</code> cannot.</li>
<li>Virtual environments (which come built-in with 3.4, or can be added to 2.6+/3.1+ with <code>virtualenv</code>) have become a very important and prominent tool (and recommended in the official docs); they include <code>pip</code> out of the box, but don't even work properly with <code>easy_install</code>.</li>
<li>The <code>distribute</code> package that included <code>easy_install</code> is no longer maintained. Its improvements over <code>setuptools</code> got merged back into <code>setuptools</code>. Trying to install <code>distribute</code> will just install <code>setuptools</code> instead.</li>
<li>
<code>easy_install</code> itself is only quasi-maintained.</li>
<li>All of the cases where <code>pip</code> used to be inferior to <code>easy_install</code>—installing from an unpacked source tree, from a DVCS repo, etc.—are long-gone; you can <code>pip install .</code>, <code>pip install git+https://</code>.</li>
<li>
<code>pip</code> comes with the official Python 2.7 and 3.4+ packages from python.org, and a <code>pip</code> bootstrap is included by default if you build from source.</li>
<li>The various incomplete bits of documentation on installing, using, and building packages have been replaced by the Python Packaging User Guide. Python's own documentation on Installing Python Modules now defers to this user guide, and explicitly calls out <code>pip</code> as "the preferred installer program".</li>
<li>Other new features have been added to <code>pip</code> over the years that will never be in <code>easy_install</code>. For example, <code>pip</code> makes it easy to clone your site-packages by building a requirements file and then installing it with a single command on each side. Or to convert your requirements file to a local repo to use for in-house development. And so on.</li>
</ul>
<p>The only good reason that I know of to use <code>easy_install</code> in 2015 is the
special case of using Apple's pre-installed Python versions with OS X
10.5-10.8. Since 10.5, Apple has included <code>easy_install</code>, but as of 10.10 they
still don't include <code>pip</code>. With 10.9+, you should still just use <code>get-pip.py</code>,
but for 10.5-10.8, this has some problems, so it's easier to <code>sudo
easy_install pip</code>. (In general, <code>easy_install pip</code> is a bad idea; it's only
for OS X 10.5-10.8 that you want to do this.) Also, 10.5-10.8 include
<code>readline</code> in a way that <code>easy_install</code> knows how to kludge around but <code>pip</code>
doesn't, so you also want to <code>sudo easy_install readline</code> if you want to
upgrade that.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-an-instance-of-std-string-to-lower-case/" class="u-url">How to convert an instance of std::string to lower case</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-an-instance-of-std-string-to-lower-case/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:24:28+08:00" itemprop="datePublished" title="2023-02-17 08:24">2023-02-17 08:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to convert a <code>std::string</code> to lowercase. I am aware of the function
<code>tolower()</code>. However, in the past I have had issues with this function and it
is hardly ideal anyway as using it with a <code>std::string</code> would require
iterating over each character.</p>
<p>Is there an alternative which works 100% of the time?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Adapted from <em>Not So Frequently Asked Questions</em> :</p>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cctype&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="n">std</span><span class="o">::</span><span class="kr">string</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Abc"</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="nf">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="nf">end</span><span class="p">(),</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="nf">begin</span><span class="p">(),</span>
<span class="w">    </span><span class="p">[](</span><span class="kr">unsigned</span><span class="w"> </span><span class="kr">char</span><span class="w"> </span><span class="n">c</span><span class="p">){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tolower</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w"> </span><span class="p">});</span>
</pre></div>

<p>You're really not going to get away without iterating through each character.
There's no way to know whether the character is lowercase or uppercase
otherwise.</p>
<p>If you really hate <code>tolower()</code>, here's a specialized ASCII-only alternative
that I don't recommend you use:</p>
<div class="code"><pre class="code literal-block"><span class="nt">char</span><span class="w"> </span><span class="nt">asciitolower</span><span class="o">(</span><span class="nt">char</span><span class="w"> </span><span class="nt">in</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">if</span><span class="w"> </span><span class="err">(in</span><span class="w"> </span><span class="err">&lt;=</span><span class="w"> </span><span class="err">'Z'</span><span class="w"> </span><span class="err">&amp;&amp;</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">&gt;=</span><span class="w"> </span><span class="err">'A')</span>
<span class="w">        </span><span class="err">return</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">('Z'</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">'z')</span><span class="p">;</span>
<span class="w">    </span><span class="err">return</span><span class="w"> </span><span class="err">in</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">std</span><span class="p">::</span><span class="nd">transform</span><span class="o">(</span><span class="nt">data</span><span class="p">.</span><span class="nc">begin</span><span class="o">(),</span><span class="w"> </span><span class="nt">data</span><span class="p">.</span><span class="nc">end</span><span class="o">(),</span><span class="w"> </span><span class="nt">data</span><span class="p">.</span><span class="nc">begin</span><span class="o">(),</span><span class="w"> </span><span class="nt">asciitolower</span><span class="o">);</span>
</pre></div>

<p>Be aware that <code>tolower()</code> can only do a per-single-byte-character
substitution, which is ill-fitting for many scripts, especially if using a
multi-byte-encoding like UTF-8.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Boost provides a string algorithm for this:</p>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;boost/algorithm/string.hpp&gt;</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"HELLO, WORLD!"</span><span class="p">;</span>
<span class="n">boost</span><span class="o">::</span><span class="n">algorithm</span><span class="o">::</span><span class="n">to_lower</span><span class="p">(</span><span class="n">str</span><span class="p">);</span><span class="w"> </span><span class="c1">// modifies str</span>
</pre></div>

<p>Or, for non-in-place:</p>
<div class="code"><pre class="code literal-block"><span class="c1">#include &lt;boost/algorithm/string.hpp&gt;</span>

<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="w"> </span><span class="nb">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"HELLO, WORLD!"</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="w"> </span><span class="n">lower_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boost</span><span class="p">::</span><span class="n">algorithm</span><span class="p">::</span><span class="n">to_lower_copy</span><span class="p">(</span><span class="nb">str</span><span class="p">);</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-500.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-498.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
