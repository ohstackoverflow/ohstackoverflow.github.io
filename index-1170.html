<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1170) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1170.html">
<link rel="prev" href="index-1171.html" type="text/html">
<link rel="next" href="index-1169.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/in-objective-c-how-do-i-test-the-object-type/" class="u-url">In Objective-C, how do I test the object type?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/in-objective-c-how-do-i-test-the-object-type/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T02:54:59+08:00" itemprop="datePublished" title="2023-02-18 02:54">2023-02-18 02:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to test whether the object is of type <code>NSString</code> or <code>UIImageView</code>. How
can I accomplish this? Is there some type of "isoftype" method?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If your object is <code>myObject</code>, and you want to test to see if it is an
<code>NSString</code>, the code would be:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">myObject</span><span class="w"> </span><span class="n">isKindOfClass</span><span class="o">:</span><span class="p">[</span><span class="bp">NSString</span><span class="w"> </span><span class="k">class</span><span class="p">]]</span>
</pre></div>

<p>Likewise, if you wanted to test <code>myObject</code> for a <code>UIImageView</code>:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">myObject</span><span class="w"> </span><span class="n">isKindOfClass</span><span class="o">:</span><span class="p">[</span><span class="bp">UIImageView</span><span class="w"> </span><span class="k">class</span><span class="p">]]</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You would probably use</p>
<div class="code"><pre class="code literal-block">- (BOOL)isKindOfClass:(Class)aClass
</pre></div>

<p>This is a method of <code>NSObject</code>.</p>
<p>For more info check the <code>NSObject</code> documentation.</p>
<p>This is how you use this.</p>
<div class="code"><pre class="code literal-block"><span class="kt">BOOL</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">isKindOfClass</span><span class="o">:</span><span class="p">[</span><span class="n">SomeClass</span><span class="w"> </span><span class="k">class</span><span class="p">]];</span>
</pre></div>

<p>You might also try doing somthing like this</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">myArray</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"======================================="</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"Is of type: %@"</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">element</span><span class="w"> </span><span class="n">className</span><span class="p">]);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"Is of type NSString?: %@"</span><span class="p">,</span><span class="w"> </span><span class="p">([[</span><span class="n">element</span><span class="w"> </span><span class="n">className</span><span class="p">]</span><span class="w"> </span><span class="n">isMemberOfClass</span><span class="o">:</span><span class="p">[</span><span class="bp">NSString</span><span class="w"> </span><span class="k">class</span><span class="p">]])</span><span class="o">?</span><span class="w"> </span><span class="s">@"Yes"</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">@"No"</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"Is a kind of NSString: %@"</span><span class="p">,</span><span class="w"> </span><span class="p">([[</span><span class="n">element</span><span class="w"> </span><span class="n">classForCoder</span><span class="p">]</span><span class="w"> </span><span class="n">isSubclassOfClass</span><span class="o">:</span><span class="p">[</span><span class="bp">NSString</span><span class="w"> </span><span class="k">class</span><span class="p">]])</span><span class="o">?</span><span class="w"> </span><span class="s">@"Yes"</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">@"No"</span><span class="p">);</span><span class="w">    </span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mime-type-for-woff-fonts/" class="u-url">Mime type for WOFF fonts?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mime-type-for-woff-fonts/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T02:54:34+08:00" itemprop="datePublished" title="2023-02-18 02:54">2023-02-18 02:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What mime type should WOFF fonts be served as?</p>
<p>I am serving truetype (ttf) fonts as <code>font/truetype</code> and opentype (otf) as
<code>font/opentype</code>, but I cannot find the correct format for WOFF fonts.</p>
<p>I have tried <code>font/woff</code>, <code>font/webopen</code>, and <code>font/webopentype</code>, but Chrome
still complains:</p>
<p>"Resource interpreted as font but transferred with MIME type
application/octet-stream."</p>
<p>Anybody know?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><em><strong>Update from Keith Shaw's comment on Jun 22, 2017:</strong></em></p>
<blockquote>
<p>As of February 2017, RFC8081 is the proposed standard. It defines a top-
level media type for fonts, therefore the standard media type for WOFF and
WOFF2 are as follows:</p>
<p><code>font/woff</code></p>
<p><code>font/woff2</code></p>
</blockquote>
<hr>
<p>In January 2011 it was announced that in the meantime Chromium will recognize</p>
<p><code>application/x-font-woff</code></p>
<p>as the mime-type for WOFF. I know this change is now in Chrome beta and if not
in stable yet, it shouldn't be too far away.</p>
<p><br></p>
<h3>Suggest</h3>
<p>For me, the next has beeen working in an .htaccess file.</p>
<div class="code"><pre class="code literal-block">AddType font/ttf .ttf
AddType font/eot .eot
AddType font/otf .otf
AddType font/woff .woff
AddType font/woff2 .woff2
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/proper-way-to-return-json-using-node-or-express/" class="u-url">Proper way to return JSON using node or Express</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/proper-way-to-return-json-using-node-or-express/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T02:54:05+08:00" itemprop="datePublished" title="2023-02-18 02:54">2023-02-18 02:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>So, one can attempt to fetch the following JSON object:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>curl<span class="w"> </span>-i<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span>http://echo.jsontest.com/key/value/anotherKey/anotherValue
HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Access-Control-Allow-Origin:<span class="w"> </span>*
Content-Type:<span class="w"> </span>application/json<span class="p">;</span><span class="w"> </span><span class="nv">charset</span><span class="o">=</span>ISO-8859-1
Date:<span class="w"> </span>Wed,<span class="w"> </span><span class="m">30</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">2013</span><span class="w"> </span><span class="m">22</span>:19:10<span class="w"> </span>GMT
Server:<span class="w"> </span>Google<span class="w"> </span>Frontend
Cache-Control:<span class="w"> </span>private
Alternate-Protocol:<span class="w"> </span><span class="m">80</span>:quic,80:quic
Transfer-Encoding:<span class="w"> </span>chunked

<span class="o">{</span>
<span class="w">   </span><span class="s2">"anotherKey"</span>:<span class="w"> </span><span class="s2">"anotherValue"</span>,
<span class="w">   </span><span class="s2">"key"</span>:<span class="w"> </span><span class="s2">"value"</span>
<span class="o">}</span>
$
</pre></div>

<p>Is there a way to produce exactly the same body in a response from a server
using node or express? Clearly, one can set the headers and indicate that the
content-type of the response is going to be "application/json", but then there
are different ways to write/send the object. The one that I have seen commonly
being used is by using a command of the form:</p>
<div class="code"><pre class="code literal-block">response.write(JSON.stringify(anObject));
</pre></div>

<p>However, this has two points where one could argue as if they were "problems":</p>
<ul>
<li>We are sending a string.</li>
<li>Moreover, there is no new line character in the end.</li>
</ul>
<p>Another idea is to use the command:</p>
<div class="code"><pre class="code literal-block"><span class="nv">response</span>.<span class="k">send</span><span class="ss">(</span><span class="nv">anObject</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>This appears to be sending a JSON object based on the output of curl similar
to the first example above. However, there is no new line character in the end
of the body when curl is again being used on a terminal. So, how can one
actually write down something like this with a new line character appended in
the end using node or node/express?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>That response is a string too, if you want to send the response prettified,
for some awkward reason, you could use something like
<code>JSON.stringify(anObject, null, 3)</code></p>
<p>It's important that you set the <code>Content-Type</code> header to <code>application/json</code>,
too.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">res</span><span class="p">){</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">setHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span><span class="w"> </span><span class="s1">'application/json'</span><span class="p">);</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">({</span><span class="w"> </span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}));</span>
<span class="p">});</span>
<span class="n">app</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="s2">"a"</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
</pre></div>

<p>Prettified:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">res</span><span class="p">){</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">setHeader</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span><span class="w"> </span><span class="s1">'application/json'</span><span class="p">);</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">({</span><span class="w"> </span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="p">});</span>
<span class="n">app</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="o">&gt;</span><span class="w">  </span><span class="p">{</span>
<span class="o">//</span><span class="w"> </span><span class="o">&gt;</span><span class="w">     </span><span class="s2">"a"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="o">//</span><span class="w"> </span><span class="o">&gt;</span><span class="w">  </span><span class="p">}</span>
</pre></div>

<p>I'm not exactly sure why you want to terminate it with a newline, but you
could just do <code>JSON.stringify(...) + '\n'</code> to achieve that.</p>
<h2>Express</h2>
<p>In express you can do this by changing the options instead.</p>
<blockquote>
<p><code>'json replacer'</code> JSON replacer callback, null by default</p>
<p><code>'json spaces'</code> JSON response spaces for formatting, defaults to 2 in
development, 0 in production</p>
</blockquote>
<p><em>Not actually recommended to set to 40</em></p>
<div class="code"><pre class="code literal-block">app.set('json spaces', 40);
</pre></div>

<p>Then you could just respond with some json.</p>
<div class="code"><pre class="code literal-block"><span class="nt">res</span><span class="p">.</span><span class="nc">json</span><span class="o">(</span><span class="p">{</span><span class="w"> </span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="o">);</span>
</pre></div>

<p>It'll use the <code>'json spaces</code>' configuration to prettify it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Since Express.js 3x the response object has a json() method which sets all the
headers correctly for you and returns the response in JSON format.</p>
<p>Example:</p>
<div class="code"><pre class="code literal-block">res.json({"foo": "bar"});
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1171.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1169.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
