<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1598) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1598.html">
<link rel="prev" href="index-1599.html" type="text/html">
<link rel="next" href="index-1597.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/converting-dictionary-to-json/" class="u-url">Converting dictionary to JSON</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/converting-dictionary-to-json/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:50:45+08:00" itemprop="datePublished" title="2023-03-03 04:50">2023-03-03 04:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div class="code"><pre class="code literal-block">r = {'is_claimed': 'True', 'rating': 3.5}
r = json.dumps(r)
file.write(str(r['rating']))
</pre></div>

<p>I am not able to access my data in the JSON. What am I doing wrong?</p>
<div class="code"><pre class="code literal-block"><span class="n">TypeError</span><span class="o">:</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">indices</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">integers</span><span class="o">,</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">str</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><code>json.dumps()</code> converts a dictionary to <code>str</code> object, not a <code>json(dict)</code>
object! So you have to load your <code>str</code> into a <code>dict</code> to use it by using
<strong><code>json.loads()</code></strong> method</p>
<p>See <code>json.dumps()</code> as a save method and <code>json.loads()</code> as a retrieve method.</p>
<p>This is the code sample which might help you understand it more:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">json</span>

<span class="n">r</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'is_claimed'</span><span class="p">:</span> <span class="s1">'True'</span><span class="p">,</span> <span class="s1">'rating'</span><span class="p">:</span> <span class="mf">3.5</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="n">loaded_r</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="n">loaded_r</span><span class="p">[</span><span class="s1">'rating'</span><span class="p">]</span> <span class="c1">#Output 3.5</span>
<span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="c1">#Output str</span>
<span class="nb">type</span><span class="p">(</span><span class="n">loaded_r</span><span class="p">)</span> <span class="c1">#Output dict</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><code>json.dumps()</code> returns the JSON string representation of the python dict. See
the docs</p>
<p>You can't do <code>r['rating']</code> because r is a string, not a dict anymore</p>
<p>Perhaps you meant something like</p>
<div class="code"><pre class="code literal-block">r = {'is_claimed': 'True', 'rating': 3.5}
json = json.dumps(r) # note i gave it a different name
file.write(str(r['rating']))
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/global-angular-cli-version-greater-than-local-version/" class="u-url">Global Angular CLI version greater than local version</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/global-angular-cli-version-greater-than-local-version/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:50:16+08:00" itemprop="datePublished" title="2023-03-03 04:50">2023-03-03 04:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When running <code>ng serve</code> I get this warning about my global CLI version being
greater than my local version. I don't notice any issues from this warning,
but I was wondering if the two versions should be in sync? Also, Is it
necessary to have a local version if you have a global version?</p>
<p>The warning:</p>
<blockquote>
<p>Your global Angular CLI version (1.1.1) is greater than your local version
(1.0.6). The local Angular CLI version is used.</p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<p>To answer one of the questions, it is necessary to have both a global and
local install for the tools to work.</p>
<p>If you try to run <code>ng serve</code> on an application without the local install of
the CLI (global install only), you will get the following error.</p>
<blockquote>
<p>You have to be inside an Angular CLI project in order to use the serve
command.</p>
</blockquote>
<p>It will also print this message:</p>
<div class="code"><pre class="code literal-block"><span class="n">Please</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="nl">issues</span><span class="p">:</span>
<span class="ss">"npm install --save-dev @angular/cli@latest"</span>
</pre></div>

<p>Run that <code>npm</code> command to update the CLI locally, and avoid the warning that
you are getting.</p>
<p>Other question: It looks like they do not <em>have</em> to be in sync, but it's
probably best that they are in order to avoid any unusual behavior with the
tool, or any inconsistencies with the code the tool generates.</p>
<p><em>Why do we need both the global install, and a local install?</em></p>
<p>The global install is needed to start a new application. The <code>ng new &lt;app-
name&gt;</code> command is run using the global installation of the CLI. In fact, if
you try to run <code>ng new</code> while inside the folder structure of an existing CLI
application, you get this lovely error:</p>
<blockquote>
<p>You cannot use the <code>new</code> command inside an Angular CLI project.</p>
</blockquote>
<p>Other commands that can be run from the global install are <code>ng help</code>, <code>ng
get/set</code> with the <code>--global</code> option, <code>ng version</code>, <code>ng doc</code>, and <code>ng
completion</code>.</p>
<p>The local install of the CLI is used after an application has been built. This
way, when new versions of the CLI are available, you can update your global
install, and not affect the local install. This is good for the stability of a
project. Most <code>ng</code> commands only make sense with the local version, like
<code>lint</code>, <code>build</code> and <code>serve</code>, etc.</p>
<p>According to the CLI GitHub readme, to update the CLI you must update the
global and local package. However, I have used the CLI where the global and
local version vary without any trouble so far. If I ever run across an error
related to having the global and local CLI versions out of sync, I will post
that here.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is how I solved the issue.</p>
<p><img alt="Install latest Angular CLI package locally" src="images/0uI5N.png"></p>
<p>Copy and run these commands:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">ng</span><span class="w"> </span><span class="n">version</span>
<span class="w">    </span><span class="n">npm</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">--</span><span class="k">save</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="nv">@angular</span><span class="o">/</span><span class="n">cli</span><span class="nv">@latest</span>
<span class="w">    </span><span class="n">ng</span><span class="w"> </span><span class="n">version</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/convert-utc-date-time-to-local-date-time/" class="u-url">Convert UTC date time to local date time</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/convert-utc-date-time-to-local-date-time/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:49:44+08:00" itemprop="datePublished" title="2023-03-03 04:49">2023-03-03 04:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>From the server I get a datetime variable in this format: <code>6/29/2011 4:52:48
PM</code> and it is in UTC time. I want to convert it to the current user’s browser
time zone using JavaScript.</p>
<p>How this can be done using JavaScript or jQuery?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Append 'UTC' to the string before converting it to a date in javascript:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="s1">'6/29/2011 4:52:48 PM UTC'</span><span class="p">);</span>
<span class="n">date</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="s2">"Wed Jun 29 2011 09:52:48 GMT-0700 (PDT)"</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>In my point of view servers should always in the general case return a
datetime in the <strong>standardized ISO 8601-format</strong>.</p>
<p>More info here:</p>
<ul>
<li>http://www.w3.org/TR/NOTE-datetime</li>
<li>https://en.wikipedia.org/wiki/ISO_8601</li>
</ul>
<p>IN this case the server would return <code>'2011-06-29T16:52:48.000Z'</code> which would
feed directly into the JS Date object.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">utcDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'2011-06-29T16:52:48.000Z'</span><span class="p">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">ISO</span><span class="o">-</span><span class="mi">8601</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">server</span>
<span class="k">var</span><span class="w"> </span><span class="n">localDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">utcDate</span><span class="p">);</span>
</pre></div>

<p>The <code>localDate</code> will be in the right local time which in my case would be two
hours later (DK time).</p>
<p>You <em>really</em> don't have to do all this parsing which just complicates stuff,
as long as you are consistent with what format to expect from the server.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1599.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1597.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
