<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1758) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1758.html">
<link rel="prev" href="index-1759.html" type="text/html">
<link rel="next" href="index-1757.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/tortoisesvn-icons-not-showing-up-under-windows-7/" class="u-url">TortoiseSVN icons not showing up under Windows 7</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/tortoisesvn-icons-not-showing-up-under-windows-7/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:40:15+08:00" itemprop="datePublished" title="2023-03-03 08:40">2023-03-03 08:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I can't seem to get the icons to display under Windows 7 and I really miss
this from Windows XP.</p>
<p>How can it be fixed?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Windows can only show a limited number of Overlay Icons (15 total, 11 after
what Windows uses). Programs like Office Groove, Dropbox, Mozy, Carbonite,
etc, will hijack a bunch of the 11 possible overlay icons (boy would it be
nice if Microsoft upped the number of these as the number of applications that
use them seem to increase and increase)...</p>
<p>You can see what overlays are set up, and change them (at your own risk) in
the registry here:</p>
<div class="code"><pre class="code literal-block">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\explorer\ShellIconOverlayIdentifiers
</pre></div>

<p>If you are using TortoiseCVS (and have nothing else using overlay icons), you
will get a couple of TortoiseSVN Icons, and all of your TortoiseCVS icons.
This is because the overlay icons are used in alphabetical order. Again, at
your own risk (editing the registry may blow up your computer, yada, yada,
yada -- and if you are reading Stack Overflow and using Windows and haven't
edited the registry, you are a rare beast indeed), feel free to rename them (I
suggest putting numbers in front of the ones you want to use and "z_"'s
prefixed to the ones you don't need). The TortoiseSVN Shell extensions are
nicely named so you know what they do, the TortoiseCVS extensions are not.
After looking through the source code, I found the pertinent information:</p>
<ul>
<li>
<strong>TortoiseCVS0</strong> - <em>In CVS</em>
</li>
<li>
<strong>TortoiseCVS1</strong> - <em>Not in CVS</em>
</li>
<li>
<strong>TortoiseCVS3</strong> - <em>Conflicted</em>
</li>
<li>
<strong>TortoiseCVS4</strong> - <em>In CVS readonly</em>
</li>
<li>
<strong>TortoiseCVS5</strong> - <em>Ignored</em>
</li>
<li>
<strong>TortoiseCVS6</strong> - <em>Added</em>
</li>
<li>
<strong>TortoiseCVS7</strong> - <em>Deleted</em>
</li>
<li>
<strong>TortoiseCVS8</strong> - <em>Locked</em>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<h3>Halt ye!</h3>
<p>Before doing anything to your registry or similar procedures listed in Kris
Erickson's (excellent) answer or the ones below, there's something to
consider...</p>
<p><strong><em>Are you on a network drive?</em></strong></p>
<p>If so, go to Tortoise SVN settings (right click any folder &gt; TortoiseSVN &gt;
Settings), then go to 'Icon Overlays'</p>
<p>Make sure you've checked 'Network Drives' as pictured:</p>
<p><img alt="alt text" src="images/3bvXC.png"></p>
<p>By default on a fresh Tortoise install, network drives don't have the icons
added.</p>
<p>This solved the problem for us. If this fails for you then obviously you can
go through the (slightly) more involved solutions listed here.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-use-group-by-to-concatenate-strings-in-sql-server/" class="u-url">How to use GROUP BY to concatenate strings in SQL Server?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-use-group-by-to-concatenate-strings-in-sql-server/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:39:50+08:00" itemprop="datePublished" title="2023-03-03 08:39">2023-03-03 08:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I get:</p>
<div class="code"><pre class="code literal-block">id       Name       Value
1          A          4
1          B          8
2          C          9
</pre></div>

<p>to</p>
<div class="code"><pre class="code literal-block">id          Column
1          A:4, B:8
2          C:9
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>No CURSOR, WHILE loop, or User-Defined Function needed</strong>.</p>
<p>Just need to be creative with FOR XML and PATH.</p>
<p>[Note: This solution only works on SQL 2005 and later. Original question
didn't specify the version in use.]</p>
<div class="code"><pre class="code literal-block"><span class="k">CREATE</span><span class="w"> </span><span class="nc">TABLE</span><span class="w"> </span><span class="n">#YourTable</span><span class="w"> </span><span class="p">(</span><span class="o">[</span><span class="n">ID</span><span class="o">]</span><span class="w"> </span><span class="nc">INT</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">Name</span><span class="o">]</span><span class="w"> </span><span class="nc">CHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">[</span><span class="n">Value</span><span class="o">]</span><span class="w"> </span><span class="nc">INT</span><span class="p">)</span>

<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">#YourTable</span><span class="w"> </span><span class="p">(</span><span class="o">[</span><span class="n">ID</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="n">Name</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="n">Value</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'A'</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">#YourTable</span><span class="w"> </span><span class="p">(</span><span class="o">[</span><span class="n">ID</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="n">Name</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="n">Value</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">'B'</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">#YourTable</span><span class="w"> </span><span class="p">(</span><span class="o">[</span><span class="n">ID</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="n">Name</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="n">Value</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">'C'</span><span class="p">,</span><span class="mi">9</span><span class="p">)</span>

<span class="k">SELECT</span><span class="w"> </span>
<span class="w">  </span><span class="o">[</span><span class="n">ID</span><span class="o">]</span><span class="p">,</span>
<span class="w">  </span><span class="nf">STUFF</span><span class="p">((</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="s1">', '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="n">Name</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">':'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">CAST</span><span class="p">(</span><span class="o">[</span><span class="n">Value</span><span class="o">]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nc">VARCHAR</span><span class="p">(</span><span class="nf">MAX</span><span class="p">))</span><span class="w"> </span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">#YourTable</span><span class="w"> </span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="p">(</span><span class="n">ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Results</span><span class="p">.</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="k">FOR</span><span class="w"> </span><span class="nc">XML</span><span class="w"> </span><span class="k">PATH</span><span class="p">(</span><span class="s1">''</span><span class="p">),</span><span class="n">TYPE</span><span class="p">).</span><span class="k">value</span><span class="p">(</span><span class="s1">'(./text())[1]'</span><span class="p">,</span><span class="s1">'VARCHAR(MAX)'</span><span class="p">)</span>
<span class="w">  </span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s1">''</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">NameValues</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">#YourTable</span><span class="w"> </span><span class="n">Results</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">ID</span>

<span class="k">DROP</span><span class="w"> </span><span class="nc">TABLE</span><span class="w"> </span><span class="n">#YourTable</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If it is SQL Server 2017 or SQL Server Vnext, SQL Azure you can use
<code>STRING_AGG</code> as below:</p>
<div class="code"><pre class="code literal-block"><span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">STRING_AGG</span><span class="p">(</span><span class="nf">CONCAT</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s1">':'</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">value</span><span class="o">]</span><span class="p">),</span><span class="w"> </span><span class="s1">', '</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">#YourTable</span><span class="w"> </span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">id</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/determine-project-root-from-a-running-node-js-application/" class="u-url">Determine project root from a running node.js application</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/determine-project-root-from-a-running-node-js-application/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:39:22+08:00" itemprop="datePublished" title="2023-03-03 08:39">2023-03-03 08:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a different way, other than <code>process.cwd()</code>, to get the pathname of
the current project's root-directory. Does Node implement something like
ruby's property, <code>Rails.root</code>,. I'm looking for something that is constant,
and reliable.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are many ways to approach this, each with their own pros and cons:</p>
<h3><code>require.main.filename</code></h3>
<p>From http://nodejs.org/api/modules.html:</p>
<blockquote>
<p>When a file is run directly from Node, <code>require.main</code> is set to its
<code>module</code>. That means that you can determine whether a file has been run
directly by testing <code>require.main === module</code></p>
<p>Because <code>module</code> provides a <code>filename</code> property (normally equivalent to
<code>__filename</code>), the entry point of the current application can be obtained by
checking <code>require.main.filename</code>.</p>
</blockquote>
<p>So if you want the base directory for your app, you can do:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">dirname</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">appDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dirname</span><span class="p">(</span><span class="n">require</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">filename</span><span class="p">);</span>
</pre></div>

<h4>Pros &amp; Cons</h4>
<p>This will work great most of the time, but if you're running your app with a
launcher like <strong>pm2</strong> or running <strong>mocha</strong> tests, this method will fail. This
also won't work when using Node.js ES modules, where <code>require.main</code> is not
available.</p>
<h3><code>module.paths</code></h3>
<p>Node publishes all the module search paths to <code>module.paths</code>. We can traverse
these and pick the first one that resolves.</p>
<div class="code"><pre class="code literal-block"><span class="n">async</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">getAppPath</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">dirname</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">constants</span><span class="p">,</span><span class="w"> </span><span class="n">promises</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">module</span><span class="o">.</span><span class="n">paths</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">await</span><span class="w"> </span><span class="n">access</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">constants</span><span class="o">.</span><span class="n">F_OK</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">Just</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">path</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h4>Pros &amp; Cons</h4>
<p>This will sometimes work, but is not reliable when used in a package because
it may return the directory that the package is installed in rather than the
directory that the application is installed in.</p>
<h3>Using a global variable</h3>
<p>Node has a global namespace object called <code>global</code> — anything that you attach
to this object will be available everywhere in your app. So, in your
<code>index.js</code> (or <code>app.js</code> or whatever your main app file is named), you can just
define a global variable:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="n">js</span>
<span class="k">var</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span>
<span class="n">global</span><span class="o">.</span><span class="n">appRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">__dirname</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span><span class="n">moduleA</span><span class="o">/</span><span class="n">component1</span><span class="o">.</span><span class="n">js</span>
<span class="n">require</span><span class="p">(</span><span class="n">appRoot</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/lib/moduleB/component2.js'</span><span class="p">);</span>
</pre></div>

<h4>Pros &amp; Cons</h4>
<p>Works consistently, but you have to rely on a global variable, which means
that you can't easily reuse components/etc.</p>
<h3><code>process.cwd()</code></h3>
<p>This returns the current working directory. Not reliable at all, as it's
entirely dependent on what directory the process was launched <strong>from</strong> :</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/demo/
$<span class="w"> </span>mkdir<span class="w"> </span>subdir
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"console.log(process.cwd());"</span><span class="w"> </span>&gt;<span class="w"> </span>subdir/demo.js
$<span class="w"> </span>node<span class="w"> </span>subdir/demo.js
/home/demo
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>subdir
$<span class="w"> </span>node<span class="w"> </span>demo.js
/home/demo/subdir
</pre></div>

<h3>app-root-path</h3>
<p>To address this issue, I've created a node module called <strong>app-root-path</strong>.
Usage is simple:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">appRoot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'app-root-path'</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">myModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="err">`</span><span class="o">$</span><span class="p">{</span><span class="w"> </span><span class="n">appRoot</span><span class="w"> </span><span class="p">}</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">module</span><span class="o">.</span><span class="n">js</span><span class="err">`</span><span class="p">);</span>
</pre></div>

<p>The <strong>app-root-path</strong> module uses several techniques to determine the root
path of the app, taking into account globally installed modules (for example,
if your app is running in <code>/var/www/</code> but the module is installed in
<code>~/.nvm/v0.x.x/lib/node/</code>). It won't work 100% of the time, but it's going to
work in most common scenarios.</p>
<h4>Pros &amp; Cons</h4>
<p>Works without configuration in most circumstances. Also provides some nice
additional convenience methods (see project page). The biggest con is that it
won't work if:</p>
<ul>
<li>You're using a launcher, like pm2</li>
<li>
<strong>AND</strong> , the module isn't installed inside your app's <code>node_modules</code> directory (for example, if you installed it globally)</li>
</ul>
<p>You can get around this by either setting a <code>APP_ROOT_PATH</code> environmental
variable, or by calling <code>.setPath()</code> on the module, but in that case, you're
probably better off using the <code>global</code> method.</p>
<h3>NODE_PATH environmental variable</h3>
<p>If you're looking for a way to <em>determine</em> the root path of the current app,
one of the above solutions is likely to work best for you. If, on the other
hand, you're trying to solve the problem of loading app modules reliably, I
highly recommend looking into the <code>NODE_PATH</code> environmental variable.</p>
<p>Node's Modules system looks for modules in a variety of locations. One of
these locations is wherever <code>process.env.NODE_PATH</code> points. If you set this
environmental variable, then you can <code>require</code> modules with the standard
module loader without any other changes.</p>
<p>For example, if you set <code>NODE_PATH</code> to <code>/var/www/lib</code>, the the following would
work just fine:</p>
<div class="code"><pre class="code literal-block"><span class="n">require</span><span class="p">(</span><span class="s1">'module2/component.js'</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">looks</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">module2</span><span class="o">/</span><span class="n">component</span><span class="o">.</span><span class="n">js</span>
</pre></div>

<p>A great way to do this is using <code>npm</code>:</p>
<div class="code"><pre class="code literal-block">{
  "scripts": {
    "start": "NODE_PATH=. node app.js"
  }
}
</pre></div>

<p>Now you can start your app with <code>npm start</code> and you're golden. I combine this
with my enforce-node-path module, which prevents accidentally loading the app
without <code>NODE_PATH</code> set. For even more control over enforcing environmental
variables, see checkenv.</p>
<p><strong>One gotcha:</strong> <code>NODE_PATH</code> <strong>must</strong> be set <strong>outside</strong> of the node app. You
cannot do something like <code>process.env.NODE_PATH = path.resolve(__dirname)</code>
because the module loader caches the list of directories it will search before
your app runs.</p>
<p><strong>[added 4/6/16]</strong> Another really promising module that attempts to solve this
problem is wavy.</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>__dirname</code> isn't a global; it's local to the current module so each file has
its own local, different value.</p>
<p>If you want the root directory of the running process, you probably do want to
use <code>process.cwd()</code>.</p>
<p>If you want predictability and reliability, then you probably need to make it
a requirement of your application that a certain environment variable is set.
Your app looks for <code>MY_APP_HOME</code> (Or whatever) and if it's there, and the
application exists in that directory then all is well. If it is undefined or
the directory doesn't contain your application then it should exit with an
error prompting the user to create the variable. It could be set as a part of
an install process.</p>
<p>You can read environment variables in node with something like
<code>process.env.MY_ENV_VARIABLE</code>.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1759.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1757.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
