<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 381) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-381.html">
<link rel="prev" href="index-382.html" type="text/html">
<link rel="next" href="index-380.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/converting-from-a-string-to-boolean-in-python/" class="u-url">Converting from a string to boolean in Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/converting-from-a-string-to-boolean-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:23:26+08:00" itemprop="datePublished" title="2023-02-17 05:23">2023-02-17 05:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I convert a string into a boolean in Python? This attempt returns
<code>True</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; bool("False")
True
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Really, you just compare the string to whatever you expect to accept as
representing true, so you can do this:</p>
<div class="code"><pre class="code literal-block">s == 'True'
</pre></div>

<p>Or to checks against a whole bunch of values:</p>
<div class="code"><pre class="code literal-block">s.lower() in ['true', '1', 't', 'y', 'yes', 'yeah', 'yup', 'certainly', 'uh-huh']
</pre></div>

<p>Be cautious when using the following:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; bool("foo")
True
&gt;&gt;&gt; bool("")
False
</pre></div>

<p>Empty strings evaluate to <code>False</code>, but everything else evaluates to <code>True</code>. So
this should not be used for any kind of parsing purposes.</p>
<p><br></p>
<h3>Suggest</h3>
<h5>Warning: This answer will no longer work as of Python 3.12 (it's</h5>
<p>deprecated as of 3.10)</p>
<p>Use:</p>
<div class="code"><pre class="code literal-block">bool(distutils.util.strtobool(some_string))
</pre></div>

<ul>
<li>
<strong>Python 2</strong> : http://docs.python.org/2/distutils/apiref.html?highlight=distutils.util#distutils.util.strtobool</li>
<li>
<strong>Python &gt;=3, &lt;3.12</strong>: https://docs.python.org/3/distutils/apiref.html#distutils.util.strtobool</li>
<li>
<strong>Python &gt;=3.12</strong>: No longer part of the standard library due to PEP 632</li>
</ul>
<blockquote>
<p>True values are y, yes, t, true, on and 1; false values are n, no, f, false,
off and 0. Raises ValueError if val is anything else.</p>
</blockquote>
<p>Be aware that <code>distutils.util.strtobool()</code> returns integer representations and
thus it needs to be wrapped with <code>bool()</code> to get Boolean values.</p>
<p>Given that distutils will no longer be part of the standard library, here is
the code for <code>distutils.util.strtobool()</code> (see the source code).</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">strtobool</span><span class="w"> </span><span class="ss">(</span><span class="nv">val</span><span class="ss">)</span>:
<span class="w">    </span><span class="s2">""</span><span class="err">"Convert a string representation of truth to true (1) or false (0).</span>
<span class="err">    True values are 'y', 'yes', 't', 'true', 'on', and '1'; false values</span>
<span class="err">    are 'n', 'no', 'f', 'false', 'off', and '0'.  Raises ValueError if</span>
<span class="err">    'val' is anything else.</span>
<span class="w">    </span><span class="s2">""</span><span class="err">"</span>
<span class="err">    val = val.lower()</span>
<span class="err">    if val in ('y', 'yes', 't', 'true', 'on', '1'):</span>
<span class="err">        return 1</span>
<span class="err">    elif val in ('n', 'no', 'f', 'false', 'off', '0'):</span>
<span class="err">        return 0</span>
<span class="err">    else:</span>
<span class="w">        </span><span class="nv">raise</span><span class="w"> </span><span class="nv">ValueError</span><span class="ss">(</span><span class="s2">"invalid truth value %r"</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="ss">(</span><span class="nv">val</span>,<span class="ss">))</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/websockets-vs-server-sent-events-eventsource/" class="u-url">WebSockets vs. Server-Sent events/EventSource</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/websockets-vs-server-sent-events-eventsource/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:22:59+08:00" itemprop="datePublished" title="2023-02-17 05:22">2023-02-17 05:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Both WebSockets and Server-Sent Events are capable of pushing data to
browsers. To me they seem to be competing technologies. What is the difference
between them? When would you choose one over the other?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Websockets and SSE (Server Sent Events) are both capable of pushing data to
browsers, however they are not competing technologies.</p>
<p>Websockets connections can both send data to the browser and receive data from
the browser. A good example of an application that could use websockets is a
chat application.</p>
<p>SSE connections can only push data to the browser. Online stock quotes, or
twitters updating timeline or feed are good examples of an application that
could benefit from SSE.</p>
<p>In practice since everything that can be done with SSE can also be done with
Websockets, Websockets is getting a lot more attention and love, and many more
browsers support Websockets than SSE.</p>
<p>However, it can be overkill for some types of application, and the backend
could be easier to implement with a protocol such as SSE.</p>
<p>Furthermore SSE can be polyfilled into older browsers that do not support it
natively using just JavaScript. Some implementations of SSE polyfills can be
found on the Modernizr github page.</p>
<p><strong>Gotchas:</strong></p>
<ul>
<li>SSE suffers from a limitation to the maximum number of open connections, which can be specially painful when opening various tabs as the limit is <em>per browser</em> and set to a very low number (6). The issue has been marked as "Won't fix" in Chrome and Firefox. This limit is per browser + domain, so that means that you can open 6 SSE connections across all of the tabs to <code>www.example1.com</code> and another 6 SSE connections to <code>www.example2.com</code> (thanks Phate).</li>
<li>Only WS can transmit both binary data and UTF-8, SSE is limited to UTF-8. (Thanks to Chado Nihi).</li>
<li>Some enterprise firewalls with packet inspection have trouble dealing with WebSockets (Sophos XG Firewall, WatchGuard, McAfee Web Gateway).</li>
</ul>
<p>HTML5Rocks has some good information on SSE. From that page:</p>
<blockquote>
<h2>Server-Sent Events vs. WebSockets</h2>
<p>Why would you choose Server-Sent Events over WebSockets? Good question.</p>
<p>One reason SSEs have been kept in the shadow is because later APIs like
WebSockets provide a richer protocol to perform bi-directional, full-duplex
communication. Having a two-way channel is more attractive for things like
games, messaging apps, and for cases where you need near real-time updates
in both directions. However, in some scenarios data doesn't need to be sent
from the client. You simply need updates from some server action. A few
examples would be friends' status updates, stock tickers, news feeds, or
other automated data push mechanisms (e.g. updating a client-side Web SQL
Database or IndexedDB object store). If you'll need to send data to a
server, XMLHttpRequest is always a friend.</p>
<p>SSEs are sent over traditional HTTP. That means they do not require a
special protocol or server implementation to get working. WebSockets on the
other hand, require full-duplex connections and new Web Socket servers to
handle the protocol. In addition, Server-Sent Events have a variety of
features that WebSockets lack by design such as automatic reconnection,
event IDs, and the ability to send arbitrary events.</p>
</blockquote>
<hr>
<h2>TLDR summary:</h2>
<p><strong>Advantages of SSE over Websockets:</strong></p>
<ul>
<li>Transported over simple HTTP instead of a custom protocol</li>
<li>Can be poly-filled with javascript to "backport" SSE to browsers that do not support it yet.</li>
<li>Built in support for re-connection and event-id</li>
<li>Simpler protocol</li>
<li>No trouble with corporate firewalls doing packet inspection</li>
</ul>
<p><strong>Advantages of Websockets over SSE:</strong></p>
<ul>
<li>Real time, two directional communication.</li>
<li>Native support in more browsers</li>
</ul>
<p><strong>Ideal use cases of SSE:</strong></p>
<ul>
<li>Stock ticker streaming</li>
<li>twitter feed updating</li>
<li>Notifications to browser</li>
</ul>
<p><strong>SSE gotchas:</strong></p>
<ul>
<li>No binary support</li>
<li>Maximum open connections limit </li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>According to caniuse.com:</p>
<ul>
<li>98.35% of global users natively support WebSockets</li>
<li>98.03% of global users natively support Server-sent events</li>
</ul>
<p>You can use a client-only polyfill to extend support of SSE to many other
browsers. This is less likely with WebSockets. Some EventSource polyfills:</p>
<ul>
<li>EventSource by Remy Sharp with no other library dependencies (IE7+)</li>
<li>jQuery.EventSource by Rick Waldron</li>
<li>EventSource by Yaffle (replaces native implementation, normalising behaviour across browsers)</li>
</ul>
<p>If you need to support all the browsers, consider using a library like web-
socket-js, SignalR or socket.io which support multiple transports such as
WebSockets, SSE, Forever Frame and AJAX long polling. These often require
modifications to the server side as well.</p>
<p>Learn more about SSE from:</p>
<ul>
<li>HTML5 Rocks article</li>
<li>The W3C spec (published version, editor's draft)</li>
</ul>
<p>Learn more about WebSockets from:</p>
<ul>
<li>HTML5 Rocks article</li>
<li>The W3C spec (published version, editor's draft)</li>
</ul>
<p>Other differences:</p>
<ul>
<li>WebSockets supports arbitrary binary data, SSE only uses UTF-8</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-regular-expression-to-detect-a-valid-regular-expression/" class="u-url">Is there a regular expression to detect a valid regular expression?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-regular-expression-to-detect-a-valid-regular-expression/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:22:34+08:00" itemprop="datePublished" title="2023-02-17 05:22">2023-02-17 05:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is it possible to detect a valid regular expression with another regular
expression? If so please give example code below.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="o">/</span>
<span class="o">^</span><span class="w">                                             </span><span class="o">#</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nf">string</span>
<span class="p">(</span><span class="w">                                             </span><span class="o">#</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nf">start</span>
<span class="w">  </span><span class="p">(</span>?<span class="o">:</span>
<span class="w">    </span><span class="p">(</span>?<span class="o">:</span><span class="p">[</span><span class="o">^</span>?<span class="o">+*</span><span class="p">{}()[</span>\<span class="p">]</span>\\<span class="o">|</span><span class="p">]</span><span class="o">+</span><span class="w">                      </span><span class="o">#</span><span class="w"> </span><span class="nv">literals</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">^</span><span class="p">,</span><span class="w"> </span><span class="p">$</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span>\\<span class="o">.</span><span class="w">                                    </span><span class="o">#</span><span class="w"> </span><span class="nv">escaped</span><span class="w"> </span><span class="nv">characters</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span>\<span class="p">[</span><span class="w"> </span><span class="p">(</span>?<span class="o">:</span><span class="w"> </span>\<span class="o">^</span>?\\<span class="o">.</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>\<span class="o">^</span><span class="p">[</span><span class="o">^</span>\\<span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="o">^</span>\\<span class="o">^</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">     </span><span class="o">#</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nf">classes</span>
<span class="w">          </span><span class="p">(</span>?<span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">^</span>\<span class="p">]</span>\\<span class="p">]</span><span class="o">+</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>\\<span class="o">.</span><span class="w"> </span><span class="p">)</span><span class="o">*</span><span class="w"> </span>\<span class="p">]</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span>\<span class="p">(</span><span class="w"> </span><span class="p">(</span>?<span class="o">:</span>\?<span class="p">[</span><span class="o">:=!</span><span class="p">]</span><span class="o">|</span>\?<span class="o">&lt;</span><span class="p">[</span><span class="o">=!</span><span class="p">]</span><span class="o">|</span>\?<span class="o">&gt;</span><span class="p">)</span>?<span class="w"> </span><span class="p">(</span>?<span class="mi">1</span><span class="p">)</span>??<span class="w"> </span>\<span class="p">)</span><span class="w">  </span><span class="o">#</span><span class="w"> </span><span class="nv">parenthesis</span><span class="p">,</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">recursive</span><span class="w"> </span><span class="nv">content</span>
<span class="w">     </span><span class="o">|</span><span class="w"> </span>\<span class="p">(</span>\?<span class="w"> </span><span class="p">(</span>?<span class="o">:</span><span class="nv">R</span><span class="o">|</span><span class="p">[</span><span class="o">+-</span><span class="p">]</span>?\<span class="nv">d</span><span class="o">+</span><span class="p">)</span><span class="w"> </span>\<span class="p">)</span><span class="w">                 </span><span class="o">#</span><span class="w"> </span><span class="nv">recursive</span><span class="w"> </span><span class="nv">matching</span>
<span class="w">     </span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span>?<span class="o">:</span><span class="w"> </span><span class="p">(</span>?<span class="o">:</span><span class="p">[</span>?<span class="o">+*</span><span class="p">]</span><span class="o">|</span>\<span class="p">{</span>\<span class="nv">d</span><span class="o">+</span><span class="p">(</span>?<span class="o">:</span><span class="p">,</span>\<span class="nv">d</span><span class="o">*</span><span class="p">)</span>?\<span class="p">})</span><span class="w"> </span><span class="p">[</span>?<span class="o">+</span><span class="p">]</span>?<span class="w"> </span><span class="p">)</span>?<span class="w">   </span><span class="o">#</span><span class="w"> </span><span class="nv">quantifiers</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span>\<span class="o">|</span><span class="w">                                        </span><span class="o">#</span><span class="w"> </span><span class="nv">alternative</span>
<span class="w">  </span><span class="p">)</span><span class="o">*</span><span class="w">                                          </span><span class="o">#</span><span class="w"> </span><span class="k">repeat</span><span class="w"> </span><span class="nv">content</span>
<span class="p">)</span><span class="w">                                             </span><span class="o">#</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">group</span>
<span class="p">$</span><span class="w">                                             </span><span class="o">#</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">string</span>
<span class="o">/</span>
</pre></div>

<p>This is a recursive regex, and is not supported by many regex engines. PCRE
based ones should support it.</p>
<p>Without whitespace and comments:</p>
<div class="code"><pre class="code literal-block"><span class="o">/^</span><span class="p">((</span>?<span class="o">:</span><span class="p">(</span>?<span class="o">:</span><span class="p">[</span><span class="o">^</span>?<span class="o">+*</span><span class="p">{}()[</span>\<span class="p">]</span>\\<span class="o">|</span><span class="p">]</span><span class="o">+|</span>\\<span class="o">.|</span>\<span class="p">[(</span>?<span class="o">:</span>\<span class="o">^</span>?\\<span class="o">.|</span>\<span class="o">^</span><span class="p">[</span><span class="o">^</span>\\<span class="p">]</span><span class="o">|</span><span class="p">[</span><span class="o">^</span>\\<span class="o">^</span><span class="p">])(</span>?<span class="o">:</span><span class="p">[</span><span class="o">^</span>\<span class="p">]</span>\\<span class="p">]</span><span class="o">+|</span>\\<span class="o">.</span><span class="p">)</span><span class="o">*</span>\<span class="p">]</span><span class="o">|</span>\<span class="p">((</span>?<span class="o">:</span>\?<span class="p">[</span><span class="o">:=!</span><span class="p">]</span><span class="o">|</span>\?<span class="o">&lt;</span><span class="p">[</span><span class="o">=!</span><span class="p">]</span><span class="o">|</span>\?<span class="o">&gt;</span><span class="p">)</span>?<span class="p">(</span>?<span class="mi">1</span><span class="p">)</span>??\<span class="p">)</span><span class="o">|</span>\<span class="p">(</span>\?<span class="p">(</span>?<span class="o">:</span><span class="nv">R</span><span class="o">|</span><span class="p">[</span><span class="o">+-</span><span class="p">]</span>?\<span class="nv">d</span><span class="o">+</span><span class="p">)</span>\<span class="p">))(</span>?<span class="o">:</span><span class="p">(</span>?<span class="o">:</span><span class="p">[</span>?<span class="o">+*</span><span class="p">]</span><span class="o">|</span>\<span class="p">{</span>\<span class="nv">d</span><span class="o">+</span><span class="p">(</span>?<span class="o">:</span><span class="p">,</span>\<span class="nv">d</span><span class="o">*</span><span class="p">)</span>?\<span class="p">})[</span>?<span class="o">+</span><span class="p">]</span>?<span class="p">)</span>?<span class="o">|</span>\<span class="o">|</span><span class="p">)</span><span class="o">*</span><span class="p">)$</span><span class="o">/</span>
</pre></div>

<hr>
<p>.NET does not support recursion directly. (The <code>(?1)</code> and <code>(?R)</code> constructs.)
The recursion would have to be converted to counting balanced groups:</p>
<div class="code"><pre class="code literal-block"><span class="o">^</span><span class="w">                                         </span><span class="o">#</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nf">string</span>
<span class="p">(</span>?<span class="o">:</span>
<span class="w">  </span><span class="p">(</span>?<span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">^</span>?<span class="o">+*</span><span class="p">{}()[</span>\<span class="p">]</span>\\<span class="o">|</span><span class="p">]</span><span class="o">+</span><span class="w">                   </span><span class="o">#</span><span class="w"> </span><span class="nv">literals</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="o">^</span><span class="p">,</span><span class="w"> </span><span class="p">$</span>
<span class="w">   </span><span class="o">|</span><span class="w"> </span>\\<span class="o">.</span><span class="w">                                  </span><span class="o">#</span><span class="w"> </span><span class="nv">escaped</span><span class="w"> </span><span class="nv">characters</span>
<span class="w">   </span><span class="o">|</span><span class="w"> </span>\<span class="p">[</span><span class="w"> </span><span class="p">(</span>?<span class="o">:</span><span class="w"> </span>\<span class="o">^</span>?\\<span class="o">.</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>\<span class="o">^</span><span class="p">[</span><span class="o">^</span>\\<span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="o">^</span>\\<span class="o">^</span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w">   </span><span class="o">#</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nf">classes</span>
<span class="w">        </span><span class="p">(</span>?<span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">^</span>\<span class="p">]</span>\\<span class="p">]</span><span class="o">+</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>\\<span class="o">.</span><span class="w"> </span><span class="p">)</span><span class="o">*</span><span class="w"> </span>\<span class="p">]</span>
<span class="w">   </span><span class="o">|</span><span class="w"> </span>\<span class="p">(</span><span class="w"> </span><span class="p">(</span>?<span class="o">:</span>\?<span class="p">[</span><span class="o">:=!</span><span class="p">]</span>
<span class="w">         </span><span class="o">|</span><span class="w"> </span>\?<span class="o">&lt;</span><span class="p">[</span><span class="o">=!</span><span class="p">]</span>
<span class="w">         </span><span class="o">|</span><span class="w"> </span>\?<span class="o">&gt;</span>
<span class="w">         </span><span class="o">|</span><span class="w"> </span>\?<span class="o">&lt;</span><span class="p">[</span><span class="o">^</span>\<span class="nv">W</span>\<span class="nv">d</span><span class="p">]</span>\<span class="nv">w</span><span class="o">*&gt;</span>
<span class="w">         </span><span class="o">|</span><span class="w"> </span>\?<span class="o">'</span><span class="p">[</span><span class="o">^</span>\<span class="nv">W</span>\<span class="nv">d</span><span class="p">]</span>\<span class="nv">w</span><span class="o">*'</span>
<span class="w">         </span><span class="p">)</span>?<span class="w">                               </span><span class="o">#</span><span class="w"> </span><span class="nv">opening</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nf">group</span>
<span class="w">     </span><span class="p">(</span>?<span class="o">&lt;</span><span class="nv">N</span><span class="o">&gt;</span><span class="p">)</span><span class="w">                               </span><span class="o">#</span><span class="w">   </span><span class="nv">increment</span><span class="w"> </span><span class="nv">counter</span>
<span class="w">   </span><span class="o">|</span><span class="w"> </span>\<span class="p">)</span><span class="w">                                   </span><span class="o">#</span><span class="w"> </span><span class="nv">closing</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nf">group</span>
<span class="w">     </span><span class="p">(</span>?<span class="o">&lt;-</span><span class="nv">N</span><span class="o">&gt;</span><span class="p">)</span><span class="w">                              </span><span class="o">#</span><span class="w">   </span><span class="nv">decrement</span><span class="w"> </span><span class="nv">counter</span>
<span class="w">   </span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span>?<span class="o">:</span><span class="w"> </span><span class="p">(</span>?<span class="o">:</span><span class="p">[</span>?<span class="o">+*</span><span class="p">]</span><span class="o">|</span>\<span class="p">{</span>\<span class="nv">d</span><span class="o">+</span><span class="p">(</span>?<span class="o">:</span><span class="p">,</span>\<span class="nv">d</span><span class="o">*</span><span class="p">)</span>?\<span class="p">})</span><span class="w"> </span><span class="p">[</span>?<span class="o">+</span><span class="p">]</span>?<span class="w"> </span><span class="p">)</span>?<span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="nv">quantifiers</span>
<span class="o">|</span><span class="w"> </span>\<span class="o">|</span><span class="w">                                      </span><span class="o">#</span><span class="w"> </span><span class="nv">alternative</span>
<span class="p">)</span><span class="o">*</span><span class="w">                                        </span><span class="o">#</span><span class="w"> </span><span class="k">repeat</span><span class="w"> </span><span class="nv">content</span>
<span class="p">$</span><span class="w">                                         </span><span class="o">#</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nf">string</span>
<span class="p">(</span>?<span class="p">(</span><span class="nv">N</span><span class="p">)(</span>?<span class="o">!</span><span class="p">))</span><span class="w">                                </span><span class="o">#</span><span class="w"> </span><span class="nv">fail</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">counter</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">zero</span><span class="o">.</span>
</pre></div>

<p>Compacted:</p>
<div class="code"><pre class="code literal-block"><span class="o">^</span><span class="p">(</span>?<span class="o">:</span><span class="p">(</span>?<span class="o">:</span><span class="p">[</span><span class="o">^</span>?<span class="o">+*</span><span class="p">{}()[</span>\<span class="p">]</span>\\<span class="o">|</span><span class="p">]</span><span class="o">+|</span>\\<span class="o">.|</span>\<span class="p">[(</span>?<span class="o">:</span>\<span class="o">^</span>?\\<span class="o">.|</span>\<span class="o">^</span><span class="p">[</span><span class="o">^</span>\\<span class="p">]</span><span class="o">|</span><span class="p">[</span><span class="o">^</span>\\<span class="o">^</span><span class="p">])(</span>?<span class="o">:</span><span class="p">[</span><span class="o">^</span>\<span class="p">]</span>\\<span class="p">]</span><span class="o">+|</span>\\<span class="o">.</span><span class="p">)</span><span class="o">*</span>\<span class="p">]</span><span class="o">|</span>\<span class="p">((</span>?<span class="o">:</span>\?<span class="p">[</span><span class="o">:=!</span><span class="p">]</span><span class="o">|</span>\?<span class="o">&lt;</span><span class="p">[</span><span class="o">=!</span><span class="p">]</span><span class="o">|</span>\?<span class="o">&gt;|</span>\?<span class="o">&lt;</span><span class="p">[</span><span class="o">^</span>\<span class="nv">W</span>\<span class="nv">d</span><span class="p">]</span>\<span class="nv">w</span><span class="o">*&gt;|</span>\?<span class="o">'</span><span class="p">[</span><span class="o">^</span>\<span class="nv">W</span>\<span class="nv">d</span><span class="p">]</span>\<span class="nv">w</span><span class="o">*'</span><span class="p">)</span>?<span class="p">(</span>?<span class="o">&lt;</span><span class="nv">N</span><span class="o">&gt;</span><span class="p">)</span><span class="o">|</span>\<span class="p">)(</span>?<span class="o">&lt;-</span><span class="nv">N</span><span class="o">&gt;</span><span class="p">))(</span>?<span class="o">:</span><span class="p">(</span>?<span class="o">:</span><span class="p">[</span>?<span class="o">+*</span><span class="p">]</span><span class="o">|</span>\<span class="p">{</span>\<span class="nv">d</span><span class="o">+</span><span class="p">(</span>?<span class="o">:</span><span class="p">,</span>\<span class="nv">d</span><span class="o">*</span><span class="p">)</span>?\<span class="p">})[</span>?<span class="o">+</span><span class="p">]</span>?<span class="p">)</span>?<span class="o">|</span>\<span class="o">|</span><span class="p">)</span><span class="o">*</span><span class="p">$(</span>?<span class="p">(</span><span class="nv">N</span><span class="p">)(</span>?<span class="o">!</span><span class="p">))</span>
</pre></div>

<p>From the comments:</p>
<blockquote>
<p>Will this validate substitutions and translations?</p>
</blockquote>
<p>It will validate just the regex part of substitutions and translations.
<code>s/&lt;this part&gt;/.../</code></p>
<blockquote>
<p>It is not theoretically possible to match all valid regex grammars with a
regex.</p>
</blockquote>
<p>It is possible if the regex engine supports recursion, such as PCRE, but that
can't really be called regular expressions any more.</p>
<blockquote>
<p>Indeed, a "recursive regular expression" is not a regular expression. But
this an often-accepted extension to regex engines... Ironically, this
extended regex doesn't match extended regexes.</p>
</blockquote>
<p>"In theory, theory and practice are the same. In practice, they're not."
Almost everyone who knows regular expressions knows that regular expressions
does not support recursion. But PCRE and most other implementations support
much more than basic regular expressions.</p>
<blockquote>
<p>using this with shell script in the grep command , it shows me some error..
grep: Invalid content of {} . I am making a script that could grep a code
base to find all the files that contain regular expressions</p>
</blockquote>
<p>This pattern exploits an extension called recursive regular expressions. This
is not supported by the POSIX flavor of regex. You could try with the -P
switch, to enable the PCRE regex flavor.</p>
<blockquote>
<p>Regex itself "is not a regular language and hence cannot be parsed by
regular expression..."</p>
</blockquote>
<p>This is true for classical regular expressions. Some modern implementations
allow recursion, which makes it into a Context Free language, although it is
somewhat verbose for this task.</p>
<blockquote>
<p>I see where you're matching <code>[]()/\</code>. and other special regex characters.
Where are you allowing non-special characters? It seems like this will match
<code>^(?:[\.]+)$</code>, but not <code>^abcdefg$</code>. That's a valid regex.</p>
</blockquote>
<p><code>[^?+*{}()[\]\\|]</code> will match any single character, not part of any of the
other constructs. This includes both literal (<code>a</code> - <code>z</code>), and certain special
characters (<code>^</code>, <code>$</code>, <code>.</code>).</p>
<p><br></p>
<h3>Suggest</h3>
<p>Unlikely.</p>
<p>Evaluate it in a <code>try..catch</code> or whatever your language provides.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-382.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-380.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
