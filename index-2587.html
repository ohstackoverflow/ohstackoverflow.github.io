<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2587) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2587.html">
<link rel="prev" href="index-2588.html" type="text/html">
<link rel="next" href="index-2586.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mysql-cannot-add-foreign-key-constraint/" class="u-url">MySQL Cannot Add Foreign Key Constraint</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mysql-cannot-add-foreign-key-constraint/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T03:01:33+08:00" itemprop="datePublished" title="2023-03-05 03:01">2023-03-05 03:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>So I'm trying to add Foreign Key constraints to my database as a project
requirement and it worked the first time or two on different tables, but I
have two tables on which I get an error when trying to add the Foreign Key
Constraints. The error message that I get is:</p>
<blockquote>
<p>ERROR 1215 (HY000): Cannot add foreign key constraint</p>
</blockquote>
<p>This is the SQL I'm using to create the tables, the two offending tables are
<code>Patient</code> and <code>Appointment</code>.</p>
<div class="code"><pre class="code literal-block"><span class="k">SET</span><span class="w"> </span><span class="nv">@OLD_UNIQUE_CHECKS</span><span class="o">=</span><span class="nv">@@UNIQUE_CHECKS</span><span class="p">,</span><span class="w"> </span><span class="n">UNIQUE_CHECKS</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="nv">@OLD_FOREIGN_KEY_CHECKS</span><span class="o">=</span><span class="nv">@@FOREIGN_KEY_CHECKS</span><span class="p">,</span><span class="w"> </span><span class="n">FOREIGN_KEY_CHECKS</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="nv">@OLD_SQL_MODE</span><span class="o">=</span><span class="nv">@@SQL_MODE</span><span class="p">,</span><span class="w"> </span><span class="n">SQL_MODE</span><span class="o">=</span><span class="s1">'TRADITIONAL,ALLOW_INVALID_DATES'</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8</span><span class="w"> </span><span class="p">;</span>
<span class="k">USE</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="w"> </span><span class="p">;</span>

<span class="c1">-- -----------------------------------------------------</span>
<span class="c1">-- Table `doctorsoffice`.`doctor`</span>
<span class="c1">-- -----------------------------------------------------</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`doctor`</span><span class="w"> </span><span class="p">;</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`doctor`</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n n-Quoted">`DoctorID`</span><span class="w"> </span><span class="kt">INT</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`FName`</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`LName`</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Gender`</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Specialty`</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">'General Practitioner'</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n n-Quoted">`DoctorID`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`DoctorID`</span><span class="w"> </span><span class="k">ASC</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`DoctorID`</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="k">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span>
<span class="k">DEFAULT</span><span class="w"> </span><span class="k">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">utf8</span><span class="p">;</span>


<span class="c1">-- -----------------------------------------------------</span>
<span class="c1">-- Table `doctorsoffice`.`medicalhistory`</span>
<span class="c1">-- -----------------------------------------------------</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`medicalhistory`</span><span class="w"> </span><span class="p">;</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`medicalhistory`</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n n-Quoted">`MedicalHistoryID`</span><span class="w"> </span><span class="kt">INT</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Allergies`</span><span class="w"> </span><span class="kt">TEXT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Medications`</span><span class="w"> </span><span class="kt">TEXT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`ExistingConditions`</span><span class="w"> </span><span class="kt">TEXT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Misc`</span><span class="w"> </span><span class="kt">TEXT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n n-Quoted">`MedicalHistoryID`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`MedicalHistoryID`</span><span class="w"> </span><span class="k">ASC</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`MedicalHistoryID`</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="k">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span>
<span class="k">DEFAULT</span><span class="w"> </span><span class="k">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">utf8</span><span class="p">;</span>


<span class="c1">-- -----------------------------------------------------</span>
<span class="c1">-- Table `doctorsoffice`.`Patient`</span>
<span class="c1">-- -----------------------------------------------------</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`Patient`</span><span class="w"> </span><span class="p">;</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`Patient`</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n n-Quoted">`PatientID`</span><span class="w"> </span><span class="kt">INT</span><span class="w"> </span><span class="k">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`FName`</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`LName`</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Gender`</span><span class="w"> </span><span class="kt">CHAR</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`DOB`</span><span class="w"> </span><span class="kt">DATE</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`SSN`</span><span class="w"> </span><span class="kt">DOUBLE</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`MedicalHistory`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`PrimaryPhysician`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PatientID`</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n n-Quoted">`PatientID_UNIQUE`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PatientID`</span><span class="w"> </span><span class="k">ASC</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n n-Quoted">`FK_MedicalHistory`</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`MEdicalHistory`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`medicalhistory`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`MedicalHistoryID`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">,</span>
<span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n n-Quoted">`FK_PrimaryPhysician`</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PrimaryPhysician`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`doctor`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`DoctorID`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">)</span>
<span class="k">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span><span class="p">;</span>


<span class="c1">-- -----------------------------------------------------</span>
<span class="c1">-- Table `doctorsoffice`.`Appointment`</span>
<span class="c1">-- -----------------------------------------------------</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`Appointment`</span><span class="w"> </span><span class="p">;</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`Appointment`</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n n-Quoted">`AppointmentID`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Date`</span><span class="w"> </span><span class="kt">DATE</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Time`</span><span class="w"> </span><span class="kt">TIME</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Patient`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Doctor`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">unsigned</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`AppointmentID`</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n n-Quoted">`AppointmentID_UNIQUE`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`AppointmentID`</span><span class="w"> </span><span class="k">ASC</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n n-Quoted">`FK_Patient`</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`Patient`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`Patient`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PatientID`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">,</span>
<span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n n-Quoted">`FK_Doctor`</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`Doctor`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`doctor`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`DoctorID`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">)</span>
<span class="k">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span><span class="p">;</span>


<span class="c1">-- -----------------------------------------------------</span>
<span class="c1">-- Table `doctorsoffice`.`InsuranceCompany`</span>
<span class="c1">-- -----------------------------------------------------</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`InsuranceCompany`</span><span class="w"> </span><span class="p">;</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`InsuranceCompany`</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n n-Quoted">`InsuranceID`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Name`</span><span class="w"> </span><span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`Phone`</span><span class="w"> </span><span class="kt">DOUBLE</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`InsuranceID`</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n n-Quoted">`InsuranceID_UNIQUE`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`InsuranceID`</span><span class="w"> </span><span class="k">ASC</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="k">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span><span class="p">;</span>


<span class="c1">-- -----------------------------------------------------</span>
<span class="c1">-- Table `doctorsoffice`.`PatientInsurance`</span>
<span class="c1">-- -----------------------------------------------------</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`PatientInsurance`</span><span class="w"> </span><span class="p">;</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`PatientInsurance`</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n n-Quoted">`PolicyHolder`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`InsuranceCompany`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`CoPay`</span><span class="w"> </span><span class="kt">INT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`PolicyNumber`</span><span class="w"> </span><span class="kt">smallint</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="w"> </span><span class="k">AUTO_INCREMENT</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PolicyNumber`</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n n-Quoted">`PolicyNumber_UNIQUE`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PolicyNumber`</span><span class="w"> </span><span class="k">ASC</span><span class="p">)</span><span class="w"> </span><span class="p">,</span>
<span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n n-Quoted">`FK_PolicyHolder`</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PolicyHolder`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`Patient`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`PatientID`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">,</span>
<span class="w">  </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n n-Quoted">`FK_InsuranceCompany`</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`InsuranceCompany`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="p">.</span><span class="n n-Quoted">`InsuranceCompany`</span><span class="w"> </span><span class="p">(</span><span class="n n-Quoted">`InsuranceID`</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span>
<span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CASCADE</span><span class="p">)</span>
<span class="k">ENGINE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InnoDB</span><span class="p">;</span>

<span class="k">USE</span><span class="w"> </span><span class="n n-Quoted">`doctorsoffice`</span><span class="w"> </span><span class="p">;</span>


<span class="k">SET</span><span class="w"> </span><span class="n">SQL_MODE</span><span class="o">=</span><span class="nv">@OLD_SQL_MODE</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">FOREIGN_KEY_CHECKS</span><span class="o">=</span><span class="nv">@OLD_FOREIGN_KEY_CHECKS</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">UNIQUE_CHECKS</span><span class="o">=</span><span class="nv">@OLD_UNIQUE_CHECKS</span><span class="p">;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>To find the specific error run this:</p>
<div class="code"><pre class="code literal-block"><span class="k">SHOW</span><span class="w"> </span><span class="nv">ENGINE</span><span class="w"> </span><span class="nv">INNODB</span><span class="w"> </span><span class="nv">STATUS</span><span class="c1">;</span>
</pre></div>

<p>And look in the <code>LATEST FOREIGN KEY ERROR</code> section.</p>
<p>The data type for the child column must match the parent column exactly. For
example, since <code>medicalhistory.MedicalHistoryID</code> is an <code>INT</code>,
<code>Patient.MedicalHistory</code> also needs to be an <code>INT</code>, not a <code>SMALLINT</code>.</p>
<p>Also, you should run the query <code>set foreign_key_checks=0</code> before running the
DDL so you can create the tables in an arbitrary order rather than needing to
create all parent tables before the relevant child tables.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I had set one field as "Unsigned" and other one not. Once I set both columns
to Unsigned it worked.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/deleting-all-files-from-a-folder-using-php/" class="u-url">Deleting all files from a folder using PHP?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/deleting-all-files-from-a-folder-using-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T03:00:07+08:00" itemprop="datePublished" title="2023-03-05 03:00">2023-03-05 03:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>For example I had a folder called `Temp' and I wanted to delete or flush all
files from this folder using PHP. Could I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="mh">$f</span><span class="nv">iles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">glob</span><span class="ss">(</span><span class="s1">'path/to/temp/*'</span><span class="ss">)</span><span class="c1">; // get all file names</span>
<span class="nv">foreach</span><span class="ss">(</span><span class="mh">$f</span><span class="nv">iles</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="mh">$f</span><span class="nv">ile</span><span class="ss">)</span>{<span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">iterate</span><span class="w"> </span><span class="nv">files</span>
<span class="w">  </span><span class="k">if</span><span class="ss">(</span><span class="nv">is_file</span><span class="ss">(</span><span class="mh">$f</span><span class="nv">ile</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">    </span><span class="k">unlink</span><span class="ss">(</span><span class="mh">$f</span><span class="nv">ile</span><span class="ss">)</span><span class="c1">; // delete file</span>
<span class="w">  </span>}
}
</pre></div>

<p>If you want to remove 'hidden' files like .htaccess, you have to use</p>
<div class="code"><pre class="code literal-block">$files = glob('path/to/temp/{,.}*', GLOB_BRACE);
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you want to delete everything from folder (including subfolders) use this
combination of <code>array_map</code>, <code>unlink</code> and <code>glob</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">array_map</span><span class="ss">(</span><span class="w"> </span><span class="s1">'unlink'</span>,<span class="w"> </span><span class="nv">array_filter</span><span class="ss">((</span><span class="nv">array</span><span class="ss">)</span><span class="w"> </span><span class="nv">glob</span><span class="ss">(</span><span class="s2">"path/to/temp/*"</span><span class="ss">)</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>This call can also handle empty directories ( thanks for the tip, @mojuba!)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/which-characters-need-to-be-escaped-in-html/" class="u-url">Which characters need to be escaped in HTML?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/which-characters-need-to-be-escaped-in-html/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T02:58:32+08:00" itemprop="datePublished" title="2023-03-05 02:58">2023-03-05 02:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Are they the same as XML, perhaps plus the space one (<code>&amp;nbsp;</code>)?</p>
<p>I've found some huge lists of HTML escape characters but I don't think they
<strong>must</strong> be escaped. I want to know what <strong>needs</strong> to be escaped.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you're inserting text content in your document in a location where text
content is expected1, you typically only need to escape the same characters as
you would in XML. Inside of an element, this just includes the entity escape
ampersand <code>&amp;</code> and the element delimiter less-than and greater-than signs <code>&lt;</code>
<code>&gt;</code>:</p>
<div class="code"><pre class="code literal-block">&amp; becomes &amp;amp;
&lt; becomes &amp;lt;
&gt; becomes &amp;gt;
</pre></div>

<p>Inside of attribute values you must also escape the quote character you're
using:</p>
<div class="code"><pre class="code literal-block">" becomes &amp;quot;
' becomes &amp;#39;
</pre></div>

<p>In some cases it may be safe to skip escaping some of these characters, but I
encourage you to escape all five in all cases to reduce the chance of making a
mistake.</p>
<p>If your document encoding does not support all of the characters that you're
using, such as if you're trying to use emoji in an ASCII-encoded document, you
also need to escape those. Most documents these days are encoded using the
fully Unicode-supporting UTF-8 encoding where this won't be necessary.</p>
<p>In general, you should not escape spaces as <code>&amp;nbsp;</code>. <code>&amp;nbsp;</code> is not a normal
space, it's a non-breaking space. You can use these instead of normal spaces
to prevent a line break from being inserted between two words, or to insert
extra space without it being automatically collapsed, but this is usually a
rare case. Don't do this unless you have a design constraint that requires it.</p>
<hr>
<p>1 By "a location where text content is expected", I mean inside of an element
or quoted attribute value where normal parsing rules apply. For example:
<code>&lt;p&gt;HERE&lt;/p&gt;</code> or <code>&lt;p title="HERE"&gt;...&lt;/p&gt;</code>. What I wrote above <strong>does not
apply</strong> to content that has special parsing rules or meaning, such as inside
of a script or style tag, or as an element or attribute name. For example:
<code>&lt;NOT-HERE&gt;...&lt;/NOT-HERE&gt;</code>, <code>&lt;script&gt;NOT-HERE&lt;/script&gt;</code>, <code>&lt;style&gt;NOT-
HERE&lt;/style&gt;</code>, or <code>&lt;p NOT-HERE="..."&gt;...&lt;/p&gt;</code>.</p>
<p>In these contexts, the rules are more complicated and it's much easier to
introduce a security vulnerability. <strong>I strongly discourage you from ever
inserting dynamic content in any of these locations.</strong> I have seen teams of
competent security-aware developers introduce vulnerabilities by assuming that
they had encoded these values correctly, but missing an edge case. There's
usually a safer alternative, such as putting the dynamic value in an attribute
and then handling it with JavaScript.</p>
<p>If you must, please read the Open Web Application Security Project's XSS
Prevention Rules to help understand some of the concerns you will need to keep
in mind.</p>
<p><br></p>
<h3>Suggest</h3>
<p>It depends upon the context. Some possible contexts in HTML:</p>
<ul>
<li>document body</li>
<li>inside common attributes</li>
<li>inside script tags</li>
<li>inside style tags</li>
<li>several more!</li>
</ul>
<p>See OWASP's Cross Site Scripting Prevention Cheat Sheet, especially the "Why
Can't I Just HTML Entity Encode Untrusted Data?" and "XSS Prevention Rules"
sections. However, it's best to read the whole document.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2588.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2586.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
