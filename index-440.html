<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 440) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-440.html">
<link rel="prev" href="index-441.html" type="text/html">
<link rel="next" href="index-439.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/shell-command-to-sum-integers-one-per-line/" class="u-url">Shell command to sum integers, one per line?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/shell-command-to-sum-integers-one-per-line/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:54:29+08:00" itemprop="datePublished" title="2023-02-17 06:54">2023-02-17 06:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am looking for a command that will accept (as input) multiple lines of text,
each line containing a single integer, and output the sum of these integers.</p>
<p>As a bit of background, I have a log file which includes timing measurements.
Through grepping for the relevant lines and a bit of <code>sed</code> reformatting I can
list all of the timings in that file. I would like to work out the total. I
can pipe this intermediate output to any command in order to do the final sum.
I have always used <code>expr</code> in the past, but unless it runs in RPN mode I do not
think it is going to cope with this (and even then it would be tricky).</p>
<p>How can I get the summation of integers?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Bit of awk should do it?</p>
<div class="code"><pre class="code literal-block"><span class="n">awk</span> <span class="s">'{s+=$1} END {print s}'</span> <span class="n">mydatafile</span>
</pre></div>

<p>Note: some versions of awk have some odd behaviours if you are going to be
adding anything exceeding 2^31 (2147483647). See comments for more background.
One suggestion is to use <code>printf</code> rather than <code>print</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">awk</span> <span class="s">'{s+=$1} END {printf "%.0f", s}'</span> <span class="n">mydatafile</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Paste typically merges lines of multiple files, but it can also be used to
convert individual lines of a file into a single line. The delimiter flag
allows you to pass a x+x type equation to bc.</p>
<div class="code"><pre class="code literal-block">paste -s -d+ infile | bc
</pre></div>

<p>Alternatively, when piping from stdin,</p>
<div class="code"><pre class="code literal-block">&lt;commands&gt; | paste -s -d+ - | bc
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-disable-landscape-mode-in-android/" class="u-url">How can I disable landscape mode in Android?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-disable-landscape-mode-in-android/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:54:02+08:00" itemprop="datePublished" title="2023-02-17 06:54">2023-02-17 06:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I disable landscape mode for some of the views in my Android app?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Add <code>android:screenOrientation="portrait"</code> to the activity in the
AndroidManifest.xml. For example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">activity</span><span class="w"> </span><span class="nl">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="ss">".SomeActivity"</span>
<span class="w">          </span><span class="nl">android</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="ss">"@string/app_name"</span>
<span class="w">          </span><span class="nl">android</span><span class="p">:</span><span class="n">screenOrientation</span><span class="o">=</span><span class="ss">"portrait"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<p>Since this has become a super-popular answer, I feel very guilty as forcing
portrait is rarely the right solution to the problems it's frequently applied
to.<br>
The major caveats with forced portrait:</p>
<ul>
<li>This does not absolve you of having to think about activity lifecycle events or properly saving/restoring state. There are plenty of things besides app rotation that can trigger an activity destruction/recreation, including unavoidable things like multitasking. There are no shortcuts; learn to use bundles and <code>retainInstance</code> fragments.</li>
<li>Keep in mind that unlike the fairly uniform iPhone experience, there are some devices where portrait is not the clearly popular orientation. When users are on devices with hardware keyboards or game pads a la the Nvidia Shield, on Chromebooks, on foldables, or on Samsung DeX, forcing portrait can make your app experience either limiting or a giant usability hassle. If your app doesn't have a strong UX argument that would lead to a negative experience for supporting other orientations, you should probably not force landscape. I'm talking about things like "this is a cash register app for one specific model of tablet always used in a fixed hardware dock."</li>
</ul>
<p>So most apps should just let the phone sensors, software, and physical
configuration make their own decision about how the user wants to interact
with your app. A few cases you may still want to think about, though, if
you're not happy with the default behavior of <code>sensor</code> orientation in your use
case:</p>
<ul>
<li>If your main concern is accidental orientation changes mid-activity that you think the device's sensors and software won't cope with well (for example, in a tilt-based game) consider supporting landscape and portrait, but using <code>nosensor</code> for the orientation. This forces landscape on most tablets and portrait on most phones, but I still wouldn't recommend this for most "normal" apps (some users just like to type in the landscape softkeyboard on their phones, and many tablet users read in portrait - and you should let them).</li>
<li>If you <em>still</em> need to force portrait for some reason, <code>sensorPortrait</code> may be better than <code>portrait</code> for Android 2.3 (Gingerbread) and later; this allows for upside-down portrait, which is quite common in tablet usage.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>I was not aware of the <code>AndroidManifest.xml</code> file switch until reading this
post, so in my apps I have used this instead:</p>
<div class="code"><pre class="code literal-block">setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); // Fixed portrait orientation
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-specify-a-branch-tag-when-adding-a-git-submodule/" class="u-url">How can I specify a branch/tag when adding a Git submodule?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-specify-a-branch-tag-when-adding-a-git-submodule/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:53:35+08:00" itemprop="datePublished" title="2023-02-17 06:53">2023-02-17 06:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How does <code>git submodule add -b</code> work?</p>
<p>After adding a submodule with a specific branch, a new cloned repository
(after <code>git submodule update --init</code>) will be at a specific commit, not the
branch itself (<code>git status</code> on the submodule shows "Not currently on any
branch").</p>
<p>I can't find any information on <code>.gitmodules</code> or <code>.git/config</code> about the
submodule's branch or any specific commit, so how does Git figure it out?</p>
<p>Also, is it possible to specify a tag instead of a branch?</p>
<p>I'm using version 1.6.5.2.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Note: Git 1.8.2 added the possibility to track branches. See some of the
answers below.</p>
<hr>
<p>It's a little confusing to get used to this, but submodules are not on a
branch. They are, like you say, just a pointer to a particular commit of the
submodule's repository.</p>
<p>This means, when someone else checks out your repository, or pulls your code,
and does git submodule update, the submodule is checked out to that particular
commit.</p>
<p>This is great for a submodule that does not change often, because then
everyone on the project can have the submodule at the same commit.</p>
<p>If you want to move the submodule to a particular tag:</p>
<div class="code"><pre class="code literal-block">cd submodule_directory
git checkout v1.0
cd ..
git add submodule_directory
git commit -m "moved submodule to v1.0"
git push
</pre></div>

<p>Then, another developer who wants to have submodule_directory changed to that
tag, does this</p>
<div class="code"><pre class="code literal-block">git pull
git submodule update --init
</pre></div>

<p><code>git pull</code> changes which commit their submodule directory points to. <code>git
submodule update</code> actually merges in the new code.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Note: Git 1.8.2 added the possibility to track branches. See some of the
answers below.</p>
<hr>
<p>It's a little confusing to get used to this, but submodules are not on a
branch. They are, like you say, just a pointer to a particular commit of the
submodule's repository.</p>
<p>This means, when someone else checks out your repository, or pulls your code,
and does git submodule update, the submodule is checked out to that particular
commit.</p>
<p>This is great for a submodule that does not change often, because then
everyone on the project can have the submodule at the same commit.</p>
<p>If you want to move the submodule to a particular tag:</p>
<div class="code"><pre class="code literal-block">cd submodule_directory
git checkout v1.0
cd ..
git add submodule_directory
git commit -m "moved submodule to v1.0"
git push
</pre></div>

<p>Then, another developer who wants to have submodule_directory changed to that
tag, does this</p>
<div class="code"><pre class="code literal-block">git pull
git submodule update --init
</pre></div>

<p><code>git pull</code> changes which commit their submodule directory points to. <code>git
submodule update</code> actually merges in the new code.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-441.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-439.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
