<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 731) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-731.html">
<link rel="prev" href="index-732.html" type="text/html">
<link rel="next" href="index-730.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wo-ru-he-zai-objective-c-zhong-chuang-jian-wei-tuo/" class="u-url">我如何在 Objective-C 中创建委托？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/wo-ru-he-zai-objective-c-zhong-chuang-jian-wei-tuo/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:38:23+08:00" itemprop="datePublished" title="2023-02-17 14:38">2023-02-17 14:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我知道代表如何工作，也知道如何使用它们。</p>
<p>但是我该如何创建它们呢？</p>
<p><br><br></p>
<h2>解答</h2>
<p>Objective-C
委托是已分配给<code>delegate</code>另一个对象属性的对象。要创建一个，您可以定义一个实现您感兴趣的委托方法的类，并将该类标记为实现委托协议。</p>
<p>例如，假设您有一个<code>UIWebView</code>. 如果你想实现它的委托<code>webViewDidStartLoad:</code>方法，你可以创建一个这样的类：</p>
<div class="code"><pre class="code literal-block"><span class="k">@interface</span> <span class="bp">MyClass</span><span class="o">&lt;</span><span class="bp">UIWebViewDelegate</span><span class="o">&gt;</span>
<span class="c1">// ...</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="bp">MyClass</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">webViewDidStartLoad:</span><span class="p">(</span><span class="bp">UIWebView</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">webView</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="c1">// ... </span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>

<p>然后您可以创建 MyClass 的实例并将其分配为 Web 视图的委托：</p>
<div class="code"><pre class="code literal-block"><span class="bp">MyClass</span><span class="w"> </span><span class="o">*</span><span class="n">instanceOfMyClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="bp">MyClass</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">init</span><span class="p">];</span>
<span class="n">myWebView</span><span class="p">.</span><span class="n">delegate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instanceOfMyClass</span><span class="p">;</span>
</pre></div>

<p>另一方面<code>UIWebView</code>，它可能具有与此类似的代码，以查看委托是否使用
响应消息<code>webViewDidStartLoad:</code>并<code>respondsToSelector:</code>在适当时发送它。</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="p">(</span><span class="o">[</span><span class="n">self.delegate respondsToSelector:@selector(webViewDidStartLoad:)</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">[</span><span class="n">self.delegate webViewDidStartLoad:self</span><span class="o">]</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>委托属性本身通常被声明<code>weak</code>（在 ARC 中）或<code>assign</code>（在 ARC
之前）以避免保留循环，因为对象的委托通常持有对该对象的强引用。（例如，视图控制器通常是它包含的视图的委托。）</p>
<h3>为你的班级制作代表</h3>
<p>要定义您自己的委托，您必须在某处声明它们的方法，如Apple 文档中关于协议的讨论。你通常声明一个正式的协议。从 UIWebView.h
转述的声明如下所示：</p>
<div class="code"><pre class="code literal-block"><span class="k">@protocol</span> <span class="bp">UIWebViewDelegate</span> <span class="o">&lt;</span><span class="bp">NSObject</span><span class="o">&gt;</span>
<span class="k">@optional</span>
<span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">webViewDidStartLoad</span><span class="o">:</span><span class="p">(</span><span class="bp">UIWebView</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">webView</span><span class="p">;</span>
<span class="c1">// ... other methods here</span>
<span class="k">@end</span>
</pre></div>

<p>这类似于接口或抽象基类，因为它<code>UIWebViewDelegate</code>在本例中为您的委托创建了一个特殊类型。委托实施者必须采用此协议：</p>
<div class="code"><pre class="code literal-block"><span class="k">@interface</span> <span class="bp">MyClass</span><span class="w"> </span><span class="o">&lt;</span><span class="bp">UIWebViewDelegate</span><span class="o">&gt;</span>
<span class="c1">// ...</span>
<span class="k">@end</span>
</pre></div>

<p>然后实现协议中的方法。对于在协议中声明为的方法（与大多数委托方法一样），您需要在对其调用特定方法之前<code>@optional</code>进行检查。<code>-respondsToSelector:</code></p>
<h4>命名</h4>
<p>委托方法通常以委托类名开头命名，并将委托对象作为第一个参数。他们还经常使用 will-、should- 或 did-
形式。因此，<code>webViewDidStartLoad:</code>（第一个参数是网络视图）而不是<code>loadStarted</code>（不带参数）例如。</p>
<h4>速度优化</h4>
<p>您可以在设置委托时缓存该信息，而不是每次我们要向选择器发送消息时都检查委托是否响应选择器。一种非常简洁的方法是使用位域，如下所示：</p>
<div class="code"><pre class="code literal-block"><span class="k">@protocol</span> <span class="nc">SomethingDelegate</span> <span class="o">&lt;</span><span class="bp">NSObject</span><span class="o">&gt;</span>
<span class="k">@optional</span>
<span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">something</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">something</span><span class="w"> </span><span class="n">didFinishLoadingItem</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">item</span><span class="p">;</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">something:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">something</span><span class="w"> </span><span class="nf">didFailWithError:</span><span class="p">(</span><span class="bp">NSError</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">error</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">Something</span> : <span class="bp">NSObject</span>
<span class="k">@property</span><span class="w"> </span><span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="k">weak</span><span class="p">)</span><span class="w"> </span><span class="kt">id</span><span class="w"> </span><span class="o">&lt;</span><span class="n">SomethingDelegate</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">Something</span> <span class="p">{</span>
<span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">didFinishLoadingItem</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">didFailWithError</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="n">delegateRespondsTo</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@synthesize</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setDelegate:</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="o">&lt;</span><span class="n">SomethingDelegate</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">aDelegate</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delegate</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">aDelegate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">delegate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aDelegate</span><span class="p">;</span>

<span class="w">    </span><span class="n">delegateRespondsTo</span><span class="p">.</span><span class="n">didFinishLoadingItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">delegate</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">something</span><span class="o">:</span><span class="n">didFinishLoadingItem</span><span class="o">:</span><span class="p">)];</span>
<span class="w">    </span><span class="n">delegateRespondsTo</span><span class="p">.</span><span class="n">didFailWithError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">delegate</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">something</span><span class="o">:</span><span class="n">didFailWithError</span><span class="o">:</span><span class="p">)];</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>

<p>然后，在正文中，我们可以检查我们的委托是否通过访问我们的<code>delegateRespondsTo</code>结构来处理消息，而不是<code>-respondsToSelector:</code>一遍又一遍地发送。</p>
<h4>非正式代表</h4>
<p>在协议存在之前，通常使用类别来声明<code>NSObject</code>委托可以实现的方法。例如，<code>CALayer</code>仍然这样做：</p>
<div class="code"><pre class="code literal-block"><span class="k">@interface</span> <span class="bp">NSObject</span><span class="nl">(CALayerDelegate)</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">displayLayer:</span><span class="p">(</span><span class="bp">CALayer</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">layer</span><span class="p">;</span>
<span class="c1">// ... other methods here</span>
<span class="k">@end</span>
</pre></div>

<p>这告诉编译器任何对象都可以实现<code>displayLayer:</code>.</p>
<p>然后，您将使用<code>-respondsToSelector:</code>与上述相同的方法来调用此方法。委托实现此方法并分配<code>delegate</code>属性，仅此而已（没有声明您符合协议）。这种方法在
Apple
的库中很常见，但新代码应该使用上面更现代的协议方法，因为这种方法会造成污染<code>NSObject</code>（这使得自动完成功能变得不那么有用）并且使编译器很难警告您拼写错误和类似错误。</p>
<p><br></p>
<h3>更多建议</h3>
<p>批准的答案很好，但如果您正在寻找 1 分钟的答案，请尝试以下操作：</p>
<p>MyClass.h 文件应如下所示（添加带有注释的委托行！）</p>
<div class="code"><pre class="code literal-block"><span class="cp">#import &lt;BlaClass/BlaClass.h&gt;</span>

<span class="k">@class</span> <span class="bp">MyClass</span>;<span class="w">             </span><span class="c1">//define class, so protocol can see MyClass</span>
<span class="k">@protocol</span> <span class="nc">MyClassDelegate</span> <span class="o">&lt;</span><span class="bp">NSObject</span><span class="o">&gt;</span><span class="w">   </span><span class="c1">//define delegate protocol</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="n">myClassDelegateMethod</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="bp">MyClass</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">sender</span><span class="p">;</span><span class="w">  </span><span class="c1">//define delegate method to be implemented within another class</span>
<span class="k">@end</span><span class="w"> </span><span class="c1">//end protocol</span>

<span class="k">@interface</span> <span class="bp">MyClass</span> : <span class="bp">NSObject</span> <span class="p">{</span>
<span class="p">}</span>
<span class="k">@property</span><span class="w"> </span><span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="k">weak</span><span class="p">)</span><span class="w"> </span><span class="kt">id</span><span class="w"> </span><span class="o">&lt;</span><span class="n">MyClassDelegate</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span><span class="w"> </span><span class="c1">//define MyClassDelegate as delegate</span>

<span class="k">@end</span>
</pre></div>

<p>MyClass.m 文件应该是这样的</p>
<div class="code"><pre class="code literal-block"><span class="cp">#import "MyClass.h"</span>
<span class="k">@implementation</span> <span class="bp">MyClass</span><span class="w"> </span>
<span class="k">@synthesize</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span><span class="w"> </span><span class="c1">//synthesise  MyClassDelegate delegate</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">myMethodToDoStuff</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">delegate</span><span class="w"> </span><span class="n">myClassDelegateMethod</span><span class="o">:</span><span class="nb">self</span><span class="p">];</span><span class="w"> </span><span class="c1">//this will call the method implemented in your other class    </span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>

<p>要在另一个类中使用您的委托（在本例中 UIViewController 称为 MyVC）MyVC.h：</p>
<div class="code"><pre class="code literal-block"><span class="c1">#import "MyClass.h"</span>
<span class="nd">@interface</span> <span class="n">MyVC</span><span class="p">:</span><span class="n">UIViewController</span> <span class="o">&lt;</span><span class="n">MyClassDelegate</span><span class="o">&gt;</span> <span class="p">{</span> <span class="o">//</span><span class="n">make</span> <span class="n">it</span> <span class="n">a</span> <span class="n">delegate</span> <span class="k">for</span> <span class="n">MyClassDelegate</span>
<span class="p">}</span>
</pre></div>

<p>MyVC.m:</p>
<div class="code"><pre class="code literal-block">myClass.delegate = self;          //set its delegate to self somewhere
</pre></div>

<p>实现委托方法</p>
<div class="code"><pre class="code literal-block"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">myClassDelegateMethod:</span><span class="w"> </span><span class="p">(</span><span class="bp">MyClass</span><span class="w"> </span><span class="o">*</span><span class="p">)</span> <span class="nv">sender</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"Delegates are great!"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p><br><br><a href="posts/how-do-i-create-delegates-in-objective-c/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/gei-ding-ha-xi-tu-zhong-de-jian-ru-he-geng-xin-zhi/" class="u-url">给定哈希图中的键，如何更新值？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/gei-ding-ha-xi-tu-zhong-de-jian-ru-he-geng-xin-zhi/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:37:50+08:00" itemprop="datePublished" title="2023-02-17 14:37">2023-02-17 14:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>HashMap&lt;String, Integer&gt;</code>假设我们在 Java 中有一个。</p>
<p>如何为我找到的每个字符串更新（增加）字符串键的整数值？</p>
<p>可以删除并重新输入一对，但开销会是一个问题。<br>
另一种方法是只放入新的一对，旧的将被替换。</p>
<p>在后一种情况下，如果哈希码与我尝试插入的新密钥发生冲突，会发生什么情况？哈希表的正确行为是为其分配一个不同的位置，或者在当前存储桶中从中创建一个列表。</p>
<p><br><br></p>
<h2>解答</h2>
<div class="code"><pre class="code literal-block">map.put(key, map.get(key) + 1);
</pre></div>

<p>应该没事。它将更新现有映射的值。请注意，这使用了自动装箱。借助<code>map.get(key)</code>我们获取相应键的值，然后您可以根据您的要求进行更新。在这里，我更新为将值增加
1。</p>
<p><br></p>
<h3>更多建议</h3>
<h3>Java 8方式：</h3>
<p>您可以使用<code>computeIfPresent</code>method 并为其提供映射函数，该函数将被调用以根据现有值计算新值。</p>
<p>例如，</p>
<div class="code"><pre class="code literal-block"><span class="nf">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">words</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="s">"hello"</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="n">words</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="s">"world"</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="n">words</span><span class="p">.</span><span class="n">computeIfPresent</span><span class="p">(</span><span class="s">"hello"</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">words</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"hello"</span><span class="p">));</span>
</pre></div>

<p>或者，您可以使用<code>merge</code>方法，其中 1 是默认值，函数将现有值递增 1：</p>
<div class="code"><pre class="code literal-block"><span class="nt">words</span><span class="p">.</span><span class="nc">merge</span><span class="o">(</span><span class="s2">"hello"</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="nt">Integer</span><span class="p">::</span><span class="nd">sum</span><span class="o">);</span>
</pre></div>

<p>此外，还有许多其他有用的方法，例如<code>putIfAbsent</code>、<code>getOrDefault</code>、<code>forEach</code>等。</p>
<p><br><br><a href="posts/how-to-update-a-value-given-a-key-in-a-hashmap/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/zai-da-yin-yu-lan-mo-shi-xia-shi-yong-chrome-de-yuan-su-jian-cha-qi/" class="u-url">在打印预览模式下使用 Chrome 的元素检查器？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/zai-da-yin-yu-lan-mo-shi-xia-shi-yong-chrome-de-yuan-su-jian-cha-qi/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:37:22+08:00" itemprop="datePublished" title="2023-02-17 14:37">2023-02-17 14:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我正在开发一个网站，需要处理打印视图。通常，当我遇到布局问题时，我会使用 Chrome 的 Element
Inspector。但是，这在打印预览模式下不存在。</p>
<p>是否有 Chrome 插件或其他方式来更改 Chrome 本身的查看媒体，以像打印机一样查看页面？我想它没有特定于 Chrome
的解决方案，但这是我的主要浏览器，所以最好有一个浏览器内解决方案。</p>
<p>现在我只关注打印预览媒体，但能够更改为任何支持的媒体类型（即所有/盲文/浮雕/手持/打印/投影/屏幕/语音/tty/电视）。</p>
<p><br><br></p>
<h2>解答</h2>
<p><em>注意：这个答案涵盖了 Chrome 的多个版本，滚动查看 <strong>v52</strong> 、 <strong>v48</strong> 、 <strong>v46</strong> 、 <strong>v43</strong> 和 <strong>v42</strong>
每个版本及其更新的更改。</em></p>
<h2>Chrome v52+：</h2>
<ul>
<li>打开开发 <em>人员工具</em> （Windows：<code>F12</code>或<code>Ctrl</code>++ ，Mac ：++ ）<code>Shift``I``Cmd``Opt``I</code>
</li>
<li>单击 <em>自定义和控制 DevTools</em> 汉堡菜单按钮，然后选择 <em>更多工具 &gt; 渲染设置</em>（或在较新版本中 <em>渲染</em> ）。</li>
<li>选中 <em>渲染</em> 选项卡上的 <em>模拟打印媒体</em> 复选框，然后选择 <em>打印</em> 媒体类型。 <strong> </strong>
</li>
</ul>
<p><img alt="Chrome v52+" src="images/7BCx7.png"></p>
<h2>Chrome v48+（感谢 Alex 的关注）：</h2>
<ul>
<li>打开开发者工具（<code>CTRL``SHIFT``I</code>或<code>F12</code>）</li>
<li>单击左上角的 <em>切换设备模式</em><code>CTRL``SHIFT``M</code>按钮 ( )。</li>
<li>通过单击 (1) 处的菜单中的显示控制台来确保 <em>显示</em> 控制台（<code>ESC</code>如果开发人员工具栏具有焦点，则键切换控制台）。</li>
<li>在渲染选项卡中选中 <em>模拟打印媒体</em> ，可以通过在 (2) 处的菜单中选择 <em>渲染</em> 来打开该选项卡。</li>
</ul>
<p><img alt="Chrome v48+" src="images/ClmyX.png"></p>
<h2>Chrome v46+：</h2>
<ul>
<li>打开开发者工具（<code>CTRL``SHIFT``I</code>或<code>F12</code>）</li>
<li>单击左上角的 <em>切换设备模式按钮 (1)。</em>
</li>
<li>
<em>通过单击菜单按钮 (2) &gt;显示控制台</em>(3) 或按<code>ESC</code>键切换控制台（仅在开发人员工具栏具有焦点时才有效）确保显示控制台。</li>
<li>打开 <em>仿真 (4) &gt; 媒体 (5)_选项卡，选中 _CSS 媒体</em> 并选择 <em>打印</em> (3)。</li>
</ul>
<p><img alt="Chrome v46+ 支持" src="images/Gyoil.png"></p>
<h2>Chrome v43+：</h2>
<ul>
<li>第 2 步的抽屉图标已更改。</li>
</ul>
<p><img alt="在 Chrome v43 上模拟打印媒体查询" src="images/jT8Wz.png"></p>
<h2>铬 v42：</h2>
<ul>
<li>打开开发者工具（<code>CTRL``SHIFT``I</code>或<code>F12</code>）</li>
<li>单击左上角的 <em>切换设备模式按钮 (1)。</em>
</li>
<li>
<em>通过单击“显示抽屉”</em> 按钮 (2) 或按<code>ESC</code>键切换抽屉，确保显示抽屉。</li>
<li>
<em>在Emulation &gt; Media_下选中 _CSS media</em> 并选择 <em>print</em> (3)。</li>
</ul>
<p><img alt="在 Chrome v42 上模拟打印媒体查询" src="images/yU62w.png"></p>
<p><br></p>
<h3>更多建议</h3>
<h3>在 Chrome <del>32</del> 35+中更改</h3>
<p>（在 Chrome 35+ 中，“仿真”选项卡默认存在。此外，控制台可从任何主选项卡访问。）</p>
<ol>
<li><del>在 DevTools 中，转到设置 - &gt; 覆盖</del></li>
<li><del>启用“在控制台抽屉中显示仿真视图”</del></li>
<li><del>关闭设置，转到“元素”选项卡</del></li>
<li>点击<code>Esc</code>调出控制台</li>
<li>选择选项卡“仿真”，单击“屏幕”</li>
<li>向下滚动到“CSS Media”，选择“打印”</li>
</ol>
<p><del>此选项在控制台选项卡中（还？）不可用。</del></p>
<p><img alt="启用覆盖" src="images/2itUb.jpg"></p>
<p><br><br><a href="posts/using-chrome-s-element-inspector-in-print-preview-mode/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-732.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-730.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
