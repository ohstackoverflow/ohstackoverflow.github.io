<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1808) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1808.html">
<link rel="prev" href="index-1809.html" type="text/html">
<link rel="next" href="index-1807.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-an-image-captured-using-camera-intent-gets-rotated-on-some-devices-on-android/" class="u-url">Why does an image captured using camera intent gets rotated on some devices on Android?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-an-image-captured-using-camera-intent-gets-rotated-on-some-devices-on-android/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:51:17+08:00" itemprop="datePublished" title="2023-03-03 09:51">2023-03-03 09:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm capturing an image and setting it to image view.</p>
<div class="code"><pre class="code literal-block"><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">captureImage</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="n">Intent</span><span class="w"> </span><span class="n">intentCamera</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="ss">"android.media.action.IMAGE_CAPTURE"</span><span class="p">);</span>
<span class="w">    </span><span class="k">File</span><span class="w"> </span><span class="n">filePhoto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">File</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">getExternalStorageDirectory</span><span class="p">(),</span><span class="w"> </span><span class="ss">"Pic.jpg"</span><span class="p">);</span>
<span class="w">    </span><span class="n">imageUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="n">fromFile</span><span class="p">(</span><span class="n">filePhoto</span><span class="p">);</span>
<span class="w">    </span><span class="n">MyApplicationGlobal</span><span class="p">.</span><span class="n">imageUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">imageUri</span><span class="p">.</span><span class="n">getPath</span><span class="p">();</span>
<span class="w">    </span><span class="n">intentCamera</span><span class="p">.</span><span class="n">putExtra</span><span class="p">(</span><span class="n">MediaStore</span><span class="p">.</span><span class="n">EXTRA_OUTPUT</span><span class="p">,</span><span class="w"> </span><span class="n">imageUri</span><span class="p">);</span>
<span class="w">    </span><span class="n">startActivityForResult</span><span class="p">(</span><span class="n">intentCamera</span><span class="p">,</span><span class="w"> </span><span class="n">TAKE_PICTURE</span><span class="p">);</span>
<span class="err">}</span>

<span class="nv">@Override</span>
<span class="n">protected</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onActivityResult</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">Intent</span><span class="w"> </span><span class="n">intentFromCamera</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">.</span><span class="n">onActivityResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">intentFromCamera</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">resultCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RESULT_OK</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">requestCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TAKE_PICTURE</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">intentFromCamera</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">Bundle</span><span class="w"> </span><span class="n">extras</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">intentFromCamera</span><span class="p">.</span><span class="n">getExtras</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">extras</span><span class="p">.</span><span class="n">containsKey</span><span class="p">(</span><span class="ss">"data"</span><span class="p">))</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Bitmap</span><span class="p">)</span><span class="w"> </span><span class="n">extras</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="ss">"data"</span><span class="p">);</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getBitmapFromUri</span><span class="p">();</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getBitmapFromUri</span><span class="p">();</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">imageView</span><span class="p">.</span><span class="n">setImageBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="p">);</span>
<span class="w">        </span><span class="n">imageView</span><span class="p">.</span><span class="n">setImageURI</span><span class="p">(</span><span class="n">imageUri</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="k">public</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">getBitmapFromUri</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">notifyChange</span><span class="p">(</span><span class="n">imageUri</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">);</span>
<span class="w">    </span><span class="n">ContentResolver</span><span class="w"> </span><span class="n">cr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getContentResolver</span><span class="p">();</span>
<span class="w">    </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">bitmap</span><span class="p">;</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="n">provider</span><span class="p">.</span><span class="n">MediaStore</span><span class="p">.</span><span class="n">Images</span><span class="p">.</span><span class="n">Media</span><span class="p">.</span><span class="n">getBitmap</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span><span class="w"> </span><span class="n">imageUri</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bitmap</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="k">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="n">printStackTrace</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>But the problem is, the image on some devices every time it gets rotated. For
example, on a Samsung device it works good, but on a Sony Xperia the image
gets rotated by 90 degrees and on Toshiba Thrive (tablet) by 180 degrees.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Most phone cameras are landscape, meaning if you take the photo in portrait,
the resulting photos will be rotated 90 degrees. In this case, the camera
software should populate the Exif data with the orientation that the photo
should be viewed in.</p>
<p>Note that the below solution depends on the camera software/device
manufacturer populating the Exif data, so it will work in most cases, but it
is not a 100% reliable solution.</p>
<div class="code"><pre class="code literal-block"><span class="nt">ExifInterface</span><span class="w"> </span><span class="nt">ei</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">ExifInterface</span><span class="o">(</span><span class="nt">photoPath</span><span class="o">);</span>
<span class="nt">int</span><span class="w"> </span><span class="nt">orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">ei</span><span class="p">.</span><span class="nc">getAttributeInt</span><span class="o">(</span><span class="nt">ExifInterface</span><span class="p">.</span><span class="nc">TAG_ORIENTATION</span><span class="o">,</span>
<span class="w">                                     </span><span class="nt">ExifInterface</span><span class="p">.</span><span class="nc">ORIENTATION_UNDEFINED</span><span class="o">);</span>

<span class="nt">Bitmap</span><span class="w"> </span><span class="nt">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">null</span><span class="o">;</span>
<span class="nt">switch</span><span class="o">(</span><span class="nt">orientation</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_ROTATE_90</span><span class="p">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rotateImage</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span><span class="w"> </span><span class="mi">90</span><span class="p">);</span>
<span class="w">        </span><span class="err">break</span><span class="p">;</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_ROTATE_180</span><span class="p">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rotateImage</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span><span class="w"> </span><span class="mi">180</span><span class="p">);</span>
<span class="w">        </span><span class="err">break</span><span class="p">;</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_ROTATE_270</span><span class="p">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rotateImage</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span><span class="w"> </span><span class="mi">270</span><span class="p">);</span>
<span class="w">        </span><span class="err">break</span><span class="p">;</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_NORMAL</span><span class="p">:</span>
<span class="w">    </span><span class="kc">default</span><span class="o">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmap</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Here is the <code>rotateImage</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">rotateImage</span><span class="ss">(</span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">source</span>,<span class="w"> </span><span class="nv">float</span><span class="w"> </span><span class="nv">angle</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">Matrix</span><span class="w"> </span><span class="nv">matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Matrix</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">matrix</span>.<span class="nv">postRotate</span><span class="ss">(</span><span class="nv">angle</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">Bitmap</span>.<span class="nv">createBitmap</span><span class="ss">(</span><span class="nv">source</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="nv">source</span>.<span class="nv">getWidth</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">source</span>.<span class="nv">getHeight</span><span class="ss">()</span>,
<span class="w">                               </span><span class="nv">matrix</span>,<span class="w"> </span><span class="nv">true</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>By combining <em>Jason Robinson</em> 's answer with <em>Felix</em> 's answer and filling the
missing parts, <strong>here is the final complete solution for this issue</strong> that
will do the following after testing it on Android Android 4.1 ( <em>Jelly Bean</em>
), Android 4.4 ( <em>KitKat</em> ) and Android 5.0 ( <em>Lollipop</em> ).</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>Scale down the image if it was bigger than 1024x1024.</p>
</li>
<li>
<p>Rotate the image to the right orientation <em>only</em> if it was rotate 90, 180 or 270 degree.</p>
</li>
<li>
<p>Recycle the rotated image for memory purposes.</p>
</li>
</ol>
<p><strong>Here is the code part:</strong></p>
<p>Call the following method with the current <code>Context</code> and the image <code>URI</code> that
you want to fix</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">responsible</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">solving</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rotation</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">exist</span><span class="p">.</span><span class="w"> </span><span class="n">Also</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="n">to</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="n">x1024</span><span class="w"> </span><span class="n">resolution</span>
<span class="w"> </span><span class="o">*</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">context</span><span class="w">       </span><span class="n">The</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">context</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">selectedImage</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Image</span><span class="w"> </span><span class="n">URI</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">results</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">handleSamplingAndRotationBitmap</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="n">selectedImage</span><span class="p">)</span>
<span class="w">        </span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">MAX_HEIGHT</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>
<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">MAX_WIDTH</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// First decode with inJustDecodeBounds=true to check dimensions</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="p">();</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">inJustDecodeBounds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">InputStream</span><span class="w"> </span><span class="n">imageStream</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">openInputStream</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">);</span>
<span class="w">    </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">decodeStream</span><span class="p">(</span><span class="n">imageStream</span><span class="p">,</span><span class="w"> </span><span class="nb">null</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
<span class="w">    </span><span class="n">imageStream</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Calculate inSampleSize</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">inSampleSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calculateInSampleSize</span><span class="p">(</span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_HEIGHT</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Decode bitmap with inSampleSize set</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">inJustDecodeBounds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="w">    </span><span class="n">imageStream</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">openInputStream</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">);</span>
<span class="w">    </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">img</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">decodeStream</span><span class="p">(</span><span class="n">imageStream</span><span class="p">,</span><span class="w"> </span><span class="nb">null</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>

<span class="w">    </span><span class="n">img</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">rotateImageIfRequired</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">selectedImage</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">img</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Here is the <code>CalculateInSampleSize</code> method from the pre mentioned source:</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">Calculate</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{@</span><span class="nb">link</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="p">}</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">decoding</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">bitmaps</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">decode</span><span class="o">*</span><span class="w"> </span><span class="k">methods</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="p">{@</span><span class="nb">link</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">}.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="n">calculates</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">closest</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">decoded</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="nb">and</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nb">or</span><span class="w"> </span><span class="n">larger</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="nb">and</span><span class="w"> </span><span class="n">height</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">power</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">decoding</span><span class="w"> </span><span class="n">but</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">larger</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">isn</span><span class="o">'</span><span class="n">t</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">caching</span><span class="w"> </span><span class="n">purposes</span><span class="p">.</span>
<span class="w">  </span><span class="o">*</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">options</span><span class="w">   </span><span class="n">An</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">out</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">populated</span><span class="w"> </span><span class="p">(</span><span class="n">run</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">decode</span><span class="o">*</span>
<span class="w">  </span><span class="o">*</span><span class="w">                  </span><span class="n">method</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">inJustDecodeBounds</span><span class="o">==</span><span class="n">true</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">reqWidth</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">resulting</span><span class="w"> </span><span class="n">bitmap</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">reqHeight</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">resulting</span><span class="w"> </span><span class="n">bitmap</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">inSampleSize</span>
<span class="w">  </span><span class="o">*/</span>
<span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">calculateInSampleSize</span><span class="p">(</span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="w"> </span><span class="n">options</span><span class="p">,</span>
<span class="w">                                         </span><span class="nb">int</span><span class="w"> </span><span class="n">reqWidth</span><span class="p">,</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">reqHeight</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Raw height and width of image</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">outHeight</span><span class="p">;</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">outWidth</span><span class="p">;</span>
<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">height</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">reqHeight</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">reqWidth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// Calculate ratios of height and width to requested height and width</span>
<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">heightRatio</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">((</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">reqHeight</span><span class="p">);</span>
<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">widthRatio</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">((</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">reqWidth</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Choose the smallest ratio as inSampleSize value, this will guarantee a final image</span>
<span class="w">        </span><span class="c1">// with both dimensions larger than or equal to the requested height and width.</span>
<span class="w">        </span><span class="n">inSampleSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">heightRatio</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">widthRatio</span><span class="w"> </span>?<span class="w"> </span><span class="n">heightRatio</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">widthRatio</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// This offers some additional logic in case the image has a strange</span>
<span class="w">        </span><span class="c1">// aspect ratio. For example, a panorama may have a much larger</span>
<span class="w">        </span><span class="c1">// width than height. In these cases the total pixels might still</span>
<span class="w">        </span><span class="c1">// end up being too large to fit comfortably in memory, so we should</span>
<span class="w">        </span><span class="c1">// be more aggressive with sample down the image (=larger inSampleSize).</span>

<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="n">totalPixels</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Anything more than 2x the requested pixels we'll sample down further</span>
<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="n">totalReqPixelsCap</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">reqWidth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">reqHeight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">totalPixels</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">inSampleSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">inSampleSize</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">totalReqPixelsCap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">inSampleSize</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">inSampleSize</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Then comes the method that will check the current image orientation to decide
the rotation angle</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Rotate</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">required</span><span class="p">.</span>
<span class="w"> </span><span class="o">*</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">img</span><span class="w">           </span><span class="n">The</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">bitmap</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">selectedImage</span><span class="w"> </span><span class="n">Image</span><span class="w"> </span><span class="n">URI</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">resulted</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">manipulation</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">rotateImageIfRequired</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="n">selectedImage</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>

<span class="n">InputStream</span><span class="w"> </span><span class="nb">input</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">openInputStream</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">);</span>
<span class="n">ExifInterface</span><span class="w"> </span><span class="n">ei</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="n">VERSION</span><span class="p">.</span><span class="n">SDK_INT</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">23</span><span class="p">)</span>
<span class="w">    </span><span class="n">ei</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">(</span><span class="nb">input</span><span class="p">);</span>
<span class="k">else</span>
<span class="w">    </span><span class="n">ei</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">.</span><span class="n">getPath</span><span class="p">());</span>

<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">orientation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ei</span><span class="p">.</span><span class="n">getAttributeInt</span><span class="p">(</span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">TAG_ORIENTATION</span><span class="p">,</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_NORMAL</span><span class="p">);</span>

<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">orientation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_ROTATE_90</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rotateImage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="mi">90</span><span class="p">);</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_ROTATE_180</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rotateImage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="mi">180</span><span class="p">);</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_ROTATE_270</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rotateImage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="mi">270</span><span class="p">);</span>
<span class="w">        </span><span class="n">default</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">img</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Finally the rotation method itself</p>
<div class="code"><pre class="code literal-block"><span class="nv">private</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">rotateImage</span><span class="ss">(</span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">img</span>,<span class="w"> </span><span class="nv">int</span><span class="w"> </span><span class="nv">degree</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">Matrix</span><span class="w"> </span><span class="nv">matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Matrix</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">matrix</span>.<span class="nv">postRotate</span><span class="ss">(</span><span class="nv">degree</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">rotatedImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Bitmap</span>.<span class="nv">createBitmap</span><span class="ss">(</span><span class="nv">img</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="nv">img</span>.<span class="nv">getWidth</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">img</span>.<span class="nv">getHeight</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">matrix</span>,<span class="w"> </span><span class="nv">true</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">img</span>.<span class="nv">recycle</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">rotatedImg</span><span class="c1">;</span>
}
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/adding-a-legend-to-pyplot-in-matplotlib-in-the-simplest-manner-possible/" class="u-url">Adding a legend to PyPlot in Matplotlib in the simplest manner possible</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/adding-a-legend-to-pyplot-in-matplotlib-in-the-simplest-manner-possible/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:50:51+08:00" itemprop="datePublished" title="2023-03-03 09:50">2023-03-03 09:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <blockquote>
<p><strong>TL;DR - &gt;</strong> How can one create a legend for a line graph in <code>Matplotlib</code>'s
<code>PyPlot</code> without creating any extra variables?</p>
</blockquote>
<p>Please consider the graphing script below:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">__name__</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'__main__'</span>:
<span class="w">    </span><span class="nv">PyPlot</span>.<span class="nv">plot</span><span class="ss">(</span><span class="nv">total_lengths</span>,<span class="w"> </span><span class="nv">sort_times_bubble</span>,<span class="w"> </span><span class="s1">'b-'</span>,
<span class="w">                </span><span class="nv">total_lengths</span>,<span class="w"> </span><span class="nv">sort_times_ins</span>,<span class="w"> </span><span class="s1">'r-'</span>,
<span class="w">                </span><span class="nv">total_lengths</span>,<span class="w"> </span><span class="nv">sort_times_merge_r</span>,<span class="w"> </span><span class="s1">'g+'</span>,
<span class="w">                </span><span class="nv">total_lengths</span>,<span class="w"> </span><span class="nv">sort_times_merge_i</span>,<span class="w"> </span><span class="s1">'p-'</span>,<span class="w"> </span><span class="ss">)</span>
<span class="w">    </span><span class="nv">PyPlot</span>.<span class="nv">title</span><span class="ss">(</span><span class="s2">"Combined Statistics"</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">PyPlot</span>.<span class="nv">xlabel</span><span class="ss">(</span><span class="s2">"Length of list (number)"</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">PyPlot</span>.<span class="nv">ylabel</span><span class="ss">(</span><span class="s2">"Time taken (seconds)"</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">PyPlot</span>.<span class="k">show</span><span class="ss">()</span>
</pre></div>

<p>As you can see, this is a very basic use of <code>matplotlib</code>'s <code>PyPlot</code>. This
ideally generates a graph like the one below:</p>
<p><img alt="Graph" src="images/sRcuY.png"></p>
<p>Nothing special, I know. However, it is unclear what data is being plotted
where (I'm trying to plot the data of some sorting algorithms, length against
time taken, and I'd like to make sure people know which line is which). Thus,
I need a legend, however, taking a look at the following example below(from
the official site):</p>
<div class="code"><pre class="code literal-block"><span class="s s-Atom">ax</span> <span class="o">=</span> <span class="nf">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="s s-Atom">p1</span><span class="p">,</span> <span class="o">=</span> <span class="s s-Atom">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s s-Atom">label=</span><span class="s2">"line 1"</span><span class="p">)</span>
<span class="s s-Atom">p2</span><span class="p">,</span> <span class="o">=</span> <span class="s s-Atom">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s s-Atom">label=</span><span class="s2">"line 2"</span><span class="p">)</span>
<span class="s s-Atom">p3</span><span class="p">,</span> <span class="o">=</span> <span class="s s-Atom">ax</span><span class="p">.</span><span class="nf">plot</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s s-Atom">label=</span><span class="s2">"line 3"</span><span class="p">)</span>

<span class="s s-Atom">handles</span><span class="p">,</span> <span class="s s-Atom">labels</span> <span class="o">=</span> <span class="s s-Atom">ax</span><span class="p">.</span><span class="nf">get_legend_handles_labels</span><span class="p">()</span>

<span class="s s-Atom">#</span> <span class="s s-Atom">reverse</span> <span class="s s-Atom">the</span> <span class="s s-Atom">order</span>
<span class="s s-Atom">ax</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="s s-Atom">handles</span><span class="p">[</span><span class="o">::-</span><span class="mi">1</span><span class="p">],</span> <span class="s s-Atom">labels</span><span class="p">[</span><span class="o">::-</span><span class="mi">1</span><span class="p">])</span>

<span class="s s-Atom">#</span> <span class="s s-Atom">or</span> <span class="s s-Atom">sort</span> <span class="s s-Atom">them</span> <span class="s s-Atom">by</span> <span class="s s-Atom">labels</span>
<span class="s s-Atom">import</span> <span class="s s-Atom">operator</span>
<span class="s s-Atom">hl</span> <span class="o">=</span> <span class="nf">sorted</span><span class="p">(</span><span class="nf">zip</span><span class="p">(</span><span class="s s-Atom">handles</span><span class="p">,</span> <span class="s s-Atom">labels</span><span class="p">),</span>
            <span class="s s-Atom">key</span><span class="o">=</span><span class="s s-Atom">operator</span><span class="p">.</span><span class="nf">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="s s-Atom">handles2</span><span class="p">,</span> <span class="s s-Atom">labels2</span> <span class="o">=</span> <span class="nf">zip</span><span class="p">(</span><span class="o">*</span><span class="s s-Atom">hl</span><span class="p">)</span>

<span class="s s-Atom">ax</span><span class="p">.</span><span class="nf">legend</span><span class="p">(</span><span class="s s-Atom">handles2</span><span class="p">,</span> <span class="s s-Atom">labels2</span><span class="p">)</span>
</pre></div>

<p>You will see that I need to create an extra variable <code>ax</code>. How can I add a
legend to my graph <em>without</em> having to create this extra variable and
retaining the simplicity of my current script?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Add a <code>label=</code> to each of your <code>plot()</code> calls, and then call
<code>legend(loc='upper left')</code>.</p>
<p>Consider this sample (tested with Python 3.8.0):</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s2">"-b"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"sine"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="s2">"-r"</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"cosine"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">"upper left"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p><img alt="enter image description here" src="images/GyMXH.png"> Slightly modified from this
tutorial: http://jakevdp.github.io/mpl_tutorial/tutorial_pages/tut1.html</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can access the Axes instance (<code>ax</code>) with <code>plt.gca()</code>. In this case, you
can use</p>
<div class="code"><pre class="code literal-block">plt.gca().legend()
</pre></div>

<p>You can do this either by using the <code>label=</code> keyword in each of your
<code>plt.plot()</code> calls or by assigning your labels as a tuple or list within
<code>legend</code>, as in this working example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">linspace</span><span class="p">(</span><span class="o">-</span><span class="mf">0.75</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">exp</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span> <span class="o">-</span> <span class="mi">7</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="mi">7</span><span class="o">-</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="kp">sin</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="s1">'y0'</span><span class="p">,</span><span class="s1">'y1'</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p><img alt="pltGcaLegend" src="images/GQEYM.png"></p>
<p>However, if you need to access the Axes instance more that once, I do
recommend saving it to the variable <code>ax</code> with</p>
<div class="code"><pre class="code literal-block">ax = plt.gca()
</pre></div>

<p>and then calling <code>ax</code> instead of <code>plt.gca()</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-solve-the-failed-to-lazily-initialize-a-collection-of-role-hibernate-exception/" class="u-url">How to solve the “failed to lazily initialize a collection of role” Hibernate exception</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-solve-the-failed-to-lazily-initialize-a-collection-of-role-hibernate-exception/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:50:23+08:00" itemprop="datePublished" title="2023-03-03 09:50">2023-03-03 09:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have this problem:</p>
<blockquote>
<p>org.hibernate.LazyInitializationException: failed to lazily initialize a
collection of role: mvc3.model.Topic.comments, no session or session was
closed</p>
</blockquote>
<p>Here is the model:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Entity</span>
<span class="nv">@Table</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"T_TOPIC"</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Topic</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="nv">@Id</span>
<span class="w">    </span><span class="nv">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="n">GenerationType</span><span class="p">.</span><span class="n">AUTO</span><span class="p">)</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>

<span class="w">    </span><span class="nv">@ManyToOne</span>
<span class="w">    </span><span class="nv">@JoinColumn</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="ss">"USER_ID"</span><span class="p">)</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="k">User</span><span class="w"> </span><span class="n">author</span><span class="p">;</span>

<span class="w">    </span><span class="nv">@Enumerated</span><span class="p">(</span><span class="n">EnumType</span><span class="p">.</span><span class="n">STRING</span><span class="p">)</span><span class="w">    </span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">Tag</span><span class="w"> </span><span class="n">topicTag</span><span class="p">;</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nc">text</span><span class="p">;</span>

<span class="w">    </span><span class="nv">@OneToMany</span><span class="p">(</span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"topic"</span><span class="p">,</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="ow">ALL</span><span class="p">)</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">Comment</span><span class="o">&gt;</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashSet</span><span class="o">&lt;</span><span class="n">Comment</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="p">...</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">Comment</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getComments</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">comments</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="err">}</span>
</pre></div>

<p>The controller, which calls model looks like the following:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Controller</span>
<span class="nv">@RequestMapping</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"/topic"</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">TopicController</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="nv">@Autowired</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">TopicService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">TopicController</span><span class="p">.</span><span class="k">class</span><span class="p">);</span>


<span class="w">    </span><span class="nv">@RequestMapping</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"/details/{topicId}"</span><span class="p">,</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="k">GET</span><span class="p">)</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">ModelAndView</span><span class="w"> </span><span class="n">details</span><span class="p">(</span><span class="nv">@PathVariable</span><span class="p">(</span><span class="k">value</span><span class="o">=</span><span class="ss">"topicId"</span><span class="p">)</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span>
<span class="w">    </span><span class="err">{</span>

<span class="w">            </span><span class="n">Topic</span><span class="w"> </span><span class="n">topicById</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="n">findTopicByID</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">            </span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">Comment</span><span class="o">&gt;</span><span class="w"> </span><span class="n">commentList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">topicById</span><span class="p">.</span><span class="n">getComments</span><span class="p">();</span>

<span class="w">            </span><span class="n">Hashtable</span><span class="w"> </span><span class="n">modelData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Hashtable</span><span class="p">();</span>
<span class="w">            </span><span class="n">modelData</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="ss">"topic"</span><span class="p">,</span><span class="w"> </span><span class="n">topicById</span><span class="p">);</span>
<span class="w">            </span><span class="n">modelData</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="ss">"commentList"</span><span class="p">,</span><span class="w"> </span><span class="n">commentList</span><span class="p">);</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ModelAndView</span><span class="p">(</span><span class="ss">"/topic/details"</span><span class="p">,</span><span class="w"> </span><span class="n">modelData</span><span class="p">);</span>

<span class="w">     </span><span class="err">}</span>

<span class="err">}</span>
</pre></div>

<p>The jsp-page looks li the following:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;%</span><span class="vi">@page</span><span class="w"> </span><span class="n">import</span><span class="o">=</span><span class="s2">"com.epam.mvc3.helpers.Utils"</span><span class="cp">%&gt;</span>
<span class="cp">&lt;%</span><span class="err">@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">language</span><span class="o">=</span><span class="s2">"java"</span><span class="w"> </span><span class="n">contentType</span><span class="o">=</span><span class="s2">"text/html; charset=UTF-8"</span><span class="w"> </span><span class="n">pageEncoding</span><span class="o">=</span><span class="s2">"UTF-8"</span><span class="cp">%&gt;</span>
<span class="cp">&lt;%</span><span class="err">@</span><span class="w"> </span><span class="n">taglib</span><span class="w"> </span><span class="n">uri</span><span class="o">=</span><span class="s2">"http://java.sun.com/jsp/jstl/core"</span><span class="w"> </span><span class="n">prefix</span><span class="o">=</span><span class="s2">"c"</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="cp">&lt;%</span><span class="err">@</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">session</span><span class="o">=</span><span class="s2">"false"</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="w">      </span><span class="nt">&lt;title&gt;</span>View<span class="w"> </span>Topic<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;c:forEach</span><span class="w"> </span><span class="na">items=</span><span class="s">"${commentList}"</span><span class="w"> </span><span class="na">var=</span><span class="s">"item"</span><span class="nt">&gt;</span>
<span class="nt">&lt;jsp:useBean</span><span class="w"> </span><span class="na">id=</span><span class="s">"item"</span><span class="w"> </span><span class="na">type=</span><span class="s">"mvc3.model.Comment"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;li&gt;</span>${item.getText()}<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;/c:forEach&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>

<p>Exception is rised, when viewing jsp. In the line with <em>c:forEach</em> loop</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you know that you'll want to see all <code>Comment</code>s every time you retrieve a
<code>Topic</code> then change your field mapping for <code>comments</code> to:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@OneToMany</span><span class="p">(</span><span class="k">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FetchType</span><span class="p">.</span><span class="n">EAGER</span><span class="p">,</span><span class="w"> </span><span class="n">mappedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"topic"</span><span class="p">,</span><span class="w"> </span><span class="k">cascade</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CascadeType</span><span class="p">.</span><span class="ow">ALL</span><span class="p">)</span>
<span class="n">private</span><span class="w"> </span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">Comment</span><span class="o">&gt;</span><span class="w"> </span><span class="n">comments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedHashSet</span><span class="o">&lt;</span><span class="n">Comment</span><span class="o">&gt;</span><span class="p">();</span>
</pre></div>

<p>Collections are lazy-loaded by default, take a look at this if you want to
know more.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From my experience, I have the following methods to solved the famous
LazyInitializationException:</p>
<p><strong>(1) Use Hibernate.initialize</strong></p>
<div class="code"><pre class="code literal-block">Hibernate.initialize(topics.getComments());
</pre></div>

<p><strong>(2) Use JOIN FETCH</strong></p>
<p>You can use the JOIN FETCH syntax in your JPQL to explicitly fetch the child
collection out. This is some how like EAGER fetching.</p>
<p><strong>(3) Use OpenSessionInViewFilter</strong></p>
<p>LazyInitializationException often occur in view layer. If you use Spring
framework, you can use OpenSessionInViewFilter. However, I do not suggest you
to do so. It may leads to performance issue if not use correctly.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1809.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1807.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
