<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1319) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1319.html">
<link rel="prev" href="index-1320.html" type="text/html">
<link rel="next" href="index-1318.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-fix-error-listen-eaddrinuse-while-using-nodejs/" class="u-url">How to fix Error: listen EADDRINUSE while using NodeJS?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-fix-error-listen-eaddrinuse-while-using-nodejs/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T06:33:20+08:00" itemprop="datePublished" title="2023-02-18 06:33">2023-02-18 06:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I run a server with the port 80, and I try to use XMLHttpRequest I am
getting this error: <code>Error: listen EADDRINUSE</code></p>
<p>Why is it problem for NodeJS, if I want to do a request, while I run a server
on the port 80? For the webbrowsers it is not a problem: I can surf on the
internet, while the server is running.</p>
<p>The server is:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nt">net</span><span class="p">.</span><span class="nc">createServer</span><span class="o">(</span><span class="nt">function</span><span class="w"> </span><span class="o">(</span><span class="nt">socket</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">socket.name</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">socket.remoteAddress</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">":"</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">socket.remotePort</span><span class="p">;</span>
<span class="w">    </span><span class="err">console.log('connection</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">socket</span><span class="o">.</span><span class="n">remoteAddress</span><span class="p">);</span>
<span class="w">    </span><span class="err">socket.destroy()</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">listen</span><span class="o">(</span><span class="nt">options</span><span class="p">.</span><span class="nc">port</span><span class="o">);</span>
</pre></div>

<p>And the request:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">XMLHttpRequest</span><span class="p">();</span>

<span class="n">xhr</span><span class="o">.</span><span class="n">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sys</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"State: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">readyState</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sys</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Complete.</span><span class="se">\n</span><span class="s2">Body length: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">responseText</span><span class="o">.</span><span class="n">length</span><span class="p">);</span>
<span class="w">        </span><span class="n">sys</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Body:</span><span class="se">\n</span><span class="s2">"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">responseText</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="n">xhr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="s2">"http://mywebsite.com"</span><span class="p">);</span>
<span class="n">xhr</span><span class="o">.</span><span class="n">send</span><span class="p">();</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><code>EADDRINUSE</code> means that the port number which <code>listen()</code> tries to bind the
server to is already in use.</p>
<p>So, in your case, there must be running a server on port 80 already.</p>
<p>If you have another webserver running on this port you have to put node.js
behind that server and proxy it through it.</p>
<p>You should check for the <code>listening</code> event like this, to see if the server is
really listening:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">http</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">server</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">res</span><span class="p">){</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="s1">'test'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'listening'</span><span class="p">,</span><span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'ok, server is running'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><code>EADDRINUSE</code> means that the port number which <code>listen()</code> tries to bind the
server to is already in use.</p>
<p>So, in your case, there must be running a server on port 80 already.</p>
<p>If you have another webserver running on this port you have to put node.js
behind that server and proxy it through it.</p>
<p>You should check for the <code>listening</code> event like this, to see if the server is
really listening:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">http</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">server</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">res</span><span class="p">){</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="s1">'test'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'listening'</span><span class="p">,</span><span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'ok, server is running'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-a-and-so-files/" class="u-url">What are .a and .so files?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-a-and-so-files/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T06:32:56+08:00" itemprop="datePublished" title="2023-02-18 06:32">2023-02-18 06:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm currently trying to port a C application to AIX and am getting confused.
What are .a and .so files and how are they used when building/running an
application?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Archive libraries (.a) are statically linked i.e when you compile your program
with -c option in gcc. So, if there's any change in library, you need to
compile and build your code again.</p>
<p>The advantage of .so (shared object) over .a library is that they are linked
during the runtime i.e. after creation of your .o file -o option in gcc. So,
if there's any change in .so file, you don't need to recompile your main
program. But make sure that your main program is linked to the new .so file
with ln command.</p>
<p>This will help you to build the .so files.
http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html</p>
<p><br></p>
<h3>Suggest</h3>
<p>.a are static libraries. If you use code stored inside them, it's taken from
them and embedded into your own binary. In Visual Studio, these would be .lib
files.</p>
<p>.so are dynamic libraries. If you use code stored inside them, it's not taken
and embedded into your own binary. Instead it's just referenced, so the binary
will depend on them and the code from the so file is added/loaded at runtime.
In Visual Studio/Windows these would be .dll files (with small .lib files
containing linking information).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/extending-the-user-model-with-custom-fields-in-django/" class="u-url">Extending the User model with custom fields in Django</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/extending-the-user-model-with-custom-fields-in-django/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T06:32:27+08:00" itemprop="datePublished" title="2023-02-18 06:32">2023-02-18 06:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What's the best way to extend the User model (bundled with Django's
authentication app) with custom fields? I would also possibly like to use the
email as the username (for authentication purposes).</p>
<p>I've already seen a few ways to do it, but can't decide on which one is the
best.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The least painful and indeed Django-recommended way of doing this is through a
<code>OneToOneField(User)</code> property.</p>
<blockquote>
<h3>Extending the existing User model</h3>
<p>…</p>
<p>If you wish to store information related to <code>User</code>, you can use a one-to-one
relationship to a model containing the fields for additional information.
This one-to-one model is often called a profile model, as it might store
non-auth related information about a site user.</p>
</blockquote>
<p>That said, extending <code>django.contrib.auth.models.User</code> and supplanting it also
works...</p>
<blockquote>
<h3>Substituting a custom User model</h3>
<p>Some kinds of projects may have authentication requirements for which
Django’s built-in <code>User</code> model is not always appropriate. For instance, on
some sites it makes more sense to use an email address as your
identification token instead of a username.</p>
<p><em>[Ed: <strong>Two warnings and a notification follow</strong> , mentioning that this is
<strong>pretty drastic</strong>.]</em></p>
</blockquote>
<p>I would definitely stay away from changing the actual User class in your
Django source tree and/or copying and altering the auth module.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Note: this answer is deprecated. see other answers if you are using Django
1.7 or later.</strong></p>
<p>This is how I do it.</p>
<div class="code"><pre class="code literal-block"><span class="c1">#in models.py</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.db.models.signals</span> <span class="kn">import</span> <span class="n">post_save</span>

<span class="k">class</span> <span class="nc">UserProfile</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>  
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>  
    <span class="c1">#other fields here</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
          <span class="k">return</span> <span class="s2">"</span><span class="si">%s</span><span class="s2">'s profile"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">user</span>

<span class="k">def</span> <span class="nf">create_user_profile</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  
    <span class="k">if</span> <span class="n">created</span><span class="p">:</span>  
       <span class="n">profile</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">UserProfile</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>

<span class="n">post_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">create_user_profile</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">User</span><span class="p">)</span>

<span class="c1">#in settings.py</span>
<span class="n">AUTH_PROFILE_MODULE</span> <span class="o">=</span> <span class="s1">'YOURAPP.UserProfile'</span>
</pre></div>

<p>This will create a userprofile each time a user is saved if it is created. You
can then use</p>
<div class="code"><pre class="code literal-block">  user.get_profile().whatever
</pre></div>

<p>Here is some more info from the docs</p>
<p>http://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-
information-about-users</p>
<p><strong>Update:</strong> Please note that <code>AUTH_PROFILE_MODULE</code> is deprecated since v1.5:
https://docs.djangoproject.com/en/1.5/ref/settings/#auth-profile-module</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1320.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1318.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
