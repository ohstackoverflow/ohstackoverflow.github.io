<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1104) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1104.html">
<link rel="prev" href="index-1105.html" type="text/html">
<link rel="next" href="index-1103.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/javascript-add-leading-zeroes-to-date/" class="u-url">Javascript add leading zeroes to date</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/javascript-add-leading-zeroes-to-date/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:21:25+08:00" itemprop="datePublished" title="2023-02-18 01:21">2023-02-18 01:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've created this script to calculate the date for 10 days in advance in the
format of dd/mm/yyyy:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">MyDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="k">var</span><span class="w"> </span><span class="n">MyDateString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="n">MyDate</span><span class="o">.</span><span class="n">setDate</span><span class="p">(</span><span class="n">MyDate</span><span class="o">.</span><span class="n">getDate</span><span class="p">()</span><span class="o">+</span><span class="mi">10</span><span class="p">);</span>
<span class="n">MyDateString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyDate</span><span class="o">.</span><span class="n">getDate</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">MyDate</span><span class="o">.</span><span class="n">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MyDate</span><span class="o">.</span><span class="n">getFullYear</span><span class="p">();</span>
</pre></div>

<p>I need to have the date appear with leading zeroes on the day and month
component by way of adding these rules to the script. I can't seem to get it
to work.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">MyDate</span>.<span class="nv">getMonth</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="ss">)</span><span class="nv">getMonth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'0'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">getMonth</span><span class="c1">;</span>
</pre></div>

<p>and</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">MyDate</span>.<span class="k">getDate</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">10</span><span class="ss">)</span><span class="nv">get</span>.<span class="nv">Date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'0'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">getDate</span><span class="c1">;</span>
</pre></div>

<p>If someone could show me where to insert these into the script I would be
really appreciative.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try this: http://jsfiddle.net/xA5B7/</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">MyDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="k">var</span><span class="w"> </span><span class="n">MyDateString</span><span class="p">;</span>

<span class="n">MyDate</span><span class="o">.</span><span class="n">setDate</span><span class="p">(</span><span class="n">MyDate</span><span class="o">.</span><span class="n">getDate</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">20</span><span class="p">);</span>

<span class="n">MyDateString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="s1">'0'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">MyDate</span><span class="o">.</span><span class="n">getDate</span><span class="p">())</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/'</span>
<span class="w">             </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="s1">'0'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">MyDate</span><span class="o">.</span><span class="n">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/'</span>
<span class="w">             </span><span class="o">+</span><span class="w"> </span><span class="n">MyDate</span><span class="o">.</span><span class="n">getFullYear</span><span class="p">();</span>
</pre></div>

<hr>
<p><strong>EDIT:</strong></p>
<p>To explain, <code>.slice(-2)</code> gives us the <em>last</em> two characters of the string.</p>
<p>So no matter what, we can add <code>"0"</code> to the day or month, and just ask for the
last two since those are always the two we want.</p>
<p>So if the <code>MyDate.getMonth()</code> returns <code>9</code>, it will be:</p>
<div class="code"><pre class="code literal-block">("0" + "9") // Giving us "09"
</pre></div>

<p>so adding <code>.slice(-2)</code> on that gives us the last two characters which is:</p>
<div class="code"><pre class="code literal-block">("0" + "9").slice(-2)
"09"
</pre></div>

<p>But if <code>MyDate.getMonth()</code> returns <code>10</code>, it will be:</p>
<div class="code"><pre class="code literal-block">("0" + "10") // Giving us "010"
</pre></div>

<p>so adding <code>.slice(-2)</code> gives us the last two characters, or:</p>
<div class="code"><pre class="code literal-block">("0" + "10").slice(-2)
"10"
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h3>The modern way</h3>
<p>The new modern way to do this is to use <code>toLocaleDateString</code>, because it
allows you not only to format a date with proper localization, but even to
pass format options to achieve the desired result:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">.</span><span class="n">toLocaleDateString</span><span class="p">(</span><span class="s2">"en-GB"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">argument</span>
<span class="w">  </span><span class="n">year</span><span class="p">:</span><span class="w"> </span><span class="s2">"numeric"</span><span class="p">,</span>
<span class="w">  </span><span class="n">month</span><span class="p">:</span><span class="w"> </span><span class="s2">"2-digit"</span><span class="p">,</span>
<span class="w">  </span><span class="n">day</span><span class="p">:</span><span class="w"> </span><span class="s2">"2-digit"</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="err">“</span><span class="mi">01</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">2018</span><span class="err">”</span>
</pre></div>

<p>Or using a Temporal object ( <strong>still in proposal</strong> , caniuse):</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Temporal</span><span class="o">.</span><span class="n">PlainDate</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">zoned</span><span class="w"> </span><span class="n">date</span>
<span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">.</span><span class="n">toLocaleString</span><span class="p">(</span><span class="s2">"en-GB"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">argument</span>
<span class="w">  </span><span class="n">year</span><span class="p">:</span><span class="w"> </span><span class="s2">"numeric"</span><span class="p">,</span>
<span class="w">  </span><span class="n">month</span><span class="p">:</span><span class="w"> </span><span class="s2">"2-digit"</span><span class="p">,</span>
<span class="w">  </span><span class="n">day</span><span class="p">:</span><span class="w"> </span><span class="s2">"2-digit"</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="err">“</span><span class="mi">01</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">2018</span><span class="err">”</span>
</pre></div>

<p>When you use <code>undefined</code> as the first argument it will detect the browser
language, instead. Alternatively, you can use <code>2-digit</code> on the year option,
too.</p>
<h4>Performance</h4>
<p>If you plan to format a lot of dates, you should consider using
<code>Intl.DateTimeFormat</code> instead:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">formatter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Intl</span><span class="o">.</span><span class="n">DateTimeFormat</span><span class="p">(</span><span class="s2">"en-GB"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">re</span><span class="o">-</span><span class="n">use</span><span class="w"> </span><span class="n">me</span>
<span class="w">  </span><span class="n">year</span><span class="p">:</span><span class="w"> </span><span class="s2">"numeric"</span><span class="p">,</span>
<span class="w">  </span><span class="n">month</span><span class="p">:</span><span class="w"> </span><span class="s2">"2-digit"</span><span class="p">,</span>
<span class="w">  </span><span class="n">day</span><span class="p">:</span><span class="w"> </span><span class="s2">"2-digit"</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Temporal</span><span class="w"> </span><span class="n">object</span>
<span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">formatter</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="err">“</span><span class="mi">01</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">2018</span><span class="err">”</span>
</pre></div>

<p>The formatter is compatible with Date and Temporal objects.</p>
<h4>Historical dates</h4>
<p>Unlike in the Temporal constructor years between 0 and 99 will be interpreted
as 20th century years on the Date constructor. To prevent this, initialize the
date like so:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">()</span>
<span class="n">date</span><span class="o">.</span><span class="n">setFullYear</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">A</span><span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="w"> </span><span class="mi">18</span>
</pre></div>

<p>This is not required for Temporal objects, but years below 1000 will not
contain leading zeros in all cases, because the formatter (that is shared for
the Date and Temporal API) does not support <code>4-digit</code> formatting at all. In
this case you have to do manual formatting (see below).</p>
<h3>For the ISO 8601 format</h3>
<p>If you want to get your date in the <code>YYYY-MM-DD</code> format (ISO 8601), the
solution looks different:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">UTC</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">.</span><span class="n">toISOString</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'T'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="err">“</span><span class="mi">2018</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">01</span><span class="err">”</span>
</pre></div>

<p>Your input date should be in the UTC format or <code>toISOString()</code> will fix that
for you. This is done by using <code>Date.UTC</code> as shown above.</p>
<h4>Historical dates for the ISO 8601 format</h4>
<p>Unlike in the Temporal constructor years between 0 and 99 will be interpreted
as 20th century years on the Date constructor. To prevent this, initialize the
date like so to be used for the ISO 8601 format:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">()</span>
<span class="n">date</span><span class="o">.</span><span class="n">setUTCFullYear</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">A</span><span class="o">.</span><span class="n">D</span><span class="o">.</span><span class="w"> </span><span class="mi">18</span>
</pre></div>

<p>Note that the ISO format for Temporal objects with dates before the year 1000
or after the year 9999 will have a different formatting compared to the legacy
Date API. It is recommend to fallback to custom formatting to enforce 4 digit
years in all circumstances.</p>
<h3>Custom 4-digit formatting on the year</h3>
<p>Sadly, the formatter doesn't support leading zeros on the year. There is no
<code>4-digit</code> option. This will remain for Temporal objects as well, because they
do share the same formatter.</p>
<p>Fortunately, the ISO format of the Date API will always display at least 4
digits on the year, although Temporal objects do not. So at least for the Date
API you can format historical dates before the year 1000 with leading zeros by
falling back to a manual formatting approach using part of the ISO 8601 format
method:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">()</span>
<span class="n">date</span><span class="o">.</span><span class="n">setUTCFullYear</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="k">const</span><span class="w"> </span><span class="n">ymd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">.</span><span class="n">toISOString</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'T'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)</span>
<span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">`</span><span class="o">$</span><span class="p">{</span><span class="n">ymd</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span><span class="o">/$</span><span class="p">{</span><span class="n">ymd</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span><span class="o">/$</span><span class="p">{</span><span class="n">ymd</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span><span class="err">`</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="err">“</span><span class="mi">01</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">0018</span><span class="err">”</span>
</pre></div>

<p>For a Temporal object a different route is necessary, since the
<code>ISOYearString</code> will be formatted differently for dates before the year 1000
and after the year 9999 as mentioned before:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Temporal</span><span class="o">.</span><span class="n">PlainDate</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">zoned</span><span class="w"> </span><span class="n">date</span>
<span class="k">const</span><span class="w"> </span><span class="n">zeroPad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">n</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="o">.</span><span class="n">padStart</span><span class="p">(</span><span class="n">digits</span><span class="p">,</span><span class="w"> </span><span class="s1">'0'</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">`</span><span class="o">$</span><span class="p">{</span><span class="n">zeroPad</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">day</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)}</span><span class="o">/$</span><span class="p">{</span><span class="n">zeroPad</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)}</span><span class="o">/$</span><span class="p">{</span><span class="n">zeroPad</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)}</span><span class="err">`</span><span class="p">;</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">outputs</span><span class="w"> </span><span class="err">“</span><span class="mi">01</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">0018</span><span class="err">”</span>
</pre></div>

<h3>Miscellaneous</h3>
<p>For the Date and Temporal API there is also <code>toLocaleTimeString</code>, that allows
you to localize and format the time of a date.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-a-blob-url-and-why-it-is-used/" class="u-url">What is a blob URL and why it is used?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-a-blob-url-and-why-it-is-used/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:21:00+08:00" itemprop="datePublished" title="2023-02-18 01:21">2023-02-18 01:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am having trouble with <code>blob</code> URLs.</p>
<p>I was searching for <code>src</code> of a <code>video</code> tag on YouTube and I found that the
video <code>src</code> was like:</p>
<div class="code"><pre class="code literal-block">src="blob:https://video_url"
</pre></div>

<p>I opened the <code>blob</code> URL that was in <code>src</code> of the video, but it gave an error.
I can't open the link, but it was working with the <code>src</code> tag. How is this
possible?</p>
<p>I have a few questions:</p>
<ul>
<li>What is a <code>blob</code> URL?</li>
<li>Why it is used?</li>
<li>Can I make my own <code>blob</code> URL on a server?</li>
</ul>
<p>Any additional details about <code>blob</code> URLs would be helpful as well.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Blob URLs (ref W3C, official name) or Object-URLs (ref. MDN and method name)
are used with a Blob or a File object.</p>
<blockquote>
<p>src="blob:https://crap.crap" I opened the blob url that was in src of video
it gave a error and i can't open but was working with the src tag how it is
possible?</p>
</blockquote>
<p>Blob URLs can only be generated internally by the browser.
<code>URL.createObjectURL()</code> will create a special reference to the Blob or File
object which later can be released using <code>URL.revokeObjectURL()</code>. These URLs
can only be used locally in the single instance of the browser and in the same
session (ie. the life of the page/document).</p>
<blockquote>
<p>What is blob url?<br>
 Why it is used?</p>
</blockquote>
<p>Blob URL/Object URL is a pseudo protocol to allow Blob and File objects to be
used as URL source for things like images, download links for binary data and
so forth.</p>
<p>For example, you can not hand an Image object raw byte-data as it would not
know what to do with it. It requires for example images (which are binary
data) to be loaded via URLs. This applies to anything that require an URL as
source. Instead of uploading the binary data, then serve it back via an URL it
is better to use an extra local step to be able to access the data directly
without going via a server.</p>
<p>It is also a better alternative to Data-URI which are strings encoded as
Base-64. The problem with Data-URI is that each char takes two bytes in
JavaScript. On top of that a 33% is added due to the Base-64 encoding. Blobs
are pure binary byte-arrays which does not have any significant overhead as
Data-URI does, which makes them faster and smaller to handle.</p>
<blockquote>
<p>Can i make my own blob url on a server?</p>
</blockquote>
<p>No, Blob URLs/Object URLs can only be made internally in the browser. You can
make Blobs and get File object via the File Reader API, although BLOB just
means Binary Large OBject and is stored as byte-arrays. A client can request
the data to be sent as either ArrayBuffer or as a Blob. The server should send
the data as pure binary data. Databases often uses Blob to describe binary
objects as well, and in essence we are talking basically about byte-arrays.</p>
<blockquote>
<p>if you have then Additional detail</p>
</blockquote>
<p>You need to encapsulate the binary data as a BLOB object, then use
<code>URL.createObjectURL()</code> to generate a local URL for it:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Blob</span><span class="p">([</span><span class="n">arrayBufferWithPNG</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="p">}),</span>
<span class="w">    </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">URL</span><span class="o">.</span><span class="n">createObjectURL</span><span class="p">(</span><span class="n">blob</span><span class="p">),</span>
<span class="w">    </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Image</span><span class="p">();</span>

<span class="n">img</span><span class="o">.</span><span class="n">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">URL</span><span class="o">.</span><span class="n">revokeObjectURL</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">src</span><span class="p">);</span><span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">clean</span><span class="o">-</span><span class="n">up</span><span class="w"> </span><span class="n">memory</span>
<span class="w">    </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">DOM</span>
<span class="p">}</span>

<span class="n">img</span><span class="o">.</span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url</span><span class="p">;</span><span class="w">                         </span><span class="o">//</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="s2">"stream"</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bytes</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This Javascript function supports to show the difference between the <strong>Blob</strong>
File API and the <strong>Data</strong> API to download a <strong>JSON</strong> file in the client
browser:</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Save</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">HTML</span><span class="w"> </span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Blob</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="n">author</span><span class="w"> </span><span class="n">Loreto</span><span class="w"> </span><span class="n">Parisi</span>
<span class="w"> </span><span class="o">*/</span>

<span class="k">var</span><span class="w"> </span><span class="n">saveAsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="w"> </span><span class="n">fileContents</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">typeof</span><span class="p">(</span><span class="n">Blob</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">'undefined'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Alternative</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">Blob</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">textFileAsBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Blob</span><span class="p">([</span><span class="n">fileContents</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s1">'text/plain'</span><span class="p">});</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">downloadLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span>
<span class="w">        </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">download</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fileName</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">webkitURL</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">webkitURL</span><span class="o">.</span><span class="n">createObjectURL</span><span class="p">(</span><span class="n">textFileAsBlob</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">URL</span><span class="o">.</span><span class="n">createObjectURL</span><span class="p">(</span><span class="n">textFileAsBlob</span><span class="p">);</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="p">);</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"none"</span><span class="p">;</span>
<span class="w">            </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">downloadLink</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">click</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Alternative</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">Data</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">pp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">'a'</span><span class="p">);</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">'href'</span><span class="p">,</span><span class="w"> </span><span class="s1">'data:text/plain;charset=utf-8,'</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="n">encodeURIComponent</span><span class="p">(</span><span class="n">fileContents</span><span class="p">));</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">'download'</span><span class="p">,</span><span class="w"> </span><span class="n">fileName</span><span class="p">);</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="p">);</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">click</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">saveAsFile</span>

<span class="o">/*</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="o">*/</span>
<span class="k">var</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w"> </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="s2">"car"</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">};</span>
<span class="n">saveAsFile</span><span class="p">(</span><span class="s1">'out.json'</span><span class="p">,</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
</pre></div>

<p>The function is called like <code>saveAsFile('out.json', jsonString);</code>. It will
create a ByteStream immediately recognized by the browser that will download
the generated file directly using the File API <code>URL.createObjectURL</code>.</p>
<p>In the <code>else</code>, it is possible to see the same result obtained via the <code>href</code>
element plus the Data API, but this has several limitations that the Blob API
has not.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-nicely-format-floating-numbers-to-string-without-unnecessary-decimal-0-s/" class="u-url">How to nicely format floating numbers to string without unnecessary decimal 0's</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-nicely-format-floating-numbers-to-string-without-unnecessary-decimal-0-s/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:20:29+08:00" itemprop="datePublished" title="2023-02-18 01:20">2023-02-18 01:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>A 64-bit double can represent integer +/- 253 exactly.</p>
<p>Given this fact, I choose to use a double type as a single type for all my
types, since my largest integer is an unsigned 32-bit number.</p>
<p>But now I have to print these pseudo integers, but the problem is they are
also mixed in with actual doubles.</p>
<p>So how do I print these doubles nicely in Java?</p>
<p>I have tried <code>String.format("%f", value)</code>, which is close, except I get a lot
of trailing zeros for small values.</p>
<p>Here's an example output of of <code>%f</code></p>
<div class="code"><pre class="code literal-block"><span class="mf">232.00000000</span>
<span class="mf">0.18000000000</span>
<span class="mf">1237875192.0</span>
<span class="mf">4.5800000000</span>
<span class="mf">0.00000000</span>
<span class="mf">1.23450000</span>
</pre></div>

<p>What I want is:</p>
<div class="code"><pre class="code literal-block"><span class="mf">232</span>
<span class="mf">0.18</span>
<span class="mf">1237875192</span>
<span class="mf">4.58</span>
<span class="mf">0</span>
<span class="mf">1.2345</span>
</pre></div>

<p>Sure I can write a function to trim those zeros, but that's lot of performance
loss due to string manipulation. Can I do better with other format code?</p>
<hr>
<p>The answers by Tom E. and Jeremy S. are unacceptable as they both arbitrarily
rounds to two decimal places. Please understand the problem before answering.</p>
<hr>
<p>Please note that <code>String.format(format, args...)</code> is <em><strong>locale-dependent</strong></em>
(see answers below).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If the idea is to print integers stored as doubles as if they are integers,
and otherwise print the doubles with the minimum necessary precision:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">fmt</span><span class="ss">(</span><span class="nv">double</span><span class="w"> </span><span class="nv">d</span><span class="ss">)</span>
{
<span class="w">    </span><span class="k">if</span><span class="ss">(</span><span class="nv">d</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">(</span><span class="nv">long</span><span class="ss">)</span><span class="w"> </span><span class="nv">d</span><span class="ss">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">String</span>.<span class="nv">format</span><span class="ss">(</span><span class="s2">"%d"</span>,<span class="ss">(</span><span class="nv">long</span><span class="ss">)</span><span class="nv">d</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">String</span>.<span class="nv">format</span><span class="ss">(</span><span class="s2">"%s"</span>,<span class="nv">d</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>Produces:</p>
<div class="code"><pre class="code literal-block"><span class="mf">232</span>
<span class="mf">0.18</span>
<span class="mf">1237875192</span>
<span class="mf">4.58</span>
<span class="mf">0</span>
<span class="mf">1.2345</span>
</pre></div>

<p>And does not rely on string manipulation.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">String.format("%.2f", value);
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1105.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1103.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
