<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2645) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2645.html">
<link rel="prev" href="index-2646.html" type="text/html">
<link rel="next" href="index-2644.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/does-android-support-near-real-time-push-notification/" class="u-url">Does Android support near real time push notification?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/does-android-support-near-real-time-push-notification/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T07:19:58+08:00" itemprop="datePublished" title="2023-03-05 07:19">2023-03-05 07:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I recently learned about the ability of iPhone apps to receive nearly
instantaneous <del>notifications to apps</del> notifications to apps.</p>
<p>This is provided in the form of push notifications, a bespoke protocol which
keeps an always on data connection to the iPhone and messages binary packets
to the app, which pops up alerts <em>incredibly</em> quickly, between 0.5 - 5 seconds
from server app send to phone app response time. This is sent as data - rather
than SMS - in very very small packets charged as part of the data plan not as
incoming messages.</p>
<p>I would like to know if, using Android, there is either a similar facility, or
whether it's possible to implement something close to this using Android APIs.
To clarify, I define similar as:</p>
<ul>
<li>Not an SMS message, but some data driven solution</li>
<li>As real time as is possible</li>
<li>Is scalable, i.e., as the server part of a mobile app, I could notify thousands of app instances in seconds</li>
</ul>
<p>I appreciate the app could be pull based, HTTP request/response style, but
ideally I don't want to be polling that heavily just to check for
notification; besides which it's like drip draining the data plan.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Firebase Cloud Messaging FCM FAQ is the new version of GCM. It inherits GCM’s
core infrastructure to deliver messages reliably on Android, iOS and Chrome.
However they'll continue to support GCM because lot of developers are using
GCM SDKs today to handle notifications, and client app upgrade takes time.</p>
<p>As of June 26, 2012, Google Cloud Messaging is the preferred way of sending
messages to applications running on devices.</p>
<p>Previously (and now deprecated), the service was called Cloud To Device
Messaging.</p>
<p><br></p>
<h3>Suggest</h3>
<p>XMPP is a good solution. I have used it for a push enabled, realtime, Android
application. XMPP is powerful, highly extensible and easy to integrate and
use.</p>
<p>There are loads of free XMPP servers (though out of courtesy you shouldn't
abuse them) and there are open source servers you can run on one of your own
boxes. OpenFire is an excellent choice.</p>
<p>The library you want isn't <em>Smack</em> as noted above, it's aSmack. But note, this
is a build environment - you will have to build the library.</p>
<p>This is a calculation I did on battery life impact of an XMPP solution:</p>
<blockquote>
<p>The Android client must maintain a persistent TCP connection by waking up
periodically to send a heartbeat to the XMPP server.<br>
 This clearly imposes a cost in terms of power usage. An estimate of this
cost is provided below:</p>
<ul>
<li>Using a 1400mAh battery (as supplied in the Nexus One and HTC Desire)</li>
<li>An idle device, connected to an 3G network, uses approximately 5mA</li>
<li>The wake-up, heartbeat, sleep cycle occurs every 5 minutes, takes three
seconds to complete and uses 300mA</li>
<li>The cost in battery usage per hour is therefore:<ul>
<li>36 seconds 300mA = 3mAh sending heartbeat</li>
<li>3600 seconds 5mA = 5mAh at idle</li>
<li>4:95 + 3 = 7:95mAh combined</li>
</ul>
</li>
<li>A 1400mAh battery lasts approximately 11.6 days at idle and 7.3 days
when running the application, which represents an approximate 37% reduction
in battery life.</li>
<li>However, a reduction in battery life of 37% represents the absolute
worst case in practice given that devices are rarely completely idle.
</li>
</ul>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-does-bump-version-stand-for/" class="u-url">What does Bump Version stand for?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-does-bump-version-stand-for/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T07:18:44+08:00" itemprop="datePublished" title="2023-03-05 07:18">2023-03-05 07:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I saw this comment in git many times. What does it mean actually?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It means to increment the version number to a new, unique value.</p>
<p><br></p>
<h3>Suggest</h3>
<p>from: A successful Git branching model:</p>
<blockquote>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>release-1.2<span class="w"> </span>develop
Switched<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>branch<span class="w"> </span><span class="s2">"release-1.2"</span>
$<span class="w"> </span>./bump-version.sh<span class="w"> </span><span class="m">1</span>.2
Files<span class="w"> </span>modified<span class="w"> </span>successfully,<span class="w"> </span>version<span class="w"> </span>bumped<span class="w"> </span>to<span class="w"> </span><span class="m">1</span>.2.
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-a<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Bumped version number to 1.2"</span>
<span class="o">[</span>release-1.2<span class="w"> </span>74d9424<span class="o">]</span><span class="w"> </span>Bumped<span class="w"> </span>version<span class="w"> </span>number<span class="w"> </span>to<span class="w"> </span><span class="m">1</span>.2
<span class="m">1</span><span class="w"> </span>files<span class="w"> </span>changed,<span class="w"> </span><span class="m">1</span><span class="w"> </span>insertions<span class="o">(</span>+<span class="o">)</span>,<span class="w"> </span><span class="m">1</span><span class="w"> </span>deletions<span class="o">(</span>-<span class="o">)</span>
</pre></div>

<p>After creating a new branch and switching to it, we bump the version number.
Here, bump-version.sh is a fictional shell script that changes some files in
the working copy to reflect the new version. (This can of course be a manual
change—the point being that some files change.) Then, the bumped version
number is committed.</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-make-a-deep-copy-of-an-object/" class="u-url">How do you make a deep copy of an object?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-make-a-deep-copy-of-an-object/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T07:17:22+08:00" itemprop="datePublished" title="2023-03-05 07:17">2023-03-05 07:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It's a bit difficult to implement a deep object copy function. What steps you
take to ensure the original object and the cloned one share no reference?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A safe way is to serialize the object, then deserialize. This ensures
everything is a brand new reference.</p>
<p>Here's an article about how to do this efficiently.</p>
<p>Caveats: It's possible for classes to override serialization such that new
instances are <em>not</em> created, e.g. for singletons. Also this of course doesn't
work if your classes aren't Serializable.</p>
<p><br></p>
<h3>Suggest</h3>
<p>A few people have mentioned using or overriding <code>Object.clone()</code>. Don't do it.
<code>Object.clone()</code> has some major problems, and its use is discouraged in most
cases. Please see Item 11, from "Effective Java" by Joshua Bloch for a
complete answer. I believe you can safely use <code>Object.clone()</code> on primitive
type arrays, but apart from that you need to be judicious about properly using
and overriding clone.</p>
<p>The schemes that rely on serialization (XML or otherwise) are kludgy.</p>
<p>There is no easy answer here. If you want to deep copy an object you will have
to traverse the object graph and copy each child object explicitly via the
object's copy constructor or a static factory method that in turn deep copies
the child object. Immutables (e.g. <code>String</code>s) do not need to be copied. As an
aside, you should favor immutability for this reason.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2646.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2644.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
