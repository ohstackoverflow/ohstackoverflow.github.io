<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 317) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-317.html">
<link rel="prev" href="index-318.html" type="text/html">
<link rel="next" href="index-316.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-add-a-new-column-to-an-existing-dataframe/" class="u-url">How to add a new column to an existing DataFrame?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-add-a-new-column-to-an-existing-dataframe/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:48:27+08:00" itemprop="datePublished" title="2023-02-17 03:48">2023-02-17 03:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have the following indexed DataFrame with named columns and rows not-
continuous numbers:</p>
<div class="code"><pre class="code literal-block">          a         b         c         d
2  0.671399  0.101208 -0.181532  0.241273
3  0.446172 -0.243316  0.051767  1.577318
5  0.614758  0.075793 -0.451460 -0.012493
</pre></div>

<p>I would like to add a new column, <code>'e'</code>, to the existing data frame and do not
want to change anything in the data frame (i.e., the new column always has the
same length as the DataFrame).</p>
<div class="code"><pre class="code literal-block"><span class="mf">0</span><span class="w">   </span><span class="o">-</span><span class="mf">0.335485</span>
<span class="mf">1</span><span class="w">   </span><span class="o">-</span><span class="mf">1.166658</span>
<span class="mf">2</span><span class="w">   </span><span class="o">-</span><span class="mf">0.385571</span>
<span class="n">dtype</span><span class="p">:</span><span class="w"> </span><span class="n">float64</span>
</pre></div>

<p>How can I add column <code>e</code> to the above example?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Edit 2017</strong></p>
<p>As indicated in the comments and by @Alexander, currently the best method to
add the values of a Series as a new column of a DataFrame could be using
<strong><code>assign</code></strong> :</p>
<div class="code"><pre class="code literal-block"><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df1</span><span class="p">.</span><span class="k">assign</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="n">sLength</span><span class="p">)).</span><span class="n">values</span><span class="p">)</span>
</pre></div>

<hr>
<p><strong>Edit 2015</strong><br>
Some reported getting the <code>SettingWithCopyWarning</code> with this code.<br>
However, the code still runs perfectly with the current pandas version 0.16.1.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">sLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">df1</span>[<span class="s1">'a'</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>
<span class="w">          </span><span class="nv">a</span><span class="w">         </span><span class="nv">b</span><span class="w">         </span><span class="nv">c</span><span class="w">         </span><span class="nv">d</span>
<span class="mi">6</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">269221</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">026476</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">997517</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">294385</span>
<span class="mi">8</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">917438</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">847941</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">034235</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">448948</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>[<span class="s1">'e'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">Series</span><span class="ss">(</span><span class="nv">np</span>.<span class="k">random</span>.<span class="nv">randn</span><span class="ss">(</span><span class="nv">sLength</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">index</span><span class="o">=</span><span class="nv">df1</span>.<span class="nv">index</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>
<span class="w">          </span><span class="nv">a</span><span class="w">         </span><span class="nv">b</span><span class="w">         </span><span class="nv">c</span><span class="w">         </span><span class="nv">d</span><span class="w">         </span><span class="nv">e</span>
<span class="mi">6</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">269221</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">026476</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">997517</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">294385</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">757167</span>
<span class="mi">8</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">917438</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">847941</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">034235</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">448948</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">228131</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">version</span>.<span class="nv">short_version</span>
<span class="s1">'0.16.1'</span>
</pre></div>

<p>The <code>SettingWithCopyWarning</code> aims to inform of a possibly invalid assignment
on a copy of the Dataframe. It doesn't necessarily say you did it wrong (it
can trigger false positives) but from 0.13.0 it let you know there are more
adequate methods for the same purpose. Then, if you get the warning, just
follow its advise: <em>Try using .loc[row_index,col_indexer] = value instead</em></p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>.<span class="nv">loc</span>[:,<span class="s1">'f'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">Series</span><span class="ss">(</span><span class="nv">np</span>.<span class="k">random</span>.<span class="nv">randn</span><span class="ss">(</span><span class="nv">sLength</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">index</span><span class="o">=</span><span class="nv">df1</span>.<span class="nv">index</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>
<span class="w">          </span><span class="nv">a</span><span class="w">         </span><span class="nv">b</span><span class="w">         </span><span class="nv">c</span><span class="w">         </span><span class="nv">d</span><span class="w">         </span><span class="nv">e</span><span class="w">         </span><span class="nv">f</span>
<span class="mi">6</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">269221</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">026476</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">997517</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">294385</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">757167</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">050927</span>
<span class="mi">8</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">917438</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">847941</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">034235</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">448948</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">228131</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">006109</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p>In fact, this is currently the more efficient method as described in pandas
docs</p>
<hr>
<p>Original answer:</p>
<p>Use the original df1 indexes to create the series:</p>
<div class="code"><pre class="code literal-block"><span class="nv">df1</span>[<span class="s1">'e'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">Series</span><span class="ss">(</span><span class="nv">np</span>.<span class="k">random</span>.<span class="nv">randn</span><span class="ss">(</span><span class="nv">sLength</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">index</span><span class="o">=</span><span class="nv">df1</span>.<span class="nv">index</span><span class="ss">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This is the simple way of adding a new column: <code>df['e'] = e</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-make-a-class-json-serializable/" class="u-url">How to make a class JSON serializable</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-make-a-class-json-serializable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:47:57+08:00" itemprop="datePublished" title="2023-02-17 03:47">2023-02-17 03:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How to make a Python class serializable?</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">FileItem:</span>
    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>, <span class="n">fname</span>):
        <span class="nb">self</span>.<span class="n">fname</span> = <span class="n">fname</span>
</pre></div>

<p>Attempt to serialize to JSON:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">json</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">FileItem</span><span class="p">(</span><span class="s1">'/foo/bar'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">Object</span> <span class="n">of</span> <span class="nb">type</span> <span class="s1">'FileItem'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">JSON</span> <span class="n">serializable</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Do you have an idea about the expected output? For example, will this do?</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; f  = FileItem("/foo/bar")
&gt;&gt;&gt; magic(f)
'{"fname": "/foo/bar"}'
</pre></div>

<p>In that case you can merely call <code>json.dumps(f.__dict__)</code>.</p>
<p>If you want more customized output then you will have to subclass
<code>JSONEncoder</code> and implement your own custom serialization.</p>
<p>For a trivial example, see below.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">JSONEncoder</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">MyEncoder</span><span class="p">(</span><span class="n">JSONEncoder</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">MyEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="s1">'{"fname": "/foo/bar"}'</span>
</pre></div>

<p>Then you pass this class into the <code>json.dumps()</code> method as <code>cls</code> kwarg:</p>
<div class="code"><pre class="code literal-block">json.dumps(cls=MyEncoder)
</pre></div>

<p>If you also want to decode then you'll have to supply a custom <code>object_hook</code>
to the <code>JSONDecoder</code> class. For example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">(</span><span class="nv">json_object</span><span class="ss">)</span>:
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="s1">'fname'</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">json_object</span>:
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nv">FileItem</span><span class="ss">(</span><span class="nv">json_object</span>[<span class="s1">'fname'</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">JSONDecoder</span><span class="ss">(</span><span class="nv">object_hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">)</span>.<span class="nv">decode</span><span class="ss">(</span><span class="s1">'{"fname": "/foo/bar"}'</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span>
<span class="o">&lt;</span><span class="nv">__main__</span>.<span class="nv">FileItem</span><span class="w"> </span><span class="nv">object</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="mi">0</span><span class="nv">x9337fac</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Do you have an idea about the expected output? For example, will this do?</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; f  = FileItem("/foo/bar")
&gt;&gt;&gt; magic(f)
'{"fname": "/foo/bar"}'
</pre></div>

<p>In that case you can merely call <code>json.dumps(f.__dict__)</code>.</p>
<p>If you want more customized output then you will have to subclass
<code>JSONEncoder</code> and implement your own custom serialization.</p>
<p>For a trivial example, see below.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">JSONEncoder</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">MyEncoder</span><span class="p">(</span><span class="n">JSONEncoder</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">MyEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="s1">'{"fname": "/foo/bar"}'</span>
</pre></div>

<p>Then you pass this class into the <code>json.dumps()</code> method as <code>cls</code> kwarg:</p>
<div class="code"><pre class="code literal-block">json.dumps(cls=MyEncoder)
</pre></div>

<p>If you also want to decode then you'll have to supply a custom <code>object_hook</code>
to the <code>JSONDecoder</code> class. For example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">(</span><span class="nv">json_object</span><span class="ss">)</span>:
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="s1">'fname'</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">json_object</span>:
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nv">FileItem</span><span class="ss">(</span><span class="nv">json_object</span>[<span class="s1">'fname'</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">JSONDecoder</span><span class="ss">(</span><span class="nv">object_hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">)</span>.<span class="nv">decode</span><span class="ss">(</span><span class="s1">'{"fname": "/foo/bar"}'</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span>
<span class="o">&lt;</span><span class="nv">__main__</span>.<span class="nv">FileItem</span><span class="w"> </span><span class="nv">object</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="mi">0</span><span class="nv">x9337fac</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-copy-a-version-of-a-single-file-from-one-git-branch-to-another/" class="u-url">How do I copy a version of a single file from one Git branch to another?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-copy-a-version-of-a-single-file-from-one-git-branch-to-another/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:47:31+08:00" itemprop="datePublished" title="2023-02-17 03:47">2023-02-17 03:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've got two branches that are fully merged together.</p>
<p>However, after the merge is done, I realise that one file has been messed up
by the merge (someone else did an auto-format, gah), and it would just be
easier to change to the new version in the other branch, and then reinsert my
one line change after bringing it over into my branch.</p>
<p>So what's the easiest way in Git to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Run this from the branch where you want the file to end up:</p>
<div class="code"><pre class="code literal-block">git checkout otherbranch myfile.txt
</pre></div>

<p>General formulas:</p>
<div class="code"><pre class="code literal-block">git checkout &lt;commit_hash&gt; &lt;relative_path_to_file_or_dir&gt;
git checkout &lt;remote_name&gt;/&lt;branch_name&gt; &lt;file_or_dir&gt;
</pre></div>

<p>Some notes (from comments):</p>
<ul>
<li>Using the commit hash, you can pull files from any commit</li>
<li>This works for files and directories</li>
<li>Overwrites the file <code>myfile.txt</code> and <code>mydir</code>
</li>
<li>Wildcards don't work, but relative paths do</li>
<li>Multiple paths can be specified</li>
</ul>
<p>An alternative:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="nv">commit_id</span>:<span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">file</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">file</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I would use <code>git restore</code> (available since Git 2.23):</p>
<div class="code"><pre class="code literal-block">git restore --source otherbranch path/to/myfile.txt
</pre></div>

<hr>
<p>Why is this better than other options?</p>
<ul>
<li>by default <code>git restore</code> modifies files only in the working directory</li>
</ul>
<p><code>git checkout otherbranch -- path/to/myfile.txt</code> copies the file to the
working directory (your files on disk) but also to the staging area. It has
the same effect as if you copied the file manually and executed <code>git add</code> on
it. <code>git restore</code> by default changes only the working directory.</p>
<p>To get the same result as for <code>git checkout otherbranch -- path/to/myfile.txt</code>
you can write <code>git restore --source otherbranch --staged --worktree
path/to/myfile.txt</code></p>
<ul>
<li>by default <code>git restore</code> deletes files from the working directory when they are absent in the other branch</li>
</ul>
<p><code>git restore</code> can be used to restore the whole folder with <code>git restore
--source otherbranch path/to/dir</code>. You can do a similar operation with <code>git
checkout</code> but <code>git restore</code> by default will delete files that are absent in
<code>otherbranch</code>. To get <code>git checkout</code> behaviour use <code>--overlay</code> option.</p>
<p>For example, if there are fewer files on <code>otherbranch</code> than in the current
working directory (and these files are <em>tracked</em> ) without <code>--overlay</code> option
<code>git restore</code> will delete them. But this is a good default behaviour because
you most likely want the state of the directory to be "the same as
<code>otherbranch</code>", not "the same as <code>otherbranch</code> but with additional files from
my current branch".</p>
<p>To get the same result as for <code>git checkout otherbranch -- path/to/dir</code> you
can write <code>git restore --source otherbranch --staged --worktree --overlay
path/to/dir</code></p>
<ul>
<li>
<code>git restore</code> doesn't use shell redirection to create file (Powershell only problem)</li>
</ul>
<p><code>git show otherbranch:path/to/myfile.txt &gt; path/to/myfile.txt</code> uses standard
shell redirection. If you use PowerShell then there might be problem with text
encoding or could result in a corrupt file if it's binary. With <code>git restore</code>
changing files is done all by the <code>git</code> executable.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-318.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-316.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
