<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2399) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2399.html">
<link rel="prev" href="index-2400.html" type="text/html">
<link rel="next" href="index-2398.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-put-a-variables-value-inside-a-string-interpolate-it-into-the-string/" class="u-url">How do I put a variable’s value inside a string (interpolate it into the string)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-put-a-variables-value-inside-a-string-interpolate-it-into-the-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T13:15:08+08:00" itemprop="datePublished" title="2023-03-04 13:15">2023-03-04 13:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would like to put an <code>int</code> into a <code>string</code>. This is what I am doing at the
moment:</p>
<div class="code"><pre class="code literal-block">num = 40
plot.savefig('hanning40.pdf') #problem line
</pre></div>

<p>I have to run the program for several different numbers, so I'd like to do a
loop. But inserting the variable like this doesn't work:</p>
<div class="code"><pre class="code literal-block">plot.savefig('hanning', num, '.pdf')
</pre></div>

<p>How do I insert a variable into a Python string?</p>
<hr>
<h4>See also</h4>
<p>If you tried using <code>+</code> to concatenate a number with a string (or between
strings, etc.) and got an error message, see How can I concatenate str and int
objects?.</p>
<p>If you are trying to assemble a URL with variable data, <em>do not</em> use ordinary
string formatting, because it is error-prone and more difficult than
necessary. Specialized tools are available. See Add params to given URL in
Python.</p>
<p>If you are trying to assemble a SQL query, <strong>do not</strong> use ordinary string
formatting, because it is a <strong>major security risk</strong>. This is the cause of "SQL
injection" which costs real companies huge amounts of money every year. See
for example Python: best practice and securest way to connect to MySQL and
execute queries for proper techniques.</p>
<p>If you just want to <code>print</code> (output) the string, you can prepare it this way
first, <strong>or</strong> if you don't need the string for anything else, print each piece
of the output individually using a single call to <code>print</code>. See How can I print
multiple things (fixed text and/or variable values) on the same line, all at
once? for details on both approaches.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">plot.savefig('hanning(%d).pdf' % num)
</pre></div>

<p>The <code>%</code> operator, when following a string, allows you to insert values into
that string via format codes (the <code>%d</code> in this case). For more details, see
the Python documentation:</p>
<p><code>printf</code>-style String Formatting</p>
<p><br></p>
<h3>Suggest</h3>
<p>With the introduction of formatted string literals ("f-strings" for short) in
Python 3.6, it is now possible to write this with a briefer syntax:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; name = "Fred"
&gt;&gt;&gt; f"He said his name is {name}."
'He said his name is Fred.'
</pre></div>

<p>With the example given in the question, it would look like this</p>
<div class="code"><pre class="code literal-block">plot.savefig(f'hanning{num}.pdf')
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/android-how-to-limit-width-of-textview-and-add-three-dots-at-the-end-of-text/" class="u-url">Android, How to limit width of TextView (and add three dots at the end of text)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/android-how-to-limit-width-of-textview-and-add-three-dots-at-the-end-of-text/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T13:11:12+08:00" itemprop="datePublished" title="2023-03-04 13:11">2023-03-04 13:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a <code>TextView</code> that I want to limit characters of it. Actually, I can do
this but the thing that I'm looking for is how to add three dots (...) at the
end of string. This one shows the text has continue. This is my XML but there
is no dots although it limit my text.</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">TextView</span><span class="w"> </span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">id</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="ss">"@+id/tvFixture"</span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">layout_width</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="ss">"wrap_content"</span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">layout_height</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="ss">"wrap_content"</span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">layout_toLeftOf</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="ss">"@id/ivFixture_Guest"</span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="nc">text</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="ss">"@string/test_06"</span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">lines</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="ss">"1"</span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">ems</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="ss">"3"</span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">gravity</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="ss">"right"</span>
<span class="w">        </span><span class="n">style</span><span class="w">                           </span><span class="o">=</span><span class="w"> </span><span class="ss">"@style/simpletopic.black"</span><span class="w"> </span>
<span class="w">        </span><span class="nl">android</span><span class="p">:</span><span class="n">ellipsize</span><span class="o">=</span><span class="ss">"end"</span><span class="o">/&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>Deprecated:</strong></p>
<p>Add one more property <code>android:singleLine="true"</code> in your Textview</p>
<p><strong>Updated:</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">android</span><span class="o">:</span><span class="n">ellipsize</span><span class="o">=</span><span class="s2">"end"</span><span class="w"> </span>
<span class="n">android</span><span class="o">:</span><span class="n">maxLines</span><span class="o">=</span><span class="s2">"1"</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The following is what I learned by playing around with various options for
forcing a <code>TextView</code> to a single line (with and without the three dots).</p>
<p><img alt="enter image description here" src="images/wlG9y.png"></p>
<h2>android:maxLines="1"</h2>
<div class="code"><pre class="code literal-block">&lt;TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:text="one two three four five six seven eight nine ten" /&gt;
</pre></div>

<p>This just forces the text to one line. Any extra text is hidden.</p>
<p>Related:</p>
<ul>
<li>android:maxLines</li>
<li>android:singleLine (Note this and this)</li>
<li>android:lines</li>
</ul>
<h2>ellipsize="end"</h2>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="nv">TextView</span>
<span class="w">    </span><span class="nv">android</span>:<span class="nv">layout_width</span><span class="o">=</span><span class="s2">"wrap_content"</span>
<span class="w">    </span><span class="nv">android</span>:<span class="nv">layout_height</span><span class="o">=</span><span class="s2">"wrap_content"</span>
<span class="w">    </span><span class="nv">android</span>:<span class="nv">maxLines</span><span class="o">=</span><span class="s2">"1"</span>
<span class="w">    </span><span class="nv">android</span>:<span class="nv">ellipsize</span><span class="o">=</span><span class="s2">"end"</span>
<span class="w">    </span><span class="nv">android</span>:<span class="nv">text</span><span class="o">=</span><span class="s2">"one two three four five six seven eight nine ten"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<p>This cuts off the text that doesn't fit but lets users know that the text has
been truncated by adding an ellipsis (the three dots).</p>
<p>Related:</p>
<ul>
<li>ellipsize="start" (...aaabbbccc)</li>
<li>ellipsize="middle" (aaa...ccc)</li>
<li>android: Ellipsise , meaning of the options</li>
</ul>
<h2>ellipsize="marquee"</h2>
<div class="code"><pre class="code literal-block">&lt;TextView
    android:id="@+id/MarqueeText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:singleLine="true"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:text="one two three four five six seven eight nine ten" /&gt;
</pre></div>

<p>This makes the text scroll automatically across the TextView. Note that
sometimes it needs to be set in code:</p>
<div class="code"><pre class="code literal-block">textView.setSelected(true);
</pre></div>

<p>Supposedly <code>android:maxLines="1"</code> and <code>android:singleLine="true"</code> should do
basically the same thing and since singleLine is apparently deprecated I would
prefer not to use it, but when I take it out, the marquee doesn't scroll
anymore. Taking <code>maxLines</code> out doesn't affect it, though.</p>
<p>Related:</p>
<ul>
<li>Marquee text in Android</li>
</ul>
<h2>HorizontalScrollView with scrollHorizontally</h2>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;HorizontalScrollView</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="w">    </span><span class="na">android:id=</span><span class="s">"@+id/horizontalScrollView"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;TextView</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="w">        </span><span class="na">android:maxLines=</span><span class="s">"1"</span>
<span class="w">        </span><span class="na">android:scrollHorizontally=</span><span class="s">"true"</span>
<span class="w">        </span><span class="na">android:text=</span><span class="s">"one two three four five six seven eight nine ten"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/HorizontalScrollView&gt;</span>
</pre></div>

<p>This allows the user to manually scroll to see the whole line of text.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/cannot-download-docker-images-behind-a-proxy/" class="u-url">Cannot download Docker images behind a proxy</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/cannot-download-docker-images-behind-a-proxy/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T13:09:28+08:00" itemprop="datePublished" title="2023-03-04 13:09">2023-03-04 13:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I installed Docker on my Ubuntu 13.10 (Saucy Salamander) and when I type in my
console:</p>
<div class="code"><pre class="code literal-block">sudo docker pull busybox
</pre></div>

<p>I get the following error:</p>
<div class="code"><pre class="code literal-block">Pulling repository busybox
2014/04/16 09:37:07 Get https://index.docker.io/v1/repositories/busybox/images: dial tcp: lookup index.docker.io on 127.0.1.1:53: no answer from server
</pre></div>

<p>Docker version:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>sudo<span class="w"> </span>docker<span class="w"> </span>version

Client<span class="w"> </span>version:<span class="w"> </span><span class="m">0</span>.10.0
Client<span class="w"> </span>API<span class="w"> </span>version:<span class="w"> </span><span class="m">1</span>.10
Go<span class="w"> </span>version<span class="w"> </span><span class="o">(</span>client<span class="o">)</span>:<span class="w"> </span>go1.2.1
Git<span class="w"> </span>commit<span class="w"> </span><span class="o">(</span>client<span class="o">)</span>:<span class="w"> </span>dc9c28f
Server<span class="w"> </span>version:<span class="w"> </span><span class="m">0</span>.10.0
Server<span class="w"> </span>API<span class="w"> </span>version:<span class="w"> </span><span class="m">1</span>.10
Git<span class="w"> </span>commit<span class="w"> </span><span class="o">(</span>server<span class="o">)</span>:<span class="w"> </span>dc9c28f
Go<span class="w"> </span>version<span class="w"> </span><span class="o">(</span>server<span class="o">)</span>:<span class="w"> </span>go1.2.1
Last<span class="w"> </span>stable<span class="w"> </span>version:<span class="w"> </span><span class="m">0</span>.10.0
</pre></div>

<p>I am behind a proxy server with no authentication, and this is my
<code>/etc/apt/apt.conf</code> file:</p>
<div class="code"><pre class="code literal-block"><span class="nt">Acquire</span><span class="p">::</span><span class="nd">http</span><span class="p">::</span><span class="nd">proxy</span><span class="w"> </span><span class="s2">"http://192.168.1.1:3128/"</span><span class="o">;</span>
<span class="nt">Acquire</span><span class="p">::</span><span class="nd">https</span><span class="p">::</span><span class="nd">proxy</span><span class="w"> </span><span class="s2">"https://192.168.1.1:3128/"</span><span class="o">;</span>
<span class="nt">Acquire</span><span class="p">::</span><span class="nd">ftp</span><span class="p">::</span><span class="nd">proxy</span><span class="w"> </span><span class="s2">"ftp://192.168.1.1:3128/"</span><span class="o">;</span>
<span class="nt">Acquire</span><span class="p">::</span><span class="nd">socks</span><span class="p">::</span><span class="nd">proxy</span><span class="w"> </span><span class="s2">"socks://192.168.1.1:3128/"</span><span class="o">;</span>
</pre></div>

<p>What am I doing wrong?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here is a link to the official Docker documentation for proxy HTTP:
https://docs.docker.com/config/daemon/systemd/#httphttps-proxy</p>
<p>A quick outline:</p>
<p>First, create a systemd drop-in directory for the Docker service:</p>
<div class="code"><pre class="code literal-block">mkdir /etc/systemd/system/docker.service.d
</pre></div>

<p>Now create a file called <code>/etc/systemd/system/docker.service.d/http-
proxy.conf</code> that adds the <code>HTTP_PROXY</code> and <code>HTTPS_PROXY</code> environment
variables:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Service]</span>
<span class="na">Environment</span><span class="o">=</span><span class="s">"HTTP_PROXY=http://proxy.example.com:80/"</span>
<span class="na">Environment</span><span class="o">=</span><span class="s">"HTTPS_PROXY=http://proxy.example.com:80/"</span>
</pre></div>

<p>If you have internal Docker registries that you need to contact without
proxying you can specify them via the <code>NO_PROXY</code> environment variable:</p>
<div class="code"><pre class="code literal-block"><span class="n">Environment</span><span class="o">=</span><span class="s">"HTTP_PROXY=http://proxy.example.com:80/"</span>
<span class="n">Environment</span><span class="o">=</span><span class="s">"HTTPS_PROXY=http://proxy.example.com:80/"</span>
<span class="n">Environment</span><span class="o">=</span><span class="s">"NO_PROXY=localhost,127.0.0.0/8,docker-registry.somecorporation.com"</span>
</pre></div>

<p>Flush changes:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
</pre></div>

<p>Verify that the configuration has been loaded:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>show<span class="w"> </span>--property<span class="w"> </span>Environment<span class="w"> </span>docker
<span class="nv">Environment</span><span class="o">=</span><span class="nv">HTTP_PROXY</span><span class="o">=</span>http://proxy.example.com:80/
<span class="nv">Environment</span><span class="o">=</span><span class="nv">HTTPS_PROXY</span><span class="o">=</span>http://proxy.example.com:80/
</pre></div>

<p>Restart Docker:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</pre></div>

<hr>
<p>Footnote regarding <code>HTTP_PROXY</code> vs. <code>HTTPS_PROXY</code>: for a long time, setting
<code>HTTP_PROXY</code> alone has been good enough. But with version 20.10.8, Docker has
moved on to Go 1.16, which changes the semantics of this variable:
https://golang.org/doc/go1.16#net/http<br>
For <code>https://</code> URLs, the proxy is now determined by the <code>HTTPS_PROXY</code>
variable, with no fallback on <code>HTTP_PROXY</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Your APT proxy settings are not related to Docker.</p>
<p>Docker uses the HTTP_PROXY environment variable, if present. For example:</p>
<div class="code"><pre class="code literal-block">sudo HTTP_PROXY=http://192.168.1.1:3128/ docker pull busybox
</pre></div>

<p>But instead, I suggest you have a look at your
<code>/etc/default/docker</code>configuration file: you should have a line to uncomment
(and maybe adjust) to get your proxy settings applied automatically. Then
restart the Docker server:</p>
<div class="code"><pre class="code literal-block">service docker restart
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2400.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2398.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
