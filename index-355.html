<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 355) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-355.html">
<link rel="prev" href="index-356.html" type="text/html">
<link rel="next" href="index-354.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-the-data-received-in-a-flask-request/" class="u-url">Get the data received in a Flask request</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-the-data-received-in-a-flask-request/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:45:08+08:00" itemprop="datePublished" title="2023-02-17 04:45">2023-02-17 04:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to be able to get the data sent to my Flask app. I've tried accessing
<code>request.data</code> but it is an empty string. How do you access request data?</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">parse_request</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>  <span class="c1"># data is empty</span>
    <span class="c1"># need posted data here</span>
</pre></div>

<hr>
<p>The answer to this question led me to ask Get raw POST body in Python Flask
regardless of Content-Type header next, which is about getting the raw data
rather than the parsed data.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The docs describe the attributes available on the <code>request</code> object (<code>from
flask import request</code>) during a request. In most common cases <code>request.data</code>
will be empty because it's used as a fallback:</p>
<blockquote>
<p><code>request.data</code> Contains the incoming request data as string in case it came
with a mimetype Flask does not handle.</p>
</blockquote>
<ul>
<li>
<code>request.args</code>: the key/value pairs in the URL query string</li>
<li>
<code>request.form</code>: the key/value pairs in the body, from a HTML post form, or JavaScript request that isn't JSON encoded</li>
<li>
<code>request.files</code>: the files in the body, which Flask keeps separate from <code>form</code>. HTML forms must use <code>enctype=multipart/form-data</code> or files will not be uploaded.</li>
<li>
<code>request.values</code>: combined <code>args</code> and <code>form</code>, preferring <code>args</code> if keys overlap</li>
<li>
<code>request.json</code>: parsed JSON data. The request must have the <code>application/json</code> content type, or use <code>request.get_json(force=True)</code> to ignore the content type.</li>
</ul>
<p>All of these are <code>MultiDict</code> instances (except for <code>json</code>). You can access
values using:</p>
<ul>
<li>
<code>request.form['name']</code>: use indexing if you know the key exists</li>
<li>
<code>request.form.get('name')</code>: use <code>get</code> if the key might not exist</li>
<li>
<code>request.form.getlist('name')</code>: use <code>getlist</code> if the key is sent multiple times and you want a list of values. <code>get</code> only returns the first value.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>For URL query parameters, use <code>request.args</code>.</p>
<div class="code"><pre class="code literal-block">search = request.args.get("search")
page = request.args.get("page")
</pre></div>

<p>For posted form input, use <code>request.form</code>.</p>
<div class="code"><pre class="code literal-block">email = request.form.get('email')
password = request.form.get('password')
</pre></div>

<p>For JSON posted with content type <code>application/json</code>, use
<code>request.get_json()</code>.</p>
<div class="code"><pre class="code literal-block">data = request.get_json()
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception/" class="u-url">How to resolve java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:44:40+08:00" itemprop="datePublished" title="2023-02-17 04:44">2023-02-17 04:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have some code that uses JAXB API classes which have been provided as a part
of the JDK in Java 6/7/8. When I run the same code with Java 9, at runtime I
get errors indicating that JAXB classes can not be found.</p>
<p>The JAXB classes have been provided as a part of the JDK since Java 6, so why
can Java 9 no longer find these classes?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The JAXB APIs are considered to be Java EE APIs and therefore are no longer
contained on the default classpath in Java SE 9. In Java 11, they are
completely removed from the JDK.</p>
<p>Java 9 introduces the concepts of modules, and by default, the <code>java.se</code>
aggregate module is available on the classpath (or rather, module-path). As
the name implies, the <code>java.se</code> aggregate module does <em>not</em> include the Java
EE APIs that have been traditionally bundled with Java 6/7/8.</p>
<p>Fortunately, these Java EE APIs that were provided in JDK 6/7/8 are still in
the JDK, but they just aren't on the classpath by default. The extra Java EE
APIs are provided in the following modules:</p>
<div class="code"><pre class="code literal-block"><span class="n">java.activation</span>
<span class="n">java.corba</span>
<span class="n">java.transaction</span>
<span class="n">java.xml.bind  &lt;&lt; This one contains the JAXB APIs</span>
<span class="n">java.xml.ws</span>
<span class="n">java.xml.ws.annotation</span>
</pre></div>

<p><strong>Quick and dirty solution: (JDK 9/10 only)</strong></p>
<p>To make the JAXB APIs available at runtime, specify the following command-line
option:</p>
<p><code>--add-modules java.xml.bind</code></p>
<p><strong>But I still need this to work with Java 8!!!</strong></p>
<p>If you try specifying <code>--add-modules</code> with an older JDK, it will blow up
because it's an unrecognized option. I suggest one of two options:</p>
<ol>
<li>You can set any Java 9+ only options using the <code>JDK_JAVA_OPTIONS</code> environment variable. This environment variable is automatically read by the <code>java</code> launcher for Java 9+.</li>
<li>You can add the <code>-XX:+IgnoreUnrecognizedVMOptions</code> to make the JVM silently ignore unrecognized options, instead of blowing up. But beware! Any other command-line arguments you use will no longer be validated for you by the JVM. This option works with Oracle/OpenJDK as well as IBM JDK (as of JDK 8sr4).</li>
</ol>
<hr>
<p><strong>Alternate quick solution: (JDK 9/10 only)</strong></p>
<p>Note that you can make all of the above Java EE modules available at run time
by specifying the <code>--add-modules java.se.ee</code> option. The <code>java.se.ee</code> module
is an aggregate module that includes <code>java.se.ee</code> as well as the above Java EE
API modules. Note, this <strong>doesn't work on Java 11</strong> because <code>java.se.ee</code> was
removed in Java 11.</p>
<hr>
<h3>Proper long-term solution: (JDK 9 and beyond)</h3>
<p>The Java EE API modules listed above are all marked
<code>@Deprecated(forRemoval=true)</code> because they are scheduled for removal in Java
11. So the <code>--add-module</code> approach will no longer work in Java 11 out-of-the-
box.</p>
<p>What you will need to do in Java 11 and forward is include your own copy of
the Java EE APIs on the classpath or module path. For example, you can add the
JAX-B APIs as a Maven dependency like this:</p>
<div class="code"><pre class="code literal-block"><span class="cm">&lt;!-- API, java.xml.bind module --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>jakarta.xml.bind<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>jakarta.xml.bind-api<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="cm">&lt;!-- Runtime, com.sun.xml.bind module --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.glassfish.jaxb<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>jaxb-runtime<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<p>See the JAXB Reference Implementation page for more details on JAXB.</p>
<p>For full details on Java modularity, see JEP 261: Module System</p>
<p>As of July 2022, the latest version of the bind-api and jaxb-runtime is 4.0.0.
So you can also use</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nt">&lt;version&gt;</span>4.0.0<span class="nt">&lt;/version&gt;</span>
</pre></div>

<p>...within those dependency clauses. But if you do so, the package names have
changed from <code>javax.xml.bind...</code> to <code>jakarta.xml.bind...</code>. You will need to
modify your source code to use these later versions of the JARs.</p>
<p><strong>For Gradle or Android Studio developer: (JDK 9 and beyond)</strong></p>
<p>Add the following dependencies to your <code>build.gradle</code> file:</p>
<div class="code"><pre class="code literal-block"><span class="n">dependencies {</span>
<span class="n">    // JAX-B dependencies for JDK 9+</span>
<span class="n">    implementation "jakarta.xml.bind:jakarta.xml.bind-api:2.3.2"</span>
<span class="n">    implementation "org.glassfish.jaxb:jaxb-runtime:2.3.2"</span>
<span class="n">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>In my case (spring boot fat jar) I just add the following to pom.xml.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>javax.xml.bind<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>jaxb-api<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.3.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-difference-between-two-lists-with-unique-entries/" class="u-url">Get difference between two lists with Unique Entries</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-difference-between-two-lists-with-unique-entries/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:44:11+08:00" itemprop="datePublished" title="2023-02-17 04:44">2023-02-17 04:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have two lists in Python:</p>
<div class="code"><pre class="code literal-block">temp1 = ['One', 'Two', 'Three', 'Four']
temp2 = ['One', 'Two']
</pre></div>

<p>Assuming the elements in each list are unique, I want to create a third list
with items from the first list which are not in the second list:</p>
<div class="code"><pre class="code literal-block">temp3 = ['Three', 'Four']
</pre></div>

<p>Are there any fast ways without cycles and checking?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To get elements which are in <code>temp1</code> but not in <code>temp2</code> ( <em>assuming uniqueness
of the elements in each list</em> ):</p>
<div class="code"><pre class="code literal-block">In [5]: list(set(temp1) - set(temp2))
Out[5]: ['Four', 'Three']
</pre></div>

<p>Beware that it is asymmetric :</p>
<div class="code"><pre class="code literal-block">In [5]: set([1, 2]) - set([2, 3])
Out[5]: set([1])
</pre></div>

<p>where you might expect/want it to equal <code>set([1, 3])</code>. If you do want <code>set([1,
3])</code> as your answer, you can use <code>set([1, 2]).symmetric_difference(set([2,
3]))</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The existing solutions all offer either one or the other of:</p>
<ul>
<li>Faster than O(n*m) performance.</li>
<li>Preserve order of input list.</li>
</ul>
<p>But so far no solution has both. If you want both, try this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">set</span><span class="ss">(</span><span class="nv">temp2</span><span class="ss">)</span>
<span class="nv">temp3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="nv">x</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">temp1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">s</span>]
</pre></div>

<p><strong>Performance test</strong></p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">timeit</span>
<span class="n">init</span> <span class="o">=</span> <span class="s1">'temp1 = list(range(100)); temp2 = [i * 2 for i in range(50)]'</span>
<span class="nb">print</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s1">'list(set(temp1) - set(temp2))'</span><span class="p">,</span> <span class="n">init</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">100000</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s1">'s = set(temp2);[x for x in temp1 if x not in s]'</span><span class="p">,</span> <span class="n">init</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">100000</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s1">'[item for item in temp1 if item not in temp2]'</span><span class="p">,</span> <span class="n">init</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">100000</span><span class="p">)</span>
</pre></div>

<p>Results:</p>
<div class="code"><pre class="code literal-block"><span class="mf">4.34620224079</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">ars</span><span class="err">'</span><span class="w"> </span><span class="n">answer</span>
<span class="mf">4.2770634955</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">answer</span>
<span class="mf">30.7715615392</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">matt</span><span class="w"> </span><span class="n">b</span><span class="err">'</span><span class="n">s</span><span class="w"> </span><span class="n">answer</span>
</pre></div>

<p>The method I presented as well as preserving order is also (slightly) faster
than the set subtraction because it doesn't require construction of an
unnecessary set. The performance difference would be more noticable if the
first list is considerably longer than the second and if hashing is expensive.
Here's a second test demonstrating this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">init</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="err">'</span>
<span class="err">temp1 = [str(i) for i in range(100000)]</span>
<span class="err">temp2 = [str(i * 2) for i in range(50)]</span>
<span class="s1">''</span><span class="err">'</span>
</pre></div>

<p>Results:</p>
<div class="code"><pre class="code literal-block"><span class="mf">11.3836875916</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">ars</span><span class="err">'</span><span class="w"> </span><span class="n">answer</span>
<span class="mf">3.63890368748</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">answer</span><span class="w"> </span><span class="p">(</span><span class="mf">3</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="n">faster</span><span class="err">!</span><span class="p">)</span>
<span class="mf">37.7445402279</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">matt</span><span class="w"> </span><span class="n">b</span><span class="err">'</span><span class="n">s</span><span class="w"> </span><span class="n">answer</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-356.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-354.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
