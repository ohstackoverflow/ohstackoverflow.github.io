<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 392) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-392.html">
<link rel="prev" href="index-393.html" type="text/html">
<link rel="next" href="index-391.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-call-objective-c-code-from-swift/" class="u-url">How do I call Objective-C code from Swift?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-call-objective-c-code-from-swift/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:42:50+08:00" itemprop="datePublished" title="2023-02-17 05:42">2023-02-17 05:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Swift, how does one call Objective-C code?</p>
<p>Apple mentioned that they could co-exist in one application, but does this
mean that one could technically re-use old classes made in Objective-C whilst
building new classes in Swift?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Using Objective-C Classes in Swift</h2>
<blockquote>
<p>If you have an existing class that you'd like to use, perform <strong>Step 2</strong> and
then skip to <strong>Step 5</strong>. (For some cases, I had to add an explicit <code>#import
&lt;Foundation/Foundation.h</code> to an older Objective-C File.)</p>
</blockquote>
<h4>Step 1: Add Objective-C Implementation -- .m</h4>
<p>Add a <code>.m</code> file to your class, and name it <code>CustomObject.m</code>.</p>
<h4>Step 2: Add Bridging Header</h4>
<p>When adding your <code>.m</code> file, you'll likely be hit with a prompt that looks like
this:</p>
<p><img alt='A macOS sheet-style dialog from Xcode asking if you would "like to configure
an Objective-C bridging header"' src="images/nakLZ.png"></p>
<p>Click <strong>Yes</strong>!</p>
<p>If you did not see the prompt, or accidentally deleted your bridging header,
add a new <code>.h</code> file to your project and name it <code>&lt;#YourProjectName#&gt;-Bridging-
Header.h</code>.</p>
<p>In some situations, particularly when working with Objective-C frameworks, you
don't add an Objective-C class explicitly and Xcode can't find the linker. In
this case, create your <code>.h</code> file named as mentioned above, then make sure you
link its path in your target's project settings like so:</p>
<p><img alt="An animation demonstrating the above paragraph" src="images/8LiwF.gif"></p>
<p><strong>Note:</strong></p>
<p>It's best practice to link your project using the <code>$(SRCROOT)</code> macro so that
if you move your project, or work on it with others using a remote repository,
it will still work. <code>$(SRCROOT)</code> can be thought of as the directory that
contains your .xcodeproj file. It might look like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">$(</span><span class="nv">SRCROOT</span><span class="k">)</span><span class="err">/Folder/Folder/&lt;</span><span class="c">#YourProjectName#&gt;-Bridging-Header.h</span>
</pre></div>

<h4>Step 3: Add Objective-C Header -- .h</h4>
<p>Add another <code>.h</code> file and name it <code>CustomObject.h</code>.</p>
<h4>Step 4: Build your Objective-C Class</h4>
<p>In <code>CustomObject.h</code></p>
<div class="code"><pre class="code literal-block"><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="k">@interface</span> <span class="nc">CustomObject</span> : <span class="bp">NSObject</span>

<span class="k">@property</span><span class="w"> </span><span class="p">(</span><span class="k">strong</span><span class="p">,</span><span class="w"> </span><span class="k">nonatomic</span><span class="p">)</span><span class="w"> </span><span class="kt">id</span><span class="w"> </span><span class="n">someProperty</span><span class="p">;</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">someMethod</span><span class="p">;</span>

<span class="k">@end</span>
</pre></div>

<p>In <code>CustomObject.m</code></p>
<div class="code"><pre class="code literal-block"><span class="cp">#import "CustomObject.h"</span>

<span class="k">@implementation</span> <span class="nc">CustomObject</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">someMethod</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"SomeMethod Ran"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>

<h4>Step 5: Add Class to Bridging-Header</h4>
<p>In <code>YourProject-Bridging-Header.h</code>:</p>
<div class="code"><pre class="code literal-block"><span class="c1">#import "CustomObject.h"</span>
</pre></div>

<h4>Step 6: Use your Object</h4>
<p>In <code>SomeSwiftFile.swift</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">instanceOfCustomObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CustomObject</span><span class="p">()</span>
<span class="n">instanceOfCustomObject</span><span class="o">.</span><span class="n">someProperty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hello World"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">instanceOfCustomObject</span><span class="o">.</span><span class="n">someProperty</span><span class="p">)</span>
<span class="n">instanceOfCustomObject</span><span class="o">.</span><span class="n">someMethod</span><span class="p">()</span>
</pre></div>

<p>There is no need to import explicitly; that's what the bridging header is for.</p>
<h2>Using Swift Classes in Objective-C</h2>
<h4>Step 1: Create New Swift Class</h4>
<p>Add a <code>.swift</code> file to your project, and name it <code>MySwiftObject.swift</code>.</p>
<p>In <code>MySwiftObject.swift</code>:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">Foundation</span>

<span class="nd">@objc</span><span class="p">(</span><span class="n">MySwiftObject</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MySwiftObject</span> <span class="p">:</span> <span class="n">NSObject</span> <span class="p">{</span>

    <span class="nd">@objc</span>
    <span class="n">var</span> <span class="n">someProperty</span><span class="p">:</span> <span class="n">AnyObject</span> <span class="o">=</span> <span class="s2">"Some Initializer Val"</span> <span class="k">as</span> <span class="n">NSString</span>

    <span class="n">init</span><span class="p">()</span> <span class="p">{}</span>

    <span class="nd">@objc</span>
    <span class="n">func</span> <span class="n">someFunction</span><span class="p">(</span><span class="n">someArg</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NSString</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">"You sent me \(someArg)"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h4>Step 2: Import Swift Files to ObjC Class</h4>
<p>In <code>SomeRandomClass.m</code>:</p>
<div class="code"><pre class="code literal-block"><span class="c1">#import "&lt;#YourProjectName#&gt;-Swift.h"</span>
</pre></div>

<p>The file:<code>&lt;#YourProjectName#&gt;-Swift.h</code> should already be created automatically
in your project, even if you can not see it.</p>
<h4>Step 3: Use your class</h4>
<div class="code"><pre class="code literal-block"><span class="n">MySwiftObject</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">myOb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">MySwiftObject</span><span class="w"> </span><span class="n">new</span><span class="p">];</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"MyOb.someProperty: %@"</span><span class="p">,</span><span class="w"> </span><span class="n">myOb</span><span class="p">.</span><span class="n">someProperty</span><span class="p">);</span>
<span class="n">myOb</span><span class="p">.</span><span class="n">someProperty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@"Hello World"</span><span class="p">;</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@"MyOb.someProperty: %@"</span><span class="p">,</span><span class="w"> </span><span class="n">myOb</span><span class="p">.</span><span class="n">someProperty</span><span class="p">);</span>

<span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">retString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">myOb</span><span class="w"> </span><span class="n">someFunctionWithSomeArg</span><span class="o">:</span><span class="s">@"Arg"</span><span class="p">];</span>

<span class="n">NSLog</span><span class="p">(</span><span class="s">@"RetString: %@"</span><span class="p">,</span><span class="w"> </span><span class="n">retString</span><span class="p">);</span>
</pre></div>

<h3>Notes:</h3>
<ol>
<li>
<p>If Code Completion isn't behaving as you expect, try running a quick build with <code>⌘``⇧``R</code> to help Xcode find some of the Objective-C code from a Swift context and vice versa. </p>
</li>
<li>
<p>If you add a <code>.swift</code> file to an older project and get the error <code>dyld: Library not loaded: @rpath/libswift_stdlib_core.dylib</code>, try completely restarting Xcode.</p>
</li>
<li>
<p>While it was originally possible to use pure Swift classes (Not descendents of <code>NSObject</code>) which are visible to Objective-C by using the <code>@objc</code> prefix, this is no longer possible. Now, to be visible in Objective-C, the Swift object must either be a class conforming to <code>NSObjectProtocol</code> (easiest way to do this is to inherit from <code>NSObject</code>), or to be an <code>enum</code> marked <code>@objc</code> with a raw value of some integer type like <code>Int</code>. You may view the edit history for an example of Swift 1.x code using <code>@objc</code> without these restrictions.</p>
</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>See Apple's guide to Using Swift with Cocoa and Objective-C. This guide covers
how to use Objective-C and C code from Swift and vice versa and has
recommendations for how to convert a project or mix and match Objective-C/C
and Swift parts in an existing project.</p>
<p>The compiler automatically generates Swift syntax for calling C functions and
Objective-C methods. As seen in the documentation, this Objective-C:</p>
<div class="code"><pre class="code literal-block"><span class="bp">UITableView</span><span class="w"> </span><span class="o">*</span><span class="n">myTableView</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="bp">UITableView</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithFrame</span><span class="o">:</span><span class="n">CGRectZero</span><span class="w"> </span><span class="n">style</span><span class="o">:</span><span class="n">UITableViewStyleGrouped</span><span class="p">];</span>
</pre></div>

<p>turns into this Swift code:</p>
<div class="code"><pre class="code literal-block">let myTableView: UITableView = UITableView(frame: CGRectZero, style: .Grouped)
</pre></div>

<p>Xcode also does this translation on the fly — you can use Open Quickly while
editing a Swift file and type an Objective-C class name, and it'll take you to
a Swift-ified version of the class header. (You can also get this by cmd-
clicking on an API symbol in a Swift file.) And all the API reference
documentation in the iOS 8 and OS X v10.10 (Yosemite) developer libraries is
visible in both Objective-C and Swift forms (e.g. <code>UIView</code>).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/no-access-control-allow-origin-header-is-present-on-the-requested-resource-when-trying-to-get-data-from-a-rest-api/" class="u-url">No 'Access-Control-Allow-Origin' header is present on the requested resource—when trying to get data from a REST API</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/no-access-control-allow-origin-header-is-present-on-the-requested-resource-when-trying-to-get-data-from-a-rest-api/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:41:53+08:00" itemprop="datePublished" title="2023-02-17 05:41">2023-02-17 05:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to fetch some data from the REST API of HP Alm. It works pretty
well with a small curl script—I get my data.</p>
<p>Now doing that with JavaScript, fetch and ES6 (more or less) seems to be a
bigger issue. I keep getting this error message:</p>
<blockquote>
<p>Fetch API cannot load . Response to preflight request doesn't pass access
control check: No 'Access-Control-Allow-Origin' header is present on the
requested resource. Origin 'http://127.0.0.1:3000' is therefore not allowed
access. The response had HTTP status code 501. If an opaque response serves
your needs, set the request's mode to 'no-cors' to fetch the resource with
CORS disabled.</p>
</blockquote>
<p>I understand that this is because I am trying to fetch that data from within
my localhost and the solution should be using Cross-Origin Resource Sharing
(CORS). I thought I actually did that, but somehow it either ignores what I
write in the header or the problem is something else.</p>
<p>So, is there an implementation issue? Am I doing it wrong? I can't check the
server logs unfortunately. I'm really a bit stuck here.</p>
<div class="code"><pre class="code literal-block"><span class="nt">function</span><span class="w"> </span><span class="nt">performSignIn</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="err">let</span><span class="w"> </span><span class="err">headers</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">new</span><span class="w"> </span><span class="err">Headers()</span><span class="p">;</span>

<span class="w">  </span><span class="err">headers.append('Content-Type',</span><span class="w"> </span><span class="err">'application/json')</span><span class="p">;</span>
<span class="w">  </span><span class="err">headers.append('Accept',</span><span class="w"> </span><span class="err">'application/json')</span><span class="p">;</span>

<span class="w">  </span><span class="err">headers.append('Access-Control-Allow-Origin',</span><span class="w"> </span><span class="err">'</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">:</span><span class="mi">3000</span><span class="s1">');</span>
<span class="s1">  headers.append('</span><span class="n">Access-Control-Allow-Credentials</span><span class="s1">', '</span><span class="n">true</span><span class="s1">');</span>

<span class="s1">  headers.append('</span><span class="n">GET</span><span class="s1">', '</span><span class="n">POST</span><span class="s1">', '</span><span class="n">OPTIONS</span><span class="s1">');</span>

<span class="s1">  headers.append('</span><span class="n">Authorization</span><span class="s1">', '</span><span class="n">Basic</span><span class="w"> </span><span class="s1">' + base64.encode(username + ":" + password));</span>

<span class="s1">  fetch(sign_in, {</span>
<span class="s1">      //mode: '</span><span class="n">no-cors</span><span class="s1">',</span>
<span class="s1">      credentials: '</span><span class="n">include</span><span class="s1">',</span>
<span class="s1">      method: '</span><span class="n">POST</span><span class="s1">',</span>
<span class="s1">      headers: headers</span>
<span class="s1">    })</span>
<span class="s1">    .then(response =&gt; response.json())</span>
<span class="s1">    .then(json =&gt; console.log(json))</span>
<span class="s1">    .catch(error =&gt; console.log('</span><span class="n">Authorization</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">error</span><span class="o">.</span><span class="n">message</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>

<p>I am using Chrome. I also tried using that Chrome CORS Plugin, but then I am
getting another error message:</p>
<blockquote>
<p>The value of the 'Access-Control-Allow-Origin' header in the response must
not be the wildcard '*' when the request's credentials mode is 'include'.
Origin 'http://127.0.0.1:3000' is therefore not allowed access. The
credentials mode of requests initiated by the XMLHttpRequest is controlled
by the withCredentials attribute.</p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<p>This answer covers a lot of ground, so it’s divided into three parts:</p>
<ul>
<li>How to use a CORS proxy to avoid <em>“No Access-Control-Allow-Origin header”</em> problems</li>
<li>How to avoid the CORS preflight</li>
<li>How to fix <em>“Access-Control-Allow-Origin header must not be the wildcard”</em> problems</li>
</ul>
<hr>
<p><strong>How to use a CORS proxy to avoid <em>“No Access-Control-Allow-Origin header”</em>
problems</strong></p>
<p>If you don’t control the server your frontend code is sending a request to,
and the problem with the response from that server is just the lack of the
necessary <code>Access-Control-Allow-Origin</code> header, you can still get things to
work—by making the request through a CORS proxy.</p>
<p>You can easily run your own proxy with code from https://github.com/Rob--
W/cors-anywhere/.<br>
You can also easily deploy your own proxy to Heroku in just 2-3 minutes, with
5 commands:</p>
<div class="code"><pre class="code literal-block">git clone https://github.com/Rob--W/cors-anywhere.git
cd cors-anywhere/
npm install
heroku create
git push heroku master
</pre></div>

<p>After running those commands, you’ll end up with your own CORS Anywhere server
running at, e.g., <code>https://cryptic-headland-94862.herokuapp.com/</code>.</p>
<p>Now, prefix your request URL with the URL for your proxy:</p>
<div class="code"><pre class="code literal-block">https://cryptic-headland-94862.herokuapp.com/https://example.com
</pre></div>

<p>Adding the proxy URL as a prefix causes the request to get made through your
proxy, which:</p>
<ol>
<li>Forwards the request to <code>https://example.com</code>.</li>
<li>Receives the response from <code>https://example.com</code>.</li>
<li>Adds the <code>Access-Control-Allow-Origin</code> header to the response.</li>
<li>Passes that response, with that added header, back to the requesting frontend code.</li>
</ol>
<p>The browser then allows the frontend code to access the response, because that
response with the <code>Access-Control-Allow-Origin</code> response header is what the
browser sees.</p>
<p>This works even if the request is one that triggers browsers to do a CORS
preflight <code>OPTIONS</code> request, because in that case, the proxy also sends the
<code>Access-Control-Allow-Headers</code> and <code>Access-Control-Allow-Methods</code> headers
needed to make the preflight succeed.</p>
<hr>
<p><strong>How to avoid the CORS preflight</strong></p>
<p>The code in the question triggers a CORS preflight—since it sends an
<code>Authorization</code> header.</p>
<p>https://developer.mozilla.org/docs/Web/HTTP/Access_control_CORS#Preflighted_requests</p>
<p>Even without that, the <code>Content-Type: application/json</code> header will also
trigger a preflight.</p>
<p>What “preflight” means: before the browser tries the <code>POST</code> in the code in the
question, it first sends an <code>OPTIONS</code> request to the server, to determine if
the server is opting-in to receiving a cross-origin <code>POST</code> that has
<code>Authorization</code> and <code>Content-Type: application/json</code> headers.</p>
<blockquote>
<p>It works pretty well with a small curl script - I get my data.</p>
</blockquote>
<p>To properly test with <code>curl</code>, you must emulate the preflight <code>OPTIONS</code> the
browser sends:</p>
<div class="code"><pre class="code literal-block">curl -i -X OPTIONS -H "Origin: http://127.0.0.1:3000" \
    -H 'Access-Control-Request-Method: POST' \
    -H 'Access-Control-Request-Headers: Content-Type, Authorization' \
    "https://the.sign_in.url"
</pre></div>

<p>…with <code>https://the.sign_in.url</code> replaced by whatever your actual <code>sign_in</code> URL
is.</p>
<p>The response the browser needs from that <code>OPTIONS</code> request must have headers
like this:</p>
<div class="code"><pre class="code literal-block">Access-Control-Allow-Origin:  http://127.0.0.1:3000
Access-Control-Allow-Methods: POST
Access-Control-Allow-Headers: Content-Type, Authorization
</pre></div>

<p>If the <code>OPTIONS</code> response doesn’t include those headers, the browser will stop
right there and never attempt to send the <code>POST</code> request. Also, the HTTP
status code for the response must be a 2xx—typically 200 or 204. If it’s any
other status code, the browser will stop right there.</p>
<p>The server in the question responds to the <code>OPTIONS</code> request with a 501 status
code, which apparently means it’s trying to indicate it doesn’t implement
support for <code>OPTIONS</code> requests. Other servers typically respond with a 405
“Method not allowed” status code in this case.</p>
<p>So you’ll never be able to make <code>POST</code> requests directly to that server from
your frontend JavaScript code if the server responds to that <code>OPTIONS</code> request
with a 405 or 501 or anything other than a 200 or 204 or if doesn’t respond
with those necessary response headers.</p>
<p>The way to avoid triggering a preflight for the case in the question would be:</p>
<ul>
<li>if the server didn’t require an <code>Authorization</code> request header but instead, e.g., relied on authentication data embedded in the body of the <code>POST</code> request or as a query param</li>
<li>if the server didn’t require the <code>POST</code> body to have a <code>Content-Type: application/json</code> media type but instead accepted the <code>POST</code> body as <code>application/x-www-form-urlencoded</code> with a parameter named <code>json</code> (or whatever) whose value is the JSON data</li>
</ul>
<hr>
<p><strong>How to fix <em>“Access-Control-Allow-Origin header must not be the wildcard”</em>
problems</strong></p>
<blockquote>
<p>I am getting another error message:</p>
<p>The value of the 'Access-Control-Allow-Origin' header in the response must
not be the wildcard '*' when the request's credentials mode is 'include'.
Origin '<code>http://127.0.0.1:3000</code>' is therefore not allowed access. The
credentials mode of requests initiated by the XMLHttpRequest is controlled
by the withCredentials attribute.</p>
</blockquote>
<p>For requests that have credentials, browsers won’t let your frontend
JavaScript code access the response if the value of the <code>Access-Control-Allow-
Origin</code> header is <code>*</code>. Instead the value in that case must exactly match your
frontend code’s origin, <code>http://127.0.0.1:3000</code>.</p>
<p>See <em>Credentialed requests and wildcards</em> in the MDN HTTP access control
(CORS) article.</p>
<p>If you control the server you’re sending the request to, a common way to deal
with this case is to configure the server to take the value of the <code>Origin</code>
request header, and echo/reflect that back into the value of the <code>Access-
Control-Allow-Origin</code> response header; e.g., with nginx:</p>
<div class="code"><pre class="code literal-block">add_header Access-Control-Allow-Origin $http_origin
</pre></div>

<p>But that’s just an example; other (web) server systems have similar ways to
echo origin values.</p>
<hr>
<blockquote>
<p>I am using Chrome. I also tried using that Chrome CORS Plugin</p>
</blockquote>
<p>That Chrome CORS plugin apparently just simplemindedly injects an <code>Access-
Control-Allow-Origin: *</code> header into the response the browser sees. If the
plugin were smarter, what it would be doing is setting the value of that fake
<code>Access-Control-Allow-Origin</code> response header to the actual origin of your
frontend JavaScript code, <code>http://127.0.0.1:3000</code>.</p>
<p>So avoid using that plugin, even for testing. It’s just a distraction. To test
what responses you get from the server with no browser filtering them, you’re
better off using <code>curl -H</code> as above.</p>
<hr>
<p>As far as the frontend JavaScript code for the <code>fetch(…)</code> request in the
question:</p>
<div class="code"><pre class="code literal-block"><span class="nt">headers</span><span class="p">.</span><span class="nc">append</span><span class="o">(</span><span class="s1">'Access-Control-Allow-Origin'</span><span class="o">,</span><span class="w"> </span><span class="s1">'http://localhost:3000'</span><span class="o">);</span>
<span class="nt">headers</span><span class="p">.</span><span class="nc">append</span><span class="o">(</span><span class="s1">'Access-Control-Allow-Credentials'</span><span class="o">,</span><span class="w"> </span><span class="s1">'true'</span><span class="o">);</span>
</pre></div>

<p>Remove those lines. The <code>Access-Control-Allow-*</code> headers are <em>response</em>
headers. You never want to send them in requests. The only effect of that is
to trigger a browser to do a preflight.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This error occurs when the client URL and server URL don't match, including
the port number. In this case you need to enable your service for CORS which
is cross origin resource sharing.</p>
<p>If you are hosting a Spring REST service then you can find it in the blog post
<em>CORS support in Spring Framework</em>.</p>
<p>If you are hosting service using a Node.js server then</p>
<ol>
<li>Stop the Node.js server.</li>
<li><code>npm install cors --save</code></li>
<li>
<p>Add following lines to your server.js</p>
<p>const cors=require("cors");
const corsOptions ={
   origin:'*', 
   credentials:true,            //access-control-allow-credentials:true
   optionSuccessStatus:200,
}</p>
<p>app.use(cors(corsOptions)) // Use this after the variable declaration</p>
</li>
</ol>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-change-the-name-of-an-ios-app-in-xcode/" class="u-url">How can I change the name of an iOS app in Xcode?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-change-the-name-of-an-ios-app-in-xcode/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:41:24+08:00" itemprop="datePublished" title="2023-02-17 05:41">2023-02-17 05:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I began an iPhone project the other day with a silly development code name,
and now I want to change the name of the project since it's nearly finished.
How can I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<ol>
<li>Go to <code>Targets</code> in <code>Xcode</code>.</li>
<li>
<code>Build Settings</code> on your project's target (your current development name).</li>
<li>Search for <code>Product Name</code> under <code>Packaging</code>. Change its value to what you want your new project name to be.</li>
</ol>
<p><img alt="ProductName" src="images/B4rZt.png"></p>
<p><br></p>
<h3>Suggest</h3>
<p>In new versions of Xcode ( <strong>Xcode 5 too</strong> ), to change the name of the
project, follow these simple (detailed as possible) steps:</p>
<p><strong>Note:</strong> In this example I'll change a hypothetical "Sample" name to a "Test"
one.</p>
<ol>
<li>Click twice <strong>slowly</strong> on the project root in the project navigator and then it becomes editable.</li>
</ol>
<p><img alt="Enter image description here" src="images/VqRG2.png"></p>
<ol>
<li>Rename the project.</li>
</ol>
<p><img alt="Enter image description here" src="images/zU5zS.png"></p>
<ol>
<li>After pressing <code>Enter</code> the assistant will suggest you to automatically change all project-name-related entries and will allow you to de-select some of them, if you want.</li>
</ol>
<p><img alt="Enter image description here" src="images/L85F4.png"></p>
<ol>
<li>
<p>Press 'RENAME' and Xcode will do the rest. In the meanwhile Xcode may ask you about the option of making a snapshot of the project (it is very recommendable to do so).</p>
</li>
<li>
<p>In addition to renaming the project, you may want to rename the scheme so that it matches your new project name.</p>
</li>
</ol>
<p><img alt="Enter image description here" src="images/0Xu2D.png"></p>
<ol>
<li>Repeat similar steps like 1 and 2, and press OK.</li>
</ol>
<p><img alt="Enter image description here" src="images/6HHtO.png"></p>
<p><img alt="enter image description here" src="images/MUHox.png"></p>
<ol>
<li>That's it.</li>
</ol>
<p><strong>Another scenario...</strong></p>
<p>The previous explanation was related to changing the project name, but chances
are that you only need to change the display name that appears below the app
icon in the home screen. These are the steps:</p>
<ol>
<li>
<p>In the "Supporting Files" group locate the <em>info.plist</em> (or related) file</p>
</li>
<li>
<p>Locate the "Bundle display name" key and change the value to the new name.</p>
</li>
</ol>
<p><img alt="enter image description here" src="images/HZhQq.png"></p>
<p><img alt="enter image description here" src="images/b2Rjy.png"></p>
<ol>
<li>
<p>Delete the "old" app from the simulator or any other testing device.</p>
</li>
<li>
<p>Clean and rebuild your app again.</p>
</li>
<li>
<p>That's it. You will now see the new app name in your home screen.</p>
</li>
</ol>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-393.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-391.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
