<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2220) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2220.html">
<link rel="prev" href="index-2221.html" type="text/html">
<link rel="next" href="index-2219.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-test-an-angularjs-service-from-the-console/" class="u-url">How can I test an AngularJS service from the console?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-test-an-angularjs-service-from-the-console/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T23:50:53+08:00" itemprop="datePublished" title="2023-03-03 23:50">2023-03-03 23:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a service like:</p>
<div class="code"><pre class="code literal-block"><span class="nv">angular</span>.<span class="nv">module</span><span class="ss">(</span><span class="s1">'app'</span><span class="ss">)</span>.<span class="nv">factory</span><span class="ss">(</span><span class="s1">'ExampleService'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">()</span>{
<span class="w">  </span><span class="nv">this</span>.<span class="nv">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">world</span><span class="ss">)</span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s1">'Hello '</span><span class="o">+</span><span class="nv">world</span><span class="c1">;</span>
<span class="w">  </span>}
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span><span class="c1">;</span>
}<span class="ss">)</span>
</pre></div>

<p>I would like to <strong>test it from the JavaScript console</strong> and call the function
<code>f1()</code> of the service.</p>
<p>How can I do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>TLDR: In <strong>one line</strong> the command you are looking for:</h2>
<div class="code"><pre class="code literal-block">angular.element(document.body).injector().get('serviceName')
</pre></div>

<hr>
<h4>Deep dive</h4>
<p>AngularJS uses <strong>Dependency Injection (DI)</strong> to inject services/factories into
your components,directives and other services. So what you need to do to get a
service is to get the <strong>injector</strong> of AngularJS first (the injector is
responsible for wiring up all the dependencies and providing them to
components).</p>
<p>To get the <strong>injector</strong> of your app you need to grab it from an element that
angular is handling. For example if your app is registered on the body element
you call <code>injector = angular.element(document.body).injector()</code></p>
<p>From the retrieved <code>injector</code> you can then get whatever service you like with
<code>injector.get('ServiceName')</code></p>
<p>More information on that in this answer: Can't retrieve the injector from
angular<br>
And even more here: Call AngularJS from legacy code</p>
<hr>
<p>Another useful trick to get the <code>$scope</code> of a particular element. Select the
element with the <strong>DOM inspection tool</strong> of your developer tools and then run
the following line (<code>$0</code> is always the selected element):<br><code>angular.element($0).scope()</code></p>
<p><br></p>
<h3>Suggest</h3>
<p>First of all, a modified version of your service.</p>
<h3>a )</h3>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">angular</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,[]);</span>

<span class="n">app</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="s1">'ExampleService'</span><span class="p">,</span><span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">f1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">world</span><span class="p">){</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s1">'Hello'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">world</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">});</span>
</pre></div>

<p>This returns an object, nothing to new here.</p>
<p>Now the way to get this from the console is</p>
<h3>b )</h3>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="o">$</span><span class="n">inj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">angular</span><span class="o">.</span><span class="n">injector</span><span class="p">([</span><span class="s1">'app'</span><span class="p">]);</span>
<span class="k">var</span><span class="w"> </span><span class="n">serv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="n">inj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'ExampleService'</span><span class="p">);</span>
<span class="n">serv</span><span class="o">.</span><span class="n">f1</span><span class="p">(</span><span class="s2">"World"</span><span class="p">);</span>
</pre></div>

<h3>c )</h3>
<p>One of the things you were doing there earlier was to assume that the
app.factory returns you the function itself or a new'ed version of it. Which
is not the case. In order to get a constructor you would either have to do</p>
<div class="code"><pre class="code literal-block"><span class="nv">app</span>.<span class="nv">factory</span><span class="ss">(</span><span class="s1">'ExampleService'</span>,<span class="nv">function</span><span class="ss">()</span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">function</span><span class="ss">()</span>{
<span class="w">            </span><span class="nv">this</span>.<span class="nv">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">world</span><span class="ss">)</span>{
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="s1">'Hello'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">world</span><span class="c1">;</span>
<span class="w">            </span>}
<span class="w">        </span>}<span class="c1">;</span>
<span class="w">    </span>}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>This returns an ExampleService constructor which you will next have to do a
'new' on.</p>
<p>Or alternatively,</p>
<div class="code"><pre class="code literal-block"><span class="nv">app</span>.<span class="nv">service</span><span class="ss">(</span><span class="s1">'ExampleService'</span>,<span class="nv">function</span><span class="ss">()</span>{
<span class="w">            </span><span class="nv">this</span>.<span class="nv">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">world</span><span class="ss">)</span>{
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="s1">'Hello'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">world</span><span class="c1">;</span>
<span class="w">            </span>}<span class="c1">;</span>
<span class="w">    </span>}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>This returns new ExampleService() on injection.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-am-i-suddenly-getting-a-blocked-loading-mixed-active-content-issue-in-firefox/" class="u-url">Why am I suddenly getting a "Blocked loading mixed active content" issue in Firefox?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-am-i-suddenly-getting-a-blocked-loading-mixed-active-content-issue-in-firefox/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T23:49:29+08:00" itemprop="datePublished" title="2023-03-03 23:49">2023-03-03 23:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This morning, upon upgrading my Firefox browser to the latest version (from 22
to 23), some of the key aspects of my back office (website) stopped working.</p>
<p>Looking at the Firebug log, the following errors were being reported:</p>
<div class="code"><pre class="code literal-block"><span class="n">Blocked</span><span class="w"> </span><span class="n">loading</span><span class="w"> </span><span class="n">mixed</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="s2">"http://code.jquery.com/ui/1.8.10/themes/smoothness/jquery-ui.css"</span>
<span class="n">Blocked</span><span class="w"> </span><span class="n">loading</span><span class="w"> </span><span class="n">mixed</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="s2">"http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/jquery-ui.min.js"</span><span class="err">`</span>
</pre></div>

<p>among other errors caused by the latter of the two above not being loaded.</p>
<p>What does the above mean and how do I resolve it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I found this blog post which cleared up a few things. To quote the most
relevant bit:</p>
<blockquote>
<p>Mixed Active Content is now blocked by default in Firefox 23!</p>
<p><strong>What is Mixed Content?</strong><br>
 When a user visits a page served over HTTP, their connection is open for
eavesdropping and man-in-the-middle (MITM) attacks. When a user visits a
page served over HTTPS, their connection with the web server is
authenticated and encrypted with SSL and hence safeguarded from
eavesdroppers and MITM attacks.</p>
<p>However, if an HTTPS page includes HTTP content, the HTTP portion can be
read or modified by attackers, even though the main page is served over
HTTPS. When an HTTPS page has HTTP content, we call that content “mixed”.
The webpage that the user is visiting is only partially encrypted, since
some of the content is retrieved unencrypted over HTTP. The Mixed Content
Blocker blocks certain HTTP requests on HTTPS pages.</p>
</blockquote>
<p>The resolution, in my case, was to simply ensure the <code>jquery</code> includes were as
follows (note the removal of the protocol):</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;link</span><span class="w"> </span><span class="na">rel=</span><span class="s">"stylesheet"</span><span class="w"> </span><span class="na">href=</span><span class="s">"//code.jquery.com/ui/1.8.10/themes/smoothness/jquery-ui.css"</span><span class="w"> </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script</span><span class="w"> </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="w"> </span><span class="na">src=</span><span class="s">"//ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/jquery-ui.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p><em>Note that the temporary 'fix' is to click on the 'shield' icon in the top-
left corner of the address bar and select 'Disable Protection on This Page',
although this is <strong>not</strong> recommended for obvious reasons.</em></p>
<p>UPDATE: This link from the Firefox (Mozilla) support pages is also useful in
explaining what constitutes mixed content and, as given in the above
paragraph, does actually provide details of how to display the page
regardless:</p>
<blockquote>
<p>Most websites will continue to work normally without any action on your
part.</p>
<p>If you need to allow the mixed content to be displayed, you can do that
easily:</p>
<p>Click the shield icon Mixed Content Shield in the address bar and choose
Disable Protection on This Page from the dropdown menu.</p>
<p>The icon in the address bar will change to an orange warning triangle
Warning Identity Icon to remind you that insecure content is being
displayed.</p>
<p>To revert the previous action (re-block mixed content), just reload the
page.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>It means you're calling http from https. You can use
<code>src="//url.to/script.js"</code> in your script tag and it will auto-detect.</p>
<p>Alternately you can use use https in your <code>src</code> even if you will be publishing
it to a http page. This will avoid the potential issue mentioned in the
comments.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/javascript-or-variable-assignment-explanation/" class="u-url">JavaScript OR (||) variable assignment explanation</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/javascript-or-variable-assignment-explanation/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T23:48:04+08:00" itemprop="datePublished" title="2023-03-03 23:48">2023-03-03 23:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Given this snippet of JavaScript...</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">undefined</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'five'</span><span class="p">;</span>

<span class="k">var</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>

<span class="n">alert</span><span class="p">(</span><span class="n">f</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="mi">4</span>
</pre></div>

<p>Can someone please explain to me what this technique is called (my best guess
is in the title of this question!)? And how/why it works exactly?</p>
<p>My understanding is that variable <code>f</code> will be assigned the nearest value (from
left to right) of the first variable that has a value that isn't either null
or undefined, but I've not managed to find much reference material about this
technique and have seen it used a lot.</p>
<p>Also, is this technique specific to JavaScript? I know doing something similar
in PHP would result in <code>f</code> having a true boolean value, rather than the value
of <code>d</code> itself.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>See short-circuit evaluation for the explanation. It's a common way of
implementing these operators; it is not unique to JavaScript.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is made to assign a <em>default value</em> , in this case the value of <code>y</code>, if
the <code>x</code> variable is <em>falsy</em>.</p>
<p>The boolean operators in JavaScript can return an operand, and not always a
boolean result as in other languages.</p>
<p>The Logical OR operator (<code>||</code>) returns the value of its second operand, if the
first one is falsy, otherwise the value of the first operand is returned.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block">"foo" || "bar"; // returns "foo"
false || "bar"; // returns "bar"
</pre></div>

<p><em>Falsy</em> values are those who coerce to <code>false</code> when used in boolean context,
and they are <code>0</code>, <code>null</code>, <code>undefined</code>, an empty string, <code>NaN</code> and of course
<code>false</code>.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2221.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2219.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
