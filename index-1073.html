<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1073) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1073.html">
<link rel="prev" href="index-1074.html" type="text/html">
<link rel="next" href="index-1072.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/enabling-https-on-express-js/" class="u-url">Enabling HTTPS on express.js</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/enabling-https-on-express-js/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:31:31+08:00" itemprop="datePublished" title="2023-02-18 00:31">2023-02-18 00:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to get HTTPS working on express.js for node, and I can't figure it
out.</p>
<p>This is my <code>app.js</code> code.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">'sslcert/server.key'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">'sslcert/server.crt'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">privateKey</span><span class="p">,</span><span class="w"> </span><span class="n">cert</span><span class="p">:</span><span class="w"> </span><span class="n">certificate</span><span class="p">};</span>


<span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">express</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">credentials</span><span class="p">);</span>

<span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">app</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>
</pre></div>

<p>When I run it, it seems to only respond to HTTP requests.</p>
<p>I wrote simple vanilla <code>node.js</code> based HTTPS app:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w">   </span><span class="n">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s2">"fs"</span><span class="p">),</span>
<span class="w">      </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s2">"https"</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">privateKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">'sslcert/server.key'</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>
<span class="k">var</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">'sslcert/server.crt'</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>

<span class="k">var</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">privateKey</span><span class="p">,</span><span class="w"> </span><span class="n">cert</span><span class="p">:</span><span class="w"> </span><span class="n">certificate</span><span class="p">};</span>

<span class="k">var</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">credentials</span><span class="p">,</span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">res</span><span class="o">.</span><span class="n">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="s1">'Content-Type'</span><span class="p">:</span><span class="w"> </span><span class="s1">'text/plain'</span><span class="p">});</span>
<span class="w">  </span><span class="n">res</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="s1">'Hello World</span><span class="se">\n</span><span class="s1">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8000</span><span class="p">);</span>
</pre></div>

<p>And when I run this app, it <em>does</em> respond to HTTPS requests. Note that I
don't think the toString() on the fs result matters, as I've used combinations
of both and still no es bueno.</p>
<hr>
<p>EDIT TO ADD:</p>
<p>For production systems, you're probably better off using Nginx or HAProxy to
proxy requests to your nodejs app. You can set up nginx to handle the ssl
requests and just speak http to your node app.js.</p>
<p>EDIT TO ADD (4/6/2015)</p>
<p>For systems on using AWS, you are better off using EC2 Elastic Load Balancers
to handle SSL Termination, and allow regular HTTP traffic to your EC2 web
servers. For further security, setup your security group such that only the
ELB is allowed to send HTTP traffic to the EC2 instances, which will prevent
external unencrypted HTTP traffic from hitting your machines.</p>
<hr>
<p><br><br></p>
<h2>Answer</h2>
<p>In express.js (since version 3) you should use that syntax:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">https</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'https'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">privateKey</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">'sslcert/server.key'</span><span class="p">,</span><span class="w"> </span><span class="s1">'utf8'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="s1">'sslcert/server.crt'</span><span class="p">,</span><span class="w"> </span><span class="s1">'utf8'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">privateKey</span><span class="p">,</span><span class="w"> </span><span class="n">cert</span><span class="p">:</span><span class="w"> </span><span class="n">certificate</span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">express</span><span class="p">();</span>

<span class="o">//</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">here</span>

<span class="k">var</span><span class="w"> </span><span class="n">httpServer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">app</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">httpsServer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">https</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">credentials</span><span class="p">,</span><span class="w"> </span><span class="n">app</span><span class="p">);</span>

<span class="n">httpServer</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
<span class="n">httpsServer</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">8443</span><span class="p">);</span>
</pre></div>

<p>In that way you provide express middleware to the native http/https server</p>
<p>If you want your app running on ports below 1024, you will need to use <code>sudo</code>
command (not recommended) or use a reverse proxy (e.g. nginx, haproxy).</p>
<p><br></p>
<h3>Suggest</h3>
<p>First, you need to create <strong>selfsigned.key</strong> and <strong>selfsigned.crt</strong> files. Go
to Create a Self-Signed SSL Certificate Or do following steps.</p>
<p>Go to the terminal and run the following command.</p>
<p><code>sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout
./selfsigned.key -out selfsigned.crt</code></p>
<ul>
<li>After that put the following information</li>
<li>Country Name (2 letter code) [AU]: <strong>US</strong>
</li>
<li>State or Province Name (full name) [Some-State]: <strong>NY</strong>
</li>
<li>Locality Name (eg, city) []: <strong>NY</strong>
</li>
<li>Organization Name (eg, company) [Internet Widgits Pty Ltd]: <strong>xyz (Your - Organization)</strong>
</li>
<li>Organizational Unit Name (eg, section) []: <strong>xyz (Your Unit Name)</strong>
</li>
<li>Common Name (e.g. server FQDN or YOUR name) []: <strong>www.xyz.com (Your URL)</strong>
</li>
<li>Email Address []: <strong>Your email</strong>
</li>
</ul>
<blockquote>
<p>After creation adds key &amp; cert file in your code, and pass the options to
the server.</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">https</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'https'</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3000</span><span class="p">;</span>

<span class="k">var</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="n">__dirname</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/../certs/selfsigned.key'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">cert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">readFileSync</span><span class="p">(</span><span class="n">__dirname</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'/../certs/selfsigned.crt'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="w">  </span><span class="n">cert</span><span class="p">:</span><span class="w"> </span><span class="n">cert</span>
<span class="p">};</span>

<span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">express</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">res</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">'Now using https..'</span><span class="p">);</span>
<span class="p">});</span>

<span class="k">var</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">https</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">app</span><span class="p">);</span>

<span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">port</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"server starting on port : "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">port</span><span class="p">)</span>
<span class="p">});</span>
</pre></div>

<ul>
<li>Finally run your application using <strong>https</strong>.</li>
</ul>
<blockquote>
<p>More information https://github.com/sagardere/set-up-SSL-in-nodejs</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/converting-an-integer-to-a-string-in-php/" class="u-url">Converting an integer to a string in PHP</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/converting-an-integer-to-a-string-in-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:30:40+08:00" itemprop="datePublished" title="2023-02-18 00:30">2023-02-18 00:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a way to convert an integer to a string in PHP?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the <code>strval()</code> function to convert a number to a string.</p>
<p>From a maintenance perspective its obvious what you are trying to do rather
than some of the other more esoteric answers. Of course, it depends on your
context.</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="k">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="n">Inline</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">parsing</span>
<span class="n">echo</span><span class="w"> </span><span class="s2">"I'd like {$var} waffles"</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">I</span><span class="s1">'d like 5 waffles</span>

<span class="o">//</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">concatenation</span><span class="w"> </span>
<span class="n">echo</span><span class="w"> </span><span class="s2">"I'd like "</span><span class="o">.$</span><span class="k">var</span><span class="o">.</span><span class="s2">" waffles"</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">I</span><span class="s1">'d like 5 waffles</span>

<span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">value</span><span class="o">...</span>
<span class="o">//</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">below</span>

<span class="o">//</span><span class="w"> </span><span class="n">Explicit</span><span class="w"> </span><span class="n">cast</span><span class="w"> </span>
<span class="o">$</span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">string</span><span class="p">)</span><span class="o">$</span><span class="k">var</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">$</span><span class="n">items</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"5"</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="n">Function</span><span class="w"> </span><span class="n">call</span>
<span class="o">$</span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strval</span><span class="p">(</span><span class="o">$</span><span class="k">var</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">$</span><span class="n">items</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"5"</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>There's many ways to do this.</p>
<p>Two examples:</p>
<div class="code"><pre class="code literal-block"> $str = (string) $int;
 $str = "$int";
</pre></div>

<p>See the PHP Manual on Types Juggling for more.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-best-way-to-initialize-a-javascript-date-to-midnight/" class="u-url">What is the best way to initialize a JavaScript Date to midnight?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-best-way-to-initialize-a-javascript-date-to-midnight/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:30:06+08:00" itemprop="datePublished" title="2023-02-18 00:30">2023-02-18 00:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the simplest way to obtain an instance of <code>new Date()</code> but set the
time at midnight?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>setHours</code> method can take optional <code>minutes</code>, <code>seconds</code> and <code>ms</code>
arguments, for example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="n">d</span><span class="o">.</span><span class="n">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
</pre></div>

<p>That will set the time to <code>00:00:00.000</code> of <em>your current timezone</em> , if you
want to work in UTC time, you can use the <code>setUTCHours</code> method.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Just wanted to clarify that the snippet from accepted answer gives the
<strong>nearest midnight in the past</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="n">d</span><span class="o">.</span><span class="n">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">midnight</span>
</pre></div>

<p>If you want to get the <strong>nearest midnight in future</strong> , use the following
code:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="n">d</span><span class="o">.</span><span class="n">setHours</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">midnight</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1074.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1072.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
