<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 581) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-581.html">
<link rel="prev" href="index-582.html" type="text/html">
<link rel="next" href="index-580.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-are-iloc-and-loc-different/" class="u-url">How are iloc and loc different?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-are-iloc-and-loc-different/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:31:35+08:00" itemprop="datePublished" title="2023-02-17 10:31">2023-02-17 10:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Can someone explain how these two methods of slicing are different?<br>
I've seen the docs, and I've seen these answers, but I still find myself
unable to understand how the three are different. To me, they seem
interchangeable in large part, because they are at the lower levels of
slicing.</p>
<p>For example, say we want to get the first five rows of a <code>DataFrame</code>. How is
it that these two work?</p>
<div class="code"><pre class="code literal-block">df.loc[:5]
df.iloc[:5]
</pre></div>

<p>Can someone present three cases where the distinction in uses are clearer?</p>
<hr>
<p>Once upon a time, I also wanted to know how these two functions differ from
<code>df.ix[:5]</code> but <code>ix</code> has been removed from pandas 1.0, so I don't care
anymore.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Label <em>vs.</em> Location</h3>
<p>The main distinction between the two methods is:</p>
<ul>
<li>
<p><code>loc</code> gets rows (and/or columns) with particular <strong>labels</strong>.</p>
</li>
<li>
<p><code>iloc</code> gets rows (and/or columns) at integer <strong>locations</strong>.</p>
</li>
</ul>
<p>To demonstrate, consider a series <code>s</code> of characters with a non-monotonic
integer index:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series(list("abcdef"), index=[49, 48, 47, 0, 1, 2]) 
49    a
48    b
47    c
0     d
1     e
2     f

&gt;&gt;&gt; s.loc[0]    # value at index label 0
'd'

&gt;&gt;&gt; s.iloc[0]   # value at index location 0
'a'

&gt;&gt;&gt; s.loc[0:1]  # rows at index labels between 0 and 1 (inclusive)
0    d
1    e

&gt;&gt;&gt; s.iloc[0:1] # rows at index location between 0 and 1 (exclusive)
49    a
</pre></div>

<p>Here are some of the differences/similarities between <code>s.loc</code> and <code>s.iloc</code>
when passed various objects:</p>
<object> | description | `s.loc[<object>]` | `s.iloc[<object>]`  
---|---|---|---  
`0` | single item | Value at index _label_ `0` (the string `'d'`) | Value at
index _location_ 0 (the string `'a'`)  
`0:1` | slice | **Two** rows (labels `0` and `1`) | **One** row (first row at
location 0)  
`1:47` | slice with out-of-bounds end | **Zero** rows (empty Series) |
**Five** rows (location 1 onwards)  
`1:47:-1` | slice with negative step | **three** rows (labels `1` back to
`47`) | **Zero** rows (empty Series)  
`[2, 0]` | integer list | **Two** rows with given labels | **Two** rows with
given locations  
`s &gt; 'e'` | Bool series (indicating which values have the property) | **One**
row (containing `'f'`) | `NotImplementedError`  
`(s&gt;'e').values` | Bool array | **One** row (containing `'f'`) | Same as `loc`  
`999` | int object not in index | `KeyError` | `IndexError` (out of bounds)  
`-1` | int object not in index | `KeyError` | Returns last value in `s`  
`lambda x: x.index[3]` | callable applied to series (here returning 3rd item
in index) | `s.loc[s.index[3]]` | `s.iloc[s.index[3]]`  

`loc`'s label-querying capabilities extend well-beyond integer indexes and
it's worth highlighting a couple of additional examples.

Here's a Series where the index contains string objects:



    &gt;&gt;&gt; s2 = pd.Series(s.index, index=s.values)
    &gt;&gt;&gt; s2
    a    49
    b    48
    c    47
    d     0
    e     1
    f     2


Since `loc` is label-based, it can fetch the first value in the Series using
`s2.loc['a']`. It can also slice with non-integer objects:



    &gt;&gt;&gt; s2.loc['c':'e']  # all rows lying between 'c' and 'e' (inclusive)
    c    47
    d     0
    e     1


For DateTime indexes, we don't need to pass the exact date/time to fetch by
label. For example:



    &gt;&gt;&gt; s3 = pd.Series(list('abcde'), pd.date_range('now', periods=5, freq='M')) 
    &gt;&gt;&gt; s3
    2021-01-31 16:41:31.879768    a
    2021-02-28 16:41:31.879768    b
    2021-03-31 16:41:31.879768    c
    2021-04-30 16:41:31.879768    d
    2021-05-31 16:41:31.879768    e


Then to fetch the row(s) for March/April 2021 we only need:



    &gt;&gt;&gt; s3.loc['2021-03':'2021-04']
    2021-03-31 17:04:30.742316    c
    2021-04-30 17:04:30.742316    d


## Rows and Columns

`loc` and `iloc` work the same way with DataFrames as they do with Series.
It's useful to note that both methods can address columns and rows together.

When given a tuple, the first element is used to index the rows and, if it
exists, the second element is used to index the columns.

Consider the DataFrame defined below:



    &gt;&gt;&gt; import numpy as np 
    &gt;&gt;&gt; df = pd.DataFrame(np.arange(25).reshape(5, 5),  
                          index=list('abcde'), 
                          columns=['x','y','z', 8, 9])
    &gt;&gt;&gt; df
        x   y   z   8   9
    a   0   1   2   3   4
    b   5   6   7   8   9
    c  10  11  12  13  14
    d  15  16  17  18  19
    e  20  21  22  23  24


Then for example:



    &gt;&gt;&gt; df.loc['c': , :'z']  # rows 'c' and onwards AND columns up to 'z'
        x   y   z
    c  10  11  12
    d  15  16  17
    e  20  21  22

    &gt;&gt;&gt; df.iloc[:, 3]        # all rows, but only the column at index location 3
    a     3
    b     8
    c    13
    d    18
    e    23


Sometimes we want to mix label and positional indexing methods for the rows
and columns, somehow combining the capabilities of `loc` and `iloc`.

For example, consider the following DataFrame. How best to slice the rows up
to and including 'c' _and_ take the first four columns?



    &gt;&gt;&gt; import numpy as np 
    &gt;&gt;&gt; df = pd.DataFrame(np.arange(25).reshape(5, 5),  
                          index=list('abcde'), 
                          columns=['x','y','z', 8, 9])
    &gt;&gt;&gt; df
        x   y   z   8   9
    a   0   1   2   3   4
    b   5   6   7   8   9
    c  10  11  12  13  14
    d  15  16  17  18  19
    e  20  21  22  23  24


We can achieve this result using `iloc` and the help of another method:



    &gt;&gt;&gt; df.iloc[:df.index.get_loc('c') + 1, :4]
        x   y   z   8
    a   0   1   2   3
    b   5   6   7   8
    c  10  11  12  13


`get_loc()` is an index method meaning "get the position of the label in this
index". Note that since slicing with `iloc` is exclusive of its endpoint, we
must add 1 to this value if we want row 'c' as well.

<br>
## Suggest

`iloc` works based on integer positioning. So no matter what your row labels
are, you can always, e.g., get the first row by doing



    df.iloc[0]


or the last five rows by doing



    df.iloc[-5:]


You can also use it on the columns. This retrieves the 3rd column:



    df.iloc[:, 2]    # the : in the first position indicates all rows


You can combine them to get intersections of rows and columns:



    df.iloc[:3, :3] # The upper-left 3 X 3 entries (assuming df has 3+ rows and columns)


On the other hand, `.loc` use named indices. Let's set up a data frame with
strings as row and column labels:



    df = pd.DataFrame(index=['a', 'b', 'c'], columns=['time', 'date', 'name'])


Then we can get the first row by



    df.loc['a']     # equivalent to df.iloc[0]


and the second two rows of the `'date'` column by



    df.loc['b':, 'date']   # equivalent to df.iloc[1:, 1]


and so on. Now, it's probably worth pointing out that the default row and
column indices for a `DataFrame` are integers from 0 and in this case `iloc`
and `loc` would work in the same way. This is why your three examples are
equivalent. **If you had a non-numeric index such as strings or datetimes,**
`df.loc[:5]` **would raise an error.**

Also, you can do column retrieval just by using the data frame's
`__getitem__`:



    df['time']    # equivalent to df.loc[:, 'time']


Now suppose you want to mix position and named indexing, that is, indexing
using names on rows and positions on columns (to clarify, I mean select from
our data frame, rather than creating a data frame with strings in the row
index and integers in the column index). This is where `.ix` comes in:



    df.ix[:2, 'time']    # the first two rows of the 'time' column


I think it's also worth mentioning that you can pass boolean vectors to the
`loc` method as well. For example:



     b = [True, False, True]
     df.loc[b] 


Will return the 1st and 3rd rows of `df`. This is equivalent to `df[b]` for
selection, but it can also be used for assigning via boolean vectors:



    df.loc[b, 'name'] = 'Mary', 'John'</object></object></object>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/call-child-method-from-parent/" class="u-url">Call child method from parent</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/call-child-method-from-parent/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:30:59+08:00" itemprop="datePublished" title="2023-02-17 10:30">2023-02-17 10:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have two components:</p>
<ol>
<li>Parent component</li>
<li>Child component</li>
</ol>
<p>I was trying to call Child's method from Parent, I tried this way but couldn't
get a result:</p>
<div class="code"><pre class="code literal-block">class<span class="w"> </span>Parent<span class="w"> </span>extends<span class="w"> </span>Component<span class="w"> </span>{
<span class="w">  </span>render()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>(
<span class="w">      </span><span class="nt">&lt;Child&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{Child.getAlert()}</span><span class="nt">&gt;</span>Click<span class="nt">&lt;/button&gt;</span>
<span class="w">      </span><span class="nt">&lt;/Child&gt;</span>
<span class="w">      </span>);
<span class="w">    </span>}
<span class="w">  </span>}

class<span class="w"> </span>Child<span class="w"> </span>extends<span class="w"> </span>Component<span class="w"> </span>{
<span class="w">  </span>getAlert()<span class="w"> </span>{
<span class="w">    </span>alert('clicked');
<span class="w">  </span>}

<span class="w">  </span>render()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>(
<span class="w">      </span><span class="nt">&lt;h1</span><span class="w"> </span><span class="na">ref=</span><span class="s">"hello"</span><span class="nt">&gt;</span>Hello<span class="nt">&lt;/h1&gt;</span>
<span class="w">    </span>);
<span class="w">  </span>}
}
</pre></div>

<p>Is there a way to call Child's method from Parent?</p>
<p>Note: Child and Parent components are in two different files.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>First off, let me express that this is generally <em>not</em> the way to go about
things in React land. Usually what you want to do is pass down functionality
to children in props, and pass up notifications from children in events (or
better yet: <code>dispatch</code>).</p>
<p>But if you <em>must</em> expose an imperative method on a child component, you can
use refs. Remember this is an escape hatch and usually indicates a better
design is available.</p>
<blockquote>
<p>Previously, refs were only supported for Class-based components. With the
advent of React Hooks, that's no longer the case</p>
</blockquote>
<h3>Modern React with Hooks (<code>v16.8+</code>)</h3>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">forwardRef</span><span class="p">,</span><span class="w"> </span><span class="n">useRef</span><span class="p">,</span><span class="w"> </span><span class="n">useImperativeHandle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="p">;</span>

<span class="c1">// We need to wrap component in `forwardRef` in order to gain</span>
<span class="c1">// access to the ref object that is assigned using the `ref` prop.</span>
<span class="c1">// This ref is passed as the second parameter to the function component.</span>
<span class="k">const</span><span class="w"> </span><span class="n">Child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">forwardRef</span><span class="p">((</span><span class="n">props</span><span class="p">,</span><span class="w"> </span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="c1">// The component instance will be extended</span>
<span class="w">  </span><span class="c1">// with whatever you return from the callback passed</span>
<span class="w">  </span><span class="c1">// as the second argument</span>
<span class="w">  </span><span class="n">useImperativeHandle</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span>

<span class="w">    </span><span class="n">getAlert</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">alert</span><span class="p">(</span><span class="s">"getAlert from Child"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="p">}));</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Hi</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">});</span>

<span class="k">const</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// In order to gain access to the child component instance,</span>
<span class="w">  </span><span class="c1">// you need to assign it to a `ref`, so we call `useRef()` to get one</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">childRef</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">useRef</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">ref</span><span class="o">=</span><span class="p">{</span><span class="n">childRef</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">childRef</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">getAlert</span><span class="p">()}</span><span class="o">&gt;</span><span class="n">Click</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">};</span>

<span class="n">ReactDOM</span><span class="p">.</span><span class="n">render</span><span class="p">(</span>
<span class="w">  </span><span class="o">&lt;</span><span class="n">Parent</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="n">document</span><span class="p">.</span><span class="n">getElementById</span><span class="p">(</span><span class="err">'</span><span class="n">root</span><span class="err">'</span><span class="p">)</span>
<span class="p">);</span>


<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react@16/umd/react.development.js"</span><span class="w"> </span><span class="n">crossorigin</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react-dom@16/umd/react-dom.development.js"</span><span class="w"> </span><span class="n">crossorigin</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="kt">id</span><span class="o">=</span><span class="s">"root"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>

<p>Documentation for <code>useImperativeHandle()</code> is here:</p>
<blockquote>
<p><code>useImperativeHandle</code> customizes the instance value that is exposed to
parent components when using <code>ref</code>.</p>
</blockquote>
<h3>Legacy API using Class Components (<code>&gt;= react@16.4</code>)</h3>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="p">;</span>

<span class="k">class</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="n">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">super</span><span class="p">(</span><span class="n">props</span><span class="p">);</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="p">.</span><span class="n">createRef</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">onClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">child</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">getAlert</span><span class="p">();</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">ref</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">child</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">onClick</span><span class="p">}</span><span class="o">&gt;</span><span class="n">Click</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="n">Child</span><span class="w"> </span><span class="n">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">getAlert</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="err">'</span><span class="n">getAlert</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">Child</span><span class="err">'</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Hello</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">ReactDOM</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Parent</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">getElementById</span><span class="p">(</span><span class="err">'</span><span class="n">root</span><span class="err">'</span><span class="p">));</span>


<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react@16/umd/react.development.js"</span><span class="w"> </span><span class="n">crossorigin</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react-dom@16/umd/react-dom.development.js"</span><span class="w"> </span><span class="n">crossorigin</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="kt">id</span><span class="o">=</span><span class="s">"root"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>

<h3>Callback Ref API</h3>
<p>Callback-style refs are another approach to achieving this, although not quite
as common in modern React:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">render</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReactDOM</span><span class="p">;</span>

<span class="k">class</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">ref</span><span class="o">=</span><span class="p">{</span><span class="n">instance</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span><span class="w"> </span><span class="p">}}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">getAlert</span><span class="p">();</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span><span class="n">Click</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="n">Child</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">getAlert</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s1">'clicked'</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Hello</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>


<span class="n">render</span><span class="p">(</span>
<span class="w">  </span><span class="o">&lt;</span><span class="n">Parent</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'app'</span><span class="p">)</span>
<span class="p">);</span>


<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s2">"https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react.min.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s2">"https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react-dom.min.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"app"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use another pattern here:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">setClick</span><span class="o">=</span><span class="p">{</span><span class="n">click</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">clickChild</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">click</span><span class="p">}</span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">clickChild</span><span class="p">()}</span><span class="o">&gt;</span><span class="n">Click</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="n">Child</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">(</span><span class="n">props</span><span class="p">);</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">getAlert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">getAlert</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="n">componentDidMount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">setClick</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">getAlert</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="n">getAlert</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s1">'clicked'</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">h1</span><span class="w"> </span><span class="n">ref</span><span class="o">=</span><span class="s2">"hello"</span><span class="o">&gt;</span><span class="n">Hello</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>What it does is to set the parent's <code>clickChild</code> method when child is mounted.
In this way when you click the button in parent it will call <code>clickChild</code>
which calls child's <code>getAlert</code>.</p>
<p>This also works if your child is wrapped with <code>connect()</code> so you don't need
the <code>getWrappedInstance()</code> hack.</p>
<p>Note you can't use <code>onClick={this.clickChild}</code> in parent because when parent
is rendered child is not mounted so <code>this.clickChild</code> is not assigned yet.
Using <code>onClick={() =&gt; this.clickChild()}</code> is fine because when you click the
button <code>this.clickChild</code> should already be assigned.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-cancel-a-local-git-commit/" class="u-url">How to cancel a local git commit?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-cancel-a-local-git-commit/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:30:35+08:00" itemprop="datePublished" title="2023-02-17 10:30">2023-02-17 10:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>My issue is I have changed a file e.g.: README, added a new line ' <em>this for
my testing line</em> ' and saved the file, then I issued the following commands:</p>
<div class="code"><pre class="code literal-block">git status

# On branch master
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   README
#
no changes added to commit (use "git add" and/or "git commit -a")


git add README

git commit -a -m 'To add new line to readme'
</pre></div>

<p>I didn't push the code to GitHub. Now I want to cancel this commit.</p>
<p>For this, I used</p>
<div class="code"><pre class="code literal-block">git reset --hard HEAD~1
</pre></div>

<p>But I lost the newly added line ' <em>this for my testing line</em> ' from the README
file. This should not happen. I need the content to be there. <strong>Is there a way
to retain the content and cancel my local commit?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p>Just use <code>git reset</code> without the <code>--hard</code> flag:</p>
<div class="code"><pre class="code literal-block">git reset HEAD~1
</pre></div>

<p>PS: On Unix based systems you can use <code>HEAD^</code> which is equal to <code>HEAD~1</code>. On
Windows <code>HEAD^</code> will not work because <code>^</code> signals a line continuation. So your
command prompt will just ask you <code>More?</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Use <code>--soft</code> instead of <code>--hard</code> flag.</p>
<p>Unix:</p>
<div class="code"><pre class="code literal-block">git reset --soft HEAD^
</pre></div>

<p>Windows:</p>
<div class="code"><pre class="code literal-block">git reset --soft HEAD~
</pre></div>

<p>It will remove the last local (unpushed) commit, but will keep changes you
have done.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-582.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-580.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
