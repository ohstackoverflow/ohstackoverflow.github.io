<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 205) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-205.html">
<link rel="prev" href="index-206.html" type="text/html">
<link rel="next" href="index-204.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/event-binding-on-dynamically-created-elements/" class="u-url">Event binding on dynamically created elements?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/event-binding-on-dynamically-created-elements/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:48:55+08:00" itemprop="datePublished" title="2023-02-17 00:48">2023-02-17 00:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>This question's answers are a community effort</strong>. Edit existing answers to
improve this post. It is not currently accepting new answers or interactions.</p>
<p>I have a bit of code where I am looping through all the select boxes on a page
and binding a <code>.hover</code> event to them to do a bit of twiddling with their width
on <code>mouse on/off</code>.</p>
<p>This happens on page ready and works just fine.</p>
<p>The problem I have is that any select boxes I add via Ajax or DOM after the
initial loop won't have the event bound.</p>
<p>I have found this plugin (jQuery Live Query Plugin), but before I add another
5k to my pages with a plugin, I want to see if anyone knows a way to do this,
either with jQuery directly or by another option.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>As of jQuery 1.7</strong> you should use <code>jQuery.fn.on</code> with the selector parameter
filled:</p>
<div class="code"><pre class="code literal-block">$(staticAncestors).on(eventName, dynamicChild, function() {});
</pre></div>

<p><em>Explanation:</em></p>
<p>This is called event delegation and works as followed. The event is attached
to a static parent (<code>staticAncestors</code>) of the element that should be handled.
This jQuery handler is triggered every time the event triggers on this element
or one of the descendant elements. The handler then checks if the element that
triggered the event matches your selector (<code>dynamicChild</code>). When there is a
match then your custom handler function is executed.</p>
<hr>
<p><strong>Prior to this</strong> , the recommended approach was to use <code>live()</code>:</p>
<div class="code"><pre class="code literal-block">$(selector).live( eventName, function(){} );
</pre></div>

<p>However, <code>live()</code> was deprecated in 1.7 in favour of <code>on()</code>, and completely
removed in 1.9. The <code>live()</code> signature:</p>
<div class="code"><pre class="code literal-block">$(selector).live( eventName, function(){} );
</pre></div>

<p>... can be replaced with the following <code>on()</code> signature:</p>
<div class="code"><pre class="code literal-block">$(document).on( eventName, selector, function(){} );
</pre></div>

<hr>
<p>For example, if your page was dynamically creating elements with the class
name <code>dosomething</code> you would bind the event to <strong>a parent which already
exists</strong> (this is the nub of the problem here, you need something that exists
to bind to, don't bind to the dynamic content), this can be (and the easiest
option) is <code>document</code>. Though bear in mind <code>document</code> may not be the most
efficient option.</p>
<div class="code"><pre class="code literal-block">$(document).on('mouseover mouseout', '.dosomething', function(){
    // what you want to happen when mouseover and mouseout 
    // occurs on elements that match '.dosomething'
});
</pre></div>

<p>Any parent that exists at the time the event is bound is fine. For example</p>
<div class="code"><pre class="code literal-block">$<span class="ss">(</span><span class="s1">'.buttons'</span><span class="ss">)</span>.<span class="nv">on</span><span class="ss">(</span><span class="s1">'click'</span>,<span class="w"> </span><span class="s1">'button'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">()</span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">here</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>would apply to</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"buttons"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- &lt;button&gt;s that are generated dynamically and added here --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>There is a good explanation in the documentation of <code>jQuery.fn.on</code>.</p>
<p>In short:</p>
<blockquote>
<p>Event handlers are bound only to the currently selected elements; they must
exist on the page at the time your code makes the call to <code>.on()</code>.</p>
</blockquote>
<p>Thus in the following example <code>#dataTable tbody tr</code> must exist before the code
is generated.</p>
<div class="code"><pre class="code literal-block">$("#dataTable tbody tr").on("click", function(event){
    console.log($(this).text());
});
</pre></div>

<p>If new HTML is being injected into the page, it is preferable to use delegated
events to attach an event handler, as described next.</p>
<p><strong>Delegated events</strong> have the advantage that they can process events from
descendant elements that are added to the document at a later time. For
example, if the table exists, but the rows are added dynamically using code,
the following will handle it:</p>
<div class="code"><pre class="code literal-block">$("#dataTable tbody").on("click", "tr", function(event){
    console.log($(this).text());
});
</pre></div>

<p>In addition to their ability to handle events on descendant elements which are
not yet created, another advantage of delegated events is their potential for
much lower overhead when many elements must be monitored. On a data table with
1,000 rows in its <code>tbody</code>, the first code example attaches a handler to 1,000
elements.</p>
<p>A delegated-events approach (the second code example) attaches an event
handler to only one element, the <code>tbody</code>, and the event only needs to bubble
up one level (from the clicked <code>tr</code> to <code>tbody</code>).</p>
<p><strong>Note:</strong> Delegated events do not work for SVG.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression/" class="u-url">How do you access the matched groups in a JavaScript regular expression?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:48:25+08:00" itemprop="datePublished" title="2023-02-17 00:48">2023-02-17 00:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to match a portion of a string using a regular expression and then
access that parenthesized substring:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something format_abc"</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="s2">"abc"</span>

<span class="k">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="o">^|</span>\<span class="n">s</span><span class="p">)</span><span class="n">format_</span><span class="p">(</span><span class="o">.*</span><span class="err">?</span><span class="p">)(</span><span class="err">?</span><span class="p">:</span>\<span class="n">s</span><span class="o">|$</span><span class="p">)</span><span class="o">/.</span><span class="n">exec</span><span class="p">(</span><span class="n">myString</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Prints</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">" format_abc"</span><span class="p">,</span><span class="w"> </span><span class="s2">"abc"</span><span class="p">]</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">good</span><span class="o">.</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Prints</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w">  </span><span class="p">(</span><span class="err">???</span><span class="p">)</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Prints</span><span class="p">:</span><span class="w"> </span><span class="n">format_undefined</span><span class="w"> </span><span class="p">(</span><span class="o">!!!</span><span class="p">)</span>
</pre></div>

<p>What am I doing wrong?</p>
<hr>
<p>I've discovered that there was nothing wrong with the regular expression code
above: the actual string which I was testing against was this:</p>
<div class="code"><pre class="code literal-block">"date format_%A"
</pre></div>

<p>Reporting that "%A" is undefined seems a very strange behaviour, but it is not
directly related to this question, so I've opened a new one, <em>Why is a matched
substring returning "undefined" in JavaScript?</em>.</p>
<hr>
<p>The issue was that <code>console.log</code> takes its parameters like a <code>printf</code>
statement, and since the string I was logging (<code>"%A"</code>) had a special value, it
was trying to find the value of the next parameter.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Update: 2019-09-10</h3>
<p>The old way to iterate over multiple matches was not very intuitive. This lead
to the proposal of the <code>String.prototype.matchAll</code> method. This new method is
in the ECMAScript 2020 specification. It gives us a clean API and solves
multiple problems. It is in major browsers and JS engines since Chrome 73+ /
Node 12+ and Firefox 67+.</p>
<p>The method returns an iterator and is used as follows:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something format_abc"</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">regexp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="o">^|</span>\<span class="n">s</span><span class="p">)</span><span class="n">format_</span><span class="p">(</span><span class="o">.*</span><span class="err">?</span><span class="p">)(</span><span class="err">?</span><span class="p">:</span>\<span class="n">s</span><span class="o">|$</span><span class="p">)</span><span class="o">/</span><span class="n">g</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">string</span><span class="o">.</span><span class="n">matchAll</span><span class="p">(</span><span class="n">regexp</span><span class="p">);</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">matches</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="k">match</span><span class="p">);</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="k">match</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<p>As it returns an iterator, we can say it's lazy, this is useful when handling
particularly large numbers of capturing groups, or very large strings. But if
you need, the result can be easily transformed into an Array by using the
<em>spread syntax</em> or the <code>Array.from</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">getFirstGroup</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span><span class="w"> </span><span class="nb">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="n">str</span><span class="o">.</span><span class="n">matchAll</span><span class="p">(</span><span class="n">regexp</span><span class="p">)];</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="ow">or</span><span class="p">:</span>
<span class="n">function</span><span class="w"> </span><span class="n">getFirstGroup</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span><span class="w"> </span><span class="nb">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">matchAll</span><span class="p">(</span><span class="n">regexp</span><span class="p">),</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>

<p>In the meantime, while this proposal gets more wide support, you can use the
official shim package.</p>
<p>Also, the internal workings of the method are simple. An equivalent
implementation using a generator function would be as follows:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">matchAll</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">regexp</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regexp</span><span class="o">.</span><span class="n">global</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="n">regexp</span><span class="o">.</span><span class="n">flags</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">regexp</span><span class="o">.</span><span class="n">flags</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"g"</span><span class="p">;</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="p">);</span>
<span class="w">  </span><span class="n">let</span><span class="w"> </span><span class="k">match</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">re</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="k">match</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>A copy of the original regexp is created; this is to avoid side-effects due to
the mutation of the <code>lastIndex</code> property when going through the multple
matches.</p>
<p>Also, we need to ensure the regexp has the <em>global</em> flag to avoid an infinite
loop.</p>
<p>I'm also happy to see that even this StackOverflow question was referenced in
the discussions of the proposal.</p>
<h3>original answer</h3>
<p>You can access capturing groups like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something format_abc"</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">myRegexp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="o">^|</span>\<span class="n">s</span><span class="p">)</span><span class="n">format_</span><span class="p">(</span><span class="o">.*</span><span class="err">?</span><span class="p">)(</span><span class="err">?</span><span class="p">:</span>\<span class="n">s</span><span class="o">|$</span><span class="p">)</span><span class="o">/</span><span class="n">g</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">myRegexp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="s2">"(?:^|\s)format_(.*?)(?:\s|$)"</span><span class="p">,</span><span class="w"> </span><span class="s2">"g"</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myRegexp</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="n">myString</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">abc</span>
</pre></div>

<p>And if there are multiple matches you can iterate over them:</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">myString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"something format_abc"</span><span class="p">;</span>
<span class="nf">var</span><span class="w"> </span><span class="n">myRegexp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="ss">"(?:^|\s)format_(.*?)(?:\s|$)"</span><span class="p">,</span><span class="w"> </span><span class="ss">"g"</span><span class="p">);</span>
<span class="k">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myRegexp</span><span class="p">.</span><span class="k">exec</span><span class="p">(</span><span class="n">myString</span><span class="p">);</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">match</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">matched</span><span class="w"> </span><span class="nc">text</span><span class="err">:</span><span class="w"> </span><span class="k">match</span><span class="o">[</span><span class="n">0</span><span class="o">]</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="k">start</span><span class="err">:</span><span class="w"> </span><span class="k">match</span><span class="p">.</span><span class="k">index</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">capturing</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="nl">n</span><span class="p">:</span><span class="w"> </span><span class="k">match</span><span class="o">[</span><span class="n">n</span><span class="o">]</span>
<span class="w">  </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">match</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">)</span>
<span class="w">  </span><span class="k">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myRegexp</span><span class="p">.</span><span class="k">exec</span><span class="p">(</span><span class="n">myString</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Here’s a method you can use to get the <em>n</em> ​th capturing group for each match:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">getMatches</span><span class="p">(</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">regex</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="k">index</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="k">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="n">capturing</span><span class="w"> </span><span class="k">group</span>
<span class="w">  </span><span class="nf">var</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span>
<span class="w">  </span><span class="nf">var</span><span class="w"> </span><span class="k">match</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regex</span><span class="p">.</span><span class="k">exec</span><span class="p">(</span><span class="n">string</span><span class="p">))</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">matches</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">match</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="p">);</span>
<span class="w">  </span><span class="err">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">matches</span><span class="p">;</span>
<span class="err">}</span>


<span class="o">//</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="err">:</span>
<span class="nf">var</span><span class="w"> </span><span class="n">myString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'something format_abc something format_def something format_ghi'</span><span class="p">;</span>
<span class="nf">var</span><span class="w"> </span><span class="n">myRegEx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="p">(</span><span class="vm">?</span><span class="err">:</span><span class="o">^|</span><span class="err">\</span><span class="n">s</span><span class="p">)</span><span class="n">format_</span><span class="p">(.</span><span class="o">*</span><span class="vm">?</span><span class="p">)(</span><span class="vm">?</span><span class="err">:\</span><span class="n">s</span><span class="o">|</span><span class="err">$</span><span class="p">)</span><span class="o">/</span><span class="n">g</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="k">Get</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">array</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="n">capturing</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">every</span><span class="w"> </span><span class="k">match</span>
<span class="nf">var</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getMatches</span><span class="p">(</span><span class="n">myString</span><span class="p">,</span><span class="w"> </span><span class="n">myRegEx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="nf">Log</span><span class="w"> </span><span class="n">results</span>
<span class="n">document</span><span class="p">.</span><span class="k">write</span><span class="p">(</span><span class="n">matches</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' matches found: '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">matches</span><span class="p">))</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">matches</span><span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/startswith-and-endswith-functions-in-php/" class="u-url">startsWith() and endsWith() functions in PHP</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/startswith-and-endswith-functions-in-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:47:53+08:00" itemprop="datePublished" title="2023-02-17 00:47">2023-02-17 00:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I write two functions that would take a string and return if it starts
with the specified character/string or ends with it?</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block">$str = '|apples}';

echo startsWith($str, '|'); //Returns true
echo endsWith($str, '}'); //Returns true
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h3>PHP 8.0 and higher</h3>
<p>Since PHP 8.0 you can use the</p>
<p><code>str_starts_with</code> Manual and</p>
<p><code>str_ends_with</code> Manual</p>
<h6>Example</h6>
<p><code>echo str_starts_with($str, '|');</code></p>
<h3>PHP before 8.0</h3>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">startsWith</span><span class="ss">(</span><span class="w"> </span>$<span class="nv">haystack</span>,<span class="w"> </span>$<span class="nv">needle</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>{
<span class="w">     </span>$<span class="nv">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">strlen</span><span class="ss">(</span><span class="w"> </span>$<span class="nv">needle</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nv">substr</span><span class="ss">(</span><span class="w"> </span>$<span class="nv">haystack</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span>$<span class="nv">length</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span>$<span class="nv">needle</span><span class="c1">;</span>
}



<span class="nv">function</span><span class="w"> </span><span class="nv">endsWith</span><span class="ss">(</span><span class="w"> </span>$<span class="nv">haystack</span>,<span class="w"> </span>$<span class="nv">needle</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span>$<span class="nv">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">strlen</span><span class="ss">(</span><span class="w"> </span>$<span class="nv">needle</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">if</span><span class="ss">(</span><span class="w"> </span><span class="o">!</span>$<span class="nv">length</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">true</span><span class="c1">;</span>
<span class="w">    </span>}
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">substr</span><span class="ss">(</span><span class="w"> </span>$<span class="nv">haystack</span>,<span class="w"> </span><span class="o">-</span>$<span class="nv">length</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span>$<span class="nv">needle</span><span class="c1">;</span>
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use <code>substr_compare</code> function to check start-with and ends-with:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">startsWith</span><span class="ss">(</span>$<span class="nv">haystack</span>,<span class="w"> </span>$<span class="nv">needle</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">substr_compare</span><span class="ss">(</span>$<span class="nv">haystack</span>,<span class="w"> </span>$<span class="nv">needle</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="k">strlen</span><span class="ss">(</span>$<span class="nv">needle</span><span class="ss">))</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
}
<span class="nv">function</span><span class="w"> </span><span class="nv">endsWith</span><span class="ss">(</span>$<span class="nv">haystack</span>,<span class="w"> </span>$<span class="nv">needle</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">substr_compare</span><span class="ss">(</span>$<span class="nv">haystack</span>,<span class="w"> </span>$<span class="nv">needle</span>,<span class="w"> </span><span class="o">-</span><span class="k">strlen</span><span class="ss">(</span>$<span class="nv">needle</span><span class="ss">))</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
}
</pre></div>

<hr>
<p>This should be one of the fastest solutions on PHP 7 (benchmark script).
Tested against 8KB haystacks, various length needles and full, partial and no
match cases. <code>strncmp</code> is a touch faster for starts-with but it cannot check
ends-with.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-206.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-204.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
