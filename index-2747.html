<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2747) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2747.html">
<link rel="prev" href="index-2748.html" type="text/html">
<link rel="next" href="index-2746.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/project-vs-repository-in-github/" class="u-url">Project vs Repository in GitHub</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/project-vs-repository-in-github/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T14:53:28+08:00" itemprop="datePublished" title="2023-03-05 14:53">2023-03-05 14:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In GitHub, what is the conceptual difference between a project (that can be
created inside a repository) and a repository?</p>
<p>I've seen several similar questions (here, here and here) in SO, but none of
them explains what is a GitHub project, what is a GitHub repository and when
to use each one of them.</p>
<p>I would appreciate if someone can explain each term, and provide an example of
when to use/create each one. For instance, if I have several prototype
applications, all independent of each other, what do I create in order to
manage in an organized way the source code for all of them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>GitHub recently introduced a new feature called Projects. This provides a
visual board that is typical of many Project Management tools:</p>
<p><img alt="Project" src="https://cdn1.tnwcdn.com/wp-%0Acontent/blogs.dir/1/files/2016/09/GitHub-Project-Management-1592x796.jpg"></p>
<p>A Repository as documented on GitHub:</p>
<blockquote>
<p>A repository is the most basic element of GitHub. They're easiest to imagine
as a project's folder. A repository contains all of the project files
(including documentation), and stores each file's revision history.
Repositories can have multiple collaborators and can be either public or
private.</p>
</blockquote>
<p>A Project as documented on GitHub:</p>
<blockquote>
<p>Project boards on GitHub help you organize and prioritize your work. You can
create project boards for specific feature work, comprehensive roadmaps, or
even release checklists. With project boards, you have the flexibility to
create customized workflows that suit your needs.</p>
</blockquote>
<p>Part of the confusion is that the new feature, Projects, conflicts with the
overloaded usage of the term <em>project</em> in the documentation above.</p>
<p><br></p>
<h3>Suggest</h3>
<p>GitHub recently introduced a new feature called Projects. This provides a
visual board that is typical of many Project Management tools:</p>
<p><img alt="Project" src="https://cdn1.tnwcdn.com/wp-%0Acontent/blogs.dir/1/files/2016/09/GitHub-Project-Management-1592x796.jpg"></p>
<p>A Repository as documented on GitHub:</p>
<blockquote>
<p>A repository is the most basic element of GitHub. They're easiest to imagine
as a project's folder. A repository contains all of the project files
(including documentation), and stores each file's revision history.
Repositories can have multiple collaborators and can be either public or
private.</p>
</blockquote>
<p>A Project as documented on GitHub:</p>
<blockquote>
<p>Project boards on GitHub help you organize and prioritize your work. You can
create project boards for specific feature work, comprehensive roadmaps, or
even release checklists. With project boards, you have the flexibility to
create customized workflows that suit your needs.</p>
</blockquote>
<p>Part of the confusion is that the new feature, Projects, conflicts with the
overloaded usage of the term <em>project</em> in the documentation above.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pass-props-to-parent-component-in-react-js/" class="u-url">Pass props to parent component in React.js</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pass-props-to-parent-component-in-react-js/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T14:51:42+08:00" itemprop="datePublished" title="2023-03-05 14:51">2023-03-05 14:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there not a simple way to pass a child's <code>props</code> to its parent using
events, in React.js?</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Child<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>render:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span><span class="nt">&lt;a</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.props.onClick}</span><span class="nt">&gt;</span>Click<span class="w"> </span>me<span class="nt">&lt;/a&gt;</span>
<span class="w">  </span>}
});

var<span class="w"> </span>Parent<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>onClick:<span class="w"> </span>function(event)<span class="w"> </span>{
<span class="w">    </span>//<span class="w"> </span>event.component.props<span class="w"> </span>?why<span class="w"> </span>is<span class="w"> </span>this<span class="w"> </span>not<span class="w"> </span>available?
<span class="w">  </span>},
<span class="w">  </span>render:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.onClick}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span>}
});
</pre></div>

<p>I know you can use controlled components to pass an input's value but it'd be
nice to pass the whole kit n' kaboodle. Sometimes the child component contains
a set of information you'd rather not have to look up.</p>
<p>Perhaps there's a way to bind the component to the event?</p>
<h4>UPDATE – 9/1/2015</h4>
<p>After using React for over a year, and spurred on by Sebastien Lorber's
answer, I've concluded passing child components as arguments to functions in
parents is <em>not</em> in fact the React way, nor was it ever a good idea. I've
switched the answer.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Edit</strong> : see the end examples for ES6 updated examples.</p>
<p>This answer simply handle the case of direct parent-child relationship. When
parent and child have potentially a lot of intermediaries, check this answer.</p>
<h2>Other solutions are missing the point</h2>
<p>While they still work fine, other answers are missing something very
important.</p>
<blockquote>
<p>Is there not a simple way to pass a child's props to its parent using
events, in React.js?</p>
</blockquote>
<p><strong>The parent already has that child prop!</strong> : if the child has a prop, then it
is because its parent provided that prop to the child! Why do you want the
child to pass back the prop to the parent, while the parent obviously already
has that prop?</p>
<h2>Better implementation</h2>
<p><strong>Child</strong> : it really does not have to be more complicated than that.</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Child<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>render:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.props.onClick}</span><span class="nt">&gt;</span>{this.props.text}<span class="nt">&lt;/button&gt;</span>;
<span class="w">  </span>},
});
</pre></div>

<p><strong>Parent with single child</strong> : using the value it passes to the child</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="o">.</span><span class="n">createClass</span><span class="p">({</span>
<span class="w">  </span><span class="n">getInitialState</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">childText</span><span class="p">:</span><span class="w"> </span><span class="s2">"Click me! (parent prop)"</span><span class="p">};</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="n">render</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="n">handleChildClick</span><span class="p">}</span><span class="w"> </span><span class="n">text</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">childText</span><span class="p">}</span><span class="o">/&gt;</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="n">handleChildClick</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">children</span><span class="w"> </span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">it</span><span class="o">!</span><span class="w"> </span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Here</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span>
<span class="w">     </span><span class="o">//</span><span class="w">  </span><span class="ow">in</span><span class="w"> </span><span class="n">props</span><span class="p">,</span><span class="w"> </span><span class="n">coming</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">parent</span><span class="o">.</span>
<span class="w">     </span><span class="n">alert</span><span class="p">(</span><span class="s2">"The Child button text is: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">childText</span><span class="p">);</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">click</span><span class="w"> </span><span class="n">here</span><span class="w"> </span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">magic</span><span class="w"> </span><span class="n">stuff</span>
<span class="w">     </span><span class="n">alert</span><span class="p">(</span><span class="s2">"The Child HTML is: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">outerHTML</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>JsFiddle</p>
<p><strong>Parent with list of children</strong> : you still have everything you need on the
parent and don't need to make the child more complicated.</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Parent<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>getInitialState:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">     </span>return<span class="w"> </span>{childrenData:<span class="w"> </span>[
<span class="w">         </span>{childText:<span class="w"> </span>"Click<span class="w"> </span>me<span class="w"> </span>1!",<span class="w"> </span>childNumber:<span class="w"> </span>1},
<span class="w">         </span>{childText:<span class="w"> </span>"Click<span class="w"> </span>me<span class="w"> </span>2!",<span class="w"> </span>childNumber:<span class="w"> </span>2}
<span class="w">     </span>]};
<span class="w">  </span>},
<span class="w">  </span>render:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>var<span class="w"> </span>children<span class="w"> </span>=<span class="w"> </span>this.state.childrenData.map(function(childData,childIndex)<span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.handleChildClick.bind(null,childData)}</span><span class="w"> </span><span class="na">text=</span><span class="s">{childData.childText}/</span><span class="nt">&gt;</span>;
<span class="w">    </span>}.bind(this));
<span class="w">    </span>return<span class="w"> </span><span class="nt">&lt;div&gt;</span>{children}<span class="nt">&lt;/div&gt;</span>;
<span class="w">  </span>},

<span class="w">  </span>handleChildClick:<span class="w"> </span>function(childData,event)<span class="w"> </span>{
<span class="w">     </span>alert("The<span class="w"> </span>Child<span class="w"> </span>button<span class="w"> </span>data<span class="w"> </span>is:<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>childData.childText<span class="w"> </span>+<span class="w"> </span>"<span class="w"> </span>-<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>childData.childNumber);
<span class="w">     </span>alert("The<span class="w"> </span>Child<span class="w"> </span>HTML<span class="w"> </span>is:<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>event.target.outerHTML);
<span class="w">  </span>}
});
</pre></div>

<p>JsFiddle</p>
<p>It is also possible to use <code>this.handleChildClick.bind(null,childIndex)</code> and
then use <code>this.state.childrenData[childIndex]</code></p>
<p>Note we are binding with a <code>null</code> context because otherwise React issues a
warning related to its autobinding system. Using null means you don't want to
change the function context. See also.</p>
<h2>About encapsulation and coupling in other answers</h2>
<p>This is for me a <strong>bad</strong> idea in term of coupling and encapsulation:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="o">.</span><span class="n">createClass</span><span class="p">({</span>
<span class="w">  </span><span class="n">handleClick</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">childComponent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">childComponent</span><span class="o">.</span><span class="n">props</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">childComponent</span><span class="o">.</span><span class="n">refs</span><span class="o">.</span><span class="n">button</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">childComponent</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="n">render</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="n">handleClick</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p><strong>Using props</strong> : As I explained above, you already have the props in the
parent so it's useless to pass the whole child component to access props.</p>
<p><strong>Using refs</strong> : You already have the click target in the event, and in most
case this is enough. Additionnally, you could have used a ref directly on the
child:</p>
<div class="code"><pre class="code literal-block">&lt;Child ref="theChild" .../&gt;
</pre></div>

<p>And access the DOM node in the parent with</p>
<div class="code"><pre class="code literal-block">React.findDOMNode(this.refs.theChild)
</pre></div>

<p>For more advanced cases where you want to access multiple refs of the child in
the parent, the child could pass all the dom nodes directly in the callback.</p>
<p>The component has an interface (props) and the parent should not assume
anything about the inner working of the child, including its inner DOM
structure or which DOM nodes it declares refs for. A parent using a ref of a
child means that you tightly couple the 2 components.</p>
<p>To illustrate the issue, I'll take this quote about the Shadow DOM, that is
used inside browsers to render things like sliders, scrollbars, video
players...:</p>
<blockquote>
<p>They created a boundary between what you, the Web developer can reach and
what’s considered implementation details, thus inaccessible to you. The
browser however, can traipse across this boundary at will. With this
boundary in place, they were able to build all HTML elements using the same
good-old Web technologies, out of the divs and spans just like you would.</p>
</blockquote>
<p>The problem is that if you let the child implementation details leak into the
parent, you make it very hard to refactor the child without affecting the
parent. This means as a library author (or as a browser editor with Shadow
DOM) this is very dangerous because you let the client access too much, making
it very hard to upgrade code without breaking retrocompatibility.</p>
<p>If Chrome had implemented its scrollbar letting the client access the inner
dom nodes of that scrollbar, this means that the client may have the
possibility to simply break that scrollbar, and that apps would break more
easily when Chrome perform its auto-update after refactoring the scrollbar...
Instead, they only give access to some safe things like customizing some parts
of the scrollbar with CSS.</p>
<p><strong>About using anything else</strong></p>
<p>Passing the whole component in the callback is dangerous and may lead novice
developers to do very weird things like calling <code>childComponent.setState(...)</code>
or <code>childComponent.forceUpdate()</code>, or assigning it new variables, inside the
parent, making the whole app much harder to reason about.</p>
<hr>
<p><strong>Edit: ES6 examples</strong></p>
<p>As many people now use ES6, here are the same examples for ES6 syntax</p>
<p>The child can be very simple:</p>
<div class="code"><pre class="code literal-block">const<span class="w"> </span>Child<span class="w"> </span>=<span class="w"> </span>({
<span class="w">  </span>onClick,<span class="w"> </span>
<span class="w">  </span>text
})<span class="w"> </span>=&gt;<span class="w"> </span>(
<span class="w">  </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{onClick}</span><span class="nt">&gt;</span>
<span class="w">    </span>{text}
<span class="w">  </span><span class="nt">&lt;/button&gt;</span>
)
</pre></div>

<p>The parent can be either a class (and it can eventually manage the state
itself, but I'm passing it as props here:</p>
<div class="code"><pre class="code literal-block">class<span class="w"> </span>Parent1<span class="w"> </span>extends<span class="w"> </span>React.Component<span class="w"> </span>{
<span class="w">  </span>handleChildClick(childData,event)<span class="w"> </span>{
<span class="w">     </span>alert("The<span class="w"> </span>Child<span class="w"> </span>button<span class="w"> </span>data<span class="w"> </span>is:<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>childData.childText<span class="w"> </span>+<span class="w"> </span>"<span class="w"> </span>-<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>childData.childNumber);
<span class="w">     </span>alert("The<span class="w"> </span>Child<span class="w"> </span>HTML<span class="w"> </span>is:<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>event.target.outerHTML);
<span class="w">  </span>}
<span class="w">  </span>render()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>(
<span class="w">      </span><span class="nt">&lt;div&gt;</span>
<span class="w">        </span>{this.props.childrenData.map(child<span class="w"> </span>=&gt;<span class="w"> </span>(
<span class="w">          </span><span class="nt">&lt;Child</span>
<span class="w">            </span><span class="na">key=</span><span class="s">{child.childNumber}</span>
<span class="w">            </span><span class="na">text=</span><span class="s">{child.childText}</span><span class="w"> </span>
<span class="w">            </span><span class="na">onClick=</span><span class="s">{e</span><span class="w"> </span><span class="err">=</span><span class="nt">&gt;</span><span class="w"> </span>this.handleChildClick(child,e)}
<span class="w">          </span>/&gt;
<span class="w">        </span>))}
<span class="w">      </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span>);
<span class="w">  </span>}
}
</pre></div>

<p>But it can also be simplified if it does not need to manage state:</p>
<div class="code"><pre class="code literal-block">const<span class="w"> </span>Parent2<span class="w"> </span>=<span class="w"> </span>({childrenData})<span class="w"> </span>=&gt;<span class="w"> </span>(
<span class="w">  </span><span class="nt">&lt;div&gt;</span>
<span class="w">     </span>{childrenData.map(child<span class="w"> </span>=&gt;<span class="w"> </span>(
<span class="w">       </span><span class="nt">&lt;Child</span>
<span class="w">         </span><span class="na">key=</span><span class="s">{child.childNumber}</span>
<span class="w">         </span><span class="na">text=</span><span class="s">{child.childText}</span><span class="w"> </span>
<span class="w">         </span><span class="na">onClick=</span><span class="s">{e</span><span class="w"> </span><span class="err">=</span><span class="nt">&gt;</span><span class="w"> </span>{
<span class="w">            </span>alert("The<span class="w"> </span>Child<span class="w"> </span>button<span class="w"> </span>data<span class="w"> </span>is:<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>child.childText<span class="w"> </span>+<span class="w"> </span>"<span class="w"> </span>-<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>child.childNumber);
<span class="w">                    </span>alert("The<span class="w"> </span>Child<span class="w"> </span>HTML<span class="w"> </span>is:<span class="w"> </span>"<span class="w"> </span>+<span class="w"> </span>e.target.outerHTML);
<span class="w">         </span>}}
<span class="w">       </span>/&gt;
<span class="w">     </span>))}
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
)
</pre></div>

<p>JsFiddle</p>
<hr>
<p><strong>PERF WARNING</strong> (apply to ES5/ES6): if you are using <code>PureComponent</code> or
<code>shouldComponentUpdate</code>, the above implementations will not be optimized by
default because using <code>onClick={e =&gt; doSomething()}</code>, or binding directly
during the render phase, because it will create a new function everytime the
parent renders. If this is a perf bottleneck in your app, you can pass the
data to the children, and reinject it inside "stable" callback (set on the
parent class, and binded to <code>this</code> in class constructor) so that
<code>PureComponent</code> optimization can kick in, or you can implement your own
<code>shouldComponentUpdate</code> and ignore the callback in the props comparison check.</p>
<p>You can also use Recompose library, which provide higher order components to
achieve fine-tuned optimisations:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">expensive</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">render</span>
<span class="k">const</span><span class="w"> </span><span class="n">ExpensiveComponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="n">propA</span><span class="p">,</span><span class="w"> </span><span class="n">propB</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="o">...</span><span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Optimized</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">shallow</span><span class="w"> </span><span class="n">comparison</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">props</span>
<span class="o">//</span><span class="w"> </span><span class="n">Same</span><span class="w"> </span><span class="n">effect</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">React</span><span class="s1">'s PureRenderMixin</span>
<span class="k">const</span><span class="w"> </span><span class="n">OptimizedComponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pure</span><span class="p">(</span><span class="n">ExpensiveComponent</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">optimized</span><span class="p">:</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">changed</span>
<span class="k">const</span><span class="w"> </span><span class="n">HyperOptimizedComponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">onlyUpdateForKeys</span><span class="p">([</span><span class="s1">'propA'</span><span class="p">,</span><span class="w"> </span><span class="s1">'propB'</span><span class="p">])(</span><span class="n">ExpensiveComponent</span><span class="p">)</span>
</pre></div>

<p>In this case you could optimize the Child component by using:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">OptimizedChild</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">onlyUpdateForKeys</span><span class="p">([</span><span class="s1">'text'</span><span class="p">])(</span><span class="n">Child</span><span class="p">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><em>Update (9/1/15): The OP has made this question a bit of a moving target. It’s
been updated again. So, I feel responsible to update my reply.</em></p>
<h2>First, an answer to your provided example:</h2>
<p>Yes, this is possible.</p>
<p>You can solve this by updating Child’s <code>onClick</code> to be
<code>this.props.onClick.bind(null, this)</code>:</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Child<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>render:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span><span class="nt">&lt;a</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.props.onClick.bind(null,</span><span class="w"> </span><span class="err">this)}</span><span class="nt">&gt;</span>Click<span class="w"> </span>me<span class="nt">&lt;/a&gt;</span>;
<span class="w">  </span>}
});
</pre></div>

<p>The event handler in your Parent can then access the component and event like
so:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nt">onClick</span><span class="o">:</span><span class="w"> </span><span class="nt">function</span><span class="w"> </span><span class="o">(</span><span class="nt">component</span><span class="o">,</span><span class="w"> </span><span class="nt">event</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">console.log(component,</span><span class="w"> </span><span class="err">event)</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="o">,</span>
</pre></div>

<p>JSBin snapshot</p>
<h2>But the question itself is misleading</h2>
<p><strong>Parent already knows Child’s<code>props</code>.</strong></p>
<p>This isn’t clear in the provided example because no props are actually being
provided. This sample code might better support the question being asked:</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Child<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>render:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span><span class="nt">&lt;a</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.props.onClick}</span><span class="nt">&gt;</span><span class="w"> </span>{this.props.text}<span class="w"> </span><span class="nt">&lt;/a&gt;</span>;
<span class="w">  </span>}
});

var<span class="w"> </span>Parent<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>getInitialState:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>{<span class="w"> </span>text:<span class="w"> </span>"Click<span class="w"> </span>here"<span class="w"> </span>};
<span class="w">  </span>},
<span class="w">  </span>onClick:<span class="w"> </span>function<span class="w"> </span>(event)<span class="w"> </span>{
<span class="w">    </span>//<span class="w"> </span>event.component.props<span class="w"> </span>?why<span class="w"> </span>is<span class="w"> </span>this<span class="w"> </span>not<span class="w"> </span>available?<span class="w"> </span>
<span class="w">  </span>},
<span class="w">  </span>render:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.onClick}</span><span class="w"> </span><span class="na">text=</span><span class="s">{this.state.text}</span><span class="w"> </span><span class="nt">/&gt;</span>;
<span class="w">  </span>}
});
</pre></div>

<p><strong>It becomes much clearer in this example that you already know what the props
of Child are.</strong></p>
<p>JSBin snapshot</p>
<h3>If it’s truly about using a Child’s props…</h3>
<p>If it’s truly about using a Child’s props, you can avoid any hookup with Child
altogether.</p>
<p>JSX has a spread attributes API I often use on components like Child. It takes
all the <code>props</code> and applies them to a component. Child would look like this:</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Child<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>render:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span><span class="nt">&lt;a</span><span class="w"> </span><span class="err">{...this.props}</span><span class="nt">&gt;</span><span class="w"> </span>{this.props.text}<span class="w"> </span><span class="nt">&lt;/a&gt;</span>;
<span class="w">  </span>}
});
</pre></div>

<p>Allowing you to use the values directly in the Parent:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">Parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="o">.</span><span class="n">createClass</span><span class="p">({</span>
<span class="w">  </span><span class="n">getInitialState</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">text</span><span class="p">:</span><span class="w"> </span><span class="s2">"Click here"</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="n">onClick</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="n">render</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="n">onClick</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text</span><span class="p">)}</span><span class="w"> </span><span class="n">text</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">text</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>JSBin snapshot</p>
<p><strong>And there's no additional configuration required as you hookup additional
Child components</strong></p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Parent<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>getInitialState:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>{
<span class="w">      </span>text:<span class="w"> </span>"Click<span class="w"> </span>here",
<span class="w">      </span>text2:<span class="w"> </span>"No,<span class="w"> </span>Click<span class="w"> </span>here",
<span class="w">    </span>};
<span class="w">  </span>},
<span class="w">  </span>onClick:<span class="w"> </span>function<span class="w"> </span>(text)<span class="w"> </span>{
<span class="w">    </span>alert(text);
<span class="w">  </span>},
<span class="w">  </span>render:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span><span class="nt">&lt;div&gt;</span>
<span class="w">      </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.onClick.bind(null,</span><span class="w"> </span><span class="err">this.state.text)}</span><span class="w"> </span><span class="na">text=</span><span class="s">{this.state.text}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.onClick.bind(null,</span><span class="w"> </span><span class="err">this.state.text2)}</span><span class="w"> </span><span class="na">text=</span><span class="s">{this.state.text2}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>;
<span class="w">  </span>}
});
</pre></div>

<p>JSBin snapshot</p>
<p>But I suspect that’s not your actual use case. So let’s dig further…</p>
<h2>A robust practical example</h2>
<p>The generic nature of the provided example is a hard to talk about. I’ve
created a component that demonstrations a practical use for the question
above, implemented in a very <em>Reacty</em> way:</p>
<p>DTServiceCalculator working example<br>
DTServiceCalculator repo</p>
<p>This component is a simple service calculator. You provide it with a list of
services (with names and prices) and it will calculate a total the selected
prices.</p>
<h4>Children are blissfully ignorant</h4>
<p><code>ServiceItem</code> is the child-component in this example. It doesn’t have many
opinions about the outside world. It requires a few props, one of which is a
function to be called when clicked.</p>
<p><code>&lt;div onClick={this.props.handleClick.bind(this.props.index)} /&gt;</code></p>
<p>It does nothing but to call the provided <code>handleClick</code> callback with the
provided <code>index</code>[source].</p>
<h4>Parents are Children</h4>
<p><code>DTServicesCalculator</code> is the parent-component is this example. It’s also a
child. Let’s look.</p>
<p><code>DTServiceCalculator</code> creates a list of child-component (<code>ServiceItem</code>s) and
provides them with props [source]. It’s the parent-component of <code>ServiceItem</code>
but it`s the child-component of the component passing it the list. It doesn't
own the data. So it again delegates handling of the component to its parent-
component source</p>
<p><code>&lt;ServiceItem chosen={chosen} index={i} key={id} price={price} name={name}
onSelect={this.props.handleServiceItem} /&gt;</code></p>
<p><code>handleServiceItem</code> captures the index, passed from the child, and provides it
to its parent [source]</p>
<div class="code"><pre class="code literal-block">handleServiceClick (index) {
  this.props.onSelect(index);
}
</pre></div>

<h4>Owners know everything</h4>
<p>The concept of “Ownership” is an important one in React. I recommend reading
more about it here.</p>
<p>In the example I’ve shown, I keep delegating handling of an event up the
component tree until we get to the component that owns the state.</p>
<p>When we finally get there, we handle the state selection/deselection like so
[source]:</p>
<div class="code"><pre class="code literal-block"><span class="n">handleSelect</span><span class="w"> </span><span class="p">(</span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">let</span><span class="w"> </span><span class="n">services</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">…this.state.services</span><span class="o">]</span><span class="p">;</span>
<span class="w">  </span><span class="n">services</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="p">.</span><span class="n">chosen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">services</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="p">.</span><span class="n">chosen</span><span class="p">)</span><span class="w"> </span><span class="vm">?</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">  </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">(</span><span class="err">{</span><span class="w"> </span><span class="nl">services</span><span class="p">:</span><span class="w"> </span><span class="n">services</span><span class="w"> </span><span class="err">}</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<h2>Conclusion</h2>
<p>Try keeping your outer-most components as opaque as possible. Strive to make
sure that they have very few preferences about how a parent-component might
choose to implement them.</p>
<p>Keep aware of who owns the data you are manipulating. In most cases, you will
need to delegate event handling up the tree to the component that <em>owns</em> that
state.</p>
<p><em>Aside: The Flux pattern is a good way to reduce this type of necessary hookup
in apps.</em></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/unable-to-execute-dex-method-id-not-in-0-0xffff-65536/" class="u-url">Unable to execute dex: method ID not in [0, 0xffff]: 65536</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/unable-to-execute-dex-method-id-not-in-0-0xffff-65536/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T14:49:04+08:00" itemprop="datePublished" title="2023-03-05 14:49">2023-03-05 14:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have seen various versions of the dex erros before, but this one is new.
clean/restart etc won't help. Library projects seems intact and dependency
seems to be linked correctly.</p>
<div class="code"><pre class="code literal-block">Unable to execute dex: method ID not in [0, 0xffff]: 65536
Conversion to Dalvik format failed: Unable to execute dex: method ID not in [0, 0xffff]: 65536
</pre></div>

<p><strong><em>or</em></strong></p>
<div class="code"><pre class="code literal-block">Cannot merge new index 65950 into a non-jumbo instruction
</pre></div>

<p><strong><em>or</em></strong></p>
<div class="code"><pre class="code literal-block">java.util.concurrent.ExecutionException: com.android.dex.DexIndexOverflowException: method ID not in [0, 0xffff]: 65536
</pre></div>

<p><strong>tl;dr</strong> : Official solution from Google is finally here!</p>
<p>http://developer.android.com/tools/building/multidex.html</p>
<p>Only one small tip, you will likely need to do this to prevent out of memory
when doing dex-ing.</p>
<div class="code"><pre class="code literal-block">dexOptions {
        javaMaxHeapSize "4g"
}
</pre></div>

<p>There's also a jumbo mode that can fix this in a less reliable way:</p>
<div class="code"><pre class="code literal-block">dexOptions {
        jumboMode true
}
</pre></div>

<p>Update: If your app is fat and you have too many methods inside your main app,
you may need to re-org your app as per</p>
<p>http://blog.osom.info/2014/12/too-many-methods-in-main-dex.html</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Update 3 (11/3/2014)</strong><br>
Google finally released official description.</p>
<hr>
<p><strong>Update 2 (10/31/2014)</strong><br>
Gradle plugin v0.14.0 for Android adds support for multi-dex. To enable, you
just have to declare it in <em>build.gradle</em> :</p>
<div class="code"><pre class="code literal-block">android {
   defaultConfig {
      ...
      multiDexEnabled  true
   }
}
</pre></div>

<p>If your application supports Android prior to 5.0 (that is, if your
<code>minSdkVersion</code> is 20 or below) you also have to dynamically patch the
<em>application ClassLoader</em> , so it will be able to load classes from secondary
dexes. Fortunately, there's a library that does that for you. Add it to your
app's dependencies:</p>
<div class="code"><pre class="code literal-block">dependencies {
  ...
  compile 'com.android.support:multidex:1.0.0'
}
</pre></div>

<p>You need to call the ClassLoader patch code as soon as possible.
<code>MultiDexApplication</code> class's documentation suggests three ways to do that
(pick <strong>one of them</strong> , one that's most convenient for you):</p>
<p>1 - Declare <code>MultiDexApplication</code> class as the application in your
<em>AndroidManifest.xml</em> :</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;manifest</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">package=</span><span class="s">"com.example.android.multidex.myapplication"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;application</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">        </span><span class="na">android:name=</span><span class="s">"android.support.multidex.MultiDexApplication"</span><span class="nt">&gt;</span>
<span class="w">        </span>...
<span class="w">    </span><span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/manifest&gt;</span>
</pre></div>

<p>2 - Have your <code>Application</code> class extend MultiDexApplication class:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyApplication</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">MultiDexApplication</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>3 - Call <code>MultiDex#install</code> from your <code>Application#attachBaseContext</code> method:</p>
<div class="code"><pre class="code literal-block">public class MyApplication {
    protected void attachBaseContext(Context base) {
        super.attachBaseContext(base);
        MultiDex.install(this);
        ....
    }
    ....
}
</pre></div>

<hr>
<p><strong>Update 1 (10/17/2014):</strong><br>
As anticipated, multidex support is shipped in revision 21 of Android Support
Library. You can find the android-support-multidex.jar in
/sdk/extras/android/support/multidex/library/libs folder.</p>
<hr>
<p>Multi-dex support solves this problem. dx 1.8 already allows generating
several dex files.<br>
Android L will support multi-dex natively, and next revision of support
library is going to cover older releases back to API 4.</p>
<p>It was stated in this Android Developers Backstage podcast episode by Anwar
Ghuloum. I've posted a transcript (and general multi-dex explanation) of the
relevant part.</p>
<p><br></p>
<h3>Suggest</h3>
<p>As already stated, you have too many methods (more than 65k) in your project
and libs.</p>
<h3>Prevent the Problem: Reduce the number of methods with Play Services 6.5+</h3>
<p>and support-v4 24.2+</p>
<p>Since often the Google Play services is one of the main suspects in "wasting"
methods with its 20k+ methods. Google Play services version 6.5 or later, it
is possible for you to include Google Play services in your application using
a number of smaller client libraries. For example, if you only need GCM and
maps you can choose to use these dependencies only:</p>
<div class="code"><pre class="code literal-block">dependencies {
    compile 'com.google.android.gms:play-services-base:6.5.+'
    compile 'com.google.android.gms:play-services-maps:6.5.+'
}
</pre></div>

<p>The full list of sub libraries and it's responsibilities can be found in the
official google doc.</p>
<p><strong>Update</strong> : Since Support Library v4 v24.2.0 it was split up into the
following modules:</p>
<blockquote>
<p><code>support-compat</code>, <code>support-core-utils</code>, <code>support-core-ui</code>, <code>support-media-
compat</code> and <code>support-fragment</code></p>
</blockquote>
<div class="code"><pre class="code literal-block">dependencies {
    compile 'com.android.support:support-fragment:24.2.+'
}
</pre></div>

<p>Do note however, if you use <code>support-fragment</code>, it will have dependencies to
all the other modules (ie. if you use <code>android.support.v4.app.Fragment</code> there
is no benefit)</p>
<p>See here the official release notes for support-v4 lib</p>
<hr>
<h3>Enable MultiDexing</h3>
<p>Since Lollipop (aka build tools 21+) it is very easy to handle. The approach
is to work around the 65k methods per dex file problem to create multiple dex
files for your app. Add the following to your gradle build file (this is taken
from the official google doc on applications with more than 65k methods):</p>
<div class="code"><pre class="code literal-block">android {
    compileSdkVersion 21
    buildToolsVersion "21.1.0"

    defaultConfig {
        ...
        // Enabling multidex support.
        multiDexEnabled true
    }
    ...
}

dependencies {
  compile 'com.android.support:multidex:1.0.1'
}
</pre></div>

<p>The second step is to either prepare your Application class or if you don't
extend Application use the <code>MultiDexApplication</code> in your Android Manifest:</p>
<p>Either add this to your Application.java</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Override</span>
<span class="w">  </span><span class="n">protected</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">attachBaseContext</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">base</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">.</span><span class="n">attachBaseContext</span><span class="p">(</span><span class="n">base</span><span class="p">);</span>
<span class="w">    </span><span class="n">MultiDex</span><span class="p">.</span><span class="n">install</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<span class="w">  </span><span class="err">}</span>
</pre></div>

<p><strong>or</strong> use the provided application from the mutlidex lib</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;manifest</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">package=</span><span class="s">"com.example.android.myapplication"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;application</span>
<span class="w">        </span><span class="err">...</span>
<span class="w">        </span><span class="na">android:name=</span><span class="s">"android.support.multidex.MultiDexApplication"</span><span class="nt">&gt;</span>
<span class="w">        </span>...
<span class="w">    </span><span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/manifest&gt;</span>
</pre></div>

<hr>
<h3>Prevent OutOfMemory with MultiDex</h3>
<p>As further tip, if you run into <code>OutOfMemory</code> exceptions during the build
phase you could enlarge the heap with</p>
<div class="code"><pre class="code literal-block">android {
    ...
    dexOptions {
        javaMaxHeapSize "4g"
    }
}
</pre></div>

<p>which would set the heap to 4 gigabytes.</p>
<p>See this question for more detail on the dex heap memory issue.</p>
<hr>
<h3>Analyze the source of the Problem</h3>
<p>To analyze the source of the methods the gradle plugin
https://github.com/KeepSafe/dexcount-gradle-plugin can help in combination
with the dependency tree provided by gradle with e.g.</p>
<div class="code"><pre class="code literal-block">.\gradlew app:dependencies
</pre></div>

<p>See this answer and question for more information on method count in android</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2748.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2746.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
