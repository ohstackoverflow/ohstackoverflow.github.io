<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 37) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-37.html">
<link rel="prev" href="index-38.html" type="text/html">
<link rel="next" href="index-36.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-efficiently-iterate-over-each-entry-in-a-java-map/" class="u-url">How do I efficiently iterate over each entry in a Java Map?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-efficiently-iterate-over-each-entry-in-a-java-map/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:17:34+08:00" itemprop="datePublished" title="2023-02-16 19:17">2023-02-16 19:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I have an object implementing the <code>Map</code> interface in Java and I wish to
iterate over every pair contained within it, what is the most efficient way of
going through the map?</p>
<p>Will the ordering of elements depend on the specific map implementation that I
have for the interface?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="nv">Map</span><span class="o">&lt;</span><span class="nv">String</span>,<span class="w"> </span><span class="nv">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>...
<span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">Map</span>.<span class="nv">Entry</span><span class="o">&lt;</span><span class="nv">String</span>,<span class="w"> </span><span class="nv">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">entry</span><span class="w"> </span>:<span class="w"> </span><span class="nv">map</span>.<span class="nv">entrySet</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="nv">entry</span>.<span class="nv">getKey</span><span class="ss">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">entry</span>.<span class="nv">getValue</span><span class="ss">())</span><span class="c1">;</span>
}
</pre></div>

<p>On Java 10+:</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">map</span><span class="o">.</span><span class="n">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">getKey</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="o">.</span><span class="n">getValue</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>To summarize the other answers and combine them with what I know, I found 10
main ways to do this (see below). Also, I wrote some performance tests (see
results below). For example, if we want to find the sum of all of the keys and
values of a map, we can write:</p>
<ol>
<li>
<p>Using <strong>iterator</strong> and <strong>Map.Entry</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>Iterator<map.entry integer>&gt; it = map.entrySet().iterator();
while (it.hasNext()) {
    Map.Entry<integer integer> pair = it.next();
    i += pair.getKey() + pair.getValue();
}</integer></map.entry></p>
</li>
<li>
<p>Using <strong>foreach</strong> and <strong>Map.Entry</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>for (Map.Entry<integer integer> pair : map.entrySet()) {
    i += pair.getKey() + pair.getValue();
}</integer></p>
</li>
<li>
<p>Using <strong>forEach</strong> from Java 8</p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>map.forEach((k, v) -&gt; i[0] += k + v);</p>
</li>
<li>
<p>Using <strong>keySet</strong> and <strong>foreach</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>for (Integer key : map.keySet()) {
    i += key + map.get(key);
}</p>
</li>
<li>
<p>Using <strong>keySet</strong> and <strong>iterator</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>Iterator<integer> itr2 = map.keySet().iterator();
while (itr2.hasNext()) {
    Integer key = itr2.next();
    i += key + map.get(key);
}</integer></p>
</li>
<li>
<p>Using <strong>for</strong> and <strong>Map.Entry</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>for (Iterator<map.entry integer>&gt; entries = map.entrySet().iterator(); entries.hasNext(); ) {
    Map.Entry<integer integer> entry = entries.next();
    i += entry.getKey() + entry.getValue();
}</integer></map.entry></p>
</li>
<li>
<p>Using the Java 8 <strong>Stream API</strong></p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>map.entrySet().stream().forEach(e -&gt; i[0] += e.getKey() + e.getValue());</p>
</li>
<li>
<p>Using the Java 8 <strong>Stream API parallel</strong></p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>map.entrySet().stream().parallel().forEach(e -&gt; i[0] += e.getKey() + e.getValue());</p>
</li>
<li>
<p>Using <strong>IterableMap</strong> of <code>Apache Collections</code></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>MapIterator<integer integer> it = iterableMap.mapIterator();
while (it.hasNext()) {
    i += it.next() + it.getValue();
}</integer></p>
</li>
<li>
<p>Using <strong>MutableMap</strong> of Eclipse (CS) collections</p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>mutableMap.forEachKeyValue((key, value) -&gt; {
    i[0] += key + value;
});</p>
</li>
</ol>
<p><strong>Perfomance tests</strong> (mode = AverageTime, system = Windows 8.1 64-bit, Intel
i7-4790 3.60 GHz, 16 GB)</p>
<ol>
<li>
<p>For a small map (100 elements), score 0.308 is the best</p>
<div class="code"><pre class="code literal-block">Benchmark                          Mode  Cnt  Score    Error  Units
</pre></div>

<p>test3_UsingForEachAndJava8         avgt  10   0.308 ±  0.021  µs/op
test10_UsingEclipseMap             avgt  10   0.309 ±  0.009  µs/op
test1_UsingWhileAndMapEntry        avgt  10   0.380 ±  0.014  µs/op
test6_UsingForAndIterator          avgt  10   0.387 ±  0.016  µs/op
test2_UsingForEachAndMapEntry      avgt  10   0.391 ±  0.023  µs/op
test7_UsingJava8StreamApi          avgt  10   0.510 ±  0.014  µs/op
test9_UsingApacheIterableMap       avgt  10   0.524 ±  0.008  µs/op
test4_UsingKeySetAndForEach        avgt  10   0.816 ±  0.026  µs/op
test5_UsingKeySetAndIterator       avgt  10   0.863 ±  0.025  µs/op
test8_UsingJava8StreamApiParallel  avgt  10   5.552 ±  0.185  µs/op</p>
</li>
<li>
<p>For a map with 10000 elements, score 37.606 is the best</p>
<div class="code"><pre class="code literal-block">Benchmark                           Mode   Cnt  Score      Error   Units
</pre></div>

<p>test10_UsingEclipseMap              avgt   10    37.606 ±   0.790  µs/op
test3_UsingForEachAndJava8          avgt   10    50.368 ±   0.887  µs/op
test6_UsingForAndIterator           avgt   10    50.332 ±   0.507  µs/op
test2_UsingForEachAndMapEntry       avgt   10    51.406 ±   1.032  µs/op
test1_UsingWhileAndMapEntry         avgt   10    52.538 ±   2.431  µs/op
test7_UsingJava8StreamApi           avgt   10    54.464 ±   0.712  µs/op
test4_UsingKeySetAndForEach         avgt   10    79.016 ±  25.345  µs/op
test5_UsingKeySetAndIterator        avgt   10    91.105 ±  10.220  µs/op
test8_UsingJava8StreamApiParallel   avgt   10   112.511 ±   0.365  µs/op
test9_UsingApacheIterableMap        avgt   10   125.714 ±   1.935  µs/op</p>
</li>
<li>
<p>For a map with 100000 elements, score 1184.767 is the best</p>
<div class="code"><pre class="code literal-block">Benchmark                          Mode   Cnt  Score        Error    Units
</pre></div>

<p>test1_UsingWhileAndMapEntry        avgt   10   1184.767 ±   332.968  µs/op
test10_UsingEclipseMap             avgt   10   1191.735 ±   304.273  µs/op
test2_UsingForEachAndMapEntry      avgt   10   1205.815 ±   366.043  µs/op
test6_UsingForAndIterator          avgt   10   1206.873 ±   367.272  µs/op
test8_UsingJava8StreamApiParallel  avgt   10   1485.895 ±   233.143  µs/op
test5_UsingKeySetAndIterator       avgt   10   1540.281 ±   357.497  µs/op
test4_UsingKeySetAndForEach        avgt   10   1593.342 ±   294.417  µs/op
test3_UsingForEachAndJava8         avgt   10   1666.296 ±   126.443  µs/op
test7_UsingJava8StreamApi          avgt   10   1706.676 ±   436.867  µs/op
test9_UsingApacheIterableMap       avgt   10   3289.866 ±  1445.564  µs/op</p>
</li>
</ol>
<p>Graphs (performance tests depending on map size)</p>
<p><img alt="Enter image description here" src="images/17VGh.png"></p>
<p>Table (perfomance tests depending on map size)</p>
<div class="code"><pre class="code literal-block">          100     600      1100     1600     2100
test10    0.333    1.631    2.752    5.937    8.024
test3     0.309    1.971    4.147    8.147   10.473
test6     0.372    2.190    4.470    8.322   10.531
test1     0.405    2.237    4.616    8.645   10.707
test2     0.376    2.267    4.809    8.403   10.910
test7     0.473    2.448    5.668    9.790   12.125
test9     0.565    2.830    5.952   13.220   16.965
test4     0.808    5.012    8.813   13.939   17.407
test5     0.810    5.104    8.533   14.064   17.422
test8     5.173   12.499   17.351   24.671   30.403
</pre></div>

<p>All tests are on GitHub.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-test-for-an-empty-javascript-object/" class="u-url">How do I test for an empty JavaScript object?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-test-for-an-empty-javascript-object/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:17:02+08:00" itemprop="datePublished" title="2023-02-16 19:17">2023-02-16 19:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>This question's answers are a community effort</strong>. Edit existing answers to
improve this post. It is not currently accepting new answers or interactions.</p>
<p>After an AJAX request, sometimes my application may return an empty object,
like:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
</pre></div>

<p>How can I check whether that's the case?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>ECMA 5+:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// because Object.keys(new Date()).length === 0;</span>
<span class="c1">// we have to do some additional check</span>
<span class="n">obj</span><span class="w"> </span><span class="c1">// 👈 null and undefined check</span>
<span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="n">keys</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nb">length</span><span class="w"> </span><span class="o">==</span><span class="p">=</span><span class="w"> </span><span class="mi">0</span>
<span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="n">getPrototypeOf</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="p">=</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="n">prototype</span>
</pre></div>

<p>Note, though, that this creates an unnecessary array (the return value of
<code>keys</code>).</p>
<p>Pre-ECMA 5:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">isEmpty</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="n">prop</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">({});</span>
<span class="p">}</span>
</pre></div>

<p>jQuery:</p>
<div class="code"><pre class="code literal-block">jQuery.isEmptyObject({}); // true
</pre></div>

<p>lodash:</p>
<div class="code"><pre class="code literal-block">_.isEmpty({}); // true
</pre></div>

<p>Underscore:</p>
<div class="code"><pre class="code literal-block">_.isEmpty({}); // true
</pre></div>

<p>Hoek</p>
<div class="code"><pre class="code literal-block">Hoek.deepEqual({}, {}); // true
</pre></div>

<p>ExtJS</p>
<div class="code"><pre class="code literal-block">Ext.Object.isEmpty({}); // true
</pre></div>

<p>AngularJS (version 1)</p>
<div class="code"><pre class="code literal-block">angular.equals({}, {}); // true
</pre></div>

<p>Ramda</p>
<div class="code"><pre class="code literal-block">R.isEmpty({}); // true
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If ECMAScript 5 support is available, you can use <code>Object.keys()</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">isEmpty</span><span class="ss">(</span><span class="nv">obj</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">Object</span>.<span class="nv">keys</span><span class="ss">(</span><span class="nv">obj</span><span class="ss">)</span>.<span class="nv">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
}
</pre></div>

<p>For ES3 and older, there's no easy way to do this. You'll have to loop over
the properties explicitly:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">isEmpty</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/checking-if-a-key-exists-in-a-javascript-object/" class="u-url">Checking if a key exists in a JavaScript object?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/checking-if-a-key-exists-in-a-javascript-object/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:16:30+08:00" itemprop="datePublished" title="2023-02-16 19:16">2023-02-16 19:16</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I check if a particular key exists in a JavaScript object or array?</p>
<p>If a key doesn't exist, and I try to access it, will it return false? Or throw
an error?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Checking for undefined-ness is not an accurate way of testing whether a key
exists. What if the key exists but the value is actually <code>undefined</code>?</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s2">"key"</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="n">undefined</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">exists</span><span class="o">!</span>
</pre></div>

<p>You should instead use the <code>in</code> operator:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"key"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span><span class="w"> </span><span class="n">regardless</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">value</span>
</pre></div>

<p>If you want to check if a key doesn't exist, remember to use parenthesis:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">not_key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="s2">"key"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="s2">"key"</span><span class="w"> </span><span class="n">doesn</span><span class="s1">'t exist in object</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="o">!</span><span class="s2">"key"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">this</span><span class="o">!</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s2">"false in obj"</span>
</pre></div>

<p>Or, if you want to particularly test for properties of the object instance
(and not inherited properties), use <code>hasOwnProperty</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="s2">"key"</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span>
</pre></div>

<p>For performance comparison between the methods that are <code>in</code>, <code>hasOwnProperty</code>
and key is <code>undefined</code>, see this <strong>benchmark</strong> :</p>
<p><img alt="Benchmark results" src="images/PEuZT.png"></p>
<p><br></p>
<h3>Suggest</h3>
<h2>Quick Answer</h2>
<blockquote>
<p>How do I check if a particular key exists in a JavaScript object or array?
If a key doesn't exist and I try to access it, will it return false? Or
throw an error?</p>
</blockquote>
<p>Accessing directly a missing property using (associative) array style or
object style will return an <em>undefined</em> constant.</p>
<h3>The slow and reliable <em>in</em> operator and <em>hasOwnProperty</em> method</h3>
<p>As people have already mentioned here, you could have an object with a
property associated with an "undefined" constant.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">bizzareObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">valid_key</span><span class="p">:</span><span class="w">  </span><span class="n">undefined</span><span class="p">};</span>
</pre></div>

<p>In that case, you will have to use <em>hasOwnProperty</em> or <em>in</em> operator to know
if the key is really there. But, <em>but at what price?</em></p>
<p>so, I tell you...</p>
<p><em>in</em> operator and <em>hasOwnProperty</em> are "methods" that use the Property
Descriptor mechanism in Javascript (similar to Java reflection in the Java
language).</p>
<p>http://www.ecma-international.org/ecma-262/5.1/#sec-8.10</p>
<blockquote>
<p>The Property Descriptor type is used to explain the manipulation and
reification of named property attributes. Values of the Property Descriptor
type are records composed of named fields where each field’s name is an
attribute name and its value is a corresponding attribute value as specified
in 8.6.1. In addition, any field may be present or absent.</p>
</blockquote>
<p>On the other hand, calling an object method or key will use Javascript [[Get]]
mechanism. That is a far way faster!</p>
<h3>Benchmark</h3>
<p>https://jsben.ch/HaHQt</p>
<p><img alt="Comparing key access in JS" src="images/GjzNU.png">.</p>
<h5>Using <em>in</em> operator</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Impression"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
</pre></div>

<p>The result was</p>
<div class="code"><pre class="code literal-block"><span class="mf">12</span><span class="p">,</span><span class="mf">931</span><span class="p">,</span><span class="mf">832</span><span class="w"> </span><span class="err">±</span><span class="mf">0.21</span><span class="err">%</span><span class="w"> </span><span class="n">ops</span><span class="o">/</span><span class="n">sec</span><span class="w">      </span><span class="mf">92</span><span class="err">%</span><span class="w"> </span><span class="n">slower</span>
</pre></div>

<h5>Using hasOwnProperty</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="s2">"Impression"</span><span class="p">)</span>
</pre></div>

<p>The result was</p>
<div class="code"><pre class="code literal-block"><span class="mf">16</span><span class="p">,</span><span class="mf">021</span><span class="p">,</span><span class="mf">758</span><span class="w"> </span><span class="err">±</span><span class="mf">0.45</span><span class="err">%</span><span class="w"> </span><span class="n">ops</span><span class="o">/</span><span class="n">sec</span><span class="w">     </span><span class="mf">91</span><span class="err">%</span><span class="w"> </span><span class="n">slower</span>
</pre></div>

<h5>Accessing elements directly (brackets style)</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="s2">"Impression"</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span>
</pre></div>

<p>The result was</p>
<div class="code"><pre class="code literal-block"><span class="mf">168</span><span class="p">,</span><span class="mf">270</span><span class="p">,</span><span class="mf">439</span><span class="w"> </span><span class="err">±</span><span class="mf">0.13</span><span class="w"> </span><span class="n">ops</span><span class="o">/</span><span class="n">sec</span><span class="w">     </span><span class="mf">0.02</span><span class="err">%</span><span class="w"> </span><span class="n">slower</span>
</pre></div>

<h5>Accessing elements directly (object style)</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="n">Impression</span><span class="w">  </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span><span class="p">;</span>
</pre></div>

<p>The result was</p>
<div class="code"><pre class="code literal-block"><span class="mf">168</span><span class="p">,</span><span class="mf">303</span><span class="p">,</span><span class="mf">172</span><span class="w"> </span><span class="err">±</span><span class="mf">0.20</span><span class="err">%</span><span class="w">     </span><span class="n">fastest</span>
</pre></div>

<h3>EDIT: What is the reason to assign to a property the <code>undefined</code> value?</h3>
<p>That question puzzles me. In Javascript, there are at least two references for
absent objects to avoid problems like this: <code>null</code> and <code>undefined</code>.</p>
<p><code>null</code> is the primitive value that represents the intentional absence of any
object value, or in short terms, the <strong>confirmed</strong> lack of value. On the other
hand, <code>undefined</code> is an unknown value (not defined). If there is a property
that will be used later with a <em>proper</em> value consider use <code>null</code> reference
instead of <code>undefined</code> because in the initial moment the property is
<strong>confirmed</strong> to lack value.</p>
<p>Compare:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">};</span><span class="w"> </span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="o">.</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">absent</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">design</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="p">:</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">defined</span><span class="o">.</span><span class="w"> </span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="o">.</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">say</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w"> </span><span class="n">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">case</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="o">.</span>
</pre></div>

<h3>Advice</h3>
<p>Avoid objects with <code>undefined</code> values. Check directly whenever possible and
use <code>null</code> to initialize property values. Otherwise, use the slow <code>in</code>
operator or <code>hasOwnProperty()</code> method.</p>
<h3>EDIT: 12/04/2018 - NOT RELEVANT ANYMORE</h3>
<p>As people have commented, modern versions of the Javascript engines (with
firefox exception) have changed the approach for access properties. The
current implementation is slower than the previous one for this particular
case but the difference between access key and object is neglectable.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-38.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-36.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
