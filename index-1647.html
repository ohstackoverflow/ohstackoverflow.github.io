<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1647) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1647.html">
<link rel="prev" href="index-1648.html" type="text/html">
<link rel="next" href="index-1646.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-process-id-of-background-process/" class="u-url">How to get process ID of background process?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-process-id-of-background-process/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:01:31+08:00" itemprop="datePublished" title="2023-03-03 06:01">2023-03-03 06:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I start a background process from my shell script, and I would like to kill
this process when my script finishes.</p>
<p>How to get the PID of this process from my shell script? As far as I can see
variable <code>$!</code> contains the PID of the current script, not the background
process.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You need to save the PID of the background process at the time you start it:</p>
<div class="code"><pre class="code literal-block"><span class="nv">foo</span><span class="w"> </span><span class="o">&amp;</span>
<span class="nv">FOO_PID</span><span class="o">=</span>$<span class="o">!</span>
#<span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">stuff</span>
<span class="nv">kill</span><span class="w"> </span><span class="mh">$F</span><span class="nv">OO_PID</span>
</pre></div>

<p>You cannot use job control, since that is an interactive feature and tied to a
controlling terminal. A script will not necessarily have a terminal attached
at all so job control will not necessarily be available.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can use the <code>jobs -l</code> command to get to a particular jobL</p>
<div class="code"><pre class="code literal-block">^Z
[1]+  Stopped                 guard

my_mac:workspace r$ jobs -l
[1]+ 46841 Suspended: 18           guard
</pre></div>

<p>In this case, 46841 is the PID.</p>
<p>From <code>help jobs</code>:</p>
<blockquote>
<p>-l Report the process group ID and working directory of the jobs.</p>
</blockquote>
<p><code>jobs -p</code> is another option which shows just the PIDs.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/capturing-groups-from-a-grep-regex/" class="u-url">Capturing Groups From a Grep RegEx</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/capturing-groups-from-a-grep-regex/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:01:06+08:00" itemprop="datePublished" title="2023-03-03 06:01">2023-03-03 06:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've got this little script in <code>sh</code> (Mac OSX 10.6) to look through an array of
files. Google has stopped being helpful at this point:</p>
<div class="code"><pre class="code literal-block"><span class="nv">files</span><span class="o">=</span><span class="s2">"*.jpg"</span>
<span class="k">for</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="mh">$f</span><span class="nv">iles</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">        </span><span class="nv">echo</span><span class="w"> </span><span class="mh">$f</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">oEi</span><span class="w"> </span><span class="s1">'[0-9]+_([a-z]+)_[0-9a-z]*'</span>
<span class="w">        </span><span class="nv">name</span><span class="o">=</span>$?
<span class="w">        </span><span class="nv">echo</span><span class="w"> </span>$<span class="nv">name</span>
<span class="w">    </span><span class="nv">done</span>
</pre></div>

<p>So far (obviously, to you shell gurus) <code>$name</code> merely holds 0, 1 or 2,
depending on if <code>grep</code> found that the filename matched the matter provided.
<strong>What I'd like is to capture what's inside the parens<code>([a-z]+)</code> and store
that to a variable</strong>.</p>
<p>I'd like <strong>to use<code>grep</code> only, if possible</strong>. If not, please no Python or Perl,
etc. <code>sed</code> or something like it – I would like to attack this from the *nix
purist angle.</p>
<p>Also, as a <strong>super-cool bonu</strong> s, I'm curious as to how I can concatenate
string in shell? Is the group I captured was the string "somename" stored in
$name, and I wanted to add the string ".jpg" to the end of it, could I <code>cat
$name '.jpg'</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you're using Bash, you don't even have to use <code>grep</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">files</span><span class="o">=</span><span class="s2">"*.jpg"</span>
<span class="n">regex</span><span class="o">=</span><span class="s2">"[0-9]+_([a-z]+)_[0-9a-z]*"</span>
<span class="k">for</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">$</span><span class="n">files</span><span class="w">    </span><span class="c1"># unquoted in order to allow the glob to expand</span>
<span class="n">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">[[</span><span class="w"> </span><span class="o">$</span><span class="n">f</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="o">$</span><span class="n">regex</span><span class="w"> </span><span class="p">]]</span>
<span class="w">    </span><span class="n">then</span>
<span class="w">        </span><span class="n">name</span><span class="o">=</span><span class="s2">"${BASH_REMATCH[1]}"</span>
<span class="w">        </span><span class="n">echo</span><span class="w"> </span><span class="s2">"${name}.jpg"</span><span class="w">    </span><span class="c1"># concatenate strings</span>
<span class="w">        </span><span class="n">name</span><span class="o">=</span><span class="s2">"${name}.jpg"</span><span class="w">    </span><span class="c1"># same thing stored in a variable</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="n">echo</span><span class="w"> </span><span class="s2">"$f doesn't match"</span><span class="w"> </span><span class="o">&gt;&amp;</span><span class="mi">2</span><span class="w"> </span><span class="c1"># this could get noisy if there are a lot of non-matching files</span>
<span class="w">    </span><span class="n">fi</span>
<span class="n">done</span>
</pre></div>

<p>It's better to put the regex in a variable. Some patterns won't work if
included literally.</p>
<p>This uses <code>=~</code> which is Bash's regex match operator. The results of the match
are saved to an array called <code>$BASH_REMATCH</code>. The first capture group is
stored in index 1, the second (if any) in index 2, etc. Index zero is the full
match.</p>
<p>You should be aware that without anchors, this regex (and the one using
<code>grep</code>) will match any of the following examples and more, which may not be
what you're looking for:</p>
<div class="code"><pre class="code literal-block"><span class="mf">123</span><span class="n">_abc_d4e5</span>
<span class="n">xyz123_abc_d4e5</span>
<span class="mf">123</span><span class="n">_abc_d4e5</span><span class="mf">.</span><span class="n">xyz</span>
<span class="n">xyz123_abc_d4e5</span><span class="mf">.</span><span class="n">xyz</span>
</pre></div>

<p>To eliminate the second and fourth examples, make your regex like this:</p>
<div class="code"><pre class="code literal-block">^[0-9]+_([a-z]+)_[0-9a-z]*
</pre></div>

<p>which says the string must <em>start</em> with one or more digits. The carat
represents the beginning of the string. If you add a dollar sign at the end of
the regex, like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">^</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">+</span><span class="nf">_</span><span class="p">([</span><span class="nv">a</span><span class="o">-</span><span class="nv">z</span><span class="p">]</span><span class="o">+</span><span class="p">)</span><span class="nv">_</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="nv">a</span><span class="o">-</span><span class="nv">z</span><span class="p">]</span><span class="o">*</span><span class="p">$</span>
</pre></div>

<p>then the third example will also be eliminated since the dot is not among the
characters in the regex and the dollar sign represents the end of the string.
Note that the fourth example fails this match as well.</p>
<p>If you have GNU <code>grep</code> (around 2.5 or later, I think, when the <code>\K</code> operator
was added):</p>
<div class="code"><pre class="code literal-block">name=$(echo "$f" | grep -Po '(?i)[0-9]+_\K[a-z]+(?=_[0-9a-z]*)').jpg
</pre></div>

<p>The <code>\K</code> operator (variable-length look-behind) causes the preceding pattern
to match, but doesn't include the match in the result. The fixed-length
equivalent is <code>(?&lt;=)</code> - the pattern would be included before the closing
parenthesis. You must use <code>\K</code> if quantifiers may match strings of different
lengths (e.g. <code>+</code>, <code>*</code>, <code>{2,4}</code>).</p>
<p>The <code>(?=)</code> operator matches fixed or variable-length patterns and is called
"look-ahead". It also does not include the matched string in the result.</p>
<p>In order to make the match case-insensitive, the <code>(?i)</code> operator is used. It
affects the patterns that follow it so its position is significant.</p>
<p>The regex might need to be adjusted depending on whether there are other
characters in the filename. You'll note that in this case, I show an example
of concatenating a string at the same time that the substring is captured.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This isn't really possible with pure <code>grep</code>, at least not generally.</p>
<p>But if your pattern is suitable, you may be able to use <code>grep</code> multiple times
within a pipeline to first reduce your line to a known format, and then to
extract just the bit you want. (Although tools like <code>cut</code> and <code>sed</code> are far
better at this).</p>
<p>Suppose for the sake of argument that your pattern was a bit simpler:
<code>[0-9]+_([a-z]+)_</code> You could extract this like so:</p>
<div class="code"><pre class="code literal-block">echo $name | grep -Ei '[0-9]+_[a-z]+_' | grep -oEi '[a-z]+'
</pre></div>

<p>The first <code>grep</code> would remove any lines that didn't match your overall patern,
the second <code>grep</code> (which has <code>--only-matching</code> specified) would display the
alpha portion of the name. This only works because the pattern is suitable:
"alpha portion" is specific enough to pull out what you want.</p>
<p>(Aside: Personally I'd use <code>grep</code> + <code>cut</code> to achieve what you are after:
<code>echo $name | grep {pattern} | cut -d _ -f 2</code>. This gets <code>cut</code> to parse the
line into fields by splitting on the delimiter <code>_</code>, and returns just field 2
(field numbers start at 1)).</p>
<p>Unix philosophy is to have tools which do one thing, and do it well, and
combine them to achieve non-trivial tasks, so I'd argue that <code>grep</code> + <code>sed</code>
etc is a more Unixy way of doing things :-)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-tell-gradle-to-use-specific-jdk-version/" class="u-url">How do I tell Gradle to use specific JDK version?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-tell-gradle-to-use-specific-jdk-version/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:58:31+08:00" itemprop="datePublished" title="2023-03-03 05:58">2023-03-03 05:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I can't figure out to get this working.</p>
<p>Scenario:</p>
<ul>
<li>I have an application built with gradle</li>
<li>The application uses JavaFX</li>
</ul>
<p>What I want</p>
<ul>
<li>Use a variable (defined per developer machine) which points to an installation of a JDK which will be used for building the whole application / tests / ...</li>
</ul>
<p>I thought about having the <code>gradle.properties</code> file, defining the variable.
Something like</p>
<div class="code"><pre class="code literal-block">JAVA_HOME_FOR_MY_PROJECT=&lt;path to my desired JDK&gt;
</pre></div>

<p>What I don't want</p>
<ul>
<li>point <code>JAVA_HOME</code> to the desired JDK</li>
</ul>
<p>I could live with many suggestions:</p>
<ul>
<li>a solution that defines a system environment variable which I'm able to check in my build.gradle script</li>
<li>a variable defined in gradle.properties</li>
<li>overriding the JAVA_HOME variable only for the build context (something like <code>use JAVA_HOME=&lt;my special JDK path defined somewhere else defined&gt;</code>)</li>
<li>something else I didn't think about</li>
</ul>
<p>Question:</p>
<ul>
<li>How to wire a variable (how ever defined, as variable in the <code>gradle.properties</code>, system environment variable, ...) to the build process?</li>
</ul>
<p>I have more than one JDK7 available and need to point to a special version
(minimum JDK_u version).</p>
<p>Any answer is appreciated and I'm thankful for every hint to the right
direction.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Two ways</p>
<ol>
<li>In <code>gradle.properties</code> in the <code>.gradle</code> directory in your <code>HOME_DIRECTORY</code> set <code>org.gradle.java.home=/path_to_jdk_directory</code>
</li>
</ol>
<p>or:</p>
<ol>
<li>In your <code>build.gradle</code><div class="code"><pre class="code literal-block"> compileJava.options.fork = true
</pre></div>

<p>compileJava.options.forkOptions.executable = '/path_to_javac'</p>
</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>If you add JDK_PATH in <strong>gradle.properties</strong> your build become dependent on on
that particular path. Instead Run <strong>gradle task</strong> with following command line
parametemer</p>
<div class="code"><pre class="code literal-block">gradle build -Dorg.gradle.java.home=/JDK_PATH
</pre></div>

<p>This way your build is not dependent on some concrete path.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1648.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1646.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
