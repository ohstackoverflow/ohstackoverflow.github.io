<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 319) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-319.html">
<link rel="prev" href="index-320.html" type="text/html">
<link rel="next" href="index-318.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-difference-between-utf8-general-ci-and-utf8-unicode-ci/" class="u-url">What's the difference between utf8_general_ci and utf8_unicode_ci?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-difference-between-utf8-general-ci-and-utf8-unicode-ci/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:51:45+08:00" itemprop="datePublished" title="2023-02-17 03:51">2023-02-17 03:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Between <code>utf8_general_ci</code> and <code>utf8_unicode_ci</code>, are there any differences in
terms of performance?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>For those people still arriving at this question in 2020 or later, there are
newer options that may be better than <em>both</em> of these. For example,
<code>utf8_unicode_520_ci</code>.</strong></p>
<p>All these collations are for the UTF-8 character encoding. The differences are
in how text is sorted and compared.</p>
<p><code>_unicode_ci</code> and <code>_general_ci</code> are two different sets of rules for sorting
and comparing text according to the way we expect. Newer versions of MySQL
introduce new sets of rules, too, such as <code>_unicode_520_ci</code> for equivalent
rules based on Unicode 5.2, or the MySQL 8.x specific <code>_0900_ai_ci</code> for
equivalent rules based on Unicode 9.0 (and with no equivalent <code>_general_ci</code>
variant). People reading this now should probably use one of these newer
collations instead of either <code>_unicode_ci</code> or <code>_general_ci</code>. The description
of those older collations below is provided for interest only.</p>
<p><em>MySQL is currently transitioning away from an older, flawed UTF-8
implementation. For now, you need to use<code>utf8mb4</code> instead of <code>utf8</code> for the
character encoding part, to ensure you are getting the fixed version. The
flawed version remains for backward compatibility, though it is being
deprecated.</em></p>
<p><strong>Key differences</strong></p>
<ul>
<li>
<p><code>utf8mb4_unicode_ci</code> is based on the official Unicode rules for universal sorting and comparison, which sorts accurately in a wide range of languages.</p>
</li>
<li>
<p><code>utf8mb4_general_ci</code> is a simplified set of sorting rules which aims to do as well as it can while taking many short-cuts designed to improve speed. It does not follow the Unicode rules and will result in undesirable sorting or comparison in some situations, such as when using particular languages or characters.</p>
</li>
</ul>
<p>On modern servers, this performance boost will be all but negligible. It was
devised in a time when servers had a tiny fraction of the CPU performance of
today's computers.</p>
<p><strong>Benefits of<code>utf8mb4_unicode_ci</code> over <code>utf8mb4_general_ci</code></strong></p>
<p><code>utf8mb4_unicode_ci</code>, which uses the Unicode rules for sorting and comparison,
employs a fairly complex algorithm for correct sorting in a wide range of
languages and when using a wide range of special characters. These rules need
to take into account language-specific conventions; not everybody sorts their
characters in what we would call 'alphabetical order'.</p>
<p>As far as Latin (ie "European") languages go, there is not much difference
between the Unicode sorting and the simplified <code>utf8mb4_general_ci</code> sorting in
MySQL, but there are still a few differences:</p>
<ul>
<li>
<p>For examples, the Unicode collation sorts "ß" like "ss", and "Œ" like "OE" as people using those characters would normally want, whereas <code>utf8mb4_general_ci</code> sorts them as single characters (presumably like "s" and "e" respectively).</p>
</li>
<li>
<p>Some Unicode characters are defined as ignorable, which means they shouldn't count toward the sort order and the comparison should move on to the next character instead. <code>utf8mb4_unicode_ci</code> handles these properly.</p>
</li>
</ul>
<p>In non-latin languages, such as Asian languages or languages with different
alphabets, there may be a lot <em>more</em> differences between Unicode sorting and
the simplified <code>utf8mb4_general_ci</code> sorting. The suitability of
<code>utf8mb4_general_ci</code> will depend heavily on the language used. For some
languages, it'll be quite inadequate.</p>
<p><strong>What should you use?</strong></p>
<p>There is almost certainly no reason to use <code>utf8mb4_general_ci</code> anymore, as we
have left behind the point where CPU speed is low enough that the performance
difference would be important. Your database will almost certainly be limited
by other bottlenecks than this.</p>
<p>In the past, some people recommended to use <code>utf8mb4_general_ci</code> except when
accurate sorting was going to be important enough to justify the performance
cost. Today, that performance cost has all but disappeared, and developers are
treating internationalization more seriously.</p>
<p>There's an argument to be made that if speed is more important to you than
accuracy, you may as well not do any sorting at all. It's trivial to make an
algorithm faster if you do not need it to be accurate. So,
<code>utf8mb4_general_ci</code> is a compromise that's probably not needed for speed
reasons and probably also not suitable for accuracy reasons.</p>
<p>One other thing I'll add is that even if you know your application only
supports the English language, it may still need to deal with people's names,
which can often contain characters used in other languages in which it is just
as important to sort correctly. Using the Unicode rules for everything helps
add peace of mind that the very smart Unicode people have worked very hard to
make sorting work properly.</p>
<p><strong>What the parts mean</strong></p>
<p>Firstly, <code>ci</code> is for <em>case-insensitive</em> sorting and comparison. This means
it's suitable for textual data, and case is not important. The other types of
collation are <code>cs</code> (case-sensitive) for textual data where case is important,
and <code>bin</code>, for where the encoding needs to match, bit for bit, which is
suitable for fields which are really encoded binary data (including, for
example, Base64). Case-sensitive sorting leads to some weird results and case-
sensitive comparison can result in duplicate values differing only in letter
case, so case-sensitive collations are falling out of favor for textual data -
if case is significant to you, then otherwise ignorable punctuation and so on
is probably also significant, and a binary collation might be more
appropriate.</p>
<p>Next, <code>unicode</code> or <code>general</code> refers to the specific sorting and comparison
rules - in particular, the way text is normalized or compared. There are many
different sets of rules for the utf8mb4 character encoding, with <code>unicode</code> and
<code>general</code> being two that attempt to work well in all possible languages rather
than one specific one. The differences between these two sets of rules are the
subject of this answer. Note that <code>unicode</code> uses rules from Unicode 4.0.
Recent versions of MySQL and MariaDB add the rulesets <code>unicode_520</code> using
rules from Unicode 5.2, and MySQL 8.x adds <code>0900</code> (dropping the "unicode_"
part) using rules from Unicode 9.0.</p>
<p>And lastly, <code>utf8mb4</code> is of course the character encoding used internally. In
this answer I'm talking only about Unicode based encodings.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I wanted to know what is the performance difference between using
<code>utf8_general_ci</code> and <code>utf8_unicode_ci</code>, but I did not find any benchmarks
listed on the internet, so I decided to create benchmarks myself.</p>
<p>I created a very simple table with 500,000 rows:</p>
<div class="code"><pre class="code literal-block">CREATE TABLE test(
  ID INT(11) DEFAULT NULL,
  Description VARCHAR(20) DEFAULT NULL
)
ENGINE = INNODB
CHARACTER SET utf8
COLLATE utf8_general_ci;
</pre></div>

<p>Then I filled it with random data by running this stored procedure:</p>
<div class="code"><pre class="code literal-block"><span class="nt">CREATE</span><span class="w"> </span><span class="nt">PROCEDURE</span><span class="w"> </span><span class="nt">randomizer</span><span class="o">()</span>
<span class="nt">BEGIN</span>
<span class="w">  </span><span class="nt">DECLARE</span><span class="w"> </span><span class="nt">i</span><span class="w"> </span><span class="nt">INT</span><span class="w"> </span><span class="nt">DEFAULT</span><span class="w"> </span><span class="nt">0</span><span class="o">;</span>
<span class="w">  </span><span class="nt">DECLARE</span><span class="w"> </span><span class="nt">random</span><span class="w"> </span><span class="nt">CHAR</span><span class="o">(</span><span class="nt">20</span><span class="o">)</span><span class="w"> </span><span class="o">;</span>
<span class="w">  </span><span class="nt">theloop</span><span class="o">:</span><span class="w"> </span><span class="nt">loop</span>
<span class="w">    </span><span class="nt">SET</span><span class="w"> </span><span class="nt">random</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">CONV</span><span class="o">(</span><span class="nt">FLOOR</span><span class="o">(</span><span class="nt">RAND</span><span class="o">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nt">99999999999999</span><span class="o">),</span><span class="w"> </span><span class="nt">20</span><span class="o">,</span><span class="w"> </span><span class="nt">36</span><span class="o">);</span>
<span class="w">    </span><span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">test</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">i</span><span class="o">+</span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="nt">random</span><span class="o">);</span>
<span class="w">    </span><span class="nt">SET</span><span class="w"> </span><span class="nt">i</span><span class="o">=</span><span class="nt">i</span><span class="o">+</span><span class="nt">1</span><span class="o">;</span>
<span class="w">    </span><span class="nt">IF</span><span class="w"> </span><span class="nt">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">500000</span><span class="w"> </span><span class="nt">THEN</span>
<span class="w">      </span><span class="nt">LEAVE</span><span class="w"> </span><span class="nt">theloop</span><span class="o">;</span>
<span class="w">    </span><span class="nt">END</span><span class="w"> </span><span class="nt">IF</span><span class="o">;</span>
<span class="w">  </span><span class="nt">END</span><span class="w"> </span><span class="nt">LOOP</span><span class="w"> </span><span class="nt">theloop</span><span class="o">;</span>
<span class="nt">END</span>
</pre></div>

<p>Then I created the following stored procedures to benchmark simple <code>SELECT</code>,
<code>SELECT</code> with <code>LIKE</code>, and sorting (<code>SELECT</code> with <code>ORDER BY</code>):</p>
<div class="code"><pre class="code literal-block">CREATE<span class="w"> </span>PROCEDURE<span class="w"> </span>benchmark_simple_select()
BEGIN
<span class="w">  </span>DECLARE<span class="w"> </span>i<span class="w"> </span>INT<span class="w"> </span>DEFAULT<span class="w"> </span><span class="m">0</span>;
<span class="w">  </span>theloop:<span class="w"> </span>loop
<span class="w">    </span>SELECT<span class="w"> </span>*
<span class="w">    </span>FROM<span class="w"> </span>test
<span class="w">    </span>WHERE<span class="w"> </span>Description<span class="w"> </span>=<span class="w"> </span>'test'<span class="w"> </span>COLLATE<span class="w"> </span>utf8_general_ci;
<span class="w">    </span>SET<span class="w"> </span>i<span class="w"> </span>=<span class="w"> </span>i<span class="w"> </span>+<span class="w"> </span><span class="m">1</span>;
<span class="w">    </span>IF<span class="w"> </span>i<span class="w"> </span>=<span class="w"> </span><span class="m">30</span><span class="w"> </span>THEN
<span class="w">      </span>LEAVE<span class="w"> </span>theloop;
<span class="w">    </span>END<span class="w"> </span>IF;
<span class="w">  </span>END<span class="w"> </span>LOOP<span class="w"> </span>theloop;
END;

CREATE<span class="w"> </span>PROCEDURE<span class="w"> </span>benchmark_select_like()
BEGIN
<span class="w">  </span>DECLARE<span class="w"> </span>i<span class="w"> </span>INT<span class="w"> </span>DEFAULT<span class="w"> </span><span class="m">0</span>;
<span class="w">  </span>theloop:<span class="w"> </span>loop
<span class="w">    </span>SELECT<span class="w"> </span>*
<span class="w">    </span>FROM<span class="w"> </span>test
<span class="w">    </span>WHERE<span class="w"> </span>Description<span class="w"> </span>LIKE<span class="w"> </span>'%test'<span class="w"> </span>COLLATE<span class="w"> </span>utf8_general_ci;
<span class="w">    </span>SET<span class="w"> </span>i<span class="w"> </span>=<span class="w"> </span>i<span class="w"> </span>+<span class="w"> </span><span class="m">1</span>;
<span class="w">    </span>IF<span class="w"> </span>i<span class="w"> </span>=<span class="w"> </span><span class="m">30</span><span class="w"> </span>THEN
<span class="w">      </span>LEAVE<span class="w"> </span>theloop;
<span class="w">    </span>END<span class="w"> </span>IF;
<span class="w">  </span>END<span class="w"> </span>LOOP<span class="w"> </span>theloop;
END;

CREATE<span class="w"> </span>PROCEDURE<span class="w"> </span>benchmark_order_by()
BEGIN
<span class="w">  </span>DECLARE<span class="w"> </span>i<span class="w"> </span>INT<span class="w"> </span>DEFAULT<span class="w"> </span><span class="m">0</span>;
<span class="w">  </span>theloop:<span class="w"> </span>loop
<span class="w">    </span>SELECT<span class="w"> </span>*
<span class="w">    </span>FROM<span class="w"> </span>test
<span class="w">    </span>WHERE<span class="w"> </span>ID<span class="w"> </span>&gt;<span class="w"> </span>FLOOR(<span class="m">1</span><span class="w"> </span>+<span class="w"> </span>RAND()<span class="w"> </span>*<span class="w"> </span>(<span class="m">400000</span><span class="w"> </span>-<span class="w"> </span><span class="m">1</span>))
<span class="w">    </span>ORDER<span class="w"> </span>BY<span class="w"> </span>Description<span class="w"> </span>COLLATE<span class="w"> </span>utf8_general_ci<span class="w"> </span>LIMIT<span class="w"> </span><span class="m">1000</span>;
<span class="w">    </span>SET<span class="w"> </span>i<span class="w"> </span>=<span class="w"> </span>i<span class="w"> </span>+<span class="w"> </span><span class="m">1</span>;
<span class="w">    </span>IF<span class="w"> </span>i<span class="w"> </span>=<span class="w"> </span><span class="m">10</span><span class="w"> </span>THEN
<span class="w">      </span>LEAVE<span class="w"> </span>theloop;
<span class="w">    </span>END<span class="w"> </span>IF;
<span class="w">  </span>END<span class="w"> </span>LOOP<span class="w"> </span>theloop;
END;
</pre></div>

<p>In the stored procedures above <code>utf8_general_ci</code> collation is used, but of
course during the tests I used both <code>utf8_general_ci</code> and <code>utf8_unicode_ci</code>.</p>
<p>I called each stored procedure 5 times for each collation (5 times for
<code>utf8_general_ci</code> and 5 times for <code>utf8_unicode_ci</code>) and then calculated the
average values.</p>
<p>My results are:</p>
<p><strong><code>benchmark_simple_select()</code></strong></p>
<ul>
<li>with <code>utf8_general_ci</code>: 9,957 ms </li>
<li>with <code>utf8_unicode_ci</code>: 10,271 ms </li>
</ul>
<p>In this benchmark using <code>utf8_unicode_ci</code> is slower than <code>utf8_general_ci</code> by
3.2%.</p>
<p><strong><code>benchmark_select_like()</code></strong></p>
<ul>
<li>with <code>utf8_general_ci</code>: 11,441 ms </li>
<li>with <code>utf8_unicode_ci</code>: 12,811 ms </li>
</ul>
<p>In this benchmark using <code>utf8_unicode_ci</code> is slower than <code>utf8_general_ci</code> by
12%.</p>
<p><strong><code>benchmark_order_by()</code></strong></p>
<ul>
<li>with <code>utf8_general_ci</code>: 11,944 ms </li>
<li>with <code>utf8_unicode_ci</code>: 12,887 ms </li>
</ul>
<p>In this benchmark using <code>utf8_unicode_ci</code> is slower than <code>utf8_general_ci</code> by
7.9%.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-overlay-one-div-over-another-div/" class="u-url">How to overlay one div over another div</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-overlay-one-div-over-another-div/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:51:20+08:00" itemprop="datePublished" title="2023-02-17 03:51">2023-02-17 03:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need assistance with overlaying one individual <code>div</code> over another individual
<code>div</code>.</p>
<p>My code looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"navi"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"infoi"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"info_icon2.png"</span><span class="w"> </span><span class="na">height=</span><span class="s">"20"</span><span class="w"> </span><span class="na">width=</span><span class="s">"32"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>Unfortunately I cannot nest the <code>div#infoi</code> or the <code>img</code>, inside the first
<code>div.navi</code>.</p>
<p>It has to be two separate <code>div</code>s as shown, but I need to know how I could
place the <code>div#infoi</code> over the <code>div.navi</code> and to the right most side and
centered on top of the <code>div.navi</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">#container<span class="w"> </span>{
<span class="w">  </span>width:<span class="w"> </span>100px;
<span class="w">  </span>height:<span class="w"> </span>100px;
<span class="w">  </span>position:<span class="w"> </span>relative;
}
#navi,
#infoi<span class="w"> </span>{
<span class="w">  </span>width:<span class="w"> </span>100%;
<span class="w">  </span>height:<span class="w"> </span>100%;
<span class="w">  </span>position:<span class="w"> </span>absolute;
<span class="w">  </span>top:<span class="w"> </span>0;
<span class="w">  </span>left:<span class="w"> </span>0;
}
#infoi<span class="w"> </span>{
<span class="w">  </span>z-index:<span class="w"> </span>10;
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"navi"</span><span class="nt">&gt;</span>a<span class="nt">&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"infoi"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"https://appharbor.com/assets/images/stackoverflow-logo.png"</span><span class="w"> </span><span class="na">height=</span><span class="s">"20"</span><span class="w"> </span><span class="na">width=</span><span class="s">"32"</span><span class="w"> </span><span class="nt">/&gt;</span>b
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>I would suggest learning about <code>position: relative</code> and child elements with
<code>position: absolute</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The accepted solution works great, but IMO lacks an explanation as to why it
works. The example below is boiled down to the basics and separates the
important CSS from the non-relevant styling CSS. As a bonus, I've also
included a detailed explanation of how CSS positioning works.</p>
<p><strong>TLDR;</strong> if you only want the code, scroll down to <strong>The Result</strong>.</p>
<h3>The Problem</h3>
<p>There are two separate, sibling, elements and the goal is to position the
second element (with an <code>id</code> of <code>infoi</code>), so it appears within the previous
element (the one with a <code>class</code> of <code>navi</code>). The HTML structure cannot be
changed.</p>
<h3>Proposed Solution</h3>
<p>To achieve the desired result we're going to move, or position, the second
element, which we'll call <code>#infoi</code> so it appears within the first element,
which we'll call <code>.navi</code>. Specifically, we want <code>#infoi</code> to be positioned in
the top-right corner of <code>.navi</code>.</p>
<h3>CSS Position Required Knowledge</h3>
<p>CSS has several properties for positioning elements. By default, all elements
are <code>position: static</code>. This means the element will be positioned according to
its order in the HTML structure, with few exceptions.</p>
<p>The other <code>position</code> values are <code>relative</code>, <code>absolute</code>, <code>sticky</code>, and <code>fixed</code>.
By setting an element's <code>position</code> to one of these other values it's now
possible to use a combination of the following four properties to position the
element:</p>
<ul>
<li><code>top</code></li>
<li><code>right</code></li>
<li><code>bottom</code></li>
<li><code>left</code></li>
</ul>
<p>In other words, by setting <code>position: absolute</code>, we can add <code>top: 100px</code> to
position the element 100 pixels from the top of the page. Conversely, if we
set <code>bottom: 100px</code> the element would be positioned 100 pixels from the bottom
of the page.</p>
<p><strong><em>Here's where many CSS newcomers get lost</em></strong> - <code>position: absolute</code> has a
frame of reference. In the example above, the frame of reference is the <code>body</code>
element. <code>position: absolute</code> with <code>top: 100px</code> means the element is
positioned 100 pixels from the top of the <code>body</code> element.</p>
<p>The position frame of reference, or position context, can be altered by
setting the <code>position</code> of a parent element to <strong><em>any value other
than<code>position: static</code></em></strong>. That is, we can create a new position context by
giving a parent element:</p>
<ul>
<li><code>position: relative;</code></li>
<li><code>position: absolute;</code></li>
<li><code>position: sticky;</code></li>
<li><code>position: fixed;</code></li>
</ul>
<p>For example, if a <code>&lt;div class="parent"&gt;</code> element is given <code>position:
relative</code>, any child elements use the <code>&lt;div class="parent"&gt;</code> as their position
context. If a child element were given <code>position: absolute</code> and <code>top: 100px</code>,
the element would be positioned 100 pixels from the top of the <code>&lt;div
class="parent"&gt;</code> element, because the <code>&lt;div class="parent"&gt;</code> is now the
position context.</p>
<p><strong>The other factor</strong> to be aware of is <strong>stack order</strong> - or how elements are
stacked in the z-direction. The must-know here is the stack order of elements
are, by default, defined by the reverse of their order in the HTML structure.
Consider the following example:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;body&gt;</span>
<span class="w">  </span><span class="nt">&lt;div&gt;</span>Bottom<span class="nt">&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div&gt;</span>Top<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>

<p>In this example, if the two <code>&lt;div&gt;</code> elements were positioned in the same place
on the page, the <code>&lt;div&gt;Top&lt;/div&gt;</code> element would cover the <code>&lt;div&gt;Bottom&lt;/div&gt;</code>
element. Since <code>&lt;div&gt;Top&lt;/div&gt;</code> comes after <code>&lt;div&gt;Bottom&lt;/div&gt;</code> in the HTML
structure it has a higher stacking order.</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block">div<span class="w"> </span>{
<span class="w">  </span>position:<span class="w"> </span>absolute;
<span class="w">  </span>width:<span class="w"> </span>50%;
<span class="w">  </span>height:<span class="w"> </span>50%;
}

#bottom<span class="w"> </span>{
<span class="w">  </span>top:<span class="w"> </span>0;
<span class="w">  </span>left:<span class="w"> </span>0;
<span class="w">  </span>background-color:<span class="w"> </span>blue;
}

#top<span class="w"> </span>{
<span class="w">  </span>top:<span class="w"> </span>25%;
<span class="w">  </span>left:<span class="w"> </span>25%;
<span class="w">  </span>background-color:<span class="w"> </span>red;
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"bottom"</span><span class="nt">&gt;</span>Bottom<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"top"</span><span class="nt">&gt;</span>Top<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>The stacking order can be changed with CSS using the <code>z-index</code> or <code>order</code>
properties.</p>
<p>We can ignore the stacking order in this issue as the natural HTML structure
of the elements means the element we want to appear on <code>top</code> comes after the
other element.</p>
<p>So, back to the problem at hand - we'll use position context to solve this
issue.</p>
<h3>The Solution</h3>
<p>As stated above, our goal is to position the <code>#infoi</code> element so it appears
within the <code>.navi</code> element. To do this, we'll wrap the <code>.navi</code> and <code>#infoi</code>
elements in a new element <code>&lt;div class="wrapper"&gt;</code> so we can create a new
position context.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"navi"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"infoi"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>Then create a new position context by giving <code>.wrapper</code> a <code>position:
relative</code>.</p>
<div class="code"><pre class="code literal-block"><span class="na">.wrapper</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nl">position:</span><span class="w"> </span><span class="nf">relative</span><span class="c1">;</span>
<span class="err">}</span>
</pre></div>

<p>With this new position context, we can position <code>#infoi</code> within <code>.wrapper</code>.
First, give <code>#infoi</code> a <code>position: absolute</code>, allowing us to position <code>#infoi</code>
absolutely in <code>.wrapper</code>.</p>
<p>Then add <code>top: 0</code> and <code>right: 0</code> to position the <code>#infoi</code> element in the top-
right corner. Remember, because the <code>#infoi</code> element is using <code>.wrapper</code> as
its position context, it will be in the top-right of the <code>.wrapper</code> element.</p>
<div class="code"><pre class="code literal-block"><span class="p">#</span><span class="nn">infoi</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span>
<span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">right</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Because <code>.wrapper</code> is merely a container for <code>.navi</code>, positioning <code>#infoi</code> in
the top-right corner of <code>.wrapper</code> gives the effect of being positioned in the
top-right corner of <code>.navi</code>.</p>
<p>And there we have it, <code>#infoi</code> now appears to be in the top-right corner of
<code>.navi</code>.</p>
<h3>The Result</h3>
<p>The example below is boiled down to the basics, and contains some minimal
styling.</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block">/*
*<span class="w">  </span>position:<span class="w"> </span>relative<span class="w"> </span>gives<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>position<span class="w"> </span>context
*/
.wrapper<span class="w"> </span>{
<span class="w">  </span>position:<span class="w"> </span>relative;
}

/*
*<span class="w">  </span>The<span class="w"> </span>.navi<span class="w"> </span>properties<span class="w"> </span>are<span class="w"> </span>for<span class="w"> </span>styling<span class="w"> </span>only
*<span class="w">  </span>These<span class="w"> </span>properties<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>changed<span class="w"> </span>or<span class="w"> </span>removed
*/
.navi<span class="w"> </span>{
<span class="w">  </span>background-color:<span class="w"> </span>#eaeaea;
<span class="w">  </span>height:<span class="w"> </span>40px;
}


/*
*<span class="w">  </span>Position<span class="w"> </span>the<span class="w"> </span>#infoi<span class="w"> </span>element<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>top-right
*<span class="w">  </span>of<span class="w"> </span>the<span class="w"> </span>.wrapper<span class="w"> </span>element
*/
#infoi<span class="w"> </span>{
<span class="w">  </span>position:<span class="w"> </span>absolute;
<span class="w">  </span>top:<span class="w"> </span>0;
<span class="w">  </span>right:<span class="w"> </span>0;

<span class="w">  </span>/*
<span class="w">  </span>*<span class="w">  </span>Styling<span class="w"> </span>only,<span class="w"> </span>the<span class="w"> </span>below<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>changed<span class="w"> </span>or<span class="w"> </span>removed
<span class="w">  </span>*<span class="w">  </span>depending<span class="w"> </span>on<span class="w"> </span>your<span class="w"> </span>use<span class="w"> </span>case
<span class="w">  </span>*/
<span class="w">  </span>height:<span class="w"> </span>20px;
<span class="w">  </span>padding:<span class="w"> </span>10px<span class="w"> </span>10px;
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"navi"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"infoi"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"http://via.placeholder.com/32x20/000000/ffffff?text=?"</span><span class="w"> </span><span class="na">height=</span><span class="s">"20"</span><span class="w"> </span><span class="na">width=</span><span class="s">"32"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<h3>An Alternate (Grid) Solution</h3>
<p>Here's an alternate solution using CSS Grid to position the <code>.navi</code> element
with the <code>#infoi</code> element in the far right. I've used the verbose <code>grid</code>
properties to make it as clear as possible.</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block">:root<span class="w"> </span>{
<span class="w">  </span>--columns:<span class="w"> </span>12;
}

/*
*<span class="w">  </span>Setup<span class="w"> </span>the<span class="w"> </span>wrapper<span class="w"> </span>as<span class="w"> </span>a<span class="w"> </span>Grid<span class="w"> </span>element,<span class="w"> </span>with<span class="w"> </span>12<span class="w"> </span>columns,<span class="w"> </span>1<span class="w"> </span>row
*/
.wrapper<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>grid;
<span class="w">  </span>grid-template-columns:<span class="w"> </span>repeat(var(--columns),<span class="w"> </span>1fr);
<span class="w">  </span>grid-template-rows:<span class="w"> </span>40px;
}

/*
*<span class="w">  </span>Position<span class="w"> </span>the<span class="w"> </span>.navi<span class="w"> </span>element<span class="w"> </span>to<span class="w"> </span>span<span class="w"> </span>all<span class="w"> </span>columns
*/
.navi<span class="w"> </span>{
<span class="w">  </span>grid-column-start:<span class="w"> </span>1;
<span class="w">  </span>grid-column-end:<span class="w"> </span>span<span class="w"> </span>var(--columns);
<span class="w">  </span>grid-row-start:<span class="w"> </span>1;
<span class="w">  </span>grid-row-end:<span class="w"> </span>2;

<span class="w">  </span>/*
<span class="w">  </span>*<span class="w">  </span>Styling<span class="w"> </span>only,<span class="w"> </span>the<span class="w"> </span>below<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>changed<span class="w"> </span>or<span class="w"> </span>removed
<span class="w">  </span>*<span class="w">  </span>depending<span class="w"> </span>on<span class="w"> </span>your<span class="w"> </span>use<span class="w"> </span>case
<span class="w">  </span>*/
<span class="w">  </span>background-color:<span class="w"> </span>#eaeaea;
}


/*
*<span class="w">  </span>Position<span class="w"> </span>the<span class="w"> </span>#infoi<span class="w"> </span>element<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>last<span class="w"> </span>column,<span class="w"> </span>and<span class="w"> </span>center<span class="w"> </span>it
*/
#infoi<span class="w"> </span>{
<span class="w">  </span>grid-column-start:<span class="w"> </span>var(--columns);
<span class="w">  </span>grid-column-end:<span class="w"> </span>span<span class="w"> </span>1;
<span class="w">  </span>grid-row-start:<span class="w"> </span>1;
<span class="w">  </span>place-self:<span class="w"> </span>center;
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"navi"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"infoi"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"http://via.placeholder.com/32x20/000000/ffffff?text=?"</span><span class="w"> </span><span class="na">height=</span><span class="s">"20"</span><span class="w"> </span><span class="na">width=</span><span class="s">"32"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<h3>An Alternate (No Wrapper) Solution</h3>
<p>In the case we can't edit any HTML, meaning we can't add a wrapper element, we
can still achieve the desired effect.</p>
<p>Instead of using <code>position: absolute</code> on the <code>#infoi</code> element, we'll use
<code>position: relative</code>. This allows us to reposition the <code>#infoi</code> element from
its default position below the <code>.navi</code> element. With <code>position: relative</code> we
can use a negative <code>top</code> value to move it up from its default position, and a
<code>left</code> value of <code>100%</code> minus a few pixels, using <code>left: calc(100% - 52px)</code>, to
position it near the right-side.</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block">/*
*<span class="w">  </span>The<span class="w"> </span>.navi<span class="w"> </span>properties<span class="w"> </span>are<span class="w"> </span>for<span class="w"> </span>styling<span class="w"> </span>only
*<span class="w">  </span>These<span class="w"> </span>properties<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>changed<span class="w"> </span>or<span class="w"> </span>removed
*/
.navi<span class="w"> </span>{
<span class="w">  </span>background-color:<span class="w"> </span>#eaeaea;
<span class="w">  </span>height:<span class="w"> </span>40px;
<span class="w">  </span>width:<span class="w"> </span>100%;
}


/*
*<span class="w">  </span>Position<span class="w"> </span>the<span class="w"> </span>#infoi<span class="w"> </span>element<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>top-right
*<span class="w">  </span>of<span class="w"> </span>the<span class="w"> </span>.wrapper<span class="w"> </span>element
*/
#infoi<span class="w"> </span>{
<span class="w">  </span>position:<span class="w"> </span>relative;
<span class="w">  </span>display:<span class="w"> </span>inline-block;
<span class="w">  </span>top:<span class="w"> </span>-40px;
<span class="w">  </span>left:<span class="w"> </span>calc(100%<span class="w"> </span>-<span class="w"> </span>52px);

<span class="w">  </span>/*
<span class="w">  </span>*<span class="w">  </span>Styling<span class="w"> </span>only,<span class="w"> </span>the<span class="w"> </span>below<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>changed<span class="w"> </span>or<span class="w"> </span>removed
<span class="w">  </span>*<span class="w">  </span>depending<span class="w"> </span>on<span class="w"> </span>your<span class="w"> </span>use<span class="w"> </span>case
<span class="w">  </span>*/
<span class="w">  </span>height:<span class="w"> </span>20px;
<span class="w">  </span>padding:<span class="w"> </span>10px<span class="w"> </span>10px;
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"navi"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"infoi"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"http://via.placeholder.com/32x20/000000/ffffff?text=?"</span><span class="w"> </span><span class="na">height=</span><span class="s">"20"</span><span class="w"> </span><span class="na">width=</span><span class="s">"32"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-all-child-elements-of-a-dom-node-in-javascript/" class="u-url">Remove all child elements of a DOM node in JavaScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-all-child-elements-of-a-dom-node-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:50:51+08:00" itemprop="datePublished" title="2023-02-17 03:50">2023-02-17 03:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How would I go about removing all of the child elements of a DOM node in
JavaScript?</p>
<p>Say I have the following (ugly) HTML:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;p</span><span class="w"> </span><span class="na">id=</span><span class="s">"foo"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;span&gt;</span>hello<span class="nt">&lt;/span&gt;</span>
<span class="w">    </span><span class="nt">&lt;div&gt;</span>world<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>

<p>And I grab the node I want like so:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">);</span>
</pre></div>

<p>How could I remove the children of <code>foo</code> so that just <code>&lt;p id="foo"&gt;&lt;/p&gt;</code> is
left?</p>
<p>Could I just do:</p>
<div class="code"><pre class="code literal-block">myNode.childNodes = new Array();
</pre></div>

<p>or should I be using some combination of <code>removeElement</code>?</p>
<p>I'd like the answer to be straight up DOM; though extra points if you also
provide an answer in jQuery along with the DOM-only answer.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>In 2022+, use the <code>replaceChildren()</code> API!</h3>
<p>Replacing all children can now be done with the (cross-browser supported)
<code>replaceChildren</code> API:</p>
<div class="code"><pre class="code literal-block">container.replaceChildren(...arrayOfNewChildren);
</pre></div>

<p>This will do both:</p>
<ul>
<li>remove all existing children, and</li>
<li>append all of the given new children, in one operation.</li>
</ul>
<p>You can also use this same API to just remove existing children, without
replacing them:</p>
<div class="code"><pre class="code literal-block">container.replaceChildren();
</pre></div>

<p><strong>This is fully supported in Chrome/Edge 86+, Firefox 78+, and Safari 14+.</strong>
It is fully specified behavior. This is likely to be <strong>faster</strong> than any other
proposed method here, since the removal of old children and addition of new
children is done without requiring <code>innerHTML</code>, and in one step instead of
multiple.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>In 2022+, use the <code>replaceChildren()</code> API!</h3>
<p>Replacing all children can now be done with the (cross-browser supported)
<code>replaceChildren</code> API:</p>
<div class="code"><pre class="code literal-block">container.replaceChildren(...arrayOfNewChildren);
</pre></div>

<p>This will do both:</p>
<ul>
<li>remove all existing children, and</li>
<li>append all of the given new children, in one operation.</li>
</ul>
<p>You can also use this same API to just remove existing children, without
replacing them:</p>
<div class="code"><pre class="code literal-block">container.replaceChildren();
</pre></div>

<p><strong>This is fully supported in Chrome/Edge 86+, Firefox 78+, and Safari 14+.</strong>
It is fully specified behavior. This is likely to be <strong>faster</strong> than any other
proposed method here, since the removal of old children and addition of new
children is done without requiring <code>innerHTML</code>, and in one step instead of
multiple.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-320.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-318.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
