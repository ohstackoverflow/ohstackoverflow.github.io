<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 964) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-964.html">
<link rel="prev" href="index-965.html" type="text/html">
<link rel="next" href="index-963.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-match-all-occurrences-of-a-regular-expression-in-ruby/" class="u-url">How to match all occurrences of a regular expression in Ruby</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-match-all-occurrences-of-a-regular-expression-in-ruby/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:51:39+08:00" itemprop="datePublished" title="2023-02-17 20:51">2023-02-17 20:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a quick way to find every match of a regular expression in Ruby? I've
looked through the Regex object in the Ruby STL and searched on Google to no
avail.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Using <code>scan</code> should do the trick:</p>
<div class="code"><pre class="code literal-block"><span class="k">string</span><span class="p">.</span><span class="n">scan</span><span class="p">(</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="p">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>To find all the matching strings, use String's <code>scan</code> method.</p>
<div class="code"><pre class="code literal-block">str = "A 54mpl3 string w1th 7 numb3rs scatter36 ar0und"
str.scan(/\d+/)
#=&gt; ["54", "3", "1", "7", "3", "36", "0"]
</pre></div>

<p>If you want, <code>MatchData</code>, which is the type of the object returned by the
Regexp <code>match</code> method, use:</p>
<div class="code"><pre class="code literal-block"><span class="nb">str</span><span class="o">.</span><span class="n">to_enum</span><span class="p">(:</span><span class="n">scan</span><span class="p">,</span><span class="w"> </span><span class="o">/</span>\<span class="n">d</span><span class="o">+/</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Regexp</span><span class="o">.</span><span class="n">last_match</span><span class="w"> </span><span class="p">}</span>
<span class="c1">#=&gt; [#&lt;MatchData "54"&gt;, #&lt;MatchData "3"&gt;, #&lt;MatchData "1"&gt;, #&lt;MatchData "7"&gt;, #&lt;MatchData "3"&gt;, #&lt;MatchData "36"&gt;, #&lt;MatchData "0"&gt;]</span>
</pre></div>

<p>The benefit of using <code>MatchData</code> is that you can use methods like <code>offset</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">match_datas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">str</span><span class="o">.</span><span class="n">to_enum</span><span class="p">(:</span><span class="n">scan</span><span class="p">,</span><span class="w"> </span><span class="o">/</span>\<span class="n">d</span><span class="o">+/</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Regexp</span><span class="o">.</span><span class="n">last_match</span><span class="w"> </span><span class="p">}</span>
<span class="n">match_datas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">#=&gt; [2, 4]</span>
<span class="n">match_datas</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">#=&gt; [7, 8]</span>
</pre></div>

<p>See these questions if you'd like to know more:</p>
<ul>
<li>"How do I get the match data for all occurrences of a Ruby regular expression in a string?"</li>
<li>"Ruby regular expression matching enumerator with named capture support"</li>
<li>"How to find out the starting point for each match in ruby"</li>
</ul>
<p>Reading about special variables <code>$&amp;</code>, <code>$'</code>, <code>$1</code>, <code>$2</code> in Ruby will be helpful
too.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-are-exclamation-marks-used-in-ruby-methods/" class="u-url">Why are exclamation marks used in Ruby methods?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-are-exclamation-marks-used-in-ruby-methods/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:51:09+08:00" itemprop="datePublished" title="2023-02-17 20:51">2023-02-17 20:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Ruby some methods have a question mark (<code>?</code>) that ask a question like
<code>include?</code> that ask if the object in question is included, this then returns a
true/false.</p>
<p>But why do some methods have exclamation marks (<code>!</code>) where others don't?</p>
<p>What does it mean?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In general, methods that end in <code>!</code> indicate that the method will <strong>modify the
object it's called on</strong>. Ruby calls these as " <strong>dangerous methods</strong> " because
they change state that someone else might have a reference to. Here's a simple
example for strings:</p>
<div class="code"><pre class="code literal-block">foo = "A STRING"  # a string called foo
foo.downcase!     # modifies foo itself
puts foo          # prints modified foo
</pre></div>

<p>This will output:</p>
<div class="code"><pre class="code literal-block">a string
</pre></div>

<p>In the standard libraries, there are a lot of places you'll see pairs of
similarly named methods, one with the <code>!</code> and one without. The ones without
are called "safe methods", and they return a copy of the original with changes
applied to <strong>the copy</strong> , with the callee unchanged. Here's the same example
without the <code>!</code>:</p>
<div class="code"><pre class="code literal-block">foo = "A STRING"    # a string called foo
bar = foo.downcase  # doesn't modify foo; returns a modified string
puts foo            # prints unchanged foo
puts bar            # prints newly created bar
</pre></div>

<p>This outputs:</p>
<div class="code"><pre class="code literal-block">A STRING
a string
</pre></div>

<p>Keep in mind this is just a convention, but a lot of Ruby classes follow it.
It also helps you keep track of what's getting modified in your code.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The exclamation point means many things, and sometimes you can't tell a lot
from it other than "this is dangerous, be careful".</p>
<p>As others have said, in standard methods it's often used to indicate a method
that causes an object to mutate itself, but not always. Note that many
standard methods change their receiver and don't have an exclamation point
(<code>pop</code>, <code>shift</code>, <code>clear</code>), and some methods with exclamation points don't
change their receiver (<code>exit!</code>). See this article for example.</p>
<p>Other libraries may use it differently. In Rails an exclamation point often
means that the method will throw an exception on failure rather than failing
silently.</p>
<p>It's a naming convention but many people use it in subtly different ways. In
your own code a good rule of thumbs is to use it whenever a method is doing
something "dangerous", especially when two methods with the same name exist
and one of them is more "dangerous" than the other. "Dangerous" can mean
nearly anything though.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/python-exit-commands-why-so-many-and-when-should-each-be-used/" class="u-url">Python exit commands - why so many and when should each be used?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/python-exit-commands-why-so-many-and-when-should-each-be-used/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:50:39+08:00" itemprop="datePublished" title="2023-02-17 20:50">2023-02-17 20:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It seems that python supports many different commands to stop script
execution.<br>
The choices I've found are: <code>quit()</code>, <code>exit()</code>, <code>sys.exit()</code>, <code>os._exit()</code></p>
<p>Have I missed any? What's the difference between them? When would you use
each?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The functions* <code>quit()</code>, <code>exit()</code>, and <code>sys.exit()</code> function in the same way:
they raise the <code>SystemExit</code> exception. So there is no real difference, except
that <code>sys.exit()</code> is always available but <code>exit()</code> and <code>quit()</code> are only
available if the <code>site</code> module is imported (docs).</p>
<p>The <code>os._exit()</code> function is special, it exits immediately without calling any
cleanup functions (it doesn't flush buffers, for example). This is designed
for highly specialized use cases... basically, only in the child after an
<code>os.fork()</code> call.</p>
<h3>Conclusion</h3>
<ul>
<li>
<p>Use <code>exit()</code> or <code>quit()</code> in the REPL.</p>
</li>
<li>
<p>Use <code>sys.exit()</code> in scripts, or <code>raise SystemExit()</code> if you prefer.</p>
</li>
<li>
<p>Use <code>os._exit()</code> for child processes to exit after a call to <code>os.fork()</code>.</p>
</li>
</ul>
<p>All of these can be called without arguments, or you can specify the exit
status, e.g., <code>exit(1)</code> or <code>raise SystemExit(1)</code> to exit with status 1. Note
that portable programs are limited to exit status codes in the range 0-255, if
you <code>raise SystemExit(256)</code> on many systems this will get truncated and your
process will actually exit with status 0.</p>
<h4>Footnotes</h4>
<ul>
<li>Actually, <code>quit()</code> and <code>exit()</code> are callable instance objects, but I think it's okay to call them functions.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>The functions* <code>quit()</code>, <code>exit()</code>, and <code>sys.exit()</code> function in the same way:
they raise the <code>SystemExit</code> exception. So there is no real difference, except
that <code>sys.exit()</code> is always available but <code>exit()</code> and <code>quit()</code> are only
available if the <code>site</code> module is imported (docs).</p>
<p>The <code>os._exit()</code> function is special, it exits immediately without calling any
cleanup functions (it doesn't flush buffers, for example). This is designed
for highly specialized use cases... basically, only in the child after an
<code>os.fork()</code> call.</p>
<h3>Conclusion</h3>
<ul>
<li>
<p>Use <code>exit()</code> or <code>quit()</code> in the REPL.</p>
</li>
<li>
<p>Use <code>sys.exit()</code> in scripts, or <code>raise SystemExit()</code> if you prefer.</p>
</li>
<li>
<p>Use <code>os._exit()</code> for child processes to exit after a call to <code>os.fork()</code>.</p>
</li>
</ul>
<p>All of these can be called without arguments, or you can specify the exit
status, e.g., <code>exit(1)</code> or <code>raise SystemExit(1)</code> to exit with status 1. Note
that portable programs are limited to exit status codes in the range 0-255, if
you <code>raise SystemExit(256)</code> on many systems this will get truncated and your
process will actually exit with status 0.</p>
<h4>Footnotes</h4>
<ul>
<li>Actually, <code>quit()</code> and <code>exit()</code> are callable instance objects, but I think it's okay to call them functions.</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-965.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-963.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
