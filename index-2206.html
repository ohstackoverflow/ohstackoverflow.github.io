<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2206) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2206.html">
<link rel="prev" href="index-2207.html" type="text/html">
<link rel="next" href="index-2205.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/are-email-addresses-case-sensitive/" class="u-url">Are email addresses case sensitive?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/are-email-addresses-case-sensitive/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T22:49:01+08:00" itemprop="datePublished" title="2023-03-03 22:49">2023-03-03 22:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've read that by standard first part of e-mail is case sensitive, however
I've tried to send e-mail to <code>name@example.com</code>, <code>Name@example.com</code> and
<code>NAME@example.com</code> - it has arrived in each case.</p>
<p>How do mail servers handles usernames? Is it possible to miss with case and
that message wouldn't be delivered? Is it really very important to use exactly
same letter case, as was written while registering when giving your e-mail
address?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From RFC 5321, section 2.3.11:</p>
<blockquote>
<p>The standard mailbox naming convention is defined to be "local-part@domain";
contemporary usage permits a much broader set of applications than simple
"user names". Consequently, and due to a long history of problems when
intermediate hosts have attempted to optimize transport by modifying them,
the local-part MUST be interpreted and assigned semantics only by the host
specified in the domain part of the address.</p>
</blockquote>
<p>So yes, the part before the "@" could be case-sensitive, since it is entirely
under the control of the host system. In practice though, no widely used mail
systems distinguish different addresses based on case.</p>
<p>The part after the @ sign however is the domain and according to RFC 1035,
section 3.1,</p>
<blockquote>
<p>"Name servers and resolvers must compare [domains] in a case-insensitive
manner"</p>
</blockquote>
<p>In short, you are safe to treat email addresses as case-insensitive.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I know this is an old question but I just want to comment here: To any extent
email addresses ARE case sensitive, most users would be "very unwise" to
actively use an email address that requires capitals. They would soon stop
using the address because they'd be missing a lot of their mail. (Unless they
have a specific reason to make things difficult, and they expect mail only
from specific senders they know.)</p>
<p>That's because imperfect humans as well as imperfect software exist,
(Surprise!) which will assume all email is lowercase, and for this reason
these humans and software will send messages using a "lower cased version" of
the address regardless of how it was provided to them. If the recipient is
unable to receive such messages, it won't be long before they notice they're
missing a lot, and switch to a lowercase-only email address, or get their
server set up to be case-insensitive.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-get-a-list-of-all-classes-within-current-module-in-python/" class="u-url">How can I get a list of all classes within current module in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-get-a-list-of-all-classes-within-current-module-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T22:47:40+08:00" itemprop="datePublished" title="2023-03-03 22:47">2023-03-03 22:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've seen plenty of examples of people extracting all of the classes from a
module, usually something like:</p>
<div class="code"><pre class="code literal-block"><span class="c1"># foo.py</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="c1"># test.py</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">foo</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">obj</span>
</pre></div>

<p>Awesome.</p>
<p>But I can't find out how to get all of the classes from the <em>current</em> module.</p>
<div class="code"><pre class="code literal-block"><span class="c1"># foo.py</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">print_classes</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="err">???</span><span class="p">):</span> <span class="c1"># what do I do here?</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="nb">print</span> <span class="n">obj</span>

<span class="c1"># test.py</span>
<span class="kn">import</span> <span class="nn">foo</span>

<span class="n">foo</span><span class="o">.</span><span class="n">print_classes</span><span class="p">()</span>
</pre></div>

<p>This is probably something really obvious, but I haven't been able to find
anything. Can anyone help me out?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try this:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">current_module</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span>
</pre></div>

<p>In your context:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">inspect</span>
<span class="k">def</span> <span class="nf">print_classes</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>

<p>And even better:</p>
<div class="code"><pre class="code literal-block"><span class="n">clsmembers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inspect</span><span class="p">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">modules</span><span class="o">[</span><span class="n">__name__</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">inspect</span><span class="p">.</span><span class="n">isclass</span><span class="p">)</span>
</pre></div>

<p>Because <code>inspect.getmembers()</code> takes a predicate.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I don't know if there's a 'proper' way to do it, but your snippet is on the
right track: just add <code>import foo</code> to foo.py, do <code>inspect.getmembers(foo)</code>,
and it should work fine.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/does-use-of-final-keyword-in-java-improve-the-performance/" class="u-url">Does use of final keyword in Java improve the performance?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/does-use-of-final-keyword-in-java-improve-the-performance/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T22:46:13+08:00" itemprop="datePublished" title="2023-03-03 22:46">2023-03-03 22:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Java we see lots of places where the <code>final</code> keyword can be used but its
use is uncommon.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block">String str = "abc";
System.out.println(str);
</pre></div>

<p>In the above case, <code>str</code> can be <code>final</code> but this is commonly left off.</p>
<p>When a method is never going to be overridden we can use final keyword.
Similarly in case of a class which is not going to be inherited.</p>
<p>Does the use of final keyword in any or all of these cases really improve
performance? If so, then how? Please explain. If the proper use of <code>final</code>
really matters for performance, what habits should a Java programmer develop
to make best use of the keyword?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Usually not. For virtual methods, HotSpot keeps track of whether the method
has <em>actually</em> been overridden, and is able to perform optimizations such as
inlining on the <em>assumption</em> that a method hasn't been overridden - until it
loads a class which overrides the method, at which point it can undo (or
partially undo) those optimizations.</p>
<p>(Of course, this is assuming you're using HotSpot - but it's by far the most
common JVM, so...)</p>
<p>To my mind you should use <code>final</code> based on clear design and readability rather
than for performance reasons. If you want to change anything for performance
reasons, you should perform appropriate measurements before bending the
clearest code out of shape - that way you can decide whether any extra
performance achieved is worth the poorer readability/design. (In my experience
it's almost never worth it; YMMV.)</p>
<p>EDIT: As final fields have been mentioned, it's worth bringing up that they
are often a good idea anyway, in terms of clear design. They also change the
guaranteed behaviour in terms of cross-thread visibility: after a constructor
has completed, any final fields are guaranteed to be visible in other threads
immediately. This is probably the most common use of <code>final</code> in my experience,
although as a supporter of Josh Bloch's "design for inheritance or prohibit
it" rule of thumb, I should probably use <code>final</code> more often for classes...</p>
<p><br></p>
<h3>Suggest</h3>
<p>Short answer: don't worry about it!</p>
<p>Long answer:</p>
<p>When talking about <em>final local variables</em> keep in mind that using the keyword
<code>final</code> will help the compiler optimize the code <em>statically</em> , which may in
the end result in faster code. For example, the final Strings <code>a + b</code> in the
example below are concatenated statically (at compile time).</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">FinalTest</span><span class="w"> </span>{

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">final</span><span class="w"> </span><span class="nv">int</span><span class="w"> </span><span class="nv">N_ITERATIONS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000000</span><span class="c1">;</span>

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">testFinal</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">final</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"a"</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">final</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"b"</span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">b</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">testNonFinal</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">String</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"a"</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">String</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"b"</span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">b</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">main</span><span class="ss">(</span><span class="nv">String</span>[]<span class="w"> </span><span class="nv">args</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">long</span><span class="w"> </span><span class="nv">tStart</span>,<span class="w"> </span><span class="nv">tElapsed</span><span class="c1">;</span>

<span class="w">        </span><span class="nv">tStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="c1">; i &lt; N_ITERATIONS; i++)</span>
<span class="w">            </span><span class="nv">testFinal</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">tElapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">tStart</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"Method with finals took "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">tElapsed</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" ms"</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">        </span><span class="nv">tStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="c1">; i &lt; N_ITERATIONS; i++)</span>
<span class="w">            </span><span class="nv">testNonFinal</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">tElapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">tStart</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"Method without finals took "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">tElapsed</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" ms"</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">    </span>}

}
</pre></div>

<p>The result?</p>
<div class="code"><pre class="code literal-block">Method with finals took 5 ms
Method without finals took 273 ms
</pre></div>

<p>Tested on Java Hotspot VM 1.7.0_45-b18.</p>
<p>So how much is the actual performance improvement? I don't dare say. In most
cases probably marginal (~270 nanoseconds in this synthetic test because the
string concatenation is avoided altogether - a rare case), but in highly
optimized utility code it <em>might</em> be a factor. In any case the answer to the
original question is <em>yes, it might improve performance, but marginally at
best</em>.</p>
<p>Compile-time benefits aside, I could not find any evidence that the use of the
keyword <code>final</code> has any measurable effect on performance.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2207.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2205.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
