<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 314) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-314.html">
<link rel="prev" href="index-315.html" type="text/html">
<link rel="next" href="index-313.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-xiang-xian-you-dataframe-tian-jia-xin-lie/" class="u-url">如何向现有 DataFrame 添加新列？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-xiang-xian-you-dataframe-tian-jia-xin-lie/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:48:51+08:00" itemprop="datePublished" title="2023-02-17 03:48">2023-02-17 03:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我有以下索引的 DataFrame，其中命名的列和行不是连续的数字：</p>
<div class="code"><pre class="code literal-block">          a         b         c         d
2  0.671399  0.101208 -0.181532  0.241273
3  0.446172 -0.243316  0.051767  1.577318
5  0.614758  0.075793 -0.451460 -0.012493
</pre></div>

<p>我想<code>'e'</code>向现有数据框添加一个新列，并且不想更改数据框中的任何内容（即，新列的长度始终与 DataFrame 相同）。</p>
<div class="code"><pre class="code literal-block"><span class="mf">0</span><span class="w">   </span><span class="o">-</span><span class="mf">0.335485</span>
<span class="mf">1</span><span class="w">   </span><span class="o">-</span><span class="mf">1.166658</span>
<span class="mf">2</span><span class="w">   </span><span class="o">-</span><span class="mf">0.385571</span>
<span class="n">dtype</span><span class="p">:</span><span class="w"> </span><span class="n">float64</span>
</pre></div>

<p>如何<code>e</code>在上面的示例中添加列？</p>
<p><br><br></p>
<h2>解答</h2>
<p><strong>编辑 2017</strong></p>
<p>正如评论和@Alexander 所指出的，目前将 Series 的值添​​加为 DataFrame 的新列的最佳方法可能是使用 <strong><code>assign</code></strong> ：</p>
<div class="code"><pre class="code literal-block"><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df1</span><span class="p">.</span><span class="k">assign</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="n">sLength</span><span class="p">)).</span><span class="n">values</span><span class="p">)</span>
</pre></div>

<hr>
<p><strong>编辑 2015</strong><br>
一些人报告说使用<code>SettingWithCopyWarning</code>此代码获得了。<br>
但是，代码仍然可以与当前的 pandas 版本 0.16.1 完美运行。</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">sLength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">df1</span>[<span class="s1">'a'</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>
<span class="w">          </span><span class="nv">a</span><span class="w">         </span><span class="nv">b</span><span class="w">         </span><span class="nv">c</span><span class="w">         </span><span class="nv">d</span>
<span class="mi">6</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">269221</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">026476</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">997517</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">294385</span>
<span class="mi">8</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">917438</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">847941</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">034235</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">448948</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>[<span class="s1">'e'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">Series</span><span class="ss">(</span><span class="nv">np</span>.<span class="k">random</span>.<span class="nv">randn</span><span class="ss">(</span><span class="nv">sLength</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">index</span><span class="o">=</span><span class="nv">df1</span>.<span class="nv">index</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>
<span class="w">          </span><span class="nv">a</span><span class="w">         </span><span class="nv">b</span><span class="w">         </span><span class="nv">c</span><span class="w">         </span><span class="nv">d</span><span class="w">         </span><span class="nv">e</span>
<span class="mi">6</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">269221</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">026476</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">997517</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">294385</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">757167</span>
<span class="mi">8</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">917438</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">847941</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">034235</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">448948</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">228131</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">version</span>.<span class="nv">short_version</span>
<span class="s1">'0.16.1'</span>
</pre></div>

<p>目的<code>SettingWithCopyWarning</code>是通知 Dataframe 副本上可能无效的分配。它不一定说你做错了（它可能会触发误报）但从
0.13.0 开始它会让你知道有更多适合相同目的的方法。然后，如果您收到警告，请遵循其建议： <em>尝试使用
.loc[row_index,col_indexer] = value instead</em></p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>.<span class="nv">loc</span>[:,<span class="s1">'f'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">Series</span><span class="ss">(</span><span class="nv">np</span>.<span class="k">random</span>.<span class="nv">randn</span><span class="ss">(</span><span class="nv">sLength</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">index</span><span class="o">=</span><span class="nv">df1</span>.<span class="nv">index</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">df1</span>
<span class="w">          </span><span class="nv">a</span><span class="w">         </span><span class="nv">b</span><span class="w">         </span><span class="nv">c</span><span class="w">         </span><span class="nv">d</span><span class="w">         </span><span class="nv">e</span><span class="w">         </span><span class="nv">f</span>
<span class="mi">6</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">269221</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">026476</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">997517</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">294385</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">757167</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">050927</span>
<span class="mi">8</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">917438</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">847941</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">034235</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">448948</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">228131</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">006109</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p>事实上，这是目前pandas docs 中描述的更有效的方法</p>
<hr>
<p>原答案：</p>
<p>使用原始的 df1 索引创建系列：</p>
<div class="code"><pre class="code literal-block"><span class="nv">df1</span>[<span class="s1">'e'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">Series</span><span class="ss">(</span><span class="nv">np</span>.<span class="k">random</span>.<span class="nv">randn</span><span class="ss">(</span><span class="nv">sLength</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">index</span><span class="o">=</span><span class="nv">df1</span>.<span class="nv">index</span><span class="ss">)</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>这是添加新列的简单方法：<code>df['e'] = e</code></p>
<p><br><br><a href="posts/how-to-add-a-new-column-to-an-existing-dataframe/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-shi-lei-json-ke-xu-lie-hua/" class="u-url">如何使类 JSON 可序列化</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-shi-lei-json-ke-xu-lie-hua/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:48:22+08:00" itemprop="datePublished" title="2023-02-17 03:48">2023-02-17 03:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>如何使 Python 类可序列化？</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">FileItem:</span>
    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>, <span class="n">fname</span>):
        <span class="nb">self</span>.<span class="n">fname</span> = <span class="n">fname</span>
</pre></div>

<p>尝试序列化为 JSON：</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">json</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">FileItem</span><span class="p">(</span><span class="s1">'/foo/bar'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">Object</span> <span class="n">of</span> <span class="nb">type</span> <span class="s1">'FileItem'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">JSON</span> <span class="n">serializable</span>
</pre></div>

<p><br><br></p>
<h2>解答</h2>
<p>你知道预期的输出吗？比如，这样行吗？</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; f  = FileItem("/foo/bar")
&gt;&gt;&gt; magic(f)
'{"fname": "/foo/bar"}'
</pre></div>

<p>在那种情况下，您只能调用<code>json.dumps(f.__dict__)</code>.</p>
<p>如果您想要更多自定义输出，那么您将不得不子类化<code>JSONEncoder</code>并实现您自己的自定义序列化。</p>
<p>有关一个简单的示例，请参见下文。</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">JSONEncoder</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">MyEncoder</span><span class="p">(</span><span class="n">JSONEncoder</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">MyEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="s1">'{"fname": "/foo/bar"}'</span>
</pre></div>

<p>然后将此类<code>json.dumps()</code>作为<code>cls</code>kwarg 传递到方法中：</p>
<div class="code"><pre class="code literal-block">json.dumps(cls=MyEncoder)
</pre></div>

<p>如果您还想解码，则必须<code>object_hook</code>为该类提供自定义<code>JSONDecoder</code>。例如：</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">(</span><span class="nv">json_object</span><span class="ss">)</span>:
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="s1">'fname'</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">json_object</span>:
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nv">FileItem</span><span class="ss">(</span><span class="nv">json_object</span>[<span class="s1">'fname'</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">JSONDecoder</span><span class="ss">(</span><span class="nv">object_hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">)</span>.<span class="nv">decode</span><span class="ss">(</span><span class="s1">'{"fname": "/foo/bar"}'</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span>
<span class="o">&lt;</span><span class="nv">__main__</span>.<span class="nv">FileItem</span><span class="w"> </span><span class="nv">object</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="mi">0</span><span class="nv">x9337fac</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>你知道预期的输出吗？比如，这样行吗？</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; f  = FileItem("/foo/bar")
&gt;&gt;&gt; magic(f)
'{"fname": "/foo/bar"}'
</pre></div>

<p>在那种情况下，您只能调用<code>json.dumps(f.__dict__)</code>.</p>
<p>如果您想要更多自定义输出，那么您将不得不子类化<code>JSONEncoder</code>并实现您自己的自定义序列化。</p>
<p>有关一个简单的示例，请参见下文。</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">JSONEncoder</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">MyEncoder</span><span class="p">(</span><span class="n">JSONEncoder</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">MyEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="s1">'{"fname": "/foo/bar"}'</span>
</pre></div>

<p>然后将此类<code>json.dumps()</code>作为<code>cls</code>kwarg 传递到方法中：</p>
<div class="code"><pre class="code literal-block">json.dumps(cls=MyEncoder)
</pre></div>

<p>如果您还想解码，则必须<code>object_hook</code>为该类提供自定义<code>JSONDecoder</code>。例如：</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">(</span><span class="nv">json_object</span><span class="ss">)</span>:
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="s1">'fname'</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">json_object</span>:
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nv">FileItem</span><span class="ss">(</span><span class="nv">json_object</span>[<span class="s1">'fname'</span>]<span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">JSONDecoder</span><span class="ss">(</span><span class="nv">object_hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">from_json</span><span class="ss">)</span>.<span class="nv">decode</span><span class="ss">(</span><span class="s1">'{"fname": "/foo/bar"}'</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span>
<span class="o">&lt;</span><span class="nv">__main__</span>.<span class="nv">FileItem</span><span class="w"> </span><span class="nv">object</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="mi">0</span><span class="nv">x9337fac</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p><br><br><a href="posts/how-to-make-a-class-json-serializable/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-jiang-dan-ge-wen-jian-de-yi-ge-ban-ben-cong-yi-ge-git-fen-zhi-fu-zhi-dao-ling-yi-ge-fen-zhi/" class="u-url">如何将单个文件的一个版本从一个 Git 分支复制到另一个分支？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-jiang-dan-ge-wen-jian-de-yi-ge-ban-ben-cong-yi-ge-git-fen-zhi-fu-zhi-dao-ling-yi-ge-fen-zhi/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:47:51+08:00" itemprop="datePublished" title="2023-02-17 03:47">2023-02-17 03:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我有两个完全合并在一起的分支。</p>
<p>然而，在合并完成后，我意识到一个文件已经被合并弄乱了（其他人做了自动格式化，gah），并且在另一个分支中更改为新版本会更容易，并且然后在将它带到我的分支机构后重新插入我的一行更改。</p>
<p>那么在 Git 中最简单的方法是什么？</p>
<p><br><br></p>
<h2>解答</h2>
<p>从您希望文件结束的分支运行此命令：</p>
<div class="code"><pre class="code literal-block">git checkout otherbranch myfile.txt
</pre></div>

<p>一般公式：</p>
<div class="code"><pre class="code literal-block">git checkout &lt;commit_hash&gt; &lt;relative_path_to_file_or_dir&gt;
git checkout &lt;remote_name&gt;/&lt;branch_name&gt; &lt;file_or_dir&gt;
</pre></div>

<p>一些注意事项（来自评论）：</p>
<ul>
<li>使用提交哈希，您可以从任何提交中提取文件</li>
<li>这适用于文件和目录</li>
<li>覆盖文件<code>myfile.txt</code>和<code>mydir</code>
</li>
<li>通配符不起作用，但相对路径可以</li>
<li>可以指定多个路径</li>
</ul>
<p>替代：</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="nv">commit_id</span>:<span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">file</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">file</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>我会使用<code>git restore</code>（自 Git 2.23 起可用）：</p>
<div class="code"><pre class="code literal-block">git restore --source otherbranch path/to/myfile.txt
</pre></div>

<hr>
<p>为什么这比其他选项更好？</p>
<ul>
<li>默认情况下<code>git restore</code>只修改工作目录中的文件</li>
</ul>
<p><code>git checkout otherbranch --
path/to/myfile.txt</code>将文件复制到工作目录（磁盘上的文件），但也复制到暂存区。它与您手动复制文件并<code>git
add</code>在其上执行的效果相同。<code>git restore</code>默认情况下只更改工作目录。</p>
<p>要获得与您相同的结果，<code>git checkout otherbranch -- path/to/myfile.txt</code>您可以编写<code>git restore
--source otherbranch --staged --worktree path/to/myfile.txt</code></p>
<ul>
<li>默认情况下，<code>git restore</code>当其他分支中不存在文件时，从工作目录中删除文件</li>
</ul>
<p><code>git restore</code>可用于恢复整个文件夹<code>git restore --source otherbranch
path/to/dir</code>。您可以执行类似的操作，<code>git checkout</code>但<code>git restore</code>默认情况下会删除<code>otherbranch</code>.
要获得<code>git checkout</code>行为使用<code>--overlay</code>选项。</p>
<p>例如，如果<code>otherbranch</code>当前工作目录中的文件少于当前工作目录中的文件（并且这些文件被 <em>跟踪</em> ），则没有<code>--overlay</code>选项<code>git
restore</code>将删除它们。但这是一个很好的默认行为，因为您很可能希望目录的状态“与”相同，而不是“与当前分支中的其他文件<code>otherbranch</code>相同”。<code>otherbranch</code></p>
<p>要获得与您相同的结果，<code>git checkout otherbranch -- path/to/dir</code>您可以编写<code>git restore --source
otherbranch --staged --worktree --overlay path/to/dir</code></p>
<ul>
<li>
<code>git restore</code>不使用 shell 重定向来创建文件（仅 Powershell 问题）</li>
</ul>
<p><code>git show otherbranch:path/to/myfile.txt &gt; path/to/myfile.txt</code>使用标准的 shell
重定向。如果您使用 PowerShell，那么文本编码可能会出现问题，或者如果它是二进制文件，则可能会导致文件损坏。更改<code>git
restore</code>文件全部由可执行文件完成<code>git</code>。</p>
<p><br><br><a href="posts/how-do-i-copy-a-version-of-a-single-file-from-one-git-branch-to-another/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-315.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-313.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
