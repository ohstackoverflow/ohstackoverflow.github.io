<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 70) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-70.html">
<link rel="prev" href="index-71.html" type="text/html">
<link rel="next" href="index-69.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/from-inside-of-a-docker-container-how-do-i-connect-to-the-localhost-of-the-machine/" class="u-url">From inside of a Docker container, how do I connect to the localhost of the machine?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/from-inside-of-a-docker-container-how-do-i-connect-to-the-localhost-of-the-machine/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T20:18:38+08:00" itemprop="datePublished" title="2023-02-16 20:18">2023-02-16 20:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a Nginx running inside a docker container. I have a MySql running on
the host system. I want to connect to the MySql from within my container.
MySql is only binding to the localhost device.</p>
<p>Is there any way to connect to this MySql or any other program on localhost
from within this docker container?</p>
<p>This question is different from "How to get the IP address of the docker host
from inside a docker container" due to the fact that the IP address of the
docker host could be the public IP or the private IP in the network which may
or may not be reachable from within the docker container (I mean public IP if
hosted at AWS or something). Even if you have the IP address of the docker
host it does not mean you can connect to docker host from within the container
given that IP address as your Docker network may be overlay, host, bridge,
macvlan, none etc which restricts the reachability of that IP address.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Edit:</strong></p>
<p>If you are using Docker-for-mac or Docker-for-Windows 18.03+, connect to your
mysql service using the host <code>host.docker.internal</code> (instead of the
<code>127.0.0.1</code> in your connection string).</p>
<p>If you are using Docker-for-Linux 20.10.0+, you can also use the host
<code>host.docker.internal</code> <strong>if</strong> you started your Docker container with the
<code>--add-host host.docker.internal:host-gateway</code> option.</p>
<p>Otherwise, read below</p>
<hr>
<h3>TLDR</h3>
<p>Use <code>--network="host"</code> in your <code>docker run</code> command, then <code>127.0.0.1</code> in your
docker container will point to your docker host.</p>
<p>Note: This mode only works on Docker for Linux, per the documentation.</p>
<hr>
<h2>Note on docker container networking modes</h2>
<p>Docker offers different networking modes when running containers. Depending on
the mode you choose you would connect to your MySQL database running on the
docker host differently.</p>
<h3>docker run --network="bridge" (default)</h3>
<p>Docker creates a bridge named <code>docker0</code> by default. Both the docker host and
the docker containers have an IP address on that bridge.</p>
<p>on the Docker host, type <code>sudo ip addr show docker0</code> you will have an output
looking like:</p>
<div class="code"><pre class="code literal-block"><span class="o">[</span><span class="n">vagrant@docker:~</span><span class="o">]</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">docker0</span>
<span class="mi">4</span><span class="err">:</span><span class="w"> </span><span class="nl">docker0</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="p">,</span><span class="n">MULTICAST</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">noqueue</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">default</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">56</span><span class="err">:</span><span class="mi">84</span><span class="err">:</span><span class="mi">7</span><span class="nl">a</span><span class="p">:</span><span class="nl">fe</span><span class="p">:</span><span class="mi">97</span><span class="err">:</span><span class="mi">99</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">172.17.42.1</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">docker0</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="nl">fe80</span><span class="p">:</span><span class="err">:</span><span class="mi">5484</span><span class="err">:</span><span class="mi">7</span><span class="nl">aff</span><span class="p">:</span><span class="nl">fefe</span><span class="p">:</span><span class="mi">9799</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="n">link</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
</pre></div>

<p>So here my docker host has the IP address <code>172.17.42.1</code> on the <code>docker0</code>
network interface.</p>
<p>Now start a new container and get a shell on it: <code>docker run --rm -it
ubuntu:trusty bash</code> and within the container type <code>ip addr show eth0</code> to
discover how its main network interface is set up:</p>
<div class="code"><pre class="code literal-block"><span class="n">root</span><span class="nv">@e77f6a1b3740</span><span class="err">:</span><span class="o">/</span><span class="err">#</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">eth0</span>
<span class="mi">863</span><span class="err">:</span><span class="w"> </span><span class="nl">eth0</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">pfifo_fast</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">66</span><span class="err">:</span><span class="mi">32</span><span class="err">:</span><span class="mi">13</span><span class="err">:</span><span class="nl">f0</span><span class="p">:</span><span class="nl">f1</span><span class="p">:</span><span class="n">e3</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">172.17.1.192</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">eth0</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="nl">fe80</span><span class="p">:</span><span class="err">:</span><span class="mi">6432</span><span class="err">:</span><span class="mi">13</span><span class="nl">ff</span><span class="p">:</span><span class="nl">fef0</span><span class="p">:</span><span class="n">f1e3</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="n">link</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
</pre></div>

<p>Here my container has the IP address <code>172.17.1.192</code>. Now look at the routing
table:</p>
<div class="code"><pre class="code literal-block"><span class="n">root</span><span class="nv">@e77f6a1b3740</span><span class="err">:</span><span class="o">/</span><span class="err">#</span><span class="w"> </span><span class="n">route</span>
<span class="n">Kernel</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">routing</span><span class="w"> </span><span class="nc">table</span>
<span class="n">Destination</span><span class="w">     </span><span class="n">Gateway</span><span class="w">         </span><span class="n">Genmask</span><span class="w">         </span><span class="n">Flags</span><span class="w"> </span><span class="n">Metric</span><span class="w"> </span><span class="k">Ref</span><span class="w">    </span><span class="k">Use</span><span class="w"> </span><span class="n">Iface</span>
<span class="k">default</span><span class="w">         </span><span class="mf">172.17.42.1</span><span class="w">     </span><span class="mf">0.0.0.0</span><span class="w">         </span><span class="n">UG</span><span class="w">    </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">        </span><span class="mi">0</span><span class="w"> </span><span class="n">eth0</span>
<span class="mf">172.17.0.0</span><span class="w">      </span><span class="o">*</span><span class="w">               </span><span class="mf">255.255.0.0</span><span class="w">     </span><span class="n">U</span><span class="w">     </span><span class="mi">0</span><span class="w">      </span><span class="mi">0</span><span class="w">        </span><span class="mi">0</span><span class="w"> </span><span class="n">eth0</span>
</pre></div>

<p>So the IP Address of the docker host <code>172.17.42.1</code> is set as the default route
and is accessible from your container.</p>
<div class="code"><pre class="code literal-block"><span class="n">root</span><span class="nv">@e77f6a1b3740</span><span class="err">:</span><span class="o">/</span><span class="err">#</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span><span class="mf">172.17.42.1</span>
<span class="n">PING</span><span class="w"> </span><span class="mf">172.17.42.1</span><span class="w"> </span><span class="p">(</span><span class="mf">172.17.42.1</span><span class="p">)</span><span class="w"> </span><span class="mi">56</span><span class="p">(</span><span class="mi">84</span><span class="p">)</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">data</span><span class="p">.</span>
<span class="mi">64</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mf">172.17.42.1</span><span class="err">:</span><span class="w"> </span><span class="n">icmp_seq</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="n">ttl</span><span class="o">=</span><span class="mi">64</span><span class="w"> </span><span class="nc">time</span><span class="o">=</span><span class="mf">0.070</span><span class="w"> </span><span class="n">ms</span>
<span class="mi">64</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mf">172.17.42.1</span><span class="err">:</span><span class="w"> </span><span class="n">icmp_seq</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="n">ttl</span><span class="o">=</span><span class="mi">64</span><span class="w"> </span><span class="nc">time</span><span class="o">=</span><span class="mf">0.201</span><span class="w"> </span><span class="n">ms</span>
<span class="mi">64</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mf">172.17.42.1</span><span class="err">:</span><span class="w"> </span><span class="n">icmp_seq</span><span class="o">=</span><span class="mi">3</span><span class="w"> </span><span class="n">ttl</span><span class="o">=</span><span class="mi">64</span><span class="w"> </span><span class="nc">time</span><span class="o">=</span><span class="mf">0.116</span><span class="w"> </span><span class="n">ms</span>
</pre></div>

<h3>docker run --network="host"</h3>
<p>Alternatively you can run a docker container with network settings set to
<code>host</code>. Such a container will share the network stack with the docker host and
from the container point of view, <code>localhost</code> (or <code>127.0.0.1</code>) will refer to
the docker host.</p>
<p>Be aware that any port opened in your docker container would be opened on the
docker host. And this without requiring the <code>-p</code> or <code>-P</code> <code>docker run</code> option.</p>
<p>IP config on my docker host:</p>
<div class="code"><pre class="code literal-block"><span class="o">[</span><span class="n">vagrant@docker:~</span><span class="o">]</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">eth0</span>
<span class="mi">2</span><span class="err">:</span><span class="w"> </span><span class="nl">eth0</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="p">,</span><span class="n">MULTICAST</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">pfifo_fast</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">27</span><span class="err">:</span><span class="mi">98</span><span class="err">:</span><span class="nl">dc</span><span class="p">:</span><span class="n">aa</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">10.0.2.15</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="mf">10.0.2.255</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">eth0</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="nl">fe80</span><span class="p">:</span><span class="err">:</span><span class="nl">a00</span><span class="p">:</span><span class="mi">27</span><span class="nl">ff</span><span class="p">:</span><span class="nl">fe98</span><span class="p">:</span><span class="n">dcaa</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="n">link</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
</pre></div>

<p>and from a docker container in <strong>host</strong> mode:</p>
<div class="code"><pre class="code literal-block"><span class="o">[</span><span class="n">vagrant@docker:~</span><span class="o">]</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">it</span><span class="w"> </span><span class="o">--</span><span class="n">network</span><span class="o">=</span><span class="k">host</span><span class="w"> </span><span class="nl">ubuntu</span><span class="p">:</span><span class="n">trusty</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">addr</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">eth0</span>
<span class="mi">2</span><span class="err">:</span><span class="w"> </span><span class="nl">eth0</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="p">,</span><span class="n">MULTICAST</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">pfifo_fast</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">00</span><span class="err">:</span><span class="mi">27</span><span class="err">:</span><span class="mi">98</span><span class="err">:</span><span class="nl">dc</span><span class="p">:</span><span class="n">aa</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">10.0.2.15</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="mf">10.0.2.255</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">eth0</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="nl">fe80</span><span class="p">:</span><span class="err">:</span><span class="nl">a00</span><span class="p">:</span><span class="mi">27</span><span class="nl">ff</span><span class="p">:</span><span class="nl">fe98</span><span class="p">:</span><span class="n">dcaa</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="n">link</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
</pre></div>

<p>As you can see both the docker host and docker container share the exact same
network interface and as such have the same IP address.</p>
<hr>
<h2>Connecting to MySQL from containers</h2>
<h3>bridge mode</h3>
<p>To access MySQL running on the docker host from containers in <em>bridge mode</em> ,
you need to make sure the MySQL service is listening for connections on the
<code>172.17.42.1</code> IP address.</p>
<p>To do so, make sure you have either <code>bind-address = 172.17.42.1</code> or <code>bind-
address = 0.0.0.0</code> in your MySQL config file (my.cnf).</p>
<p>If you need to set an environment variable with the IP address of the gateway,
you can run the following code in a container :</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">DOCKER_HOST_IP</span><span class="o">=$</span><span class="p">(</span><span class="n">route</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">awk</span><span class="w"> </span><span class="s1">'/UG[ </span><span class="se">\t</span><span class="s1">]/{print $2}'</span><span class="p">)</span>
</pre></div>

<p>then in your application, use the <code>DOCKER_HOST_IP</code> environment variable to
open the connection to MySQL.</p>
<p><strong>Note:</strong> if you use <code>bind-address = 0.0.0.0</code> your MySQL server will listen
for connections on all network interfaces. That means your MySQL server could
be reached from the Internet ; make sure to set up firewall rules accordingly.</p>
<p><strong>Note 2:</strong> if you use <code>bind-address = 172.17.42.1</code> your MySQL server won't
listen for connections made to <code>127.0.0.1</code>. Processes running on the docker
host that would want to connect to MySQL would have to use the <code>172.17.42.1</code>
IP address.</p>
<h3>host mode</h3>
<p>To access MySQL running on the docker host from containers in <em>host mode</em> ,
you can keep <code>bind-address = 127.0.0.1</code> in your MySQL configuration and
connect to <code>127.0.0.1</code> from your containers:</p>
<div class="code"><pre class="code literal-block"><span class="o">[</span><span class="n">vagrant@docker:~</span><span class="o">]</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">it</span><span class="w"> </span><span class="o">--</span><span class="n">network</span><span class="o">=</span><span class="k">host</span><span class="w"> </span><span class="n">mysql</span><span class="w"> </span><span class="n">mysql</span><span class="w"> </span><span class="o">-</span><span class="n">h</span><span class="w"> </span><span class="mf">127.0.0.1</span><span class="w"> </span><span class="o">-</span><span class="n">uroot</span><span class="w"> </span><span class="o">-</span><span class="n">p</span>
<span class="n">Enter</span><span class="w"> </span><span class="nl">password</span><span class="p">:</span>
<span class="n">Welcome</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">monitor</span><span class="p">.</span><span class="w">  </span><span class="n">Commands</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="err">\</span><span class="n">g</span><span class="p">.</span>
<span class="n">Your</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="k">connection</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mi">36</span>
<span class="n">Server</span><span class="w"> </span><span class="nl">version</span><span class="p">:</span><span class="w"> </span><span class="mf">5.5.41</span><span class="o">-</span><span class="mi">0</span><span class="n">ubuntu0</span><span class="mf">.14.04.1</span><span class="w"> </span><span class="p">(</span><span class="n">Ubuntu</span><span class="p">)</span>

<span class="n">Copyright</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">2014</span><span class="p">,</span><span class="w"> </span><span class="n">Oracle</span><span class="w"> </span><span class="ow">and</span><span class="o">/</span><span class="ow">or</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">affiliates</span><span class="p">.</span><span class="w"> </span><span class="ow">All</span><span class="w"> </span><span class="n">rights</span><span class="w"> </span><span class="n">reserved</span><span class="p">.</span>

<span class="n">Oracle</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="n">trademark</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">Oracle</span><span class="w"> </span><span class="n">Corporation</span><span class="w"> </span><span class="ow">and</span><span class="o">/</span><span class="ow">or</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">affiliates</span><span class="p">.</span><span class="w"> </span><span class="n">Other</span><span class="w"> </span><span class="k">names</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">trademarks</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">respective</span><span class="w"> </span><span class="n">owners</span><span class="p">.</span>

<span class="n">Type</span><span class="w"> </span><span class="s1">'help;'</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">'\h'</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">help</span><span class="p">.</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="s1">'\c'</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="k">statement</span><span class="p">.</span>

<span class="n">mysql</span><span class="o">&gt;</span>
</pre></div>

<p><strong>note:</strong> Do use <code>mysql -h 127.0.0.1</code> and not <code>mysql -h localhost</code>; otherwise
the MySQL client would try to connect using a unix socket.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>For all platforms</h2>
<p><strong>Docker v 20.10 and above (since December 14th 2020)</strong></p>
<p>Use your internal IP address or connect to the special DNS name
<code>host.docker.internal</code> which will resolve to the internal IP address used by
the host.</p>
<p><em>On Linux, using the <strong>Docker</strong> command, add <code>--add-
host=host.docker.internal:host-gateway</code> to your Docker command to enable this
feature.</em></p>
<p><em>To enable this in <strong>Docker Compose</strong> on Linux, add the following lines to the
container definition:</em></p>
<div class="code"><pre class="code literal-block">extra_hosts:
    - "host.docker.internal:host-gateway"
</pre></div>

<h3>For older macOS and Windows versions of Docker</h3>
<p><strong>Docker v 18.03 and above (since March 21st 2018)</strong></p>
<p>Use your internal IP address or connect to the special DNS name
<code>host.docker.internal</code> which will resolve to the internal IP address used by
the host.</p>
<p>Linux support pending https://github.com/docker/for-linux/issues/264</p>
<h3>For older macOS versions of Docker</h3>
<p><strong>Docker for Mac v 17.12 to v 18.02</strong></p>
<p>Same as above but use <code>docker.for.mac.host.internal</code> instead.</p>
<p><strong>Docker for Mac v 17.06 to v 17.11</strong></p>
<p>Same as above but use <code>docker.for.mac.localhost</code> instead.</p>
<p><strong>Docker for Mac 17.05 and below</strong></p>
<p>To access host machine from the docker container you must attach an IP alias
to your network interface. You can bind whichever IP you want, just make sure
you're not using it to anything else.</p>
<p><code>sudo ifconfig lo0 alias 123.123.123.123/24</code></p>
<p>Then make sure that you server is listening to the IP mentioned above or
<code>0.0.0.0</code>. If it's listening on localhost <code>127.0.0.1</code> it will not accept the
connection.</p>
<p>Then just point your docker container to this IP and you can access the host
machine!</p>
<p>To test you can run something like <code>curl -X GET 123.123.123.123:3000</code> inside
the container.</p>
<p>The alias will reset on every reboot so create a start-up script if necessary.</p>
<p>Solution and more documentation here: https://docs.docker.com/docker-for-
mac/networking/#use-cases-and-workarounds</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/deleting-an-element-from-an-array-in-php/" class="u-url">Deleting an element from an array in PHP</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/deleting-an-element-from-an-array-in-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T20:18:02+08:00" itemprop="datePublished" title="2023-02-16 20:18">2023-02-16 20:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there an easy way to delete an element from an array using PHP, such that
<code>foreach ($array)</code> no longer includes that element?</p>
<p>I thought that setting it to <code>null</code> would do it, but apparently it does not
work.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are different ways to delete an array element, where some are more
useful for some specific tasks than others.</p>
<h3>Deleting a single array element</h3>
<p>If you want to delete just one array element you can use <code>unset()</code> or
alternatively <code>\array_splice()</code>.</p>
<p>If you know the value and don’t know the key to delete the element you can use
<code>\array_search()</code> to get the key. This only works if the element does not
occur more than once, since <code>\array_search</code> returns the first hit only.</p>
<h4><code>unset()</code></h4>
<p>Note that when you use <code>unset()</code> the array keys won’t change. If you want to
reindex the keys you can use <code>\array_values()</code> after <code>unset()</code>, which will
convert all keys to numerically enumerated keys starting from 0.</p>
<p>Code:</p>
<div class="code"><pre class="code literal-block">$array = [0 =&gt; "a", 1 =&gt; "b", 2 =&gt; "c"];
unset($array[1]);
          // ↑ Key which you want to delete
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block">[
    [0] =&gt; a
    [2] =&gt; c
]
</pre></div>

<h4>
<code>\array_splice()</code> method</h4>
<p>If you use <code>\array_splice()</code> the keys will automatically be reindexed, but the
associative keys won’t change — as opposed to <code>\array_values()</code>, which will
convert all keys to numerical keys.</p>
<p><code>\array_splice()</code> needs the <em>offset</em> , not the <em>key</em> , as the second
parameter.</p>
<p>Code:</p>
<div class="code"><pre class="code literal-block">$array = [0 =&gt; "a", 1 =&gt; "b", 2 =&gt; "c"];
\array_splice($array, 1, 1);
                   // ↑ Offset which you want to delete
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block">[
    [0] =&gt; a
    [1] =&gt; c
]
</pre></div>

<p><code>array_splice()</code>, same as <code>unset()</code>, take the array by reference. You don’t
assign the return values of those functions back to the array.</p>
<h3>Deleting multiple array elements</h3>
<p>If you want to delete multiple array elements and don’t want to call <code>unset()</code>
or <code>\array_splice()</code> multiple times you can use the functions <code>\array_diff()</code>
or <code>\array_diff_key()</code> depending on whether you know the values or the keys of
the elements which you want to delete.</p>
<h4>
<code>\array_diff()</code> method</h4>
<p>If you know the values of the array elements which you want to delete, then
you can use <code>\array_diff()</code>. As before with <code>unset()</code> it won’t change the keys
of the array.</p>
<p>Code:</p>
<div class="code"><pre class="code literal-block">$array = [0 =&gt; "a", 1 =&gt; "b", 2 =&gt; "c", 3 =&gt; "c"];
$array = \array_diff($array, ["a", "c"]);
                          // └────────┘
                          // Array values which you want to delete
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block">[
    [1] =&gt; b
]
</pre></div>

<h4>
<code>\array_diff_key()</code> method</h4>
<p>If you know the keys of the elements which you want to delete, then you want
to use <code>\array_diff_key()</code>. You have to make sure you pass the keys as keys in
the second parameter and not as values. Keys won’t reindex.</p>
<p>Code:</p>
<div class="code"><pre class="code literal-block">$array = [0 =&gt; "a", 1 =&gt; "b", 2 =&gt; "c"];
$array = \array_diff_key($array, [0 =&gt; "xy", "2" =&gt; "xy"]);
                               // ↑           ↑
                               // Array keys which you want to delete
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block">[
    [1] =&gt; b
]
</pre></div>

<p>If you want to use <code>unset()</code> or <code>\array_splice()</code> to delete multiple elements
with the same value you can use <code>\array_keys()</code> to get all the keys for a
specific value and then delete all elements.</p>
<h4>
<code>\array_filter()</code> method</h4>
<p>If you want to delete all elements with a specific value in the array you can
use <code>\array_filter()</code>.</p>
<p>Code:</p>
<div class="code"><pre class="code literal-block"><span class="mh">$a</span><span class="nv">rray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="mi">0</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"a"</span>,<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"b"</span>,<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"c"</span>]<span class="c1">;</span>
<span class="mh">$a</span><span class="nv">rray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>\<span class="nv">array_filter</span><span class="ss">(</span><span class="mh">$a</span><span class="nv">rray</span>,<span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="mh">$e</span><span class="nv">lement</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mh">$e</span><span class="nv">lement</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s2">"b"</span><span class="c1">;</span>
<span class="w">    </span><span class="o">//</span><span class="w">                   </span>↑
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Array</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">delete</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block">[
    [0] =&gt; a
    [1] =&gt; c
]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>It should be noted that <code>unset()</code> will keep indexes untouched, which is what
you'd expect when using string indexes (array as hashtable), but can be quite
surprising when dealing with integer indexed arrays:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="n">unset</span><span class="p">(</span><span class="o">$</span><span class="n">array</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="n">var_dump</span><span class="p">(</span><span class="o">$</span><span class="n">array</span><span class="p">);</span>
<span class="o">/*</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">}</span><span class="w"> </span><span class="o">*/</span>

<span class="o">$</span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="n">array_splice</span><span class="p">(</span><span class="o">$</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="n">var_dump</span><span class="p">(</span><span class="o">$</span><span class="n">array</span><span class="p">);</span>
<span class="o">/*</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">}</span><span class="w"> </span><span class="o">*/</span>
</pre></div>

<p>So <code>array_splice()</code> can be used if you'd like to normalize your integer keys.
Another option is using <code>array_values()</code> after <code>unset()</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>

<span class="n">unset</span><span class="p">(</span><span class="o">$</span><span class="n">array</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<span class="o">$</span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array_values</span><span class="p">(</span><span class="o">$</span><span class="n">array</span><span class="p">);</span>
<span class="n">var_dump</span><span class="p">(</span><span class="o">$</span><span class="n">array</span><span class="p">);</span>
<span class="o">/*</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=&gt;</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="p">}</span><span class="w"> </span><span class="o">*/</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-split-a-list-into-equally-sized-chunks/" class="u-url">How do I split a list into equally-sized chunks?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-split-a-list-into-equally-sized-chunks/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T20:17:22+08:00" itemprop="datePublished" title="2023-02-16 20:17">2023-02-16 20:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I split a list of arbitrary length into equal sized chunks?</p>
<hr>
<p>See How to iterate over a list in chunks if the data result will be used
directly for a loop, and does not need to be stored.</p>
<p>For the same question with a string input, see Split string every nth
character?. The same techniques generally apply, though there are some
variations.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's a generator that yields evenly-sized chunks:</p>
<div class="code"><pre class="code literal-block"><span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span><span class="n">lst</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Yield successive n-sized chunks from lst."""</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">),</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">lst</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="n">n</span><span class="p">]</span>



<span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chunks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span> <span class="mi">10</span><span class="p">)))</span>
<span class="p">[[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">39</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">49</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">59</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">69</span><span class="p">],</span>
 <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">74</span><span class="p">]]</span>
</pre></div>

<p>For Python 2, using <code>xrange</code> instead of <code>range</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">chunks</span><span class="ss">(</span><span class="nv">lst</span>,<span class="w"> </span><span class="nv">n</span><span class="ss">)</span>:
<span class="w">    </span><span class="s2">"""Yield successive n-sized chunks from lst."""</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">xrange</span><span class="ss">(</span><span class="mi">0</span>,<span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">lst</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">n</span><span class="ss">)</span>:
<span class="w">        </span><span class="nv">yield</span><span class="w"> </span><span class="nv">lst</span>[<span class="nv">i</span>:<span class="nv">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">n</span>]
</pre></div>

<hr>
<p>Below is a list comprehension one-liner. The method above is preferable,
though, since using named functions makes code easier to understand. For
Python 3:</p>
<div class="code"><pre class="code literal-block">[<span class="nv">lst</span>[<span class="nv">i</span>:<span class="nv">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">n</span>]<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">0</span>,<span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">lst</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">n</span><span class="ss">)</span>]
</pre></div>

<p>For Python 2:</p>
<div class="code"><pre class="code literal-block">[<span class="nv">lst</span>[<span class="nv">i</span>:<span class="nv">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">n</span>]<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">xrange</span><span class="ss">(</span><span class="mi">0</span>,<span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">lst</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">n</span><span class="ss">)</span>]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Something super simple:</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">chunks</span><span class="ss">(</span><span class="nv">xs</span>,<span class="w"> </span><span class="nv">n</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">max</span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="nv">n</span><span class="ss">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ss">(</span><span class="nv">xs</span>[<span class="nv">i</span>:<span class="nv">i</span><span class="o">+</span><span class="nv">n</span>]<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">0</span>,<span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">xs</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">n</span><span class="ss">))</span>
</pre></div>

<p>For Python 2, use <code>xrange()</code> instead of <code>range()</code>.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-71.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-69.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
