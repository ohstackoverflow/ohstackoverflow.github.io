<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1769) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1769.html">
<link rel="prev" href="index-1770.html" type="text/html">
<link rel="next" href="index-1768.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/heroku-how-to-push-different-local-git-branches-to-heroku-master/" class="u-url">Heroku: How to push different local Git branches to Heroku/master</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/heroku-how-to-push-different-local-git-branches-to-heroku-master/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:55:54+08:00" itemprop="datePublished" title="2023-03-03 08:55">2023-03-03 08:55</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Heroku has a policy of ignoring all branches but 'master'.</p>
<p>While I'm sure Heroku's designers have excellent reasons for this policy (I'm
guessing for storage and performance optimization), the consequence to me as a
developer is that whatever local topic branch I may be working on, I would
like an easy way to switch Heroku's master to that local topic branch and do a
"git push heroku -f" to over-write master on Heroku.</p>
<p>What I got from reading the "Pushing Refspecs" section of
http://progit.org/book/ch9-5.html is</p>
<div class="code"><pre class="code literal-block">git push -f heroku local-topic-branch:refs/heads/master
</pre></div>

<p>What I'd really like is a way to set this up in the configuration file so that
"git push heroku" always does the above, replacing <em>local-topic-branch</em> with
the name of whatever my current branch happens to be. If anyone knows how to
accomplish that, please let me know!</p>
<p>The caveat for this, of course, is that this is only sensible if I am the only
one who can push to that Heroku app/repository. A test or QA team might manage
such a repository to try out different candidate branches, but they would have
to coordinate so that they all agree on what branch they are pushing to it on
any given day.</p>
<p>Needless to say, it would also be a very good idea to have a separate remote
repository (like GitHub) without this restriction for backing everything up
to. I'd call that one "origin" and use "heroku" for Heroku so that "git push"
always backs up everything to origin, and "git push heroku" pushes whatever
branch I'm currently on to Heroku's master branch, overwriting it if
necessary.</p>
<p>Would this work?</p>
<div class="code"><pre class="code literal-block"><span class="k">[remote "heroku"]</span>
<span class="w">    </span><span class="na">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">git@heroku.com:my-app.git</span>
<span class="w">    </span><span class="na">push</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">+refs/heads/*:refs/heads/master</span>
</pre></div>

<p>I'd like to hear from someone more experienced before I begin to experiment,
although I suppose I could create a dummy app on Heroku and experiment with
that.</p>
<p>As for fetching, I don't really care if the Heroku repository is write-only. I
still have a separate repository, like GitHub, for backup and cloning of all
my work.</p>
<p>Footnote: This question is similar to, but not quite the same as <em>Good Git
deployment using branches strategy with Heroku?</em></p>
<p><br><br></p>
<h2>Answer</h2>
<p>When using a wildcard, it had to be present on both sides of the refspec, so
<code>+refs/heads/*:refs/heads/master</code> will not work. But you can use
<code>+HEAD:refs/heads/master</code>:</p>
<div class="code"><pre class="code literal-block">git config remote.heroku.push +HEAD:refs/heads/master
</pre></div>

<p>Also, you can do this directly with <em>git push</em> :</p>
<div class="code"><pre class="code literal-block">git push heroku +HEAD:master
git push -f heroku HEAD:master
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>When using a wildcard, it had to be present on both sides of the refspec, so
<code>+refs/heads/*:refs/heads/master</code> will not work. But you can use
<code>+HEAD:refs/heads/master</code>:</p>
<div class="code"><pre class="code literal-block">git config remote.heroku.push +HEAD:refs/heads/master
</pre></div>

<p>Also, you can do this directly with <em>git push</em> :</p>
<div class="code"><pre class="code literal-block">git push heroku +HEAD:master
git push -f heroku HEAD:master
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-doesn-t-c-allow-static-methods-to-implement-an-interface/" class="u-url">Why Doesn't C# Allow Static Methods to Implement an Interface?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-doesn-t-c-allow-static-methods-to-implement-an-interface/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:55:27+08:00" itemprop="datePublished" title="2023-03-03 08:55">2023-03-03 08:55</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Why was C# designed this way?</p>
<p>As I understand it, an interface only describes behaviour, and serves the
purpose of describing a contractual obligation for classes implementing the
interface that certain behaviour is implemented.</p>
<p>If classes wish to implement that behavour in a shared method, why shouldn't
they?</p>
<p>Here is an example of what I have in mind:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// These items will be displayed in a list on the screen.</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">IListItem</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">string</span><span class="w"> </span><span class="n">ScreenName</span><span class="p">();</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">}</span>

<span class="n">public</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">Animal</span><span class="p">:</span><span class="w"> </span><span class="n">IListItem</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// All animals will be called "Animal".</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb">string</span><span class="w"> </span><span class="n">ScreenName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"Animal"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">....</span>
<span class="p">}</span>

<span class="n">public</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">Person</span><span class="p">:</span><span class="w"> </span><span class="n">IListItem</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="nb">string</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// All persons will be called by their individual names.</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb">string</span><span class="w"> </span><span class="n">ScreenName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">....</span>

<span class="w"> </span><span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Assuming you are asking why you can't do this:</p>
<div class="code"><pre class="code literal-block">public interface IFoo {
    void Bar();
}

public class Foo: IFoo {
    public static void Bar() {}
}
</pre></div>

<p>This doesn't make sense to me, semantically. Methods specified on an interface
should be there to specify the contract for interacting with an object. Static
methods do not allow you to interact with an object - if you find yourself in
the position where your implementation could be made static, you may need to
ask yourself if that method really belongs in the interface.</p>
<hr>
<p>To implement your example, I would give Animal a const property, which would
still allow it to be accessed from a static context, and return that value in
the implementation.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Animal</span><span class="p">:</span><span class="w"> </span><span class="n">IListItem</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">tough</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">come</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="p">,</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">meaningful</span><span class="w"> </span><span class="n">name</span><span class="o">!</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">casing</span><span class="w"> </span><span class="n">convention</span><span class="p">,</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="n">has</span><span class="p">,</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="n">here</span><span class="o">.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">AnimalScreenName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Animal"</span><span class="p">;</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">ScreenName</span><span class="p">(){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">AnimalScreenName</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>For a more complicated situation, you could always declare another static
method and delegate to that. In trying come up with an example, I couldn't
think of any reason you would do something non-trivial in both a static and
instance context, so I'll spare you a FooBar blob, and take it as an
indication that it might not be a good idea.</p>
<p><br></p>
<h3>Suggest</h3>
<p>My (simplified) technical reason is that static methods are not in the vtable,
and the call site is chosen at compile time. It's the same reason you can't
have override or virtual static members. For more details, you'd need a CS
grad or compiler wonk - of which I'm neither.</p>
<p>For the political reason, I'll quote Eric Lippert (who is a compiler wonk, and
holds a Bachelor of Mathematics, Computer science and Applied Mathematics from
University of Waterloo (source: LinkedIn):</p>
<blockquote>
<p>...the core design principle of static methods, the principle that gives
them their name...[is]...it can always be determined exactly, at compile
time, what method will be called. That is, the method can be resolved solely
by static analysis of the code.</p>
</blockquote>
<p>Note that Lippert does leave room for a so-called type method:</p>
<blockquote>
<p>That is, a method associated with a type (like a static), which does not
take a non-nullable “this” argument (unlike an instance or virtual), but one
where the method called would depend on the constructed type of T (unlike a
static, which must be determinable at compile time).</p>
</blockquote>
<p>but is yet to be convinced of its usefulness.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/expression-versus-statement/" class="u-url">Expression Versus Statement</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/expression-versus-statement/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:54:59+08:00" itemprop="datePublished" title="2023-03-03 08:54">2023-03-03 08:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm asking with regards to c#, but I assume its the same in most other
languages.</p>
<p>Does anyone have a good definition of <em>expressions</em> and <em>statements</em> and what
the differences are?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Expression:</strong> Something which evaluates to a value. Example: <em>1+2/x</em><br><strong>Statement:</strong> A line of code which does something. Example: <em>GOTO 100</em></p>
<p>In the earliest general-purpose programming languages, like FORTRAN, the
distinction was crystal-clear. In FORTRAN, a statement was one unit of
execution, a thing that you did. The only reason it wasn't called a "line" was
because sometimes it spanned multiple lines. An expression on its own couldn't
do anything... you had to assign it to a variable.</p>
<div class="code"><pre class="code literal-block"><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">X</span>
</pre></div>

<p>is an error in FORTRAN, because it doesn't do anything. You had to do
something with that expression:</p>
<div class="code"><pre class="code literal-block">X = 1 + 2 / X
</pre></div>

<p>FORTRAN didn't have a grammar as we know it today—that idea was invented,
along with Backus-Naur Form (BNF), as part of the definition of Algol-60. At
that point the <em>semantic</em> distinction ("have a value" versus "do something")
was enshrined in <em>syntax</em> : one kind of phrase was an expression, and another
was a statement, and the parser could tell them apart.</p>
<p>Designers of later languages blurred the distinction: they allowed syntactic
expressions to do things, and they allowed syntactic statements that had
values. The earliest popular language example that still survives is C. The
designers of C realized that no harm was done if you were allowed to evaluate
an expression and throw away the result. In C, every syntactic expression can
be a made into a statement just by tacking a semicolon along the end:</p>
<div class="code"><pre class="code literal-block"><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</pre></div>

<p>is a totally legit statement even though absolutely nothing will happen.
Similarly, in C, an expression can have <em>side-effects</em> —it can change
something.</p>
<div class="code"><pre class="code literal-block"><span class="mf">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">callfunc</span><span class="p">(</span><span class="mf">12</span><span class="p">);</span>
</pre></div>

<p>because <code>callfunc</code> might just do something useful.</p>
<p>Once you allow any expression to be a statement, you might as well allow the
assignment operator (=) inside expressions. That's why C lets you do things
like</p>
<div class="code"><pre class="code literal-block">callfunc(x = 2);
</pre></div>

<p>This evaluates the expression x = 2 (assigning the value of 2 to x) and then
passes that (the 2) to the function <code>callfunc</code>.</p>
<p>This blurring of expressions and statements occurs in all the C-derivatives
(C, C++, C#, and Java), which still have some statements (like <code>while</code>) but
which allow almost any expression to be used as a statement (in C# only
assignment, call, increment, and decrement expressions may be used as
statements; see Scott Wisniewski's answer).</p>
<p>Having two "syntactic categories" (which is the technical name for the sort of
thing statements and expressions are) can lead to duplication of effort. For
example, C has two forms of conditional, the statement form</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">E</span><span class="ss">)</span><span class="w"> </span><span class="nv">S1</span><span class="c1">; else S2;</span>
</pre></div>

<p>and the expression form</p>
<div class="code"><pre class="code literal-block">E ? E1 : E2
</pre></div>

<p>And sometimes people <em>want</em> duplication that isn't there: in standard C, for
example, only a statement can declare a new local variable—but this ability is
useful enough that the GNU C compiler provides a GNU extension that enables an
expression to declare a local variable as well.</p>
<p>Designers of other languages didn't like this kind of duplication, and they
saw early on that if expressions can have side effects as well as values, then
the <em>syntactic</em> distinction between statements and expressions is not all that
useful—so they got rid of it. Haskell, Icon, Lisp, and ML are all languages
that don't have syntactic statements—they only have expressions. Even the
class structured looping and conditional forms are considered expressions, and
they have values—but not very interesting ones.</p>
<p><br></p>
<h3>Suggest</h3>
<ul>
<li>an expression is anything that yields a value: 2 + 2</li>
<li>a statement is one of the basic "blocks" of program execution.</li>
</ul>
<p>Note that in C, "=" is actually an operator, which does two things:</p>
<ul>
<li>returns the value of the right hand subexpression.</li>
<li>copies the value of the right hand subexpression into the variable on the left hand side.</li>
</ul>
<p>Here's an extract from the ANSI C grammar. You can see that C doesn't have
many different kinds of statements... the majority of statements in a program
are expression statements, i.e. an expression with a semicolon at the end.</p>
<div class="code"><pre class="code literal-block"><span class="n">statement</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="n">labeled_statement</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">compound_statement</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">expression_statement</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">selection_statement</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">iteration_statement</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">jump_statement</span>
<span class="w">    </span><span class="o">;</span>

<span class="n">expression_statement</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="s1">';'</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="s1">';'</span>
<span class="w">    </span><span class="o">;</span>
</pre></div>

<p>http://www.lysator.liu.se/c/ANSI-C-grammar-y.html</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1770.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1768.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
