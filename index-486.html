<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 486) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-486.html">
<link rel="prev" href="index-487.html" type="text/html">
<link rel="next" href="index-485.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/behaviorsubject-vs-observable/" class="u-url">BehaviorSubject vs Observable?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/behaviorsubject-vs-observable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:04:27+08:00" itemprop="datePublished" title="2023-02-17 08:04">2023-02-17 08:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm looking into Angular RxJs patterns and I don't understand the difference
between a <code>BehaviorSubject</code> and an <code>Observable</code>.</p>
<p>From my understanding, a <code>BehaviorSubject</code> is a value that can change over
time (can be subscribed to and subscribers can receive updated results). This
seems to be the exact same purpose of an <code>Observable</code>.</p>
<p>When would you use an <code>Observable</code> vs a <code>BehaviorSubject</code>? Are there benefits
to using a <code>BehaviorSubject</code> over an <code>Observable</code> or vice versa?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>BehaviorSubject</strong> is a type of subject, a subject is a special type of
observable so you can subscribe to messages like any other observable. The
unique features of BehaviorSubject are:</p>
<ul>
<li>It needs an initial value as it must always return a value on subscription even if it hasn't received a <code>next()</code>
</li>
<li>Upon subscription, it returns the last value of the subject. A regular observable only triggers when it receives an <code>onnext</code>
</li>
<li>at any point, you can retrieve the last value of the subject in a non-observable code using the <code>getValue()</code> method.</li>
</ul>
<p>Unique features of a subject compared to an observable are:</p>
<ul>
<li>It is an observer in addition to being an observable so you can also send values to a subject in addition to subscribing to it.</li>
</ul>
<p>In addition, you can get an observable from behavior subject using the
<code>asObservable()</code> method on <code>BehaviorSubject</code>.</p>
<p><strong>Observable</strong> is a Generic, and <code>BehaviorSubject</code> is technically a sub-type
of Observable because BehaviorSubject is an observable with specific
qualities.</p>
<p>Example with <strong>BehaviorSubject</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Behavior Subject</span>

<span class="c1">// a is an initial value. if there is a subscription </span>
<span class="c1">// after this, it would get "a" value immediately</span>
<span class="n">let</span><span class="w"> </span><span class="n">bSubject</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">BehaviorSubject</span><span class="p">(</span><span class="s">"a"</span><span class="p">);</span>

<span class="n">bSubject</span><span class="p">.</span><span class="n">next</span><span class="p">(</span><span class="s">"b"</span><span class="p">);</span>

<span class="n">bSubject</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">=</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="p">.</span><span class="nb">log</span><span class="p">(</span><span class="s">"Subscription got"</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// Subscription got b, </span>
<span class="w">                                          </span><span class="c1">// ^ This would not happen </span>
<span class="w">                                          </span><span class="c1">// for a generic observable </span>
<span class="w">                                          </span><span class="c1">// or generic subject by default</span>
<span class="p">});</span>

<span class="n">bSubject</span><span class="p">.</span><span class="n">next</span><span class="p">(</span><span class="s">"c"</span><span class="p">);</span><span class="w"> </span><span class="c1">// Subscription got c</span>
<span class="n">bSubject</span><span class="p">.</span><span class="n">next</span><span class="p">(</span><span class="s">"d"</span><span class="p">);</span><span class="w"> </span><span class="c1">// Subscription got d</span>
</pre></div>

<p>Example 2 with regular subject:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Regular Subject</span>

<span class="n">let</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Subject</span><span class="p">();</span>

<span class="n">subject</span><span class="p">.</span><span class="n">next</span><span class="p">(</span><span class="s">"b"</span><span class="p">);</span>

<span class="n">subject</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">=</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="p">.</span><span class="nb">log</span><span class="p">(</span><span class="s">"Subscription got"</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// Subscription won't get </span>
<span class="w">                                          </span><span class="c1">// anything at this point</span>
<span class="p">});</span>

<span class="n">subject</span><span class="p">.</span><span class="n">next</span><span class="p">(</span><span class="s">"c"</span><span class="p">);</span><span class="w"> </span><span class="c1">// Subscription got c</span>
<span class="n">subject</span><span class="p">.</span><span class="n">next</span><span class="p">(</span><span class="s">"d"</span><span class="p">);</span><span class="w"> </span><span class="c1">// Subscription got d</span>
</pre></div>

<p>An observable can be created from both <code>Subject</code> and <code>BehaviorSubject</code> using
<code>subject.asObservable()</code>.</p>
<p>The only difference being you can't send values to an observable using
<code>next()</code> method.</p>
<p>In Angular services, I would use <code>BehaviorSubject</code> for a data service as an
angular service often initializes before component and behavior subject
ensures that the component consuming the service receives the last updated
data even if there are no new updates since the component's subscription to
this data.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>Observable: Different result for each Observer</h3>
<p>One very very important difference. Since Observable is just a function, it
does not have any state, so for every new Observer, it executes the observable
create code again and again. This results in:</p>
<blockquote>
<p>The code is run for each observer . If its a HTTP call, it gets called for
each observer</p>
</blockquote>
<p>This causes major bugs and inefficiencies</p>
<p>BehaviorSubject (or Subject ) stores observer details, runs the code only once
and gives the result to all observers .</p>
<p>Ex:</p>
<p>JSBin: http://jsbin.com/qowulet/edit?js,console</p>
<div class="code"><pre class="code literal-block">//<span class="w"> </span>---<span class="w"> </span>Observable<span class="w"> </span>---
let<span class="w"> </span>randomNumGenerator1<span class="w"> </span>=<span class="w"> </span>Rx.Observable.create(observer<span class="w"> </span>=&gt;<span class="w"> </span>{
<span class="w">   </span>observer.next(Math.random());
});

let<span class="w"> </span>observer1<span class="w"> </span>=<span class="w"> </span>randomNumGenerator1
<span class="w">      </span>.subscribe(num<span class="w"> </span>=&gt;<span class="w"> </span>console.log('observer<span class="w"> </span>1:<span class="w"> </span>'+<span class="w"> </span>num));

let<span class="w"> </span>observer2<span class="w"> </span>=<span class="w"> </span>randomNumGenerator1
<span class="w">      </span>.subscribe(num<span class="w"> </span>=&gt;<span class="w"> </span>console.log('observer<span class="w"> </span>2:<span class="w"> </span>'+<span class="w"> </span>num));


//<span class="w"> </span>------<span class="w"> </span>BehaviorSubject/<span class="w"> </span>Subject

let<span class="w"> </span>randomNumGenerator2<span class="w"> </span>=<span class="w"> </span>new<span class="w"> </span>Rx.BehaviorSubject(0);
randomNumGenerator2.next(Math.random());

let<span class="w"> </span>observer1Subject<span class="w"> </span>=<span class="w"> </span>randomNumGenerator2
<span class="w">      </span>.subscribe(num=&gt;<span class="w"> </span>console.log('observer<span class="w"> </span>subject<span class="w"> </span>1:<span class="w"> </span>'+<span class="w"> </span>num));

let<span class="w"> </span>observer2Subject<span class="w"> </span>=<span class="w"> </span>randomNumGenerator2
<span class="w">      </span>.subscribe(num=&gt;<span class="w"> </span>console.log('observer<span class="w"> </span>subject<span class="w"> </span>2:<span class="w"> </span>'+<span class="w"> </span>num));


<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/rxjs/5.5.3/Rx.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>Output :</p>
<div class="code"><pre class="code literal-block">"observer 1: 0.7184075243594013"
"observer 2: 0.41271850211336103"
"observer subject 1: 0.8034263165479893"
"observer subject 2: 0.8034263165479893"
</pre></div>

<p>Observe how using <code>Observable.create</code> created different output for each
observer, but <code>BehaviorSubject</code> gave the same output for all observers. This
is important.</p>
<hr>
<p>Other differences summarized.</p>
<div class="code"><pre class="code literal-block">┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃<span class="w">         </span><span class="nv">Observable</span><span class="w">                  </span>┃<span class="w">     </span><span class="nv">BehaviorSubject</span><span class="o">/</span><span class="nv">Subject</span><span class="w">         </span>┃<span class="w">      </span>
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╋━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫<span class="w"> </span>
┃<span class="w"> </span><span class="nv">Is</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">function</span>,<span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">state</span><span class="w">        </span>┃<span class="w"> </span><span class="nv">Has</span><span class="w"> </span><span class="nv">state</span>.<span class="w"> </span><span class="nv">Stores</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">memory</span><span class="w">    </span>┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╋━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃<span class="w"> </span><span class="nv">Code</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">observer</span><span class="w">          </span>┃<span class="w"> </span><span class="nv">Same</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">run</span><span class="w">                       </span>┃
┃<span class="w">                                     </span>┃<span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">once</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">observers</span><span class="w">         </span>┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╋━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃<span class="w"> </span><span class="nv">Creates</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">Observable</span><span class="w">             </span>┃<span class="nv">Can</span><span class="w"> </span><span class="nv">create</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">listen</span><span class="w"> </span><span class="nv">Observable</span>┃
┃<span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">producer</span><span class="w"> </span><span class="nv">alone</span><span class="w"> </span><span class="ss">)</span><span class="w">             </span>┃<span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">producer</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">consumer</span><span class="w"> </span><span class="ss">)</span><span class="w">      </span>┃
┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╋━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
┃<span class="w"> </span><span class="nv">Usage</span>:<span class="w"> </span><span class="nv">Simple</span><span class="w"> </span><span class="nv">Observable</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">only</span><span class="w">  </span>┃<span class="w"> </span><span class="nv">Usage</span>:<span class="w">                              </span>┃
┃<span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">Obeserver</span>.<span class="w">                      </span>┃<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">Store</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">modify</span><span class="w"> </span><span class="nv">frequently</span><span class="w">  </span>┃
┃<span class="w">                                     </span>┃<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">Multiple</span><span class="w"> </span><span class="nv">observers</span><span class="w"> </span><span class="nv">listen</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span>┃
┃<span class="w">                                     </span>┃<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">Proxy</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">Observable</span><span class="w">  </span><span class="nv">and</span><span class="w">     </span>┃
┃<span class="w">                                     </span>┃<span class="w">   </span><span class="nv">Observer</span><span class="w">                          </span>┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-convert-a-string-to-an-inputstream-in-java/" class="u-url">How do I convert a String to an InputStream in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-convert-a-string-to-an-inputstream-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:04:03+08:00" itemprop="datePublished" title="2023-02-17 08:04">2023-02-17 08:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Given a string:</p>
<div class="code"><pre class="code literal-block">String exampleString = "example";
</pre></div>

<p>How do I convert it to an <code>InputStream</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Like this:</p>
<div class="code"><pre class="code literal-block">InputStream stream = new ByteArrayInputStream(exampleString.getBytes(StandardCharsets.UTF_8));
</pre></div>

<p>Note that this assumes that you want an InputStream that is a stream of bytes
that represent your original string encoded as <em>UTF-8</em>.</p>
<p>For versions of Java less than 7, replace <code>StandardCharsets.UTF_8</code> with
<code>"UTF-8"</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I find that using Apache Commons IO makes my life much easier.</p>
<div class="code"><pre class="code literal-block">String source = "This is the source of my input stream";
InputStream in = org.apache.commons.io.IOUtils.toInputStream(source, "UTF-8");
</pre></div>

<p>You may find that the library also offer many other shortcuts to commonly done
tasks that you may be able to use in your project.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-clone-a-single-branch-in-git/" class="u-url">How do I clone a single branch in Git?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-clone-a-single-branch-in-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:03:36+08:00" itemprop="datePublished" title="2023-02-17 08:03">2023-02-17 08:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a local Git repository in <code>~/local_repo</code>. It has a few branches:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>branch
*<span class="w"> </span>master
<span class="w">  </span>rails
<span class="w">  </span>c
<span class="w">  </span>c++
</pre></div>

<p>To clone the local repository, I do:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>~/local_repo<span class="w"> </span>new_repo
Initialized<span class="w"> </span>empty<span class="w"> </span>Git<span class="w"> </span>repository<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/username/new_repo/.git/
</pre></div>

<p>The <code>new_repo</code> master branch points to the <code>local_repo</code> master branch, and I
can push / pull.</p>
<p>But I am unable to clone another branch. I want to only pull the branch I want
(e.g. <code>rails</code>), so that the new repository has a <code>master</code> branch that pushes
to and pulls from <code>local_repo</code>'s <code>rails</code> branch, by default. How do I
accomplish this, or perhaps something similar with <code>local_repo</code> tracking the
master <code>local_repo</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Note: the <strong>git1.7.10 (April 2012)</strong> actually allows you to <strong>clone only one
branch</strong> :</p>
<div class="code"><pre class="code literal-block"># clone only the remote primary HEAD (default: origin/master)
git clone &lt;url&gt; --single-branch

# as in:
git clone &lt;url&gt; --branch &lt;branch&gt; --single-branch &lt;folder&gt;
</pre></div>

<p>Note:</p>
<ul>
<li>
<code>&lt;url&gt;</code> is the URL of the remote repository, and does not reference the branch cloned</li>
<li>
<code>&lt;folder&gt;</code> is the local folder where you want to clone the repository</li>
</ul>
<p>You can see it in <code>t5500-fetch-pack.sh</code>:</p>
<div class="code"><pre class="code literal-block">test_expect_success 'single branch clone' '
  git clone --single-branch "file://$(pwd)/." singlebranch
'
</pre></div>

<p>Tobu comments that:</p>
<blockquote>
<p><strong>This is implicit when doing a shallow clone.<br>
 This makes <code>git clone --depth 1</code> the easiest way to save bandwidth.</strong></p>
</blockquote>
<p>And since Git 1.9.0 (February 2014), shallow clones support data transfer
(push/pull), so that option is even more useful now.<br>
See more at "Is <code>git clone --depth 1</code> (shallow clone) more useful than it
makes out?".</p>
<hr>
<p>"Undoing" a shallow clone is detailed at "Convert shallow clone to full clone"
(git 1.8.3+)</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">unshallow</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">branch</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">fetch</span><span class="w"> </span><span class="o">--</span><span class="nv">unshallow</span>

#<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">getting</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">branches</span><span class="w"> </span><span class="ss">(</span><span class="nv">see</span><span class="w"> </span><span class="nv">Peter</span><span class="w"> </span><span class="nv">Cordes</span><span class="err">' comment)</span>
<span class="err">git config remote.origin.fetch refs/heads/*:refs/remotes/origin/*</span>
<span class="err">git fetch --unshallow</span>
</pre></div>

<p>As Chris comments:</p>
<blockquote>
<p>the magic line for getting missing branches to reverse <code>--single-branch</code> is
(git v2.1.4):</p>
</blockquote>
<div class="code"><pre class="code literal-block">git config remote.origin.fetch +refs/heads/*:refs/remotes/origin/*
git fetch --unshallow
</pre></div>

<hr>
<p>With Git 2.26 (Q1 2020), "<code>git clone --recurse-submodules --single-branch</code>"
<strong>now uses the same single-branch option when cloning the submodules</strong>.</p>
<p>See commit 132f600, commit 4731957 (21 Feb 2020) by Emily Shaffer
(<code>nasamuffin</code>).<br>
(Merged by Junio C Hamano -- <code>gitster</code> -- in commit b22db26, 05 Mar 2020)</p>
<blockquote>
<h3>
<code>clone</code>: pass --single-branch during --recurse-submodules</h3>
<p>Signed-off-by: Emily Shaffer<br>
 Acked-by: Jeff King</p>
<p>Previously, performing "<code>git clone --recurse-submodules --single-branch</code>"
resulted in submodules cloning all branches even though the superproject
cloned only one branch.</p>
<p>Pipe <code>--single-branch</code> through the submodule helper framework to make it to
'<code>clone</code>' later on.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>One way is to execute the following.</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="k">user</span><span class="nv">@git</span><span class="o">-</span><span class="nl">server</span><span class="p">:</span><span class="n">project_name</span><span class="p">.</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">b</span><span class="w"> </span><span class="n">branch_name</span><span class="w"> </span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">folder</span>
</pre></div>

<p>Where <code>branch_name</code> is the branch of your choice and "/your/folder" is the
destination folder for that branch. It's true that this will bring other
branches giving you the opportunity to merge back and forth.</p>
<p><strong>Update</strong></p>
<p>Now, starting with Git 1.7.10, you can now do this</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="k">user</span><span class="nv">@git</span><span class="o">-</span><span class="nl">server</span><span class="p">:</span><span class="n">project_name</span><span class="p">.</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">b</span><span class="w"> </span><span class="n">branch_name</span><span class="w"> </span><span class="c1">--single-branch /your/folder</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-487.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-485.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
