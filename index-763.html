<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 763) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-763.html">
<link rel="prev" href="index-764.html" type="text/html">
<link rel="next" href="index-762.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-do-a-case-insensitive-string-comparison/" class="u-url">How do I do a case-insensitive string comparison?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-do-a-case-insensitive-string-comparison/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T15:20:43+08:00" itemprop="datePublished" title="2023-02-17 15:20">2023-02-17 15:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I compare strings in a case insensitive way in Python?</p>
<p>I would like to encapsulate comparison of a regular strings to a repository
string, using simple and Pythonic code. I also would like to have ability to
look up values in a dict hashed by strings using regular python strings.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Assuming ASCII strings:</p>
<div class="code"><pre class="code literal-block"><span class="nv">string1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Hello'</span>
<span class="nv">string2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'hello'</span>

<span class="k">if</span><span class="w"> </span><span class="nv">string1</span>.<span class="nv">lower</span><span class="ss">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">string2</span>.<span class="nv">lower</span><span class="ss">()</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"The strings are the same (case insensitive)"</span><span class="ss">)</span>
<span class="k">else</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"The strings are NOT the same (case insensitive)"</span><span class="ss">)</span>
</pre></div>

<p>As of Python 3.3, casefold() is a better alternative:</p>
<div class="code"><pre class="code literal-block"><span class="nv">string1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Hello'</span>
<span class="nv">string2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'hello'</span>

<span class="k">if</span><span class="w"> </span><span class="nv">string1</span>.<span class="nv">casefold</span><span class="ss">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">string2</span>.<span class="nv">casefold</span><span class="ss">()</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"The strings are the same (case insensitive)"</span><span class="ss">)</span>
<span class="k">else</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"The strings are NOT the same (case insensitive)"</span><span class="ss">)</span>
</pre></div>

<p>If you want a more comprehensive solution that handles more complex unicode
comparisons, see other answers.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Comparing strings in a case insensitive way seems trivial, but it's not. I
will be using Python 3, since Python 2 is underdeveloped here.</p>
<p>The first thing to note is that case-removing conversions in Unicode aren't
trivial. There is text for which <code>text.lower() != text.upper().lower()</code>, such
as <code>"ß"</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; "ß".lower()
'ß'
&gt;&gt;&gt; "ß".upper().lower()
'ss'
</pre></div>

<p>But let's say you wanted to caselessly compare <code>"BUSSE"</code> and <code>"Buße"</code>. Heck,
you probably also want to compare <code>"BUSSE"</code> and <code>"BUẞE"</code> equal - that's the
newer capital form. The recommended way is to use <code>casefold</code>:</p>
<blockquote>
<p>str. <strong>casefold</strong> ()</p>
<p>Return a casefolded copy of the string. Casefolded strings may be used for
caseless matching.</p>
<p>Casefolding is similar to lowercasing but more aggressive because it is
intended to remove all case distinctions in a string. [...]</p>
</blockquote>
<p>Do not just use <code>lower</code>. If <code>casefold</code> is not available, doing
<code>.upper().lower()</code> helps (but only somewhat).</p>
<p>Then you should consider accents. If your font renderer is good, you probably
think <code>"ê" == "ê"</code> - but it doesn't:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; "ê" == "ê"
False
</pre></div>

<p>This is because the accent on the latter is a combining character.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">unicodedata</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">unicodedata</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="n">char</span><span class="p">)</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="s2">"ê"</span><span class="p">]</span>
<span class="p">[</span><span class="s1">'LATIN SMALL LETTER E WITH CIRCUMFLEX'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">unicodedata</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="n">char</span><span class="p">)</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="s2">"ê"</span><span class="p">]</span>
<span class="p">[</span><span class="s1">'LATIN SMALL LETTER E'</span><span class="p">,</span> <span class="s1">'COMBINING CIRCUMFLEX ACCENT'</span><span class="p">]</span>
</pre></div>

<p>The simplest way to deal with this is <code>unicodedata.normalize</code>. You probably
want to use <strong>NFKD</strong> normalization, but feel free to check the documentation.
Then one does</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; unicodedata.normalize("NFKD", "ê") == unicodedata.normalize("NFKD", "ê")
True
</pre></div>

<p>To finish up, here this is expressed in functions:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">unicodedata</span>

<span class="k">def</span> <span class="nf">normalize_caseless</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s2">"NFKD"</span><span class="p">,</span> <span class="n">text</span><span class="o">.</span><span class="n">casefold</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">caseless_equal</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">normalize_caseless</span><span class="p">(</span><span class="n">left</span><span class="p">)</span> <span class="o">==</span> <span class="n">normalize_caseless</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-set-the-current-working-directory-to-the-directory-of-the-script-in-bash/" class="u-url">How can I set the current working directory to the directory of the script in Bash?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-set-the-current-working-directory-to-the-directory-of-the-script-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T15:20:15+08:00" itemprop="datePublished" title="2023-02-17 15:20">2023-02-17 15:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm writing a Bash script. I need the current working directory to always be
the directory that the script is located in.</p>
<p>The default behavior is that the current working directory in the script is
that of the shell from which I run it, but I do not want this behavior.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-can-i-set-the-current-working-directory-to-the-directory-of-the-script-in-bash/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-can-i-set-the-current-working-directory-to-the-directory-of-the-script-in-bash/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="k">$(</span>dirname<span class="w"> </span><span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span>
</code></td>
</tr>
</table></div>
<p><br></p>
<h3>Suggest</h3>
<p>The following also works:</p>
<div class="code"><pre class="code literal-block">cd<span class="w"> </span>"<span class="cp">${</span><span class="mi">0</span><span class="o">%/*</span><span class="cp">}</span>"
</pre></div>

<p>The syntax is thoroughly described in this StackOverflow answer.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/fastest-way-to-duplicate-an-array-in-javascript-slice-vs-for-loop/" class="u-url">Fastest way to duplicate an array in JavaScript - slice vs. 'for' loop</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/fastest-way-to-duplicate-an-array-in-javascript-slice-vs-for-loop/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T15:19:46+08:00" itemprop="datePublished" title="2023-02-17 15:19">2023-02-17 15:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In order to duplicate an array in JavaScript: Which of the following is faster
to use?</p>
<h4>
<code>Slice</code> method</h4>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">dup_array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">original_array</span><span class="o">.</span><span class="n">slice</span><span class="p">();</span>
</pre></div>

<h4>
<code>For</code> loop</h4>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nf">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">original_array</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">len</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<span class="w">   </span><span class="n">dup_array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">original_array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
</pre></div>

<hr>
<p>I know both ways do only a <strong>shallow copy</strong> : if <code>original_array</code> contains
references to objects, objects won't be cloned, but only the references will
be copied, and therefore both arrays will have references to the same objects.
But this is not the point of this question.</p>
<p>I'm asking only about speed.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are at least <strong>6</strong> (!) ways to clone an array:</p>
<ul>
<li>loop</li>
<li>slice</li>
<li>Array.from()</li>
<li>concat</li>
<li>spread syntax (FASTEST)</li>
<li>map <code>A.map(function(e){return e;});</code>
</li>
</ul>
<p>There has been a huuuge BENCHMARKS thread, providing following information:</p>
<ul>
<li>
<p>for <strong>blink</strong> browsers <code>slice()</code> is the fastest method, <code>concat()</code> is a bit slower, and <code>while loop</code> is 2.4x slower.</p>
</li>
<li>
<p>for other browsers <code>while loop</code> is the fastest method, since those browsers don't have internal optimizations for <code>slice</code> and <code>concat</code>.</p>
</li>
</ul>
<p>This remains true in Jul 2016.</p>
<p>Below are simple scripts that you can copy-paste into your browser's console
and run several times to see the picture. They output milliseconds, lower is
better.</p>
<p><strong>while loop</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="o">*</span><span class="mi">1000</span><span class="p">;</span>
<span class="k">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nc">Date</span><span class="p">();</span>
<span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">Array</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"> </span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">Array</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"> </span>
<span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
<span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="nc">Date</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">start</span><span class="p">);</span>
</pre></div>

<p><strong>slice</strong></p>
<div class="code"><pre class="code literal-block">n = 1000*1000;
start = + new Date();
a = Array(n); 
b = a.slice();
console.log(new Date() - start);
</pre></div>

<p>Please note that these methods will clone the Array object itself, array
contents however are copied by reference and are not deep cloned.</p>
<div class="code"><pre class="code literal-block">origAr == clonedArr //returns false
origAr[0] == clonedArr[0] //returns true
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Technically <code>slice</code> <em>is</em> the fastest way. <em>However</em> , it is even faster if you
add the <code>0</code> begin index.</p>
<div class="code"><pre class="code literal-block">myArray.slice(0);
</pre></div>

<p>is faster than</p>
<div class="code"><pre class="code literal-block">myArray.slice();
</pre></div>

<p>https://jsben.ch/F0SZ3</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-764.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-762.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
