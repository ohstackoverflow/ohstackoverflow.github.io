<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1346) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1346.html">
<link rel="prev" href="index-1347.html" type="text/html">
<link rel="next" href="index-1345.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-sizeof-x-not-increment-x/" class="u-url">Why does sizeof(x++) not increment x?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-sizeof-x-not-increment-x/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T07:12:15+08:00" itemprop="datePublished" title="2023-02-18 07:12">2023-02-18 07:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Here is the code compiled in dev c++ windows:</p>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"%d and "</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">x</span><span class="o">++</span><span class="p">));</span><span class="w"> </span><span class="c1">// note 1</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="c1">// note 2</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>I expect <code>x</code> to be 6 after executing <strong>note 1</strong>. However, the output is:</p>
<div class="code"><pre class="code literal-block"><span class="mf">4</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mf">5</span>
</pre></div>

<p>Can anyone explain why <code>x</code> does not increment after <strong>note 1</strong>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From the C99 Standard (the emphasis is mine)</p>
<blockquote>
<p>6.5.3.4/2</p>
<p>The sizeof operator yields the size (in bytes) of its operand, which may be
an expression or the parenthesized name of a type. The size is determined
from the type of the operand. The result is an integer. If the type of the
operand is a variable length array type, the operand is evaluated;
otherwise, <strong>the operand is not evaluated</strong> and the result is an integer
constant.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p><code>sizeof</code> is a <strong><em>compile-time operator</em></strong> , so at the time of compilation
<code>sizeof</code> and its operand get replaced by the result value. The <em>operand is
<strong>not evaluated</strong> (except when it is a variable length array) at all; only the
<strong>type</strong> of the result matters.</em></p>
<div class="code"><pre class="code literal-block"><span class="nv">short</span><span class="w"> </span><span class="nv">func</span><span class="ss">(</span><span class="nv">short</span><span class="w"> </span><span class="nv">x</span><span class="ss">)</span><span class="w"> </span>{<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">never</span><span class="w"> </span><span class="nv">gets</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="o">!!</span>
<span class="w">   </span><span class="nv">printf</span><span class="ss">(</span><span class="s2">"%d"</span>,<span class="w"> </span><span class="nv">x</span><span class="ss">)</span><span class="c1">;    // this print never happens</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="c1">;</span>
}

<span class="nv">int</span><span class="w"> </span><span class="nv">main</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">   </span><span class="nv">printf</span><span class="ss">(</span><span class="s2">"%d"</span>,<span class="w"> </span><span class="nv">sizeof</span><span class="ss">(</span><span class="nv">func</span><span class="ss">(</span><span class="mi">3</span><span class="ss">)))</span><span class="c1">; // all that matters to sizeof is the </span>
<span class="w">                                  </span><span class="o">//</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">function</span>.
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
}
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block"><span class="mf">2</span>
</pre></div>

<p>as <code>short</code> occupies 2 bytes on my machine.</p>
<p>Changing the return type of the function to <code>double</code>:</p>
<div class="code"><pre class="code literal-block">double func(short x) {
// rest all same
</pre></div>

<p>will give <code>8</code> as output.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/format-a-go-string-without-printing/" class="u-url">Format a Go string without printing?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/format-a-go-string-without-printing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T07:11:49+08:00" itemprop="datePublished" title="2023-02-18 07:11">2023-02-18 07:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a simple way to format a string in Go without printing the string?</p>
<p>I can do:</p>
<div class="code"><pre class="code literal-block"><span class="nv">bar</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">"bar"</span>
<span class="nv">fmt</span><span class="o">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">"foo: %s"</span><span class="p">,</span><span class="w"> </span><span class="nv">bar</span><span class="p">)</span>
</pre></div>

<p>But I want the formatted string returned rather than printed so I can
manipulate it further.</p>
<p>I could also do something like:</p>
<div class="code"><pre class="code literal-block"><span class="nv">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">"foo: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">bar</span>
</pre></div>

<p>But this becomes difficult to read when the format string is complex, and
cumbersome when one or many of the parts aren't strings and have to be
converted first, like</p>
<div class="code"><pre class="code literal-block"><span class="nv">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">25</span>
<span class="nv">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">"foo: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">strconv</span><span class="o">.</span><span class="nf">Itoa</span><span class="p">(</span><span class="nv">i</span><span class="p">)</span>
</pre></div>

<p>Is there a simpler way to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Sprintf is what you are looking for.</p>
<p><strong>Example</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">fmt</span>.<span class="k">Sprintf</span><span class="ss">(</span><span class="s2">"foo: %s"</span>,<span class="w"> </span><span class="nv">bar</span><span class="ss">)</span>
</pre></div>

<p>You can also see it in use in the Errors example as part of "A Tour of Go."</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span><span class="nv">fmt</span>.<span class="k">Sprintf</span><span class="ss">(</span><span class="s2">"at %v, %s"</span>,<span class="w"> </span><span class="nv">e</span>.<span class="nv">When</span>,<span class="w"> </span><span class="nv">e</span>.<span class="nv">What</span><span class="ss">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h4>1. Simple strings</h4>
<p>For "simple" strings (typically what fits into a line) the simplest solution
is using <code>fmt.Sprintf()</code> and friends (<code>fmt.Sprint()</code>, <code>fmt.Sprintln()</code>). These
are analogous to the functions without the starter <code>S</code> letter, but these
<code>Sxxx()</code> variants return the result as a <code>string</code> instead of printing them to
the standard output.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block"><span class="nv">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">fmt</span><span class="o">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">"Hi, my name is %s and I'm %d years old."</span><span class="p">,</span><span class="w"> </span><span class="s">"Bob"</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">)</span>
</pre></div>

<p>The variable <code>s</code> will be initialized with the value:</p>
<div class="code"><pre class="code literal-block">Hi, my name is Bob and I'm 23 years old.
</pre></div>

<p><strong>Tip:</strong> If you just want to concatenate values of different types, you may
not automatically need to use <code>Sprintf()</code> (which requires a format string) as
<code>Sprint()</code> does exactly this. See this example:</p>
<div class="code"><pre class="code literal-block"><span class="nv">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">23</span>
<span class="nv">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">fmt</span><span class="o">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="s">"[age:"</span><span class="p">,</span><span class="w"> </span><span class="nv">i</span><span class="p">,</span><span class="w"> </span><span class="s">"]"</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="s">"[age:23]"</span>
</pre></div>

<p>For concatenating only <code>string</code>s, you may also use <code>strings.Join()</code> where you
can specify a custom separator <code>string</code> (to be placed between the strings to
join).</p>
<p>Try these on the Go Playground.</p>
<h4>2. Complex strings (documents)</h4>
<p>If the string you're trying to create is more complex (e.g. a multi-line email
message), <code>fmt.Sprintf()</code> becomes less readable and less efficient (especially
if you have to do this many times).</p>
<p>For this the standard library provides the packages <code>text/template</code> and
<code>html/template</code>. These packages implement data-driven templates for generating
textual output. <code>html/template</code> is for generating HTML output safe against
code injection. It provides the same interface as package <code>text/template</code> and
should be used instead of <code>text/template</code> whenever the output is HTML.</p>
<p>Using the <code>template</code> packages basically requires you to provide a static
template in the form of a <code>string</code> value (which may be originating from a file
in which case you only provide the file name) which may contain static text,
and actions which are processed and executed when the engine processes the
template and generates the output.</p>
<p>You may provide parameters which are included/substituted in the static
template and which may control the output generation process. Typical form of
such parameters are <code>struct</code>s and <code>map</code> values which may be nested.</p>
<p><strong>Example:</strong></p>
<p>For example let's say you want to generate email messages that look like this:</p>
<div class="code"><pre class="code literal-block"><span class="n">Hi</span><span class="w"> </span><span class="o">[</span><span class="n">name</span><span class="o">]</span><span class="err">!</span>

<span class="n">Your</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ready</span><span class="p">,</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">is</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">user-name</span><span class="o">]</span>

<span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">roles</span><span class="w"> </span><span class="nl">assigned</span><span class="p">:</span>
<span class="o">[</span><span class="n">role#1</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">role#2</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="o">[</span><span class="n">role#n</span><span class="o">]</span>
</pre></div>

<p>To generate email message bodies like this, you could use the following static
template:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">emailTmpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">`</span><span class="n">Hi</span><span class="w"> </span><span class="p">{{</span><span class="o">.</span><span class="n">Name</span><span class="p">}}</span><span class="o">!</span>

<span class="n">Your</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ready</span><span class="p">,</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">is</span><span class="p">:</span><span class="w"> </span><span class="p">{{</span><span class="o">.</span><span class="n">UserName</span><span class="p">}}</span>

<span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">roles</span><span class="w"> </span><span class="n">assigned</span><span class="p">:</span>
<span class="p">{{</span><span class="nb">range</span><span class="w"> </span><span class="o">$</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="o">$</span><span class="n">r</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">Roles</span><span class="p">}}{{</span><span class="k">if</span><span class="w"> </span><span class="o">$</span><span class="n">i</span><span class="p">}},</span><span class="w"> </span><span class="p">{{</span><span class="n">end</span><span class="p">}}{{</span><span class="o">.</span><span class="p">}}{{</span><span class="n">end</span><span class="p">}}</span>
<span class="err">`</span>
</pre></div>

<p>And provide data like this for executing it:</p>
<div class="code"><pre class="code literal-block"><span class="k">data</span><span class="w"> </span><span class="err">:</span><span class="o">=</span><span class="w"> </span><span class="k">map</span><span class="o">[</span><span class="n">string</span><span class="o">]</span><span class="n">interface</span><span class="err">{}{</span>
<span class="w">    </span><span class="ss">"Name"</span><span class="err">:</span><span class="w">     </span><span class="ss">"Bob"</span><span class="p">,</span>
<span class="w">    </span><span class="ss">"UserName"</span><span class="err">:</span><span class="w"> </span><span class="ss">"bob92"</span><span class="p">,</span>
<span class="w">    </span><span class="ss">"Roles"</span><span class="err">:</span><span class="w">    </span><span class="err">[]</span><span class="n">string</span><span class="err">{</span><span class="ss">"dbteam"</span><span class="p">,</span><span class="w"> </span><span class="ss">"uiteam"</span><span class="p">,</span><span class="w"> </span><span class="ss">"tester"</span><span class="err">}</span><span class="p">,</span>
<span class="err">}</span>
</pre></div>

<p>Normally output of templates are written to an <code>io.Writer</code>, so if you want the
result as a <code>string</code>, create and write to a <code>bytes.Buffer</code> (which implements
<code>io.Writer</code>). Executing the template and getting the result as <code>string</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">template</span><span class="o">.</span><span class="nf">Must</span><span class="p">(</span><span class="nv">template</span><span class="o">.</span><span class="nf">New</span><span class="p">(</span><span class="s">"email"</span><span class="p">)</span><span class="o">.</span><span class="nf">Parse</span><span class="p">(</span><span class="nv">emailTmpl</span><span class="p">))</span>
<span class="nv">buf</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span>&amp;<span class="nv">bytes</span><span class="o">.</span><span class="nv">Buffer</span><span class="p">{}</span>
<span class="k">if</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">t</span><span class="o">.</span><span class="nf">Execute</span><span class="p">(</span><span class="nv">buf</span><span class="p">,</span><span class="w"> </span><span class="nv">data</span><span class="p">);</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nf">panic</span><span class="p">(</span><span class="nv">err</span><span class="p">)</span>
<span class="p">}</span>
<span class="nv">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">buf</span><span class="o">.</span><span class="nf">String</span><span class="p">()</span>
</pre></div>

<p>This will result in the expected output:</p>
<div class="code"><pre class="code literal-block"><span class="n">Hi</span><span class="w"> </span><span class="n">Bob</span><span class="o">!</span>

<span class="n">Your</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">ready</span><span class="p">,</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="nl">is:</span><span class="w"> </span><span class="n">bob92</span>

<span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">roles</span><span class="w"> </span><span class="nl">assigned:</span>
<span class="n">dbteam</span><span class="p">,</span><span class="w"> </span><span class="n">uiteam</span><span class="p">,</span><span class="w"> </span><span class="n">tester</span>
</pre></div>

<p>Try it on the Go Playground.</p>
<p>Also note that since Go 1.10, a newer, faster, more specialized alternative is
available to <code>bytes.Buffer</code> which is: <code>strings.Builder</code>. Usage is very
similar:</p>
<div class="code"><pre class="code literal-block"><span class="nv">builder</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span>&amp;<span class="nv">strings</span><span class="o">.</span><span class="nv">Builder</span><span class="p">{}</span>
<span class="k">if</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">t</span><span class="o">.</span><span class="nf">Execute</span><span class="p">(</span><span class="nv">builder</span><span class="p">,</span><span class="w"> </span><span class="nv">data</span><span class="p">);</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nf">panic</span><span class="p">(</span><span class="nv">err</span><span class="p">)</span>
<span class="p">}</span>
<span class="nv">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">builder</span><span class="o">.</span><span class="nf">String</span><span class="p">()</span>
</pre></div>

<p>Try this one on the Go Playground.</p>
<p>Note: you may also display the result of a template execution if you provide
<code>os.Stdout</code> as the target (which also implements <code>io.Writer</code>):</p>
<div class="code"><pre class="code literal-block"><span class="nv">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">template</span><span class="o">.</span><span class="nf">Must</span><span class="p">(</span><span class="nv">template</span><span class="o">.</span><span class="nf">New</span><span class="p">(</span><span class="s">"email"</span><span class="p">)</span><span class="o">.</span><span class="nf">Parse</span><span class="p">(</span><span class="nv">emailTmpl</span><span class="p">))</span>
<span class="k">if</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">t</span><span class="o">.</span><span class="nf">Execute</span><span class="p">(</span><span class="nv">os</span><span class="o">.</span><span class="nv">Stdout</span><span class="p">,</span><span class="w"> </span><span class="nv">data</span><span class="p">);</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nf">panic</span><span class="p">(</span><span class="nv">err</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<p>This will write the result directly to <code>os.Stdout</code>. Try this on the Go
Playground.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-split-a-delimited-string-so-i-can-access-individual-items/" class="u-url">How do I split a delimited string so I can access individual items?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-split-a-delimited-string-so-i-can-access-individual-items/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T07:11:20+08:00" itemprop="datePublished" title="2023-02-18 07:11">2023-02-18 07:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Using SQL Server, how do I split a string so I can access item x?</p>
<p>Take a string "Hello John Smith". How can I split the string by space and
access the item at index 1 which should return "John"?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You may find the solution in <em>SQL User Defined Function to Parse a Delimited
String</em> helpful (from The Code Project).</p>
<p>You can use this simple logic:</p>
<div class="code"><pre class="code literal-block"><span class="k">Declare</span><span class="w"> </span><span class="nv">@products</span><span class="w"> </span><span class="nc">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'1|20|3|343|44|6|8765'</span>
<span class="k">Declare</span><span class="w"> </span><span class="nv">@individual</span><span class="w"> </span><span class="nc">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span>

<span class="k">WHILE</span><span class="w"> </span><span class="nf">LEN</span><span class="p">(</span><span class="nv">@products</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="k">BEGIN</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="nf">PATINDEX</span><span class="p">(</span><span class="s1">'%|%'</span><span class="p">,</span><span class="w"> </span><span class="nv">@products</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@individual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SUBSTRING</span><span class="p">(</span><span class="nv">@products</span><span class="p">,</span>
<span class="w">                                    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                                    </span><span class="nf">PATINDEX</span><span class="p">(</span><span class="s1">'%|%'</span><span class="p">,</span><span class="w"> </span><span class="nv">@products</span><span class="p">))</span>
<span class="w">        </span><span class="k">SELECT</span><span class="w"> </span><span class="nv">@individual</span>

<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SUBSTRING</span><span class="p">(</span><span class="nv">@products</span><span class="p">,</span>
<span class="w">                                  </span><span class="nf">LEN</span><span class="p">(</span><span class="nv">@individual</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'|'</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                                  </span><span class="nf">LEN</span><span class="p">(</span><span class="nv">@products</span><span class="p">))</span>
<span class="w">    </span><span class="k">END</span>
<span class="w">    </span><span class="k">ELSE</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@individual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@products</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">NULL</span>
<span class="w">        </span><span class="k">SELECT</span><span class="w"> </span><span class="nv">@individual</span>
<span class="w">    </span><span class="k">END</span>
<span class="k">END</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You may find the solution in <em>SQL User Defined Function to Parse a Delimited
String</em> helpful (from The Code Project).</p>
<p>You can use this simple logic:</p>
<div class="code"><pre class="code literal-block"><span class="k">Declare</span><span class="w"> </span><span class="nv">@products</span><span class="w"> </span><span class="nc">varchar</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'1|20|3|343|44|6|8765'</span>
<span class="k">Declare</span><span class="w"> </span><span class="nv">@individual</span><span class="w"> </span><span class="nc">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span>

<span class="k">WHILE</span><span class="w"> </span><span class="nf">LEN</span><span class="p">(</span><span class="nv">@products</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="k">BEGIN</span>
<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="nf">PATINDEX</span><span class="p">(</span><span class="s1">'%|%'</span><span class="p">,</span><span class="w"> </span><span class="nv">@products</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@individual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SUBSTRING</span><span class="p">(</span><span class="nv">@products</span><span class="p">,</span>
<span class="w">                                    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                                    </span><span class="nf">PATINDEX</span><span class="p">(</span><span class="s1">'%|%'</span><span class="p">,</span><span class="w"> </span><span class="nv">@products</span><span class="p">))</span>
<span class="w">        </span><span class="k">SELECT</span><span class="w"> </span><span class="nv">@individual</span>

<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SUBSTRING</span><span class="p">(</span><span class="nv">@products</span><span class="p">,</span>
<span class="w">                                  </span><span class="nf">LEN</span><span class="p">(</span><span class="nv">@individual</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'|'</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                                  </span><span class="nf">LEN</span><span class="p">(</span><span class="nv">@products</span><span class="p">))</span>
<span class="w">    </span><span class="k">END</span>
<span class="w">    </span><span class="k">ELSE</span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@individual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@products</span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">NULL</span>
<span class="w">        </span><span class="k">SELECT</span><span class="w"> </span><span class="nv">@individual</span>
<span class="w">    </span><span class="k">END</span>
<span class="k">END</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1347.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1345.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
