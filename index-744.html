<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 744) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-744.html">
<link rel="prev" href="index-745.html" type="text/html">
<link rel="next" href="index-743.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/rao-guo-mysql-real-escape-string-de-sql-zhu-ru/" class="u-url">绕过 mysql_real_escape_string() 的 SQL 注入</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/rao-guo-mysql-real-escape-string-de-sql-zhu-ru/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:59:49+08:00" itemprop="datePublished" title="2023-02-17 14:59">2023-02-17 14:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>即使使用<code>mysql_real_escape_string()</code>函数也有SQL注入的可能性吗？</p>
<p>考虑这个示例情况。SQL 是用 PHP 构造的，如下所示：</p>
<div class="code"><pre class="code literal-block">$login = mysql_real_escape_string(GetFromPost('login'));
$password = mysql_real_escape_string(GetFromPost('password'));

$sql = "SELECT * FROM table WHERE login='$login' AND password='$password'";
</pre></div>

<p>我听到很多人对我说，这样的代码仍然很危险，即使<code>mysql_real_escape_string()</code>使用了功能也有可能被破解。但我想不出任何可能的利用？</p>
<p>像这样的经典注入：</p>
<div class="code"><pre class="code literal-block">aaa' OR 1=1 --
</pre></div>

<p>不工作。</p>
<p>你知道任何可能通过上面的 PHP 代码进行的注入吗？</p>
<p><br><br></p>
<h2>解答</h2>
<p>考虑以下查询：</p>
<div class="code"><pre class="code literal-block">$iId = mysql_real_escape_string("1 OR 1=1");    
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>

<p><code>mysql_real_escape_string()</code>不会保护你免受这个。 <strong>事实上，您<code>' '</code>在查询中的变量周围使用单引号 ( )
可以保护您免受这种情况的影响。</strong>以下也是一个选项：</p>
<div class="code"><pre class="code literal-block">$iId = (int)"1 OR 1=1";
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>考虑以下查询：</p>
<div class="code"><pre class="code literal-block">$iId = mysql_real_escape_string("1 OR 1=1");    
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>

<p><code>mysql_real_escape_string()</code>不会保护你免受这个。 <strong>事实上，您<code>' '</code>在查询中的变量周围使用单引号 ( )
可以保护您免受这种情况的影响。</strong>以下也是一个选项：</p>
<div class="code"><pre class="code literal-block">$iId = (int)"1 OR 1=1";
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>

<p><br><br><a href="posts/sql-injection-that-gets-around-mysql-real-escape-string/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pythonzhong-dan-xia-hua-xian-bian-liang-de-yong-tu-shi-shi-yao/" class="u-url">Python中单下划线“_”变量的用途是什么？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pythonzhong-dan-xia-hua-xian-bian-liang-de-yong-tu-shi-shi-yao/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:59:23+08:00" itemprop="datePublished" title="2023-02-17 14:59">2023-02-17 14:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>这段代码中的<code>_</code>after是什么意思？<code>for</code></p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">tbh</span>.<span class="nv">bag</span>:
<span class="w">    </span><span class="nv">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">tbh</span>.<span class="nv">bag</span>.<span class="nv">atom_set</span><span class="ss">()</span>:
<span class="w">        </span><span class="nv">n</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
</pre></div>

<p><br><br></p>
<h2>解答</h2>
<p><code>_</code>在 Python 中有 3 个主要的常规用途：</p>
<ol>
<li>
<p>在交互式解释器会话中保存最后执行的表达式的结果（请参阅文档）。这个先例是由标准的 CPython 解释器开创的，其他解释器也纷纷效仿</p>
</li>
<li>
<p>对于 i18n 中的翻译查找（例如，请参阅gettext文档），如代码中所示</p>
<div class="code"><pre class="code literal-block">raise forms.ValidationError(_("Please enter a correct username"))
</pre></div>

</li>
<li>
<p>作为通用的“一次性”变量名：</p>
<ol>
<li>
<p>指示函数结果的一部分被故意忽略（从概念上讲，它被丢弃。），如代码所示：</p>
<div class="code"><pre class="code literal-block">    label, has_label, _ = text.partition(':')
</pre></div>

</li>
<li>
<p>作为函数定义的一部分（使用<code>def</code>或<code>lambda</code>），其中签名是固定的（例如通过回调或父类 API），但此特定函数实现不需要所有参数，如代码所示：</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">callback</span><span class="ss">(</span><span class="nv">_</span><span class="ss">)</span>:
<span class="k">return</span><span class="w"> </span><span class="nv">True</span>
</pre></div>

</li>
</ol>
</li>
</ol>
<p>[很长一段时间以来，这个答案都没有列出这个用例，但它经常出现，如此处所述，值得明确列出。]</p>
<p>此用例可能与翻译查找用例冲突，因此有必要避免<code>_</code>在任何代码块中使用一次性变量，该代码块也将其用于 i18n
翻译（许多人更喜欢双下划线，<code>__</code>作为他们的一次性变量这个原因）。</p>
<p>Linters 经常识别这个用例。例如，如果稍后在代码中未使用，<code>year, month, day = date()</code>将引发 lint
警告。如果确实不需要，<code>day</code>修复方法是编写. 与 lambda 函数相同，创建一个需要一个参数但不使用它的函数，这将被 lint 捕获。解决办法是写.
未使用的变量通常隐藏错误/拼写错误（例如设置但在下一行使用）。<code>day``year, month, _ = date()``lambda arg:
1.0``lambda _: 1.0``day``dya</code></p>
<p>Python 3.10
中添加的模式匹配功能将这种用法从“约定”提升到“语言语法”，其中<code>match</code>涉及语句：在匹配情况下，<code>_</code>是通配符模式，在这种情况下，运行时甚至不会将值绑定到符号.</p>
<p>对于其他用例，请记住它<code>_</code>仍然是一个有效的变量名，因此仍会使对象保持活动状态。在不希望这样做的情况下（例如释放内存或外部资源），显式<code>del
name</code>调用将既满足 linters 正在使用该名称， <em>又</em> 迅速清除对该对象的引用。</p>
<p><br></p>
<h3>更多建议</h3>
<p>它只是一个变量名，在 python 中通常用于<code>_</code>一次性变量。它只是表明实际上没有使用循环变量。</p>
<p><br><br><a href="posts/what-is-the-purpose-of-the-single-underscore-variable-in-python/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ni-neng-cong-github-cun-chu-ku-zhong-huo-qu-dai-ma-xing-shu-ma/" class="u-url">你能从 GitHub 存储库中获取代码行数吗？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ni-neng-cong-github-cun-chu-ku-zhong-huo-qu-dai-ma-xing-shu-ma/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:59:00+08:00" itemprop="datePublished" title="2023-02-17 14:59">2023-02-17 14:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>在 GitHub 存储库中，您可以看到“语言统计信息”，它显示了用某种语言编写的项目的 <em>百分比。</em>
但是，它不会显示项目包含多少行代码。通常，我想快速了解项目的规模和复杂性，而代码行数可以给人留下良好的第一印象。500
行代码意味着一个相对简单的项目，100,000 行代码意味着一个非常大/复杂的项目。</p>
<p>那么，是否可以从 GitHub 存储库中获取以各种语言编写的代码行，最好不要克隆它？</p>
<hr>
<p>“ Count number of lines in a git repository ”这个问题问的是如何统计本地 Git 仓库中的代码行数，但是：</p>
<ol>
<li>您必须克隆该项目，该项目可能非常庞大。例如，克隆像 Wine 这样的项目需要很长时间。</li>
<li>您会计算不一定是代码的文件中的行数，例如 i13n 文件。</li>
<li>如果你 <em>只</em> 计算（例如）Ruby 文件，你可能会错过大量其他语言的代码，比如 JavaScript。您必须事先了解项目使用的语言。您还必须为项目使用的每种语言重复计数。</li>
</ol>
<p>总而言之，这对于“快速检查项目规模”来说可能过于耗时。</p>
<p><br><br></p>
<h2>解答</h2>
<h4>Not currently possible on Github.com or their API-s</h4>
<p>I have talked to customer support and confirmed that this can not be done on
github.com. They have passed the suggestion along to the Github team though,
so hopefully it will be possible in the future. If so, I'll be sure to edit
this answer.</p>
<p>Meanwhile, Rory O'Kane's answer is a brilliant alternative based on <code>cloc</code> and
a shallow repo clone.</p>
<p><br></p>
<h3>更多建议</h3>
<h2>一个shell脚本，<code>cloc-git</code>
</h2>
<p>您可以使用此 shell 脚本通过一条命令计算远程 Git 存储库中的行数：</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/ni-neng-cong-github-cun-chu-ku-zhong-huo-qu-dai-ma-xing-shu-ma/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/usr/bin/env bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ni-neng-cong-github-cun-chu-ku-zhong-huo-qu-dai-ma-xing-shu-ma/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code>git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span><span class="w"> </span>temp-linecount-repo<span class="w"> </span><span class="o">&amp;&amp;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ni-neng-cong-github-cun-chu-ku-zhong-huo-qu-dai-ma-xing-shu-ma/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"('temp-linecount-repo' will be deleted automatically)\n\n\n"</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ni-neng-cong-github-cun-chu-ku-zhong-huo-qu-dai-ma-xing-shu-ma/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="w">  </span>cloc<span class="w"> </span>temp-linecount-repo<span class="w"> </span><span class="o">&amp;&amp;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ni-neng-cong-github-cun-chu-ku-zhong-huo-qu-dai-ma-xing-shu-ma/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="w">  </span>rm<span class="w"> </span>-rf<span class="w"> </span>temp-linecount-repo
</code></td>
</tr>
</table></div>
<h3>安装</h3>
<p>此脚本需要安装CLOC （“Count Lines of Code”）。<code>cloc</code>可能可以用你的包管理器安装——例如，<code>brew install
cloc</code>用Homebrew。下还有发布的docker镜像<code>mribeiro/cloc</code>。</p>
<p>您可以通过将其代码保存到文件<code>cloc-git</code>、运行<code>chmod +x cloc-
git</code>，然后将文件移动到您<code>$PATH</code>的<code>/usr/local/bin</code>.</p>
<h3>用法</h3>
<p>该脚本采用一个参数，即<code>git clone</code>可以接受的任何
URL。例如<code>https://github.com/evalEmpire/perl5i.git</code>(HTTPS)
或<code>git@github.com:evalEmpire/perl5i.git</code>(SSH)。您可以通过单击“克隆或下载”从任何 GitHub 项目页面获取此
URL。</p>
<p>示例输出：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>cloc-git<span class="w"> </span>https://github.com/evalEmpire/perl5i.git
Cloning<span class="w"> </span>into<span class="w"> </span><span class="s1">'temp-linecount-repo'</span>...
remote:<span class="w"> </span>Counting<span class="w"> </span>objects:<span class="w"> </span><span class="m">200</span>,<span class="w"> </span><span class="k">done</span>.
remote:<span class="w"> </span>Compressing<span class="w"> </span>objects:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">182</span>/182<span class="o">)</span>,<span class="w"> </span><span class="k">done</span>.
remote:<span class="w"> </span>Total<span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="o">(</span>delta<span class="w"> </span><span class="m">13</span><span class="o">)</span>,<span class="w"> </span>reused<span class="w"> </span><span class="m">158</span><span class="w"> </span><span class="o">(</span>delta<span class="w"> </span><span class="m">9</span><span class="o">)</span>,<span class="w"> </span>pack-reused<span class="w"> </span><span class="m">0</span>
Receiving<span class="w"> </span>objects:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">200</span>/200<span class="o">)</span>,<span class="w"> </span><span class="m">296</span>.52<span class="w"> </span>KiB<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">110</span>.00<span class="w"> </span>KiB/s,<span class="w"> </span><span class="k">done</span>.
Resolving<span class="w"> </span>deltas:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">13</span>/13<span class="o">)</span>,<span class="w"> </span><span class="k">done</span>.
Checking<span class="w"> </span>connectivity...<span class="w"> </span><span class="k">done</span>.
<span class="o">(</span><span class="s1">'temp-linecount-repo'</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>deleted<span class="w"> </span>automatically<span class="o">)</span>


<span class="w">     </span><span class="m">171</span><span class="w"> </span>text<span class="w"> </span>files.
<span class="w">     </span><span class="m">166</span><span class="w"> </span>unique<span class="w"> </span>files.<span class="w">                                          </span>
<span class="w">      </span><span class="m">17</span><span class="w"> </span>files<span class="w"> </span>ignored.

http://cloc.sourceforge.net<span class="w"> </span>v<span class="w"> </span><span class="m">1</span>.62<span class="w">  </span><span class="nv">T</span><span class="o">=</span><span class="m">1</span>.13<span class="w"> </span>s<span class="w"> </span><span class="o">(</span><span class="m">134</span>.1<span class="w"> </span>files/s,<span class="w"> </span><span class="m">9764</span>.6<span class="w"> </span>lines/s<span class="o">)</span>
-------------------------------------------------------------------------------
Language<span class="w">                     </span>files<span class="w">          </span>blank<span class="w">        </span>comment<span class="w">           </span>code
-------------------------------------------------------------------------------
Perl<span class="w">                           </span><span class="m">149</span><span class="w">           </span><span class="m">2795</span><span class="w">           </span><span class="m">1425</span><span class="w">           </span><span class="m">6382</span>
JSON<span class="w">                             </span><span class="m">1</span><span class="w">              </span><span class="m">0</span><span class="w">              </span><span class="m">0</span><span class="w">            </span><span class="m">270</span>
YAML<span class="w">                             </span><span class="m">2</span><span class="w">              </span><span class="m">0</span><span class="w">              </span><span class="m">0</span><span class="w">            </span><span class="m">198</span>
-------------------------------------------------------------------------------
SUM:<span class="w">                           </span><span class="m">152</span><span class="w">           </span><span class="m">2795</span><span class="w">           </span><span class="m">1425</span><span class="w">           </span><span class="m">6850</span>
-------------------------------------------------------------------------------
</pre></div>

<h2>备择方案</h2>
<h3>手动运行命令</h3>
<p>如果不想保存和安装 shell 脚本，可以手动运行命令。一个例子：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="w"> </span><span class="m">1</span><span class="w"> </span>https://github.com/evalEmpire/perl5i.git
$<span class="w"> </span>cloc<span class="w"> </span>perl5i
$<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>perl5i
</pre></div>

<h3>语言学家</h3>
<p>如果您希望结果与 GitHub 的语言百分比完全匹配，您可以尝试安装Linguist而不是CLOC。根据它的 README，你需要<code>gem install
linguist</code>然后运行<code>linguist</code>。我无法让它工作（问题 #2223）。</p>
<p><br><br><a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-745.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-743.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
