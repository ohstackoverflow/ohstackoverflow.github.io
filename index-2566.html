<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2566) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2566.html">
<link rel="prev" href="index-2567.html" type="text/html">
<link rel="next" href="index-2565.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-android-studio-be-used-to-run-standard-java-projects/" class="u-url">Can Android Studio be used to run standard Java projects?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-android-studio-be-used-to-run-standard-java-projects/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T01:31:58+08:00" itemprop="datePublished" title="2023-03-05 01:31">2023-03-05 01:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>For those times when you want to isolate the Java and give it a quick test..</p>
<p>Can you run non-Android Java projects in Android studio as in Eclipse?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Tested on Android Studio 0.8.6 - 3.5</strong></p>
<p>Using this method you can have Java modules and Android modules in the same
project and also have the ability to compile and run Java modules as stand
alone Java projects.</p>
<ol>
<li>Open your Android project in Android Studio. If you do not have one, create one.</li>
<li>Click <strong>File &gt; New Module</strong>. Select <strong>Java Library</strong> and click <strong>Next</strong>.</li>
<li>Fill in the package name, etc and click <strong>Finish</strong>. You should now see a Java module inside your Android project.</li>
<li>Add your code to the Java module you've just created.</li>
<li>Click on the drop down to the left of the run button. Click <strong>Edit Configurations...</strong>
</li>
<li>In the new window, click on the plus sign at the top left of the window and select <strong>Application</strong>
</li>
<li>A new application configuration should appear, enter in the details such as your main class and classpath of your module.</li>
<li>Click <strong>OK</strong>.</li>
</ol>
<p>Now if you click run, this should compile and run your Java module.</p>
<p>If you get the error <code>Error: Could not find or load main class...</code>, just enter
your main class (as you've done in step 7) again even if the field is already
filled in. Click <strong>Apply</strong> and then click <strong>Ok</strong>.</p>
<p>My usage case: My Android app relies on some precomputed files to function.
These precomputed files are generated by some Java code. Since these two
things go hand in hand, it makes the most sense to have both of these modules
in the same project.</p>
<p><strong>NEW - How to enable Kotlin in your standalone project</strong></p>
<p>If you want to enable Kotlin inside your standalone project, do the following.</p>
<ol>
<li>
<p>Continuing from the last step above, add the following code to your project level <code>build.gradle</code> (lines to add are denoted by <strong>&gt; &gt;&gt;</strong>):</p>
<div class="code"><pre class="code literal-block"><span class="n">buildscript</span><span class="w"> </span><span class="p">{</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">ext</span><span class="o">.</span><span class="n">kotlin_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'1.2.51'</span>
<span class="n">repositories</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">google</span><span class="p">()</span>
<span class="w">    </span><span class="n">jcenter</span><span class="p">()</span>
<span class="p">}</span>
<span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">classpath</span><span class="w"> </span><span class="s1">'com.android.tools.build:gradle:3.1.3'</span>
<span class="w">    </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">classpath</span><span class="w"> </span><span class="s2">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">NOTE</span><span class="p">:</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="n">here</span><span class="p">;</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">belong</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="n">build</span><span class="o">.</span><span class="n">gradle</span><span class="w"> </span><span class="n">files</span>
<span class="p">}</span>
</pre></div>

<p>}
...</p>
</li>
<li>
<p>Add the following code to your module level <code>build.gradle</code> (lines to add are denoted by <strong>&gt; &gt;&gt;</strong>):</p>
<div class="code"><pre class="code literal-block">apply plugin: 'java-library'
</pre></div>

<blockquote>
<blockquote>
<blockquote>
<p>apply plugin: 'kotlin'</p>
</blockquote>
</blockquote>
</blockquote>
<p>dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    &gt;&gt;&gt; implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
    &gt;&gt;&gt; runtimeClasspath files(compileKotlin.destinationDir)
}
...</p>
</li>
<li>
<p>Bonus step: Convert your main function to Kotlin! Simply change your main class to:</p>
<div class="code"><pre class="code literal-block"><span class="k">object</span><span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="err">{</span>
<span class="p">...</span>
<span class="nv">@JvmStatic</span>
<span class="n">fun</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nl">args</span><span class="p">:</span><span class="w"> </span><span class="k">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">something</span>
<span class="err">}</span>
<span class="p">...</span>
</pre></div>

<p>}</p>
</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>EDIT: many moon after this question was asked, yes, now apparently you can.</p>
<p>No, but it's based on Intellij IDEA.</p>
<p>The community version of that is free for download but it doesn't support most
things requiring an external database or application server. The line for Java
is pretty much that JavaSE code can happily use Community.</p>
<p>If you want that (or are using JavaEE) then you either need the Ultimate
version, which isn't free, or the EAP of the next version which is usually
good for a month until they release another.</p>
<p>Basically it works like this</p>
<p>Android Studio is just Android the Android Stuff from IDEA 13 Community...</p>
<p>...which will be free, and is anything from IDEA 13 Ultimate...</p>
<p>...that doesn't require a database or app server.</p>
<p>http://www.jetbrains.com/idea/</p>
<p>IDEA 12 Community doesn't have the ability to import the gradilized project
and it won't, so while you can do Android development in it now (I do), don't
expect it to have the same features as Android Studio. There's a lot of good
new Android stuff in it, that's going into 13.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-use-filter-map-and-reduce-in-python-3/" class="u-url">How to use filter, map, and reduce in Python 3</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-use-filter-map-and-reduce-in-python-3/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T01:30:38+08:00" itemprop="datePublished" title="2023-03-05 01:30">2023-03-05 01:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>filter</code>, <code>map</code>, and <code>reduce</code> work perfectly in Python 2. Here is an example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">f</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>:
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">filter</span><span class="ss">(</span><span class="nv">f</span>,<span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">2</span>,<span class="w"> </span><span class="mi">25</span><span class="ss">))</span>
[<span class="mi">5</span>,<span class="w"> </span><span class="mi">7</span>,<span class="w"> </span><span class="mi">11</span>,<span class="w"> </span><span class="mi">13</span>,<span class="w"> </span><span class="mi">17</span>,<span class="w"> </span><span class="mi">19</span>,<span class="w"> </span><span class="mi">23</span>]

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">cube</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>:
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="o">*</span><span class="nv">x</span><span class="o">*</span><span class="nv">x</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">map</span><span class="ss">(</span><span class="nv">cube</span>,<span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="mi">11</span><span class="ss">))</span>
[<span class="mi">1</span>,<span class="w"> </span><span class="mi">8</span>,<span class="w"> </span><span class="mi">27</span>,<span class="w"> </span><span class="mi">64</span>,<span class="w"> </span><span class="mi">125</span>,<span class="w"> </span><span class="mi">216</span>,<span class="w"> </span><span class="mi">343</span>,<span class="w"> </span><span class="mi">512</span>,<span class="w"> </span><span class="mi">729</span>,<span class="w"> </span><span class="mi">1000</span>]

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">add</span><span class="ss">(</span><span class="nv">x</span>,<span class="nv">y</span><span class="ss">)</span>:
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="o">+</span><span class="nv">y</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">reduce</span><span class="ss">(</span><span class="nv">add</span>,<span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="mi">11</span><span class="ss">))</span>
<span class="mi">55</span>
</pre></div>

<p>But in Python 3, I receive the following outputs:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; filter(f, range(2, 25))
&lt;filter object at 0x0000000002C14908&gt;

&gt;&gt;&gt; map(cube, range(1, 11))
&lt;map object at 0x0000000002C82B70&gt;

&gt;&gt;&gt; reduce(add, range(1, 11))
Traceback (most recent call last):
  File "&lt;pyshell#8&gt;", line 1, in &lt;module&gt;
    reduce(add, range(1, 11))
NameError: name 'reduce' is not defined
</pre></div>

<p>I would appreciate if someone could explain to me why this is.</p>
<p>Screenshot of code for further clarity:</p>
<p><img alt="IDLE sessions of Python 2 and 3 side-by-side" src="https://i.imgur.com/WekeD.png"></p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can read about the changes in What's New In Python 3.0. You should read it
thoroughly when you move from 2.x to 3.x since a lot has been changed.</p>
<p>The whole answer here are quotes from the documentation.</p>
<p><strong>Views And Iterators Instead Of Lists</strong></p>
<blockquote>
<p>Some well-known APIs no longer return lists:</p>
<ul>
<li>[...]</li>
<li>
<code>map()</code> and <code>filter()</code> return iterators. If you really need a list, a
quick fix is e.g. <code>list(map(...))</code>, but a better fix is often to use a list
comprehension (especially when the original code uses lambda), or rewriting
the code so it doesn’t need a list at all. Particularly tricky is <code>map()</code>
invoked for the side effects of the function; the correct transformation is
to use a regular <code>for</code> loop (since creating a list would just be wasteful).</li>
<li>[...]
</li>
</ul>
</blockquote>
<p><strong>Builtins</strong></p>
<blockquote>
<ul>
<li>[...]</li>
<li>Removed <code>reduce()</code>. Use <code>functools.reduce()</code> if you really need it;
however, 99 percent of the time an explicit <code>for</code> loop is more readable.</li>
<li>[...]
</li>
</ul>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>The functionality of <code>map</code> and <code>filter</code> was intentionally changed to return
iterators, and reduce was removed from being a built-in and placed in
<code>functools.reduce</code>.</p>
<p>So, for <code>filter</code> and <code>map</code>, you can wrap them with <code>list()</code> to see the results
like you did before.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">!=</span> <span class="mi">0</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">25</span><span class="p">)))</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">cube</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">cube</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">216</span><span class="p">,</span> <span class="mi">343</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">729</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">functools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="mi">55</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p>The recommendation now is that you replace your usage of map and filter with
generators expressions or list comprehensions. Example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">f</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>:<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span>
...
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span>[<span class="nv">i</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">2</span>,<span class="w"> </span><span class="mi">25</span><span class="ss">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">f</span><span class="ss">(</span><span class="nv">i</span><span class="ss">)</span>]
[<span class="mi">5</span>,<span class="w"> </span><span class="mi">7</span>,<span class="w"> </span><span class="mi">11</span>,<span class="w"> </span><span class="mi">13</span>,<span class="w"> </span><span class="mi">17</span>,<span class="w"> </span><span class="mi">19</span>,<span class="w"> </span><span class="mi">23</span>]
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">def</span><span class="w"> </span><span class="nv">cube</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>:<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="o">*</span><span class="nv">x</span><span class="o">*</span><span class="nv">x</span>
...
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span>[<span class="nv">cube</span><span class="ss">(</span><span class="nv">i</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="mi">11</span><span class="ss">)</span>]
[<span class="mi">1</span>,<span class="w"> </span><span class="mi">8</span>,<span class="w"> </span><span class="mi">27</span>,<span class="w"> </span><span class="mi">64</span>,<span class="w"> </span><span class="mi">125</span>,<span class="w"> </span><span class="mi">216</span>,<span class="w"> </span><span class="mi">343</span>,<span class="w"> </span><span class="mi">512</span>,<span class="w"> </span><span class="mi">729</span>,<span class="w"> </span><span class="mi">1000</span>]
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p>They say that for loops are 99 percent of the time easier to read than reduce,
but I'd just stick with <code>functools.reduce</code>.</p>
<p><strong>Edit</strong> : The 99 percent figure is pulled directly from the What’s New In
Python 3.0 page authored by Guido van Rossum.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-check-if-a-variable-is-a-dictionary-in-python/" class="u-url">How to check if a variable is a dictionary in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-check-if-a-variable-is-a-dictionary-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T01:29:27+08:00" itemprop="datePublished" title="2023-03-05 01:29">2023-03-05 01:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How would you check if a variable is a dictionary in Python?</p>
<p>For example, I'd like it to loop through the values in the dictionary until it
finds a dictionary. Then, loop through the one it finds:</p>
<div class="code"><pre class="code literal-block"><span class="nv">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{<span class="s1">'abc'</span>:<span class="w"> </span><span class="s1">'abc'</span>,<span class="w"> </span><span class="s1">'def'</span>:<span class="w"> </span>{<span class="s1">'ghi'</span>:<span class="w"> </span><span class="s1">'ghi'</span>,<span class="w"> </span><span class="s1">'jkl'</span>:<span class="w"> </span><span class="s1">'jkl'</span>}}
<span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">dict</span>.<span class="nv">iteritems</span><span class="ss">()</span>:
<span class="w">    </span><span class="k">if</span><span class="w"> </span>###<span class="nv">check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">dictionary</span>:
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">v</span>.<span class="nv">iteritems</span><span class="ss">()</span>:
<span class="w">            </span><span class="nv">print</span><span class="ss">(</span><span class="nv">k</span>,<span class="w"> </span><span class="s1">' '</span>,<span class="w"> </span><span class="nv">v</span><span class="ss">)</span>
<span class="w">    </span><span class="k">else</span>:
<span class="w">        </span><span class="nv">print</span><span class="ss">(</span><span class="nv">k</span>,<span class="w"> </span><span class="s1">' '</span>,<span class="w"> </span><span class="nv">v</span><span class="ss">)</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You could use <code>if type(ele) is dict</code> or use <code>isinstance(ele, dict)</code> which
would work if you had subclassed <code>dict</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{<span class="s1">'abc'</span>:<span class="w"> </span><span class="s1">'abc'</span>,<span class="w"> </span><span class="s1">'def'</span>:<span class="w"> </span>{<span class="s1">'ghi'</span>:<span class="w"> </span><span class="s1">'ghi'</span>,<span class="w"> </span><span class="s1">'jkl'</span>:<span class="w"> </span><span class="s1">'jkl'</span>}}
<span class="k">for</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">d</span>.<span class="nv">values</span><span class="ss">()</span>:
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">isinstance</span><span class="ss">(</span><span class="nv">element</span>,<span class="w"> </span><span class="nv">dict</span><span class="ss">)</span>:
<span class="w">       </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">element</span>.<span class="nv">items</span><span class="ss">()</span>:
<span class="w">           </span><span class="nv">print</span><span class="ss">(</span><span class="nv">k</span>,<span class="s1">' '</span>,<span class="nv">v</span><span class="ss">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<blockquote>
<h3>How would you check if a variable is a dictionary in Python?</h3>
</blockquote>
<p>This is an excellent question, but it is unfortunate that the most upvoted
answer leads with a poor recommendation, <code>type(obj) is dict</code>.</p>
<p>(Note that you should also not use <code>dict</code> as a variable name - it's the name
of the builtin object.)</p>
<p>If you are writing code that will be imported and used by others, do not
presume that they will use the dict builtin directly - making that presumption
makes your code more inflexible and in this case, create easily hidden bugs
that would not error the program out.</p>
<p>I strongly suggest, for the purposes of correctness, maintainability, and
flexibility for future users, never having less flexible, unidiomatic
expressions in your code when there are more flexible, idiomatic expressions.</p>
<p><code>is</code> is a test for object identity. It does not support inheritance, it does
not support any abstraction, and it does not support the interface.</p>
<p>So I will provide several options that do.</p>
<h3>Supporting inheritance:</h3>
<p>This is the first recommendation I would make, because it allows for users to
supply their own subclass of dict, or a <code>OrderedDict</code>, <code>defaultdict</code>, or
<code>Counter</code> from the collections module:</p>
<p><code>if isinstance(any_object, dict):</code></p>
<p>But there are even more flexible options.</p>
<h3>Supporting abstractions:</h3>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Mapping</span>

<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">any_object</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
</pre></div>

<p>This allows the user of your code to use their own custom implementation of an
abstract Mapping, which also includes any subclass of <code>dict</code>, and still get
the correct behavior.</p>
<h3>Use the interface</h3>
<p>You commonly hear the OOP advice, "program to an interface".</p>
<p>This strategy takes advantage of Python's polymorphism or duck-typing.</p>
<p>So just attempt to access the interface, catching the specific expected errors
(<code>AttributeError</code> in case there is no <code>.items</code> and <code>TypeError</code> in case <code>items</code>
is not callable) with a reasonable fallback - and now any class that
implements that interface will give you its items (note <code>.iteritems()</code> is gone
in Python 3):</p>
<div class="code"><pre class="code literal-block"><span class="k">try</span><span class="o">:</span>
<span class="w">    </span><span class="n">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">any_object</span><span class="o">.</span><span class="na">items</span><span class="o">()</span>
<span class="n">except</span><span class="w"> </span><span class="o">(</span><span class="n">AttributeError</span><span class="o">,</span><span class="w"> </span><span class="n">TypeError</span><span class="o">):</span>
<span class="w">    </span><span class="n">non_items_behavior</span><span class="o">(</span><span class="n">any_object</span><span class="o">)</span>
<span class="k">else</span><span class="o">:</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">raised</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">items</span><span class="o">:</span><span class="w"> </span><span class="o">...</span>
</pre></div>

<p>Perhaps you might think using duck-typing like this goes too far in allowing
for too many false positives, and it may be, depending on your objectives for
this code.</p>
<h3>Conclusion</h3>
<p>Don't use <code>is</code> to check types for standard control flow. Use <code>isinstance</code>,
consider abstractions like <code>Mapping</code> or <code>MutableMapping</code>, and consider
avoiding type-checking altogether, using the interface directly.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2567.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2565.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
