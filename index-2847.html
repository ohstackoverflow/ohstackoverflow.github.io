<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2847) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2847.html">
<link rel="prev" href="index-2848.html" type="text/html">
<link rel="next" href="index-2846.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/check-if-a-string-matches-a-regex-in-bash-script/" class="u-url">Check if a string matches a regex in Bash script</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/check-if-a-string-matches-a-regex-in-bash-script/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T22:25:07+08:00" itemprop="datePublished" title="2023-03-05 22:25">2023-03-05 22:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>One of the arguments that my script receives is a date in the following
format: <code>yyyymmdd</code>.</p>
<p>I want to check if I get a valid date as an input.</p>
<p>How can I do this? I am trying to use a regex like: <code>[0-9]\{\8}</code></p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the test construct, <code>[[ ]]</code>, along with the regular expression
match operator, <code>=~</code>, to check if a string matches a regex pattern
(documentation).</p>
<p>For your specific case, you can write:</p>
<div class="code"><pre class="code literal-block">[[ "$date" =~ ^[0-9]{8}$ ]] &amp;&amp; echo "yes"
</pre></div>

<p>Or more a accurate test:</p>
<div class="code"><pre class="code literal-block">[[ "$date" =~ ^[0-9]{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$ ]] &amp;&amp; echo "yes"
<span class="gh">#</span>             |\______/\______*______/\______*__________*______/|
<span class="gh">#</span>             |   |           |                  |              |
<span class="gh">#</span>             |   |           |                  |              |
<span class="gh">#</span>             | --year--   --month--           --day--          |
<span class="gh">#</span>             |          either 01...09      either 01..09      |
<span class="gh">#</span>      start of line         or 10,11,12         or 10..29      |
<span class="gh">#</span>                                                or 30, 31      |
<span class="gh">#</span>                                                          end of line
</pre></div>

<p>That is, you can define a regex in <em>Bash</em> matching the format you want. This
way you can do:</p>
<div class="code"><pre class="code literal-block"><span class="p">[[</span><span class="w"> </span><span class="s">"$date"</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="o">^</span><span class="n">regex</span><span class="err">$</span><span class="w"> </span><span class="p">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"matched"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"did not match"</span>
</pre></div>

<p>where commands after <code>&amp;&amp;</code> are executed if the test is successful, and commands
after <code>||</code> are executed if the test is unsuccessful.</p>
<p>Note this is based on the solution by Aleks-Daniel Jakimenko in User input
date format verification in bash.</p>
<hr>
<p>In other shells you can use <strong>grep</strong>. If your shell is POSIX compliant, do</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">echo</span><span class="w"> </span><span class="s">"$date"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">Eq</span><span class="w">  </span><span class="o">^</span><span class="n">regex</span><span class="err">$</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"matched"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"did not match"</span>
</pre></div>

<p>In fish, which is not POSIX-compliant, you can do</p>
<div class="code"><pre class="code literal-block"><span class="n">echo</span><span class="w"> </span><span class="s">"$date"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">Eq</span><span class="w"> </span><span class="s">"^regex\$"</span><span class="p">;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"matched"</span><span class="p">;</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"did not match"</span>
</pre></div>

<p><strong>Caveat:</strong> These portable grep solutions are <strong>not water-proof!</strong> For
example, they can be tricked by input parameters that contain newlines. The
first mentioned bash-specific regex check does not have this issue.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In bash version 3 you can use the '=~' operator:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[[<span class="w"> </span><span class="s2">"$date"</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="o">^</span>[<span class="mi">0</span><span class="o">-</span><span class="mi">9</span>]{<span class="mi">8</span>}$<span class="w"> </span>]]<span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Valid date"</span>
<span class="k">else</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Invalid date"</span>
<span class="nv">fi</span>
</pre></div>

<p>Reference: http://tldp.org/LDP/abs/html/bashver3.html#REGEXMATCHREF</p>
<blockquote>
<p>NOTE: The quoting in the matching operator within the double brackets, [[
]], is no longer necessary as of Bash version 3.2</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-it-better-practice-to-use-string-format-over-string-concatenation-in-java/" class="u-url">Is it better practice to use String.format over string Concatenation in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-it-better-practice-to-use-string-format-over-string-concatenation-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T22:23:42+08:00" itemprop="datePublished" title="2023-03-05 22:23">2023-03-05 22:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a perceptible difference between using <code>String.format</code> and String
concatenation in Java?</p>
<p>I tend to use <code>String.format</code> but occasionally will slip and use a
concatenation. I was wondering if one was better than the other.</p>
<p>The way I see it, <code>String.format</code> gives you more power in "formatting" the
string; and concatenation means you don't have to worry about accidentally
putting in an extra %s or missing one out.</p>
<p><code>String.format</code> is also shorter.</p>
<p>Which one is more readable depends on how your head works.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I'd suggest that it is better practice to use <code>String.format()</code>. The main
reason is that <code>String.format()</code> can be more easily localised with text loaded
from resource files whereas concatenation can't be localised without producing
a new executable with different code for each language.</p>
<p>If you plan on your app being localisable you should also get into the habit
of specifying argument positions for your format tokens as well:</p>
<div class="code"><pre class="code literal-block">"Hello %1$s the time is %2$t"
</pre></div>

<p>This can then be localised and have the name and time tokens swapped without
requiring a recompile of the executable to account for the different ordering.
With argument positions you can also re-use the same argument without passing
it into the function twice:</p>
<div class="code"><pre class="code literal-block">String.format("Hello %1$s, your name is %1$s and the time is %2$t", name, time)
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>About performance:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">main</span><span class="ss">(</span><span class="nv">String</span>[]<span class="w"> </span><span class="nv">args</span><span class="ss">)</span><span class="w"> </span><span class="nv">throws</span><span class="w"> </span><span class="nv">Exception</span><span class="w"> </span>{<span class="w">      </span>
<span class="w">  </span><span class="nv">long</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="k">for</span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="c1">; i &lt; 1000000; i++){</span>
<span class="w">    </span><span class="nv">String</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hi "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"; Hi to you "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">i</span><span class="o">*</span><span class="mi">2</span><span class="c1">;</span>
<span class="w">  </span>}
<span class="w">  </span><span class="nv">long</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"Concatenation = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">((</span><span class="k">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">start</span><span class="ss">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" millisecond"</span><span class="ss">)</span><span class="w"> </span><span class="c1">;</span>

<span class="w">  </span><span class="nv">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="k">for</span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="c1">; i &lt; 1000000; i++){</span>
<span class="w">    </span><span class="nv">String</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">String</span>.<span class="nv">format</span><span class="ss">(</span><span class="s2">"Hi %s; Hi to you %s"</span>,<span class="nv">i</span>,<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">i</span><span class="o">*</span><span class="mi">2</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span>}
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">currentTimeMillis</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"Format = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">((</span><span class="k">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">start</span><span class="ss">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" millisecond"</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>The timing results are as follows:</p>
<ul>
<li>Concatenation = 265 millisecond</li>
<li>Format = 4141 millisecond</li>
</ul>
<p>Therefore, concatenation is much faster than String.format.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/intellij-idea-importing-gradle-project-getting-java-home-not-defined-yet/" class="u-url">Intellij Idea: Importing Gradle project - getting JAVA_HOME not defined yet</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/intellij-idea-importing-gradle-project-getting-java-home-not-defined-yet/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T22:22:25+08:00" itemprop="datePublished" title="2023-03-05 22:22">2023-03-05 22:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Intellij Idea 14.1.4 Mac OS X Yosemite 10.10.3 and later.</p>
<p>From the IDE:</p>
<div class="code"><pre class="code literal-block"><span class="kr">Import</span><span class="w"> </span><span class="nf">Project</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="p">(</span><span class="n">Chosen</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kr">import</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="kr">Import</span><span class="w"> </span><span class="nf">project</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">external</span><span class="w"> </span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">Gradle</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="n">Gradle</span><span class="w"> </span><span class="n">Home</span><span class="o">:</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="kr">local</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">gradle</span><span class="o">/</span><span class="mf">2.4</span><span class="o">/</span><span class="n">libexec</span>
<span class="n">Gradle</span><span class="w"> </span><span class="n">JVM</span><span class="o">:</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">JAVA_HOME</span><span class="w"> </span><span class="p">(</span><span class="kr">not</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">yet</span><span class="p">)</span>
</pre></div>

<p>From shell:</p>
<div class="code"><pre class="code literal-block">echo $JAVA_HOME

/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home
</pre></div>

<p>(defined in .profile: export JAVA_HOME="$(/usr/libexec/java_home -v 1.8)"</p>
<p>What am I missing. I have checked other discussions in SO, for example,
Intellij JAVA_HOME variable, but don't have Project SDK prompt.</p>
<p><img alt="" src="images/Dt6zH.png"></p>
<p><br><br></p>
<h2>Answer</h2>
<p>You need to setup a SDK for Java projects, like @rizzletang said, but you
don't need to create a new project, you can do it from the <code>Welcome</code> screen.</p>
<p>On the bottom right, select <code>Configure &gt; Project Defaults &gt; Project
Structure</code>: <img alt="enter image description here" src="images/xijoa.png"></p>
<p>Picking the <code>Project</code> tab on the left will show that you have no SDK selected:</p>
<p><img alt="enter image description here" src="images/g2XZf.png"></p>
<p>Just click the <code>New...</code> button on the right hand side of the dropdown and
point it to your JDK. After that, you can go back to the import screen and it
should just show up.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you'd like to have your JAVA_HOME recognised by intellij, you can do one of
these:</p>
<ul>
<li>Start your intellij from terminal /Applications/IntelliJ IDEA 14.app/Contents/MacOS (this will pick your bash env variables)</li>
<li>Add login env variable by executing: <code>launchctl setenv JAVA_HOME "/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home"</code>
</li>
</ul>
<p>As others have answered you can ignore JAVA_HOME by setting up SDK in project
structure.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2848.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2846.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
