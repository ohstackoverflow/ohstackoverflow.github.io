<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 166) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-166.html">
<link rel="prev" href="index-167.html" type="text/html">
<link rel="next" href="index-165.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-send-a-header-using-a-http-request-through-a-curl-call/" class="u-url">How to send a header using a HTTP request through a cURL call?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-send-a-header-using-a-http-request-through-a-curl-call/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:36:01+08:00" itemprop="datePublished" title="2023-02-16 23:36">2023-02-16 23:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I wish to send a header to my Apache server on a Linux box. How can I achieve
this via a cURL call?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>GET:</strong></p>
<p><em>with JSON:</em></p>
<div class="code"><pre class="code literal-block">curl -i -H "Accept: application/json" -H "Content-Type: application/json" http://hostname/resource
</pre></div>

<p><em>with XML:</em></p>
<div class="code"><pre class="code literal-block">curl -H "Accept: application/xml" -H "Content-Type: application/xml" -X GET http://hostname/resource
</pre></div>

<p><strong>POST:</strong></p>
<p><em>For posting data:</em></p>
<div class="code"><pre class="code literal-block">curl --data "param1=value1&amp;param2=value2" http://hostname/resource
</pre></div>

<p><em>For file upload:</em></p>
<div class="code"><pre class="code literal-block"><span class="n">curl</span><span class="w"> </span><span class="o">--</span><span class="n">form</span><span class="w"> </span><span class="s2">"fileupload=@filename.txt"</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">hostname</span><span class="o">/</span><span class="n">resource</span>
</pre></div>

<p><em>RESTful HTTP Post:</em></p>
<div class="code"><pre class="code literal-block"><span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">X</span><span class="w"> </span><span class="n">POST</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="nv">@filename</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">hostname</span><span class="o">/</span><span class="n">resource</span>
</pre></div>

<p><em>For logging into a site (auth):</em></p>
<div class="code"><pre class="code literal-block">curl -d "username=admin&amp;password=admin&amp;submit=Login" --dump-header headers http://localhost/Login
curl -L -b headers http://localhost/
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>GET:</strong></p>
<p><em>with JSON:</em></p>
<div class="code"><pre class="code literal-block">curl -i -H "Accept: application/json" -H "Content-Type: application/json" http://hostname/resource
</pre></div>

<p><em>with XML:</em></p>
<div class="code"><pre class="code literal-block">curl -H "Accept: application/xml" -H "Content-Type: application/xml" -X GET http://hostname/resource
</pre></div>

<p><strong>POST:</strong></p>
<p><em>For posting data:</em></p>
<div class="code"><pre class="code literal-block">curl --data "param1=value1&amp;param2=value2" http://hostname/resource
</pre></div>

<p><em>For file upload:</em></p>
<div class="code"><pre class="code literal-block"><span class="n">curl</span><span class="w"> </span><span class="o">--</span><span class="n">form</span><span class="w"> </span><span class="s2">"fileupload=@filename.txt"</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">hostname</span><span class="o">/</span><span class="n">resource</span>
</pre></div>

<p><em>RESTful HTTP Post:</em></p>
<div class="code"><pre class="code literal-block"><span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">X</span><span class="w"> </span><span class="n">POST</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="nv">@filename</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">hostname</span><span class="o">/</span><span class="n">resource</span>
</pre></div>

<p><em>For logging into a site (auth):</em></p>
<div class="code"><pre class="code literal-block">curl -d "username=admin&amp;password=admin&amp;submit=Login" --dump-header headers http://localhost/Login
curl -L -b headers http://localhost/
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-new-keyword-in-javascript/" class="u-url">What is the 'new' keyword in JavaScript?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-new-keyword-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:35:24+08:00" itemprop="datePublished" title="2023-02-16 23:35">2023-02-16 23:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The <code>new</code> keyword in JavaScript can be quite confusing when it is first
encountered, as people tend to think that JavaScript is not an object-oriented
programming language.</p>
<ul>
<li>What is it?</li>
<li>What problems does it solve?</li>
<li>When is it appropriate and when not?</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>It does 5 things:</p>
<ol>
<li>It creates a new object. The type of this object is simply <em>object</em>.</li>
<li>It sets this new object's internal, inaccessible, <code>[[prototype]]</code> (i.e. <code>__proto__</code>) property to be the constructor function's external, accessible, <code>prototype</code> object (every function object automatically has a <code>prototype</code> property).</li>
<li>It makes the <code>this</code> variable point to the newly created object.</li>
<li>It executes the constructor function, using the newly created object whenever <code>this</code> is mentioned.</li>
<li>It returns the newly created object, unless the constructor function returns a non-<code>null</code> object reference. In this case, that object reference is returned instead.</li>
</ol>
<p>Note: <em>constructor function</em> refers to the function after the <code>new</code> keyword,
as in</p>
<div class="code"><pre class="code literal-block">new ConstructorFunction(arg1, arg2)
</pre></div>

<p>Once this is done, if an undefined property of the new object is requested,
the script will check the object's <code>[[prototype]]</code> object for the property
instead. This is how you can get something similar to traditional class
inheritance in JavaScript.</p>
<p>The most difficult part about this is point number 2. Every object (including
functions) has this internal property called <code>[[prototype]]</code>. It can <em>only</em> be
set at object creation time, either with <code>new</code>, with <code>Object.create</code>, or based
on the literal (functions default to <code>Function.prototype</code>, numbers to
<code>Number.prototype</code>, etc.). It can only be read with
<code>Object.getPrototypeOf(someObject)</code>. There is <em>no</em> other way to get or set
this value.</p>
<p>Functions, in addition to the hidden <code>[[prototype]]</code> property, also have a
property called <em>prototype</em> , and it is this that you can access, and modify,
to provide inherited properties and methods for the objects you make.</p>
<hr>
<p>Here is an example:</p>
<div class="code"><pre class="code literal-block"><span class="n">ObjMaker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'first'</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">ObjMaker</span><span class="err">`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="p">,</span><span class="w"> </span><span class="n">there</span><span class="s1">'s nothing special about it</span>
<span class="o">//</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">makes</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">constructor</span><span class="o">.</span>

<span class="n">ObjMaker</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'second'</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">functions</span><span class="p">,</span><span class="w"> </span><span class="n">ObjMaker</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">accessible</span><span class="w"> </span><span class="err">`</span><span class="n">prototype</span><span class="err">`</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">that</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">alter</span><span class="o">.</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="s1">'b'</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="w"> </span><span class="n">Like</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">ObjMaker</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">inaccessible</span><span class="w"> </span><span class="err">`</span><span class="p">[[</span><span class="n">prototype</span><span class="p">]]</span><span class="err">`</span><span class="w"> </span><span class="n">property</span>
<span class="o">//</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="s1">'t do anything with</span>

<span class="n">obj1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ObjMaker</span><span class="p">();</span>
<span class="o">//</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">things</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">happened</span><span class="o">.</span>
<span class="o">//</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">new</span><span class="p">,</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="err">`</span><span class="n">obj1</span><span class="err">`</span><span class="o">.</span><span class="w">  </span><span class="n">At</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="err">`</span><span class="n">obj1</span><span class="err">`</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="err">`</span><span class="p">{}</span><span class="err">`</span><span class="o">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="err">`</span><span class="p">[[</span><span class="n">prototype</span><span class="p">]]</span><span class="err">`</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">obj1</span><span class="err">`</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span>
<span class="o">//</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">ObjMaker</span><span class="o">.</span><span class="n">prototype</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="err">`</span><span class="n">ObjMaker</span><span class="o">.</span><span class="n">prototype</span><span class="err">`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">later</span>
<span class="o">//</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">obj1</span><span class="err">`</span><span class="s1">'s `[[prototype]]` will not change, but you</span>
<span class="o">//</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">alter</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">ObjMaker</span><span class="o">.</span><span class="n">prototype</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">the</span>
<span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">prototype</span><span class="err">`</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="err">`</span><span class="p">[[</span><span class="n">prototype</span><span class="p">]]</span><span class="err">`</span><span class="p">)</span><span class="o">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="err">`</span><span class="n">ObjMaker</span><span class="err">`</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">executed</span><span class="p">,</span><span class="w"> </span><span class="n">with</span>
<span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">obj1</span><span class="err">`</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">this</span><span class="err">`</span><span class="o">...</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="err">`</span><span class="n">obj1</span><span class="o">.</span><span class="n">a</span><span class="err">`</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s1">'first'</span><span class="o">.</span>

<span class="n">obj1</span><span class="o">.</span><span class="n">a</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="s1">'first'</span>
<span class="n">obj1</span><span class="o">.</span><span class="n">b</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">obj1</span><span class="err">`</span><span class="w"> </span><span class="n">doesn</span><span class="s1">'t have a property called '</span><span class="sa">b</span><span class="s1">', so JavaScript checks </span>
<span class="o">//</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="err">`</span><span class="p">[[</span><span class="n">prototype</span><span class="p">]]</span><span class="err">`</span><span class="o">.</span><span class="w"> </span><span class="n">Its</span><span class="w"> </span><span class="err">`</span><span class="p">[[</span><span class="n">prototype</span><span class="p">]]</span><span class="err">`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">`</span><span class="n">ObjMaker</span><span class="o">.</span><span class="n">prototype</span><span class="err">`</span>
<span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">ObjMaker</span><span class="o">.</span><span class="n">prototype</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="s1">'b'</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="s1">'second'</span>
<span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="s1">'second'</span>
</pre></div>

<p>It's like class inheritance because now, any objects you make using <code>new
ObjMaker()</code> will also appear to have inherited the 'b' property.</p>
<p>If you want something like a subclass, then you do this:</p>
<div class="code"><pre class="code literal-block"><span class="n">SubObjMaker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span>
<span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjMaker</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nl">note</span><span class="p">:</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">deprecated</span><span class="err">!</span>
<span class="o">//</span><span class="w"> </span><span class="n">Because</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="s1">'new'</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">[</span><span class="n">[prototype</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span>
<span class="o">//</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">ObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span>
<span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">modern</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">Object</span><span class="p">.</span><span class="k">create</span><span class="p">(),</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">ECMAScript</span><span class="w"> </span><span class="mi">5</span><span class="err">:</span>
<span class="o">//</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">Object</span><span class="p">.</span><span class="k">create</span><span class="p">(</span><span class="n">ObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="p">);</span>

<span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'third'</span><span class="p">;</span><span class="w">  </span>
<span class="n">obj2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">();</span>
<span class="o">//</span><span class="w"> </span><span class="o">[</span><span class="n">[prototype</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">obj2</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span>
<span class="o">//</span><span class="w"> </span><span class="n">Remember</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">[</span><span class="n">[prototype</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span>
<span class="o">//</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="w"> </span><span class="n">So</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">obj2</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">prototype</span><span class="w"> </span><span class="n">chain</span><span class="err">!</span>
<span class="o">//</span><span class="w"> </span><span class="n">obj2</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="w"> </span><span class="o">---&gt;</span><span class="w"> </span><span class="n">ObjMaker</span><span class="p">.</span><span class="n">prototype</span>

<span class="n">obj2</span><span class="p">.</span><span class="n">c</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="s1">'third'</span><span class="p">,</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span>

<span class="n">obj2</span><span class="p">.</span><span class="n">b</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="s1">'second'</span><span class="p">,</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">ObjMaker</span><span class="p">.</span><span class="n">prototype</span>

<span class="n">obj2</span><span class="p">.</span><span class="n">a</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="s1">'first'</span><span class="p">,</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="p">,</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">SubObjMaker</span><span class="p">.</span><span class="n">prototype</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ObjMaker</span><span class="w"> </span><span class="k">function</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">assigned</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">us</span>
</pre></div>

<hr>
<p>I read a ton of rubbish on this subject before finally finding this page,
where this is explained very well with nice diagrams.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Suppose you have this function:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span>
<span class="w">  </span><span class="n">this</span><span class="o">.</span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="n">this</span><span class="o">.</span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>

<p>If you call this as a stand-alone function like so:</p>
<div class="code"><pre class="code literal-block">Foo();
</pre></div>

<p>Executing this function will add two properties to the <code>window</code> object (<code>A</code>
and <code>B</code>). It adds it to the <code>window</code> because <code>window</code> is the object that
called the function when you execute it like that, and <code>this</code> in a function is
the object that called the function. In JavaScript at least.</p>
<p>Now, call it like this with <code>new</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Foo</span><span class="p">();</span>
</pre></div>

<p>When you add <code>new</code> to a function call, a new object is created (just <code>var bar
= new Object()</code>) and the <code>this</code> within the function points to the new <code>Object</code>
you just created, instead of to the object that called the function. So <code>bar</code>
is now an object with the properties <code>A</code> and <code>B</code>. Any function can be a
constructor; it just doesn't always make sense.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-venv-pyvenv-pyenv-virtualenv-virtualenvwrapper-pipenv-etc/" class="u-url">What is the difference between venv, pyvenv, pyenv, virtualenv, virtualenvwrapper, pipenv, etc?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-venv-pyvenv-pyenv-virtualenv-virtualenvwrapper-pipenv-etc/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:34:54+08:00" itemprop="datePublished" title="2023-02-16 23:34">2023-02-16 23:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Python 3.3 includes in its standard library the new package <code>venv</code>. What does
it do, and how does it differ from all the other packages that match the regex
<code>(py)?(v|virtual|pip)?env</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>This is my personal recommendation for beginners:</strong> start by learning
<code>virtualenv</code> and <code>pip</code>, tools which work with both Python 2 and 3 and in a
variety of situations, and pick up other tools once you start needing them.</p>
<p>Now on to answer the question: what is the difference between these similarly
named things: venv, virtualenv, etc?</p>
<h2>PyPI packages not in the standard library:</h2>
<ul>
<li>
<strong><code>virtualenv</code></strong> is a very popular tool that creates isolated Python environments for Python libraries. If you're not familiar with this tool, I highly recommend learning it, as it is a very useful tool.</li>
</ul>
<p>It works by installing a bunch of files in a directory (eg: <code>env/</code>), and then
modifying the <code>PATH</code> environment variable to prefix it with a custom <code>bin</code>
directory (eg: <code>env/bin/</code>). An exact copy of the <code>python</code> or <code>python3</code> binary
is placed in this directory, but Python is programmed to look for libraries
relative to its path first, in the environment directory. It's not part of
Python's standard library, but is officially blessed by the PyPA (Python
Packaging Authority). Once activated, you can install packages in the virtual
environment using <code>pip</code>.</p>
<ul>
<li>
<p><strong><code>pyenv</code></strong> is used to isolate Python versions. For example, you may want to test your code against Python 2.7, 3.6, 3.7 and 3.8, so you'll need a way to switch between them. Once activated, it prefixes the <code>PATH</code> environment variable with <code>~/.pyenv/shims</code>, where there are special files matching the Python commands (<code>python</code>, <code>pip</code>). These are not copies of the Python-shipped commands; they are special scripts that decide on the fly which version of Python to run based on the <code>PYENV_VERSION</code> environment variable, or the <code>.python-version</code> file, or the <code>~/.pyenv/version</code> file. <code>pyenv</code> also makes the process of downloading and installing multiple Python versions easier, using the command <code>pyenv install</code>.</p>
</li>
<li>
<p><strong><code>pyenv-virtualenv</code></strong> is a plugin for <code>pyenv</code> by the same author as <code>pyenv</code>, to allow you to use <code>pyenv</code> and <code>virtualenv</code> at the same time conveniently. However, if you're using Python 3.3 or later, <code>pyenv-virtualenv</code> will try to run <code>python -m venv</code> if it is available, instead of <code>virtualenv</code>. You can use <code>virtualenv</code> and <code>pyenv</code> together without <code>pyenv-virtualenv</code>, if you don't want the convenience features.</p>
</li>
<li>
<p><strong><code>virtualenvwrapper</code></strong> is a set of extensions to <code>virtualenv</code> (see docs). It gives you commands like <code>mkvirtualenv</code>, <code>lssitepackages</code>, and especially <code>workon</code> for switching between different <code>virtualenv</code> directories. This tool is especially useful if you want multiple <code>virtualenv</code> directories.</p>
</li>
<li>
<p><strong><code>pyenv-virtualenvwrapper</code></strong> is a plugin for <code>pyenv</code> by the same author as <code>pyenv</code>, to conveniently integrate <code>virtualenvwrapper</code> into <code>pyenv</code>.</p>
</li>
<li>
<p><strong><code>pipenv</code></strong> aims to combine <code>Pipfile</code>, <code>pip</code> and <code>virtualenv</code> into one command on the command-line. The <code>virtualenv</code> directory typically gets placed in <code>~/.local/share/virtualenvs/XXX</code>, with <code>XXX</code> being a hash of the path of the project directory. This is different from <code>virtualenv</code>, where the directory is typically in the current working directory. <code>pipenv</code> is meant to be used when developing Python applications (as opposed to libraries). There are alternatives to <code>pipenv</code>, such as <code>poetry</code>, which I won't list here since this question is only about the packages that are similarly named.</p>
</li>
</ul>
<h2>Standard library:</h2>
<ul>
<li>
<p><strong><code>pyvenv</code></strong> (not to be confused with <strong><code>pyenv</code></strong> in the previous section) is a script shipped with Python 3.3 to 3.7. It was removed from Python 3.8 as it had problems (not to mention the confusing name). Running <code>python3 -m venv</code> has exactly the same effect as <code>pyvenv</code>.</p>
</li>
<li>
<p><strong><code>venv</code></strong> is a package shipped with Python 3, which you can run using <code>python3 -m venv</code> (although for some reason some distros separate it out into a separate distro package, such as <code>python3-venv</code> on Ubuntu/Debian). It serves the same purpose as <code>virtualenv</code>, but only has a subset of its features (see a comparison here). <code>virtualenv</code> continues to be more popular than <code>venv</code>, especially since the former supports both Python 2 and 3.</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>I would just avoid the use of <code>virtualenv</code> after Python3.3+ and instead use
the standard shipped library <code>venv</code>. To create a new virtual environment you
would type:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>&lt;MYVENV&gt;
</pre></div>

<p><code>virtualenv</code> tries to copy the Python binary into the virtual environment's
bin directory. However it does not update library file links embedded into
that binary, so if you build Python from source into a non-system directory
with relative path names, the Python binary breaks. Since this is how you make
a copy distributable Python, it is a big flaw. BTW to inspect embedded library
file links on OS X, use <code>otool</code>. For example from within your virtual
environment, type:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>otool<span class="w"> </span>-L<span class="w"> </span>bin/python
python:
<span class="w">    </span>@executable_path/../Python<span class="w"> </span><span class="o">(</span>compatibility<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.4.0,<span class="w"> </span>current<span class="w"> </span>version<span class="w"> </span><span class="m">3</span>.4.0<span class="o">)</span>
<span class="w">    </span>/usr/lib/libSystem.B.dylib<span class="w"> </span><span class="o">(</span>compatibility<span class="w"> </span>version<span class="w"> </span><span class="m">1</span>.0.0,<span class="w"> </span>current<span class="w"> </span>version<span class="w"> </span><span class="m">1238</span>.0.0<span class="o">)</span>
</pre></div>

<p>Consequently I would avoid <code>virtualenvwrapper</code> and <code>pipenv</code>. <code>pyvenv</code> is
deprecated. <code>pyenv</code> seems to be used often where <code>virtualenv</code> is used but I
would stay away from it also since I think <code>venv</code> also does what <code>pyenv</code> is
built for.</p>
<p><code>venv</code> creates virtual environments in the shell that are <strong>fresh</strong> and
<strong>sandboxed</strong> , with <strong>user-installable libraries</strong> , and it's <strong>multi-python
safe</strong>.</p>
<p><strong>Fresh</strong> : because virtual environments only start with the standard
libraries that ship with python, you have to install any other libraries all
over again with <code>pip install</code> while the virtual environment is active.</p>
<p><strong>Sandboxed</strong> : because none of these new library installs are visible outside
the virtual environment, so you can delete the whole environment and start
again without worrying about impacting your base python install.</p>
<p><strong>User-installable libraries</strong> : because the virtual environment's target
folder is created without <code>sudo</code> in some directory you already own, so you
won't need <code>sudo</code> permissions to install libraries into it.</p>
<p><strong>multi-python safe</strong> : because when virtual environments activate, the shell
only sees the python version (3.4, 3.5 etc.) that was used to build that
virtual environment.</p>
<p><code>pyenv</code> is similar to <code>venv</code> in that it lets you manage multiple python
environments. However with <code>pyenv</code> you can't conveniently rollback library
installs to some start state and you will likely need <code>admin</code> privileges at
some point to update libraries. So I think it is also best to use <code>venv</code>.</p>
<p>In the last couple of years I have found many problems in build systems (emacs
packages, python standalone application builders, installers...) that
ultimately come down to issues with <code>virtualenv</code>. I think python will be a
better platform when we eliminate this additional option and only use <code>venv</code>.</p>
<p>EDIT: Tweet of the BDFL,</p>
<blockquote>
<p>I use venv (in the stdlib) and a bunch of shell aliases to quickly switch.</p>
<p>— Guido van Rossum (@gvanrossum) October 22, 2020</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-167.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-165.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
