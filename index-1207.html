<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1207) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1207.html">
<link rel="prev" href="index-1208.html" type="text/html">
<link rel="next" href="index-1206.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/superscript-in-markdown-github-flavored/" class="u-url">Superscript in markdown (Github flavored)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/superscript-in-markdown-github-flavored/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:49:27+08:00" itemprop="datePublished" title="2023-02-18 03:49">2023-02-18 03:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Following this lead, I tried this in a Github README.md:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;span</span><span class="w"> </span><span class="na">style=</span><span class="s">"vertical-align:</span><span class="w"> </span><span class="err">baseline;</span><span class="w"> </span><span class="err">position:</span><span class="w"> </span><span class="err">relative;top:</span><span class="w"> </span><span class="err">-0.5em;</span><span class="nt">&gt;</span>text<span class="w"> </span>in<span class="w"> </span>superscript<span class="nt">&lt;/span&gt;</span>
</pre></div>

<p>Does not work, the text appears as normal. Help?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use the <code>&lt;sup&gt;&lt;/sup&gt;</code>tag (<code>&lt;sub&gt;&lt;/sub&gt;</code> is the equivalent for subscripts). See
this gist for an example.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You have a few options for this. The answer depends on exactly what you're
trying to do, how readable you want the content to be when viewed as Markdown
and where your content will be rendered:</p>
<h3>HTML Tags</h3>
<p>As others have said, <code>&lt;sup&gt;</code> and <code>&lt;sub&gt;</code> tags work well for arbitrary text.
Embedding HTML in a Markdown document like this is well supported so this
approach should work with most tools that render Markdown.</p>
<p>Personally, I find HTML impairs the readable of Markdown somewhat, when
working with it "bare" (eg. in a text editor) but small tags like this aren't
too bad.</p>
<h3>LaTeX (New!)</h3>
<p>As of May 2022, GitHub supports embedding LaTeX expressions in Markdown docs
directly. This gives us new way to render arbitrary text as superscript or
subscript in GitHub flavoured Markdown, and it works quite well.</p>
<p>LaTeX expressions are delineated by <code>$$</code> for blocks or <code>$</code> for inline
expressions. In LaTeX you indicate superscript with the <code>^</code> and subscript with
<code>_</code>. Curly braces (<code>{</code> and <code>}</code>) can be used to group characters. You also
need to escape spaces with a backslash. The GitHub implementation uses MathJax
so see their docs for what else is possible.</p>
<p>You can use super or subscript for mathematical expressions that require it,
eg:</p>
<div class="code"><pre class="code literal-block"><span class="p">$$</span><span class="nv">e</span><span class="o">^</span><span class="p">{</span><span class="o">-</span>\<span class="nv">frac</span><span class="p">{</span><span class="nv">t</span><span class="p">}{</span><span class="nv">RC</span><span class="p">}}$$</span>
</pre></div>

<p>Which renders as..</p>
<p><img alt="Superscript maths example" src="images/swxmM.png"></p>
<p>Or render arbitrary text as super or subscript inline, eg:</p>
<div class="code"><pre class="code literal-block"><span class="nv">And</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">indeed</span>:<span class="w"> </span><span class="nv">she</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span>$<span class="nv">_</span>{<span class="nv">ten</span>\<span class="w"> </span><span class="nv">inches</span>\<span class="w"> </span><span class="nv">high</span>}$,<span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">her</span><span class="w"> </span><span class="nv">face</span><span class="w"> </span><span class="nv">brightened</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">thought</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">she</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">going</span><span class="w"> </span><span class="nv">through</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">little</span><span class="w"> </span><span class="nv">door</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">lovely</span><span class="w"> </span><span class="nv">garden</span>.
</pre></div>

<p>Which renders as..</p>
<p><img alt="Subscript text example" src="images/ayS24.png"></p>
<p>I've put a few other examples here in a Gist.</p>
<h3>Unicode</h3>
<p>If the superscript (or subscript) you need is of a mathematical nature,
Unicode may well have you covered.</p>
<p>I've compiled a list of all the Unicode super and subscript characters I could
identify in this gist. Some of the more common/useful ones are:</p>
<ul>
<li>
<code>⁰</code> SUPERSCRIPT ZERO (U+2070)</li>
<li>
<code>¹</code> SUPERSCRIPT ONE (U+00B9)</li>
<li>
<code>²</code> SUPERSCRIPT TWO (U+00B2)</li>
<li>
<code>³</code> SUPERSCRIPT THREE (U+00B3)</li>
<li>
<code>ⁿ</code> SUPERSCRIPT LATIN SMALL LETTER N (U+207F)</li>
</ul>
<p>People also often reach for <code>&lt;sup&gt;</code> and <code>&lt;sub&gt;</code> tags in an attempt to render
specific symbols like these:</p>
<ul>
<li>
<code>™</code> TRADE MARK SIGN (U+2122)</li>
<li>
<code>®</code> REGISTERED SIGN (U+00AE)</li>
<li>
<code>℠</code> SERVICE MARK (U+2120)</li>
</ul>
<p>Assuming your editor supports Unicode, you can copy and paste the characters
above directly into your document or find them in your systems emoji and
symbols picker.</p>
<p>On MacOS, simultaneously press the <code>Command ⌘</code> + <code>Control</code> + <code>Space</code> keys to
open the emoji picker. You can browse or search, or click the small icon in
the top right to open the more advanced Character Viewer.</p>
<p>On Windows, you can a emoji and symbol picker by pressing <code>⊞ Windows</code> + <code>.</code>.</p>
<p>Alternatively, if you're putting these characters in an HTML document, you
could use the hex values above in an HTML character escape. Eg, <code>&amp;#x00B2;</code>
instead of <code>²</code>. This works with GitHub (and should work anywhere else your
Markdown is rendered to HTML) but is less readable when presented as raw text.</p>
<h3>Images</h3>
<p>If your requirements are especially unusual, you can always just inline an
image. The GitHub supported syntax is:</p>
<div class="code"><pre class="code literal-block"><span class="o">!</span>[<span class="nv">Alt</span><span class="w"> </span><span class="nv">text</span><span class="w"> </span><span class="nv">goes</span><span class="w"> </span><span class="nv">here</span>,<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">you</span><span class="err">'d like](path/to/image.png)</span>
</pre></div>

<p>You can use a full path (eg. starting with <code>https://</code> or <code>http://</code>) but it's
often easier to use a relative path, which will load the image from the repo,
relative to the Markdown document.</p>
<p>If you happen to know LaTeX (or want to learn it) you could do just about any
text manipulation imaginable and render it to an image. Sites like Quicklatex
make this quite easy. Of course, if you know your document will be rendered on
GitHub, you can use the new (2022) embedded LaTeX syntax discussed earlier)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-explicitly-free-memory-in-python/" class="u-url">How can I explicitly free memory in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-explicitly-free-memory-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:48:42+08:00" itemprop="datePublished" title="2023-02-18 03:48">2023-02-18 03:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I wrote a Python program that acts on a large input file to create a few
million objects representing triangles. The algorithm is:</p>
<ol>
<li>read an input file</li>
<li>process the file and create a list of triangles, represented by their vertices</li>
<li>output the vertices in the OFF format: a list of vertices followed by a list of triangles. The triangles are represented by indices into the list of vertices</li>
</ol>
<p>The requirement of OFF that I print out the complete list of vertices before I
print out the triangles means that I have to hold the list of triangles in
memory before I write the output to file. In the meanwhile I'm getting memory
errors because of the sizes of the lists.</p>
<p>What is the best way to tell Python that I no longer need some of the data,
and it can be freed?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>According to Python Official Documentation, you can explicitly invoke the
Garbage Collector to release unreferenced memory with <code>gc.collect()</code>. Example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">gc</span>

<span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</pre></div>

<p>You should do that after marking what you want to discard using <code>del</code>:</p>
<div class="code"><pre class="code literal-block">del my_array
del my_object
gc.collect()
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Unfortunately (depending on your version and release of Python) some types of
objects use "free lists" which are a neat local optimization but may cause
memory fragmentation, specifically by making more and more memory "earmarked"
for only objects of a certain type and thereby unavailable to the "general
fund".</p>
<p>The only really reliable way to ensure that a large but temporary use of
memory DOES return all resources to the system when it's done, is to have that
use happen in a subprocess, which does the memory-hungry work then terminates.
Under such conditions, the operating system WILL do its job, and gladly
recycle all the resources the subprocess may have gobbled up. Fortunately, the
<code>multiprocessing</code> module makes this kind of operation (which used to be rather
a pain) not too bad in modern versions of Python.</p>
<p>In your use case, it seems that the best way for the subprocesses to
accumulate some results and yet ensure those results are available to the main
process is to use semi-temporary files (by semi-temporary I mean, NOT the kind
of files that automatically go away when closed, just ordinary files that you
explicitly delete when you're all done with them).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-mockito-capture-arguments-of-a-method-called-multiple-times/" class="u-url">Can Mockito capture arguments of a method called multiple times?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-mockito-capture-arguments-of-a-method-called-multiple-times/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:48:20+08:00" itemprop="datePublished" title="2023-02-18 03:48">2023-02-18 03:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a method that gets called twice, and I want to capture the argument of
the second method call.</p>
<p>Here's what I've tried:</p>
<div class="code"><pre class="code literal-block"><span class="nv">ArgumentCaptor</span><span class="o">&lt;</span><span class="nv">Foo</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">firstFooCaptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ArgumentCaptor</span>.<span class="nv">forClass</span><span class="ss">(</span><span class="nv">Foo</span>.<span class="nv">class</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">ArgumentCaptor</span><span class="o">&lt;</span><span class="nv">Foo</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">secondFooCaptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ArgumentCaptor</span>.<span class="nv">forClass</span><span class="ss">(</span><span class="nv">Foo</span>.<span class="nv">class</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">verify</span><span class="ss">(</span><span class="nv">mockBar</span><span class="ss">)</span>.<span class="nv">doSomething</span><span class="ss">(</span><span class="nv">firstFooCaptor</span>.<span class="nv">capture</span><span class="ss">())</span><span class="c1">;</span>
<span class="nv">verify</span><span class="ss">(</span><span class="nv">mockBar</span><span class="ss">)</span>.<span class="nv">doSomething</span><span class="ss">(</span><span class="nv">secondFooCaptor</span>.<span class="nv">capture</span><span class="ss">())</span><span class="c1">;</span>
<span class="o">//</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">assertions</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">secondFooCaptor</span>.<span class="nv">getValue</span><span class="ss">()</span>
</pre></div>

<p>But I get a <code>TooManyActualInvocations</code> Exception, as Mockito thinks that
<code>doSomething</code> should only be called once.</p>
<p>How can I verify the argument of the second call of <code>doSomething</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I think it should be</p>
<div class="code"><pre class="code literal-block">verify(mockBar, times(2)).doSomething(...)
</pre></div>

<p>Sample from mockito javadoc:</p>
<div class="code"><pre class="code literal-block">ArgumentCaptor&lt;Person&gt; peopleCaptor = ArgumentCaptor.forClass(Person.class);
verify(mock, times(2)).doSomething(peopleCaptor.capture());

List&lt;Person&gt; capturedPeople = peopleCaptor.getAllValues();
assertEquals("John", capturedPeople.get(0).getName());
assertEquals("Jane", capturedPeople.get(1).getName());
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Since Mockito 2.0 there's also possibility to use static method
Matchers.argThat(ArgumentMatcher). With the help of Java 8 it is now much
cleaner and more readable to write:</p>
<div class="code"><pre class="code literal-block"><span class="n">verify</span><span class="p">(</span><span class="n">mockBar</span><span class="p">).</span><span class="n">doSth</span><span class="p">(</span><span class="n">argThat</span><span class="p">((</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">arg</span><span class="p">.</span><span class="n">getSurname</span><span class="p">().</span><span class="n">equals</span><span class="p">(</span><span class="s">"OneSurname"</span><span class="p">)));</span>
<span class="n">verify</span><span class="p">(</span><span class="n">mockBar</span><span class="p">).</span><span class="n">doSth</span><span class="p">(</span><span class="n">argThat</span><span class="p">((</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">arg</span><span class="p">.</span><span class="n">getSurname</span><span class="p">().</span><span class="n">equals</span><span class="p">(</span><span class="s">"AnotherSurname"</span><span class="p">)));</span>
</pre></div>

<p>If you're tied to lower Java version there's also not-that-bad:</p>
<div class="code"><pre class="code literal-block"><span class="n">verify</span><span class="p">(</span><span class="n">mockBar</span><span class="p">).</span><span class="n">doSth</span><span class="p">(</span><span class="n">argThat</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ArgumentMatcher</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nv">@Override</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">boolean</span><span class="w"> </span><span class="n">matches</span><span class="p">(</span><span class="k">Object</span><span class="w"> </span><span class="n">emp</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="n">Employee</span><span class="p">)</span><span class="w"> </span><span class="n">emp</span><span class="p">).</span><span class="n">getSurname</span><span class="p">().</span><span class="k">equals</span><span class="p">(</span><span class="ss">"SomeSurname"</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span><span class="p">));</span>
</pre></div>

<p>Of course none of those can verify order of calls - for which you should use
InOrder :</p>
<div class="code"><pre class="code literal-block"><span class="n">InOrder</span><span class="w"> </span><span class="n">inOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inOrder</span><span class="p">(</span><span class="n">mockBar</span><span class="p">);</span>

<span class="n">inOrder</span><span class="p">.</span><span class="n">verify</span><span class="p">(</span><span class="n">mockBar</span><span class="p">).</span><span class="n">doSth</span><span class="p">(</span><span class="n">argThat</span><span class="p">((</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">arg</span><span class="p">.</span><span class="n">getSurname</span><span class="p">().</span><span class="n">equals</span><span class="p">(</span><span class="s">"FirstSurname"</span><span class="p">)));</span>
<span class="n">inOrder</span><span class="p">.</span><span class="n">verify</span><span class="p">(</span><span class="n">mockBar</span><span class="p">).</span><span class="n">doSth</span><span class="p">(</span><span class="n">argThat</span><span class="p">((</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">arg</span><span class="p">.</span><span class="n">getSurname</span><span class="p">().</span><span class="n">equals</span><span class="p">(</span><span class="s">"SecondSurname"</span><span class="p">)));</span>
</pre></div>

<p>Please take a look at mockito-java8 project which makes possible to make calls
such as:</p>
<div class="code"><pre class="code literal-block"><span class="n">verify</span><span class="p">(</span><span class="n">mockBar</span><span class="p">).</span><span class="n">doSth</span><span class="p">(</span><span class="n">assertArg</span><span class="p">(</span><span class="n">arg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">assertThat</span><span class="p">(</span><span class="n">arg</span><span class="p">.</span><span class="n">getSurname</span><span class="p">()).</span><span class="n">isEqualTo</span><span class="p">(</span><span class="s">"Surname"</span><span class="p">)));</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1208.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1206.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
