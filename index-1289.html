<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1289) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1289.html">
<link rel="prev" href="index-1290.html" type="text/html">
<link rel="next" href="index-1288.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-declare-a-variable-in-mysql/" class="u-url">How to declare a variable in MySQL?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-declare-a-variable-in-mysql/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:47:52+08:00" itemprop="datePublished" title="2023-02-18 05:47">2023-02-18 05:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How to declare a variable in mysql, so that my second query can use it?</p>
<p>I would like to write something like:</p>
<div class="code"><pre class="code literal-block">SET start = 1;
SET finish = 10;

SELECT * FROM places WHERE place BETWEEN start AND finish;
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>There are mainly three types of variables in MySQL:</p>
<ol>
<li><strong>User-defined variables (prefixed with<code>@</code>):</strong></li>
</ol>
<p>You can access any user-defined variable without declaring it or initializing
it. If you refer to a variable that has not been initialized, it has a value
of <code>NULL</code> and a type of string.</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">SELECT</span><span class="w"> </span><span class="err">@</span><span class="n">var_any_var_name</span>
</pre></div>

<p>You can initialize a variable using <code>SET</code> or <code>SELECT</code> statement:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">SET</span><span class="w"> </span><span class="nv">@start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">@finish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="nv">@start</span><span class="w"> </span><span class="err">:</span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">@finish</span><span class="w"> </span><span class="err">:</span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>

<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">places</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="ow">BETWEEN</span><span class="w"> </span><span class="nv">@start</span><span class="w"> </span><span class="ow">AND</span><span class="w"> </span><span class="nv">@finish</span><span class="p">;</span>
</pre></div>

<p>User variables can be assigned a value from a limited set of data types:
integer, decimal, floating-point, binary or nonbinary string, or NULL value.</p>
<p>User-defined variables are session-specific. That is, a user variable defined
by one client cannot be seen or used by other clients.</p>
<p>They can be used in <code>SELECT</code> queries using Advanced MySQL user variable
techniques.</p>
<ol>
<li><strong>Local Variables (no prefix) :</strong></li>
</ol>
<p>Local variables needs to be declared using <code>DECLARE</code> before accessing it.</p>
<p>They can be used as local variables and the input parameters inside a stored
procedure:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">DELIMITER</span><span class="w"> </span><span class="o">//</span>

<span class="n">CREATE</span><span class="w"> </span><span class="n">PROCEDURE</span><span class="w"> </span><span class="n">sp_test</span><span class="p">(</span><span class="n">var1</span><span class="w"> </span><span class="n">INT</span><span class="p">)</span><span class="w"> </span>
<span class="n">BEGIN</span><span class="w">   </span>
<span class="w">    </span><span class="n">DECLARE</span><span class="w"> </span><span class="n">start</span><span class="w">  </span><span class="n">INT</span><span class="w"> </span><span class="n">unsigned</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="n">DECLARE</span><span class="w"> </span><span class="n">finish</span><span class="w"> </span><span class="n">INT</span><span class="w"> </span><span class="n">unsigned</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>

<span class="w">    </span><span class="n">SELECT</span><span class="w">  </span><span class="n">var1</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">finish</span><span class="p">;</span>

<span class="w">    </span><span class="n">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">places</span><span class="w"> </span><span class="n">WHERE</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="n">BETWEEN</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">AND</span><span class="w"> </span><span class="n">finish</span><span class="p">;</span><span class="w"> </span>
<span class="n">END</span><span class="p">;</span><span class="w"> </span><span class="o">//</span>

<span class="n">DELIMITER</span><span class="w"> </span><span class="p">;</span>

<span class="n">CALL</span><span class="w"> </span><span class="n">sp_test</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</pre></div>

<p>If the <code>DEFAULT</code> clause is missing, the initial value is <code>NULL</code>.</p>
<p>The scope of a local variable is the <code>BEGIN ... END</code> block within which it is
declared.</p>
<ol>
<li><strong>Server System Variables (prefixed with<code>@@</code>):</strong></li>
</ol>
<p>The MySQL server maintains many system variables configured to a default
value. They can be of type <code>GLOBAL</code>, <code>SESSION</code> or <code>BOTH</code>.</p>
<p>Global variables affect the overall operation of the server whereas session
variables affect its operation for individual client connections.</p>
<p>To see the current values used by a running server, use the <code>SHOW VARIABLES</code>
statement or <code>SELECT @@var_name</code>.</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">SHOW</span><span class="w"> </span><span class="n">VARIABLES</span><span class="w"> </span><span class="ow">LIKE</span><span class="w"> </span><span class="s1">'%wait_timeout%'</span><span class="p">;</span>

<span class="k">SELECT</span><span class="w"> </span><span class="nb">@@sort_buffer_size</span><span class="p">;</span>
</pre></div>

<p>They can be set at server startup using options on the command line or in an
option file. Most of them can be changed dynamically while the server is
running using <code>SET GLOBAL</code> or <code>SET SESSION</code>:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="o">--</span><span class="w"> </span><span class="n">Syntax</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Global</span><span class="w"> </span><span class="n">variable</span><span class="p">:</span>
<span class="n">SET</span><span class="w"> </span><span class="n">GLOBAL</span><span class="w"> </span><span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">1000000</span><span class="p">;</span>
<span class="n">SET</span><span class="w"> </span><span class="err">@@</span><span class="n">global</span><span class="o">.</span><span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">1000000</span><span class="p">;</span>

<span class="o">--</span><span class="w"> </span><span class="n">Syntax</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Session</span><span class="w"> </span><span class="n">variable</span><span class="p">:</span>
<span class="n">SET</span><span class="w"> </span><span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">1000000</span><span class="p">;</span>
<span class="n">SET</span><span class="w"> </span><span class="n">SESSION</span><span class="w"> </span><span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">1000000</span><span class="p">;</span>
<span class="n">SET</span><span class="w"> </span><span class="err">@@</span><span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">1000000</span><span class="p">;</span>
<span class="n">SET</span><span class="w"> </span><span class="err">@@</span><span class="n">local</span><span class="o">.</span><span class="n">sort_buffer_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>SET</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="n">SET</span><span class="w"> </span><span class="err">@</span><span class="n">var_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">     </span><span class="o">/*</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">*/</span><span class="w">     </span><span class="n">SET</span><span class="w"> </span><span class="err">@</span><span class="n">var_name</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
</pre></div>

<p>both operators <strong>=</strong> and <strong>:=</strong> are accepted</p>
<hr>
<blockquote>
<p>SELECT</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="n">SELECT</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="err">@</span><span class="n">var_name</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="n">col2</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">tb_name</span><span class="w"> </span><span class="n">WHERE</span><span class="w"> </span><span class="s2">"condition"</span><span class="p">;</span>
</pre></div>

<p>if multiple record sets found only the last value in <code>col2</code> is kept
(override);</p>
<div class="code"><pre class="code literal-block"><span class="n">SELECT</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col2</span><span class="w"> </span><span class="n">INTO</span><span class="w"> </span><span class="err">@</span><span class="n">var_name</span><span class="p">,</span><span class="w"> </span><span class="n">col3</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="o">...</span>
</pre></div>

<p>in this case the result of <code>Select</code> is not containing <code>col2</code> values</p>
<hr>
<p>Ex both methods used</p>
<p>-- TRIGGER_BEFORE_INSERT --- setting a column value from calculations</p>
<div class="code"><pre class="code literal-block"><span class="p">...</span>
<span class="k">SELECT</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="nv">@NR</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">a_table</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">a_condition</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="k">NEW</span><span class="p">.</span><span class="n">ord_col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IFNULL</span><span class="p">(</span><span class="w"> </span><span class="nv">@NR</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">...</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-list-from-pandas-dataframe-column-or-row/" class="u-url">Get list from pandas dataframe column or row?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-list-from-pandas-dataframe-column-or-row/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:47:26+08:00" itemprop="datePublished" title="2023-02-18 05:47">2023-02-18 05:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a dataframe <code>df</code> imported from an Excel document like this:</p>
<div class="code"><pre class="code literal-block"><span class="n">cluster</span><span class="w"> </span><span class="n">load_date</span><span class="w">   </span><span class="n">budget</span><span class="w">  </span><span class="n">actual</span><span class="w">  </span><span class="n">fixed_price</span>
<span class="n">A</span><span class="w">   </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">1000</span><span class="w">    </span><span class="mi">4000</span><span class="w">    </span><span class="n">Y</span>
<span class="n">A</span><span class="w">   </span><span class="mi">2</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">12000</span><span class="w">   </span><span class="mi">10000</span><span class="w">   </span><span class="n">Y</span>
<span class="n">A</span><span class="w">   </span><span class="mi">3</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">36000</span><span class="w">   </span><span class="mi">2000</span><span class="w">    </span><span class="n">Y</span>
<span class="n">B</span><span class="w">   </span><span class="mi">4</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">15000</span><span class="w">   </span><span class="mi">10000</span><span class="w">   </span><span class="n">N</span>
<span class="n">B</span><span class="w">   </span><span class="mi">4</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">12000</span><span class="w">   </span><span class="mi">11500</span><span class="w">   </span><span class="n">N</span>
<span class="n">B</span><span class="w">   </span><span class="mi">4</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">90000</span><span class="w">   </span><span class="mi">11000</span><span class="w">   </span><span class="n">N</span>
<span class="n">C</span><span class="w">   </span><span class="mi">7</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">22000</span><span class="w">   </span><span class="mi">18000</span><span class="w">   </span><span class="n">N</span>
<span class="n">C</span><span class="w">   </span><span class="mi">8</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">30000</span><span class="w">   </span><span class="mi">28960</span><span class="w">   </span><span class="n">N</span>
<span class="n">C</span><span class="w">   </span><span class="mi">9</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mi">2014</span><span class="w">    </span><span class="mi">53000</span><span class="w">   </span><span class="mi">51200</span><span class="w">   </span><span class="n">N</span>
</pre></div>

<p>I want to be able to return the contents of column 1 <code>df['cluster']</code> as a
list, so I can run a for-loop over it, and create an Excel worksheet for every
cluster.</p>
<p>Is it also possible to return the contents of a whole column or row to a list?
e.g.</p>
<div class="code"><pre class="code literal-block"><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">column1</span><span class="o">]</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">df.ix(row1)</span><span class="o">]</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Pandas DataFrame columns are Pandas Series when you pull them out, which you
can then call <code>x.tolist()</code> on to turn them into a Python list. Alternatively
you cast it with <code>list(x)</code>.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'one'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">]),</span>
             <span class="s1">'two'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">])}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"DataFrame:</span><span class="se">\n</span><span class="si">{</span><span class="n">df</span><span class="si">}</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"column types:</span><span class="se">\n</span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="n">col_one_list</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'one'</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">col_one_arr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'one'</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">col_one_list:</span><span class="se">\n</span><span class="si">{</span><span class="n">col_one_list</span><span class="si">}</span><span class="se">\n</span><span class="s2">type:</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">col_one_list</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">col_one_arr:</span><span class="se">\n</span><span class="si">{</span><span class="n">col_one_arr</span><span class="si">}</span><span class="se">\n</span><span class="s2">type:</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">col_one_arr</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block"><span class="n">DataFrame</span><span class="o">:</span>
<span class="w">   </span><span class="n">one</span><span class="w">  </span><span class="n">two</span>
<span class="n">a</span><span class="w">  </span><span class="mf">1.0</span><span class="w">    </span><span class="mi">1</span>
<span class="n">b</span><span class="w">  </span><span class="mf">2.0</span><span class="w">    </span><span class="mi">2</span>
<span class="n">c</span><span class="w">  </span><span class="mf">3.0</span><span class="w">    </span><span class="mi">3</span>
<span class="n">d</span><span class="w">  </span><span class="kc">NaN</span><span class="w">    </span><span class="mi">4</span>

<span class="n">column</span><span class="w"> </span><span class="n">types</span><span class="o">:</span>
<span class="n">one</span><span class="w">    </span><span class="n">float64</span>
<span class="n">two</span><span class="w">      </span><span class="n">int64</span>
<span class="n">dtype</span><span class="o">:</span><span class="w"> </span><span class="n">object</span>

<span class="n">col_one_list</span><span class="o">:</span>
<span class="o">[</span><span class="mf">1.0</span><span class="o">,</span><span class="w"> </span><span class="mf">2.0</span><span class="o">,</span><span class="w"> </span><span class="mf">3.0</span><span class="o">,</span><span class="w"> </span><span class="n">nan</span><span class="o">]</span>
<span class="n">type</span><span class="o">:&lt;</span><span class="kd">class</span><span class="w"> </span><span class="s1">'list'</span><span class="o">&gt;</span>

<span class="n">col_one_arr</span><span class="o">:</span>
<span class="o">[</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="w">  </span><span class="mi">2</span><span class="o">.</span><span class="w">  </span><span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="n">nan</span><span class="o">]</span>
<span class="n">type</span><span class="o">:&lt;</span><span class="kd">class</span><span class="w"> </span><span class="s1">'numpy.ndarray'</span><span class="o">&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This returns a numpy array:</p>
<div class="code"><pre class="code literal-block">arr = df["cluster"].to_numpy()
</pre></div>

<hr>
<p>This returns a numpy array of <strong>unique</strong> values:</p>
<div class="code"><pre class="code literal-block">unique_arr = df["cluster"].unique()
</pre></div>

<p>You can also use numpy to get the unique values, although there are
differences between the two methods:</p>
<div class="code"><pre class="code literal-block">arr = df["cluster"].to_numpy()
unique_arr = np.unique(arr)
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/node-js-check-if-path-is-file-or-directory/" class="u-url">Node.js check if path is file or directory</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/node-js-check-if-path-is-file-or-directory/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:47:00+08:00" itemprop="datePublished" title="2023-02-18 05:47">2023-02-18 05:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I can't seem to get any search results that explain how to do this.</p>
<p>All I want to do is be able to know if a given path is a file or a directory
(folder).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The following should tell you. From the docs:</p>
<div class="code"><pre class="code literal-block">fs.lstatSync(path_string).isDirectory()
</pre></div>

<blockquote>
<p>Objects returned from fs.stat() and fs.lstat() are of this type.</p>
<div class="code"><pre class="code literal-block">stats.isFile()
stats.isDirectory()
stats.isBlockDevice()
stats.isCharacterDevice()
stats.isSymbolicLink() // (only valid with fs.lstat())
stats.isFIFO()
stats.isSocket()
</pre></div>

</blockquote>
<h4>NOTE:</h4>
<p>The <strong>above solution</strong> will <code>throw</code> an <code>Error</code> if; for ex, the <code>file</code> or
<code>directory</code> doesn't exist.</p>
<p>If you want a <code>true</code> or <code>false</code> approach, try <code>fs.existsSync(dirPath) &amp;&amp;
fs.lstatSync(dirPath).isDirectory();</code> as mentioned by Joseph in the comments
below.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>Update: Node.Js &gt;= 10</h3>
<p>We can use the new fs.promises API</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">)</span><span class="o">.</span><span class="n">promises</span><span class="p">;</span>

<span class="p">(</span><span class="n">async</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">fs</span><span class="o">.</span><span class="n">lstat</span><span class="p">(</span><span class="s1">'test.txt'</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">stat</span><span class="o">.</span><span class="n">isFile</span><span class="p">());</span>
<span class="p">})()</span><span class="o">.</span><span class="n">catch</span><span class="p">(</span><span class="n">console</span><span class="o">.</span><span class="n">error</span><span class="p">)</span>
</pre></div>

<hr>
<h3>Any Node.Js version</h3>
<p>Here's how you would detect if a path is a file or a directory
<strong>asynchronously</strong> , which is the recommended approach in node. using fs.lstat</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s2">"fs"</span><span class="p">);</span>

<span class="n">let</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/path/to/something"</span><span class="p">;</span>

<span class="n">fs</span><span class="o">.</span><span class="n">lstat</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="p">,</span><span class="w"> </span><span class="n">stats</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="n">Handle</span><span class="w"> </span><span class="n">error</span>

<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Is</span><span class="w"> </span><span class="n">file</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">stats</span><span class="o">.</span><span class="n">isFile</span><span class="p">()}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Is</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">stats</span><span class="o">.</span><span class="n">isDirectory</span><span class="p">()}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Is</span><span class="w"> </span><span class="n">symbolic</span><span class="w"> </span><span class="n">link</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">stats</span><span class="o">.</span><span class="n">isSymbolicLink</span><span class="p">()}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Is</span><span class="w"> </span><span class="n">FIFO</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">stats</span><span class="o">.</span><span class="n">isFIFO</span><span class="p">()}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Is</span><span class="w"> </span><span class="n">socket</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">stats</span><span class="o">.</span><span class="n">isSocket</span><span class="p">()}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Is</span><span class="w"> </span><span class="n">character</span><span class="w"> </span><span class="n">device</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">stats</span><span class="o">.</span><span class="n">isCharacterDevice</span><span class="p">()}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Is</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">device</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">stats</span><span class="o">.</span><span class="n">isBlockDevice</span><span class="p">()}</span><span class="err">`</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<hr>
<p>Note when using the synchronous API:</p>
<blockquote>
<p>When using the synchronous form any exceptions are immediately thrown. You
can use try/catch to handle exceptions or allow them to bubble up.</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="nv">try</span>{
<span class="w">     </span><span class="nv">fs</span>.<span class="nv">lstatSync</span><span class="ss">(</span><span class="s2">"/some/path"</span><span class="ss">)</span>.<span class="nv">isDirectory</span><span class="ss">()</span>
}<span class="nv">catch</span><span class="ss">(</span><span class="nv">e</span><span class="ss">)</span>{
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="nv">Handle</span><span class="w"> </span><span class="nv">error</span>
<span class="w">   </span><span class="k">if</span><span class="ss">(</span><span class="nv">e</span>.<span class="nv">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'ENOENT'</span><span class="ss">)</span>{
<span class="w">     </span><span class="o">//</span><span class="nv">no</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">directory</span>
<span class="w">     </span><span class="o">//</span><span class="k">do</span><span class="w"> </span><span class="nv">something</span>
<span class="w">   </span>}<span class="k">else</span><span class="w"> </span>{
<span class="w">     </span><span class="o">//</span><span class="k">do</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="k">else</span>
<span class="w">   </span>}
}
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1290.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1288.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
