<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2489) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2489.html">
<link rel="prev" href="index-2490.html" type="text/html">
<link rel="next" href="index-2488.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/error-when-testing-on-ios-simulator-couldn-t-register-with-the-bootstrap-server/" class="u-url">Error when testing on iOS simulator: Couldn't register with the bootstrap server</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/error-when-testing-on-ios-simulator-couldn-t-register-with-the-bootstrap-server/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:57:17+08:00" itemprop="datePublished" title="2023-03-04 19:57">2023-03-04 19:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was testing my app on the simulator when it crashed on clicking a button of
a UIAlertView. I stopped debugging there, made some changes to the code and
built the app again. Now when I run the application, I get this error in the
console</p>
<blockquote>
<p><strong>Couldn't register com.myApp.debug with the bootstrap server. Error:
unknown error code. This generally means that another instance of this
process was already running or is hung in the debugger.Program received
signal: “SIGABRT”.</strong></p>
</blockquote>
<p>I tried removing the app from the simulator, doing a clean build but I still
get this error when I try to run the app.</p>
<p>What should I do to be able to run the app on my simulator again?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try quitting and restarting the simulator? If "worse comes to worst" you can
always try restarting: in my experience this should fix it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try quitting and restarting the simulator? If "worse comes to worst" you can
always try restarting: in my experience this should fix it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-properly-add-include-directories-with-cmake/" class="u-url">How to properly add include directories with CMake</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-properly-add-include-directories-with-cmake/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:55:37+08:00" itemprop="datePublished" title="2023-03-04 19:55">2023-03-04 19:55</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>About a year ago I asked about header dependencies in CMake.</p>
<p>I realized recently that the issue seemed to be that CMake considered those
header files to be <em>external</em> to the project. At least, when generating a
Code::Blocks project the header files do not appear within the project (the
source files do). It therefore seems to me that CMake consider those headers
to be <em>external</em> to the project, and does not track them in the depends.</p>
<p>A quick search in the CMake tutorial only pointed to <code>include_directories</code>
which does not seem to do what I wish...</p>
<p>What is the proper way to signal to CMake that a particular directory contains
headers to be included, and that those headers should be tracked by the
generated Makefile?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Two things must be done.</p>
<p>First add the directory to be included:</p>
<div class="code"><pre class="code literal-block">target_include_directories(test<span class="w"> </span>PRIVATE<span class="w"> </span><span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>)
</pre></div>

<p>In case you are stuck with a very old CMake version (2.8.10 or older) without
support for <code>target_include_directories</code>, you can also use the legacy
<code>include_directories</code> instead:</p>
<div class="code"><pre class="code literal-block">include_directories(<span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>)
</pre></div>

<p>Then you also must add the header files to the list of your source files for
the current target, for instance:</p>
<div class="code"><pre class="code literal-block">set(SOURCES<span class="w"> </span>file.cpp<span class="w"> </span>file2.cpp<span class="w"> </span><span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>/file1.h<span class="w"> </span><span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>/file2.h)
add_executable(test<span class="w"> </span><span class="cp">${</span><span class="n">SOURCES</span><span class="cp">}</span>)
</pre></div>

<p>This way, the header files will appear as dependencies in the Makefile, and
also for example in the generated Visual Studio project, if you generate one.</p>
<p>How to use those header files for several targets:</p>
<div class="code"><pre class="code literal-block">set(HEADER_FILES<span class="w"> </span><span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>/file1.h<span class="w"> </span><span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>/file2.h)

add_library(mylib<span class="w"> </span>libsrc.cpp<span class="w"> </span><span class="cp">${</span><span class="n">HEADER_FILES</span><span class="cp">}</span>)
target_include_directories(mylib<span class="w"> </span>PRIVATE<span class="w"> </span><span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>)
add_executable(myexec<span class="w"> </span>execfile.cpp<span class="w"> </span><span class="cp">${</span><span class="n">HEADER_FILES</span><span class="cp">}</span>)
target_include_directories(myexec<span class="w"> </span>PRIVATE<span class="w"> </span><span class="cp">${</span><span class="n">YOUR_DIRECTORY</span><span class="cp">}</span>)
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>First, you use <code>include_directories()</code> to tell CMake to add the directory as
<code>-I</code> to the compilation command line. Second, you list the headers in your
<code>add_executable()</code> or <code>add_library()</code> call.</p>
<p>As an example, if your project's sources are in <code>src</code>, and you need headers
from <code>include</code>, you could do it like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">include_directories</span><span class="ss">(</span><span class="k">include</span><span class="ss">)</span>

<span class="nv">add_executable</span><span class="ss">(</span><span class="nv">MyExec</span>
<span class="w">  </span><span class="nv">src</span><span class="o">/</span><span class="nv">main</span>.<span class="nv">c</span>
<span class="w">  </span><span class="nv">src</span><span class="o">/</span><span class="nv">other_source</span>.<span class="nv">c</span>
<span class="w">  </span><span class="k">include</span><span class="o">/</span><span class="nv">header1</span>.<span class="nv">h</span>
<span class="w">  </span><span class="k">include</span><span class="o">/</span><span class="nv">header2</span>.<span class="nv">h</span>
<span class="ss">)</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/standard-way-to-embed-version-into-python-package/" class="u-url">Standard way to embed version into Python package?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/standard-way-to-embed-version-into-python-package/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:54:09+08:00" itemprop="datePublished" title="2023-03-04 19:54">2023-03-04 19:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a standard way to associate version string with a Python package in
such way that I could do the following?</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">foo</span>
<span class="nb">print</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
</pre></div>

<p>I would imagine there's some way to retrieve that data without any extra
hardcoding, since minor/major strings are specified in <code>setup.py</code> already.
Alternative solution that I found was to have <code>import __version__</code> in my
<code>foo/__init__.py</code> and then have <code>__version__.py</code> generated by <code>setup.py</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Not directly an answer to your question, but you should consider naming it
<code>__version__</code>, not <code>version</code>.</p>
<p>This is almost a quasi-standard. Many modules in the standard library use
<code>__version__</code>, and this is also used in lots of 3rd-party modules, so it's the
quasi-standard.</p>
<p>Usually, <code>__version__</code> is a string, but sometimes it's also a float or tuple.</p>
<p>As mentioned by S.Lott (Thank you!), PEP 8 says it explicitly:</p>
<blockquote>
<h3>Module Level Dunder Names</h3>
<p>Module level "dunders" (i.e. names with two leading and two trailing
underscores) such as <code>__all__</code>, <code>__author__</code>, <code>__version__</code>, etc. should be
placed after the module docstring but before any import statements except
from <code>__future__</code> imports.</p>
</blockquote>
<p>You should also make sure that the version number conforms to the format
described in PEP 440 (PEP 386 a previous version of this standard).</p>
<p><br></p>
<h3>Suggest</h3>
<p>I use a single <code>_version.py</code> file as the "once cannonical place" to store
version information:</p>
<ol>
<li>
<p>It provides a <code>__version__</code> attribute.</p>
</li>
<li>
<p>It provides the standard metadata version. Therefore it will be detected by <code>pkg_resources</code> or other tools that parse the package metadata (EGG-INFO and/or PKG-INFO, PEP 0345).</p>
</li>
<li>
<p>It doesn't import your package (or anything else) when building your package, which can cause problems in some situations. (See the comments below about what problems this can cause.)</p>
</li>
<li>
<p>There is only one place that the version number is written down, so there is only one place to change it when the version number changes, and there is less chance of inconsistent versions.</p>
</li>
</ol>
<p>Here is how it works: the "one canonical place" to store the version number is
a .py file, named "_version.py" which is in your Python package, for example
in <code>myniftyapp/_version.py</code>. This file is a Python module, but your setup.py
doesn't import it! (That would defeat feature 3.) Instead your setup.py knows
that the contents of this file is very simple, something like:</p>
<div class="code"><pre class="code literal-block">__version__ = "3.6.5"
</pre></div>

<p>And so your setup.py opens the file and parses it, with code like:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">re</span>
<span class="n">VERSIONFILE</span><span class="o">=</span><span class="s2">"myniftyapp/_version.py"</span>
<span class="n">verstrline</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">VERSIONFILE</span><span class="p">,</span> <span class="s2">"rt"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">VSRE</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">"^__version__ = ['</span><span class="se">\"</span><span class="s2">]([^'</span><span class="se">\"</span><span class="s2">]*)['</span><span class="se">\"</span><span class="s2">]"</span>
<span class="n">mo</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">VSRE</span><span class="p">,</span> <span class="n">verstrline</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">M</span><span class="p">)</span>
<span class="k">if</span> <span class="n">mo</span><span class="p">:</span>
    <span class="n">verstr</span> <span class="o">=</span> <span class="n">mo</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">"Unable to find version string in </span><span class="si">%s</span><span class="s2">."</span> <span class="o">%</span> <span class="p">(</span><span class="n">VERSIONFILE</span><span class="p">,))</span>
</pre></div>

<p>Then your setup.py passes that string as the value of the "version" argument
to <code>setup()</code>, thus satisfying feature 2.</p>
<p>To satisfy feature 1, you can have your package (at run-time, not at setup
time!) import the _version file from <code>myniftyapp/__init__.py</code> like this:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">_version</span> <span class="kn">import</span> <span class="n">__version__</span>
</pre></div>

<p>Here is an example of this technique that I've been using for years.</p>
<p>The code in that example is a bit more complicated, but the simplified example
that I wrote into this comment should be a complete implementation.</p>
<p>Here is example code of importing the version.</p>
<p>If you see anything wrong with this approach, please let me know.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2490.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2488.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
