<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1827) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1827.html">
<link rel="prev" href="index-1828.html" type="text/html">
<link rel="next" href="index-1826.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-insert-newlines-on-argparse-help-text/" class="u-url">How to insert newlines on argparse help text?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-insert-newlines-on-argparse-help-text/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:17:07+08:00" itemprop="datePublished" title="2023-03-03 10:17">2023-03-03 10:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using <code>argparse</code> in Python 2.7 for parsing input options. One of my
options is a multiple choice. I want to make a list in its help text, e.g.</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">'test'</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-g'</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'g'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s1">'a'</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"Some option, where</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" a = alpha</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" b = beta</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" g = gamma</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" d = delta</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" e = epsilon"</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>

<p>However, <code>argparse</code> strips all newlines and consecutive spaces. The result
looks like</p>
<div class="code"><pre class="code literal-block"><span class="o">~/</span><span class="n">Downloads</span><span class="p">:</span><span class="mi">52</span><span class="o">$</span><span class="w"> </span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">h</span>
<span class="n">usage</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">}]</span>

<span class="n">test</span>

<span class="n">optional</span><span class="w"> </span><span class="n">arguments</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="o">--</span><span class="n">help</span><span class="w">      </span><span class="n">show</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">exit</span>
<span class="w">  </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">}</span><span class="w">  </span><span class="n">Some</span><span class="w"> </span><span class="n">option</span><span class="p">,</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">beta</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gamma</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="n">e</span>
<span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="n">epsilon</span>
</pre></div>

<p>How to insert newlines in the help text?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try using <code>RawTextHelpFormatter</code> to preserve all of your formatting:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">RawTextHelpFormatter</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">'test'</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">RawTextHelpFormatter</span><span class="p">)</span>
</pre></div>

<p>It's similar to <code>RawDescriptionHelpFormatter</code> but instead of only applying to
the description and epilog, <code>RawTextHelpFormatter</code> also applies to all help
text (including arguments).</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you just want to override the one option, you should not use
<code>RawTextHelpFormatter</code>. Instead subclass the <code>HelpFormatter</code> and provide a
special intro for the options that should be handled "raw" (I use <code>"R|rest of
help"</code>):</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">argparse</span>

<span class="k">class</span> <span class="nc">SmartFormatter</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">_split_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'R|'</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">text</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>  
        <span class="c1"># this is the RawTextHelpFormatter._split_lines</span>
        <span class="k">return</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="o">.</span><span class="n">_split_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
</pre></div>

<p>And use it:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">'test'</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">SmartFormatter</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-g'</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'g'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s1">'a'</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"R|Some option, where</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" a = alpha</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" b = beta</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" g = gamma</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" d = delta</span><span class="se">\n</span><span class="s2">"</span>
         <span class="s2">" e = epsilon"</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>

<p>Any other calls to <code>.add_argument()</code> where the help does not start with <code>R|</code>
will be wrapped as normal.</p>
<p>This is part of my improvements on argparse. The full SmartFormatter also
supports adding the defaults to all options, and raw input of the utilities
description. The full version has its own <code>_split_lines</code> method, so that any
formatting done to e.g. version strings is preserved:</p>
<div class="code"><pre class="code literal-block">parser.add_argument('--version', '-v', action="version",
                    version="version...\n   42!")
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-search-all-loaded-scripts-in-chrome-developer-tools/" class="u-url">How to search all loaded scripts in Chrome Developer Tools?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-search-all-loaded-scripts-in-chrome-developer-tools/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:16:43+08:00" itemprop="datePublished" title="2023-03-03 10:16">2023-03-03 10:16</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Firebug, you can search some text and it will look for it in all scripts
loaded on a page. Can the same be done in Chrome Developer tools while
debugging client script? I tried it, but it seems to search only in the script
I have open, and not the rest that are on the page.</p>
<p>I hope the next screenshots give a better idea about what I'm trying to
accomplish: <img alt="alt text" src="images/KbOGD.png"></p>
<p>The following screenshots are from a single search in Firebug: <img alt="alt
text" src="images/7hyWC.png"><img alt="alt text" src="images/XbuRO.png"></p>
<p><br><br></p>
<h2>Answer</h2>
<p>Open a new Search pane in Developer Tools by:</p>
<ul>
<li>pressing <code>Ctrl</code>+<code>Shift</code>+<code>F</code> (<code>Cmd</code>+<code>Option</code>+<code>I</code> on mac)</li>
<li>clicking the overflow menu (<code>⋮</code>) in DevTools, <img alt="DevTools overflow menu" src="images/Ix5jP.png">
</li>
<li>clicking the overflow menu in the Console (<code>⋮</code>) and choosing the Search option</li>
</ul>
<p>You can search across all your scripts with support for regular expressions
and case sensitivity.</p>
<p>Click any match to load that file/section in the scripts panel.</p>
<p><img alt="Search all files - results" src="images/j73zE.png"></p>
<p>Make sure 'Search in anonymous and content scripts' is checked in the DevTools
Preferences (<code>F1</code>). This will return results from within iframes and HTML
inline scripts:</p>
<p><img alt="Search in anonymous and content scripts DevTools Settings
Preferences" src="images/EshHP.png"></p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Search All Files with Control+Shift+F or Console- &gt;[Search tab]</strong></p>
<p><img alt="enter image description here" src="images/e7EHd.png"></p>
<p>NOTE: Global Search shows up next to the CONSOLE menu</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-multiply-duration-by-integer/" class="u-url">How to multiply duration by integer?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-multiply-duration-by-integer/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:16:18+08:00" itemprop="datePublished" title="2023-03-03 10:16">2023-03-03 10:16</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>To test concurrent goroutines, I added a line to a function to make it take a
random time to return (up to one second)</p>
<div class="code"><pre class="code literal-block">time.Sleep(rand.Int31n(1000) * time.Millisecond)
</pre></div>

<p>However when I compiled, I got this error</p>
<blockquote>
<p>.\crawler.go:49: invalid operation: rand.Int31n(1000) * time.Millisecond
(mismatched types int32 and time.Duration)</p>
</blockquote>
<p>Any ideas? How can I multiply a duration?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>int32</code> and <code>time.Duration</code> are different types. You need to convert the
<code>int32</code> to a <code>time.Duration</code>:</p>
<div class="code"><pre class="code literal-block">time.Sleep(time.Duration(rand.Int31n(1000)) * time.Millisecond)
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You have to cast it to a correct format <code>Playground</code>.</p>
<div class="code"><pre class="code literal-block"><span class="nv">yourTime</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nv">rand</span><span class="o">.</span><span class="nf">Int31n</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="nv">time</span><span class="o">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nv">time</span><span class="o">.</span><span class="nf">Duration</span><span class="p">(</span><span class="nv">yourTime</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">time</span><span class="o">.</span><span class="nv">Millisecond</span><span class="p">)</span>
</pre></div>

<hr>
<p>If you will check documentation for sleep, you see that it requires <code>func
Sleep(d Duration)</code> duration as a parameter. Your rand.Int31n returns <code>int32</code>.</p>
<p>The line from the example works (<code>time.Sleep(100 * time.Millisecond)</code>) because
the compiler is smart enough to understand that here your constant 100 means a
duration. But if you pass a variable, you should cast it.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1828.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1826.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
