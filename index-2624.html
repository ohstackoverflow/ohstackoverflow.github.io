<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2624) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2624.html">
<link rel="prev" href="index-2625.html" type="text/html">
<link rel="next" href="index-2623.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-use-paths-in-tsconfig-json/" class="u-url">How to use paths in tsconfig.json?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-use-paths-in-tsconfig-json/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T05:43:22+08:00" itemprop="datePublished" title="2023-03-05 05:43">2023-03-05 05:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was reading about path-mapping in <code>tsconfig.json</code> and I wanted to use it to
avoid using the following ugly paths:</p>
<p><img alt="enter image description here" src="images/AYmv4.png"></p>
<p>The project organization is a bit weird because we have a mono-repository that
contains projects and libraries. The projects are grouped by company and by
browser / server / universal.</p>
<p><img alt="enter image description here" src="images/8fC6C.png"></p>
<p>How can I configure the paths in <code>tsconfig.json</code> so instead of:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">Something</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"../../../../../lib/src/[browser/server/universal]/..."</span><span class="p">;</span>
</pre></div>

<p>I can use:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">Something</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"lib/src/[browser/server/universal]/..."</span><span class="p">;</span>
</pre></div>

<p>Will something else be required in the webpack config? or is the
<code>tsconfig.json</code> enough?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This can be set up on your tsconfig.json file, as it is a TS feature.</p>
<p>You can do like this:</p>
<div class="code"><pre class="code literal-block"><span class="ss">"compilerOptions"</span><span class="err">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="ss">"baseUrl"</span><span class="err">:</span><span class="w"> </span><span class="ss">"src"</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ss">"paths"</span><span class="w"> </span><span class="k">is</span><span class="p">.</span>
<span class="w">         </span><span class="p">...</span>
<span class="w">        </span><span class="ss">"paths"</span><span class="err">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="ss">"@app/*"</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">"app/*"</span><span class="o">]</span><span class="p">,</span>
<span class="w">            </span><span class="ss">"@config/*"</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">"app/_config/*"</span><span class="o">]</span><span class="p">,</span>
<span class="w">            </span><span class="ss">"@environment/*"</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">"environments/*"</span><span class="o">]</span><span class="p">,</span>
<span class="w">            </span><span class="ss">"@shared/*"</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">"app/_shared/*"</span><span class="o">]</span><span class="p">,</span>
<span class="w">            </span><span class="ss">"@helpers/*"</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">"helpers/*"</span><span class="o">]</span>
<span class="w">        </span><span class="err">}</span><span class="p">,</span>
<span class="w">        </span><span class="p">...</span>
</pre></div>

<p>Have in mind that the path where you want to refer to, it takes your baseUrl
as the base of the route you are pointing to and it's mandatory as described
on the doc.</p>
<p><em>The character '@' is not mandatory.</em></p>
<p>After you set it up on that way, you can easily use it like this:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">Yo</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'@config/index'</span><span class="p">;</span>
</pre></div>

<p>the only thing you might notice is that the intellisense does not work in the
current latest version, so I would suggest to follow an index convention for
importing/exporting files.</p>
<blockquote>
<p>https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-
mapping</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>You can use combination of <code>baseUrl</code> and <code>paths</code> docs.</p>
<p>Assuming root is on the topmost <code>src</code> dir(and I read your image properly) use</p>
<div class="code"><pre class="code literal-block"><span class="c1">// tsconfig.json</span>
<span class="p">{</span>
<span class="w">  </span><span class="s">"compilerOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="s">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s">"."</span><span class="p">,</span>
<span class="w">    </span><span class="s">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s">"lib/*"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s">"src/org/global/lib/*"</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>For <code>webpack</code> you might also need to add module resolution. For <code>webpack2</code>
this could look like</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">webpack</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">js</span>
<span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">resolve</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">...</span>
<span class="w">        </span><span class="n">modules</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="o">...</span>
<span class="w">            </span><span class="s1">'./src/org/global'</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-the-mouse-position-without-events-without-moving-the-mouse/" class="u-url">How to get the mouse position without events (without moving the mouse)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-the-mouse-position-without-events-without-moving-the-mouse/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T05:41:53+08:00" itemprop="datePublished" title="2023-03-05 05:41">2023-03-05 05:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is it possible to get the mouse position with JavaScript after page loads
without any mouse movement event (without moving the mouse)?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Real answer: No, it's not possible.</p>
<p>OK, I have just thought of a way. Overlay your page with a div that covers the
whole document. Inside that, create (say) 2,000 x 2,000 <code>&lt;a&gt;</code> elements (so
that the <code>:hover</code> pseudo-class will work in IE 6, see), each 1 pixel in size.
Create a CSS <code>:hover</code> rule for those <code>&lt;a&gt;</code> elements that changes a property
(let's say <code>font-family</code>). In your load handler, cycle through each of the 4
million <code>&lt;a&gt;</code> elements, checking <code>currentStyle</code> / <code>getComputedStyle()</code> until
you find the one with the hover font. Extrapolate back from this element to
get the co-ordinates within the document.</p>
<p>N.B. <strong>DON'T DO THIS</strong>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Edit 2020: <strong>This does <em>not</em> work any more.</strong> It seems so, that the browser
vendors patched this out. Because the most browsers rely on chromium, it might
be in its core.</p>
<p>Old answer: You can also hook mouseenter (this event is fired after page
reload, when the mousecursor is inside the page). Extending Corrupted's code
should do the trick:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'mousemove'</span><span class="p">,</span><span class="w"> </span><span class="n">onMouseUpdate</span><span class="p">,</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>
<span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'mouseenter'</span><span class="p">,</span><span class="w"> </span><span class="n">onMouseUpdate</span><span class="p">,</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>

<span class="n">function</span><span class="w"> </span><span class="n">onMouseUpdate</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">pageX</span><span class="p">;</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">pageY</span><span class="p">;</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">getMouseX</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">getMouseY</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>You can also set x and y to null on mouseleave-event. So you can check if the
user is on your page with it's cursor.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/functional-style-of-java-8-s-optional-ifpresent-and-if-not-present/" class="u-url">Functional style of Java 8's Optional.ifPresent and if-not-Present?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/functional-style-of-java-8-s-optional-ifpresent-and-if-not-present/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T05:40:24+08:00" itemprop="datePublished" title="2023-03-05 05:40">2023-03-05 05:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Java 8, I want to do something to an <code>Optional</code> object if it is present,
and do another thing if it is not present.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">opt</span>.<span class="nv">isPresent</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"found"</span><span class="ss">)</span><span class="c1">;</span>
}<span class="w"> </span><span class="k">else</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"Not found"</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>This is not a 'functional style', though.</p>
<p><code>Optional</code> has an <code>ifPresent()</code> method, but I am unable to chain an <code>orElse()</code>
method.</p>
<p>Thus, I cannot write:</p>
<div class="code"><pre class="code literal-block"><span class="kr">opt</span><span class="p">.</span><span class="n">ifPresent</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"found "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">))</span>
<span class="w">   </span><span class="p">.</span><span class="n">orElse</span><span class="p">(</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"NOT FOUND"</span><span class="p">));</span>
</pre></div>

<p>In reply to @assylias, I don't think <code>Optional.map()</code> works for the following
case:</p>
<div class="code"><pre class="code literal-block"><span class="kr">opt</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"while opt is present..."</span><span class="p">);</span>
<span class="w">  </span><span class="n">o</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="n">xxx</span><span class="p">);</span>
<span class="w">  </span><span class="n">dao</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">o</span><span class="p">);</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="n">null</span><span class="p">;</span>
<span class="p">}).</span><span class="n">orElseGet</span><span class="p">(</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"create new obj"</span><span class="p">);</span>
<span class="w">  </span><span class="n">dao</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span>
<span class="w">  </span><span class="kr">return</span><span class="w"> </span><span class="n">null</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<p>In this case, when <code>opt</code> is present, I update its property and save to the
database. When it is not available, I create a new <code>obj</code> and save to the
database.</p>
<p>Note in the two lambdas I have to return <code>null</code>.</p>
<p>But when <code>opt</code> is present, both lambdas will be executed. <code>obj</code> will be
updated, and a new object will be saved to the database . This is because of
the <code>return null</code> in the first lambda. And <code>orElseGet()</code> will continue to
execute.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>For me the answer of @Dane White is OK, first I did not like using <code>Runnable</code>
but I could not find any alternatives.</p>
<p>Here another implementation I preferred more:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">Optional</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">optional</span><span class="c1">;</span>

<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="ss">(</span><span class="nv">Optional</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">optional</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">this</span>.<span class="nv">optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">optional</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">of</span><span class="ss">(</span><span class="nv">Optional</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">optional</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;&gt;</span><span class="ss">(</span><span class="nv">optional</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">ifPresent</span><span class="ss">(</span><span class="nv">Consumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">c</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">optional</span>.<span class="nv">ifPresent</span><span class="ss">(</span><span class="nv">c</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">ifNotPresent</span><span class="ss">(</span><span class="nv">Runnable</span><span class="w"> </span><span class="nv">r</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span><span class="nv">optional</span>.<span class="nv">isPresent</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">            </span><span class="nv">r</span>.<span class="nv">run</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span>}
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span><span class="c1">;</span>
<span class="w">    </span>}
}
</pre></div>

<p>Then:</p>
<div class="code"><pre class="code literal-block"><span class="n">Optional</span><span class="o">&lt;</span><span class="kr">Any</span><span class="o">&gt;</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="kr">of</span><span class="p">(...);</span>
<span class="n">OptionalConsumer</span><span class="p">.</span><span class="kr">of</span><span class="p">(</span><span class="n">o</span><span class="p">).</span><span class="n">ifPresent</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"isPresent "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="n">ifNotPresent</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"! isPresent"</span><span class="p">));</span>
</pre></div>

<p><strong>Update 1:</strong></p>
<p>the above solution for the traditional way of development when you have the
value and want to process it but what if I want to define the functionality
and the execution will be then, check below enhancement;</p>
<div class="code"><pre class="code literal-block"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="err">{</span>
<span class="n">private</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="n">private</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>

<span class="k">public</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="p">(</span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">();</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
<span class="err">}</span>

<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">of</span><span class="p">(</span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="err">}</span>

<span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">accept</span><span class="p">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">isPresent</span><span class="p">())</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="n">accept</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="k">get</span><span class="p">());</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>Then could be used as:</p>
<div class="code"><pre class="code literal-block"><span class="nt">Consumer</span><span class="o">&lt;</span><span class="nt">Optional</span><span class="o">&lt;</span><span class="nt">Integer</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nt">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">OptionalConsumer</span><span class="p">.</span><span class="nc">of</span><span class="o">(</span>
<span class="w">    </span><span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">::</span><span class="nd">println</span><span class="o">,</span><span class="w"> </span>
<span class="w">    </span><span class="o">()</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">.</span><span class="nc">println</span><span class="o">(</span><span class="s2">"Not fit"</span><span class="o">)</span>
<span class="o">);</span>

<span class="nt">IntStream</span><span class="p">.</span><span class="nc">range</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">100</span><span class="o">)</span>
<span class="w">    </span><span class="p">.</span><span class="nc">boxed</span><span class="o">()</span>
<span class="w">    </span><span class="p">.</span><span class="nc">map</span><span class="o">(</span><span class="nt">i</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">Optional</span><span class="p">.</span><span class="nc">of</span><span class="o">(</span><span class="nt">i</span><span class="o">)</span>
<span class="w">    </span><span class="p">.</span><span class="nc">filter</span><span class="o">(</span><span class="nt">j</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">j</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nt">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nt">0</span><span class="o">))</span>
<span class="w">    </span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">c</span><span class="o">);</span>
</pre></div>

<p>In this new code you have 3 things:</p>
<ol>
<li>can define the functionality before the existing of an object easy.</li>
<li>not creating object reference for each Optional, only one, you have so less memory than less GC.</li>
<li>it is implementing consumer for better usage with other components.</li>
</ol>
<p>By the way, now its name is more descriptive it is actually
Consumer&lt;Optional&lt;?&gt;&gt;</p>
<p><br></p>
<h3>Suggest</h3>
<p>For me the answer of @Dane White is OK, first I did not like using <code>Runnable</code>
but I could not find any alternatives.</p>
<p>Here another implementation I preferred more:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">Optional</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">optional</span><span class="c1">;</span>

<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="ss">(</span><span class="nv">Optional</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">optional</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">this</span>.<span class="nv">optional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">optional</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">of</span><span class="ss">(</span><span class="nv">Optional</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">optional</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;&gt;</span><span class="ss">(</span><span class="nv">optional</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">ifPresent</span><span class="ss">(</span><span class="nv">Consumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">c</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">optional</span>.<span class="nv">ifPresent</span><span class="ss">(</span><span class="nv">c</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">OptionalConsumer</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">ifNotPresent</span><span class="ss">(</span><span class="nv">Runnable</span><span class="w"> </span><span class="nv">r</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span><span class="nv">optional</span>.<span class="nv">isPresent</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">            </span><span class="nv">r</span>.<span class="nv">run</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span>}
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span><span class="c1">;</span>
<span class="w">    </span>}
}
</pre></div>

<p>Then:</p>
<div class="code"><pre class="code literal-block"><span class="n">Optional</span><span class="o">&lt;</span><span class="kr">Any</span><span class="o">&gt;</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Optional</span><span class="p">.</span><span class="kr">of</span><span class="p">(...);</span>
<span class="n">OptionalConsumer</span><span class="p">.</span><span class="kr">of</span><span class="p">(</span><span class="n">o</span><span class="p">).</span><span class="n">ifPresent</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"isPresent "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="n">ifNotPresent</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"! isPresent"</span><span class="p">));</span>
</pre></div>

<p><strong>Update 1:</strong></p>
<p>the above solution for the traditional way of development when you have the
value and want to process it but what if I want to define the functionality
and the execution will be then, check below enhancement;</p>
<div class="code"><pre class="code literal-block"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="err">{</span>
<span class="n">private</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="n">private</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>

<span class="k">public</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="p">(</span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">();</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
<span class="err">}</span>

<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">of</span><span class="p">(</span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OptionalConsumer</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="err">}</span>

<span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">accept</span><span class="p">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">isPresent</span><span class="p">())</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">c</span><span class="p">.</span><span class="n">accept</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="k">get</span><span class="p">());</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>Then could be used as:</p>
<div class="code"><pre class="code literal-block"><span class="nt">Consumer</span><span class="o">&lt;</span><span class="nt">Optional</span><span class="o">&lt;</span><span class="nt">Integer</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nt">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">OptionalConsumer</span><span class="p">.</span><span class="nc">of</span><span class="o">(</span>
<span class="w">    </span><span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">::</span><span class="nd">println</span><span class="o">,</span><span class="w"> </span>
<span class="w">    </span><span class="o">()</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">.</span><span class="nc">println</span><span class="o">(</span><span class="s2">"Not fit"</span><span class="o">)</span>
<span class="o">);</span>

<span class="nt">IntStream</span><span class="p">.</span><span class="nc">range</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span><span class="w"> </span><span class="nt">100</span><span class="o">)</span>
<span class="w">    </span><span class="p">.</span><span class="nc">boxed</span><span class="o">()</span>
<span class="w">    </span><span class="p">.</span><span class="nc">map</span><span class="o">(</span><span class="nt">i</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">Optional</span><span class="p">.</span><span class="nc">of</span><span class="o">(</span><span class="nt">i</span><span class="o">)</span>
<span class="w">    </span><span class="p">.</span><span class="nc">filter</span><span class="o">(</span><span class="nt">j</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">j</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nt">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nt">0</span><span class="o">))</span>
<span class="w">    </span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">c</span><span class="o">);</span>
</pre></div>

<p>In this new code you have 3 things:</p>
<ol>
<li>can define the functionality before the existing of an object easy.</li>
<li>not creating object reference for each Optional, only one, you have so less memory than less GC.</li>
<li>it is implementing consumer for better usage with other components.</li>
</ol>
<p>By the way, now its name is more descriptive it is actually
Consumer&lt;Optional&lt;?&gt;&gt;</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2625.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2623.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
