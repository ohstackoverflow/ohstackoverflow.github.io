<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1754) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1754.html">
<link rel="prev" href="index-1755.html" type="text/html">
<link rel="next" href="index-1753.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-abort-a-stash-pop/" class="u-url">How to abort a stash pop?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-abort-a-stash-pop/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:34:58+08:00" itemprop="datePublished" title="2023-03-03 08:34">2023-03-03 08:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I popped a stash and there was a merge conflict. Unlike the question that is
listed as a duplicate, I already had some uncommitted changes in the directory
which I wanted to keep. I don't just want to make the merge conflict
disappear, but also to get my directory back to the state it was before the
pop.</p>
<p>I tried <code>git merge --abort</code>, but git claimed no merge was in progress. Is
there an easy way to abort a pop without destroying the changes I originally
had in the directory?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Simple one liner</h2>
<p>I have always used</p>
<p><code>git reset --merge</code></p>
<p>I can't remember it ever failing.</p>
<hr>
<p>Note: <code>git reset --merge</code> will discard any staged changes. Also, as noted by
@Saroopashree Kumaraguru in the comments, the stash contents won't be lost and
can be re-applied later.</p>
<p><br></p>
<h3>Suggest</h3>
<p>My use case: just tried popping onto the wrong branch and got conflicts. All I
need is to undo the pop but keep it in the stash list so I can pop it out on
the correct branch. I did this:</p>
<div class="code"><pre class="code literal-block">git reset HEAD --hard
git checkout my_correct_branch
git stash pop
</pre></div>

<p>Easy.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-t-use-method-return-value-in-write-context/" class="u-url">Can't use method return value in write context</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-t-use-method-return-value-in-write-context/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:34:32+08:00" itemprop="datePublished" title="2023-03-03 08:34">2023-03-03 08:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would think the following piece of code should work, but it doesn't
<strong>(Edited: Now works in PHP 5.5+)</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">empty</span><span class="p">(</span><span class="err">$</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">getError</span><span class="p">()))</span>
</pre></div>

<p>Where <code>getError()</code> is simply:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="n">getError</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="err">$</span><span class="n">this</span><span class="o">-&gt;</span><span class="nf">error</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Yet I end up with this error:</p>
<blockquote>
<p>can't use method return value in write context</p>
</blockquote>
<p>What does this mean? Isn't this just a read?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>empty()</code> needs to access the value by reference (in order to check whether
that reference points to something that exists), and PHP before 5.5 didn't
support references to temporary values returned from functions.</p>
<p>However, the real problem you have is that you use <code>empty()</code> at all,
mistakenly believing that "empty" value is any different from "false".</p>
<p>Empty is just an alias for <code>!isset($thing) || !$thing</code>. When the thing you're
checking always exists (in PHP results of function calls always exist), the
<code>empty()</code> function is <em>nothing but a negation operator</em>.</p>
<p>PHP <strong>doesn't have concept of emptyness</strong>. Values that evaluate to false are
empty, values that evaluate to true are non-empty. It's the same thing. This
code:</p>
<div class="code"><pre class="code literal-block">$<span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">something</span><span class="ss">()</span><span class="c1">;</span>
<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">empty</span><span class="ss">(</span>$<span class="nv">x</span><span class="ss">))</span><span class="w"> </span>…
</pre></div>

<p>and this:</p>
<div class="code"><pre class="code literal-block">$<span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">something</span><span class="ss">()</span><span class="c1">;</span>
<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span>$<span class="nv">x</span><span class="ss">)</span><span class="w"> </span>…
</pre></div>

<p>has <strong>always the same result, in all cases, for all datatypes</strong> (because <code>$x</code>
is defined <code>empty()</code> is redundant).</p>
<p>Return value from the method always exists (even if you don't have <code>return</code>
statement, return value exists and contains <code>null</code>). Therefore:</p>
<div class="code"><pre class="code literal-block"><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">empty</span><span class="p">(</span><span class="err">$</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">getError</span><span class="p">()))</span>
</pre></div>

<p>is logically equivalent to:</p>
<div class="code"><pre class="code literal-block"><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="err">$</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">getError</span><span class="p">())</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p><strong>Note:</strong> This is a very high voted answer with a high visibility, but
please note that it promotes bad, unnecessary coding practices! See
@Kornel's answer for the correct way.</p>
<p><strong>Note #2:</strong> I endorse the suggestions to use @Kornel's answer. When I wrote
this answer three years ago, I merely meant to explain the nature of the
error, not necessarily endorse the alternative. The code snippet below is
not recommended.</p>
</blockquote>
<hr>
<p>It's a limitation of empty() in PHP versions below 5.5.</p>
<blockquote>
<p>Note: empty() only checks variables as anything else will result in a parse
error. In other words, the following will not work: empty(trim($name)).</p>
</blockquote>
<p>You'd have to change to this</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Not recommended, just illustrates the issue</span>
<span class="no">$</span><span class="n">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">getError</span><span class="p">();</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span>!<span class="n">empty</span><span class="p">(</span><span class="no">$</span><span class="n">err</span><span class="p">))</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-do-a-deep-comparison-between-2-objects-with-lodash/" class="u-url">How to do a deep comparison between 2 objects with lodash?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-do-a-deep-comparison-between-2-objects-with-lodash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:34:04+08:00" itemprop="datePublished" title="2023-03-03 08:34">2023-03-03 08:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have 2 nested objects which are different and I need to know if they have a
difference in one of their nested properties.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>

<span class="n">a</span><span class="o">.</span><span class="n">prop1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="n">a</span><span class="o">.</span><span class="n">prop2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">prop3</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">};</span>

<span class="n">b</span><span class="o">.</span><span class="n">prop1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="n">b</span><span class="o">.</span><span class="n">prop2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">prop3</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>
</pre></div>

<p>The object could be much more complex with more nested properties. But this
one is a good example. I have the option to use recursive functions or
something with lodash...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>An easy and elegant solution is to use <code>_.isEqual</code>, which performs a deep
comparison:</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>a<span class="w"> </span>=<span class="w"> </span>{};
var<span class="w"> </span>b<span class="w"> </span>=<span class="w"> </span>{};

a.prop1<span class="w"> </span>=<span class="w"> </span>2;
a.prop2<span class="w"> </span>=<span class="w"> </span>{<span class="w"> </span>prop3:<span class="w"> </span>2<span class="w"> </span>};

b.prop1<span class="w"> </span>=<span class="w"> </span>2;
b.prop2<span class="w"> </span>=<span class="w"> </span>{<span class="w"> </span>prop3:<span class="w"> </span>3<span class="w"> </span>};

console.log(_.isEqual(a,<span class="w"> </span>b));<span class="w"> </span>//<span class="w"> </span>returns<span class="w"> </span>false<span class="w"> </span>if<span class="w"> </span>different


<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>However, this solution doesn't show which property is different.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you need to know which properties are different, use reduce():</p>
<div class="code"><pre class="code literal-block"><span class="n">_</span><span class="p">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="k">result</span><span class="p">,</span><span class="w"> </span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="k">key</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_</span><span class="p">.</span><span class="n">isEqual</span><span class="p">(</span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="vm">?</span>
<span class="w">        </span><span class="k">result</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="k">result</span><span class="p">.</span><span class="nf">concat</span><span class="p">(</span><span class="k">key</span><span class="p">);</span>
<span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="err">[]</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="o">[</span><span class="n"> "prop2" </span><span class="o">]</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1755.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1753.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
