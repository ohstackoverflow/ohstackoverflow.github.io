<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 13) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-13.html">
<link rel="prev" href="index-14.html" type="text/html">
<link rel="next" href="index-12.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-include-a-javascript-file-in-another-javascript-file/" class="u-url">How do I include a JavaScript file in another JavaScript file?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-include-a-javascript-file-in-another-javascript-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T18:31:57+08:00" itemprop="datePublished" title="2023-02-16 18:31">2023-02-16 18:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I include a JavaScript file inside another JavaScript file, similar to
<code>@import</code> in CSS?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The old versions of JavaScript had no import, include, or require, so many
different approaches to this problem have been developed.</p>
<p>But since 2015 (ES6), JavaScript has had the ES6 modules standard to import
modules in Node.js, which is also supported by most modern browsers.</p>
<p>For compatibility with older browsers, build tools like Webpack and Rollup
and/or transpilation tools like Babel can be used.</p>
<h2>ES6 Modules</h2>
<p>ECMAScript (ES6) modules have been supported in Node.js since v8.5, with the
<code>--experimental-modules</code> flag, and since at least Node.js v13.8.0 without the
flag. To enable "ESM" (vs. Node.js's previous CommonJS-style module system
["CJS"]) you either use <code>"type": "module"</code> in <code>package.json</code> or give the files
the extension <code>.mjs</code>. (Similarly, modules written with Node.js's previous CJS
module can be named <code>.cjs</code> if your default is ESM.)</p>
<p>Using <code>package.json</code>:</p>
<div class="code"><pre class="code literal-block">{
    "type": "module"
}
</pre></div>

<p>Then <code>module.js</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">hello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"Hello"</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Then <code>main.js</code>:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">hello</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'./module.js'</span><span class="p">;</span>
<span class="n">let</span> <span class="n">val</span> <span class="o">=</span> <span class="n">hello</span><span class="p">();</span>  <span class="o">//</span> <span class="n">val</span> <span class="ow">is</span> <span class="s2">"Hello"</span><span class="p">;</span>
</pre></div>

<p>Using <code>.mjs</code>, you'd have <code>module.mjs</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">hello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"Hello"</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Then <code>main.mjs</code>:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">hello</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'./module.mjs'</span><span class="p">;</span>
<span class="n">let</span> <span class="n">val</span> <span class="o">=</span> <span class="n">hello</span><span class="p">();</span>  <span class="o">//</span> <span class="n">val</span> <span class="ow">is</span> <span class="s2">"Hello"</span><span class="p">;</span>
</pre></div>

<h3>ECMAScript modules in browsers</h3>
<p>Browsers have had support for loading ECMAScript modules directly (no tools
like Webpack required) since Safari 10.1, Chrome 61, Firefox 60, and Edge 16.
Check the current support at caniuse. There is no need to use Node.js' <code>.mjs</code>
extension; browsers completely ignore file extensions on modules/scripts.</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">"module"</span><span class="o">&gt;</span>
  <span class="kn">import</span> <span class="p">{</span> <span class="n">hello</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'./hello.mjs'</span><span class="p">;</span> <span class="o">//</span> <span class="n">Or</span> <span class="n">the</span> <span class="n">extension</span> <span class="n">could</span> <span class="n">be</span> <span class="n">just</span> <span class="err">`</span><span class="o">.</span><span class="n">js</span><span class="err">`</span>
  <span class="n">hello</span><span class="p">(</span><span class="s1">'world'</span><span class="p">);</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>



<span class="o">//</span> <span class="n">hello</span><span class="o">.</span><span class="n">mjs</span> <span class="o">--</span> <span class="ow">or</span> <span class="n">the</span> <span class="n">extension</span> <span class="n">could</span> <span class="n">be</span> <span class="n">just</span> <span class="err">`</span><span class="o">.</span><span class="n">js</span><span class="err">`</span>
<span class="n">export</span> <span class="n">function</span> <span class="n">hello</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">const</span> <span class="n">div</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
  <span class="n">div</span><span class="o">.</span><span class="n">textContent</span> <span class="o">=</span> <span class="err">`</span><span class="n">Hello</span> <span class="err">$</span><span class="p">{</span><span class="n">text</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
  <span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">div</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Read more at https://jakearchibald.com/2017/es-modules-in-browsers/</p>
<h4>Dynamic imports in browsers</h4>
<p>Dynamic imports let the script load other scripts as needed:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script</span><span class="w"> </span><span class="na">type=</span><span class="s">"module"</span><span class="nt">&gt;</span>
<span class="w">  </span>import('hello.mjs').then(module<span class="w"> </span>=&gt;<span class="w"> </span>{
<span class="w">      </span>module.hello('world');
<span class="w">    </span>});
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>Read more at https://developers.google.com/web/updates/2017/11/dynamic-import</p>
<h2>Node.js require</h2>
<p>The older CJS module style, still widely used in Node.js, is the
<code>module.exports</code>/<code>require</code> system.</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">mymodule</span><span class="o">.</span><span class="n">js</span>
<span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">hello</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s2">"Hello"</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>



<span class="o">//</span><span class="w"> </span><span class="n">server</span><span class="o">.</span><span class="n">js</span>
<span class="k">const</span><span class="w"> </span><span class="n">myModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'./mymodule'</span><span class="p">);</span>
<span class="n">let</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myModule</span><span class="o">.</span><span class="n">hello</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="s2">"Hello"</span>
</pre></div>

<p>There are other ways for JavaScript to include external JavaScript contents in
browsers that do not require preprocessing.</p>
<h2>AJAX Loading</h2>
<p>You could load an additional script with an AJAX call and then use <code>eval</code> to
run it. This is the most straightforward way, but it is limited to your domain
because of the JavaScript sandbox security model. Using <code>eval</code> also opens the
door to bugs, hacks and security issues.</p>
<h2>Fetch Loading</h2>
<p>Like Dynamic Imports you can load one or many scripts with a <code>fetch</code> call
using promises to control order of execution for script dependencies using the
Fetch Inject library:</p>
<div class="code"><pre class="code literal-block">fetchInject([
<span class="w">  </span>'https://cdn.jsdelivr.net/momentjs/2.17.1/moment.min.js'
]).then(()<span class="w"> </span>=&gt;<span class="w"> </span>{
<span class="w">  </span>console.log(`Finish<span class="w"> </span>in<span class="w"> </span>less<span class="w"> </span>than<span class="w"> </span><span class="cp">${</span><span class="n">moment</span><span class="p">()</span><span class="o">.</span><span class="n">endOf</span><span class="p">(</span><span class="s1">'year'</span><span class="p">)</span><span class="o">.</span><span class="n">fromNow</span><span class="p">(</span><span class="n">true</span><span class="p">)</span><span class="cp">}</span>`)
})
</pre></div>

<h2>jQuery Loading</h2>
<p>The jQuery library provides loading functionality in one line:</p>
<div class="code"><pre class="code literal-block"><span class="o">$.</span><span class="n">getScript</span><span class="p">(</span><span class="s2">"my_lovely_script.js"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">alert</span><span class="p">(</span><span class="s2">"Script loaded but not necessarily executed."</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h2>Dynamic Script Loading</h2>
<p>You could add a script tag with the script URL into the HTML. To avoid the
overhead of jQuery, this is an ideal solution.</p>
<p>The script can even reside on a different server. Furthermore, the browser
evaluates the code. The <code>&lt;script&gt;</code> tag can be injected into either the web
page <code>&lt;head&gt;</code>, or inserted just before the closing <code>&lt;/body&gt;</code> tag.</p>
<p>Here is an example of how this could work:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">dynamicallyLoadScript</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"script"</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">DOM</span><span class="w"> </span><span class="n">node</span>
<span class="w">    </span><span class="n">script</span><span class="o">.</span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url</span><span class="p">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">URL</span>

<span class="w">    </span><span class="n">document</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">script</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="p">(</span><span class="n">could</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="s1">'head'</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s1">'body'</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">instead</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<p>This function will add a new <code>&lt;script&gt;</code> tag to the end of the head section of
the page, where the <code>src</code> attribute is set to the URL which is given to the
function as the first parameter.</p>
<p>Both of these solutions are discussed and illustrated in JavaScript Madness:
Dynamic Script Loading.</p>
<h2>Detecting when the script has been executed</h2>
<p>Now, there is a big issue you must know about. Doing that implies that <em>you
remotely load the code</em>. Modern web browsers will load the file and keep
executing your current script because they load everything asynchronously to
improve performance. (This applies to both the jQuery method and the manual
dynamic script loading method.)</p>
<p>It means that if you use these tricks directly, <em>you won't be able to use your
newly loaded code the next line after you asked it to be loaded</em> , because it
will be still loading.</p>
<p>For example: <code>my_lovely_script.js</code> contains <code>MySuperObject</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">js</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"script"</span><span class="p">);</span>

<span class="n">js</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"text/javascript"</span><span class="p">;</span>
<span class="n">js</span><span class="o">.</span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsFilePath</span><span class="p">;</span>

<span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">js</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">MySuperObject</span><span class="p">();</span>

<span class="n">Error</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MySuperObject</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">undefined</span>
</pre></div>

<p>Then you reload the page hitting <code>F5</code>. And it works! Confusing...</p>
<p><strong>So what to do about it ?</strong></p>
<p>Well, you can use the hack the author suggests in the link I gave you. In
summary, for people in a hurry, he uses an event to run a callback function
when the script is loaded. So you can put all the code using the remote
library in the callback function. For example:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="nf">loadScript</span><span class="p">(</span>url, callback<span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Adding</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nb">head</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">suggested</span><span class="w"> </span><span class="n">before</span>
<span class="w">    </span><span class="nb">var</span><span class="w"> </span><span class="nb">head</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">head</span><span class="p">;</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="s">script</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">'script'</span><span class="p">);</span>
<span class="w">    </span><span class="n">script</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">'text/javascript'</span><span class="p">;</span>
<span class="w">    </span><span class="n">script</span><span class="p">.</span><span class="n">src</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">url</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Then</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="k">function</span><span class="p">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="nb">events</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">cross</span><span class="w"> </span><span class="n">browser</span><span class="w"> </span><span class="n">compatibility</span><span class="p">.</span>
<span class="w">    </span><span class="n">script</span><span class="p">.</span><span class="n">onreadystatechange</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">callback</span><span class="p">;</span>
<span class="w">    </span><span class="n">script</span><span class="p">.</span><span class="n">onload</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">callback</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Fire</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">loading</span>
<span class="w">    </span><span class="nb">head</span><span class="p">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">script</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Then you write the code you want to use AFTER the script is loaded in a lambda
function:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myPrettyCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">Here</span><span class="p">,</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">whatever</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span>
<span class="p">};</span>
</pre></div>

<p>Then you run all that:</p>
<div class="code"><pre class="code literal-block"><span class="n">loadScript</span><span class="p">(</span><span class="s2">"my_lovely_script.js"</span><span class="p">,</span><span class="w"> </span><span class="n">myPrettyCode</span><span class="p">);</span>
</pre></div>

<p>Note that the script may execute after the DOM has loaded, or before,
depending on the browser and whether you included the line <code>script.async =
false;</code>. There's a great article on Javascript loading in general which
discusses this.</p>
<h2>Source Code Merge/Preprocessing</h2>
<p>As mentioned at the top of this answer, many developers use
build/transpilation tool(s) like Parcel, Webpack, or Babel in their projects,
allowing them to use upcoming JavaScript syntax, provide backward
compatibility for older browsers, combine files, minify, perform code
splitting etc.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If anyone is looking for something more advanced, try out RequireJS. You'll
get added benefits such as dependency management, better concurrency, and
avoid duplication (that is, retrieving a script more than once).</p>
<p>You can write your JavaScript files in "modules" and then reference them as
dependencies in other scripts. Or you can use RequireJS as a simple "go get
this script" solution.</p>
<p>Example:</p>
<p>Define dependencies as modules:</p>
<p><strong>some-dependency.js</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">define</span><span class="ss">(</span>[<span class="s1">'lib/dependency1'</span>,<span class="w"> </span><span class="s1">'lib/dependency2'</span>],<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="nv">d1</span>,<span class="w"> </span><span class="nv">d2</span><span class="ss">)</span><span class="w"> </span>{

<span class="w">     </span><span class="o">//</span><span class="nv">Your</span><span class="w"> </span><span class="nv">actual</span><span class="w"> </span><span class="nv">script</span><span class="w"> </span><span class="nv">goes</span><span class="w"> </span><span class="nv">here</span>.<span class="w">   </span>
<span class="w">     </span><span class="o">//</span><span class="nv">The</span><span class="w"> </span><span class="nv">dependent</span><span class="w"> </span><span class="nv">scripts</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">fetched</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">necessary</span>.

<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nv">libraryObject</span><span class="c1">;  //For example, jQuery object</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p><strong>implementation.js</strong> is your "main" JavaScript file that depends on <strong>some-
dependency.js</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">require</span><span class="ss">(</span>[<span class="s1">'some-dependency'</span>],<span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">dependency</span><span class="ss">)</span><span class="w"> </span>{

<span class="w">    </span><span class="o">//</span><span class="nv">Your</span><span class="w"> </span><span class="nv">script</span><span class="w"> </span><span class="nv">goes</span><span class="w"> </span><span class="nv">here</span>
<span class="w">    </span><span class="o">//</span><span class="nv">some</span><span class="o">-</span><span class="nv">dependency</span>.<span class="nv">js</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">fetched</span>.<span class="w">   </span>
<span class="w">    </span><span class="o">//</span><span class="k">Then</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">script</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">executed</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Excerpt from the GitHub README:</p>
<blockquote>
<p>RequireJS loads plain JavaScript files as well as more defined modules. It
is optimized for in-browser use, including in a Web Worker, but it can be
used in other JavaScript environments, like Rhino and Node. It implements
the Asynchronous Module API.</p>
<p>RequireJS uses plain script tags to load modules/files, so it should allow
for easy debugging. It can be used simply to load existing JavaScript files,
so <strong>you can add it to your existing project without having to re-write your
JavaScript files.</strong></p>
<p>...</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-post-and-put-in-http/" class="u-url">What is the difference between POST and PUT in HTTP?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-post-and-put-in-http/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T18:31:29+08:00" itemprop="datePublished" title="2023-02-16 18:31">2023-02-16 18:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>Background Information Analysis:</strong></p>
<p>According to RFC 2616, § 9.5, <code>POST</code> is used to <em>create</em> a resource:</p>
<blockquote>
<p>The POST method is used to request that the origin server accept the entity
enclosed in the request as a new subordinate of the resource identified by
the Request-URI in the Request-Line.</p>
</blockquote>
<p>According to RFC 2616, § 9.6, <code>PUT</code> is used to <em>create or replace</em> a resource:</p>
<blockquote>
<p>The PUT method requests that the enclosed entity be stored under the
supplied Request-URI. If the Request-URI refers to an already existing
resource, the enclosed entity SHOULD be considered as a modified version of
the one residing on the origin server. If the Request-URI does not point to
an existing resource, and that URI is capable of being defined as a new
resource by the requesting user agent, the origin server can create the
resource with that URI.</p>
</blockquote>
<p><strong>My Question:</strong></p>
<p>So, which HTTP method should be used to create a resource? Or should both be
supported?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Overall:</strong></p>
<p>Both PUT and POST can be used for creating.</p>
<p>You have to ask, "what are you performing the action upon?", to distinguish
what you should be using. Let's assume you're designing an API for asking
questions. If you want to use POST, then you would do that to a list of
questions. If you want to use PUT, then you would do that to a particular
question.</p>
<p><strong>Great, both can be used, so which one should I use in my RESTful design:</strong></p>
<p>You do not need to support both PUT and POST.</p>
<p>Which you use is up to you. But just remember to use the right one depending
on what object you are referencing in the request.</p>
<p>Some considerations:</p>
<ul>
<li>Do you name the URL objects you create explicitly, or let the server decide? If you name them then use PUT. If you let the server decide then use POST.</li>
<li>PUT is defined to assume idempotency, so if you PUT an object twice, it should have no additional effect. This is a nice property, so I would use PUT when possible. Just make sure that the PUT-idempotency actually is implemented correctly in the server.</li>
<li>You can update or create a resource with PUT with the same object URL</li>
<li>With POST you can have 2 requests coming in at the same time making modifications to a URL, and they may update different parts of the object.</li>
</ul>
<p><strong>An example:</strong></p>
<p>I wrote the following as part of another answer on SO regarding this:</p>
<blockquote>
<p><strong>POST:</strong></p>
<p>Used to modify and update a resource</p>
<div class="code"><pre class="code literal-block"><span class="nf">POST</span> <span class="nn">/questions/&lt;existing_question&gt;</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.example.com/</span>
</pre></div>

<p>Note that the following is an error:</p>
<div class="code"><pre class="code literal-block"><span class="nf">POST</span> <span class="nn">/questions/&lt;new_question&gt;</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.example.com/</span>
</pre></div>

<p>If the URL is not yet created, you should not be using POST to create it
while specifying the name. This should result in a 'resource not found'
error because <code>&lt;new_question&gt;</code> does not exist yet. You should PUT the
<code>&lt;new_question&gt;</code> resource on the server first.</p>
<p>You could though do something like this to create a resources using POST:</p>
<div class="code"><pre class="code literal-block"><span class="nf">POST</span> <span class="nn">/questions</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.example.com/</span>
</pre></div>

<p>Note that in this case the resource name is not specified, the new objects
URL path would be returned to you.</p>
<p><strong>PUT:</strong></p>
<p>Used to create a resource, or overwrite it. While you specify the resources
new URL.</p>
<p>For a new resource:</p>
<div class="code"><pre class="code literal-block"><span class="nf">PUT</span> <span class="nn">/questions/&lt;new_question&gt;</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.example.com/</span>
</pre></div>

<p>To overwrite an existing resource:</p>
<div class="code"><pre class="code literal-block"><span class="nf">PUT</span> <span class="nn">/questions/&lt;existing_question&gt;</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.example.com/</span>
</pre></div>

</blockquote>
<p>Additionally, and a bit more concisely, RFC 7231 Section 4.3.4 PUT states
(emphasis added),</p>
<blockquote>
<p><strong>4.3.4. PUT</strong></p>
<p>The PUT method requests that the state of the target resource be <code>created</code>
or <code>replaced</code> with the state defined by the representation enclosed in the
request message payload.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>You can find assertions on the web that say</p>
<ul>
<li>
<strong>POST</strong> should be used to create a resource, and <strong>PUT</strong> should be used to modify one</li>
<li>
<strong>PUT</strong> should be used to create a resource, and <strong>POST</strong> should be used to modify one</li>
</ul>
<p>Neither is quite right.</p>
<hr>
<p>Better is to choose between PUT and POST based on idempotence of the action.</p>
<p><strong>PUT</strong> implies putting a resource - completely replacing whatever is
available at the given URL with a different thing. By definition, a PUT is
idempotent. Do it as many times as you like, and the result is the same. <code>x=5</code>
is idempotent. You can PUT a resource whether it previously exists, or not
(eg, to Create, or to Update)!</p>
<p><strong>POST</strong> updates a resource, adds a subsidiary resource, or causes a change. A
POST is not idempotent, in the way that <code>x++</code> is not idempotent.</p>
<hr>
<p>By this argument, PUT is for creating when you know the URL of the thing you
will create. POST can be used to create when you know the URL of the "factory"
or manager for the category of things you want to create.</p>
<p>so:</p>
<div class="code"><pre class="code literal-block"><span class="err">POST /expense-report</span>
</pre></div>

<p>or:</p>
<div class="code"><pre class="code literal-block">PUT  /expense-report/10929
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/move-the-most-recent-commit-s-to-a-new-branch-with-git/" class="u-url">Move the most recent commit(s) to a new branch with Git</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/move-the-most-recent-commit-s-to-a-new-branch-with-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T18:31:00+08:00" itemprop="datePublished" title="2023-02-16 18:31">2023-02-16 18:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I move my recent commits on master to a new branch, and reset master to
before those commits were made? e.g. From this:</p>
<div class="code"><pre class="code literal-block">master A - B - C - D - E
</pre></div>

<p>To this:</p>
<div class="code"><pre class="code literal-block">newbranch     C - D - E
             /
master A - B
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h3>Moving to an existing branch</h3>
<p>If you want to move your commits to an <strong>existing branch</strong> , it will look like
this:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">existingbranch</span>
<span class="n">git</span><span class="w"> </span><span class="k">merge</span><span class="w"> </span><span class="n">branchToMoveCommitFrom</span>
<span class="n">git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">branchToMoveCommitFrom</span>
<span class="n">git</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="o">--</span><span class="n">hard</span><span class="w"> </span><span class="n">HEAD</span><span class="o">~</span><span class="mi">3</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="k">Go</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">commits</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="o">*</span><span class="n">will</span><span class="o">*</span><span class="w"> </span><span class="n">lose</span><span class="w"> </span><span class="n">uncommitted</span><span class="w"> </span><span class="k">work</span><span class="p">.</span>
<span class="n">git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">existingbranch</span>
</pre></div>

<p>You can store uncommitted edits to your stash before doing this, using <code>git
stash</code>. Once complete, you can retrieve the stashed uncommitted edits with
<code>git stash pop</code></p>
<h3>Moving to a new branch</h3>
<p><strong>WARNING:</strong> This method works because you are creating a new branch with the
first command: <code>git branch newbranch</code>. If you want to move commits to an
<strong>existing branch</strong> you need to merge your changes into the existing branch
before executing <code>git reset --hard HEAD~3</code> (see <em><strong>Moving to an existing
branch</strong></em> above). <strong>If you don't merge your changes first, they will be
lost.</strong></p>
<p>Unless there are other circumstances involved, this can be easily done by
branching and rolling back.</p>
<div class="code"><pre class="code literal-block"><span class="err">#</span><span class="w"> </span><span class="nl">Note</span><span class="p">:</span><span class="w"> </span><span class="ow">Any</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">committed</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">lost</span><span class="p">.</span>
<span class="n">git</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="n">newbranch</span><span class="w">      </span><span class="err">#</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">branch</span><span class="p">,</span><span class="w"> </span><span class="n">saving</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="n">commits</span>
<span class="n">git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">master</span><span class="w">       </span><span class="err">#</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">master</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">go</span><span class="w"> </span><span class="n">back</span>
<span class="n">git</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="o">--</span><span class="n">hard</span><span class="w"> </span><span class="n">HEAD</span><span class="o">~</span><span class="mi">3</span><span class="w">   </span><span class="err">#</span><span class="w"> </span><span class="n">Move</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">commits</span><span class="w"> </span><span class="p">(</span><span class="n">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">commits</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">go</span><span class="w"> </span><span class="n">back</span><span class="p">)</span>
<span class="n">git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">newbranch</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="k">Go</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="n">commits</span>
</pre></div>

<p>But do make sure how many commits to go back. Alternatively, you can instead
of <code>HEAD~3</code>, simply provide the hash of the commit (or the reference like
<em>origin/master</em> ) you want to "revert back to" on the <em>master</em> (/current)
branch, e.g:</p>
<div class="code"><pre class="code literal-block">git reset --hard a1b2c3d4
</pre></div>

<p><em>1 You will </em><em>only</em>* be "losing" commits from the master branch, but don't worry, you'll have those commits in newbranch!</p>
<p>Lastly, you may need to force push your latest changes to main repo:</p>
<div class="code"><pre class="code literal-block">git push origin master --force
</pre></div>

<p><strong>WARNING:</strong> With Git version 2.0 and later, if you later <code>git rebase</code> the new
branch upon the original (<code>master</code>) branch, you may need an explicit <code>--no-
fork-point</code> option during the rebase to avoid losing the carried-over commits.
Having <code>branch.autosetuprebase always</code> set makes this more likely. See John
Mellor's answer for details.</p>
<p><br></p>
<h3>Suggest</h3>
<p>For those wondering why it works (as I was at first):</p>
<p>You want to go back to C, and move D and E to the new branch. Here's what it
looks like at first:</p>
<div class="code"><pre class="code literal-block">A-B-C-D-E (HEAD)
        ↑
      master
</pre></div>

<p>After <code>git branch newBranch</code>:</p>
<div class="code"><pre class="code literal-block">    newBranch
        ↓
A-B-C-D-E (HEAD)
        ↑
      master
</pre></div>

<p>After <code>git reset --hard HEAD~2</code>:</p>
<div class="code"><pre class="code literal-block">    newBranch
        ↓
A-B-C-D-E (HEAD)
    ↑
  master
</pre></div>

<p>Since a branch is just a pointer, <em>master</em> pointed to the last commit. When
you made <em>newBranch</em> , you simply made a new pointer to the last commit. Then
using <code>git reset</code> you moved the <em>master</em> pointer back two commits. But since
you didn't move <em>newBranch</em> , it still points to the commit it originally did.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-14.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-12.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
