<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1516) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1516.html">
<link rel="prev" href="index-1517.html" type="text/html">
<link rel="next" href="index-1515.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-difference-between-casting-to-interface-and-to-a-contract-instance/" class="u-url">Is there a difference between casting to Interface and to a contract instance?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-difference-between-casting-to-interface-and-to-a-contract-instance/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T05:37:26+08:00" itemprop="datePublished" title="2023-02-28 05:37">2023-02-28 05:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In solidity, most smart contracts cast external contract calls to interfaces
(IERC20 vs. ERC20). Is there any difference casting between the two?</p>
<p>For example, if I write</p>
<p><code>IERC20 Token = IERC20(tokenContractAddress);</code></p>
<p>Is there any functional difference to</p>
<p><code>ERC20 Token = ERC20(tokenContractAddress);</code>?</p>
<p>Just curious if there are factors to consider in terms of gas costs,
compatibility issues, etc. Thanks!</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you just want to access the functions, you can use either. But in
interfaces you cannot have state variables so if you need some state variables
you cast to contract.</p>
<p>Also interfaces cannot inherit other contracts or interfaces. Maybe the
contract is inheriting from contractB and in your contract you want to access
to contractB.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-current-block-number-in-paritytech-parity/" class="u-url">Get current block number in `paritytech/parity`</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-current-block-number-in-paritytech-parity/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T05:37:05+08:00" itemprop="datePublished" title="2023-02-28 05:37">2023-02-28 05:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Parity UI displays current block number at the bottom, but if UI is not
enabled, then how do we find the current block number?</p>
<p>Is there a way to find current block number</p>
<ul>
<li>using JSONRPC ?</li>
<li>Is it stored somewhere in basepath?</li>
</ul>
<p><strong>Note:</strong> If anyone can find proper tags, please update it! Currently there is
no tag for <code>parity</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can get the latest block number over rpc by calling the 'eth_blockNumber'
method.</p>
<p>From the JSON RPC docs:</p>
<blockquote>
<p>Returns the number of most recent block.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Request</span>
<span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">X</span><span class="w"> </span><span class="n">POST</span><span class="w"> </span><span class="o">--</span><span class="n">data</span>
</pre></div>

<p>'{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":83}'</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Result</span>
<span class="p">{</span>
<span class="w">  </span><span class="s">"id"</span><span class="p">:</span><span class="mi">83</span><span class="p">,</span>
<span class="w">  </span><span class="s">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s">"2.0"</span><span class="p">,</span>
<span class="w">  </span><span class="s">"result"</span><span class="p">:</span><span class="w"> </span><span class="s">"0x4b7"</span><span class="w"> </span><span class="c1">// 1207</span>
<span class="p">}</span>
</pre></div>

</blockquote>
<hr>
<p>There are other, higher level APIs that you might be interested in, like
web3.js or web3.py. They both allow you to use <code>web3.eth.blockNumber</code> to get
the latest block number, and generally work in native types rather than hex
strings.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Using the answer posted by @carver I was able to get only the current block
number in decimal form, my RPC port is 8545(default):</p>
<div class="code"><pre class="code literal-block">echo $((`curl --data '{"method":"eth_blockNumber","params":[],"id":1,"jsonrpc":"2.0"}' -H "Content-Type: application/json" -X POST localhost:8545 | grep -oh "\w*0x\w*"`))
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/implement-inter-channel-security-among-the-peers-within-the-same-channel-in-hyperledger-fabric-v1-0/" class="u-url">Implement inter-channel security among the peers within the same channel in Hyperledger Fabric V1.0</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/implement-inter-channel-security-among-the-peers-within-the-same-channel-in-hyperledger-fabric-v1-0/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T05:36:48+08:00" itemprop="datePublished" title="2023-02-28 05:36">2023-02-28 05:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have successfully create a Hyperledger Fabric v1.0 network locally by
following the steps Building Your First Network and communicating to this
network from my java application using fabric-sdk-java.<br>
Here it created the certificates using <strong>cryptogen</strong> tools and is able to
invoke/query chaincode through each of the peers which participating in the
same channel.</p>
<p>My implementations is like:<br>
I have four organisations Org1, Org2, Org3 and Org4 each having one peer. When
Org1 creating an asset A1 with quantity 100 using the chaincode C1, it has to
share this asset among the peers like</p>
<blockquote>
<p>Org2.peer0 A1: with quantity 40<br>
Org3.peer0 A1: with quantity 30<br>
Org4.peer0 A1: with quatity 20<br>
And remaining 10 only will be available for Org1.peer0</p>
</blockquote>
<p>All these peers joined in the same channel <strong>channel1</strong>. My requirement is</p>
<blockquote>
<p>If Org1 try to query the data for Org2 : error<br>
If Org1 try to query its own data: return the Asset with the corresponding
quantity.</p>
</blockquote>
<p>Currently it is allowing to query all the data from all peers in the channel.
In order to keep it hide the asset of one organisation from other, what is the
best possible way?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I think that the source of your confusion due to the fact that you mixing the
application logic with the business contracts logic which is usually
implemented in chaincode.</p>
<p>Say you would like to establish Fabric network among 4 different parties and
you need to define a rule which defines how you will split/distributed the
asset among those participants. Now, let's put aside the peers. In your
chaincode you encode notion of the asset and probably the notion of the users
to avoid confusion let's call them persons. So you have 4 persons: Alice, Bob,
Charlie and John and business rule which says that once Alice submit an asset
it has to be distributed according to 40%, 30%, 20% and 10% respectively.</p>
<p>Next, to continue with say Alice works at Org1, Bob at Org2, Charlie at Org3
and John from Org4. Now you can implement a chaincode which will apply
business rule based on whoever submits the transaction. Moreover you can
implement ACL based on the submitter identity, hence to prevent from Bob query
for balance of the let's say John.</p>
<p>The legitimate question will be why do I need 4 peers to implement such simple
logic. As you can have only one peer with chaincode deployed, channel which
configured for all 4 orgs and all you need is to send transactions proposal to
invoke the chaincode.</p>
<p>The caveat in this approach is pretty obvious you need to decide which org
will host and run this peer and the chaincode, therefore as all 4 orgs doesn't
really trust each other they would like to host they own peer and invoke
chaincode against theirs own peers. And in order to prevent each org to trick
each other and reduce the influence of adversarial/non-deterministic behavior
they will agree on endorsement policies which actually will make sure that
peers of other orgs also receives same results as you during the simulation.</p>
<p>Now back to your question, peers are used to simulate transaction against
current state and sign on the results, send results back to the client which
aggregates endorsements based on policies and submits results to the ordering
service which cuts blocks and deliver them to the peers, which will validate
correctness of transactions in the block and eventually commit them to the
ledger updating state.</p>
<p>Therefore your chaincode should encode notion of clients/users/persons among
which you will distribute assets, those users could be mapped back to the
client application (real world users), which might be enrolled into different
organizations, hence having different certificates signed by appropriate org
CA. Finally you will be able to leverage <code>GetCreator</code> API of the chaincode to
understand which client invoked the chaincode and apply business logic and
access control based on business logic you defined.</p>
<p>Sorry for making my answer too long, but to summarize. Your
application/service will be based on two tiers: first one is the application
tier - mapped to the user of org, second tier is the peer which holds the
ledger and deployed chaincode - to simulate and execute transactions. Hence
you will have 4 peers and 4 clients which will submit transaction to the peers
and your logic will be based on the client identities rather on the peers.</p>
<p>Hope my explanation will make sense to you ;)</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1517.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1515.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
