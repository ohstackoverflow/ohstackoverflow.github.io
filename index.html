<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/">
<link rel="next" href="index-2865.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/capture-image-from-camera-and-display-in-activity/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/capture-image-from-camera-and-display-in-activity/" class="u-url">Capture Image from Camera and Display in Activity</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/capture-image-from-camera-and-display-in-activity/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T23:50:13+08:00" itemprop="datePublished" title="2023-03-05 23:50">2023-03-05 23:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to write a module where on a click of a button the camera opens and I
can click and capture an image. If I don't like the image I can delete it and
click one more image and then select the image and it should return back and
display that image in the activity.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's an example activity that will launch the camera app and then retrieve
the image and display it.</p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">edu</span><span class="o">.</span><span class="n">gvsu</span><span class="o">.</span><span class="n">cis</span><span class="o">.</span><span class="n">masl</span><span class="o">.</span><span class="n">camerademo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.graphics.Bitmap</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Button</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.widget.ImageView</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">MyCameraActivity</span> <span class="n">extends</span> <span class="n">Activity</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">static</span> <span class="n">final</span> <span class="nb">int</span> <span class="n">CAMERA_REQUEST</span> <span class="o">=</span> <span class="mi">1888</span><span class="p">;</span> 
    <span class="n">private</span> <span class="n">ImageView</span> <span class="n">imageView</span><span class="p">;</span>

    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
        <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">main</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">imageView</span> <span class="o">=</span> <span class="p">(</span><span class="n">ImageView</span><span class="p">)</span><span class="n">this</span><span class="o">.</span><span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">imageView1</span><span class="p">);</span>
        <span class="n">Button</span> <span class="n">photoButton</span> <span class="o">=</span> <span class="p">(</span><span class="n">Button</span><span class="p">)</span> <span class="n">this</span><span class="o">.</span><span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">button1</span><span class="p">);</span>
        <span class="n">photoButton</span><span class="o">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">new</span> <span class="n">View</span><span class="o">.</span><span class="n">OnClickListener</span><span class="p">()</span> <span class="p">{</span>

            <span class="nd">@Override</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">onClick</span><span class="p">(</span><span class="n">View</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">Intent</span> <span class="n">cameraIntent</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Intent</span><span class="p">(</span><span class="n">android</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">MediaStore</span><span class="o">.</span><span class="n">ACTION_IMAGE_CAPTURE</span><span class="p">);</span> 
                <span class="n">startActivityForResult</span><span class="p">(</span><span class="n">cameraIntent</span><span class="p">,</span> <span class="n">CAMERA_REQUEST</span><span class="p">);</span> 
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="n">protected</span> <span class="n">void</span> <span class="n">onActivityResult</span><span class="p">(</span><span class="nb">int</span> <span class="n">requestCode</span><span class="p">,</span> <span class="nb">int</span> <span class="n">resultCode</span><span class="p">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>  
        <span class="k">if</span> <span class="p">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">CAMERA_REQUEST</span> <span class="o">&amp;&amp;</span> <span class="n">resultCode</span> <span class="o">==</span> <span class="n">Activity</span><span class="o">.</span><span class="n">RESULT_OK</span><span class="p">)</span> <span class="p">{</span>  
            <span class="n">Bitmap</span> <span class="n">photo</span> <span class="o">=</span> <span class="p">(</span><span class="n">Bitmap</span><span class="p">)</span> <span class="n">data</span><span class="o">.</span><span class="n">getExtras</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"data"</span><span class="p">);</span> 
            <span class="n">imageView</span><span class="o">.</span><span class="n">setImageBitmap</span><span class="p">(</span><span class="n">photo</span><span class="p">);</span>
        <span class="p">}</span>  
    <span class="p">}</span> 
<span class="p">}</span>
</pre></div>

<p>Note that the camera app itself gives you the ability to review/retake the
image, and once an image is accepted, the activity displays it.</p>
<p>Here is the layout that the above activity uses. It is simply a LinearLayout
containing a Button with id button1 and an ImageView with id imageview1:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">android:orientation=</span><span class="s">"vertical"</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"fill_parent"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"fill_parent"</span>
<span class="w">    </span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Button</span><span class="w"> </span><span class="na">android:id=</span><span class="s">"@+id/button1"</span><span class="w"> </span><span class="na">android:layout_width=</span><span class="s">"wrap_content"</span><span class="w"> </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="w"> </span><span class="na">android:text=</span><span class="s">"@string/photo"</span><span class="nt">&gt;&lt;/Button&gt;</span>
<span class="w">    </span><span class="nt">&lt;ImageView</span><span class="w"> </span><span class="na">android:id=</span><span class="s">"@+id/imageView1"</span><span class="w"> </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="w"> </span><span class="na">android:src=</span><span class="s">"@drawable/icon"</span><span class="w"> </span><span class="na">android:layout_width=</span><span class="s">"wrap_content"</span><span class="nt">&gt;&lt;/ImageView&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

<p>And one final detail, be sure to add:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;uses-feature</span><span class="w"> </span><span class="na">android:name=</span><span class="s">"android.hardware.camera"</span><span class="nt">&gt;&lt;/uses-feature&gt;</span>
</pre></div>

<p>and if camera is optional to your app functionality. make sure to set require
to false in the permission. like this</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;uses-feature</span><span class="w"> </span><span class="na">android:name=</span><span class="s">"android.hardware.camera"</span><span class="w"> </span><span class="na">android:required=</span><span class="s">"false"</span><span class="nt">&gt;&lt;/uses-feature&gt;</span>
</pre></div>

<p>to your manifest.xml.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Update (2020)</h2>
<p>Google has added a new <code>ActivityResultRegistry</code> API that <em>"lets you handle
the<code>startActivityForResult()</code> + <code>onActivityResult()</code> as well as
<code>requestPermissions()</code> + <code>onRequestPermissionsResult()</code> flows without
overriding methods in your Activity or Fragment, brings increased type safety
via <code>ActivityResultContract</code>, and provides hooks for testing these flows"</em> -
source.</p>
<p>The API was added in androidx.activity 1.2.0-alpha02 and androidx.fragment
1.3.0-alpha02.</p>
<p>So you are now able to do something like:</p>
<div class="code"><pre class="code literal-block">val<span class="w"> </span>takePicture<span class="w"> </span>=<span class="w"> </span>registerForActivityResult(ActivityResultContracts.TakePicture())<span class="w"> </span>{<span class="w"> </span>success:<span class="w"> </span>Boolean<span class="w"> </span>-&gt;
<span class="w">    </span>if<span class="w"> </span>(success)<span class="w"> </span>{
<span class="w">        </span>//<span class="w"> </span>The<span class="w"> </span>image<span class="w"> </span>was<span class="w"> </span>saved<span class="w"> </span>into<span class="w"> </span>the<span class="w"> </span>given<span class="w"> </span>Uri<span class="w"> </span>-&gt;<span class="w"> </span>do<span class="w"> </span>something<span class="w"> </span>with<span class="w"> </span>it
<span class="w">    </span>}
}

val<span class="w"> </span>imageUri:<span class="w"> </span>Uri<span class="w"> </span>=<span class="w"> </span>...
button.setOnClickListener<span class="w"> </span>{
<span class="w">    </span>takePicture.launch(imageUri)
}
</pre></div>

<p>Take a look at the documentation to learn how to use the new Activity result
API: https://developer.android.com/training/basics/intents/result#kotlin</p>
<p>There are many built-in ActivityResultContracts that allow you to do different
things like pick contacts, request permissions, take pictures or take videos.
You are probably interested in the ActivityResultContracts.TakePicture shown
above.</p>
<p>Note that androidx.fragment 1.3.0-alpha04 deprecates the
<code>startActivityForResult()</code> + <code>onActivityResult()</code> and <code>requestPermissions()</code>
+ <code>onRequestPermissionsResult()</code> APIs on Fragment. Hence it seems that
<code>ActivityResultContracts</code> is the new way to do things from now on.</p>
<hr>
<h2>Original answer (2015)</h2>
<p>It took me some hours to get this working. The code it's almost a copy-paste
from developer.android.com, with a minor difference.</p>
<p>Request this permission on the <code>AndroidManifest.xml</code>:</p>
<div class="code"><pre class="code literal-block">&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;
</pre></div>

<p>On your <code>Activity</code>, start by defining this:</p>
<div class="code"><pre class="code literal-block">static final int REQUEST_IMAGE_CAPTURE = 1;
private Bitmap mImageBitmap;
private String mCurrentPhotoPath;
private ImageView mImageView;
</pre></div>

<p>Then fire this <code>Intent</code> in an <code>onClick</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">Intent</span><span class="w"> </span><span class="n">cameraIntent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="n">MediaStore</span><span class="p">.</span><span class="n">ACTION_IMAGE_CAPTURE</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cameraIntent</span><span class="p">.</span><span class="n">resolveActivity</span><span class="p">(</span><span class="n">getPackageManager</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">File</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">photo</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="k">go</span>
<span class="w">    </span><span class="k">File</span><span class="w"> </span><span class="n">photoFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">photoFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createImageFile</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">occurred</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">File</span>
<span class="w">        </span><span class="nf">Log</span><span class="p">.</span><span class="n">i</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="ss">"IOException"</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">Continue</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">File</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">created</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">photoFile</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">cameraIntent</span><span class="p">.</span><span class="n">putExtra</span><span class="p">(</span><span class="n">MediaStore</span><span class="p">.</span><span class="n">EXTRA_OUTPUT</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="n">fromFile</span><span class="p">(</span><span class="n">photoFile</span><span class="p">));</span>
<span class="w">        </span><span class="n">startActivityForResult</span><span class="p">(</span><span class="n">cameraIntent</span><span class="p">,</span><span class="w"> </span><span class="n">REQUEST_IMAGE_CAPTURE</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>Add the following support method:</p>
<div class="code"><pre class="code literal-block"><span class="nt">private</span><span class="w"> </span><span class="nt">File</span><span class="w"> </span><span class="nt">createImageFile</span><span class="o">()</span><span class="w"> </span><span class="nt">throws</span><span class="w"> </span><span class="nt">IOException</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">Create</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">image</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">name</span>
<span class="w">    </span><span class="err">String</span><span class="w"> </span><span class="err">timeStamp</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">new</span><span class="w"> </span><span class="err">SimpleDateFormat("yyyyMMdd_HHmmss").format(new</span><span class="w"> </span><span class="err">Date())</span><span class="p">;</span>
<span class="w">    </span><span class="err">String</span><span class="w"> </span><span class="err">imageFileName</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">"JPEG_"</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">timeStamp</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">"_"</span><span class="p">;</span>
<span class="w">    </span><span class="err">File</span><span class="w"> </span><span class="err">storageDir</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">Environment.getExternalStoragePublicDirectory(</span>
<span class="w">            </span><span class="err">Environment.DIRECTORY_PICTURES)</span><span class="p">;</span>
<span class="w">    </span><span class="err">File</span><span class="w"> </span><span class="err">image</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">File.createTempFile(</span>
<span class="w">            </span><span class="err">imageFileName,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">prefix</span>
<span class="w">            </span><span class="err">".jpg",</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">suffix</span>
<span class="w">            </span><span class="err">storageDir</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">directory</span>
<span class="w">    </span><span class="err">)</span><span class="p">;</span>

<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">Save</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="n">file</span><span class="p">:</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ACTION_VIEW</span><span class="w"> </span><span class="n">intents</span>
<span class="w">    </span><span class="n">mCurrentPhotoPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"file:"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="nf">getAbsolutePath</span><span class="p">();</span>
<span class="w">    </span><span class="err">return</span><span class="w"> </span><span class="err">image</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Then receive the result:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Override</span>
<span class="n">protected</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onActivityResult</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">Intent</span><span class="w"> </span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">requestCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">REQUEST_IMAGE_CAPTURE</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">resultCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RESULT_OK</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">mImageBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MediaStore</span><span class="p">.</span><span class="n">Images</span><span class="p">.</span><span class="n">Media</span><span class="p">.</span><span class="n">getBitmap</span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">getContentResolver</span><span class="p">(),</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">mCurrentPhotoPath</span><span class="p">));</span>
<span class="w">            </span><span class="n">mImageView</span><span class="p">.</span><span class="n">setImageBitmap</span><span class="p">(</span><span class="n">mImageBitmap</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="n">printStackTrace</span><span class="p">();</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>What made it work is the
<code>MediaStore.Images.Media.getBitmap(this.getContentResolver(),
Uri.parse(mCurrentPhotoPath))</code>, which is different from the code from
developer.android.com. The original code gave me a <code>FileNotFoundException</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-private-and-protected-members-of-c-classes/" class="u-url">What is the difference between private and protected members of C++ classes?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-private-and-protected-members-of-c-classes/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T23:48:28+08:00" itemprop="datePublished" title="2023-03-05 23:48">2023-03-05 23:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between <code>private</code> and <code>protected</code> members in C++
classes?</p>
<p>I understand from best practice conventions that variables and functions which
are not called outside the class should be made <code>private</code>—but looking at my
MFC project, MFC seems to favor <code>protected</code>.</p>
<p>What's the difference and which should I use?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Private members are only accessible within the class defining them.</p>
<p>Protected members are accessible in the class that defines them and in classes
that inherit from that class.</p>
<p>Edit: Both are also accessible by friends of their class, and in the case of
protected members, by friends of their derived classes.</p>
<p>Edit 2: Use whatever makes sense in the context of your problem. You should
try to make members private whenever you can to reduce coupling and protect
the implementation of the base class, but if that's not possible then use
protected members. Check C++ FAQ for a better understanding of the issue. This
question about protected variables might also help.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Public</strong> members of a class A are accessible for all and everyone.</p>
<p><strong>Protected</strong> members of a class A are not accessible outside of A's code, but
is accessible from the code of any class derived from A.</p>
<p><strong>Private</strong> members of a class A are not accessible outside of A's code, or
from the code of any class derived from A.</p>
<p>So, in the end, choosing between protected or private is answering the
following questions: <strong>How much trust are you willing to put into the
programmer of the derived class?</strong></p>
<p><strong>By default</strong> , assume the derived class is not to be trusted, and <strong>make
your members private</strong>. If you have a very good reason to give free access of
the mother class' internals to its derived classes, then you can make them
protected.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/redirecting-to-url-in-flask/" class="u-url">Redirecting to URL in Flask</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/redirecting-to-url-in-flask/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T23:47:02+08:00" itemprop="datePublished" title="2023-03-05 23:47">2023-03-05 23:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to do the equivalent of <code>Response.redirect</code> as in C# - i.e.:
redirect to a specific URL - how do I go about this?</p>
<p>Here is my code:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">'Hello World!'</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="c1"># Bind to PORT if defined, otherwise default to 5000.</span>
    <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'PORT'</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">'0.0.0.0'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You have to return a redirect:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span><span class="n">redirect</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">"http://www.example.com"</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">302</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="c1"># Bind to PORT if defined, otherwise default to 5000.</span>
    <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'PORT'</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">'0.0.0.0'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
</pre></div>

<p>See the documentation on flask docs. The default value for code is 302 so
<code>code=302</code> can be omitted or replaced by other redirect code (one in 301, 302,
303, 305, and 307).</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/usr/bin/env python</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><span class="c1"># -*- coding: utf-8 -*-</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="kn">import</span> <span class="nn">os</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code>    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/foo'</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code>    <span class="k">return</span> <span class="s1">'Hello Foo!'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code>    <span class="c1"># Bind to PORT if defined, otherwise default to 5000.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-19"><code data-line-number="19"></code></a></td>
<td class="code"><code>    <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'PORT'</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/redirecting-to-url-in-flask/#-20"><code data-line-number="20"></code></a></td>
<td class="code"><code>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">'0.0.0.0'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
</code></td>
</tr>
</table></div>
<p>Take a look at the example in the documentation.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-2865.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
