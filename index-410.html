<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 410) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-410.html">
<link rel="prev" href="index-411.html" type="text/html">
<link rel="next" href="index-409.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/stringbuilder-vs-string-concatenation-in-tostring-in-java/" class="u-url">StringBuilder vs String concatenation in toString() in Java</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/stringbuilder-vs-string-concatenation-in-tostring-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:08:42+08:00" itemprop="datePublished" title="2023-02-17 06:08">2023-02-17 06:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Given the 2 <code>toString()</code> implementations below, which one is preferred:</p>
<div class="code"><pre class="code literal-block"><span class="nt">public</span><span class="w"> </span><span class="nt">String</span><span class="w"> </span><span class="nt">toString</span><span class="o">()</span><span class="p">{</span>
<span class="w">    </span><span class="err">return</span><span class="w"> </span><span class="err">"{</span><span class="n">a</span><span class="p">:</span><span class="s2">"+ a + "</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">:</span><span class="s2">" + b + "</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="o">:</span><span class="w"> </span><span class="s2">" + c +"</span><span class="p">}</span><span class="err">"</span><span class="o">;</span>
<span class="err">}</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="nt">public</span><span class="w"> </span><span class="nt">String</span><span class="w"> </span><span class="nt">toString</span><span class="o">()</span><span class="p">{</span>
<span class="w">    </span><span class="err">StringBuilder</span><span class="w"> </span><span class="err">sb</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">new</span><span class="w"> </span><span class="err">StringBuilder(100)</span><span class="p">;</span>
<span class="w">    </span><span class="err">return</span><span class="w"> </span><span class="err">sb.append("{</span><span class="n">a</span><span class="p">:</span><span class="s2">").append(a)</span>
<span class="s2">          .append("</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">:</span><span class="s2">").append(b)</span>
<span class="s2">          .append("</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="o">:</span><span class="s2">").append(c)</span>
<span class="s2">          .append("</span><span class="p">}</span><span class="err">"</span><span class="o">)</span>
<span class="w">          </span><span class="p">.</span><span class="nc">toString</span><span class="o">();</span>
<span class="err">}</span>
</pre></div>

<p>?</p>
<p>More importantly, given we have only 3 properties it might not make a
difference, but at what point would you switch from <code>+</code> concat to
<code>StringBuilder</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Version 1 is preferable because it is shorter and the compiler will in fact
turn it into version 2 - no performance difference whatsoever.</p>
<blockquote>
<p>More importantly given we have only 3 properties it might not make a
difference, but at what point do you switch from concat to builder?</p>
</blockquote>
<p>At the point where you're concatenating in a loop - that's usually when the
compiler can't substitute <code>StringBuilder</code> by itself.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The key is whether you are writing a single concatenation all in one place or
accumulating it over time.</p>
<p>For the example you gave, there's no point in explicitly using StringBuilder.
(Look at the compiled code for your first case.)</p>
<p>But if you are building a string e.g. inside a loop, use StringBuilder.</p>
<p>To clarify, assuming that hugeArray contains thousands of strings, code like
this:</p>
<div class="code"><pre class="code literal-block">...
<span class="nv">String</span><span class="w"> </span><span class="nb">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="c1">;</span>
<span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">String</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span>:<span class="w"> </span><span class="nv">hugeArray</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nb">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">result</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">s</span><span class="c1">;</span>
}
</pre></div>

<p>is very time- and memory-wasteful compared with:</p>
<div class="code"><pre class="code literal-block">...
<span class="nv">StringBuilder</span><span class="w"> </span><span class="nv">sb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">StringBuilder</span><span class="ss">()</span><span class="c1">;</span>
<span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">String</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span>:<span class="w"> </span><span class="nv">hugeArray</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">sb</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span><span class="c1">;</span>
}
<span class="nv">String</span><span class="w"> </span><span class="nb">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">sb</span>.<span class="nv">toString</span><span class="ss">()</span><span class="c1">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/randomize-a-list-t/" class="u-url">Randomize a List&lt;T&gt;</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/randomize-a-list-t/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:08:13+08:00" itemprop="datePublished" title="2023-02-17 06:08">2023-02-17 06:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the best way to randomize the order of a generic list in C#? I've got
a finite set of 75 numbers in a list I would like to assign a random order to,
in order to draw them for a lottery type application.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Shuffle any <code>(I)List</code> with an extension method based on the Fisher-Yates
shuffle:</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Random</span><span class="w"> </span><span class="n">rng</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">();</span>

<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">Shuffle</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">this</span><span class="w"> </span><span class="n">IList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="p">)</span><span class="w">  </span>
<span class="err">{</span><span class="w">  </span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="nf">Count</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w">  </span>
<span class="w">        </span><span class="n">n</span><span class="o">--</span><span class="p">;</span><span class="w">  </span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rng</span><span class="p">.</span><span class="k">Next</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span>
<span class="w">        </span><span class="n">T</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">;</span><span class="w">  </span>
<span class="w">        </span><span class="n">list</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="p">;</span><span class="w">  </span>
<span class="w">        </span><span class="n">list</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="err">}</span><span class="w">  </span>
<span class="err">}</span>
</pre></div>

<p>Usage:</p>
<div class="code"><pre class="code literal-block">List&lt;Product&gt; products = GetProducts();
products.Shuffle();
</pre></div>

<p>The code above uses the much criticised System.Random method to select swap
candidates. It's fast but not as random as it should be. If you need a better
quality of randomness in your shuffles use the random number generator in
System.Security.Cryptography like so:</p>
<div class="code"><pre class="code literal-block"><span class="k">using</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">;</span>
<span class="p">...</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">Shuffle</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">this</span><span class="w"> </span><span class="n">IList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="p">)</span>
<span class="err">{</span>
<span class="w">    </span><span class="n">RNGCryptoServiceProvider</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RNGCryptoServiceProvider</span><span class="p">();</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="nf">Count</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">        </span><span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">byte</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">do</span><span class="w"> </span><span class="n">provider</span><span class="p">.</span><span class="n">GetBytes</span><span class="p">(</span><span class="n">box</span><span class="p">);</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="p">(</span><span class="n">box</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Byte</span><span class="p">.</span><span class="n">MaxValue</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">n</span><span class="p">)));</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">box</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
<span class="w">        </span><span class="n">n</span><span class="o">--</span><span class="p">;</span>
<span class="w">        </span><span class="n">T</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">list</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">list</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>A simple comparison is available at this blog (WayBack Machine).</p>
<p>Edit: Since writing this answer a couple years back, many people have
commented or written to me, to point out the big silly flaw in my comparison.
They are of course right. There's nothing wrong with System.Random if it's
used in the way it was intended. In my first example above, I instantiate the
rng variable inside of the Shuffle method, which is asking for trouble if the
method is going to be called repeatedly. Below is a fixed, full example based
on a really useful comment received today from @weston here on SO.</p>
<p>Program.cs:</p>
<div class="code"><pre class="code literal-block"><span class="k">using</span><span class="w"> </span><span class="k">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="n">Collections</span><span class="p">.</span><span class="n">Generic</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">;</span>

<span class="n">namespace</span><span class="w"> </span><span class="n">SimpleLottery</span>
<span class="err">{</span>
<span class="w">  </span><span class="k">class</span><span class="w"> </span><span class="n">Program</span>
<span class="w">  </span><span class="err">{</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">Main</span><span class="p">(</span><span class="n">string</span><span class="err">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">      </span><span class="nf">var</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nc">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Enumerable</span><span class="p">.</span><span class="k">Range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">75</span><span class="p">));</span>
<span class="w">      </span><span class="n">numbers</span><span class="p">.</span><span class="n">Shuffle</span><span class="p">();</span>
<span class="w">      </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="ss">"The winning numbers are: {0}"</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">.</span><span class="k">Join</span><span class="p">(</span><span class="ss">",  "</span><span class="p">,</span><span class="w"> </span><span class="n">numbers</span><span class="p">.</span><span class="n">GetRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)));</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">  </span><span class="err">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">ThreadSafeRandom</span>
<span class="w">  </span><span class="err">{</span>
<span class="w">      </span><span class="o">[</span><span class="n">ThreadStatic</span><span class="o">]</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Random</span><span class="w"> </span><span class="k">Local</span><span class="p">;</span>

<span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Random</span><span class="w"> </span><span class="n">ThisThreadsRandom</span>
<span class="w">      </span><span class="err">{</span>
<span class="w">          </span><span class="k">get</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">Local</span><span class="w"> </span><span class="vm">??</span><span class="w"> </span><span class="p">(</span><span class="k">Local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="n">unchecked</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">TickCount</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">31</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="n">CurrentThread</span><span class="p">.</span><span class="n">ManagedThreadId</span><span class="p">)));</span><span class="w"> </span><span class="err">}</span>
<span class="w">      </span><span class="err">}</span>
<span class="w">  </span><span class="err">}</span>

<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyExtensions</span>
<span class="w">  </span><span class="err">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">Shuffle</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">this</span><span class="w"> </span><span class="n">IList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="p">)</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">      </span><span class="nc">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="nf">Count</span><span class="p">;</span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">      </span><span class="err">{</span>
<span class="w">        </span><span class="n">n</span><span class="o">--</span><span class="p">;</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ThreadSafeRandom</span><span class="p">.</span><span class="n">ThisThreadsRandom</span><span class="p">.</span><span class="k">Next</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">T</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">list</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">list</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span>
<span class="w">      </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">  </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If we only need to shuffle items in a completely random order (just to mix the
items in a list), I prefer this simple yet effective code that orders items by
guid...</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">shuffledcards</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cards</span><span class="o">.</span><span class="n">OrderBy</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Guid</span><span class="o">.</span><span class="n">NewGuid</span><span class="p">())</span><span class="o">.</span><span class="n">ToList</span><span class="p">();</span>
</pre></div>

<hr>
<p>As people have pointed out in the comments, GUIDs are not guaranteed to be
random, so we should be using a real random number generator instead:</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Random</span><span class="w"> </span><span class="n">rng</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Random</span><span class="p">();</span>
<span class="o">...</span>
<span class="k">var</span><span class="w"> </span><span class="n">shuffledcards</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cards</span><span class="o">.</span><span class="n">OrderBy</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">rng</span><span class="o">.</span><span class="n">Next</span><span class="p">())</span><span class="o">.</span><span class="n">ToList</span><span class="p">();</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/html-text-input-allow-only-numeric-input/" class="u-url">HTML text input allow only numeric input</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/html-text-input-allow-only-numeric-input/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:07:41+08:00" itemprop="datePublished" title="2023-02-17 06:07">2023-02-17 06:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a quick way to set an HTML text input (<code>&lt;input type=text /&gt;</code>) to only
allow numeric keystrokes (plus '.')?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>JavaScript</h3>
<p>You can filter the input values of a text <code>&lt;input&gt;</code> with the following
<code>setInputFilter</code> function (supports Copy+Paste, Drag+Drop, keyboard shortcuts,
context menu operations, non-typeable keys, the caret position, different
keyboard layouts, validity error message, and all browsers since IE 9):</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Restricts input for the given textbox to the given inputFilter function.</span>
<span class="k">function</span><span class="w"> </span><span class="nf">setInputFilter</span><span class="p">(</span>textbox, inputFilter, errMsg<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">[</span><span class="w"> </span><span class="s">"input"</span><span class="p">,</span><span class="w"> </span><span class="s">"keydown"</span><span class="p">,</span><span class="w"> </span><span class="s">"keyup"</span><span class="p">,</span><span class="w"> </span><span class="s">"mousedown"</span><span class="p">,</span><span class="w"> </span><span class="s">"mouseup"</span><span class="p">,</span><span class="w"> </span><span class="s">"select"</span><span class="p">,</span><span class="w"> </span><span class="s">"contextmenu"</span><span class="p">,</span><span class="w"> </span><span class="s">"drop"</span><span class="p">,</span><span class="w"> </span><span class="s">"focusout"</span><span class="w"> </span><span class="p">].</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">textbox</span><span class="p">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">inputFilter</span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Accepted value.</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="w"> </span><span class="s">"keydown"</span><span class="p">,</span><span class="w"> </span><span class="s">"mousedown"</span><span class="p">,</span><span class="w"> </span><span class="s">"focusout"</span><span class="w"> </span><span class="p">].</span><span class="n">indexOf</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="nb">type</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">          </span><span class="n">this</span><span class="p">.</span><span class="n">classList</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="s">"input-error"</span><span class="p">);</span>
<span class="w">          </span><span class="n">this</span><span class="p">.</span><span class="n">setCustomValidity</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">oldValue</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">oldSelectionStart</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">selectionStart</span><span class="p">;</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">oldSelectionEnd</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">selectionEnd</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="s">"oldValue"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Rejected value: restore the previous one.</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">classList</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">"input-error"</span><span class="p">);</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">setCustomValidity</span><span class="p">(</span><span class="n">errMsg</span><span class="p">);</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">reportValidity</span><span class="p">();</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">oldValue</span><span class="p">;</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">oldSelectionStart</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">oldSelectionEnd</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Rejected value: nothing to restore.</span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">""</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>You can now use the <code>setInputFilter</code> function to install an input filter:</p>
<div class="code"><pre class="code literal-block"><span class="nv">setInputFilter</span><span class="ss">(</span><span class="nv">document</span>.<span class="nv">getElementById</span><span class="ss">(</span><span class="s2">"myTextBox"</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">value</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">/^</span>\<span class="nv">d</span><span class="o">*</span>\.?\<span class="nv">d</span><span class="o">*</span>$<span class="o">/</span>.<span class="nv">test</span><span class="ss">(</span><span class="nv">value</span><span class="ss">)</span><span class="c1">; // Allow digits and '.' only, using a RegExp.</span>
},<span class="w"> </span><span class="s2">"Only digits and '.' are allowed"</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Apply your preferred style to the <code>input-error</code> class. Here’s a suggestion:</p>
<div class="code"><pre class="code literal-block"><span class="na">.input-error</span><span class="p">{</span>
<span class="w">  </span><span class="nl">outline:</span><span class="w"> </span><span class="err">1</span><span class="nf">px</span><span class="w"> </span><span class="no">solid</span><span class="w"> </span><span class="no">red</span><span class="c1">;</span>
<span class="err">}</span>
</pre></div>

<p>Note that you still <strong>must do server side validation</strong>!</p>
<p>Another caveat is that this will break the undo stack since it sets
<code>this.value</code> directly. This means that <code>Ctrl``Z</code> will not work to undo inputs
after typing an invalid character.</p>
<h4>Demo</h4>
<p>See the JSFiddle demo for more input filter examples or run the Stack snippet
below:</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Restricts input for the given textbox to the given inputFilter.</span>
<span class="nf">function</span><span class="w"> </span><span class="no">setInputFilter</span><span class="p">(</span><span class="no">textbox</span><span class="p">,</span><span class="w"> </span><span class="no">inputFilter</span><span class="p">,</span><span class="w"> </span><span class="no">errMsg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">[</span><span class="w"> </span><span class="err">"</span><span class="nf">input</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">keydown</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">keyup</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">mousedown</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">mouseup</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">select</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">contextmenu</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">drop</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">focusout</span><span class="err">"</span><span class="w"> </span><span class="p">].</span><span class="no">forEach</span><span class="p">(</span><span class="no">function</span><span class="p">(</span><span class="no">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nf">textbox.addEventListener</span><span class="p">(</span><span class="no">event</span><span class="p">,</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="no">inputFilter</span><span class="p">(</span><span class="no">this.value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Accepted value.</span>
<span class="w">        </span><span class="nf">if</span><span class="w"> </span><span class="p">([</span><span class="w"> </span><span class="err">"</span><span class="no">keydown</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">mousedown</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="err">"</span><span class="no">focusout</span><span class="err">"</span><span class="w"> </span><span class="p">].</span><span class="no">indexOf</span><span class="p">(</span><span class="no">e.type</span><span class="p">)</span><span class="w"> </span><span class="err">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nf">this.classList.remove</span><span class="p">(</span><span class="err">"</span><span class="no">input-error</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="w">          </span><span class="nf">this.setCustomValidity</span><span class="p">(</span><span class="err">""</span><span class="p">)</span><span class="c1">;</span>
<span class="w">        </span><span class="err">}</span>

<span class="w">        </span><span class="nf">this.oldValue</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">this.value</span><span class="c1">;</span>
<span class="w">        </span><span class="nf">this.oldSelectionStart</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">this.selectionStart</span><span class="c1">;</span>
<span class="w">        </span><span class="nf">this.oldSelectionEnd</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">this.selectionEnd</span><span class="c1">;</span>
<span class="w">      </span><span class="err">}</span>
<span class="w">      </span><span class="nf">else</span><span class="w"> </span><span class="no">if</span><span class="w"> </span><span class="p">(</span><span class="no">this.hasOwnProperty</span><span class="p">(</span><span class="err">"</span><span class="no">oldValue</span><span class="err">"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Rejected value: restore the previous one.</span>
<span class="w">        </span><span class="nf">this.classList.add</span><span class="p">(</span><span class="err">"</span><span class="no">input-error</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="w">        </span><span class="nf">this.setCustomValidity</span><span class="p">(</span><span class="no">errMsg</span><span class="p">)</span><span class="c1">;</span>
<span class="w">        </span><span class="nf">this.reportValidity</span><span class="p">()</span><span class="c1">;</span>
<span class="w">        </span><span class="nf">this.value</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">this.oldValue</span><span class="c1">;</span>
<span class="w">        </span><span class="nf">this.setSelectionRange</span><span class="p">(</span><span class="no">this.oldSelectionStart</span><span class="p">,</span><span class="w"> </span><span class="no">this.oldSelectionEnd</span><span class="p">)</span><span class="c1">;</span>
<span class="w">      </span><span class="err">}</span>
<span class="w">      </span><span class="nf">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Rejected value: nothing to restore.</span>
<span class="w">        </span><span class="nf">this.value</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">""</span><span class="c1">;</span>
<span class="w">      </span><span class="err">}</span>
<span class="w">    </span><span class="err">})</span><span class="c1">;</span>
<span class="w">  </span><span class="err">})</span><span class="c1">;</span>
<span class="err">}</span>

<span class="c1">// Install input filters.</span>
<span class="nf">setInputFilter</span><span class="p">(</span><span class="no">document.getElementById</span><span class="p">(</span><span class="err">"</span><span class="no">intTextBox</span><span class="err">"</span><span class="p">),</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">return</span><span class="w"> </span><span class="err">/^</span><span class="p">-</span><span class="err">?\</span><span class="no">d</span><span class="p">*</span><span class="no">$</span><span class="err">/</span><span class="no">.test</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="c1">;</span>
<span class="err">},</span><span class="w"> </span><span class="err">"</span><span class="nf">Must</span><span class="w"> </span><span class="no">be</span><span class="w"> </span><span class="no">an</span><span class="w"> </span><span class="no">integer</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="nf">setInputFilter</span><span class="p">(</span><span class="no">document.getElementById</span><span class="p">(</span><span class="err">"</span><span class="no">uintTextBox</span><span class="err">"</span><span class="p">),</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">return</span><span class="w"> </span><span class="err">/^\</span><span class="no">d</span><span class="p">*</span><span class="no">$</span><span class="err">/</span><span class="no">.test</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="c1">;</span>
<span class="err">},</span><span class="w"> </span><span class="err">"</span><span class="nf">Must</span><span class="w"> </span><span class="no">be</span><span class="w"> </span><span class="no">an</span><span class="w"> </span><span class="no">unsigned</span><span class="w"> </span><span class="no">integer</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="nf">setInputFilter</span><span class="p">(</span><span class="no">document.getElementById</span><span class="p">(</span><span class="err">"</span><span class="no">intLimitTextBox</span><span class="err">"</span><span class="p">),</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">return</span><span class="w"> </span><span class="err">/^\</span><span class="no">d</span><span class="p">*</span><span class="no">$</span><span class="err">/</span><span class="no">.test</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="err">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="no">value</span><span class="w"> </span><span class="err">===</span><span class="w"> </span><span class="err">""</span><span class="w"> </span><span class="err">||</span><span class="w"> </span><span class="no">parseInt</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="err">&lt;=</span><span class="w"> </span><span class="mi">500</span><span class="p">)</span><span class="c1">;</span>
<span class="err">},</span><span class="w"> </span><span class="err">"</span><span class="nf">Must</span><span class="w"> </span><span class="no">be</span><span class="w"> </span><span class="no">between</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="no">and</span><span class="w"> </span><span class="mi">500</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="nf">setInputFilter</span><span class="p">(</span><span class="no">document.getElementById</span><span class="p">(</span><span class="err">"</span><span class="no">floatTextBox</span><span class="err">"</span><span class="p">),</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">return</span><span class="w"> </span><span class="err">/^</span><span class="p">-</span><span class="err">?\</span><span class="no">d</span><span class="p">*[.,]</span><span class="err">?\</span><span class="no">d</span><span class="p">*</span><span class="no">$</span><span class="err">/</span><span class="no">.test</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="c1">;</span>
<span class="err">},</span><span class="w"> </span><span class="err">"</span><span class="nf">Must</span><span class="w"> </span><span class="no">be</span><span class="w"> </span><span class="no">a</span><span class="w"> </span><span class="no">floating</span><span class="w"> </span><span class="p">(</span><span class="no">real</span><span class="p">)</span><span class="w"> </span><span class="no">number</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="nf">setInputFilter</span><span class="p">(</span><span class="no">document.getElementById</span><span class="p">(</span><span class="err">"</span><span class="no">currencyTextBox</span><span class="err">"</span><span class="p">),</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">return</span><span class="w"> </span><span class="err">/^</span><span class="p">-</span><span class="err">?\</span><span class="no">d</span><span class="p">*[.,]</span><span class="err">?\</span><span class="no">d</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">}</span><span class="no">$</span><span class="err">/</span><span class="no">.test</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="c1">;</span>
<span class="err">},</span><span class="w"> </span><span class="err">"</span><span class="nf">Must</span><span class="w"> </span><span class="no">be</span><span class="w"> </span><span class="no">a</span><span class="w"> </span><span class="no">currency</span><span class="w"> </span><span class="no">value</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="nf">setInputFilter</span><span class="p">(</span><span class="no">document.getElementById</span><span class="p">(</span><span class="err">"</span><span class="no">latinTextBox</span><span class="err">"</span><span class="p">),</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">return</span><span class="w"> </span><span class="err">/^</span><span class="p">[</span><span class="no">a-z</span><span class="p">]*</span><span class="no">$</span><span class="err">/</span><span class="no">i.test</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="c1">;</span>
<span class="err">},</span><span class="w"> </span><span class="err">"</span><span class="nf">Must</span><span class="w"> </span><span class="no">use</span><span class="w"> </span><span class="no">alphabetic</span><span class="w"> </span><span class="no">latin</span><span class="w"> </span><span class="no">characters</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>
<span class="nf">setInputFilter</span><span class="p">(</span><span class="no">document.getElementById</span><span class="p">(</span><span class="err">"</span><span class="no">hexTextBox</span><span class="err">"</span><span class="p">),</span><span class="w"> </span><span class="no">function</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">return</span><span class="w"> </span><span class="err">/^</span><span class="p">[</span><span class="mi">0-9</span><span class="no">a-f</span><span class="p">]*</span><span class="no">$</span><span class="err">/</span><span class="no">i.test</span><span class="p">(</span><span class="no">value</span><span class="p">)</span><span class="c1">;</span>
<span class="err">},</span><span class="w"> </span><span class="err">"</span><span class="nf">Must</span><span class="w"> </span><span class="no">use</span><span class="w"> </span><span class="no">hexadecimal</span><span class="w"> </span><span class="no">characters</span><span class="err">"</span><span class="p">)</span><span class="c1">;</span>


<span class="na">.input-error</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nl">outline:</span><span class="w"> </span><span class="err">1</span><span class="nf">px</span><span class="w"> </span><span class="no">solid</span><span class="w"> </span><span class="no">red</span><span class="c1">;</span>
<span class="err">}</span>


<span class="err">&lt;</span><span class="nf">h2</span><span class="err">&gt;</span><span class="no">JavaScript</span><span class="w"> </span><span class="no">input</span><span class="w"> </span><span class="no">filter</span><span class="w"> </span><span class="no">showcase</span><span class="err">&lt;/</span><span class="no">h2</span><span class="err">&gt;</span>
<span class="err">&lt;</span><span class="nf">p</span><span class="err">&gt;</span><span class="no">Supports</span><span class="w"> </span><span class="no">Copy</span><span class="err">+</span><span class="no">Paste</span><span class="p">,</span><span class="w"> </span><span class="no">Drag</span><span class="err">+</span><span class="no">Drop</span><span class="p">,</span><span class="w"> </span><span class="no">keyboard</span><span class="w"> </span><span class="no">shortcuts</span><span class="p">,</span><span class="w"> </span><span class="no">context</span><span class="w"> </span><span class="no">menu</span><span class="w"> </span><span class="no">operations</span><span class="p">,</span><span class="w"> </span><span class="no">non-typeable</span><span class="w"> </span><span class="no">keys</span><span class="p">,</span><span class="w"> </span><span class="no">the</span><span class="w"> </span><span class="no">caret</span><span class="w"> </span><span class="no">position</span><span class="p">,</span><span class="w"> </span><span class="no">different</span><span class="w"> </span><span class="no">keyboard</span><span class="w"> </span><span class="no">layouts</span><span class="p">,</span><span class="w"> </span><span class="no">and</span><span class="w"> </span><span class="err">&lt;</span><span class="no">a</span><span class="w"> </span><span class="no">href</span><span class="err">="</span><span class="no">https</span><span class="p">:</span><span class="c1">//caniuse.com/#feat=input-event" target="_blank"&gt;all browsers since IE 9&lt;/a&gt;.&lt;/p&gt;</span>
<span class="err">&lt;</span><span class="nf">p</span><span class="err">&gt;</span><span class="no">There</span><span class="w"> </span><span class="no">is</span><span class="w"> </span><span class="no">also</span><span class="w"> </span><span class="no">a</span><span class="w"> </span><span class="err">&lt;</span><span class="no">a</span><span class="w"> </span><span class="no">href</span><span class="err">="</span><span class="no">https</span><span class="p">:</span><span class="c1">//jsfiddle.net/emkey08/tvx5e7q3" target="_blank"&gt;jQuery version&lt;/a&gt; of this.&lt;/p&gt;</span>
<span class="err">&lt;</span><span class="nf">table</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;</span><span class="no">Integer</span><span class="err">&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;&lt;</span><span class="no">input</span><span class="w"> </span><span class="no">id</span><span class="err">="</span><span class="no">intTextBox</span><span class="err">"&gt;&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;/</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;</span><span class="no">Integer</span><span class="w"> </span><span class="err">&amp;</span><span class="no">gt</span><span class="c1">;= 0&lt;/td&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;&lt;</span><span class="no">input</span><span class="w"> </span><span class="no">id</span><span class="err">="</span><span class="no">uintTextBox</span><span class="err">"&gt;&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;/</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;</span><span class="no">Integer</span><span class="w"> </span><span class="err">&amp;</span><span class="no">gt</span><span class="c1">;= 0 and &amp;lt;= 500&lt;/td&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;&lt;</span><span class="no">input</span><span class="w"> </span><span class="no">id</span><span class="err">="</span><span class="no">intLimitTextBox</span><span class="err">"&gt;&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;/</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;</span><span class="no">Float</span><span class="w"> </span><span class="p">(</span><span class="no">use</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="no">or</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="no">as</span><span class="w"> </span><span class="no">decimal</span><span class="w"> </span><span class="no">separator</span><span class="p">)</span><span class="err">&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;&lt;</span><span class="no">input</span><span class="w"> </span><span class="no">id</span><span class="err">="</span><span class="no">floatTextBox</span><span class="err">"&gt;&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;/</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;</span><span class="no">Currency</span><span class="w"> </span><span class="p">(</span><span class="no">at</span><span class="w"> </span><span class="no">most</span><span class="w"> </span><span class="no">two</span><span class="w"> </span><span class="no">decimal</span><span class="w"> </span><span class="no">places</span><span class="p">)</span><span class="err">&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;&lt;</span><span class="no">input</span><span class="w"> </span><span class="no">id</span><span class="err">="</span><span class="no">currencyTextBox</span><span class="err">"&gt;&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;/</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;</span><span class="no">A-Z</span><span class="w"> </span><span class="no">only</span><span class="err">&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;&lt;</span><span class="no">input</span><span class="w"> </span><span class="no">id</span><span class="err">="</span><span class="no">latinTextBox</span><span class="err">"&gt;&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;/</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;</span><span class="no">Hexadecimal</span><span class="err">&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">    </span><span class="err">&lt;</span><span class="nf">td</span><span class="err">&gt;&lt;</span><span class="no">input</span><span class="w"> </span><span class="no">id</span><span class="err">="</span><span class="no">hexTextBox</span><span class="err">"&gt;&lt;/</span><span class="no">td</span><span class="err">&gt;</span>
<span class="w">  </span><span class="err">&lt;/</span><span class="nf">tr</span><span class="err">&gt;</span>
<span class="err">&lt;/</span><span class="nf">table</span><span class="err">&gt;</span>
</pre></div>

<h3>TypeScript</h3>
<p>Here is a TypeScript version of this.</p>
<div class="code"><pre class="code literal-block"><span class="nt">function</span><span class="w"> </span><span class="nt">setInputFilter</span><span class="o">(</span><span class="nt">textbox</span><span class="o">:</span><span class="w"> </span><span class="nt">Element</span><span class="o">,</span><span class="w"> </span><span class="nt">inputFilter</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="nt">value</span><span class="o">:</span><span class="w"> </span><span class="nt">string</span><span class="o">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nt">boolean</span><span class="o">,</span><span class="w"> </span><span class="nt">errMsg</span><span class="o">:</span><span class="w"> </span><span class="nt">string</span><span class="o">):</span><span class="w"> </span><span class="nt">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cp">[</span><span class="s2">"input"</span><span class="p">,</span><span class="w"> </span><span class="s2">"keydown"</span><span class="p">,</span><span class="w"> </span><span class="s2">"keyup"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mousedown"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mouseup"</span><span class="p">,</span><span class="w"> </span><span class="s2">"select"</span><span class="p">,</span><span class="w"> </span><span class="s2">"contextmenu"</span><span class="p">,</span><span class="w"> </span><span class="s2">"drop"</span><span class="p">,</span><span class="w"> </span><span class="s2">"focusout"</span><span class="w"> </span><span class="cp">]</span><span class="err">.forEach(function(event)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="err">textbox.addEventListener(event,</span><span class="w"> </span><span class="err">function(</span><span class="n">this</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">HTMLInputElement</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">HTMLTextAreaElement</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">oldValue</span><span class="o">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span><span class="w"> </span><span class="n">oldSelectionStart</span><span class="p">:</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">null</span><span class="p">,</span><span class="w"> </span><span class="n">oldSelectionEnd</span><span class="o">:</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="p">}</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="err">if</span><span class="w"> </span><span class="err">(inputFilter(this.value))</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">this.oldValue</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">this.value</span><span class="p">;</span>
<span class="w">        </span><span class="err">this.oldSelectionStart</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">this.selectionStart</span><span class="p">;</span>
<span class="w">        </span><span class="err">this.oldSelectionEnd</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">this.selectionEnd</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="nt">else</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="o">(</span><span class="nt">Object</span><span class="p">.</span><span class="nc">prototype</span><span class="p">.</span><span class="nc">hasOwnProperty</span><span class="p">.</span><span class="nc">call</span><span class="o">(</span><span class="nt">this</span><span class="o">,</span><span class="w"> </span><span class="s2">"oldValue"</span><span class="o">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">this.value</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">this.oldValue</span><span class="p">;</span>

<span class="w">        </span><span class="err">if</span><span class="w"> </span><span class="err">(this.oldSelectionStart</span><span class="w"> </span><span class="err">!==</span><span class="w"> </span><span class="err">null</span><span class="w"> </span><span class="err">&amp;&amp;</span>
<span class="w">          </span><span class="err">this.oldSelectionEnd</span><span class="w"> </span><span class="err">!==</span><span class="w"> </span><span class="err">null)</span><span class="w"> </span><span class="err">{</span>
<span class="w">          </span><span class="err">this.setSelectionRange(this.oldSelectionStart,</span><span class="w"> </span><span class="err">this.oldSelectionEnd)</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="err">}</span>
<span class="w">      </span><span class="nt">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">this.value</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">""</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="err">}</span><span class="o">);</span>
<span class="w">  </span><span class="err">}</span><span class="o">);</span>
<span class="err">}</span>
</pre></div>

<h3>jQuery</h3>
<p>There is also a jQuery version of this. See this answer.</p>
<h3>HTML5</h3>
<p>HTML5 has a native solution with <code>&lt;input type="number"&gt;</code> (see the
specification and documentation). The documentation has a working demo of this
input type.</p>
<ul>
<li>Instead of reading the <code>value</code> property, read the <code>valueAsNumber</code> property of the input to get the typed value as a <em>number</em> rather than a string.</li>
<li>Usage inside a <code>&lt;form&gt;</code> is recommended because validation is made easier this way; for example, pressing <code>Enter</code> will automatically show an error message if the value is invalid. <ul>
<li>You can use the <code>checkValidity</code> method or the <code>requestSubmit</code> method on the entire form in order to explicitly check the validity.</li>
<li>Note that you might need to use the <code>required</code> attribute in order to disallow an empty input.</li>
</ul>
</li>
<li>You can use the <code>checkValidity</code> method or the <code>validity</code> property on the input element itself in order to explicitly check the validity.</li>
<li>You can use <code>reportValidity</code> to show an error message and use <code>setCustomValidity</code> to set your own message.</li>
</ul>
<p>This approach fundamentally has a different user experience: you are allowed
to <em>input</em> invalid characters and the validation is performed <em>separately</em>.
This has the benefit that the undo stack (<code>Ctrl``Z</code>) won’t break. Note that
server-side validation must be performed, regardless, no matter which approach
you choose.</p>
<p>But note that browser support varies:</p>
<ul>
<li>Most browsers will only validate the input when submitting the form, and not when typing.</li>
<li>Most mobile browsers don’t support the <code>step</code>, <code>min</code> and <code>max</code> attributes.</li>
<li>Chrome (version 71.0.3578.98) still allows the user to enter the characters <code>e</code> and <code>E</code> into the field. Also see the Q&amp;A Why does the HTML input with <code>type="number"</code> allow the letter <code>e</code> to be entered in the field?.</li>
<li>Firefox (version 64.0) and Edge (EdgeHTML version 17.17134) still allow the user to enter <em>any</em> text into the field.</li>
</ul>
<h4>Demo</h4>
<div class="code"><pre class="code literal-block">document.querySelector("form").addEventListener("submit",<span class="w"> </span>(event)<span class="w"> </span>=&gt;<span class="w"> </span>{
<span class="w">  </span>event.preventDefault();
<span class="w">  </span>console.log(`Submit!
<span class="w">  </span>Number<span class="w"> </span>is<span class="w"> </span><span class="cp">${</span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">number</span><span class="o">.</span><span class="n">valueAsNumber</span><span class="cp">}</span>,
<span class="w">  </span>integer<span class="w"> </span>is<span class="w"> </span><span class="cp">${</span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">integer</span><span class="o">.</span><span class="n">valueAsNumber</span><span class="cp">}</span>,
<span class="w">  </span>form<span class="w"> </span>data<span class="w"> </span>is<span class="w"> </span><span class="cp">${</span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">Object</span><span class="o">.</span><span class="n">fromEntries</span><span class="p">(</span><span class="n">new</span> <span class="n">FormData</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="p">)</span><span class="o">.</span><span class="n">entries</span><span class="p">()))</span><span class="cp">}</span>.`);
})


label<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>block;
}


<span class="nt">&lt;form&gt;</span>
<span class="w">  </span><span class="nt">&lt;fieldset&gt;</span>
<span class="w">    </span><span class="nt">&lt;legend&gt;</span>Get<span class="w"> </span>a<span class="w"> </span>feel<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>UX<span class="w"> </span>here:<span class="nt">&lt;/legend&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;</span>Enter<span class="w"> </span>any<span class="w"> </span>number:<span class="w"> </span><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"number"</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">step=</span><span class="s">"any"</span> <span class="err">required</span><span class="nt">&gt;&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;</span>Enter<span class="w"> </span>any<span class="w"> </span>integer:<span class="w"> </span><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"integer"</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">step=</span><span class="s">"1"</span> <span class="err">required</span><span class="nt">&gt;&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;</span>Submit:<span class="w"> </span><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"submitter"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;&lt;/label&gt;</span>
<span class="w">  </span><span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Use this DOM</p>
<div class="code"><pre class="code literal-block">&lt;input type='text' onkeypress='validate(event)' /&gt;
</pre></div>

<p>And this script</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">validate</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">theEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">evt</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">event</span><span class="p">;</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">paste</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">theEvent</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'paste'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">event</span><span class="o">.</span><span class="n">clipboardData</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="s1">'text/plain'</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">press</span>
<span class="w">      </span><span class="k">var</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theEvent</span><span class="o">.</span><span class="n">keyCode</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">theEvent</span><span class="o">.</span><span class="n">which</span><span class="p">;</span>
<span class="w">      </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="o">.</span><span class="n">fromCharCode</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">|</span>\<span class="o">./</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">regex</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">theEvent</span><span class="o">.</span><span class="n">returnValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">theEvent</span><span class="o">.</span><span class="n">preventDefault</span><span class="p">)</span><span class="w"> </span><span class="n">theEvent</span><span class="o">.</span><span class="n">preventDefault</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-411.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-409.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
