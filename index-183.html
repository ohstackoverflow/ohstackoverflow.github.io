<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 183) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-183.html">
<link rel="prev" href="index-184.html" type="text/html">
<link rel="next" href="index-182.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-does-enctype-multipart-form-data-mean/" class="u-url">What does enctype='multipart/form-data' mean?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-does-enctype-multipart-form-data-mean/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:10:05+08:00" itemprop="datePublished" title="2023-02-17 00:10">2023-02-17 00:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What does <code>enctype='multipart/form-data'</code> mean in an HTML form and when should
we use it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>When you make a POST request, you have to encode the data that forms the body
of the request in some way.</p>
<p>HTML forms provide three methods of encoding.</p>
<ul>
<li>
<code>application/x-www-form-urlencoded</code> (the default)</li>
<li><code>multipart/form-data</code></li>
<li><code>text/plain</code></li>
</ul>
<p>Work was being done on adding <code>application/json</code>, but that has been abandoned.</p>
<p>(Other encodings are possible with HTTP requests generated using other means
than an HTML form submission. JSON is a common format for use with web
services and some still use SOAP.)</p>
<p>The specifics of the formats don't matter to most developers. The important
points are:</p>
<ul>
<li>Never use <code>text/plain</code>.</li>
</ul>
<p>When you are writing client-side code:</p>
<ul>
<li>use <code>multipart/form-data</code> when your form includes any <code>&lt;input type="file"&gt;</code> elements</li>
<li>otherwise you can use <code>multipart/form-data</code> or <code>application/x-www-form-urlencoded</code> but <code>application/x-www-form-urlencoded</code> will be more efficient</li>
</ul>
<p>When you are writing server-side code:</p>
<ul>
<li>Use a prewritten form handling library</li>
</ul>
<p>Most (such as Perl's <code>CGI-&gt;param</code> or the one exposed by PHP's <code>$_POST</code>
superglobal) will take care of the differences for you. Don't bother trying to
parse the raw input received by the server.</p>
<p>Sometimes you will find a library that can't handle both formats. Node.js's
most popular library for handling form data is body-parser which cannot handle
multipart requests (but has documentation that recommends some alternatives
which can).</p>
<hr>
<p>If you are writing (or debugging) a library for parsing or generating the raw
data, then you need to start worrying about the format. You might also want to
know about it for interest's sake.</p>
<p><code>application/x-www-form-urlencoded</code> is more or less the same as a query string
on the end of the URL.</p>
<p><code>multipart/form-data</code> is significantly more complicated but it allows entire
files to be included in the data. An example of the result can be found in the
HTML 4 specification.</p>
<p><code>text/plain</code> is introduced by HTML 5 and is useful only for debugging — from
the spec: <em>They are not reliably interpretable by computer</em> — and I'd argue
that the others combined with tools (like the Network Panel in the developer
tools of most browsers) are better for that).</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>when should we use it?</p>
</blockquote>
<p>Quentin's answer is right: use <code>multipart/form-data</code> if the form contains a
file upload, and <code>application/x-www-form-urlencoded</code> otherwise, which is the
default if you omit <code>enctype</code>.</p>
<p>I'm going to:</p>
<ul>
<li>add some more HTML5 references</li>
<li>explain <strong>why</strong> he is right with a form submit example</li>
</ul>
<h3>HTML5 references</h3>
<p>There are three possibilities for <code>enctype</code>:</p>
<ul>
<li><code>application/x-www-form-urlencoded</code></li>
<li>
<code>multipart/form-data</code> (spec points to RFC7578)</li>
<li>
<code>text/plain</code>. This is "not reliably interpretable by computer", so it should never be used in production, and we will not look further into it.</li>
</ul>
<h3>How to generate the examples</h3>
<p>Once you see an example of each method, it becomes obvious how they work, and
when you should use each one.</p>
<p>You can produce examples using:</p>
<ul>
<li>
<code>nc -l</code> or an ECHO server: HTTP test server accepting GET/POST requests</li>
<li>a user agent like a browser or cURL</li>
</ul>
<p>Save the form to a minimal <code>.html</code> file:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">"en"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>upload<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">"http://localhost:8000"</span> <span class="na">method</span><span class="o">=</span><span class="s">"post"</span> <span class="na">enctype</span><span class="o">=</span><span class="s">"multipart/form-data"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"text1"</span> <span class="na">value</span><span class="o">=</span><span class="s">"text default"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"text2"</span> <span class="na">value</span><span class="o">=</span><span class="s">"a&amp;#x03C9;b"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"file"</span> <span class="na">name</span><span class="o">=</span><span class="s">"file1"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"file"</span> <span class="na">name</span><span class="o">=</span><span class="s">"file2"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"file"</span> <span class="na">name</span><span class="o">=</span><span class="s">"file3"</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Submit<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>

<p>We set the default text value to <code>a&amp;#x03C9;b</code>, which means <code>aωb</code> because <code>ω</code>
is <code>U+03C9</code>, which are the bytes <code>61 CF 89 62</code> in UTF-8.</p>
<p>Create files to upload:</p>
<div class="code"><pre class="code literal-block">echo 'Content of a.txt.' &gt; a.txt

echo '<span class="cp">&lt;!DOCTYPE html&gt;</span><span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Content of a.html.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>' &gt; a.html

# Binary file containing 4 bytes: 'a', 1, 2 and 'b'.
printf 'a\xCF\x89b' &gt; binary
</pre></div>

<p>Run our little echo server:</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span><span class="w"> </span><span class="nv">true</span><span class="c1">; do printf '' | nc -l localhost 8000; done</span>
</pre></div>

<p>Open the HTML on your browser, select the files and click on submit and check
the terminal.</p>
<p><code>nc</code> prints the request received.</p>
<p>Tested on: Ubuntu 14.04.3, <code>nc</code> BSD 1.105, Firefox 40.</p>
<h3>multipart/form-data</h3>
<p>Firefox sent:</p>
<div class="code"><pre class="code literal-block"><span class="nf">POST</span> <span class="nn">/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="err">[[</span> <span class="l">Less interesting headers ... ]]</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">multipart/form-data; boundary=---------------------------735323031399963166993862150</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">834</span>

-----------------------------735323031399963166993862150
Content-Disposition: form-data; name="text1"

text default
-----------------------------735323031399963166993862150
Content-Disposition: form-data; name="text2"

aωb
-----------------------------735323031399963166993862150
Content-Disposition: form-data; name="file1"; filename="a.txt"
Content-Type: text/plain

Content of a.txt.

-----------------------------735323031399963166993862150
Content-Disposition: form-data; name="file2"; filename="a.html"
Content-Type: text/html

&lt;!DOCTYPE html&gt;&lt;title&gt;Content of a.html.&lt;/title&gt;

-----------------------------735323031399963166993862150
Content-Disposition: form-data; name="file3"; filename="binary"
Content-Type: application/octet-stream

aωb
-----------------------------735323031399963166993862150--
</pre></div>

<p>For the binary file and text field, the bytes <code>61 CF 89 62</code> (<code>aωb</code> in UTF-8)
are sent literally. You could verify that with <code>nc -l localhost 8000 | hd</code>,
which says that the bytes:</p>
<div class="code"><pre class="code literal-block"><span class="mf">61</span><span class="w"> </span><span class="n">CF</span><span class="w"> </span><span class="mf">89</span><span class="w"> </span><span class="mf">62</span>
</pre></div>

<p>were sent (<code>61</code> == 'a' and <code>62</code> == 'b').</p>
<p>Therefore it is clear that:</p>
<ul>
<li>
<code>Content-Type: multipart/form-data; boundary=---------------------------735323031399963166993862150</code> sets the content type to <code>multipart/form-data</code> and says that the fields are separated by the given <code>boundary</code> string.</li>
</ul>
<p>But note that the:</p>
<div class="code"><pre class="code literal-block">    boundary=---------------------------735323031399963166993862150
</pre></div>

<p>has two less dashes <code>--</code> than the actual barrier</p>
<div class="code"><pre class="code literal-block">    -----------------------------735323031399963166993862150
</pre></div>

<p>This is because the standard requires the boundary to start with two dashes
<code>--</code>. The other dashes appear to be just how Firefox chose to implement the
arbitrary boundary. RFC 7578 clearly mentions that those two leading dashes
<code>--</code> are required:</p>
<blockquote>
<p>4.1. "Boundary" Parameter of multipart/form-data</p>
<p>As with other multipart types, the parts are delimited with a boundary
delimiter, constructed using CRLF, "--", and the value of the "boundary"
parameter.</p>
</blockquote>
<ul>
<li>every field gets some sub headers before its data: <code>Content-Disposition: form-data;</code>, the field <code>name</code>, the <code>filename</code>, followed by the data.</li>
</ul>
<p>The server reads the data until the next boundary string. The browser must
choose a boundary that will not appear in any of the fields, so this is why
the boundary may vary between requests.</p>
<p>Because we have the unique boundary, no encoding of the data is necessary:
binary data is sent as is.</p>
<p>TODO: what is the optimal boundary size (<code>log(N)</code> I bet), and name / running
time of the algorithm that finds it? Asked at:
https://cs.stackexchange.com/questions/39687/find-the-shortest-sequence-that-
is-not-a-sub-sequence-of-a-set-of-sequences</p>
<ul>
<li>
<code>Content-Type</code> is automatically determined by the browser.</li>
</ul>
<p>How it is determined exactly was asked at: How is mime type of an uploaded
file determined by browser?</p>
<h3>application/x-www-form-urlencoded</h3>
<p>Now change the <code>enctype</code> to <code>application/x-www-form-urlencoded</code>, reload the
browser, and resubmit.</p>
<p>Firefox sent:</p>
<div class="code"><pre class="code literal-block"><span class="nf">POST</span> <span class="nn">/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="err">[[</span> <span class="l">Less interesting headers ... ]]</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">51</span>

text1=text+default&amp;text2=a%CF%89b&amp;file1=a.txt&amp;file2=a.html&amp;file3=binary
</pre></div>

<p>Clearly the file data was not sent, only the basenames. So this cannot be used
for files.</p>
<p>As for the text field, we see that usual printable characters like <code>a</code> and <code>b</code>
were sent in one byte, while non-printable ones like <code>0xCF</code> and <code>0x89</code> took up
<strong>3 bytes</strong> each: <code>%CF%89</code>!</p>
<h3>Comparison</h3>
<p>File uploads often contain lots of non-printable characters (e.g. images),
while text forms almost never do.</p>
<p>From the examples we have seen that:</p>
<ul>
<li>
<p><code>multipart/form-data</code>: adds a few bytes of boundary overhead to the message, and must spend some time calculating it, but sends each byte in one byte.</p>
</li>
<li>
<p><code>application/x-www-form-urlencoded</code>: has a single byte boundary per field (<code>&amp;</code>), but adds a <em>linear</em> overhead factor of <strong>3x</strong> for every non-printable character.</p>
</li>
</ul>
<p>Therefore, even if we could send files with <code>application/x-www-form-
urlencoded</code>, we wouldn't want to, because it is so inefficient.</p>
<p>But for printable characters found in text fields, it does not matter and
generates less overhead, so we just use it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/" class="u-url">How do I prompt for Yes/No/Cancel input in a Linux shell script?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:09:12+08:00" itemprop="datePublished" title="2023-02-17 00:09">2023-02-17 00:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to pause input in a shell script, and prompt the user for choices.<br>
The standard <code>Yes</code>, <code>No</code>, or <code>Cancel</code> type question.<br>
How do I accomplish this in a typical bash prompt?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The simplest and most widely available method to get user input at a shell
prompt is the <code>read</code> command. The best way to illustrate its use is a simple
demonstration:</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w"> </span><span class="n">do</span>
<span class="w">    </span><span class="k">read</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="ss">"Do you wish to install this program? "</span><span class="w"> </span><span class="n">yn</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="err">$</span><span class="n">yn</span><span class="w"> </span><span class="ow">in</span>
<span class="w">        </span><span class="o">[</span><span class="n">Yy</span><span class="o">]*</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">install</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;;</span>
<span class="w">        </span><span class="o">[</span><span class="n">Nn</span><span class="o">]*</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">exit</span><span class="p">;;</span>
<span class="w">        </span><span class="o">*</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">"Please answer yes or no."</span><span class="p">;;</span>
<span class="w">    </span><span class="n">esac</span>
<span class="n">done</span>
</pre></div>

<p>Another method, pointed out by Steven Huwig, is Bash's <code>select</code> command. Here
is the same example using <code>select</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">echo</span><span class="w"> </span><span class="s2">"Do you wish to install this program?"</span>
<span class="nv">select</span><span class="w"> </span><span class="nv">yn</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="s2">"Yes"</span><span class="w"> </span><span class="s2">"No"</span><span class="c1">; do</span>
<span class="w">    </span><span class="nv">case</span><span class="w"> </span>$<span class="nv">yn</span><span class="w"> </span><span class="nv">in</span>
<span class="w">        </span><span class="nv">Yes</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">install</span><span class="c1">; break;;</span>
<span class="w">        </span><span class="nv">No</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">exit</span><span class="c1">;;</span>
<span class="w">    </span><span class="nv">esac</span>
<span class="nv">done</span>
</pre></div>

<p>With <code>select</code> you don't need to sanitize the input – it displays the available
choices, and you type a number corresponding to your choice. It also loops
automatically, so there's no need for a <code>while true</code> loop to retry if they
give invalid input.</p>
<p>Also, Léa Gris demonstrated a way to make the request language agnostic in her
answer. Adapting my first example to better serve multiple languages might
look like this:</p>
<div class="code"><pre class="code literal-block">set<span class="w"> </span>--<span class="w"> </span>$(locale<span class="w"> </span>LC_MESSAGES)
yesexpr="$1";<span class="w"> </span>noexpr="$2";<span class="w"> </span>yesword="$3";<span class="w"> </span>noword="$4"

while<span class="w"> </span>true;<span class="w"> </span>do
<span class="w">    </span>read<span class="w"> </span>-p<span class="w"> </span>"Install<span class="w"> </span>(<span class="cp">${</span><span class="n">yesword</span><span class="cp">}</span><span class="w"> </span>/<span class="w"> </span><span class="cp">${</span><span class="n">noword</span><span class="cp">}</span>)?<span class="w"> </span>"<span class="w"> </span>yn
<span class="w">    </span>if<span class="w"> </span>[[<span class="w"> </span>"<span class="nv">$yn</span>"<span class="w"> </span>=~<span class="w"> </span><span class="nv">$yesexpr</span><span class="w"> </span>]];<span class="w"> </span>then<span class="w"> </span>make<span class="w"> </span>install;<span class="w"> </span>exit;<span class="w"> </span>fi
<span class="w">    </span>if<span class="w"> </span>[[<span class="w"> </span>"<span class="nv">$yn</span>"<span class="w"> </span>=~<span class="w"> </span><span class="nv">$noexpr</span><span class="w"> </span>]];<span class="w"> </span>then<span class="w"> </span>exit;<span class="w"> </span>fi
<span class="w">    </span>echo<span class="w"> </span>"Answer<span class="w"> </span><span class="cp">${</span><span class="n">yesword</span><span class="cp">}</span><span class="w"> </span>/<span class="w"> </span><span class="cp">${</span><span class="n">noword</span><span class="cp">}</span>."
done
</pre></div>

<p>Obviously other communication strings remain untranslated here (Install,
Answer) which would need to be addressed in a more fully completed
translation, but even a partial translation would be helpful in many cases.</p>
<p>Finally, please check out the excellent answer by F. Hauri.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>At least five answers for one generic question.</h2>
<p>Depending on</p>
<ul>
<li>posix compliant: could work on poor systems with generic shell environments</li>
<li>bash specific: using so called <em>bashisms</em>
</li>
</ul>
<p>and if you want</p>
<ul>
<li>simple ``in line'' question / answer (generic solutions)</li>
<li>pretty formatted interfaces, like ncurses or more graphical using libgtk or libqt...</li>
<li>use powerful readline history capability</li>
</ul>
<h3>1. POSIX generic solutions</h3>
<p>You could use the <code>read</code> command, followed by <code>if ... then ... else</code>:</p>
<div class="code"><pre class="code literal-block">printf 'Is this a good question (y/n)? '
read answer
</pre></div>

<p>~~</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span>#<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"$answer"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">iq</span><span class="w"> </span><span class="s2">"^y"</span><span class="w"> </span><span class="c1">;then</span>
</pre></div>

<p>~~</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="n"> "$answer" != "${answer#[Yy</span><span class="o">]</span><span class="err">}"</span><span class="w"> </span><span class="err">]</span><span class="w"> </span><span class="p">;</span><span class="k">then</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">grammar</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="err">#[]</span><span class="w"> </span><span class="n">operator</span><span class="p">)</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">variable</span><span class="w"> </span><span class="err">$</span><span class="n">answer</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mi">1</span><span class="n">st</span><span class="w"> </span><span class="k">position</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">dropped</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">exist</span><span class="p">.</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="n">Yes</span>
<span class="k">else</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="k">No</span>
<span class="n">fi</span>
</pre></div>

<p>(Thanks to Adam Katz's comment: Replaced the test above with one that is more
portable and avoids one fork:)</p>
<h4>POSIX, but single key feature</h4>
<p>But if you don't want the user to have to hit <code>Return</code>, you could write:</p>
<p>( <strong>Edited:</strong> As @JonathanLeffler rightly suggest, <em>saving</em> stty's
configuration could be better than simply force them to <em>sane</em>.)</p>
<div class="code"><pre class="code literal-block"><span class="n">printf</span><span class="w"> </span><span class="s1">'Is this a good question (y/n)? '</span>
<span class="n">old_stty_cfg</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">stty</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="p">)</span>
<span class="n">stty</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="o">-</span><span class="n">echo</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">answer</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">head</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">stty</span><span class="w"> </span><span class="err">$</span><span class="n">old_stty_cfg</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">Careful</span><span class="w"> </span><span class="n">playing</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">stty</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="n"> "$answer" != "${answer#[Yy</span><span class="o">]</span><span class="err">}"</span><span class="w"> </span><span class="err">]</span><span class="p">;</span><span class="k">then</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="n">Yes</span>
<span class="k">else</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="k">No</span>
<span class="n">fi</span>
</pre></div>

<p><strong>Note:</strong> This was tested under sh, bash, ksh, dash and busybox!</p>
<p>Same, but waiting explicitly for <code>y</code> or <code>n</code>:</p>
<div class="code"><pre class="code literal-block"><span class="err">#</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
<span class="n">printf</span><span class="w"> </span><span class="s1">'Is this a good question (y/n)? '</span>
<span class="n">old_stty_cfg</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">stty</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="p">)</span>
<span class="n">stty</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="o">-</span><span class="n">echo</span>
<span class="n">answer</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="err">!</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="s1">'[ny]'</span><span class="w"> </span><span class="p">;</span><span class="n">do</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">;</span><span class="n">done</span><span class="w"> </span><span class="p">)</span>
<span class="n">stty</span><span class="w"> </span><span class="err">$</span><span class="n">old_stty_cfg</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="n"> "$answer" != "${answer#[Yy</span><span class="o">]</span><span class="err">}"</span><span class="w"> </span><span class="err">]</span><span class="p">;</span><span class="k">then</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="n">Yes</span>
<span class="k">else</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="k">No</span>
<span class="n">fi</span>
</pre></div>

<h4>Using dedicated tools</h4>
<p>There are many tools which were built using <code>libncurses</code>, <code>libgtk</code>, <code>libqt</code> or
other graphical libraries. For example, using <code>whiptail</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">whiptail</span><span class="w"> </span><span class="o">--</span><span class="nv">yesno</span><span class="w"> </span><span class="s2">"Is this a good question"</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="c1">;then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="nv">Yes</span>
<span class="k">else</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="nv">No</span>
<span class="nv">fi</span>
</pre></div>

<p>Depending on your system, you may need to replace <code>whiptail</code> with another
similiar tool:</p>
<div class="code"><pre class="code literal-block">dialog --yesno "Is this a good question" 20 60 &amp;&amp; echo Yes

gdialog --yesno "Is this a good question" 20 60 &amp;&amp; echo Yes

kdialog --yesno "Is this a good question" 20 60 &amp;&amp; echo Yes
</pre></div>

<p>where <code>20</code> is height of dialog box in number of lines and <code>60</code> is width of the
dialog box. These tools all have <em>near same</em> syntax.</p>
<div class="code"><pre class="code literal-block"><span class="nv">DIALOG</span><span class="o">=</span><span class="nv">whiptail</span>
<span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">x</span><span class="w"> </span><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">gdialog</span><span class="w"> </span>]<span class="w"> </span><span class="c1">;then DIALOG=gdialog ; fi</span>
<span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">x</span><span class="w"> </span><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">xdialog</span><span class="w"> </span>]<span class="w"> </span><span class="c1">;then DIALOG=xdialog ; fi</span>
...
<span class="mh">$D</span><span class="nv">IALOG</span><span class="w"> </span><span class="o">--</span><span class="nv">yesno</span><span class="w"> </span>...
</pre></div>

<h3>2. Bash specific solutions</h3>
<h4>Basic <em>in line</em> method</h4>
<div class="code"><pre class="code literal-block">read<span class="w"> </span>-p<span class="w"> </span>"Is<span class="w"> </span>this<span class="w"> </span>a<span class="w"> </span>good<span class="w"> </span>question<span class="w"> </span>(y/n)?<span class="w"> </span>"<span class="w"> </span>answer
case<span class="w"> </span><span class="cp">${</span><span class="n">answer</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="cp">}</span><span class="w"> </span>in
<span class="w">    </span>y|Y<span class="w"> </span>)
<span class="w">        </span>echo<span class="w"> </span>Yes
<span class="w">    </span>;;
<span class="w">    </span>*<span class="w"> </span>)
<span class="w">        </span>echo<span class="w"> </span>No
<span class="w">    </span>;;
esac
</pre></div>

<p>I prefer to use <code>case</code> so I could even test for <code>yes | ja | si | oui</code> if
needed...</p>
<h4>
<em>in line</em> with <em>single key</em> feature</h4>
<p>Under bash, we can specify the length of intended input for for the <code>read</code>
command:</p>
<div class="code"><pre class="code literal-block">read -n 1 -p "Is this a good question (y/n)? " answer
</pre></div>

<p>Under bash, <code>read</code> command accepts a <em>timeout</em> parameter, which could be
useful.</p>
<div class="code"><pre class="code literal-block"><span class="nv">read</span><span class="w"> </span><span class="o">-</span><span class="nv">t</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">-</span><span class="nv">n</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="nv">p</span><span class="w"> </span><span class="s2">"Is this a good question (Y/n)? "</span><span class="w"> </span><span class="nv">answer</span>
[<span class="w"> </span><span class="o">-</span><span class="nv">z</span><span class="w"> </span><span class="s2">"$answer"</span><span class="w"> </span>]<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">answer</span><span class="o">=</span><span class="s2">"Yes"</span><span class="w">  </span>#<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="s1">'yes'</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">choice</span>
</pre></div>

<h4>Timeout with <em>countdown</em> :</h4>
<div class="code"><pre class="code literal-block"><span class="n">i</span><span class="o">=</span><span class="mi">6</span><span class="w"> </span><span class="p">;</span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">i</span><span class="o">--&gt;</span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="err">!</span><span class="w"> </span><span class="k">read</span><span class="w"> </span><span class="o">-</span><span class="n">sn</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="err">$</span><span class="s1">'\rIs this a good question (Y/n)? '</span><span class="err">$</span><span class="n">i</span><span class="err">$</span><span class="s1">'..\e[3D'</span><span class="w"> </span><span class="n">answer</span><span class="p">;</span><span class="n">do</span>
<span class="w">  </span><span class="err">:</span><span class="p">;</span><span class="n">done</span><span class="w"> </span><span class="p">;</span><span class="o">[</span><span class="n">[ $answer == [nN</span><span class="o">]</span><span class="w"> </span><span class="err">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">answer</span><span class="o">=</span><span class="k">No</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">answer</span><span class="o">=</span><span class="n">Yes</span><span class="w"> </span><span class="p">;</span><span class="n">echo</span><span class="w"> </span><span class="ss">"$answer "</span>
</pre></div>

<h3>3. Some tricks for <em>dedicated tools</em>
</h3>
<p>More sophisticated dialog boxes, beyond simple <em><code>yes - no</code></em> purposes:</p>
<div class="code"><pre class="code literal-block">dialog --menu "Is this a good question" 20 60 12 y Yes n No m Maybe
</pre></div>

<p>Progress bar:</p>
<div class="code"><pre class="code literal-block"><span class="nv">dialog</span><span class="w"> </span><span class="o">--</span><span class="nv">gauge</span><span class="w"> </span><span class="s2">"Filling the tank"</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">&lt;</span><span class="ss">(</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span>{<span class="mi">1</span>..<span class="mi">100</span>}<span class="c1">;do</span>
<span class="w">        </span><span class="nv">printf</span><span class="w"> </span><span class="s2">"XXX\n%d\n%(%a %b %T)T progress: %d\nXXX\n"</span><span class="w"> </span>$<span class="nv">i</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span>$<span class="nv">i</span>
<span class="w">        </span><span class="nv">sleep</span><span class="w"> </span>.<span class="mi">033</span>
<span class="w">    </span><span class="nv">done</span>
<span class="ss">)</span>
</pre></div>

<p>Little demo:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/sh</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><span class="k">while</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">;</span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="o">[</span><span class="w"> </span>-x<span class="w"> </span><span class="s2">"</span><span class="k">$(</span>which<span class="w"> </span><span class="si">${</span><span class="nv">DIALOG</span><span class="p">%% *</span><span class="si">}</span><span class="k">)</span><span class="s2">"</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">DIALOG</span><span class="o">=</span>dialog
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">DIALOG</span><span class="o">=</span><span class="k">$(</span><span class="nv">$DIALOG</span><span class="w"> </span>--menu<span class="w"> </span><span class="s2">"Which tool for next run?"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="w">            </span>whiptail<span class="w">       </span><span class="s2">"dialog boxes from shell scripts"</span><span class="w"> </span>&gt;/dev/tty<span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><span class="w">            </span>dialog<span class="w">         </span><span class="s2">"dialog boxes from shell with ncurses"</span><span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="w">            </span>gdialog<span class="w">        </span><span class="s2">"dialog boxes from shell with Gtk"</span><span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><span class="w">            </span>kdialog<span class="w">        </span><span class="s2">"dialog boxes from shell with Kde"</span><span class="w"> </span><span class="k">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">break</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><span class="w">    </span>clear<span class="p">;</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Choosed: </span><span class="nv">$DIALOG</span><span class="s2">."</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>seq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">100</span><span class="sb">`</span><span class="p">;</span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><span class="w">        </span>date<span class="w"> </span>+<span class="s2">"`printf "</span>XXX<span class="se">\n</span>%d<span class="se">\n</span>%%a<span class="w"> </span>%%b<span class="w"> </span>%%T<span class="w"> </span>progress:<span class="w"> </span>%d<span class="se">\n</span>XXX<span class="se">\n</span><span class="s2">" </span><span class="nv">$i</span><span class="s2"> </span><span class="nv">$i</span><span class="s2">`"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="w">        </span>sleep<span class="w"> </span>.0125
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><span class="w">      </span><span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nv">$DIALOG</span><span class="w"> </span>--gauge<span class="w"> </span><span class="s2">"Filling the tank"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">0</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">$DIALOG</span><span class="w"> </span>--infobox<span class="w"> </span><span class="s2">"This is a simple info box\n\nNo action required"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="w">    </span>sleep<span class="w"> </span><span class="m">3</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">$DIALOG</span><span class="w"> </span>--yesno<span class="w">  </span><span class="s2">"Do you like this demo?"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="p">;</span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nv">AnsYesNo</span><span class="o">=</span>Yes<span class="p">;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">AnsYesNo</span><span class="o">=</span>No<span class="p">;</span><span class="w"> </span><span class="k">fi</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">AnsInput</span><span class="o">=</span><span class="k">$(</span><span class="nv">$DIALOG</span><span class="w"> </span>--inputbox<span class="w"> </span><span class="s2">"A text:"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="s2">"Text here..."</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span>&gt;/dev/tty<span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-19"><code data-line-number="19"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">AnsPass</span><span class="o">=</span><span class="k">$(</span><span class="nv">$DIALOG</span><span class="w"> </span>--passwordbox<span class="w"> </span><span class="s2">"A secret:"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="s2">"First..."</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span>&gt;/dev/tty<span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-20"><code data-line-number="20"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">$DIALOG</span><span class="w"> </span>--textbox<span class="w"> </span>/etc/motd<span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-21"><code data-line-number="21"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">AnsCkLst</span><span class="o">=</span><span class="k">$(</span><span class="nv">$DIALOG</span><span class="w"> </span>--checklist<span class="w"> </span><span class="s2">"Check some..."</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-22"><code data-line-number="22"></code></a></td>
<td class="code"><code><span class="w">        </span>Correct<span class="w"> </span><span class="s2">"This demo is useful"</span><span class="w">        </span>off<span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-23"><code data-line-number="23"></code></a></td>
<td class="code"><code><span class="w">        </span>Fun<span class="w">        </span><span class="s2">"This demo is nice"</span><span class="w">        </span>off<span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-24"><code data-line-number="24"></code></a></td>
<td class="code"><code><span class="w">        </span>Strong<span class="w">        </span><span class="s2">"This demo is complex"</span><span class="w">        </span>on<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span>&gt;/dev/tty<span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-25"><code data-line-number="25"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">AnsRadio</span><span class="o">=</span><span class="k">$(</span><span class="nv">$DIALOG</span><span class="w"> </span>--radiolist<span class="w"> </span><span class="s2">"I will:"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-26"><code data-line-number="26"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="s2">" -1"</span><span class="w"> </span><span class="s2">"Downgrade this answer"</span><span class="w">        </span>off<span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-27"><code data-line-number="27"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="s2">"  0"</span><span class="w"> </span><span class="s2">"Not do anything"</span><span class="w">                </span>on<span class="w"> </span><span class="se">\</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-28"><code data-line-number="28"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="s2">" +1"</span><span class="w"> </span><span class="s2">"Upgrade this anser"</span><span class="w">        </span>off<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span>&gt;/dev/tty<span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-29"><code data-line-number="29"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">out</span><span class="o">=</span><span class="s2">"Your answers:\nLike: </span><span class="nv">$AnsYesNo</span><span class="s2">\nInput: </span><span class="nv">$AnsInput</span><span class="s2">\nSecret: </span><span class="nv">$AnsPass</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-30"><code data-line-number="30"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">$DIALOG</span><span class="w"> </span>--msgbox<span class="w"> </span><span class="s2">"</span><span class="nv">$out</span><span class="s2">\nAttribs: </span><span class="nv">$AnsCkLst</span><span class="s2">\nNote: </span><span class="nv">$AnsRadio</span><span class="s2">"</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">60</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-31"><code data-line-number="31"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="k">done</span>
</code></td>
</tr>
</table></div>
<p>More samples? Have a look at Using whiptail for choosing USB device and USB
removable storage selector: USBKeyChooser</p>
<h3>5. Using readline's history</h3>
<p>Example:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="nb">set</span><span class="w"> </span>-i
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="nv">HISTFILE</span><span class="o">=</span>~/.myscript.history
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="nb">history</span><span class="w"> </span>-c
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><span class="nb">history</span><span class="w"> </span>-r
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code>myread<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">read</span><span class="w"> </span>-e<span class="w"> </span>-p<span class="w"> </span><span class="s1">'&gt; '</span><span class="w"> </span><span class="nv">$1</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">history</span><span class="w"> </span>-s<span class="w"> </span><span class="si">${</span><span class="p">!1</span><span class="si">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="nb">trap</span><span class="w"> </span><span class="s1">'history -a;exit'</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="k">while</span><span class="w"> </span>myread<span class="w"> </span>line<span class="p">;</span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="si">${</span><span class="nv">line</span><span class="p">%% *</span><span class="si">}</span><span class="w"> </span><span class="k">in</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nb">exit</span><span class="w"> </span><span class="o">)</span><span class="w">  </span><span class="nb">break</span><span class="w"> </span><span class="p">;;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code><span class="w">        </span>*<span class="w">    </span><span class="o">)</span><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Doing something with '</span><span class="nv">$line</span><span class="s2">'"</span><span class="w"> </span><span class="p">;;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code><span class="w">      </span><span class="k">esac</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script/#-19"><code data-line-number="19"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="k">done</span>
</code></td>
</tr>
</table></div>
<p>This will create a file <code>.myscript.history</code> in your <code>$HOME</code> directory, than
you could use readline's history commands, like <code>Up</code>, <code>Down</code>, <code>Ctrl</code>+<code>r</code> and
others.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-does-could-not-find-or-load-main-class-mean/" class="u-url">What does "Could not find or load main class" mean?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-does-could-not-find-or-load-main-class-mean/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:08:38+08:00" itemprop="datePublished" title="2023-02-17 00:08">2023-02-17 00:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>A common problem that new Java developers experience is that their programs
fail to run with the error message: <code>Could not find or load main class ...</code></p>
<p>What does this mean, what causes it, and how should you fix it?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>The <code>java &lt;class-name&gt;</code> command syntax</h3>
<p>First of all, you need to understand the correct way to launch a program using
the <code>java</code> (or <code>javaw</code>) command.</p>
<p>The normal syntax1 is this:</p>
<div class="code"><pre class="code literal-block">    java [ &lt;options&gt; ] &lt;class-name&gt; [&lt;arg&gt; ...]
</pre></div>

<p>where <code>&lt;option&gt;</code> is a command line option (starting with a "-" character),
<code>&lt;class-name&gt;</code> is a fully qualified Java class name, and <code>&lt;arg&gt;</code> is an
arbitrary command line argument that gets passed to your application.</p>
<hr>
<p>1 - There are some other syntaxes which are described near the end of this
answer.</p>
<p>The fully qualified name (FQN) for the class is conventionally written as you
would in Java source code; e.g.</p>
<div class="code"><pre class="code literal-block">    packagename.packagename2.packagename3.ClassName
</pre></div>

<p>However some versions of the <code>java</code> command allow you to use slashes instead
of periods; e.g.</p>
<div class="code"><pre class="code literal-block">    packagename/packagename2/packagename3/ClassName
</pre></div>

<p>which (confusingly) looks like a file pathname, but isn't one. Note that the
term <em>fully qualified name</em> is standard Java terminology ... not something I
just made up to confuse you :-)</p>
<p>Here is an example of what a <code>java</code> command should look like:</p>
<div class="code"><pre class="code literal-block">    java -Xmx100m com.acme.example.ListUsers fred joe bert
</pre></div>

<p>The above is going to cause the <code>java</code> command to do the following:</p>
<ol>
<li>Search for the compiled version of the <code>com.acme.example.ListUsers</code> class.</li>
<li>Load the class.</li>
<li>Check that the class has a <code>main</code> method with <em>signature</em> , <em>return type</em> and <em>modifiers</em> given by <code>public static void main(String[])</code>. (Note, the method argument's name is <strong>NOT</strong> part of the signature.)</li>
<li>Call that method passing it the command line arguments ("fred", "joe", "bert") as a <code>String[]</code>.</li>
</ol>
<h3>Reasons why Java cannot find the class</h3>
<p>When you get the message "Could not find or load main class ...", that means
that the first step has failed. The <code>java</code> command was not able to find the
class. And indeed, the "..." in the message will be the <em>fully qualified class
name</em> that <code>java</code> is looking for.</p>
<p>So why might it be unable to find the class?</p>
<h3>Reason #1 - you made a mistake with the classname argument</h3>
<p>The first likely cause is that you may have provided the wrong class name. (Or
... the right class name, but in the wrong form.) Considering the example
above, here are a variety of <strong>wrong ways</strong> to specify the class name:</p>
<ul>
<li>Example #1 - a simple class name:<div class="code"><pre class="code literal-block">java ListUser
</pre></div>

</li>
</ul>
<p>When the class is declared in a package such as <code>com.acme.example</code>, then you
must use the full classname <em>including</em> the package name in the <code>java</code>
command; e.g.</p>
<div class="code"><pre class="code literal-block">    java com.acme.example.ListUser
</pre></div>

<ul>
<li>
<p>Example #2 - a filename or pathname rather than a class name:</p>
<div class="code"><pre class="code literal-block">java ListUser.class
</pre></div>

<p>java com/acme/example/ListUser.class</p>
</li>
<li>
<p>Example #3 - a class name with the casing incorrect:</p>
<div class="code"><pre class="code literal-block">java com.acme.example.listuser
</pre></div>

</li>
<li>
<p>Example #4 - a typo</p>
<div class="code"><pre class="code literal-block">java com.acme.example.mistuser
</pre></div>

</li>
<li>
<p>Example #5 - a source filename (except for Java 11 or later; see below)</p>
<div class="code"><pre class="code literal-block">java ListUser.java
</pre></div>

</li>
<li>
<p>Example #6 - you forgot the class name entirely</p>
<div class="code"><pre class="code literal-block">java lots of arguments
</pre></div>

</li>
</ul>
<h3>Reason #2 - the application's classpath is incorrectly specified</h3>
<p>The second likely cause is that the class name is correct, but that the <code>java</code>
command cannot find the class. To understand this, you need to understand the
concept of the "classpath". This is explained <em>well</em> by the Oracle
documentation:</p>
<ul>
<li>The <code>java</code> command documentation</li>
<li>Setting the Classpath.</li>
<li>The Java Tutorial - PATH and CLASSPATH</li>
</ul>
<p>So ... if you have specified the class name correctly, the next thing to check
is that you have specified the classpath correctly:</p>
<ol>
<li>Read the three documents linked above. (Yes ... READ them! It is important that a Java programmer <em>understands</em> at least the basics of how the Java classpath mechanisms works.)</li>
<li>Look at command line and / or the CLASSPATH environment variable that is in effect when you run the <code>java</code> command. Check that the directory names and JAR file names are correct.</li>
<li>If there are <em>relative</em> pathnames in the classpath, check that they resolve correctly ... from the current directory that is in effect when you run the <code>java</code> command.</li>
<li>Check that the class (mentioned in the error message) can be located on the <em>effective</em> classpath.</li>
<li>Note that the classpath syntax is <em>different</em> for Windows versus Linux and Mac OS. (The classpath separator is <code>;</code> on Windows and <code>:</code> on the others. If you use the wrong separator for your platform, you won't get an explicit error message. Instead, you will get a nonexistent file or directory on the path that will be silently ignored.)</li>
</ol>
<h3>Reason #2a - the wrong directory is on the classpath</h3>
<p>When you put a directory on the classpath, it notionally corresponds to the
root of the qualified name space. Classes are located in the directory
structure beneath that root, <em>by mapping the fully qualified name to a
pathname</em>. So for example, if "/usr/local/acme/classes" is on the class path,
then when the JVM looks for a class called <code>com.acme.example.Foon</code>, it will
look for a ".class" file with this pathname:</p>
<div class="code"><pre class="code literal-block">  /usr/local/acme/classes/com/acme/example/Foon.class
</pre></div>

<p>If you had put "/usr/local/acme/classes/com/acme/example" on the classpath,
then the JVM wouldn't be able to find the class.</p>
<h3>Reason #2b - the subdirectory path doesn't match the FQN</h3>
<p>If your classes FQN is <code>com.acme.example.Foon</code>, then the JVM is going to look
for "Foon.class" in the directory "com/acme/example":</p>
<ul>
<li>
<p>If your directory structure doesn't match the package naming as per the pattern above, the JVM won't find your class.</p>
</li>
<li>
<p>If you attempt <em>rename</em> a class by moving it, that will fail as well ... but the exception stacktrace will be different. It is liable to say something like this:</p>
<div class="code"><pre class="code literal-block">Caused by: java.lang.NoClassDefFoundError: &lt;path&gt; (wrong name: &lt;name&gt;)
</pre></div>

</li>
</ul>
<p>because the FQN in the class file doesn't match what the class loader is
expecting to find.</p>
<p>To give a concrete example, supposing that:</p>
<ul>
<li>you want to run <code>com.acme.example.Foon</code> class,</li>
<li>the full file path is <code>/usr/local/acme/classes/com/acme/example/Foon.class</code>,</li>
<li>your current working directory is <code>/usr/local/acme/classes/com/acme/example/</code>,</li>
</ul>
<p>then:</p>
<div class="code"><pre class="code literal-block"># wrong, FQN is needed
java Foon

# wrong, there is no `com/acme/example` folder in the current working directory
java com.acme.example.Foon

# wrong, similar to above
java -classpath . com.acme.example.Foon

# fine; relative classpath set
java -classpath ../../.. com.acme.example.Foon

# fine; absolute classpath set
java -classpath /usr/local/acme/classes com.acme.example.Foon
</pre></div>

<p>Notes:</p>
<ul>
<li>The <code>-classpath</code> option can be shortened to <code>-cp</code> in most Java releases. Check the respective manual entries for <code>java</code>, <code>javac</code> and so on.</li>
<li>Think carefully when choosing between absolute and relative pathnames in classpaths. Remember that a relative pathname may "break" if the current directory changes.</li>
</ul>
<h3>Reason #2c - dependencies missing from the classpath</h3>
<p>The classpath needs to include all of the <em>other</em> (non-system) classes that
your application depends on. (The system classes are located automatically,
and you rarely need to concern yourself with this.) For the main class to load
correctly, the JVM needs to find:</p>
<ul>
<li>the class itself.</li>
<li>all classes and interfaces in the superclass hierarchy (e.g. see Java class is present in classpath but startup fails with Error: Could not find or load main class)</li>
<li>all classes and interfaces that are referred to by means of variable or variable declarations, or method call or field access expressions.</li>
</ul>
<p>(Note: the JLS and JVM specifications allow some scope for a JVM to load
classes "lazily", and this can affect when a classloader exception is thrown.)</p>
<h3>Reason #3 - the class has been declared in the wrong package</h3>
<p>It occasionally happens that someone puts a source code file into the the
wrong folder in their source code tree, or they leave out the <code>package</code>
declaration. If you do this in an IDE, the IDE's compiler will tell you about
this immediately. Similarly if you use a decent Java build tool, the tool will
run <code>javac</code> in a way that will detect the problem. However, if you build your
Java code by hand, you can do it in such a way that the compiler doesn't
notice the problem, and the resulting ".class" file is not in the place that
you expect it to be.</p>
<h3>Still can't find the problem?</h3>
<p>There lots of things to check, and it is easy to miss something. Try adding
the <code>-Xdiag</code> option to the <code>java</code> command line (as the first thing after
<code>java</code>). It will output various things about class loading, and this may offer
you clues as to what the real problem is.</p>
<p>Also, consider possible problems caused by copying and pasting invisible or
non-ASCII characters from websites, documents and so on. And consider
"homoglyphs", where two letters or symbols look the same ... but aren't.</p>
<p>You may run into this problem if you have invalid or incorrect signatures in
<code>META-INF/*.SF</code>. You can try opening up the .jar in your favorite ZIP editor,
and removing files from <code>META-INF</code> until all you have is your <code>MANIFEST.MF</code>.
However this is NOT RECOMMENDED in general. (The invalid signature may be the
result of someone having injected malware into the original signed JAR file.
If you erase the invalid signature, you are in infecting your application with
the malware!) The recommended approach is to get hold of JAR files with valid
signatures, or rebuild them from the (authentic) original source code.</p>
<p>Finally, you can apparently run into this problem if there is a syntax error
in the <code>MANIFEST.MF</code> file (see https://stackoverflow.com/a/67145190/139985).</p>
<hr>
<h3>Alternative syntaxes for <code>java</code>
</h3>
<p>There are three alternative syntaxes for the launching Java programs using the
<code>java command</code>.</p>
<ol>
<li>The syntax used for launching an "executable" JAR file is as follows:<div class="code"><pre class="code literal-block">java [ &lt;options&gt; ] -jar &lt;jar-file-name&gt; [&lt;arg&gt; ...]
</pre></div>

</li>
</ol>
<p>e.g.</p>
<div class="code"><pre class="code literal-block">    java -Xmx100m -jar /usr/local/acme-example/listuser.jar fred
</pre></div>

<p>The name of the entry-point class (i.e. <code>com.acme.example.ListUser</code>) and the
classpath are specified in the MANIFEST of the JAR file.</p>
<ol>
<li>The syntax for launching an application from a module (Java 9 and later) is as follows:<div class="code"><pre class="code literal-block">java [ &lt;options&gt; ] --module &lt;module&gt;[/&lt;mainclass&gt;] [&lt;arg&gt; ...]
</pre></div>

</li>
</ol>
<p>The name of the entrypoint class is either defined by the <code>&lt;module&gt;</code> itself,
or is given by the optional <code>&lt;mainclass&gt;</code>.</p>
<ol>
<li>From Java 11 onwards, you can use the <code>java</code> command to compile and run a single source code file using the following syntax:<div class="code"><pre class="code literal-block">java [ &lt;options&gt; ] &lt;sourcefile&gt; [&lt;arg&gt; ...]
</pre></div>

</li>
</ol>
<p>where <code>&lt;sourcefile&gt;</code> is (typically) a file with the suffix ".java".</p>
<p>For more details, please refer to the official documentation for the <code>java</code>
command for the Java release that you are using.</p>
<hr>
<h3>IDEs</h3>
<p>A typical Java IDE has support for running Java applications in the IDE JVM
itself or in a child JVM. These are <em>generally</em> immune from this particular
exception, because the IDE uses its own mechanisms to construct the runtime
classpath, identify the main class and create the <code>java</code> command line.</p>
<p>However it is still possible for this exception to occur, if you do things
behind the back of the IDE. For example, if you have previously set up an
Application Launcher for your Java app in Eclipse, and you then moved the JAR
file containing the "main" class to a different place in the file system
<em>without telling Eclipse</em> , Eclipse would unwittingly launch the JVM with an
incorrect classpath.</p>
<p>In short, if you get this problem in an IDE, check for things like stale IDE
state, broken project references or broken launcher configurations.</p>
<p>It is also possible for an IDE to simply get confused. IDE's are hugely
complicated pieces of software comprising many interacting parts. Many of
these parts adopt various caching strategies in order to make the IDE as a
whole responsive. These can sometimes go wrong, and one possible symptom is
problems when launching applications. If you suspect this could be happening,
it is worth trying other things like restarting your IDE, rebuilding the
project and so on.</p>
<hr>
<h3>Other References</h3>
<ul>
<li>From the Oracle Java Tutorials - Common Problems (and Their Solutions)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>If your source code name is HelloWorld.java, your compiled code will be
<code>HelloWorld.class</code>.</p>
<p>You will get that error if you call it using:</p>
<div class="code"><pre class="code literal-block">java HelloWorld.class
</pre></div>

<p>Instead, use this:</p>
<div class="code"><pre class="code literal-block">java HelloWorld
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-184.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-182.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
