<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 245) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-245.html">
<link rel="prev" href="index-246.html" type="text/html">
<link rel="next" href="index-244.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-convert-a-float-number-to-a-whole-number-in-javascript/" class="u-url">How do I convert a float number to a whole number in JavaScript?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-convert-a-float-number-to-a-whole-number-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:57:02+08:00" itemprop="datePublished" title="2023-02-17 01:57">2023-02-17 01:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to convert a float to a whole number in JavaScript. Actually, I'd
like to know how to do BOTH of the standard conversions: by truncating and by
rounding. And efficiently, not via converting to a string and parsing.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">intvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="w"> </span><span class="n">floatvalue</span><span class="w"> </span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">intvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="w"> </span><span class="n">floatvalue</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
<span class="k">var</span><span class="w"> </span><span class="n">intvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="w"> </span><span class="n">floatvalue</span><span class="w"> </span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">Math</span><span class="o">.</span><span class="n">trunc</span><span class="err">`</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">ECMAScript</span><span class="w"> </span><span class="mi">6</span>
<span class="k">var</span><span class="w"> </span><span class="n">intvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="w"> </span><span class="n">floatvalue</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>Math object reference</p>
<hr>
<h4>Examples</h4>
<p><strong>Positive</strong></p>
<div class="code"><pre class="code literal-block"><span class="c1">// value=x        //  x=5          5&lt;x&lt;5.5      5.5&lt;=x&lt;6</span>

<span class="n">Math</span><span class="p">.</span><span class="nb">floor</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">//  5            5            5</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">ceil</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">  </span><span class="c1">//  5            6            6</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">//  5            5            6</span>
<span class="n">Math</span><span class="p">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">//  5            5            5</span>
<span class="n">parseInt</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">   </span><span class="c1">//  5            5            5</span>
<span class="o">~~</span><span class="n">value</span><span class="w">           </span><span class="c1">//  5            5            5</span>
<span class="n">value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">         </span><span class="c1">//  5            5            5</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="c1">//  5            5            5</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="c1">//  5            5            5</span>
<span class="n">value</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">value</span><span class="w"> </span>%<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">//  5            5            5</span>
</pre></div>

<p><strong>Negative</strong></p>
<div class="code"><pre class="code literal-block"><span class="c1">// value=x        // x=-5         -5&gt;x&gt;=-5.5   -5.5&gt;x&gt;-6</span>

<span class="n">Math</span><span class="p">.</span><span class="nb">floor</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// -5           -6           -6</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">ceil</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">  </span><span class="c1">// -5           -5           -5</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// -5           -5           -6</span>
<span class="n">Math</span><span class="p">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// -5           -5           -5</span>
<span class="n">parseInt</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">   </span><span class="c1">// -5           -5           -5</span>
<span class="n">value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">         </span><span class="c1">// -5           -5           -5</span>
<span class="o">~~</span><span class="n">value</span><span class="w">           </span><span class="c1">// -5           -5           -5</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="c1">// -5           -5           -5</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="c1">// 4294967291   4294967291   4294967291</span>
<span class="n">value</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">value</span><span class="w"> </span>%<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">// -5           -5           -5</span>
</pre></div>

<p><strong>Positive - Larger numbers</strong></p>
<div class="code"><pre class="code literal-block"><span class="c1">// x = Number.MAX_SAFE_INTEGER/10 // =900719925474099.1</span>

<span class="c1">// value=x            x=900719925474099    x=900719925474099.4  x=900719925474099.5</span>

<span class="n">Math</span><span class="p">.</span><span class="nb">floor</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">//  900719925474099      900719925474099      900719925474099</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">ceil</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">  </span><span class="c1">//  900719925474099      900719925474100      900719925474100</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">//  900719925474099      900719925474099      900719925474100</span>
<span class="n">Math</span><span class="p">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">//  900719925474099      900719925474099      900719925474099</span>
<span class="n">parseInt</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">   </span><span class="c1">//  900719925474099      900719925474099      900719925474099</span>
<span class="n">value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">         </span><span class="c1">//  858993459            858993459            858993459</span>
<span class="o">~~</span><span class="n">value</span><span class="w">           </span><span class="c1">//  858993459            858993459            858993459</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="c1">//  858993459            858993459            858993459</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="c1">//  858993459            858993459            858993459</span>
<span class="n">value</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">value</span><span class="w"> </span>%<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">//  900719925474099      900719925474099      900719925474099</span>
</pre></div>

<p><strong>Negative - Larger numbers</strong></p>
<div class="code"><pre class="code literal-block"><span class="c1">// x = Number.MAX_SAFE_INTEGER/10 * -1 // -900719925474099.1</span>

<span class="c1">// value = x      // x=-900719925474099   x=-900719925474099.5 x=-900719925474099.6</span>

<span class="n">Math</span><span class="p">.</span><span class="nb">floor</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// -900719925474099     -900719925474100     -900719925474100</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">ceil</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">  </span><span class="c1">// -900719925474099     -900719925474099     -900719925474099</span>
<span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// -900719925474099     -900719925474099     -900719925474100</span>
<span class="n">Math</span><span class="p">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="c1">// -900719925474099     -900719925474099     -900719925474099</span>
<span class="n">parseInt</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w">   </span><span class="c1">// -900719925474099     -900719925474099     -900719925474099</span>
<span class="n">value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">         </span><span class="c1">// -858993459           -858993459           -858993459</span>
<span class="o">~~</span><span class="n">value</span><span class="w">           </span><span class="c1">// -858993459           -858993459           -858993459</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="c1">// -858993459           -858993459           -858993459</span>
<span class="n">value</span><span class="w"> </span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">       </span><span class="c1">//  3435973837           3435973837           3435973837</span>
<span class="n">value</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">value</span><span class="w"> </span>%<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">// -900719925474099     -900719925474099     -900719925474099</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h3>Bitwise OR operator</h3>
<p>A bitwise or operator can be used to truncate floating point figures and it
works for positives as well as negatives:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">float2int</span><span class="w"> </span><span class="ss">(</span><span class="nv">value</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
}
</pre></div>

<p>Results</p>
<div class="code"><pre class="code literal-block">float2int(3.1) == 3
float2int(-3.1) == -3
float2int(3.9) == 3
float2int(-3.9) == -3
</pre></div>

<h3>Performance comparison?</h3>
<p>I've created a JSPerf test that compares performance between:</p>
<ul>
<li><code>Math.floor(val)</code></li>
<li>
<code>val | 0</code> bitwise <strong>OR</strong>
</li>
<li>
<code>~~val</code> bitwise <strong>NOT</strong>
</li>
<li><code>parseInt(val)</code></li>
</ul>
<p>that only works with positive numbers. In this case you're safe to use bitwise
operations well as <code>Math.floor</code> function.</p>
<p>But if you need your code to <strong>work with positives as well as negatives</strong> ,
then a bitwise operation is the fastest (OR being the preferred one). This
other JSPerf test compares the same where it's pretty obvious that because of
the additional sign checking <strong>Math is now the slowest</strong> of the four.</p>
<h3>Note</h3>
<p>As stated in comments, BITWISE operators operate on signed 32bit integers,
therefore large numbers will be converted, example:</p>
<div class="code"><pre class="code literal-block"><span class="mf">1234567890</span><span class="w">  </span><span class="err">|</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mf">1234567890</span>
<span class="mf">12345678901</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="o">-</span><span class="mf">539222987</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/passing-data-between-view-controllers/" class="u-url">Passing data between view controllers</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/passing-data-between-view-controllers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:56:24+08:00" itemprop="datePublished" title="2023-02-17 01:56">2023-02-17 01:56</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm new to iOS and Objective-C and the whole MVC paradigm and I'm stuck with
the following:</p>
<p>I have a view that acts as a data entry form and I want to give the user the
option to select multiple products. The products are listed on another view
with a <code>UITableViewController</code> and I have enabled multiple selections.</p>
<p>How do I transfer the data from one view to another? I will be holding the
selections on the <code>UITableView</code> in an array, but how do I then pass that back
to the previous data entry form view so it can be saved along with the other
data to Core Data on submission of the form?</p>
<p>I have surfed around and seen some people declare an array in the app
delegate. I read something about singletons, but I don't understand what these
are and I read something about creating a data model.</p>
<p>What would be the correct way of performing this and how would I go about it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This question seems to be very popular here on Stack Overflow so I thought I
would try and give a better answer to help out people starting in the world of
iOS like me.</p>
<p><strong>Passing Data Forward</strong></p>
<p>Passing data forward to a view controller from another view controller. You
would use this method if you wanted to pass an object/value from one view
controller to another view controller that you may be pushing on to a
navigation stack.</p>
<p>For this example, we will have <code>ViewControllerA</code> and <code>ViewControllerB</code></p>
<p>To pass a <code>BOOL</code> value from <code>ViewControllerA</code> to <code>ViewControllerB</code> we would do
the following.</p>
<ol>
<li>
<p>in <code>ViewControllerB.h</code> create a property for the <code>BOOL</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@property</span><span class="w"> </span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p">)</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="n">isSomethingEnabled</span><span class="p">;</span>
</pre></div>

</li>
<li>
<p>in <code>ViewControllerA</code> you need to tell it about <code>ViewControllerB</code> so use an</p>
<div class="code"><pre class="code literal-block"> <span class="c1">#import "ViewControllerB.h"</span>
</pre></div>

</li>
</ol>
<p>Then where you want to load the view, for example, <code>didSelectRowAtIndex</code> or
some <code>IBAction</code>, you need to set the property in <code>ViewControllerB</code> before you
push it onto the navigation stack.</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">viewControllerB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithNib</span><span class="o">:</span><span class="s">@"ViewControllerB"</span><span class="w"> </span><span class="n">bundle</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="w">    </span><span class="n">viewControllerB</span><span class="p">.</span><span class="n">isSomethingEnabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">    </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">pushViewController</span><span class="o">:</span><span class="n">viewControllerB</span><span class="w"> </span><span class="n">animated</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
</pre></div>

<p>This will set <code>isSomethingEnabled</code> in <code>ViewControllerB</code> to <code>BOOL</code> value <code>YES</code>.</p>
<p><strong>Passing Data Forward using Segues</strong></p>
<p>If you are using Storyboards you are most likely using segues and will need
this procedure to pass data forward. This is similar to the above but instead
of passing the data before you push the view controller, you use a method
called</p>
<div class="code"><pre class="code literal-block">-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
</pre></div>

<p>So to pass a <code>BOOL</code> from <code>ViewControllerA</code> to <code>ViewControllerB</code> we would do
the following:</p>
<ol>
<li>
<p>in <code>ViewControllerB.h</code> create a property for the <code>BOOL</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@property</span><span class="w"> </span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p">)</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="n">isSomethingEnabled</span><span class="p">;</span>
</pre></div>

</li>
<li>
<p>in <code>ViewControllerA</code> you need to tell it about <code>ViewControllerB</code>, so use an</p>
<div class="code"><pre class="code literal-block"> <span class="c1">#import "ViewControllerB.h"</span>
</pre></div>

</li>
<li>
<p>Create the segue from <code>ViewControllerA</code> to <code>ViewControllerB</code> on the storyboard and give it an identifier. In this example we'll call it <code>"showDetailSegue"</code></p>
</li>
<li>
<p>Next, we need to add the method to <code>ViewControllerA</code> that is called when any segue is performed. Because of this we need to detect which segue was called and then do something. In our example, we will check for <code>"showDetailSegue"</code> and if that's performed, we will pass our <code>BOOL</code> value to <code>ViewControllerB</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">prepareForSegue</span><span class="o">:</span><span class="p">(</span><span class="bp">UIStoryboardSegue</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="w"> </span><span class="n">sender</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span><span class="p">{</span>
<span class="w"> </span><span class="k">if</span><span class="p">([</span><span class="n">segue</span><span class="p">.</span><span class="n">identifier</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="s">@"showDetailSegue"</span><span class="p">]){</span>
<span class="w">     </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="p">.</span><span class="n">destinationViewController</span><span class="p">;</span>
<span class="w">     </span><span class="n">controller</span><span class="p">.</span><span class="n">isSomethingEnabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>

<p>}</p>
</li>
</ol>
<p>If you have your views embedded in a navigation controller, you need to change
the method above slightly to the following</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">prepareForSegue</span><span class="o">:</span><span class="p">(</span><span class="bp">UIStoryboardSegue</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="w"> </span><span class="n">sender</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">([</span><span class="n">segue</span><span class="p">.</span><span class="n">identifier</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="s">@"showDetailSegue"</span><span class="p">]){</span>
<span class="w">            </span><span class="bp">UINavigationController</span><span class="w"> </span><span class="o">*</span><span class="n">navController</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="bp">UINavigationController</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="p">.</span><span class="n">destinationViewController</span><span class="p">;</span>
<span class="w">            </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">navController</span><span class="p">.</span><span class="n">topViewController</span><span class="p">;</span>
<span class="w">            </span><span class="n">controller</span><span class="p">.</span><span class="n">isSomethingEnabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>

<p>This will set <code>isSomethingEnabled</code> in <code>ViewControllerB</code> to <code>BOOL</code> value <code>YES</code>.</p>
<p><strong>Passing Data Back</strong></p>
<p>To pass data back from <code>ViewControllerB</code> to <code>ViewControllerA</code> you need to use
<em>Protocols and Delegates</em> or <em>Blocks</em> , the latter can be used as a loosely
coupled mechanism for callbacks.</p>
<p>To do this we will make <code>ViewControllerA</code> a delegate of <code>ViewControllerB</code>.
This allows <code>ViewControllerB</code> to send a message back to <code>ViewControllerA</code>
enabling us to send data back.</p>
<p>For <code>ViewControllerA</code> to be a delegate of <code>ViewControllerB</code> it must conform to
<code>ViewControllerB</code>'s protocol which we have to specify. This tells
<code>ViewControllerA</code> which methods it must implement.</p>
<ol>
<li>
<p>In <code>ViewControllerB.h</code>, below the <code>#import</code>, but above <code>@interface</code> you specify the protocol.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@class</span><span class="w"> </span><span class="n">ViewControllerB</span><span class="p">;</span>
</pre></div>

<p>@protocol ViewControllerBDelegate <nsobject>
 - (void)addItemViewController:(ViewControllerB <em>)controller didFinishEnteringItem:(NSString </em>)item;
 @end</nsobject></p>
</li>
<li>
<p>Next still in the <code>ViewControllerB.h</code>, you need to set up a <code>delegate</code> property and synthesize in <code>ViewControllerB.m</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@property</span><span class="w"> </span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="n">weak</span><span class="p">)</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">&lt;</span><span class="n">ViewControllerBDelegate</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>
</pre></div>

</li>
<li>
<p>In <code>ViewControllerB</code> we call a message on the <code>delegate</code> when we pop the view controller.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">itemToPassBack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@"Pass this value back to ViewControllerA"</span><span class="p">;</span>
</pre></div>

<p>[self.delegate addItemViewController:self didFinishEnteringItem:itemToPassBack];</p>
</li>
<li>
<p>That's it for <code>ViewControllerB</code>. Now in <code>ViewControllerA.h</code>, tell <code>ViewControllerA</code> to import <code>ViewControllerB</code> and conform to its protocol.</p>
<div class="code"><pre class="code literal-block"> <span class="c1">#import "ViewControllerB.h"</span>
</pre></div>

<p>@interface ViewControllerA : UIViewController <viewcontrollerbdelegate></viewcontrollerbdelegate></p>
</li>
<li>
<p>In <code>ViewControllerA.m</code> implement the following method from our protocol</p>
<div class="code"><pre class="code literal-block"> - (void)addItemViewController:(ViewControllerB *)controller didFinishEnteringItem:(NSString *)item
</pre></div>

<p>{
     NSLog(@"This was returned from ViewControllerB %@", item);
 }</p>
</li>
<li>
<p>Before pushing <code>viewControllerB</code> to navigation stack we need to tell <code>ViewControllerB</code> that <code>ViewControllerA</code> is its delegate, otherwise we will get an error.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">viewControllerB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithNib</span><span class="o">:</span><span class="s">@"ViewControllerB"</span><span class="w"> </span><span class="n">bundle</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
</pre></div>

<p>viewControllerB.delegate = self
 [[self navigationController] pushViewController:viewControllerB animated:YES];</p>
</li>
</ol>
<hr>
<h4>References</h4>
<ol>
<li>Using Delegation to Communicate With Other View Controllers in the <em>View Controller Programming Guide</em>
</li>
<li>Delegate Pattern</li>
</ol>
<p><strong>NSNotification center</strong></p>
<p>It's another way to pass data.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Add an observer in controller(s) where you want to receive data</span>
<span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">addObserver</span><span class="o">:</span><span class="nb">self</span><span class="w"> </span><span class="n">selector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">handleDeepLinking</span><span class="o">:</span><span class="p">)</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="s">@"handleDeepLinking"</span><span class="w"> </span><span class="n">object</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>

<span class="p">-(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">handleDeepLinking:</span><span class="p">(</span><span class="bp">NSNotification</span><span class="w"> </span><span class="o">*</span><span class="p">)</span> <span class="nv">notification</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">id</span><span class="w"> </span><span class="n">someObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notification</span><span class="p">.</span><span class="n">object</span><span class="w"> </span><span class="c1">// Some custom object that was passed with notification fire.</span>
<span class="p">}</span>

<span class="c1">// Post notification</span>
<span class="kt">id</span><span class="w"> </span><span class="n">someObject</span><span class="p">;</span>
<span class="p">[</span><span class="bp">NSNotificationCenter</span><span class="p">.</span><span class="n">defaultCenter</span><span class="w"> </span><span class="n">postNotificationName</span><span class="o">:</span><span class="s">@"handleDeepLinking"</span><span class="w"> </span><span class="n">object</span><span class="o">:</span><span class="n">someObject</span><span class="p">];</span>
</pre></div>

<p><strong>Passing Data back from one class to another</strong> (A class can be any
controller, Network/session manager, UIView subclass or any other class)</p>
<p><em>Blocks are anonymous functions.</em></p>
<p>This example passes data from <strong>Controller B</strong> to <strong>Controller A</strong></p>
<p><strong>Define a block</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">@property</span><span class="w"> </span><span class="n">void</span><span class="p">(</span><span class="o">^</span><span class="n">selectedVoucherBlock</span><span class="p">)(</span><span class="n">NSString</span><span class="w"> </span><span class="o">*</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">ContollerA</span><span class="p">.</span><span class="n">h</span>
</pre></div>

<p><strong>Add block handler (listener)</strong></p>
<p>Where you need a value (for example, you need your API response in ControllerA
or you need ContorllerB data on A)</p>
<div class="code"><pre class="code literal-block"><span class="c1">// In ContollerA.m</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">];</span>
<span class="w">    </span><span class="n">__unsafe_unretained</span><span class="w"> </span><span class="k">typeof</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span><span class="w"> </span><span class="n">weakSelf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">;</span>
<span class="w">    </span><span class="nb">self</span><span class="p">.</span><span class="n">selectedVoucherBlock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">voucher</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">weakSelf</span><span class="o">-&gt;</span><span class="n">someLabel</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">voucher</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</pre></div>

<p><strong>Go to Controller B</strong></p>
<div class="code"><pre class="code literal-block"><span class="bp">UIStoryboard</span><span class="w"> </span><span class="o">*</span><span class="n">storyboard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">UIStoryboard</span><span class="w"> </span><span class="n">storyboardWithName</span><span class="o">:</span><span class="s">@"Main"</span><span class="w"> </span><span class="n">bundle</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="n">ControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">vc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">storyboard</span><span class="w"> </span><span class="n">instantiateViewControllerWithIdentifier</span><span class="o">:</span><span class="s">@"ControllerB"</span><span class="p">];</span>
<span class="n">vc</span><span class="p">.</span><span class="n">sourceVC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">;</span>
<span class="w">    </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">navigationController</span><span class="w"> </span><span class="n">pushViewController</span><span class="o">:</span><span class="n">vc</span><span class="w"> </span><span class="n">animated</span><span class="o">:</span><span class="nb">NO</span><span class="p">];</span>
</pre></div>

<p><strong>Fire block</strong></p>
<div class="code"><pre class="code literal-block"><span class="nt">-</span><span class="o">(</span><span class="nt">void</span><span class="o">)</span><span class="nt">tableView</span><span class="o">:(</span><span class="nt">UITableView</span><span class="w"> </span><span class="o">*)</span><span class="nt">tableView</span><span class="w"> </span><span class="nt">didSelectRowAtIndexPath</span><span class="o">:</span>
<span class="o">(</span><span class="nt">NSIndexPath</span><span class="w"> </span><span class="o">*)</span><span class="nt">indexPath</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">NSString</span><span class="w"> </span><span class="err">*voucher</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">vouchersArray</span><span class="cp">[</span><span class="nx">indexPath.row</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">if</span><span class="w"> </span><span class="err">(sourceVC.selectVoucherBlock)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">sourceVC.selectVoucherBlock(voucher)</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cp">[</span><span class="bp">self.</span><span class="nx nx-Member">navigationController</span><span class="w"> </span><span class="nx">popToViewController</span><span class="p">:</span><span class="nx">sourceVC</span><span class="w"> </span><span class="nx">animated</span><span class="p">:</span><span class="nx">YES</span><span class="cp">]</span><span class="o">;</span>
<span class="err">}</span>
</pre></div>

<p>Another Working Example for Blocks</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Swift</h2>
<p>There are tons and tons of explanations here and around Stack Overflow, but if
you are a beginner just trying to get something basic to work, try watching
this YouTube tutorial (It's what helped me to finally understand how to do
it).</p>
<ul>
<li>YouTube tutorial: <em>How to send data through segue (Swift)</em>
</li>
</ul>
<h2>Passing data forward to the next View Controller</h2>
<p>The following is an example based on the video. The idea is to pass a string
from the text field in the First View Controller to the label in the Second
View Controller.</p>
<p><img alt="Enter image description here" src="images/tpcnS.png"></p>
<p>Create the storyboard layout in the Interface Builder. To make the segue, you
just <code>Control</code> click on the button and drag over to the Second View
Controller.</p>
<p><strong>First View Controller</strong></p>
<p>The code for the First View Controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="k">class</span> <span class="nc">FirstViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">textField</span><span class="p">:</span> <span class="n">UITextField</span><span class="err">!</span>

    <span class="o">//</span> <span class="n">This</span> <span class="n">function</span> <span class="ow">is</span> <span class="n">called</span> <span class="n">before</span> <span class="n">the</span> <span class="n">segue</span>
    <span class="n">override</span> <span class="n">func</span> <span class="n">prepare</span><span class="p">(</span><span class="k">for</span> <span class="n">segue</span><span class="p">:</span> <span class="n">UIStoryboardSegue</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">Any</span><span class="err">?</span><span class="p">)</span> <span class="p">{</span>

        <span class="o">//</span> <span class="n">Get</span> <span class="n">a</span> <span class="n">reference</span> <span class="n">to</span> <span class="n">the</span> <span class="n">second</span> <span class="n">view</span> <span class="n">controller</span>
        <span class="n">let</span> <span class="n">secondViewController</span> <span class="o">=</span> <span class="n">segue</span><span class="o">.</span><span class="n">destination</span> <span class="k">as</span><span class="err">!</span> <span class="n">SecondViewController</span>

        <span class="o">//</span> <span class="n">Set</span> <span class="n">a</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">second</span> <span class="n">view</span> <span class="n">controller</span> <span class="k">with</span> <span class="n">the</span> <span class="n">String</span> <span class="n">to</span> <span class="k">pass</span>
        <span class="n">secondViewController</span><span class="o">.</span><span class="n">receivedString</span> <span class="o">=</span> <span class="n">textField</span><span class="o">.</span><span class="n">text</span><span class="err">!</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p><strong>Second View Controller</strong></p>
<p>And the code for the Second View Controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="k">class</span> <span class="nc">SecondViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">label</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>

    <span class="o">//</span> <span class="n">This</span> <span class="n">variable</span> <span class="n">will</span> <span class="n">hold</span> <span class="n">the</span> <span class="n">data</span> <span class="n">being</span> <span class="n">passed</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">First</span> <span class="n">View</span> <span class="n">Controller</span>
    <span class="n">var</span> <span class="n">receivedString</span> <span class="o">=</span> <span class="s2">""</span>

    <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="o">//</span> <span class="n">Used</span> <span class="n">the</span> <span class="n">text</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">First</span> <span class="n">View</span> <span class="n">Controller</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">label</span>
        <span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">receivedString</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p><strong>Don't forget</strong></p>
<ul>
<li>Hook up the outlets for the <code>UITextField</code> and the <code>UILabel</code>.</li>
<li>Set the first and second View Controllers to the appropriate Swift files in Interface Builder.</li>
</ul>
<h2>Passing data back to the previous View Controller</h2>
<p>To pass data back from the second view controller to the first view
controller, you use a protocol and a delegate. This video is a very clear walk
though of that process:</p>
<ul>
<li>YouTube tutorial: iOS Swift Basics Tutorial: Protocols and Delegates But also read this post to make sure you don't get into a strong reference cycle.</li>
</ul>
<p>The following is an example based on the video (with a few modifications).</p>
<p><img alt="Enter image description here" src="images/ypAga.png"></p>
<p>Create the storyboard layout in the Interface Builder. Again, to make the
segue, you just <code>Control</code> drag from the button to the Second View Controller.
Set the segue identifier to <code>showSecondViewController</code>. Also, don't forget to
hook up the outlets and actions using the names in the following code.</p>
<p><strong>First View Controller</strong></p>
<p>The code for the First View Controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="k">class</span> <span class="nc">FirstViewController</span><span class="p">:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">DataEnteredDelegate</span> <span class="p">{</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">label</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>

    <span class="n">override</span> <span class="n">func</span> <span class="n">prepare</span><span class="p">(</span><span class="k">for</span> <span class="n">segue</span><span class="p">:</span> <span class="n">UIStoryboardSegue</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">Any</span><span class="err">?</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">segue</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="s2">"showSecondViewController"</span> <span class="p">{</span>
            <span class="n">let</span> <span class="n">secondViewController</span> <span class="o">=</span> <span class="n">segue</span><span class="o">.</span><span class="n">destination</span> <span class="k">as</span><span class="err">!</span> <span class="n">SecondViewController</span>
            <span class="n">secondViewController</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">func</span> <span class="n">userDidEnterInformation</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">info</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Note the use of our custom <code>DataEnteredDelegate</code> protocol.</p>
<p><strong>Second View Controller and Protocol</strong></p>
<p>The code for the second view controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="o">//</span> <span class="n">Protocol</span> <span class="n">used</span> <span class="k">for</span> <span class="n">sending</span> <span class="n">data</span> <span class="n">back</span>
<span class="n">protocol</span> <span class="n">DataEnteredDelegate</span><span class="p">:</span> <span class="n">AnyObject</span> <span class="p">{</span>
    <span class="n">func</span> <span class="n">userDidEnterInformation</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">SecondViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>

    <span class="o">//</span> <span class="n">Making</span> <span class="n">this</span> <span class="n">a</span> <span class="n">weak</span> <span class="n">variable</span><span class="p">,</span> <span class="n">so</span> <span class="n">that</span> <span class="n">it</span> <span class="n">won</span><span class="s1">'t create a strong reference cycle</span>
    <span class="n">weak</span> <span class="n">var</span> <span class="n">delegate</span><span class="p">:</span> <span class="n">DataEnteredDelegate</span><span class="err">?</span> <span class="o">=</span> <span class="n">nil</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">textField</span><span class="p">:</span> <span class="n">UITextField</span><span class="err">!</span>

    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">sendTextBackButton</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>

        <span class="o">//</span> <span class="n">Call</span> <span class="n">this</span> <span class="n">method</span> <span class="n">on</span> <span class="n">whichever</span> <span class="k">class</span> <span class="nc">implements</span> <span class="n">our</span> <span class="n">delegate</span> <span class="n">protocol</span>
        <span class="n">delegate</span><span class="err">?</span><span class="o">.</span><span class="n">userDidEnterInformation</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="n">textField</span><span class="o">.</span><span class="n">text</span><span class="err">!</span><span class="p">)</span>

        <span class="o">//</span> <span class="n">Go</span> <span class="n">back</span> <span class="n">to</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">view</span> <span class="n">controller</span>
        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">navigationController</span><span class="err">?</span><span class="o">.</span><span class="n">popViewController</span><span class="p">(</span><span class="n">animated</span><span class="p">:</span> <span class="n">true</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Note that the <code>protocol</code> is outside of the View Controller class.</p>
<p>That's it. Running the app now, you should be able to send data back from the
second view controller to the first.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/when-are-you-supposed-to-use-escape-instead-of-encodeuri-encodeuricomponent/" class="u-url">When are you supposed to use escape instead of encodeURI / encodeURIComponent?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/when-are-you-supposed-to-use-escape-instead-of-encodeuri-encodeuricomponent/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:55:48+08:00" itemprop="datePublished" title="2023-02-17 01:55">2023-02-17 01:55</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When encoding a query string to be sent to a web server - when do you use
<code>escape()</code> and when do you use <code>encodeURI()</code> or <code>encodeURIComponent()</code>:</p>
<p>Use escape:</p>
<div class="code"><pre class="code literal-block">escape("% +&amp;=");
</pre></div>

<p>OR</p>
<p>use encodeURI() / encodeURIComponent()</p>
<div class="code"><pre class="code literal-block"><span class="n">encodeURI</span><span class="p">(</span><span class="s2">"http://www.google.com?var1=value1&amp;var2=value2"</span><span class="p">);</span>

<span class="n">encodeURIComponent</span><span class="p">(</span><span class="s2">"var1=value1&amp;var2=value2"</span><span class="p">);</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h2>escape()</h2>
<p>Don't use it! <code>escape()</code> is defined in section B.2.1.1 escape and the
introduction text of Annex B says:</p>
<blockquote>
<p>... All of the language features and behaviours specified in this annex have
one or more undesirable characteristics and in the absence of legacy usage
would be removed from this specification. ...<br>
 ... Programmers should not use or assume the existence of these features
and behaviours when writing new ECMAScript code....</p>
</blockquote>
<p>Behaviour:</p>
<p>https://developer.mozilla.org/en-
US/docs/Web/JavaScript/Reference/Global_Objects/escape</p>
<p>Special characters are encoded with the exception of: @*_+-./</p>
<p>The hexadecimal form for characters, whose code unit value is 0xFF or less, is
a two-digit escape sequence: <code>%xx</code>.</p>
<p>For characters with a greater code unit, the four-digit format <code>%uxxxx</code> is
used. This is not allowed within a query string (as defined in RFC3986):</p>
<div class="code"><pre class="code literal-block"><span class="n">query</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="w"> </span><span class="n">pchar</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"/"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"?"</span><span class="w"> </span><span class="p">)</span>
<span class="n">pchar</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="n">unreserved</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">pct</span><span class="o">-</span><span class="n">encoded</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">delims</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">":"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"@"</span>
<span class="n">unreserved</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">ALPHA</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">DIGIT</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"-"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"."</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"_"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"~"</span>
<span class="n">pct</span><span class="o">-</span><span class="n">encoded</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">"%"</span><span class="w"> </span><span class="n">HEXDIG</span><span class="w"> </span><span class="n">HEXDIG</span>
<span class="n">sub</span><span class="o">-</span><span class="n">delims</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s">"!"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"$"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"&amp;"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"'"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"("</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">")"</span>
<span class="w">              </span><span class="o">/</span><span class="w"> </span><span class="s">"*"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"+"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">","</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">";"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"="</span>
</pre></div>

<p>A percent sign is only allowed if it is directly followed by two hexdigits,
percent followed by <code>u</code> is not allowed.</p>
<h2>encodeURI()</h2>
<p>Use encodeURI when you want a working URL. Make this call:</p>
<div class="code"><pre class="code literal-block">encodeURI("http://www.example.org/a file with spaces.html")
</pre></div>

<p>to get:</p>
<div class="code"><pre class="code literal-block">http://www.example.org/a%20file%20with%20spaces.html
</pre></div>

<p>Don't call encodeURIComponent since it would destroy the URL and return</p>
<div class="code"><pre class="code literal-block">http%3A%2F%2Fwww.example.org%2Fa%20file%20with%20spaces.html
</pre></div>

<p>Note that encodeURI, like encodeURIComponent, does not escape the ' character.</p>
<h2>encodeURIComponent()</h2>
<p>Use encodeURIComponent when you want to encode the value of a URL parameter.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">encodeURIComponent</span><span class="p">(</span><span class="s2">"http://example.org/?a=12&amp;b=55"</span><span class="p">)</span>
</pre></div>

<p>Then you may create the URL you need:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://example.net/?param1="</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"&amp;param2=99"</span><span class="p">;</span>
</pre></div>

<p>And you will get this complete URL:</p>
<p><code>http://example.net/?param1=http%3A%2F%2Fexample.org%2F%Ffa%3D12%26b%3D55&amp;param2=99</code></p>
<p>Note that encodeURIComponent does not escape the <code>'</code> character. A common bug
is to use it to create html attributes such as <code>href='MyUrl'</code>, which could
suffer an injection bug. If you are constructing html from strings, either use
<code>"</code> instead of <code>'</code> for attribute quotes, or add an extra layer of encoding
(<code>'</code> can be encoded as %27).</p>
<p>For more information on this type of encoding you can check:
http://en.wikipedia.org/wiki/Percent-encoding</p>
<p><br></p>
<h3>Suggest</h3>
<p>The difference between <code>encodeURI()</code> and <code>encodeURIComponent()</code> are exactly 11
characters encoded by encodeURIComponent but not by encodeURI:</p>
<p><img alt="Table with the ten differences between encodeURI and
encodeURIComponent" src="https://i.imgur.com/rHWC1r1.png"></p>
<p>I generated this table easily with <strong>console.table</strong> in Google Chrome with
this code:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="k">for</span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">256</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="nb">char</span><span class="o">=</span><span class="nb nb-Type">String</span><span class="o">.</span><span class="n">fromCharCode</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">encodeURI</span><span class="p">(</span><span class="nb">char</span><span class="p">)</span><span class="o">!==</span><span class="n">encodeURIComponent</span><span class="p">(</span><span class="nb">char</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">arr</span><span class="o">.</span><span class="n">push</span><span class="p">({</span>
<span class="w">      </span><span class="n">character</span><span class="p">:</span><span class="nb">char</span><span class="p">,</span>
<span class="w">      </span><span class="n">encodeURI</span><span class="p">:</span><span class="n">encodeURI</span><span class="p">(</span><span class="nb">char</span><span class="p">),</span>
<span class="w">      </span><span class="n">encodeURIComponent</span><span class="p">:</span><span class="n">encodeURIComponent</span><span class="p">(</span><span class="nb">char</span><span class="p">)</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">console</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-246.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-244.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
