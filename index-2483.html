<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2483) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2483.html">
<link rel="prev" href="index-2484.html" type="text/html">
<link rel="next" href="index-2482.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-client-ip-address-in-asp-net-core/" class="u-url">How do I get client IP address in ASP.NET Core?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-client-ip-address-in-asp-net-core/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:29:18+08:00" itemprop="datePublished" title="2023-03-04 19:29">2023-03-04 19:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Can you please let me know how to get client IP address in ASP.NET when using
MVC 6. <code>Request.ServerVariables["REMOTE_ADDR"]</code> does not work.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The API has been updated. Not sure when it changed but according to Damien
Edwards in late December, you can now do this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">remoteIpAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="o">.</span><span class="n">HttpContext</span><span class="o">.</span><span class="n">Connection</span><span class="o">.</span><span class="n">RemoteIpAddress</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>In project.json add a dependency to:</p>
<div class="code"><pre class="code literal-block">"Microsoft.AspNetCore.HttpOverrides": "2.2.0"
</pre></div>

<p>In <code>Startup.cs</code>, in the <code>Configure()</code> method add:</p>
<div class="code"><pre class="code literal-block">app.UseForwardedHeaders(new ForwardedHeadersOptions
{
    ForwardedHeaders = ForwardedHeaders.XForwardedFor |
    ForwardedHeaders.XForwardedProto
});
</pre></div>

<p>And, of course:</p>
<div class="code"><pre class="code literal-block">using Microsoft.AspNetCore.HttpOverrides;
</pre></div>

<p>Then, I could get the ip by using:</p>
<div class="code"><pre class="code literal-block">Request.HttpContext.Connection.RemoteIpAddress
</pre></div>

<p>In my case, when debugging in VS I got always IpV6 localhost, but when
deployed on an IIS I got always the remote IP.</p>
<p>Some useful links: How do I get client IP address in ASP.NET CORE? and
RemoteIpAddress is always null</p>
<p>The <code>::1</code> is maybe because of:</p>
<blockquote>
<p>Connections termination at IIS, which then forwards to Kestrel, the v.next
web server, so connections to the web server are indeed from localhost.
(https://stackoverflow.com/a/35442401/5326387)</p>
</blockquote>
<p>Edit 12/2020: Thanks to SolidSnake: as of Dec 2020 the latest version is 2.2.0</p>
<p>Edit 06/2021: Thanks to Hakan Fıstık: In .NET 5 the namespace is
Microsoft.AspNetCore.Builder</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-execute-a-file-within-the-python-interpreter/" class="u-url">How to execute a file within the Python interpreter?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-execute-a-file-within-the-python-interpreter/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:27:54+08:00" itemprop="datePublished" title="2023-03-04 19:27">2023-03-04 19:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to execute a file with Python commands from within the interpreter.</p>
<p>EDIT: I'm trying to use variables and settings from that file, not to invoke a
separate process.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Several ways.</p>
<ul>
<li>
<p>From the shell</p>
<div class="code"><pre class="code literal-block">python someFile.py
</pre></div>

</li>
<li>
<p>From inside IDLE, hit <strong>F5</strong>.</p>
</li>
<li>
<p>If you're typing interactively, try this ( <strong>Python3</strong> ):</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="k">exec</span><span class="ss">(</span><span class="nv">open</span><span class="ss">(</span><span class="s2">"filename.py"</span><span class="ss">)</span>.<span class="nv">read</span><span class="ss">())</span>
</pre></div>

</li>
<li>
<p>For Python 2:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">variables</span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</pre></div>

<blockquote>
<blockquote>
<blockquote>
<p>execfile( "someFile.py", variables )
print variables # globals from the someFile module</p>
</blockquote>
</blockquote>
</blockquote>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p><strong>For Python 2:</strong></p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; execfile('filename.py')
</pre></div>

<p><strong>For Python 3:</strong></p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="n">exec</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s2">"filename.py"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="c1"># or</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">exec</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">"filename.py"</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
</pre></div>

<p>See the documentation. If you are using Python 3.0, see this question.</p>
<p>See answer by @S.Lott for an example of how you access globals from
filename.py after executing it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/detecting-input-change-in-jquery/" class="u-url">Detecting input change in jQuery?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/detecting-input-change-in-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:27:03+08:00" itemprop="datePublished" title="2023-03-04 19:27">2023-03-04 19:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When using jquery <code>.change</code> on an <code>input</code> the event will only be fired when
the input loses focus</p>
<p>In my case, I need to make a call to the service (check if value is valid) as
soon as the input value is changed. How could I accomplish this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>UPDATED for clarification and example</strong></p>
<p>examples: http://jsfiddle.net/pxfunc/5kpeJ/</p>
<p><strong>Method 1.<code>input</code> event</strong></p>
<p>In modern browsers use the <code>input</code> event. This event will fire when the user
is typing into a text field, pasting, undoing, basically anytime the value
changed from one value to another.</p>
<p>In jQuery do that like this</p>
<div class="code"><pre class="code literal-block">$('#someInput').bind('input', function() { 
    $(this).val() // get the current value of the input field.
});
</pre></div>

<p>starting with jQuery 1.7, replace <code>bind</code> with <code>on</code>:</p>
<div class="code"><pre class="code literal-block">$('#someInput').on('input', function() { 
    $(this).val() // get the current value of the input field.
});
</pre></div>

<p><strong>Method 2.<code>keyup</code> event</strong></p>
<p>For older browsers use the <code>keyup</code> event (this will fire once a key on the
keyboard has been released, this event can give a sort of false positive
because when "w" is released the input value is changed and the <code>keyup</code> event
fires, but also when the "shift" key is released the <code>keyup</code> event fires but
no change has been made to the input.). Also this method doesn't fire if the
user right-clicks and pastes from the context menu:</p>
<div class="code"><pre class="code literal-block">$('#someInput').keyup(function() {
    $(this).val() // get the current value of the input field.
});
</pre></div>

<p><strong>Method 3. Timer (<code>setInterval</code> or <code>setTimeout</code>)</strong></p>
<p>To get around the limitations of <code>keyup</code> you can set a timer to periodically
check the value of the input to determine a change in value. You can use
<code>setInterval</code> or <code>setTimeout</code> to do this timer check. See the marked answer on
this SO question: jQuery textbox change event or see the fiddle for a working
example using <code>focus</code> and <code>blur</code> events to start and stop the timer for a
specific input field</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you've got HTML5:</p>
<ul>
<li>
<code>oninput</code> (fires only when a change actually happens, but does so immediately)</li>
</ul>
<p>Otherwise you need to check for all these events which might indicate a change
to the input element's value:</p>
<ul>
<li><code>onchange</code></li>
<li>
<code>onkeyup</code> ( <strong>not</strong> <code>keydown</code> or <code>keypress</code> as the input's value won't have the new keystroke in it yet)</li>
<li>
<code>onpaste</code> (when supported)</li>
</ul>
<p>and maybe:</p>
<ul>
<li>
<code>onmouseup</code> (I'm not sure about this one)</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2484.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2482.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
