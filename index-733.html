<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 733) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-733.html">
<link rel="prev" href="index-734.html" type="text/html">
<link rel="next" href="index-732.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-indices-of-n-maximum-values-in-a-numpy-array/" class="u-url">How do I get indices of N maximum values in a NumPy array?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-indices-of-n-maximum-values-in-a-numpy-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:32:21+08:00" itemprop="datePublished" title="2023-02-17 14:32">2023-02-17 14:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>NumPy proposes a way to get the index of the maximum value of an array via
<code>np.argmax</code>.</p>
<p>I would like a similar thing, but returning the indexes of the <code>N</code> maximum
values.</p>
<p>For instance, if I have an array, <code>[1, 3, 2, 4, 5]</code>, then <code>nargmax(array,
n=3)</code> would return the indices <code>[4, 3, 1]</code> which correspond to the elements
<code>[5, 4, 3]</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Newer NumPy versions (1.8 and up) have a function called <code>argpartition</code> for
this. To get the indices of the four largest elements, do</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="k">array</span><span class="p">(</span><span class="o">[</span><span class="n">9, 4, 4, 3, 3, 9, 0, 4, 6, 0</span><span class="o">]</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">a</span>
<span class="k">array</span><span class="p">(</span><span class="o">[</span><span class="n">9, 4, 4, 3, 3, 9, 0, 4, 6, 0</span><span class="o">]</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">ind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">np</span><span class="p">.</span><span class="n">argpartition</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="o">[</span><span class="n">-4:</span><span class="o">]</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">ind</span>
<span class="k">array</span><span class="p">(</span><span class="o">[</span><span class="n">1, 5, 8, 0</span><span class="o">]</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">top4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">ind</span><span class="o">]</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">top4</span>
<span class="k">array</span><span class="p">(</span><span class="o">[</span><span class="n">4, 9, 6, 9</span><span class="o">]</span><span class="p">)</span>
</pre></div>

<p>Unlike <code>argsort</code>, this function runs in linear time in the worst case, but the
returned indices are not sorted, as can be seen from the result of evaluating
<code>a[ind]</code>. If you need that too, sort them afterwards:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">ind</span><span class="o">[</span><span class="n">np.argsort(a[ind</span><span class="o">]</span><span class="p">)</span><span class="err">]</span>
<span class="k">array</span><span class="p">(</span><span class="o">[</span><span class="n">1, 8, 5, 0</span><span class="o">]</span><span class="p">)</span>
</pre></div>

<p>To get the top- <em>k</em> elements in sorted order in this way takes O( <em>n</em> + <em>k</em>
log <em>k</em> ) time.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The simplest I've been able to come up with is:</p>
<div class="code"><pre class="code literal-block"><span class="s s-Atom">&gt;&gt;&gt;</span> <span class="s s-Atom">import</span> <span class="s s-Atom">numpy</span> <span class="s s-Atom">as</span> <span class="s s-Atom">np</span>
<span class="s s-Atom">&gt;&gt;&gt;</span> <span class="s s-Atom">arr</span> <span class="o">=</span> <span class="s s-Atom">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="s s-Atom">&gt;&gt;&gt;</span> <span class="s s-Atom">arr</span><span class="p">.</span><span class="nf">argsort</span><span class="p">()[</span><span class="o">-</span><span class="mi">3</span><span class="o">:</span><span class="p">][</span><span class="o">::-</span><span class="mi">1</span><span class="p">]</span>
<span class="nf">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>

<p>This involves a complete sort of the array. I wonder if <code>numpy</code> provides a
built-in way to do a partial sort; so far I haven't been able to find one.</p>
<p>If this solution turns out to be too slow (especially for small <code>n</code>), it may
be worth looking at coding something up in Cython.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-resolve-error-bad-index-fatal-index-file-corrupt-when-using-git/" class="u-url">How to resolve "Error: bad index – Fatal: index file corrupt" when using Git</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-resolve-error-bad-index-fatal-index-file-corrupt-when-using-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:31:54+08:00" itemprop="datePublished" title="2023-02-17 14:31">2023-02-17 14:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>After <code>git init</code>, I added and committed a few files, made some changes, added
and committed. Set up the git daemon (running under Cygwin on WinXP) and
cloned the repository once. Now, I get this error with the cloned repository:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>status
error:<span class="w"> </span>bad<span class="w"> </span>index<span class="w"> </span>file<span class="w"> </span>sha1<span class="w"> </span>signature
fatal:<span class="w"> </span>index<span class="w"> </span>file<span class="w"> </span>corrupt
</pre></div>

<p>Is there any way to fix this, other than getting a new copy of the repository?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If the problem is with the index as <strong>the staging area for commits</strong> (i.e.
<code>.git/index</code>), you can simply remove the index (make a backup copy if you
want), and then restore index to version in the last commit:</p>
<p>On OSX/Linux/Windows(With Git bash):</p>
<div class="code"><pre class="code literal-block">rm -f .git/index
git reset
</pre></div>

<p>On Windows (with CMD and not git bash):</p>
<div class="code"><pre class="code literal-block">del .git\index
git reset
</pre></div>

<p>(The <code>reset</code> command above is the same as <code>git reset --mixed HEAD</code>)</p>
<p>You can alternatively use lower level plumbing <code>git read-tree</code> instead of <code>git
reset</code>.</p>
<hr>
<p>If the problem is with <strong>index for packfile</strong> , you can recover it using <code>git
index-pack</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You may have accidentally corrupted the .git/index file with a sed on your
project root (refactoring perhaps?) with something like:</p>
<div class="code"><pre class="code literal-block">sed -ri -e "s/$SEACHPATTERN/$REPLACEMENTTEXT/g" $(grep -Elr "$SEARCHPATERN" "$PROJECTROOT")
</pre></div>

<p>to avoid this in the future, just ignore binary files with your grep/sed:</p>
<div class="code"><pre class="code literal-block">sed -ri -e "s/$SEACHPATTERN/$REPLACEMENTTEXT/g" $(grep -Elr --binary-files=without-match "$SEARCHPATERN" "$PROJECTROOT")
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/delete-forked-repo-from-github/" class="u-url">Delete forked repo from GitHub</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/delete-forked-repo-from-github/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:31:29+08:00" itemprop="datePublished" title="2023-02-17 14:31">2023-02-17 14:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm starting with git and GitHub and there's a project I'm watching on GitHub.
I unintentionally clicked to fork it. Now it appears as a new project to me.</p>
<p>I have some doubts about it:</p>
<ul>
<li>I know if commit or do another thing to my forked repo, it will be updated, but the updated code will take effect only after the project's author request the pull. Right?</li>
<li>If I go to admin panel on GitHub there's a delete option. If I delete it as the option above, will it make any effect in the original one or not?</li>
</ul>
<p>I'd like to delete it. By now I'm just studying the code and don't really need
the fork.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Deleting it will do nothing to the original project. Editing it will only edit
your fork on your repo page.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Deleting it will do nothing to the original project. Editing it will only edit
your fork on your repo page.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-734.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-732.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
