<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1921) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1921.html">
<link rel="prev" href="index-1922.html" type="text/html">
<link rel="next" href="index-1920.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-convert-a-pil-image-into-a-numpy-array/" class="u-url">How do I convert a PIL Image into a NumPy array?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-convert-a-pil-image-into-a-numpy-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:33:57+08:00" itemprop="datePublished" title="2023-03-03 12:33">2023-03-03 12:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I convert a PIL <code>Image</code> back and forth to a NumPy array so that I can
do faster pixel-wise transformations than PIL's <code>PixelAccess</code> allows? I can
convert it to a NumPy array via:</p>
<div class="code"><pre class="code literal-block">pic = Image.open("foo.jpg")
pix = numpy.array(pic.getdata()).reshape(pic.size[0], pic.size[1], 3)
</pre></div>

<p>But how do I load it back into the PIL <code>Image</code> after I've modified the array?
<code>pic.putdata()</code> isn't working well.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You're not saying how exactly <code>putdata()</code> is not behaving. I'm assuming you're
doing</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pic.putdata(a)
Traceback (most recent call last):
  File "...blablabla.../PIL/Image.py", line 1185, in putdata
    self.im.putdata(data, scale, offset)
SystemError: new style getargs format but argument is not a tuple
</pre></div>

<p>This is because <code>putdata</code> expects a sequence of tuples and you're giving it a
numpy array. This</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">list</span><span class="ss">(</span><span class="nv">tuple</span><span class="ss">(</span><span class="nv">pixel</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">pixel</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">pix</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">pic</span>.<span class="nv">putdata</span><span class="ss">(</span><span class="nv">data</span><span class="ss">)</span>
</pre></div>

<p>will work but it is very slow.</p>
<p>As of PIL 1.1.6, the "proper" way to convert between images and numpy arrays
is simply</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pix = numpy.array(pic)
</pre></div>

<p>although the resulting array is in a different format than yours (3-d array or
rows/columns/rgb in this case).</p>
<p>Then, after you make your changes to the array, you should be able to do
either <code>pic.putdata(pix)</code> or create a new image with <code>Image.fromarray(pix)</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Open <code>I</code> as an array:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; I = numpy.asarray(PIL.Image.open('test.jpg'))
</pre></div>

<p>Do some stuff to <code>I</code>, then, convert it back to an image:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; im = PIL.Image.fromarray(numpy.uint8(I))
</pre></div>

<p>Source: Filter numpy images with FFT, Python</p>
<p>If you want to do it explicitly for some reason, there are pil2array() and
array2pil() functions using getdata() on this page in correlation.zip.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/xcode-build-and-archive-from-command-line/" class="u-url">Xcode "Build and Archive" from command line</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/xcode-build-and-archive-from-command-line/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:33:31+08:00" itemprop="datePublished" title="2023-03-03 12:33">2023-03-03 12:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Xcode 3.2 provides an awesome new feature under the Build menu, "Build and
Archive" which generates an .ipa file suitable for Ad Hoc distribution. You
can also open the Organizer, go to "Archived Applications," and "Submit
Application to iTunesConnect."</p>
<p>Is there a way to use "Build and Archive" from the command line (as part of a
build script)? I'd assume that <code>xcodebuild</code> would be involved somehow, but the
<code>man</code> page doesn't seem to say anything about this.</p>
<p><strong>UPDATE</strong> Michael Grinich requested clarification; here's what exactly you
can't do with command-line builds, features you can ONLY do with Xcode's
Organizer after you "Build and Archive."</p>
<ol>
<li>You can click "Share Application..." to share your IPA with beta testers. As Guillaume points out below, due to some Xcode magic, this IPA file does not require a separately distributed .mobileprovision file that beta testers need to install; that's magical. No command-line script can do it. For example, Arrix's script (submitted May 1) does not meet that requirement.</li>
<li>More importantly, after you've beta tested a build, you can click "Submit Application to iTunes Connect" to submit that EXACT same build to Apple, the very binary you tested, without rebuilding it. That's impossible from the command line, because signing the app is part of the build process; you can sign bits for Ad Hoc beta testing OR you can sign them for submission to the App Store, but not both. No IPA built on the command-line can be beta tested on phones and then submitted directly to Apple.</li>
</ol>
<p>I'd love for someone to come along and prove me wrong: both of these features
work great in the Xcode GUI and cannot be replicated from the command line.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I found how to automate the build and archive process from the comand line, I
just wrote a blog article explaining how you can achieve that.</p>
<p>The command you have to use is <code>xcrun</code>:</p>
<div class="code"><pre class="code literal-block">/usr/bin/xcrun<span class="w"> </span>-sdk<span class="w"> </span>iphoneos<span class="w"> </span>PackageApplication<span class="w"> </span>\
-v<span class="w"> </span>"<span class="cp">${</span><span class="n">RELEASE_BUILDDIR</span><span class="cp">}</span>/<span class="cp">${</span><span class="n">APPLICATION_NAME</span><span class="cp">}</span>.app"<span class="w"> </span>\
-o<span class="w"> </span>"<span class="cp">${</span><span class="n">BUILD_HISTORY_DIR</span><span class="cp">}</span>/<span class="cp">${</span><span class="n">APPLICATION_NAME</span><span class="cp">}</span>.ipa"<span class="w"> </span>\
--sign<span class="w"> </span>"<span class="cp">${</span><span class="n">DEVELOPER_NAME</span><span class="cp">}</span>"<span class="w"> </span>\
--embed<span class="w"> </span>"<span class="cp">${</span><span class="n">PROVISONING_PROFILE</span><span class="cp">}</span>"
</pre></div>

<p>You will find all the details in the article. If you have any questions dont
hesitate to ask.</p>
<p><br></p>
<h3>Suggest</h3>
<p>With Xcode 4.2 you can use the -scheme flag to do this:</p>
<div class="code"><pre class="code literal-block">xcodebuild -scheme &lt;SchemeName&gt; archive
</pre></div>

<p>After this command the Archive will show up in the Xcode Organizer.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-set-a-value-to-a-file-input-in-html/" class="u-url">How to set a value to a file input in HTML?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-set-a-value-to-a-file-input-in-html/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:33:04+08:00" itemprop="datePublished" title="2023-03-03 12:33">2023-03-03 12:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I set the value of this?</p>
<div class="code"><pre class="code literal-block">&lt;input type="file" /&gt;
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You cannot set it to a client side disk file system path, due to security
reasons.</p>
<p>Imagine:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form</span><span class="w"> </span><span class="na">name=</span><span class="s">"foo"</span><span class="w"> </span><span class="na">method=</span><span class="s">"post"</span><span class="w"> </span><span class="na">enctype=</span><span class="s">"multipart/form-data"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"file"</span><span class="w"> </span><span class="na">value=</span><span class="s">"c:/passwords.txt"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;script&gt;</span>document.foo.submit();<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>You don't want the websites you visit to be able to do this, do you? =)</p>
<p>You can only set it to a publicly accessible web resource as seen in this
answer, but this is clearly not the same as a client side disk file system
path and it's therefore useless in that context.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can't.</p>
<p>The only way to set the value of a file input is by the user to select a file.</p>
<p>This is done for security reasons. Otherwise you would be able to create a
JavaScript that automatically uploads a specific file from the client's
computer.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1922.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1920.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
