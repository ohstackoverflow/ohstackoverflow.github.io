<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1823) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1823.html">
<link rel="prev" href="index-1824.html" type="text/html">
<link rel="next" href="index-1822.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/best-way-to-read-a-large-file-into-a-byte-array-in-c/" class="u-url">Best way to read a large file into a byte array in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/best-way-to-read-a-large-file-into-a-byte-array-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:12:17+08:00" itemprop="datePublished" title="2023-03-03 10:12">2023-03-03 10:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a web server which will read large binary files (several megabytes)
into byte arrays. The server could be reading several files at the same time
(different page requests), so I am looking for the most optimized way for
doing this without taxing the CPU too much. Is the code below good enough?</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">byte</span>[]<span class="w"> </span><span class="nv">FileToByteArray</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">fileName</span><span class="ss">)</span>
{
<span class="w">    </span><span class="nv">byte</span>[]<span class="w"> </span><span class="nv">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">null</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">FileStream</span><span class="w"> </span><span class="nv">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">FileStream</span><span class="ss">(</span><span class="nv">fileName</span>,<span class="w"> </span>
<span class="w">                                   </span><span class="nv">FileMode</span>.<span class="nv">Open</span>,<span class="w"> </span>
<span class="w">                                   </span><span class="nv">FileAccess</span>.<span class="nv">Read</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">BinaryReader</span><span class="w"> </span><span class="nv">br</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">BinaryReader</span><span class="ss">(</span><span class="nv">fs</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">long</span><span class="w"> </span><span class="nv">numBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">FileInfo</span><span class="ss">(</span><span class="nv">fileName</span><span class="ss">)</span>.<span class="nv">Length</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">buff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">br</span>.<span class="nv">ReadBytes</span><span class="ss">((</span><span class="nv">int</span><span class="ss">)</span><span class="w"> </span><span class="nv">numBytes</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">buff</span><span class="c1">;</span>
}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Simply replace the whole thing with:</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span><span class="nv">File</span>.<span class="nv">ReadAllBytes</span><span class="ss">(</span><span class="nv">fileName</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>However, if you are concerned about the memory consumption, you should <em>not</em>
read the whole file into memory all at once at all. You should do that in
chunks.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I might argue that the answer here <em>generally</em> is "don't". Unless you
<em>absolutely need</em> all the data at once, consider using a <code>Stream</code>-based API
(or some variant of reader / iterator). That is <em>especially</em> important when
you have multiple parallel operations (as suggested by the question) to
minimise system load and maximise throughput.</p>
<p>For example, if you are streaming data to a caller:</p>
<div class="code"><pre class="code literal-block"><span class="nv">Stream</span><span class="w"> </span><span class="nv">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>...
<span class="nv">using</span><span class="ss">(</span><span class="nv">Stream</span><span class="w"> </span><span class="nv">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">File</span>.<span class="nv">OpenRead</span><span class="ss">(</span><span class="nv">path</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">byte</span>[]<span class="w"> </span><span class="nv">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">byte</span>[<span class="mi">2048</span>]<span class="c1">;</span>
<span class="w">    </span><span class="nv">int</span><span class="w"> </span><span class="nv">bytesRead</span><span class="c1">;</span>
<span class="w">    </span><span class="k">while</span><span class="ss">((</span><span class="nv">bytesRead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">source</span>.<span class="nv">Read</span><span class="ss">(</span><span class="nv">buffer</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="nv">buffer</span>.<span class="nv">Length</span><span class="ss">))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">dest</span>.<span class="nv">Write</span><span class="ss">(</span><span class="nv">buffer</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="nv">bytesRead</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span>}
}
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/django-order-by-query-set-ascending-and-descending/" class="u-url">django order_by query set, ascending and descending</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/django-order-by-query-set-ascending-and-descending/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:11:55+08:00" itemprop="datePublished" title="2023-03-03 10:11">2023-03-03 10:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I order by descending my query set in django by date?</p>
<div class="code"><pre class="code literal-block">Reserved.objects.all().filter(client=client_id).order_by('check_in')
</pre></div>

<p>I just want to filter from descending all the Reserved by check_in date.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">Reserved.objects.filter(client=client_id).order_by('-check_in')
</pre></div>

<p>Notice the <code>-</code> before <code>check_in</code>.</p>
<p>Django Documentation</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">Reserved.objects.filter(client=client_id).order_by('-check_in')
</pre></div>

<p>A hyphen "-" in front of "check_in" indicates descending order. Ascending
order is implied.</p>
<p>We don't have to add an all() before filter(). That would still work, but you
only need to add all() when you want all objects from the root QuerySet.</p>
<p>More on this here:
https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-
objects-with-filters</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-check-if-a-string-contains-another-string-in-a-case-insensitive-manner-in-java/" class="u-url">How to check if a String contains another String in a case insensitive manner in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-check-if-a-string-contains-another-string-in-a-case-insensitive-manner-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:11:30+08:00" itemprop="datePublished" title="2023-03-03 10:11">2023-03-03 10:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Say I have two strings,</p>
<div class="code"><pre class="code literal-block">String s1 = "AbBaCca";
String s2 = "bac";
</pre></div>

<p>I want to perform a check returning that <code>s2</code> is contained within <code>s1</code>. I can
do this with:</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span><span class="nv">s1</span>.<span class="nv">contains</span><span class="ss">(</span><span class="nv">s2</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>I am pretty sure that <code>contains()</code> is case sensitive, however I can't
determine this for sure from reading the documentation. If it is then I
suppose my best method would be something like:</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span><span class="nv">s1</span>.<span class="nv">toLowerCase</span><span class="ss">()</span>.<span class="nv">contains</span><span class="ss">(</span><span class="nv">s2</span>.<span class="nv">toLowerCase</span><span class="ss">())</span><span class="c1">;</span>
</pre></div>

<p>All this aside, is there another (possibly better) way to accomplish this
without caring about case-sensitivity?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Yes, contains is case sensitive. You can use java.util.regex.Pattern with the
CASE_INSENSITIVE flag for case insensitive matching:</p>
<div class="code"><pre class="code literal-block">Pattern.compile(Pattern.quote(wantedStr), Pattern.CASE_INSENSITIVE).matcher(source).find();
</pre></div>

<p><strong>EDIT:</strong> If s2 contains regex special characters (of which there are many)
it's important to quote it first. I've corrected my answer since it is the
first one people will see, but vote up Matt Quail's since he pointed this out.</p>
<p><br></p>
<h3>Suggest</h3>
<p>One problem with the answer by Dave L. is when s2 contains regex markup such
as <code>\d</code>, etc.</p>
<p>You want to call Pattern.quote() on s2:</p>
<div class="code"><pre class="code literal-block">Pattern.compile(Pattern.quote(s2), Pattern.CASE_INSENSITIVE).matcher(s1).find();
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1824.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1822.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
