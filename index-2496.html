<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2496) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2496.html">
<link rel="prev" href="index-2497.html" type="text/html">
<link rel="next" href="index-2495.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/git-on-windows-how-do-you-set-up-a-mergetool/" class="u-url">Git on Windows: How do you set up a mergetool?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/git-on-windows-how-do-you-set-up-a-mergetool/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T20:30:29+08:00" itemprop="datePublished" title="2023-03-04 20:30">2023-03-04 20:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've tried msysGit and Git on Cygwin. Both work just fine in and of themselves
and both run gitk and git-gui perfectly.</p>
<p>Now how the heck do I configure a mergetool? (Vimdiff works on Cygwin, but
preferably I would like something a little more user-friendly for some of our
Windows-loving coworkers.)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To follow-up on Charles Bailey's answer, here's my git setup that's using
p4merge (free cross-platform 3way merge tool); tested on msys Git (Windows)
install:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">merge</span><span class="o">.</span><span class="k">tool</span><span class="w"> </span><span class="n">p4merge</span>
<span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">mergetool</span><span class="o">.</span><span class="n">p4merge</span><span class="o">.</span><span class="n">cmd</span><span class="w"> </span><span class="s1">'p4merge.exe </span><span class="se">\"</span><span class="s1">$BASE</span><span class="se">\"</span><span class="s1"> </span><span class="se">\"</span><span class="s1">$LOCAL</span><span class="se">\"</span><span class="s1"> </span><span class="se">\"</span><span class="s1">$REMOTE</span><span class="se">\"</span><span class="s1"> </span><span class="se">\"</span><span class="s1">$MERGED</span><span class="se">\"</span><span class="s1">'</span>
</pre></div>

<p>or, from a windows cmd.exe shell, the second line becomes :</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">mergetool</span><span class="o">.</span><span class="n">p4merge</span><span class="o">.</span><span class="n">cmd</span><span class="w"> </span><span class="s2">"p4merge.exe </span><span class="se">\"</span><span class="s2">$BASE</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">$LOCAL</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">$REMOTE</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">$MERGED</span><span class="se">\"</span><span class="s2">"</span>
</pre></div>

<p>The changes (relative to Charles Bailey):</p>
<ul>
<li>added to global git config, i.e. valid for all git projects not just the current one</li>
<li>the custom tool config value resides in "mergetool.[tool].cmd", not "merge.[tool].cmd" (silly me, spent an hour troubleshooting why git kept complaining about non-existing tool)</li>
<li>added double quotes for all file names so that files with spaces can still be found by the merge tool (I tested this in msys Git from Powershell)</li>
<li>note that by default Perforce will add its installation dir to PATH, thus no need to specify full path to p4merge in the command</li>
</ul>
<p>Download: http://www.perforce.com/product/components/perforce-visual-merge-
and-diff-tools</p>
<hr>
<p><strong>EDIT</strong> (Feb 2014)</p>
<p>As pointed out by @Gregory Pakosz, latest msys git now "natively" supports
<strong>p4merge</strong> (tested on <em>1.8.5.2.msysgit.0</em> ).</p>
<p>You can display list of supported tools by running:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">mergetool</span><span class="w"> </span><span class="o">--</span><span class="k">tool</span><span class="o">-</span><span class="n">help</span>
</pre></div>

<p>You should see <em>p4merge</em> in either <em>available</em> or <em>valid</em> list. If not, please
update your git.</p>
<p>If <em>p4merge</em> was listed as <em>available</em> , it is in your <em>PATH</em> and you only
have to set <em>merge.tool</em> :</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">merge</span><span class="o">.</span><span class="k">tool</span><span class="w"> </span><span class="n">p4merge</span>
</pre></div>

<p>If it was listed as <em>valid</em> , you have to define <em>mergetool.p4merge.path</em> in
addition to <em>merge.tool</em> :</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">mergetool</span><span class="o">.</span><span class="n">p4merge</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="n">c</span><span class="p">:</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">login</span><span class="o">/</span><span class="n">AppData</span><span class="o">/</span><span class="n">Local</span><span class="o">/</span><span class="n">Perforce</span><span class="o">/</span><span class="n">p4merge</span><span class="o">.</span><span class="n">exe</span>
</pre></div>

<ul>
<li>The above is an example path when p4merge was installed for the current user, not system-wide (does not need admin rights or UAC elevation)</li>
<li>Although <code>~</code> should expand to current user's home directory (so in theory the path should be <code>~/AppData/Local/Perforce/p4merge.exe</code>), this did not work for me</li>
<li>Even better would have been to take advantage of an environment variable (e.g. <code>$LOCALAPPDATA/Perforce/p4merge.exe</code>), git does not seem to be expanding environment variables for paths (if you know how to get this working, please let me know or update this answer)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>setting mergetool.p4merge.cmd will not work anymore since Git has started
trying to support p4merge, see libexec/git-core/git-mergetool--lib.so we just
need to specify the mergetool path for git,for example the p4merge:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">mergetool</span><span class="o">.</span><span class="n">p4merge</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="s1">'C:\Program Files\Perforce\p4merge.exe'</span>
<span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">merge</span><span class="o">.</span><span class="k">tool</span><span class="w"> </span><span class="n">p4merge</span>
</pre></div>

<p>Then it will work.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-schema-database-in-mysql/" class="u-url">Difference Between Schema / Database in MySQL</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-schema-database-in-mysql/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T20:30:08+08:00" itemprop="datePublished" title="2023-03-04 20:30">2023-03-04 20:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a difference between a schema and a database in MySQL? In SQL Server,
a database is a higher level container in relation to a schema.</p>
<p>I read that <code>Create Schema</code> and <code>Create Database</code> do essentially the same
thing in MySQL, which leads me to believe that schemas and databases are
different words for the same objects.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As defined in the MySQL Glossary:</p>
<blockquote>
<p>In MySQL, physically, a <strong><em>schema</em></strong> is synonymous with a <strong><em>database</em></strong>.
You can substitute the keyword <code>SCHEMA</code> instead of <code>DATABASE</code> in MySQL SQL
syntax, for example using <code>CREATE SCHEMA</code> instead of <code>CREATE DATABASE</code>.</p>
<p>Some other database products draw a distinction. For example, in the Oracle
Database product, a <strong><em>schema</em></strong> represents only a part of a database: the
tables and other objects owned by a single user.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Depends on the database server. <code>MySQL</code> doesn't care, its basically the same
thing.</p>
<p><code>Oracle</code>, <code>DB2</code>, and other enterprise level database solutions make a
distinction. Usually a <strong>schema is a collection of tables</strong> and a <strong>Database
is a collection of schemas.</strong></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-use-a-reentrantlock-if-one-can-use-synchronized-this/" class="u-url">Why use a ReentrantLock if one can use synchronized(this)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-use-a-reentrantlock-if-one-can-use-synchronized-this/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T20:28:49+08:00" itemprop="datePublished" title="2023-03-04 20:28">2023-03-04 20:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to understand what makes the lock in concurrency so important if
one can use <code>synchronized (this)</code>. In the dummy code below, I can do either:</p>
<ol>
<li>synchronized the entire method or synchronize the vulnerable area (<code>synchronized(this){...}</code>)</li>
<li>OR lock the vulnerable code area with a ReentrantLock.</li>
</ol>
<p>Code:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">final</span><span class="w"> </span><span class="nv">ReentrantLock</span><span class="w"> </span><span class="nv">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">ReentrantLock</span><span class="ss">()</span><span class="c1">; </span>
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">List</span><span class="o">&lt;</span><span class="nv">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">ints</span><span class="c1">;</span>

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">Integer</span><span class="w"> </span><span class="nv">getResult</span><span class="ss">(</span><span class="nv">String</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span><span class="w"> </span>{<span class="w"> </span>
<span class="w">        </span>.
<span class="w">        </span>.
<span class="w">        </span>.
<span class="w">        </span><span class="nv">lock</span>.<span class="nv">lock</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">try</span><span class="w"> </span>{
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">ints</span>.<span class="nv">size</span><span class="ss">()</span><span class="o">==</span><span class="mi">3</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">                </span><span class="nv">ints</span><span class="o">=</span><span class="nv">null</span><span class="c1">;</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="mi">9</span><span class="c1">;</span>
<span class="w">            </span>}

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">x</span><span class="o">=</span><span class="mi">0</span><span class="c1">; x&lt;ints.size(); x++) {</span>
<span class="w">                </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"["</span><span class="o">+</span><span class="nv">name</span><span class="o">+</span><span class="s2">"] "</span><span class="o">+</span><span class="nv">x</span><span class="o">+</span><span class="s2">"/"</span><span class="o">+</span><span class="nv">ints</span>.<span class="nv">size</span><span class="ss">()</span><span class="o">+</span><span class="s2">". values &gt;&gt;&gt;&gt;"</span><span class="o">+</span><span class="nv">ints</span>.<span class="nv">get</span><span class="ss">(</span><span class="nv">x</span><span class="ss">))</span><span class="c1">;</span>
<span class="w">            </span>}

<span class="w">        </span>}<span class="w"> </span><span class="nv">finally</span><span class="w"> </span>{
<span class="w">            </span><span class="nv">lock</span>.<span class="nv">unlock</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span>}<span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">random</span><span class="c1">;</span>
}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>A ReentrantLock is <em>unstructured</em> , unlike <code>synchronized</code> constructs -- i.e.
you don't need to use a block structure for locking and can even hold a lock
across methods. An example:</p>
<div class="code"><pre class="code literal-block">private ReentrantLock lock;

public void foo() {
  ...
  lock.lock();
  ...
}

public void bar() {
  ...
  lock.unlock();
  ...
}
</pre></div>

<p>Such flow is impossible to represent via a single monitor in a <code>synchronized</code>
construct.</p>
<hr>
<p>Aside from that, <code>ReentrantLock</code> supports lock polling and interruptible lock
waits that support time-out. <code>ReentrantLock</code> also has support for configurable
<em>fairness</em> policy, allowing more flexible thread scheduling.</p>
<blockquote>
<p>The constructor for this class accepts an optional <em>fairness</em> parameter.
When set <code>true</code>, under contention, locks favor granting access to the
longest-waiting thread. Otherwise this lock does not guarantee any
particular access order. Programs using fair locks accessed by many threads
may display lower overall throughput (i.e., are slower; often much slower)
than those using the default setting, but have smaller variances in times to
obtain locks and guarantee lack of starvation. Note however, that fairness
of locks does not guarantee fairness of thread scheduling. Thus, one of many
threads using a fair lock may obtain it multiple times in succession while
other active threads are not progressing and not currently holding the lock.
Also note that the untimed <code>tryLock</code> method does not honor the fairness
setting. It will succeed if the lock is available even if other threads are
waiting.</p>
</blockquote>
<hr>
<p><code>ReentrantLock</code> <strong>may</strong> also be <strong>more scalable</strong> , performing much better
under higher contention. You can read more about this here.</p>
<p>This claim has been contested, however; see the following comment:</p>
<blockquote>
<p>In the reentrant lock test, a new lock is created each time, thus there is
no exclusive locking and the resulting data is invalid. Also, the IBM link
offers no source code for the underlying benchmark so its impossible to
characterize whether the test was even conducted correctly.</p>
</blockquote>
<hr>
<p>When should you use <code>ReentrantLock</code>s? According to that developerWorks
article...</p>
<blockquote>
<p>The answer is pretty simple -- use it when you actually need something it
provides that <code>synchronized</code> doesn't, like timed lock waits, interruptible
lock waits, non-block-structured locks, multiple condition variables, or
lock polling. <code>ReentrantLock</code> also has scalability benefits, and you should
use it if you actually have a situation that exhibits high contention, but
remember that the vast majority of <code>synchronized</code> blocks hardly ever exhibit
any contention, let alone high contention. I would advise developing with
synchronization until synchronization has proven to be inadequate, rather
than simply assuming "the performance will be better" if you use
<code>ReentrantLock</code>. Remember, these are advanced tools for advanced users. (And
truly advanced users tend to prefer the simplest tools they can find until
they're convinced the simple tools are inadequate.) As always, make it right
first, and then worry about whether or not you have to make it faster.</p>
</blockquote>
<hr>
<p>One final aspect that's gonna become more relevant in the near future has to
do with Java 15 and Project Loom. In the (new) world of virtual threads, the
underlying scheduler would be able to work much better with <code>ReentrantLock</code>
than it's able to do with <code>synchronized</code>, that's true at least in the initial
Java 15 release but may be optimized later.</p>
<blockquote>
<p>In the current Loom implementation, a virtual thread can be pinned in two
situations: when there is a native frame on the stack — when Java code calls
into native code (JNI) that then calls back into Java — and when inside a
<code>synchronized</code> block or method. In those cases, blocking the virtual thread
will block the physical thread that carries it. Once the native call
completes or the monitor released (the <code>synchronized</code> block/method is
exited) the thread is unpinned.</p>
<p>If you have a common I/O operation guarded by a <code>synchronized</code>, replace the
monitor with a <code>ReentrantLock</code> to let your application benefit fully from
Loom’s scalability boost even before we fix pinning by monitors (or, better
yet, use the higher-performance <code>StampedLock</code> if you can).</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p><code>ReentrantReadWriteLock</code> is a specialized lock whereas <code>synchronized(this)</code> is
a general purpose lock. They are similar but not quite the same.</p>
<p>You are right in that you could use <code>synchronized(this)</code> instead of
<code>ReentrantReadWriteLock</code> but the opposite is not always true.</p>
<p>If you'd like to better understand what makes <code>ReentrantReadWriteLock</code> special
look up some information about producer-consumer thread synchronization.</p>
<p>In general you can remember that whole-method synchronization and general
purpose synchronization (using the <code>synchronized</code> keyword) can be used in most
applications without thinking <em>too much</em> about the semantics of the
synchronization but if you need to squeeze performance out of your code you
may need to explore other more fine-grained, or special-purpose
synchronization mechanisms.</p>
<p>By the way, using <code>synchronized(this)</code> - and in general locking using a
public class instance - can be problematic because it opens up your code to
potential dead-locks because somebody else not knowingly might try to lock
against your object somewhere else in the program.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2497.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2495.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
