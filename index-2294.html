<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2294) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2294.html">
<link rel="prev" href="index-2295.html" type="text/html">
<link rel="next" href="index-2293.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/resize-image-in-the-wiki-of-github-using-markdown/" class="u-url">Resize image in the wiki of GitHub using Markdown</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/resize-image-in-the-wiki-of-github-using-markdown/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T05:28:38+08:00" itemprop="datePublished" title="2023-03-04 05:28">2023-03-04 05:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm writing a wiki page on GitHub, and I'm using Markdown.</p>
<p>My problem is that I'm putting a large image (this image is in its own
repository) and I need resize it.</p>
<p>I have tried different solutions, but they do not work:</p>
<div class="code"><pre class="code literal-block"><span class="err">!</span><span class="o">[</span><span class="n">image</span><span class="o">]</span><span class="p">(</span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">url</span><span class="p">.</span><span class="k">to</span><span class="o">/</span><span class="nc">image</span><span class="p">.</span><span class="n">png</span><span class="w"> </span><span class="ss">"Title"</span><span class="w"> </span><span class="err">{</span><span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="n">px</span><span class="w"> </span><span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="n">px</span><span class="err">}</span><span class="p">)</span>

<span class="err">!</span><span class="o">[</span><span class="n">image</span><span class="o">]</span><span class="p">(</span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">url</span><span class="p">.</span><span class="k">to</span><span class="o">/</span><span class="nc">image</span><span class="p">.</span><span class="n">png</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">250</span><span class="n">x250</span><span class="p">)</span>

<span class="err">!</span><span class="o">[</span><span class="n">image</span><span class="o">]</span><span class="p">(</span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">url</span><span class="p">.</span><span class="k">to</span><span class="o">/</span><span class="nc">image</span><span class="p">.</span><span class="n">png</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">250</span><span class="n">x</span><span class="p">)</span>

<span class="o">[</span><span class="n">[http://url.to/image.png = 250x</span><span class="o">]</span><span class="err">]</span>
</pre></div>

<p>Is there a way to get it?</p>
<p>It is preferable without HTML.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Updated:</h3>
<p>Markdown syntax for images (external/internal):</p>
<div class="code"><pre class="code literal-block"><span class="err">!</span><span class="o">[</span><span class="n">test</span><span class="o">]</span><span class="p">(</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">favicon</span><span class="p">.</span><span class="n">ico</span><span class="p">)</span>
</pre></div>

<p>HTML code for <em>sizing</em> images (internal/external):</p>
<div class="code"><pre class="code literal-block">&lt;img src="https://github.com/favicon.ico" width="48"&gt;
</pre></div>

<p>Example:</p>
<p><img alt="test" src="https://github.com/favicon.ico"></p>
<hr>
<h3>Old Answer:</h3>
<p>This should work:</p>
<p><del>[[ http://url.to/image.png | height = 100px ]]</del></p>
<p>Source: https://guides.github.com/features/mastering-markdown/</p>
<p><br></p>
<h3>Suggest</h3>
<p>On GitHub, you can use HTML directly instead of Markdown:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"url"</span><span class="nt">&gt;&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"http://url.to/image.png"</span><span class="w"> </span><span class="na">align=</span><span class="s">"left"</span><span class="w"> </span><span class="na">height=</span><span class="s">"48"</span><span class="w"> </span><span class="na">width=</span><span class="s">"48"</span><span class="w"> </span><span class="nt">&gt;&lt;/a&gt;</span>
</pre></div>

<p>This should make it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-a-ruby-hash-object-to-json/" class="u-url">How to convert a ruby hash object to JSON?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-a-ruby-hash-object-to-json/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T05:27:24+08:00" itemprop="datePublished" title="2023-03-04 05:27">2023-03-04 05:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How to convert a ruby hash object to JSON? So I am trying this example below &amp;
it doesn't work?</p>
<p>I was looking at the RubyDoc and obviously <code>Hash</code> object doesn't have a
<code>to_json</code> method. But I am reading on blogs that Rails supports
<code>active_record.to_json</code> and also supports <code>hash#to_json</code>. I can understand
<code>ActiveRecord</code> is a Rails object, but <code>Hash</code> is not native to Rails, it's a
pure Ruby object. So in Rails you can do a <code>hash.to_json</code>, but not in pure
Ruby??</p>
<div class="code"><pre class="code literal-block">car = {:make =&gt; "bmw", :year =&gt; "2003"}
car.to_json
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>One of the numerous niceties of Ruby is the possibility to extend existing
classes with your own methods. That's called "class reopening" or monkey-
patching (the meaning of the latter can vary, though).</p>
<p>So, take a look here:</p>
<div class="code"><pre class="code literal-block"><span class="nv">car</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{:<span class="nv">make</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"bmw"</span>,<span class="w"> </span>:<span class="nv">year</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"2003"</span>}
#<span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>{:<span class="nv">make</span><span class="o">=&gt;</span><span class="s2">"bmw"</span>,<span class="w"> </span>:<span class="nv">year</span><span class="o">=&gt;</span><span class="s2">"2003"</span>}
<span class="nv">car</span>.<span class="nv">to_json</span>
#<span class="w"> </span><span class="nv">NoMethodError</span>:<span class="w"> </span><span class="nv">undefined</span><span class="w"> </span><span class="nv">method</span><span class="w"> </span>`<span class="nv">to_json</span><span class="err">' for {:make=&gt;"bmw", :year=&gt;"2003"}:Hash</span>
<span class="err">#   from (irb):11</span>
#<span class="w">   </span><span class="nv">from</span><span class="w"> </span><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">irb</span>:<span class="mi">12</span>:<span class="nv">in</span><span class="w"> </span>`<span class="o">&lt;</span><span class="nv">main</span><span class="o">&gt;</span><span class="err">'</span>
<span class="nv">require</span><span class="w"> </span><span class="s1">'json'</span>
#<span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nv">true</span>
<span class="nv">car</span>.<span class="nv">to_json</span>
#<span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"{"</span><span class="nv">make</span><span class="s2">":"</span><span class="nv">bmw</span><span class="s2">","</span><span class="nv">year</span><span class="s2">":"</span><span class="mi">2003</span><span class="s2">"}"</span>
</pre></div>

<p>As you can see, requiring <code>json</code> has magically brought method <code>to_json</code> to our
<code>Hash</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">require 'json/ext' # to use the C based extension instead of json/pure

puts {hash: 123}.to_json
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-would-you-ever-implement-finalize/" class="u-url">Why would you ever implement finalize()?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-would-you-ever-implement-finalize/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T05:25:55+08:00" itemprop="datePublished" title="2023-03-04 05:25">2023-03-04 05:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've been reading through a lot of the rookie Java questions on <code>finalize()</code>
and find it kind of bewildering that no one has really made it plain that
finalize() is an unreliable way to clean up resources. I saw someone comment
that they use it to clean up Connections, which is really scary since the only
way to come as close to a guarantee that a Connection is closed is to
implement try (catch) finally.</p>
<p>I was not schooled in CS, but I have been programming in Java professionally
for close to a decade now and I have never seen anyone implement <code>finalize()</code>
in a production system ever. This still doesn't mean that it doesn't have its
uses, or that people I've worked with have been doing it right.</p>
<p>So my question is, what use cases are there for implementing <code>finalize()</code> that
cannot be handled more reliably via another process or syntax within the
language?</p>
<p>Please provide specific scenarios or your experience, simply repeating a Java
text book, or finalize's intended use is not enough, as is not the intent of
this question.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You could use it as a backstop for an object holding an external resource
(socket, file, etc). Implement a <code>close()</code> method and document that it needs
to be called.</p>
<p>Implement <code>finalize()</code> to do the <code>close()</code> processing if you detect it hasn't
been done. Maybe with something dumped to <code>stderr</code> to point out that you're
cleaning up after a buggy caller.</p>
<p>It provides extra safety in an exceptional/buggy situation. Not every caller
is going to do the correct <code>try {} finally {}</code> stuff every time. Unfortunate,
but true in most environments.</p>
<p>I agree that it's rarely needed. And as commenters point out, it comes with GC
overhead. Only use if you need that "belt and suspenders" safety in a long-
running app.</p>
<p>I see that as of Java 9, <code>Object.finalize()</code> is deprecated! They point us to
<code>java.lang.ref.Cleaner</code> and <code>java.lang.ref.PhantomReference</code> as alternatives.</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>finalize()</code> is a hint to the JVM that it might be nice to execute your code
at an unspecified time. This is good when you want code to mysteriously fail
to run.</p>
<p>Doing anything significant in finalizers (basically anything except logging)
is also good in three situations:</p>
<ul>
<li>you want to gamble that other finalized objects will still be in a state that the rest of your program considers valid.</li>
<li>you want to add lots of checking code to all the methods of all your classes that have a finalizer, to make sure they behave correctly after finalization.</li>
<li>you want to accidentally resurrect finalized objects, and spend a lot of time trying to figure out why they don't work, and/or why they don't get finalized when they are eventually released.</li>
</ul>
<p>If you think you need finalize(), sometimes what you really want is a
<strong>phantom reference</strong> (which in the example given could hold a hard reference
to a connection used by its referand, and close it after the phantom reference
has been queued). This also has the property that it may mysteriously never
run, but at least it can't call methods on or resurrect finalized objects. So
it's just right for situations where you don't absolutely need to close that
connection cleanly, but you'd quite like to, and the clients of your class
can't or won't call close themselves (which is actually fair enough - what's
the point of having a garbage collector at all if you design interfaces that
<em>require</em> a specific action be taken prior to collection? That just puts us
back in the days of malloc/free.)</p>
<p>Other times you need the resource you think you're managing to be more robust.
For example, why do you need to close that connection? It must ultimately be
based on some kind of I/O provided by the system (socket, file, whatever), so
why can't you rely on the system to close it for you when the lowest level of
resource is gced? If the server at the other end absolutely requires you to
close the connection cleanly rather than just dropping the socket, then what's
going to happen when someone trips over the power cable of the machine your
code is running on, or the intervening network goes out?</p>
<p>Disclaimer: I've worked on a JVM implementation in the past. I hate
finalizers.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2295.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2293.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
