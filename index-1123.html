<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1123) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1123.html">
<link rel="prev" href="index-1124.html" type="text/html">
<link rel="next" href="index-1122.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sort-an-array-of-associative-arrays-by-column-value/" class="u-url">Sort an array of associative arrays by column value</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/sort-an-array-of-associative-arrays-by-column-value/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:47:25+08:00" itemprop="datePublished" title="2023-02-18 01:47">2023-02-18 01:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Given this array:</p>
<div class="code"><pre class="code literal-block">$inventory = array(

   array("type"=&gt;"fruit", "price"=&gt;3.50),
   array("type"=&gt;"milk", "price"=&gt;2.90),
   array("type"=&gt;"pork", "price"=&gt;5.43),

);
</pre></div>

<p>I would like to sort <code>$inventory</code>'s elements by price to get:</p>
<div class="code"><pre class="code literal-block">$inventory = array(

   array("type"=&gt;"pork", "price"=&gt;5.43),
   array("type"=&gt;"fruit", "price"=&gt;3.50),
   array("type"=&gt;"milk", "price"=&gt;2.90),

);
</pre></div>

<p>How can I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You are right, the function you're looking for is <code>array_multisort()</code>.</p>
<p>Here's an example taken straight from the manual and adapted to your case:</p>
<div class="code"><pre class="code literal-block">$price = array();
foreach ($inventory as $key =&gt; $row)
{
    $price[$key] = $row['price'];
}
array_multisort($price, SORT_DESC, $inventory);
</pre></div>

<p>As of PHP 5.5.0 you can use <code>array_column()</code> instead of that foreach:</p>
<div class="code"><pre class="code literal-block">$price = array_column($inventory, 'price');

array_multisort($price, SORT_DESC, $inventory);
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h4>PHP 7+</h4>
<p>As of PHP 7, this can be done concisely using <code>usort</code> with an anonymous
function that uses the spaceship operator to compare elements.</p>
<p>You can do an ascending sort like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">usort</span><span class="ss">(</span>$<span class="nv">inventory</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>,<span class="w"> </span>$<span class="nv">item2</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Or a descending sort like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">usort</span><span class="ss">(</span>$<span class="nv">inventory</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>,<span class="w"> </span>$<span class="nv">item2</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>To understand how this works, note that <code>usort</code> takes a user-provided
comparison function that must behave as follows (from the docs):</p>
<blockquote>
<p>The comparison function must return an integer less than, equal to, or
greater than zero if the first argument is considered to be respectively
less than, equal to, or greater than the second.</p>
</blockquote>
<p>And note also that <code>&lt;=&gt;</code>, the spaceship operator,</p>
<blockquote>
<p>returns 0 if both operands are equal, 1 if the left is greater, and -1 if
the right is greater</p>
</blockquote>
<p>which is exactly what <code>usort</code> needs. In fact, almost the entire justification
given for adding <code>&lt;=&gt;</code> to the language in https://wiki.php.net/rfc/combined-
comparison-operator is that it</p>
<blockquote>
<p>makes writing ordering callbacks for use with <code>usort()</code> easier</p>
</blockquote>
<hr>
<h4>PHP 5.3+</h4>
<p>PHP 5.3 introduced anonymous functions, but doesn't yet have the spaceship
operator. We can still use <code>usort</code> to sort our array, but it's a little more
verbose and harder to understand:</p>
<div class="code"><pre class="code literal-block"><span class="nv">usort</span><span class="ss">(</span>$<span class="nv">inventory</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>,<span class="w"> </span>$<span class="nv">item2</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">==</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="ss">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="w"> </span>?<span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span>:<span class="w"> </span><span class="mi">1</span><span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Note that although it's fairly common for comparators dealing with integer
values to just return the difference of the values, like <code>$item2['price'] -
$item1['price']</code>, we <em>can't</em> safely do that in this case. This is because the
prices are floating point numbers in the question asker's example, but the
comparison function we pass to <code>usort</code> has to return integers for <code>usort</code> to
work properly:</p>
<blockquote>
<p>Returning <strong><em>non-integer</em></strong> values from the comparison function, such as
float, will result in an internal cast to integer of the callback's return
value. So values such as 0.99 and 0.1 will both be cast to an integer value
of 0, which will compare such values as equal.</p>
</blockquote>
<p>This is an important trap to bear in mind when using <code>usort</code> in PHP 5.x! My
original version of this answer made this mistake and yet I accrued ten
upvotes over thousands of views apparently without anybody noticing the
serious bug. The ease with which lackwits like me can screw up comparator
functions is <em>precisely</em> the reason that the easier-to-use spaceship operator
was added to the language in PHP 7.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-create-custom-helper-functions-in-laravel/" class="u-url">How to create custom helper functions in Laravel</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-create-custom-helper-functions-in-laravel/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:46:56+08:00" itemprop="datePublished" title="2023-02-18 01:46">2023-02-18 01:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would like to create helper functions to avoid repeating code between views
in Laravel. For example:</p>
<p><em>view.blade.php</em></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;p&gt;</span>Foo<span class="w"> </span>Formated<span class="w"> </span>text:<span class="w"> </span><span class="cp">{{</span> <span class="nv">fooFormatText</span><span class="o">(</span><span class="err">$</span><span class="nv">text</span><span class="o">)</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</pre></div>

<p>They're basically text formatting functions. How should I define globally
available helper functions like <code>fooFormatText()</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Create a <code>helpers.php</code> file in your app folder and load it up with composer:</p>
<div class="code"><pre class="code literal-block"><span class="s2">"autoload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"classmap"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="o">...</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="s2">"psr-4"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"App</span><span class="se">\\</span><span class="s2">"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app/"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">"app/helpers.php"</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">&lt;----</span><span class="w"> </span><span class="n">ADD</span><span class="w"> </span><span class="n">THIS</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">},</span>
</pre></div>

<p>After adding that to your <code>composer.json</code> file, run the following command:</p>
<div class="code"><pre class="code literal-block"><span class="n">composer</span><span class="w"> </span><span class="n">dump</span><span class="o">-</span><span class="n">autoload</span>
</pre></div>

<hr>
<p>If you don't like keeping your <code>helpers.php</code> file in your <code>app</code> directory
(because it's not a PSR-4 namespaced class file), you can do what the
<code>laravel.com</code> website does: store the <code>helpers.php</code> in the bootstrap
directory. Remember to set it in your <code>composer.json</code> file:</p>
<div class="code"><pre class="code literal-block">"files": [
    "bootstrap/helpers.php"
]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h3>Custom Classes in Laravel 5, the Easy Way</h3>
<p>This answer is applicable to <em>general</em> custom classes within Laravel. For a
more Blade-specific answer, see <strong>Custom Blade Directives in Laravel 5</strong>.</p>
<p><strong>Step 1:</strong> Create your Helpers (or other custom class) file and give it a
matching namespace. Write your class and method:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?php</span> <span class="c1">// Code within app\Helpers\Helper.php</span>

<span class="k">namespace</span> <span class="nx">App\Helpers</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Helper</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">shout</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$string</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$string</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Step 2:</strong> Create an alias:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?php</span> <span class="c1">// Code within config/app.php</span>

    <span class="s1">'aliases'</span> <span class="o">=&gt;</span> <span class="p">[</span>
     <span class="o">...</span>
        <span class="s1">'Helper'</span> <span class="o">=&gt;</span> <span class="nx">App\Helpers\Helper</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
     <span class="o">...</span>
</pre></div>

<p><strong>Step 3:</strong> Run <code>composer dump-autoload</code> in the project root</p>
<p><strong>Step 4:</strong> Use it in your Blade template:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">resources</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">template</span><span class="o">.</span><span class="n">blade</span><span class="o">.</span><span class="n">php</span><span class="w"> </span><span class="o">--&gt;</span>

<span class="p">{</span><span class="o">!!</span><span class="w"> </span><span class="n">Helper</span><span class="p">::</span><span class="n">shout</span><span class="p">(</span><span class="s1">'this is how to use autoloading correctly!!'</span><span class="p">)</span><span class="w"> </span><span class="o">!!</span><span class="p">}</span>
</pre></div>

<p><strong>Extra Credit:</strong> Use this class anywhere in your Laravel app:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="err">?</span><span class="n">php</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">app</span><span class="o">/</span><span class="n">Http</span><span class="o">/</span><span class="n">Controllers</span><span class="o">/</span><span class="n">SomeController</span><span class="o">.</span><span class="n">php</span>

<span class="n">namespace</span><span class="w"> </span><span class="n">App</span>\<span class="n">Http</span>\<span class="n">Controllers</span><span class="p">;</span>

<span class="n">use</span><span class="w"> </span><span class="n">Helper</span><span class="p">;</span>

<span class="k">class</span><span class="w"> </span><span class="n">SomeController</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Controller</span>
<span class="p">{</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">__construct</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Helper</span><span class="p">::</span><span class="n">shout</span><span class="p">(</span><span class="s1">'now i</span><span class="se">\'</span><span class="s1">m using my helper class in a controller!!'</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">...</span>
</pre></div>

<hr>
<p>Source: http://www.php-fig.org/psr/psr-4/</p>
<p>Why it works:
https://github.com/laravel/framework/blob/master/src/Illuminate/Support/ClassLoader.php</p>
<p>Where autoloading originates from:
http://php.net/manual/en/language.oop5.autoload.php</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-the-rules-for-javascript-s-automatic-semicolon-insertion-asi/" class="u-url">What are the rules for JavaScript's automatic semicolon insertion (ASI)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-the-rules-for-javascript-s-automatic-semicolon-insertion-asi/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:46:25+08:00" itemprop="datePublished" title="2023-02-18 01:46">2023-02-18 01:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Well, first I should probably ask if this is browser dependent.</p>
<p>I've read that if an invalid token is found, but the section of code is valid
until that invalid token, a semicolon is inserted before the token if it is
preceded by a line break.</p>
<p><strong>However, the common example cited for bugs caused by semicolon insertion
is:</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">return</span>
<span class="w">  </span><span class="nv">_a</span><span class="o">+</span><span class="nv">b</span><span class="c1">;</span>
</pre></div>

<p>..which doesn't seem to follow this rule, since _a would be a valid token.</p>
<p><strong>On the other hand, breaking up call chains works as expected:</strong></p>
<div class="code"><pre class="code literal-block">$('#myButton')
  .click(function(){alert("Hello!")});
</pre></div>

<p>Does anyone have a more in-depth description of the rules?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>First of all you should know which statements are affected by the automatic
semicolon insertion (also known as ASI for brevity):</p>
<ul>
<li>empty statement</li>
<li>
<code>var</code> statement</li>
<li>expression statement</li>
<li>
<code>do-while</code> statement</li>
<li>
<code>continue</code> statement</li>
<li>
<code>break</code> statement</li>
<li>
<code>return</code> statement</li>
<li>
<code>throw</code> statement</li>
</ul>
<p>The concrete rules of ASI, are described in the specification §11.9.1 Rules of
Automatic Semicolon Insertion</p>
<p>Three cases are described:</p>
<ol>
<li>
<p>When an offending token is encountered that is not allowed by the grammar, a semicolon is inserted before it if:</p>
</li>
<li>
<p>The token is separated from the previous token by at least one <code>LineTerminator</code>.</p>
</li>
<li>The token is <code>}</code>
</li>
</ol>
<p><em>e.g.</em> :</p>
<div class="code"><pre class="code literal-block">    { 1
    2 } 3
</pre></div>

<p>is transformed to</p>
<div class="code"><pre class="code literal-block">    { 1
    ;2 ;} 3;
</pre></div>

<p>The <code>NumericLiteral</code> <code>1</code> meets the first condition, the following token is a
line terminator.<br>
The <code>2</code> meets the second condition, the following token is <code>}</code>.</p>
<ol>
<li>When the end of the input stream of tokens is encountered and the parser is unable to parse the input token stream as a single complete Program, then a semicolon is automatically inserted at the end of the input stream.</li>
</ol>
<p><em>e.g.</em> :</p>
<div class="code"><pre class="code literal-block">    a = b
    ++c
</pre></div>

<p>is transformed to:</p>
<div class="code"><pre class="code literal-block">    a = b;
    ++c;
</pre></div>

<ol>
<li>This case occurs when a token is allowed by some production of the grammar, but the production is a <em>restricted production</em> , a semicolon is automatically inserted before the restricted token.</li>
</ol>
<p>Restricted productions:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">UpdateExpression</span><span class="w"> </span>:
<span class="w">        </span><span class="nv">LeftHandSideExpression</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="o">++</span>
<span class="w">        </span><span class="nv">LeftHandSideExpression</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="o">--</span>

<span class="w">    </span><span class="nv">ContinueStatement</span><span class="w"> </span>:
<span class="w">        </span><span class="k">continue</span><span class="w"> </span><span class="c1">;</span>
<span class="w">        </span><span class="k">continue</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="nv">LabelIdentifier</span><span class="w"> </span><span class="c1">;</span>

<span class="w">    </span><span class="nv">BreakStatement</span><span class="w"> </span>:
<span class="w">        </span><span class="k">break</span><span class="w"> </span><span class="c1">;</span>
<span class="w">        </span><span class="k">break</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="nv">LabelIdentifier</span><span class="w"> </span><span class="c1">;</span>

<span class="w">    </span><span class="nv">ReturnStatement</span><span class="w"> </span>:
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="nv">Expression</span><span class="w"> </span><span class="c1">;</span>

<span class="w">    </span><span class="nv">ThrowStatement</span><span class="w"> </span>:
<span class="w">        </span><span class="nv">throw</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="nv">Expression</span><span class="w"> </span><span class="c1">;</span>

<span class="w">    </span><span class="nv">ArrowFunction</span><span class="w"> </span>:
<span class="w">        </span><span class="nv">ArrowParameters</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nv">ConciseBody</span>

<span class="w">    </span><span class="nv">YieldExpression</span><span class="w"> </span>:
<span class="w">        </span><span class="nv">yield</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">AssignmentExpression</span>
<span class="w">        </span><span class="nv">yield</span><span class="w"> </span>[<span class="nv">no</span><span class="w"> </span><span class="nv">LineTerminator</span><span class="w"> </span><span class="nv">here</span>]<span class="w"> </span><span class="nv">AssignmentExpression</span>
</pre></div>

<p>The classic example, with the <code>ReturnStatement</code>:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">return</span><span class="w"> </span>
<span class="w">      </span><span class="s2">"something"</span><span class="c1">;</span>
</pre></div>

<p>is transformed to</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">return</span><span class="c1">;</span>
<span class="w">      </span><span class="s2">"something"</span><span class="c1">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I could not understand those 3 rules in the specs too well -- hope to have
something that is more plain English -- but here is what I gathered from
JavaScript: The Definitive Guide, 6th Edition, David Flanagan, O'Reilly, 2011:</p>
<p>Quote:</p>
<blockquote>
<p>JavaScript does not treat every line break as a semicolon: it usually treats
line breaks as semicolons only if it can’t parse the code without the
semicolons.</p>
</blockquote>
<p>Another quote: for the code</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span>
<span class="n">a</span>
<span class="o">=</span>
<span class="mi">3</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

<blockquote>
<p>JavaScript does not treat the second line break as a semicolon because it
can continue parsing the longer statement a = 3;</p>
</blockquote>
<p>and:</p>
<blockquote>
<p>two exceptions to the general rule that JavaScript interprets line breaks as
semicolons when it cannot parse the second line as a continuation of the
statement on the first line. The first exception involves the return, break,
and continue statements</p>
<p>... If a line break appears after any of these words ... JavaScript will
always interpret that line break as a semicolon.</p>
<p>... The second exception involves the ++ and −− operators ... If you want to
use either of these operators as postfix operators, they must appear on the
same line as the expression they apply to. Otherwise, the line break will be
treated as a semicolon, and the ++ or -- will be parsed as a prefix operator
applied to the code that follows. Consider this code, for example:</p>
</blockquote>
<div class="code"><pre class="code literal-block">x 
++ 
y
</pre></div>

<blockquote>
<p>It is parsed as <code>x; ++y;</code>, not as <code>x++; y</code></p>
</blockquote>
<p>So I think to simplify it, that means:</p>
<p><strong>In general, JavaScript will treat it as continuation of code as long as it
makes sense -- except 2 cases: (1) after some keywords like<code>return</code>, <code>break</code>,
<code>continue</code>, and (2) if it sees <code>++</code> or <code>--</code> on a new line, then it will add
the <code>;</code> at the end of the previous line.</strong></p>
<p><strong>The part about "treat it as continuation of code as long as it makes sense"
makes it feel like regular expression's greedy matching.</strong></p>
<p>With the above said, that means for <code>return</code> with a line break, the JavaScript
interpreter will insert a <code>;</code></p>
<p>(quoted again: If a line break appears after any of these words [such as
<code>return</code>] ... JavaScript will always interpret that line break as a semicolon)</p>
<p>and due to this reason, the classic example of</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span>
{<span class="w"> </span>
<span class="w">  </span><span class="nv">foo</span>:<span class="w"> </span><span class="mi">1</span>
}
</pre></div>

<p>will not work as expected, because the JavaScript interpreter will treat it
as:</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="c1">;   // returning nothing</span>
{
<span class="w">  </span><span class="nv">foo</span>:<span class="w"> </span><span class="mi">1</span>
}
</pre></div>

<p>There has to be no line-break immediately after the <code>return</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span>{<span class="w"> </span>
<span class="w">  </span><span class="nv">foo</span>:<span class="w"> </span><span class="mi">1</span>
}
</pre></div>

<p>for it to work properly. And you may insert a <code>;</code> yourself if you were to
follow the rule of using a <code>;</code> after any statement:</p>
<div class="code"><pre class="code literal-block"><span class="nt">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="n">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span><span class="o">;</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1124.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1122.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
