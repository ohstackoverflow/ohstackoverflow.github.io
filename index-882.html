<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 882) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-882.html">
<link rel="prev" href="index-883.html" type="text/html">
<link rel="next" href="index-881.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-mocking/" class="u-url">What is Mocking?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-mocking/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:31:48+08:00" itemprop="datePublished" title="2023-02-17 18:31">2023-02-17 18:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is Mocking? .</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Prologue: If you look up the noun <em>mock</em> in the dictionary you will find that
one of the definitions of the word is <em>something made as an imitation</em>.</p>
<hr>
<p>Mocking is primarily used in unit testing. An object under test may have
dependencies on other (complex) objects. To isolate the behaviour of the
object you want to test you replace the other objects by mocks that simulate
the behaviour of the real objects. This is useful if the real objects are
impractical to incorporate into the unit test.</p>
<p>In short, mocking is creating objects that simulate the behaviour of real
objects.</p>
<hr>
<p>At times you may want to distinguish between <em>mocking</em> as opposed to
<em>stubbing</em>. There may be some disagreement about this subject but my
definition of a stub is a "minimal" simulated object. The stub implements just
enough behaviour to allow the object under test to execute the test.</p>
<p>A mock is like a stub but the test will also verify that the object under test
calls the mock as expected. Part of the test is verifying that the mock was
used correctly.</p>
<p>To give an example: You can stub a database by implementing a simple in-memory
structure for storing records. The object under test can then read and write
records to the database stub to allow it to execute the test. This could test
some behaviour of the object not related to the database and the database stub
would be included just to let the test run.</p>
<p>If you instead want to verify that the object under test writes some specific
data to the database you will have to mock the database. Your test would then
incorporate assertions about what was written to the database mock.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Other answers explain what mocking is. Let me walk you through it with
different <em>examples</em>. And believe me, it's actually far more simpler than you
think.</p>
<p><strong>tl;dr</strong> It's an instance of the original class. It has other data injected
into so you avoid testing the injected parts and solely <em>focus</em> on testing the
<strong>implementation details</strong> of your class/functions.</p>
<h2>Simple example:</h2>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">func</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="n">num1</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="p">:</span><span class="w"> </span><span class="n">Int</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="n">A</span><span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num2</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="n">B</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">let</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">under</span><span class="w"> </span><span class="n">test</span>
<span class="n">assertEqual</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="mi">6</span><span class="p">)</span>
</pre></div>

<p>As you can see, I'm not testing LineA ie I'm not validating the input
parameters. I'm not validating to see if num1, num2 are an Integer. I have no
asserts against that.</p>
<p>I'm only testing to see if LineB (my <em>implementation</em> ) given the mocked
values <code>1</code> and <code>5</code> is doing as I expect.</p>
<p>Obviously in the real word this can become much more complex. The parameters
can be a custom object like a Person, Address, or the implementation details
can be more than a single <code>+</code>. But the logic of testing would be the same.</p>
<h3>Non-coding Example:</h3>
<p>Assume you're building a machine that identifies the type and brand name of
electronic devices for an airport security. The machine does this by
processing what it sees with its camera.</p>
<p>Now your manager walks in the door and asks you to unit-test it.</p>
<p>Then you as a developer you can either bring 1000 real objects, like a MacBook
pro, Google Nexus, a banana, an iPad etc in front of it and test and see if it
all works.</p>
<p>But you can also use <strong>mocked</strong> objects, like an identical looking MacBook pro
(with no real internal parts) or a plastic banana in front of it. You can save
yourself from investing in 1000 real laptops and rotting bananas.</p>
<p>The point is you're not trying to test if the banana is fake or not. Nor
testing if the laptop is fake or not. All you're doing is testing if your
machine once it sees a banana it would say <code>not an electronic device</code> and for
a MacBook Pro it would say: <code>Laptop, Apple</code>. To the machine, the outcome of
its detection should be the same for fake/mocked electronics and real
electronics. If your machine also factored in the internals of a laptop (x-ray
scan) or banana then your mocks' internals need to look the same as well. But
you could also use a MacBook that no longer works.</p>
<p>Had your machine tested whether or not devices can power on then well you'd
need real devices.</p>
<p>The logic mentioned above applies to unit-testing of actual code as well. That
is a function should work the same with real values you get from <em>real</em> input
(and interactions) or <em>mocked</em> values you inject during unit-testing. And just
as how you save yourself from using a real banana or MacBook, with unit-tests
(and mocking) you save yourself from having to do something that causes your
server to return a status code of 500, 403, 200, etc (forcing your server to
trigger 500 is only when server is down, while 200 is when server is up.</p>
<p>It gets difficult to run 100 network focused tests if you have to constantly
wait 10 seconds between switching over server up and down). So instead you
inject/mock a response with status code 500, 200, 403, etc and test your
unit/function with a injected/mocked value.</p>
<p><strong>Be aware:</strong></p>
<p>Sometimes you don't correctly mock the actual object. Or you don't mock every
possibility. E.g. your fake laptops are dark, and your machine accurately
works with them, but then it doesn't work accurately with <em>white</em> fake
laptops. Later when you ship this machine to customers they complain that it
doesn't work all the time. You get random reports that it's not working. It
takes you 3 months to figure out that the color of fake laptops need to be
more varied so you can test your modules appropriately.</p>
<p>For a true coding example, your implementation may be different for status
code 200 with image data returned vs 200 with image data not returned. For
this reason it's good to use an IDE that provides code coverage e.g. the image
below shows that your unit-tests don't ever go through the lines marked with
<em>brown</em>.</p>
<p><img alt="enter image description here" src="images/ias4p.jpg"></p>
<p>image source</p>
<h3>Real world coding Example:</h3>
<p>Let's say you are writing an iOS application and have network calls.Your job
is to test <em>your</em> application. To test/identify whether or not the network
calls work as expected is NOT YOUR RESPONSIBILITY . It's another party's
(server team) responsibility to test it. You must remove this (network)
dependency and yet continue to test all your code that works <em>around</em> it.</p>
<p>A network call can return different status codes 404, 500, 200, 303, etc with
a JSON response.</p>
<p>Your app is suppose to work for <em>all</em> of them (in case of errors, your app
should throw its expected error). What you do with mocking is you create
'imaginary—similar to real' network responses (like a 200 code with a JSON
file) and test your code <em>without</em> 'making the real network call and waiting
for your network response'. You manually hardcode/return the network response
for ALL kinds of network responses and see if your app is working as you
expect. (you <em>never</em> assume/test a 200 with incorrect data, because that is
not your responsibility, your responsibility is to test <em>your</em> app with a
correct 200, or in case of a 400, 500, you test if your app throws the right
error)</p>
<p>This creating imaginary—similar to real is known as mocking.</p>
<p>In order to do this, you <strong>can't</strong> use your original code (your original code
doesn't have the pre-inserted responses, right?). You <strong>must</strong> add something
to it, inject/insert that dummy data which isn't normally needed (or a part of
your class).</p>
<p>So you create an instance the original class and add whatever (here being the
network HTTPResponse, data OR in the case of failure, you pass the correct
errorString, HTTPResponse) you need to it and then test the <em>mocked</em> class.</p>
<p>Long story short, mocking is to <em>simplify</em> and <em>limit</em> what you are testing
and also make you feed what a class depends on. In this example you <strong>avoid
testing</strong> the <strong>network calls themselves</strong> , and instead <strong>test</strong> whether or
not your app works as you expect <strong>with the injected outputs/responses</strong> —— by
<em>mocking</em> classes</p>
<p>Needless to say, you test each network response separately.</p>
<hr>
<p>Now a question that I always had in my mind was: The contracts/end points and
basically the JSON response of my APIs get updated constantly. How can I write
unit tests which take this into consideration?</p>
<p>To elaborate more on this: let’s say model requires a key/field named
<code>username</code>. You test this and your test passes. 2 weeks later backend changes
the key's name to <code>id</code>. Your tests still passes. right? or not?</p>
<p>Is it the backend developer’s responsibility to update the mocks. Should it be
part of our agreement that they provide updated mocks?</p>
<p>The answer to the above issue is that: unit tests + your development process
as a client-side developer should/would catch outdated mocked response. If you
ask me how? well the answer is:</p>
<p>Our actual app would fail (or not fail yet not have the desired behavior)
without using updated APIs...hence if that fails...we will make changes on our
development code. Which again leads to our tests failing....which we’ll have
to correct it. (Actually if we are to do the TDD process correctly we are to
not write any code about the field unless we write the test for it...and see
it fail and then go and write the actual development code for it.)</p>
<p>This all means that backend doesn’t have to say: “hey we updated the
mocks”...it <em>eventually</em> happens through your code development/debugging.
‌ّBecause it’s all part of the development process! Though if backend provides
the mocked response for you then it's easier.</p>
<p>My whole point on this is that (if you can’t automate getting updated mocked
API response then) human interaction is likely required ie <strong>manual</strong> updates
of JSONs and having short meetings to make sure their values are up to date
will become part of your process</p>
<p>This section was written thanks to a slack discussion in our CocoaHead meetup
group</p>
<h3>Confusion:</h3>
<p>It took me a while to not get confused between 'unit test for a class' and the
'stubs/mocks of a class'. E.g. in our codebase we have:</p>
<ul>
<li>class Device</li>
<li>class DeviceTests</li>
<li>class MockDevice</li>
<li>class DeviceManager</li>
</ul>
<hr>
<ul>
<li>
<code>class Device</code> is the actual class itself.</li>
<li>
<code>class DeviceTests</code> is where we write unit-tests for the <code>Device</code> class</li>
<li>
<code>class MockDevice</code> is a <em>mock</em> class of <code>Device</code>. We use it only for the purpose of testing. e.g. if our <code>DeviceManager</code> needs to get <em>unit-tested</em> then we need dummy/mock instances of the <code>Device</code> class. The <code>MockDevice</code> can be used to fulfill the need of dummy/mock instances.</li>
</ul>
<p>tldr you use mock classes/objects to test <em>other</em> objects. You don't use mock
objects to test themselves.</p>
<hr>
<p><strong>For iOS devs only:</strong></p>
<p>A very good example of mocking is this Practical Protocol-Oriented talk by
Natasha Muraschev. Just skip to minute 18:30, though the slides may become out
of sync with the actual video 🤷‍♂️</p>
<p>I really like this part from the transcript:</p>
<blockquote>
<p>Because this is testing...we do want to make sure that the <code>get</code> function
from the <code>Gettable</code> is called, <strong>because it can return and the function
could theoretically assign an array of food items from anywhere</strong>. We need
to make sure that it is called;</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-automatically-generate-a-stacktrace-when-my-program-crashes/" class="u-url">How to automatically generate a stacktrace when my program crashes</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-automatically-generate-a-stacktrace-when-my-program-crashes/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:31:17+08:00" itemprop="datePublished" title="2023-02-17 18:31">2023-02-17 18:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am working on Linux with the GCC compiler. When my C++ program crashes I
would like it to automatically generate a stacktrace.</p>
<p>My program is being run by many different users and it also runs on Linux,
Windows and Macintosh (all versions are compiled using <code>gcc</code>).</p>
<p>I would like my program to be able to generate a stack trace when it crashes
and the next time the user runs it, it will ask them if it is ok to send the
stack trace to me so I can track down the problem. I can handle the sending
the info to me but I don't know how to generate the trace string. Any ideas?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>For Linux and I believe Mac OS X, if you're using gcc, or any compiler that
uses glibc, you can use the backtrace() functions in <code>execinfo.h</code> to print a
stacktrace and exit gracefully when you get a segmentation fault.
Documentation can be found in the libc manual.</p>
<p>Here's an example program that installs a <code>SIGSEGV</code> handler and prints a
stacktrace to <code>stderr</code> when it segfaults. The <code>baz()</code> function here causes the
segfault that triggers the handler:</p>
<div class="code"><pre class="code literal-block"><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="c1">#include &lt;execinfo.h&gt;</span>
<span class="c1">#include &lt;signal.h&gt;</span>
<span class="c1">#include &lt;stdlib.h&gt;</span>
<span class="c1">#include &lt;unistd.h&gt;</span>


<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">handler</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">sig</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="o">*</span><span class="n">array</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="w">  </span><span class="n">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="o">*</span><span class="s1">'s for all entries on the stack</span>
<span class="w">  </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">backtrace</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nb">print</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">frames</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stderr</span>
<span class="w">  </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s2">"Error: signal </span><span class="si">%d</span><span class="s2">:</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w"> </span><span class="n">sig</span><span class="p">);</span>
<span class="w">  </span><span class="n">backtrace_symbols_fd</span><span class="p">(</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">STDERR_FILENO</span><span class="p">);</span>
<span class="w">  </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">baz</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nb nb-Type">int</span><span class="o">*</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="n">pointer</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s2">"</span><span class="si">%d</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="p">);</span><span class="w">       </span><span class="o">//</span><span class="w"> </span><span class="n">causes</span><span class="w"> </span><span class="n">segfault</span>
<span class="p">}</span>

<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">baz</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">bar</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>


<span class="nb nb-Type">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="nb">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">signal</span><span class="p">(</span><span class="n">SIGSEGV</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">);</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">handler</span>
<span class="w">  </span><span class="n">foo</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">baz</span><span class="o">.</span><span class="w">  </span><span class="n">baz</span><span class="w"> </span><span class="n">segfaults</span><span class="o">.</span>
<span class="p">}</span>
</pre></div>

<p>Compiling with <code>-g -rdynamic</code> gets you symbol info in your output, which glibc
can use to make a nice stacktrace:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>gcc<span class="w"> </span>-g<span class="w"> </span>-rdynamic<span class="w"> </span>./test.c<span class="w"> </span>-o<span class="w"> </span><span class="nb">test</span>
</pre></div>

<p>Executing this gets you this output:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>./test
Error:<span class="w"> </span>signal<span class="w"> </span><span class="m">11</span>:
./test<span class="o">(</span>handler+0x19<span class="o">)[</span>0x400911<span class="o">]</span>
/lib64/tls/libc.so.6<span class="o">[</span>0x3a9b92e380<span class="o">]</span>
./test<span class="o">(</span>baz+0x14<span class="o">)[</span>0x400962<span class="o">]</span>
./test<span class="o">(</span>bar+0xe<span class="o">)[</span>0x400983<span class="o">]</span>
./test<span class="o">(</span>foo+0xe<span class="o">)[</span>0x400993<span class="o">]</span>
./test<span class="o">(</span>main+0x28<span class="o">)[</span>0x4009bd<span class="o">]</span>
/lib64/tls/libc.so.6<span class="o">(</span>__libc_start_main+0xdb<span class="o">)[</span>0x3a9b91c4bb<span class="o">]</span>
./test<span class="o">[</span>0x40086a<span class="o">]</span>
</pre></div>

<p>This shows the load module, offset, and function that each frame in the stack
came from. Here you can see the signal handler on top of the stack, and the
libc functions before <code>main</code> in addition to <code>main</code>, <code>foo</code>, <code>bar</code>, and <code>baz</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>It's even easier than "man backtrace", there's a little-documented library
(GNU specific) distributed with glibc as libSegFault.so, which was I believe
was written by Ulrich Drepper to support the program catchsegv (see "man
catchsegv").</p>
<p>This gives us 3 possibilities. Instead of running "program -o hai":</p>
<ol>
<li>
<p>Run within catchsegv:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>catchsegv<span class="w"> </span>program<span class="w"> </span>-o<span class="w"> </span>hai
</pre></div>

</li>
<li>
<p>Link with libSegFault at runtime:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">LD_PRELOAD</span><span class="o">=</span>/lib/libSegFault.so<span class="w"> </span>program<span class="w"> </span>-o<span class="w"> </span>hai
</pre></div>

</li>
<li>
<p>Link with libSegFault at compile time:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>gcc<span class="w"> </span>-g1<span class="w"> </span>-lSegFault<span class="w"> </span>-o<span class="w"> </span>program<span class="w"> </span>program.cc
</pre></div>

<p>$ program -o hai</p>
</li>
</ol>
<p>In all 3 cases, you will get clearer backtraces with less optimization (gcc
-O0 or -O1) and debugging symbols (gcc -g). Otherwise, you may just end up
with a pile of memory addresses.</p>
<p>You can also catch more signals for stack traces with something like:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">SEGFAULT_SIGNALS</span><span class="o">=</span><span class="s2">"all"</span><span class="w">       </span><span class="c1"># "all" signals</span>
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">SEGFAULT_SIGNALS</span><span class="o">=</span><span class="s2">"bus abrt"</span><span class="w">  </span><span class="c1"># SIGBUS and SIGABRT</span>
</pre></div>

<p>The output will look something like this (notice the backtrace at the bottom):</p>
<div class="code"><pre class="code literal-block"><span class="o">***</span><span class="w"> </span><span class="n">Segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">dump</span><span class="p">:</span>

<span class="w"> </span><span class="n">EAX</span><span class="p">:</span><span class="w"> </span><span class="mi">0000000</span><span class="n">c</span><span class="w">   </span><span class="n">EBX</span><span class="p">:</span><span class="w"> </span><span class="mi">00000080</span><span class="w">   </span><span class="n">ECX</span><span class="p">:</span>
<span class="mi">00000000</span><span class="w">   </span><span class="n">EDX</span><span class="p">:</span><span class="w"> </span><span class="mi">0000000</span><span class="n">c</span><span class="w">  </span><span class="n">ESI</span><span class="p">:</span>
<span class="n">bfdbf080</span><span class="w">   </span><span class="n">EDI</span><span class="p">:</span><span class="w"> </span><span class="mf">080497e0</span><span class="w">   </span><span class="n">EBP</span><span class="p">:</span>
<span class="n">bfdbee38</span><span class="w">   </span><span class="n">ESP</span><span class="p">:</span><span class="w"> </span><span class="n">bfdbee20</span>

<span class="w"> </span><span class="n">EIP</span><span class="p">:</span><span class="w"> </span><span class="mi">0805640</span><span class="n">f</span><span class="w">   </span><span class="n">EFLAGS</span><span class="p">:</span><span class="w"> </span><span class="mi">00010282</span>

<span class="w"> </span><span class="n">CS</span><span class="p">:</span><span class="w"> </span><span class="mi">0073</span><span class="w">   </span><span class="n">DS</span><span class="p">:</span><span class="w"> </span><span class="mi">007</span><span class="n">b</span><span class="w">   </span><span class="n">ES</span><span class="p">:</span><span class="w"> </span><span class="mi">007</span><span class="n">b</span><span class="w">   </span><span class="n">FS</span><span class="p">:</span>
<span class="mi">0000</span><span class="w">   </span><span class="n">GS</span><span class="p">:</span><span class="w"> </span><span class="mi">0033</span><span class="w">   </span><span class="n">SS</span><span class="p">:</span><span class="w"> </span><span class="mi">007</span><span class="n">b</span>

<span class="w"> </span><span class="n">Trap</span><span class="p">:</span><span class="w"> </span><span class="mi">0000000</span><span class="n">e</span><span class="w">   </span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="mi">00000004</span><span class="w">  </span>
<span class="n">OldMask</span><span class="p">:</span><span class="w"> </span><span class="mi">00000000</span><span class="w">  </span><span class="n">ESP</span><span class="o">/</span><span class="k">signal</span><span class="p">:</span>
<span class="n">bfdbee20</span><span class="w">   </span><span class="n">CR2</span><span class="p">:</span><span class="w"> </span><span class="mi">00000024</span>

<span class="w"> </span><span class="n">FPUCW</span><span class="p">:</span><span class="w"> </span><span class="n">ffff037f</span><span class="w">   </span><span class="n">FPUSW</span><span class="p">:</span><span class="w"> </span><span class="n">ffff0000</span><span class="w">  </span>
<span class="n">TAG</span><span class="p">:</span><span class="w"> </span><span class="n">ffffffff</span><span class="w">  </span><span class="n">IPOFF</span><span class="p">:</span><span class="w"> </span><span class="mi">00000000</span><span class="w">  </span>
<span class="n">CSSEL</span><span class="p">:</span><span class="w"> </span><span class="mi">0000</span><span class="w">   </span><span class="n">DATAOFF</span><span class="p">:</span><span class="w"> </span><span class="mi">00000000</span><span class="w">  </span>
<span class="n">DATASEL</span><span class="p">:</span><span class="w"> </span><span class="mi">0000</span>

<span class="w"> </span><span class="n">ST</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span><span class="w"> </span><span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">0000</span><span class="w"> </span><span class="mi">0000000000000000</span><span class="w">  </span><span class="n">ST</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">  </span><span class="n">ST</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">  </span><span class="n">ST</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span><span class="w">   </span><span class="n">ST</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="mi">0000</span>
<span class="mi">0000000000000000</span>

<span class="n">Backtrace</span><span class="p">:</span>
<span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libSegFault</span><span class="o">.</span><span class="n">so</span><span class="p">[</span><span class="mh">0xb7f9e100</span><span class="p">]</span>
<span class="err">??</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="err">??</span><span class="p">)[</span><span class="mh">0xb7fa3400</span><span class="p">]</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">c</span><span class="o">++/</span><span class="mf">4.3</span><span class="o">/</span><span class="n">bits</span><span class="o">/</span><span class="n">stl_queue</span><span class="o">.</span><span class="n">h</span><span class="p">:</span><span class="mi">226</span><span class="p">(</span><span class="n">_ZNSt5queueISsSt5dequeISsSaISsEEE4pushERKSs</span><span class="p">)[</span><span class="mh">0x805647a</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">player</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">73</span><span class="p">(</span><span class="n">_ZN6Player5inputESs</span><span class="p">)[</span><span class="mh">0x805377c</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">socket</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">159</span><span class="p">(</span><span class="n">_ZN6Socket4ReadEv</span><span class="p">)[</span><span class="mh">0x8050698</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">socket</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">413</span><span class="p">(</span><span class="n">_ZN12ServerSocket4ReadEv</span><span class="p">)[</span><span class="mh">0x80507ad</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">socket</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">300</span><span class="p">(</span><span class="n">_ZN12ServerSocket4pollEv</span><span class="p">)[</span><span class="mh">0x8050b44</span><span class="p">]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dbingham</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">middle</span><span class="o">-</span><span class="n">earth</span><span class="o">-</span><span class="n">mud</span><span class="o">/</span><span class="n">alpha6</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">engine</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">34</span><span class="p">(</span><span class="n">main</span><span class="p">)[</span><span class="mh">0x8049a72</span><span class="p">]</span>
<span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">i686</span><span class="o">/</span><span class="n">cmov</span><span class="o">/</span><span class="n">libc</span><span class="o">.</span><span class="n">so</span><span class="o">.</span><span class="mi">6</span><span class="p">(</span><span class="n">__libc_start_main</span><span class="o">+</span><span class="mh">0xe5</span><span class="p">)[</span><span class="mh">0xb7d1b775</span><span class="p">]</span>
<span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">buildd</span><span class="o">/</span><span class="n">glibc</span><span class="o">-</span><span class="mf">2.9</span><span class="o">/</span><span class="n">csu</span><span class="o">/../</span><span class="n">sysdeps</span><span class="o">/</span><span class="n">i386</span><span class="o">/</span><span class="n">elf</span><span class="o">/</span><span class="n">start</span><span class="o">.</span><span class="n">S</span><span class="p">:</span><span class="mi">122</span><span class="p">(</span><span class="n">_start</span><span class="p">)[</span><span class="mh">0x8049801</span><span class="p">]</span>
</pre></div>

<p>If you want to know the gory details, the best source is unfortunately the
source: See http://sourceware.org/git/?p=glibc.git;a=blob;f=debug/segfault.c
and its parent directory http://sourceware.org/git/?p=glibc.git;a=tree;f=debug</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/in-a-dockerfile-how-to-update-path-environment-variable/" class="u-url">In a Dockerfile, How to update PATH environment variable?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/in-a-dockerfile-how-to-update-path-environment-variable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:30:55+08:00" itemprop="datePublished" title="2023-02-17 18:30">2023-02-17 18:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a dockerfile that download and builds GTK from source, but the
following line is not updating my image's environment variable:</p>
<div class="code"><pre class="code literal-block"><span class="n">RUN</span><span class="w"> </span><span class="n">PATH</span><span class="o">=</span><span class="s2">"/opt/gtk/bin:$PATH"</span>
<span class="n">RUN</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">PATH</span>
</pre></div>

<p>I read that that I should be using ENV to set environment values, but the
following instruction doesn't seem to work either:</p>
<p><code>ENV PATH /opt/gtk/bin:$PATH</code></p>
<p>This is my entire Dockerfile:</p>
<div class="code"><pre class="code literal-block"><span class="n">FROM</span><span class="w"> </span><span class="n">ubuntu</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">update</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">golang</span><span class="w"> </span><span class="n">gcc</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">libxml2</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">libwebkit2gtk</span><span class="o">-</span><span class="mf">3.0</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="n">libcairo2</span><span class="w"> </span><span class="n">libcairo2</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="n">libcairo</span><span class="o">-</span><span class="n">gobject2</span><span class="w"> </span><span class="n">shared</span><span class="o">-</span><span class="n">mime</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="n">libgdk</span><span class="o">-</span><span class="n">pixbuf2</span><span class="o">.</span><span class="mi">0</span><span class="o">-*</span><span class="w"> </span><span class="n">libglib2</span><span class="o">-*</span><span class="w"> </span><span class="n">libatk1</span><span class="o">.</span><span class="mi">0</span><span class="o">-*</span><span class="w"> </span><span class="n">libpango1</span><span class="o">.</span><span class="mi">0</span><span class="o">-*</span><span class="w"> </span><span class="n">xserver</span><span class="o">-</span><span class="n">xorg</span><span class="w"> </span><span class="n">xvfb</span>

<span class="c1"># Downloading GTKcd</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">gnome</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">pub</span><span class="o">/</span><span class="n">gnome</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">gtk</span><span class="o">+/</span><span class="mf">3.12</span><span class="o">/</span><span class="n">gtk</span><span class="o">+-</span><span class="mf">3.12</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="n">xf</span><span class="w"> </span><span class="n">gtk</span><span class="o">+-</span><span class="mf">3.12</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="n">gtk</span><span class="o">+-</span><span class="mf">3.12</span><span class="o">.</span><span class="mi">2</span>

<span class="c1"># Setting environment variables before running configure</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">CPPFLAGS</span><span class="o">=</span><span class="s2">"-I/opt/gtk/include"</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">LDFLAGS</span><span class="o">=</span><span class="s2">"-L/opt/gtk/lib"</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">PKG_CONFIG_PATH</span><span class="o">=</span><span class="s2">"/opt/gtk/lib/pkgconfig"</span>
<span class="n">RUN</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">CPPFLAGS</span><span class="w"> </span><span class="n">LDFLAGS</span><span class="w"> </span><span class="n">PKG_CONFIG_PATH</span>
<span class="n">RUN</span><span class="w"> </span><span class="o">./</span><span class="n">configure</span><span class="w"> </span><span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">gtk</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">make</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">install</span>

<span class="c1"># running ldconfig after make install so that the newly installed libraries are found.</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">ldconfig</span>

<span class="c1"># Setting the LD_LIBRARY_PATH environment variable so the systems dynamic linker can find the newly installed libraries.</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"/opt/gtk/lib"</span>

<span class="c1"># Updating PATH environment program so that utility binaries installed by the various libraries will be found.</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">PATH</span><span class="o">=</span><span class="s2">"/opt/gtk/bin:$PATH"</span>
<span class="n">RUN</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">LD_LIBRARY_PATH</span><span class="w"> </span><span class="n">PATH</span>

<span class="c1"># Collecting garbage</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">rf</span><span class="w"> </span><span class="n">gtk</span><span class="o">+-</span><span class="mf">3.12</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>

<span class="c1"># creating go code root</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">gocode</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">gocode</span><span class="o">/</span><span class="n">src</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">gocode</span><span class="o">/</span><span class="n">bin</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="n">gocode</span><span class="o">/</span><span class="n">pkg</span>

<span class="c1"># Setting the GOROOT and GOPATH enviornment variables, any commands created are automatically added to PATH</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">GOROOT</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">go</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">GOPATH</span><span class="o">=/</span><span class="n">root</span><span class="o">/</span><span class="n">gocode</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">PATH</span><span class="o">=$</span><span class="n">GOPATH</span><span class="o">/</span><span class="n">bin</span><span class="p">:</span><span class="o">$</span><span class="n">PATH</span>
<span class="n">RUN</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">GOROOT</span><span class="w"> </span><span class="n">GOPATH</span><span class="w"> </span><span class="n">PATH</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can use Environment Replacement in your <code>Dockerfile</code> as follows:</p>
<div class="code"><pre class="code literal-block">ENV<span class="w"> </span>PATH="<span class="cp">${</span><span class="n">PATH</span><span class="cp">}</span>:/opt/gtk/bin"
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Although the answer that Gunter posted was correct, it is not different than
what I already had posted. The problem was not the <code>ENV</code> directive, but the
subsequent instruction <code>RUN export $PATH</code></p>
<p>There's no need to export the environment variables, once you have declared
them via <code>ENV</code> in your Dockerfile.</p>
<p>As soon as the <code>RUN export ...</code> lines were removed, my image was built
successfully</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-883.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-881.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
