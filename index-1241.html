<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1241) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1241.html">
<link rel="prev" href="index-1242.html" type="text/html">
<link rel="next" href="index-1240.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-lose-margin-padding-in-uitextview/" class="u-url">How to lose margin/padding in UITextView</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-lose-margin-padding-in-uitextview/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:39:21+08:00" itemprop="datePublished" title="2023-02-18 04:39">2023-02-18 04:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a <code>UITextView</code> in my iOS application, which displays a large amount of
text.</p>
<p>I am then paging this text by using the offset margin parameter of the
<code>UITextView</code>.</p>
<p>My problem is that the padding of the <code>UITextView</code> is confusing my
calculations as it seems to be different depending on the font size and
typeface that I use.</p>
<p>Is it possible to remove the padding surrounding the content of the
<code>UITextView</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Up-to-date for 2023</h2>
<p>It is one of the silliest bugs in iOS.</p>
<p>The class given here, <code>UITextViewFixed</code> is used widely and is usually the
<strong>most reasonable solution overall</strong>.</p>
<p>Here is the class:</p>
<div class="code"><pre class="code literal-block"><span class="err">@</span><span class="n">IBDesignable</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">UITextViewFixed</span><span class="p">:</span><span class="w"> </span><span class="n">UITextView</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">layoutSubviews</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">super</span><span class="o">.</span><span class="n">layoutSubviews</span><span class="p">()</span>
<span class="w">        </span><span class="n">setup</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">func</span><span class="w"> </span><span class="n">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">textContainerInset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIEdgeInsets</span><span class="o">.</span><span class="n">zero</span>
<span class="w">        </span><span class="n">textContainer</span><span class="o">.</span><span class="n">lineFragmentPadding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Don't forget to turn off scrollEnabled in the Inspector!</p>
<ol>
<li>
<p>The solution works properly in storyboard</p>
</li>
<li>
<p>The solution works properly at runtime</p>
</li>
</ol>
<p>You're done. In general, <strong>that should be all you need in most cases</strong>.</p>
<p>Even if you are changing the height of the text view <strong>on the fly</strong> ,
<code>UITextViewFixed</code> usually does all you need.</p>
<p>(A common example of changing the height on the fly, is changing it as the
user types.)</p>
<p>Here is the broken UITextView from Apple...</p>
<p><img alt="Screenshot of Interface Builder with UITextView" src="images/4s7P6.png"></p>
<p>Here is <code>UITextViewFixed</code>:</p>
<p><img alt="Screenshot of Interface Builder with UITextViewFixed" src="images/MS5V4.png"></p>
<p>Note that of course you must...</p>
<h2>...turn off scrollEnabled in the Inspector!</h2>
<p>(Turning on scrollEnabled means "make this view expand as much as possible
vertically by expanding the bottom margin as much as possible.")</p>
<hr>
<h2>Some further issues</h2>
<p>(1) In very unusual cases when dynamically changing heights, Apple does a
bizarre thing: <em><strong>they add extra space at the bottom</strong></em>.</p>
<p>No, really! This would have to be one of the most infuriating things in iOS.</p>
<p>If you encounter the problem, here is a "quick fix" which usually helps:</p>
<div class="code"><pre class="code literal-block"><span class="o">...</span>
<span class="w">        </span><span class="n">textContainerInset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIEdgeInsets</span><span class="o">.</span><span class="n">zero</span>
<span class="w">        </span><span class="n">textContainer</span><span class="o">.</span><span class="n">lineFragmentPadding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">ideal</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">sometimes</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="s2">"quick fix"</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">solve</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s2">"extra space at the bottom"</span><span class="w"> </span><span class="n">insanity</span><span class="p">:</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bounds</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sizeThatFits</span><span class="p">(</span><span class="n">CGSize</span><span class="p">(</span>
<span class="w">           </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="w">           </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="n">CGFloat</span><span class="o">.</span><span class="n">greatestFiniteMagnitude</span><span class="p">)</span>
<span class="w">       </span><span class="p">)</span><span class="o">.</span><span class="n">height</span>
<span class="w">       </span><span class="n">b</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span>
<span class="w">       </span><span class="n">bounds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span>
<span class="w"> </span><span class="o">...</span>
</pre></div>

<p>(2) In rare cases, to fix yet another subtle mess-up by Apple, you have to
add:</p>
<div class="code"><pre class="code literal-block"><span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">setContentOffset</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="n">contentOffset</span><span class="p">:</span><span class="w"> </span><span class="n">CGPoint</span><span class="p">,</span><span class="w"> </span><span class="n">animated</span><span class="p">:</span><span class="w"> </span><span class="n">Bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">setContentOffset</span><span class="p">(</span><span class="n">contentOffset</span><span class="p">,</span><span class="w"> </span><span class="n">animated</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">sic</span>
<span class="p">}</span>
</pre></div>

<p>(3) Arguably, we <em>should</em> be adding:</p>
<div class="code"><pre class="code literal-block">contentInset = UIEdgeInsets.zero
</pre></div>

<p>just after <code>.lineFragmentPadding = 0</code> in <code>UITextViewFixed</code>.</p>
<p>However believe or not that <em><strong>just doesn't work</strong></em> in current iOS! (Checked
2023.) It may be necessary to add that line in the future.</p>
<p>The fact that <code>UITextView</code> is broken in iOS is one of the weirdest things in
all of mobile computing. Ten year anniversary of this question and it's still
not fixed!</p>
<p>Finally, here's a somewhat similar tip for Text <strong>Field</strong> : <em>Set the maximum
character length of a UITextField in Swift</em></p>
<h2>Completely random tip: how to add the "..." on the end</h2>
<p>Often you are using a UITextView "like a UILabel". So you want it to truncate
text using an ellipsis, "..."</p>
<p>If so, add:</p>
<div class="code"><pre class="code literal-block"> textContainer.lineBreakMode = .byTruncatingTail
</pre></div>

<h2>Handy tip if you want <em>zero</em> height, when, there's <em>no</em> text at all</h2>
<p>Often you use a text view to only display text. So, you use lines "0" to mean
the text view will automatically change height depending on how many lines of
text.</p>
<p>That's great. But <strong>if there is no text at all</strong> , then unfortunately you get
the same height <strong>as if there is one line of text</strong>!!!! The text view never
"goes away".</p>
<p><img alt="Enter image description here" src="images/rPM5y.png"></p>
<p>If you want it to "go away", just add this</p>
<div class="code"><pre class="code literal-block"><span class="n">override</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">intrinsicContentSize</span><span class="p">:</span><span class="w"> </span><span class="n">CGSize</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">super</span><span class="o">.</span><span class="n">intrinsicContentSize</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"for \(text) size will be \(i)"</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"   but we changed it to \(i)"</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">i</span>
<span class="p">}</span>
</pre></div>

<p><img alt="Enter image description here" src="images/od7BI.png"></p>
<p>(I made it '1' height, so it's clear what's going on in that demo, '0' is
fine.)</p>
<h2>What about UILabel?</h2>
<p>When just displaying text, UILabel has many advantages over UITextView.
UILabel does not suffer from the problems described on this Q&amp;A page.</p>
<p>Indeed the reason we all usually "give up" and just use UITextView is that
UILabel is difficult to work with. In particular it is ridiculously difficult
to just add <strong>padding</strong> , correctly, to UILabel.</p>
<p>In fact here is a full discussion on how to "finally" correctly add padding to
UILabel: <em>Adding space/padding to a UILabel</em>. In some cases if you are doing a
difficult layout with dynamic height cells, it is sometimes better to do it
the hard way with UILabel.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Up-to-date for 2023</h2>
<p>It is one of the silliest bugs in iOS.</p>
<p>The class given here, <code>UITextViewFixed</code> is used widely and is usually the
<strong>most reasonable solution overall</strong>.</p>
<p>Here is the class:</p>
<div class="code"><pre class="code literal-block"><span class="err">@</span><span class="n">IBDesignable</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">UITextViewFixed</span><span class="p">:</span><span class="w"> </span><span class="n">UITextView</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">layoutSubviews</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">super</span><span class="o">.</span><span class="n">layoutSubviews</span><span class="p">()</span>
<span class="w">        </span><span class="n">setup</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">func</span><span class="w"> </span><span class="n">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">textContainerInset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIEdgeInsets</span><span class="o">.</span><span class="n">zero</span>
<span class="w">        </span><span class="n">textContainer</span><span class="o">.</span><span class="n">lineFragmentPadding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Don't forget to turn off scrollEnabled in the Inspector!</p>
<ol>
<li>
<p>The solution works properly in storyboard</p>
</li>
<li>
<p>The solution works properly at runtime</p>
</li>
</ol>
<p>You're done. In general, <strong>that should be all you need in most cases</strong>.</p>
<p>Even if you are changing the height of the text view <strong>on the fly</strong> ,
<code>UITextViewFixed</code> usually does all you need.</p>
<p>(A common example of changing the height on the fly, is changing it as the
user types.)</p>
<p>Here is the broken UITextView from Apple...</p>
<p><img alt="Screenshot of Interface Builder with UITextView" src="images/4s7P6.png"></p>
<p>Here is <code>UITextViewFixed</code>:</p>
<p><img alt="Screenshot of Interface Builder with UITextViewFixed" src="images/MS5V4.png"></p>
<p>Note that of course you must...</p>
<h2>...turn off scrollEnabled in the Inspector!</h2>
<p>(Turning on scrollEnabled means "make this view expand as much as possible
vertically by expanding the bottom margin as much as possible.")</p>
<hr>
<h2>Some further issues</h2>
<p>(1) In very unusual cases when dynamically changing heights, Apple does a
bizarre thing: <em><strong>they add extra space at the bottom</strong></em>.</p>
<p>No, really! This would have to be one of the most infuriating things in iOS.</p>
<p>If you encounter the problem, here is a "quick fix" which usually helps:</p>
<div class="code"><pre class="code literal-block"><span class="o">...</span>
<span class="w">        </span><span class="n">textContainerInset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIEdgeInsets</span><span class="o">.</span><span class="n">zero</span>
<span class="w">        </span><span class="n">textContainer</span><span class="o">.</span><span class="n">lineFragmentPadding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">ideal</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">sometimes</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="s2">"quick fix"</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">solve</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s2">"extra space at the bottom"</span><span class="w"> </span><span class="n">insanity</span><span class="p">:</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bounds</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sizeThatFits</span><span class="p">(</span><span class="n">CGSize</span><span class="p">(</span>
<span class="w">           </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
<span class="w">           </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="n">CGFloat</span><span class="o">.</span><span class="n">greatestFiniteMagnitude</span><span class="p">)</span>
<span class="w">       </span><span class="p">)</span><span class="o">.</span><span class="n">height</span>
<span class="w">       </span><span class="n">b</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span>
<span class="w">       </span><span class="n">bounds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span>
<span class="w"> </span><span class="o">...</span>
</pre></div>

<p>(2) In rare cases, to fix yet another subtle mess-up by Apple, you have to
add:</p>
<div class="code"><pre class="code literal-block"><span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">setContentOffset</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="n">contentOffset</span><span class="p">:</span><span class="w"> </span><span class="n">CGPoint</span><span class="p">,</span><span class="w"> </span><span class="n">animated</span><span class="p">:</span><span class="w"> </span><span class="n">Bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">setContentOffset</span><span class="p">(</span><span class="n">contentOffset</span><span class="p">,</span><span class="w"> </span><span class="n">animated</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">sic</span>
<span class="p">}</span>
</pre></div>

<p>(3) Arguably, we <em>should</em> be adding:</p>
<div class="code"><pre class="code literal-block">contentInset = UIEdgeInsets.zero
</pre></div>

<p>just after <code>.lineFragmentPadding = 0</code> in <code>UITextViewFixed</code>.</p>
<p>However believe or not that <em><strong>just doesn't work</strong></em> in current iOS! (Checked
2023.) It may be necessary to add that line in the future.</p>
<p>The fact that <code>UITextView</code> is broken in iOS is one of the weirdest things in
all of mobile computing. Ten year anniversary of this question and it's still
not fixed!</p>
<p>Finally, here's a somewhat similar tip for Text <strong>Field</strong> : <em>Set the maximum
character length of a UITextField in Swift</em></p>
<h2>Completely random tip: how to add the "..." on the end</h2>
<p>Often you are using a UITextView "like a UILabel". So you want it to truncate
text using an ellipsis, "..."</p>
<p>If so, add:</p>
<div class="code"><pre class="code literal-block"> textContainer.lineBreakMode = .byTruncatingTail
</pre></div>

<h2>Handy tip if you want <em>zero</em> height, when, there's <em>no</em> text at all</h2>
<p>Often you use a text view to only display text. So, you use lines "0" to mean
the text view will automatically change height depending on how many lines of
text.</p>
<p>That's great. But <strong>if there is no text at all</strong> , then unfortunately you get
the same height <strong>as if there is one line of text</strong>!!!! The text view never
"goes away".</p>
<p><img alt="Enter image description here" src="images/rPM5y.png"></p>
<p>If you want it to "go away", just add this</p>
<div class="code"><pre class="code literal-block"><span class="n">override</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">intrinsicContentSize</span><span class="p">:</span><span class="w"> </span><span class="n">CGSize</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">super</span><span class="o">.</span><span class="n">intrinsicContentSize</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"for \(text) size will be \(i)"</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"   but we changed it to \(i)"</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">i</span>
<span class="p">}</span>
</pre></div>

<p><img alt="Enter image description here" src="images/od7BI.png"></p>
<p>(I made it '1' height, so it's clear what's going on in that demo, '0' is
fine.)</p>
<h2>What about UILabel?</h2>
<p>When just displaying text, UILabel has many advantages over UITextView.
UILabel does not suffer from the problems described on this Q&amp;A page.</p>
<p>Indeed the reason we all usually "give up" and just use UITextView is that
UILabel is difficult to work with. In particular it is ridiculously difficult
to just add <strong>padding</strong> , correctly, to UILabel.</p>
<p>In fact here is a full discussion on how to "finally" correctly add padding to
UILabel: <em>Adding space/padding to a UILabel</em>. In some cases if you are doing a
difficult layout with dynamic height cells, it is sometimes better to do it
the hard way with UILabel.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-it-possible-to-disable-the-network-in-ios-simulator/" class="u-url">Is it possible to disable the network in iOS Simulator?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-it-possible-to-disable-the-network-in-ios-simulator/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:38:52+08:00" itemprop="datePublished" title="2023-02-18 04:38">2023-02-18 04:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to debug some inconsistent behaviour I am seeing in an application
that gets its primary data from the Internet. I don't see the issues in the
simulator, just on the device, so I'd like to reproduce the network and
connectivity environment in the simulator.</p>
<p>Is there a way of disabling the network in the simulator?</p>
<p>(I am connecting to the Mac remotely to code, and there isn't any other choice
right now, so disabling the OS network isn't an option).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I'm afraid not—the simulator shares whatever network connection the OS is
using. I filed a Radar bug report about simulating network conditions a while
back; you might consider doing the same.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Yes. In Xcode, you can go to menu <em>Open Developer Tools</em> → <em>More Developer
Tools</em> and download "Additional Tools for Xcode", which will have the Network
Link Conditioner.</p>
<p>Using this tool, you can simulate different network scenarios (such as 100%
loss, 3G, high-latency DNS, and more) and you can create your own custom ones
as well.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-can-t-i-define-a-static-method-in-a-java-interface/" class="u-url">Why can't I define a static method in a Java interface?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-can-t-i-define-a-static-method-in-a-java-interface/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:38:20+08:00" itemprop="datePublished" title="2023-02-18 04:38">2023-02-18 04:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>EDIT:</strong> <em>As of Java 8, static methods are now allowed in interfaces.</em></p>
<p>Here's the example:</p>
<div class="code"><pre class="code literal-block">public interface IXMLizable&lt;T&gt;
{
  static T newInstanceFromXML(Element e);
  Element toXMLElement();
}
</pre></div>

<p>Of course this won't work. But why not?</p>
<p>One of the possible issues would be, what happens when you call:</p>
<div class="code"><pre class="code literal-block">IXMLizable.newInstanceFromXML(e);
</pre></div>

<p>In this case, I think it should just call an empty method (i.e. {}). All
subclasses would be forced to implement the static method, so they'd all be
fine when calling the static method. So why isn't this possible?</p>
<p><strong>EDIT:</strong> I guess I'm looking for answer that's deeper than "because that's
the way Java is".</p>
<p>Is there a particular technological reason why static methods can't be
overwritten? That is, why did the designers of Java decide to make instance
methods overrideable but not static methods?</p>
<p><strong>EDIT:</strong> The problem with my design is I'm trying to use interfaces to
enforce a coding convention.</p>
<p>That is, the goal of the interface is twofold:</p>
<ol>
<li>
<p>I want the IXMLizable interface to allow me to convert classes that implement it to XML elements (using polymorphism, works fine).</p>
</li>
<li>
<p>If someone wants to make a new instance of a class that implements the IXMLizable interface, they will always know that there will be a newInstanceFromXML(Element e) static constructor.</p>
</li>
</ol>
<p>Is there any other way to ensure this, other than just putting a comment in
the interface?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Java 8 permits static interface methods</h2>
<p>With Java 8, interfaces <em>can</em> have static methods. They can also have concrete
instance methods, but not instance fields.</p>
<p>There are really two questions here:</p>
<ol>
<li>Why, in the bad old days, couldn't interfaces contain static methods?</li>
<li>Why can't static methods be overridden?</li>
</ol>
<h2>Static methods in interfaces</h2>
<p>There was no strong technical reason why interfaces couldn't have had static
methods in previous versions. This is summed up nicely by the poster of a
duplicate question. Static interface methods were initially considered as a
small language change, and then there was an official proposal to add them in
Java 7, but it was later dropped due to unforeseen complications.</p>
<p>Finally, Java 8 introduced static interface methods, as well as override-able
instance methods with a default implementation. They still can't have instance
fields though. These features are part of the lambda expression support, and
you can read more about them in Part H of JSR 335.</p>
<h2>Overriding static methods</h2>
<p>The answer to the second question is a little more complicated.</p>
<p>Static methods are resolvable at compile time. Dynamic dispatch makes sense
for instance methods, where the compiler can't determine the concrete type of
the object, and, thus, can't resolve the method to invoke. But invoking a
static method requires a class, and since that class is known <em>statically</em> —at
compile time—dynamic dispatch is unnecessary.</p>
<p>A little background on how instance methods work is necessary to understand
what's going on here. I'm sure the actual implementation is quite different,
but let me explain my notion of method dispatch, which models observed
behavior accurately.</p>
<p>Pretend that each class has a hash table that maps method signatures (name and
parameter types) to an actual chunk of code to implement the method. When the
virtual machine attempts to invoke a method on an instance, it queries the
object for its class and looks up the requested signature in the class's
table. If a method body is found, it is invoked. Otherwise, the parent class
of the class is obtained, and the lookup is repeated there. This proceeds
until the method is found, or there are no more parent classes—which results
in a <code>NoSuchMethodError</code>.</p>
<p>If a superclass and a subclass both have an entry in their tables for the same
method signature, the sub class's version is encountered first, and the
superclass's version is never used—this is an "override".</p>
<p>Now, suppose we skip the object instance and just start with a subclass. The
resolution could proceed as above, giving you a sort of "overridable" static
method. The resolution can all happen at compile-time, however, since the
compiler is starting from a known class, rather than waiting until runtime to
query an object of an unspecified type for its class. There is no point in
"overriding" a static method since one can always specify the class that
contains the desired version.</p>
<hr>
<h2>Constructor "interfaces"</h2>
<p>Here's a little more material to address the recent edit to the question.</p>
<p>It sounds like you want to effectively mandate a constructor-like method for
each implementation of <code>IXMLizable</code>. Forget about trying to enforce this with
an interface for a minute, and pretend that you have some classes that meet
this requirement. How would you use it?</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Foo</span> <span class="n">implements</span> <span class="n">IXMLizable</span><span class="s">&lt;Foo&gt;</span> {
  <span class="n">public</span> <span class="n">static</span> <span class="n">Foo</span> <span class="n">newInstanceFromXML</span>(<span class="n">Element</span> <span class="nb">e</span>) { ... }
}

<span class="n">Foo</span> <span class="n">obj</span> = <span class="n">Foo</span>.<span class="n">newInstanceFromXML</span>(<span class="nb">e</span>);
</pre></div>

<p>Since you have to explicitly name the concrete type <code>Foo</code> when "constructing"
the new object, the compiler can verify that it does indeed have the necessary
factory method. And if it doesn't, so what? If I can implement an <code>IXMLizable</code>
that lacks the "constructor", and I create an instance and pass it to your
code, it <em>is</em> an <code>IXMLizable</code> with all the necessary interface.</p>
<p><em>Construction is part of the implementation,</em> not the interface. Any code that
works successfully with the interface doesn't care about the constructor. Any
code that cares about the constructor needs to know the concrete type anyway,
and the interface can be ignored.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This was already asked and answered, here</p>
<p>To duplicate my answer:</p>
<p>There is never a point to declaring a static method in an interface. They
cannot be executed by the normal call MyInterface.staticMethod(). If you call
them by specifying the implementing class MyImplementor.staticMethod() then
you must know the actual class, so it is irrelevant whether the interface
contains it or not.</p>
<p>More importantly, static methods are never overridden, and if you try to do:</p>
<div class="code"><pre class="code literal-block"><span class="n">MyInterface</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">MyImplementingClass</span><span class="p">();</span>
<span class="k">var</span><span class="o">.</span><span class="n">staticMethod</span><span class="p">();</span>
</pre></div>

<p>the rules for static say that the method defined in the declared type of var
must be executed. Since this is an interface, this is impossible.</p>
<p>The reason you can't execute "result=MyInterface.staticMethod()" is that it
would have to execute the version of the method defined in MyInterface. But
there can't be a version defined in MyInterface, because it's an interface. It
doesn't have code by definition.</p>
<p>While you can say that this amounts to "because Java does it that way", in
reality the decision is a logical consequence of other design decisions, also
made for very good reason.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1242.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1240.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
