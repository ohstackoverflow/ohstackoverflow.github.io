<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 813) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-813.html">
<link rel="prev" href="index-814.html" type="text/html">
<link rel="next" href="index-812.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/postgres-upgrade-a-user-to-be-a-superuser/" class="u-url">postgres: upgrade a user to be a superuser?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/postgres-upgrade-a-user-to-be-a-superuser/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T16:38:25+08:00" itemprop="datePublished" title="2023-02-17 16:38">2023-02-17 16:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In postgres, how do I change an existing user to be a superuser? I don't want
to delete the existing user, for various reasons.</p>
<div class="code"><pre class="code literal-block"># alter user myuser ...?
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">ALTER USER myuser WITH SUPERUSER;
</pre></div>

<p>You can read more at the Documentation for ALTER USER</p>
<p><br></p>
<h3>Suggest</h3>
<p>To expand on the above and make a quick reference:</p>
<ul>
<li>To make a user a SuperUser: <code>ALTER USER username WITH SUPERUSER;</code>
</li>
<li>To make a user no longer a SuperUser: <code>ALTER USER username WITH NOSUPERUSER;</code>
</li>
<li>To just allow the user to create a database: <code>ALTER USER username CREATEDB;</code>
</li>
</ul>
<p>You can also use <code>CREATEROLE</code> and <code>CREATEUSER</code> to allow a user privileges
without making them a superuser.</p>
<p>Documentation</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-quickest-way-to-http-get-in-python/" class="u-url">What is the quickest way to HTTP GET in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-quickest-way-to-http-get-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T16:37:58+08:00" itemprop="datePublished" title="2023-02-17 16:37">2023-02-17 16:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the quickest way to HTTP GET in Python if I know the content will be a
string? I am searching the documentation for a quick one-liner like:</p>
<div class="code"><pre class="code literal-block">contents = url.get("http://example.com/foo/bar")
</pre></div>

<p>But all I can find using Google are <code>httplib</code> and <code>urllib</code> - and I am unable
to find a shortcut in those libraries.</p>
<p>Does standard Python 2.5 have a shortcut in some form as above, or should I
write a function <code>url_get</code>?</p>
<ol>
<li>I would prefer not to capture the output of shelling out to <code>wget</code> or <code>curl</code>.</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>Python 3:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="n">contents</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">"http://example.com/foo/bar"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

<p>Python 2:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">urllib2</span>
<span class="n">contents</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">"http://example.com/foo/bar"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

<p>Documentation for <code>urllib.request</code> and <code>read</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Use the Requests library:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"http://example.com/foo/bar"</span><span class="p">)</span>
</pre></div>

<p>Then you can do stuff like this:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; print(r.status_code)
&gt;&gt;&gt; print(r.headers)
&gt;&gt;&gt; print(r.content)  # bytes
&gt;&gt;&gt; print(r.text)     # r.content as str
</pre></div>

<p>Install Requests by running this command:</p>
<div class="code"><pre class="code literal-block">pip install requests
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-a-fixed-prefix-suffix-from-a-string-in-bash/" class="u-url">Remove a fixed prefix/suffix from a string in Bash</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-a-fixed-prefix-suffix-from-a-string-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T16:37:33+08:00" itemprop="datePublished" title="2023-02-17 16:37">2023-02-17 16:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to remove the prefix/suffix from a string. For example, given:</p>
<div class="code"><pre class="code literal-block">string="hello-world"
prefix="hell"
suffix="ld"
</pre></div>

<p>How do I get the following result?</p>
<div class="code"><pre class="code literal-block">"o-wor"
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">prefix</span><span class="o">=</span><span class="s2">"hell"</span>
$<span class="w"> </span><span class="nv">suffix</span><span class="o">=</span><span class="s2">"ld"</span>
$<span class="w"> </span><span class="nv">string</span><span class="o">=</span><span class="s2">"hello-world"</span>
$<span class="w"> </span><span class="nv">foo</span><span class="o">=</span><span class="si">${</span><span class="nv">string</span><span class="p">#</span><span class="s2">"</span><span class="nv">$prefix</span><span class="s2">"</span><span class="si">}</span>
$<span class="w"> </span><span class="nv">foo</span><span class="o">=</span><span class="si">${</span><span class="nv">foo</span><span class="p">%</span><span class="s2">"</span><span class="nv">$suffix</span><span class="s2">"</span><span class="si">}</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">foo</span><span class="si">}</span><span class="s2">"</span>
o-wor
</pre></div>

<p>This is documented in the Shell Parameter Expansion section of the manual:</p>
<blockquote>
<p><code>${parameter#word}</code><br><code>${parameter##word}</code></p>
<p>The word is expanded to produce a pattern and matched according to the rules
described below (see Pattern Matching). If the pattern matches the beginning
of the expanded value of parameter, then the result of the expansion is the
expanded value of parameter with the shortest matching pattern (the <code>#</code>
case) or the longest matching pattern (the <code>##</code> case) deleted. […]</p>
<p><code>${parameter%word}</code><br><code>${parameter%%word}</code></p>
<p>The word is expanded to produce a pattern and matched according to the rules
described below (see Pattern Matching). If the pattern matches a trailing
portion of the expanded value of parameter, then the result of the expansion
is the value of parameter with the shortest matching pattern (the <code>%</code> case)
or the longest matching pattern (the <code>%%</code> case) deleted. […]</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Using sed:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="nv">$string</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s2">"s/^</span><span class="nv">$prefix</span><span class="s2">//"</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">"s/</span><span class="nv">$suffix</span>$<span class="s2">//"</span>
o-wor
</pre></div>

<p>Within the sed command, the <code>^</code> character matches text beginning with
<code>$prefix</code>, and the trailing <code>$</code> matches text ending with <code>$suffix</code>.</p>
<p>Adrian Frühwirth makes some good points in the comments below, but <code>sed</code> for
this purpose can be very useful. The fact that the contents of $prefix and
$suffix are interpreted by sed can be either good OR bad- as long as you pay
attention, you should be fine. The beauty is, you can do something like this:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">prefix</span><span class="o">=</span><span class="s1">'^.*ll'</span>
$<span class="w"> </span><span class="nv">suffix</span><span class="o">=</span><span class="s1">'ld$'</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="nv">$string</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s2">"s/^</span><span class="nv">$prefix</span><span class="s2">//"</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">"s/</span><span class="nv">$suffix</span>$<span class="s2">//"</span>
o-wor
</pre></div>

<p>which may be what you want, and is both fancier and more powerful than bash
variable substitution. If you remember that with great power comes great
responsibility (as Spiderman says), you should be fine.</p>
<p>A quick introduction to sed can be found at http://evc-
cit.info/cit052/sed_tutorial.html</p>
<p>A note regarding the shell and its use of strings:</p>
<p>For the particular example given, the following would work as well:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$string</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span>s/^<span class="nv">$prefix</span>//<span class="w"> </span>-e<span class="w"> </span>s/<span class="nv">$suffix</span>$//
</pre></div>

<p>...but only because:</p>
<ol>
<li>echo doesn't care how many strings are in its argument list, and</li>
<li>There are no spaces in $prefix and $suffix</li>
</ol>
<p>It's generally good practice to quote a string on the command line because
even if it contains spaces it will be presented to the command as a single
argument. We quote $prefix and $suffix for the same reason: each edit command
to sed will be passed as one string. We use double quotes because they allow
for variable interpolation; had we used single quotes the sed command would
have gotten a literal <code>$prefix</code> and <code>$suffix</code> which is certainly not what we
wanted.</p>
<p>Notice, too, my use of single quotes when setting the variables <code>prefix</code> and
<code>suffix</code>. We certainly don't want anything in the strings to be interpreted,
so we single quote them so no interpolation takes place. Again, it may not be
necessary in this example but it's a very good habit to get into.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-814.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-812.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
