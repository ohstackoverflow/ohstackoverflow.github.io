<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2040) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2040.html">
<link rel="prev" href="index-2041.html" type="text/html">
<link rel="next" href="index-2039.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/if-elif-else-statement-issues-in-bash/" class="u-url">if, elif, else statement issues in Bash</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/if-elif-else-statement-issues-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:29:55+08:00" itemprop="datePublished" title="2023-03-03 15:29">2023-03-03 15:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I can't seem to work out what the issue with the following <code>if</code> statement is
in regards to the <code>elif</code> and <code>then</code>. Keep in mind the <code>printf</code> is still under
development I just haven't been able to test it yet in the statement so is
more than likely wrong.</p>
<p>The error I'm getting is:</p>
<div class="code"><pre class="code literal-block">.<span class="o">/</span><span class="nv">timezone_string</span>.<span class="nv">sh</span>:<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">14</span>:<span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">near</span><span class="w"> </span><span class="nv">unexpected</span><span class="w"> </span><span class="nv">token</span><span class="w"> </span>`<span class="k">then</span><span class="err">'</span>
.<span class="o">/</span><span class="nv">timezone_string</span>.<span class="nv">sh</span>:<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">14</span>:<span class="w"> </span>`<span class="k">then</span><span class="err">'</span>
</pre></div>

<p>And the statement is like so.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$seconds"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>]<span class="c1">;then</span>
<span class="w">   </span>$<span class="nv">timezone_string</span><span class="o">=</span><span class="s2">"Z"</span>
<span class="nv">elif</span>[<span class="w"> </span><span class="s2">"$seconds"</span><span class="w"> </span><span class="o">-</span><span class="nv">gt</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>]
<span class="k">then</span>
<span class="w">   </span>$<span class="nv">timezone_string</span><span class="o">=</span>`<span class="nv">printf</span><span class="w"> </span><span class="s2">"%02d:%02d"</span><span class="w"> </span>$<span class="nv">seconds</span><span class="o">/</span><span class="mi">3600</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">seconds</span><span class="o">/</span><span class="mi">60</span><span class="ss">)</span><span class="o">%</span><span class="mi">60</span>`
<span class="k">else</span>
<span class="w">   </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Unknown parameter"</span>
<span class="nv">fi</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>There is a space missing between <code>elif</code> and <code>[</code>:</p>
<div class="code"><pre class="code literal-block">elif[ "$seconds" -gt 0 ]
</pre></div>

<p>should be</p>
<div class="code"><pre class="code literal-block">elif [ "$seconds" -gt 0 ]
</pre></div>

<p>All together, the syntax to follow is:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="nv">conditions</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">   </span>#<span class="w"> </span><span class="nv">Things</span>
<span class="nv">elif</span><span class="w"> </span>[<span class="w"> </span><span class="nv">other_conditions</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">   </span>#<span class="w"> </span><span class="nv">Other</span><span class="w"> </span><span class="nv">things</span>
<span class="k">else</span>
<span class="w">   </span>#<span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">none</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">above</span><span class="w"> </span><span class="nv">occurs</span>
<span class="nv">fi</span>
</pre></div>

<hr>
<p>As I see this question is getting a lot of views, it is important to indicate
that the syntax to follow is:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="nv">conditions</span><span class="w"> </span>]
#<span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="o">^</span><span class="w">          </span><span class="o">^</span>
</pre></div>

<p>meaning that <strong>spaces are needed around the brackets</strong>. Otherwise, it won't
work. This is because <code>[</code> itself <em>is</em> a command.</p>
<p>The reason why you are not seeing something like <code>elif[: command not found</code>
(or similar) is that after seeing <code>if</code> and <code>then</code>, the shell is looking for
either <code>elif</code>, <code>else</code>, or <code>fi</code>. However it finds another <code>then</code> (after the
mis-formatted <code>elif[</code>). Only <em>after</em> having parsed the statement it would be
executed (and an error message like <code>elif[: command not found</code> would be
output).</p>
<p><br></p>
<h3>Suggest</h3>
<p>You have some syntax issues with your script. Here is a fixed version:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">"</span><span class="nv">$seconds</span><span class="s2">"</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="w">   </span><span class="nv">timezone_string</span><span class="o">=</span><span class="s2">"Z"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">"</span><span class="nv">$seconds</span><span class="s2">"</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-6"><code data-line-number="6"></code></a></td>
<td class="code"><code><span class="w">   </span><span class="nv">timezone_string</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%02d:%02d"</span><span class="w"> </span><span class="k">$((</span>seconds/3600<span class="k">))</span><span class="w"> </span><span class="k">$((</span><span class="o">(</span>seconds<span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">60</span><span class="o">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">60</span><span class="k">)))</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-7"><code data-line-number="7"></code></a></td>
<td class="code"><code><span class="k">else</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-8"><code data-line-number="8"></code></a></td>
<td class="code"><code><span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Unknown parameter"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/if-elif-else-statement-issues-in-bash/#-9"><code data-line-number="9"></code></a></td>
<td class="code"><code><span class="k">fi</span>
</code></td>
</tr>
</table></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-does-damp-not-dry-mean-when-talking-about-unit-tests/" class="u-url">What does “DAMP not DRY” mean when talking about unit tests?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-does-damp-not-dry-mean-when-talking-about-unit-tests/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:29:33+08:00" itemprop="datePublished" title="2023-03-03 15:29">2023-03-03 15:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I heard someone say that unit tests (e.g. nUnit, jUnit, xUnit) should be</p>
<blockquote>
<p>DAMP not DRY</p>
</blockquote>
<p>(E.g. unit tests should contain "damp code" not "dry code")</p>
<p>What are they talking about?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>It's a balance, not a contradiction</h4>
<p>DAMP and DRY are not contradictory, rather they balance two different aspects
of a code's <em>maintainability</em>. Maintainable code (code that is easy to change)
is the ultimate goal here.</p>
<h4>
<strong>DAMP</strong> (Descriptive And Meaningful Phrases) promotes the <em>readability</em>
</h4>
<p>of the code.</p>
<p>To maintain code, you first need to understand the code. To understand it, you
have to read it. Consider for a moment how much time you spend <em>reading</em> code.
It's a lot. <em>DAMP increases maintainability by reducing the time necessary to
read and understand the code.</em></p>
<h4>
<strong>DRY</strong> (Don't repeat yourself) promotes the <em>orthogonality</em> of the code.</h4>
<p>Removing duplication ensures that every concept in the system has a single
authoritative representation in the code. A change to a single business
concept results in a single change to the code. <em>DRY increases maintainability
by isolating change (risk) to only those parts of the system that must
change.</em></p>
<h4>So, why is duplication more acceptable in tests?</h4>
<p>Tests often contain inherent duplication because they are testing the same
thing over and over again, only with slightly different input values or setup
code. However, unlike production code, this duplication is usually isolated
only to the scenarios within a single test fixture/file. Because of this, the
duplication is minimal and obvious, which means it poses less risk to the
project than other types of duplication.</p>
<p>Furthermore, removing this kind of duplication reduces the readability of the
tests. The details that were previously duplicated in each test are now hidden
away in some new method or class. To get the full picture of the test, you now
have to mentally put all these pieces back together.</p>
<p>Therefore, since test code duplication often carries less risk, and promotes
readability, its easy to see how it is considered acceptable.</p>
<p><em>As a principle, favor DRY in production code, favor DAMP in test code. While
both are equally important, with a little wisdom you can tip the balance in
your favor.</em></p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>DAMP - Descriptive And Meaningful Phrases.</p>
</blockquote>
<p>"DAMP not DRY" values readability over code re-use. The idea of DAMP not DRY
in test cases is that tests should be easy to understand, even if that means
test cases sometimes have repeated code.</p>
<p>See also Is duplicated code more tolerable in unit tests? for some discussion
on the merits of this viewpoint.</p>
<p>It may have been coined by Jay Fields, in relation to Domain Specific
Languages.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mysql-how-to-allow-remote-connection-to-mysql/" class="u-url">MySQL: How to allow remote connection to mysql</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mysql-how-to-allow-remote-connection-to-mysql/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:29:07+08:00" itemprop="datePublished" title="2023-03-03 15:29">2023-03-03 15:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have installed MySQL Community Edition 5.5 on my local machine and I want to
allow remote connections so that I can connect from external source.</p>
<p>How can I do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>That is allowed by default on MySQL.</p>
<p>What is disabled by default is remote <code>root</code> access. If you want to enable
that, run this SQL command locally:</p>
<div class="code"><pre class="code literal-block"> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION;
 FLUSH PRIVILEGES;
</pre></div>

<p>And then find the following line and <strong>comment it out</strong> in your <code>my.cnf</code> file,
which usually lives on <code>/etc/mysql/my.cnf</code> on Unix/OSX systems. In some cases
the location for the file is /etc/mysql/mysql.conf.d/mysqld.cnf).</p>
<p>If it's a Windows system, you can find it in the MySQL installation directory,
usually something like <code>C:\Program Files\MySQL\MySQL Server 5.5\</code> and the
filename will be <code>my.ini</code>.</p>
<p>Change line</p>
<div class="code"><pre class="code literal-block"> bind-address = 127.0.0.1
</pre></div>

<p>to</p>
<div class="code"><pre class="code literal-block"> #bind-address = 127.0.0.1
</pre></div>

<p>And restart the MySQL server (Unix/OSX, and Windows) for the changes to take
effect.</p>
<p><br></p>
<h3>Suggest</h3>
<p>After doing all of above I still couldn't login as <code>root</code> remotely, but
Telnetting to port <code>3306</code> confirmed that <code>MySQL</code> was accepting connections.</p>
<p>I started looking at the users in MySQL and noticed there were multiple root
users with different passwords.</p>
<div class="code"><pre class="code literal-block">select user, host, password from mysql.user;
</pre></div>

<p>So in <code>MySQL</code> I set all the passwords for root again and I could finally log
in remotely as <code>root</code>.</p>
<div class="code"><pre class="code literal-block">use mysql;
update user set password=PASSWORD('NEWPASSWORD') where User='root';
flush privileges;
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2041.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2039.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
