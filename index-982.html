<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 982) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-982.html">
<link rel="prev" href="index-983.html" type="text/html">
<link rel="next" href="index-981.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/java-zhong-de-getpath-getabsolutepath-he-getcanonicalpath-you-shi-yao-qu-bie/" class="u-url">Java 中的getPath()、getAbsolutePath() 和getCanonicalPath() 有什么区别？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/java-zhong-de-getpath-getabsolutepath-he-getcanonicalpath-you-shi-yao-qu-bie/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:47:35+08:00" itemprop="datePublished" title="2023-02-17 21:47">2023-02-17 21:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>getPath()</code>在 Java 中，<code>getAbsolutePath()</code>、 和之间有什么区别<code>getCanonicalPath()</code>？</p>
<p>我什么时候使用每一个？</p>
<p><br><br></p>
<h2>解答</h2>
<p>考虑这些文件名：</p>
<p><code>C:\temp\file.txt</code>- 这是一条路径，一条绝对路径，一条规范路径。</p>
<p><code>.\file.txt</code>——这是一条路。它既不是绝对路径也不是规范路径。</p>
<p><code>C:\temp\myapp\bin\..\\..\file.txt</code>- 这是一条路径，也是一条绝对路径。这不是规范的路径。</p>
<p>规范路径始终是绝对路径。</p>
<p>从路径转换为规范路径使其成为绝对路径（通常附加在当前工作目录上，例如<code>./file.txt</code>变为<code>c:/temp/file.txt</code>）。文件的规范路径只是“净化”路径，删除和解析诸如符号链接之类的东西<code>..\</code>并解析符号链接（在
unix 上）。</p>
<p>另请注意以下带有 nio.Paths 的示例：</p>
<div class="code"><pre class="code literal-block"><span class="nt">String</span><span class="w"> </span><span class="nt">canonical_path_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"C:\\Windows\\System32\\"</span><span class="o">;</span>
<span class="nt">String</span><span class="w"> </span><span class="nt">absolute_path_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"C:\\Windows\\System32\\drivers\\..\\"</span><span class="o">;</span>

<span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">.</span><span class="nc">println</span><span class="o">(</span><span class="nt">Paths</span><span class="p">.</span><span class="nc">get</span><span class="o">(</span><span class="nt">canonical_path_string</span><span class="o">)</span><span class="p">.</span><span class="nc">getParent</span><span class="o">());</span>
<span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">.</span><span class="nc">println</span><span class="o">(</span><span class="nt">Paths</span><span class="p">.</span><span class="nc">get</span><span class="o">(</span><span class="nt">absolute_path_string</span><span class="o">)</span><span class="p">.</span><span class="nc">getParent</span><span class="o">());</span>
</pre></div>

<p>虽然两条路径都指向相同的位置，但输出将大不相同：</p>
<div class="code"><pre class="code literal-block">C:\Windows
C:\Windows\System32\drivers
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>我发现感受这样的事情的最好方法是尝试一下：</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">java.io.File</span><span class="p">;</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">PathTesting</span> <span class="p">{</span>
    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span> <span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="n">new</span> <span class="n">File</span><span class="p">(</span><span class="s2">"test/.././file.txt"</span><span class="p">);</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getPath</span><span class="p">());</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getAbsolutePath</span><span class="p">());</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getCanonicalPath</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>您的输出将类似于：</p>
<div class="code"><pre class="code literal-block">test\..\.\file.txt
C:\projects\sandbox\trunk\test\..\.\file.txt
C:\projects\sandbox\trunk\file.txt
</pre></div>

<p>因此，<code>getPath()</code>为您提供基于 File
对象的路径，该路径可能是相对的，也可能不是相对的；<code>getAbsolutePath()</code>为您提供文件的绝对路径；并<code>getCanonicalPath()</code>为您提供文件的唯一绝对路径。请注意，有大量绝对路径指向同一个文件，但只有一个规范路径。</p>
<p>什么时候使用？取决于您要完成的任务，但如果您试图查看两个文件是否<code>Files</code>指向磁盘上的同一个文件，则可以比较它们的规范路径。只是一个例子。</p>
<p><br><br><a href="posts/what-s-the-difference-between-getpath-getabsolutepath-and-getcanonicalpath-in-java/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/distribute-distutils-setuptools-he-distutils2-zhi-jian-de-qu-bie/" class="u-url">distribute、distutils、setuptools 和 distutils2 之间的区别？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/distribute-distutils-setuptools-he-distutils2-zhi-jian-de-qu-bie/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:47:06+08:00" itemprop="datePublished" title="2023-02-17 21:47">2023-02-17 21:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <h3>情况</h3>
<p>我正在尝试将开源库移植到 Python 3。（SymPy，如果有人想知道的话。）</p>
<p>因此，我需要<code>2to3</code>在为 Python 3 构建时自动运行。为此，我需要使用<code>distribute</code>. 因此，我需要移植当前系统，（根据
doctest）是<code>distutils</code>.</p>
<h3>问题</h3>
<p>不幸的是，我不确定这些模块之间有什么区别<code>distutils</code>—— , <code>distribute</code>,
<code>setuptools</code>。该文档最好是粗略的，因为它们似乎都是彼此的一个分支，旨在在大多数情况下兼容（但实际上，不是全部）......等等，等等。</p>
<h3>问题</h3>
<p><strong>有人可以解释差异吗？</strong>
我应该用什么？什么是最现代的解决方案？（顺便说一句，我也很感激一些关于移植到的指南<code>Distribute</code>，但这有点超出了问题的范围......）</p>
<p><br><br></p>
<h2>解答</h2>
<p>截至 2022 年 5 月，该问题的其他大部分答案都已过时数年。当您遇到有关 Python 打包问题的建议时，请记住查看发布日期，不要相信过时的信息。</p>
<p>Python打包用户指南值得一读。每个页面都有一个“最后更新”日期显示，因此您可以检查手册的最新情况，而且它非常全面。事实上，它托管在 Python
软件基金会的 python.org 子域上，这增加了它的可信度。Project Summaries页面在这里尤为重要。</p>
<h3>工具总结：</h3>
<p>以下是 Python 打包环境的总结：</p>
<h4>支持的工具：</h4>
<ul>
<li>
<p><strong><code>setuptools</code></strong> 是为了克服 Distutils 的限制而开发的，不包含在标准库中。它引入了一个名为<code>easy_install</code>. 它还介绍了<code>setuptools</code>可以在您的<code>setup.py</code>脚本中导入的 Python 包，以及<code>pkg_resources</code>可以在您的代码中导入的 Python 包以定位随分发安装的数据文件。它的陷阱之一是它对<code>distutils</code>Python 包进行猴子修补。它应该与<code>pip</code>. 它看到定期发布。</p>
<ul>
<li>官方文档| Pypi 页面| GitHub 回购| <code>setuptools</code>Python 包用户指南部分</li>
<li>
<p><strong><code>scikit-build</code></strong> 是一个改进的构建系统生成器，它在内部使用 CMake 来构建已编译的 Python 扩展。因为 scikit-build 不是基于 distutils，所以它实际上没有任何限制。当 ninja-build 存在时，scikit-build 编译大型项目的速度是其他项目的三倍多。它应该与<code>pip</code>.</p>
</li>
<li>
<p>官方文档| Pypi 页面| GitHub 回购| <code>scikit-build</code>Python 包用户指南部分</p>
</li>
<li>
<p><strong><code>distlib</code></strong> 是一个提供高级工具（如<code>pip</code>.</p>
</li>
<li>
<p>官方文档| Pypi 页面| 位桶回购| <code>distlib</code>Python 包用户指南部分</p>
</li>
<li>
<p><strong><code>packaging</code></strong> 也是一个提供高级工具使用的功能的库，例如<code>pip</code>和<code>setuptools</code></p>
</li>
<li>
<p>官方文档| Pypi 页面| GitHub 回购| <code>packaging</code>Python 包用户指南部分</p>
</li>
</ul>
</li>
</ul>
<h4>弃用/废弃的工具：</h4>
<ul>
<li>
<p><strong><code>distutils</code></strong> 仍然包含在 Python 的标准库中，但从 Python 3.10 开始被认为已弃用。它对于简单的 Python 发行版很有用，但缺乏功能。它介绍了<code>distutils</code>可以在您的<code>setup.py</code>脚本中导入的 Python 包。</p>
<ul>
<li>官方文档| <code>distutils</code>Python 包用户指南部分</li>
<li>
<strong><code>distribute</code></strong> 是一个叉子<code>setuptools</code>。它共享相同的名称空间，因此如果您安装了 Distribute，<code>import setuptools</code>实际上将导入使用 Distribute 分发的包。 _ <strong>Distribute 已合并回 Setuptools 0.7</strong>_ ，因此您不再需要使用 Distribute。其实Pypi上的版本只是安装了Setuptools的兼容层。</li>
</ul>
</li>
<li>
<p><strong><code>distutils2</code></strong> 是试图充分利用<code>distutils</code>，<code>setuptools</code>并<code>distribute</code>成为 Python 标准库中包含的标准工具。这个想法是<code>distutils2</code>为旧的 Python 版本分发，并将<code>distutils2</code>重命名<code>packaging</code>为 Python 3.3，它将包含在其标准库中。然而，这些计划并没有按预期进行，目前 _ <strong><code>distutils2</code> 是一个废弃的项目</strong>_。最新版本发布于 2012 年 3 月，其 Pypi 主页终于更新以反映其死亡。</p>
</li>
</ul>
<h3>其他的：</h3>
<p>还有其他工具，如果你有兴趣，请阅读Python Packaging User Guide 中的Project Summaries
。我不会将它们全部列出来，不重复该页面，并使答案与问题相匹配，这只是关于<code>distribute</code>、和。<code>distutils``setuptools``distutils2</code></p>
<h3>推荐：</h3>
<p>如果所有这些对您来说都是新的，并且您不知道从哪里开始，
<strong>我建议您学习<code>setuptools</code></strong>以及<code>pip</code>和<code>virtualenv</code>，它们可以很好地协同工作。</p>
<p>如果您正在研究<code>virtualenv</code>，您可能会对这个问题感兴趣：、、、、等之间有什么区别？<code>venv``pyvenv``pyenv``virtualenv``virtualenvwrapper</code>.
（是的，我知道，我和你一起呻吟。）</p>
<p><br></p>
<h3>更多建议</h3>
<p>我是 distutils 维护者和 distutils2/packaging 贡献者。我在 ConFoo 2011 上讨论了 Python
打包，最近我正在编写它的扩展版本。它尚未发布，因此这里摘录一些应该有助于定义事物的摘录。</p>
<ul>
<li>
<p><strong>Distutils</strong> 是用于打包的标准工具。对于简单的需求，它工作得相当好，但扩展起来是有限的而且不是微不足道的。</p>
</li>
<li>
<p><strong>Setuptools</strong> 是一个项目，源于填补缺失的 distutils 功能和探索新方向的愿望。在某些子社区中，它是 <em>事实上的</em> 标准。它使用 Python 核心开发人员不赞成的猴子修补和魔法。</p>
</li>
<li>
<p><strong>Distribute</strong> 是 Setuptools 的一个分支，开发人员认为它的开发速度太慢，并且不可能对其进行改进。当 distutils2 由同一组启动时，它的开发速度大大减慢。2013 年 8 月更新：distribute 合并回 setuptools 并停止。</p>
</li>
<li>
<p><strong>Distutils2</strong> 是一个新的 distutils 库，作为 distutils 代码库的一个分支开始，具有从设置工具（其中一些在 PEP 中进行了彻底讨论）中汲取的好想法，以及一个受 pip 启发的基本安装程序。 <del>您用于导入 Distutils2 的实际名称<code>packaging</code>在 Python 3.3+ 标准库中，或者<code>distutils2</code>在 2.4+ 和 3.1–3.2 中。（一个反向移植将很快可用。）</del> Distutils2 没有发布 Python 3.3，它被搁置了。</p>
</li>
</ul>
<p>更多信息：</p>
<ul>
<li>Distutils 的命运——Pycon Summit + Packaging Sprint 详细报告</li>
<li>Distutils 和 Distutils2 之间的快速区别</li>
</ul>
<p>我希望尽快完成我的指南，它将包含有关每个库的优点和缺点的更多信息以及过渡指南。</p>
<p><br><br><a href="posts/differences-between-distribute-distutils-setuptools-and-distutils2/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-huo-qu-zheng-zai-yun-xing-de-jar-wen-jian-de-lu-jing/" class="u-url">如何获取正在运行的 JAR 文件的路径？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-huo-qu-zheng-zai-yun-xing-de-jar-wen-jian-de-lu-jing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:46:35+08:00" itemprop="datePublished" title="2023-02-17 21:46">2023-02-17 21:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>想要改进这篇文章？</strong> 提供此问题的详细答案，包括引用和解释为什么你的答案是正确的。不够详细的答案可能会被编辑或删除。</p>
<p>我的代码在一个 JAR 文件中运行，比如说 <strong>foo.jar</strong> ，我需要在代码中知道运行的 <strong>foo.jar</strong> 在哪个文件夹中。</p>
<p>因此，如果 <strong>foo.jar</strong> 在 中<code>C:\FOO\</code>，无论我当前的工作目录是什么，我都想获取该路径。</p>
<p><br><br></p>
<h2>解答</h2>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">File</span><span class="ss">(</span><span class="nv">MyClass</span>.<span class="nv">class</span>.<span class="nv">getProtectionDomain</span><span class="ss">()</span>.<span class="nv">getCodeSource</span><span class="ss">()</span>.<span class="nv">getLocation</span><span class="ss">()</span>
<span class="w">    </span>.<span class="nv">toURI</span><span class="ss">())</span>.<span class="nv">getPath</span><span class="ss">()</span><span class="c1">;</span>
</pre></div>

<p>将“MyClass”替换为您的班级名称。</p>
<p>显然，如果您的类是从非文件位置加载的，这会做一些奇怪的事情。</p>
<p><br></p>
<h3>更多建议</h3>
<p>对我来说最好的解决方案：</p>
<div class="code"><pre class="code literal-block">String path = Test.class.getProtectionDomain().getCodeSource().getLocation().getPath();
String decodedPath = URLDecoder.decode(path, "UTF-8");
</pre></div>

<p>这应该可以解决空格和特殊字符的问题。</p>
<p><br><br><a href="posts/how-to-get-the-path-of-a-running-jar-file/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-983.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-981.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
