<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1761) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1761.html">
<link rel="prev" href="index-1762.html" type="text/html">
<link rel="next" href="index-1760.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/changing-website-favicon-dynamically/" class="u-url">Changing website favicon dynamically</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/changing-website-favicon-dynamically/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:44:05+08:00" itemprop="datePublished" title="2023-03-03 08:44">2023-03-03 08:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a web application that's branded according to the user that's currently
logged in. I'd like to change the favicon of the page to be the logo of the
private label, but I'm unable to find any code or any examples of how to do
this. Has anybody successfully done this before?</p>
<p>I'm picturing having a dozen icons in a folder, and the reference to which
favicon.ico file to use is just generated dynamically along with the HTML
page. Thoughts?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Why not?</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s2">"link[rel~='icon']"</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">link</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">'link'</span><span class="p">);</span>
<span class="w">    </span><span class="n">link</span><span class="o">.</span><span class="n">rel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'icon'</span><span class="p">;</span>
<span class="w">    </span><span class="n">document</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">link</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'https://stackoverflow.com/favicon.ico'</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Here’s some code that works in Firefox, Opera, and Chrome (unlike every other
answer posted here). Here is a different demo of code that works in IE11 too.
The following example might not work in Safari or Internet Explorer.</p>
<div class="code"><pre class="code literal-block"><span class="o">/*!</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Dynamically</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">favicons</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">JavaScript</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Works</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="n">grade</span><span class="w"> </span><span class="n">browsers</span><span class="w"> </span><span class="n">except</span><span class="w"> </span><span class="n">Safari</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Internet</span><span class="w"> </span><span class="n">Explorer</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Demo</span><span class="p">:</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mathiasbynens</span><span class="o">.</span><span class="n">be</span><span class="o">/</span><span class="n">demo</span><span class="o">/</span><span class="n">dynamic</span><span class="o">-</span><span class="n">favicons</span>
<span class="w"> </span><span class="o">*/</span>

<span class="o">//</span><span class="w"> </span><span class="n">HTML5</span><span class="err">™</span><span class="p">,</span><span class="w"> </span><span class="n">baby</span><span class="o">!</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mathiasbynens</span><span class="o">.</span><span class="n">be</span><span class="o">/</span><span class="n">notes</span><span class="o">/</span><span class="n">document</span><span class="o">-</span><span class="n">head</span>
<span class="n">document</span><span class="o">.</span><span class="n">head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">head</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">'head'</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

<span class="n">function</span><span class="w"> </span><span class="n">changeFavicon</span><span class="p">(</span><span class="n">src</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">'link'</span><span class="p">),</span>
<span class="w">     </span><span class="n">oldLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'dynamic-favicon'</span><span class="p">);</span>
<span class="w"> </span><span class="n">link</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'dynamic-favicon'</span><span class="p">;</span>
<span class="w"> </span><span class="n">link</span><span class="o">.</span><span class="n">rel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'shortcut icon'</span><span class="p">;</span>
<span class="w"> </span><span class="n">link</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">src</span><span class="p">;</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">oldLink</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">document</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">oldLink</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">link</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>You would then use it as follows:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">btn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s1">'button'</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">btn</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="n">changeFavicon</span><span class="p">(</span><span class="s1">'http://www.google.com/favicon.ico'</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<p>Fork away or view a demo.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/make-xargs-execute-the-command-once-for-each-line-of-input/" class="u-url">Make xargs execute the command once for each line of input</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/make-xargs-execute-the-command-once-for-each-line-of-input/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:43:40+08:00" itemprop="datePublished" title="2023-03-03 08:43">2023-03-03 08:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I make xargs execute the command exactly once for each line of input
given? It's default behavior is to chunk the lines and execute the command
once, passing multiple lines to each instance.</p>
<blockquote>
<p>From http://en.wikipedia.org/wiki/Xargs:</p>
<p>find /path -type f -print0 | xargs -0 rm</p>
<p>In this example, find feeds the input of xargs with a long list of file
names. xargs then splits this list into sublists and calls rm once for every
sublist. This is more efficient than this functionally equivalent version:</p>
<p>find /path -type f -exec rm '{}' \;</p>
</blockquote>
<p>I know that find has the "exec" flag. I am just quoting an illustrative
example from another resource.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The following will only work if you do not have spaces in your input:</p>
<div class="code"><pre class="code literal-block"><span class="nv">xargs</span><span class="w"> </span><span class="o">-</span><span class="nv">L</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">xargs</span><span class="w"> </span><span class="o">--</span><span class="nv">max</span><span class="o">-</span><span class="nv">lines</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">synonym</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="o">-</span><span class="nv">L</span><span class="w"> </span><span class="nv">option</span>
</pre></div>

<p>from the man page:</p>
<div class="code"><pre class="code literal-block"><span class="o">-</span><span class="nv">L</span><span class="w"> </span><span class="nv">max</span><span class="o">-</span><span class="nv">lines</span>
<span class="w">          </span><span class="nv">Use</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">max</span><span class="o">-</span><span class="nv">lines</span><span class="w"> </span><span class="nv">nonblank</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="nv">lines</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="nv">command</span><span class="w"> </span><span class="nv">line</span>.
<span class="w">          </span><span class="nv">Trailing</span><span class="w"> </span><span class="nv">blanks</span><span class="w"> </span><span class="nv">cause</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">logically</span><span class="w"> </span><span class="nv">continued</span><span class="w">  </span><span class="nv">on</span>
<span class="w">          </span><span class="nv">the</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="nv">line</span>.<span class="w">  </span><span class="nv">Implies</span><span class="w"> </span><span class="o">-</span><span class="nv">x</span>.
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>It seems to me all existing answers on this page are wrong, including the one
marked as correct. That stems from the fact that the question is ambiguously
worded.</p>
<p><strong>Summary:</strong> If you want to execute the command <em>"exactly once for each line
of input,"</em> passing the entire line (without newline) to the command as a
<em>single argument,</em> then this is the best UNIX-compatible way to do it:</p>
<div class="code"><pre class="code literal-block">... | tr '\n' '\0' | xargs -0 -n1 ...
</pre></div>

<p>If you are using GNU <code>xargs</code> and don't need to be compatible with all other
UNIX's (FreeBSD, Mac OS X, etc.) then you can use the GNU-specific option
<code>-d</code>:</p>
<div class="code"><pre class="code literal-block">... | xargs -d\\n -n1 ...
</pre></div>

<p>Now for the long explanation…</p>
<hr>
<p>There are two issues to take into account when using xargs:</p>
<ol>
<li>how does it split the input into "arguments"; and</li>
<li>how many arguments to pass the child command at a time.</li>
</ol>
<p>To test xargs' behavior, we need an utility that shows how many times it's
being executed and with how many arguments. I don't know if there is a
standard utility to do that, but we can code it quite easily in bash:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/make-xargs-execute-the-command-once-for-each-line-of-input/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/make-xargs-execute-the-command-once-for-each-line-of-input/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">"-&gt; "</span><span class="p">;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">"\"</span><span class="nv">$a</span><span class="s2">\" "</span><span class="p">;</span><span class="w"> </span><span class="k">done</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span>
</code></td>
</tr>
</table></div>
<p>Assuming you save it as <code>show</code> in your current directory and make it
executable, here is how it works:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>./show<span class="w"> </span>one<span class="w"> </span>two<span class="w"> </span><span class="s1">'three and four'</span>
-&gt;<span class="w"> </span><span class="s2">"one"</span><span class="w"> </span><span class="s2">"two"</span><span class="w"> </span><span class="s2">"three and four"</span>
</pre></div>

<p>Now, if the original question is really about point 2. above (as I think it
is, after reading it a few times over) and it is to be read like this (changes
in bold):</p>
<blockquote>
<p><em>How can I make xargs execute the command exactly once for each <strong>argument</strong>
of input given? Its default behavior is to chunk the <strong>input into
arguments</strong> and execute the command <strong>as few times as possible</strong> , passing
multiple <strong>arguments</strong> to each instance.</em></p>
</blockquote>
<p>then the answer is <code>-n 1</code>.</p>
<p>Let's compare xargs' default behavior, which splits the input around
whitespace and calls the command as few times as possible:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>one<span class="w"> </span>two<span class="w"> </span><span class="s1">'three and four'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>./show<span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"one"</span><span class="w"> </span><span class="s2">"two"</span><span class="w"> </span><span class="s2">"three"</span><span class="w"> </span><span class="s2">"and"</span><span class="w"> </span><span class="s2">"four"</span>
</pre></div>

<p>and its behavior with <code>-n 1</code>:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>one<span class="w"> </span>two<span class="w"> </span><span class="s1">'three and four'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span>./show<span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"one"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"two"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"three"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"and"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"four"</span>
</pre></div>

<p>If, on the other hand, the original question was about point 1. input
splitting and it was to be read like this (many people coming here seem to
think that's the case, or are confusing the two issues):</p>
<blockquote>
<p><em>How can I make xargs execute the command <strong>with</strong> exactly <strong>one argument</strong>
for each line of input given? Its default behavior is to chunk the lines
<strong>around whitespace</strong>.</em></p>
</blockquote>
<p>then the answer is more subtle.</p>
<p>One would think that <code>-L 1</code> could be of help, but it turns out it doesn't
change argument parsing. It only executes the command once for each input
line, with as many arguments as were there on that input line:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">$'one\ntwo\nthree and four'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-L<span class="w"> </span><span class="m">1</span><span class="w"> </span>./show<span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"one"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"two"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"three"</span><span class="w"> </span><span class="s2">"and"</span><span class="w"> </span><span class="s2">"four"</span>
</pre></div>

<p>Not only that, but if a line ends with whitespace, it is appended to the next:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">$'one \ntwo\nthree and four'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-L<span class="w"> </span><span class="m">1</span><span class="w"> </span>./show<span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"one"</span><span class="w"> </span><span class="s2">"two"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"three"</span><span class="w"> </span><span class="s2">"and"</span><span class="w"> </span><span class="s2">"four"</span>
</pre></div>

<p>Clearly, <code>-L</code> is not about changing the way xargs splits the input into
arguments.</p>
<p>The only argument that does so in a cross-platform fashion (excluding GNU
extensions) is <code>-0</code>, which splits the input around NUL bytes.</p>
<p>Then, it's just a matter of translating newlines to NUL with the help of <code>tr</code>:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">$'one \ntwo\nthree and four'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s1">'\n'</span><span class="w"> </span><span class="s1">'\0'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>./show<span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"one "</span><span class="w"> </span><span class="s2">"two"</span><span class="w"> </span><span class="s2">"three and four"</span>
</pre></div>

<p>Now the argument parsing looks all right, including the trailing whitespace.</p>
<p>Finally, if you combine this technique with <code>-n 1</code>, you get exactly one
command execution per input line, whatever input you have, which may be yet
another way to look at the original question (possibly the most intuitive,
given the title):</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">$'one \ntwo\nthree and four'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s1">'\n'</span><span class="w"> </span><span class="s1">'\0'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-0<span class="w"> </span>-n1<span class="w"> </span>./show<span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"one "</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"two"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"three and four"</span>
</pre></div>

<p>As mentioned above, if you are using GNU <code>xargs</code> you can replace the <code>tr</code> with
the GNU-specific option <code>-d</code>:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s1">$'one \ntwo\nthree and four'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-d<span class="se">\\</span>n<span class="w"> </span>-n1<span class="w"> </span>./show<span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"one "</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"two"</span><span class="w"> </span>
-&gt;<span class="w"> </span><span class="s2">"three and four"</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/flexbox-4-items-per-row/" class="u-url">Flexbox: 4 items per row</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/flexbox-4-items-per-row/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T08:43:15+08:00" itemprop="datePublished" title="2023-03-03 08:43">2023-03-03 08:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using a flex box to display 8 items that will dynamically resize with my
page. How do I force it to split the items into two rows? (4 per row)?</p>
<p>Here is a relevant snip:</p>
<p>(Or if you prefer jsfiddle - http://jsfiddle.net/vivmaha/oq6prk1p/2/)</p>
<div class="code"><pre class="code literal-block">.parent-wrapper<span class="w"> </span>{
<span class="w">  </span>height:<span class="w"> </span>100%;
<span class="w">  </span>width:<span class="w"> </span>100%;
<span class="w">  </span>border:<span class="w"> </span>1px<span class="w"> </span>solid<span class="w"> </span>black;
}
.parent<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>flex;
<span class="w">  </span>font-size:<span class="w"> </span>0;
<span class="w">  </span>flex-wrap:<span class="w"> </span>wrap;
<span class="w">  </span>margin:<span class="w"> </span>-10px<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>-10px;
}
.child<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>inline-block;
<span class="w">  </span>background:<span class="w"> </span>blue;
<span class="w">  </span>margin:<span class="w"> </span>10px<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>10px;
<span class="w">  </span>flex-grow:<span class="w"> </span>1;
<span class="w">  </span>height:<span class="w"> </span>100px;
}


<span class="nt">&lt;body&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"parent-wrapper"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"parent"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You've got <code>flex-wrap: wrap</code> on the container. That's good, because it
overrides the default value, which is <code>nowrap</code> (source). This is the reason
items don't wrap to form a grid in some cases.</p>
<p>In this case, the main problem is <code>flex-grow: 1</code> on the flex items.</p>
<p>The <code>flex-grow</code> property doesn't actually size flex items. Its task is to
distribute free space in the container (source). So no matter how small the
screen size, each item will receive a proportional part of the free space on
the line.</p>
<p>More specifically, there are eight flex items in your container. With <code>flex-
grow: 1</code>, each one receives 1/8 of the free space on the line. Since there's
no content in your items, they can shrink to zero width and will never wrap.</p>
<p>The solution is to define a width on the items. Try this:</p>
<div class="code"><pre class="code literal-block">.parent<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>flex;
<span class="w">  </span>flex-wrap:<span class="w"> </span>wrap;
}

.child<span class="w"> </span>{
<span class="w">  </span>flex:<span class="w"> </span>1<span class="w"> </span>0<span class="w"> </span>21%;<span class="w"> </span>/*<span class="w"> </span>explanation<span class="w"> </span>below<span class="w"> </span>*/
<span class="w">  </span>margin:<span class="w"> </span>5px;
<span class="w">  </span>height:<span class="w"> </span>100px;
<span class="w">  </span>background-color:<span class="w"> </span>blue;
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"parent"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>With <code>flex-grow: 1</code> defined in the <code>flex</code> shorthand, there's no need for
<code>flex-basis</code> to be 25%, which would actually result in three items per row due
to the margins.</p>
<p>Since <code>flex-grow</code> will consume free space on the row, <code>flex-basis</code> only needs
to be large enough to enforce a wrap. In this case, with <code>flex-basis: 21%</code>,
there's plenty of space for the margins, but never enough space for a fifth
item.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Add a width to the <code>.child</code> elements. I personally would use percentages on
the <code>margin-left</code> if you want to have it always 4 per row.</p>
<p><strong>DEMO</strong></p>
<div class="code"><pre class="code literal-block"><span class="na">.child</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">display:</span><span class="w"> </span><span class="nf">inline-block</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">background:</span><span class="w"> </span><span class="nf">blue</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">margin:</span><span class="w"> </span><span class="err">10</span><span class="nf">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="err">%</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">flex-grow:</span><span class="w"> </span><span class="err">1</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">height:</span><span class="w"> </span><span class="err">100</span><span class="nf">px</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">width:</span><span class="w"> </span><span class="nf">calc</span><span class="p">(</span><span class="mi">100</span><span class="err">%</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="err">/</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">10</span><span class="no">px</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">1</span><span class="no">px</span><span class="p">)</span><span class="c1">;</span>
<span class="err">}</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1762.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1760.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
