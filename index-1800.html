<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1800) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1800.html">
<link rel="prev" href="index-1801.html" type="text/html">
<link rel="next" href="index-1799.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/" class="u-url">Mockito : how to verify method was called on an object created within a method?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mockito-how-to-verify-method-was-called-on-an-object-created-within-a-method/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:39:16+08:00" itemprop="datePublished" title="2023-03-03 09:39">2023-03-03 09:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am new to Mockito.</p>
<p>Given the class below, how can I use Mockito to verify that <code>someMethod</code> was
invoked exactly once after <code>foo</code> was invoked?</p>
<div class="code"><pre class="code literal-block">public class Foo
{
    public void foo(){
        Bar bar = new Bar();
        bar.someMethod();
    }
}
</pre></div>

<p>I would like to make the following verification call,</p>
<div class="code"><pre class="code literal-block">verify(bar, times(1)).someMethod();
</pre></div>

<p>where <code>bar</code> is a mocked instance of <code>Bar</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Dependency Injection</p>
<p>If you inject the Bar instance, or a factory that is used for creating the Bar
instance (or one of the other 483 ways of doing this), you'd have the access
necessary to do perform the test.</p>
<p>Factory Example:</p>
<p>Given a Foo class written like this:</p>
<div class="code"><pre class="code literal-block">public class Foo {
  private BarFactory barFactory;

  public Foo(BarFactory factory) {
    this.barFactory = factory;
  }

  public void foo() {
    Bar bar = this.barFactory.createBar();
    bar.someMethod();
  }
}
</pre></div>

<p>in your test method you can inject a BarFactory like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">testDoFoo</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">Bar</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mock</span><span class="p">(</span><span class="n">Bar</span><span class="p">.</span><span class="k">class</span><span class="p">);</span>
<span class="w">  </span><span class="n">BarFactory</span><span class="w"> </span><span class="n">myFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BarFactory</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Bar</span><span class="w"> </span><span class="n">createBar</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">bar</span><span class="p">;</span><span class="err">}</span>
<span class="w">  </span><span class="err">}</span><span class="p">;</span>

<span class="w">  </span><span class="n">Foo</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="n">myFactory</span><span class="p">);</span>
<span class="w">  </span><span class="n">foo</span><span class="p">.</span><span class="n">foo</span><span class="p">();</span>

<span class="w">  </span><span class="n">verify</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span><span class="w"> </span><span class="n">times</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="n">someMethod</span><span class="p">();</span>
<span class="err">}</span>
</pre></div>

<p>Bonus: This is an example of how TDD(Test Driven Development) can drive the
design of your code.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The classic response is, "You don't." You test the public API of <code>Foo</code>, not
its internals.</p>
<p>Is there any behavior of the <code>Foo</code> object (or, less good, some other object in
the environment) that is affected by <code>foo()</code>? If so, test that. And if not,
what does the method do?</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/does-my-application-contain-encryption/" class="u-url">Does my application "contain encryption"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/does-my-application-contain-encryption/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:38:51+08:00" itemprop="datePublished" title="2023-03-03 09:38">2023-03-03 09:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm uploading a binary for the first time. iTunes Connect has asked me:</p>
<blockquote>
<p>Export laws require that products containing encryption be properly
authorized for export.<br>
 Failure to comply could result in severe penalties.<br>
 For further information, click here.<br>
 Does your product contain encryption?</p>
</blockquote>
<p>I use <code>https://</code>, but only via <code>NSURLConnection</code> and <code>UIWebView</code>.</p>
<p>My reading of this is that my app doesn't "contain encryption," but I'm
wondering if this is spelled out anywhere. "Severe penalties" doesn't sound
pleasant at all, so "I think that's right" is a bit sketchy... an
authoritative answer would be better.</p>
<p>Thanks.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>UPDATE: Using HTTPS is now exempt from the ERN as of late September, 2016</h3>
<p>https://stackoverflow.com/a/40919650/4976373</p>
<hr>
<p>Unfortunately, I believe that your app "contains encryption" in terms of US
BIS even if you just use HTTPS (if your app is not an exception included in
question 2).</p>
<p>Quote from FAQ on iTunes Connect:</p>
<p>" <strong>How do I know if I can follow the Exporter Registration and Reporting
(ERN) process?</strong></p>
<p>If your app <strong>uses</strong> , accesses, implements or incorporates industry standard
encryption algorithms for purposes other than those listed as exemptions under
question 2, <strong>you need to submit for an ERN authorization</strong>. Examples of
standard encryption are: AES, SSL, <strong>https</strong>. This authorization requires that
you submit an annual report to two U.S. Government agencies with information
about your app every January. "</p>
<p>" <strong>2nd Question: Does your product qualify for any exemptions provided under
category 5 part 2?</strong></p>
<p>There are several exemptions available in US export regulations under Category
5 Part 2 (Information Security &amp; Encryption regulations) for applications and
software that use, access, implement or incorporate encryption.</p>
<p>All liabilities associated with misinterpretation of the export regulations or
claiming exemption inaccurately are borne by owners and developers of the
apps.</p>
<p>You can answer “YES” to the question if you meet any of the following
criteria:</p>
<p>(i) if you determine that your app is not classified under Category 5, Part 2
of the EAR based on the guidance provided by BIS at encryption question. The
Statement of Understanding for medical equipment in Supplement No. 3 to Part
774 of the EAR can be accessed at Electronic Code of Federal Regulations site.
Please visit the Question #15 in the FAQ section of the encryption page for
sample items BIS has listed that can claim Note 4 exemptions.</p>
<p>(ii) your app uses, accesses, implements or incorporates encryption for
authentication only</p>
<p>(iii) your app uses, accesses, implements or incorporates encryption with key
lengths not exceeding 56 bits symmetric, 512 bits asymmetric and/or 112 bit
elliptic curve</p>
<p>(iv) your app is a mass market product with key lengths not exceeding 64 bits
symmetric, or if no symmetric algorithms, not exceeding 768 bits asymmetric
and/or 128 bits elliptic curve.</p>
<p>Please review Note 3 in Category 5 Part 2 to understand the criteria for mass
market definition.</p>
<p>(v) your app is specially designed and limited for banking use or ‘money
transactions.’ The term ‘money transactions’ includes the collection and
settlement of fares or credit functions.</p>
<p>(vi) the source code of your app is “publicly available”, your app distributed
at free of cost to general public, and you have met the notification
requirements provided under 740.13.(e).</p>
<p>Please visit encryption web page in case you need further help in determining
if your app qualifies for any exemptions.</p>
<p>If you believe that your app qualifies for an exemption, please answer “YES”
to the question."</p>
<p><br></p>
<h3>Suggest</h3>
<p>It's not hard to get approval for your app the proper way. SSL (HTTPS/TLS) is
still encryption and unless you are using it just for authentication, then you
should get the proper approval. I just received approval, and my app is in the
store now for something that uses SSL to encrypt data traffic (not just
authentication).</p>
<p>Here is a blog entry I made so that others can do this the proper way.</p>
<p>apple itunes export restrictions</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sql-query-return-data-from-multiple-tables/" class="u-url">SQL query return data from multiple tables</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/sql-query-return-data-from-multiple-tables/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:38:24+08:00" itemprop="datePublished" title="2023-03-03 09:38">2023-03-03 09:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would like to know the following:</p>
<ul>
<li>how to get data from multiple tables in my database?</li>
<li>what types of methods are there to do this?</li>
<li>what are joins and unions and how are they different from one another? </li>
<li>When should I use each one compared to the others?</li>
</ul>
<p>I am planning to use this in my (for example - PHP) application, but don't
want to run multiple queries against the database, what options do I have to
get data from multiple tables in a single query?</p>
<p>Note: I am writing this as I would like to be able to link to a well written
guide on the numerous questions that I constantly come across in the PHP
queue, so I can link to this for further detail when I post an answer.</p>
<p>The answers cover off the following:</p>
<ol>
<li>Part 1 - Joins and Unions</li>
<li>Part 2 - Subqueries</li>
<li>Part 3 - Tricks and Efficient Code</li>
<li>Part 4 - Subqueries in the From Clause</li>
<li>Part 5 - Mixed Bag of John's Tricks</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<h2>Part 1 - Joins and Unions</h2>
<p>This answer covers:</p>
<ol>
<li>Part 1 <ul>
<li>Joining two or more tables using an inner join (See the wikipedia entry for additional info)</li>
<li>How to use a union query</li>
<li>Left and Right Outer Joins (this stackOverflow answer is excellent to describe types of joins)</li>
<li>Intersect queries (and how to reproduce them if your database doesn't support them) - this is a function of SQL-Server (see info) and part of the reason I wrote this whole thing in the first place.</li>
</ul>
</li>
<li>Part 2 <ul>
<li>Subqueries - what they are, where they can be used and what to watch out for</li>
<li>Cartesian joins AKA - Oh, the misery!</li>
</ul>
</li>
</ol>
<p>There are a number of ways to retrieve data from multiple tables in a
database. In this answer, I will be using ANSI-92 join syntax. This may be
different to a number of other tutorials out there which use the older ANSI-89
syntax (and if you are used to 89, may seem much less intuitive - but all I
can say is to try it) as it is <em>much</em> easier to understand when the queries
start getting more complex. Why use it? Is there a performance gain? The short
answer is no, but it <em>is</em> easier to read once you get used to it. It is easier
to read queries written by other folks using this syntax.</p>
<p>I am also going to use the concept of a small caryard which has a database to
keep track of what cars it has available. The owner has hired you as his IT
Computer guy and expects you to be able to drop him the data that he asks for
at the drop of a hat.</p>
<p>I have made a number of lookup tables that will be used by the final table.
This will give us a reasonable model to work from. To start off, I will be
running my queries against an example database that has the following
structure. I will try to think of common mistakes that are made when starting
out and explain what goes wrong with them - as well as of course showing how
to correct them.</p>
<p>The first table is simply a color listing so that we know what colors we have
in the car yard.</p>
<div class="code"><pre class="code literal-block"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">colors</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span><span class="w"> </span><span class="n">paint</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">colors</span><span class="p">;</span>
<span class="o">+-------+-------------+------+-----+---------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Type</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w">          </span><span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">PRI</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NULL</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">paint</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+----------------+</span>
<span class="mi">3</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insert</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="p">(</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">paint</span><span class="p">)</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="p">(</span><span class="s1">'Red'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Metallic'</span><span class="p">),</span><span class="w"> </span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">'Green'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Gloss'</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="s1">'Blue'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Metallic'</span><span class="p">),</span><span class="w"> </span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">'White'</span><span class="w"> </span><span class="s1">'Gloss'</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="s1">'Black'</span><span class="w"> </span><span class="s1">'Gloss'</span><span class="p">);</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mf">0.00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
<span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">colors</span><span class="p">;</span>
<span class="o">+----+-------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">paint</span><span class="w">    </span><span class="o">|</span>
<span class="o">+----+-------+----------+</span>
<span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Red</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Metallic</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Green</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Gloss</span><span class="w">    </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Blue</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Metallic</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">White</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Gloss</span><span class="w">    </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Black</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Gloss</span><span class="w">    </span><span class="o">|</span>
<span class="o">+----+-------+----------+</span>
<span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">(</span><span class="mf">0.00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</pre></div>

<p>The brands table identifies the different brands of the cars out caryard could
possibly sell.</p>
<div class="code"><pre class="code literal-block"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">brands</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">brand</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">15</span><span class="p">));</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">brands</span><span class="p">;</span>
<span class="o">+-------+-------------+------+-----+---------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Type</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Extra</span><span class="w">          </span><span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">PRI</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NULL</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">auto_increment</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">brand</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">+-------+-------------+------+-----+---------+----------------+</span>
<span class="mi">2</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">(</span><span class="mf">0.01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">insert</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">brands</span><span class="w"> </span><span class="p">(</span><span class="n">brand</span><span class="p">)</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="p">(</span><span class="s1">'Ford'</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="s1">'Toyota'</span><span class="p">),</span><span class="w"> </span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="s1">'Nissan'</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="s1">'Smart'</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="s1">'BMW'</span><span class="p">);</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mf">0.00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
<span class="n">Records</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="n">Duplicates</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">  </span><span class="n">Warnings</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">brands</span><span class="p">;</span>
<span class="o">+----+--------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">brand</span><span class="w">  </span><span class="o">|</span>
<span class="o">+----+--------+</span>
<span class="o">|</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Ford</span><span class="w">   </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Toyota</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Nissan</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Smart</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">BMW</span><span class="w">    </span><span class="o">|</span>
<span class="o">+----+--------+</span>
<span class="mi">5</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">(</span><span class="mf">0.00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</pre></div>

<p>The model table will cover off different types of cars, it is going to be
simpler for this to use different car types rather than actual car models.</p>
<div class="code"><pre class="code literal-block"><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> create table models (id int(3) not null auto_increment primary key</span><span class="nt">,</span><span class="c"> </span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> model varchar(15));</span>
<span class="c">Query OK</span><span class="nt">,</span><span class="c"> 0 rows affected (0</span><span class="nt">.</span><span class="c">01 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> show columns from models;</span>
<span class="nb">+-------+-------------+------+-----+---------+----------------+</span>
<span class="c">| Field | Type        | Null | Key | Default | Extra          |</span>
<span class="nb">+-------+-------------+------+-----+---------+----------------+</span>
<span class="c">| id    | int(3)      | NO   | PRI | NULL    | auto_increment |</span>
<span class="c">| model | varchar(15) | YES  |     | NULL    |                |</span>
<span class="nb">+-------+-------------+------+-----+---------+----------------+</span>
<span class="c">2 rows in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> insert into models (model) values ('Sports')</span><span class="nt">,</span><span class="c"> ('Sedan')</span><span class="nt">,</span><span class="c"> ('4WD')</span><span class="nt">,</span><span class="c"> ('Luxury');</span>
<span class="c">Query OK</span><span class="nt">,</span><span class="c"> 4 rows affected (0</span><span class="nt">.</span><span class="c">00 sec)</span>
<span class="c">Records: 4  Duplicates: 0  Warnings: 0</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> select * from models;</span>
<span class="nb">+----+--------+</span>
<span class="c">| id | model  |</span>
<span class="nb">+----+--------+</span>
<span class="c">|  1 | Sports |</span>
<span class="c">|  2 | Sedan  |</span>
<span class="c">|  3 | 4WD    |</span>
<span class="c">|  4 | Luxury |</span>
<span class="nb">+----+--------+</span>
<span class="c">4 rows in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</pre></div>

<p>And finally, to tie up all these other tables, the table that ties everything
together. The ID field is actually the unique lot number used to identify
cars.</p>
<div class="code"><pre class="code literal-block"><span class="nt">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">create</span><span class="w"> </span><span class="nt">table</span><span class="w"> </span><span class="nt">cars</span><span class="w"> </span><span class="o">(</span><span class="nt">id</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">null</span><span class="w"> </span><span class="nt">auto_increment</span><span class="w"> </span><span class="nt">primary</span><span class="w"> </span><span class="nt">key</span><span class="o">,</span><span class="w"> </span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">color</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">),</span><span class="w"> </span><span class="nt">brand</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">),</span><span class="w"> </span><span class="nt">model</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">));</span>
<span class="nt">Query</span><span class="w"> </span><span class="nt">OK</span><span class="o">,</span><span class="w"> </span><span class="nt">0</span><span class="w"> </span><span class="nt">rows</span><span class="w"> </span><span class="nt">affected</span><span class="w"> </span><span class="o">(</span><span class="nt">0</span><span class="p">.</span><span class="nc">01</span><span class="w"> </span><span class="nt">sec</span><span class="o">)</span>

<span class="nt">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">show</span><span class="w"> </span><span class="nt">columns</span><span class="w"> </span><span class="nt">from</span><span class="w"> </span><span class="nt">cars</span><span class="o">;</span>
<span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">--------</span><span class="o">+</span><span class="nt">------</span><span class="o">+</span><span class="nt">-----</span><span class="o">+</span><span class="nt">---------</span><span class="o">+</span><span class="nt">----------------</span><span class="o">+</span>
<span class="o">|</span><span class="w"> </span><span class="nt">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="nt">Null</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">Key</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">Default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">Extra</span><span class="w">          </span><span class="o">|</span>
<span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">--------</span><span class="o">+</span><span class="nt">------</span><span class="o">+</span><span class="nt">-----</span><span class="o">+</span><span class="nt">---------</span><span class="o">+</span><span class="nt">----------------</span><span class="o">+</span>
<span class="o">|</span><span class="w"> </span><span class="nt">id</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">NO</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="nt">PRI</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">NULL</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nt">auto_increment</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="nt">color</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="nt">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="nt">brand</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="nt">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="nt">model</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">int</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">YES</span><span class="w">  </span><span class="o">|</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="nt">NULL</span><span class="w">    </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">--------</span><span class="o">+</span><span class="nt">------</span><span class="o">+</span><span class="nt">-----</span><span class="o">+</span><span class="nt">---------</span><span class="o">+</span><span class="nt">----------------</span><span class="o">+</span>
<span class="nt">4</span><span class="w"> </span><span class="nt">rows</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="o">(</span><span class="nt">0</span><span class="p">.</span><span class="nc">00</span><span class="w"> </span><span class="nt">sec</span><span class="o">)</span>

<span class="nt">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">insert</span><span class="w"> </span><span class="nt">into</span><span class="w"> </span><span class="nt">cars</span><span class="w"> </span><span class="o">(</span><span class="nt">color</span><span class="o">,</span><span class="w"> </span><span class="nt">brand</span><span class="o">,</span><span class="w"> </span><span class="nt">model</span><span class="o">)</span><span class="w"> </span><span class="nt">values</span><span class="w"> </span><span class="o">(</span><span class="nt">1</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">1</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">3</span><span class="o">,</span><span class="nt">1</span><span class="o">,</span><span class="nt">2</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">5</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">1</span><span class="o">),</span><span class="w"> </span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="o">(</span><span class="nt">4</span><span class="o">,</span><span class="nt">4</span><span class="o">,</span><span class="nt">2</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">2</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">3</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">3</span><span class="o">,</span><span class="nt">5</span><span class="o">,</span><span class="nt">4</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">4</span><span class="o">,</span><span class="nt">1</span><span class="o">,</span><span class="nt">3</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">2</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">1</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">5</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">3</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="nt">4</span><span class="o">,</span><span class="nt">5</span><span class="o">,</span><span class="nt">1</span><span class="o">);</span>
<span class="nt">Query</span><span class="w"> </span><span class="nt">OK</span><span class="o">,</span><span class="w"> </span><span class="nt">10</span><span class="w"> </span><span class="nt">rows</span><span class="w"> </span><span class="nt">affected</span><span class="w"> </span><span class="o">(</span><span class="nt">0</span><span class="p">.</span><span class="nc">00</span><span class="w"> </span><span class="nt">sec</span><span class="o">)</span>
<span class="nt">Records</span><span class="o">:</span><span class="w"> </span><span class="nt">10</span><span class="w">  </span><span class="nt">Duplicates</span><span class="o">:</span><span class="w"> </span><span class="nt">0</span><span class="w">  </span><span class="nt">Warnings</span><span class="o">:</span><span class="w"> </span><span class="nt">0</span>

<span class="nt">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nt">from</span><span class="w"> </span><span class="nt">cars</span><span class="o">;</span>
<span class="o">+</span><span class="nt">----</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span>
<span class="o">|</span><span class="w"> </span><span class="nt">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">color</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">brand</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nt">model</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="nt">----</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span>
<span class="o">|</span><span class="w">  </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">3</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">3</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">5</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">3</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">4</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">4</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">4</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">5</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">6</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">3</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">5</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">4</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">7</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">4</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">8</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="nt">9</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">5</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">2</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="nt">10</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">4</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">5</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="nt">1</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="nt">----</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span><span class="nt">-------</span><span class="o">+</span>
<span class="nt">10</span><span class="w"> </span><span class="nt">rows</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">set</span><span class="w"> </span><span class="o">(</span><span class="nt">0</span><span class="p">.</span><span class="nc">00</span><span class="w"> </span><span class="nt">sec</span><span class="o">)</span>
</pre></div>

<p>This will give us enough data (I hope) to cover off the examples below of
different types of joins and also give enough data to make them worthwhile.</p>
<p>So getting into the grit of it, the boss wants to know <em>The IDs of all the
sports cars he has</em>.</p>
<p>This is a simple two table join. We have a table that identifies the model and
the table with the available stock in it. As you can see, the data in the
<code>model</code> column of the <code>cars</code> table relates to the <code>models</code> column of the
<code>cars</code> table we have. Now, we know that the models table has an ID of <code>1</code> for
<code>Sports</code> so lets write the join.</p>
<div class="code"><pre class="code literal-block">select
    ID,
    model
from
    cars
        join models
            on model=ID
</pre></div>

<p>So this query looks good right? We have identified the two tables and contain
the information we need and use a join that correctly identifies what columns
to join on.</p>
<div class="code"><pre class="code literal-block">ERROR 1052 (23000): Column 'ID' in field list is ambiguous
</pre></div>

<p>Oh noes! An error in our first query! Yes, and it is a plum. You see, the
query has indeed got the right columns, but some of them exist in both tables,
so the database gets confused about what actual column we mean and where.
There are two solutions to solve this. The first is nice and simple, we can
use <code>tableName.columnName</code> to tell the database exactly what we mean, like
this:</p>
<div class="code"><pre class="code literal-block">select
    cars.ID,
    models.model
from
    cars
        join models
            on cars.model=models.ID

+----+--------+
| ID | model  |
+----+--------+
|  1 | Sports |
|  3 | Sports |
|  8 | Sports |
| 10 | Sports |
|  2 | Sedan  |
|  4 | Sedan  |
|  5 | 4WD    |
|  7 | 4WD    |
|  9 | 4WD    |
|  6 | Luxury |
+----+--------+
10 rows in set (0.00 sec)
</pre></div>

<p>The other is probably more often used and is called table aliasing. The tables
in this example have nice and short simple names, but typing out something
like <code>KPI_DAILY_SALES_BY_DEPARTMENT</code> would probably get old quickly, so a
simple way is to nickname the table like this:</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model
from
    cars a
        join models b
            on a.model=b.ID
</pre></div>

<p>Now, back to the request. As you can see we have the information we need, but
we also have information that wasn't asked for, so we need to include a where
clause in the statement to only get the Sports cars as was asked. As I prefer
the table alias method rather than using the table names over and over, I will
stick to it from this point onwards.</p>
<p>Clearly, we need to add a where clause to our query. We can identify Sports
cars either by <code>ID=1</code> or <code>model='Sports'</code>. As the ID is indexed and the
primary key (and it happens to be less typing), lets use that in our query.</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model
from
    cars a
        join models b
            on a.model=b.ID
where
    b.ID=1

+----+--------+
| ID | model  |
+----+--------+
|  1 | Sports |
|  3 | Sports |
|  8 | Sports |
| 10 | Sports |
+----+--------+
4 rows in set (0.00 sec)
</pre></div>

<p>Bingo! The boss is happy. Of course, being a boss and never being happy with
what he asked for, he looks at the information, then says <em>I want the colors
as well</em>.</p>
<p>Okay, so we have a good part of our query already written, but we need to use
a third table which is colors. Now, our main information table <code>cars</code> stores
the car color ID and this links back to the colors ID column. So, in a similar
manner to the original, we can join a third table:</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
where
    b.ID=1

+----+--------+
| ID | model  |
+----+--------+
|  1 | Sports |
|  3 | Sports |
|  8 | Sports |
| 10 | Sports |
+----+--------+
4 rows in set (0.00 sec)
</pre></div>

<p>Damn, although the table was correctly joined and the related columns were
linked, we forgot to pull in the actual <em>information</em> from the new table that
we just linked.</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
where
    b.ID=1

+----+--------+-------+
| ID | model  | color |
+----+--------+-------+
|  1 | Sports | Red   |
|  8 | Sports | Green |
| 10 | Sports | White |
|  3 | Sports | Black |
+----+--------+-------+
4 rows in set (0.00 sec)
</pre></div>

<p>Right, that's the boss off our back for a moment. Now, to explain some of this
in a little more detail. As you can see, the <code>from</code> clause in our statement
links our main table (I often use a table that contains information rather
than a lookup or dimension table. The query would work just as well with the
tables all switched around, but make less sense when we come back to this
query to read it in a few months time, so it is often best to try to write a
query that will be nice and easy to understand - lay it out intuitively, use
nice indenting so that everything is as clear as it can be. If you go on to
teach others, try to instill these characteristics in their queries -
especially if you will be troubleshooting them.</p>
<p>It is entirely possible to keep linking more and more tables in this manner.</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
        join brands d
            on a.brand=d.ID
where
    b.ID=1
</pre></div>

<p>While I forgot to include a table where we might want to join more than one
column in the <code>join</code> statement, here is an example. If the <code>models</code> table had
brand-specific models and therefore also had a column called <code>brand</code> which
linked back to the <code>brands</code> table on the <code>ID</code> field, it could be done as this:</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
        join brands d
            on a.brand=d.ID
            and b.brand=d.ID
where
    b.ID=1
</pre></div>

<p>You can see, the query above not only links the joined tables to the main
<code>cars</code> table, but also specifies joins between the already joined tables. If
this wasn't done, the result is called a cartesian join - which is dba speak
for bad. A cartesian join is one where rows are returned because the
information doesn't tell the database how to limit the results, so the query
returns <em>all</em> the rows that fit the criteria.</p>
<p>So, to give an example of a cartesian join, lets run the following query:</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model
from
    cars a
        join models b

+----+--------+
| ID | model  |
+----+--------+
|  1 | Sports |
|  1 | Sedan  |
|  1 | 4WD    |
|  1 | Luxury |
|  2 | Sports |
|  2 | Sedan  |
|  2 | 4WD    |
|  2 | Luxury |
|  3 | Sports |
|  3 | Sedan  |
|  3 | 4WD    |
|  3 | Luxury |
|  4 | Sports |
|  4 | Sedan  |
|  4 | 4WD    |
|  4 | Luxury |
|  5 | Sports |
|  5 | Sedan  |
|  5 | 4WD    |
|  5 | Luxury |
|  6 | Sports |
|  6 | Sedan  |
|  6 | 4WD    |
|  6 | Luxury |
|  7 | Sports |
|  7 | Sedan  |
|  7 | 4WD    |
|  7 | Luxury |
|  8 | Sports |
|  8 | Sedan  |
|  8 | 4WD    |
|  8 | Luxury |
|  9 | Sports |
|  9 | Sedan  |
|  9 | 4WD    |
|  9 | Luxury |
| 10 | Sports |
| 10 | Sedan  |
| 10 | 4WD    |
| 10 | Luxury |
+----+--------+
40 rows in set (0.00 sec)
</pre></div>

<p>Good god, that's ugly. However, as far as the database is concerned, it is
<em>exactly</em> what was asked for. In the query, we asked for for the <code>ID</code> from
<code>cars</code> and the <code>model</code> from <code>models</code>. However, because we didn't specify <em>how</em>
to join the tables, the database has matched <em>every</em> row from the first table
with <em>every</em> row from the second table.</p>
<p>Okay, so the boss is back, and he wants more information again. <em>I want the
same list, but also include 4WDs in it</em>.</p>
<p>This however, gives us a great excuse to look at two different ways to
accomplish this. We could add another condition to the where clause like this:</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
        join brands d
            on a.brand=d.ID
where
    b.ID=1
    or b.ID=3
</pre></div>

<p>While the above will work perfectly well, lets look at it differently, this is
a great excuse to show how a <code>union</code> query will work.</p>
<p>We know that the following will return all the Sports cars:</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
        join brands d
            on a.brand=d.ID
where
    b.ID=1
</pre></div>

<p>And the following would return all the 4WDs:</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
        join brands d
            on a.brand=d.ID
where
    b.ID=3
</pre></div>

<p>So by adding a <code>union all</code> clause between them, the results of the second
query will be appended to the results of the first query.</p>
<div class="code"><pre class="code literal-block">select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
        join brands d
            on a.brand=d.ID
where
    b.ID=1
union all
select
    a.ID,
    b.model,
    c.color
from
    cars a
        join models b
            on a.model=b.ID
        join colors c
            on a.color=c.ID
        join brands d
            on a.brand=d.ID
where
    b.ID=3

+----+--------+-------+
| ID | model  | color |
+----+--------+-------+
|  1 | Sports | Red   |
|  8 | Sports | Green |
| 10 | Sports | White |
|  3 | Sports | Black |
|  5 | 4WD    | Green |
|  7 | 4WD    | White |
|  9 | 4WD    | Black |
+----+--------+-------+
7 rows in set (0.00 sec)
</pre></div>

<p>As you can see, the results of the first query are returned first, followed by
the results of the second query.</p>
<p>In this example, it would of course have been much easier to simply use the
first query, but <code>union</code> queries can be great for specific cases. They are a
great way to return specific results from tables from tables that aren't
easily joined together - or for that matter <em>completely</em> unrelated tables.
There are a few rules to follow however.</p>
<ul>
<li>The column types from the first query must match the column types from every other query below.</li>
<li>The names of the columns from the first query will be used to identify the entire set of results.</li>
<li>The number of columns in each query must be the same.</li>
</ul>
<p>Now, you might be wondering what the difference is between using <code>union</code> and
<code>union all</code>. A <code>union</code> query will remove duplicates, while a <code>union all</code> will
not. This does mean that there is a small performance hit when using <code>union</code>
over <code>union all</code> but the results may be worth it - I won't speculate on that
sort of thing in this though.</p>
<p>On this note, it might be worth noting some additional notes here.</p>
<ul>
<li>If we wanted to order the results, we can use an <code>order by</code> but you can't use the alias anymore. In the query above, appending an <code>order by a.ID</code> would result in an error - as far as the results are concerned, the column is called <code>ID</code> rather than <code>a.ID</code> - even though the same alias has been used in both queries.</li>
<li>We can only have one <code>order by</code> statement, and it must be as the last statement.</li>
</ul>
<p>For the next examples, I am adding a few extra rows to our tables.</p>
<p>I have added <code>Holden</code> to the brands table. I have also added a row into <code>cars</code>
that has the <code>color</code> value of <code>12</code> - which has no reference in the colors
table.</p>
<p>Okay, the boss is back again, barking requests out - *I want a count of each
brand we carry and the number of cars in it!` - Typical, we just get to an
interesting section of our discussion and the boss wants more work.</p>
<p>Rightyo, so the first thing we need to do is get a complete listing of
possible brands.</p>
<div class="code"><pre class="code literal-block">select
    a.brand
from
    brands a

+--------+
| brand  |
+--------+
| Ford   |
| Toyota |
| Nissan |
| Smart  |
| BMW    |
| Holden |
+--------+
6 rows in set (0.00 sec)
</pre></div>

<p>Now, when we join this to our cars table we get the following result:</p>
<div class="code"><pre class="code literal-block">select
    a.brand
from
    brands a
        join cars b
            on a.ID=b.brand
group by
    a.brand

+--------+
| brand  |
+--------+
| BMW    |
| Ford   |
| Nissan |
| Smart  |
| Toyota |
+--------+
5 rows in set (0.00 sec)
</pre></div>

<p>Which is of course a problem - we aren't seeing any mention of the lovely
<code>Holden</code> brand I added.</p>
<p>This is because a join looks for matching rows in <em>both</em> tables. As there is
no data in cars that is of type <code>Holden</code> it isn't returned. This is where we
can use an <code>outer</code> join. This will return <em>all</em> the results from one table
whether they are matched in the other table or not:</p>
<div class="code"><pre class="code literal-block">select
    a.brand
from
    brands a
        left outer join cars b
            on a.ID=b.brand
group by
    a.brand

+--------+
| brand  |
+--------+
| BMW    |
| Ford   |
| Holden |
| Nissan |
| Smart  |
| Toyota |
+--------+
6 rows in set (0.00 sec)
</pre></div>

<p>Now that we have that, we can add a lovely aggregate function to get a count
and get the boss off our backs for a moment.</p>
<div class="code"><pre class="code literal-block">select
    a.brand,
    count(b.id) as countOfBrand
from
    brands a
        left outer join cars b
            on a.ID=b.brand
group by
    a.brand

+--------+--------------+
| brand  | countOfBrand |
+--------+--------------+
| BMW    |            2 |
| Ford   |            2 |
| Holden |            0 |
| Nissan |            1 |
| Smart  |            1 |
| Toyota |            5 |
+--------+--------------+
6 rows in set (0.00 sec)
</pre></div>

<p>And with that, away the boss skulks.</p>
<p>Now, to explain this in some more detail, outer joins can be of the <code>left</code> or
<code>right</code> type. The Left or Right defines which table is <em>fully</em> included. A
<code>left outer join</code> will include all the rows from the table on the left, while
(you guessed it) a <code>right outer join</code> brings all the results from the table on
the right into the results.</p>
<p>Some databases will allow a <code>full outer join</code> which will bring back results
(whether matched or not) from <em>both</em> tables, but this isn't supported in all
databases.</p>
<p>Now, I probably figure at this point in time, you are wondering whether or not
you can merge join types in a query - and the answer is yes, you absolutely
can.</p>
<div class="code"><pre class="code literal-block">select
    b.brand,
    c.color,
    count(a.id) as countOfBrand
from
    cars a
        right outer join brands b
            on b.ID=a.brand
        join colors c
            on a.color=c.ID
group by
    a.brand,
    c.color

+--------+-------+--------------+
| brand  | color | countOfBrand |
+--------+-------+--------------+
| Ford   | Blue  |            1 |
| Ford   | White |            1 |
| Toyota | Black |            1 |
| Toyota | Green |            2 |
| Toyota | Red   |            1 |
| Nissan | Black |            1 |
| Smart  | White |            1 |
| BMW    | Blue  |            1 |
| BMW    | White |            1 |
+--------+-------+--------------+
9 rows in set (0.00 sec)
</pre></div>

<p>So, why is that not the results that were expected? It is because although we
have selected the outer join from cars to brands, it wasn't specified in the
join to colors - so that particular join will only bring back results that
match in both tables.</p>
<p>Here is the query that would work to get the results that we expected:</p>
<div class="code"><pre class="code literal-block">select
    a.brand,
    c.color,
    count(b.id) as countOfBrand
from
    brands a
        left outer join cars b
            on a.ID=b.brand
        left outer join colors c
            on b.color=c.ID
group by
    a.brand,
    c.color

+--------+-------+--------------+
| brand  | color | countOfBrand |
+--------+-------+--------------+
| BMW    | Blue  |            1 |
| BMW    | White |            1 |
| Ford   | Blue  |            1 |
| Ford   | White |            1 |
| Holden | NULL  |            0 |
| Nissan | Black |            1 |
| Smart  | White |            1 |
| Toyota | NULL  |            1 |
| Toyota | Black |            1 |
| Toyota | Green |            2 |
| Toyota | Red   |            1 |
+--------+-------+--------------+
11 rows in set (0.00 sec)
</pre></div>

<p>As we can see, we have two outer joins in the query and the results are coming
through as expected.</p>
<p>Now, how about those other types of joins you ask? What about Intersections?</p>
<p>Well, not all databases support the <code>intersection</code> but pretty much all
databases will allow you to create an intersection through a join (or a well
structured where statement at the least).</p>
<p>An Intersection is a type of join somewhat similar to a <code>union</code> as described
above - but the difference is that it <em>only</em> returns rows of data that are
identical (and I do mean identical) between the various individual queries
joined by the union. Only rows that are identical in every regard will be
returned.</p>
<p>A simple example would be as such:</p>
<div class="code"><pre class="code literal-block">select
    *
from
    colors
where
    ID&gt;2
intersect
select
    *
from
    colors
where
    id&lt;4
</pre></div>

<p>While a normal <code>union</code> query would return all the rows of the table (the first
query returning anything over <code>ID&gt;2</code> and the second anything having <code>ID&lt;4</code>)
which would result in a full set, an intersect query would only return the row
matching <code>id=3</code> as it meets both criteria.</p>
<p>Now, if your database doesn't support an <code>intersect</code> query, the above can be
easily accomlished with the following query:</p>
<div class="code"><pre class="code literal-block"><span class="c">select</span>
<span class="c">    a</span><span class="nt">.</span><span class="c">ID</span><span class="nt">,</span>
<span class="c">    a</span><span class="nt">.</span><span class="c">color</span><span class="nt">,</span>
<span class="c">    a</span><span class="nt">.</span><span class="c">paint</span>
<span class="c">from</span>
<span class="c">    colors a</span>
<span class="c">        join colors b</span>
<span class="c">            on a</span><span class="nt">.</span><span class="c">ID=b</span><span class="nt">.</span><span class="c">ID</span>
<span class="c">where</span>
<span class="c">    a</span><span class="nt">.</span><span class="c">ID</span><span class="nv">&gt;</span><span class="c">2</span>
<span class="c">    and b</span><span class="nt">.</span><span class="c">ID</span><span class="nv">&lt;</span><span class="c">4</span>

<span class="nb">+----+-------+----------+</span>
<span class="c">| ID | color | paint    |</span>
<span class="nb">+----+-------+----------+</span>
<span class="c">|  3 | Blue  | Metallic |</span>
<span class="nb">+----+-------+----------+</span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</pre></div>

<p>If you wish to perform an intersection across two different tables using a
database that doesn't inherently support an intersection query, you will need
to create a join on <em>every column</em> of the tables.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Ok, I found this post very interesting and I would like to share some of my
knowledge on creating a query. Thanks for this <strong>Fluffeh</strong>. Others who may
read this and may feel that I'm wrong are 101% free to edit and criticise my
answer. ( <em>Honestly, I feel very thankful for correcting my mistake(s).</em> )</p>
<p>I'll be posting some of the frequently asked questions in <code>MySQL</code> tag.</p>
<hr>
<h2><strong>Trick No. 1 ( <em>rows that matches to multiple conditions</em> )</strong></h2>
<p>Given this schema</p>
<div class="code"><pre class="code literal-block"><span class="nt">CREATE</span><span class="w"> </span><span class="nt">TABLE</span><span class="w"> </span><span class="nt">MovieList</span>
<span class="o">(</span>
<span class="w">    </span><span class="nt">ID</span><span class="w"> </span><span class="nt">INT</span><span class="o">,</span>
<span class="w">    </span><span class="nt">MovieName</span><span class="w"> </span><span class="nt">VARCHAR</span><span class="o">(</span><span class="nt">25</span><span class="o">),</span>
<span class="w">    </span><span class="nt">CONSTRAINT</span><span class="w"> </span><span class="nt">ml_pk</span><span class="w"> </span><span class="nt">PRIMARY</span><span class="w"> </span><span class="nt">KEY</span><span class="w"> </span><span class="o">(</span><span class="nt">ID</span><span class="o">),</span>
<span class="w">    </span><span class="nt">CONSTRAINT</span><span class="w"> </span><span class="nt">ml_uq</span><span class="w"> </span><span class="nt">UNIQUE</span><span class="w"> </span><span class="o">(</span><span class="nt">MovieName</span><span class="o">)</span>
<span class="o">);</span>

<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">MovieList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="s1">'American Pie'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">MovieList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">2</span><span class="o">,</span><span class="w"> </span><span class="s1">'The Notebook'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">MovieList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">3</span><span class="o">,</span><span class="w"> </span><span class="s1">'Discovery Channel: Africa'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">MovieList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">4</span><span class="o">,</span><span class="w"> </span><span class="s1">'Mr. Bean'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">MovieList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">5</span><span class="o">,</span><span class="w"> </span><span class="s1">'Expendables 2'</span><span class="o">);</span>

<span class="nt">CREATE</span><span class="w"> </span><span class="nt">TABLE</span><span class="w"> </span><span class="nt">CategoryList</span>
<span class="o">(</span>
<span class="w">    </span><span class="nt">MovieID</span><span class="w"> </span><span class="nt">INT</span><span class="o">,</span>
<span class="w">    </span><span class="nt">CategoryName</span><span class="w"> </span><span class="nt">VARCHAR</span><span class="o">(</span><span class="nt">25</span><span class="o">),</span>
<span class="w">    </span><span class="nt">CONSTRAINT</span><span class="w"> </span><span class="nt">cl_uq</span><span class="w"> </span><span class="nt">UNIQUE</span><span class="o">(</span><span class="nt">MovieID</span><span class="o">,</span><span class="w"> </span><span class="nt">CategoryName</span><span class="o">),</span>
<span class="w">    </span><span class="nt">CONSTRAINT</span><span class="w"> </span><span class="nt">cl_fk</span><span class="w"> </span><span class="nt">FOREIGN</span><span class="w"> </span><span class="nt">KEY</span><span class="w"> </span><span class="o">(</span><span class="nt">MovieID</span><span class="o">)</span><span class="w"> </span><span class="nt">REFERENCES</span><span class="w"> </span><span class="nt">MovieList</span><span class="o">(</span><span class="nt">ID</span><span class="o">)</span>
<span class="o">);</span>

<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="s1">'Comedy'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="s1">'Romance'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">2</span><span class="o">,</span><span class="w"> </span><span class="s1">'Romance'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">2</span><span class="o">,</span><span class="w"> </span><span class="s1">'Drama'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">3</span><span class="o">,</span><span class="w"> </span><span class="s1">'Documentary'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">4</span><span class="o">,</span><span class="w"> </span><span class="s1">'Comedy'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">5</span><span class="o">,</span><span class="w"> </span><span class="s1">'Comedy'</span><span class="o">);</span>
<span class="nt">INSERT</span><span class="w"> </span><span class="nt">INTO</span><span class="w"> </span><span class="nt">CategoryList</span><span class="w"> </span><span class="nt">VALUES</span><span class="w"> </span><span class="o">(</span><span class="nt">5</span><span class="o">,</span><span class="w"> </span><span class="s1">'Action'</span><span class="o">);</span>
</pre></div>

<p><strong>QUESTION</strong></p>
<p>Find <em>all movies</em> that belong to at least <em>both</em> <code>Comedy</code> and <code>Romance</code>
categories.</p>
<p><strong>Solution</strong></p>
<p>This question can be very tricky sometimes. It may seem that a query like this
will be the answer:-</p>
<div class="code"><pre class="code literal-block">SELECT  DISTINCT a.MovieName
FROM    MovieList a
        INNER JOIN CategoryList b
            ON a.ID = b.MovieID
WHERE   b.CategoryName = 'Comedy' AND
        b.CategoryName = 'Romance'
</pre></div>

<h3>SQLFiddle Demo</h3>
<p>which is definitely very wrong because it produces <em>no result</em>. The
explanation of this is that there is only one valid value of <code>CategoryName</code> on
<em>each row</em>. For instance, the first condition returns <em>true</em> , the second
condition is always false. Thus, by using <code>AND</code> operator, both condition
should be true; otherwise, it will be false. Another query is like this,</p>
<div class="code"><pre class="code literal-block">SELECT  DISTINCT a.MovieName
FROM    MovieList a
        INNER JOIN CategoryList b
            ON a.ID = b.MovieID
WHERE   b.CategoryName IN ('Comedy','Romance')
</pre></div>

<h3>SQLFiddle Demo</h3>
<p>and the result is still incorrect because it matches to record that has <em>at
least</em> one match on the <code>categoryName</code>. The <strong>real solution</strong> <em>would be by
counting the number of record instances per movie</em>. The number of instance
should match to the total number of the values supplied in the condition.</p>
<div class="code"><pre class="code literal-block">SELECT  a.MovieName
FROM    MovieList a
        INNER JOIN CategoryList b
            ON a.ID = b.MovieID
WHERE   b.CategoryName IN ('Comedy','Romance')
GROUP BY a.MovieName
HAVING COUNT(*) = 2
</pre></div>

<h3>SQLFiddle Demo (the answer)</h3>
<ul>
<li>SQL of Relational Division</li>
</ul>
<hr>
<h2><strong>Trick No. 2 ( <em>maximum record for each entry</em> )</strong></h2>
<p>Given schema,</p>
<div class="code"><pre class="code literal-block"><span class="nv">CREATE</span><span class="w"> </span><span class="nv">TABLE</span><span class="w"> </span><span class="nv">Software</span>
<span class="ss">(</span>
<span class="w">    </span><span class="nv">ID</span><span class="w"> </span><span class="nv">INT</span>,
<span class="w">    </span><span class="nv">SoftwareName</span><span class="w"> </span><span class="nv">VARCHAR</span><span class="ss">(</span><span class="mi">25</span><span class="ss">)</span>,
<span class="w">    </span><span class="nv">Descriptions</span><span class="w"> </span><span class="nv">VARCHAR</span><span class="ss">(</span><span class="mi">150</span><span class="ss">)</span>,
<span class="w">    </span><span class="nv">CONSTRAINT</span><span class="w"> </span><span class="nv">sw_pk</span><span class="w"> </span><span class="nv">PRIMARY</span><span class="w"> </span><span class="nv">KEY</span><span class="w"> </span><span class="ss">(</span><span class="nv">ID</span><span class="ss">)</span>,
<span class="w">    </span><span class="nv">CONSTRAINT</span><span class="w"> </span><span class="nv">sw_uq</span><span class="w"> </span><span class="nv">UNIQUE</span><span class="w"> </span><span class="ss">(</span><span class="nv">SoftwareName</span><span class="ss">)</span><span class="w">  </span>
<span class="ss">)</span><span class="c1">;</span>

<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">Software</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span>,<span class="s1">'PaintMe'</span>,<span class="s1">'used for photo editing'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">Software</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span>,<span class="s1">'World Map'</span>,<span class="s1">'contains map of different places of the world'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">Software</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">3</span>,<span class="s1">'Dictionary'</span>,<span class="s1">'contains description, synonym, antonym of the words'</span><span class="ss">)</span><span class="c1">;</span>

<span class="nv">CREATE</span><span class="w"> </span><span class="nv">TABLE</span><span class="w"> </span><span class="nv">VersionList</span>
<span class="ss">(</span>
<span class="w">    </span><span class="nv">SoftwareID</span><span class="w"> </span><span class="nv">INT</span>,
<span class="w">    </span><span class="nv">VersionNo</span><span class="w"> </span><span class="nv">INT</span>,
<span class="w">    </span><span class="nv">DateReleased</span><span class="w"> </span><span class="nv">DATE</span>,
<span class="w">    </span><span class="nv">CONSTRAINT</span><span class="w"> </span><span class="nv">sw_uq</span><span class="w"> </span><span class="nv">UNIQUE</span><span class="w"> </span><span class="ss">(</span><span class="nv">SoftwareID</span>,<span class="w"> </span><span class="nv">VersionNo</span><span class="ss">)</span>,
<span class="w">    </span><span class="nv">CONSTRAINT</span><span class="w"> </span><span class="nv">sw_fk</span><span class="w"> </span><span class="nv">FOREIGN</span><span class="w"> </span><span class="nv">KEY</span><span class="w"> </span><span class="ss">(</span><span class="nv">SOftwareID</span><span class="ss">)</span><span class="w"> </span><span class="nv">REFERENCES</span><span class="w"> </span><span class="nv">Software</span><span class="ss">(</span><span class="nv">ID</span><span class="ss">)</span>
<span class="ss">)</span><span class="c1">;</span>

<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">3</span>,<span class="w"> </span><span class="mi">2</span>,<span class="w"> </span><span class="s1">'2009-12-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">3</span>,<span class="w"> </span><span class="mi">1</span>,<span class="w"> </span><span class="s1">'2009-11-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">3</span>,<span class="w"> </span><span class="mi">3</span>,<span class="w"> </span><span class="s1">'2010-01-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span>,<span class="w"> </span><span class="mi">2</span>,<span class="w"> </span><span class="s1">'2010-12-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span>,<span class="w"> </span><span class="mi">1</span>,<span class="w"> </span><span class="s1">'2009-12-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="mi">3</span>,<span class="w"> </span><span class="s1">'2011-12-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="mi">2</span>,<span class="w"> </span><span class="s1">'2010-12-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="mi">1</span>,<span class="w"> </span><span class="s1">'2009-12-01'</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span><span class="w"> </span><span class="nv">INTO</span><span class="w"> </span><span class="nv">VersionList</span><span class="w"> </span><span class="nv">VALUES</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="mi">4</span>,<span class="w"> </span><span class="s1">'2012-12-01'</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p><strong>QUESTION</strong></p>
<p>Find the latest version on each software. Display the following columns:
<code>SoftwareName</code>,<code>Descriptions</code>,<code>LatestVersion</code> ( <em>from VersionNo column</em>
),<code>DateReleased</code></p>
<p><strong>Solution</strong></p>
<p>Some SQL developers mistakenly use <code>MAX()</code> aggregate function. They tend to
create like this,</p>
<div class="code"><pre class="code literal-block">SELECT  a.SoftwareName, a.Descriptions,
        MAX(b.VersionNo) AS LatestVersion, b.DateReleased
FROM    Software a
        INNER JOIN VersionList b
            ON a.ID = b.SoftwareID
GROUP BY a.ID
ORDER BY a.ID
</pre></div>

<h3>SQLFiddle Demo</h3>
<p>( <em>most RDBMS generates a syntax error on this because of not specifying some
of the non-aggregated columns on the<code>group by</code> clause</em>) the result produces
the correct <code>LatestVersion</code> on each software but obviously the <code>DateReleased</code>
are incorrect. <code>MySQL</code> doesn't support <code>Window Functions</code> and <code>Common Table
Expression</code> yet as some RDBMS do already. The workaround on this problem is to
create a <code>subquery</code> which gets the individual maximum <code>versionNo</code> on each
software and later on be joined on the other tables.</p>
<div class="code"><pre class="code literal-block">SELECT  a.SoftwareName, a.Descriptions,
        b.LatestVersion, c.DateReleased
FROM    Software a
        INNER JOIN
        (
            SELECT  SoftwareID, MAX(VersionNO) LatestVersion
            FROM    VersionList
            GROUP BY SoftwareID
        ) b ON a.ID = b.SoftwareID
        INNER JOIN VersionList c
            ON  c.SoftwareID = b.SoftwareID AND
                c.VersionNO = b.LatestVersion
GROUP BY a.ID
ORDER BY a.ID
</pre></div>

<h3>SQLFiddle Demo (the answer)</h3>
<hr>
<p>So that was it. I'll be posting another soon as I recall any other <em>FAQ</em> on
<code>MySQL</code> tag. Thank you for reading this little article. I hope that you have
atleast get even a little knowledge from this.</p>
<p><strong>UPDATE 1</strong></p>
<hr>
<h2><strong>Trick No. 3 ( <em>Finding the latest record between two IDs</em> )</strong></h2>
<p>Given Schema</p>
<div class="code"><pre class="code literal-block">CREATE TABLE userList
(
    ID INT,
    NAME VARCHAR(20),
    CONSTRAINT us_pk PRIMARY KEY (ID),
    CONSTRAINT us_uq UNIQUE (NAME)  
);

INSERT INTO userList VALUES (1, 'Fluffeh');
INSERT INTO userList VALUES (2, 'John Woo');
INSERT INTO userList VALUES (3, 'hims056');

CREATE TABLE CONVERSATION
(
    ID INT,
    FROM_ID INT,
    TO_ID INT,
    MESSAGE VARCHAR(250),
    DeliveryDate DATE
);

INSERT INTO CONVERSATION VALUES (1, 1, 2, 'hi john', '2012-01-01');
INSERT INTO CONVERSATION VALUES (2, 2, 1, 'hello fluff', '2012-01-02');
INSERT INTO CONVERSATION VALUES (3, 1, 3, 'hey hims', '2012-01-03');
INSERT INTO CONVERSATION VALUES (4, 1, 3, 'please reply', '2012-01-04');
INSERT INTO CONVERSATION VALUES (5, 3, 1, 'how are you?', '2012-01-05');
INSERT INTO CONVERSATION VALUES (6, 3, 2, 'sample message!', '2012-01-05');
</pre></div>

<p><strong>QUESTION</strong></p>
<p>Find the latest conversation between two users.</p>
<p><strong>Solution</strong></p>
<div class="code"><pre class="code literal-block">SELECT    b.Name SenderName,
          c.Name RecipientName,
          a.Message,
          a.DeliveryDate
FROM      Conversation a
          INNER JOIN userList b
            ON a.From_ID = b.ID
          INNER JOIN userList c
            ON a.To_ID = c.ID
WHERE     (LEAST(a.FROM_ID, a.TO_ID), GREATEST(a.FROM_ID, a.TO_ID), DeliveryDate)
IN
(
    SELECT  LEAST(FROM_ID, TO_ID) minFROM,
            GREATEST(FROM_ID, TO_ID) maxTo,
            MAX(DeliveryDate) maxDate
    FROM    Conversation
    GROUP BY minFROM, maxTo
)
</pre></div>

<h3>SQLFiddle Demo</h3>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1801.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1799.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
