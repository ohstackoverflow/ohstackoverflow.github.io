<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 262) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-262.html">
<link rel="prev" href="index-263.html" type="text/html">
<link rel="next" href="index-261.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-check-which-version-of-python-is-running-my-script/" class="u-url">How do I check which version of Python is running my script?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-check-which-version-of-python-is-running-my-script/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:24:48+08:00" itemprop="datePublished" title="2023-02-17 02:24">2023-02-17 02:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I check which version of the Python interpreter is running my script?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This information is available in the <code>sys.version</code> string in the <code>sys</code> module:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">sys</span>
</pre></div>

<p>Human readable:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; print(sys.version)  # parentheses necessary in python 3.       
2.5.2 (r252:60911, Jul 31 2008, 17:28:52) 
[GCC 4.2.3 (Ubuntu 4.2.3-2ubuntu7)]
</pre></div>

<p>For further processing, use <code>sys.version_info</code> or <code>sys.hexversion</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; sys.version_info
(2, 5, 2, 'final', 0)
# or
&gt;&gt;&gt; sys.hexversion
34014192
</pre></div>

<p>To ensure a script runs with a minimal version requirement of the Python
interpreter add this to your code:</p>
<div class="code"><pre class="code literal-block">assert sys.version_info &gt;= (2, 5)
</pre></div>

<p>This compares major and minor version information. Add micro (=<code>0</code>, <code>1</code>, etc)
and even releaselevel (=<code>'alpha'</code>,<code>'final'</code>, etc) to the tuple as you like.
Note however, that it is almost always better to "duck" check if a certain
feature is there, and if not, workaround (or bail out). Sometimes features go
away in newer releases, being replaced by others.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From the command line (note the capital 'V'):</p>
<div class="code"><pre class="code literal-block">python -V
</pre></div>

<p>This is documented in 'man python'.</p>
<p>From IPython console</p>
<div class="code"><pre class="code literal-block"><span class="sx">!python -V</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-gradle-in-android-studio/" class="u-url">What is Gradle in Android Studio?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-gradle-in-android-studio/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:24:19+08:00" itemprop="datePublished" title="2023-02-17 02:24">2023-02-17 02:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Gradle is a bit confusing to me, and also for any new Android developer. Can
anyone explain what Gradle in Android Studio is and what its purpose is? Why
is it included in Android Studio?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Short Answer</h4>
<p>Gradle is a build system.</p>
<h4>Long Answer</h4>
<p>Before Android Studio you were using Eclipse for your development purposes,
and, chances are, you didn't know how to build your Android APK without
Eclipse.</p>
<p>You can do this on the command line, but you have to learn what each tool (dx
and AAPT) does in the SDK. Eclipse saved us all from these low-level, but
important, fundamental details by giving us their own build system.</p>
<p>Now, have you ever wondered why the <code>res</code> folder is in the same directory as
your <code>src</code> folder?</p>
<p>This is where the build system enters the picture. The build system
automatically takes all the source files (<code>.java</code> or <code>.xml</code>), then applies the
appropriate tool (e.g., takes <code>.java</code> class files and converts them to <code>.dex</code>
files), and groups all of them into one compressed file - our beloved APK.</p>
<p>This build system uses some conventions: an example of one is to specify the
directory containing the source files (in Eclipse it is <code>\src</code> folder) or
resources files (in Eclipse it is <code>\res</code> folder).</p>
<p>Now, in order to automate all these tasks, there has to be a script; you can
write your own build system using shell scripting in Linux or batch files
syntax in Windows. Got it?</p>
<p>Gradle is another <strong>build system</strong> that takes the best features from other
build systems and combines them into one. It is improved based off of their
shortcomings. It is a <strong>JVM-based build system</strong>. That means you can write
your own script in Java, which Android Studio makes use of.</p>
<p>One cool thing about Gradle is that it is a <strong>plugin-based system</strong>. This
means if you have your own programming language and you want to automate the
task of building some package (output like a JAR file for Java) from sources,
then you can write a complete plugin in Java or Groovy (or Kotlin, see here),
and distribute it to the rest of the world.</p>
<h4>Why did Google use it?</h4>
<p>Google saw one of the most advanced build systems on the market and realized
that you could write scripts of your own with little-to-no learning curve, and
without learning Groovy or any other new language. So they wrote the Android
plugin for Gradle.</p>
<p>You must have seen the <code>build.gradle</code> or <code>build.gradle.kts</code> file(s) in your
project. That is where you can write scripts to automate your tasks. The code
you saw in these files is Groovy or Kotlin code. If you write
<code>System.out.println("Hello Gradle!");</code> then it will print on your console.</p>
<h4>What can you do in a build script?</h4>
<p>A simple example is that you have to copy some files from one directory to
another before the actual build process happens. A Gradle build script can do
this.</p>
<p><br></p>
<h3>Suggest</h3>
<p>It's the new build tool that Google wants to use for Android. It's being used
due to it being more extensible, and useful than Ant. It is meant to enhance
developer experience.</p>
<p>You can view a talk by Xavier Ducrohet from the Android Developer Team at
Google I/O here.</p>
<p>There is also another talk on Android Studio by Xavier and Tor Norbye, also
during Google I/O here.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/null-object-in-python/" class="u-url">Null object in Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/null-object-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:23:52+08:00" itemprop="datePublished" title="2023-02-17 02:23">2023-02-17 02:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I refer to the null object in Python?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In Python, the 'null' object is the singleton <code>None</code>.</p>
<p>To check if something is <code>None</code>, use the <code>is</code> identity operator:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">foo</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span>:
<span class="w">    </span>...
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h2>
<code>None</code>, Python's null?</h2>
<p>There's no <code>null</code> in Python; instead there's <code>None</code>. As stated already, the
most accurate way to test that something has been given <code>None</code> as a value is
to use the <code>is</code> identity operator, which tests that two variables refer to the
same object.</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; foo is None
True
&gt;&gt;&gt; foo = 'bar'
&gt;&gt;&gt; foo is None
False
</pre></div>

<h2>The basics</h2>
<h3>There is and can only be one <code>None</code>
</h3>
<p><code>None</code> is the sole instance of the class <code>NoneType</code> and any further attempts
at instantiating that class will return the same object, which makes <code>None</code> a
singleton. Newcomers to Python often see error messages that mention
<code>NoneType</code> and wonder what it is. It's my personal opinion that these messages
could simply just mention <code>None</code> by name because, as we'll see shortly, <code>None</code>
leaves little room to ambiguity. So if you see some <code>TypeError</code> message that
mentions that <code>NoneType</code> can't do this or can't do that, just know that it's
simply the one <code>None</code> that was being used in a way that it can't.</p>
<p>Also, <code>None</code> is a built-in constant. As soon as you start Python, it's
available to use from everywhere, whether in module, class, or function.
<code>NoneType</code> by contrast is not, you'd need to get a reference to it first by
querying <code>None</code> for its class.</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; NoneType
NameError: name 'NoneType' is not defined
&gt;&gt;&gt; type(None)
NoneType
</pre></div>

<p>You can check <code>None</code>'s uniqueness with Python's identity function <code>id()</code>. It
returns the unique number assigned to an object, each object has one. If the
id of two variables is the same, then they point in fact to the same object.</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; NoneType = type(None)
&gt;&gt;&gt; id(None)
10748000
&gt;&gt;&gt; my_none = NoneType()
&gt;&gt;&gt; id(my_none)
10748000
&gt;&gt;&gt; another_none = NoneType()
&gt;&gt;&gt; id(another_none)
10748000
&gt;&gt;&gt; def function_that_does_nothing(): pass
&gt;&gt;&gt; return_value = function_that_does_nothing()
&gt;&gt;&gt; id(return_value)
10748000
</pre></div>

<h3>
<code>None</code> cannot be overwritten</h3>
<p>In much older versions of Python (before 2.4) it was possible to reassign
<code>None</code>, but not any more. Not even as a class attribute or in the confines of
a function.</p>
<div class="code"><pre class="code literal-block"><span class="p">#</span><span class="w"> </span><span class="n">In</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="mf">2.7</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">SomeClass</span><span class="p">(</span><span class="n">object</span><span class="p">)</span><span class="o">:</span>
<span class="p">...</span><span class="w">     </span><span class="n">def</span><span class="w"> </span><span class="n">my_fnc</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
<span class="p">...</span><span class="w">             </span><span class="n">self</span><span class="p">.</span><span class="n">None</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">'</span><span class="n">foo</span><span class="p">'</span>
<span class="nl">SyntaxError:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="k">assign</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">None</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">def</span><span class="w"> </span><span class="n">my_fnc</span><span class="p">()</span><span class="o">:</span>
<span class="w">        </span><span class="n">None</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">'</span><span class="n">foo</span><span class="p">'</span>
<span class="nl">SyntaxError:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="k">assign</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">None</span>

<span class="p">#</span><span class="w"> </span><span class="n">In</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="mf">3.5</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="nl">SomeClass:</span>
<span class="p">...</span><span class="w">     </span><span class="n">def</span><span class="w"> </span><span class="n">my_fnc</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
<span class="p">...</span><span class="w">             </span><span class="n">self</span><span class="p">.</span><span class="n">None</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">'</span><span class="n">foo</span><span class="p">'</span>
<span class="nl">SyntaxError:</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">syntax</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">def</span><span class="w"> </span><span class="n">my_fnc</span><span class="p">()</span><span class="o">:</span>
<span class="w">        </span><span class="n">None</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">'</span><span class="n">foo</span><span class="p">'</span>
<span class="nl">SyntaxError:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="k">assign</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keyword</span>
</pre></div>

<p>It's therefore safe to assume that all <code>None</code> references are the same. There
isn't any "custom" <code>None</code>.</p>
<h3>To test for <code>None</code> use the <code>is</code> operator</h3>
<p>When writing code you might be tempted to test for <em>Noneness</em> like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="o">==</span><span class="nv">None</span>:
<span class="w">    </span><span class="nv">pass</span>
</pre></div>

<p>Or to test for falsehood like this</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">value</span>:
<span class="w">    </span><span class="nv">pass</span>
</pre></div>

<p>You need to understand the implications and why it's often a good idea to be
explicit.</p>
<h4>Case 1: testing if a value is <code>None</code>
</h4>
<p>Why do</p>
<div class="code"><pre class="code literal-block">value is None
</pre></div>

<p>rather than</p>
<div class="code"><pre class="code literal-block">value==None
</pre></div>

<p>?</p>
<p>The first is equivalent to:</p>
<div class="code"><pre class="code literal-block">id(value)==id(None)
</pre></div>

<p>Whereas the expression <code>value==None</code> is in fact applied like this</p>
<div class="code"><pre class="code literal-block">value.__eq__(None)
</pre></div>

<p>If the value really is <code>None</code> then you'll get what you expected.</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; nothing = function_that_does_nothing()
&gt;&gt;&gt; nothing.__eq__(None)
True
</pre></div>

<p>In most common cases the outcome will be the same, but the <code>__eq__()</code> method
opens a door that voids any guarantee of accuracy, since it can be overridden
in a class to provide special behavior.</p>
<p>Consider this class.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">Empty</span><span class="ss">(</span><span class="nv">object</span><span class="ss">)</span>:
...<span class="w">     </span><span class="nv">def</span><span class="w"> </span><span class="nv">__eq__</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">other</span><span class="ss">)</span>:
...<span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">other</span>
</pre></div>

<p>So you try it on <code>None</code> and it works</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; empty = Empty()
&gt;&gt;&gt; empty==None
True
</pre></div>

<p>But then it also works on the empty string</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; empty==''
True
</pre></div>

<p>And yet</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; ''==None
False
&gt;&gt;&gt; empty is None
False
</pre></div>

<h4>Case 2: Using <code>None</code> as a boolean</h4>
<p>The following two tests</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">value</span>:
<span class="w">    </span>#<span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">something</span>

<span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">value</span>:
<span class="w">    </span>#<span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">something</span>
</pre></div>

<p>are in fact evaluated as</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">bool</span><span class="ss">(</span><span class="nv">value</span><span class="ss">)</span>:
<span class="w">    </span>#<span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">something</span>

<span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">bool</span><span class="ss">(</span><span class="nv">value</span><span class="ss">)</span>:
<span class="w">    </span>#<span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">something</span>
</pre></div>

<p><code>None</code> is a "falsey", meaning that if cast to a boolean it will return <code>False</code>
and if applied the <code>not</code> operator it will return <code>True</code>. Note however that
it's not a property unique to <code>None</code>. In addition to <code>False</code> itself, the
property is shared by empty lists, tuples, sets, dicts, strings, as well as 0,
and all objects from classes that implement the <code>__bool__()</code> magic method to
return <code>False</code>.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">bool</span><span class="ss">(</span><span class="nv">None</span><span class="ss">)</span>
<span class="nv">False</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">None</span>
<span class="nv">True</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">bool</span><span class="ss">(</span>[]<span class="ss">)</span>
<span class="nv">False</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span>[]
<span class="nv">True</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">MyFalsey</span><span class="ss">(</span><span class="nv">object</span><span class="ss">)</span>:
...<span class="w">     </span><span class="nv">def</span><span class="w"> </span><span class="nv">__bool__</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:
...<span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="nv">False</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">MyFalsey</span><span class="ss">()</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">bool</span><span class="ss">(</span><span class="nv">f</span><span class="ss">)</span>
<span class="nv">False</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">f</span>
<span class="nv">True</span>
</pre></div>

<p>So when testing for variables in the following way, be extra aware of what
you're including or excluding from the test:</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">some_function</span><span class="ss">(</span><span class="nv">value</span><span class="o">=</span><span class="nv">None</span><span class="ss">)</span>:
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">value</span>:
<span class="w">        </span><span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">init_value</span><span class="ss">()</span>
</pre></div>

<p>In the above, did you mean to call <code>init_value()</code> when the value is set
specifically to <code>None</code>, or did you mean that a value set to <code>0</code>, or the empty
string, or an empty list should also trigger the initialization? Like I said,
be mindful. As it's often the case, in Python <em>explicit is better than
implicit</em>.</p>
<h2>
<code>None</code> in practice</h2>
<h3>
<code>None</code> used as a signal value</h3>
<p><code>None</code> has a special status in Python. It's a favorite baseline value because
many algorithms treat it as an exceptional value. In such scenarios it can be
used as a flag to signal that a condition requires some special handling (such
as the setting of a default value).</p>
<p>You can assign <code>None</code> to the keyword arguments of a function and then
explicitly test for it.</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">my_function</span><span class="ss">(</span><span class="nv">value</span>,<span class="w"> </span><span class="nv">param</span><span class="o">=</span><span class="nv">None</span><span class="ss">)</span>:
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">param</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span>:
<span class="w">        </span>#<span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">outrageous</span><span class="o">!</span>
</pre></div>

<p>You can return it as the default when trying to get to an object's attribute
and then explicitly test for it before doing something special.</p>
<div class="code"><pre class="code literal-block"><span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">getattr</span><span class="ss">(</span><span class="nv">some_obj</span>,<span class="w"> </span><span class="s1">'some_attribute'</span>,<span class="w"> </span><span class="nv">None</span><span class="ss">)</span>
<span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span>:
<span class="w">    </span>#<span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">spectacular</span><span class="o">!</span>
</pre></div>

<p>By default a dictionary's <code>get()</code> method returns <code>None</code> when trying to access
a non-existing key:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; some_dict = {}
&gt;&gt;&gt; value = some_dict.get('foo')
&gt;&gt;&gt; value is None
True
</pre></div>

<p>If you were to try to access it by using the subscript notation a <code>KeyError</code>
would be raised</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; value = some_dict['foo']
KeyError: 'foo'
</pre></div>

<p>Likewise if you attempt to pop a non-existing item</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; value = some_dict.pop('foo')
KeyError: 'foo'
</pre></div>

<p>which you can suppress with a default value that is usually set to <code>None</code></p>
<div class="code"><pre class="code literal-block"><span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">some_dict</span>.<span class="nv">pop</span><span class="ss">(</span><span class="s1">'foo'</span>,<span class="w"> </span><span class="nv">None</span><span class="ss">)</span>
<span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span>:
<span class="w">    </span>#<span class="w"> </span><span class="nv">Booom</span><span class="o">!</span>
</pre></div>

<h3>
<code>None</code> used as both a flag and valid value</h3>
<p>The above described uses of <code>None</code> apply when it is not considered a valid
value, but more like a signal to do something special. There are situations
however where it sometimes matters to know where <code>None</code> came from because even
though it's used as a signal it could also be part of the data.</p>
<p>When you query an object for its attribute with <code>getattr(some_obj,
'attribute_name', None)</code> getting back <code>None</code> doesn't tell you if the attribute
you were trying to access was set to <code>None</code> or if it was altogether absent
from the object. The same situation when accessing a key from a dictionary,
like <code>some_dict.get('some_key')</code>, you don't know if <code>some_dict['some_key']</code> is
missing or if it's just set to <code>None</code>. If you need that information, the usual
way to handle this is to directly attempt accessing the attribute or key from
within a <code>try/except</code> construct:</p>
<div class="code"><pre class="code literal-block"><span class="n">try</span><span class="o">:</span>
<span class="w">    </span><span class="c1"># Equivalent to getattr() without specifying a default</span>
<span class="w">    </span><span class="c1"># value = getattr(some_obj, 'some_attribute')</span>
<span class="w">    </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">some_obj</span><span class="p">.</span><span class="n">some_attribute</span>
<span class="w">    </span><span class="c1"># Now you handle `None` the data here</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">None</span><span class="o">:</span>
<span class="w">        </span><span class="c1"># Do something here because the attribute was set to None</span>
<span class="k">except</span><span class="w"> </span><span class="n">AttributeError</span><span class="o">:</span>
<span class="w">    </span><span class="c1"># We're now handling the exceptional situation from here.</span>
<span class="w">    </span><span class="c1"># We could assign None as a default value if required.</span>
<span class="w">    </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="c1"># In addition, since we now know that some_obj doesn't have the</span>
<span class="w">    </span><span class="c1"># attribute 'some_attribute' we could do something about that.</span>
<span class="w">    </span><span class="n">log_something</span><span class="p">(</span><span class="n">some_obj</span><span class="p">)</span>
</pre></div>

<p>Similarly with dict:</p>
<div class="code"><pre class="code literal-block"><span class="k">try</span><span class="o">:</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">some_dict</span><span class="o">[</span><span class="s1">'some_key'</span><span class="o">]</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">None</span><span class="o">:</span>
<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="s1">'some_key'</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="kd">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">None</span>
<span class="n">except</span><span class="w"> </span><span class="n">KeyError</span><span class="o">:</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">default</span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="s1">'some_key'</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">missing</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dict</span><span class="o">.</span>
<span class="w">    </span><span class="n">log_something</span><span class="o">(</span><span class="n">some_dict</span><span class="o">)</span>
</pre></div>

<p>The above two examples show how to handle object and dictionary cases. What
about functions? The same thing, but we use the double asterisks keyword
argument to that end:</p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="n">my_function</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">:</span>
<span class="w">    </span><span class="nl">try:</span>
<span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kwargs</span><span class="p">['</span><span class="n">some_key</span><span class="p">']</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="nl">None:</span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="p">'</span><span class="n">some_key</span><span class="p">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">explicitly</span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">None</span>
<span class="w">    </span><span class="n">except</span><span class="w"> </span><span class="nl">KeyError:</span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="k">assign</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">default</span>
<span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">it</span><span class="p">'</span><span class="n">s</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">coming</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">caller</span><span class="p">.</span>
<span class="w">        </span><span class="n">log_something</span><span class="p">('</span><span class="n">did</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">receive</span><span class="w"> </span><span class="s">"some_key"</span><span class="p">')</span>
</pre></div>

<h3>
<code>None</code> used only as a valid value</h3>
<p>If you find that your code is littered with the above <code>try/except</code> pattern
simply to differentiate between <code>None</code> flags and <code>None</code> data, then just use
another test value. There's a pattern where a value that falls outside the set
of valid values is inserted as part of the data in a data structure and is
used to control and test special conditions (e.g. boundaries, state, etc.).
Such a value is called a <em>sentinel</em> and it can be used the way <code>None</code> is used
as a signal. It's trivial to create a sentinel in Python.</p>
<div class="code"><pre class="code literal-block">undefined = object()
</pre></div>

<p>The <code>undefined</code> object above is unique and doesn't do much of anything that
might be of interest to a program, it's thus an excellent replacement for
<code>None</code> as a flag. Some caveats apply, more about that after the code.</p>
<p>With function</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">my_function</span><span class="ss">(</span><span class="nv">value</span>,<span class="w"> </span><span class="nb">param1</span><span class="o">=</span><span class="nv">undefined</span>,<span class="w"> </span><span class="nb">param2</span><span class="o">=</span><span class="nv">undefined</span><span class="ss">)</span>:
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">param1</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">undefined</span>:
<span class="w">        </span>#<span class="w"> </span><span class="nv">We</span><span class="w"> </span><span class="nv">know</span><span class="w"> </span><span class="nv">nothing</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">passed</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">it</span>,<span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">even</span><span class="w"> </span><span class="nv">None</span>
<span class="w">        </span><span class="nv">log_something</span><span class="ss">(</span><span class="s1">'param1 was missing'</span><span class="ss">)</span>
<span class="w">        </span><span class="nb">param1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">None</span>


<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">param2</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">undefined</span>:
<span class="w">        </span>#<span class="w"> </span><span class="nv">We</span><span class="w"> </span><span class="nv">got</span><span class="w"> </span><span class="nv">nothing</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="nv">either</span>
<span class="w">        </span><span class="nv">log_something</span><span class="ss">(</span><span class="s1">'param2 was missing'</span><span class="ss">)</span>
<span class="w">        </span><span class="nb">param2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">None</span>
</pre></div>

<p>With dict</p>
<div class="code"><pre class="code literal-block"><span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">some_dict</span>.<span class="nv">get</span><span class="ss">(</span><span class="s1">'some_key'</span>,<span class="w"> </span><span class="nv">undefined</span><span class="ss">)</span>
<span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span>:
<span class="w">    </span><span class="nv">log_something</span><span class="ss">(</span><span class="s2">"'some_key' was set to None"</span><span class="ss">)</span>

<span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">undefined</span>:
<span class="w">    </span>#<span class="w"> </span><span class="nv">We</span><span class="w"> </span><span class="nv">know</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">dict</span><span class="w"> </span><span class="nv">didn</span><span class="s1">'t have '</span><span class="nv">some_key</span><span class="err">'</span>
<span class="w">    </span><span class="nv">log_something</span><span class="ss">(</span><span class="s2">"'some_key' was not set at all"</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">None</span>
</pre></div>

<p>With an object</p>
<div class="code"><pre class="code literal-block"><span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">getattr</span><span class="ss">(</span><span class="nv">obj</span>,<span class="w"> </span><span class="s1">'some_attribute'</span>,<span class="w"> </span><span class="nv">undefined</span><span class="ss">)</span>
<span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span>:
<span class="w">    </span><span class="nv">log_something</span><span class="ss">(</span><span class="s2">"'obj.some_attribute' was set to None"</span><span class="ss">)</span>
<span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">undefined</span>:
<span class="w">    </span>#<span class="w"> </span><span class="nv">We</span><span class="w"> </span><span class="nv">know</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">there</span><span class="err">'s no obj.some_attribute</span>
<span class="w">    </span><span class="nv">log_something</span><span class="ss">(</span><span class="s2">"no 'some_attribute' set on obj"</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">None</span>
</pre></div>

<p>As I mentioned earlier, custom sentinels come with some caveats. First,
they're not keywords like <code>None</code>, so Python doesn't protect them. You can
overwrite your <code>undefined</code> above at any time, anywhere in the module it's
defined, so be careful how you expose and use them. Next, the instance
returned by <code>object()</code> is not a singleton. If you make that call 10 times you
get 10 different objects. Finally, usage of a sentinel is highly
idiosyncratic. A sentinel is specific to the library it's used in and as such
its scope should generally be limited to the library's internals. It shouldn't
"leak" out. External code should only become aware of it, if their purpose is
to extend or supplement the library's API.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-263.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-261.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
