<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 256) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-256.html">
<link rel="prev" href="index-257.html" type="text/html">
<link rel="next" href="index-255.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-i-recover-a-branch-after-its-deletion-in-git/" class="u-url">Can I recover a branch after its deletion in Git?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-i-recover-a-branch-after-its-deletion-in-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:14:37+08:00" itemprop="datePublished" title="2023-02-17 02:14">2023-02-17 02:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I run <code>git branch -d XYZ</code>, is there a way to recover the branch? Is there a
way to go back as if I didn't run the delete branch command?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Yes, you should be able to do <code>git reflog --no-abbrev</code> and find the SHA1 for
the commit at the tip of your deleted branch, then just <code>git checkout [sha]</code>.
And once you're at that commit, you can just <code>git checkout -b [branchname]</code> to
recreate the branch from there.</p>
<hr>
<p><strong>Credit to @Cascabel for this condensed/one-liner version and @Snowcrash for
how to obtain the sha.</strong></p>
<p>If you've just deleted the branch you'll see something like this in your
terminal <code>Deleted branch &lt;your-branch&gt; (was &lt;sha&gt;)</code>. Then just use that
<code>&lt;sha&gt;</code> in this one-liner:</p>
<div class="code"><pre class="code literal-block">git checkout -b &lt;your-branch&gt; &lt;sha&gt;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h3>When your commits are in the <code>reflog</code>
</h3>
<p>Most of the time unreachable commits are in the reflog. So, <strong>the first thing
to try is to look at the reflog</strong> using the command <code>git reflog</code> (which
displays the reflog for <code>HEAD</code>).</p>
<p>Perhaps something easier is to use the command <code>git reflog name-of-my-branch</code>
if the commit was part of a specific and still existing branch. It also works
with a remote e.g. if you had force pushed (though one should use <code>git push
--force-with-lease</code> instead which prevents mistakes and is more recoverable).</p>
<hr>
<h3>When they aren't in the <code>reflog</code>
</h3>
<p>If your commits are not in your reflog (perhaps they were deleted by a 3rd
party tool that doesn't write to the reflog), you may try this command first
to create a file with all the dangling commits</p>
<div class="code"><pre class="code literal-block">git fsck --full --no-reflogs --unreachable --lost-found | grep commit | cut -d\  -f3 | xargs -n 1 git log -n 1 --pretty=oneline &gt; .git/lost-found.txt
</pre></div>

<p>then read the SHA of the missing commit and reset you branch to it.</p>
<p>Frequent users may create the alias <code>git rescue</code> using</p>
<div class="code"><pre class="code literal-block">git config --global alias.rescue '!git fsck --full --no-reflogs --unreachable --lost-found | grep commit | cut -d\  -f3 | xargs -n 1 git log -n 1 --pretty=oneline &gt; .git/lost-found.txt'
</pre></div>

<hr>
<p>Here are some examples showing how to analyze the found commits</p>
<p>Display commit metadata (author, creation date and commit message):</p>
<div class="code"><pre class="code literal-block">git cat-file -p 48540dfa438ad8e442b18e57a5a255c0ecad0560
</pre></div>

<p>Also see diffs:</p>
<div class="code"><pre class="code literal-block">git log -p 48540dfa438ad8e442b18e57a5a255c0ecad0560
</pre></div>

<p>Create a branch on the found commit:</p>
<div class="code"><pre class="code literal-block">git branch commit_rescued 48540dfa438ad8e442b18e57a5a255c0ecad0560
</pre></div>

<hr>
<p>Windows GUIs can easily recover commits (also uncommitted staged files) with
GitExtensions via the menu <code>Repository</code> =&gt; <code>Git maintenance</code> =&gt; <code>Recover lost
objects...</code></p>
<p>Related: Easily recover deleted files that have been staged previously</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/activity-restart-on-rotation-android/" class="u-url">Activity restart on rotation Android</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/activity-restart-on-rotation-android/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:14:08+08:00" itemprop="datePublished" title="2023-02-17 02:14">2023-02-17 02:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In my Android application, when I rotate the device (slide out the keyboard)
then my <code>Activity</code> is restarted (<code>onCreate</code> is called). Now, this is probably
how it's supposed to be, but I do a lot of initial setting up in the
<code>onCreate</code> method, so I need either:</p>
<ol>
<li>Put all the initial setting up in another function so it's not all lost on device rotation or</li>
<li>Make it so <code>onCreate</code> is not called again and the layout just adjusts or</li>
<li>Limit the app to just portrait so that <code>onCreate</code> is not called.</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Using the Application Class</strong></p>
<p>Depending on what you're doing in your initialization you could consider
creating a new class that extends <code>Application</code> and moving your initialization
code into an overridden <code>onCreate</code> method within that class.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyApplicationClass</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Application</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">@</span><span class="n">Override</span>
<span class="w">  </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onCreate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">();</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">TODO</span><span class="w"> </span><span class="n">Put</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">initialization</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">here</span><span class="o">.</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>The <code>onCreate</code> in the application class is only called when the entire
application is created, so the Activity restarts on orientation or keyboard
visibility changes won't trigger it.</p>
<p>It's good practice to expose the instance of this class as a singleton and
exposing the application variables you're initializing using getters and
setters.</p>
<p><em>NOTE: You'll need to specify the name of your new Application class in the
manifest for it to be registered and used:</em></p>
<div class="code"><pre class="code literal-block">&lt;application
    android:name="com.you.yourapp.MyApplicationClass"
</pre></div>

<p><strong>Reacting to Configuration Changes</strong> <em>[UPDATE: this is deprecated since API
13; see the recommended alternative]</em></p>
<p>As a further alternative, you can have your application listen for events that
would cause a restart – like orientation and keyboard visibility changes – and
handle them within your Activity.</p>
<p>Start by adding the <code>android:configChanges</code> node to your Activity's manifest
node</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">&lt;</span><span class="n">activity</span><span class="w"> </span><span class="nl">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="ss">".MyActivity"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">configChanges</span><span class="o">=</span><span class="ss">"orientation|keyboardHidden"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="ss">"@string/app_name"</span><span class="o">&gt;</span>
</pre></div>

<p>or for Android 3.2 (API level 13) and newer:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">activity</span><span class="w"> </span><span class="nl">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="ss">".MyActivity"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">configChanges</span><span class="o">=</span><span class="ss">"keyboardHidden|orientation|screenSize"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="ss">"@string/app_name"</span><span class="o">&gt;</span>
</pre></div>

<p>Then within the Activity override the <code>onConfigurationChanged</code> method and call
<code>setContentView</code> to force the GUI layout to be re-done in the new orientation.</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onConfigurationChanged</span><span class="p">(</span><span class="n">Configuration</span><span class="w"> </span><span class="n">newConfig</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">super</span><span class="p">.</span><span class="n">onConfigurationChanged</span><span class="p">(</span><span class="n">newConfig</span><span class="p">);</span>
<span class="w">  </span><span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">myLayout</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Update for Android 3.2 and higher:</p>
<blockquote>
<p><strong>Caution</strong> : Beginning with Android 3.2 (API level 13), <strong>the "screen size"
also changes</strong> when the device switches between portrait and landscape
orientation. Thus, if you want to prevent runtime restarts due to
orientation change when developing for API level 13 or higher (as declared
by the minSdkVersion and targetSdkVersion attributes), you must include the
<code>"screenSize"</code> value in addition to the <code>"orientation"</code> value. That is, you
must declare <code>android:configChanges="orientation|screenSize"</code>. However, if
your application targets API level 12 or lower, then your activity always
handles this configuration change itself (this configuration change does not
restart your activity, even when running on an Android 3.2 or higher
device).</p>
</blockquote>
<p>From
http://web.archive.org/web/20120805085007/http://developer.android.com/guide/topics/resources/runtime-
changes.html</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-redirect-output-to-a-file-and-stdout/" class="u-url">How to redirect output to a file and stdout</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-redirect-output-to-a-file-and-stdout/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:13:35+08:00" itemprop="datePublished" title="2023-02-17 02:13">2023-02-17 02:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In bash, calling <code>foo</code> would display any output from that command on the
stdout.</p>
<p>Calling <code>foo &gt; output</code> would redirect any output from that command to the file
specified (in this case 'output').</p>
<p>Is there a way to redirect output to a file <em>and</em> have it display on stdout?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The command you want is named <strong><code>tee</code></strong> :</p>
<div class="code"><pre class="code literal-block">foo | tee output.file
</pre></div>

<p>For example, if you only care about stdout:</p>
<div class="code"><pre class="code literal-block">ls -a | tee output.file
</pre></div>

<p>If you want to include stderr, do:</p>
<div class="code"><pre class="code literal-block">program [arguments...] 2&gt;&amp;1 | tee outfile
</pre></div>

<p><code>2&gt;&amp;1</code> redirects channel 2 (stderr/standard error) into channel 1
(stdout/standard output), such that both is written as stdout. It is also
directed to the given output file as of the <code>tee</code> command.</p>
<p>Furthermore, if you want to <em>append</em> to the log file, use <code>tee -a</code> as:</p>
<div class="code"><pre class="code literal-block">program [arguments...] 2&gt;&amp;1 | tee -a outfile
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>program<span class="w"> </span><span class="o">[</span>arguments...<span class="o">]</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>outfile
</pre></div>

<p><code>2&gt;&amp;1</code> dumps the stderr and stdout streams. <code>tee outfile</code> takes the stream it
gets and writes it to the screen and to the file "outfile".</p>
<p>This is probably what most people are looking for. The likely situation is
some program or script is working hard for a long time and producing a lot of
output. The user wants to check it periodically for progress, but also wants
the output written to a file.</p>
<p>The problem (especially when mixing stdout and stderr streams) is that there
is reliance on the streams being flushed by the program. If, for example, all
the writes to stdout are <em>not</em> flushed, but all the writes to stderr <em>are</em>
flushed, then they'll end up out of chronological order in the output file and
on the screen.</p>
<p>It's also bad if the program only outputs 1 or 2 lines every few minutes to
report progress. In such a case, if the output was not flushed by the program,
the user wouldn't even see any output on the screen for hours, because none of
it would get pushed through the pipe for hours.</p>
<p>Update: The program <code>unbuffer</code>, part of the <code>expect</code> package, will solve the
buffering problem. This will cause stdout and stderr to write to the screen
and file immediately and keep them in sync when being combined and redirected
to <code>tee</code>. E.g.:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>unbuffer<span class="w"> </span>program<span class="w"> </span><span class="o">[</span>arguments...<span class="o">]</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>outfile
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-257.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-255.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
