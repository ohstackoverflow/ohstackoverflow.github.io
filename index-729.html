<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 729) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-729.html">
<link rel="prev" href="index-730.html" type="text/html">
<link rel="next" href="index-728.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-define-hash-tables-in-bash/" class="u-url">How to define hash tables in Bash?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-define-hash-tables-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:25:25+08:00" itemprop="datePublished" title="2023-02-17 14:25">2023-02-17 14:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the equivalent of Python dictionaries but in Bash (should work across
OS X and Linux).</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Bash 4</h2>
<p>Bash 4 natively supports this feature. Make sure your script's hashbang is
<code>#!/usr/bin/env bash</code> or <code>#!/bin/bash</code> so you don't end up using <code>sh</code>. Make
sure you're either executing your script directly, or execute <code>script</code> with
<code>bash script</code>. (Not actually executing a Bash script with Bash <em>does</em> happen,
and will be <em>really</em> confusing!)</p>
<p>You declare an associative array by doing:</p>
<div class="code"><pre class="code literal-block">declare -A animals
</pre></div>

<p>You can fill it up with elements using the normal array assignment operator.
For example, if you want to have a map of <code>animal[sound(key)] =
animal(value)</code>:</p>
<div class="code"><pre class="code literal-block">animals=( ["moo"]="cow" ["woof"]="dog")
</pre></div>

<p>Or declare and instantiate in one line:</p>
<div class="code"><pre class="code literal-block">declare -A animals=( ["moo"]="cow" ["woof"]="dog")
</pre></div>

<p>Then use them just like normal arrays. Use</p>
<ul>
<li>
<p><code>animals['key']='value'</code> to set value</p>
</li>
<li>
<p><code>"${animals[@]}"</code> to expand the values</p>
</li>
<li>
<p><code>"${!animals[@]}"</code> (notice the <code>!</code>) to expand the keys</p>
</li>
</ul>
<p>Don't forget to quote them:</p>
<div class="code"><pre class="code literal-block"><span class="n">echo</span><span class="w"> </span><span class="ss">"${animals[moo]}"</span>
<span class="k">for</span><span class="w"> </span><span class="n">sound</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="ss">"${!animals[@]}"</span><span class="p">;</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">"$sound - ${animals[$sound]}"</span><span class="p">;</span><span class="w"> </span><span class="n">done</span>
</pre></div>

<h2>Bash 3</h2>
<p>Before bash 4, you don't have associative arrays. <strong>Do not use<code>eval</code> to
emulate them</strong>. Avoid <code>eval</code> like the plague, because it <em>is</em> the plague of
shell scripting. The most important reason is that <code>eval</code> treats your data as
executable code (there are many other reasons too).</p>
<p><em>First and foremost</em> : Consider upgrading to bash 4. This will make the whole
process much easier for you.</p>
<p>If there's a reason you can't upgrade, <code>declare</code> is a far safer option. It
does not evaluate data as bash code like <code>eval</code> does, and as such does not
allow arbitrary code injection quite so easily.</p>
<p>Let's prepare the answer by introducing the concepts:</p>
<p>First, indirection.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">animals_moo</span><span class="o">=</span>cow<span class="p">;</span><span class="w"> </span><span class="nv">sound</span><span class="o">=</span>moo<span class="p">;</span><span class="w"> </span><span class="nv">i</span><span class="o">=</span><span class="s2">"animals_</span><span class="nv">$sound</span><span class="s2">"</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="p">!i</span><span class="si">}</span><span class="s2">"</span>
cow
</pre></div>

<p>Secondly, <code>declare</code>:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">sound</span><span class="o">=</span>moo<span class="p">;</span><span class="w"> </span><span class="nv">animal</span><span class="o">=</span>cow<span class="p">;</span><span class="w"> </span><span class="nb">declare</span><span class="w"> </span><span class="s2">"animals_</span><span class="nv">$sound</span><span class="s2">=</span><span class="nv">$animal</span><span class="s2">"</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="nv">$animals_moo</span><span class="s2">"</span>
cow
</pre></div>

<p>Bring them together:</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span>Set<span class="w"> </span>a<span class="w"> </span>value:
declare<span class="w"> </span>"array_<span class="nv">$index</span>=<span class="nv">$value</span>"

#<span class="w"> </span>Get<span class="w"> </span>a<span class="w"> </span>value:
arrayGet()<span class="w"> </span>{<span class="w"> </span>
<span class="w">    </span>local<span class="w"> </span>array=$1<span class="w"> </span>index=$2
<span class="w">    </span>local<span class="w"> </span>i="<span class="cp">${</span><span class="n">array</span><span class="cp">}</span>_<span class="nv">$index</span>"
<span class="w">    </span>printf<span class="w"> </span>'%s'<span class="w"> </span>"<span class="cp">${</span><span class="err">!</span><span class="n">i</span><span class="cp">}</span>"
}
</pre></div>

<p>Let's use it:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">sound</span><span class="o">=</span>moo
$<span class="w"> </span><span class="nv">animal</span><span class="o">=</span>cow
$<span class="w"> </span><span class="nb">declare</span><span class="w"> </span><span class="s2">"animals_</span><span class="nv">$sound</span><span class="s2">=</span><span class="nv">$animal</span><span class="s2">"</span>
$<span class="w"> </span>arrayGet<span class="w"> </span>animals<span class="w"> </span><span class="s2">"</span><span class="nv">$sound</span><span class="s2">"</span>
cow
</pre></div>

<p>Note: <code>declare</code> cannot be put in a function. Any use of <code>declare</code> inside a
bash function turns the variable it creates <em>local</em> to the scope of that
function, meaning we can't access or modify global arrays with it. (In bash 4
you can use <code>declare -g</code> to declare global variables - but in bash 4, you can
use associative arrays in the first place, avoiding this workaround.)</p>
<p>Summary:</p>
<ul>
<li>Upgrade to bash 4 and use <code>declare -A</code> for associative arrays.</li>
<li>Use the <code>declare</code> option if you can't upgrade.</li>
<li>Consider using <code>awk</code> instead and avoid the issue altogether.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>There's parameter substitution, though it may be un-PC as well ...like
indirection.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="c1"># Array pretending to be a Pythonic dictionary</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="nv">ARRAY</span><span class="o">=(</span><span class="w"> </span><span class="s2">"cow:moo"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="s2">"dinosaur:roar"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="s2">"bird:chirp"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="s2">"bash:rock"</span><span class="w"> </span><span class="o">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><span class="k">for</span><span class="w"> </span>animal<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">ARRAY</span><span class="p">[@]</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">KEY</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">animal</span><span class="p">%%:*</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">VALUE</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">animal</span><span class="p">##*:</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s likes to %s.\n"</span><span class="w"> </span><span class="s2">"</span><span class="nv">$KEY</span><span class="s2">"</span><span class="w"> </span><span class="s2">"</span><span class="nv">$VALUE</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><span class="k">done</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-define-hash-tables-in-bash/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s is an extinct animal which likes to %s\n"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">ARRAY</span><span class="p">[1]%%:*</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">ARRAY</span><span class="p">[1]##*:</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
</table></div>
<p>The BASH 4 way is better of course, but if you need a hack ...only a hack will
do. You could search the array/hash with similar techniques.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/git-stash-apply-version/" class="u-url">git stash apply version</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/git-stash-apply-version/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:24:43+08:00" itemprop="datePublished" title="2023-02-17 14:24">2023-02-17 14:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have 2 branches: master | design</p>
<p>Working in design I did a stash and switched to master, made some adjustments.
Switched back to design and did a <code>stash apply</code> only to lose all my changes in
the design branch.</p>
<p>I am hoping all my work is within a stash as I have not cleared or removed
these.</p>
<p>If I do a stash list I get 4 results:</p>
<div class="code"><pre class="code literal-block">stash@{0}: WIP on design: f2c0c72... Adjust Password Recover Email
stash@{1}: WIP on design: f2c0c72... Adjust Password Recover Email
stash@{2}: WIP on design: eb65635... Email Adjust
stash@{3}: WIP on design: eb65635... Email Adjust
</pre></div>

<p>If I try <code>git stash apply f2c0c72</code> I am getting an error:</p>
<div class="code"><pre class="code literal-block"><span class="n">fatal</span><span class="o">:</span><span class="w"> </span><span class="n">Needed</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">revision</span>
<span class="n">f2c0c72</span><span class="o">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="n">stashed</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">found</span>
</pre></div>

<p>How can I apply a specific stash?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The keys into the stash are actually the <code>stash@{n}</code> items on the left. So
try:</p>
<div class="code"><pre class="code literal-block">git stash apply stash@{0}
</pre></div>

<p>(note that in some shells you need to quote <code>"stash@{0}"</code>, like zsh, fish and
powershell).</p>
<p>Since version 2.11, it's pretty easy, you can use the N stack number instead
of using <code>stash@{n}</code>. So now instead of using:</p>
<div class="code"><pre class="code literal-block">git stash apply "stash@{n}"
</pre></div>

<p>You can type:</p>
<div class="code"><pre class="code literal-block">git stash apply n
</pre></div>

<p><strong>To get list of stashes:</strong></p>
<div class="code"><pre class="code literal-block">git stash list
</pre></div>

<p>In fact <code>stash@{0}</code> is a revision in git that you can switch to... but <code>git
stash apply ...</code> should figure out how to DTRT to apply it to your current
location.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To apply a stash and remove it from the stash list, run:</p>
<div class="code"><pre class="code literal-block">git stash pop stash@{n}
</pre></div>

<p>To apply a stash and keep it in the stash cache, run:</p>
<div class="code"><pre class="code literal-block">git stash apply stash@{n}
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-view-events-fired-on-an-element-in-chrome-devtools/" class="u-url">How do I view events fired on an element in Chrome DevTools?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-view-events-fired-on-an-element-in-chrome-devtools/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:24:18+08:00" itemprop="datePublished" title="2023-02-17 14:24">2023-02-17 14:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a customizable form element on a page from a library. I want to see
what javascript events are fired when I interact with it because I am trying
to find out which event handler to use.</p>
<p>How do I do that using Chrome Web Developer?</p>
<p><br><br></p>
<h2>Answer</h2>
<ul>
<li>Hit <code>F12</code> to open Dev Tools</li>
<li>Click the Sources tab</li>
<li>On right-hand side, scroll down to "Event Listener Breakpoints", and expand tree</li>
<li>Click on the events you want to listen for. </li>
<li>Interact with the target element, if they fire you will get a break point in the debugger</li>
</ul>
<p>Similarly, you can right click on the target element -&gt; select "inspect
element" Scroll down on the right side of the dev frame, at the bottom is
'event listeners'. Expand the tree to see what events are attached to the
element. Not sure if this works for events that are handled through bubbling
(I'm guessing not)</p>
<p><br></p>
<h3>Suggest</h3>
<ul>
<li>Hit <code>F12</code> to open Dev Tools</li>
<li>Click the Sources tab</li>
<li>On right-hand side, scroll down to "Event Listener Breakpoints", and expand tree</li>
<li>Click on the events you want to listen for. </li>
<li>Interact with the target element, if they fire you will get a break point in the debugger</li>
</ul>
<p>Similarly, you can right click on the target element -&gt; select "inspect
element" Scroll down on the right side of the dev frame, at the bottom is
'event listeners'. Expand the tree to see what events are attached to the
element. Not sure if this works for events that are handled through bubbling
(I'm guessing not)</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-730.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-728.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
