<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 255) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-255.html">
<link rel="prev" href="index-256.html" type="text/html">
<link rel="next" href="index-254.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-redirect-output-to-a-file-and-stdout/" class="u-url">How to redirect output to a file and stdout</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-redirect-output-to-a-file-and-stdout/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:13:35+08:00" itemprop="datePublished" title="2023-02-17 02:13">2023-02-17 02:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In bash, calling <code>foo</code> would display any output from that command on the
stdout.</p>
<p>Calling <code>foo &gt; output</code> would redirect any output from that command to the file
specified (in this case 'output').</p>
<p>Is there a way to redirect output to a file <em>and</em> have it display on stdout?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The command you want is named <strong><code>tee</code></strong> :</p>
<div class="code"><pre class="code literal-block">foo | tee output.file
</pre></div>

<p>For example, if you only care about stdout:</p>
<div class="code"><pre class="code literal-block">ls -a | tee output.file
</pre></div>

<p>If you want to include stderr, do:</p>
<div class="code"><pre class="code literal-block">program [arguments...] 2&gt;&amp;1 | tee outfile
</pre></div>

<p><code>2&gt;&amp;1</code> redirects channel 2 (stderr/standard error) into channel 1
(stdout/standard output), such that both is written as stdout. It is also
directed to the given output file as of the <code>tee</code> command.</p>
<p>Furthermore, if you want to <em>append</em> to the log file, use <code>tee -a</code> as:</p>
<div class="code"><pre class="code literal-block">program [arguments...] 2&gt;&amp;1 | tee -a outfile
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>program<span class="w"> </span><span class="o">[</span>arguments...<span class="o">]</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>outfile
</pre></div>

<p><code>2&gt;&amp;1</code> dumps the stderr and stdout streams. <code>tee outfile</code> takes the stream it
gets and writes it to the screen and to the file "outfile".</p>
<p>This is probably what most people are looking for. The likely situation is
some program or script is working hard for a long time and producing a lot of
output. The user wants to check it periodically for progress, but also wants
the output written to a file.</p>
<p>The problem (especially when mixing stdout and stderr streams) is that there
is reliance on the streams being flushed by the program. If, for example, all
the writes to stdout are <em>not</em> flushed, but all the writes to stderr <em>are</em>
flushed, then they'll end up out of chronological order in the output file and
on the screen.</p>
<p>It's also bad if the program only outputs 1 or 2 lines every few minutes to
report progress. In such a case, if the output was not flushed by the program,
the user wouldn't even see any output on the screen for hours, because none of
it would get pushed through the pipe for hours.</p>
<p>Update: The program <code>unbuffer</code>, part of the <code>expect</code> package, will solve the
buffering problem. This will cause stdout and stderr to write to the screen
and file immediately and keep them in sync when being combined and redirected
to <code>tee</code>. E.g.:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>unbuffer<span class="w"> </span>program<span class="w"> </span><span class="o">[</span>arguments...<span class="o">]</span><span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>outfile
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/path-combine-for-urls/" class="u-url">Path.Combine for URLs?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/path-combine-for-urls/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:13:06+08:00" itemprop="datePublished" title="2023-02-17 02:13">2023-02-17 02:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Path.Combine is handy, but is there a similar function in the .NET framework
for URLs?</p>
<p>I'm looking for syntax like this:</p>
<div class="code"><pre class="code literal-block">Url.Combine("http://MyUrl.com/", "/Images/Image.jpg")
</pre></div>

<p>which would return:</p>
<p><code>"http://MyUrl.com/Images/Image.jpg"</code></p>
<p><br><br></p>
<h2>Answer</h2>
<p>There is a Todd Menier's comment above that Flurl includes a <code>Url.Combine</code>.</p>
<p>More details:</p>
<blockquote>
<p>Url.Combine is basically a Path.Combine for URLs, ensuring one and only one
separator character between parts:</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Url</span><span class="o">.</span><span class="n">Combine</span><span class="p">(</span>
<span class="w">    </span><span class="s2">"http://MyUrl.com/"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"/too/"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/many/"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/slashes/"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"too"</span><span class="p">,</span><span class="w"> </span><span class="s2">"few?"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"x=1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"y=2"</span>
<span class="o">//</span><span class="w"> </span><span class="n">result</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.MyUrl.com/too/many/slashes/too/few?x=1&amp;y=2"</span>
</pre></div>

<p>Get Flurl.Http on NuGet:</p>
<p>PM&gt; Install-Package Flurl.Http</p>
<p>Or get the stand-alone URL builder without the HTTP features:</p>
<p>PM&gt; Install-Package Flurl</p>
<p><br></p>
<h3>Suggest</h3>
<p>This may be a suitably simple solution:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">Combine</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">uri1</span>,<span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">uri2</span><span class="ss">)</span>
{
<span class="w">    </span><span class="nv">uri1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">uri1</span>.<span class="nv">TrimEnd</span><span class="ss">(</span><span class="s1">'/'</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">uri2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">uri2</span>.<span class="nv">TrimStart</span><span class="ss">(</span><span class="s1">'/'</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">string</span>.<span class="nv">Format</span><span class="ss">(</span><span class="s2">"{0}/{1}"</span>,<span class="w"> </span><span class="nv">uri1</span>,<span class="w"> </span><span class="nv">uri2</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/turning-off-auto-indent-when-pasting-text-into-vim/" class="u-url">Turning off auto indent when pasting text into vim</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/turning-off-auto-indent-when-pasting-text-into-vim/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:12:39+08:00" itemprop="datePublished" title="2023-02-17 02:12">2023-02-17 02:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am making the effort to learn Vim.</p>
<p>When I paste code into my document from the clipboard, I get extra spaces at
the start of each new line:</p>
<div class="code"><pre class="code literal-block">line
  line
    line
</pre></div>

<p>I know you can turn off auto indent but I can't get it to work because I have
some other settings conflicting or something (which look pretty obvious in my
.vimrc but don't seem to matter when I take them out).</p>
<p>How do I turn off auto indenting when I paste code but still have vim auto
indent when I am writing code? Here is my <code>.vimrc</code> file:</p>
<div class="code"><pre class="code literal-block">set expandtab  
set tabstop=2  
set shiftwidth=2  
set autoindent  
set smartindent  
set bg=dark  
set nowrap
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>Update:</strong> Better answer here: https://stackoverflow.com/a/38258720/62202</p>
<p>To turn off autoindent when you paste code, there's a special "paste" mode.</p>
<p>Type</p>
<div class="code"><pre class="code literal-block">:set paste
</pre></div>

<p>Then paste your code. Note that the text in the tooltip now says <code>-- INSERT
(paste) --</code>.</p>
<p>After you pasted your code, turn off the paste-mode, so that auto-indenting
when you type works correctly again.</p>
<div class="code"><pre class="code literal-block">:set nopaste
</pre></div>

<p>However, I always found that cumbersome. That's why I map <code>&lt;F3&gt;</code> such that it
can switch between paste and nopaste modes <em>while editing the text!</em> I add
this to <code>.vimrc</code></p>
<div class="code"><pre class="code literal-block">set pastetoggle=&lt;F3&gt;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>To avoid undesired effects while pasting, there is an option that needs to be
set:</p>
<div class="code"><pre class="code literal-block">set paste
</pre></div>

<p>A useful command to have in your .vimrc is <code>set pastetoggle=&lt;F10&gt;</code> or some
other button, to easily toggle between paste and nopaste.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-256.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-254.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
