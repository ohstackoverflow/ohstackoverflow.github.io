<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 600) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-600.html">
<link rel="prev" href="index-601.html" type="text/html">
<link rel="next" href="index-599.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-convert-a-comma-separated-string-to-an-array/" class="u-url">How can I convert a comma-separated string to an array?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-convert-a-comma-separated-string-to-an-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:01:08+08:00" itemprop="datePublished" title="2023-02-17 11:01">2023-02-17 11:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a comma-separated string that I want to convert into an array, so I can
loop through it.</p>
<p>Is there anything built-in to do this?</p>
<p>For example, I have this string</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="nb">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"January,February,March,April,May,June,July,August,September,October,November,December"</span><span class="p">;</span>
</pre></div>

<p>Now I want to split this by the comma, and then store it in an array.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">);</span>
</pre></div>

<p>MDN reference, mostly helpful for the possibly unexpected behavior of the
<code>limit</code> parameter. (Hint: <code>"a,b,c".split(",", 2)</code> comes out to <code>["a", "b"]</code>,
not <code>["a", "b,c"]</code>.)</p>
<p><br></p>
<h3>Suggest</h3>
<p>Watch out if you are aiming at integers, like 1,2,3,4,5. If you intend to use
the elements of your array as integers and not as strings after splitting the
string, consider converting them into such.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="nb">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1,2,3,4,5,6"</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">();</span>
<span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">strings</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>
<span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">);</span>
</pre></div>

<p>Adding a loop like this,</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">temp</span><span class="o">[</span><span class="n">a</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">temp</span><span class="o">[</span><span class="n">a</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Explicitly</span><span class="w"> </span><span class="k">include</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">Álvaro</span><span class="err">'</span><span class="n">s</span><span class="w"> </span><span class="n">comment</span>
<span class="err">}</span>
</pre></div>

<p>will return an array containing integers, and not strings.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/using-python-3-in-virtualenv/" class="u-url">Using Python 3 in virtualenv</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/using-python-3-in-virtualenv/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:00:39+08:00" itemprop="datePublished" title="2023-02-17 11:00">2023-02-17 11:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Using virtualenv, I run my projects with the default version of Python (2.7).
On one project, I need to use Python 3.4.</p>
<p>I used <code>brew install python3</code> to install it on my Mac. Now, how do I create a
virtualenv that uses the new version?</p>
<p>e.g. sudo virtualenv envPython3</p>
<p>If I try:</p>
<div class="code"><pre class="code literal-block">virtualenv -p python3 test
</pre></div>

<p>I get:</p>
<div class="code"><pre class="code literal-block"><span class="n">Running</span> <span class="n">virtualenv</span> <span class="k">with</span> <span class="n">interpreter</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span>
<span class="n">Using</span> <span class="n">base</span> <span class="n">prefix</span> <span class="s1">'/usr/local/Cellar/python3/3.4.0_1/Frameworks/Python.framework/Versions/3.4'</span>
<span class="n">New</span> <span class="n">python</span> <span class="n">executable</span> <span class="ow">in</span> <span class="n">test</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span><span class="mf">.4</span>
<span class="n">Also</span> <span class="n">creating</span> <span class="n">executable</span> <span class="ow">in</span> <span class="n">test</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python</span>
<span class="n">Failed</span> <span class="n">to</span> <span class="kn">import</span> <span class="nn">the</span> <span class="n">site</span> <span class="n">module</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"/Users/user/Documents/workspace/test/test/bin/../lib/python3.4/site.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">67</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">import</span> <span class="nn">os</span>
  <span class="n">File</span> <span class="s2">"/Users/user/Documents/workspace/test/test/bin/../lib/python3.4/os.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">634</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">from</span> <span class="nn">_collections_abc</span> <span class="kn">import</span> <span class="n">MutableMapping</span>
<span class="ne">ImportError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">'_collections_abc'</span>
<span class="n">ERROR</span><span class="p">:</span> <span class="n">The</span> <span class="n">executable</span> <span class="n">test</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">python3</span><span class="mf">.4</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">functioning</span>
<span class="n">ERROR</span><span class="p">:</span> <span class="n">It</span> <span class="n">thinks</span> <span class="n">sys</span><span class="o">.</span><span class="n">prefix</span> <span class="ow">is</span> <span class="s1">'/Users/user/Documents/workspace/test'</span> <span class="p">(</span><span class="n">should</span> <span class="n">be</span> <span class="s1">'/Users/user/Documents/workspace/test/test'</span><span class="p">)</span>
<span class="n">ERROR</span><span class="p">:</span> <span class="n">virtualenv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">compatible</span> <span class="k">with</span> <span class="n">this</span> <span class="n">system</span> <span class="ow">or</span> <span class="n">executable</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>simply run</p>
<div class="code"><pre class="code literal-block">virtualenv -p python3 envname
</pre></div>

<p>Update after OP's edit:</p>
<p>There was a bug in the OP's version of virtualenv, as described here. The
problem was fixed by running:</p>
<div class="code"><pre class="code literal-block">pip install --upgrade virtualenv
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Python 3 has a built-in support for virtual environments - venv. It might be
better to use that instead. Referring to the docs:</p>
<blockquote>
<p>Creation of virtual environments is done by executing the pyvenv script:</p>
<p><code>pyvenv /path/to/new/virtual/environment</code></p>
</blockquote>
<p><strong>Update for Python 3.6 and newer:</strong></p>
<p>As pawciobiel correctly comments, <code>pyvenv</code> is deprecated as of Python 3.6 and
the new way is:</p>
<div class="code"><pre class="code literal-block">python3 -m venv /path/to/new/virtual/environment
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/making-a-mocked-method-return-an-argument-that-was-passed-to-it/" class="u-url">Making a mocked method return an argument that was passed to it</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/making-a-mocked-method-return-an-argument-that-was-passed-to-it/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:00:04+08:00" itemprop="datePublished" title="2023-02-17 11:00">2023-02-17 11:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Consider a method signature like:</p>
<div class="code"><pre class="code literal-block">public String myFunction(String abc);
</pre></div>

<p>Can Mockito help return the same string that the method received?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Since Mockito 1.9.5+ and Java 8+</h3>
<p>You can use a lambda expression, like:</p>
<div class="code"><pre class="code literal-block"><span class="kr">when</span><span class="p">(</span><span class="n">myMock</span><span class="p">.</span><span class="n">myFunction</span><span class="p">(</span><span class="n">anyString</span><span class="p">())).</span><span class="n">thenAnswer</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">getArguments</span><span class="p">()[</span><span class="mi">0</span><span class="p">]);</span>
</pre></div>

<blockquote>
<p>Where <code>i</code> is an instance of <code>InvocationOnMock</code>.</p>
</blockquote>
<h3>For older versions</h3>
<p>You can create an Answer in Mockito. Let's assume, we have an interface named
MyInterface with a method myFunction.</p>
<div class="code"><pre class="code literal-block">public interface MyInterface {
    public String myFunction(String abc);
}
</pre></div>

<p>Here is the test method with a Mockito answer:</p>
<div class="code"><pre class="code literal-block"><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">testMyFunction</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="k">Exception</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">MyInterface</span><span class="w"> </span><span class="n">mock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mock</span><span class="p">(</span><span class="n">MyInterface</span><span class="p">.</span><span class="k">class</span><span class="p">);</span>
<span class="w">    </span><span class="k">when</span><span class="p">(</span><span class="n">mock</span><span class="p">.</span><span class="n">myFunction</span><span class="p">(</span><span class="n">anyString</span><span class="p">())).</span><span class="n">thenAnswer</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Answer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">answer</span><span class="p">(</span><span class="n">InvocationOnMock</span><span class="w"> </span><span class="n">invocation</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">Object</span><span class="err">[]</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">invocation</span><span class="p">.</span><span class="n">getArguments</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">args</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span><span class="p">);</span>

<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="ss">"someString"</span><span class="p">,</span><span class="n">mock</span><span class="p">.</span><span class="n">myFunction</span><span class="p">(</span><span class="ss">"someString"</span><span class="p">));</span>
<span class="w">    </span><span class="n">assertEquals</span><span class="p">(</span><span class="ss">"anotherString"</span><span class="p">,</span><span class="n">mock</span><span class="p">.</span><span class="n">myFunction</span><span class="p">(</span><span class="ss">"anotherString"</span><span class="p">));</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you have Mockito 1.9.5 or higher, there is a new static method that can
make the <code>Answer</code> object for you. You need to write something like</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="n">mockito</span><span class="o">.</span><span class="n">Mockito</span><span class="o">.</span><span class="n">when</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="n">mockito</span><span class="o">.</span><span class="n">AdditionalAnswers</span><span class="o">.</span><span class="n">returnsFirstArg</span><span class="p">;</span>

<span class="n">when</span><span class="p">(</span><span class="n">myMock</span><span class="o">.</span><span class="n">myFunction</span><span class="p">(</span><span class="n">anyString</span><span class="p">()))</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">returnsFirstArg</span><span class="p">());</span>
</pre></div>

<p>or alternatively</p>
<div class="code"><pre class="code literal-block">doAnswer(returnsFirstArg()).when(myMock).myFunction(anyString());
</pre></div>

<p>Note that the <code>returnsFirstArg()</code> method is static in the <code>AdditionalAnswers</code>
class, which is new to Mockito 1.9.5; so you'll need the right static import.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-601.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-599.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
