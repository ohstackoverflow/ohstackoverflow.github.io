<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 895) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-895.html">
<link rel="prev" href="index-896.html" type="text/html">
<link rel="next" href="index-894.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-a-normal-git-repository-to-a-bare-one/" class="u-url">How to convert a normal Git repository to a bare one?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-a-normal-git-repository-to-a-bare-one/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:52:24+08:00" itemprop="datePublished" title="2023-02-17 18:52">2023-02-17 18:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I convert a 'normal' Git repository to a bare one?</p>
<p>The main difference seems to be:</p>
<ul>
<li>
<p>in the normal Git repository, you have a <code>.git</code> folder inside the repository containing all relevant data and all other files making up your working copy</p>
</li>
<li>
<p>in a bare Git repository, there is no working copy and the folder (let's call it <code>repo.git</code>) contains the actual repository data</p>
</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>In short: replace the contents of <code>repo</code> with the contents of <code>repo/.git</code>,
then tell the repository that it is now a bare repository.</p>
<p>To do this, execute the following commands:</p>
<div class="code"><pre class="code literal-block"><span class="nv">cd</span><span class="w"> </span><span class="nv">repo</span>
<span class="nv">mv</span><span class="w"> </span>.<span class="nv">git</span><span class="w"> </span>..<span class="o">/</span><span class="nv">repo</span>.<span class="nv">git</span><span class="w"> </span>#<span class="w"> </span><span class="nv">renaming</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">clarity</span>
<span class="nv">cd</span><span class="w"> </span>..
<span class="nv">rm</span><span class="w"> </span><span class="o">-</span><span class="nv">fr</span><span class="w"> </span><span class="nv">repo</span>
<span class="nv">cd</span><span class="w"> </span><span class="nv">repo</span>.<span class="nv">git</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">config</span><span class="w"> </span><span class="o">--</span><span class="nv">bool</span><span class="w"> </span><span class="nv">core</span>.<span class="nv">bare</span><span class="w"> </span><span class="nv">true</span>
</pre></div>

<p>Note that this is different from doing a <code>git clone --bare</code> to a new location
(see below).</p>
<p><br></p>
<h3>Suggest</h3>
<p>Your method looks like it would work; the file structure of a bare repository
is just what is inside the .git directory. But I don't know if any of the
files are actually changed, so if that fails, you can just do</p>
<div class="code"><pre class="code literal-block">git clone --bare /path/to/repo
</pre></div>

<p>You'll probably need to do it in a different directory to avoid a name
conflict, and then you can just move it back to where you want. And you may
need to change the config file to point to wherever your origin repo is.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-best-way-to-determine-the-location-of-the-current-powershell-script/" class="u-url">What's the best way to determine the location of the current PowerShell script?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-best-way-to-determine-the-location-of-the-current-powershell-script/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:51:56+08:00" itemprop="datePublished" title="2023-02-17 18:51">2023-02-17 18:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Whenever I need to reference a common module or script, I like to use paths
relative to the current script file. That way, my script can always find other
scripts in the library.</p>
<p>So, what is the best, standard way of determining the directory of the current
script? Currently, I'm doing:</p>
<div class="code"><pre class="code literal-block">$MyDir = [System.IO.Path]::GetDirectoryName($myInvocation.MyCommand.Definition)
</pre></div>

<p>I know in modules (.psm1) you can use <code>$PSScriptRoot</code> to get this information,
but that doesn't get set in regular scripts (i.e. .ps1 files).</p>
<p><strong>What's the canonical way to get the current PowerShell script file's
location?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>PowerShell 3+</strong></p>
<div class="code"><pre class="code literal-block"><span class="c1"># This is an automatic variable set to the current file's/module's directory</span>
<span class="o">$</span><span class="n">PSScriptRoot</span>
</pre></div>

<p><strong>PowerShell 2</strong></p>
<p>Prior to PowerShell 3, there was not a better way than querying the
<code>MyInvocation.MyCommand.Definition</code> property for general scripts. I had the
following line at the top of essentially every PowerShell script I had:</p>
<div class="code"><pre class="code literal-block">$scriptPath = split-path -parent $MyInvocation.MyCommand.Definition
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you are creating a V2 Module, you can use an automatic variable called
<code>$PSScriptRoot</code>.</p>
<p>From PS &gt; Help automatic_variable</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="n">PSScriptRoot</span>
<span class="w">       </span><span class="n">Contains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">executed</span><span class="o">.</span>
<span class="w">       </span><span class="n">This</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">scripts</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">other</span>
<span class="w">       </span><span class="n">resources</span><span class="o">.</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors/" class="u-url">Programmatically Lighten or Darken a hex color (or rgb, and blend colors)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:51:27+08:00" itemprop="datePublished" title="2023-02-17 18:51">2023-02-17 18:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Here is a function I was working on to programmatically lighten or darken a
hex color by a specific amount. Just pass in a string like <code>"3F6D2A"</code> for the
color (<code>col</code>) and a base10 integer (<code>amt</code>) for the amount to lighten or
darken. To darken, pass in a negative number (i.e. <code>-20</code>).</p>
<p>The reason for me to do this was because of all the solutions I found, thus
far, they seemed to over-complicate the issue. And I had a feeling it could be
done with just a couple lines of code. Please let me know if you find any
problems, or have any adjustments to make that would speed it up.</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">LightenDarkenColor</span><span class="ss">(</span><span class="nv">col</span>,<span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">parseInt</span><span class="ss">(</span><span class="nv">col</span>,<span class="w"> </span><span class="mi">16</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ss">(((</span><span class="nv">col</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">0</span><span class="nv">x0000FF</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">((((</span><span class="nv">col</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="ss">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">0</span><span class="nv">x00FF</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="ss">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">(((</span><span class="nv">col</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">16</span><span class="ss">))</span>.<span class="nv">toString</span><span class="ss">(</span><span class="mi">16</span><span class="ss">)</span><span class="c1">;</span>
}


<span class="o">//</span><span class="w"> </span><span class="nv">TEST</span>
<span class="nv">console</span>.<span class="nv">log</span><span class="ss">(</span><span class="w"> </span><span class="nv">LightenDarkenColor</span><span class="ss">(</span><span class="s2">"3F6D2A"</span>,<span class="mi">40</span><span class="ss">)</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>For Development use here is an easier to read version:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="w"> </span><span class="n">amt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">);</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x00FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x0000FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">newColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">16</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">newColor</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
<span class="p">}</span>


<span class="o">//</span><span class="w"> </span><span class="n">TEST</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="s2">"3F6D2A"</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">40</span><span class="p">));</span>
</pre></div>

<p>And finally a version to handle colors that may (or may not) have the "#" in
the beginning. Plus adjusting for improper color values:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="n">amt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">usePound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">col</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"#"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">usePound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="mi">16</span><span class="p">);</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x00FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x0000FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="p">(</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">usePound</span><span class="err">?</span><span class="s2">"#"</span><span class="p">:</span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>OK, so now it's not just a couple of lines, but it seems far simpler and if
you're not using the "#" and don't need to check for colors out of range, it
is only a couple of lines.</p>
<p>If not using the "#", you can just add it in code like:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3F6D2A"</span><span class="p">;</span>
<span class="n">myColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="n">myColor</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
<span class="n">thePlaceTheColorIsUsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="s2">"#"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">myColor</span><span class="p">);</span>
</pre></div>

<p>I guess my main question is, am I correct here? Does this not encompass most
(normal) situations? And if so, what is the fastest and smallest way to do
this? I want to use in animations and in a small environment, so speed is the
first most important factor here, size second, accuracy third, readability?
huh? not on the list of requirements (sorry, I know half of you are tearing
out your eyes right now!).</p>
<p><br><br></p>
<h2>Answer</h2>
<p><em>Well, this answer has become its own beast. Many new versions, it was getting
stupid long. Many thanks to all of the great many contributors to this answer.
But, in order to keep it simple for the masses. I archived all the
versions/history of this answer's evolution to my github. And started it over
clean on StackOverflow here with the newest version. A special thanks goes out
to Mike 'Pomax' Kamermans for this version. He gave me the new math.</em></p>
<hr>
<p>This function (<code>pSBC</code>) will take a HEX or RGB web color. <code>pSBC</code> can shade it
darker or lighter, or blend it with a second color, and can also pass it right
thru but convert from Hex to RGB (Hex2RGB) or RGB to Hex (RGB2Hex). All
without you even knowing what color format you are using.</p>
<p>This runs really fast, probably the fastest, especially considering its many
features. It was a long time in the making. See the whole story on my github.
If you want the absolutely smallest and fastest possible way to shade or
blend, see the Micro Functions below and use one of the 2-liner speed demons.
They are great for intense animations, but this version here is fast enough
for most animations.</p>
<p>This function uses Log Blending or Linear Blending. However, it does NOT
convert to HSL to properly lighten or darken a color. Therefore, <strong>results
from this function will differ</strong> from those much larger and much slower
functions that use HSL.</p>
<blockquote>
<p>jsFiddle with pSBC</p>
<p>github &gt; pSBC Wiki</p>
</blockquote>
<p>Features:</p>
<ul>
<li>Auto-detects and accepts standard Hex colors in the form of strings. For example: <code>"#AA6622"</code> or <code>"#bb551144"</code>.</li>
<li>Auto-detects and accepts standard RGB colors in the form of strings. For example: <code>"rgb(123,45,76)"</code> or <code>"rgba(45,15,74,0.45)"</code>.</li>
<li>Shades colors to white or black by percentage.</li>
<li>Blends colors together by percentage.</li>
<li>Does Hex2RGB and RGB2Hex conversion at the same time, or solo.</li>
<li>Accepts 3 digit (or 4 digit w/ alpha) HEX color codes, in the form #RGB (or #RGBA). It will expand them. For Example: <code>"#C41"</code> becomes <code>"#CC4411"</code>.</li>
<li>Accepts and (Linear) blends alpha channels. If either the <code>c0</code> (from) color or the <code>c1</code> (to) color has an alpha channel, then the returned color will have an alpha channel. If both colors have an alpha channel, then the returned color will be a linear blend of the two alpha channels using the percentage given (just as if it were a normal color channel). If only one of the two colors has an alpha channel, this alpha will just be passed thru to the returned color. This allows one to blend/shade a transparent color while maintaining the transparency level. Or, if the transparency levels should blend as well, make sure both colors have alphas. When shading, it will pass the alpha channel straight thru. If you want basic shading that also shades the alpha channel, then use <code>rgb(0,0,0,1)</code> or <code>rgb(255,255,255,1)</code> as your <code>c1</code> (to) color (or their hex equivalents). For RGB colors, the returned color's alpha channel will be rounded to 3 decimal places.</li>
<li>RGB2Hex and Hex2RGB conversions are implicit when using blending. Regardless of the <code>c0</code> (from) color; the returned color will always be in the color format of the <code>c1</code> (to) color, if one exists. If there is no <code>c1</code> (to) color, then pass <code>'c'</code> in as the <code>c1</code> color and it will shade and convert whatever the <code>c0</code> color is. If conversion only is desired, then pass <code>0</code> in as the percentage (<code>p</code>) as well. If the <code>c1</code> color is omitted or a non-<code>string</code> is passed in, it will not convert.</li>
<li>A secondary function is added to the global as well. <code>pSBCr</code> can be passed a Hex or RGB color and it returns an object containing this color information. Its in the form: {r: XXX, g: XXX, b: XXX, a: X.XXX}. Where <code>.r</code>, <code>.g</code>, and <code>.b</code> have range 0 to 255. And when there is no alpha: <code>.a</code> is -1. Otherwise: <code>.a</code> has range 0.000 to 1.000.</li>
<li>For RGB output, it outputs <code>rgba()</code> over <code>rgb()</code> when a color with an alpha channel was passed into <code>c0</code> (from) and/or <code>c1</code> (to).</li>
<li>Minor Error Checking has been added. It's not perfect. It can still crash or create jibberish. But it will catch some stuff. Basically, if the structure is wrong in some ways or if the percentage is not a number or out of scope, it will return <code>null</code>. An example: <code>pSBC(0.5,"salt") == null</code>, where as it thinks <code>#salt</code> is a valid color. Delete the four lines which end with <code>return null;</code> to remove this feature and make it faster and smaller.</li>
<li>Uses Log Blending. Pass <code>true</code> in for <code>l</code> (the 4th parameter) to use Linear Blending.</li>
</ul>
<h4>Code:</h4>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="nv">Version</span> <span class="mf">4.0</span>
<span class="s s-Atom">const</span> <span class="s s-Atom">pSBC=</span><span class="p">(</span><span class="s s-Atom">p</span><span class="p">,</span><span class="s s-Atom">c0</span><span class="p">,</span><span class="s s-Atom">c1</span><span class="p">,</span><span class="s s-Atom">l</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="s s-Atom">let</span> <span class="s s-Atom">r</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">,</span><span class="nv">P</span><span class="p">,</span><span class="s s-Atom">f</span><span class="p">,</span><span class="s s-Atom">t</span><span class="p">,</span><span class="s s-Atom">h</span><span class="p">,</span><span class="s s-Atom">i</span><span class="o">=</span><span class="s s-Atom">parseInt</span><span class="p">,</span><span class="s s-Atom">m</span><span class="o">=</span><span class="nv">Math</span><span class="p">.</span><span class="s s-Atom">round</span><span class="p">,</span><span class="s s-Atom">a</span><span class="o">=</span><span class="nf">typeof</span><span class="p">(</span><span class="s s-Atom">c1</span><span class="p">)</span><span class="s s-Atom">==</span><span class="s2">"string"</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(</span><span class="nf">typeof</span><span class="p">(</span><span class="s s-Atom">p</span><span class="p">)!</span><span class="s s-Atom">=</span><span class="s2">"number"</span><span class="p">||</span><span class="s s-Atom">p&lt;-</span><span class="mi">1</span><span class="p">||</span><span class="s s-Atom">p</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">||</span><span class="nf">typeof</span><span class="p">(</span><span class="s s-Atom">c0</span><span class="p">)!</span><span class="s s-Atom">=</span><span class="s2">"string"</span><span class="p">||(</span><span class="s s-Atom">c0</span><span class="p">[</span><span class="mi">0</span><span class="p">]!</span><span class="s s-Atom">='r'&amp;&amp;c0</span><span class="p">[</span><span class="mi">0</span><span class="p">]!</span><span class="s s-Atom">='#'</span><span class="p">)||(</span><span class="s s-Atom">c1&amp;&amp;</span><span class="p">!</span><span class="s s-Atom">a</span><span class="p">))</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(!</span><span class="s s-Atom">this</span><span class="p">.</span><span class="s s-Atom">pSBCr</span><span class="p">)</span><span class="s s-Atom">this</span><span class="p">.</span><span class="s s-Atom">pSBCr=</span><span class="p">(</span><span class="s s-Atom">d</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="s s-Atom">let</span> <span class="s s-Atom">n</span><span class="o">=</span><span class="s s-Atom">d</span><span class="p">.</span><span class="s s-Atom">length</span><span class="p">,</span><span class="s s-Atom">x=</span><span class="p">{};</span>
        <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&gt;</span><span class="mi">9</span><span class="p">){</span>
            <span class="p">[</span><span class="s s-Atom">r</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">,</span><span class="s s-Atom">a</span><span class="p">]</span><span class="o">=</span><span class="s s-Atom">d</span><span class="o">=</span><span class="s s-Atom">d</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="s s-Atom">n</span><span class="o">=</span><span class="s s-Atom">d</span><span class="p">.</span><span class="s s-Atom">length</span><span class="p">;</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">&gt;</span><span class="mi">4</span><span class="p">)</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
            <span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">r</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="s s-Atom">==</span><span class="s2">"a"</span><span class="nb">?</span><span class="s s-Atom">r</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">:</span><span class="s s-Atom">r</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">g</span><span class="p">),</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">b</span><span class="p">),</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">a</span><span class="o">=</span><span class="s s-Atom">a</span><span class="nb">?</span><span class="nf">parseFloat</span><span class="p">(</span><span class="s s-Atom">a</span><span class="p">)</span><span class="o">:-</span><span class="mi">1</span>
        <span class="p">}</span><span class="s s-Atom">else</span><span class="p">{</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">8</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">6</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">)</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">)</span><span class="s s-Atom">d=</span><span class="s2">"#"</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="s s-Atom">+</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&gt;</span><span class="mi">4</span><span class="nb">?</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span><span class="s2">""</span><span class="p">);</span>
            <span class="s s-Atom">d</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">d</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">9</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">24</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">16</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">8</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">a</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="s s-Atom">d&amp;</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mf">0.255</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">;</span>
            <span class="s s-Atom">else</span> <span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">16</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">8</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">=</span><span class="s s-Atom">d&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">a=-</span><span class="mi">1</span>
        <span class="p">}</span><span class="s s-Atom">return</span> <span class="s s-Atom">x</span><span class="p">};</span>
    <span class="s s-Atom">h</span><span class="o">=</span><span class="s s-Atom">c0</span><span class="p">.</span><span class="s s-Atom">length</span><span class="o">&gt;</span><span class="mi">9</span><span class="p">,</span><span class="s s-Atom">h</span><span class="o">=</span><span class="s s-Atom">a</span><span class="nb">?</span><span class="s s-Atom">c1</span><span class="p">.</span><span class="s s-Atom">length</span><span class="o">&gt;</span><span class="mi">9</span><span class="nb">?</span><span class="s s-Atom">true</span><span class="p">:</span><span class="s s-Atom">c1==</span><span class="s2">"c"</span><span class="nb">?</span><span class="p">!</span><span class="s s-Atom">h</span><span class="p">:</span><span class="s s-Atom">false</span><span class="p">:</span><span class="s s-Atom">h</span><span class="p">,</span><span class="s s-Atom">f</span><span class="o">=</span><span class="s s-Atom">this</span><span class="p">.</span><span class="nf">pSBCr</span><span class="p">(</span><span class="s s-Atom">c0</span><span class="p">),</span><span class="nv">P</span><span class="o">=</span><span class="s s-Atom">p</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">t</span><span class="o">=</span><span class="s s-Atom">c1&amp;&amp;c1</span><span class="p">!</span><span class="s s-Atom">=</span><span class="s2">"c"</span><span class="nb">?</span><span class="s s-Atom">this</span><span class="p">.</span><span class="nf">pSBCr</span><span class="p">(</span><span class="s s-Atom">c1</span><span class="p">)</span><span class="o">:</span><span class="nv">P</span><span class="nb">?</span><span class="p">{</span><span class="s s-Atom">r</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">a</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="s s-Atom">r</span><span class="p">:</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">:</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">:</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">a</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">},</span><span class="s s-Atom">p</span><span class="o">=</span><span class="nv">P</span><span class="nb">?</span><span class="s s-Atom">p*-</span><span class="mi">1</span><span class="o">:</span><span class="s s-Atom">p</span><span class="p">,</span><span class="nv">P</span><span class="o">=</span><span class="mi">1</span><span class="o">-</span><span class="s s-Atom">p</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(!</span><span class="s s-Atom">f</span><span class="p">||!</span><span class="s s-Atom">t</span><span class="p">)</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">l</span><span class="p">)</span><span class="s s-Atom">r</span><span class="o">=</span><span class="nf">m</span><span class="p">(</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">r</span><span class="p">),</span><span class="s s-Atom">g</span><span class="o">=</span><span class="nf">m</span><span class="p">(</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">g</span><span class="p">),</span><span class="s s-Atom">b</span><span class="o">=</span><span class="nf">m</span><span class="p">(</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">b</span><span class="p">);</span>
    <span class="s s-Atom">else</span> <span class="s s-Atom">r</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">r**</span><span class="mi">2</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">r**</span><span class="mi">2</span><span class="p">)</span><span class="s s-Atom">**</span><span class="mf">0.5</span><span class="p">),</span><span class="s s-Atom">g</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">g**</span><span class="mi">2</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">g**</span><span class="mi">2</span><span class="p">)</span><span class="s s-Atom">**</span><span class="mf">0.5</span><span class="p">),</span><span class="s s-Atom">b</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">b**</span><span class="mi">2</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">b**</span><span class="mi">2</span><span class="p">)</span><span class="s s-Atom">**</span><span class="mf">0.5</span><span class="p">);</span>
    <span class="s s-Atom">a</span><span class="o">=</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">a</span><span class="p">,</span><span class="s s-Atom">t</span><span class="o">=</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">a</span><span class="p">,</span><span class="s s-Atom">f</span><span class="o">=</span><span class="s s-Atom">a</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">||</span><span class="s s-Atom">t</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">a</span><span class="o">=</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s s-Atom">a</span><span class="o">&lt;</span><span class="mi">0</span><span class="nb">?</span><span class="s s-Atom">t</span><span class="p">:</span><span class="s s-Atom">t</span><span class="o">&lt;</span><span class="mi">0</span><span class="nb">?</span><span class="s s-Atom">a</span><span class="p">:</span><span class="s s-Atom">a</span><span class="o">*</span><span class="nv">P</span><span class="o">+</span><span class="s s-Atom">t</span><span class="o">*</span><span class="s s-Atom">p</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">h</span><span class="p">)</span><span class="s s-Atom">return</span><span class="s2">"rgb"</span><span class="s s-Atom">+</span><span class="p">(</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s2">"a("</span><span class="o">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="s s-Atom">r+</span><span class="s2">","</span><span class="o">+</span><span class="s s-Atom">g+</span><span class="s2">","</span><span class="o">+</span><span class="s s-Atom">b+</span><span class="p">(</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s2">","</span><span class="o">+</span><span class="nf">m</span><span class="p">(</span><span class="s s-Atom">a</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="o">:</span><span class="s2">""</span><span class="p">)</span><span class="s s-Atom">+</span><span class="s2">")"</span><span class="p">;</span>
    <span class="s s-Atom">else</span> <span class="s s-Atom">return</span><span class="s2">"#"</span><span class="s s-Atom">+</span><span class="p">(</span><span class="mi">4294967296</span><span class="o">+</span><span class="s s-Atom">r</span><span class="o">*</span><span class="mi">16777216</span><span class="o">+</span><span class="s s-Atom">g</span><span class="o">*</span><span class="mi">65536</span><span class="o">+</span><span class="s s-Atom">b</span><span class="o">*</span><span class="mi">256</span><span class="s s-Atom">+</span><span class="p">(</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="nf">m</span><span class="p">(</span><span class="s s-Atom">a</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">:</span><span class="mi">0</span><span class="p">)).</span><span class="nf">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s s-Atom">undefined</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<h4>Usage:</h4>
<div class="code"><pre class="code literal-block"><span class="c1">// Setup:</span>

<span class="n">let</span><span class="w"> </span><span class="n">color1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgb(20,60,200)"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgba(20,60,200,0.67423)"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#67DAF0"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#5567DAF0"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#F3A"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#F3A9"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgb(200,60,20)"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgba(200,60,20,0.98631)"</span><span class="p">;</span>

<span class="c1">// Tests:</span>

<span class="cm">/*** Log Blending ***/</span>
<span class="c1">// Shade (Lighten or Darken)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + [42% Lighter] =&gt; rgb(166,171,225)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.4</span><span class="p">,</span><span class="w"> </span><span class="n">color5</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A + [40% Darker] =&gt; #c62884</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(200,60,20,0.98631) + [42% Lighter] =&gt; rgba(225,171,166,0.98631)</span>

<span class="c1">// Shade with Conversion (use "c" as your "to" color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + [42% Lighter] + [Convert] =&gt; #a6abe1ac</span>

<span class="c1">// RGB2Hex &amp; Hex2RGB Conversion Only (set percentage to zero)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">color6</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A9 + [Convert] =&gt; rgba(255,51,170,0.6)</span>

<span class="c1">// Blending</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgba(200,60,20,0.98631) + [50% Blend] =&gt; rgba(142,60,142,0.83)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgb(200,60,20) + [70% Blend] =&gt; rgba(168,60,111,0.67423)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #67DAF0 + rgb(200,60,20) + [25% Blend] =&gt; rgb(134,191,208)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(200,60,20) + #67DAF0 + [75% Blend] =&gt; #86bfd0</span>

<span class="cm">/*** Linear Blending ***/</span>
<span class="c1">// Shade (Lighten or Darken)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + [42% Lighter] =&gt; rgb(119,142,223)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.4</span><span class="p">,</span><span class="w"> </span><span class="n">color5</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A + [40% Darker] =&gt; #991f66</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(200,60,20,0.98631) + [42% Lighter] =&gt; rgba(223,142,119,0.98631)</span>

<span class="c1">// Shade with Conversion (use "c" as your "to" color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + [42% Lighter] + [Convert] =&gt; #778edfac</span>

<span class="c1">// RGB2Hex &amp; Hex2RGB Conversion Only (set percentage to zero)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">color6</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A9 + [Convert] =&gt; rgba(255,51,170,0.6)</span>

<span class="c1">// Blending</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgba(200,60,20,0.98631) + [50% Blend] =&gt; rgba(110,60,110,0.83)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgb(200,60,20) + [70% Blend] =&gt; rgba(146,60,74,0.67423)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #67DAF0 + rgb(200,60,20) + [25% Blend] =&gt; rgb(127,179,185)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(200,60,20) + #67DAF0 + [75% Blend] =&gt; #7fb3b9</span>

<span class="cm">/*** Other Stuff ***/</span>
<span class="c1">// Error Checking</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="s">"#FFBAA"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #FFBAA + [42% Lighter] =&gt; null  (Invalid Input Color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="p">,</span><span class="w"> </span><span class="n">color5</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + #F3A + [4200% Blend] =&gt; null  (Invalid Percentage Range)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// [object Object] + [42% Lighter] =&gt; null  (Strings Only for Color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s">"42"</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + ["42"] =&gt; null  (Numbers Only for Percentage)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="s">"salt"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// salt + [42% Lighter] =&gt; null  (A Little Salt is No Good...)</span>

<span class="c1">// Error Check Fails (Some Errors are not Caught)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="s">"#salt"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #salt + [42% Lighter] =&gt; #a5a5a500  (...and a Pound of Salt is Jibberish)</span>

<span class="c1">// Ripping</span>
<span class="n">pSBCr</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">color4</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #5567DAF0 + [Rip] =&gt; [object Object] =&gt; {'r':85,'g':103,'b':218,'a':0.941}</span>
</pre></div>

<hr>
<p>The picture below will help show the difference in the two blending methods:</p>
<p><img alt="" src="https://i.imgur.com/FBe90R8.png"></p>
<hr>
<h3>Micro Functions</h3>
<p>If you really want speed and size, you will have to use RGB not HEX. RGB is
more straightforward and simple, HEX writes too slow and comes in too many
flavors for a simple two-liner (IE. it could be a 3, 4, 6, or 8 digit HEX
code). You will also need to sacrifice some features, no error checking, no
HEX2RGB nor RGB2HEX. As well, you will need to choose a specific function
(based on its function name below) for the color blending math, and if you
want shading or blending. These functions do support alpha channels. And when
both input colors have alphas it will Linear Blend them. If only one of the
two colors has an alpha, it will pass it straight thru to the resulting color.
Below are two liner functions that are incredibly fast and small:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">RGB_Linear_Blend</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c0</span><span class="p">,</span><span class="n">c1</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c0</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),[</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">h</span><span class="p">]</span><span class="o">=</span><span class="n">c1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">x</span><span class="o">=</span><span class="n">d</span><span class="o">||</span><span class="n">h</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="n">x</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="p">(</span><span class="o">!</span><span class="n">d</span><span class="err">?</span><span class="n">h</span><span class="p">:</span><span class="o">!</span><span class="n">h</span><span class="err">?</span><span class="n">d</span><span class="p">:</span><span class="n">r</span><span class="p">((</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="o">+</span><span class="s2">")"</span><span class="p">):</span><span class="s2">")"</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">x</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">i</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">i</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">i</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">+</span><span class="n">j</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">RGB_Linear_Shade</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">P</span><span class="o">=</span><span class="n">p</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">0</span><span class="p">:</span><span class="mi">255</span><span class="o">*</span><span class="n">p</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">1</span><span class="o">+</span><span class="n">p</span><span class="p">:</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="n">d</span><span class="p">:</span><span class="s2">")"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">RGB_Log_Blend</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c0</span><span class="p">,</span><span class="n">c1</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c0</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),[</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">h</span><span class="p">]</span><span class="o">=</span><span class="n">c1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">x</span><span class="o">=</span><span class="n">d</span><span class="o">||</span><span class="n">h</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="n">x</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="p">(</span><span class="o">!</span><span class="n">d</span><span class="err">?</span><span class="n">h</span><span class="p">:</span><span class="o">!</span><span class="n">h</span><span class="err">?</span><span class="n">d</span><span class="p">:</span><span class="n">r</span><span class="p">((</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="o">+</span><span class="s2">")"</span><span class="p">):</span><span class="s2">")"</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">x</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">p</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">p</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">p</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="n">j</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">RGB_Log_Shade</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">P</span><span class="o">=</span><span class="n">p</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">0</span><span class="p">:</span><span class="n">p</span><span class="o">*</span><span class="mi">255</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">1</span><span class="o">+</span><span class="n">p</span><span class="p">:</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="n">d</span><span class="p">:</span><span class="s2">")"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<hr>
<p>Want more info? Read the full writeup on github.</p>
<p>PT</p>
<p>(P.s. If anyone has the math for another blending method, please share.)</p>
<p><br></p>
<h3>Suggest</h3>
<p>I made a solution that works very nice for me:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">shadeColor</span><span class="p">(</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>

<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">R</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">G</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">B</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>

<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">R</span><span class="o">&lt;</span><span class="mi">255</span><span class="p">)</span><span class="err">?</span><span class="n">R</span><span class="p">:</span><span class="mi">255</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">G</span><span class="o">&lt;</span><span class="mi">255</span><span class="p">)</span><span class="err">?</span><span class="n">G</span><span class="p">:</span><span class="mi">255</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="o">&lt;</span><span class="mi">255</span><span class="p">)</span><span class="err">?</span><span class="n">B</span><span class="p">:</span><span class="mi">255</span><span class="p">;</span>

<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">RR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">R</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="err">?</span><span class="s2">"0"</span><span class="o">+</span><span class="n">R</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span><span class="n">R</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">GG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">G</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="err">?</span><span class="s2">"0"</span><span class="o">+</span><span class="n">G</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span><span class="n">G</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">BB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">B</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="err">?</span><span class="s2">"0"</span><span class="o">+</span><span class="n">B</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span><span class="n">B</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s2">"#"</span><span class="o">+</span><span class="n">RR</span><span class="o">+</span><span class="n">GG</span><span class="o">+</span><span class="n">BB</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Example Lighten:</p>
<div class="code"><pre class="code literal-block">shadeColor("#63C6FF",40);
</pre></div>

<p>Example Darken:</p>
<div class="code"><pre class="code literal-block">shadeColor("#63C6FF",-40);
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-896.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-894.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
