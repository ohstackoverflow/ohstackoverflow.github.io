<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2103) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2103.html">
<link rel="prev" href="index-2104.html" type="text/html">
<link rel="next" href="index-2102.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/typescript-type-string-is-not-assignable-to-type/" class="u-url">Typescript Type 'string' is not assignable to type</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/typescript-type-string-is-not-assignable-to-type/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:00:56+08:00" itemprop="datePublished" title="2023-03-03 17:00">2023-03-03 17:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Here's what I have in fruit.ts</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">Fruit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Orange"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">"Apple"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">"Banana"</span>
</pre></div>

<p>Now I'm importing fruit.ts in another typescript file. Here's what I have</p>
<div class="code"><pre class="code literal-block"><span class="n">myString</span><span class="o">:</span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Banana"</span><span class="o">;</span>

<span class="n">myFruit</span><span class="o">:</span><span class="n">Fruit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myString</span><span class="o">;</span>
</pre></div>

<p>When I do</p>
<div class="code"><pre class="code literal-block">myFruit = myString;
</pre></div>

<p>I get an error:</p>
<blockquote>
<p>Type 'string' is not assignable to type '"Orange" | "Apple" | "Banana"'</p>
</blockquote>
<p>How can I assign a string to a variable of custom type Fruit?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Update</h4>
<p>As mentioned in @Simon_Weaver's answer, since TypeScript version 3.4 it's
possible to assert it to <code>const</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">let</span><span class="w"> </span><span class="n">fruit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Banana"</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</pre></div>

<h4>Old answer</h4>
<p>You'll need to cast it:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">Fruit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Orange"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">"Apple"</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">"Banana"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">myString</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Banana"</span><span class="p">;</span>

<span class="n">let</span><span class="w"> </span><span class="n">myFruit</span><span class="p">:</span><span class="w"> </span><span class="n">Fruit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myString</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Fruit</span><span class="p">;</span>
</pre></div>

<p>Also notice that when using string literals you need to use only one <code>|</code></p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Typescript<code>3.4</code> introduced the new 'const' assertion</strong></p>
<p>You can now prevent literal types (eg. <code>'orange'</code> or <code>'red'</code>) being 'widened'
to type <code>string</code> with a so-called <code>const</code> assertion.</p>
<p>You will be able to do:</p>
<div class="code"><pre class="code literal-block"><span class="n">let</span><span class="w"> </span><span class="n">fruit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'orange'</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="ow">or</span><span class="o">...</span>
<span class="n">let</span><span class="w"> </span><span class="n">fruit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="k">const</span><span class="o">&gt;</span><span class="w"> </span><span class="s1">'orange'</span><span class="p">;</span>
</pre></div>

<p>And then it won't turn itself into a <code>string</code> anymore - which is the root of
the problem in the question.</p>
<p>You can also do it on a whole object:</p>
<div class="code"><pre class="code literal-block"><span class="n">let</span><span class="w"> </span><span class="n">animals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">species</span><span class="p">:</span><span class="w"> </span><span class="s1">'dog'</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">species</span><span class="p">:</span><span class="w"> </span><span class="s1">'cat'</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="n">type</span><span class="w"> </span><span class="n">firstAnimal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">animals</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'species'</span><span class="p">];</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">literal</span><span class="w"> </span><span class="s1">'dog'</span>
</pre></div>

<p><strong>Bonus Tip:</strong> You can also use <code>&lt;const&gt; false</code> or <code>&lt;const&gt; true</code> to represent
a boolean that must be true or false. This can be useful in discriminated
unions sometimes. You'll know it when you see it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/convert-linq-query-result-to-dictionary/" class="u-url">Convert Linq Query Result to Dictionary</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/convert-linq-query-result-to-dictionary/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:00:35+08:00" itemprop="datePublished" title="2023-03-03 17:00">2023-03-03 17:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to add some rows to a database using Linq to SQL, but I want to make a
"custom check" before adding the rows to know if I must add, replace or ignore
the incomming rows. I'd like to keep the trafic between the client and the DB
server as low as possible and minimize the number of queries.</p>
<p>To do this, I want to fetch as little information as required for the
validation, and only once at the beginning of the process.</p>
<p>I was thinking of doing something like this, but obviously, it doesn't work.
Anyone have an idea?</p>
<div class="code"><pre class="code literal-block">Dictionary&lt;int, DateTime&gt; existingItems = 
    (from ObjType ot in TableObj
        select (new KeyValuePair&lt;int, DateTime&gt;(ot.Key, ot.TimeStamp))
    )
</pre></div>

<p>What I'd like to have at the end would be a Dictionary, without having to
download the whole ObjectType objects from TableObject.</p>
<p>I also considered the following code, but I was trying to find a proper way:</p>
<div class="code"><pre class="code literal-block"><span class="n">List</span><span class="o">&lt;</span><span class="nc">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">from</span><span class="w"> </span><span class="n">ObjType</span><span class="w"> </span><span class="n">ot</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">TableObj</span><span class="w"> </span><span class="n">orderby</span><span class="w"> </span><span class="n">ot</span><span class="p">.</span><span class="k">Key</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">ot</span><span class="p">.</span><span class="k">Key</span><span class="p">).</span><span class="n">ToList</span><span class="o">&lt;</span><span class="nc">int</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="nc">DateTime</span><span class="o">&gt;</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">from</span><span class="w"> </span><span class="n">ObjType</span><span class="w"> </span><span class="n">ot</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">TableObj</span><span class="w"> </span><span class="n">orderby</span><span class="w"> </span><span class="n">ot</span><span class="p">.</span><span class="k">Key</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">ot</span><span class="p">.</span><span class="k">Value</span><span class="p">).</span><span class="n">ToList</span><span class="o">&lt;</span><span class="nc">int</span><span class="o">&gt;</span><span class="p">();</span>
<span class="k">Dictionary</span><span class="o">&lt;</span><span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="nc">DateTime</span><span class="o">&gt;</span><span class="w"> </span><span class="n">existingItems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Dictionary</span><span class="o">&lt;</span><span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="nc">DateTime</span><span class="o">&gt;</span><span class="p">(</span><span class="n">keys</span><span class="p">.</span><span class="nf">Count</span><span class="p">);</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">keys</span><span class="p">.</span><span class="nf">Count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="err">{</span>
<span class="w">    </span><span class="n">existingItems</span><span class="p">.</span><span class="k">Add</span><span class="p">(</span><span class="n">keys</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">values</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Try using the <code>ToDictionary</code> method like so:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TableObj</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">Key</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">TimeStamp</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">)</span>
<span class="w">                   </span><span class="o">.</span><span class="n">ToDictionary</span><span class="p">(</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">Key</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">TimeStamp</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Looking at your example, I think this is what you want:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TableObj</span><span class="o">.</span><span class="n">ToDictionary</span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">Key</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="o">=&gt;</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">TimeStamp</span><span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/total-number-of-items-defined-in-an-enum/" class="u-url">Total number of items defined in an enum</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/total-number-of-items-defined-in-an-enum/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:00:06+08:00" itemprop="datePublished" title="2023-03-03 17:00">2023-03-03 17:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I get the number of items defined in an enum?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the static method <code>Enum.GetNames</code> which returns an array
representing the names of all the items in the enum. The length property of
this array equals the number of items defined in the enum</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myEnumMemberCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Enum</span><span class="o">.</span><span class="n">GetNames</span><span class="p">(</span><span class="nb">typeof</span><span class="p">(</span><span class="n">MyEnum</span><span class="p">))</span><span class="o">.</span><span class="n">Length</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The question is:</p>
<blockquote>
<p>How can I get the number of items defined in an enum?</p>
</blockquote>
<p>The number of "items" could really mean two completely different things.
Consider the following example.</p>
<div class="code"><pre class="code literal-block"><span class="k">enum</span><span class="w"> </span><span class="n">MyEnum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>
<span class="p">}</span>
</pre></div>

<p>What is the number of "items" defined in <code>MyEnum</code>?</p>
<p>Is the number of items 5? (<code>A</code>, <code>B</code>, <code>C</code>, <code>D</code>, <code>E</code>)</p>
<p>Or is it 3? (<code>1</code>, <code>2</code>, <code>3</code>)</p>
<p>The number of <em>names</em> defined in <code>MyEnum</code> (5) can be computed as follows.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">namesCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Enum</span><span class="o">.</span><span class="n">GetNames</span><span class="p">(</span><span class="nb">typeof</span><span class="p">(</span><span class="n">MyEnum</span><span class="p">))</span><span class="o">.</span><span class="n">Length</span><span class="p">;</span>
</pre></div>

<p>The number of <em>values</em> defined in <code>MyEnum</code> (3) can be computed as follows.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">valuesCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Enum</span><span class="o">.</span><span class="n">GetValues</span><span class="p">(</span><span class="nb">typeof</span><span class="p">(</span><span class="n">MyEnum</span><span class="p">))</span><span class="o">.</span><span class="n">Cast</span><span class="o">&lt;</span><span class="n">MyEnum</span><span class="o">&gt;</span><span class="p">()</span><span class="o">.</span><span class="n">Distinct</span><span class="p">()</span><span class="o">.</span><span class="n">Count</span><span class="p">();</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2104.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2102.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
