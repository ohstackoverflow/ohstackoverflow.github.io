<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2614) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2614.html">
<link rel="prev" href="index-2615.html" type="text/html">
<link rel="next" href="index-2613.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-set-up-automapper-in-asp-net-core/" class="u-url">How to set up Automapper in ASP.NET Core</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-set-up-automapper-in-asp-net-core/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T05:00:23+08:00" itemprop="datePublished" title="2023-03-05 05:00">2023-03-05 05:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm relatively new at .NET, and I decided to tackle .NET Core instead of
learning the "old ways". I found a detailed article about setting up
AutoMapper for .NET Core here, but is there a more simple walkthrough for a
newbie?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I figured it out! Here's the details:</p>
<ol>
<li>
<p>Add the main AutoMapper Package to your solution via NuGet.</p>
</li>
<li>
<p>Add the AutoMapper Dependency Injection Package to your solution via NuGet.</p>
</li>
<li>
<p>Create a new class for a mapping profile. (I made a class in the main solution directory called <code>MappingProfile.cs</code> and add the following code.) I'll use a <code>User</code> and <code>UserDto</code> object as an example.</p>
<div class="code"><pre class="code literal-block"> public class MappingProfile : Profile {
 public MappingProfile() {
     // Add as many of these lines as you need to map your objects
     CreateMap&lt;User, UserDto&gt;();
     CreateMap&lt;UserDto, User&gt;();
 }
</pre></div>

<p>}</p>
</li>
<li>
<p>Then add the AutoMapperConfiguration in the <code>Startup.cs</code> as shown below:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">ConfigureServices</span><span class="p">(</span><span class="n">IServiceCollection</span><span class="w"> </span><span class="n">services</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">....</span><span class="w"> </span><span class="n">Ignore</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">this</span>

<span class="o">//</span><span class="w"> </span><span class="n">Auto</span><span class="w"> </span><span class="n">Mapper</span><span class="w"> </span><span class="n">Configurations</span>
<span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">mapperConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">MapperConfiguration</span><span class="p">(</span><span class="n">mc</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">mc</span><span class="o">.</span><span class="n">AddProfile</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">MappingProfile</span><span class="p">());</span>
<span class="w"> </span><span class="p">});</span>

<span class="w"> </span><span class="n">IMapper</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapperConfig</span><span class="o">.</span><span class="n">CreateMapper</span><span class="p">();</span>
<span class="w"> </span><span class="n">services</span><span class="o">.</span><span class="n">AddSingleton</span><span class="p">(</span><span class="n">mapper</span><span class="p">);</span>

<span class="w"> </span><span class="n">services</span><span class="o">.</span><span class="n">AddMvc</span><span class="p">();</span>
</pre></div>

<p>}</p>
</li>
<li>
<p>To invoke the mapped object in code, do something like the following:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">UserController</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="p">{</span>

<span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="n">object</span>
<span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">readonly</span><span class="w"> </span><span class="n">IMapper</span><span class="w"> </span><span class="n">_mapper</span><span class="p">;</span>

<span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Assign</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">injection</span>
<span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">UserController</span><span class="p">(</span><span class="n">IMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">_mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">IActionResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Edit</span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Instantiate</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">object</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="p">(</span><span class="n">Get</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">database</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">whatever</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="k">for</span><span class="p">)</span>
<span class="w">     </span><span class="k">var</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">_context</span><span class="o">.</span><span class="n">Users</span>
<span class="w">         </span><span class="o">.</span><span class="n">SingleOrDefaultAsync</span><span class="p">(</span><span class="n">u</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">u</span><span class="o">.</span><span class="n">Id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>

<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Instantiate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mapped</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">transfer</span><span class="w"> </span><span class="n">object</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">mapper</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">field</span><span class="o">.</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">argument</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">destination</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="o">.</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Pass</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">instantiated</span><span class="w"> </span><span class="n">above</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">_mapper</span><span class="o">.</span><span class="n">Map</span><span class="o">&lt;&gt;</span><span class="p">()</span><span class="w"> </span><span class="n">method</span><span class="o">.</span>
<span class="w">     </span><span class="k">var</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_mapper</span><span class="o">.</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">UserDto</span><span class="o">&gt;</span><span class="p">(</span><span class="n">user</span><span class="p">);</span>

<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="o">....</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">whatever</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">that</span><span class="o">!</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>

<p>}</p>
</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>Step To Use AutoMapper with ASP.NET Core.</p>
<p><em>Step 1. Installing AutoMapper.Extensions.Microsoft.DependencyInjection from
NuGet Package.</em></p>
<p><img alt="enter image description here" src="images/NLEBL.png"></p>
<p><em>Step 2. Create a Folder in Solution to keep Mappings with Name "Mappings".</em></p>
<p><img alt="enter image description here" src="images/6wOpQ.png"></p>
<p><em>Step 3. After adding Mapping folder we have added a class with Name "
<strong>MappingProfile</strong> " this name can anything unique and good to understand.</em></p>
<p>In this class, we are going to Maintain all Mappings.</p>
<p><img alt="enter image description here" src="images/GSeup.png"></p>
<p><em>Step 4. Initializing Mapper in Startup "ConfigureServices"</em></p>
<p>In Startup Class, we Need to Initialize Profile which we have created and also
Register AutoMapper Service.</p>
<div class="code"><pre class="code literal-block">  Mapper.Initialize(cfg =&gt; cfg.AddProfile&lt;MappingProfile&gt;());

  services.AddAutoMapper();
</pre></div>

<p>Code Snippet to show ConfigureServices Method where we need to Initialize and
Register AutoMapper.</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">Startup</span>
{
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">Startup</span><span class="ss">(</span><span class="nv">IConfiguration</span><span class="w"> </span><span class="nv">configuration</span><span class="ss">)</span>
<span class="w">    </span>{
<span class="w">        </span><span class="nv">Configuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">configuration</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">IConfiguration</span><span class="w"> </span><span class="nv">Configuration</span><span class="w"> </span>{<span class="w"> </span><span class="nv">get</span><span class="c1">; }</span>


<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">ConfigureServices</span><span class="ss">(</span><span class="nv">IServiceCollection</span><span class="w"> </span><span class="nv">services</span><span class="ss">)</span>
<span class="w">    </span>{
<span class="w">        </span><span class="nv">services</span>.<span class="nv">Configure</span><span class="o">&lt;</span><span class="nv">CookiePolicyOptions</span><span class="o">&gt;</span><span class="ss">(</span><span class="nv">options</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="w">        </span>{
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">lambda</span><span class="w"> </span><span class="nv">determines</span><span class="w"> </span><span class="nv">whether</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="nv">consent</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">essential</span><span class="w"> </span><span class="nv">cookies</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">needed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">request</span>.
<span class="w">            </span><span class="nv">options</span>.<span class="nv">CheckConsentNeeded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">context</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nv">true</span><span class="c1">;</span>
<span class="w">            </span><span class="nv">options</span>.<span class="nv">MinimumSameSitePolicy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">SameSiteMode</span>.<span class="nv">None</span><span class="c1">;</span>
<span class="w">        </span>}<span class="ss">)</span><span class="c1">;</span>


<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="nv">Start</span><span class="w"> </span><span class="nv">Registering</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Initializing</span><span class="w"> </span><span class="nv">AutoMapper</span>

<span class="w">        </span><span class="nv">Mapper</span>.<span class="nv">Initialize</span><span class="ss">(</span><span class="nv">cfg</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nv">cfg</span>.<span class="nv">AddProfile</span><span class="o">&lt;</span><span class="nv">MappingProfile</span><span class="o">&gt;</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">services</span>.<span class="nv">AddAutoMapper</span><span class="ss">()</span><span class="c1">;</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="k">End</span><span class="w"> </span><span class="nv">Registering</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Initializing</span><span class="w"> </span><span class="nv">AutoMapper</span>

<span class="w">        </span><span class="nv">services</span>.<span class="nv">AddMvc</span><span class="ss">()</span>.<span class="nv">SetCompatibilityVersion</span><span class="ss">(</span><span class="nv">CompatibilityVersion</span>.<span class="nv">Version_2_1</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">    </span>}}
</pre></div>

<p><em>Step 5. Get Output.</em></p>
<p>To Get Mapped result we need to call AutoMapper.Mapper.Map and pass Proper
Destination and Source.</p>
<div class="code"><pre class="code literal-block">AutoMapper.Mapper.Map&lt;Destination&gt;(source);
</pre></div>

<p>CodeSnippet</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="o">[</span><span class="n">HttpPost</span><span class="o">]</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">Post</span><span class="p">(</span><span class="o">[</span><span class="n">FromBody</span><span class="o">]</span><span class="w"> </span><span class="n">SchemeMasterViewModel</span><span class="w"> </span><span class="n">schemeMaster</span><span class="p">)</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ModelState</span><span class="p">.</span><span class="n">IsValid</span><span class="p">)</span>
<span class="w">        </span><span class="err">{</span>
<span class="w">            </span><span class="nf">var</span><span class="w"> </span><span class="n">mappedresult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AutoMapper</span><span class="p">.</span><span class="n">Mapper</span><span class="p">.</span><span class="k">Map</span><span class="o">&lt;</span><span class="n">SchemeMaster</span><span class="o">&gt;</span><span class="p">(</span><span class="n">schemeMaster</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/no-access-control-allow-origin-node-apache-port-issue/" class="u-url">No 'Access-Control-Allow-Origin' - Node / Apache Port Issue</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/no-access-control-allow-origin-node-apache-port-issue/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T04:58:48+08:00" itemprop="datePublished" title="2023-03-05 04:58">2023-03-05 04:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>i've created a small API using Node/Express and trying to pull data using
Angularjs but as my html page is running under apache on localhost:8888 and
node API is listen on port 3000, i am getting the No 'Access-Control-Allow-
Origin'. I tried using <code>node-http-proxy</code> and Vhosts Apache but not having much
succes, please see full error and code below.</p>
<blockquote>
<p>XMLHttpRequest cannot load localhost:3000. No 'Access-Control-Allow-Origin'
header is present on the requested resource. Origin 'localhost:8888' is
therefore not allowed access."</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">Api</span><span class="w"> </span><span class="n">Using</span><span class="w"> </span><span class="n">Node</span><span class="o">/</span><span class="n">Express</span><span class="w">    </span>
<span class="k">var</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">express</span><span class="p">();</span>
<span class="k">var</span><span class="w"> </span><span class="n">contractors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w">   </span>
<span class="w">     </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe Blogg"</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"Weeks"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"Photo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.png"</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">];</span>

<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">express</span><span class="o">.</span><span class="n">bodyParser</span><span class="p">());</span>

<span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">contractors</span><span class="p">);</span>
<span class="p">});</span>
<span class="n">app</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">PORT</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mi">3000</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'Server is running on Port 3000'</span><span class="p">)</span>
</pre></div>

<h3>Angular code</h3>
<div class="code"><pre class="code literal-block"><span class="n">angular</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">'contractorsApp'</span><span class="p">,</span><span class="w"> </span><span class="p">[])</span>
<span class="o">.</span><span class="n">controller</span><span class="p">(</span><span class="s1">'ContractorsCtrl'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="o">$</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="o">$</span><span class="n">http</span><span class="p">,</span><span class="o">$</span><span class="n">routeParams</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">   </span><span class="o">$</span><span class="n">http</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'localhost:3000'</span><span class="p">)</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">var</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">;</span>
<span class="w">       </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">contractors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">   </span><span class="p">})</span>
</pre></div>

<h3>HTML</h3>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;body</span><span class="w"> </span><span class="na">ng-app=</span><span class="s">"contractorsApp"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-controller=</span><span class="s">"ContractorsCtrl"</span><span class="nt">&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="nt">&lt;ul&gt;</span>
<span class="w">            </span><span class="nt">&lt;li</span><span class="w"> </span><span class="na">ng-repeat=</span><span class="s">"person in contractors"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">person.name</span><span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="w">        </span><span class="nt">&lt;/ul&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Try adding the following middleware to your NodeJS/Express app (I have added
some comments for your convenience):</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Add headers before the routes are defined</span>
<span class="n">app</span><span class="p">.</span><span class="n">use</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">,</span><span class="w"> </span><span class="n">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Website you wish to allow to connect</span>
<span class="w">    </span><span class="n">res</span><span class="p">.</span><span class="n">setHeader</span><span class="p">(</span><span class="s">'Access-Control-Allow-Origin'</span><span class="p">,</span><span class="w"> </span><span class="s">'http://localhost:8888'</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Request methods you wish to allow</span>
<span class="w">    </span><span class="n">res</span><span class="p">.</span><span class="n">setHeader</span><span class="p">(</span><span class="s">'Access-Control-Allow-Methods'</span><span class="p">,</span><span class="w"> </span><span class="s">'GET, POST, OPTIONS, PUT, PATCH, DELETE'</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Request headers you wish to allow</span>
<span class="w">    </span><span class="n">res</span><span class="p">.</span><span class="n">setHeader</span><span class="p">(</span><span class="s">'Access-Control-Allow-Headers'</span><span class="p">,</span><span class="w"> </span><span class="s">'X-Requested-With,content-type'</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Set to true if you need the website to include cookies in the requests sent</span>
<span class="w">    </span><span class="c1">// to the API (e.g. in case you use sessions)</span>
<span class="w">    </span><span class="n">res</span><span class="p">.</span><span class="n">setHeader</span><span class="p">(</span><span class="s">'Access-Control-Allow-Credentials'</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Pass to next layer of middleware</span>
<span class="w">    </span><span class="n">next</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<p>(You might need to use <code>127.0.0.1</code> instead of <code>localhost</code>.)</p>
<p><br></p>
<h3>Suggest</h3>
<p>Accepted answer is fine, in case you prefer something shorter, you may use a
plugin called <strong>cors</strong> available for Express.js.</p>
<p>It's simple to use, for this particular case:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">cors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'cors'</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">route</span><span class="w"> </span><span class="n">definitions</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">cors</span><span class="p">({</span><span class="n">origin</span><span class="p">:</span><span class="w"> </span><span class="s1">'http://localhost:8888'</span><span class="p">}));</span>
</pre></div>

<p>(You might need to use <code>127.0.0.1</code> instead of <code>localhost</code>.)</p>
<p>The request origin needs to match the allowed origin(s), and you can also have
multiple of them:</p>
<div class="code"><pre class="code literal-block"><span class="nt">app</span><span class="p">.</span><span class="nc">use</span><span class="o">(</span>
<span class="w">  </span><span class="nt">cors</span><span class="o">(</span><span class="p">{</span><span class="n">origin</span><span class="p">:</span><span class="w"> </span><span class="cp">[</span><span class="s1">'http://localhost:8888'</span><span class="p">,</span><span class="w"> </span><span class="s1">'http://127.0.0.1:8888'</span><span class="cp">]</span><span class="p">}</span><span class="o">)</span>
<span class="o">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-a-color-from-hexadecimal-color-string/" class="u-url">How to get a Color from hexadecimal Color String</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-a-color-from-hexadecimal-color-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T04:57:07+08:00" itemprop="datePublished" title="2023-03-05 04:57">2023-03-05 04:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to use a color from an hexa string such as <code>"#FFFF0000"</code> to (say)
change the background color of a Layout. <code>Color.HSVToColor</code> looks like a
winner but it takes a <code>float[]</code> as a parameter.</p>
<p>Am I any close to the solution at all?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try <code>Color</code> class method:</p>
<div class="code"><pre class="code literal-block">public static int parseColor (String colorString)
</pre></div>

<p>From Android documentation:</p>
<blockquote>
<p>Supported formats are: #RRGGBB #AARRGGBB 'red', 'blue', 'green', 'black',
'white', 'gray', 'cyan', 'magenta', 'yellow', 'lightgray', 'darkgray'</p>
</blockquote>
<p>AndroidX: String.toColorInt()</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try:</p>
<div class="code"><pre class="code literal-block">myLayout.setBackgroundColor(Color.parseColor("#636161"));
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2615.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2613.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
