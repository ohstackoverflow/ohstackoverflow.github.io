<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2449) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2449.html">
<link rel="prev" href="index-2450.html" type="text/html">
<link rel="next" href="index-2448.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/best-way-to-extract-a-subvector-from-a-vector/" class="u-url">Best way to extract a subvector from a vector?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/best-way-to-extract-a-subvector-from-a-vector/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T16:59:14+08:00" itemprop="datePublished" title="2023-03-04 16:59">2023-03-04 16:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Suppose I have a <code>std::vector</code> (let's call it <code>myVec</code>) of size <code>N</code>. What's the
simplest way to construct a new vector consisting of a copy of elements X
through Y, where 0 &lt;= X &lt;= Y &lt;= N-1? For example, <code>myVec [100000]</code> through
<code>myVec [100999]</code> in a vector of size <code>150000</code>.</p>
<p>If this cannot be done efficiently with a vector, is there another STL
datatype that I should use instead?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myVec</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">100000</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myVec</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">101000</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">newVec</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p">);</span>
</pre></div>

<p>It's an O(N) operation to construct the new vector, but there isn't really a
better way.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Just use the vector constructor.</p>
<div class="code"><pre class="code literal-block"><span class="nt">std</span><span class="p">::</span><span class="nd">vector</span><span class="o">&lt;</span><span class="nt">int</span><span class="o">&gt;</span><span class="w">   </span><span class="nt">data</span><span class="o">();</span>
<span class="o">//</span><span class="w"> </span><span class="nt">Load</span><span class="w"> </span><span class="nt">Z</span><span class="w"> </span><span class="nt">elements</span><span class="w"> </span><span class="nt">into</span><span class="w"> </span><span class="nt">data</span><span class="w"> </span><span class="nt">so</span><span class="w"> </span><span class="nt">that</span><span class="w"> </span><span class="nt">Z</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">Y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">X</span>

<span class="nt">std</span><span class="p">::</span><span class="nd">vector</span><span class="o">&lt;</span><span class="nt">int</span><span class="o">&gt;</span><span class="w">   </span><span class="nt">sub</span><span class="o">(&amp;</span><span class="nt">data</span><span class="cp">[</span><span class="mi">100000</span><span class="cp">]</span><span class="o">,&amp;</span><span class="nt">data</span><span class="cp">[</span><span class="mi">101000</span><span class="cp">]</span><span class="o">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-way-to-list-all-resources-in-aws/" class="u-url">Is there a way to list all resources in AWS</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-way-to-list-all-resources-in-aws/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T16:57:44+08:00" itemprop="datePublished" title="2023-03-04 16:57">2023-03-04 16:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a way to list all resources in AWS? For all regions, all resources..
Such as list all EC2 instances, all VPCs, all APIs in API Gateway, etc... I
would like to list all resources for my account, since it's hard for me to
find which resources I can relinquish now.</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p><strong>Edit: This answer is deprecated and is incorrect</strong>. There are several ways
to list AWS resources (the AWS Tag Editor, etc.). Check the other answers
for more details.</p>
</blockquote>
<hr>
<p>No.</p>
<p>Each AWS Service (eg Amazon EC2, Amazon S3) have their own set of API calls.
Also, each <strong>Region</strong> is independent.</p>
<p>To obtain a list of all resources, you would have to make API calls to every
service in every region.</p>
<p>You might want to activate AWS Config:</p>
<blockquote>
<p>AWS Config provides a detailed view of the configuration of AWS resources in
your AWS account. This includes how the resources are related to one another
and how they were configured in the past so that you can see how the
configurations and relationships change over time.</p>
</blockquote>
<p>However, AWS Config only collects information about EC2/VPC-related resources,
not everything in your AWS account.</p>
<p><br></p>
<h3>Suggest</h3>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/" class="u-url">Ruby: What does the comment "frozen_string_literal: true" do?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T16:56:20+08:00" itemprop="datePublished" title="2023-03-04 16:56">2023-03-04 16:56</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This is the <code>rspec</code> binstub in my project directory.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/usr/bin/env ruby</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><span class="k">begin</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="nb">load</span><span class="w"> </span><span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s2">"../spring"</span><span class="p">,</span><span class="w"> </span><span class="bp">__FILE__</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="k">rescue</span><span class="w"> </span><span class="no">LoadError</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="k">end</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><span class="c1"># frozen_string_literal: true</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="c1">#</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><span class="c1"># This file was generated by Bundler.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><span class="c1">#</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="c1"># The application 'rspec' is installed as part of a gem, and</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><span class="c1"># this file is here to facilitate running it.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="c1">#</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="nb">require</span><span class="w"> </span><span class="s2">"pathname"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="no">ENV</span><span class="o">[</span><span class="s2">"BUNDLE_GEMFILE"</span><span class="o">]</span><span class="w"> </span><span class="o">||=</span><span class="w"> </span><span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s2">"../../Gemfile"</span><span class="p">,</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="no">Pathname</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">)</span><span class="o">.</span><span class="n">realpath</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code><span class="nb">require</span><span class="w"> </span><span class="s2">"rubygems"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-19"><code data-line-number="19"></code></a></td>
<td class="code"><code><span class="nb">require</span><span class="w"> </span><span class="s2">"bundler/setup"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-20"><code data-line-number="20"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ruby-what-does-the-comment-frozen-string-literal-true-do/#-21"><code data-line-number="21"></code></a></td>
<td class="code"><code><span class="nb">load</span><span class="w"> </span><span class="no">Gem</span><span class="o">.</span><span class="n">bin_path</span><span class="p">(</span><span class="s2">"rspec-core"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rspec"</span><span class="p">)</span>
</code></td>
</tr>
</table></div>
<p>What is this intended to do?</p>
<div class="code"><pre class="code literal-block"># frozen_string_literal: true
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><code># frozen_string_literal: true</code> is a magic comment, supported for the first
time in Ruby 2.3, that tells Ruby that all string literals in the file are
implicitly frozen, as if <code>#freeze</code> had been called on each of them. That is,
if a string literal is defined in a file with this comment, and you call a
method on that string which modifies it, such as <code>&lt;&lt;</code>, you'll get
<code>RuntimeError: can't modify frozen String</code>.</p>
<p>The comment must be on the first line of the file.</p>
<p>In Ruby 2.3, you can use this magic comment <del>to prepare for frozen string
literals being the default in Ruby 3</del>.</p>
<p>In Ruby 2.3 run with the <code>--enable=frozen-string-literal</code> flag, <del>and in Ruby
3,</del> string literals are frozen in all files. You can override the global
setting with <code># frozen_string_literal: false</code>.</p>
<p>If you want a string literal to be mutable regardless of the global or per-
file setting, you can prefix it with the unary <code>+</code> operator (being careful
with operator precedence) or call <code>.dup</code> on it:</p>
<div class="code"><pre class="code literal-block"># frozen_string_literal: true
"".frozen?
=&gt; true
(+"").frozen?
=&gt; false
"".dup.frozen?
=&gt; false
</pre></div>

<p>You can also freeze a mutable (unfrozen) string with unary <code>-</code>.</p>
<p>Source: magic_comment defined in ruby/ruby</p>
<p><br></p>
<h3>Suggest</h3>
<p>It improves application performance by not allocating new space for the same
string, thereby also saving time for garbage collection chores. How? when you
freeze a string literal(string object), you're telling Ruby to not let any of
your programs modify the string literal (object).</p>
<p>Some obvious observations to keep in mind.</p>
<h3>1. By freezing string literals, you're not allocating new memory space for</h3>
<p>it.</p>
<p>Example:</p>
<p><em><strong>Without magic comment</strong> allocates new space for the same string (Observe
the different object IDs printed)</em></p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">hello_id</span>
<span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'hello'</span>
<span class="w">  </span><span class="nv">a</span>.<span class="nv">object_id</span>
<span class="k">end</span>

<span class="nv">puts</span><span class="w"> </span><span class="nv">hello_id</span><span class="w">   </span>#<span class="o">=&gt;</span><span class="w"> </span><span class="mi">70244568358640</span>
<span class="nv">puts</span><span class="w"> </span><span class="nv">hello_id</span><span class="w">   </span>#<span class="o">=&gt;</span><span class="w"> </span><span class="mi">70244568358500</span>
</pre></div>

<p><em><strong>With magic comment</strong> , ruby allocates space only once</em></p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">frozen_string_literal</span>:<span class="w"> </span><span class="nv">true</span>

<span class="nv">def</span><span class="w"> </span><span class="nv">hello_id</span>
<span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'hello'</span>
<span class="w">  </span><span class="nv">a</span>.<span class="nv">object_id</span>
<span class="k">end</span>

<span class="nv">puts</span><span class="w"> </span><span class="nv">hello_id</span><span class="w">   </span>#<span class="o">=&gt;</span><span class="w"> </span><span class="mi">70244568358640</span>
<span class="nv">puts</span><span class="w"> </span><span class="nv">hello_id</span><span class="w">   </span>#<span class="o">=&gt;</span><span class="w"> </span><span class="mi">70244568358640</span>
</pre></div>

<hr>
<h3>2. By freezing string literals, your program will raise an exception when</h3>
<p>trying to modify the string literal.</p>
<p>Example:</p>
<p><em><strong>Without magic comment</strong></em> , you can modify the string literals.</p>
<div class="code"><pre class="code literal-block">name = 'Johny'
name &lt;&lt; ' Cash'

puts name     #=&gt; Johny Cash
</pre></div>

<p><em><strong>With magic comment</strong></em> , an exception will be raised when you modify string
literals</p>
<div class="code"><pre class="code literal-block"># frozen_string_literal: true

name = 'john'
name &lt;&lt; ' cash'  #=&gt; `&lt;main&gt;': can't modify frozen String (FrozenError)

puts name
</pre></div>

<p>There's always more to learn and be flexible:</p>
<ul>
<li>https://bugs.ruby-lang.org/issues/8976</li>
<li>https://www.mikeperham.com/2018/02/28/ruby-optimization-with-one-magic-comment/</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2450.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2448.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
