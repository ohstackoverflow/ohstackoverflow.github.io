<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2455) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2455.html">
<link rel="prev" href="index-2456.html" type="text/html">
<link rel="next" href="index-2454.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-add-license-to-an-existing-github-project/" class="u-url">How to add license to an existing GitHub project</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-add-license-to-an-existing-github-project/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T17:25:44+08:00" itemprop="datePublished" title="2023-03-04 17:25">2023-03-04 17:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When I created a GitHub project I chose None.</p>
<p>How can I now add a GPL license to my already added project?</p>
<p><img alt="screenshot" src="images/BCJoL.png"></p>
<p><br><br></p>
<h2>Answer</h2>
<ol>
<li>Go to your repository</li>
<li>Add a new file by clicking the blue plus icon</li>
<li>Type the file name as License.txt or License.md after which a license picker will show up. Then you can choose the type of license.</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<ol>
<li>Go to your repository</li>
<li>Add a new file by clicking the blue plus icon</li>
<li>Type the file name as License.txt or License.md after which a license picker will show up. Then you can choose the type of license.</li>
</ol>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-see-the-entire-http-request-that-s-being-sent-by-my-python-application/" class="u-url">How can I see the entire HTTP request that's being sent by my Python application?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-see-the-entire-http-request-that-s-being-sent-by-my-python-application/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T17:25:15+08:00" itemprop="datePublished" title="2023-03-04 17:25">2023-03-04 17:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In my case, I'm using the <code>requests</code> library to call PayPal's API over HTTPS.
Unfortunately, I'm getting an error from PayPal, and PayPal support cannot
figure out what the error is or what's causing it. They want me to "Please
provide the entire request, headers included".</p>
<p>How can I do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A simple method: enable logging in recent versions of Requests (1.x and
higher.)</p>
<p>Requests uses the <code>http.client</code> and <code>logging</code> module configuration to control
logging verbosity, as described here.</p>
<h3>Demonstration</h3>
<p>Code excerpted from the linked documentation:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># These two lines enable debugging at httplib level (requests-&gt;urllib3-&gt;http.client)</span>
<span class="c1"># You will see the REQUEST, including HEADERS and DATA, and RESPONSE with HEADERS but without DATA.</span>
<span class="c1"># The only thing missing will be the response.body which is not logged.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">http.client</span> <span class="k">as</span> <span class="nn">http_client</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="c1"># Python 2</span>
    <span class="kn">import</span> <span class="nn">httplib</span> <span class="k">as</span> <span class="nn">http_client</span>
<span class="n">http_client</span><span class="o">.</span><span class="n">HTTPConnection</span><span class="o">.</span><span class="n">debuglevel</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># You must initialize logging, otherwise you'll not see debug output.</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">()</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">requests_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">"requests.packages.urllib3"</span><span class="p">)</span>
<span class="n">requests_log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">requests_log</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://httpbin.org/headers'</span><span class="p">)</span>
</pre></div>

<h3>Example Output</h3>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>python<span class="w"> </span>requests-logging.py<span class="w"> </span>
INFO:requests.packages.urllib3.connectionpool:Starting<span class="w"> </span>new<span class="w"> </span>HTTPS<span class="w"> </span>connection<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="o">)</span>:<span class="w"> </span>httpbin.org
send:<span class="w"> </span><span class="s1">'GET /headers HTTP/1.1\r\nHost: httpbin.org\r\nAccept-Encoding: gzip, deflate, compress\r\nAccept: */*\r\nUser-Agent: python-requests/1.2.0 CPython/2.7.3 Linux/3.2.0-48-generic\r\n\r\n'</span>
reply:<span class="w"> </span><span class="s1">'HTTP/1.1 200 OK\r\n'</span>
header:<span class="w"> </span>Content-Type:<span class="w"> </span>application/json
header:<span class="w"> </span>Date:<span class="w"> </span>Sat,<span class="w"> </span><span class="m">29</span><span class="w"> </span>Jun<span class="w"> </span><span class="m">2013</span><span class="w"> </span><span class="m">11</span>:19:34<span class="w"> </span>GMT
header:<span class="w"> </span>Server:<span class="w"> </span>gunicorn/0.17.4
header:<span class="w"> </span>Content-Length:<span class="w"> </span><span class="m">226</span>
header:<span class="w"> </span>Connection:<span class="w"> </span>keep-alive
DEBUG:requests.packages.urllib3.connectionpool:<span class="s2">"GET /headers HTTP/1.1"</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">226</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">r = requests.get('https://api.github.com', auth=('user', 'pass'))
</pre></div>

<p><code>r</code> is a response. It has a request attribute which has the information you
need.</p>
<div class="code"><pre class="code literal-block"><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">allow_redirects</span><span class="w">  </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">headers</span><span class="w">          </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">register_hook</span>
<span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">auth</span><span class="w">             </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">hooks</span><span class="w">            </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">response</span>
<span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">cert</span><span class="w">             </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">method</span><span class="w">           </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">send</span>
<span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">config</span><span class="w">           </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">params</span><span class="w">           </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">sent</span>
<span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">cookies</span><span class="w">          </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">path_url</span><span class="w">         </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">session</span>
<span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">data</span><span class="w">             </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">prefetch</span><span class="w">         </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">timeout</span>
<span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">deregister_hook</span><span class="w">  </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">proxies</span><span class="w">          </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">url</span>
<span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">files</span><span class="w">            </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">redirect</span><span class="w">         </span><span class="n">r</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">verify</span>
</pre></div>

<p><code>r.request.headers</code> gives the headers:</p>
<div class="code"><pre class="code literal-block">{'Accept': '*/*',
 'Accept-Encoding': 'identity, deflate, compress, gzip',
 'Authorization': u'Basic dXNlcjpwYXNz',
 'User-Agent': 'python-requests/0.12.1'}
</pre></div>

<p>Then <code>r.request.data</code> has the body as a mapping. You can convert this with
<code>urllib.urlencode</code> if they prefer:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">urllib</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">data</span>
<span class="n">encoded_body</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>

<p>depending on the type of the response the <code>.data</code>-attribute may be missing and
a <code>.body</code>-attribute be there instead.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-docker-compose-to-always-re-create-containers-from-fresh-images/" class="u-url">How to get docker-compose to always re-create containers from fresh images?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-docker-compose-to-always-re-create-containers-from-fresh-images/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T17:24:21+08:00" itemprop="datePublished" title="2023-03-04 17:24">2023-03-04 17:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>My docker images are built on a Jenkins CI server and are pushed to our
private Docker Registry. My goal is to provision environments with docker-
compose which always start the originally built state of the images.</p>
<p>I am currently using docker-compose 1.3.2 as well as 1.4.0 on different
machines but we also used older versions previously.</p>
<p>I always used the <code>docker-compose pull &amp;&amp; docker-compose up -d</code> commands to
fetch the fresh images from the registry and start them up. I believe my
preferred behaviour was working as expected up to a certain point in time, but
since then <code>docker-compose up</code> started to re-run previously stopped containers
instead of starting the originally built images every time.</p>
<p>Is there a way to get rid of this behaviour? Could that way be one which is
wired in the docker-compose.yml configuration file to not depend "not
forgetting" something on the command line upon every invocation?</p>
<p>ps. Besides finding a way to achieve my goal, I would also love to know a bit
more about the background of this behaviour. I think the basic idea of Docker
is to build an immutable infrastructure. The current behaviour of docker-
compose just seem to plain clash with this approach.. or do I miss some points
here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>docker-compose up --force-recreate</code> is one option, but if you're using it for
CI, I would start the build with <code>docker-compose rm -f</code> to stop and remove the
containers and volumes (then follow it with pull and up).</p>
<p>This is what I use:</p>
<div class="code"><pre class="code literal-block">docker-compose rm -f
docker-compose pull
docker-compose up --build -d
# Run some tests
./tests
docker-compose stop -t 1
</pre></div>

<p>The reason containers are recreated is to preserve any data volumes that might
be used (and it also happens to make <code>up</code> a lot faster).</p>
<p>If you're doing CI you don't want that, so just removing everything should get
you want you want.</p>
<p>Update: use <code>up --build</code> which was added in <code>docker-compose</code> 1.7</p>
<p><br></p>
<h3>Suggest</h3>
<p>The only solution that worked for me was the <code>--no-cache</code> flag:</p>
<div class="code"><pre class="code literal-block">docker-compose build --no-cache
</pre></div>

<p>This will automatically pull a fresh image from the repo. It also won't use
the cached version that is prebuilt with any parameters you've been using
before.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2456.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2454.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
