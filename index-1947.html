<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1947) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1947.html">
<link rel="prev" href="index-1948.html" type="text/html">
<link rel="next" href="index-1946.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/git-number-of-commits-per-author-on-all-branches/" class="u-url">Git number of commits per author on all branches</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/git-number-of-commits-per-author-on-all-branches/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T13:11:33+08:00" itemprop="datePublished" title="2023-03-03 13:11">2023-03-03 13:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to get the number of commits per author on all branches. I see that</p>
<div class="code"><pre class="code literal-block">git shortlog -s -n
</pre></div>

<p>Prints a very nice list but it is not counting the commits that are not yet
merged from other branches. If iterate this command over every branch then
obviously the common commits get counted multiple times. Could you give me a
script/command that would yield me the overall picture?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">git shortlog -s -n --all --no-merges
</pre></div>

<p>Will give you statistics for all branches.</p>
<p><strong>EDIT</strong> : Added <code>--no-merges</code> to exclude statistics from merge commits.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-cleanest-way-to-ssh-and-run-multiple-commands-in-bash/" class="u-url">What is the cleanest way to ssh and run multiple commands in Bash?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-cleanest-way-to-ssh-and-run-multiple-commands-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T13:11:09+08:00" itemprop="datePublished" title="2023-03-03 13:11">2023-03-03 13:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I already have an ssh agent set up, and I can run commands on an external
server in Bash script doing stuff like:</p>
<div class="code"><pre class="code literal-block">ssh blah_server "ls; pwd;"
</pre></div>

<p>Now, what I'd really like to do is run a lot of long commands on an external
server. Enclosing all of these in between quotation marks would be quite ugly,
and I'd really rather avoid ssh'ing multiple times just to avoid this.</p>
<p>So, is there a way I can do this in one go enclosed in parentheses or
something? I'm looking for something along the lines of:</p>
<div class="code"><pre class="code literal-block">ssh blah_server (
   ls some_folder;
   ./someaction.sh;
   pwd;
)
</pre></div>

<p>Basically, I'll be happy with any solution as long as it's clean.</p>
<h4>Edit</h4>
<p>To clarify, I'm talking about this being part of a larger bash script. Other
people might need to deal with the script down the line, so I'd like to keep
it clean. I don't want to have a bash script with one line that looks like:</p>
<div class="code"><pre class="code literal-block">ssh blah_server "ls some_folder; ./someaction.sh 'some params'; pwd; ./some_other_action 'other params';"
</pre></div>

<p>because it is extremely ugly and difficult to read.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>How about a Bash Here Document:</p>
<div class="code"><pre class="code literal-block">ssh otherhost &lt;&lt; EOF
  ls some_folder; 
  ./someaction.sh 'some params'
  pwd
  ./some_other_action 'other params'
EOF
</pre></div>

<p>To avoid the problems mentioned by @Globalz in the comments, you may be able
to (depending what you're doing on the remote site) get away with replacing
the first line with</p>
<div class="code"><pre class="code literal-block">ssh otherhost /bin/bash &lt;&lt; EOF
</pre></div>

<p>Note that you can do variable substitution in the Here document, but you may
have to deal with quoting issues. For instance, if you quote the "limit
string" (ie. <code>EOF</code> in the above), then you can't do variable substitutions.
But without quoting the limit string, variables are substituted. For example,
if you have defined <code>$NAME</code> above in your shell script, you could do</p>
<div class="code"><pre class="code literal-block">ssh<span class="w"> </span>otherhost<span class="w"> </span>/bin/bash<span class="w"> </span><span class="err">&lt;</span><span class="nt">&lt; EOF</span>
<span class="err">touch</span> <span class="err">"/tmp/${NAME}"</span>
<span class="err">EOF</span>
</pre></div>

<p>and it would create a file on the destination <code>otherhost</code> with the name of
whatever you'd assigned to <code>$NAME</code>. Other rules about shell script quoting
also apply, but are too complicated to go into here.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Edit your script locally, then pipe it into ssh, e.g.</p>
<div class="code"><pre class="code literal-block">cat commands-to-execute-remotely.sh | ssh blah_server
</pre></div>

<p>where <code>commands-to-execute-remotely.sh</code> looks like your list above:</p>
<div class="code"><pre class="code literal-block">ls some_folder
./someaction.sh
pwd;
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-split-by-comma-and-strip-white-spaces-in-python/" class="u-url">How to split by comma and strip white spaces in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-split-by-comma-and-strip-white-spaces-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T13:10:44+08:00" itemprop="datePublished" title="2023-03-03 13:10">2023-03-03 13:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have some python code that splits on comma, but doesn't strip the
whitespace:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; string = "blah, lots  ,  of ,  spaces, here "
&gt;&gt;&gt; mylist = string.split(',')
&gt;&gt;&gt; print mylist
['blah', ' lots  ', '  of ', '  spaces', ' here ']
</pre></div>

<p>I would rather end up with whitespace removed like this:</p>
<div class="code"><pre class="code literal-block">['blah', 'lots', 'of', 'spaces', 'here']
</pre></div>

<p>I am aware that I could loop through the list and strip() each item but, as
this is Python, I'm guessing there's a quicker, easier and more elegant way of
doing it.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use list comprehension -- simpler, and just as easy to read as a <code>for</code> loop.</p>
<div class="code"><pre class="code literal-block"><span class="nv">my_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blah, lots  ,  of ,  spaces, here "</span>
<span class="nb">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="nv">x</span>.<span class="nv">strip</span><span class="ss">()</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">my_string</span>.<span class="nv">split</span><span class="ss">(</span><span class="s1">','</span><span class="ss">)</span>]
#<span class="w"> </span><span class="nb">result</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span>[<span class="s2">"blah"</span>,<span class="w"> </span><span class="s2">"lots"</span>,<span class="w"> </span><span class="s2">"of"</span>,<span class="w"> </span><span class="s2">"spaces"</span>,<span class="w"> </span><span class="s2">"here"</span>]
</pre></div>

<p><strong>See:</strong> Python docs on List Comprehension<br>
A good 2 second explanation of list comprehension.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I came to add:</p>
<div class="code"><pre class="code literal-block">map(str.strip, string.split(','))
</pre></div>

<p>but saw it had already been mentioned by Jason Orendorff in a comment.</p>
<p>Reading Glenn Maynard's comment on the same answer suggesting list
comprehensions over map I started to wonder why. I assumed he meant for
performance reasons, but of course he might have meant for stylistic reasons,
or something else (Glenn?).</p>
<p>So a quick (possibly flawed?) test on my box (Python 2.6.5 on Ubuntu 10.04)
applying the three methods in a loop revealed:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">time</span><span class="w"> </span>./list_comprehension.py<span class="w">  </span><span class="c1"># [word.strip() for word in string.split(',')]</span>
real<span class="w">    </span>0m22.876s

$<span class="w"> </span><span class="nb">time</span><span class="w"> </span>./map_with_lambda.py<span class="w">     </span><span class="c1"># map(lambda s: s.strip(), string.split(','))</span>
real<span class="w">    </span>0m25.736s

$<span class="w"> </span><span class="nb">time</span><span class="w"> </span>./map_with_str.strip.py<span class="w">  </span><span class="c1"># map(str.strip, string.split(','))</span>
real<span class="w">    </span>0m19.428s
</pre></div>

<p>making <code>map(str.strip, string.split(','))</code> the winner, although it seems they
are all in the same ballpark.</p>
<p>Certainly though map (with or without a lambda) should not necessarily be
ruled out for performance reasons, and for me it is at least as clear as a
list comprehension.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1948.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1946.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
