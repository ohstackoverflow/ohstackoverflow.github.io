<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 883) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-883.html">
<link rel="prev" href="index-884.html" type="text/html">
<link rel="next" href="index-882.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/storing-c-template-function-definitions-in-a-cpp-file/" class="u-url">Storing C++ template function definitions in a .CPP file</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/storing-c-template-function-definitions-in-a-cpp-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:33:29+08:00" itemprop="datePublished" title="2023-02-17 18:33">2023-02-17 18:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have some template code that I would prefer to have stored in a CPP file
instead of inline in the header. I know this can be done as long as you know
which template types will be used. For example:</p>
<p><strong>.h file</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">foo</span>
<span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
<span class="w">    </span><span class="n">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">typename</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">do</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<p><strong>.cpp file</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">typename</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">foo</span><span class="p">::</span><span class="n">do</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">t</span>
<span class="p">}</span>

<span class="n">template</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">foo</span><span class="p">::</span><span class="n">do</span><span class="o">&lt;</span><span class="nb nb-Type">int</span><span class="o">&gt;</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="o">&amp;</span><span class="p">);</span>
<span class="n">template</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">foo</span><span class="p">::</span><span class="n">do</span><span class="o">&lt;</span><span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="o">&amp;</span><span class="p">);</span>
</pre></div>

<p>Note the last two lines - the foo::do template function is only used with ints
and std::strings, so those definitions mean the app will link.</p>
<p>My question is - is this a nasty hack or will this work with other
compilers/linkers? I am only using this code with VS2008 at the moment but
will be wanting to port to other environments.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The problem you describe can be solved by defining the template in the header,
or via the approach you describe above.</p>
<p>I recommend reading the following points from the C++ FAQ Lite:</p>
<ul>
<li>Why can’t I separate the definition of my templates class from its declaration and put it inside a .cpp file?</li>
<li>How can I avoid linker errors with my template functions?</li>
<li>How does the C++ keyword export help with template linker errors?</li>
</ul>
<p>They go into a lot of detail about these (and other) template issues.</p>
<p><br></p>
<h3>Suggest</h3>
<p>For others on this page wondering what the correct syntax is (as did I) for
explicit template specialisation (or at least in VS2008), its the following...</p>
<p>In your .h file...</p>
<div class="code"><pre class="code literal-block"><span class="n">template</span><span class="o">&lt;</span><span class="n">typename</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span><span class="w"> </span><span class="n">foo</span>
<span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">bar</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">t</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<p>And in your .cpp file</p>
<div class="code"><pre class="code literal-block"><span class="n">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">bar</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="n">t</span><span class="p">)</span>
<span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Explicit</span><span class="w"> </span><span class="n">template</span><span class="w"> </span><span class="n">instantiation</span>
<span class="n">template</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">foo</span><span class="o">&lt;</span><span class="nb nb-Type">int</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-max-size-of-localstorage-values/" class="u-url">What is the max size of localStorage values?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-max-size-of-localstorage-values/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:32:41+08:00" itemprop="datePublished" title="2023-02-17 18:32">2023-02-17 18:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Since <code>localStorage</code> (currently) only supports strings as values, and in order
to do that the objects need to be stringified (stored as JSON-string) before
they can be stored, is there a defined limitation regarding the length of the
values.</p>
<p>Does anyone know if there is a definition which applies to all browsers?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Quoting from the Wikipedia article on Web Storage:</p>
<blockquote>
<p>Web storage can be viewed simplistically as an improvement on cookies,
providing much greater storage capacity ( <strong>10 MB per origin in Google
Chrome(https://plus.google.com/u/0/+FrancoisBeaufort/posts/S5Q9HqDB8bh),
Mozilla Firefox, and Opera; 10 MB per storage area in Internet Explorer</strong> )
and better programmatic interfaces.</p>
</blockquote>
<p>And also quoting from a John Resig article [posted January 2007]:</p>
<blockquote>
<p><strong>Storage Space</strong></p>
<p>It is implied that, with DOM Storage, you have considerably more storage
space than the typical user agent limitations imposed upon Cookies. However,
the amount that is provided is not defined in the specification, nor is it
meaningfully broadcast by the user agent.</p>
<p>If you look at the Mozilla source code we can see that 5120KB is the default
storage size for an entire domain. This gives you considerably more space to
work with than a typical 2KB cookie.</p>
<p><strong>However, the size of this storage area can be customized by the user</strong> (so
a 5MB storage area is not guaranteed, nor is it implied) and the user agent
(Opera, for example, may only provide 3MB - but only time will tell.)</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Actually Opera doesn't have 5MB limit. It offers to increase limit as
applications requires more. User can even choose "Unlimited storage" for a
domain.</p>
<p>You can easily test localStorage limits/quota yourself.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-should-i-deal-with-package-xxx-is-not-available-for-r-version-x-y-z-warning/" class="u-url">How should I deal with "package 'xxx' is not available (for R version x.y.z)" warning?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-should-i-deal-with-package-xxx-is-not-available-for-r-version-x-y-z-warning/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:32:13+08:00" itemprop="datePublished" title="2023-02-17 18:32">2023-02-17 18:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I tried to install a package, using</p>
<div class="code"><pre class="code literal-block">install.packages("foobarbaz")
</pre></div>

<p>but received the warning</p>
<div class="code"><pre class="code literal-block"><span class="nv">Warning</span><span class="w"> </span><span class="nv">message</span>:
<span class="nv">package</span><span class="w"> </span><span class="s1">'foobarbaz'</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="ss">(</span><span class="k">for</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="nv">x</span>.<span class="nv">y</span>.<span class="nv">z</span><span class="ss">)</span>
</pre></div>

<p>Why doesn't R think that the package is available?</p>
<p>See also these questions referring to specific instances of this problem:</p>
<p>My package doesn't work for R 2.15.2<br>
package 'Rbbg' is not available (for R version 2.15.2)<br>
package is not available (for R version 2.15.2)<br>
package doMC NOT available for R version 3.0.0 warning in install.packages<br>
Dependency ‘Rglpk’ is not available for package ‘fPortfolio’<br>
What to do when a package is not available for our R version?<br>
Is the bigvis package for R not available for R version 3.0.1?<br>
package ‘syncwave’/‘mvcwt’ is not available (for R version 3.0.2)<br>
package ‘diamonds’ is not available (for R version 3.0.0)<br>
Is the plyr package for R not available for R version 3.0.2?<br>
Package bigmemory not installing on R 64 3.0.2<br>
package "makeR" is not available (for version 3.0.2)<br>
package ‘RTN’ is not available (for R version 3.0.1)<br>
Trouble Installing geoR package<br>
package ‘twitterR’ is not available (for R version 3.1.0)<br>
How to install 'Rcpp, package? I got "package is not available"<br>
package ‘dataset’ is not available (for R version 3.1.1)<br>
"package ‘rhipe’ is not available (for R version 3.1.2)"</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>1. You can't spell</strong></p>
<p>The first thing to test is <em>have you spelled the name of the package
correctly?</em> Package names are case sensitive in R.</p>
<hr>
<p><strong>2. You didn't look in the right repository</strong></p>
<p>Next, you should check to see if the package is available. Type</p>
<div class="code"><pre class="code literal-block">setRepositories()
</pre></div>

<p>See also ?setRepositories.</p>
<p>To see which repositories R will look in for your package, and optionally
select some additional ones. At the very least, you will usually want <code>CRAN</code>
to be selected, and <code>CRAN (extras)</code> if you use Windows, and the <code>Bioc*</code>
repositories if you do any biological analyses.</p>
<p>To permanently change this, add a line like <code>setRepositories(ind = c(1:6, 8))</code>
to your <code>Rprofile.site</code> file.</p>
<hr>
<p><strong>3. The package is not in the repositories you selected</strong></p>
<p>Return all the available packages using</p>
<div class="code"><pre class="code literal-block"><span class="n">ap</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">available.packages</span><span class="p">()</span>
</pre></div>

<p>See also Names of R's available packages, ?available.packages.</p>
<p>Since this is a large matrix, you may wish to use the data viewer to examine
it. Alternatively, you can quickly check to see if the package is available by
testing against the row names.</p>
<div class="code"><pre class="code literal-block">View(ap)
"foobarbaz" %in% rownames(ap)
</pre></div>

<p>Alternatively, the list of available packages can be seen in a browser for
CRAN, CRAN (extras), Bioconductor, R-forge, RForge, and GitHub.</p>
<p>Another possible warnings message you may get when interacting with CRAN
mirrors is:</p>
<div class="code"><pre class="code literal-block"><span class="n">Warning</span><span class="o">:</span><span class="w"> </span><span class="n">unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">repository</span>
</pre></div>

<p>Which may indicate the selected CRAN repository is currently be unavailable.
You can select a different mirror with <code>chooseCRANmirror()</code> and try the
installation again.</p>
<hr>
<p>There are several reasons why a package may not be available.</p>
<hr>
<p><strong>4. You don't want a package</strong></p>
<p>Perhaps you don't really want a package. It is common to be confused about the
difference between a package and a library, or a package and a dataset.</p>
<blockquote>
<p>A package is a standardized collection of material extending R, e.g.
providing code, data, or documentation. A library is a place (directory)
where R knows to find packages it can use</p>
</blockquote>
<p>To see available datasets, type</p>
<div class="code"><pre class="code literal-block">data()
</pre></div>

<hr>
<p><strong>5. R or Bioconductor is out of date</strong></p>
<p>It may have a dependency on a more recent version of R (or one of the packages
that it imports/depends upon does). Look at</p>
<div class="code"><pre class="code literal-block">ap["foobarbaz", "Depends"]
</pre></div>

<p>and consider updating your R installation to the current version. On Windows,
this is most easily done via the <code>installr</code> package.</p>
<div class="code"><pre class="code literal-block">library(installr)
updateR()
</pre></div>

<p>(Of course, you may need to <code>install.packages("installr")</code> first.)</p>
<p>Equivalently for Bioconductor packages, you may need to update your
Bioconductor installation.</p>
<div class="code"><pre class="code literal-block">source("http://bioconductor.org/biocLite.R")
biocLite("BiocUpgrade")
</pre></div>

<hr>
<p><strong>6. The package is out of date</strong></p>
<p>It may have been archived (if it is no longer maintained and no longer passes
<code>R CMD check</code> tests).</p>
<p>In this case, you can load an old version of the package using
<code>install_version()</code></p>
<div class="code"><pre class="code literal-block">library(remotes)
install_version("foobarbaz", "0.1.2")
</pre></div>

<p>An alternative is to install from the GitHub CRAN mirror.</p>
<div class="code"><pre class="code literal-block">library(remotes)
install_github("cran/foobarbaz")
</pre></div>

<hr>
<p><strong>7. There is no Windows/OS X/Linux binary</strong></p>
<p>It may not have a Windows binary due to requiring additional software that
CRAN does not have. Additionally, some packages are available only via the
sources for some or all platforms. In this case, there may be a version in the
<code>CRAN (extras)</code> repository (see <code>setRepositories</code> above).</p>
<p>If the package requires compiling code (e.g. C, C++, FORTRAN) then on Windows
install Rtools or on OS X install the developer tools accompanying XCode, and
install the source version of the package via:</p>
<div class="code"><pre class="code literal-block"><span class="nv">install</span>.<span class="nv">packages</span><span class="ss">(</span><span class="s2">"foobarbaz"</span>,<span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">Or</span><span class="w"> </span><span class="nv">equivalently</span>,<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Bioconductor</span><span class="w"> </span><span class="nv">packages</span>:
<span class="nv">source</span><span class="ss">(</span><span class="s2">"http://bioconductor.org/biocLite.R"</span><span class="ss">)</span>
<span class="nv">biocLite</span><span class="ss">(</span><span class="s2">"foobarbaz"</span>,<span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="ss">)</span>
</pre></div>

<p>On CRAN, you can tell if you'll need special tools to build the package from
source by looking at the <code>NeedsCompilation</code> flag in the description.</p>
<hr>
<p><strong>8. The package is on GitHub/Bitbucket/Gitorious</strong></p>
<p>It may have a repository on GitHub/Bitbucket/Gitorious. These packages require
the <code>remotes</code> package to install.</p>
<div class="code"><pre class="code literal-block">library(remotes)
install_github("packageauthor/foobarbaz")
install_bitbucket("packageauthor/foobarbaz")
install_gitorious("packageauthor/foobarbaz")
</pre></div>

<p>(As with <code>installr</code>, you may need to <code>install.packages("remotes")</code> first.)</p>
<hr>
<p><strong>9. There is no source version of the package</strong></p>
<p>Although the binary version of your package is available, the source version
is not. You can turn off this check by setting</p>
<div class="code"><pre class="code literal-block">options(install.packages.check.source = "no")
</pre></div>

<p>as described in this SO answer by imanuelc and the Details section of
<code>?install.packages</code>.</p>
<hr>
<p><strong>10. The package is in a non-standard repository</strong></p>
<p>Your package is in a non-standard repository (e.g. <code>Rbbg</code>). Assuming that it
is reasonably compliant with CRAN standards, you can still download it using
<code>install.packages</code>; you just have to specify the repository URL.</p>
<div class="code"><pre class="code literal-block">install.packages("Rbbg", repos = "http://r.findata.org")
</pre></div>

<p><code>RHIPE</code> on the other hand isn't in a CRAN-like repository and has its own
installation instructions.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In the R 3.2.3 (new in 2016) there was a bug, preventing it some times from
finding correct package. The workaround is to set repository manually:</p>
<div class="code"><pre class="code literal-block">install.packages("lubridate", dependencies=TRUE, repos='http://cran.rstudio.com/')
</pre></div>

<p>Found solution in other question</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-884.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-882.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
