<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 975) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-975.html">
<link rel="prev" href="index-976.html" type="text/html">
<link rel="next" href="index-974.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database/" class="u-url">Is it possible to insert multiple rows at a time in an SQLite database?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:14:35+08:00" itemprop="datePublished" title="2023-02-17 21:14">2023-02-17 21:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In MySQL you can insert multiple rows like this:</p>
<div class="code"><pre class="code literal-block">INSERT INTO 'tablename' ('column1', 'column2') VALUES
    ('data1', 'data2'),
    ('data1', 'data2'),
    ('data1', 'data2'),
    ('data1', 'data2');
</pre></div>

<p>However, I am getting an error when I try to do something like this. Is it
possible to insert multiple rows at a time in an SQLite database? What is the
syntax to do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>update</h3>
<p>As BrianCampbell points out here, <strong>SQLite 3.7.11 and above now supports the
simpler syntax of the original post</strong>. However, the approach shown is still
appropriate if you want maximum compatibility across legacy databases.</p>
<h3>original answer</h3>
<p>If I had privileges, I would bump river's reply: You <strong>can</strong> insert multiple
rows in SQLite, you just need <strong>different syntax</strong>. To make it perfectly
clear, the OPs MySQL example:</p>
<div class="code"><pre class="code literal-block">INSERT INTO 'tablename' ('column1', 'column2') VALUES
  ('data1', 'data2'),
  ('data1', 'data2'),
  ('data1', 'data2'),
  ('data1', 'data2');
</pre></div>

<p>This can be recast into SQLite as:</p>
<div class="code"><pre class="code literal-block">     INSERT INTO 'tablename'
          SELECT 'data1' AS 'column1', 'data2' AS 'column2'
UNION ALL SELECT 'data1', 'data2'
UNION ALL SELECT 'data1', 'data2'
UNION ALL SELECT 'data1', 'data2'
</pre></div>

<h3>a note on performance</h3>
<p>I originally used this technique to efficiently load large datasets from Ruby
on Rails. <strong>However</strong> , as Jaime Cook points out, it's not clear this is any
faster wrapping individual <code>INSERTs</code> within a single transaction:</p>
<div class="code"><pre class="code literal-block"><span class="kr">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="s">'tablename'</span> <span class="n">table</span> <span class="n">VALUES</span> <span class="p">(</span><span class="s">'data1'</span><span class="p">,</span> <span class="s">'data2'</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="s">'tablename'</span> <span class="n">table</span> <span class="n">VALUES</span> <span class="p">(</span><span class="s">'data3'</span><span class="p">,</span> <span class="s">'data4'</span><span class="p">);</span>
<span class="p">...</span>
<span class="n">COMMIT</span><span class="p">;</span>
</pre></div>

<p>If efficiency is your goal, you should try this first.</p>
<h3>a note on UNION vs UNION ALL</h3>
<p>As several people commented, if you use <code>UNION ALL</code> (as shown above), all rows
will be inserted, so in this case, you'd get four rows of <code>data1, data2</code>. If
you omit the <code>ALL</code>, then duplicate rows will be eliminated (and the operation
will presumably be a bit slower). We're using UNION ALL since it more closely
matches the semantics of the original post.</p>
<h3>in closing</h3>
<p>P.S.: Please +1 river's reply, as it presented the solution first.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Yes it is possible, but not with the usual comma-separated insert values.</p>
<p>Try this...</p>
<div class="code"><pre class="code literal-block">insert into myTable (col1,col2) 
     select aValue as col1,anotherValue as col2 
     union select moreValue,evenMoreValue 
     union...
</pre></div>

<p>Yes, it's a little ugly but easy enough to automate the generation of the
statement from a set of values. Also, it appears you only need to declare the
column names in the first select.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/unknown-vs-any/" class="u-url">'unknown' vs. 'any'</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/unknown-vs-any/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:13:36+08:00" itemprop="datePublished" title="2023-02-17 21:13">2023-02-17 21:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>TypeScript 3.0 introduces <code>unknown</code> type, according to their wiki:</p>
<blockquote>
<p>unknown is now a reserved type name, as it is now a built-in type. Depending
on your intended use of unknown, you may want to remove the declaration
entirely (favoring the newly introduced unknown type), or rename it to
something else.</p>
</blockquote>
<p>What is difference between <code>unknown</code> and <code>any</code>? When should we use <code>unknown</code>
over <code>any</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can read more about <code>unknown</code> in the PR or the RC announcement, but the
gist of it is:</p>
<blockquote>
<p>[..] unknown which is the type-safe counterpart of any. Anything is
assignable to unknown, but unknown isn't assignable to anything but itself
and any without a type assertion or a control flow based narrowing.
Likewise, no operations are permitted on an unknown without first asserting
or narrowing to a more specific type.</p>
</blockquote>
<p>A few examples:</p>
<div class="code"><pre class="code literal-block"><span class="n">let</span><span class="w"> </span><span class="n">vAny</span><span class="p">:</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">          </span><span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span>
<span class="n">let</span><span class="w"> </span><span class="n">vUnknown</span><span class="p">:</span><span class="w"> </span><span class="n">unknown</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">assign</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">unknown</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">any</span>


<span class="n">let</span><span class="w"> </span><span class="n">s1</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vAny</span><span class="p">;</span><span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Any</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">assignable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span>
<span class="n">let</span><span class="w"> </span><span class="n">s2</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vUnknown</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Invalid</span><span class="p">;</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="s1">'t assign vUnknown to any other type (without an explicit assertion)</span>

<span class="n">vAny</span><span class="o">.</span><span class="n">method</span><span class="p">();</span><span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Ok</span><span class="p">;</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">goes</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">any</span>
<span class="n">vUnknown</span><span class="o">.</span><span class="n">method</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Not</span><span class="w"> </span><span class="n">ok</span><span class="p">;</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">don</span><span class="s1">'t know anything about this variable</span>
</pre></div>

<p>The suggested usage is:</p>
<blockquote>
<p>There are often times where we want to describe the least-capable type in
TypeScript. This is useful for APIs that want to signal “this can be any
value, so you must perform some type of checking before you use it”. This
forces users to safely introspect returned values.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>The difference between unknown and any is described as:</p>
<blockquote>
<p>Much like <code>any</code>, any value is assignable to <code>unknown</code>; however, unlike
<code>any</code>, you cannot access any properties on values with the type <code>unknown</code>,
nor can you call/construct them. Furthermore, values of type <code>unknown</code> can
only be assigned to <code>unknown</code> or <code>any</code>.</p>
</blockquote>
<p>To answer your question of when should you use <code>unknown</code> over <code>any</code>:</p>
<blockquote>
<p>This is useful for APIs that want to signal “this can be any value, so you
<em>must</em> perform some type of checking before you use it”. This forces users
to safely introspect returned values.</p>
</blockquote>
<p>Take a look at the TypeScript 3.0 announcement for examples of type checking a
variable of type <code>unknown</code> and a more detailed explanation.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-unique-is-uuid/" class="u-url">How unique is UUID?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-unique-is-uuid/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:12:54+08:00" itemprop="datePublished" title="2023-02-17 21:12">2023-02-17 21:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How safe is it to use UUID to uniquely identify something (I'm using it for
files uploaded to the server)? As I understand it, it is based off random
numbers. However, it seems to me that given enough time, it would eventually
repeat it self, just by pure chance. Is there a better system or a pattern of
some type to alleviate this issue?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Very safe:</p>
<blockquote>
<p>the annual risk of a given person being hit by a meteorite is estimated to
be one chance in 17 billion, which means the probability is about
0.00000000006 (6 × 10−11), equivalent to the odds of creating a few tens of
trillions of UUIDs in a year and having one duplicate. In other words, only
after generating 1 billion UUIDs every second for the next 100 years, the
probability of creating just one duplicate would be about 50%.</p>
</blockquote>
<p>Caveat:</p>
<blockquote>
<p>However, these probabilities only hold when the UUIDs are generated using
sufficient entropy. Otherwise, the probability of duplicates could be
significantly higher, since the statistical dispersion might be lower. Where
unique identifiers are required for distributed applications, so that UUIDs
do not clash even when data from many devices is merged, the randomness of
the seeds and generators used on every device must be reliable for the life
of the application. Where this is not feasible, RFC4122 recommends using a
namespace variant instead.</p>
</blockquote>
<p>Source: The <em>Random UUID probability of duplicates</em> section of the Wikipedia
article on Universally unique identifiers (link leads to a revision from
December 2016 before editing reworked the section).</p>
<p>Also see the current section on the same subject on the same Universally
unique identifier article, <em>Collisions</em>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If by "given enough time" you mean 100 years and you're creating them at a
rate of a billion a second, then yes, you have a 50% chance of having a
collision after 100 years.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-976.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-974.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
