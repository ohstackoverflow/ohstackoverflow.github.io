<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2629) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2629.html">
<link rel="prev" href="index-2630.html" type="text/html">
<link rel="next" href="index-2628.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-replace-every-occurrence-of-a-string-in-a-file-with-powershell/" class="u-url">How can I replace every occurrence of a String in a file with PowerShell?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-replace-every-occurrence-of-a-string-in-a-file-with-powershell/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T06:07:51+08:00" itemprop="datePublished" title="2023-03-05 06:07">2023-03-05 06:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Using PowerShell, I want to replace all exact occurrences of <code>[MYID]</code> in a
given file with <code>MyValue</code>. What is the easiest way to do so?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use (V3 version):</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="k">Get</span><span class="o">-</span><span class="n">Content</span><span class="w"> </span><span class="nl">c</span><span class="p">:</span><span class="err">\</span><span class="n">temp</span><span class="err">\</span><span class="n">test</span><span class="p">.</span><span class="n">txt</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="s1">'[MYID]'</span><span class="p">,</span><span class="w"> </span><span class="s1">'MyValue'</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Set</span><span class="o">-</span><span class="n">Content</span><span class="w"> </span><span class="nl">c</span><span class="p">:</span><span class="err">\</span><span class="n">temp</span><span class="err">\</span><span class="n">test</span><span class="p">.</span><span class="n">txt</span>
</pre></div>

<p>Or for V2:</p>
<div class="code"><pre class="code literal-block">(Get-Content c:\temp\test.txt) -replace '\[MYID\]', 'MyValue' | Set-Content c:\temp\test.txt
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I prefer using the File-class of .NET and its static methods as seen in the
following example.</p>
<div class="code"><pre class="code literal-block"><span class="err">$</span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">System.IO.File</span><span class="o">]::</span><span class="n">ReadAllText</span><span class="p">(</span><span class="ss">"c:\bla.txt"</span><span class="p">).</span><span class="nf">Replace</span><span class="p">(</span><span class="ss">"[MYID]"</span><span class="p">,</span><span class="ss">"MyValue"</span><span class="p">)</span>
<span class="o">[</span><span class="n">System.IO.File</span><span class="o">]::</span><span class="n">WriteAllText</span><span class="p">(</span><span class="ss">"c:\bla.txt"</span><span class="p">,</span><span class="w"> </span><span class="err">$</span><span class="n">content</span><span class="p">)</span>
</pre></div>

<p>This has the advantage of working with a single String instead of a String-
array as with Get-Content. The methods also take care of the encoding of the
file (UTF-8 BOM, etc.) without you having to take care most of the time.</p>
<p>Also the methods don't mess up the line endings (Unix line endings that might
be used) in contrast to an algorithm using Get-Content and piping through to
Set-Content.</p>
<p>So for me: Fewer things that could break over the years.</p>
<p>A little-known thing when using .NET classes is that when you have typed in
"[System.IO.File]::" in the PowerShell window you can press the <code>Tab</code> key to
step through the methods there.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/should-java-8-getters-return-optional-type/" class="u-url">Should Java 8 getters return optional type?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/should-java-8-getters-return-optional-type/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T06:04:19+08:00" itemprop="datePublished" title="2023-03-05 06:04">2023-03-05 06:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>Optional</code> type introduced in Java 8 is a new thing for many developers.</p>
<p>Is a getter method returning <code>Optional&lt;Foo&gt;</code> type in place of the classic
<code>Foo</code> a good practice? Assume that the value can be <code>null</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Of course, people will do what they want. But we did have a clear intention
when adding this feature, and it was <em>not</em> to be a general purpose Maybe type,
as much as many people would have liked us to do so. Our intention was to
provide a limited mechanism for library method return types where there needed
to be a clear way to represent "no result", and using <code>null</code> for such was
overwhelmingly likely to cause errors.</p>
<p>For example, you probably should never use it for something that returns an
array of results, or a list of results; instead return an empty array or list.
You should almost never use it as a field of something or a method parameter.</p>
<p>I think routinely using it as a return value for getters would definitely be
over-use.</p>
<p>There's nothing <em>wrong</em> with Optional that it should be avoided, it's just not
what many people wish it were, and accordingly we were fairly concerned about
the risk of zealous over-use.</p>
<p>(Public service announcement: <em>NEVER</em> call <code>Optional.get</code> unless you can prove
it will never be null; instead use one of the safe methods like <code>orElse</code> or
<code>ifPresent</code>. In retrospect, we should have called <code>get</code> something like
<code>getOrElseThrowNoSuchElementException</code> or something that made it far clearer
that this was a highly dangerous method that undermined the whole purpose of
<code>Optional</code> in the first place. Lesson learned. (UPDATE: Java 10 has
<code>Optional.orElseThrow()</code>, which is semantically equivalent to <code>get()</code>, but
whose name is more appropriate.))</p>
<p><br></p>
<h3>Suggest</h3>
<p>After doing a bit of research of my own, I've come across a number of things
that might suggest when this is appropriate. The most authoritative being the
following quote from an Oracle article:</p>
<blockquote>
<p><em>"It is important to note that the intention of the Optional class is <strong>not
to replace every single null reference</strong>. Instead, its purpose is to help
design <strong>more-comprehensible APIs</strong> so that by just reading the signature of
a method, you can tell whether you can expect an optional value. This forces
you to actively unwrap an Optional to deal with the absence of a value."</em> -
Tired of Null Pointer Exceptions? Consider Using Java SE 8's Optional!</p>
</blockquote>
<p>I also found this excerpt from Java 8 Optional: How to use it</p>
<blockquote>
<p><em>"Optional is not meant to be used in these contexts, as it won't buy us
anything:</em></p>
<ul>
<li><em>in the domain model layer (not serializable)</em></li>
<li><em>in DTOs (same reason)</em></li>
<li><em>in input parameters of methods</em></li>
<li>
<em>in constructor parameters"</em>
</li>
</ul>
</blockquote>
<p>Which also seems to raise some valid points.</p>
<p>I wasn't able to find any negative connotations or red flags to suggest that
<code>Optional</code> should be avoided. I think the general idea is, if it's helpful or
improves the usability of your API, use it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-set-sqlite3-to-be-case-insensitive-when-string-comparing/" class="u-url">How to set Sqlite3 to be case insensitive when string comparing?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-set-sqlite3-to-be-case-insensitive-when-string-comparing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T06:02:58+08:00" itemprop="datePublished" title="2023-03-05 06:02">2023-03-05 06:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to select records from sqlite3 database by string matching. But if I
use '=' in the where clause, I found that sqlite3 is case sensitive. Can
anyone tell me how to use string comparing case-insensitive?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use <code>COLLATE NOCASE</code> in your <code>SELECT</code> query:</p>
<div class="code"><pre class="code literal-block">SELECT * FROM ... WHERE name = 'someone' COLLATE NOCASE
</pre></div>

<p>Additionaly, in SQLite, you can indicate that a column should be case
insensitive when you create the table by specifying <code>collate nocase</code> in the
column definition (the other options are <code>binary</code> (the default) and <code>rtrim</code>;
see here). You can specify <code>collate nocase</code> when you create an index as well.
For example:</p>
<div class="code"><pre class="code literal-block">create table Test
(
  Text_Value  text collate nocase
);

insert into Test values ('A');
insert into Test values ('b');
insert into Test values ('C');

create index Test_Text_Value_Index
  on Test (Text_Value collate nocase);
</pre></div>

<p>Expressions involving <code>Test.Text_Value</code> should now be case insensitive. For
example:</p>
<div class="code"><pre class="code literal-block">sqlite&gt; select Text_Value from Test where Text_Value = 'B';
Text_Value      
----------------
b

sqlite&gt; select Text_Value from Test order by Text_Value;
Text_Value      
----------------
A               
b               
C

sqlite&gt; select Text_Value from Test order by Text_Value desc;
Text_Value      
----------------
C               
b               
A
</pre></div>

<p>The optimiser can also potentially make use of the index for case-insensitive
searching and matching on the column. You can check this using the <code>explain</code>
SQL command, e.g.:</p>
<div class="code"><pre class="code literal-block"><span class="nv">sqlite</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">explain</span><span class="w"> </span><span class="nv">select</span><span class="w"> </span><span class="nv">Text_Value</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">Test</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">Text_Value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'b'</span><span class="c1">;</span>
<span class="nv">addr</span><span class="w">              </span><span class="nv">opcode</span><span class="w">          </span><span class="nv">p1</span><span class="w">          </span><span class="nv">p2</span><span class="w">          </span><span class="nv">p3</span><span class="w">                               </span>
<span class="o">----------------</span><span class="w">  </span><span class="o">--------------</span><span class="w">  </span><span class="o">----------</span><span class="w">  </span><span class="o">----------</span><span class="w">  </span><span class="o">---------------------------------</span>
<span class="mi">0</span><span class="w">                 </span><span class="k">Goto</span><span class="w">            </span><span class="nl">0</span><span class="w">           </span><span class="mi">16</span><span class="w">                                           </span>
<span class="mi">1</span><span class="w">                 </span><span class="nv">Integer</span><span class="w">         </span><span class="mi">0</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">2</span><span class="w">                 </span><span class="nv">OpenRead</span><span class="w">        </span><span class="mi">1</span><span class="w">           </span><span class="mi">3</span><span class="w">           </span><span class="nv">keyinfo</span><span class="ss">(</span><span class="mi">1</span>,<span class="nv">NOCASE</span><span class="ss">)</span><span class="w">                </span>
<span class="mi">3</span><span class="w">                 </span><span class="nv">SetNumColumns</span><span class="w">   </span><span class="mi">1</span><span class="w">           </span><span class="mi">2</span><span class="w">                                            </span>
<span class="mi">4</span><span class="w">                 </span><span class="nv">String8</span><span class="w">         </span><span class="mi">0</span><span class="w">           </span><span class="mi">0</span><span class="w">           </span><span class="nv">b</span><span class="w">                                </span>
<span class="mi">5</span><span class="w">                 </span><span class="nv">IsNull</span><span class="w">          </span><span class="o">-</span><span class="mi">1</span><span class="w">          </span><span class="mi">14</span><span class="w">                                           </span>
<span class="mi">6</span><span class="w">                 </span><span class="nv">MakeRecord</span><span class="w">      </span><span class="mi">1</span><span class="w">           </span><span class="mi">0</span><span class="w">           </span><span class="nv">a</span><span class="w">                                </span>
<span class="mi">7</span><span class="w">                 </span><span class="nv">MemStore</span><span class="w">        </span><span class="mi">0</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">8</span><span class="w">                 </span><span class="nv">MoveGe</span><span class="w">          </span><span class="mi">1</span><span class="w">           </span><span class="mi">14</span><span class="w">                                           </span>
<span class="mi">9</span><span class="w">                 </span><span class="nv">MemLoad</span><span class="w">         </span><span class="mi">0</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">10</span><span class="w">                </span><span class="nv">IdxGE</span><span class="w">           </span><span class="mi">1</span><span class="w">           </span><span class="mi">14</span><span class="w">          </span><span class="o">+</span><span class="w">                                </span>
<span class="mi">11</span><span class="w">                </span><span class="nv">Column</span><span class="w">          </span><span class="mi">1</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">12</span><span class="w">                </span><span class="nv">Callback</span><span class="w">        </span><span class="mi">1</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">13</span><span class="w">                </span><span class="k">Next</span><span class="w">            </span><span class="mi">1</span><span class="w">           </span><span class="mi">9</span><span class="w">                                            </span>
<span class="mi">14</span><span class="w">                </span><span class="nv">Close</span><span class="w">           </span><span class="mi">1</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">15</span><span class="w">                </span><span class="nv">Halt</span><span class="w">            </span><span class="mi">0</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">16</span><span class="w">                </span><span class="nv">Transaction</span><span class="w">     </span><span class="mi">0</span><span class="w">           </span><span class="mi">0</span><span class="w">                                            </span>
<span class="mi">17</span><span class="w">                </span><span class="nv">VerifyCookie</span><span class="w">    </span><span class="mi">0</span><span class="w">           </span><span class="mi">4</span><span class="w">                                            </span>
<span class="mi">18</span><span class="w">                </span><span class="k">Goto</span><span class="w">            </span><span class="nl">0</span><span class="w">           </span><span class="mi">1</span><span class="w">                                            </span>
<span class="mi">19</span><span class="w">                </span><span class="nv">Noop</span><span class="w">            </span><span class="mi">0</span><span class="w">           </span><span class="mi">0</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">SELECT * FROM ... WHERE name = 'someone' COLLATE NOCASE
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2630.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2628.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
