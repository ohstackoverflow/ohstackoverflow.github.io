<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 495) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-495.html">
<link rel="prev" href="index-496.html" type="text/html">
<link rel="next" href="index-494.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/javascript-call-apply-vs-bind/" class="u-url">Javascript call() &amp; apply() vs bind()?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/javascript-call-apply-vs-bind/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:18:11+08:00" itemprop="datePublished" title="2023-02-17 08:18">2023-02-17 08:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I already know that <code>apply</code> and <code>call</code> are similar functions which set <code>this</code>
(context of a function).</p>
<p>The difference is with the way we send the arguments (manual vs array)</p>
<p><strong>Question:</strong></p>
<p>But when should I use the <code>bind()</code> method ?</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="mi">81</span><span class="p">,</span>
<span class="w">  </span><span class="n">getX</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">x</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">};</span>

<span class="n">alert</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getX</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">obj</span><span class="p">)());</span>
<span class="n">alert</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getX</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">obj</span><span class="p">));</span>
<span class="n">alert</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getX</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">obj</span><span class="p">));</span>
</pre></div>

<p>jsbin</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I created this comparison between function objects, function calls,
<code>call/apply</code> and <code>bind</code> a while ago:</p>
<p><img alt="enter image description here" src="images/WHlX0.jpg"></p>
<p><code>.bind</code> allows you to set the <code>this</code> value <em>now</em> while allowing you to execute
the function <em>in the future</em> , because it returns a new function object.</p>
<p><br></p>
<h3>Suggest</h3>
<p>They all attach <strong><em>this</em></strong> into function (or object) and the difference is in
the function invocation (see below).</p>
<p><strong>call</strong> attaches <strong><em>this</em></strong> into function and executes the function
immediately:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"James Smith"</span><span class="p">,</span>
<span class="w">  </span><span class="n">hello</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" says hello "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">thing</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">person</span><span class="o">.</span><span class="n">hello</span><span class="p">(</span><span class="s2">"world"</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="s2">"James Smith says hello world"</span>
<span class="n">person</span><span class="o">.</span><span class="n">hello</span><span class="o">.</span><span class="n">call</span><span class="p">({</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim Smith"</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s2">"world"</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim Smith says hello world"</span>
</pre></div>

<p><strong>bind</strong> attaches <strong><em>this</em></strong> into function and it needs to be invoked
separately like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"James Smith"</span><span class="p">,</span>
<span class="w">  </span><span class="n">hello</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">thing</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" says hello "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">thing</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">person</span><span class="o">.</span><span class="n">hello</span><span class="p">(</span><span class="s2">"world"</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="s2">"James Smith says hello world"</span>
<span class="k">var</span><span class="w"> </span><span class="n">helloFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">person</span><span class="o">.</span><span class="n">hello</span><span class="o">.</span><span class="n">bind</span><span class="p">({</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim Smith"</span><span class="w"> </span><span class="p">});</span>
<span class="n">helloFunc</span><span class="p">(</span><span class="s2">"world"</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="n">Jim</span><span class="w"> </span><span class="n">Smith</span><span class="w"> </span><span class="n">says</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="n">world</span><span class="s2">"</span>
</pre></div>

<p>or like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">...</span><span class="w">    </span>
<span class="k">var</span><span class="w"> </span><span class="n">helloFunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">person</span><span class="o">.</span><span class="n">hello</span><span class="o">.</span><span class="n">bind</span><span class="p">({</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jim Smith"</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s2">"world"</span><span class="p">);</span>
<span class="n">helloFunc</span><span class="p">();</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="n">Jim</span><span class="w"> </span><span class="n">Smith</span><span class="w"> </span><span class="n">says</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="n">world</span><span class="s2">"</span>
</pre></div>

<p><strong>apply</strong> is similar to <strong>call</strong> except that it takes an array-like object
instead of listing the arguments out one at a time:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">personContainer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">     </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"James Smith"</span><span class="p">,</span>
<span class="w">     </span><span class="n">hello</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" says hello "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">person</span><span class="o">.</span><span class="n">hello</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">person</span><span class="p">,</span><span class="w"> </span><span class="n">arguments</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">personContainer</span><span class="p">(</span><span class="s2">"world"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mars"</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="s2">"James Smith says hello mars"</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"world"</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"mars"</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-permanently-remove-few-commits-from-remote-branch/" class="u-url">How to permanently remove few commits from remote branch</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-permanently-remove-few-commits-from-remote-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:17:45+08:00" itemprop="datePublished" title="2023-02-17 08:17">2023-02-17 08:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I know that's rewriting of history which is bad yada yada.</p>
<p>But how to permanently remove few commits from remote branch?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You <code>git reset --hard</code> your local branch to remove changes from working tree
and index, and you <code>git push --force</code> (or <code>git push --force-with-lease</code>) your
revised local branch to the remote.<br>
(other solution here, involving deleting the remote branch, and re-pushing it)</p>
<p>This SO answer illustrates the danger of such a command, especially if people
depends on the remote history for their own local repos.<br>
You need to be prepared to point out people to the RECOVERING FROM UPSTREAM
REBASE section of the <code>git rebase</code> man page.</p>
<p>Plus, as noted by ringo in the comments, if the remote branch is protected
against force push, a <code>git revert</code>, as in this answer, might be preferable.</p>
<hr>
<p>With Git 2.23 (August 2019, nine years later), you would use the new command
<strong><code>git switch</code></strong>.<br>
That is: <code>git switch -C mybranch origin/mybranch~n</code><br>
(replace <code>n</code> by the number of commits to remove)</p>
<p>That will restore the index and working tree, like a <code>git reset --hard</code> would.<br>
The documentation adds:</p>
<blockquote>
<div class="code"><pre class="code literal-block">-C &lt;new-branch&gt;
--force-create &lt;new-branch&gt;
</pre></div>

<p>Similar to <code>--create</code> except that if <code>&lt;new-branch&gt;</code> already exists, it will
be reset to <code>&lt;start-point&gt;</code>.<br>
 This is a convenient shortcut for:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>branch<span class="w"> </span>-f<span class="w"> </span>&lt;new-branch&gt;
$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>&lt;new-branch&gt;
</pre></div>

</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Just note to use the <code>last_working_commit_id</code>, when reverting a non-working
commit</p>
<div class="code"><pre class="code literal-block">git reset --hard &lt;last_working_commit_id&gt;
</pre></div>

<p>So we must not reset to the <code>commit_id</code> that we don't want.</p>
<p>Then sure, we must push to remote branch:</p>
<div class="code"><pre class="code literal-block">git push --force
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-the-differences-between-the-urllib-urllib2-urllib3-and-requests-module/" class="u-url">What are the differences between the urllib, urllib2, urllib3 and requests module?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-the-differences-between-the-urllib-urllib2-urllib3-and-requests-module/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:17:20+08:00" itemprop="datePublished" title="2023-02-17 08:17">2023-02-17 08:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Python, what are the differences between the <code>urllib</code>, <code>urllib2</code>, <code>urllib3</code>
and <code>requests</code> modules? Why are there three? They seem to do the same thing...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I know it's been said already, but I'd highly recommend the <code>requests</code> Python
package.</p>
<p>If you've used languages other than python, you're probably thinking <code>urllib</code>
and <code>urllib2</code> are easy to use, not much code, and highly capable, that's how I
used to think. But the <code>requests</code> package is so unbelievably useful and short
that everyone should be using it.</p>
<p>First, it supports a fully restful API, and is as easy as:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'http://www.mywebsite.com/user'</span><span class="p">)</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">'http://www.mywebsite.com/user'</span><span class="p">)</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">'http://www.mywebsite.com/user/put'</span><span class="p">)</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">'http://www.mywebsite.com/user/delete'</span><span class="p">)</span>
</pre></div>

<p>Regardless of whether GET / POST, you never have to encode parameters again,
it simply takes a dictionary as an argument and is good to go:</p>
<div class="code"><pre class="code literal-block">userdata = {"firstname": "John", "lastname": "Doe", "password": "jdoe123"}
resp = requests.post('http://www.mywebsite.com/user', data=userdata)
</pre></div>

<p>Plus it even has a built in JSON decoder (again, I know <code>json.loads()</code> isn't a
lot more to write, but this sure is convenient):</p>
<div class="code"><pre class="code literal-block">resp.json()
</pre></div>

<p>Or if your response data is just text, use:</p>
<div class="code"><pre class="code literal-block">resp.text
</pre></div>

<p>This is just the tip of the iceberg. This is the list of features from the
requests site:</p>
<ul>
<li>International Domains and URLs</li>
<li>Keep-Alive &amp; Connection Pooling</li>
<li>Sessions with Cookie Persistence</li>
<li>Browser-style SSL Verification</li>
<li>Basic/Digest Authentication</li>
<li>Elegant Key/Value Cookies</li>
<li>Automatic Decompression</li>
<li>Unicode Response Bodies</li>
<li>Multipart File Uploads</li>
<li>Connection Timeouts</li>
<li>.netrc support</li>
<li>List item</li>
<li>Python 2.7, 3.6—3.9</li>
<li>Thread-safe.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>urllib2 provides some extra functionality, namely the <code>urlopen()</code> function can
allow you to specify headers (normally you'd have had to use httplib in the
past, which is far more verbose.) More importantly though, urllib2 provides
the <code>Request</code> class, which allows for a more declarative approach to doing a
request:</p>
<div class="code"><pre class="code literal-block">r = Request(url='http://www.mysite.com')
r.add_header('User-Agent', 'awesome fetcher')
r.add_data(urllib.urlencode({'foo': 'bar'})
response = urlopen(r)
</pre></div>

<p>Note that <code>urlencode()</code> is only in urllib, not urllib2.</p>
<p>There are also handlers for implementing more advanced URL support in urllib2.
The short answer is, unless you're working with legacy code, you probably want
to use the URL opener from urllib2, but you still need to import into urllib
for some of the utility functions.</p>
<p><strong>Bonus answer</strong> With Google App Engine, you can use any of httplib, urllib or
urllib2, but all of them are just wrappers for Google's URL Fetch API. That
is, you are still subject to the same limitations such as ports, protocols,
and the length of the response allowed. You can use the core of the libraries
as you would expect for retrieving HTTP URLs, though.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-496.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-494.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
