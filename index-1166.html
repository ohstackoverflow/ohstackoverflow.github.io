<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1166) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1166.html">
<link rel="prev" href="index-1167.html" type="text/html">
<link rel="next" href="index-1165.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/shi-yong-dai-you-es6-sheng-cheng-qi-de-redux-saga-yu-dai-you-es2017-async-await-de-redux-thunk-de-you-que-dian/" class="u-url">使用带有 ES6 生成器的 redux-saga 与带有 ES2017 async/await 的 redux-thunk 的优缺点</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/shi-yong-dai-you-es6-sheng-cheng-qi-de-redux-saga-yu-dai-you-es2017-async-await-de-redux-thunk-de-you-que-dian/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:02:38+08:00" itemprop="datePublished" title="2023-02-18 03:02">2023-02-18 03:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>现在有很多关于 redux town 的最新小子redux-saga/redux-saga 的讨论。它使用生成器函数来监听/调度动作。</p>
<p>在我全神贯注之前，我想知道使用async/await<code>redux-saga</code>而不是使用下面的方法的优缺点。<code>redux-thunk</code></p>
<p>一个组件可能看起来像这样，像往常一样分派操作。</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">login</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'redux/auth'</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LoginForm</span> <span class="n">extends</span> <span class="n">Component</span> <span class="p">{</span>

  <span class="n">onClick</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">e</span><span class="o">.</span><span class="n">preventDefault</span><span class="p">();</span>
    <span class="n">const</span> <span class="p">{</span> <span class="n">user</span><span class="p">,</span> <span class="k">pass</span> <span class="p">}</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">refs</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="k">pass</span><span class="o">.</span><span class="n">value</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="n">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="n">ref</span><span class="o">=</span><span class="s2">"user"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">"password"</span> <span class="n">ref</span><span class="o">=</span><span class="s2">"pass"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">button</span> <span class="n">onClick</span><span class="o">=</span><span class="p">{::</span><span class="n">this</span><span class="o">.</span><span class="n">onClick</span><span class="p">}</span><span class="o">&gt;</span><span class="n">Sign</span> <span class="n">In</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="p">);</span>
  <span class="p">}</span> 
<span class="p">}</span>

<span class="n">export</span> <span class="n">default</span> <span class="n">connect</span><span class="p">((</span><span class="n">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({}))(</span><span class="n">LoginForm</span><span class="p">);</span>
</pre></div>

<p>然后我的动作看起来像这样：</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="n">auth</span><span class="o">.</span><span class="n">js</span>

<span class="kn">import</span> <span class="nn">request</span> <span class="kn">from</span> <span class="s1">'axios'</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">loadUserData</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'./user'</span><span class="p">;</span>

<span class="o">//</span> <span class="n">define</span> <span class="n">constants</span>
<span class="o">//</span> <span class="n">define</span> <span class="n">initial</span> <span class="n">state</span>
<span class="o">//</span> <span class="n">export</span> <span class="n">default</span> <span class="n">reducer</span>

<span class="n">export</span> <span class="n">const</span> <span class="n">login</span> <span class="o">=</span> <span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="k">pass</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">async</span> <span class="p">(</span><span class="n">dispatch</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">LOGIN_REQUEST</span> <span class="p">});</span>
        <span class="n">let</span> <span class="p">{</span> <span class="n">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">,</span> <span class="p">{</span> <span class="n">user</span><span class="p">,</span> <span class="k">pass</span> <span class="p">});</span>
        <span class="k">await</span> <span class="n">dispatch</span><span class="p">(</span><span class="n">loadUserData</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">uid</span><span class="p">));</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">LOGIN_SUCCESS</span><span class="p">,</span> <span class="n">data</span> <span class="p">});</span>
    <span class="p">}</span> <span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">LOGIN_ERROR</span><span class="p">,</span> <span class="n">error</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">more</span> <span class="n">actions</span><span class="o">...</span>
</pre></div>

<hr>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="n">user</span><span class="o">.</span><span class="n">js</span>

<span class="kn">import</span> <span class="nn">request</span> <span class="kn">from</span> <span class="s1">'axios'</span><span class="p">;</span>

<span class="o">//</span> <span class="n">define</span> <span class="n">constants</span>
<span class="o">//</span> <span class="n">define</span> <span class="n">initial</span> <span class="n">state</span>
<span class="o">//</span> <span class="n">export</span> <span class="n">default</span> <span class="n">reducer</span>

<span class="n">export</span> <span class="n">const</span> <span class="n">loadUserData</span> <span class="o">=</span> <span class="p">(</span><span class="n">uid</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">async</span> <span class="p">(</span><span class="n">dispatch</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">USERDATA_REQUEST</span> <span class="p">});</span>
        <span class="n">let</span> <span class="p">{</span> <span class="n">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="err">`</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="err">$</span><span class="p">{</span><span class="n">uid</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">USERDATA_SUCCESS</span><span class="p">,</span> <span class="n">data</span> <span class="p">});</span>
    <span class="p">}</span> <span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">USERDATA_ERROR</span><span class="p">,</span> <span class="n">error</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">more</span> <span class="n">actions</span><span class="o">...</span>
</pre></div>

<p><br><br></p>
<h2>解答</h2>
<p>在 redux-saga 中，上面例子的等价物是</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">loginSaga</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">take</span><span class="p">(</span><span class="n">LOGIN_REQUEST</span><span class="p">)</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">,</span><span class="w"> </span><span class="s1">'/login'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="p">});</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">fork</span><span class="p">(</span><span class="n">loadUserData</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="n">uid</span><span class="p">);</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">LOGIN_SUCCESS</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">LOGIN_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span><span class="w">  </span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">loadUserData</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">USERDATA_REQUEST</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">users</span><span class="o">/$</span><span class="p">{</span><span class="n">uid</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">USERDATA_SUCCESS</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">USERDATA_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>首先要注意的是，我们正在使用 form 调用 api 函数<code>yield call(func,
...args)</code>。<code>call</code>不执行效果，它只是创建一个普通对象，如<code>{type: 'CALL', func, args}</code>. 执行委托给 redux-
saga 中间件，它负责执行函数并使用结果恢复生成器。</p>
<p>主要优点是您可以使用简单的相等性检查在 Redux 之外测试生成器</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">iterator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loginSaga</span><span class="p">()</span>

<span class="nb">assert</span><span class="o">.</span><span class="n">deepEqual</span><span class="p">(</span><span class="n">iterator</span><span class="o">.</span><span class="n">next</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">take</span><span class="p">(</span><span class="n">LOGIN_REQUEST</span><span class="p">))</span>

<span class="o">//</span><span class="w"> </span><span class="n">resume</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">dummy</span><span class="w"> </span><span class="n">action</span>
<span class="k">const</span><span class="w"> </span><span class="n">mockAction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">user</span><span class="p">:</span><span class="w"> </span><span class="s1">'...'</span><span class="p">,</span><span class="w"> </span><span class="k">pass</span><span class="p">:</span><span class="w"> </span><span class="s1">'...'</span><span class="p">}</span>
<span class="nb">assert</span><span class="o">.</span><span class="n">deepEqual</span><span class="p">(</span>
<span class="w">  </span><span class="n">iterator</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="n">mockAction</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="n">call</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">,</span><span class="w"> </span><span class="s1">'/login'</span><span class="p">,</span><span class="w"> </span><span class="n">mockAction</span><span class="p">)</span>
<span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">simulate</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">result</span>
<span class="k">const</span><span class="w"> </span><span class="n">mockError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'invalid user/password'</span>
<span class="nb">assert</span><span class="o">.</span><span class="n">deepEqual</span><span class="p">(</span>
<span class="w">  </span><span class="n">iterator</span><span class="o">.</span><span class="n">throw</span><span class="p">(</span><span class="n">mockError</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">LOGIN_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="n">mockError</span><span class="w"> </span><span class="p">})</span>
<span class="p">)</span>
</pre></div>

<p>请注意，我们通过简单地将模拟数据注入<code>next</code>迭代器的方法来模拟 api 调用结果。模拟数据比模拟函数简单得多。</p>
<p>要注意的第二件事是调用<code>yield take(ACTION)</code>. Thunk
由动作创建者在每个新动作（例如）上调用<code>LOGIN_REQUEST</code>。即动作不断地 <em>被推</em> 送给 thunk，而 thunk
无法控制何时停止处理这些动作。</p>
<p>在 redux-saga 中，生成器 <em>拉</em>
取下一个动作。也就是说，他们可以控制何时收听某些动作，何时不收听。在上面的例子中，流程指令被放置在一个<code>while(true)</code>循环中，所以它会监听每个传入的动作，这在某种程度上模仿了
thunk 推送行为。</p>
<p>拉动方法允许实现复杂的控制流。例如假设我们要添加以下要求</p>
<ul>
<li>
<p>处理 LOGOUT 用户操作</p>
</li>
<li>
<p>第一次成功登录后，服务器返回一个令牌，该令牌在存储在<code>expires_in</code>字段中的某个延迟后到期。我们必须每<code>expires_in</code>毫秒在后台刷新一次授权</p>
</li>
<li>
<p>考虑到在等待 api 调用的结果（初始登录或刷新）时，用户可能会在中间注销。</p>
</li>
</ul>
<p>你会如何用thunks来实现它？同时还为整个流程提供完整的测试覆盖率？以下是 Sagas 的外观：</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">authorize</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">authorize</span><span class="p">,</span><span class="w"> </span><span class="n">credentials</span><span class="p">)</span>
<span class="w">  </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="w"> </span><span class="n">login</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">token</span>
<span class="p">}</span>

<span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">authAndRefreshTokenOnExpiry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">let</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">authorize</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">})</span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">delay</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="o">.</span><span class="n">expires_in</span><span class="p">)</span>
<span class="w">    </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">authorize</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">token</span><span class="p">})</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">watchAuth</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">take</span><span class="p">(</span><span class="n">LOGIN_REQUEST</span><span class="p">)</span>

<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">race</span><span class="p">([</span>
<span class="w">        </span><span class="n">take</span><span class="p">(</span><span class="n">LOGOUT</span><span class="p">),</span>
<span class="w">        </span><span class="n">call</span><span class="p">(</span><span class="n">authAndRefreshTokenOnExpiry</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">)</span>
<span class="w">      </span><span class="p">])</span>

<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">logged</span><span class="w"> </span><span class="n">out</span><span class="p">,</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">iteration</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">LOGIN_REQUEST</span><span class="w"> </span><span class="n">action</span>

<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="w"> </span><span class="n">login</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>在上面的示例中，我们使用<code>race</code>.
如果<code>take(LOGOUT)</code>赢得比赛（即用户单击注销按钮）。比赛会自动取消<code>authAndRefreshTokenOnExpiry</code>后台任务。如果在通话<code>authAndRefreshTokenOnExpiry</code>过程中被阻止，<code>call(authorize,
{token})</code>它也会被取消。取消会自动向下传播。</p>
<p>您可以找到上述流程的可运行演示</p>
<p><br></p>
<h3>更多建议</h3>
<p>除了库作者相当详尽的回答之外，我还将添加我在生产系统中使用 saga 的经验。</p>
<p>专业版（使用传奇）：</p>
<ul>
<li>
<p>可测试性。测试 sagas 非常容易，因为 call() 返回一个纯对象。测试 thunk 通常需要您在测试中包含一个 mockStore。</p>
</li>
<li>
<p>redux-saga 带有很多有用的任务辅助函数。在我看来，saga 的概念是为您的应用程序创建某种后台工作程序/线程，它充当 react redux 架构中缺失的部分（actionCreators 和 reducers 必须是纯函数。）这导致了下一点。</p>
</li>
<li>
<p>Sagas 提供独立的地方来处理所有的副作用。根据我的经验，它通常比 thunk 操作更容易修改和管理。</p>
</li>
</ul>
<p>缺点：</p>
<ul>
<li>
<p>生成器语法。</p>
</li>
<li>
<p>很多概念要学。</p>
</li>
<li>
<p>API稳定性。似乎 redux-saga 仍在添加功能（例如频道？）并且社区没有那么大。如果图书馆某天进行了非向后兼容的更新，则令人担忧。</p>
</li>
</ul>
<p><br><br><a href="posts/pros-cons-of-using-redux-saga-with-es6-generators-vs-redux-thunk-with-es2017-async-await/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/dui-xiang-chuan-bo-yu-object-assign/" class="u-url">对象传播与 Object.assign</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/dui-xiang-chuan-bo-yu-object-assign/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:02:11+08:00" itemprop="datePublished" title="2023-02-18 03:02">2023-02-18 03:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>假设我有一个<code>options</code>变量，我想设置一些默认值。</p>
<p>这两种选择的优点/缺点是什么？</p>
<p>使用对象传播</p>
<div class="code"><pre class="code literal-block">options = {...optionsDefault, ...options};
</pre></div>

<p>或者使用 Object.assign</p>
<div class="code"><pre class="code literal-block"><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="k">assign</span><span class="p">({},</span><span class="w"> </span><span class="n">optionsDefault</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
</pre></div>

<p>这是让我想知道的承诺。</p>
<p><br><br></p>
<h2>解答</h2>
<p>作为参考对象，rest/spread 在 ECMAScript 2018 中最终确定为第 4 阶段。可以在此处找到该提案。</p>
<p>在大多数情况下，对象分配和传播的工作方式相同，主要区别在于传播定义属性，而 Object.assign() 设置它们。这意味着
Object.assign() 触发设置器。</p>
<p>值得记住的是，除此之外，对象 rest/spread 1:1 映射到 Object.assign()
并且与数组（可迭代）展开的行为不同。例如，当传播一个数组时，空值被传播。然而，使用对象传播的空值会悄无声息地传播到无。</p>
<p><strong>数组（可迭代）传播示例</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">([</span><span class="o">...</span><span class="n">z</span><span class="p">]);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">TypeError</span>
</pre></div>

<p><strong>对象传播示例</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="n">y</span><span class="p">};</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<p>这与 Object.assign() 的工作方式一致，两者都默默地排除空值而没有错误。</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">assign</span><span class="p">({},</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>作为参考对象，rest/spread 在 ECMAScript 2018 中最终确定为第 4 阶段。可以在此处找到该提案。</p>
<p>在大多数情况下，对象分配和传播的工作方式相同，主要区别在于传播定义属性，而 Object.assign() 设置它们。这意味着
Object.assign() 触发设置器。</p>
<p>值得记住的是，除此之外，对象 rest/spread 1:1 映射到 Object.assign()
并且与数组（可迭代）展开的行为不同。例如，当传播一个数组时，空值被传播。然而，使用对象传播的空值会悄无声息地传播到无。</p>
<p><strong>数组（可迭代）传播示例</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">([</span><span class="o">...</span><span class="n">z</span><span class="p">]);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">TypeError</span>
</pre></div>

<p><strong>对象传播示例</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="n">y</span><span class="p">};</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<p>这与 Object.assign() 的工作方式一致，两者都默默地排除空值而没有错误。</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">assign</span><span class="p">({},</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<p><br><br><a href="posts/object-spread-vs-object-assign/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/printf-zhong-double-de-zheng-que-ge-shi-shuo-ming-fu/" class="u-url">printf 中 double 的正确格式说明符</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/printf-zhong-double-de-zheng-que-ge-shi-shuo-ming-fu/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:00:59+08:00" itemprop="datePublished" title="2023-02-18 03:00">2023-02-18 03:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>double</code>printf 中正确的格式说明符是什么？是<code>%f</code>还是是<code>%lf</code>？我相信是的<code>%f</code>，但我不确定。</p>
<h4>代码示例</h4>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">   </span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.4</span><span class="p">;</span>
<span class="w">   </span><span class="n">printf</span><span class="p">(</span><span class="s">"%lf"</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">);</span><span class="w"> </span><span class="c1">// Is this wrong?</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>解答</h2>
<p><code>"%f"</code>是双精度数的（或至少一种）正确格式。a 没有格式，因为如果您尝试将 a 传递给，它会在收到它 <em>之前</em>
被提升为1。在当前标准下也是可以接受的——如果后跟转换说明符（以及其他），则指定为无效。<code>float``float``printf``double``printf``"%lf"``l``f</code></p>
<p><code>printf</code>请注意，这是格式字符串与<code>scanf</code>（和等）格式字符串有很大不同的地方<code>fscanf</code>。对于输出，您正在传递一个 <em>value</em>
，当作为可变参数传递时，该值将从<code>float</code>to提升。<code>double</code>对于输入，您传递的是一个未提升的 <em>指针</em> ，因此您必须告诉<code>scanf</code>您是要读取
a<code>float</code>还是 a <code>double</code>，因此对于<code>scanf</code>,<code>%f</code>意味着您想要读取 a<code>float</code>并且<code>%lf</code>意味着您想要读取 a
<code>double</code>（并且，它是什么值得，对于 a <code>long double</code>，您可以使用<code>%Lf</code>or <code>printf</code>）<code>scanf</code>。</p>
<hr>
<p>1. C99，§6.5.2.2/6：“如果表示被调用函数的表达式的类型不包含原型，则对每个参数执行整数提升，并将 float
类型的参数提升为双精度。这些被称为默认参数提升。” 在 C++
中，措辞有些不同（例如，它不使用“原型”一词），但效果是一样的：所有可变参数在被函数接收之前都经过默认提升。</p>
<p><br></p>
<h3>更多建议</h3>
<p>鉴于C99标准（即 <em>N1256</em> 草案），规则取决于函数种类：fprintf (printf, sprintf, ...) 或 scanf。</p>
<p>以下是提取的相关部分：</p>
<blockquote>
<p><strong>前言</strong></p>
<p>第二版取消并取代第一版 ISO/IEC 9899:1990，经 ISO/IEC 9899/COR1:1994、ISO/IEC
9899/AMD1:1995 和 ISO/IEC 9899/COR2:1996 修正和更正。与上一版相比的主要变化包括：</p>
<ul>
<li>
<code>%lf</code>允许的转换说明符<code>printf</code>
</li>
</ul>
<p><strong>7.19.6.1<code>fprintf</code>函数</strong></p>
<p><strong>7</strong> 长度修饰符及其含义是：</p>
<p><em>l</em> (ell) 指定 (...) 对后面的 a、A、e、E、f、F、g 或 G 转换说明符没有影响。</p>
<p><em>L</em> 指定后面的 a、A、e、E、f、F、g 或 G 转换说明符应用于 long double 参数。</p>
</blockquote>
<p><code>fprintf</code>为apply for<code>printf</code>和<code>sprintf</code>类似功能指定的相同规则。</p>
<blockquote>
<p><strong>7.19.6.2<code>fscanf</code>函数</strong></p>
<p><strong>11</strong> 长度修饰符及其含义是：</p>
<p><em>l</em> (ell) 指定 (...) 后面的 a、A、e、E、f、F、g 或 G 转换说明符适用于类型指针为 double 的参数；</p>
<p><em>L</em> 指定后面的 a、A、e、E、f、F、g 或 G 转换说明符应用于类型指针为 long double 的参数。</p>
<p><strong>12</strong> 转换说明符及其含义是：a,e,f,g 匹配一个可选的有符号浮点数，(...)</p>
<p><strong>14</strong> 转换说明符 A、E、F、G 和 X 也有效，其行为分别与 a、e、f、g 和 x 相同。</p>
</blockquote>
<p>长话短说，对于<code>fprintf</code>以下说明符和相应的类型进行了指定：</p>
<ul>
<li>
<code>%f</code>-&gt; 双</li>
<li>
<code>%Lf</code>-&gt; 长双。</li>
</ul>
<p>因为<code>fscanf</code>它是：</p>
<ul>
<li>
<code>%f</code>- &gt;浮动</li>
<li>
<code>%lf</code>-&gt; 双</li>
<li>
<code>%Lf</code>-&gt; 长双。</li>
</ul>
<p><br><br><a href="posts/correct-format-specifier-for-double-in-printf/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1167.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1165.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
