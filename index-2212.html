<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2212) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2212.html">
<link rel="prev" href="index-2213.html" type="text/html">
<link rel="next" href="index-2211.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-the-jquery-change-event-not-trigger-when-i-set-the-value-of-a-select-using-val/" class="u-url">Why does the jquery change event not trigger when I set the value of a select using val()?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-the-jquery-change-event-not-trigger-when-i-set-the-value-of-a-select-using-val/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T23:14:41+08:00" itemprop="datePublished" title="2023-03-03 23:14">2023-03-03 23:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The logic in the <code>change()</code> event handler is not being run when the value is
set by <code>val()</code>, but it does run when user selects a value with their mouse.
Why is this?</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">"single"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option&gt;</span>Single<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option&gt;</span>Single2<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="w">    </span>$(function()<span class="w"> </span>{
<span class="w">        </span>$(":input#single").change(function()<span class="w"> </span>{
<span class="w">           </span>/*<span class="w"> </span>Logic<span class="w"> </span>here<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>execute<span class="w"> </span>when<span class="w"> </span>val()<span class="w"> </span>is<span class="w"> </span>used<span class="w"> </span>*/
<span class="w">        </span>});
<span class="w">    </span>});

<span class="w">    </span>$("#single").val("Single2");
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Because the <code>change</code> event requires an actual browser event initiated by the
user instead of via javascript code.</p>
<p>Do this instead:</p>
<div class="code"><pre class="code literal-block">$("#single").val("Single2").trigger('change');
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">$("#single").val("Single2").change();
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I believe you can manually trigger the change event with <code>trigger()</code>:</p>
<div class="code"><pre class="code literal-block">$("#single").val("Single2").trigger('change');
</pre></div>

<p>Though why it doesn't fire automatically, I have no idea.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/preserving-order-with-linq/" class="u-url">Preserving order with LINQ</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/preserving-order-with-linq/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T23:13:16+08:00" itemprop="datePublished" title="2023-03-03 23:13">2023-03-03 23:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I use LINQ to Objects instructions on an ordered array. Which operations
shouldn't I do to be sure the order of the array is not changed?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I examined the methods of System.Linq.Enumerable, discarding any that returned
non-IEnumerable results. I checked the remarks of each to determine how the
order of the result would differ from order of the source.</p>
<p>Preserves Order Absolutely. You can map a source element by index to a result
element</p>
<ul>
<li>AsEnumerable</li>
<li>Cast</li>
<li>Concat</li>
<li>Select</li>
<li>ToArray</li>
<li>ToList</li>
</ul>
<p>Preserves Order. Elements are filtered or added, but not re-ordered.</p>
<ul>
<li>Distinct</li>
<li>Except</li>
<li>Intersect</li>
<li>OfType</li>
<li>Prepend (new in .net 4.7.1)</li>
<li>Skip</li>
<li>SkipWhile</li>
<li>Take</li>
<li>TakeWhile</li>
<li>Where</li>
<li>Zip (new in .net 4)</li>
</ul>
<p>Destroys Order - we don't know what order to expect results in.</p>
<ul>
<li>ToDictionary</li>
<li>ToLookup</li>
</ul>
<p>Redefines Order Explicitly - use these to change the order of the result</p>
<ul>
<li>OrderBy</li>
<li>OrderByDescending</li>
<li>Reverse</li>
<li>ThenBy</li>
<li>ThenByDescending</li>
</ul>
<p>Redefines Order according to some rules.</p>
<ul>
<li>GroupBy - The IGrouping objects are yielded in an order based on the order of the elements in source that produced the first key of each IGrouping. Elements in a grouping are yielded in the order they appear in source. </li>
<li>GroupJoin - GroupJoin preserves the order of the elements of outer, and for each element of outer, the order of the matching elements from inner.</li>
<li>Join - preserves the order of the elements of outer, and for each of these elements, the order of the matching elements of inner. </li>
<li>SelectMany - for each element of source, selector is invoked and a sequence of values is returned.</li>
<li>Union - When the object returned by this method is enumerated, Union enumerates first and second in that order and yields each element that has not already been yielded. </li>
</ul>
<hr>
<p>Edit: I've moved Distinct to Preserving order based on this implementation.</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">IEnumerable</span><span class="o">&lt;</span><span class="nv">TSource</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">DistinctIterator</span><span class="o">&lt;</span><span class="nv">TSource</span><span class="o">&gt;</span>
<span class="w">      </span><span class="ss">(</span><span class="nv">IEnumerable</span><span class="o">&lt;</span><span class="nv">TSource</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">source</span>,<span class="w"> </span><span class="nv">IEqualityComparer</span><span class="o">&lt;</span><span class="nv">TSource</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">comparer</span><span class="ss">)</span>
<span class="w">    </span>{
<span class="w">        </span><span class="nv">Set</span><span class="o">&lt;</span><span class="nv">TSource</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Set</span><span class="o">&lt;</span><span class="nv">TSource</span><span class="o">&gt;</span><span class="ss">(</span><span class="nv">comparer</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">foreach</span><span class="w"> </span><span class="ss">(</span><span class="nv">TSource</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">source</span><span class="ss">)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">set</span>.<span class="nv">Add</span><span class="ss">(</span><span class="nv">element</span><span class="ss">))</span><span class="w"> </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">element</span><span class="c1">;</span>
<span class="w">    </span>}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Are you actually talking about SQL, or about arrays? To put it another way,
are you using LINQ to SQL or LINQ to Objects?</p>
<p>The LINQ to Objects operators don't actually change their original data source
- they build sequences which are effectively backed by the data source. The
only operations which change the ordering are
OrderBy/OrderByDescending/ThenBy/ThenByDescending - and even then, those are
stable for equally ordered elements. Of course, many operations will filter
out some elements, but the elements which are returned will be in the same
order.</p>
<p>If you convert to a different data structure, e.g. with ToLookup or
ToDictionary, I don't believe order is preserved at that point - but that's
somewhat different anyway. (The order of values mapping to the same key is
preserved for lookups though, I believe.)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/converting-user-input-string-to-regular-expression/" class="u-url">Converting user input string to regular expression</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/converting-user-input-string-to-regular-expression/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T23:11:28+08:00" itemprop="datePublished" title="2023-03-03 23:11">2023-03-03 23:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am designing a regular expression tester in HTML and JavaScript. The user
will enter a regex, a string, and choose the function they want to test with
(e.g. search, match, replace, etc.) via radio button and the program will
display the results when that function is run with the specified arguments.
Naturally there will be extra text boxes for the extra arguments to replace
and such.</p>
<p>My problem is getting the string from the user and turning it into a regular
expression. If I say that they don't need to have <code>//</code>'s around the regex they
enter, then they can't set flags, like <code>g</code> and <code>i</code>. So they have to have the
<code>//</code>'s around the expression, but how can I convert that string to a regex? It
can't be a literal since its a string, and I can't pass it to the RegExp
constructor since its not a string without the <code>//</code>'s. Is there any other way
to make a user input string into a regex? Will I have to parse the string and
flags of the regex with the <code>//</code>'s then construct it another way? Should I
have them enter a string, and then enter the flags separately?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use the RegExp object constructor to create a regular expression from a
string:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="s2">"a|b"</span><span class="p">,</span><span class="w"> </span><span class="s2">"i"</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">as</span>
<span class="k">var</span><span class="w"> </span><span class="n">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="n">a</span><span class="o">|</span><span class="n">b</span><span class="o">/</span><span class="n">i</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inputstring</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="p">.</span><span class="o">*</span><span class="err">\</span><span class="o">/</span><span class="p">(</span><span class="o">[</span><span class="n">gimy</span><span class="o">]*</span><span class="p">)</span><span class="err">$</span><span class="o">/</span><span class="p">,</span><span class="w"> </span><span class="s1">'$1'</span><span class="p">);</span>
<span class="nf">var</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inputstring</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="s1">'^/(.*?)/'</span><span class="o">+</span><span class="n">flags</span><span class="o">+</span><span class="s1">'$'</span><span class="p">),</span><span class="w"> </span><span class="s1">'$1'</span><span class="p">);</span>
<span class="nf">var</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="p">);</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inputstring</span><span class="p">.</span><span class="k">match</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="s1">'^/(.*?)/([gimy]*)$'</span><span class="p">));</span>
<span class="o">//</span><span class="w"> </span><span class="n">sanity</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="n">here</span>
<span class="nf">var</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="k">match</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">match</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="p">);</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2213.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2211.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
