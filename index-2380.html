<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2380) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2380.html">
<link rel="prev" href="index-2381.html" type="text/html">
<link rel="next" href="index-2379.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mysql-with-node-js/" class="u-url">MySQL with Node.js</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mysql-with-node-js/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:51:44+08:00" itemprop="datePublished" title="2023-03-04 11:51">2023-03-04 11:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've just started getting into Node.js. I come from a PHP background, so I'm
fairly used to using MySQL for all my database needs.</p>
<p>How can I use MySQL with Node.js?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Check out the node.js module list</p>
<ul>
<li>node-mysql — A node.js module implementing the MySQL protocol</li>
<li>node-mysql2 — Yet another pure JS async driver. Pipelining, prepared statements.</li>
<li>node-mysql-libmysqlclient — MySQL asynchronous bindings based on libmysqlclient</li>
</ul>
<p>node-mysql looks simple enough:</p>
<div class="code"><pre class="code literal-block"><span class="n">var</span><span class="w"> </span><span class="n">mysql</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="k">require</span><span class="p">(</span><span class="s1">'mysql'</span><span class="p">);</span>
<span class="n">var</span><span class="w"> </span><span class="k">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mysql</span><span class="p">.</span><span class="n">createConnection</span><span class="p">(</span><span class="err">{</span>
<span class="w">  </span><span class="k">host</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="s1">'example.org'</span><span class="p">,</span>
<span class="w">  </span><span class="k">user</span><span class="w">     </span><span class="o">:</span><span class="w"> </span><span class="s1">'bob'</span><span class="p">,</span>
<span class="w">  </span><span class="k">password</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'secret'</span><span class="p">,</span>
<span class="err">}</span><span class="p">);</span>

<span class="k">connection</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">connected</span><span class="o">!</span><span class="w"> </span><span class="p">(</span><span class="n">unless</span><span class="w"> </span><span class="n n-Quoted">`err`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">set</span><span class="p">)</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p>Queries:</p>
<div class="code"><pre class="code literal-block"><span class="n">var</span><span class="w"> </span><span class="n">post</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="n">id</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="o">:</span><span class="w"> </span><span class="s1">'Hello MySQL'</span><span class="err">}</span><span class="p">;</span>
<span class="n">var</span><span class="w"> </span><span class="k">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">connection</span><span class="p">.</span><span class="k">query</span><span class="p">(</span><span class="s1">'INSERT INTO posts SET ?'</span><span class="p">,</span><span class="w"> </span><span class="n">post</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">err</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Neat</span><span class="o">!</span>
<span class="err">}</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">query</span><span class="p">.</span><span class="k">sql</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n n-Quoted">`id`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n n-Quoted">`title`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Hello MySQL'</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>node-mysql is probably one of the best modules out there used for working with
MySQL database which is actively maintained and well documented.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-do-we-need-boxing-and-unboxing-in-c/" class="u-url">Why do we need boxing and unboxing in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-do-we-need-boxing-and-unboxing-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:49:53+08:00" itemprop="datePublished" title="2023-03-04 11:49">2023-03-04 11:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Why do we need boxing and unboxing in C#?</p>
<p>I know what boxing and unboxing is, but I can't comprehend the real use of it.
Why and where should I use it?</p>
<div class="code"><pre class="code literal-block">short s = 25;

object objshort = s;  //Boxing

short anothershort = (short)objshort;  //Unboxing
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>Why</p>
</blockquote>
<p>To have a unified type system and allow value types to have a completely
different representation of their underlying data from the way that reference
types represent their underlying data (e.g., an <code>int</code> is just a bucket of
thirty-two bits which is completely different than a reference type).</p>
<p>Think of it like this. You have a variable <code>o</code> of type <code>object</code>. And now you
have an <code>int</code> and you want to put it into <code>o</code>. <code>o</code> is a reference to something
somewhere, and the <code>int</code> is emphatically not a reference to something
somewhere (after all, it's just a number). So, what you do is this: you make a
new <code>object</code> that can store the <code>int</code> and then you assign a reference to that
object to <code>o</code>. We call this process "boxing."</p>
<p>So, if you don't care about having a unified type system (i.e., reference
types and value types have very different representations and you don't want a
common way to "represent" the two) then you don't need boxing. If you don't
care about having <code>int</code> represent their underlying value (i.e., instead have
<code>int</code> be reference types too and just store a reference to their underlying
value) then you don't need boxing.</p>
<blockquote>
<p>where should I use it.</p>
</blockquote>
<p>For example, the old collection type <code>ArrayList</code> only eats <code>object</code>s. That is,
it only stores references to somethings that live somewhere. Without boxing
you cannot put an <code>int</code> into such a collection. But with boxing, you can.</p>
<p>Now, in the days of generics you don't really need this and can generally go
merrily along without thinking about the issue. But there are a few caveats to
be aware of:</p>
<p>This is correct:</p>
<div class="code"><pre class="code literal-block">double e = 2.718281828459045;
int ee = (int)e;
</pre></div>

<p>This is not:</p>
<div class="code"><pre class="code literal-block">double e = 2.718281828459045;
object o = e; // box
int ee = (int)o; // runtime exception
</pre></div>

<p>Instead you must do this:</p>
<div class="code"><pre class="code literal-block">double e = 2.718281828459045;
object o = e; // box
int ee = (int)(double)o;
</pre></div>

<p>First we have to explicitly unbox the <code>double</code> (<code>(double)o</code>) and then cast
that to an <code>int</code>.</p>
<p>What is the result of the following:</p>
<div class="code"><pre class="code literal-block">double e = 2.718281828459045;
double d = e;
object o1 = d;
object o2 = e;
Console.WriteLine(d == e);
Console.WriteLine(o1 == o2);
</pre></div>

<p>Think about it for a second before going on to the next sentence.</p>
<p>If you said <code>True</code> and <code>False</code> great! Wait, what? That's because <code>==</code> on
reference types uses reference-equality which checks if the references are
equal, not if the underlying values are equal. This is a dangerously easy
mistake to make. Perhaps even more subtle</p>
<div class="code"><pre class="code literal-block">double e = 2.718281828459045;
object o1 = e;
object o2 = e;
Console.WriteLine(o1 == o2);
</pre></div>

<p>will also print <code>False</code>!</p>
<p>Better to say:</p>
<div class="code"><pre class="code literal-block">Console.WriteLine(o1.Equals(o2));
</pre></div>

<p>which will then, thankfully, print <code>True</code>.</p>
<p>One last subtlety:</p>
<div class="code"><pre class="code literal-block">[struct|class] Point {
    public int x, y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }
}

Point p = new Point(1, 1);
object o = p;
p.x = 2;
Console.WriteLine(((Point)o).x);
</pre></div>

<p>What is the output? It depends! If <code>Point</code> is a <code>struct</code> then the output is
<code>1</code> but if <code>Point</code> is a <code>class</code> then the output is <code>2</code>! A boxing conversion
makes a copy of the value being boxed explaining the difference in behavior.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In the .NET framework, there are two species of types--value types and
reference types. This is relatively common in OO languages.</p>
<p>One of the important features of object oriented languages is the ability to
handle instances in a type-agnostic manner. This is referred to as
polymorphism. Since we want to take advantage of polymorphism, but we have two
different species of types, there has to be some way to bring them together so
we can handle one or the other the same way.</p>
<p>Now, back in the olden days (1.0 of Microsoft.NET), there weren't this
newfangled generics hullabaloo. You couldn't write a method that had a single
argument that could service a value type and a reference type. That's a
violation of polymorphism. So boxing was adopted as a means to coerce a value
type into an object.</p>
<p>If this wasn't possible, the framework would be littered with methods and
classes whose only purpose was to accept the other species of type. Not only
that, but since value types don't truly share a common type ancestor, you'd
have to have a different method overload for each value type (bit, byte,
int16, int32, etc etc etc).</p>
<p>Boxing prevented this from happening. <strong>And that's why the British celebrate
Boxing Day.</strong></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/diff-files-present-in-two-different-directories/" class="u-url">Diff files present in two different directories</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/diff-files-present-in-two-different-directories/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:48:36+08:00" itemprop="datePublished" title="2023-03-04 11:48">2023-03-04 11:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have two directories with the same list of files. I need to compare all the
files present in both the directories using the <code>diff</code> command. Is there a
simple command line option to do it, or do I have to write a shell script to
get the file listing and then iterate through them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the <code>diff</code> command for that:</p>
<div class="code"><pre class="code literal-block"><span class="gh">diff -bur folder1/ folder2/</span>
</pre></div>

<p>This will output a recursive diff that ignore spaces, with a unified context:</p>
<ul>
<li>
<strong>b</strong> flag means ignoring whitespace</li>
<li>
<strong>u</strong> flag means a unified context (3 lines before and after)</li>
<li>
<strong>r</strong> flag means recursive</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>If you are only interested to see the files that differ, you may use:</p>
<div class="code"><pre class="code literal-block"><span class="gh">diff -qr dir_one dir_two | sort</span>
</pre></div>

<p>Option "q" will only show the files that differ but not the content that
differ, and "sort" will arrange the output alphabetically.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2381.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2379.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
