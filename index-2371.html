<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2371) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2371.html">
<link rel="prev" href="index-2372.html" type="text/html">
<link rel="next" href="index-2370.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/when-should-you-use-constexpr-capability-in-c-11/" class="u-url">When should you use constexpr capability in C++11?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/when-should-you-use-constexpr-capability-in-c-11/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:11:25+08:00" itemprop="datePublished" title="2023-03-04 11:11">2023-03-04 11:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It seems to me that having a "function that always returns 5" is breaking or
diluting the meaning of "calling a function". There must be a reason, or a
need for this capability or it wouldn't be in C++11. Why is it there?</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">preprocessor</span><span class="o">.</span>
<span class="c1">#define MEANING_OF_LIFE 42</span>

<span class="o">//</span><span class="w"> </span><span class="n">constants</span><span class="p">:</span>
<span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">MeaningOfLife</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="n">constexpr</span><span class="o">-</span><span class="n">function</span><span class="p">:</span>
<span class="n">constexpr</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">MeaningOfLife</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>It seems to me that if I wrote a function that return a literal value, and I
came up to a code-review, someone would tell me, I should then, declare a
constant value instead of writing return 5.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Suppose it does something a little more complicated.</p>
<div class="code"><pre class="code literal-block"><span class="n">constexpr</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">MeaningOfLife</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">meaningOfLife</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MeaningOfLife</span><span class="p">(</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>Now you have something that can be evaluated down to a constant while
maintaining good readability and allowing slightly more complex processing
than just setting a constant to a number.</p>
<p>It basically provides a good aid to maintainability as it becomes more obvious
what you are doing. Take <code>max( a, b )</code> for example:</p>
<div class="code"><pre class="code literal-block"><span class="n">template</span><span class="o">&lt;</span><span class="w"> </span><span class="n">typename</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">constexpr</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="nb">max</span><span class="p">(</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>Its a pretty simple choice there but it does mean that if you call <code>max</code> with
constant values it is explicitly calculated at compile time and not at
runtime.</p>
<p>Another good example would be a <code>DegreesToRadians</code> function. Everyone finds
degrees easier to read than radians. While you may know that 180 degrees is
3.14159265 (Pi) in radians it is much clearer written as follows:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="nb nb-Type">float</span><span class="w"> </span><span class="n">oneeighty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DegreesToRadians</span><span class="p">(</span><span class="w"> </span><span class="mf">180.0</span><span class="n">f</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>Lots of good info here:</p>
<p>http://en.cppreference.com/w/cpp/language/constexpr</p>
<p><br></p>
<h3>Suggest</h3>
<h3>Introduction</h3>
<p><code>constexpr</code> was not introduced as a way to tell the implementation that
something can be evaluated in a context which requires a <em>constant-expression</em>
; conforming implementations has been able to prove this prior to C++11.</p>
<p>Something an implementation cannot prove is the <em>intent</em> of a certain piece of
code:</p>
<ul>
<li>What is it that the developer want to express with this entity?</li>
<li>Should we blindly allow code to be used in a <em>constant-expression</em> , just because it happens to work?</li>
</ul>
<hr>
<h3>What would the world be without <code>constexpr</code>?</h3>
<p>Let's say you are developing a library and realize that you want to be able to
calculate the sum of every integer in the interval <code>(0,N]</code>.</p>
<div class="code"><pre class="code literal-block"><span class="nv">int</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">n</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>?<span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="ss">(</span><span class="nv">n</span><span class="o">-</span><span class="mi">1</span><span class="ss">)</span><span class="w"> </span>:<span class="w"> </span><span class="nv">n</span><span class="c1">;</span>
}
</pre></div>

<h4>The lack of intent</h4>
<p>A compiler can easily prove that the above function is callable in a
<em>constant-expression</em> if the argument passed is known during translation; but
you have not declared this as an intent - it just happened to be the case.</p>
<p>Now someone else comes along, reads your function, does the same analysis as
the compiler; " <em>Oh, this function is usable in a constant-expression!"</em> , and
writes the following piece of code.</p>
<div class="code"><pre class="code literal-block">T arr[f(10)]; // freakin' magic
</pre></div>

<h4>The optimization</h4>
<p>You, as an <em>"awesome"</em> library developer, decide that <code>f</code> should cache the
result when being invoked; who would want to calculate the same set of values
over and over?</p>
<div class="code"><pre class="code literal-block"><span class="nc">int</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nl">std</span><span class="p">:</span><span class="err">:</span><span class="k">map</span><span class="o">&lt;</span><span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_cached</span><span class="p">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_cached</span><span class="p">.</span><span class="n">find</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_cached</span><span class="p">.</span><span class="k">end</span><span class="w"> </span><span class="p">())</span><span class="w"> </span>
<span class="w">    </span><span class="n">_cached</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="vm">?</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">_cached</span><span class="o">[</span><span class="n">n</span><span class="o">]</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<h4>The result</h4>
<p>By introducing your silly optimization, you just broke every usage of your
function that happened to be in a context where a <em>constant-expression</em> was
required.</p>
<p>You never promised that the function was usable in a <em>constant-expression</em> ,
and without <code>constexpr</code> there would be no way of providing such promise.</p>
<hr>
<h3>So, why do we need <code>constexpr</code>?</h3>
<p>The primary usage of <em>constexpr</em> is to declare <em>intent</em>.</p>
<p>If an entity isn't marked as <code>constexpr</code> - it was never intended to be used
in a <em>constant-expression</em> ; and even if it is, we rely on the compiler to
diagnose such context (because it disregards our intent).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/in-git-is-there-a-simple-way-of-introducing-an-unrelated-branch-to-a-repository/" class="u-url">In git, is there a simple way of introducing an unrelated branch to a repository?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/in-git-is-there-a-simple-way-of-introducing-an-unrelated-branch-to-a-repository/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:10:33+08:00" itemprop="datePublished" title="2023-03-04 11:10">2023-03-04 11:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>While helping a friend with a git problem today, I had to introduce a branch
that needed to be totally separate from the <code>master</code> branch. The contents of
this branch really had a different origin from what had been developed on the
<code>master</code> branch, but they were going to be merged into the <code>master</code> branch at
a later time.</p>
<p>I remembered from reading John Wiegley's Git from the bottom up how branches
are essentially a label to a commit that follows a certain convention and how
a commit is tied to a tree of files and, optionally to parent commits. We went
to create a parentless commit to the existing repository using git's plumbing:</p>
<p>So we got rid of all files in the index ...</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>.
</pre></div>

<p>... extracted directories and files from a tarball, added those to the index
...</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.
</pre></div>

<p>... and created a tree object ...</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>write-tree
</pre></div>

<p>(<code>git-write-tree</code> told us the sha1sum of the created tree object.)</p>
<p>Then, We committed the tree, without specifying parent commits...</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"Imported project foo"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>git<span class="w"> </span>commit-tree<span class="w"> </span><span class="nv">$TREE</span>
</pre></div>

<p>(<code>git-commit-tree</code> told us the sha1sum of the created commit object.)</p>
<p>... and created a new branch that points to our newly created commit.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>update-ref<span class="w"> </span>refs/heads/other-branch<span class="w"> </span><span class="nv">$COMMIT</span>
</pre></div>

<p>Finally, we returned to the <code>master</code> branch to continue work there.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-f<span class="w"> </span>master
</pre></div>

<p>This seems to have worked as planned. But this is clearly not the kind of
procedure I would recommend to someone who is just getting started using git,
to put it mildly. <strong>Is there an easier way of creating a new branch that is
entirely unrelated to everything that has happened in the repository so far?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p>There is a new feature (since V1.7.2) which makes this task a little more
high-level than what's in any of the other answers.</p>
<p><code>git checkout</code> now supports the <strong><code>--orphan</code></strong> option. From the man page:</p>
<p><code>git checkout [-q] [-f] [-m] --orphan &lt;new_branch&gt; [&lt;start_point&gt;]</code></p>
<blockquote>
<p>Create a new <em>orphan</em> branch, named <new_branch>, started from <start_point>
and switch to it. The first commit made on this new branch will have no
parents and it will be the root of a new history totally disconnected from
all the other branches and commits.</start_point></new_branch></p>
</blockquote>
<p>This doesn't do <em>exactly</em> what the asker wanted, because it populates the
index and the working tree from <code>&lt;start_point&gt;</code> (since this is, after all, a
checkout command). The only other action necessary is to remove any unwanted
items from the working tree and index. Unfortunately, <code>git reset --hard</code>
doesn't work, but <code>git rm -rf .</code> can be used instead (I believe this is
equivalent to <code>rm .git/index; git clean -fdx</code> given in other answers).</p>
<hr>
<p><strong>In summary:</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="o">--</span><span class="nv">orphan</span><span class="w"> </span><span class="nv">newbranch</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">rm</span><span class="w"> </span><span class="o">-</span><span class="nv">rf</span><span class="w"> </span>.
<span class="o">&lt;</span><span class="k">do</span><span class="w"> </span><span class="nv">work</span><span class="o">&gt;</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">files</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="o">-</span><span class="nv">m</span><span class="w"> </span><span class="s1">'Initial commit'</span>
</pre></div>

<p>I left <code>&lt;start_point&gt;</code> unspecified because it defaults to HEAD, and we don't
really care anyway. This sequence does essentially the same thing as the
command sequence in Artem's answer, just without resorting to scary plumbing
commands.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From Git Community Book:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">symbolic</span><span class="o">-</span><span class="nv">ref</span><span class="w"> </span><span class="nv">HEAD</span><span class="w"> </span><span class="nv">refs</span><span class="o">/</span><span class="nv">heads</span><span class="o">/</span><span class="nv">newbranch</span><span class="w"> </span>
<span class="nv">rm</span><span class="w"> </span>.<span class="nv">git</span><span class="o">/</span><span class="nv">index</span><span class="w"> </span>
<span class="nv">git</span><span class="w"> </span><span class="nv">clean</span><span class="w"> </span><span class="o">-</span><span class="nv">fdx</span><span class="w"> </span>
<span class="o">&lt;</span><span class="k">do</span><span class="w"> </span><span class="nv">work</span><span class="o">&gt;</span><span class="w"> </span>
<span class="nv">git</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">files</span><span class="w"> </span>
<span class="nv">git</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="o">-</span><span class="nv">m</span><span class="w"> </span><span class="s1">'Initial commit'</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-the-current-url-within-a-django-template/" class="u-url">How to get the current URL within a Django template?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-the-current-url-within-a-django-template/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:09:47+08:00" itemprop="datePublished" title="2023-03-04 11:09">2023-03-04 11:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was wondering how to get the current URL within a template.</p>
<p>Say my current URL is:</p>
<div class="code"><pre class="code literal-block">.../user/profile/
</pre></div>

<p>How do I return this to the template?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Django 1.9 and above:</p>
<div class="code"><pre class="code literal-block"><span class="x">## template</span>
<span class="cp">{{</span> <span class="nv">request.path</span> <span class="cp">}}</span><span class="x">  #  -without GET parameters </span>
<span class="cp">{{</span> <span class="nv">request.get_full_path</span> <span class="cp">}}</span><span class="x">  # - with GET parameters</span>
</pre></div>

<p>Old:</p>
<div class="code"><pre class="code literal-block"><span class="c1">## settings.py</span>
<span class="n">TEMPLATE_CONTEXT_PROCESSORS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">'django.core.context_processors.request'</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1">## views.py</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s1">'home.html'</span><span class="p">,</span> <span class="p">{},</span> <span class="n">context_instance</span><span class="o">=</span><span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">))</span>

<span class="c1">## template</span>
<span class="p">{{</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="p">}}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can fetch the URL in your template like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;p&gt;</span>URL<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span>page:<span class="w"> </span><span class="cp">{{</span> <span class="nv">request.get_full_path</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</pre></div>

<p>or by</p>
<p><code>{{ request.path }}</code> if you don't need the extra parameters.</p>
<p>Some precisions and corrections should be brought to hypete's and Igancio's
answers, I'll just summarize the whole idea here, for future reference.</p>
<p>If you need the <code>request</code> variable in the template, you <strong>must</strong> add the
'django.core.context_processors.request' to the <code>TEMPLATE_CONTEXT_PROCESSORS</code>
settings, it's not by default (Django 1.4).</p>
<p>You must also <strong>not forget</strong> the other context processors used by your
applications. So, to add the request to the other default processors, you
could add this in your settings, to avoid hard-coding the default processor
list (that may very well change in later versions):</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">django.conf.global_settings</span> <span class="kn">import</span> <span class="n">TEMPLATE_CONTEXT_PROCESSORS</span> <span class="k">as</span> <span class="n">TCP</span>

<span class="n">TEMPLATE_CONTEXT_PROCESSORS</span> <span class="o">=</span> <span class="n">TCP</span> <span class="o">+</span> <span class="p">(</span>
    <span class="s1">'django.core.context_processors.request'</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>

<p>Then, provided you send the <code>request</code> contents in your response, for example
as this:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">RequestContext</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span>
        <span class="s1">'user/profile.html'</span><span class="p">,</span>
        <span class="p">{</span> <span class="s1">'title'</span><span class="p">:</span> <span class="s1">'User profile'</span> <span class="p">},</span>
        <span class="n">context_instance</span><span class="o">=</span><span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2372.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2370.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
