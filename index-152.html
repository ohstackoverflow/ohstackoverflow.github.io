<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 152) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-152.html">
<link rel="prev" href="index-153.html" type="text/html">
<link rel="next" href="index-151.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/make-the-current-git-branch-a-master-branch/" class="u-url">Make the current Git branch a master branch</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/make-the-current-git-branch-a-master-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:10:01+08:00" itemprop="datePublished" title="2023-02-16 23:10">2023-02-16 23:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a repository in Git. I made a branch, then did some changes both to the
master and to the branch.</p>
<p>Then, tens of commits later, I realized the branch is in much better state
than the master, so I want the branch to "become" the master and disregard the
changes on master.</p>
<p>I cannot merge it, because I don't want to keep the changes on master. What
should I do?</p>
<p><em>Extra</em> : In this case, the 'old' master has already been <code>push</code>-ed to another
repository such as GitHub. How does this change things?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The problem with the other two answers is that the new master doesn't have the
old master as an ancestor, so when you push it, everyone else will get messed
up. This is what you want to do:</p>
<div class="code"><pre class="code literal-block">git checkout better_branch
git merge --strategy=ours master    # keep the content of this branch, but record a merge
git checkout master
git merge better_branch             # fast-forward master up to the merge
</pre></div>

<p>If you want your history to be a little clearer, I'd recommend adding some
information to the merge commit message to make it clear what you've done.
Change the second line to:</p>
<div class="code"><pre class="code literal-block">git merge --strategy=ours --no-commit master
git commit          # add information to the template merge message
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Make sure everything is pushed up to your remote repository (GitHub):</p>
<div class="code"><pre class="code literal-block">git checkout main
</pre></div>

<p>Overwrite "main" with "better_branch":</p>
<div class="code"><pre class="code literal-block">git reset --hard better_branch
</pre></div>

<p>Force the push to your remote repository:</p>
<div class="code"><pre class="code literal-block">git push -f origin main
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/detecting-an-invalid-date-date-instance-in-javascript/" class="u-url">Detecting an "invalid date" Date instance in JavaScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/detecting-an-invalid-date-date-instance-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:09:26+08:00" itemprop="datePublished" title="2023-02-16 23:09">2023-02-16 23:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to tell the difference between valid and invalid date objects in JS,
but couldn't figure out how:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">toString</span><span class="p">());</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">shows</span><span class="w"> </span><span class="s1">'Invalid Date'</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">d</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">shows</span><span class="w"> </span><span class="s1">'object'</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">Date</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">shows</span><span class="w"> </span><span class="s1">'true'</span>
</pre></div>

<p>Any ideas for writing an <code>isValidDate</code> function?</p>
<ul>
<li>Ash recommended <code>Date.parse</code> for parsing date strings, which gives an authoritative way to check if the date string is valid.</li>
<li>What I would prefer, if possible, is have my API accept a Date instance and to be able to check/assert whether it's valid or not. Borgar's solution does that, but I need to test it across browsers. I also wonder whether there's a more elegant way.</li>
<li>Ash made me consider not having my API accept <code>Date</code> instances at all, this would be easiest to validate.</li>
<li>Borgar suggested testing for a <code>Date</code> instance, and then testing for the <code>Date</code>'s time value. If the date is invalid, the time value is <code>NaN</code>. I checked with ECMA-262 and this behavior is in the standard, which is exactly what I'm looking for.</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's how I would do it:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Object</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">toString</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s">"[object Date]"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// it is a date</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isNaN</span><span class="p">(</span><span class="n">d</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// d.getTime() or d.valueOf() will also work</span>
<span class="w">    </span><span class="c1">// date object is not valid</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// date object is valid</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// not a date object</span>
<span class="p">}</span>
</pre></div>

<p><strong>Update [2018-05-31]</strong> : If you are not concerned with Date objects from
other JS contexts (external windows, frames, or iframes), this simpler form
may be preferred:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">isValidDate</span><span class="ss">(</span><span class="nv">d</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="nv">instanceof</span><span class="w"> </span><span class="nv">Date</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nv">isNaN</span><span class="ss">(</span><span class="nv">d</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p><strong>Update [2021-02-01]</strong> : Please note that there is a fundamental difference
between "invalid dates" (<code>2013-13-32</code>) and "invalid date <em>objects</em> " (<code>new
Date('foo')</code>). This answer <strong>does not</strong> deal with validating date input, only
if a Date instance is valid.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Instead of using <code>new Date()</code> you should use:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isNaN</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="bp">false</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">timestamp</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p><code>Date.parse()</code> returns a timestamp, an integer representing the number of
milliseconds since 01/Jan/1970. It will return <code>NaN</code> if it cannot parse the
supplied date string.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-static-class-and-singleton-pattern/" class="u-url">Difference between static class and singleton pattern?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-static-class-and-singleton-pattern/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:08:54+08:00" itemprop="datePublished" title="2023-02-16 23:08">2023-02-16 23:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What real (i.e. practical) difference exists between a static class and a
singleton pattern?</p>
<p>Both can be invoked without instantiation, both provide only one "Instance"
and neither of them is thread-safe. Is there any other difference?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>What makes you say that either a singleton or a static method isn't thread-
safe? Usually both <em>should</em> be implemented to be thread-safe.</p>
<p>The big difference between a singleton and a bunch of static methods is that
singletons can implement interfaces (or derive from useful base classes,
although that's less common, in my experience), so you can pass around the
singleton as if it were "just another" implementation.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The true answer is by Jon Skeet, on another forum here.</p>
<blockquote>
<p>A singleton allows access to a single created instance - that instance (or
rather, a reference to that instance) can be passed as a parameter to other
methods, and treated as a normal object.</p>
<p>A static class allows only static methods.</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-153.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-151.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
