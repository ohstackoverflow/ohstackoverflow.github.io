<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2377) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2377.html">
<link rel="prev" href="index-2378.html" type="text/html">
<link rel="next" href="index-2376.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/match-whitespace-but-not-newlines/" class="u-url">Match whitespace but not newlines</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/match-whitespace-but-not-newlines/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:38:50+08:00" itemprop="datePublished" title="2023-03-04 11:38">2023-03-04 11:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I sometimes want to match whitespace but not newline.</p>
<p>So far I've been resorting to <code>[ \t]</code>. Is there a less awkward way?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Perl versions 5.10 and later support subsidiary vertical and horizontal
character classes, <code>\v</code> and <code>\h</code>, as well as the generic whitespace character
class <code>\s</code></p>
<p>The cleanest solution is to use the <em>horizontal whitespace</em> character class
<code>\h</code>. This will match tab and space from the ASCII set, non-breaking space
from extended ASCII, or any of these Unicode characters</p>
<div class="code"><pre class="code literal-block"><span class="nv">U</span><span class="o">+</span><span class="mi">0009</span><span class="w"> </span><span class="nv">CHARACTER</span><span class="w"> </span><span class="nv">TABULATION</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">0020</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">00</span><span class="nv">A0</span><span class="w"> </span><span class="nv">NO</span><span class="o">-</span><span class="k">BREAK</span><span class="w"> </span><span class="nv">SPACE</span><span class="w"> </span><span class="ss">(</span><span class="nv">not</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span>\<span class="nv">s</span><span class="ss">)</span>

<span class="nv">U</span><span class="o">+</span><span class="mi">1680</span><span class="w"> </span><span class="nv">OGHAM</span><span class="w"> </span><span class="nv">SPACE</span><span class="w"> </span><span class="nv">MARK</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2000</span><span class="w"> </span><span class="nv">EN</span><span class="w"> </span><span class="nv">QUAD</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2001</span><span class="w"> </span><span class="nv">EM</span><span class="w"> </span><span class="nv">QUAD</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2002</span><span class="w"> </span><span class="nv">EN</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2003</span><span class="w"> </span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2004</span><span class="w"> </span><span class="nv">THREE</span><span class="o">-</span><span class="nv">PER</span><span class="o">-</span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2005</span><span class="w"> </span><span class="nv">FOUR</span><span class="o">-</span><span class="nv">PER</span><span class="o">-</span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2006</span><span class="w"> </span><span class="nv">SIX</span><span class="o">-</span><span class="nv">PER</span><span class="o">-</span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2007</span><span class="w"> </span><span class="nv">FIGURE</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2008</span><span class="w"> </span><span class="nv">PUNCTUATION</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2009</span><span class="w"> </span><span class="nv">THIN</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">200</span><span class="nv">A</span><span class="w"> </span><span class="nv">HAIR</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">202</span><span class="nv">F</span><span class="w"> </span><span class="nv">NARROW</span><span class="w"> </span><span class="nv">NO</span><span class="o">-</span><span class="k">BREAK</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">205</span><span class="nv">F</span><span class="w"> </span><span class="nv">MEDIUM</span><span class="w"> </span><span class="nv">MATHEMATICAL</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">3000</span><span class="w"> </span><span class="nv">IDEOGRAPHIC</span><span class="w"> </span><span class="nv">SPACE</span>
</pre></div>

<p>The <em>vertical space</em> pattern <code>\v</code> is less useful, but matches these characters</p>
<div class="code"><pre class="code literal-block"><span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">A</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="nv">FEED</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">B</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="nv">TABULATION</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">C</span><span class="w"> </span><span class="nv">FORM</span><span class="w"> </span><span class="nv">FEED</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">D</span><span class="w"> </span><span class="nv">CARRIAGE</span><span class="w"> </span><span class="k">RETURN</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">0085</span><span class="w"> </span><span class="k">NEXT</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="ss">(</span><span class="nv">not</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span>\<span class="nv">s</span><span class="ss">)</span>

<span class="nv">U</span><span class="o">+</span><span class="mi">2028</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="nv">SEPARATOR</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2029</span><span class="w"> </span><span class="nv">PARAGRAPH</span><span class="w"> </span><span class="nv">SEPARATOR</span>
</pre></div>

<p>There are seven vertical whitespace characters which match <code>\v</code> and eighteen
horizontal ones which match <code>\h</code>. <code>\s</code> matches twenty-three characters</p>
<p>All whitespace characters are either <em>vertical</em> or <em>horizontal</em> with no
overlap, but they are not proper subsets because <code>\h</code> also matches U+00A0 NO-
BREAK SPACE, and <code>\v</code> also matches U+0085 NEXT LINE, neither of which are
matched by <code>\s</code></p>
<p><br></p>
<h3>Suggest</h3>
<p>Perl versions 5.10 and later support subsidiary vertical and horizontal
character classes, <code>\v</code> and <code>\h</code>, as well as the generic whitespace character
class <code>\s</code></p>
<p>The cleanest solution is to use the <em>horizontal whitespace</em> character class
<code>\h</code>. This will match tab and space from the ASCII set, non-breaking space
from extended ASCII, or any of these Unicode characters</p>
<div class="code"><pre class="code literal-block"><span class="nv">U</span><span class="o">+</span><span class="mi">0009</span><span class="w"> </span><span class="nv">CHARACTER</span><span class="w"> </span><span class="nv">TABULATION</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">0020</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">00</span><span class="nv">A0</span><span class="w"> </span><span class="nv">NO</span><span class="o">-</span><span class="k">BREAK</span><span class="w"> </span><span class="nv">SPACE</span><span class="w"> </span><span class="ss">(</span><span class="nv">not</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span>\<span class="nv">s</span><span class="ss">)</span>

<span class="nv">U</span><span class="o">+</span><span class="mi">1680</span><span class="w"> </span><span class="nv">OGHAM</span><span class="w"> </span><span class="nv">SPACE</span><span class="w"> </span><span class="nv">MARK</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2000</span><span class="w"> </span><span class="nv">EN</span><span class="w"> </span><span class="nv">QUAD</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2001</span><span class="w"> </span><span class="nv">EM</span><span class="w"> </span><span class="nv">QUAD</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2002</span><span class="w"> </span><span class="nv">EN</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2003</span><span class="w"> </span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2004</span><span class="w"> </span><span class="nv">THREE</span><span class="o">-</span><span class="nv">PER</span><span class="o">-</span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2005</span><span class="w"> </span><span class="nv">FOUR</span><span class="o">-</span><span class="nv">PER</span><span class="o">-</span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2006</span><span class="w"> </span><span class="nv">SIX</span><span class="o">-</span><span class="nv">PER</span><span class="o">-</span><span class="nv">EM</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2007</span><span class="w"> </span><span class="nv">FIGURE</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2008</span><span class="w"> </span><span class="nv">PUNCTUATION</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2009</span><span class="w"> </span><span class="nv">THIN</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">200</span><span class="nv">A</span><span class="w"> </span><span class="nv">HAIR</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">202</span><span class="nv">F</span><span class="w"> </span><span class="nv">NARROW</span><span class="w"> </span><span class="nv">NO</span><span class="o">-</span><span class="k">BREAK</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">205</span><span class="nv">F</span><span class="w"> </span><span class="nv">MEDIUM</span><span class="w"> </span><span class="nv">MATHEMATICAL</span><span class="w"> </span><span class="nv">SPACE</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">3000</span><span class="w"> </span><span class="nv">IDEOGRAPHIC</span><span class="w"> </span><span class="nv">SPACE</span>
</pre></div>

<p>The <em>vertical space</em> pattern <code>\v</code> is less useful, but matches these characters</p>
<div class="code"><pre class="code literal-block"><span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">A</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="nv">FEED</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">B</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="nv">TABULATION</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">C</span><span class="w"> </span><span class="nv">FORM</span><span class="w"> </span><span class="nv">FEED</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">000</span><span class="nv">D</span><span class="w"> </span><span class="nv">CARRIAGE</span><span class="w"> </span><span class="k">RETURN</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">0085</span><span class="w"> </span><span class="k">NEXT</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="ss">(</span><span class="nv">not</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span>\<span class="nv">s</span><span class="ss">)</span>

<span class="nv">U</span><span class="o">+</span><span class="mi">2028</span><span class="w"> </span><span class="nv">LINE</span><span class="w"> </span><span class="nv">SEPARATOR</span>
<span class="nv">U</span><span class="o">+</span><span class="mi">2029</span><span class="w"> </span><span class="nv">PARAGRAPH</span><span class="w"> </span><span class="nv">SEPARATOR</span>
</pre></div>

<p>There are seven vertical whitespace characters which match <code>\v</code> and eighteen
horizontal ones which match <code>\h</code>. <code>\s</code> matches twenty-three characters</p>
<p>All whitespace characters are either <em>vertical</em> or <em>horizontal</em> with no
overlap, but they are not proper subsets because <code>\h</code> also matches U+00A0 NO-
BREAK SPACE, and <code>\v</code> also matches U+0085 NEXT LINE, neither of which are
matched by <code>\s</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-select-the-first-element-with-a-specific-attribute-using-xpath/" class="u-url">How to select the first element with a specific attribute using XPath</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-select-the-first-element-with-a-specific-attribute-using-xpath/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:37:27+08:00" itemprop="datePublished" title="2023-03-04 11:37">2023-03-04 11:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The XPath <code>bookstore/book[1]</code> selects the first book node under <code>bookstore</code>.</p>
<p>How can I select the first node that matches a more complicated condition,
e.g. the first node that matches <code>/bookstore/book[@location='US']</code></p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="o">/</span><span class="n">bookstore</span><span class="o">/</span><span class="n">book</span><span class="o">[</span><span class="n">@location='US'</span><span class="o">]</span><span class="p">)</span><span class="o">[</span><span class="n">1</span><span class="o">]</span>
</pre></div>

<p>This will first get the book elements with the location attribute equal to
'US'. Then it will select the first node from that set. Note the use of
parentheses, which are required by some implementations.</p>
<p>Note, this is not the same as <code>/bookstore/book[1][@location='US']</code> unless the
first element also happens to have that location attribute.</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>/bookstore/book[@location='US'][1]</code> works only with simple structure.</p>
<p>Add a bit more structure and things break.</p>
<p>With-</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;bookstore&gt;</span>
<span class="w"> </span><span class="nt">&lt;category&gt;</span>
<span class="w">  </span><span class="nt">&lt;book</span><span class="w"> </span><span class="na">location=</span><span class="s">"US"</span><span class="nt">&gt;</span>A1<span class="nt">&lt;/book&gt;</span>
<span class="w">  </span><span class="nt">&lt;book</span><span class="w"> </span><span class="na">location=</span><span class="s">"FIN"</span><span class="nt">&gt;</span>A2<span class="nt">&lt;/book&gt;</span>
<span class="w"> </span><span class="nt">&lt;/category&gt;</span>
<span class="w"> </span><span class="nt">&lt;category&gt;</span>
<span class="w">  </span><span class="nt">&lt;book</span><span class="w"> </span><span class="na">location=</span><span class="s">"FIN"</span><span class="nt">&gt;</span>B1<span class="nt">&lt;/book&gt;</span>
<span class="w">  </span><span class="nt">&lt;book</span><span class="w"> </span><span class="na">location=</span><span class="s">"US"</span><span class="nt">&gt;</span>B2<span class="nt">&lt;/book&gt;</span>
<span class="w"> </span><span class="nt">&lt;/category&gt;</span>
<span class="nt">&lt;/bookstore&gt;</span>
</pre></div>

<p><code>/bookstore/category/book[@location='US'][1]</code> yields</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;book</span><span class="w"> </span><span class="na">location=</span><span class="s">"US"</span><span class="nt">&gt;</span>A1<span class="nt">&lt;/book&gt;</span>
<span class="nt">&lt;book</span><span class="w"> </span><span class="na">location=</span><span class="s">"US"</span><span class="nt">&gt;</span>B2<span class="nt">&lt;/book&gt;</span>
</pre></div>

<p>not "the first node that matches a more complicated condition".
<code>/bookstore/category/book[@location='US'][2]</code> returns nothing.</p>
<p>With parentheses you can get the result the original question was for:</p>
<p><code>(/bookstore/category/book[@location='US'])[1]</code> gives</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;book</span><span class="w"> </span><span class="na">location=</span><span class="s">"US"</span><span class="nt">&gt;</span>A1<span class="nt">&lt;/book&gt;</span>
</pre></div>

<p>and <code>(/bookstore/category/book[@location='US'])[2]</code> works as expected.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/node-js-require-cache-possible-to-invalidate/" class="u-url">node.js require() cache - possible to invalidate?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/node-js-require-cache-possible-to-invalidate/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T11:36:05+08:00" itemprop="datePublished" title="2023-03-04 11:36">2023-03-04 11:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>From the node.js documentation:</p>
<blockquote>
<p>Modules are cached after the first time they are loaded. This means (among
other things) that every call to require('foo') will get exactly the same
object returned, if it would resolve to the same file.</p>
</blockquote>
<p>Is there a way to invalidate this cache? i.e. for unit testing, I'd like each
test to be working on a fresh object.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can always safely delete an entry in require.cache without a problem, even
when there are circular dependencies. Because when you delete, you just delete
a reference to the cached module object, not the module object itself, the
module object will not be GCed because in case of circular dependencies, there
is still a object referencing this module object.</p>
<p>Suppose you have:</p>
<p><em>script a.js:</em></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'./b.js'</span><span class="p">)</span><span class="o">.</span><span class="n">b</span><span class="p">;</span>
<span class="n">exports</span><span class="o">.</span><span class="n">a</span><span class="o">=</span><span class="s1">'a from a.js'</span><span class="p">;</span>
<span class="n">exports</span><span class="o">.</span><span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">;</span>
</pre></div>

<p>and <em>script b.js:</em></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'./a.js'</span><span class="p">)</span><span class="o">.</span><span class="n">a</span><span class="p">;</span>
<span class="n">exports</span><span class="o">.</span><span class="n">b</span><span class="o">=</span><span class="s1">'b from b.js'</span><span class="p">;</span>
<span class="n">exports</span><span class="o">.</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">;</span>
</pre></div>

<p>when you do:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'./a.js'</span><span class="p">)</span>
<span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'./b.js'</span><span class="p">)</span>
</pre></div>

<p>you will get:</p>
<div class="code"><pre class="code literal-block">&gt; a
{ a: 'a from a.js', b: 'b from b.js' }
&gt; b
{ b: 'b from b.js', a: undefined }
</pre></div>

<p>now if you edit your b.js:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'./a.js'</span><span class="p">)</span><span class="o">.</span><span class="n">a</span><span class="p">;</span>
<span class="n">exports</span><span class="o">.</span><span class="n">b</span><span class="o">=</span><span class="s1">'b from b.js. changed value'</span><span class="p">;</span>
<span class="n">exports</span><span class="o">.</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">;</span>
</pre></div>

<p>and do:</p>
<div class="code"><pre class="code literal-block">delete require.cache[require.resolve('./b.js')]
b=require('./b.js')
</pre></div>

<p>you will get:</p>
<div class="code"><pre class="code literal-block">&gt; a
{ a: 'a from a.js', b: 'b from b.js' }
&gt; b
{ b: 'b from b.js. changed value',
  a: 'a from a.js' }
</pre></div>

<p>===</p>
<p>The above is valid if directly running node.js. However, if using tools that
have their own module caching system, such as <strong>jest</strong> , the correct statement
would be:</p>
<div class="code"><pre class="code literal-block">jest.resetModules();
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you always want to reload your module, you could add this function:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">requireUncached</span><span class="ss">(</span><span class="nv">module</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">delete</span><span class="w"> </span><span class="nv">require</span>.<span class="nv">cache</span>[<span class="nv">require</span>.<span class="nv">resolve</span><span class="ss">(</span><span class="nv">module</span><span class="ss">)</span>]<span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">require</span><span class="ss">(</span><span class="nv">module</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>and then use <code>requireUncached('./myModule')</code> instead of require.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2378.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2376.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
