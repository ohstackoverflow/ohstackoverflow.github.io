<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 750) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-750.html">
<link rel="prev" href="index-751.html" type="text/html">
<link rel="next" href="index-749.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sql-injection-that-gets-around-mysql-real-escape-string/" class="u-url">SQL injection that gets around mysql_real_escape_string()</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/sql-injection-that-gets-around-mysql-real-escape-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:59:28+08:00" itemprop="datePublished" title="2023-02-17 14:59">2023-02-17 14:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there an SQL injection possibility even when using
<code>mysql_real_escape_string()</code> function?</p>
<p>Consider this sample situation. SQL is constructed in PHP like this:</p>
<div class="code"><pre class="code literal-block">$login = mysql_real_escape_string(GetFromPost('login'));
$password = mysql_real_escape_string(GetFromPost('password'));

$sql = "SELECT * FROM table WHERE login='$login' AND password='$password'";
</pre></div>

<p>I have heard numerous people say to me that code like that is still dangerous
and possible to hack even with <code>mysql_real_escape_string()</code> function used. But
I cannot think of any possible exploit?</p>
<p>Classic injections like this:</p>
<div class="code"><pre class="code literal-block">aaa' OR 1=1 --
</pre></div>

<p>do not work.</p>
<p>Do you know of any possible injection that would get through the PHP code
above?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Consider the following query:</p>
<div class="code"><pre class="code literal-block">$iId = mysql_real_escape_string("1 OR 1=1");    
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>

<p><code>mysql_real_escape_string()</code> will not protect you against this. <strong>The fact
that you use single quotes (<code>' '</code>) around your variables inside your query is
what protects you against this.</strong> The following is also an option:</p>
<div class="code"><pre class="code literal-block">$iId = (int)"1 OR 1=1";
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Consider the following query:</p>
<div class="code"><pre class="code literal-block">$iId = mysql_real_escape_string("1 OR 1=1");    
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>

<p><code>mysql_real_escape_string()</code> will not protect you against this. <strong>The fact
that you use single quotes (<code>' '</code>) around your variables inside your query is
what protects you against this.</strong> The following is also an option:</p>
<div class="code"><pre class="code literal-block">$iId = (int)"1 OR 1=1";
$sSql = "SELECT * FROM table WHERE id = $iId";
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-purpose-of-the-single-underscore-variable-in-python/" class="u-url">What is the purpose of the single underscore "_" variable in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-purpose-of-the-single-underscore-variable-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:59:05+08:00" itemprop="datePublished" title="2023-02-17 14:59">2023-02-17 14:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the meaning of <code>_</code> after <code>for</code> in this code?</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">tbh</span>.<span class="nv">bag</span>:
<span class="w">    </span><span class="nv">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">tbh</span>.<span class="nv">bag</span>.<span class="nv">atom_set</span><span class="ss">()</span>:
<span class="w">        </span><span class="nv">n</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><code>_</code> has 3 main conventional uses in Python:</p>
<ol>
<li>
<p>To hold the result of the last executed expression in an interactive interpreter session (see docs). This precedent was set by the standard CPython interpreter, and other interpreters have followed suit</p>
</li>
<li>
<p>For translation lookup in i18n (see the gettext documentation for example), as in code like</p>
<div class="code"><pre class="code literal-block">raise forms.ValidationError(_("Please enter a correct username"))
</pre></div>

</li>
<li>
<p>As a general purpose "throwaway" variable name:</p>
<ol>
<li>
<p>To indicate that part of a function result is being deliberately ignored (Conceptually, it is being discarded.), as in code like:</p>
<div class="code"><pre class="code literal-block">    label, has_label, _ = text.partition(':')
</pre></div>

</li>
<li>
<p>As part of a function definition (using either <code>def</code> or <code>lambda</code>), where the signature is fixed (e.g. by a callback or parent class API), but this particular function implementation doesn't need all of the parameters, as in code like:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">callback</span><span class="ss">(</span><span class="nv">_</span><span class="ss">)</span>:
<span class="k">return</span><span class="w"> </span><span class="nv">True</span>
</pre></div>

</li>
</ol>
</li>
</ol>
<p>[For a long time this answer didn't list this use case, but it came up often
enough, as noted here, to be worth listing explicitly.]</p>
<p>This use case can conflict with the translation lookup use case, so it is
necessary to avoid using <code>_</code> as a throwaway variable in any code block that
also uses it for i18n translation (many folks prefer a double-underscore,
<code>__</code>, as their throwaway variable for exactly this reason).</p>
<p>Linters often recognize this use case. For example <code>year, month, day = date()</code>
will raise a lint warning if <code>day</code> is not used later in the code. The fix, if
<code>day</code> is truly not needed, is to write <code>year, month, _ = date()</code>. Same with
lambda functions, <code>lambda arg: 1.0</code> creates a function requiring one argument
but not using it, which will be caught by lint. The fix is to write <code>lambda _:
1.0</code>. An unused variable is often hiding a bug/typo (e.g. set <code>day</code> but use
<code>dya</code> in the next line).</p>
<p>The pattern matching feature added in Python 3.10 elevated this usage from
"convention" to "language syntax" where <code>match</code> statements are concerned: in
match cases, <code>_</code> is a wildcard pattern, and the runtime doesn't even bind a
value to the symbol in that case.</p>
<p>For other use cases, remember that <code>_</code> is still a valid variable name, and
hence will still keep objects alive. In cases where this is undesirable (e.g.
to release memory or external resources) an explicit <code>del name</code> call will both
satisfy linters that the name is being used, <em>and</em> promptly clear the
reference to the object.</p>
<p><br></p>
<h3>Suggest</h3>
<p>It's just a variable name, and it's conventional in python to use <code>_</code> for
throwaway variables. It just indicates that the loop variable isn't actually
used.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/" class="u-url">Can you get the number of lines of code from a GitHub repository?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:58:37+08:00" itemprop="datePublished" title="2023-02-17 14:58">2023-02-17 14:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In a GitHub repository you can see “language statistics”, which displays the
<em>percentage</em> of the project that’s written in a language. It doesn’t, however,
display how many lines of code the project consists of. Often, I want to
quickly get an impression of the scale and complexity of a project, and the
count of lines of code can give a good first impression. 500 lines of code
implies a relatively simple project, 100,000 lines of code implies a very
large/complicated project.</p>
<p>So, is it possible to get the lines of code written in the various languages
from a GitHub repository, preferably without cloning it?</p>
<hr>
<p>The question “Count number of lines in a git repository” asks how to count the
lines of code in a local Git repository, but:</p>
<ol>
<li>You have to clone the project, which could be massive. Cloning a project like Wine, for example, takes ages.</li>
<li>You would count lines in files that wouldn’t necessarily be code, like i13n files.</li>
<li>If you count <em>just</em> (for example) Ruby files, you’d potentially miss massive amount of code in other languages, like JavaScript. You’d have to know beforehand which languages the project uses. You’d also have to repeat the count for every language the project uses.</li>
</ol>
<p>All in all, this is potentially far too time-intensive for “quickly checking
the scale of a project”.</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Not currently possible on Github.com or their API-s</h4>
<p>I have talked to customer support and confirmed that this can not be done on
github.com. They have passed the suggestion along to the Github team though,
so hopefully it will be possible in the future. If so, I'll be sure to edit
this answer.</p>
<p>Meanwhile, Rory O'Kane's answer is a brilliant alternative based on <code>cloc</code> and
a shallow repo clone.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>A shell script, <code>cloc-git</code>
</h2>
<p>You can use this shell script to count the number of lines in a remote Git
repository with one command:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/usr/bin/env bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code>git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span><span class="w"> </span>temp-linecount-repo<span class="w"> </span><span class="o">&amp;&amp;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"('temp-linecount-repo' will be deleted automatically)\n\n\n"</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="w">  </span>cloc<span class="w"> </span>temp-linecount-repo<span class="w"> </span><span class="o">&amp;&amp;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/can-you-get-the-number-of-lines-of-code-from-a-github-repository/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="w">  </span>rm<span class="w"> </span>-rf<span class="w"> </span>temp-linecount-repo
</code></td>
</tr>
</table></div>
<h3>Installation</h3>
<p>This script requires CLOC (“Count Lines of Code”) to be installed. <code>cloc</code> can
probably be installed with your package manager – for example, <code>brew install
cloc</code> with Homebrew. There is also a docker image published under
<code>mribeiro/cloc</code>.</p>
<p>You can install the script by saving its code to a file <code>cloc-git</code>, running
<code>chmod +x cloc-git</code>, and then moving the file to a folder in your <code>$PATH</code> such
as <code>/usr/local/bin</code>.</p>
<h3>Usage</h3>
<p>The script takes one argument, which is any URL that <code>git clone</code> will accept.
Examples are <code>https://github.com/evalEmpire/perl5i.git</code> (HTTPS) or
<code>git@github.com:evalEmpire/perl5i.git</code> (SSH). You can get this URL from any
GitHub project page by clicking “Clone or download”.</p>
<p>Example output:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>cloc-git<span class="w"> </span>https://github.com/evalEmpire/perl5i.git
Cloning<span class="w"> </span>into<span class="w"> </span><span class="s1">'temp-linecount-repo'</span>...
remote:<span class="w"> </span>Counting<span class="w"> </span>objects:<span class="w"> </span><span class="m">200</span>,<span class="w"> </span><span class="k">done</span>.
remote:<span class="w"> </span>Compressing<span class="w"> </span>objects:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">182</span>/182<span class="o">)</span>,<span class="w"> </span><span class="k">done</span>.
remote:<span class="w"> </span>Total<span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="o">(</span>delta<span class="w"> </span><span class="m">13</span><span class="o">)</span>,<span class="w"> </span>reused<span class="w"> </span><span class="m">158</span><span class="w"> </span><span class="o">(</span>delta<span class="w"> </span><span class="m">9</span><span class="o">)</span>,<span class="w"> </span>pack-reused<span class="w"> </span><span class="m">0</span>
Receiving<span class="w"> </span>objects:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">200</span>/200<span class="o">)</span>,<span class="w"> </span><span class="m">296</span>.52<span class="w"> </span>KiB<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">110</span>.00<span class="w"> </span>KiB/s,<span class="w"> </span><span class="k">done</span>.
Resolving<span class="w"> </span>deltas:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">13</span>/13<span class="o">)</span>,<span class="w"> </span><span class="k">done</span>.
Checking<span class="w"> </span>connectivity...<span class="w"> </span><span class="k">done</span>.
<span class="o">(</span><span class="s1">'temp-linecount-repo'</span><span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>deleted<span class="w"> </span>automatically<span class="o">)</span>


<span class="w">     </span><span class="m">171</span><span class="w"> </span>text<span class="w"> </span>files.
<span class="w">     </span><span class="m">166</span><span class="w"> </span>unique<span class="w"> </span>files.<span class="w">                                          </span>
<span class="w">      </span><span class="m">17</span><span class="w"> </span>files<span class="w"> </span>ignored.

http://cloc.sourceforge.net<span class="w"> </span>v<span class="w"> </span><span class="m">1</span>.62<span class="w">  </span><span class="nv">T</span><span class="o">=</span><span class="m">1</span>.13<span class="w"> </span>s<span class="w"> </span><span class="o">(</span><span class="m">134</span>.1<span class="w"> </span>files/s,<span class="w"> </span><span class="m">9764</span>.6<span class="w"> </span>lines/s<span class="o">)</span>
-------------------------------------------------------------------------------
Language<span class="w">                     </span>files<span class="w">          </span>blank<span class="w">        </span>comment<span class="w">           </span>code
-------------------------------------------------------------------------------
Perl<span class="w">                           </span><span class="m">149</span><span class="w">           </span><span class="m">2795</span><span class="w">           </span><span class="m">1425</span><span class="w">           </span><span class="m">6382</span>
JSON<span class="w">                             </span><span class="m">1</span><span class="w">              </span><span class="m">0</span><span class="w">              </span><span class="m">0</span><span class="w">            </span><span class="m">270</span>
YAML<span class="w">                             </span><span class="m">2</span><span class="w">              </span><span class="m">0</span><span class="w">              </span><span class="m">0</span><span class="w">            </span><span class="m">198</span>
-------------------------------------------------------------------------------
SUM:<span class="w">                           </span><span class="m">152</span><span class="w">           </span><span class="m">2795</span><span class="w">           </span><span class="m">1425</span><span class="w">           </span><span class="m">6850</span>
-------------------------------------------------------------------------------
</pre></div>

<h2>Alternatives</h2>
<h3>Run the commands manually</h3>
<p>If you don’t want to bother saving and installing the shell script, you can
run the commands manually. An example:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>--depth<span class="w"> </span><span class="m">1</span><span class="w"> </span>https://github.com/evalEmpire/perl5i.git
$<span class="w"> </span>cloc<span class="w"> </span>perl5i
$<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>perl5i
</pre></div>

<h3>Linguist</h3>
<p>If you want the results to match GitHub’s language percentages exactly, you
can try installing Linguist instead of CLOC. According to its README, you need
to <code>gem install linguist</code> and then run <code>linguist</code>. I couldn’t get it to work
(issue #2223).</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-751.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-749.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
