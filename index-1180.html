<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1180) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1180.html">
<link rel="prev" href="index-1181.html" type="text/html">
<link rel="next" href="index-1179.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/google-oauth-2-authorization-error-redirect-uri-mismatch/" class="u-url">Google OAuth 2 authorization - Error: redirect_uri_mismatch</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/google-oauth-2-authorization-error-redirect-uri-mismatch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:09:23+08:00" itemprop="datePublished" title="2023-02-18 03:09">2023-02-18 03:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>On the website https://code.google.com/apis/console I have registered my
application, set up generated <strong>Client ID:</strong> and <strong>Client Secret</strong> to my app
and tried to log in with Google. Unfortunately, I got the error message:</p>
<div class="code"><pre class="code literal-block"><span class="n">Error</span><span class="o">:</span><span class="w"> </span><span class="n">redirect_uri_mismatch</span>
<span class="n">The</span><span class="w"> </span><span class="n">redirect</span><span class="w"> </span><span class="n">URI</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">request</span><span class="o">:</span><span class="w"> </span><span class="n">http</span><span class="o">://</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">:</span><span class="mi">3000</span><span class="sr">/auth/google_oauth2/</span><span class="n">callback</span><span class="w"> </span><span class="n">did</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="n">redirect</span><span class="w"> </span><span class="n">URI</span>

<span class="n">scope</span><span class="o">=</span><span class="n">https</span><span class="o">://</span><span class="n">www</span><span class="o">.</span><span class="na">googleapis</span><span class="o">.</span><span class="na">com</span><span class="sr">/auth/userinfo.profile https://www.googleapis.com/auth/</span><span class="n">userinfo</span><span class="o">.</span><span class="na">email</span>
<span class="n">response_type</span><span class="o">=</span><span class="n">code</span>
<span class="n">redirect_uri</span><span class="o">=</span><span class="n">http</span><span class="o">://</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">:</span><span class="mi">3000</span><span class="sr">/auth/google_oauth2/</span><span class="n">callback</span>
<span class="n">access_type</span><span class="o">=</span><span class="n">offline</span>
<span class="n">approval_prompt</span><span class="o">=</span><span class="n">force</span>
<span class="n">client_id</span><span class="o">=</span><span class="n">generated_id</span>
</pre></div>

<p>What does mean this message, and how can I fix it? I use the gem <strong>omniauth-
google-oauth2</strong>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The redirect URI (where the response is returned to) has to be registered in
the APIs console, and the error is indicating that you haven't done that, or
haven't done it correctly.</p>
<p>Go to the console for your project and look under API Access. You should see
your <code>client ID</code> &amp; <code>client secret</code> there, along with a list of redirect URIs.
If the URI you want isn't listed, click edit settings and add the URI to the
list.</p>
<p>EDIT: (From a highly rated comment below) Note that updating the google api
console and that change being present can take some time. Generally only a few
minutes but sometimes it seems longer.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In my case it was <code>www</code> and <code>non-www</code> URL. Actual site had <code>www</code> URL and the
<strong>Authorized Redirect URIs</strong> in Google Developer Console had <code>non-www</code> URL.
Hence, there was mismatch in redirect URI. I solved it by updating <code>Authorized
Redirect URIs</code> in Google Developer Console to <code>www</code> URL.</p>
<p>Other common URI mismatch are:</p>
<ul>
<li>Using <code>http://</code> in Authorized Redirect URIs and <code>https://</code> as actual URL, or vice-versa</li>
<li>Using trailing slash (<code>http://example.com/</code>) in Authorized Redirect URIs and not using trailing slash (<code>http://example.com</code>) as actual URL, or vice-versa</li>
</ul>
<p>Here are the step-by-step screenshots of Google Developer Console so that it
would be helpful for those who are getting it difficult to locate the
developer console page to update redirect URIs.</p>
<blockquote>
<ol>
<li>
<p>Go to https://console.developers.google.com</p>
</li>
<li>
<p>Select your Project</p>
</li>
</ol>
</blockquote>
<p><img alt="Select your Project" src="images/RJfZi.png"></p>
<blockquote>
<ol>
<li>Click on the menu icon
</li>
</ol>
</blockquote>
<p><img alt="Click on the menu icon" src="images/xPR5j.png"></p>
<blockquote>
<ol>
<li>Click on <code>API Manager</code> menu
</li>
</ol>
</blockquote>
<p><img alt="Select API Manager menu" src="images/VQ9la.png"></p>
<blockquote>
<ol>
<li>Click on <code>Credentials</code> menu. And under <code>OAuth 2.0 Client IDs</code>, you will
find your client name. In my case, it is <code>Web Client 1</code>. Click on it and a
popup will appear where you can edit <strong>Authorized Javascript Origin</strong> and
<strong>Authorized redirect URIs</strong>.
</li>
</ol>
</blockquote>
<p><img alt="Select Credentials menu" src="images/X6rRh.png"></p>
<p><strong>Note</strong> : The Authorized URI includes all localhost links by default, and any
live version needs to include the full path, not just the domain, e.g.
https://example.com/path/to/oauth/url</p>
<p>Here is a Google article on creating project and client ID.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-create-multiple-where-clause-query-using-laravel-eloquent/" class="u-url">How to Create Multiple Where Clause Query Using Laravel Eloquent?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-create-multiple-where-clause-query-using-laravel-eloquent/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:08:46+08:00" itemprop="datePublished" title="2023-02-18 03:08">2023-02-18 03:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using the Laravel Eloquent query builder and I have a query where I want a
<code>WHERE</code> clause on multiple conditions. It works, but it's not elegant.</p>
<p>Example:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="nt">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">User</span><span class="p">::</span><span class="nd">where</span><span class="o">(</span><span class="s1">'this'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'that'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'this_too'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'that_too'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'this_as_well'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'that_as_well'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'this_one_too'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'that_one_too'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'this_one_as_well'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'that_one_as_well'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">get</span><span class="o">();</span>
</pre></div>

<p>Is there a better way to do this, or should I stick with this method?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>In Laravel 5.3</strong> (and still true as of 7.x) you can use more granular wheres
passed as an array:</p>
<div class="code"><pre class="code literal-block"><span class="err">$</span><span class="n">query</span><span class="o">-&gt;</span><span class="n">where</span><span class="p">([</span>
<span class="w">    </span><span class="p">[</span><span class="s">'column_1'</span><span class="p">,</span><span class="w"> </span><span class="s">'='</span><span class="p">,</span><span class="w"> </span><span class="s">'value_1'</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="s">'column_2'</span><span class="p">,</span><span class="w"> </span><span class="s">'&lt;&gt;'</span><span class="p">,</span><span class="w"> </span><span class="s">'value_2'</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="n">COLUMN</span><span class="p">,</span><span class="w"> </span><span class="n">OPERATOR</span><span class="p">,</span><span class="w"> </span><span class="n">VALUE</span><span class="p">],</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">])</span>
</pre></div>

<p>Personally I haven't found use-case for this over just multiple <code>where</code> calls,
but fact is you can use it.</p>
<p><strong>Since June 2014 you can pass an array to<code>where</code></strong></p>
<p>As long as you want all the <code>wheres</code> use <code>and</code> operator, you can group them
this way:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="nt">matchThese</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cp">[</span><span class="s1">'field'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">'value'</span><span class="p">,</span><span class="w"> </span><span class="s1">'another_field'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">'another_value'</span><span class="p">,</span><span class="w"> </span><span class="nx">...</span><span class="cp">]</span><span class="o">;</span>

<span class="o">//</span><span class="w"> </span><span class="nt">if</span><span class="w"> </span><span class="nt">you</span><span class="w"> </span><span class="nt">need</span><span class="w"> </span><span class="nt">another</span><span class="w"> </span><span class="nt">group</span><span class="w"> </span><span class="nt">of</span><span class="w"> </span><span class="nt">wheres</span><span class="w"> </span><span class="nt">as</span><span class="w"> </span><span class="nt">an</span><span class="w"> </span><span class="nt">alternative</span><span class="o">:</span>
<span class="o">$</span><span class="nt">orThose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cp">[</span><span class="s1">'yet_another_field'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">'yet_another_value'</span><span class="p">,</span><span class="w"> </span><span class="nx">...</span><span class="cp">]</span><span class="o">;</span>
</pre></div>

<p>Then:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="nt">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">User</span><span class="p">::</span><span class="nd">where</span><span class="o">($</span><span class="nt">matchThese</span><span class="o">)</span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">get</span><span class="o">();</span>

<span class="o">//</span><span class="w"> </span><span class="nt">with</span><span class="w"> </span><span class="nt">another</span><span class="w"> </span><span class="nt">group</span>
<span class="o">$</span><span class="nt">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">User</span><span class="p">::</span><span class="nd">where</span><span class="o">($</span><span class="nt">matchThese</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">orWhere</span><span class="o">($</span><span class="nt">orThose</span><span class="o">)</span>
<span class="w">    </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">get</span><span class="o">();</span>
</pre></div>

<p>The above will result in such query:</p>
<div class="code"><pre class="code literal-block">SELECT * FROM users
  WHERE (field = value AND another_field = another_value AND ...)
  OR (yet_another_field = yet_another_value AND ...)
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use subqueries in anonymous function like this:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">$</span><span class="nt">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">User</span><span class="p">::</span><span class="nd">where</span><span class="o">(</span><span class="s1">'this'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">       </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span><span class="s1">'that'</span><span class="o">,</span><span class="w"> </span><span class="s1">'='</span><span class="o">,</span><span class="w"> </span><span class="nt">1</span><span class="o">)</span>
<span class="w">       </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">where</span><span class="o">(</span>
<span class="w">           </span><span class="nt">function</span><span class="o">($</span><span class="nt">query</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">             </span><span class="err">return</span><span class="w"> </span><span class="err">$query</span>
<span class="w">                    </span><span class="err">-&gt;where('this_too',</span><span class="w"> </span><span class="err">'LIKE',</span><span class="w"> </span><span class="err">'%fake%')</span>
<span class="w">                    </span><span class="err">-&gt;orWhere('that_too',</span><span class="w"> </span><span class="err">'=',</span><span class="w"> </span><span class="err">1)</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="o">)</span>
<span class="w">            </span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">get</span><span class="o">();</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-round-to-1-decimal-place-in-javascript/" class="u-url">How do you round to 1 decimal place in Javascript?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-round-to-1-decimal-place-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:08:19+08:00" itemprop="datePublished" title="2023-02-18 03:08">2023-02-18 03:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Can you round a number in javascript to 1 character after the decimal point
(properly rounded)?</p>
<p>I tried the *10, round, /10 but it leaves two decimals at the end of the int.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>Math.round(num * 10) / 10</code> works, here is an example...</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">12.3456789</span>
<span class="k">var</span><span class="w"> </span><span class="n">rounded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">number</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span>
<span class="o">//</span><span class="w"> </span><span class="n">rounded</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mf">12.3</span>
</pre></div>

<p>if you want it to have one decimal place, even when that would be a 0, then
add...</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rounded</span><span class="o">.</span><span class="n">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">//</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">d</span><span class="o">.</span><span class="n">p</span><span class="o">.</span>
<span class="o">//</span><span class="w"> </span><span class="n">NOTE</span><span class="p">:</span><span class="w"> </span><span class="o">.</span><span class="n">toFixed</span><span class="p">()</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span><span class="o">!</span>

<span class="o">//</span><span class="w"> </span><span class="n">To</span><span class="w"> </span><span class="nb">convert</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">format</span>
<span class="n">parseFloat</span><span class="p">(</span><span class="n">number</span><span class="o">.</span><span class="n">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="o">//</span><span class="w"> </span><span class="mf">12.34</span>
<span class="o">//</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">retain</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="n">zeros</span>

<span class="o">//</span><span class="w"> </span><span class="n">So</span><span class="p">,</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">output</span><span class="p">,</span>
<span class="o">//</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">calculations</span><span class="o">!</span>
</pre></div>

<h4>EDIT: Add round with precision function...</h4>
<p>Using this principle, for reference, here is a handy little round function
that takes precision...</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="nb">round</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">precision</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">multiplier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">precision</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">multiplier</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">multiplier</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>... usage ...</p>
<div class="code"><pre class="code literal-block">round(12345.6789, 2) // 12345.68
round(12345.6789, 1) // 12345.7
</pre></div>

<p>... defaults to round to nearest whole number (precision 0) ...</p>
<div class="code"><pre class="code literal-block">round(12345.6789) // 12346
</pre></div>

<p>... and can be used to round to nearest 10 or 100 etc...</p>
<div class="code"><pre class="code literal-block">round(12345.6789, -1) // 12350
round(12345.6789, -2) // 12300
</pre></div>

<p>... and correct handling of negative numbers ...</p>
<div class="code"><pre class="code literal-block">round(-123.45, 1) // -123.4
round(123.45, 1) // 123.5
</pre></div>

<p>... and can be combined with toFixed to format consistently as string ...</p>
<div class="code"><pre class="code literal-block">round(456.7, 2).toFixed(2) // "456.70"
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">123.456</span><span class="p">;</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">number</span><span class="o">.</span><span class="n">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="nb">round</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">123.5</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1181.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1179.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
