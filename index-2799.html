<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2799) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2799.html">
<link rel="prev" href="index-2800.html" type="text/html">
<link rel="next" href="index-2798.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-flask-have-optional-url-parameters/" class="u-url">Can Flask have optional URL parameters?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-flask-have-optional-url-parameters/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:48:22+08:00" itemprop="datePublished" title="2023-03-05 18:48">2023-03-05 18:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is it possible to directly declare a flask URL optional parameter?</p>
<p>Currently I'm proceeding the following way:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@user</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/&lt;userId&gt;'</span><span class="p">)</span>
<span class="nv">@user</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/&lt;userId&gt;/&lt;username&gt;'</span><span class="p">)</span>
<span class="n">def</span><span class="w"> </span><span class="n">show</span><span class="p">(</span><span class="n">userId</span><span class="p">,</span><span class="w"> </span><span class="n">username</span><span class="o">=</span><span class="k">None</span><span class="p">)</span><span class="err">:</span>
<span class="w">    </span><span class="n">pass</span>
</pre></div>

<p>How can I directly say that <code>username</code> is optional?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Another way is to write</p>
<div class="code"><pre class="code literal-block"><span class="nv">@user</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/&lt;user_id&gt;'</span><span class="p">,</span><span class="w"> </span><span class="n">defaults</span><span class="o">=</span><span class="err">{</span><span class="s1">'username'</span><span class="err">:</span><span class="w"> </span><span class="k">None</span><span class="err">}</span><span class="p">)</span>
<span class="nv">@user</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/&lt;user_id&gt;/&lt;username&gt;'</span><span class="p">)</span>
<span class="n">def</span><span class="w"> </span><span class="n">show</span><span class="p">(</span><span class="nf">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">username</span><span class="p">)</span><span class="err">:</span>
<span class="w">    </span><span class="n">pass</span>
</pre></div>

<p>But I guess that you want to write a single route and mark <code>username</code> as
optional? If that's the case, I don't think it's possible.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Almost the same as Audrius cooked up some months ago, but you might find it a
bit more readable with the defaults in the function head - the way you are
used to with python:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/&lt;user_id&gt;'</span><span class="p">)</span>
<span class="nv">@app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/&lt;user_id&gt;/&lt;username&gt;'</span><span class="p">)</span>
<span class="n">def</span><span class="w"> </span><span class="n">show</span><span class="p">(</span><span class="nf">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">username</span><span class="o">=</span><span class="s1">'Anonymous'</span><span class="p">)</span><span class="err">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">user_id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">':'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">username</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/android-xml-percent-symbol/" class="u-url">Android XML Percent Symbol</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/android-xml-percent-symbol/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:46:57+08:00" itemprop="datePublished" title="2023-03-05 18:46">2023-03-05 18:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an array of strings in which the <code>%</code> symbol is used. Proper format for
using the <code>%</code> is <code>&amp;#37;</code>. When I have a string in that array with multiple
<code>&amp;#37;</code> it gives me this error.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span>Multiple<span class="w"> </span>annotations<span class="w"> </span>found<span class="w"> </span>at<span class="w"> </span>this
<span class="w"> </span>line:
<span class="w"> </span>-<span class="w"> </span>error:<span class="w"> </span>Multiple<span class="w"> </span>substitutions<span class="w"> </span>specified<span class="w"> </span>in<span class="w"> </span>non-positional<span class="w"> </span>format;
<span class="w">   </span>did<span class="w"> </span>you<span class="w"> </span>mean<span class="w"> </span>to<span class="w"> </span>add<span class="w"> </span>the<span class="w"> </span>formatted="false"<span class="w"> </span>attribute?
<span class="w"> </span>-<span class="w"> </span>error:<span class="w"> </span>Found<span class="w"> </span>tag<span class="w"> </span><span class="nt">&lt;/item&gt;</span><span class="w"> </span>where<span class="w"> </span><span class="nt">&lt;/string-array&gt;</span><span class="w"> </span>is<span class="w"> </span>expected
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The Android Asset Packaging Tool (<code>aapt</code>) has become very strict in its latest
release and is now used for <em>all</em> Android versions. The aapt-error you're
getting is generated because it no longer allows non-positional format
specifiers.</p>
<p>Here are a few ideas how you can include the %-symbol in your resource
strings.</p>
<p>If you don't need any format specifiers or substitutions in your string you
can simply make use of the <code>formatted</code> attribute and set it to <code>false</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;string</span><span class="w"> </span><span class="na">formatted=</span><span class="s">"false"</span><span class="nt">&gt;</span>%a<span class="w"> </span>+<span class="w"> </span>%a<span class="w"> </span>==<span class="w"> </span>2%a<span class="nt">&lt;/string&gt;</span>
</pre></div>

<p>In this case the string is not used as a format string for the <code>Formatter</code> so
you don't have to escape your %-symbols. The resulting string is "%a + %a ==
2%a".</p>
<p>If you omit the <code>formatted="false"</code> attribute, the string is used as a format
string and you have to escape the %-symbols. This is correctly done with
double-%:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;string&gt;</span>%%a<span class="w"> </span>+<span class="w"> </span>%%a<span class="w"> </span>==<span class="w"> </span>2%%a<span class="nt">&lt;/string&gt;</span>
</pre></div>

<p>Now <code>aapt</code> gives you no errors but depending on how you use it, the resulting
string can be "%%a + %%a == 2%%a" if a <code>Formatter</code> is invoked without any
format <em>arguments</em> :</p>
<div class="code"><pre class="code literal-block">Resources res = context.getResources();

String s1 = res.getString(R.string.str);
// s1 == "%%a + %%a == 2%%a"

String s2 = res.getString(R.string.str, null);
// s2 == "%a + %a == 2%a"
</pre></div>

<p>Without any xml and code it is difficult to say what exactly your problem is
but hopefully this helps you understand the mechanisms a little better.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To allow the app using formatted strings from resources you should correct
your xml. So, for example</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">"app_name"</span><span class="nt">&gt;</span>Your<span class="w"> </span>App<span class="w"> </span>name,<span class="w"> </span>ver.%d<span class="nt">&lt;/string&gt;</span>
</pre></div>

<p>should be replaced with</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;string</span><span class="w"> </span><span class="na">name=</span><span class="s">"app_name"</span><span class="nt">&gt;</span>Your<span class="w"> </span>App<span class="w"> </span>name,<span class="w"> </span>ver.%1$d<span class="nt">&lt;/string&gt;</span>
</pre></div>

<p>You can see this for details.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-way-to-show-a-preview-of-a-recyclerview-s-contents-in-the-android-studio-editor/" class="u-url">Is there a way to show a preview of a RecyclerView's contents in the Android Studio editor?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-way-to-show-a-preview-of-a-recyclerview-s-contents-in-the-android-studio-editor/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:45:27+08:00" itemprop="datePublished" title="2023-03-05 18:45">2023-03-05 18:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When I add the RecyclerView to the layout, it shows up as a blank screen. Is
there a way, such as through the <code>tools</code> namespace, to show a preview of the
content of the RecyclerView?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>@oRRs is right !</p>
<p>I'm using Android Studio 1.4 RC2 and you can now specify any custom layout.</p>
<p>I tried a custom CardView and it works.</p>
<div class="code"><pre class="code literal-block"><span class="n">tools</span><span class="o">:</span><span class="n">listitem</span><span class="o">=</span><span class="s2">"@android:layout/simple_list_item_checked"</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>Android tools and LayoutManager</strong></p>
<blockquote>
<p><code>tools</code> namespace enables design-time features (such as which layout to show
in a fragment) or compile-time behaviors (such as which shrinking mode to
apply to your XML resources) It is really powerful feature that is
developing and allows you not compile code every time to see changes</p>
</blockquote>
<p><strong>AndroidX</strong> [About] and <code>GridLayoutManager</code></p>
<div class="code"><pre class="code literal-block"><span class="n">implementation</span><span class="w"> </span><span class="s1">'androidx.recyclerview:recyclerview:1.1.0'</span>



<span class="o">&lt;</span><span class="n">androidx</span><span class="o">.</span><span class="n">recyclerview</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">RecyclerView</span>
<span class="w">    </span><span class="n">xmlns</span><span class="p">:</span><span class="n">android</span><span class="o">=</span><span class="s2">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="n">xmlns</span><span class="p">:</span><span class="n">tools</span><span class="o">=</span><span class="s2">"http://schemas.android.com/tools"</span>

<span class="w">    </span><span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="o">=</span><span class="s2">"match_parent"</span>
<span class="w">    </span><span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="o">=</span><span class="s2">"match_parent"</span>

<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">layoutManager</span><span class="o">=</span><span class="s2">"androidx.recyclerview.widget.GridLayoutManager"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">listitem</span><span class="o">=</span><span class="s2">"@layout/item"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">itemCount</span><span class="o">=</span><span class="s2">"10"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">orientation</span><span class="o">=</span><span class="s2">"vertical"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">scrollbars</span><span class="o">=</span><span class="s2">"vertical"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">spanCount</span><span class="o">=</span><span class="s2">"3"</span><span class="o">/&gt;</span>
</pre></div>

<p><strong>Support library</strong> and <code>LinearLayoutManager</code></p>
<div class="code"><pre class="code literal-block"><span class="n">implementation</span><span class="w"> </span><span class="s1">'com.android.support:recyclerview-v7:28.0.0'</span>



<span class="o">&lt;</span><span class="n">android</span><span class="o">.</span><span class="n">support</span><span class="o">.</span><span class="n">v7</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">RecyclerView</span>
<span class="w">    </span><span class="n">xmlns</span><span class="p">:</span><span class="n">android</span><span class="o">=</span><span class="s2">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="n">xmlns</span><span class="p">:</span><span class="n">tools</span><span class="o">=</span><span class="s2">"http://schemas.android.com/tools"</span>

<span class="w">    </span><span class="n">android</span><span class="p">:</span><span class="n">layout_width</span><span class="o">=</span><span class="s2">"match_parent"</span>
<span class="w">    </span><span class="n">android</span><span class="p">:</span><span class="n">layout_height</span><span class="o">=</span><span class="s2">"wrap_content"</span>

<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">layoutManager</span><span class="o">=</span><span class="s2">"android.support.v7.widget.LinearLayoutManager"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">listitem</span><span class="o">=</span><span class="s2">"@layout/item"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">itemCount</span><span class="o">=</span><span class="s2">"3"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">orientation</span><span class="o">=</span><span class="s2">"horizontal"</span>
<span class="w">    </span><span class="n">tools</span><span class="p">:</span><span class="n">scrollbars</span><span class="o">=</span><span class="s2">"horizontal"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<p>Another cool feature that was introduced in <code>Android studio 3.0</code> is
predefining a data through the tools attributes, to visualised easily your
layout structure using <code>@tools:sample/*</code> resources</p>
<p>item.xml</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;FrameLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"100dp"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"150dp"</span>
<span class="w">    </span><span class="na">android:layout_marginRight=</span><span class="s">"15dp"</span>
<span class="w">    </span><span class="na">android:layout_marginBottom=</span><span class="s">"10dp"</span>
<span class="w">    </span><span class="na">android:orientation=</span><span class="s">"vertical"</span>
<span class="w">    </span><span class="na">tools:background=</span><span class="s">"@tools:sample/backgrounds/scenic"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;TextView</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="w">        </span><span class="na">android:textColor=</span><span class="s">"@color/colorWhite"</span>
<span class="w">        </span><span class="na">tools:text=</span><span class="s">"@tools:sample/first_names"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="nt">&lt;/FrameLayout&gt;</span>
</pre></div>

<p><strong>Simulator results:</strong></p>
<p><img alt="" src="images/vP3Hl.png"><img alt="" src="images/PUPZ6.png"><img alt="" src="images/LopuJ.png"></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2800.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2798.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
