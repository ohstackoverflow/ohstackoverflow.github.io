<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2087) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2087.html">
<link rel="prev" href="index-2088.html" type="text/html">
<link rel="next" href="index-2086.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-write-a-python-module-package/" class="u-url">How to write a Python module/package?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-write-a-python-module-package/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:38:39+08:00" itemprop="datePublished" title="2023-03-03 16:38">2023-03-03 16:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've been making Python scripts for simple tasks at work and never really
bothered packaging them for others to use. Now I have been assigned to make a
Python wrapper for a REST API. I have absolutely no idea on how to start and I
need help.</p>
<p><strong>What I have:</strong></p>
<p>(Just want to be specific as possible) I have the virtualenv ready, it's also
up in github, the .gitignore file for python is there as well, plus, the
requests library for interacting with the REST API. That's it.</p>
<p>Here's the current directory tree</p>
<div class="code"><pre class="code literal-block">.
├──<span class="w"> </span><span class="nv">bin</span>
│<span class="w">   </span>└──<span class="w"> </span><span class="o">/</span><span class="nv">the</span><span class="w"> </span><span class="nv">usual</span><span class="w"> </span><span class="nv">stuff</span><span class="o">/</span>
├──<span class="w"> </span><span class="k">include</span>
│<span class="w">   </span>└──<span class="w"> </span><span class="o">/</span><span class="nv">the</span><span class="w"> </span><span class="nv">usual</span><span class="w"> </span><span class="nv">stuff</span><span class="o">/</span>
├──<span class="w"> </span><span class="nv">lib</span>
│<span class="w">   </span>└──<span class="w"> </span><span class="nv">python2</span>.<span class="mi">7</span>
│<span class="w">       </span>└──<span class="w"> </span><span class="o">/</span><span class="nv">the</span><span class="w"> </span><span class="nv">usual</span><span class="w"> </span><span class="nv">stuff</span><span class="o">/</span>
├──<span class="w"> </span><span class="nv">local</span>
│<span class="w">   </span>└──<span class="w"> </span><span class="o">/</span><span class="nv">the</span><span class="w"> </span><span class="nv">usual</span><span class="w"> </span><span class="nv">stuff</span><span class="o">/</span>
└──<span class="w"> </span><span class="nv">README</span>.<span class="nv">md</span>

<span class="mi">27</span><span class="w"> </span><span class="nv">directories</span>,<span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="nv">files</span>
</pre></div>

<p>I don't even know where to put the .py files, if I ever make one.</p>
<p><strong>What I wanted to do:</strong></p>
<p>Make a python module install-able with "pip install ..."</p>
<p>If possible, I want a general step by step process on writing Python modules.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A module is a file containing Python definitions and statements. The file name
is the module name with the suffix <code>.py</code></p>
<p>create <code>hello.py</code> then write the following function as its content:</p>
<div class="code"><pre class="code literal-block">def helloworld():
   print "hello"
</pre></div>

<p>Then you can import <code>hello</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">hello</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hello</span><span class="o">.</span><span class="n">helloworld</span><span class="p">()</span>
<span class="s1">'hello'</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>

<p>To group many <code>.py</code> files put them in a folder. Any folder with an
<code>__init__.py</code> is considered a module by python and you can call them a package</p>
<div class="code"><pre class="code literal-block">|-HelloModule
  |_ __init__.py
  |_ hellomodule.py
</pre></div>

<p>You can go about with the import statement on your module the usual way.</p>
<p>For more information, see 6.4. Packages.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Python 3 - UPDATED 18th November 2015</strong></p>
<p><em>Found the accepted answer useful, yet wished to expand on several points for
the benefit of others based on my own experiences.</em></p>
<p><strong>Module:</strong> A module is a file containing Python definitions and statements.
The file name is the module name with the suffix .py appended.</p>
<p><strong>Module Example</strong> : Assume we have a single python script in the current
directory, here I am calling it <em>mymodule.py</em></p>
<p>The file <em>mymodule.py</em> contains the following code:</p>
<div class="code"><pre class="code literal-block">def myfunc():
    print("Hello!")
</pre></div>

<p>If we run the python3 interpreter from the current directory, we can import
and run the function <em>myfunc</em> in the following different ways (you would
typically just choose one of the following):</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">mymodule</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">mymodule</span> <span class="kn">import</span> <span class="n">myfunc</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">mymodule</span> <span class="kn">import</span> <span class="o">*</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
</pre></div>

<p>Ok, so that was easy enough.</p>
<p>Now assume you have the need to put this module into its own dedicated folder
to provide a module namespace, instead of just running it ad-hoc from the
current working directory. This is where it is worth explaining the concept of
a <strong>package</strong>.</p>
<p><strong>Package</strong> : Packages are a way of structuring Python’s module namespace by
using “dotted module names”. For example, the module name A.B designates a
submodule named B in a package named A. Just like the use of modules saves the
authors of different modules from having to worry about each other’s global
variable names, the use of dotted module names saves the authors of multi-
module packages like NumPy or the Python Imaging Library from having to worry
about each other’s module names.</p>
<p><strong>Package Example</strong> : Let's now assume we have the following folder and files.
Here, <strong>mymodule.py</strong> is identical to before, and <strong><strong>init</strong>.py</strong> is an empty
file:</p>
<div class="code"><pre class="code literal-block">.
└── mypackage
    ├── __init__.py
    └── mymodule.py
</pre></div>

<p>The <strong>init</strong>.py files are required to make Python treat the directories as
containing packages. For further information, please see the Modules
documentation link provided later on.</p>
<p>Our current working directory is one level above the ordinary folder called
<strong>mypackage</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>ls
mypackage
</pre></div>

<p>If we run the python3 interpreter now, we can import and run the module
<strong>mymodule.py</strong> containing the required function <em>myfunc</em> in the following
different ways (you would typically just choose one of the following):</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">mypackage</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">mypackage</span> <span class="kn">import</span> <span class="n">mymodule</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">mypackage.mymodule</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mypackage</span><span class="o">.</span><span class="n">mymodule</span><span class="o">.</span><span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">mypackage</span> <span class="kn">import</span> <span class="n">mymodule</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mymodule</span><span class="o">.</span><span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">mypackage.mymodule</span> <span class="kn">import</span> <span class="n">myfunc</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">mypackage.mymodule</span> <span class="kn">import</span> <span class="o">*</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">myfunc</span><span class="p">()</span>
<span class="n">Hello</span><span class="err">!</span>
</pre></div>

<p>Assuming Python 3, there is excellent documentation at: Modules</p>
<p>In terms of naming conventions for packages and modules, the general
guidelines are given in PEP-0008 - please see Package and Module Names</p>
<p>Modules should have short, all-lowercase names. Underscores can be used in the
module name if it improves readability. Python packages should also have
short, all-lowercase names, although the use of underscores is discouraged.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-views-and-materialized-views-in-oracle/" class="u-url">What is the difference between Views and Materialized Views in Oracle?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-views-and-materialized-views-in-oracle/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:35:56+08:00" itemprop="datePublished" title="2023-03-03 16:35">2023-03-03 16:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between Views and Materialized Views in Oracle?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Materialized views are disk based and are updated periodically based upon the
query definition.</p>
<p>Views are virtual only and run the query definition each time they are
accessed.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Views</h2>
<p>They evaluate the data in the tables underlying the view definition <strong>at the
time the view is queried</strong>. It is a logical view of your tables, with no data
stored anywhere else.</p>
<p>The upside of a view is that it will <strong>always return the latest data to you</strong>.
The <strong>downside of a view is that its performance</strong> depends on how good a
select statement the view is based on. If the select statement used by the
view joins many tables, or uses joins based on non-indexed columns, the view
could perform poorly.</p>
<h2>Materialized views</h2>
<p>They are similar to regular views, in that they are a logical view of your
data (based on a select statement), however, the <strong>underlying query result set
has been saved to a table</strong>. The upside of this is that when you query a
materialized view, <strong>you are querying a table</strong> , which may also be indexed.</p>
<p>In addition, because all the joins have been resolved at materialized view
refresh time, you pay the price of the join once (or as often as you refresh
your materialized view), rather than each time you select from the
materialized view. In addition, with query rewrite enabled, Oracle can
optimize a query that selects from the source of your materialized view in
such a way that it instead reads from your materialized view. In situations
where you create materialized views as forms of aggregate tables, or as copies
of frequently executed queries, this can greatly speed up the response time of
your end user application. The <strong>downside though is that the data you get back
from the materialized view is only as up to date as the last time the
materialized view has been refreshed</strong>.</p>
<hr>
<p>Materialized views can be set to refresh manually, on a set schedule, or
<em>based on the database detecting a change in data from one of the underlying
tables</em>. Materialized views can be incrementally updated by combining them
with materialized view logs, which <strong>act as change data capture sources</strong> on
the underlying tables.</p>
<p>Materialized views are most often used in data warehousing / business
intelligence applications where querying large fact tables with thousands of
millions of rows would result in query response times that resulted in an
unusable application.</p>
<hr>
<p>Materialized views also help to guarantee a consistent moment in time, similar
to snapshot isolation.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-grep-for-all-non-ascii-characters/" class="u-url">How do I grep for all non-ASCII characters?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-grep-for-all-non-ascii-characters/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:35:31+08:00" itemprop="datePublished" title="2023-03-03 16:35">2023-03-03 16:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have several very large XML files and I'm trying to find the lines that
contain non-ASCII characters. I've tried the following:</p>
<div class="code"><pre class="code literal-block"><span class="n">grep -e "[\x{00FF}-\x{FFFF}]" file.xml</span>
</pre></div>

<p>But this returns every line in the file, regardless of whether the line
contains a character in the range specified.</p>
<p>Do I have the syntax wrong or am I doing something else wrong? I've also
tried:</p>
<div class="code"><pre class="code literal-block"><span class="n">egrep "[\x{00FF}-\x{FFFF}]" file.xml</span>
</pre></div>

<p>(with both single and double quotes surrounding the pattern).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the command:</p>
<div class="code"><pre class="code literal-block"><span class="n">grep --color='auto' -P -n "[\x80-\xFF]" file.xml</span>
</pre></div>

<p>This will give you the line number, and will highlight non-ascii chars in red.</p>
<p>In some systems, depending on your settings, the above will not work, so you
can grep by the inverse</p>
<div class="code"><pre class="code literal-block"><span class="n">grep --color='auto' -P -n "[^\x00-\x7F]" file.xml</span>
</pre></div>

<p>Note also, that the important bit is the <code>-P</code> flag which equates to <code>--perl-
regexp</code>: so it will interpret your pattern as a Perl regular expression. It
also says that</p>
<blockquote>
<p>this is highly experimental and grep -P may warn of unimplemented features.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Instead of making assumptions about the byte range of non-ASCII characters, as
most of the above solutions do, it's slightly better IMO to be explicit about
the actual byte range of ASCII characters instead.</p>
<p>So the first solution for instance would become:</p>
<div class="code"><pre class="code literal-block"><span class="n">grep --color='auto' -P -n '[^\x00-\x7F]' file.xml</span>
</pre></div>

<p><em>(which basically greps for any character outside of the hexadecimal ASCII
range: from \x00 up to \x7F)</em></p>
<p>On Mountain Lion that won't work <em>(due to the lack of PCRE support in BSD
grep)</em> , but with <code>pcre</code> installed via Homebrew, the following will work just
as well:</p>
<div class="code"><pre class="code literal-block"><span class="n">pcregrep</span><span class="w"> </span><span class="o">--</span><span class="n">color</span><span class="o">=</span><span class="p">'</span><span class="n">auto</span><span class="p">'</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="p">'[</span><span class="o">^</span><span class="n">\x00-\x7F]'</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="n">xml</span>
</pre></div>

<p>Any pros or cons that anyone can think off?</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2088.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2086.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
