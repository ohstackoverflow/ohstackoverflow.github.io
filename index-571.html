<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 571) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-571.html">
<link rel="prev" href="index-572.html" type="text/html">
<link rel="next" href="index-570.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mysql-large-varchar-vs-text/" class="u-url">MySQL: Large VARCHAR vs. TEXT?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mysql-large-varchar-vs-text/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:15:15+08:00" itemprop="datePublished" title="2023-02-17 10:15">2023-02-17 10:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've got a messages table in MySQL which records messages between users. Apart
from the typical ids and message types (all integer types) I need to save the
actual message text as either VARCHAR or TEXT. I'm setting a front-end limit
of 3000 characters which means the messages would never be inserted into the
db as longer than this.</p>
<p>Is there a rationale for going with either VARCHAR(3000) or TEXT? There's
something about just writing VARCHAR(3000) that feels somewhat counter-
intuitive. I've been through other similar posts on Stack Overflow but would
be good to get views specific to this type of common message storing.</p>
<p><br><br></p>
<h2>Answer</h2>
<ul>
<li>
<p><code>TEXT</code> and <code>BLOB</code> <em>may</em> by stored off the table with the table just having a pointer to the location of the actual storage. Where it is stored depends on lots of things like data size, columns size, row_format, and MySQL version.</p>
</li>
<li>
<p><code>VARCHAR</code> is stored inline with the table. <code>VARCHAR</code> is faster when the size is reasonable, the tradeoff of which would be faster depends upon your data and your hardware, you'd want to benchmark a real-world scenario with your data.</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Can you predict how long the user input would be?</p>
<blockquote>
<h3>VARCHAR(X)</h3>
<blockquote>
<p><strong>Max Length:</strong> variable, up to 65,535 bytes (64KB)<br><strong>Case:</strong> user name, email, country, subject, password</p>
</blockquote>
<hr>
<h3>TEXT</h3>
<blockquote>
<p><strong>Max Length:</strong> 65,535 bytes (64KB)<br><strong>Case:</strong> messages, emails, comments, formatted text, html, code, images,
links</p>
</blockquote>
<hr>
<h3>MEDIUMTEXT</h3>
<blockquote>
<p><strong>Max Length:</strong> 16,777,215 bytes (16MB)<br><strong>Case:</strong> large json bodies, short to medium length books, csv strings</p>
</blockquote>
<hr>
<h3>LONGTEXT</h3>
<blockquote>
<p><strong>Max Length:</strong> 4,294,967,29 bytes (4GB)<br><strong>Case:</strong> textbooks, programs, years of logs files, harry potter and the
goblet of fire, scientific research logging</p>
</blockquote>
</blockquote>
<p>There's more information on this question.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-access-post-form-fields-in-express/" class="u-url">How to access POST form fields in Express</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-access-post-form-fields-in-express/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:14:47+08:00" itemprop="datePublished" title="2023-02-17 10:14">2023-02-17 10:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Here is my simple form:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form</span><span class="w"> </span><span class="na">id=</span><span class="s">"loginformA"</span><span class="w"> </span><span class="na">action=</span><span class="s">"userlogin"</span><span class="w"> </span><span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div&gt;</span>
<span class="w">        </span><span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>Email:<span class="w"> </span><span class="nt">&lt;/label&gt;</span>
<span class="w">        </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">id=</span><span class="s">"email"</span><span class="w"> </span><span class="na">name=</span><span class="s">"email"</span><span class="nt">&gt;&lt;/input&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"submit"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Submit"</span><span class="nt">&gt;&lt;/input&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>Here is my Express.js/Node.js code:</p>
<div class="code"><pre class="code literal-block"><span class="n">app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">'/userlogin'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">sReq</span><span class="p">,</span><span class="w"> </span><span class="n">sRes</span><span class="p">){</span><span class="w">    </span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sReq</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">email</span><span class="o">.</span><span class="p">;</span><span class="w">   </span>
<span class="p">}</span>
</pre></div>

<p>I tried <code>sReq.query.email</code> or <code>sReq.query['email']</code> or <code>sReq.params['email']</code>,
etc. None of them work. They all return <code>undefined</code>.</p>
<p>When I change to a Get call, it works, so .. any idea?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Things have changed once again starting <strong>Express 4.16.0</strong> , you can now use
<code>express.json()</code> and <code>express.urlencoded()</code> just like in <strong>Express 3.0</strong>.</p>
<p>This was different starting <strong>Express 4.0 to 4.15</strong> :</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>--save<span class="w"> </span>body-parser
</pre></div>

<p>and then:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">bodyParser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'body-parser'</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="w"> </span><span class="n">bodyParser</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="w"> </span><span class="p">);</span><span class="w">       </span><span class="o">//</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">JSON</span><span class="o">-</span><span class="n">encoded</span><span class="w"> </span><span class="n">bodies</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">bodyParser</span><span class="o">.</span><span class="n">urlencoded</span><span class="p">({</span><span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">URL</span><span class="o">-</span><span class="n">encoded</span><span class="w"> </span><span class="n">bodies</span>
<span class="w">  </span><span class="n">extended</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="p">}));</span>
</pre></div>

<p>The rest is like in <strong>Express 3.0</strong> :</p>
<p>Firstly you need to add some middleware to parse the post data of the body.</p>
<p>Add one or both of the following lines of code:</p>
<div class="code"><pre class="code literal-block">app.use(express.json());       // to support JSON-encoded bodies
app.use(express.urlencoded()); // to support URL-encoded bodies
</pre></div>

<p>Then, in your handler, use the <code>req.body</code> object:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">assuming</span><span class="w"> </span><span class="n">POST</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="n">foo</span><span class="o">&amp;</span><span class="n">color</span><span class="o">=</span><span class="n">red</span><span class="w">            </span><span class="o">&lt;--</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="n">encoding</span>
<span class="o">//</span>
<span class="o">//</span><span class="w"> </span><span class="ow">or</span><span class="w">       </span><span class="n">POST</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"foo"</span><span class="p">,</span><span class="s2">"color"</span><span class="p">:</span><span class="s2">"red"</span><span class="p">}</span><span class="w">  </span><span class="o">&lt;--</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">encoding</span>

<span class="n">app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">'/test-page'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">color</span><span class="p">;</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="p">});</span>
</pre></div>

<hr>
<p>Note that the use of <code>express.bodyParser()</code> is not recommended.</p>
<div class="code"><pre class="code literal-block">app.use(express.bodyParser());
</pre></div>

<p>...is equivalent to:</p>
<div class="code"><pre class="code literal-block">app.use(express.json());
app.use(express.urlencoded());
app.use(express.multipart());
</pre></div>

<p>Security concerns exist with <code>express.multipart()</code>, and so it is better to
explicitly add support for the specific encoding type(s) you require. If you
do need multipart encoding (to support uploading files for example) then you
should read this.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Security concern using express.bodyParser()</strong></p>
<p>While all the other answers currently recommend using the
<code>express.bodyParser()</code> middleware, this is actually a wrapper around the
<code>express.json()</code>, <code>express.urlencoded()</code>, and <code>express.multipart()</code>
middlewares (http://expressjs.com/api.html#bodyParser). The parsing of form
request bodies is done by the <code>express.urlencoded()</code> middleware and is all
that you need to expose your form data on <code>req.body</code> object.</p>
<p>Due to a security concern with how <code>express.multipart()</code>/<code>connect.multipart()</code>
creates temporary files for all uploaded files (and are not garbage
collected), it is now <em>recommended</em> not to use the <code>express.bodyParser()</code>
wrapper but instead use only the middlewares you need.</p>
<p>Note: <code>connect.bodyParser()</code> will soon be updated to only include <code>urlencoded</code>
and <code>json</code> when Connect 3.0 is released (which Express extends).</p>
<hr>
<p>So in short, instead of ...</p>
<div class="code"><pre class="code literal-block">app.use(express.bodyParser());
</pre></div>

<p>...you should use</p>
<div class="code"><pre class="code literal-block"><span class="nv">app</span>.<span class="nv">use</span><span class="ss">(</span><span class="nv">express</span>.<span class="nv">urlencoded</span><span class="ss">())</span><span class="c1">;</span>
<span class="nv">app</span>.<span class="nv">use</span><span class="ss">(</span><span class="nv">express</span>.<span class="nv">json</span><span class="ss">())</span><span class="c1">;      // if needed</span>
</pre></div>

<p>and if/when you need to handle multipart forms (file uploads), use a third
party library or middleware such as multiparty, busboy, dicer, etc.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-move-the-cursor-word-by-word-in-the-os-x-terminal/" class="u-url">How to move the cursor word by word in the OS X Terminal</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-move-the-cursor-word-by-word-in-the-os-x-terminal/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:14:19+08:00" itemprop="datePublished" title="2023-02-17 10:14">2023-02-17 10:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I know the combination <code>Ctrl</code>+<code>A</code> to jump to the beginning of the current
command, and <code>Ctrl</code>+<code>E</code> to jump to the end.</p>
<p>But is there any way to jump word by word, like <code>Alt</code>+<code>←</code>/<code>→</code> in Cocoa
applications does?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Out of the box you can use the quite bizarre <code>Esc</code>+<code>F</code> to move to the
beginning of the next word and <code>Esc</code>+<code>B</code> to move to the beginning of the
current word.</p>
<p><br></p>
<h3>Suggest</h3>
<p>On macOS (all versions) the following keyboard shortcuts work by default.</p>
<ul>
<li>
<code>ALT</code>+<code>F</code> to jump <strong>F</strong> orward by a word.</li>
<li>
<code>ALT</code>+<code>B</code> to jump <strong>B</strong> ackward by a word.</li>
</ul>
<p>Note that you have to make set the <strong>Option</strong> key to act like the <strong>Meta</strong>
key. You can do this in Terminal by accessing preferences (CMD+,) and
selecting Profiles -&gt; Keyboard. In iTerm2 Pselect rofiles -&gt; Keys -&gt; General
and select "Option key as Esc+."</p>
<p><img alt="Terminal and iTerm2 Preference Screens" src="images/b22Mm.jpg"></p>
<p>Additionally some Emacs-style key bindings for simple text navigation seem to
work on bash shells. You can use:</p>
<ul>
<li>
<code>CTRL</code>+<code>F</code> to move forward by a char</li>
<li>
<code>CTRL</code>+<code>B</code> to move backward by a char</li>
<li>
<code>CTRL</code>+<code>A</code> to jump to start of the line</li>
<li>
<code>CTRL</code>+<code>E</code> to jump to end of the line</li>
<li>
<code>CTRL</code>+<code>K</code> to kill the line starting from the cursor position</li>
<li>
<code>ALT</code>+<code>D</code> to delete a word starting from the current cursor position</li>
<li>
<code>CTRL</code>+<code>W</code> to remove the word backwards from cursor position</li>
<li>
<code>CTRL</code>+<code>Y</code> to paste text from the kill buffer</li>
<li>
<code>CTRL</code>+<code>R</code> to reverse search for commands you typed in the past from your history.</li>
<li>
<code>CTRL</code>+<code>S</code> to forward search (works in ZSH for me but not bash)</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-572.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-570.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
