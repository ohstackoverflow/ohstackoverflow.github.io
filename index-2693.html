<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2693) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2693.html">
<link rel="prev" href="index-2694.html" type="text/html">
<link rel="next" href="index-2692.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-implement-interfaces-in-python/" class="u-url">How do I implement interfaces in python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-implement-interfaces-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T10:54:17+08:00" itemprop="datePublished" title="2023-03-05 10:54">2023-03-05 10:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">IInterface</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="n">show</span><span class="p">();</span>
<span class="p">}</span>

<span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IInterface</span>
<span class="p">{</span>

<span class="w">    </span><span class="p">#</span><span class="n">region</span><span class="w"> </span><span class="n">IInterface</span><span class="w"> </span><span class="n">Members</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="n">show</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="n">endregion</span>
<span class="p">}</span>
</pre></div>

<p>How do I implement Python equivalent of this C# code ?</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">IInterface</span>(<span class="n">object</span>):
    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>):
        <span class="nb">pass</span>

    <span class="n">def</span> <span class="n">show</span>(<span class="nb">self</span>):
        <span class="n">raise</span> <span class="nb">Exception</span>(<span class="s">"NotImplementedException"</span>)


<span class="k">class</span> <span class="n">MyClass</span>(<span class="n">IInterface</span>):
   <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>):
       <span class="n">IInterface</span>.<span class="n">__init__</span>(<span class="nb">self</span>)

   <span class="n">def</span> <span class="n">show</span>(<span class="nb">self</span>):
       <span class="nb">print</span> <span class="s">'Hello World!'</span>
</pre></div>

<p>Is this a good idea?? Please give examples in your answers.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As mentioned by other here:</p>
<p>Interfaces are not necessary in Python. This is because Python has proper
multiple inheritance, and also ducktyping, which means that the places where
you <em>must</em> have interfaces in Java, you don't have to have them in Python.</p>
<p>That said, there are still several uses for interfaces. Some of them are
covered by Pythons Abstract Base Classes, introduced in Python 2.6. They are
useful, if you want to make base classes that cannot be instantiated, but
provide a specific interface or part of an implementation.</p>
<p>Another usage is if you somehow want to specify that an object implements a
specific interface, and you can use ABC's for that too by subclassing from
them. Another way is zope.interface, a module that is a part of the Zope
Component Architecture, a really awesomely cool component framework. Here you
don't subclass from the interfaces, but instead mark classes (or even
instances) as implementing an interface. This can also be used to look up
components from a component registry. Supercool!</p>
<p><br></p>
<h3>Suggest</h3>
<p>Implementing interfaces with abstract base classes is much simpler in modern
Python 3 and they serve a purpose as an interface contract for plug-in
extensions.</p>
<p>Create the interface/abstract base class:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="k">class</span> <span class="nc">AccountingSystem</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">create_purchase_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">purchase</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">create_sale_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sale</span><span class="p">):</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Creating sale invoice'</span><span class="p">,</span> <span class="n">sale</span><span class="p">)</span>
</pre></div>

<p>Create a normal subclass and override all abstract methods:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">GizmoAccountingSystem</span>(<span class="n">AccountingSystem</span>):

    <span class="n">def</span> <span class="n">create_purchase_invoice</span>(<span class="nb">self</span>, <span class="n">purchase</span>):
        <span class="n">submit_to_gizmo_purchase_service</span>(<span class="n">purchase</span>)

    <span class="n">def</span> <span class="n">create_sale_invoice</span>(<span class="nb">self</span>, <span class="n">sale</span>):
        <span class="n">super</span>().<span class="n">create_sale_invoice</span>(<span class="n">sale</span>)
        <span class="n">submit_to_gizmo_sale_service</span>(<span class="n">sale</span>)
</pre></div>

<p>You can optionally have common implementation in the abstract methods as in
<code>create_sale_invoice()</code>, calling it with <code>super()</code> explicitly in the subclass
as above.</p>
<p>Instantiation of a subclass that does not implement all the abstract methods
fails:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">IncompleteAccountingSystem</span>(<span class="n">AccountingSystem</span>):
    <span class="nb">pass</span>

&gt;&gt;&gt; <span class="n">accounting</span> = <span class="n">IncompleteAccountingSystem</span>()
<span class="n">Traceback</span> (<span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="nb">last</span>):
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span>, <span class="nb">line</span> <span class="mi">1</span>, <span class="nb">in</span> <span class="s">&lt;module&gt;</span>
<span class="n">TypeError:</span> <span class="n">Can't</span> <span class="n">instantiate</span> <span class="n">abstract</span> <span class="k">class</span> <span class="n">IncompleteAccountingSystem</span> <span class="k">with</span> <span class="n">abstract</span> <span class="nb">methods</span>
<span class="n">create_purchase_invoice</span>, <span class="n">create_sale_invoice</span>
</pre></div>

<p>You can also have abstract properties, static and class methods by combining
corresponding annotations with <code>@abstractmethod</code>.</p>
<p>Abstract base classes are great for implementing plugin-based systems. All
imported subclasses of a class are accessible via <code>__subclasses__()</code>, so if
you load all classes from a plugin directory with <code>importlib.import_module()</code>
and if they subclass the base class, you have direct access to them via
<code>__subclasses__()</code> and you can be sure that the interface contract is enforced
for all of them during instantiation.</p>
<p>Here's the plugin loading implementation for the <code>AccountingSystem</code> example
above:</p>
<div class="code"><pre class="code literal-block"><span class="o">...</span>
<span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">import_module</span>

<span class="k">class</span> <span class="nc">AccountingSystem</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>

    <span class="o">...</span>
    <span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span><span class="p">:</span>
            <span class="n">module_name</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">ACCOUNTING_SYSTEM_MODULE_NAME</span>
            <span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
            <span class="n">subclasses</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__subclasses__</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subclasses</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InvalidAccountingSystemError</span><span class="p">(</span><span class="s1">'More than one '</span>
                        <span class="sa">f</span><span class="s1">'accounting module: </span><span class="si">{</span><span class="n">subclasses</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">subclasses</span> <span class="ow">or</span> <span class="n">module_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">subclasses</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="k">raise</span> <span class="n">InvalidAccountingSystemError</span><span class="p">(</span><span class="s1">'Accounting module '</span>
                        <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s1"> does not exist or does not '</span>
                        <span class="s1">'subclass AccountingSystem'</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="n">subclasses</span><span class="p">[</span><span class="mi">0</span><span class="p">]()</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</pre></div>

<p>Then you can access the accounting system plugin object through the
<code>AccountingSystem</code> class:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; accountingsystem = AccountingSystem.instance()
</pre></div>

<p>(Inspired by this PyMOTW-3 post.)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-write-latex-in-ipython-notebook/" class="u-url">How to write LaTeX in IPython Notebook?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-write-latex-in-ipython-notebook/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T10:52:39+08:00" itemprop="datePublished" title="2023-03-05 10:52">2023-03-05 10:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I display LaTeX code in a IPython Notebook?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This came up in a search I was just doing, found a better solution with some
more searching, IPython notebooks now have a <code>%%latex</code> magic that makes the
whole cell Latex without the <code>$$</code> wrapper for each line.</p>
<p>Refer notebook tour for Rich Display System</p>
<p><br></p>
<h3>Suggest</h3>
<p>This came up in a search I was just doing, found a better solution with some
more searching, IPython notebooks now have a <code>%%latex</code> magic that makes the
whole cell Latex without the <code>$$</code> wrapper for each line.</p>
<p>Refer notebook tour for Rich Display System</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-read-write-from-to-a-file-using-go/" class="u-url">How to read/write from/to a file using Go</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-read-write-from-to-a-file-using-go/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T10:51:07+08:00" itemprop="datePublished" title="2023-03-05 10:51">2023-03-05 10:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've been trying to learn Go on my own, but I've been stumped on trying read
from and write to ordinary files.</p>
<p>I can get as far as <code>inFile, _ := os.Open(INFILE, 0, 0)</code>, but actually getting
the content of the file doesn't make sense, because the read function takes a
<code>[]byte</code> as a parameter.</p>
<div class="code"><pre class="code literal-block"><span class="k">func</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">*</span><span class="n">File</span><span class="p">)</span><span class="w"> </span><span class="n">Read</span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="p">[]</span><span class="n">byte</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="n">Error</span><span class="p">)</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Let's make a Go 1-compatible list of all the ways to read and write files in
Go.</p>
<p>Because file API has changed recently and most other answers don't work with
Go 1. They also miss <code>bufio</code> which is important IMHO.</p>
<p>In the following examples I copy a file by reading from it and writing to the
destination file.</p>
<p><strong>Start with the basics</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">"io"</span>
    <span class="s2">"os"</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="nb">open</span> <span class="nb">input</span> <span class="n">file</span>
    <span class="n">fi</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">"input.txt"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">close</span> <span class="n">fi</span> <span class="n">on</span> <span class="n">exit</span> <span class="ow">and</span> <span class="n">check</span> <span class="k">for</span> <span class="n">its</span> <span class="n">returned</span> <span class="n">error</span>
    <span class="n">defer</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fi</span><span class="o">.</span><span class="n">Close</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}()</span>

    <span class="o">//</span> <span class="nb">open</span> <span class="n">output</span> <span class="n">file</span>
    <span class="n">fo</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s2">"output.txt"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">close</span> <span class="n">fo</span> <span class="n">on</span> <span class="n">exit</span> <span class="ow">and</span> <span class="n">check</span> <span class="k">for</span> <span class="n">its</span> <span class="n">returned</span> <span class="n">error</span>
    <span class="n">defer</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Close</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}()</span>

    <span class="o">//</span> <span class="n">make</span> <span class="n">a</span> <span class="n">buffer</span> <span class="n">to</span> <span class="n">keep</span> <span class="n">chunks</span> <span class="n">that</span> <span class="n">are</span> <span class="n">read</span>
    <span class="n">buf</span> <span class="o">:=</span> <span class="n">make</span><span class="p">([]</span><span class="n">byte</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">read</span> <span class="n">a</span> <span class="n">chunk</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fi</span><span class="o">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="o">&amp;&amp;</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">io</span><span class="o">.</span><span class="n">EOF</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
            <span class="k">break</span>
        <span class="p">}</span>

        <span class="o">//</span> <span class="n">write</span> <span class="n">a</span> <span class="n">chunk</span>
        <span class="k">if</span> <span class="n">_</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="n">buf</span><span class="p">[:</span><span class="n">n</span><span class="p">]);</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Here I used <code>os.Open</code> and <code>os.Create</code> which are convenient wrappers around
<code>os.OpenFile</code>. We usually don't need to call <code>OpenFile</code> directly.</p>
<p>Notice treating EOF. <code>Read</code> tries to fill <code>buf</code> on each call, and returns
<code>io.EOF</code> as error if it reaches end of file in doing so. In this case <code>buf</code>
will still hold data. Consequent calls to <code>Read</code> returns zero as the number of
bytes read and same <code>io.EOF</code> as error. Any other error will lead to a panic.</p>
<p><strong>Using<code>bufio</code></strong></p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">"bufio"</span>
    <span class="s2">"io"</span>
    <span class="s2">"os"</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="nb">open</span> <span class="nb">input</span> <span class="n">file</span>
    <span class="n">fi</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s2">"input.txt"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">close</span> <span class="n">fi</span> <span class="n">on</span> <span class="n">exit</span> <span class="ow">and</span> <span class="n">check</span> <span class="k">for</span> <span class="n">its</span> <span class="n">returned</span> <span class="n">error</span>
    <span class="n">defer</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fi</span><span class="o">.</span><span class="n">Close</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}()</span>
    <span class="o">//</span> <span class="n">make</span> <span class="n">a</span> <span class="n">read</span> <span class="n">buffer</span>
    <span class="n">r</span> <span class="o">:=</span> <span class="n">bufio</span><span class="o">.</span><span class="n">NewReader</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>

    <span class="o">//</span> <span class="nb">open</span> <span class="n">output</span> <span class="n">file</span>
    <span class="n">fo</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s2">"output.txt"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">close</span> <span class="n">fo</span> <span class="n">on</span> <span class="n">exit</span> <span class="ow">and</span> <span class="n">check</span> <span class="k">for</span> <span class="n">its</span> <span class="n">returned</span> <span class="n">error</span>
    <span class="n">defer</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">fo</span><span class="o">.</span><span class="n">Close</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}()</span>
    <span class="o">//</span> <span class="n">make</span> <span class="n">a</span> <span class="n">write</span> <span class="n">buffer</span>
    <span class="n">w</span> <span class="o">:=</span> <span class="n">bufio</span><span class="o">.</span><span class="n">NewWriter</span><span class="p">(</span><span class="n">fo</span><span class="p">)</span>

    <span class="o">//</span> <span class="n">make</span> <span class="n">a</span> <span class="n">buffer</span> <span class="n">to</span> <span class="n">keep</span> <span class="n">chunks</span> <span class="n">that</span> <span class="n">are</span> <span class="n">read</span>
    <span class="n">buf</span> <span class="o">:=</span> <span class="n">make</span><span class="p">([]</span><span class="n">byte</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">read</span> <span class="n">a</span> <span class="n">chunk</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">r</span><span class="o">.</span><span class="n">Read</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="o">&amp;&amp;</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">io</span><span class="o">.</span><span class="n">EOF</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
            <span class="k">break</span>
        <span class="p">}</span>

        <span class="o">//</span> <span class="n">write</span> <span class="n">a</span> <span class="n">chunk</span>
        <span class="k">if</span> <span class="n">_</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">w</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="n">buf</span><span class="p">[:</span><span class="n">n</span><span class="p">]);</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
            <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">Flush</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><code>bufio</code> is just acting as a buffer here, because we don't have much to do with
data. In most other situations (specially with text files) <code>bufio</code> is very
useful by giving us a nice API for reading and writing easily and flexibly,
while it handles buffering behind the scenes.</p>
<hr>
<p><strong>Note:</strong> The following code is for older Go versions (Go 1.15 and before).
Things have changed (<code>ioutil</code> is deprecated since Go 1.16). For the new way,
take a look at this answer.</p>
<p><strong>Using<code>ioutil</code></strong></p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s2">"io/ioutil"</span>
<span class="p">)</span>

<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">read</span> <span class="n">the</span> <span class="n">whole</span> <span class="n">file</span> <span class="n">at</span> <span class="n">once</span>
    <span class="n">b</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="s2">"input.txt"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">write</span> <span class="n">the</span> <span class="n">whole</span> <span class="n">body</span> <span class="n">at</span> <span class="n">once</span>
    <span class="n">err</span> <span class="o">=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">WriteFile</span><span class="p">(</span><span class="s2">"output.txt"</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">0644</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
        <span class="n">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Easy as pie! But use it only if you're sure you're not dealing with big files.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is a good version (but do note that <code>ioutil</code> is deprecated since Go
1.16):</p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">main</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s2">"io/ioutil"</span><span class="p">;</span> 
  <span class="p">)</span>


<span class="n">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">contents</span><span class="p">,</span><span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="s2">"plikTekstowy.txt"</span><span class="p">)</span>
  <span class="n">println</span><span class="p">(</span><span class="n">string</span><span class="p">(</span><span class="n">contents</span><span class="p">))</span>
  <span class="n">ioutil</span><span class="o">.</span><span class="n">WriteFile</span><span class="p">(</span><span class="s2">"filename"</span><span class="p">,</span> <span class="n">contents</span><span class="p">,</span> <span class="mi">0644</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2694.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2692.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
