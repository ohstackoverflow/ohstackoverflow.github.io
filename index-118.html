<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 118) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-118.html">
<link rel="prev" href="index-119.html" type="text/html">
<link rel="next" href="index-117.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/vim-qing-chu-shang-ci-sou-suo-gao-liang-xian-shi/" class="u-url">Vim 清除上次搜索高亮显示</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/vim-qing-chu-shang-ci-sou-suo-gao-liang-xian-shi/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:58:23+08:00" itemprop="datePublished" title="2023-02-16 21:58">2023-02-16 21:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>想要改进这篇文章？</strong> 提供此问题的详细答案，包括引用和解释为什么你的答案是正确的。不够详细的答案可能会被编辑或删除。</p>
<p>在 Vim 中进行搜索后，我突出显示了所有出现的地方。我怎样才能禁用它？我现在再次搜索一些无法找到的乱码。</p>
<p>有没有办法暂时禁用突出显示，然后在需要时再次启用它？</p>
<p><br><br></p>
<h2>解答</h2>
<p>要在下一次搜索之前关闭突出显示：</p>
<div class="code"><pre class="code literal-block">:noh
</pre></div>

<p>或者完全关闭突出显示：</p>
<div class="code"><pre class="code literal-block">set nohlsearch
</pre></div>

<p>或者，切换它：</p>
<div class="code"><pre class="code literal-block">set hlsearch!

nnoremap &lt;F3&gt; :set hlsearch!&lt;CR&gt;
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>来自VIM 文档</p>
<p>要清除上次使用的搜索模式：</p>
<div class="code"><pre class="code literal-block">:let @/ = ""
</pre></div>

<p>这不会将模式设置为空字符串，因为那样会在任何地方匹配。模式真的被清除了，就像启动 Vim 时一样。</p>
<p><br><br><a href="posts/vim-clear-last-search-highlighting/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-cong-lie-biao-zhong-sui-ji-xuan-ze-yi-ge-xiang-mu/" class="u-url">如何从列表中随机选择一个项目？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-cong-lie-biao-zhong-sui-ji-xuan-ze-yi-ge-xiang-mu/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:57:39+08:00" itemprop="datePublished" title="2023-02-16 21:57">2023-02-16 21:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>如何从以下列表中随机检索项目？</p>
<div class="code"><pre class="code literal-block">foo = ['a', 'b', 'c', 'd', 'e']
</pre></div>

<p><br><br></p>
<h2>解答</h2>
<p>使用<code>random.choice()</code>：</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">random</span>

<span class="n">foo</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span>
</pre></div>

<p>对于加密安全的随机选择（例如，用于从单词列表生成密码），请使用<code>secrets.choice()</code>：</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">secrets</span>

<span class="n">foo</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'battery'</span><span class="p">,</span> <span class="s1">'correct'</span><span class="p">,</span> <span class="s1">'horse'</span><span class="p">,</span> <span class="s1">'staple'</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">secrets</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span>
</pre></div>

<p><code>secrets</code>是 Python 3.6 中的新功能。在旧版本的 Python 上，您可以使用该类<code>random.SystemRandom</code>：</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">random</span>

<span class="n">secure_random</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">SystemRandom</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">secure_random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>如果您想从列表中随机选择多个项目，或者从一组中选择一个项目，我建议您改用<code>random.sample</code>。</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">random</span>
<span class="n">group_of_items</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">}</span>  <span class="c1"># a sequence or set will work here.</span>
<span class="n">num_to_select</span> <span class="o">=</span> <span class="mi">2</span>                           <span class="c1"># set the number to select here.</span>
<span class="n">list_of_random_items</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">group_of_items</span><span class="p">,</span> <span class="n">num_to_select</span><span class="p">)</span>
<span class="n">first_random_item</span> <span class="o">=</span> <span class="n">list_of_random_items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">second_random_item</span> <span class="o">=</span> <span class="n">list_of_random_items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

<p>但是，如果您只是从列表中提取单个项目，那么选择就不那么笨拙了，因为使用 sample 的语法将<code>random.sample(some_list,
1)[0]</code>代替<code>random.choice(some_list)</code>.</p>
<p>不幸的是，选择仅适用于序列（例如列表或元组）的单个输出。虽然<code>random.choice(tuple(some_set))</code>可能是从集合中获取单个项目的选项。</p>
<p><strong>编辑：使用秘密</strong></p>
<p>正如许多人指出的那样，如果您需要更安全的伪随机样本，您应该使用 secrets 模块：</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">secrets</span>                              <span class="c1"># imports secure module.</span>
<span class="n">secure_random</span> <span class="o">=</span> <span class="n">secrets</span><span class="o">.</span><span class="n">SystemRandom</span><span class="p">()</span>      <span class="c1"># creates a secure random object.</span>
<span class="n">group_of_items</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">}</span>  <span class="c1"># a sequence or set will work here.</span>
<span class="n">num_to_select</span> <span class="o">=</span> <span class="mi">2</span>                           <span class="c1"># set the number to select here.</span>
<span class="n">list_of_random_items</span> <span class="o">=</span> <span class="n">secure_random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">group_of_items</span><span class="p">,</span> <span class="n">num_to_select</span><span class="p">)</span>
<span class="n">first_random_item</span> <span class="o">=</span> <span class="n">list_of_random_items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">second_random_item</span> <span class="o">=</span> <span class="n">list_of_random_items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

<p><strong>编辑：Pythonic 单线</strong></p>
<p>如果你想要一个更 pythonic 的单行来选择多个项目，你可以使用解包。</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">random</span>
<span class="n">first_random_item</span><span class="p">,</span> <span class="n">second_random_item</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">({</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">},</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

<p><br><br><a href="posts/how-can-i-randomly-select-an-item-from-a-list/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ni-ru-he-zai-php-zhong-jie-xi-he-chu-li-html-xml/" class="u-url">你如何在 PHP 中解析和处理 HTML/XML？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ni-ru-he-zai-php-zhong-jie-xi-he-chu-li-html-xml/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:57:09+08:00" itemprop="datePublished" title="2023-02-16 21:57">2023-02-16 21:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>如何解析 HTML/XML 并从中提取信息？</p>
<p><br><br></p>
<h2>解答</h2>
<h3>本机 XML 扩展</h3>
<p>我更喜欢使用一种本地 XML 扩展，因为它们与 PHP 捆绑在一起，通常比所有第 3 方库都快，并且给我对标记所需的所有控制权。</p>
<h4>DOM</h4>
<blockquote>
<p>DOM 扩展允许您使用 PHP 5 通过 DOM API 对 XML 文档进行操作。它是 W3C 的文档对象模型核心级别 3
的实现，一个平台和语言中立的接口，允许程序和脚本动态访问和更新文件的内容、结构和风格。</p>
</blockquote>
<p>DOM 能够解析和修改真实世界（损坏的）HTML，并且它可以执行XPath 查询。它基于libxml。</p>
<p>使用 DOM 需要一些时间来提高效率，但在我看来，这段时间是值得的。由于 DOM
是一种与语言无关的接口，您会发现多种语言的实现，因此如果您需要更改编程语言，那么您很可能已经知道如何使用该语言的 DOM API。</p>
<p>StackOverflow 上已经广泛介绍了如何使用 DOM 扩展，因此如果您选择使用它，可以确定您遇到的大部分问题都可以通过搜索/浏览 Stack
Overflow 来解决。</p>
<p>其他答案中提供了基本用法示例和一般概念概述。</p>
<h4>XML阅读器</h4>
<blockquote>
<p>XMLReader 扩展是一个 XML 拉式解析器。阅读器充当在文档流上前进并在途中的每个节点处停止的光标。</p>
</blockquote>
<p>与 DOM 一样，XMLReader 也是基于 libxml 的。我不知道如何触发 HTML 解析器模块，因此使用 XMLReader 解析损坏的 HTML
可能不如使用 DOM 可靠，在 DOM 中您可以明确告诉它使用 libxml 的 HTML 解析器模块。</p>
<p>另一个答案中提供了一个基本用法示例。</p>
<h4>解析器</h4>
<blockquote>
<p>此扩展允许您创建 XML 解析器，然后为不同的 XML 事件定义处理程序。每个 XML 解析器还有一些您可以调整的参数。</p>
</blockquote>
<p>XML 解析器库也基于 libxml，并实现了SAX风格的 XML 推送解析器。对于内存管理来说，它可能是比 DOM 或 SimpleXML
更好的选择，但比 XMLReader 实现的拉式解析器更难使用。</p>
<h4>简单的XML</h4>
<blockquote>
<p>SimpleXML 扩展提供了一个非常简单易用的工具集，用于将 XML 转换为可以使用普通属性选择器和数组迭代器处理的对象。</p>
</blockquote>
<p>当您知道 HTML 是有效的 XHTML 时，SimpleXML 是一个选项。如果您需要解析损坏的 HTML，甚至不要考虑
SimpleXml，因为它会令人窒息。</p>
<p>提供了一个基本用法示例，PHP 手册中还有许多其他示例。</p>
<hr>
<h3>第 3 方库（基于 libxml）</h3>
<p>如果您更喜欢使用第 3 方库，我建议使用实际上在底层使用DOM / libxml而不是字符串解析的库。</p>
<h4>FluentDom</h4>
<blockquote>
<p>FluentDOM 为 PHP 中的 DOMDocument 提供了类似 jQuery 的流畅 XML 接口。选择器是用 XPath 或 CSS
编写的（使用 CSS 到 XPath 转换器）。当前版本扩展了 DOM 实现标准接口并添加了 DOM Living Standard
的特性。FluentDOM 可以加载 JSON、CSV、JsonML、RabbitFish 等格式。可以通过 Composer 安装。</p>
</blockquote>
<h4>HtmlPageDom</h4>
<blockquote>
<p><code>Wa72\HtmlPageDom</code>是一个 PHP 库，用于使用 DOM 轻松操作 HTML 文档。它需要Symfony2 组件中的
DomCrawler来遍历 DOM 树，并通过添加操作 HTML 文档的 DOM 树的方法来扩展它。</p>
</blockquote>
<h4>查询</h4>
<blockquote>
<p>phpQuery 是一个基于 jQuery JavaScript 库的服务器端、可链接、CSS3 选择器驱动的文档对象模型 (DOM) API。该库是用
PHP5 编写的，并提供额外的命令行界面 (CLI)。</p>
</blockquote>
<p>这被描述为“废弃软件和错误：使用风险自负”，但似乎维护最少。</p>
<h4>层域</h4>
<blockquote>
<p>Laminas\Dom 组件（以前称为 Zend_DOM）提供了处理 DOM
文档和结构的工具。目前，我们提供<code>Laminas\Dom\Query</code>，它提供了一个统一的接口，用于使用 XPath 和 CSS 选择器查询 DOM
文档。</p>
<p>这个包被认为是功能完整的，现在处于仅安全维护模式。</p>
</blockquote>
<h4>fDOM文档</h4>
<blockquote>
<p>fDOMDocument 扩展了标准 DOM，以在所有错误情况下使用异常，而不是 PHP 警告或通知。为了方便和简化 DOM
的使用，他们还添加了各种自定义方法和快捷方式。</p>
</blockquote>
<h4>军刀/ xml</h4>
<blockquote>
<p>sabre/xml 是一个库，它包装并扩展了 XMLReader 和 XMLWriter 类以创建一个简单的“xml
到对象/数组”映射系统和设计模式。写入和读取 XML 是一次通过的，因此速度很快，并且在大型 xml 文件上需要的内存很少。</p>
</blockquote>
<h4>流体XML</h4>
<blockquote>
<p>FluidXML 是一个 PHP 库，用于使用简洁流畅的 API 来操作 XML。它利用 XPath 和流畅的编程模式变得有趣和有效。</p>
</blockquote>
<hr>
<h3>第 3 方（不是基于 libxml 的）</h3>
<p>在 DOM/libxml 上构建的好处是您可以获得开箱即用的良好性能，因为您是基于本机扩展的。然而，并不是所有的 3rd 方库都走这条路。下面列出了其中一些</p>
<h4>PHP 简单的 HTML DOM 解析器</h4>
<blockquote>
<ul>
<li>用 PHP5+ 编写的 HTML DOM 解析器让您以非常简单的方式操作 HTML！</li>
<li>需要 PHP 5+。</li>
<li>支持无效的 HTML。</li>
<li>使用选择器在 HTML 页面上查找标签，就像 jQuery 一样。</li>
<li>在一行中从 HTML 中提取内容。
</li>
</ul>
</blockquote>
<p>我一般不推荐这个解析器。代码库很糟糕，解析器本身相当慢并且需要内存。并非所有 jQuery 选择器（例如子选择器）都是可能的。任何基于 libxml
的库都应该很容易胜过这一点。</p>
<h4>PHP HTML 解析器</h4>
<blockquote>
<p>PHPHtmlParser 是一个简单、灵活的 html 解析器，它允许您使用任何 css 选择器（如
jQuery）来选择标签。目标是协助开发需要快速、简单地抓取 html 的工具，无论它是否有效！这个项目最初由 sunra/php-simple-
html-dom-parser 支持，但支持似乎已经停止所以这个项目是我对他以前工作的改编。</p>
</blockquote>
<p>同样，我不会推荐这个解析器。CPU 使用率高时速度相当慢。也没有清除创建的 DOM 对象内存的功能。这些问题尤其适用于嵌套循环。文档本身不准确且拼写错误，自
2016 年 4 月 14 日以来没有对修复做出回应。</p>
<hr>
<h3>HTML 5</h3>
<p>您可以使用上面的代码来解析 HTML5，但由于 HTML5 允许的标记，可能会有一些怪癖。所以对于 HTML5
你可能要考虑使用专用的解析器。请注意，这些是用 PHP 编写的，因此与使用低级语言的编译扩展相比，性能较慢且内存使用量增加。</p>
<h4>HTML5Dom文档</h4>
<blockquote>
<p>HTML5DOMDocument 扩展了本机 DOMDocument 库。它修复了一些错误并添加了一些新功能。</p>
<ul>
<li>保留 html 实体（DOMDocument 不保留）</li>
<li>保留 void 标签（DOMDocument 不保留）</li>
<li>允许插入 HTML 代码，将正确的部分移动到适当的位置（head 元素插入到 head 中，body 元素插入到 body 中）</li>
<li>允许使用 CSS 选择器查询 DOM（当前可用：<code>*</code>, <code>tagname</code>, <code>tagname#id</code>, <code>#id</code>,
<code>tagname.classname</code>, <code>.classname</code>, <code>tagname.classname.classname2</code>,
<code>.classname.classname2</code>, <code>tagname[attribute-selector]</code>, <code>[attribute-
selector]</code>, <code>div, p</code>, <code>div p</code>, <code>div &gt; p</code>, <code>div + p</code>, 和<code>p ~ ul</code>.）</li>
<li>添加对 element-&gt;classList 的支持。</li>
<li>添加对 element-&gt;innerHTML 的支持。</li>
<li>添加对 element-&gt;outerHTML 的支持。
</li>
</ul>
</blockquote>
<h4>HTML5</h4>
<blockquote>
<p>HTML5 是完全用 PHP 编写的符合标准的 HTML5 解析器和编写器。它稳定并在许多生产网站中使用，下载量超过 500 万次。</p>
<p>HTML5 提供了以下功能。</p>
<ul>
<li>一个 HTML5 序列化器</li>
<li>支持 PHP 命名空间</li>
<li>作曲家支持</li>
<li>基于事件（类似 SAX）的解析器</li>
<li>DOM 树构建器</li>
<li>与 QueryPath 的互操作性</li>
<li>在 PHP 5.3.0 或更新版本上运行
</li>
</ul>
</blockquote>
<hr>
<h3>常用表达</h3>
<p>Last and <strong>least recommended</strong> , you can extract data from HTML with regular
expressions. In general using Regular Expressions on HTML is discouraged.</p>
<p>Most of the snippets you will find on the web to match markup are brittle. In
most cases they are only working for a very particular piece of HTML. Tiny
markup changes, like adding whitespace somewhere, or adding, or changing
attributes in a tag, can make the RegEx fails when it's not properly written.
You should know what you are doing before using RegEx on HTML.</p>
<p>HTML parsers already know the syntactical rules of HTML. Regular expressions
have to be taught for each new RegEx you write. RegEx are fine in some cases,
but it really depends on your use-case.</p>
<p>You can write more reliable parsers, but writing a <em>complete and reliable</em>
custom parser with regular expressions is a waste of time when the
aforementioned libraries already exist and do a much better job on this.</p>
<p>Also see Parsing Html The Cthulhu Way</p>
<hr>
<h3>Books</h3>
<p>If you want to spend some money, have a look at</p>
<ul>
<li>PHP Architect's Guide to Webscraping with PHP</li>
</ul>
<p>I am not affiliated with PHP Architect or the authors.</p>
<p><br></p>
<h3>更多建议</h3>
<p>试试 <strong>简单的 HTML DOM 解析器</strong> 。</p>
<ul>
<li>用 PHP 5+ 编写的 HTML DOM 解析器，可让您以非常简单的方式操作 HTML！</li>
<li>需要 PHP 5+。</li>
<li>支持无效的 HTML。</li>
<li>使用选择器在 HTML 页面上查找标签，就像 jQuery 一样。</li>
<li>在一行中从 HTML 中提取内容。</li>
<li>下载</li>
</ul>
<p>注意：顾名思义，它对简单的任务很有用。它使用正则表达式而不是 HTML 解析器，因此对于更复杂的任务来说会慢得多。它的大部分代码库是在 2008
年编写的，此后只做了很小的改进。它不遵循现代 PHP 编码标准，并且很难融入现代 PSR 兼容项目。</p>
<h3>例子：</h3>
<h4>获取HTML元素的方法：</h4>
<div class="code"><pre class="code literal-block"><span class="c1">// Create DOM from URL or file</span>
<span class="no">$</span><span class="n">html</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">file_get_html</span><span class="p">(</span><span class="s">'http://www.example.com/'</span><span class="p">);</span>

<span class="c1">// Find all images</span>
<span class="n">foreach</span><span class="p">(</span><span class="no">$</span><span class="n">html</span><span class="o">-&gt;</span><span class="nb">find</span><span class="p">(</span><span class="s">'img'</span><span class="p">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="no">$</span><span class="n">element</span><span class="p">)</span>
<span class="w">       </span><span class="n">echo</span><span class="w"> </span><span class="no">$</span><span class="n">element</span><span class="o">-&gt;</span><span class="n">src</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="s">'&lt;br&gt;'</span><span class="p">;</span>

<span class="c1">// Find all links</span>
<span class="n">foreach</span><span class="p">(</span><span class="no">$</span><span class="n">html</span><span class="o">-&gt;</span><span class="nb">find</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="no">$</span><span class="n">element</span><span class="p">)</span>
<span class="w">       </span><span class="n">echo</span><span class="w"> </span><span class="no">$</span><span class="n">element</span><span class="o">-&gt;</span><span class="n">href</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="s">'&lt;br&gt;'</span><span class="p">;</span>
</pre></div>

<h4>如何修改 HTML 元素：</h4>
<div class="code"><pre class="code literal-block">//<span class="w"> </span>Create<span class="w"> </span>DOM<span class="w"> </span>from<span class="w"> </span>string
$html<span class="w"> </span>=<span class="w"> </span>str_get_html('<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"hello"</span><span class="nt">&gt;</span>Hello<span class="nt">&lt;/div&gt;&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"world"</span><span class="nt">&gt;</span>World<span class="nt">&lt;/div&gt;</span>');

$html-&gt;find('div',<span class="w"> </span>1)-&gt;class<span class="w"> </span>=<span class="w"> </span>'bar';

$html-&gt;find('div[id=hello]',<span class="w"> </span>0)-&gt;innertext<span class="w"> </span>=<span class="w"> </span>'foo';

echo<span class="w"> </span>$html;
</pre></div>

<h4>从 HTML 中提取内容：</h4>
<div class="code"><pre class="code literal-block"><span class="c1">// Dump contents (without tags) from HTML</span>
<span class="n">echo</span><span class="w"> </span><span class="n">file_get_html</span><span class="p">(</span><span class="s">'http://www.google.com/'</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">plaintext</span><span class="p">;</span>
</pre></div>

<h4>抓取 Slashdot：</h4>
<div class="code"><pre class="code literal-block"><span class="c1">// Create DOM from URL</span>
<span class="no">$</span><span class="n">html</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">file_get_html</span><span class="p">(</span><span class="s">'http://slashdot.org/'</span><span class="p">);</span>

<span class="c1">// Find all article blocks</span>
<span class="n">foreach</span><span class="p">(</span><span class="no">$</span><span class="n">html</span><span class="o">-&gt;</span><span class="nb">find</span><span class="p">(</span><span class="s">'div.article'</span><span class="p">)</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="no">$</span><span class="n">article</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="no">$</span><span class="n">item</span><span class="p">[</span><span class="s">'title'</span><span class="p">]</span><span class="w">     </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">article</span><span class="o">-&gt;</span><span class="nb">find</span><span class="p">(</span><span class="s">'div.title'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">plaintext</span><span class="p">;</span>
<span class="w">    </span><span class="no">$</span><span class="n">item</span><span class="p">[</span><span class="s">'intro'</span><span class="p">]</span><span class="w">    </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">article</span><span class="o">-&gt;</span><span class="nb">find</span><span class="p">(</span><span class="s">'div.intro'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">plaintext</span><span class="p">;</span>
<span class="w">    </span><span class="no">$</span><span class="n">item</span><span class="p">[</span><span class="s">'details'</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">article</span><span class="o">-&gt;</span><span class="nb">find</span><span class="p">(</span><span class="s">'div.details'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">plaintext</span><span class="p">;</span>
<span class="w">    </span><span class="no">$</span><span class="n">articles</span><span class="p">[]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">item</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">print_r</span><span class="p">(</span><span class="no">$</span><span class="n">articles</span><span class="p">);</span>
</pre></div>

<p><br><br><a href="posts/how-do-you-parse-and-process-html-xml-in-php/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-119.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-117.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
