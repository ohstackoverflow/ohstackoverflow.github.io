<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1543) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1543.html">
<link rel="prev" href="index-1544.html" type="text/html">
<link rel="next" href="index-1542.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-a-concise-way-to-check-that-environment-variables-are-set-in-a-unix-shell-script/" class="u-url">What's a concise way to check that environment variables are set in a Unix shell script?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-a-concise-way-to-check-that-environment-variables-are-set-in-a-unix-shell-script/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:32:14+08:00" itemprop="datePublished" title="2023-03-03 03:32">2023-03-03 03:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've got a few Unix shell scripts where I need to check that certain
environment variables are set before I start doing stuff, so I do this sort of
thing:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">z</span><span class="w"> </span><span class="s2">"$STATE"</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Need to set STATE"</span>
<span class="w">    </span><span class="k">exit</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">fi</span>

<span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">z</span><span class="w"> </span><span class="s2">"$DEST"</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Need to set DEST"</span>
<span class="w">    </span><span class="k">exit</span><span class="w"> </span><span class="mi">1</span>
<span class="nv">fi</span>
</pre></div>

<p>which is a lot of typing. Is there a more elegant idiom for checking that a
set of environment variables is set?</p>
<p>EDIT: I should mention that these variables have no meaningful default value -
the script should error out if any are unset.</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Parameter Expansion</h4>
<p>The obvious answer is to use one of the special forms of parameter expansion:</p>
<div class="code"><pre class="code literal-block">:<span class="w"> </span><span class="cp">${</span><span class="n">STATE</span><span class="err">?</span><span class="s2">"Need to set STATE"</span><span class="cp">}</span>
:<span class="w"> </span><span class="cp">${</span><span class="n">DEST</span><span class="p">:</span><span class="err">?</span><span class="s2">"Need to set DEST non-empty"</span><span class="cp">}</span>
</pre></div>

<p>Or, better (see section on 'Position of double quotes' below):</p>
<div class="code"><pre class="code literal-block">:<span class="w"> </span>"<span class="cp">${</span><span class="n">STATE</span><span class="err">?</span><span class="n">Need</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">STATE</span><span class="cp">}</span>"
:<span class="w"> </span>"<span class="cp">${</span><span class="n">DEST</span><span class="p">:</span><span class="err">?</span><span class="n">Need</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">DEST</span> <span class="n">non</span><span class="o">-</span><span class="n">empty</span><span class="cp">}</span>"
</pre></div>

<p>The first variant (using just <code>?</code>) requires STATE to be set, but STATE="" (an
empty string) is OK — not exactly what you want, but the alternative and older
notation.</p>
<p>The second variant (using <code>:?</code>) requires DEST to be set and non-empty.</p>
<p>If you supply no message, the shell provides a default message.</p>
<p>The <code>${var?}</code> construct is portable back to Version 7 UNIX and the Bourne
Shell (1978 or thereabouts). The <code>${var:?}</code> construct is slightly more recent:
I think it was in System III UNIX circa 1981, but it may have been in PWB UNIX
before that. It is therefore in the Korn Shell, and in the POSIX shells,
including specifically Bash.</p>
<p>It is usually documented in the shell's man page in a section called Parameter
Expansion. For example, the <code>bash</code> manual says:</p>
<blockquote>
<div class="code"><pre class="code literal-block"><span class="cp">${</span><span class="n">parameter</span><span class="p">:</span><span class="err">?</span><span class="n">word</span><span class="cp">}</span>
</pre></div>

<p>Display Error if Null or Unset. If parameter is null or unset, the expansion
of word (or a message to that effect if word is not present) is written to
the standard error and the shell, if it is not interactive, exits.
Otherwise, the value of parameter is substituted.</p>
</blockquote>
<h4>The Colon Command</h4>
<p>I should probably add that the colon command simply has its arguments
evaluated and then succeeds. It is the original shell comment notation (before
'<code>#</code>' to end of line). For a long time, Bourne shell scripts had a colon as
the first character. The C Shell would read a script and use the first
character to determine whether it was for the C Shell (a '<code>#</code>' hash) or the
Bourne shell (a '<code>:</code>' colon). Then the kernel got in on the act and added
support for '<code>#!/path/to/program</code>' and the Bourne shell got '<code>#</code>' comments,
and the colon convention went by the wayside. But if you come across a script
that starts with a colon, now you will know why.</p>
<hr>
<h4>Position of double quotes</h4>
<p>blong asked in a comment:</p>
<blockquote>
<p>Any thoughts on this discussion?
https://github.com/koalaman/shellcheck/issues/380#issuecomment-145872749</p>
</blockquote>
<p>The gist of the discussion is:</p>
<blockquote>
<p>… However, when I <code>shellcheck</code> it (with version 0.4.1), I get this message:</p>
<div class="code"><pre class="code literal-block"><span class="n">In</span><span class="w"> </span><span class="n">script</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span>
<span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="n">FOO</span><span class="p">:</span><span class="err">?</span><span class="s2">"The environment variable 'FOO' must be set and non-empty"</span><span class="p">}</span>
<span class="w">  </span><span class="o">^--</span><span class="w"> </span><span class="n">SC2086</span><span class="p">:</span><span class="w"> </span><span class="n">Double</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">prevent</span><span class="w"> </span><span class="n">globbing</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="n">splitting</span><span class="o">.</span>
</pre></div>

<p>Any advice on what I should do in this case?</p>
</blockquote>
<p>The short answer is "do as <code>shellcheck</code> suggests":</p>
<div class="code"><pre class="code literal-block">:<span class="w"> </span>"<span class="cp">${</span><span class="n">STATE</span><span class="err">?</span><span class="n">Need</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">STATE</span><span class="cp">}</span>"
:<span class="w"> </span>"<span class="cp">${</span><span class="n">DEST</span><span class="p">:</span><span class="err">?</span><span class="n">Need</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">DEST</span> <span class="n">non</span><span class="o">-</span><span class="n">empty</span><span class="cp">}</span>"
</pre></div>

<p>To illustrate why, study the following. Note that the <code>:</code> command doesn't echo
its arguments (but the shell does evaluate the arguments). We want to see the
arguments, so the code below uses <code>printf "%s\n"</code> in place of <code>:</code>.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>mkdir<span class="w"> </span>junk
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>junk
$<span class="w"> </span>&gt;<span class="w"> </span>abc
$<span class="w"> </span>&gt;<span class="w"> </span>def
$<span class="w"> </span>&gt;<span class="w"> </span>ghi
$<span class="w"> </span>
$<span class="w"> </span><span class="nv">x</span><span class="o">=</span><span class="s2">"*"</span>
$<span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s\n"</span><span class="w"> </span><span class="si">${</span><span class="nv">x</span><span class="p">:?You must set x</span><span class="si">}</span><span class="w">    </span><span class="c1"># Careless; not recommended</span>
abc
def
ghi
$<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>x
$<span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s\n"</span><span class="w"> </span><span class="si">${</span><span class="nv">x</span><span class="p">:?You must set x</span><span class="si">}</span><span class="w">    </span><span class="c1"># Careless; not recommended</span>
bash:<span class="w"> </span>x:<span class="w"> </span>You<span class="w"> </span>must<span class="w"> </span><span class="nb">set</span><span class="w"> </span>x
$<span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s\n"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">x</span><span class="p">:?You must set x</span><span class="si">}</span><span class="s2">"</span><span class="w">  </span><span class="c1"># Careful: should be used</span>
bash:<span class="w"> </span>x:<span class="w"> </span>You<span class="w"> </span>must<span class="w"> </span><span class="nb">set</span><span class="w"> </span>x
$<span class="w"> </span><span class="nv">x</span><span class="o">=</span><span class="s2">"*"</span>
$<span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s\n"</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">x</span><span class="p">:?You must set x</span><span class="si">}</span><span class="s2">"</span><span class="w">  </span><span class="c1"># Careful: should be used</span>
*
$<span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s\n"</span><span class="w"> </span><span class="si">${</span><span class="nv">x</span><span class="p">:?</span><span class="s2">"You must set x"</span><span class="si">}</span><span class="w">  </span><span class="c1"># Not quite careful enough</span>
abc
def
ghi
$<span class="w"> </span><span class="nv">x</span><span class="o">=</span>
$<span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s\n"</span><span class="w"> </span><span class="si">${</span><span class="nv">x</span><span class="p">:?</span><span class="s2">"You must set x"</span><span class="si">}</span><span class="w">  </span><span class="c1"># Not quite careful enough</span>
bash:<span class="w"> </span>x:<span class="w"> </span>You<span class="w"> </span>must<span class="w"> </span><span class="nb">set</span><span class="w"> </span>x
$<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>x
$<span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">"%s\n"</span><span class="w"> </span><span class="si">${</span><span class="nv">x</span><span class="p">:?</span><span class="s2">"You must set x"</span><span class="si">}</span><span class="w">  </span><span class="c1"># Not quite careful enough</span>
bash:<span class="w"> </span>x:<span class="w"> </span>You<span class="w"> </span>must<span class="w"> </span><span class="nb">set</span><span class="w"> </span>x
$
</pre></div>

<p>Note how the value in <code>$x</code> is expanded to first <code>*</code> and then a list of file
names when the overall expression is not in double quotes. This is what
<code>shellcheck</code> is recommending should be fixed. I have not verified that it
doesn't object to the form where the expression is enclosed in double quotes,
but it is a reasonable assumption that it would be OK.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try this:</p>
<div class="code"><pre class="code literal-block">[<span class="w"> </span><span class="o">-</span><span class="nv">z</span><span class="w"> </span><span class="s2">"$STATE"</span><span class="w"> </span>]<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Need to set STATE"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">exit</span><span class="w"> </span><span class="mi">1</span><span class="c1">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-it-not-possible-to-stringify-an-error-using-json-stringify/" class="u-url">Is it not possible to stringify an Error using JSON.stringify?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-it-not-possible-to-stringify-an-error-using-json-stringify/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:31:49+08:00" itemprop="datePublished" title="2023-03-03 03:31">2023-03-03 03:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <h3>Reproducing the problem</h3>
<p>I'm running into an issue when trying to pass error messages around using web
sockets. I can replicate the issue I am facing using <code>JSON.stringify</code> to cater
to a wider audience:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">v0</span><span class="o">.</span><span class="mf">10.15</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s1">'simple error message'</span><span class="p">);</span>
<span class="w">    </span><span class="n">undefined</span>

<span class="o">&gt;</span><span class="w"> </span><span class="n">error</span>
<span class="w">    </span><span class="p">[</span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="p">]</span>

<span class="o">&gt;</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">getOwnPropertyNames</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<span class="w">    </span><span class="p">[</span><span class="w"> </span><span class="s1">'stack'</span><span class="p">,</span><span class="w"> </span><span class="s1">'arguments'</span><span class="p">,</span><span class="w"> </span><span class="s1">'type'</span><span class="p">,</span><span class="w"> </span><span class="s1">'message'</span><span class="w"> </span><span class="p">]</span>

<span class="o">&gt;</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<span class="w">    </span><span class="s1">'{}'</span>
</pre></div>

<p>The problem is that I end up with an empty object.</p>
<h3>What I've tried</h3>
<p><strong>Browsers</strong></p>
<p>I first tried leaving node.js and running it in various browsers. Chrome
version 28 gives me the same result, and interestingly enough, Firefox at
least makes an attempt but left out the message:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt;<span class="w"> </span>JSON.stringify(error);<span class="w"> </span>//<span class="w"> </span>Firebug,<span class="w"> </span>Firefox<span class="w"> </span>23
{"fileName":"debug<span class="w"> </span>eval<span class="w"> </span>code","lineNumber":1,"stack":"@debug<span class="w"> </span>eval<span class="w"> </span>code:1\n"}
</pre></div>

<p><strong>Replacer function</strong></p>
<p>I then looked at the Error.prototype. It shows that the prototype contains
methods such as toString and toSource. Knowing that functions can't be
stringified, I included a replacer function when calling JSON.stringify to
remove all functions, but then realized that it too had some weird behavior:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s1">'simple error message'</span><span class="p">);</span>
<span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="p">(</span><span class="err">?</span><span class="p">)</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">error</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="p">(</span><span class="err">?</span><span class="p">)</span>
<span class="p">});</span>
</pre></div>

<p>It doesn't seem to loop over the object as it normally would, and therefore I
can't check if the key is a function and ignore it.</p>
<h3>The Question</h3>
<p>Is there any way to stringify native Error messages with <code>JSON.stringify</code>? If
not, why does this behavior occur?</p>
<h4>Methods of getting around this</h4>
<ul>
<li>Stick with simple string-based error messages, or create personal error objects and don't rely on the native Error object.</li>
<li>Pull properties: <code>JSON.stringify({ message: error.message, stack: error.stack })</code>
</li>
</ul>
<h4>Updates</h4>
<p>@Ray Toal Suggested in a comment that I take a look at the property
descriptors. It is clear now why it does not work:</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s1">'simple error message'</span><span class="p">);</span>
<span class="nf">var</span><span class="w"> </span><span class="n">propertyNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">Object</span><span class="p">.</span><span class="n">getOwnPropertyNames</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<span class="nf">var</span><span class="w"> </span><span class="k">descriptor</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nf">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">propertyNames</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">len</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">property</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">propertyNames</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">Object</span><span class="p">.</span><span class="n">getOwnPropertyDescriptor</span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">property</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="k">descriptor</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<p>Output:</p>
<div class="code"><pre class="code literal-block"><span class="n">stack</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">get</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">Function</span><span class="o">]</span><span class="p">,</span>
<span class="w">  </span><span class="k">set</span><span class="err">:</span><span class="w"> </span><span class="o">[</span><span class="n">Function</span><span class="o">]</span><span class="p">,</span>
<span class="w">  </span><span class="nl">enumerable</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<span class="w">  </span><span class="nl">configurable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="err">}</span>
<span class="n">arguments</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">value</span><span class="err">:</span><span class="w"> </span><span class="n">undefined</span><span class="p">,</span>
<span class="w">  </span><span class="nl">writable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<span class="w">  </span><span class="nl">enumerable</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<span class="w">  </span><span class="nl">configurable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="err">}</span>
<span class="n">type</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">value</span><span class="err">:</span><span class="w"> </span><span class="n">undefined</span><span class="p">,</span>
<span class="w">  </span><span class="nl">writable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<span class="w">  </span><span class="nl">enumerable</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<span class="w">  </span><span class="nl">configurable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="err">}</span>
<span class="n">message</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">value</span><span class="err">:</span><span class="w"> </span><span class="s1">'simple error message'</span><span class="p">,</span>
<span class="w">  </span><span class="nl">writable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<span class="w">  </span><span class="nl">enumerable</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<span class="w">  </span><span class="nl">configurable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="err">}</span>
</pre></div>

<p>Key: <code>enumerable: false</code>.</p>
<p>Accepted answer provides a workaround for this problem.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can define a <code>Error.prototype.toJSON</code> to retrieve a plain <code>Object</code>
representing the <code>Error</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="p">(</span><span class="s1">'toJSON'</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">Error</span><span class="p">.</span><span class="n">prototype</span><span class="p">))</span>
<span class="k">Object</span><span class="p">.</span><span class="n">defineProperty</span><span class="p">(</span><span class="n">Error</span><span class="p">.</span><span class="n">prototype</span><span class="p">,</span><span class="w"> </span><span class="s1">'toJSON'</span><span class="p">,</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">value</span><span class="err">:</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">alt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span>

<span class="w">        </span><span class="k">Object</span><span class="p">.</span><span class="n">getOwnPropertyNames</span><span class="p">(</span><span class="n">this</span><span class="p">).</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="k">key</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">alt</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">alt</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span><span class="p">,</span>
<span class="w">    </span><span class="nl">configurable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<span class="w">    </span><span class="nl">writable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span>
<span class="err">}</span><span class="p">);</span>



<span class="nf">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s1">'testing'</span><span class="p">);</span>
<span class="n">error</span><span class="p">.</span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'foo bar'</span><span class="p">;</span>

<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">JSON</span><span class="p">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
<span class="o">//</span><span class="w"> </span><span class="err">{</span><span class="ss">"message"</span><span class="err">:</span><span class="ss">"testing"</span><span class="p">,</span><span class="ss">"detail"</span><span class="err">:</span><span class="ss">"foo bar"</span><span class="err">}</span>
</pre></div>

<p>Using <code>Object.defineProperty()</code> adds <code>toJSON</code> without it being an <code>enumerable</code>
property itself.</p>
<hr>
<p>Regarding modifying <code>Error.prototype</code>, while <code>toJSON()</code> may not be defined for
<code>Error</code>s specifically, the method is still standardized for objects in general
(ref: step 3). So, the risk of collisions or conflicts is minimal.</p>
<p>Though, to still avoid it completely, <code>JSON.stringify()</code>'s <code>replacer</code>
parameter can be used instead:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">replaceErrors</span><span class="p">(</span><span class="k">key</span><span class="p">,</span><span class="w"> </span><span class="k">value</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">Error</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span>

<span class="w">        </span><span class="k">Object</span><span class="p">.</span><span class="n">getOwnPropertyNames</span><span class="p">(</span><span class="k">value</span><span class="p">).</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">propName</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">error</span><span class="o">[</span><span class="n">propName</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="o">[</span><span class="n">propName</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">value</span><span class="p">;</span>
<span class="err">}</span>

<span class="nf">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s1">'testing'</span><span class="p">);</span>
<span class="n">error</span><span class="p">.</span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'foo bar'</span><span class="p">;</span>

<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">JSON</span><span class="p">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">replaceErrors</span><span class="p">));</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can define a <code>Error.prototype.toJSON</code> to retrieve a plain <code>Object</code>
representing the <code>Error</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="p">(</span><span class="s1">'toJSON'</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">Error</span><span class="p">.</span><span class="n">prototype</span><span class="p">))</span>
<span class="k">Object</span><span class="p">.</span><span class="n">defineProperty</span><span class="p">(</span><span class="n">Error</span><span class="p">.</span><span class="n">prototype</span><span class="p">,</span><span class="w"> </span><span class="s1">'toJSON'</span><span class="p">,</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">value</span><span class="err">:</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">alt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span>

<span class="w">        </span><span class="k">Object</span><span class="p">.</span><span class="n">getOwnPropertyNames</span><span class="p">(</span><span class="n">this</span><span class="p">).</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="k">key</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">alt</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">alt</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span><span class="p">,</span>
<span class="w">    </span><span class="nl">configurable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<span class="w">    </span><span class="nl">writable</span><span class="p">:</span><span class="w"> </span><span class="k">true</span>
<span class="err">}</span><span class="p">);</span>



<span class="nf">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s1">'testing'</span><span class="p">);</span>
<span class="n">error</span><span class="p">.</span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'foo bar'</span><span class="p">;</span>

<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">JSON</span><span class="p">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">error</span><span class="p">));</span>
<span class="o">//</span><span class="w"> </span><span class="err">{</span><span class="ss">"message"</span><span class="err">:</span><span class="ss">"testing"</span><span class="p">,</span><span class="ss">"detail"</span><span class="err">:</span><span class="ss">"foo bar"</span><span class="err">}</span>
</pre></div>

<p>Using <code>Object.defineProperty()</code> adds <code>toJSON</code> without it being an <code>enumerable</code>
property itself.</p>
<hr>
<p>Regarding modifying <code>Error.prototype</code>, while <code>toJSON()</code> may not be defined for
<code>Error</code>s specifically, the method is still standardized for objects in general
(ref: step 3). So, the risk of collisions or conflicts is minimal.</p>
<p>Though, to still avoid it completely, <code>JSON.stringify()</code>'s <code>replacer</code>
parameter can be used instead:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">replaceErrors</span><span class="p">(</span><span class="k">key</span><span class="p">,</span><span class="w"> </span><span class="k">value</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">Error</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span>

<span class="w">        </span><span class="k">Object</span><span class="p">.</span><span class="n">getOwnPropertyNames</span><span class="p">(</span><span class="k">value</span><span class="p">).</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">propName</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">error</span><span class="o">[</span><span class="n">propName</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="o">[</span><span class="n">propName</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">error</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">value</span><span class="p">;</span>
<span class="err">}</span>

<span class="nf">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s1">'testing'</span><span class="p">);</span>
<span class="n">error</span><span class="p">.</span><span class="n">detail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'foo bar'</span><span class="p">;</span>

<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">JSON</span><span class="p">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">replaceErrors</span><span class="p">));</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-create-an-object-based-on-an-interface-file-definition-in-typescript/" class="u-url">How can I create an object based on an interface file definition in TypeScript?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-create-an-object-based-on-an-interface-file-definition-in-typescript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:31:19+08:00" itemprop="datePublished" title="2023-03-03 03:31">2023-03-03 03:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have defined an interface like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">interface</span><span class="w"> </span><span class="nt">IModal</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">content</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">form</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">href</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="err">$</span><span class="n">form</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="w">    </span><span class="err">$</span><span class="n">message</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="w">    </span><span class="err">$</span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="w">    </span><span class="err">$</span><span class="n">submits</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>

<p>I define a variable like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="n">IModal</span><span class="p">;</span>
</pre></div>

<p>However, when I try to set the property of modal it gives me a message saying
that</p>
<div class="code"><pre class="code literal-block">"cannot set property content of undefined"
</pre></div>

<p>Is it okay to use an interface to describe my modal object and if so how
should I create it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you are creating the "modal" variable elsewhere, and want to tell
TypeScript it will all be done, you would use:</p>
<div class="code"><pre class="code literal-block"><span class="n">declare</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="n">IModal</span><span class="p">;</span>
</pre></div>

<p>If you want to create a variable that will actually be an instance of IModal
in TypeScript you will need to define it fully.</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="n">IModal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">content</span><span class="p">:</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span>
<span class="w">    </span><span class="n">form</span><span class="p">:</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span>
<span class="w">    </span><span class="n">href</span><span class="p">:</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span>
<span class="w">    </span><span class="o">$</span><span class="n">form</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">    </span><span class="o">$</span><span class="n">message</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">    </span><span class="o">$</span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">    </span><span class="o">$</span><span class="n">submits</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span>
<span class="p">};</span>
</pre></div>

<p>Or lie, with a type assertion, but you'll lost type safety as you will now get
undefined in unexpected places, and possibly runtime errors, when accessing
<code>modal.content</code> and so on (properties that the contract says will be there).</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">modal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">IModal</span><span class="p">;</span>
</pre></div>

<p><strong>Example Class</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">Modal</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">IModal</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">content</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">form</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">href</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="o">$</span><span class="n">form</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="w">    </span><span class="o">$</span><span class="n">message</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="w">    </span><span class="o">$</span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="w">    </span><span class="o">$</span><span class="n">submits</span><span class="p">:</span><span class="w"> </span><span class="n">JQuery</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">modal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Modal</span><span class="p">();</span>
</pre></div>

<p>You may think "hey that's really a duplication of the interface" - and you are
correct. If the Modal class is the only implementation of the IModal interface
you may want to delete the interface altogether and use...</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="n">Modal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Modal</span><span class="p">();</span>
</pre></div>

<p>Rather than</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">modal</span><span class="p">:</span><span class="w"> </span><span class="n">IModal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Modal</span><span class="p">();</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you want an empty object of an interface, you can do just:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">modal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">IModal</span><span class="o">&gt;</span><span class="p">{};</span>
</pre></div>

<p>The advantage of using interfaces in lieu of classes for structuring data is
that if you don't have any methods on the class, it will show in compiled JS
as an empty method. Example:</p>
<div class="code"><pre class="code literal-block"><span class="nt">class</span><span class="w"> </span><span class="nt">TestClass</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">number</span><span class="p">;</span>
<span class="w">    </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">c</span><span class="p">:</span><span class="w"> </span><span class="n">boolean</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>compiles into</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">TestClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">function</span><span class="w"> </span><span class="n">TestClass</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">TestClass</span><span class="p">;</span>
<span class="p">})();</span>
</pre></div>

<p>which carries no value. Interfaces, on the other hand, don't show up in JS at
all while still providing the benefits of data structuring and type checking.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1544.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1542.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
