<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1175) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1175.html">
<link rel="prev" href="index-1176.html" type="text/html">
<link rel="next" href="index-1174.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pros-cons-of-using-redux-saga-with-es6-generators-vs-redux-thunk-with-es2017-async-await/" class="u-url">Pros/cons of using redux-saga with ES6 generators vs redux-thunk with ES2017 async/await</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pros-cons-of-using-redux-saga-with-es6-generators-vs-redux-thunk-with-es2017-async-await/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:02:17+08:00" itemprop="datePublished" title="2023-02-18 03:02">2023-02-18 03:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>There is a lot of talk about the latest kid in redux town right now, redux-
saga/redux-saga. It uses generator functions for listening to/dispatching
actions.</p>
<p>Before I wrap my head around it, I would like to know the pros/cons of using
<code>redux-saga</code> instead of the approach below where I'm using <code>redux-thunk</code> with
async/await.</p>
<p>A component might look like this, dispatch actions like usual.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">login</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'redux/auth'</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LoginForm</span> <span class="n">extends</span> <span class="n">Component</span> <span class="p">{</span>

  <span class="n">onClick</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">e</span><span class="o">.</span><span class="n">preventDefault</span><span class="p">();</span>
    <span class="n">const</span> <span class="p">{</span> <span class="n">user</span><span class="p">,</span> <span class="k">pass</span> <span class="p">}</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">refs</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="k">pass</span><span class="o">.</span><span class="n">value</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="n">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="n">ref</span><span class="o">=</span><span class="s2">"user"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">"password"</span> <span class="n">ref</span><span class="o">=</span><span class="s2">"pass"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">button</span> <span class="n">onClick</span><span class="o">=</span><span class="p">{::</span><span class="n">this</span><span class="o">.</span><span class="n">onClick</span><span class="p">}</span><span class="o">&gt;</span><span class="n">Sign</span> <span class="n">In</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="p">);</span>
  <span class="p">}</span> 
<span class="p">}</span>

<span class="n">export</span> <span class="n">default</span> <span class="n">connect</span><span class="p">((</span><span class="n">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({}))(</span><span class="n">LoginForm</span><span class="p">);</span>
</pre></div>

<p>Then my actions look something like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="n">auth</span><span class="o">.</span><span class="n">js</span>

<span class="kn">import</span> <span class="nn">request</span> <span class="kn">from</span> <span class="s1">'axios'</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">loadUserData</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'./user'</span><span class="p">;</span>

<span class="o">//</span> <span class="n">define</span> <span class="n">constants</span>
<span class="o">//</span> <span class="n">define</span> <span class="n">initial</span> <span class="n">state</span>
<span class="o">//</span> <span class="n">export</span> <span class="n">default</span> <span class="n">reducer</span>

<span class="n">export</span> <span class="n">const</span> <span class="n">login</span> <span class="o">=</span> <span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="k">pass</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">async</span> <span class="p">(</span><span class="n">dispatch</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">LOGIN_REQUEST</span> <span class="p">});</span>
        <span class="n">let</span> <span class="p">{</span> <span class="n">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">,</span> <span class="p">{</span> <span class="n">user</span><span class="p">,</span> <span class="k">pass</span> <span class="p">});</span>
        <span class="k">await</span> <span class="n">dispatch</span><span class="p">(</span><span class="n">loadUserData</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">uid</span><span class="p">));</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">LOGIN_SUCCESS</span><span class="p">,</span> <span class="n">data</span> <span class="p">});</span>
    <span class="p">}</span> <span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">LOGIN_ERROR</span><span class="p">,</span> <span class="n">error</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">more</span> <span class="n">actions</span><span class="o">...</span>
</pre></div>

<hr>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="n">user</span><span class="o">.</span><span class="n">js</span>

<span class="kn">import</span> <span class="nn">request</span> <span class="kn">from</span> <span class="s1">'axios'</span><span class="p">;</span>

<span class="o">//</span> <span class="n">define</span> <span class="n">constants</span>
<span class="o">//</span> <span class="n">define</span> <span class="n">initial</span> <span class="n">state</span>
<span class="o">//</span> <span class="n">export</span> <span class="n">default</span> <span class="n">reducer</span>

<span class="n">export</span> <span class="n">const</span> <span class="n">loadUserData</span> <span class="o">=</span> <span class="p">(</span><span class="n">uid</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">async</span> <span class="p">(</span><span class="n">dispatch</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">USERDATA_REQUEST</span> <span class="p">});</span>
        <span class="n">let</span> <span class="p">{</span> <span class="n">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="err">`</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="err">$</span><span class="p">{</span><span class="n">uid</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">USERDATA_SUCCESS</span><span class="p">,</span> <span class="n">data</span> <span class="p">});</span>
    <span class="p">}</span> <span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dispatch</span><span class="p">({</span> <span class="nb">type</span><span class="p">:</span> <span class="n">USERDATA_ERROR</span><span class="p">,</span> <span class="n">error</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">more</span> <span class="n">actions</span><span class="o">...</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>In redux-saga, the equivalent of the above example would be</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">loginSaga</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">take</span><span class="p">(</span><span class="n">LOGIN_REQUEST</span><span class="p">)</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">,</span><span class="w"> </span><span class="s1">'/login'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="p">});</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">fork</span><span class="p">(</span><span class="n">loadUserData</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="n">uid</span><span class="p">);</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">LOGIN_SUCCESS</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">LOGIN_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span><span class="w">  </span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">loadUserData</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">USERDATA_REQUEST</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">users</span><span class="o">/$</span><span class="p">{</span><span class="n">uid</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">USERDATA_SUCCESS</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">USERDATA_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>The first thing to notice is that we're calling the api functions using the
form <code>yield call(func, ...args)</code>. <code>call</code> doesn't execute the effect, it just
creates a plain object like <code>{type: 'CALL', func, args}</code>. The execution is
delegated to the redux-saga middleware which takes care of executing the
function and resuming the generator with its result.</p>
<p>The main advantage is that you can test the generator outside of Redux using
simple equality checks</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">iterator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loginSaga</span><span class="p">()</span>

<span class="nb">assert</span><span class="o">.</span><span class="n">deepEqual</span><span class="p">(</span><span class="n">iterator</span><span class="o">.</span><span class="n">next</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">take</span><span class="p">(</span><span class="n">LOGIN_REQUEST</span><span class="p">))</span>

<span class="o">//</span><span class="w"> </span><span class="n">resume</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">dummy</span><span class="w"> </span><span class="n">action</span>
<span class="k">const</span><span class="w"> </span><span class="n">mockAction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">user</span><span class="p">:</span><span class="w"> </span><span class="s1">'...'</span><span class="p">,</span><span class="w"> </span><span class="k">pass</span><span class="p">:</span><span class="w"> </span><span class="s1">'...'</span><span class="p">}</span>
<span class="nb">assert</span><span class="o">.</span><span class="n">deepEqual</span><span class="p">(</span>
<span class="w">  </span><span class="n">iterator</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="n">mockAction</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="n">call</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">,</span><span class="w"> </span><span class="s1">'/login'</span><span class="p">,</span><span class="w"> </span><span class="n">mockAction</span><span class="p">)</span>
<span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">simulate</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">result</span>
<span class="k">const</span><span class="w"> </span><span class="n">mockError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'invalid user/password'</span>
<span class="nb">assert</span><span class="o">.</span><span class="n">deepEqual</span><span class="p">(</span>
<span class="w">  </span><span class="n">iterator</span><span class="o">.</span><span class="n">throw</span><span class="p">(</span><span class="n">mockError</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="n">put</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">LOGIN_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="n">mockError</span><span class="w"> </span><span class="p">})</span>
<span class="p">)</span>
</pre></div>

<p>Note we're mocking the api call result by simply injecting the mocked data
into the <code>next</code> method of the iterator. Mocking data is way simpler than
mocking functions.</p>
<p>The second thing to notice is the call to <code>yield take(ACTION)</code>. Thunks are
called by the action creator on each new action (e.g. <code>LOGIN_REQUEST</code>). i.e.
actions are continually <em>pushed</em> to thunks, and thunks have no control on when
to stop handling those actions.</p>
<p>In redux-saga, generators <em>pull</em> the next action. i.e. they have control when
to listen for some action, and when to not. In the above example the flow
instructions are placed inside a <code>while(true)</code> loop, so it'll listen for each
incoming action, which somewhat mimics the thunk pushing behavior.</p>
<p>The pull approach allows implementing complex control flows. Suppose for
example we want to add the following requirements</p>
<ul>
<li>
<p>Handle LOGOUT user action</p>
</li>
<li>
<p>upon the first successful login, the server returns a token which expires in some delay stored in a <code>expires_in</code> field. We'll have to refresh the authorization in the background on each <code>expires_in</code> milliseconds</p>
</li>
<li>
<p>Take into account that when waiting for the result of api calls (either initial login or refresh) the user may logout in-between.</p>
</li>
</ul>
<p>How would you implement that with thunks; while also providing full test
coverage for the entire flow? Here is how it may look with Sagas:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">authorize</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">authorize</span><span class="p">,</span><span class="w"> </span><span class="n">credentials</span><span class="p">)</span>
<span class="w">  </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="w"> </span><span class="n">login</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">token</span>
<span class="p">}</span>

<span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">authAndRefreshTokenOnExpiry</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">let</span><span class="w"> </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">authorize</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">})</span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">delay</span><span class="p">,</span><span class="w"> </span><span class="n">token</span><span class="o">.</span><span class="n">expires_in</span><span class="p">)</span>
<span class="w">    </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">call</span><span class="p">(</span><span class="n">authorize</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">token</span><span class="p">})</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">function</span><span class="o">*</span><span class="w"> </span><span class="n">watchAuth</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">yield</span><span class="w"> </span><span class="n">take</span><span class="p">(</span><span class="n">LOGIN_REQUEST</span><span class="p">)</span>

<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">race</span><span class="p">([</span>
<span class="w">        </span><span class="n">take</span><span class="p">(</span><span class="n">LOGOUT</span><span class="p">),</span>
<span class="w">        </span><span class="n">call</span><span class="p">(</span><span class="n">authAndRefreshTokenOnExpiry</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">)</span>
<span class="w">      </span><span class="p">])</span>

<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">logged</span><span class="w"> </span><span class="n">out</span><span class="p">,</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">iteration</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">LOGIN_REQUEST</span><span class="w"> </span><span class="n">action</span>

<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">yield</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="w"> </span><span class="n">login</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>In the above example, we're expressing our concurrency requirement using
<code>race</code>. If <code>take(LOGOUT)</code> wins the race (i.e. user clicked on a Logout
Button). The race will automatically cancel the <code>authAndRefreshTokenOnExpiry</code>
background task. And if the <code>authAndRefreshTokenOnExpiry</code> was blocked in
middle of a <code>call(authorize, {token})</code> call it'll also be cancelled.
Cancellation propagates downward automatically.</p>
<p>You can find a runnable demo of the above flow</p>
<p><br></p>
<h3>Suggest</h3>
<p>I will add my experience using saga in production system in addition to the
library author's rather thorough answer.</p>
<p>Pro (using saga):</p>
<ul>
<li>
<p>Testability. It's very easy to test sagas as call() returns a pure object. Testing thunks normally requires you to include a mockStore inside your test.</p>
</li>
<li>
<p>redux-saga comes with lots of useful helper functions about tasks. It seems to me that the concept of saga is to create some kind of background worker/thread for your app, which act as a missing piece in react redux architecture(actionCreators and reducers must be pure functions.) Which leads to next point.</p>
</li>
<li>
<p>Sagas offer independent place to handle all side effects. It is usually easier to modify and manage than thunk actions in my experience.</p>
</li>
</ul>
<p>Con:</p>
<ul>
<li>
<p>Generator syntax.</p>
</li>
<li>
<p>Lots of concepts to learn.</p>
</li>
<li>
<p>API stability. It seems redux-saga is still adding features (eg Channels?) and the community is not as big. There is a concern if the library makes a non backward compatible update some day.</p>
</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/object-spread-vs-object-assign/" class="u-url">Object spread vs. Object.assign</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/object-spread-vs-object-assign/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:01:45+08:00" itemprop="datePublished" title="2023-02-18 03:01">2023-02-18 03:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Let’s say I have an <code>options</code> variable and I want to set some default value.</p>
<p>What’s is the benefit / drawback of these two alternatives?</p>
<p>Using object spread</p>
<div class="code"><pre class="code literal-block">options = {...optionsDefault, ...options};
</pre></div>

<p>Or using Object.assign</p>
<div class="code"><pre class="code literal-block"><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="k">assign</span><span class="p">({},</span><span class="w"> </span><span class="n">optionsDefault</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
</pre></div>

<p>This is the commit that made me wonder.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>For reference object rest/spread is finalised in ECMAScript 2018 as a stage 4.
The proposal can be found here.</p>
<p>For the most part object assign and spread work the same way, the key
difference is that spread defines properties, whilst Object.assign() sets
them. This means Object.assign() triggers setters.</p>
<p>It's worth remembering that other than this, object rest/spread 1:1 maps to
Object.assign() and acts differently to array (iterable) spread. For example,
when spreading an array null values are spread. However using object spread
null values are silently spread to nothing.</p>
<p><strong>Array (Iterable) Spread Example</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">([</span><span class="o">...</span><span class="n">z</span><span class="p">]);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">TypeError</span>
</pre></div>

<p><strong>Object Spread Example</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="n">y</span><span class="p">};</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<p>This is consistent with how Object.assign() would work, both silently exclude
the null value with no error.</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">assign</span><span class="p">({},</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>For reference object rest/spread is finalised in ECMAScript 2018 as a stage 4.
The proposal can be found here.</p>
<p>For the most part object assign and spread work the same way, the key
difference is that spread defines properties, whilst Object.assign() sets
them. This means Object.assign() triggers setters.</p>
<p>It's worth remembering that other than this, object rest/spread 1:1 maps to
Object.assign() and acts differently to array (iterable) spread. For example,
when spreading an array null values are spread. However using object spread
null values are silently spread to nothing.</p>
<p><strong>Array (Iterable) Spread Example</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">];</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">([</span><span class="o">...</span><span class="n">z</span><span class="p">]);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">TypeError</span>
</pre></div>

<p><strong>Object Spread Example</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="o">...</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="n">y</span><span class="p">};</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<p>This is consistent with how Object.assign() would work, both silently exclude
the null value with no error.</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">};</span>
<span class="k">const</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">assign</span><span class="p">({},</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">z</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="p">{</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/correct-format-specifier-for-double-in-printf/" class="u-url">Correct format specifier for double in printf</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/correct-format-specifier-for-double-in-printf/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:00:41+08:00" itemprop="datePublished" title="2023-02-18 03:00">2023-02-18 03:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the correct format specifier for <code>double</code> in printf? Is it <code>%f</code> or is
it <code>%lf</code>? I believe it's <code>%f</code>, but I am not sure.</p>
<h4>Code sample</h4>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">   </span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.4</span><span class="p">;</span>
<span class="w">   </span><span class="n">printf</span><span class="p">(</span><span class="s">"%lf"</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">);</span><span class="w"> </span><span class="c1">// Is this wrong?</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><code>"%f"</code> is the (or at least one) correct format for a double. There <em>is</em> no
format for a <code>float</code>, because if you attempt to pass a <code>float</code> to <code>printf</code>,
it'll be promoted to <code>double</code> before <code>printf</code> receives it1. <code>"%lf"</code> is also
acceptable under the current standard -- the <code>l</code> is specified as having no
effect if followed by the <code>f</code> conversion specifier (among others).</p>
<p>Note that this is one place that <code>printf</code> format strings differ substantially
from <code>scanf</code> (and <code>fscanf</code>, etc.) format strings. For output, you're passing a
<em>value</em> , which will be promoted from <code>float</code> to <code>double</code> when passed as a
variadic parameter. For input you're passing a <em>pointer</em> , which is not
promoted, so you have to tell <code>scanf</code> whether you want to read a <code>float</code> or a
<code>double</code>, so for <code>scanf</code>, <code>%f</code> means you want to read a <code>float</code> and <code>%lf</code>
means you want to read a <code>double</code> (and, for what it's worth, for a <code>long
double</code>, you use <code>%Lf</code> for either <code>printf</code> or <code>scanf</code>).</p>
<hr>
<p>1. C99, §6.5.2.2/6: "If the expression that denotes the called function has a
type that does not include a prototype, the integer promotions are performed
on each argument, and arguments that have type float are promoted to double.
These are called the default argument promotions." In C++ the wording is
somewhat different (e.g., it doesn't use the word "prototype") but the effect
is the same: all the variadic parameters undergo default promotions before
they're received by the function.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Given the C99 standard (namely, the <em>N1256</em> draft), the rules depend on the
function kind: fprintf (printf, sprintf, ...) or scanf.</p>
<p>Here are relevant parts extracted:</p>
<blockquote>
<p><strong>Foreword</strong></p>
<p>This second edition cancels and replaces the first edition, ISO/IEC
9899:1990, as amended and corrected by ISO/IEC 9899/COR1:1994, ISO/IEC
9899/AMD1:1995, and ISO/IEC 9899/COR2:1996. Major changes from the previous
edition include:</p>
<ul>
<li>
<code>%lf</code> conversion specifier allowed in <code>printf</code>
</li>
</ul>
<p><strong>7.19.6.1 The<code>fprintf</code> function</strong></p>
<p><strong>7</strong> The length modifiers and their meanings are:</p>
<p><em>l</em> (ell) Specifies that (...) has no effect on a following a, A, e, E, f,
F, g, or G conversion specifier.</p>
<p><em>L</em> Specifies that a following a, A, e, E, f, F, g, or G conversion
specifier applies to a long double argument.</p>
</blockquote>
<p>The same rules specified for <code>fprintf</code> apply for <code>printf</code>, <code>sprintf</code> and
similar functions.</p>
<blockquote>
<p><strong>7.19.6.2 The<code>fscanf</code> function</strong></p>
<p><strong>11</strong> The length modifiers and their meanings are:</p>
<p><em>l</em> (ell) Specifies that (...) that a following a, A, e, E, f, F, g, or G
conversion specifier applies to an argument with type pointer to double;</p>
<p><em>L</em> Specifies that a following a, A, e, E, f, F, g, or G conversion
specifier applies to an argument with type pointer to long double.</p>
<p><strong>12</strong> The conversion specifiers and their meanings are: a,e,f,g Matches an
optionally signed floating-point number, (...)</p>
<p><strong>14</strong> The conversion specifiers A, E, F, G, and X are also valid and behave
the same as, respectively, a, e, f, g, and x.</p>
</blockquote>
<p>The long story short, for <code>fprintf</code> the following specifiers and corresponding
types are specified:</p>
<ul>
<li>
<code>%f</code> -&gt; double</li>
<li>
<code>%Lf</code> -&gt; long double.</li>
</ul>
<p>and for <code>fscanf</code> it is:</p>
<ul>
<li>
<code>%f</code> -&gt; float</li>
<li>
<code>%lf</code> -&gt; double</li>
<li>
<code>%Lf</code> -&gt; long double.</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1176.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1174.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
