<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 208) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-208.html">
<link rel="prev" href="index-209.html" type="text/html">
<link rel="next" href="index-207.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/font-scaling-based-on-size-of-container/" class="u-url">Font scaling based on size of container</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/font-scaling-based-on-size-of-container/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:53:24+08:00" itemprop="datePublished" title="2023-02-17 00:53">2023-02-17 00:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm having a hard time getting my head around font scaling.</p>
<p>I currently have a website with a body <code>font-size</code> of 100%. 100% of what
though? This seems to compute out at 16 pixels.</p>
<p>I was under the impression that 100% would somehow refer to the size of the
browser window, but apparently not because it's always 16 pixels whether the
window is resized down to a mobile width or full-blown widescreen desktop.</p>
<p>How can I make the text on my site scale in relation to its container? I tried
using <code>em</code>, but this doesn't scale either.</p>
<p>My reasoning is that things like my menu become squished when you resize, so I
need to reduce the <code>px</code> <code>font-size</code> of <code>.menuItem</code> among other elements in
relation to the width of the container. (For example, in the menu on a large
desktop, <code>22px</code> works perfectly. Move down to tablet width and <code>16px</code> is more
appropriate.)</p>
<p>I'm aware I can add breakpoints, but I really want the text to scale as <em>well</em>
as having extra breakpoints, otherwise, I'll end up with hundreds of
breakpoints for every 100pixels decrease in width to control the text.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If the container is not the body, CSS Tricks covers all of your options in
<em>Fitting Text to a Container</em>.</p>
<p>If the container is the body, what you are looking for is Viewport-percentage
lengths:</p>
<blockquote>
<p>The <strong>viewport-percentage lengths</strong> are relative to the size of the initial
containing block. When the height or width of the initial containing block
is changed, they are scaled accordingly. However, when the value of overflow
on the root element is auto, any scroll bars are assumed not to exist.</p>
</blockquote>
<p>The values are:</p>
<ul>
<li>
<code>vw</code> (% of the viewport width)</li>
<li>
<code>vh</code> (% of the viewport height)</li>
<li>
<code>vi</code> (1% of the viewport size in the direction of the root element's inline axis)</li>
<li>
<code>vb</code> (1% of the viewport size in the direction of the root element's block axis)</li>
<li>
<code>vmin</code> (the smaller of <code>vw</code> or <code>vh</code>)</li>
<li>
<code>vmax</code> (the larger or <code>vw</code> or <code>vh</code>)</li>
</ul>
<p>1 v* is equal to 1% of the initial containing block.</p>
<p>Using it looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">p</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">vw</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>As you can see, when the viewport width increases, so do the <code>font-size</code>,
without needing to use media queries.</p>
<p>These values are a sizing unit, just like <code>px</code> or <code>em</code>, so they can be used to
size other elements as well, such as width, margin, or padding.</p>
<p>Browser support is pretty good, but you'll likely need a fallback, such as:</p>
<div class="code"><pre class="code literal-block"><span class="nt">p</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">vw</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Check out the support statistics: http://caniuse.com/#feat=viewport-units.</p>
<p>Also, check out CSS-Tricks for a broader look: <em>Viewport Sized Typography</em></p>
<p>Here's a nice article about setting minimum/maximum sizes and exercising a bit
more control over the sizes: <em>Precise control over responsive typography</em></p>
<p>And here's an article about setting your size using calc() so that the text
fills the viewport: http://codepen.io/CrocoDillon/pen/fBJxu</p>
<p>Also, please view this article, which uses a technique dubbed 'molten leading'
to adjust the line-height as well. <em>Molten Leading in CSS</em></p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>But what if the container is not the viewport (body)?</p>
</blockquote>
<p>This question is asked in a comment by Alex under 2507rkt3's answer.</p>
<p>That fact does not mean <code>vw</code> cannot be used to some extent to size for that
container. Now to see any variation at all one has to be assuming that the
container in some way is flexible in size. Whether through a direct percentage
<code>width</code> or through being 100% minus margins. The point becomes "moot" if the
container is always set to, let's say, <code>200px</code> wide--then just set a <code>font-
size</code> that works for that width.</p>
<p><strong>Example 1</strong></p>
<p>With a flexible width container, however, it must be realized that in some way
the container is <em><strong>still being sized off the viewport</strong></em>. As such, it is a
matter of adjusting a <code>vw</code> setting based off that percentage size difference
to the viewport, which means taking into account the sizing of parent
wrappers. <strong>Take this example</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="nt">div</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">black</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="c">/* 100 = viewport width, as 1vw = 1/100th of that</span>
<span class="c">       So if the container is 50% of viewport (as here)</span>
<span class="c">       then factor that into how you want it to size.</span>
<span class="c">       Let's say you like 5vw if it were the whole width,</span>
<span class="c">       then for this container, size it at 2.5vw (5 * .5 </span><span class="cp">[</span><span class="nx">i.e.</span><span class="w"> </span><span class="mi">50</span><span class="o">%</span><span class="cp">]</span><span class="c">)</span>
<span class="c">    */</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="kt">vw</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Assuming here the <code>div</code> is a child of the <code>body</code>, it is <code>50%</code> of that <code>100%</code>
width, which is the viewport size in this basic case. Basically, you want to
set a <code>vw</code> that is going to look good to you. As you can see in my comment in
the above CSS content, you can "think" through that mathematically with
respect to the full viewport size, but you don't <em>need</em> to do that. The text
is going to "flex" with the container because the container is flexing with
the viewport resizing. Here's an example of two differently sized containers.</p>
<p><strong>Example 2</strong></p>
<p>You can help ensure viewport sizing by forcing the calculation based off that.
<strong>Consider this example</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="nt">html</span><span class="w"> </span><span class="p">{</span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;}</span><span class="w"> </span><span class="c">/* Force 'html' to be viewport width */</span>
<span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="kt">%</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c">/* Overflow the body */</span>

<span class="nt">div</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">black</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="c">/* 100 = viewport width, as 1vw = 1/100th of that</span>
<span class="c">       Here, the body is 150% of viewport, but the container is 50%</span>
<span class="c">       of viewport, so both parents factor  into how you want it to size.</span>
<span class="c">       Let's say you like 5vw if it were the whole width,</span>
<span class="c">       then for this container, size it at 3.75vw</span>
<span class="c">       (5 * 1.5 </span><span class="cp">[</span><span class="nx">i.e.</span><span class="w"> </span><span class="mi">150</span><span class="o">%</span><span class="cp">]</span><span class="c">) * .5 </span><span class="cp">[</span><span class="nx">i.e.</span><span class="w"> </span><span class="mi">50</span><span class="o">%</span><span class="cp">]</span>
<span class="c">    */</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">3.75</span><span class="kt">vw</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>The sizing is still based off viewport, but is in essence set up based off the
container size itself.</p>
<h3>Should the Size of the Container Change Dynamically...</h3>
<p>If the sizing of the container element ended up changing dynamically its
percentage relationship either via <code>@media</code> breakpoints or via JavaScript,
then whatever the base "target" was would need recalculation to maintain the
same "relationship" for text sizing.</p>
<p>Take example #1 above. If the <code>div</code> was switched to <code>25%</code> width by either
<code>@media</code> or JavaScript, then at the same time, the <code>font-size</code> would need to
adjust in either the media query or by JavaScript to the new calculation of
<code>5vw * .25 = 1.25</code>. This would put the text size at the same size it would
have been had the "width" of the original <code>50%</code> container been reduced by half
from viewport sizing, but has now been reduced due to a change in its own
percentage calculation.</p>
<p><strong>A Challenge</strong></p>
<p>With the CSS <code>calc()</code> function in use, it would become difficult to adjust
dynamically, as that function does not work for <code>font-size</code> purposes at this
time. So you could not do a pure CSS adjustment if your width is changing on
<code>calc()</code>. Of course, a minor adjustment of width for margins may not be enough
to warrant any change in <code>font-size</code>, so it may not matter.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-replace-each-newline-n-with-a-space-using-sed/" class="u-url">How can I replace each newline (\n) with a space using sed?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-replace-each-newline-n-with-a-space-using-sed/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:52:52+08:00" itemprop="datePublished" title="2023-02-17 00:52">2023-02-17 00:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I replace a newline ("<code>\n</code>") with a space ("<code>`") using the</code>sed`
command?</p>
<p>I unsuccessfully tried:</p>
<div class="code"><pre class="code literal-block">sed 's#\n# #g' file
sed 's#^$# #g' file
</pre></div>

<p>How do I fix it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use this solution with GNU <code>sed</code>:</p>
<div class="code"><pre class="code literal-block">sed ':a;N;$!ba;s/\n/ /g' file
</pre></div>

<p>This will read the whole file in a loop (<code>':a;N;$!ba</code>), then replaces the
newline(s) with a space (<code>s/\n/ /g</code>). Additional substitutions can be simply
appended if needed.</p>
<p>Explanation:</p>
<ol>
<li>
<code>sed</code> starts by reading the first line excluding the newline into the pattern space.</li>
<li>Create a label via <code>:a</code>.</li>
<li>Append a newline and next line to the pattern space via <code>N</code>.</li>
<li>If we are before the last line, branch to the created label <code>$!ba</code> (<code>$!</code> means not to do it on the last line. This is necessary to avoid executing <code>N</code> again, which would terminate the script if there is no more input!).</li>
<li>Finally the substitution replaces every newline with a space on the pattern space (which is the whole file).</li>
</ol>
<p>Here is cross-platform compatible syntax which works with BSD and OS X's <code>sed</code>
(as per @Benjie comment):</p>
<div class="code"><pre class="code literal-block">sed -e ':a' -e 'N' -e '$!ba' -e 's/\n/ /g' file
</pre></div>

<p>As you can see, using <code>sed</code> for this otherwise simple problem is problematic.
For a simpler and adequate solution see this answer.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Use this solution with GNU <code>sed</code>:</p>
<div class="code"><pre class="code literal-block">sed ':a;N;$!ba;s/\n/ /g' file
</pre></div>

<p>This will read the whole file in a loop (<code>':a;N;$!ba</code>), then replaces the
newline(s) with a space (<code>s/\n/ /g</code>). Additional substitutions can be simply
appended if needed.</p>
<p>Explanation:</p>
<ol>
<li>
<code>sed</code> starts by reading the first line excluding the newline into the pattern space.</li>
<li>Create a label via <code>:a</code>.</li>
<li>Append a newline and next line to the pattern space via <code>N</code>.</li>
<li>If we are before the last line, branch to the created label <code>$!ba</code> (<code>$!</code> means not to do it on the last line. This is necessary to avoid executing <code>N</code> again, which would terminate the script if there is no more input!).</li>
<li>Finally the substitution replaces every newline with a space on the pattern space (which is the whole file).</li>
</ol>
<p>Here is cross-platform compatible syntax which works with BSD and OS X's <code>sed</code>
(as per @Benjie comment):</p>
<div class="code"><pre class="code literal-block">sed -e ':a' -e 'N' -e '$!ba' -e 's/\n/ /g' file
</pre></div>

<p>As you can see, using <code>sed</code> for this otherwise simple problem is problematic.
For a simpler and adequate solution see this answer.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-make-a-dictionary-dict-from-separate-lists-of-keys-and-values/" class="u-url">How can I make a dictionary (dict) from separate lists of keys and values?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-make-a-dictionary-dict-from-separate-lists-of-keys-and-values/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:52:25+08:00" itemprop="datePublished" title="2023-02-17 00:52">2023-02-17 00:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to combine these:</p>
<div class="code"><pre class="code literal-block">keys = ['name', 'age', 'food']
values = ['Monty', 42, 'spam']
</pre></div>

<p>Into a single dictionary:</p>
<div class="code"><pre class="code literal-block">{'name': 'Monty', 'age': 42, 'food': 'spam'}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Like this:</p>
<div class="code"><pre class="code literal-block">keys = ['a', 'b', 'c']
values = [1, 2, 3]
dictionary = dict(zip(keys, values))
print(dictionary) # {'a': 1, 'b': 2, 'c': 3}
</pre></div>

<p>Voila :-) The pairwise <code>dict</code> constructor and <code>zip</code> function are awesomely
useful.</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>Imagine that you have:</p>
<div class="code"><pre class="code literal-block">keys = ('name', 'age', 'food')
values = ('Monty', 42, 'spam')
</pre></div>

<p><strong>What is the simplest way to produce the following dictionary ?</strong></p>
<div class="code"><pre class="code literal-block">dict = {'name' : 'Monty', 'age' : 42, 'food' : 'spam'}
</pre></div>

</blockquote>
<h3>Most performant, <code>dict</code> constructor with <code>zip</code>
</h3>
<div class="code"><pre class="code literal-block">new_dict = dict(zip(keys, values))
</pre></div>

<p>In Python 3, zip now returns a lazy iterator, and this is now the most
performant approach.</p>
<p><code>dict(zip(keys, values))</code> does require the one-time global lookup each for
<code>dict</code> and <code>zip</code>, but it doesn't form any unnecessary intermediate data-
structures or have to deal with local lookups in function application.</p>
<h3>Runner-up, dict comprehension:</h3>
<p>A close runner-up to using the dict constructor is to use the native syntax of
a dict comprehension (not a <em>list</em> comprehension, as others have mistakenly
put it):</p>
<div class="code"><pre class="code literal-block"><span class="nv">new_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{<span class="nv">k</span>:<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span><span class="nv">keys</span>,<span class="w"> </span><span class="nv">values</span><span class="ss">)</span>}
</pre></div>

<p>Choose this when you need to map or filter based on the keys or value.</p>
<p>In Python 2, <code>zip</code> returns a list, to avoid creating an unnecessary list, use
<code>izip</code> instead (aliased to zip can reduce code changes when you move to Python
3).</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">izip</span> <span class="k">as</span> <span class="nb">zip</span>
</pre></div>

<p>So that is still (2.7):</p>
<div class="code"><pre class="code literal-block"><span class="nv">new_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{<span class="nv">k</span>:<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span><span class="nv">keys</span>,<span class="w"> </span><span class="nv">values</span><span class="ss">)</span>}
</pre></div>

<h3>Python 2, ideal for &lt;= 2.6</h3>
<p><code>izip</code> from <code>itertools</code> becomes <code>zip</code> in Python 3. <code>izip</code> is better than zip
for Python 2 (because it avoids the unnecessary list creation), and ideal for
2.6 or below:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">izip</span>
<span class="n">new_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">izip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
</pre></div>

<h3>Result for all cases:</h3>
<p>In all cases:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; new_dict
{'age': 42, 'name': 'Monty', 'food': 'spam'}
</pre></div>

<h3>Explanation:</h3>
<p>If we look at the help on <code>dict</code> we see that it takes a variety of forms of
arguments:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">help</span><span class="p">(</span><span class="n">dict</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="n">dict</span><span class="p">(</span><span class="k">object</span><span class="p">)</span>
<span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="n">dict</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="k">dictionary</span>
<span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="n">dict</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">dictionary</span><span class="w"> </span><span class="n">initialized</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="k">object</span><span class="err">'</span><span class="n">s</span>
<span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="p">(</span><span class="k">key</span><span class="p">,</span><span class="w"> </span><span class="k">value</span><span class="p">)</span><span class="w"> </span><span class="n">pairs</span>
<span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="n">dict</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">dictionary</span><span class="w"> </span><span class="n">initialized</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nl">via</span><span class="p">:</span>
<span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>
<span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nl">iterable</span><span class="p">:</span>
<span class="w"> </span><span class="o">|</span><span class="w">          </span><span class="n">d</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span>
<span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="n">dict</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">dictionary</span><span class="w"> </span><span class="n">initialized</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="k">value</span><span class="w"> </span><span class="n">pairs</span>
<span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">keyword</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="w">  </span><span class="k">For</span><span class="w"> </span><span class="nl">example</span><span class="p">:</span><span class="w">  </span><span class="n">dict</span><span class="p">(</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

<p>The optimal approach is to use an iterable while avoiding creating unnecessary
data structures. In Python 2, zip creates an unnecessary list:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; zip(keys, values)
[('name', 'Monty'), ('age', 42), ('food', 'spam')]
</pre></div>

<p>In Python 3, the equivalent would be:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; list(zip(keys, values))
[('name', 'Monty'), ('age', 42), ('food', 'spam')]
</pre></div>

<p>and Python 3's <code>zip</code> merely creates an iterable object:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; zip(keys, values)
&lt;zip object at 0x7f0e2ad029c8&gt;
</pre></div>

<p>Since we want to avoid creating unnecessary data structures, we usually want
to avoid Python 2's <code>zip</code> (since it creates an unnecessary list).</p>
<h3>Less performant alternatives:</h3>
<p>This is a generator expression being passed to the dict constructor:</p>
<div class="code"><pre class="code literal-block"><span class="nv">generator_expression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">((</span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span><span class="nv">keys</span>,<span class="w"> </span><span class="nv">values</span><span class="ss">))</span>
<span class="nv">dict</span><span class="ss">(</span><span class="nv">generator_expression</span><span class="ss">)</span>
</pre></div>

<p>or equivalently:</p>
<div class="code"><pre class="code literal-block"><span class="nv">dict</span><span class="ss">((</span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span><span class="nv">keys</span>,<span class="w"> </span><span class="nv">values</span><span class="ss">))</span>
</pre></div>

<p>And this is a list comprehension being passed to the dict constructor:</p>
<div class="code"><pre class="code literal-block"><span class="nv">dict</span><span class="ss">(</span>[<span class="ss">(</span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span><span class="nv">keys</span>,<span class="w"> </span><span class="nv">values</span><span class="ss">)</span>]<span class="ss">)</span>
</pre></div>

<p>In the first two cases, an extra layer of non-operative (thus unnecessary)
computation is placed over the zip iterable, and in the case of the list
comprehension, an extra list is unnecessarily created. I would expect all of
them to be less performant, and certainly not more-so.</p>
<h3>Performance review:</h3>
<p>In 64 bit Python 3.8.2 provided by Nix, on Ubuntu 16.04, ordered from fastest
to slowest:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">timeit</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="nl">lambda</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="p">(</span><span class="n">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="k">values</span><span class="p">))))</span>
<span class="mf">0.6695233230129816</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">timeit</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="nl">lambda</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="nl">k</span><span class="p">:</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="k">values</span><span class="p">)</span><span class="err">}</span><span class="p">))</span>
<span class="mf">0.6941362579818815</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">timeit</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="nl">lambda</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="n">keys</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="k">values</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">keys</span><span class="p">))</span><span class="err">}</span><span class="p">))</span>
<span class="mf">0.8782548159942962</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">timeit</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="nl">lambda</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="p">(</span><span class="o">[</span><span class="n">(k, v) for k, v in zip(keys, values)</span><span class="o">]</span><span class="p">)))</span>
<span class="mf">1.077607496001292</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">timeit</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="nl">lambda</span><span class="p">:</span><span class="w"> </span><span class="n">dict</span><span class="p">((</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="w"> </span><span class="k">values</span><span class="p">))))</span>
<span class="mf">1.1840861019445583</span>
</pre></div>

<p><code>dict(zip(keys, values))</code> wins even with small sets of keys and values, but
for larger sets, the differences in performance will become greater.</p>
<p>A commenter said:</p>
<blockquote>
<p><code>min</code> seems like a bad way to compare performance. Surely <code>mean</code> and/or
<code>max</code> would be much more useful indicators for real usage.</p>
</blockquote>
<p>We use <code>min</code> because these algorithms are deterministic. We want to know the
performance of the algorithms under the best conditions possible.</p>
<p>If the operating system hangs for any reason, it has nothing to do with what
we're trying to compare, so we need to exclude those kinds of results from our
analysis.</p>
<p>If we used <code>mean</code>, those kinds of events would skew our results greatly, and
if we used <code>max</code> we will only get the most extreme result - the one most
likely affected by such an event.</p>
<p>A commenter also says:</p>
<blockquote>
<p>In python 3.6.8, using mean values, the dict comprehension is indeed still
faster, by about 30% for these small lists. For larger lists (10k random
numbers), the <code>dict</code> call is about 10% faster.</p>
</blockquote>
<p>I presume we mean <code>dict(zip(...</code> with 10k random numbers. That does sound like
a fairly unusual use case. It does makes sense that the most direct calls
would dominate in large datasets, and I wouldn't be surprised if OS hangs are
dominating given how long it would take to run that test, further skewing your
numbers. And if you use <code>mean</code> or <code>max</code> I would consider your results
meaningless.</p>
<p>Let's use a more realistic size on our top examples:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">timeit</span>
<span class="n">l1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="n">l2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>

<p>And we see here that <code>dict(zip(...</code> does indeed run faster for larger datasets
by about 20%.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">min</span><span class="ss">(</span><span class="nv">timeit</span>.<span class="nv">repeat</span><span class="ss">(</span><span class="nv">lambda</span>:<span class="w"> </span>{<span class="nv">k</span>:<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">k</span>,<span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span><span class="nv">l1</span>,<span class="w"> </span><span class="nv">l2</span><span class="ss">)</span>}<span class="ss">))</span>
<span class="mi">9</span>.<span class="mi">698965263989521</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">min</span><span class="ss">(</span><span class="nv">timeit</span>.<span class="nv">repeat</span><span class="ss">(</span><span class="nv">lambda</span>:<span class="w"> </span><span class="nv">dict</span><span class="ss">(</span><span class="nv">zip</span><span class="ss">(</span><span class="nv">l1</span>,<span class="w"> </span><span class="nv">l2</span><span class="ss">))))</span>
<span class="mi">7</span>.<span class="mi">9965161079890095</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-209.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-207.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
