<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 159) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-159.html">
<link rel="prev" href="index-160.html" type="text/html">
<link rel="next" href="index-158.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-a-process-and-a-thread/" class="u-url">What is the difference between a process and a thread?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-a-process-and-a-thread/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:22:10+08:00" itemprop="datePublished" title="2023-02-16 23:22">2023-02-16 23:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the technical difference between a process and a thread?</p>
<p>I get the feeling a word like 'process' is overused and there are also
hardware and software threads. How about light-weight processes in languages
like Erlang? Is there a definitive reason to use one term over the other?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Both processes and threads are independent sequences of execution. The typical
difference is that threads (of the same process) run in a shared memory space,
while processes run in separate memory spaces.</p>
<p>I'm not sure what "hardware" vs "software" threads you might be referring to.
Threads are an operating environment feature, rather than a CPU feature
(though the CPU typically has operations that make threads efficient).</p>
<p>Erlang uses the term "process" because it does not expose a shared-memory
multiprogramming model. Calling them "threads" would imply that they have
shared memory.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This information was found on Microsoft Learn here: <strong>About Processes and
Threads</strong></p>
<blockquote>
<p><strong>Process</strong><br>
 Each <em>process</em> provides the resources needed to execute a program. A
process has a virtual address space, executable code, open handles to system
objects, a security context, a unique process identifier, environment
variables, a priority class, minimum and maximum working set sizes, and at
least one thread of execution. Each process is started with a single thread,
often called the <em>primary thread</em> , but can create additional threads from
any of its threads.</p>
<p><strong>Thread</strong><br>
 A <em>thread</em> is an entity within a process that can be scheduled for
execution. All threads of a process share its virtual address space and
system resources. In addition, each thread maintains exception handlers, a
scheduling priority, thread local storage, a unique thread identifier, and a
set of structures the system will use to save the thread context until it is
scheduled. The <em>thread context</em> includes the thread's set of machine
registers, the kernel stack, a thread environment block, and a user stack in
the address space of the thread's process. Threads can also have their own
security context, which can be used for impersonating clients.</p>
<p>Microsoft Windows supports <em>preemptive multitasking</em> , which creates the
effect of simultaneous execution of multiple threads from multiple
processes. On a multiprocessor computer, the system can simultaneously
execute as many threads as there are processors on the computer.</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-does-git-handle-symbolic-links/" class="u-url">How does Git handle symbolic links?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-does-git-handle-symbolic-links/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:21:16+08:00" itemprop="datePublished" title="2023-02-16 23:21">2023-02-16 23:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I have a file or directory that is a symbolic link and I commit it to a Git
repository, what happens to it?</p>
<p>I would assume that it leaves it as a symbolic link until the file is deleted
and then if you pull the file back from an old version it just creates a
normal file.</p>
<p>What does it do when I delete the file it references? Does it just commit the
dangling link?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From linux symlink manual (assuming you are in Linux):</p>
<blockquote>
<p>A symbolic link is a special type of file whose contents are a string that
is the pathname of another file, the file to which the link refers. (The
contents of a symbolic link can be read using readlink(2).)</p>
</blockquote>
<p>So a symbolic link is one more file, just as a <code>README.md</code> or a <code>Makefile</code>.
Git just stores the contents of the link (i.e. the aforementioned path of the
file system object that it links to) in a 'blob' just like it would for any
other file. It then stores the name, mode and type (including the fact that it
is a symlink) in the tree object that represents its containing directory.</p>
<p>When you checkout a tree containing the link, it restores the object as a
symlink regardless of whether the target file system object exists or not.</p>
<p>If you delete the file that the symlink references it doesn't affect the Git-
controlled symlink in any way. You will have a dangling reference. It is up to
the user to either remove or change the link to point to something valid if
needed.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can see what Git does with a symbolic link by adding it to the index. The
index is like a pre-commit. When the index is committed, you can use <code>git
checkout</code> to bring everything that was in the index back into the working
directory.</p>
<p>So, what does Git do when you add a symbolic link to the index?</p>
<p>First, make a symbolic link:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/path/referenced/by/symlink<span class="w"> </span>symlink
</pre></div>

<p>Git doesn't know about this file yet. <code>git ls-files</code> lets you inspect your
index (<code>-s</code> prints <code>stat</code>-like output):</p>
<div class="code"><pre class="code literal-block"><span class="err">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">ls</span><span class="o">-</span><span class="n">files</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">symlink</span>
<span class="o">[</span><span class="n">nothing</span><span class="o">]</span>
</pre></div>

<p>Now, add the symbolic link to the index. When you add a file to the index, Git
copies its contents in the object store.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>./symlink
</pre></div>

<p>What was added?</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>ls-files<span class="w"> </span>-s<span class="w"> </span>./symlink
<span class="m">120000</span><span class="w"> </span>1596f9db1b9610f238b78dd168ae33faa2dec15c<span class="w"> </span><span class="m">0</span><span class="w">       </span>symlink
</pre></div>

<p>The hash is a reference to the packed object that was created in the object
store. You can examine this object if you look in
<code>.git/objects/15/96f9db1b9610f238b78dd168ae33faa2dec15c</code> in the root of your
repository. <strong>This is the file that Git stores in the repository, that you can
later check out.</strong> If you examine this file, you'll see it is very small. It
does not store the contents of the linked file. To confirm this, print the
contents of the packed repository object with <code>git cat-file</code>:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>cat-file<span class="w"> </span>-p<span class="w"> </span>1596f9db1b9610f238b78dd168ae33faa2dec15c
/path/referenced/by/symlink
</pre></div>

<p>(Note <code>120000</code> is the mode listed in <code>ls-files</code> output. It would be something
like <code>100644</code> for a regular file.)</p>
<p>But what does Git do with this object when you check it out from the
repository and into your filesystem? It depends on the <code>core.symlinks</code> config.
From <code>man git-config</code>:</p>
<blockquote>
<p>core.symlinks</p>
<p>If false, symbolic links are checked out as small plain files that contain
the link text.</p>
</blockquote>
<p>So, with a symbolic link in the repository, upon checkout you either get a
text file with a reference to a full filesystem path, or a proper symbolic
link, depending on the value of the <code>core.symlinks</code> config.</p>
<p><strong>Either way, the content of the path referenced by the symlink is not stored
in the repository (unless the referenced path is <em>also</em> in the repository, of
course).</strong></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/looping-through-the-content-of-a-file-in-bash/" class="u-url">Looping through the content of a file in Bash</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/looping-through-the-content-of-a-file-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:20:46+08:00" itemprop="datePublished" title="2023-02-16 23:20">2023-02-16 23:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I iterate through each line of a text file with Bash?</p>
<p>With this script:</p>
<div class="code"><pre class="code literal-block">echo<span class="w"> </span>"Start!"
for<span class="w"> </span>p<span class="w"> </span>in<span class="w"> </span>(peptides.txt)
do
<span class="w">    </span>echo<span class="w"> </span>"<span class="cp">${</span><span class="n">p</span><span class="cp">}</span>"
done
</pre></div>

<p>I get this output on the screen:</p>
<div class="code"><pre class="code literal-block"><span class="nv">Start</span><span class="o">!</span>
.<span class="o">/</span><span class="nv">runPep</span>.<span class="nv">sh</span>:<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">3</span>:<span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">near</span><span class="w"> </span><span class="nv">unexpected</span><span class="w"> </span><span class="nv">token</span><span class="w"> </span>`<span class="ss">(</span><span class="err">'</span>
.<span class="o">/</span><span class="nv">runPep</span>.<span class="nv">sh</span>:<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">3</span>:<span class="w"> </span>`<span class="k">for</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="ss">(</span><span class="nv">peptides</span>.<span class="nv">txt</span><span class="ss">)</span><span class="err">'</span>
</pre></div>

<p>(Later I want to do something more complicated with <code>$p</code> than just output to
the screen.)</p>
<hr>
<p>The environment variable <strong>SHELL</strong> is (from env):</p>
<div class="code"><pre class="code literal-block">SHELL=/bin/bash
</pre></div>

<p><code>/bin/bash --version</code> output:</p>
<div class="code"><pre class="code literal-block">GNU bash, version 3.1.17(1)-release (x86_64-suse-linux-gnu)
Copyright (C) 2005 Free Software Foundation, Inc.
</pre></div>

<p><code>cat /proc/version</code> output:</p>
<div class="code"><pre class="code literal-block"><span class="n">Linux</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">2.6.18.2</span><span class="o">-</span><span class="mi">34</span><span class="o">-</span><span class="k">default</span><span class="w"> </span><span class="p">(</span><span class="n">geeko</span><span class="nv">@buildhost</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">gcc</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">4.1.2</span><span class="w"> </span><span class="mi">20061115</span><span class="w"> </span><span class="p">(</span><span class="n">prerelease</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">SUSE</span><span class="w"> </span><span class="n">Linux</span><span class="p">))</span><span class="w"> </span><span class="n">#1</span><span class="w"> </span><span class="n">SMP</span><span class="w"> </span><span class="n">Mon</span><span class="w"> </span><span class="n">Nov</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="mi">11</span><span class="err">:</span><span class="mi">46</span><span class="err">:</span><span class="mi">27</span><span class="w"> </span><span class="n">UTC</span><span class="w"> </span><span class="mi">2006</span>
</pre></div>

<p>The file peptides.txt contains:</p>
<div class="code"><pre class="code literal-block">RKEKNVQ
IPKKLLQK
QYFHQLEKMNVK
IPKKLLQK
GDLSTALEVAIDCYEK
QYFHQLEKMNVKIPENIYR
RKEKNVQ
VLAKHGKLQDAIN
ILGFMK
LEDVALQILL
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>One way to do it is:</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="nv">p</span><span class="c1">; do</span>
<span class="w">  </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"$p"</span>
<span class="nv">done</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">peptides</span>.<span class="nv">txt</span>
</pre></div>

<p>As pointed out in the comments, this has the side effects of trimming leading
whitespace, interpreting backslash sequences, and skipping the last line if
it's missing a terminating linefeed. If these are concerns, you can do:</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span><span class="w"> </span><span class="nv">IFS</span><span class="o">=</span><span class="s2">""</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="o">-</span><span class="nv">r</span><span class="w"> </span><span class="nv">p</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">n</span><span class="w"> </span><span class="s2">"$p"</span><span class="w"> </span>]
<span class="k">do</span>
<span class="w">  </span><span class="nv">printf</span><span class="w"> </span><span class="s1">'%s\n'</span><span class="w"> </span><span class="s2">"$p"</span>
<span class="nv">done</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">peptides</span>.<span class="nv">txt</span>
</pre></div>

<hr>
<p>Exceptionally, if the loop body may read from standard input, you can open the
file using a different file descriptor:</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="o">-</span><span class="nv">u</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="nv">p</span><span class="c1">; do</span>
<span class="w">  </span>...
<span class="nv">done</span><span class="w"> </span><span class="mi">10</span><span class="o">&lt;</span><span class="nv">peptides</span>.<span class="nv">txt</span>
</pre></div>

<p>Here, 10 is just an arbitrary number (different from 0, 1, 2).</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="nv">cat</span><span class="w"> </span><span class="nv">peptides</span>.<span class="nv">txt</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span>
<span class="k">do</span>
<span class="w">   </span>#<span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span>$<span class="nv">line</span><span class="w"> </span><span class="nv">here</span>
<span class="nv">done</span>
</pre></div>

<p>and the one-liner variant:</p>
<div class="code"><pre class="code literal-block"><span class="nv">cat</span><span class="w"> </span><span class="nv">peptides</span>.<span class="nv">txt</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="nv">line</span><span class="c1">; do something_with_$line_here; done</span>
</pre></div>

<p>These options will skip the last line of the file if there is no trailing line
feed.</p>
<p>You can avoid this by the following:</p>
<div class="code"><pre class="code literal-block"><span class="nv">cat</span><span class="w"> </span><span class="nv">peptides</span>.<span class="nv">txt</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>[[<span class="w"> </span><span class="o">-</span><span class="nv">n</span><span class="w"> </span>$<span class="nv">line</span><span class="w"> </span>]]<span class="c1">;</span>
<span class="k">do</span>
<span class="w">   </span>#<span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span>$<span class="nv">line</span><span class="w"> </span><span class="nv">here</span>
<span class="nv">done</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-160.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-158.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
