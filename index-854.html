<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 854) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-854.html">
<link rel="prev" href="index-855.html" type="text/html">
<link rel="next" href="index-853.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/which-method-performs-better-any-vs-count-0/" class="u-url">Which method performs better: .Any() vs .Count() &gt; 0?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/which-method-performs-better-any-vs-count-0/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:45:27+08:00" itemprop="datePublished" title="2023-02-17 17:45">2023-02-17 17:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>in the <code>System.Linq</code> namespace, we can now extend our IEnumerable's to have
the Any() and Count() <em>extension methods</em>.</p>
<p>I was told recently that if i want to check that a collection contains 1 or
more items inside it, I should use the <code>.Any()</code> extension method instead of
the <code>.Count() &gt; 0</code> extension method because the <code>.Count()</code> extension method
has to iterate through all the items.</p>
<p>Secondly, some collections have a <em>property</em> (not an extension method) that is
<code>Count</code> or <code>Length</code>. Would it be better to use those, instead of <code>.Any()</code> or
<code>.Count()</code>?</p>
<p>yea / nae?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you are starting with something that has a <code>.Length</code> or <code>.Count</code> (such as
<code>ICollection&lt;T&gt;</code>, <code>IList&lt;T&gt;</code>, <code>List&lt;T&gt;</code>, etc) - then this will be the fastest
option, since it doesn't need to go through the
<code>GetEnumerator()</code>/<code>MoveNext()</code>/<code>Dispose()</code> sequence required by <code>Any()</code> to
check for a non-empty <code>IEnumerable&lt;T&gt;</code> sequence.</p>
<p>For just <code>IEnumerable&lt;T&gt;</code>, then <code>Any()</code> will <em>generally</em> be quicker, as it
only has to look at one iteration. However, note that the LINQ-to-Objects
implementation of <code>Count()</code> does check for <code>ICollection&lt;T&gt;</code> (using <code>.Count</code> as
an optimisation) - so if your underlying data-source is <strong>directly</strong> a
list/collection, there won't be a huge difference. Don't ask me why it doesn't
use the non-generic <code>ICollection</code>...</p>
<p>Of course, if you have used LINQ to filter it etc (<code>Where</code> etc), you will have
an iterator-block based sequence, and so this <code>ICollection&lt;T&gt;</code> optimisation is
useless.</p>
<p>In general with <code>IEnumerable&lt;T&gt;</code> : stick with <code>Any()</code> ;-p</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Note:</strong> I wrote this answer when Entity Framework 4 was actual. The point of
this answer was not to get into trivial <code>.Any()</code> vs <code>.Count()</code> performance
testing. The point was to signal that EF is far from perfect. Newer versions
are better... but if you have part of code that's slow and it uses EF, test
with direct TSQL and compare performance rather than relying on assumptions
(that <code>.Any()</code> is ALWAYS faster than <code>.Count() &gt; 0</code>).</p>
<hr>
<p>While I agree with most up-voted answer and comments - especially on the point
<code>Any</code> signals <em>developer intent</em> better than <code>Count() &gt; 0</code> - I've had
situation in which Count is faster by order of magnitude on SQL Server
(EntityFramework 4).</p>
<p>Here is query with <code>Any</code> that thew timeout exception (on ~200.000 records):</p>
<div class="code"><pre class="code literal-block">con = db.Contacts.
    Where(a =&gt; a.CompanyId == companyId &amp;&amp; a.ContactStatusId &lt;= (int) Const.ContactStatusEnum.Reactivated
        &amp;&amp; !a.NewsletterLogs.Any(b =&gt; b.NewsletterLogTypeId == (int) Const.NewsletterLogTypeEnum.Unsubscr)
    ).OrderBy(a =&gt; a.ContactId).
    Skip(position - 1).
    Take(1).FirstOrDefault();
</pre></div>

<p><code>Count</code> version executed in matter of milliseconds:</p>
<div class="code"><pre class="code literal-block">con = db.Contacts.
    Where(a =&gt; a.CompanyId == companyId &amp;&amp; a.ContactStatusId &lt;= (int) Const.ContactStatusEnum.Reactivated
        &amp;&amp; a.NewsletterLogs.Count(b =&gt; b.NewsletterLogTypeId == (int) Const.NewsletterLogTypeEnum.Unsubscr) == 0
    ).OrderBy(a =&gt; a.ContactId).
    Skip(position - 1).
    Take(1).FirstOrDefault();
</pre></div>

<p>I need to find a way to see what exact SQL both LINQs produce - but it's
obvious there is a huge performance difference between <code>Count</code> and <code>Any</code> in
some cases, and unfortunately it seems you can't just stick with <code>Any</code> in all
cases.</p>
<p>EDIT: Here are generated SQLs. Beauties as you can see ;)</p>
<p><code>ANY</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">exec</span><span class="w"> </span><span class="n">sp_executesql</span><span class="w"> </span><span class="n">N</span><span class="s1">'SELECT TOP (1) </span>
<span class="s1">[Project2].[ContactId] AS [ContactId], </span>
<span class="s1">[Project2].[CompanyId] AS [CompanyId], </span>
<span class="s1">[Project2].[ContactName] AS [ContactName], </span>
<span class="s1">[Project2].[FullName] AS [FullName], </span>
<span class="s1">[Project2].[ContactStatusId] AS [ContactStatusId], </span>
<span class="s1">[Project2].[Created] AS [Created]</span>
<span class="s1">FROM ( SELECT [Project2].[ContactId] AS [ContactId], [Project2].[CompanyId] AS [CompanyId], [Project2].[ContactName] AS [ContactName], [Project2].[FullName] AS [FullName], [Project2].[ContactStatusId] AS [ContactStatusId], [Project2].[Created] AS [Created], row_number() OVER (ORDER BY [Project2].[ContactId] ASC) AS [row_number]</span>
<span class="s1">    FROM ( SELECT </span>
<span class="s1">        [Extent1].[ContactId] AS [ContactId], </span>
<span class="s1">        [Extent1].[CompanyId] AS [CompanyId], </span>
<span class="s1">        [Extent1].[ContactName] AS [ContactName], </span>
<span class="s1">        [Extent1].[FullName] AS [FullName], </span>
<span class="s1">        [Extent1].[ContactStatusId] AS [ContactStatusId], </span>
<span class="s1">        [Extent1].[Created] AS [Created]</span>
<span class="s1">        FROM [dbo].[Contact] AS [Extent1]</span>
<span class="s1">        WHERE ([Extent1].[CompanyId] = @p__linq__0) AND ([Extent1].[ContactStatusId] &lt;= 3) AND ( NOT EXISTS (SELECT </span>
<span class="s1">            1 AS [C1]</span>
<span class="s1">            FROM [dbo].[NewsletterLog] AS [Extent2]</span>
<span class="s1">            WHERE ([Extent1].[ContactId] = [Extent2].[ContactId]) AND (6 = [Extent2].[NewsletterLogTypeId])</span>
<span class="s1">        ))</span>
<span class="s1">    )  AS [Project2]</span>
<span class="s1">)  AS [Project2]</span>
<span class="s1">WHERE [Project2].[row_number] &gt; 99</span>
<span class="s1">ORDER BY [Project2].[ContactId] ASC'</span><span class="p">,</span><span class="n">N</span><span class="s1">'@p__linq__0 int'</span><span class="p">,</span><span class="nv">@p__linq__0</span><span class="o">=</span><span class="mi">4</span>
</pre></div>

<p><code>COUNT</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">exec</span><span class="w"> </span><span class="n">sp_executesql</span><span class="w"> </span><span class="n">N</span><span class="s1">'SELECT TOP (1) </span>
<span class="s1">[Project2].[ContactId] AS [ContactId], </span>
<span class="s1">[Project2].[CompanyId] AS [CompanyId], </span>
<span class="s1">[Project2].[ContactName] AS [ContactName], </span>
<span class="s1">[Project2].[FullName] AS [FullName], </span>
<span class="s1">[Project2].[ContactStatusId] AS [ContactStatusId], </span>
<span class="s1">[Project2].[Created] AS [Created]</span>
<span class="s1">FROM ( SELECT [Project2].[ContactId] AS [ContactId], [Project2].[CompanyId] AS [CompanyId], [Project2].[ContactName] AS [ContactName], [Project2].[FullName] AS [FullName], [Project2].[ContactStatusId] AS [ContactStatusId], [Project2].[Created] AS [Created], row_number() OVER (ORDER BY [Project2].[ContactId] ASC) AS [row_number]</span>
<span class="s1">    FROM ( SELECT </span>
<span class="s1">        [Project1].[ContactId] AS [ContactId], </span>
<span class="s1">        [Project1].[CompanyId] AS [CompanyId], </span>
<span class="s1">        [Project1].[ContactName] AS [ContactName], </span>
<span class="s1">        [Project1].[FullName] AS [FullName], </span>
<span class="s1">        [Project1].[ContactStatusId] AS [ContactStatusId], </span>
<span class="s1">        [Project1].[Created] AS [Created]</span>
<span class="s1">        FROM ( SELECT </span>
<span class="s1">            [Extent1].[ContactId] AS [ContactId], </span>
<span class="s1">            [Extent1].[CompanyId] AS [CompanyId], </span>
<span class="s1">            [Extent1].[ContactName] AS [ContactName], </span>
<span class="s1">            [Extent1].[FullName] AS [FullName], </span>
<span class="s1">            [Extent1].[ContactStatusId] AS [ContactStatusId], </span>
<span class="s1">            [Extent1].[Created] AS [Created], </span>
<span class="s1">            (SELECT </span>
<span class="s1">                COUNT(1) AS [A1]</span>
<span class="s1">                FROM [dbo].[NewsletterLog] AS [Extent2]</span>
<span class="s1">                WHERE ([Extent1].[ContactId] = [Extent2].[ContactId]) AND (6 = [Extent2].[NewsletterLogTypeId])) AS [C1]</span>
<span class="s1">            FROM [dbo].[Contact] AS [Extent1]</span>
<span class="s1">        )  AS [Project1]</span>
<span class="s1">        WHERE ([Project1].[CompanyId] = @p__linq__0) AND ([Project1].[ContactStatusId] &lt;= 3) AND (0 = [Project1].[C1])</span>
<span class="s1">    )  AS [Project2]</span>
<span class="s1">)  AS [Project2]</span>
<span class="s1">WHERE [Project2].[row_number] &gt; 99</span>
<span class="s1">ORDER BY [Project2].[ContactId] ASC'</span><span class="p">,</span><span class="n">N</span><span class="s1">'@p__linq__0 int'</span><span class="p">,</span><span class="nv">@p__linq__0</span><span class="o">=</span><span class="mi">4</span>
</pre></div>

<p>Seems that pure Where with EXISTS works much worse than calculating Count and
then doing Where with Count == 0.</p>
<p>Let me know if you guys see some error in my findings. What can be taken out
of all this regardless of Any vs Count discussion is that any more complex
LINQ is way better off when rewritten as Stored Procedure ;).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-app/" class="u-url">Sending Email in Android using JavaMail API without using the default/built-in app</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-app/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:44:58+08:00" itemprop="datePublished" title="2023-02-17 17:44">2023-02-17 17:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to create a mail sending application in Android.</p>
<p>If I use:</p>
<div class="code"><pre class="code literal-block"><span class="n">Intent</span> <span class="n">emailIntent</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Intent</span><span class="p">(</span><span class="n">android</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">Intent</span><span class="p">.</span><span class="n">ACTION_SEND</span><span class="p">);</span>
</pre></div>

<p>This will launch the built-in Android application; I'm trying to send the mail
on button click directly <strong>without</strong> using this application.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Send e-mail in Android using the JavaMail API using Gmail authentication.</p>
<h4>Steps to create a sample Project:</h4>
<p><strong>MailSenderActivity.java:</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MailSenderActivity</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Activity</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span><span class="w"> </span><span class="n">savedInstanceState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<span class="w">        </span><span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">main</span><span class="p">);</span>

<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Button</span><span class="p">)</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">send</span><span class="p">);</span>
<span class="w">        </span><span class="n">send</span><span class="o">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">View</span><span class="o">.</span><span class="n">OnClickListener</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">View</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">                    </span><span class="n">GMailSender</span><span class="w"> </span><span class="n">sender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">GMailSender</span><span class="p">(</span><span class="s2">"username@gmail.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"password"</span><span class="p">);</span>
<span class="w">                    </span><span class="n">sender</span><span class="o">.</span><span class="n">sendMail</span><span class="p">(</span><span class="s2">"This is Subject"</span><span class="p">,</span><span class="w">   </span>
<span class="w">                            </span><span class="s2">"This is Body"</span><span class="p">,</span><span class="w">   </span>
<span class="w">                            </span><span class="s2">"user@gmail.com"</span><span class="p">,</span><span class="w">   </span>
<span class="w">                            </span><span class="s2">"user@yahoo.com"</span><span class="p">);</span><span class="w">   </span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">                    </span><span class="n">Log</span><span class="o">.</span><span class="n">e</span><span class="p">(</span><span class="s2">"SendMail"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">getMessage</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">);</span><span class="w">   </span>
<span class="w">                </span><span class="p">}</span>

<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>GMailSender.java:</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">GMailSender</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">javax</span><span class="o">.</span><span class="n">mail</span><span class="o">.</span><span class="n">Authenticator</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">mailhost</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"smtp.gmail.com"</span><span class="p">;</span><span class="w">   </span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">user</span><span class="p">;</span><span class="w">   </span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">password</span><span class="p">;</span><span class="w">   </span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">Session</span><span class="w"> </span><span class="n">session</span><span class="p">;</span>

<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">        </span><span class="n">Security</span><span class="o">.</span><span class="n">addProvider</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">com</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">JSSEProvider</span><span class="p">());</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">GMailSender</span><span class="p">(</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">password</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">;</span><span class="w">   </span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>

<span class="w">        </span><span class="n">Properties</span><span class="w"> </span><span class="n">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s2">"mail.transport.protocol"</span><span class="p">,</span><span class="w"> </span><span class="s2">"smtp"</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s2">"mail.host"</span><span class="p">,</span><span class="w"> </span><span class="n">mailhost</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">"mail.smtp.auth"</span><span class="p">,</span><span class="w"> </span><span class="s2">"true"</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">"mail.smtp.port"</span><span class="p">,</span><span class="w"> </span><span class="s2">"465"</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">"mail.smtp.socketFactory.port"</span><span class="p">,</span><span class="w"> </span><span class="s2">"465"</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">"mail.smtp.socketFactory.class"</span><span class="p">,</span><span class="w">   </span>
<span class="w">                </span><span class="s2">"javax.net.ssl.SSLSocketFactory"</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">"mail.smtp.socketFactory.fallback"</span><span class="p">,</span><span class="w"> </span><span class="s2">"false"</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">props</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s2">"mail.smtp.quitwait"</span><span class="p">,</span><span class="w"> </span><span class="s2">"false"</span><span class="p">);</span>

<span class="w">        </span><span class="n">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Session</span><span class="o">.</span><span class="n">getDefaultInstance</span><span class="p">(</span><span class="n">props</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="p">);</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">protected</span><span class="w"> </span><span class="n">PasswordAuthentication</span><span class="w"> </span><span class="n">getPasswordAuthentication</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">PasswordAuthentication</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">);</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">synchronized</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">sendMail</span><span class="p">(</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">subject</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">recipients</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">        </span><span class="n">try</span><span class="p">{</span>
<span class="w">        </span><span class="n">MimeMessage</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">MimeMessage</span><span class="p">(</span><span class="n">session</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">DataHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">DataHandler</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">ByteArrayDataSource</span><span class="p">(</span><span class="n">body</span><span class="o">.</span><span class="n">getBytes</span><span class="p">(),</span><span class="w"> </span><span class="s2">"text/plain"</span><span class="p">));</span><span class="w">   </span>
<span class="w">        </span><span class="n">message</span><span class="o">.</span><span class="n">setSender</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">InternetAddress</span><span class="p">(</span><span class="n">sender</span><span class="p">));</span><span class="w">   </span>
<span class="w">        </span><span class="n">message</span><span class="o">.</span><span class="n">setSubject</span><span class="p">(</span><span class="n">subject</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="n">message</span><span class="o">.</span><span class="n">setDataHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">recipients</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s1">','</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">   </span>
<span class="w">            </span><span class="n">message</span><span class="o">.</span><span class="n">setRecipients</span><span class="p">(</span><span class="n">Message</span><span class="o">.</span><span class="n">RecipientType</span><span class="o">.</span><span class="n">TO</span><span class="p">,</span><span class="w"> </span><span class="n">InternetAddress</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">recipients</span><span class="p">));</span><span class="w">   </span>
<span class="w">        </span><span class="k">else</span><span class="w">  </span>
<span class="w">            </span><span class="n">message</span><span class="o">.</span><span class="n">setRecipient</span><span class="p">(</span><span class="n">Message</span><span class="o">.</span><span class="n">RecipientType</span><span class="o">.</span><span class="n">TO</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">InternetAddress</span><span class="p">(</span><span class="n">recipients</span><span class="p">));</span><span class="w">   </span>
<span class="w">        </span><span class="n">Transport</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span><span class="n">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>

<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">ByteArrayDataSource</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="n">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w">   </span>
<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="n">ByteArrayDataSource</span><span class="p">(</span><span class="n">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">            </span><span class="n">super</span><span class="p">();</span><span class="w">   </span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w">   </span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="n">ByteArrayDataSource</span><span class="p">(</span><span class="n">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">            </span><span class="n">super</span><span class="p">();</span><span class="w">   </span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">setType</span><span class="p">(</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">getContentType</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w">   </span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="s2">"application/octet-stream"</span><span class="p">;</span><span class="w">   </span>
<span class="w">            </span><span class="k">else</span><span class="w">  </span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="n">InputStream</span><span class="w"> </span><span class="n">getInputStream</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ByteArrayInputStream</span><span class="p">(</span><span class="n">data</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="s2">"ByteArrayDataSource"</span><span class="p">;</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">getOutputStream</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">            </span><span class="n">throw</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">IOException</span><span class="p">(</span><span class="s2">"Not Supported"</span><span class="p">);</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="p">}</span>
</pre></div>

<p><strong>JSSEProvider.java:</strong></p>
<div class="code"><pre class="code literal-block"><span class="o">/*</span>
 <span class="o">*</span>  <span class="n">Licensed</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Apache</span> <span class="n">Software</span> <span class="n">Foundation</span> <span class="p">(</span><span class="n">ASF</span><span class="p">)</span> <span class="n">under</span> <span class="n">one</span> <span class="ow">or</span> <span class="n">more</span>
 <span class="o">*</span>  <span class="n">contributor</span> <span class="n">license</span> <span class="n">agreements</span><span class="o">.</span>  <span class="n">See</span> <span class="n">the</span> <span class="n">NOTICE</span> <span class="n">file</span> <span class="n">distributed</span> <span class="k">with</span>
 <span class="o">*</span>  <span class="n">this</span> <span class="n">work</span> <span class="k">for</span> <span class="n">additional</span> <span class="n">information</span> <span class="n">regarding</span> <span class="n">copyright</span> <span class="n">ownership</span><span class="o">.</span>
 <span class="o">*</span>  <span class="n">The</span> <span class="n">ASF</span> <span class="n">licenses</span> <span class="n">this</span> <span class="n">file</span> <span class="n">to</span> <span class="n">You</span> <span class="n">under</span> <span class="n">the</span> <span class="n">Apache</span> <span class="n">License</span><span class="p">,</span> <span class="n">Version</span> <span class="mf">2.0</span>
 <span class="o">*</span>  <span class="p">(</span><span class="n">the</span> <span class="s2">"License"</span><span class="p">);</span> <span class="n">you</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">use</span> <span class="n">this</span> <span class="n">file</span> <span class="k">except</span> <span class="ow">in</span> <span class="n">compliance</span> <span class="k">with</span>
 <span class="o">*</span>  <span class="n">the</span> <span class="n">License</span><span class="o">.</span>  <span class="n">You</span> <span class="n">may</span> <span class="n">obtain</span> <span class="n">a</span> <span class="n">copy</span> <span class="n">of</span> <span class="n">the</span> <span class="n">License</span> <span class="n">at</span>
 <span class="o">*</span>
 <span class="o">*</span>     <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">licenses</span><span class="o">/</span><span class="n">LICENSE</span><span class="o">-</span><span class="mf">2.0</span>
 <span class="o">*</span>
 <span class="o">*</span>  <span class="n">Unless</span> <span class="n">required</span> <span class="n">by</span> <span class="n">applicable</span> <span class="n">law</span> <span class="ow">or</span> <span class="n">agreed</span> <span class="n">to</span> <span class="ow">in</span> <span class="n">writing</span><span class="p">,</span> <span class="n">software</span>
 <span class="o">*</span>  <span class="n">distributed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">License</span> <span class="ow">is</span> <span class="n">distributed</span> <span class="n">on</span> <span class="n">an</span> <span class="s2">"AS IS"</span> <span class="n">BASIS</span><span class="p">,</span>
 <span class="o">*</span>  <span class="n">WITHOUT</span> <span class="n">WARRANTIES</span> <span class="n">OR</span> <span class="n">CONDITIONS</span> <span class="n">OF</span> <span class="n">ANY</span> <span class="n">KIND</span><span class="p">,</span> <span class="n">either</span> <span class="n">express</span> <span class="ow">or</span> <span class="n">implied</span><span class="o">.</span>
 <span class="o">*</span>  <span class="n">See</span> <span class="n">the</span> <span class="n">License</span> <span class="k">for</span> <span class="n">the</span> <span class="n">specific</span> <span class="n">language</span> <span class="n">governing</span> <span class="n">permissions</span> <span class="ow">and</span>
 <span class="o">*</span>  <span class="n">limitations</span> <span class="n">under</span> <span class="n">the</span> <span class="n">License</span><span class="o">.</span>
 <span class="o">*/</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="nd">@author</span> <span class="n">Alexander</span> <span class="n">Y</span><span class="o">.</span> <span class="n">Kleymenov</span>
 <span class="o">*</span> <span class="nd">@version</span> <span class="err">$</span><span class="n">Revision</span><span class="err">$</span>
 <span class="o">*/</span>


<span class="kn">import</span> <span class="nn">java.security.AccessController</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.security.Provider</span><span class="p">;</span>

<span class="n">public</span> <span class="n">final</span> <span class="k">class</span> <span class="nc">JSSEProvider</span> <span class="n">extends</span> <span class="n">Provider</span> <span class="p">{</span>

    <span class="n">public</span> <span class="n">JSSEProvider</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="p">(</span><span class="s2">"HarmonyJSSE"</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">"Harmony JSSE Provider"</span><span class="p">);</span>
        <span class="n">AccessController</span><span class="o">.</span><span class="n">doPrivileged</span><span class="p">(</span><span class="n">new</span> <span class="n">java</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">PrivilegedAction</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">public</span> <span class="n">Void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
                <span class="n">put</span><span class="p">(</span><span class="s2">"SSLContext.TLS"</span><span class="p">,</span>
                        <span class="s2">"org.apache.harmony.xnet.provider.jsse.SSLContextImpl"</span><span class="p">);</span>
                <span class="n">put</span><span class="p">(</span><span class="s2">"Alg.Alias.SSLContext.TLSv1"</span><span class="p">,</span> <span class="s2">"TLS"</span><span class="p">);</span>
                <span class="n">put</span><span class="p">(</span><span class="s2">"KeyManagerFactory.X509"</span><span class="p">,</span>
                        <span class="s2">"org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl"</span><span class="p">);</span>
                <span class="n">put</span><span class="p">(</span><span class="s2">"TrustManagerFactory.X509"</span><span class="p">,</span>
                        <span class="s2">"org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl"</span><span class="p">);</span>
                <span class="k">return</span> <span class="n">null</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>ADD 3 jars found in the following link to your Android Project</p>
<ul>
<li>mail.jar</li>
<li>activation.jar</li>
<li>additional.jar</li>
</ul>
<p>Click here - How to add External Jars</p>
<p>And don't forget to add this line in your manifest:</p>
<div class="code"><pre class="code literal-block">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;
</pre></div>

<p><strong>Just click below link to change account access for less secure apps</strong>
https://www.google.com/settings/security/lesssecureapps</p>
<p>Run the project and check your recipient mail account for the mail.</p>
<p>P.S. And don't forget that you cannot do network operation from any Activity
in android. Hence it is recommended to use <code>AsyncTask</code> or <code>IntentService</code> to
avoid network on main thread exception.</p>
<p>Jar files: https://code.google.com/archive/p/javamail-android/</p>
<p><br></p>
<h3>Suggest</h3>
<p>Thank you for your valuable information. Code is working fine. I am able to
add attachment also by adding following code.</p>
<div class="code"><pre class="code literal-block">private Multipart _multipart; 
_multipart = new MimeMultipart();

public void addAttachment(String filename,String subject) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 
    _multipart.addBodyPart(messageBodyPart);

    BodyPart messageBodyPart2 = new MimeBodyPart(); 
    messageBodyPart2.setText(subject);

    _multipart.addBodyPart(messageBodyPart2); 
}



message.setContent(_multipart);
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-specific-characters-from-a-string-in-python/" class="u-url">Remove specific characters from a string in Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-specific-characters-from-a-string-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:44:30+08:00" itemprop="datePublished" title="2023-02-17 17:44">2023-02-17 17:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to remove specific characters from a string using Python. This is
the code I'm using right now. Unfortunately it appears to do nothing to the
string.</p>
<div class="code"><pre class="code literal-block"><span class="nt">for</span><span class="w"> </span><span class="nt">char</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">line</span><span class="o">:</span>
<span class="w">    </span><span class="nt">if</span><span class="w"> </span><span class="nt">char</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="s2">" ?.!/;:"</span><span class="o">:</span>
<span class="w">        </span><span class="nt">line</span><span class="p">.</span><span class="nc">replace</span><span class="o">(</span><span class="nt">char</span><span class="o">,</span><span class="s1">''</span><span class="o">)</span>
</pre></div>

<p>How do I do this properly?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Strings in Python are <em>immutable</em> (can't be changed). Because of this, the
effect of <code>line.replace(...)</code> is just to create a new string, rather than
changing the old one. You need to <em>rebind</em> (assign) it to <code>line</code> in order to
have that variable take the new value, with those characters removed.</p>
<p>Also, the way you are doing it is going to be kind of slow, relatively. It's
also likely to be a bit confusing to experienced pythonators, who will see a
doubly-nested structure and think for a moment that something more complicated
is going on.</p>
<p>Starting in Python 2.6 and newer Python 2.x versions <em>, you can instead use
<code>str.translate</code>, ( _see </em><em>Python 3 answer</em>* below_):</p>
<div class="code"><pre class="code literal-block">line = line.translate(None, '!@#$')
</pre></div>

<p>or regular expression replacement with <code>re.sub</code></p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">re</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">'[!@#$]'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
</pre></div>

<p>The characters enclosed in brackets constitute a <em>character class</em>. Any
characters in <code>line</code> which are in that class are replaced with the second
parameter to <code>sub</code>: an empty string.</p>
<h4>Python 3 answer</h4>
<p>In Python 3, strings are Unicode. You'll have to translate a little
differently. kevpie mentions this in a comment on one of the answers, and it's
noted in the documentation for <code>str.translate</code>.</p>
<p>When calling the <code>translate</code> method of a Unicode string, you cannot pass the
second parameter that we used above. You also can't pass <code>None</code> as the first
parameter. Instead, you pass a translation table (usually a dictionary) as the
only parameter. This table maps the <em>ordinal values</em> of characters (i.e. the
result of calling <code>ord</code> on them) to the ordinal values of the characters which
should replace them, or—usefully to us—<code>None</code> to indicate that they should be
deleted.</p>
<p>So to do the above dance with a Unicode string you would call something like</p>
<div class="code"><pre class="code literal-block">translation_table = dict.fromkeys(map(ord, '!@#$'), None)
unicode_line = unicode_line.translate(translation_table)
</pre></div>

<p>Here <code>dict.fromkeys</code> and <code>map</code> are used to succinctly generate a dictionary
containing</p>
<div class="code"><pre class="code literal-block">{ord('!'): None, ord('@'): None, ...}
</pre></div>

<p>Even simpler, as another answer puts it, create the translation table in
place:</p>
<div class="code"><pre class="code literal-block"><span class="nv">unicode_line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">unicode_line</span>.<span class="nv">translate</span><span class="ss">(</span>{<span class="nv">ord</span><span class="ss">(</span><span class="nv">c</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">None</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="s1">'!@#$'</span>}<span class="ss">)</span>
</pre></div>

<p>Or, as brought up by Joseph Lee, create the same translation table with
<code>str.maketrans</code>:</p>
<div class="code"><pre class="code literal-block">unicode_line = unicode_line.translate(str.maketrans('', '', '!@#$'))
</pre></div>

<hr>
<ul>
<li>
<p>for compatibility with earlier Pythons, you can create a "null" translation table to pass in place of <code>None</code>:</p>
<p>import string
line = line.translate(string.maketrans('', ''), '!@#$')</p>
</li>
</ul>
<p>Here <code>string.maketrans</code> is used to create a <em>translation table</em> , which is
just a string containing the characters with ordinal values 0 to 255.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Am I missing the point here, or is it just the following:</p>
<div class="code"><pre class="code literal-block">string = "ab1cd1ef"
string = string.replace("1", "")

print(string)
# result: "abcdef"
</pre></div>

<p>Put it in a loop:</p>
<div class="code"><pre class="code literal-block"><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"a!b@.net-c#d$"</span>
<span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"!@#$"</span>
<span class="k">for</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">b</span>:
<span class="w">    </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">a</span>.<span class="nv">replace</span><span class="ss">(</span><span class="nv">char</span>,<span class="w"> </span><span class="s2">""</span><span class="ss">)</span>

<span class="nv">print</span><span class="ss">(</span><span class="nv">a</span><span class="ss">)</span>
#<span class="w"> </span><span class="nb">result</span>:<span class="w"> </span><span class="s2">"abcd"</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-855.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-853.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
