<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1021) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1021.html">
<link rel="prev" href="index-1022.html" type="text/html">
<link rel="next" href="index-1020.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- Ê®°ÊÄÅÊ°ÜÔºàModalÔºâ --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">√ó
				</button>
				<h4 class="modal-title" id="myModalLabel">
					Êü•ÊâæÁªìÊûú
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				Êü•Êâæ‰∏≠ÔºåËØ∑Á®çÂêé...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					ÂÖ≥Èó≠
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-use-cp-command-to-exclude-a-specific-directory/" class="u-url">How to use 'cp' command to exclude a specific directory?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-use-cp-command-to-exclude-a-specific-directory/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:45:32+08:00" itemprop="datePublished" title="2023-02-17 22:45">2023-02-17 22:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to copy all files in a directory except some files in a specific sub-
directory. I have noticed that <code>cp</code> command didn't have the <code>--exclude</code>
option. So, how can I achieve this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>rsync</code> is fast and easy:</p>
<div class="code"><pre class="code literal-block">rsync -av --progress sourcefolder /destinationfolder --exclude thefoldertoexclude
</pre></div>

<p>You can use <code>--exclude</code> multiples times.</p>
<div class="code"><pre class="code literal-block">rsync -av --progress sourcefolder /destinationfolder --exclude thefoldertoexclude --exclude anotherfoldertoexclude
</pre></div>

<p><strong>Note that the dir<code>thefoldertoexclude</code> after <code>--exclude</code> option is relative
to the <code>sourcefolder</code>, i.e., <code>sourcefolder/thefoldertoexclude</code>.</strong></p>
<p>Also you can add <code>-n</code> for dry run to see what will be copied before performing
real operation, and if everything is ok, remove <code>-n</code> from command line.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Well, if exclusion of certain filename patterns had to be performed by every
unix-ish file utility (like cp, mv, rm, tar, rsync, scp, ...), an immense
duplication of effort would occur. Instead, such things can be done as part of
globbing, i.e. by your shell.</p>
<h2>bash</h2>
<p><code>man 1 bash</code>, <code>/</code> <strong>extglob</strong>.</p>
<p>Example:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">shopt</span><span class="w"> </span>-s<span class="w"> </span>extglob
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>images/*
images/004.bmp<span class="w"> </span>images/033.jpg<span class="w"> </span>images/1276338351183.jpg<span class="w"> </span>images/2252.png
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>images/!<span class="o">(</span>*.jpg<span class="o">)</span>
images/004.bmp<span class="w"> </span>images/2252.png
</pre></div>

<p>So you just put a pattern inside <code>!()</code>, and it negates the match. The pattern
can be arbitrarily complex, starting from enumeration of individual paths (as
Vanwaril shows in another answer): <code>!(filename1|path2|etc3)</code>, to regex-like
things with stars and character classes. Refer to the manpage for details.</p>
<h2>zsh</h2>
<p><code>man 1 zshexpn</code>, <code>/</code> <strong>filename generation</strong>.</p>
<p>You can do <code>setopt KSH_GLOB</code> and use bash-like patterns. Or,</p>
<div class="code"><pre class="code literal-block"><span class="c">% setopt EXTENDED_GLOB</span>
<span class="c">% echo images/*</span>
<span class="n">images</span><span class="o">/</span><span class="mi">004</span><span class="p">.</span><span class="n">bmp</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">033</span><span class="p">.</span><span class="n">jpg</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">1276338351183</span><span class="p">.</span><span class="n">jpg</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">2252</span><span class="p">.</span><span class="n">png</span>
<span class="c">% echo images/*~*.jpg</span>
<span class="n">images</span><span class="o">/</span><span class="mi">004</span><span class="p">.</span><span class="n">bmp</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">2252</span><span class="p">.</span><span class="n">png</span>
</pre></div>

<p>So <strong><code>x~y</code></strong> matches pattern <strong><code>x</code></strong> , but excludes pattern <strong><code>y</code></strong>. Once
again, for full details refer to manpage.</p>
<hr>
<h2>fishnew!</h2>
<p>The fish shell has a much prettier answer to this:</p>
<div class="code"><pre class="code literal-block">üêü cp (string match -v '*.excluded.names' -- srcdir/*) destdir
</pre></div>

<hr>
<h4>Bonus pro-tip</h4>
<p>Type <code>cp *</code>, hit <code>Ctrl``X``*</code> and just see what happens. it's not harmful I
promise</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/markdown-to-create-pages-and-table-of-contents/" class="u-url">Markdown to create pages and table of contents?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/markdown-to-create-pages-and-table-of-contents/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:44:56+08:00" itemprop="datePublished" title="2023-02-17 22:44">2023-02-17 22:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I started to use markdown to take notes.</p>
<p>I use <strong>marked</strong> to view my markdown notes and its beautiful.</p>
<p>But as my notes get longer I find it difficult to find what I want.</p>
<p>I know markdown can create tables, but is it able to create table of contents,
that jumps to sections, or define page sections in markdown?</p>
<p>Alternatively, are there markdown readers/editors that could do such things.
Search would be good feature to have too.</p>
<p>In short, I want to make it my awesome note taking tool and functions much
like writing a book etc.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>MultiMarkdown Composer does seem to generate a table of contents to assist
while editing.</p>
<p>There might also be the one or the other library, who can generate TOCs: see
Python Markdown TOC Extension.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here's a useful method. Should produce clickable references in any MarkDown
editor.</p>
<div class="code"><pre class="code literal-block"><span class="cp"># Table of contents</span>
<span class="mf">1.</span><span class="w"> </span><span class="p">[</span><span class="n">Introduction</span><span class="p">](</span><span class="err">#</span><span class="n">introduction</span><span class="p">)</span>
<span class="mf">2.</span><span class="w"> </span><span class="p">[</span><span class="n">Some</span><span class="w"> </span><span class="n">paragraph</span><span class="p">](</span><span class="err">#</span><span class="n">paragraph1</span><span class="p">)</span>
<span class="w">    </span><span class="mf">1.</span><span class="w"> </span><span class="p">[</span><span class="n">Sub</span><span class="w"> </span><span class="n">paragraph</span><span class="p">](</span><span class="err">#</span><span class="n">subparagraph1</span><span class="p">)</span>
<span class="mf">3.</span><span class="w"> </span><span class="p">[</span><span class="n">Another</span><span class="w"> </span><span class="n">paragraph</span><span class="p">](</span><span class="err">#</span><span class="n">paragraph2</span><span class="p">)</span>

<span class="cp">## This is the introduction &lt;a name="introduction"&gt;&lt;/a&gt;</span>
<span class="n">Some</span><span class="w"> </span><span class="n">introduction</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">heading</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">style</span>

<span class="cp">## Some paragraph &lt;a name="paragraph1"&gt;&lt;/a&gt;</span>
<span class="n">The</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">paragraph</span><span class="w"> </span><span class="n">text</span>

<span class="cp">### Sub paragraph &lt;a name="subparagraph1"&gt;&lt;/a&gt;</span>
<span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="n">paragraph</span><span class="p">,</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">heading</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">style</span>

<span class="cp">## Another paragraph &lt;a name="paragraph2"&gt;&lt;/a&gt;</span>
<span class="n">The</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">paragraph</span><span class="w"> </span><span class="n">text</span>
</pre></div>

<p>Produces:</p>
<h2>Table of contents</h2>
<ol>
<li>Introduction</li>
<li>Some paragraph <ol>
<li>Sub paragraph</li>
</ol>
</li>
<li>Another paragraph</li>
</ol>
<h3>This is the introduction</h3>
<p>Some introduction text, formatted in heading 2 style</p>
<h3>Some paragraph</h3>
<p>The first paragraph text</p>
<h4>Sub paragraph</h4>
<p>This is a sub paragraph, formatted in heading 3 style</p>
<h3>Another paragraph</h3>
<p>The second paragraph text</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/python-pandas-error-tokenizing-data/" class="u-url">Python Pandas Error tokenizing data</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/python-pandas-error-tokenizing-data/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:44:11+08:00" itemprop="datePublished" title="2023-02-17 22:44">2023-02-17 22:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to use pandas to manipulate a .csv file but I get this error:</p>
<blockquote>
<p>pandas.parser.CParserError: Error tokenizing data. C error: Expected 2
fields in line 3, saw 12</p>
</blockquote>
<p>I have tried to read the pandas docs, but found nothing.</p>
<p>My code is simple:</p>
<div class="code"><pre class="code literal-block">path = 'GOOG Key Ratios.csv'
#print(open(path).read())
data = pd.read_csv(path)
</pre></div>

<p>How can I resolve this? Should I use the <code>csv</code> module or another language ?</p>
<p>File is from Morningstar</p>
<p><br><br></p>
<h2>Answer</h2>
<p>you could also try;</p>
<div class="code"><pre class="code literal-block">data = pd.read_csv('file1.csv', on_bad_lines='skip')
</pre></div>

<p>Do note that this will cause the offending lines to be skipped.</p>
<p><strong>Edit</strong></p>
<p>For Pandas &lt; 1.3.0 try</p>
<div class="code"><pre class="code literal-block">data = pd.read_csv("file1.csv", error_bad_lines=False)
</pre></div>

<p>as per pandas API reference.</p>
<p><br></p>
<h3>Suggest</h3>
<p>It might be an issue with</p>
<ul>
<li>the delimiters in your data</li>
<li>the first row, as @TomAugspurger noted</li>
</ul>
<p>To solve it, try specifying the <code>sep</code> and/or <code>header</code> arguments when calling
<code>read_csv</code>. For instance,</p>
<div class="code"><pre class="code literal-block">df = pandas.read_csv(filepath, sep='delimiter', header=None)
</pre></div>

<p>In the code above, <code>sep</code> defines your delimiter and <code>header=None</code> tells pandas
that your source data has no row for headers / column titles. Thus saith the
docs: "If file contains no header row, then you should explicitly pass
header=None". In this instance, pandas automatically creates whole-number
indices for each field {0,1,2,...}.</p>
<p>According to the docs, the delimiter thing should <em>not</em> be an issue. The docs
say that "if sep is None [not specified], will try to automatically determine
this." I however have not had good luck with this, including instances with
obvious delimiters.</p>
<p>Another solution may be to try auto detect the delimiter</p>
<div class="code"><pre class="code literal-block"><span class="err">#</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">detect</span><span class="w"> </span><span class="n">separator</span>
<span class="n">temp_lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">csv_file</span><span class="p">.</span><span class="n">readline</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'\n'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">csv_file</span><span class="p">.</span><span class="n">readline</span><span class="p">()</span>
<span class="n">dialect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">csv</span><span class="p">.</span><span class="n">Sniffer</span><span class="p">().</span><span class="n">sniff</span><span class="p">(</span><span class="n">temp_lines</span><span class="p">,</span><span class="w"> </span><span class="n">delimiters</span><span class="o">=</span><span class="s1">';,'</span><span class="p">)</span>

<span class="err">#</span><span class="w"> </span><span class="n">remember</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">go</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="nc">time</span><span class="w"> </span><span class="n">it</span><span class="err">'</span><span class="n">s</span><span class="w"> </span><span class="k">read</span>
<span class="n">csv_file</span><span class="p">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_file</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="n">dialect</span><span class="p">.</span><span class="n">delimiter</span><span class="p">)</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1022.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1020.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents ¬© 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
