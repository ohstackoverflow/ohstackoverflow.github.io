<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1021) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1021.html">
<link rel="prev" href="index-1022.html" type="text/html">
<link rel="next" href="index-1020.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-current-directory-in-a-batch-file/" class="u-url">What is the current directory in a batch file?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-current-directory-in-a-batch-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:46:06+08:00" itemprop="datePublished" title="2023-02-17 22:46">2023-02-17 22:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to create a few batch files to automate a program.</p>
<p>My question is when I create the batch file, what is the current directory? Is
it the directory where the file is located or is it the same directory that
appears in the command prompt, or something else?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From within your batch file:</p>
<ul>
<li>
<code>%cd%</code> refers to the current working directory (variable)</li>
<li>
<code>%~dp0</code> refers to the full path to the batch file's directory (static)</li>
<li>
<code>%~dpnx0</code> and <code>%~f0</code> both refer to the full path to the batch directory and file name (static).</li>
</ul>
<p>See also: What does %~dp0 mean, and how does it work?</p>
<p><br></p>
<h3>Suggest</h3>
<p>It <em>usually</em> is the directory from which the batch file is started, but if you
start the batch file from a shortcut, a different starting directory could be
given. Also, when you'r in cmd, and your current directory is <code>c:\dir3</code>, you
can still start the batch file using <code>c:\dir1\dir2\batch.bat</code> in which case,
the current directory will be <code>c:\dir3</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-use-cp-command-to-exclude-a-specific-directory/" class="u-url">How to use 'cp' command to exclude a specific directory?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-use-cp-command-to-exclude-a-specific-directory/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:45:32+08:00" itemprop="datePublished" title="2023-02-17 22:45">2023-02-17 22:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to copy all files in a directory except some files in a specific sub-
directory. I have noticed that <code>cp</code> command didn't have the <code>--exclude</code>
option. So, how can I achieve this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>rsync</code> is fast and easy:</p>
<div class="code"><pre class="code literal-block">rsync -av --progress sourcefolder /destinationfolder --exclude thefoldertoexclude
</pre></div>

<p>You can use <code>--exclude</code> multiples times.</p>
<div class="code"><pre class="code literal-block">rsync -av --progress sourcefolder /destinationfolder --exclude thefoldertoexclude --exclude anotherfoldertoexclude
</pre></div>

<p><strong>Note that the dir<code>thefoldertoexclude</code> after <code>--exclude</code> option is relative
to the <code>sourcefolder</code>, i.e., <code>sourcefolder/thefoldertoexclude</code>.</strong></p>
<p>Also you can add <code>-n</code> for dry run to see what will be copied before performing
real operation, and if everything is ok, remove <code>-n</code> from command line.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Well, if exclusion of certain filename patterns had to be performed by every
unix-ish file utility (like cp, mv, rm, tar, rsync, scp, ...), an immense
duplication of effort would occur. Instead, such things can be done as part of
globbing, i.e. by your shell.</p>
<h2>bash</h2>
<p><code>man 1 bash</code>, <code>/</code> <strong>extglob</strong>.</p>
<p>Example:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">shopt</span><span class="w"> </span>-s<span class="w"> </span>extglob
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>images/*
images/004.bmp<span class="w"> </span>images/033.jpg<span class="w"> </span>images/1276338351183.jpg<span class="w"> </span>images/2252.png
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>images/!<span class="o">(</span>*.jpg<span class="o">)</span>
images/004.bmp<span class="w"> </span>images/2252.png
</pre></div>

<p>So you just put a pattern inside <code>!()</code>, and it negates the match. The pattern
can be arbitrarily complex, starting from enumeration of individual paths (as
Vanwaril shows in another answer): <code>!(filename1|path2|etc3)</code>, to regex-like
things with stars and character classes. Refer to the manpage for details.</p>
<h2>zsh</h2>
<p><code>man 1 zshexpn</code>, <code>/</code> <strong>filename generation</strong>.</p>
<p>You can do <code>setopt KSH_GLOB</code> and use bash-like patterns. Or,</p>
<div class="code"><pre class="code literal-block"><span class="c">% setopt EXTENDED_GLOB</span>
<span class="c">% echo images/*</span>
<span class="n">images</span><span class="o">/</span><span class="mi">004</span><span class="p">.</span><span class="n">bmp</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">033</span><span class="p">.</span><span class="n">jpg</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">1276338351183</span><span class="p">.</span><span class="n">jpg</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">2252</span><span class="p">.</span><span class="n">png</span>
<span class="c">% echo images/*~*.jpg</span>
<span class="n">images</span><span class="o">/</span><span class="mi">004</span><span class="p">.</span><span class="n">bmp</span><span class="w"> </span><span class="n">images</span><span class="o">/</span><span class="mi">2252</span><span class="p">.</span><span class="n">png</span>
</pre></div>

<p>So <strong><code>x~y</code></strong> matches pattern <strong><code>x</code></strong> , but excludes pattern <strong><code>y</code></strong>. Once
again, for full details refer to manpage.</p>
<hr>
<h2>fishnew!</h2>
<p>The fish shell has a much prettier answer to this:</p>
<div class="code"><pre class="code literal-block">🐟 cp (string match -v '*.excluded.names' -- srcdir/*) destdir
</pre></div>

<hr>
<h4>Bonus pro-tip</h4>
<p>Type <code>cp *</code>, hit <code>Ctrl``X``*</code> and just see what happens. it's not harmful I
promise</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/markdown-to-create-pages-and-table-of-contents/" class="u-url">Markdown to create pages and table of contents?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/markdown-to-create-pages-and-table-of-contents/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:44:56+08:00" itemprop="datePublished" title="2023-02-17 22:44">2023-02-17 22:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I started to use markdown to take notes.</p>
<p>I use <strong>marked</strong> to view my markdown notes and its beautiful.</p>
<p>But as my notes get longer I find it difficult to find what I want.</p>
<p>I know markdown can create tables, but is it able to create table of contents,
that jumps to sections, or define page sections in markdown?</p>
<p>Alternatively, are there markdown readers/editors that could do such things.
Search would be good feature to have too.</p>
<p>In short, I want to make it my awesome note taking tool and functions much
like writing a book etc.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>MultiMarkdown Composer does seem to generate a table of contents to assist
while editing.</p>
<p>There might also be the one or the other library, who can generate TOCs: see
Python Markdown TOC Extension.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here's a useful method. Should produce clickable references in any MarkDown
editor.</p>
<div class="code"><pre class="code literal-block"><span class="cp"># Table of contents</span>
<span class="mf">1.</span><span class="w"> </span><span class="p">[</span><span class="n">Introduction</span><span class="p">](</span><span class="err">#</span><span class="n">introduction</span><span class="p">)</span>
<span class="mf">2.</span><span class="w"> </span><span class="p">[</span><span class="n">Some</span><span class="w"> </span><span class="n">paragraph</span><span class="p">](</span><span class="err">#</span><span class="n">paragraph1</span><span class="p">)</span>
<span class="w">    </span><span class="mf">1.</span><span class="w"> </span><span class="p">[</span><span class="n">Sub</span><span class="w"> </span><span class="n">paragraph</span><span class="p">](</span><span class="err">#</span><span class="n">subparagraph1</span><span class="p">)</span>
<span class="mf">3.</span><span class="w"> </span><span class="p">[</span><span class="n">Another</span><span class="w"> </span><span class="n">paragraph</span><span class="p">](</span><span class="err">#</span><span class="n">paragraph2</span><span class="p">)</span>

<span class="cp">## This is the introduction &lt;a name="introduction"&gt;&lt;/a&gt;</span>
<span class="n">Some</span><span class="w"> </span><span class="n">introduction</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">heading</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">style</span>

<span class="cp">## Some paragraph &lt;a name="paragraph1"&gt;&lt;/a&gt;</span>
<span class="n">The</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">paragraph</span><span class="w"> </span><span class="n">text</span>

<span class="cp">### Sub paragraph &lt;a name="subparagraph1"&gt;&lt;/a&gt;</span>
<span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="n">paragraph</span><span class="p">,</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">heading</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">style</span>

<span class="cp">## Another paragraph &lt;a name="paragraph2"&gt;&lt;/a&gt;</span>
<span class="n">The</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">paragraph</span><span class="w"> </span><span class="n">text</span>
</pre></div>

<p>Produces:</p>
<h2>Table of contents</h2>
<ol>
<li>Introduction</li>
<li>Some paragraph <ol>
<li>Sub paragraph</li>
</ol>
</li>
<li>Another paragraph</li>
</ol>
<h3>This is the introduction</h3>
<p>Some introduction text, formatted in heading 2 style</p>
<h3>Some paragraph</h3>
<p>The first paragraph text</p>
<h4>Sub paragraph</h4>
<p>This is a sub paragraph, formatted in heading 3 style</p>
<h3>Another paragraph</h3>
<p>The second paragraph text</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1022.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1020.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
