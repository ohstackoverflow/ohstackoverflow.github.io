<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 915) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-915.html">
<link rel="prev" href="index-916.html" type="text/html">
<link rel="next" href="index-914.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/using-wget-to-recursively-fetch-a-directory-with-arbitrary-files-in-it/" class="u-url">Using wget to recursively fetch a directory with arbitrary files in it</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/using-wget-to-recursively-fetch-a-directory-with-arbitrary-files-in-it/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:24:34+08:00" itemprop="datePublished" title="2023-02-17 19:24">2023-02-17 19:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a web directory where I store some config files. I'd like to use wget
to pull those files down and maintain their current structure. For instance,
the remote directory looks like:</p>
<div class="code"><pre class="code literal-block">http://mysite.com/configs/.vim/
</pre></div>

<p>.vim holds multiple files and directories. I want to replicate that on the
client using wget. Can't seem to find the right combo of wget flags to get
this done. Any ideas?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You have to pass the <code>-np</code>/<code>--no-parent</code> option to <code>wget</code> (in addition to
<code>-r</code>/<code>--recursive</code>, of course), otherwise it will follow the link in the
directory index on my site to the parent directory. So the command would look
like this:</p>
<div class="code"><pre class="code literal-block">wget --recursive --no-parent http://example.com/configs/.vim/
</pre></div>

<p>To avoid downloading the auto-generated <code>index.html</code> files, use the
<code>-R</code>/<code>--reject</code> option:</p>
<div class="code"><pre class="code literal-block">wget -r -np -R "index.html*" http://example.com/configs/.vim/
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>To download a directory recursively, which rejects index.html* files and
downloads without the hostname, parent directory and the whole directory
structure :</p>
<div class="code"><pre class="code literal-block">wget -r -nH --cut-dirs=2 --no-parent --reject="index.html*" http://mysite.com/dir1/dir2/data
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-clear-previous-output-in-terminal-in-mac-os-x/" class="u-url">How can I clear previous output in Terminal in Mac OS X?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-clear-previous-output-in-terminal-in-mac-os-x/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:24:03+08:00" itemprop="datePublished" title="2023-02-17 19:24">2023-02-17 19:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I know the <code>clear</code> command that 'clears' the current screen, but it does this
just by printing lots of newlines - the cleared contents just get scrolled up.</p>
<p>Is there a way to completely wipe all previous output from the terminal so
that I can't reach it even by scrolling up?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>To clear the terminal manually:</h4>
<p><code>⌘</code>+<code>K</code></p>
<p><code>Command</code>+<code>K</code> for newer keyboards</p>
<h4>To clear the terminal from within a shell script;</h4>
<div class="code"><pre class="code literal-block">/usr/bin/osascript -e 'tell application "System Events" to tell process "Terminal" to keystroke "k" using command down'
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h4>A better way to clear the screen from within a script...</h4>
<p>If you're using the OS X Terminal app (as stated by the OP), a better approach
(thanks to Chris Page's answer to <em>How do I reset the scrollback in the
terminal via a shell command?</em> ) is just this:</p>
<div class="code"><pre class="code literal-block">clear &amp;&amp; printf '\e[3J'
</pre></div>

<p>or more concisely (hat tip to user <em>qiuyi</em> ):</p>
<div class="code"><pre class="code literal-block">printf '\33c\e[3J'
</pre></div>

<p>which clears the scrollback buffer as well as the screen. There are other
options as well. See Chris Page's answer to <em>How do I reset the scrollback in
the terminal via a shell command?</em> for more information.</p>
<h4>Original answer</h4>
<p>The AppleScript answer given in this thread works, <em>but</em> it has the nasty side
effect of clearing <em>any</em> terminal window that happens to be active. This is
surprising if you're running the script in one window and trying to get work
done in another!</p>
<p>You avoid this by refining the AppleScript to only clear the screen if it is
frontmost by doing this (taken from MattiSG's answer to <em>How do I reset the
scrollback in the terminal via a shell command?</em> ):</p>
<div class="code"><pre class="code literal-block"><span class="nv">osascript</span><span class="w"> </span><span class="o">-</span><span class="nv">e</span><span class="w"> </span><span class="s1">'if application "Terminal" is frontmost then tell application "System Events" to keystroke "k" using command down'</span>
</pre></div>

<p>... but as when it's not the current window, the output will stack up until it
becomes current again, which probably isn't what you want.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/async-await-when-to-return-a-task-vs-void/" class="u-url">async/await - when to return a Task vs void?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/async-await-when-to-return-a-task-vs-void/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:23:20+08:00" itemprop="datePublished" title="2023-02-17 19:23">2023-02-17 19:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Under what scenarios would one want to use</p>
<div class="code"><pre class="code literal-block">public async Task AsyncMethod(int num)
</pre></div>

<p>instead of</p>
<div class="code"><pre class="code literal-block">public async void AsyncMethod(int num)
</pre></div>

<p>The only scenario that I can think of is if you need the task to be able to
track its progress.</p>
<p>Additionally, in the following method, are the async and await keywords
unnecessary?</p>
<div class="code"><pre class="code literal-block">public static async void AsyncMethod2(int num)
{
    await Task.Factory.StartNew(() =&gt; Thread.Sleep(num));
}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<ol>
<li>
<p>Normally, you would want to return a <code>Task</code>. The main exception should be when you <em>need</em> to have a <code>void</code> return type (for events). If there's no reason to disallow having the caller <code>await</code> your task, why disallow it?</p>
</li>
<li>
<p><code>async</code> methods that return <code>void</code> are special in another aspect: they represent <em>top-level async operations</em> , and have additional rules that come into play when your task returns an exception. The easiest way is to show the difference is with an example:</p>
<p>static async void f()
{
    await h();
}</p>
<p>static async Task g()
{
    await h();
}</p>
<p>static async Task h()
{
    throw new NotImplementedException();
}</p>
<p>private void button1_Click(object sender, EventArgs e)
{
    f();
}</p>
<p>private void button2_Click(object sender, EventArgs e)
{
    g();
}</p>
<p>private void button3_Click(object sender, EventArgs e)
{
    GC.Collect();
}</p>
</li>
</ol>
<p><code>f</code>'s exception is always "observed". An exception that leaves a top-level
asynchronous method is simply treated like any other unhandled exception.
<code>g</code>'s exception is never observed. When the garbage collector comes to clean
up the task, it sees that the task resulted in an exception, and nobody
handled the exception. When that happens, the
<code>TaskScheduler.UnobservedTaskException</code> handler runs. You should never let
this happen. To use your example,</p>
<div class="code"><pre class="code literal-block">public static async void AsyncMethod2(int num)
{
    await Task.Factory.StartNew(() =&gt; Thread.Sleep(num));
}
</pre></div>

<p>Yes, use <code>async</code> and <code>await</code> here, they make sure your method still works
correctly if an exception is thrown.</p>
<p>For more information see: https://learn.microsoft.com/en-us/archive/msdn-
magazine/2013/march/async-await-best-practices-in-asynchronous-programming</p>
<p><br></p>
<h3>Suggest</h3>
<p>I have come across this very useful article about <code>async</code> and <code>void</code> written
by Jérôme Laban: https://jaylee.org/archive/2012/07/08/c-sharp-async-tips-and-
tricks-part-2-async-void.html</p>
<p>The bottom line is that an <code>async+void</code> can crash the system and usually
should be used only on the UI side event handlers.</p>
<blockquote>
<p>The reason behind this is the Synchronization Context used by the
AsyncVoidMethodBuilder, being none in this example. When there is no ambient
Synchronization Context, any exception that is unhandled by the body of an
async void method is rethrown on the ThreadPool. While there is seemingly no
other logical place where that kind of unhandled exception could be thrown,
the unfortunate effect is that the process is being terminated, because
unhandled exceptions on the ThreadPool effectively terminate the process
since .NET 2.0. You may intercept all unhandled exception using the
AppDomain.UnhandledException event, but there is no way to recover the
process from this event.</p>
<p>When writing UI event handlers, async void methods are somehow painless
because exceptions are treated the same way found in non-async methods; they
are thrown on the Dispatcher. There is a possibility to recover from such
exceptions, with is more than correct for most cases. Outside of UI event
handlers however, async void methods are somehow dangerous to use and may
not that easy to find.</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-916.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-914.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
