<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1042) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1042.html">
<link rel="prev" href="index-1043.html" type="text/html">
<link rel="next" href="index-1041.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-add-default-parameters-to-functions-when-using-type-hinting/" class="u-url">How do I add default parameters to functions when using type hinting?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-add-default-parameters-to-functions-when-using-type-hinting/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:34:29+08:00" itemprop="datePublished" title="2023-02-17 23:34">2023-02-17 23:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I have a function like this:</p>
<div class="code"><pre class="code literal-block">def foo(name, opts={}):
  pass
</pre></div>

<p>And I want to add type hints to the parameters, how do I do it? The way I
assumed gives me a syntax error:</p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="o">=</span><span class="p">{}</span><span class="o">:</span><span class="w"> </span><span class="n">dict</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">str</span><span class="o">:</span>
<span class="w">  </span><span class="n">pass</span>
</pre></div>

<p>The following doesn't throw a syntax error but it doesn't seem like the
intuitive way to handle this case:</p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="o">:</span><span class="w"> </span><span class="n">dict</span><span class="o">=</span><span class="p">{})</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">str</span><span class="o">:</span>
<span class="w">  </span><span class="n">pass</span>
</pre></div>

<p>I can't find anything in the <code>typing</code> documentation or on a Google search.</p>
<p>Edit: I didn't know how default arguments worked in Python, but for the sake
of this question, I will keep the examples above. In general it's much better
to do the following:</p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="o">:</span><span class="w"> </span><span class="n">dict</span><span class="o">=</span><span class="n">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">str</span><span class="o">:</span>
<span class="w">  </span><span class="nf">if</span><span class="w"> </span><span class="kr">not</span><span class="w"> </span><span class="n">opts</span><span class="o">:</span>
<span class="w">    </span><span class="n">opts</span><span class="o">=</span><span class="p">{}</span>
<span class="w">  </span><span class="n">pass</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Your second way is correct.</p>
<div class="code"><pre class="code literal-block">def foo(opts: dict = {}):
    pass

print(foo.__annotations__)
</pre></div>

<p>this outputs</p>
<div class="code"><pre class="code literal-block">{'opts': &lt;class 'dict'&gt;}
</pre></div>

<p>It's true that's it's not listed in PEP 484, but type hints are an application
of function annotations, which are documented in PEP 3107. The syntax section
makes it clear that keyword arguments works with function annotations in this
way.</p>
<p>I strongly advise against using mutable keyword arguments. More information
here.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you're using typing (introduced in Python 3.5) you can use
<code>typing.Optional</code>, where <code>Optional[X]</code> is equivalent to <code>Union[X, None]</code>. It
is used to signal that the explicit value of <code>None</code> is allowed . From
typing.Optional:</p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="nl">arg</span><span class="p">:</span><span class="w"> </span><span class="n">Optional</span><span class="o">[</span><span class="n">int</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">None</span><span class="err">:</span>
<span class="w">    </span><span class="p">...</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/jquery-click-vs-onclick/" class="u-url">jQuery.click() vs onClick</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/jquery-click-vs-onclick/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:33:58+08:00" itemprop="datePublished" title="2023-02-17 23:33">2023-02-17 23:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a huge jQuery application, and I'm using the below two methods for
click events.</p>
<p><strong>First method</strong></p>
<h4>HTML</h4>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"myDiv"</span><span class="nt">&gt;</span>Some<span class="w"> </span>Content<span class="nt">&lt;/div&gt;</span>
</pre></div>

<h4>jQuery</h4>
<div class="code"><pre class="code literal-block">$('#myDiv').click(function(){
    //Some code
});
</pre></div>

<p><strong>Second method</strong></p>
<h4>HTML</h4>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"myDiv"</span><span class="w"> </span><span class="na">onClick=</span><span class="s">"divFunction()"</span><span class="nt">&gt;</span>Some<span class="w"> </span>Content<span class="nt">&lt;/div&gt;</span>
</pre></div>

<h4>JavaScript function call</h4>
<div class="code"><pre class="code literal-block">function divFunction(){
    //Some code
}
</pre></div>

<p>I use either the first or second method in my application. Which one is
better? Better for performance? And standard?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Using <code>$('#myDiv').click(function(){</code> is <strong>better</strong> as it follows standard
event registration model. (jQuery internally uses <code>addEventListener</code> and
<code>attachEvent</code>).</p>
<p>Basically registering an event in modern way is the unobtrusive way of
handling events. Also to register more than one event listener for the target
you can call <code>addEventListener()</code> for the same target.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myEl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'myelement'</span><span class="p">);</span>

<span class="n">myEl</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s1">'Hello world'</span><span class="p">);</span>
<span class="p">},</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>

<span class="n">myEl</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s1">'Hello world again!!!'</span><span class="p">);</span>
<span class="p">},</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>
</pre></div>

<p>http://jsfiddle.net/aj55x/1/</p>
<blockquote>
<p><strong>Why use addEventListener?</strong> (From MDN)</p>
<p>addEventListener is the way to register an event listener as specified in
W3C DOM. Its benefits are as follows:</p>
<ul>
<li>It allows adding more than a single handler for an event. This is
particularly useful for DHTML libraries or Mozilla extensions that need to
work well even if other libraries/extensions are used.</li>
<li>It gives you finer-grained control of the phase when the listener gets
activated (capturing vs. bubbling)</li>
<li>It works on any DOM element, not just HTML elements.
</li>
</ul>
</blockquote>
<p>More about Modern event registration -&gt;
http://www.quirksmode.org/js/events_advanced.html</p>
<p>Other methods such as setting the HTML attributes, example:</p>
<div class="code"><pre class="code literal-block">&lt;button onclick="alert('Hello world!')"&gt;
</pre></div>

<p>Or DOM element properties, example:</p>
<div class="code"><pre class="code literal-block">myEl.onclick = function(event){alert('Hello world');};
</pre></div>

<p>are old and they can be over written easily.</p>
<p><strong><em>HTML attribute</em></strong> should be avoided as It makes the markup bigger and less
readable. Concerns of content/structure and behavior are not well-separated,
making a bug harder to find.</p>
<p>The problem with the <strong><em>DOM element properties</em></strong> method is that only one
event handler can be bound to an element per event.</p>
<p>More about Traditional event handling -&gt;
http://www.quirksmode.org/js/events_tradmod.html</p>
<p>MDN Reference: https://developer.mozilla.org/en-US/docs/DOM/event</p>
<p><br></p>
<h3>Suggest</h3>
<p>For better performance, use the native JavaScript. For faster development, use
jQuery. Check the comparison in performance at <em>jQuery vs Native Element
Performance</em>.</p>
<p>I've done a test in Firefox 16.0 32-bit on Windows Server 2008 R2 / 7 64-bit</p>
<div class="code"><pre class="code literal-block">$('span'); // 6,604 operations per second
document.getElementsByTagName('span'); // 10,331,708 operations/sec
</pre></div>

<p>For click events, check <em>Native Browser events vs jquery trigger</em> or <em>jQuery
vs Native Click Event Binding</em>.</p>
<p>Testing in Chrome 22.0.1229.79 32-bit on Windows Server 2008 R2 / 7 64-bit</p>
<div class="code"><pre class="code literal-block">$('#jquery a').click(window.testClickListener); // 2,957 operations/second

[].forEach.call( document.querySelectorAll('#native a'), function(el) {
    el.addEventListener('click', window.testClickListener, false);
}); // 18,196 operations/second
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/arithmeticexception-non-terminating-decimal-expansion-no-exact-representable-decimal-result/" class="u-url">ArithmeticException: "Non-terminating decimal expansion; no exact representable decimal result"</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/arithmeticexception-non-terminating-decimal-expansion-no-exact-representable-decimal-result/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:33:07+08:00" itemprop="datePublished" title="2023-02-17 23:33">2023-02-17 23:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Why does the following code raise the exception shown below?</p>
<div class="code"><pre class="code literal-block">BigDecimal a = new BigDecimal("1.6");
BigDecimal b = new BigDecimal("9.2");
a.divide(b) // results in the following exception.
</pre></div>

<p>Exception:</p>
<div class="code"><pre class="code literal-block"><span class="nt">java</span><span class="p">.</span><span class="nc">lang</span><span class="p">.</span><span class="nc">ArithmeticException</span><span class="o">:</span><span class="w"> </span><span class="nt">Non-terminating</span><span class="w"> </span><span class="nt">decimal</span><span class="w"> </span><span class="nt">expansion</span><span class="o">;</span><span class="w"> </span><span class="nt">no</span><span class="w"> </span><span class="nt">exact</span><span class="w"> </span><span class="nt">representable</span><span class="w"> </span><span class="nt">decimal</span><span class="w"> </span><span class="nt">result</span><span class="o">.</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>From the Java 11 <code>BigDecimal</code> docs:</p>
<blockquote>
<p>When a <code>MathContext</code> object is supplied with a precision setting of 0 (for
example, <code>MathContext.UNLIMITED</code>), arithmetic operations are exact, as are
the arithmetic methods which take no <code>MathContext</code> object. (This is the only
behavior that was supported in releases prior to 5.)</p>
<p>As a corollary of computing the exact result, the rounding mode setting of a
<code>MathContext</code> object with a precision setting of 0 is not used and thus
irrelevant. In the case of divide, the exact quotient could have an
infinitely long decimal expansion; for example, 1 divided by 3.</p>
<p>If the quotient has a nonterminating decimal expansion and the operation is
specified to return an exact result, an <code>ArithmeticException</code> is thrown.
Otherwise, the exact result of the division is returned, as done for other
operations.</p>
</blockquote>
<p><strong>To fix, you need to do something like this</strong> :</p>
<div class="code"><pre class="code literal-block">a.divide(b, 2, RoundingMode.HALF_UP)
</pre></div>

<p>where 2 is the scale and RoundingMode.HALF_UP is rounding mode</p>
<p>For more details see this blog post.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Because you're not specifying a precision and a rounding-mode. BigDecimal is
complaining that it could use 10, 20, 5000, or infinity decimal places, and it
still wouldn't be able to give you an exact representation of the number. So
instead of giving you an incorrect BigDecimal, it just whinges at you.</p>
<p>However, if you supply a RoundingMode and a precision, then it will be able to
convert (eg. 1.333333333-to-infinity to something like 1.3333 ... but you as
the programmer need to tell it what precision you're 'happy with'.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1043.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1041.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
