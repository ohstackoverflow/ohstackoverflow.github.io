<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1858) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1858.html">
<link rel="prev" href="index-1859.html" type="text/html">
<link rel="next" href="index-1857.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mat-form-field-must-contain-a-matformfieldcontrol/" class="u-url">mat-form-field must contain a MatFormFieldControl</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mat-form-field-must-contain-a-matformfieldcontrol/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:02:48+08:00" itemprop="datePublished" title="2023-03-03 11:02">2023-03-03 11:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>We are trying to build our own form-field-Components at our Company. We are
trying to wrap material design's Components like this:</p>
<p>field:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;mat-form-field&gt;</span>
<span class="w">    </span><span class="nt">&lt;ng-content&gt;&lt;/ng-content&gt;</span>
<span class="w">    </span><span class="nt">&lt;mat-hint</span><span class="w"> </span><span class="na">align=</span><span class="s">"start"</span><span class="nt">&gt;&lt;strong&gt;</span><span class="cp">{{</span><span class="nv">hint</span><span class="cp">}}</span><span class="nt">&lt;/strong&gt;</span><span class="w"> </span><span class="nt">&lt;/mat-hint&gt;</span>
<span class="w">    </span><span class="nt">&lt;mat-hint</span><span class="w"> </span><span class="na">align=</span><span class="s">"end"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">message.value.length</span><span class="cp">}}</span><span class="w"> </span>/<span class="w"> </span>256<span class="nt">&lt;/mat-hint&gt;</span>
<span class="w">    </span><span class="nt">&lt;mat-error&gt;</span>This<span class="w"> </span>field<span class="w"> </span>is<span class="w"> </span>required<span class="nt">&lt;/mat-error&gt;</span>
<span class="nt">&lt;/mat-form-field&gt;</span>
</pre></div>

<p>textbox:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">field</span><span class="w"> </span><span class="n">hint</span><span class="o">=</span><span class="ss">"hint"</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="k">input</span><span class="w"> </span><span class="n">matInput</span><span class="w"> </span>
<span class="w">    </span><span class="o">[</span><span class="n">placeholder</span><span class="o">]=</span><span class="ss">"placeholder"</span><span class="w"> </span>
<span class="w">    </span><span class="o">[</span><span class="n">value</span><span class="o">]=</span><span class="ss">"value"</span>
<span class="w">    </span><span class="p">(</span><span class="n">change</span><span class="p">)</span><span class="o">=</span><span class="ss">"onChange($event)"</span><span class="w"> </span>
<span class="w">    </span><span class="p">(</span><span class="n">keydown</span><span class="p">)</span><span class="o">=</span><span class="ss">"onKeydown($event)"</span><span class="w"> </span>
<span class="w">    </span><span class="p">(</span><span class="n">keyup</span><span class="p">)</span><span class="o">=</span><span class="ss">"onKeyup($event)"</span><span class="w"> </span>
<span class="w">    </span><span class="p">(</span><span class="n">keypress</span><span class="p">)</span><span class="o">=</span><span class="ss">"onKeypress($event)"</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">field</span><span class="o">&gt;</span>
</pre></div>

<p>Usage:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;textbox</span><span class="w"> </span><span class="na">value=</span><span class="s">"test"</span><span class="w"> </span><span class="na">hint=</span><span class="s">"my hint"</span><span class="nt">&gt;&lt;/textbox&gt;</span>
</pre></div>

<p>This results in approximately this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;textbox</span><span class="w">  </span><span class="na">placeholder=</span><span class="s">"Personnummer/samordningsnummer"</span><span class="w"> </span><span class="na">value=</span><span class="s">""</span><span class="w"> </span><span class="na">ng-reflect-placeholder=</span><span class="s">"Personnummer/samordningsnummer"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;field&gt;</span>
<span class="w">    </span><span class="nt">&lt;mat-form-field</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-container mat-form-field"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-wrapper mat-form-field-wrapper"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-flex mat-form-field-flex"</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-infix mat-form-field-infix"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">_ngcontent-c4=</span><span class="s">""</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-element mat-form-field-autofill-control"</span><span class="w"> </span><span class="na">matinput=</span><span class="s">""</span><span class="w"> </span><span class="na">ng-reflect-placeholder=</span><span class="s">"Personnummer/samordningsnummer"</span><span class="w"> </span><span class="na">ng-reflect-value=</span><span class="s">""</span><span class="w"> </span><span class="na">id=</span><span class="s">"mat-input-2"</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">"Personnummer/samordningsnummer"</span><span class="w"> </span><span class="na">aria-invalid=</span><span class="s">"false"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;span</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-placeholder-wrapper mat-form-field-placeholder-wrapper"</span><span class="nt">&gt;&lt;/span&gt;</span>
<span class="w">          </span><span class="nt">&lt;/div&gt;</span>
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-underline mat-form-field-underline"</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;span</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-ripple mat-form-field-ripple"</span><span class="nt">&gt;&lt;/span&gt;</span>
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"mat-input-subscript-wrapper mat-form-field-subscript-wrapper"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/mat-form-field&gt;</span>
<span class="w">  </span><span class="nt">&lt;/field&gt;</span>
<span class="nt">&lt;/textbox&gt;</span>
</pre></div>

<p>But I'm getting <em><strong>"mat-form-field must contain a MatFormFieldControl"</strong></em> in
the console. I guess this has to do with mat-form-field not directly
containing a matInput-field. But it is containing it, it's just withing the
ng-content projection.</p>
<p>Here is a blitz: https://stackblitz.com/edit/angular-xpvwzf</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Import MatInputModule in your module.ts file and it will solve the problem.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">MatInputModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'@angular/material/input'</span><span class="p">;</span>
</pre></div>

<p>The statement after it is the old answer.</p>
<p>Unfortunately content projection into <code>mat-form-field</code> is not supported yet.
Please track the following github issue to get the latest news about it.</p>
<p>By now the only solution for you is either place your content directly into
<code>mat-form-field</code> component or implement a <code>MatFormFieldControl</code> class thus
creating a custom form field component.</p>
<p><br></p>
<h3>Suggest</h3>
<h4>Problem 1: <code>MatInputModule</code> Not imported</h4>
<p>import <code>MatInputModule</code> and <code>MatFormFieldModule</code> inside module i.e.
<code>app.module.ts</code></p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">MatInputModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'@angular/material/input'</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">MatFormFieldModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"@angular/material/form-field"</span><span class="p">;</span>

<span class="nd">@NgModule</span><span class="p">({</span>
    <span class="n">imports</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">MatFormFieldModule</span><span class="p">,</span>
        <span class="n">MatInputModule</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>

<h4>Problem 2: matInput - spellings mistake / forget to add</h4>
<p>Be sure to add <code>matInput</code> and it is case-sensitive.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;mat-form-field&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="err">matInput</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/mat-form-field&gt;</span>
</pre></div>

<h4>Problem 3: Invalid *ngIf placement</h4>
<p>Check that you don't have any condition on <code>input</code> tag that is going to be
false in any case because <code>mat-form-field</code> looks for <code>matInput</code> inside it.
Instead put <code>*ngIf</code> on <code>mat-form-field</code> tag.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;mat-form-field&gt;</span>
<span class="w">   </span><span class="nt">&lt;input</span><span class="w"> </span><span class="err">matInput</span><span class="w"> </span><span class="err">*</span><span class="na">ngIf=</span><span class="s">"someCondition"</span><span class="nt">&gt;</span><span class="w"> </span>//<span class="w"> </span>don't<span class="w"> </span>add<span class="w"> </span>condition<span class="w"> </span>here,<span class="w"> </span>else<span class="w"> </span>add<span class="w"> </span>in<span class="w"> </span>mat-form-field<span class="w"> </span>tag
<span class="nt">&lt;/mat-form-field&gt;</span>
</pre></div>

<p>credit to @William Herrmann for pointing out this problem#3</p>
<h4>Problem 4: Still compiler giving ERROR</h4>
<p>if angular compiler still giving error after fixing above given problems then
you must try with restarting the app.</p>
<div class="code"><pre class="code literal-block">ng serve
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/when-to-use-references-vs-pointers/" class="u-url">When to use references vs. pointers</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/when-to-use-references-vs-pointers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:02:22+08:00" itemprop="datePublished" title="2023-03-03 11:02">2023-03-03 11:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I understand the syntax and general semantics of pointers versus references,
but how should I decide when it is more-or-less appropriate to use references
or pointers in an API?</p>
<p>Naturally some situations need one or the other (<code>operator++</code> needs a
reference argument), but in general I'm finding I prefer to use pointers (and
const pointers) as the syntax is clear that the variables are being passed
destructively.</p>
<p>E.g. in the following code:</p>
<div class="code"><pre class="code literal-block"><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">add_one</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">add_one</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">*</span><span class="n">n</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nb nb-Type">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="n">add_one</span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Not</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">modified</span>
<span class="w">  </span><span class="n">add_one</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="s1">'a'</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">clearly</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">destructively</span>
<span class="p">}</span>
</pre></div>

<p>With the pointer, it's always (more) obvious what's going on, so for APIs and
the like where clarity is a big concern are pointers not more appropriate than
references? Does that mean references should only be used when necessary (e.g.
<code>operator++</code>)? Are there any performance concerns with one or the other?</p>
<p>EDIT (OUTDATED):</p>
<p>Besides allowing NULL values and dealing with raw arrays, it seems the choice
comes down to personal preference. I've accepted the answer below that
references Google's C++ Style Guide, as they present the view that "References
can be confusing, as they have value syntax but pointer semantics.".</p>
<p>Due to the additional work required to sanitise pointer arguments that should
not be NULL (e.g. <code>add_one(0)</code> will call the pointer version and break during
runtime), it makes sense from a maintainability perspective to use references
where an object MUST be present, though it is a shame to lose the syntactic
clarity.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use reference wherever you can, pointers wherever you must.</p>
<p>Avoid pointers until you can't.</p>
<p>The reason is that pointers make things harder to follow/read, less safe and
far more dangerous manipulations than any other constructs.</p>
<p>So the rule of thumb is to use pointers only if there is no other choice.</p>
<p>For example, returning a pointer to an object is a valid option when the
function can return <code>nullptr</code> in some cases and it is assumed it will. That
said, a better option would be to use something similar to <code>std::optional</code>
(requires C++17; before that, there's <code>boost::optional</code>).</p>
<p>Another example is to use pointers to raw memory for specific memory
manipulations. That should be hidden and localized in very narrow parts of the
code, to help limit the dangerous parts of the whole code base.</p>
<p>In your example, there is no point in using a pointer as argument because:</p>
<ol>
<li>if you provide <code>nullptr</code> as the argument, you're going in undefined-behaviour-land;</li>
<li>the reference attribute version doesn't allow (without easy to spot tricks) the problem with 1.</li>
<li>the reference attribute version is simpler to understand for the user: you have to provide a valid object, not something that could be null.</li>
</ol>
<p>If the behaviour of the function would have to work with or without a given
object, then using a pointer as attribute suggests that you can pass <code>nullptr</code>
as the argument and it is fine for the function. That's kind of a contract
between the user and the implementation.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The performances are exactly the same, as references are implemented
internally as pointers. Thus you do not need to worry about that.</p>
<p>There is no generally accepted convention regarding when to use references and
pointers. In a few cases you have to return or accept references (copy
constructor, for instance), but other than that you are free to do as you
wish. A rather common convention I've encountered is to use references when
the parameter must refer an existing object and pointers when a NULL value is
ok.</p>
<p>Some coding convention (like Google's) prescribe that one should always use
pointers, or const references, because references have a bit of unclear-
syntax: they have reference behaviour but value syntax.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-build-xml-in-c/" class="u-url">How can I build XML in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-build-xml-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:01:56+08:00" itemprop="datePublished" title="2023-03-03 11:01">2023-03-03 11:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I generate valid XML in C#?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It depends on the scenario. <code>XmlSerializer</code> is certainly one way and has the
advantage of mapping directly to an object model. In .NET 3.5, <code>XDocument</code>,
etc. are also very friendly. If the size is very large, then <code>XmlWriter</code> is
your friend.</p>
<p>For an <code>XDocument</code> example:</p>
<div class="code"><pre class="code literal-block">Console.WriteLine(
    new XElement("Foo",
        new XAttribute("Bar", "some &amp; value"),
        new XElement("Nested", "data")));
</pre></div>

<p>Or the same with <code>XmlDocument</code>:</p>
<div class="code"><pre class="code literal-block">XmlDocument doc = new XmlDocument();
XmlElement el = (XmlElement)doc.AppendChild(doc.CreateElement("Foo"));
el.SetAttribute("Bar", "some &amp; value");
el.AppendChild(doc.CreateElement("Nested")).InnerText = "data";
Console.WriteLine(doc.OuterXml);
</pre></div>

<p>If you are writing a <strong>large</strong> stream of data, then any of the DOM approaches
(such as <code>XmlDocument</code>/<code>XDocument</code>, etc.) will quickly take a lot of memory.
So if you are writing a 100 MB XML file from CSV, you might consider
<code>XmlWriter</code>; this is more primitive (a write-once firehose), but very
efficient (imagine a big loop here):</p>
<div class="code"><pre class="code literal-block">XmlWriter writer = XmlWriter.Create(Console.Out);
writer.WriteStartElement("Foo");
writer.WriteAttributeString("Bar", "Some &amp; value");
writer.WriteElementString("Nested", "data");
writer.WriteEndElement();
</pre></div>

<p>Finally, via <code>XmlSerializer</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Serializable]</span>
<span class="na">public class Foo</span>
<span class="na">{</span>
<span class="w">    </span><span class="k">[XmlAttribute]</span>
<span class="w">    </span><span class="na">public string Bar { get; set; }</span>
<span class="w">    </span><span class="na">public string Nested { get; set; }</span>
<span class="na">}</span>
<span class="na">...</span>
<span class="na">Foo foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">new Foo</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">Bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"some &amp; value",</span>
<span class="w">    </span><span class="na">Nested</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"data"</span>
<span class="na">};</span>
<span class="na">new XmlSerializer(typeof(Foo)).Serialize(Console.Out, foo);</span>
</pre></div>

<p>This is a nice model for mapping to classes, etc.; however, it might be
overkill if you are doing something simple (or if the desired XML doesn't
really have a direct correlation to the object model). Another issue with
<code>XmlSerializer</code> is that it doesn't like to serialize immutable types :
everything must have a public getter <em>and</em> setter (unless you do it all
yourself by implementing <code>IXmlSerializable</code>, in which case you haven't gained
much by using <code>XmlSerializer</code>).</p>
<p><br></p>
<h3>Suggest</h3>
<p>The best thing hands down that I have tried is LINQ to XSD (which is unknown
to most developers). You give it an XSD Schema and it generates a perfectly
mapped complete strongly-typed object model (based on LINQ to XML) for you in
the background, which is really easy to work with - and it updates and
validates your object model and XML in real-time. While it's still "Preview",
I have not encountered any bugs with it.</p>
<p>If you have an XSD Schema that looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">"RootElement"</span><span class="nt">&gt;</span>
<span class="w">     </span><span class="nt">&lt;xs:complexType&gt;</span>
<span class="w">      </span><span class="nt">&lt;xs:sequence&gt;</span>
<span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">"Element1"</span><span class="w"> </span><span class="na">type=</span><span class="s">"xs:string"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;xs:element</span><span class="w"> </span><span class="na">name=</span><span class="s">"Element2"</span><span class="w"> </span><span class="na">type=</span><span class="s">"xs:string"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/xs:sequence&gt;</span>
<span class="w">       </span><span class="nt">&lt;xs:attribute</span><span class="w"> </span><span class="na">name=</span><span class="s">"Attribute1"</span><span class="w"> </span><span class="na">type=</span><span class="s">"xs:integer"</span><span class="w"> </span><span class="na">use=</span><span class="s">"optional"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">       </span><span class="nt">&lt;xs:attribute</span><span class="w"> </span><span class="na">name=</span><span class="s">"Attribute2"</span><span class="w"> </span><span class="na">type=</span><span class="s">"xs:boolean"</span><span class="w"> </span><span class="na">use=</span><span class="s">"required"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">     </span><span class="nt">&lt;/xs:complexType&gt;</span>
<span class="w">  </span><span class="nt">&lt;/xs:element&gt;</span>
</pre></div>

<p>Then you can simply build XML like this:</p>
<div class="code"><pre class="code literal-block">RootElement rootElement = new RootElement;
rootElement.Element1 = "Element1";
rootElement.Element2 = "Element2";
rootElement.Attribute1 = 5;
rootElement.Attribute2 = true;
</pre></div>

<p>Or simply load an XML from file like this:</p>
<div class="code"><pre class="code literal-block">RootElement rootElement = RootElement.Load(filePath);
</pre></div>

<p>Or save it like this:</p>
<div class="code"><pre class="code literal-block">rootElement.Save(string);
rootElement.Save(textWriter);
rootElement.Save(xmlWriter);
</pre></div>

<p><code>rootElement.Untyped</code> also yields the element in form of a XElement (from LINQ
to XML).</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1859.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1857.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
