<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1631) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1631.html">
<link rel="prev" href="index-1632.html" type="text/html">
<link rel="next" href="index-1630.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-concise-way-to-iterate-over-a-stream-with-indices-in-java-8/" class="u-url">Is there a concise way to iterate over a stream with indices in Java 8?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-concise-way-to-iterate-over-a-stream-with-indices-in-java-8/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:36:32+08:00" itemprop="datePublished" title="2023-03-03 05:36">2023-03-03 05:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a concise way to iterate over a stream whilst having access to the
index in the stream?</p>
<div class="code"><pre class="code literal-block"><span class="nt">String</span><span class="cp">[]</span><span class="w"> </span><span class="nt">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="err">"Sam","Pamela",</span><span class="w"> </span><span class="err">"Dave",</span><span class="w"> </span><span class="err">"Pascal",</span><span class="w"> </span><span class="err">"Erik"</span><span class="p">}</span><span class="o">;</span>

<span class="nt">List</span><span class="o">&lt;</span><span class="nt">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">nameList</span><span class="o">;</span>
<span class="nt">Stream</span><span class="o">&lt;</span><span class="nt">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">indices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">intRange</span><span class="o">(</span><span class="nt">1</span><span class="o">,</span><span class="w"> </span><span class="nt">names</span><span class="p">.</span><span class="nc">length</span><span class="o">)</span><span class="p">.</span><span class="nc">boxed</span><span class="o">();</span>
<span class="nt">nameList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">zip</span><span class="o">(</span><span class="nt">indices</span><span class="o">,</span><span class="w"> </span><span class="nt">stream</span><span class="o">(</span><span class="nt">names</span><span class="o">),</span><span class="w"> </span><span class="nt">SimpleEntry</span><span class="p">::</span><span class="nd">new</span><span class="o">)</span>
<span class="w">        </span><span class="p">.</span><span class="nc">filter</span><span class="o">(</span><span class="nt">e</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">getValue</span><span class="o">()</span><span class="p">.</span><span class="nc">length</span><span class="o">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nt">e</span><span class="p">.</span><span class="nc">getKey</span><span class="o">())</span>
<span class="w">        </span><span class="p">.</span><span class="nc">map</span><span class="o">(</span><span class="nt">Entry</span><span class="p">::</span><span class="nd">getValue</span><span class="o">)</span>
<span class="w">        </span><span class="p">.</span><span class="nc">collect</span><span class="o">(</span><span class="nt">toList</span><span class="o">());</span>
</pre></div>

<p>which seems rather disappointing compared to the LINQ example given there</p>
<div class="code"><pre class="code literal-block"><span class="n">string</span><span class="p">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"Sam"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Pamela"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Dave"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Pascal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Erik"</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">nameList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">names</span><span class="o">.</span><span class="n">Where</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">c</span><span class="o">.</span><span class="n">Length</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ToList</span><span class="p">();</span>
</pre></div>

<p>Is there a more concise way?</p>
<p>Further it seems the zip has either moved or been removed...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The cleanest way is to start from a stream of indices:</p>
<div class="code"><pre class="code literal-block"><span class="n">String</span><span class="err">[]</span><span class="w"> </span><span class="k">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="ss">"Sam"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Pamela"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Dave"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Pascal"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Erik"</span><span class="err">}</span><span class="p">;</span>
<span class="n">IntStream</span><span class="p">.</span><span class="k">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">names</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
<span class="w">         </span><span class="p">.</span><span class="k">filter</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">names</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>
<span class="w">         </span><span class="p">.</span><span class="n">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">names</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>
<span class="w">         </span><span class="p">.</span><span class="k">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>
</pre></div>

<p>The resulting list contains "Erik" only.</p>
<hr>
<p>One alternative which looks more familiar when you are used to for loops would
be to maintain an ad hoc counter using a mutable object, for example an
<code>AtomicInteger</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">String</span><span class="p">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">"Sam"</span><span class="p">,</span><span class="w"> </span><span class="s">"Pamela"</span><span class="p">,</span><span class="w"> </span><span class="s">"Dave"</span><span class="p">,</span><span class="w"> </span><span class="s">"Pascal"</span><span class="p">,</span><span class="w"> </span><span class="s">"Erik"</span><span class="p">};</span>
<span class="n">AtomicInteger</span><span class="w"> </span><span class="nf">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="n">stream</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
<span class="w">                          </span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="nf">length</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nf">index</span><span class="p">.</span><span class="n">incrementAndGet</span><span class="p">())</span>
<span class="w">                          </span><span class="p">.</span><span class="n">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>
</pre></div>

<p>Note that <strong><em>using the latter method on a parallel stream could break as the
items would not necesarily be processed "in order"</em></strong>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The Java 8 streams API lacks the features of getting the index of a stream
element as well as the ability to zip streams together. This is unfortunate,
as it makes certain applications (like the LINQ challenges) more difficult
than they would be otherwise.</p>
<p>There are often workarounds, however. Usually this can be done by "driving"
the stream with an integer range, and taking advantage of the fact that the
original elements are often in an array or in a collection accessible by
index. For example, the Challenge 2 problem can be solved this way:</p>
<div class="code"><pre class="code literal-block"><span class="n">String</span><span class="err">[]</span><span class="w"> </span><span class="k">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="ss">"Sam"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Pamela"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Dave"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Pascal"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Erik"</span><span class="err">}</span><span class="p">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">nameList</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">IntStream</span><span class="p">.</span><span class="k">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">names</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="k">filter</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">names</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">mapToObj</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">names</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="k">collect</span><span class="p">(</span><span class="n">toList</span><span class="p">());</span>
</pre></div>

<p>As I mentioned above, this takes advantage of the fact that the data source
(the names array) is directly indexable. If it weren't, this technique
wouldn't work.</p>
<p>I'll admit that this doesn't satisfy the intent of Challenge 2. Nonetheless it
does solve the problem reasonably effectively.</p>
<p><strong>EDIT</strong></p>
<p>My previous code example used <code>flatMap</code> to fuse the filter and map operations,
but this was cumbersome and provided no advantage. I've updated the example
per the comment from Holger.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/colspan-all-columns/" class="u-url">Colspan all columns</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/colspan-all-columns/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:36:06+08:00" itemprop="datePublished" title="2023-03-03 05:36">2023-03-03 05:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I specify a <code>td</code> tag should span all columns (when the exact amount of
columns in the table will be variable/difficult to determine when the HTML is
being rendered)? w3schools mentions you can use <code>colspan="0"</code>, but it doesn't
say exactly what browsers support that value (IE 6 is in our list to support).</p>
<p>It appears that setting <code>colspan</code> to a value greater than the theoretical
amount of columns you may have will work, but it will not work if you have
<code>table-layout</code> set to <code>fixed</code>. Are there any disadvantages to using an
automatic layout with a large number for <code>colspan</code>? Is there a more correct
way of doing this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I have IE 7.0, Firefox 3.0 and Chrome 1.0</p>
<p>The colspan="0" attribute in a TD is <strong>NOT spanning</strong> across all TDs in <strong>any
of the above browsers</strong>.</p>
<p>Maybe not recommended as proper markup practice, but if you give a <strong>higher
colspan value than the total possible no. of columns in other rows</strong> , then
the TD would span all the columns.</p>
<p><strong>This does NOT work when the table-layout CSS property is set to fixed.</strong></p>
<p>Once again, this is not the perfect solution but seems to work in the above
mentioned 3 browser versions when the table-layout CSS property is
<em>automatic</em>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I have IE 7.0, Firefox 3.0 and Chrome 1.0</p>
<p>The colspan="0" attribute in a TD is <strong>NOT spanning</strong> across all TDs in <strong>any
of the above browsers</strong>.</p>
<p>Maybe not recommended as proper markup practice, but if you give a <strong>higher
colspan value than the total possible no. of columns in other rows</strong> , then
the TD would span all the columns.</p>
<p><strong>This does NOT work when the table-layout CSS property is set to fixed.</strong></p>
<p>Once again, this is not the perfect solution but seems to work in the above
mentioned 3 browser versions when the table-layout CSS property is
<em>automatic</em>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-the-current-user-s-username-in-bash/" class="u-url">How do I get the current user's username in Bash?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-the-current-user-s-username-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:35:40+08:00" itemprop="datePublished" title="2023-03-03 05:35">2023-03-03 05:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I get the current user's username in Bash? Do I use <code>whoami</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>On the command line, enter</p>
<div class="code"><pre class="code literal-block">whoami
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">echo "$USER"
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>An alternative to <code>whoami</code> is <code>id -u -n</code>.</p>
<p><code>id -u</code> will return the user id (e.g. 0 for <em>root</em> ).</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1632.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1630.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
