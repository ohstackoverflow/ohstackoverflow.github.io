<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 648) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-648.html">
<link rel="prev" href="index-649.html" type="text/html">
<link rel="next" href="index-647.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-deserialize-json-to-a-simple-dictionary-string-string-in-asp-net/" class="u-url">How can I deserialize JSON to a simple Dictionary&lt;string,string&gt; in ASP.NET?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-deserialize-json-to-a-simple-dictionary-string-string-in-asp-net/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T12:15:55+08:00" itemprop="datePublished" title="2023-02-17 12:15">2023-02-17 12:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a simple key/value list in JSON being sent back to ASP.NET via POST.
Example:</p>
<div class="code"><pre class="code literal-block">{ "key1": "value1", "key2": "value2"}
</pre></div>

<p><strong>I AM NOT TRYING TO DESERIALIZE INTO STRONGLY-TYPED .NET OBJECTS</strong></p>
<p>I simply need a plain old <strong>Dictionary(Of String, String)</strong> , or some
equivalent (hash table, Dictionary(Of String, Object), old-school
StringDictionary--hell, a 2-D array of strings would work for me.</p>
<p>I can use anything available in ASP.NET 3.5, as well as the popular Json.NET
(which I'm already using for serialization <strong>to</strong> the client).</p>
<p>Apparently neither of these JSON libraries have this forehead-slapping obvious
capability out of the box--they are totally focused on reflection-based
deserialization via strong contracts.</p>
<p>Any ideas?</p>
<p>Limitations:</p>
<ol>
<li>I don't want to implement my own JSON parser</li>
<li>Can't use ASP.NET 4.0 yet</li>
<li>Would prefer to stay away from the older, deprecated ASP.NET class for JSON</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>Json.NET does this...</p>
<div class="code"><pre class="code literal-block"><span class="n">string</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@"{""key1"":""value1"",""key2"":""value2""}"</span><span class="p">;</span>

<span class="n">var</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObject</span><span class="o">&lt;</span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">json</span><span class="p">);</span>
</pre></div>

<p>More examples: Serializing Collections with Json.NET</p>
<p><br></p>
<h3>Suggest</h3>
<p>I did discover .NET has a built in way to cast the JSON string into a
<code>Dictionary&lt;String, Object&gt;</code> via the
<code>System.Web.Script.Serialization.JavaScriptSerializer</code> type in the 3.5
<code>System.Web.Extensions</code> assembly. Use the method <code>DeserializeObject(String)</code>.</p>
<p>I stumbled upon this when doing an ajax post (via jquery) of content type
'application/json' to a static .net Page Method and saw that the method (which
had a single parameter of type <code>Object</code>) magically received this Dictionary.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/equivalent-of-shell-cd-command-to-change-the-working-directory/" class="u-url">Equivalent of shell 'cd' command to change the working directory?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/equivalent-of-shell-cd-command-to-change-the-working-directory/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T12:15:24+08:00" itemprop="datePublished" title="2023-02-17 12:15">2023-02-17 12:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>cd</code> is the shell command to change the working directory.</p>
<p>How do I change the current working directory in Python?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can change the working directory with:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>

<p>There are two best practices to follow when using this method:</p>
<ol>
<li>Catch the exception (WindowsError, OSError) on invalid path. If the exception is thrown, do not perform any recursive operations, especially destructive ones. They will operate on the old path and not the new one.</li>
<li>Return to your old directory when you're done. This can be done in an exception-safe manner by wrapping your chdir call in a context manager, like Brian M. Hunt did in his answer.</li>
</ol>
<p>Changing the current working directory in a subprocess does not change the
current working directory in the parent process. This is true of the Python
interpreter as well. You cannot use <code>os.chdir()</code> to change the CWD of the
calling process.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here's an example of a context manager to change the working directory. It is
simpler than an ActiveState version referred to elsewhere, but this gets the
job done.</p>
<h4>Context Manager: <code>cd</code>
</h4>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">os</span>

<span class="k">class</span> <span class="nc">cd</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Context manager for changing the current working directory"""</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newPath</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">newPath</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savedPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newPath</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">savedPath</span><span class="p">)</span>
</pre></div>

<p>Or try the more concise equivalent(below), using ContextManager.</p>
<h4>Example</h4>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">subprocess</span> <span class="c1"># just to call an arbitrary command e.g. 'ls'</span>

<span class="c1"># enter the directory like this:</span>
<span class="k">with</span> <span class="n">cd</span><span class="p">(</span><span class="s2">"~/Library"</span><span class="p">):</span>
   <span class="c1"># we are in ~/Library</span>
   <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">"ls"</span><span class="p">)</span>

<span class="c1"># outside the context manager we are back wherever we started.</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-cherry-pick-a-range-of-commits-and-merge-them-into-another-branch/" class="u-url">How to cherry-pick a range of commits and merge them into another branch?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-cherry-pick-a-range-of-commits-and-merge-them-into-another-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T12:14:16+08:00" itemprop="datePublished" title="2023-02-17 12:14">2023-02-17 12:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have the following repository layout:</p>
<ul>
<li>master branch (production)</li>
<li>integration</li>
<li>working</li>
</ul>
<p>What I want to achieve is to cherry-pick a range of commits from the working
branch and merge it into the integration branch. I'm pretty new to git and I
can't figure out how to exactly do this (the cherry-picking of commit ranges
in one operation, not the merging) without messing the repository up. Any
pointers or thoughts on this? Thanks!</p>
<p><br><br></p>
<h2>Answer</h2>
<p>When it comes to a range of commits, cherry-picking <del>is</del> <em>was</em> not
practical.</p>
<p>As mentioned below by Keith Kim, Git 1.7.2+ introduced the ability to cherry-
pick a range of commits (but you still need to be aware of the consequence of
cherry-picking for future merge)</p>
<blockquote>
<p>git cherry-pick" learned to pick a range of commits<br>
 (e.g. "<code>cherry-pick A..B</code>" and "<code>cherry-pick --stdin</code>"), so did "<code>git
revert</code>"; these do not support the nicer sequencing control "<code>rebase [-i]</code>"
has, though.</p>
</blockquote>
<p>damian comments and warns us:</p>
<blockquote>
<p>In the "<code>cherry-pick A..B</code>" form, <strong><code>A</code> should be older than <code>B</code></strong>.<br><strong>If they're the wrong order the command will silently fail</strong>.</p>
</blockquote>
<p>If you want to pick the <strong>range<code>B</code> through <code>D</code> (including <code>B</code>)</strong> that would be
<strong><code>B^..D</code></strong> (instead of <code>B..D</code>).<br>
See "Git create branch from range of previous commits?" as an illustration.</p>
<p>As Jubobs mentions in the comments:</p>
<blockquote>
<p>This assumes that <code>B</code> is not a root commit; you'll get an "<code>unknown
revision</code>" error otherwise.</p>
</blockquote>
<p>Note: as of Git 2.9.x/2.10 (Q3 2016), you can cherry-pick a range of commit
directly on an orphan branch (empty head): see "How to make existing branch an
orphan in git".</p>
<hr>
<p>Original answer (January 2010)</p>
<p>A <code>rebase --onto</code> would be better, where you replay the given range of commit
on top of your integration branch, as Charles Bailey described here.<br>
(also, look for "Here is how you would transplant a topic branch based on one
branch to another" in the git rebase man page, to see a practical example of
<code>git rebase --onto</code>)</p>
<p>If your current branch is integration:</p>
<div class="code"><pre class="code literal-block"># Checkout a new temporary branch at the current location
git checkout -b tmp

# Move the integration branch to the head of the new patchset
git branch -f integration last_SHA-1_of_working_branch_range

# Rebase the patchset onto tmp, the old location of integration
git rebase --onto tmp first_SHA-1_of_working_branch_range~1 integration
</pre></div>

<p>That will replay everything between:</p>
<ul>
<li>after the parent of <code>first_SHA-1_of_working_branch_range</code> (hence the <code>~1</code>): the first commit you want to replay</li>
<li>up to "<code>integration</code>" (which points to the last commit you want to replay, from the <code>working</code> branch)</li>
</ul>
<p>to "<code>tmp</code>" (which points to where <code>integration</code> was pointing before)</p>
<p>If there is any conflict when one of those commits is replayed:</p>
<ul>
<li>either solve it and run "<code>git rebase --continue</code>".</li>
<li>or skip this patch, and instead run "<code>git rebase --skip</code>"</li>
<li>or cancel the all thing with a "<code>git rebase --abort</code>" (and put back the <code>integration</code> branch on the <code>tmp</code> branch)</li>
</ul>
<p>After that <code>rebase --onto</code>, <code>integration</code> will be back at the last commit of
the integration branch (that is "<code>tmp</code>" branch + all the replayed commits)</p>
<p>With cherry-picking or <code>rebase --onto</code>, do not forget it has consequences on
subsequent merges, as described here.</p>
<hr>
<p>A pure "<code>cherry-pick</code>" solution is discussed here, and would involve something
like:</p>
<blockquote>
<p>If you want to use a patch approach then "git format-patch|git am" and "git
cherry" are your options.<br>
 Currently, <code>git cherry-pick</code> accepts only a single commit, but if you want
to pick the range <code>B</code> through <code>D</code> that would be <code>B^..D</code> in git lingo, so</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">rev</span><span class="o">-</span><span class="nv">list</span><span class="w"> </span><span class="o">--</span><span class="nv">reverse</span><span class="w"> </span><span class="o">--</span><span class="nv">topo</span><span class="o">-</span><span class="nv">order</span><span class="w"> </span><span class="nv">B</span><span class="o">^</span>..<span class="nv">D</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="nv">rev</span><span class="w"> </span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span><span class="nv">git</span><span class="w"> </span><span class="nv">cherry</span><span class="o">-</span><span class="nv">pick</span><span class="w"> </span>$<span class="nv">rev</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">break</span><span class="w"> </span>
<span class="nv">done</span>
</pre></div>

<p>But anyway, when you need to "replay" a range of commits, the word "replay"
should push you to use the "<code>rebase</code>" feature of Git.</p>
<p><br></p>
<h3>Suggest</h3>
<p>As of git v1.7.2 cherry pick can accept a range of commits:</p>
<blockquote>
<p><code>git cherry-pick</code> learned to pick a range of commits (e.g. <code>cherry-pick
A..B</code> and <code>cherry-pick --stdin</code>), so did <code>git revert</code>; these do not support
the nicer sequencing control <code>rebase [-i]</code> has, though.</p>
</blockquote>
<p>As Gabe Moothart notes, <code>cherry-pick A..B</code> will not get commit <code>A</code> (you would
need <code>A~1..B</code> for that), and if there are any conflicts git will not
automatically continue like rebase does (at least as of 1.7.3.1).</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-649.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-647.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
