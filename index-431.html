<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 431) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-431.html">
<link rel="prev" href="index-432.html" type="text/html">
<link rel="next" href="index-430.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-rows-with-all-or-some-nas-missing-values-in-data-frame/" class="u-url">Remove rows with all or some NAs (missing values) in data.frame</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-rows-with-all-or-some-nas-missing-values-in-data-frame/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:41:21+08:00" itemprop="datePublished" title="2023-02-17 06:41">2023-02-17 06:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to remove the lines in this data frame that:</p>
<p>a) <strong>contain<code>NA</code>s across all columns.</strong> Below is my example data frame.</p>
<div class="code"><pre class="code literal-block">             gene hsap mmul mmus rnor cfam
1 ENSG00000208234    0   NA   NA   NA   NA
2 ENSG00000199674    0   2    2    2    2
3 ENSG00000221622    0   NA   NA   NA   NA
4 ENSG00000207604    0   NA   NA   1    2
5 ENSG00000207431    0   NA   NA   NA   NA
6 ENSG00000221312    0   1    2    3    2
</pre></div>

<p>Basically, I'd like to get a data frame such as the following.</p>
<div class="code"><pre class="code literal-block">             gene hsap mmul mmus rnor cfam
2 ENSG00000199674    0   2    2    2    2
6 ENSG00000221312    0   1    2    3    2
</pre></div>

<p>b) <strong>contain<code>NA</code>s in only some columns</strong>, so I can also get this result:</p>
<div class="code"><pre class="code literal-block">             gene hsap mmul mmus rnor cfam
2 ENSG00000199674    0   2    2    2    2
4 ENSG00000207604    0   NA   NA   1    2
6 ENSG00000221312    0   1    2    3    2
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Also check <code>complete.cases</code> :</p>
<div class="code"><pre class="code literal-block">&gt; final[complete.cases(final), ]
             gene hsap mmul mmus rnor cfam
2 ENSG00000199674    0    2    2    2    2
6 ENSG00000221312    0    1    2    3    2
</pre></div>

<p><code>na.omit</code> is nicer for just removing all <code>NA</code>'s. <code>complete.cases</code> allows
partial selection by including only certain columns of the dataframe:</p>
<div class="code"><pre class="code literal-block">&gt; final[complete.cases(final[ , 5:6]),]
             gene hsap mmul mmus rnor cfam
2 ENSG00000199674    0    2    2    2    2
4 ENSG00000207604    0   NA   NA    1    2
6 ENSG00000221312    0    1    2    3    2
</pre></div>

<p>Your solution can't work. If you insist on using <code>is.na</code>, then you have to do
something like:</p>
<div class="code"><pre class="code literal-block">&gt; final[rowSums(is.na(final[ , 5:6])) == 0, ]
             gene hsap mmul mmus rnor cfam
2 ENSG00000199674    0    2    2    2    2
4 ENSG00000207604    0   NA   NA    1    2
6 ENSG00000221312    0    1    2    3    2
</pre></div>

<p>but using <code>complete.cases</code> is quite a lot more clear, and faster.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try <code>na.omit(your.data.frame)</code>. As for the second question, try posting it as
another question (for clarity).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/visualizing-branch-topology-in-git/" class="u-url">Visualizing branch topology in Git</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/visualizing-branch-topology-in-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:40:50+08:00" itemprop="datePublished" title="2023-02-17 06:40">2023-02-17 06:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm playing with Git in isolation on my own machine, and I find it difficult
to maintain a mental model of all my branches and commits. I know I can do a
<code>git log</code> to see the commit history from where I am, but is there a way to see
the entire branch topography, something like these ASCII maps that seem to be
used everywhere for explaining branches?</p>
<div class="code"><pre class="code literal-block">      .-A---M---N---O---P
     /     /   /   /   /
    I     B   C   D   E
     \   /   /   /   /
      `-------------'
</pre></div>

<p>It just feels like someone coming along and trying to pick up my repository
would have difficulty working out exactly what was going on.</p>
<p>I guess I'm influenced by AccuRev's stream browser...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use <code>git log --graph</code> or <code>gitk</code>. (Both also accept <code>--all</code>, which will show
all the branches instead of just the current one.)</p>
<p>For branch names and a compact view, try:</p>
<div class="code"><pre class="code literal-block">git log --graph --decorate --oneline
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I have 3 aliases <em>(and 4 alias-aliases for quick usage)</em> that I normally throw
in my <code>~/.gitconfig</code> file:</p>
<div class="code"><pre class="code literal-block"><span class="k">[alias]</span>
<span class="w">    </span><span class="na">lg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">lg1</span>
<span class="w">    </span><span class="na">lg1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">lg1-specific --all</span>
<span class="w">    </span><span class="na">lg2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">lg2-specific --all</span>
<span class="w">    </span><span class="na">lg3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">lg3-specific --all</span>

<span class="w">    </span><span class="na">lg1-specific</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(auto)%d%C(reset)'</span>
<span class="w">    </span><span class="na">lg2-specific</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(auto)%d%C(reset)%n''          %C(white)%s%C(reset) %C(dim white)- %an%C(reset)'</span>
<span class="w">    </span><span class="na">lg3-specific</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset) %C(bold cyan)(committed: %cD)%C(reset) %C(auto)%d%C(reset)%n''          %C(white)%s%C(reset)%n''          %C(dim white)- %an &lt;%ae&gt; %C(reset) %C(dim white)(committer: %cn &lt;%ce&gt;)%C(reset)'</span>
</pre></div>

<p><code>git lg</code>/<code>git lg1</code> looks like this:</p>
<p><img alt="git lg1" src="images/EZLoL.png"></p>
<p><code>git lg2</code> looks like this:</p>
<p><img alt="git lg2" src="images/eZAxo.png"></p>
<p>and <code>git lg3</code> looks like this:</p>
<p><img alt="git lg3" src="images/FihIx.png"></p>
<p>It should be noted that this isn't meant as a end-all-be-all solution— it's a
template for you to change, add to and fix up to your liking. If you want to
use these, my recommendation is to:</p>
<ol>
<li>Add them to your <code>.gitconfig</code>,</li>
<li>Customize to your liking (different color choices, different line arrangements for the 2- and 3-line versions, etc.),</li>
<li>And then save a copy to a Gist or other code snippet tool so you can copy &amp; paste it into <code>.gitconfig</code>s in the future <em>(or alternatively version control your dotfiles, of course)</em>.</li>
</ol>
<p><em>Note: Answer copied from and improved upon the answer at
stackoverflow.com/questions/1057564/pretty-git-branch-graphs since it's far
more appropriate here than it was there. Left the copy on the other question
for historical reasons— it's closed now, and the answer's referenced by a
bunch of other answers.</em></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-unload-reload-a-python-module/" class="u-url">How do I unload (reload) a Python module?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-unload-reload-a-python-module/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:39:49+08:00" itemprop="datePublished" title="2023-02-17 06:39">2023-02-17 06:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a long-running Python server and would like to be able to upgrade a
service without restarting the server. What's the best way do do this?</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span> <span class="n">foo</span><span class="o">.</span><span class="n">py</span> <span class="n">has</span> <span class="n">changed</span><span class="p">:</span>
    <span class="n">unimport</span> <span class="n">foo</span>  <span class="o">&lt;--</span> <span class="n">How</span> <span class="n">do</span> <span class="n">I</span> <span class="n">do</span> <span class="n">this</span><span class="err">?</span>
    <span class="kn">import</span> <span class="nn">foo</span>
    <span class="n">myfoo</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">Foo</span><span class="p">()</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can reload a module when it has already been imported by using
<code>importlib.reload()</code>:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">reload</span>  <span class="c1"># Python 3.4+</span>
<span class="kn">import</span> <span class="nn">foo</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="c1"># Do some things.</span>
    <span class="k">if</span> <span class="n">is_changed</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="n">reload</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</pre></div>

<p>In Python 2, <code>reload</code> was a builtin. In Python 3, it was moved to the <code>imp</code>
module. In 3.4, <code>imp</code> was deprecated in favor of <code>importlib</code>. When targeting 3
or later, either reference the appropriate module when calling <code>reload</code> or
import it.</p>
<p>I think that this is what you want. Web servers like Django's development
server use this so that you can see the effects of your code changes without
restarting the server process itself.</p>
<p>To quote from the docs:</p>
<blockquote>
<ul>
<li>Python module’s code is recompiled and the module-level code re-
executed, defining a new set of objects which are bound to names in the
module’s dictionary by reusing the loader which originally loaded the
module. The <code>init</code> function of extension modules is not called a second
time.</li>
<li>As with all other objects in Python the old objects are only reclaimed
after their reference counts drop to zero.</li>
<li>The names in the module namespace are updated to point to any new or
changed objects.</li>
<li>Other references to the old objects (such as names external to the
module) are not rebound to refer to the new objects and must be updated in
each namespace where they occur if that is desired.
</li>
</ul>
</blockquote>
<p>As you noted in your question, you'll have to reconstruct <code>Foo</code> objects if the
<code>Foo</code> class resides in the <code>foo</code> module.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In Python 3.0–3.3 you would use: <code>imp.reload(module)</code></p>
<p>The BDFL has answered this question.</p>
<p>However, <code>imp</code> was deprecated in 3.4, in favour of <code>importlib</code> (thanks
@Stefan!).</p>
<p>I <em>think</em> , therefore, you’d now use <code>importlib.reload(module)</code>, although I’m
not sure.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-432.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-430.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
