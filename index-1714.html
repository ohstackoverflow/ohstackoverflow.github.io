<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1714) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1714.html">
<link rel="prev" href="index-1715.html" type="text/html">
<link rel="next" href="index-1713.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-map-keys-to-array/" class="u-url">How to convert Map keys to array?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-map-keys-to-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:37:48+08:00" itemprop="datePublished" title="2023-03-03 07:37">2023-03-03 07:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Lets say I have the following map:</p>
<div class="code"><pre class="code literal-block">let myMap = new Map().set('a', 1).set('b', 2);
</pre></div>

<p>And I want to obtain <code>['a', 'b']</code> based on the above. My current solution
seems so long and horrible.</p>
<div class="code"><pre class="code literal-block"><span class="nv">let</span><span class="w"> </span><span class="nv">myMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Map</span><span class="ss">()</span>.<span class="nv">set</span><span class="ss">(</span><span class="s1">'a'</span>,<span class="w"> </span><span class="mi">1</span><span class="ss">)</span>.<span class="nv">set</span><span class="ss">(</span><span class="s1">'b'</span>,<span class="w"> </span><span class="mi">2</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">let</span><span class="w"> </span><span class="nv">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[]<span class="c1">;</span>
<span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">let</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">myMap</span><span class="ss">)</span>
<span class="w">  </span><span class="nv">keys</span>.<span class="nv">push</span><span class="ss">(</span><span class="nv">key</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">console</span>.<span class="nv">log</span><span class="ss">(</span><span class="nv">keys</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>There must be a better way, no?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>Map.keys()</code> returns a <code>MapIterator</code> object which can be converted to <code>Array</code>
using <code>Array.from</code>:</p>
<div class="code"><pre class="code literal-block">let keys = Array.from( myMap.keys() );
// ["a", "b"]
</pre></div>

<p>EDIT: you can also convert iterable object to array using spread syntax</p>
<div class="code"><pre class="code literal-block">let keys =[ ...myMap.keys() ];
// ["a", "b"]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use the spread operator to convert <strong>Map.keys()</strong> iterator in an
Array.</p>
<div class="code"><pre class="code literal-block">let myMap = new Map().set('a', 1).set('b', 2).set(983, true)
let keys = [...myMap.keys()]
console.log(keys)
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-array-of-object-s-keys/" class="u-url">Get array of object's keys</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-array-of-object-s-keys/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:37:25+08:00" itemprop="datePublished" title="2023-03-03 07:37">2023-03-03 07:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would like to get the keys of a JavaScript object as an array, either in
jQuery or pure JavaScript.</p>
<p>Is there a less verbose way than this?</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">'alpha'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'puffin'</span><span class="p">,</span><span class="w"> </span><span class="s1">'beta'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'beagle'</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">foo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">keys</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Use <code>Object.keys</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s1">'alpha'</span><span class="p">:</span><span class="w"> </span><span class="s1">'puffin'</span><span class="p">,</span>
<span class="w">  </span><span class="s1">'beta'</span><span class="p">:</span><span class="w"> </span><span class="s1">'beagle'</span>
<span class="p">};</span>

<span class="k">var</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">foo</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="p">[</span><span class="s1">'alpha'</span><span class="p">,</span><span class="w"> </span><span class="s1">'beta'</span><span class="p">]</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="p">(</span><span class="ow">or</span><span class="w"> </span><span class="n">maybe</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">order</span><span class="p">,</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">unordered</span><span class="p">)</span><span class="o">.</span>
</pre></div>

<p>This is an ES5 feature. This means it works in all modern browsers but will
not work in legacy browsers.</p>
<p>The ES5-shim has a implementation of <code>Object.keys</code> you can steal</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can use jQuery's <code>$.map</code>.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">'alpha'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'puffin'</span><span class="p">,</span><span class="w"> </span><span class="s1">'beta'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'beagle'</span><span class="w"> </span><span class="p">},</span>
<span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$.</span><span class="n">map</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">){</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/accessing-the-web-page-s-http-headers-in-javascript/" class="u-url">Accessing the web page's HTTP Headers in JavaScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/accessing-the-web-page-s-http-headers-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:37:00+08:00" itemprop="datePublished" title="2023-03-03 07:37">2023-03-03 07:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I access a page's HTTP response headers via JavaScript?</p>
<p>Related to <strong>this question</strong> , which was modified to ask about accessing two
specific HTTP headers.</p>
<blockquote>
<p><strong>Related:</strong><br>
 How do I access the HTTP request header fields via JavaScript?</p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<p>Unfortunately, there isn't an API to give you the HTTP response headers for
your initial page request. That was the original question posted here. It has
been repeatedly asked, too, because some people would like to get the actual
response headers of the original page request without issuing another one.</p>
<h2></h2>
<p>For AJAX Requests:</p>
<p>If an HTTP request is made over AJAX, it is possible to get the response
headers with the <strong><code>getAllResponseHeaders()</code></strong> method. It's part of the
XMLHttpRequest API. To see how this can be applied, check out the
<em><code>fetchSimilarHeaders()</code></em> function below. Note that this is a work-around to
the problem that won't be reliable for some applications.</p>
<div class="code"><pre class="code literal-block">myXMLHttpRequest.getAllResponseHeaders();
</pre></div>

<ul>
<li>
<p>The API was specified in the following candidate recommendation for XMLHttpRequest: XMLHttpRequest - W3C Candidate Recommendation 3 August 2010</p>
</li>
<li>
<p>Specifically, the <code>getAllResponseHeaders()</code> method was specified in the following section: w3.org: <code>XMLHttpRequest</code>: the <code>getallresponseheaders()</code> method</p>
</li>
<li>
<p>The MDN documentation is good, too: developer.mozilla.org: <code>XMLHttpRequest</code>.</p>
</li>
</ul>
<p>This will not give you information about the original page request's HTTP
response headers, but it could be used to make educated guesses about what
those headers were. More on that is described next.</p>
<h2></h2>
<p>Getting header values from the Initial Page Request:</p>
<p>This question was first asked several years ago, asking specifically about how
to get at the original HTTP response headers for the <em>current page</em> (i.e. the
same page inside of which the javascript was running). This is quite a
different question than simply getting the response headers for any HTTP
request. For the initial page request, the headers aren't readily available to
javascript. Whether the header values you need will be reliably and
sufficiently consistent if you request the same page again via AJAX will
depend on your particular application.</p>
<p>The following are a few suggestions for getting around that problem.</p>
<h3></h3>
<p>1. Requests on Resources which are largely static</p>
<p>If the response is largely static and the headers are not expected to change
much between requests, you could make an AJAX request for the same page you're
currently on and assume that they're they are the same values which were part
of the page's HTTP response. This could allow you to access the headers you
need using the nice XMLHttpRequest API described above.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">fetchSimilarHeaders</span><span class="w"> </span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">XMLHttpRequest</span><span class="p">();</span>
<span class="w">    </span><span class="n">request</span><span class="o">.</span><span class="n">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">XMLHttpRequest</span><span class="o">.</span><span class="n">DONE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="o">//</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">similar</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">request</span><span class="o">...</span>
<span class="w">            </span><span class="o">//</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">callback</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">typeof</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'function'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">getAllResponseHeaders</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="o">//</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Re</span><span class="o">-</span><span class="n">request</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">hope</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">which</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">came</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">guarantee</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Since</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">HEAD</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sufficient</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span>
<span class="w">    </span><span class="n">request</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">'HEAD'</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="bp">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">request</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb nb-Type">null</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>This approach will be problematic if you truly have to rely on the values
being consistent between requests, since you can't fully guarantee that they
are the same. It's going to depend on your specific application and whether
you know that the value you need is something that won't be changing from one
request to the next.</p>
<h3></h3>
<p>2. Make Inferences</p>
<p>There are <strong>some BOM properties</strong> (Browser Object Model) which the browser
determines by looking at the headers. Some of these properties reflect HTTP
headers directly (e.g. <code>navigator.userAgent</code> is set to the value of the HTTP
<code>User-Agent</code> header field). By sniffing around the available properties you
might be able to find what you need, or some clues to indicate what the HTTP
response contained.</p>
<h3></h3>
<p>3. Stash them</p>
<p>If you control the server side, you can access any header you like as you
construct the full response. Values could be passed to the client with the
page, stashed in some markup or perhaps in an inlined JSON structure. If you
wanted to have every HTTP request header available to your javascript, you
could iterate through them on the server and send them back as hidden values
in the markup. It's probably not ideal to send header values this way, but you
could certainly do it for the specific value you need. This solution is
arguably inefficient, too, but it would do the job if you needed it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Unfortunately, there isn't an API to give you the HTTP response headers for
your initial page request. That was the original question posted here. It has
been repeatedly asked, too, because some people would like to get the actual
response headers of the original page request without issuing another one.</p>
<h2></h2>
<p>For AJAX Requests:</p>
<p>If an HTTP request is made over AJAX, it is possible to get the response
headers with the <strong><code>getAllResponseHeaders()</code></strong> method. It's part of the
XMLHttpRequest API. To see how this can be applied, check out the
<em><code>fetchSimilarHeaders()</code></em> function below. Note that this is a work-around to
the problem that won't be reliable for some applications.</p>
<div class="code"><pre class="code literal-block">myXMLHttpRequest.getAllResponseHeaders();
</pre></div>

<ul>
<li>
<p>The API was specified in the following candidate recommendation for XMLHttpRequest: XMLHttpRequest - W3C Candidate Recommendation 3 August 2010</p>
</li>
<li>
<p>Specifically, the <code>getAllResponseHeaders()</code> method was specified in the following section: w3.org: <code>XMLHttpRequest</code>: the <code>getallresponseheaders()</code> method</p>
</li>
<li>
<p>The MDN documentation is good, too: developer.mozilla.org: <code>XMLHttpRequest</code>.</p>
</li>
</ul>
<p>This will not give you information about the original page request's HTTP
response headers, but it could be used to make educated guesses about what
those headers were. More on that is described next.</p>
<h2></h2>
<p>Getting header values from the Initial Page Request:</p>
<p>This question was first asked several years ago, asking specifically about how
to get at the original HTTP response headers for the <em>current page</em> (i.e. the
same page inside of which the javascript was running). This is quite a
different question than simply getting the response headers for any HTTP
request. For the initial page request, the headers aren't readily available to
javascript. Whether the header values you need will be reliably and
sufficiently consistent if you request the same page again via AJAX will
depend on your particular application.</p>
<p>The following are a few suggestions for getting around that problem.</p>
<h3></h3>
<p>1. Requests on Resources which are largely static</p>
<p>If the response is largely static and the headers are not expected to change
much between requests, you could make an AJAX request for the same page you're
currently on and assume that they're they are the same values which were part
of the page's HTTP response. This could allow you to access the headers you
need using the nice XMLHttpRequest API described above.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">fetchSimilarHeaders</span><span class="w"> </span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">XMLHttpRequest</span><span class="p">();</span>
<span class="w">    </span><span class="n">request</span><span class="o">.</span><span class="n">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">XMLHttpRequest</span><span class="o">.</span><span class="n">DONE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="o">//</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">often</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">similar</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">request</span><span class="o">...</span>
<span class="w">            </span><span class="o">//</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">callback</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">typeof</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'function'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">getAllResponseHeaders</span><span class="p">());</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="o">//</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Re</span><span class="o">-</span><span class="n">request</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">hope</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">which</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">came</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">guarantee</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Since</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">HEAD</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sufficient</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span>
<span class="w">    </span><span class="n">request</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">'HEAD'</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="bp">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">request</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb nb-Type">null</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>This approach will be problematic if you truly have to rely on the values
being consistent between requests, since you can't fully guarantee that they
are the same. It's going to depend on your specific application and whether
you know that the value you need is something that won't be changing from one
request to the next.</p>
<h3></h3>
<p>2. Make Inferences</p>
<p>There are <strong>some BOM properties</strong> (Browser Object Model) which the browser
determines by looking at the headers. Some of these properties reflect HTTP
headers directly (e.g. <code>navigator.userAgent</code> is set to the value of the HTTP
<code>User-Agent</code> header field). By sniffing around the available properties you
might be able to find what you need, or some clues to indicate what the HTTP
response contained.</p>
<h3></h3>
<p>3. Stash them</p>
<p>If you control the server side, you can access any header you like as you
construct the full response. Values could be passed to the client with the
page, stashed in some markup or perhaps in an inlined JSON structure. If you
wanted to have every HTTP request header available to your javascript, you
could iterate through them on the server and send them back as hidden values
in the markup. It's probably not ideal to send header values this way, but you
could certainly do it for the specific value you need. This solution is
arguably inefficient, too, but it would do the job if you needed it.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1715.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1713.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
