<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1802) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1802.html">
<link rel="prev" href="index-1803.html" type="text/html">
<link rel="next" href="index-1801.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/determining-type-of-an-object-in-ruby/" class="u-url">Determining type of an object in ruby</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/determining-type-of-an-object-in-ruby/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:41:51+08:00" itemprop="datePublished" title="2023-03-03 09:41">2023-03-03 09:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'll use python as an example of what I'm looking for (you can think of it as
pseudocode if you don't know Python):</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; a = 1
&gt;&gt;&gt; type(a)
&lt;type 'int'&gt;
</pre></div>

<p>I know in ruby I can do :</p>
<div class="code"><pre class="code literal-block"><span class="mf">1.9.3</span><span class="n">p194</span><span class="w"> </span><span class="p">:</span><span class="mf">002</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">1.</span><span class="n">class</span>
<span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Fixnum</span>
</pre></div>

<p>But is this the proper way to determine the type of the object?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The proper way to determine the "type" of an object, which is a wobbly term in
the Ruby world, is to call <code>object.class</code>.</p>
<p>Since classes can inherit from other classes, if you want to determine if an
object is "of a particular type" you might call <code>object.is_a?(ClassName)</code> to
see if <code>object</code> is of type <code>ClassName</code> or derived from it.</p>
<p>Normally type checking is not done in Ruby, but instead objects are assessed
based on their ability to respond to particular methods, commonly called "Duck
typing". In other words, if it responds to the methods you want, there's no
reason to be particular about the type.</p>
<p>For example, <code>object.is_a?(String)</code> is too rigid since another class might
implement methods that convert it into a string, or make it behave identically
to how String behaves. <code>object.respond_to?(:to_s)</code> would be a better way to
test that the object in question does what you want.</p>
<p><br></p>
<h3>Suggest</h3>
<p>you could also try: <code>instance_of?</code></p>
<div class="code"><pre class="code literal-block">p 1.instance_of? Fixnum    #=&gt; True
p "1".instance_of? String  #=&gt; True
p [1,2].instance_of? Array #=&gt; True
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-last-commit-from-remote-git-repository/" class="u-url">Remove last commit from remote Git repository</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-last-commit-from-remote-git-repository/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:41:30+08:00" itemprop="datePublished" title="2023-03-03 09:41">2023-03-03 09:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I remove the last commit from a remote GIT repository such as I don't
see it any more in the log?</p>
<p>If for example <code>git log</code> gives me the following commit history</p>
<div class="code"><pre class="code literal-block"><span class="n">A</span><span class="o">-&gt;</span><span class="n">B</span><span class="o">-&gt;</span><span class="n">C</span><span class="o">-&gt;</span><span class="n">D</span><span class="p">[</span><span class="n">HEAD</span><span class="p">,</span><span class="w"> </span><span class="n">ORIGIN</span><span class="p">]</span>
</pre></div>

<p>how can I go to</p>
<div class="code"><pre class="code literal-block"><span class="n">A</span><span class="o">-&gt;</span><span class="n">B</span><span class="o">-&gt;</span><span class="n">C</span><span class="p">[</span><span class="n">HEAD</span><span class="p">,</span><span class="n">ORIGIN</span><span class="p">]</span>
</pre></div>

<p>Thanks.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Be careful that this will create an "alternate reality" for people who have
already fetch/pulled/cloned from the remote repository. But in fact, it's
quite simple:</p>
<div class="code"><pre class="code literal-block">git reset HEAD^ # remove commit locally
git push origin +HEAD # force-push the new HEAD commit
</pre></div>

<p>If you want to still have it in your local repository and only remove it from
the remote, then you can use:</p>
<div class="code"><pre class="code literal-block">git push origin +HEAD^:&lt;name of your branch, most likely 'master'&gt;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If nobody has pulled it, you can probably do something like</p>
<div class="code"><pre class="code literal-block">git push remote +branch^1:remotebranch
</pre></div>

<p>which will forcibly update the remote branch to the last but one commit of
your branch.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-do-an-or-filter-in-a-django-query/" class="u-url">How do I do an OR filter in a Django query?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-do-an-or-filter-in-a-django-query/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:41:05+08:00" itemprop="datePublished" title="2023-03-03 09:41">2023-03-03 09:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to be able to list the items that either a user has added (they are
listed as the creator) or the item has been approved.</p>
<p>So I basically need to select:</p>
<div class="code"><pre class="code literal-block">item.creator = owner or item.moderated = False
</pre></div>

<p>How would I do this in Django? (preferably with a filter or queryset).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There is <code>Q</code> objects that allow to complex lookups. Example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Q</span>

<span class="n">Item</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Q</span><span class="p">(</span><span class="n">creator</span><span class="o">=</span><span class="n">owner</span><span class="p">)</span> <span class="o">|</span> <span class="n">Q</span><span class="p">(</span><span class="n">moderated</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use the | operator to combine querysets directly without needing Q
objects:</p>
<div class="code"><pre class="code literal-block">result = Item.objects.filter(item.creator = owner) | Item.objects.filter(item.moderated = False)
</pre></div>

<p>(edit - I was initially unsure if this caused an extra query but @spookylukey
pointed out that lazy queryset evaluation takes care of that)</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1803.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1801.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
