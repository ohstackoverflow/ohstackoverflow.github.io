<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1092) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1092.html">
<link rel="prev" href="index-1093.html" type="text/html">
<link rel="next" href="index-1091.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-make-a-comment-in-a-dockerfile/" class="u-url">How do I make a comment in a Dockerfile?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-make-a-comment-in-a-dockerfile/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:02:54+08:00" itemprop="datePublished" title="2023-02-18 01:02">2023-02-18 01:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am writing a Dockerfile. Is there a way to make comments in this file?</p>
<p>Does Docker have a comment option that takes the rest of a line and ignores
it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use <code>#</code> at the beginning of a line to start a comment (whitespaces
before <code>#</code> are allowed):</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">stuff</span>
<span class="nv">RUN</span><span class="w"> </span><span class="nv">apt</span><span class="o">-</span><span class="nv">get</span><span class="w"> </span><span class="nv">update</span><span class="w"> </span>\
<span class="w">    </span>#<span class="w"> </span><span class="nv">install</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">packages</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">apt</span><span class="o">-</span><span class="nv">get</span><span class="w"> </span><span class="nv">install</span><span class="w"> </span><span class="o">-</span><span class="nv">y</span><span class="w"> </span><span class="nv">cron</span>
</pre></div>

<p><code>#</code>'s in the middle of a string are passed to the command itself, e.g.:</p>
<div class="code"><pre class="code literal-block">RUN echo 'we are running some # of cool things'
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>As others have mentioned, comments are referenced with a <code>#</code> and are
documented here. However, unlike some languages, the <code>#</code> must be at the
beginning of the line. If they occur part way through the line, they are
interpreted as an argument and may result in unexpected behavior.</p>
<div class="code"><pre class="code literal-block"># This is a comment

COPY test_dir target_dir # This is not a comment, it is an argument to COPY

RUN echo hello world # This is an argument to RUN but the shell may ignore it
</pre></div>

<p>It should also be noted that parser directives have recently been added to the
Dockerfile which have the same syntax as a comment. They need to appear at the
top of the file, before any other comments or commands. Originally, this
directive was added for changing the escape character to support Windows:</p>
<div class="code"><pre class="code literal-block"># escape=`

FROM microsoft/nanoserver
COPY testfile.txt c:\
RUN dir c:\
</pre></div>

<p>The first line, while it appears to be a comment, is a parser directive to
change the escape character to a backtick so that the <code>COPY</code> and <code>RUN</code>
commands can use the backslash in the path. A parser directive is also used
with BuildKit to change the frontend parser with a <code>syntax</code> line. See the
experimental syntax for more details on how this is being used in practice.</p>
<p>With a multi-line command, the commented lines are ignored, but you need to
comment out every line individually:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>cat<span class="w"> </span>Dockerfile
FROM<span class="w"> </span>busybox:latest
RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>first<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="se">\</span>
<span class="c1"># &amp;&amp; echo second command disabled \</span>
<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>third<span class="w"> </span><span class="nb">command</span>

$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>.
Sending<span class="w"> </span>build<span class="w"> </span>context<span class="w"> </span>to<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w">  </span><span class="m">23</span>.04kB
Step<span class="w"> </span><span class="m">1</span>/2<span class="w"> </span>:<span class="w"> </span>FROM<span class="w"> </span>busybox:latest
<span class="w"> </span>---&gt;<span class="w"> </span>59788edf1f3e
Step<span class="w"> </span><span class="m">2</span>/2<span class="w"> </span>:<span class="w"> </span>RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>first<span class="w"> </span><span class="nb">command</span><span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>third<span class="w"> </span><span class="nb">command</span>
<span class="w"> </span>---&gt;<span class="w"> </span>Running<span class="w"> </span><span class="k">in</span><span class="w"> </span>b1177e7b563d
first<span class="w"> </span><span class="nb">command</span>
third<span class="w"> </span><span class="nb">command</span>
Removing<span class="w"> </span>intermediate<span class="w"> </span>container<span class="w"> </span>b1177e7b563d
<span class="w"> </span>---&gt;<span class="w"> </span>5442cfe321ac
Successfully<span class="w"> </span>built<span class="w"> </span>5442cfe321ac
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-it-better-to-call-tolist-or-toarray-in-linq-queries/" class="u-url">Is it better to call ToList() or ToArray() in LINQ queries?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-it-better-to-call-tolist-or-toarray-in-linq-queries/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:02:23+08:00" itemprop="datePublished" title="2023-02-18 01:02">2023-02-18 01:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I often run into the case where I want to eval a query right where I declare
it. This is usually because I need to iterate over it multiple times <em>and</em> it
is expensive to compute. For example:</p>
<div class="code"><pre class="code literal-block"><span class="n">string</span><span class="w"> </span><span class="n">raw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"..."</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">raw</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="w">             </span><span class="n">let</span><span class="w"> </span><span class="n">ll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="o">.</span><span class="n">Trim</span><span class="p">()</span>
<span class="w">             </span><span class="n">where</span><span class="w"> </span><span class="o">!</span><span class="n">string</span><span class="o">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">ll</span><span class="p">)</span>
<span class="w">             </span><span class="n">select</span><span class="w"> </span><span class="n">ll</span><span class="p">)</span><span class="o">.</span><span class="n">ToList</span><span class="p">();</span>
</pre></div>

<p>This works fine. <strong>But</strong> if I am not going to modify the result, then I might
as well call <code>ToArray()</code> instead of <code>ToList()</code>.</p>
<p>I wonder however whether <code>ToArray()</code> is implemented by first calling
<code>ToList()</code> and is therefore less memory efficient than just calling
<code>ToList()</code>.</p>
<p>Am I crazy? Should I just call <code>ToArray()</code> - safe and secure in the knowledge
that the memory won't be allocated twice?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Unless you simply need an array to meet other constraints you should use
<code>ToList</code>. In the majority of scenarios <code>ToArray</code> will allocate more memory
than <code>ToList</code>.</p>
<p>Both use arrays for storage, but <code>ToList</code> has a more flexible constraint. It
needs the array to be at least as large as the number of elements in the
collection. If the array is larger, that is not a problem. However <code>ToArray</code>
needs the array to be sized exactly to the number of elements.</p>
<p>To meet this constraint <code>ToArray</code> often does one more allocation than
<code>ToList</code>. Once it has an array that is big enough it allocates an array which
is exactly the correct size and copies the elements back into that array. The
only time it can avoid this is when the grow algorithm for the array just
happens to coincide with the number of elements needing to be stored
(definitely in the minority).</p>
<p><strong>EDIT</strong></p>
<p>A couple of people have asked me about the consequence of having the extra
unused memory in the <code>List&lt;T&gt;</code> value.</p>
<p>This is a valid concern. If the created collection is long lived, is never
modified after being created and has a high chance of landing in the Gen2 heap
then you may be better off taking the extra allocation of <code>ToArray</code> up front.</p>
<p>In general though I find this to be the rarer case. It's much more common to
see a lot of <code>ToArray</code> calls which are immediately passed to other short lived
uses of memory in which case <code>ToList</code> is demonstrably better.</p>
<p>The key here is to profile, profile and then profile some more.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The performance difference will be insignificant, since <code>List&lt;T&gt;</code> is
implemented as a dynamically sized array. Calling either <code>ToArray()</code> (which
uses an internal <code>Buffer&lt;T&gt;</code> class to grow the array) or <code>ToList()</code> (which
calls the <code>List&lt;T&gt;(IEnumerable&lt;T&gt;)</code> constructor) will end up being a matter of
putting them into an array and growing the array until it fits them all.</p>
<p>If you desire concrete confirmation of this fact, check out the implementation
of the methods in question in Reflector -- you'll see they boil down to almost
identical code.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/using-jquery-to-test-if-an-input-has-focus/" class="u-url">Using jQuery to test if an input has focus</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/using-jquery-to-test-if-an-input-has-focus/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:01:56+08:00" itemprop="datePublished" title="2023-02-18 01:01">2023-02-18 01:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>On the front page of a site I am building, several <code>&lt;div&gt;</code>s use the CSS
<code>:hover</code> pseudo-class to add a border when the mouse is over them. One of the
<code>&lt;div&gt;</code>s contains a <code>&lt;form&gt;</code> which, using jQuery, will keep the border if an
input within it has focus. This works perfectly except that IE6 does not
support <code>:hover</code> on any elements other than <code>&lt;a&gt;</code>s. So, for this browser only
we are using jQuery to mimic CSS <code>:hover</code> using the <code>$(#element).hover()</code>
method. The only problem is, now that jQuery handles both the form <code>focus()</code>
<em>and</em> <code>hover()</code>, when an input has focus then the user moves the mouse in and
out, the border goes away.</p>
<p>I was thinking we could use some kind of conditional to stop this behavior.
For instance, if we tested on mouse out if any of the inputs had focus, we
could stop the border from going away. AFAIK, there is no <code>:focus</code> selector in
jQuery, so I'm not sure how to make this happen. Any ideas?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>jQuery 1.6+</h3>
<p>jQuery added a <code>:focus</code> selector so we no longer need to add it ourselves.
Just use <code>$("..").is(":focus")</code></p>
<h3>jQuery 1.5 and below</h3>
<p><strong>Edit:</strong> As times change, we find better methods for testing focus, the new
favorite is this gist from Ben Alman:</p>
<div class="code"><pre class="code literal-block"><span class="nv">jQuery</span>.<span class="nv">expr</span>[<span class="s1">':'</span>].<span class="nv">focus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">elem</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nv">document</span>.<span class="nv">activeElement</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="nv">elem</span>.<span class="nv">type</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">elem</span>.<span class="nv">href</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
}<span class="c1">;</span>
</pre></div>

<p>Quoted from Mathias Bynens here:</p>
<blockquote>
<p>Note that the <code>(elem.type || elem.href)</code> test was added to filter out false
positives like body. This way, we make sure to filter out all elements
except form controls and hyperlinks.</p>
</blockquote>
<p>You're defining a new selector. See Plugins/Authoring. Then you can do:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span>$<span class="ss">(</span><span class="s2">"..."</span><span class="ss">)</span>.<span class="nv">is</span><span class="ss">(</span><span class="s2">":focus"</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">  </span>...
}
</pre></div>

<p>or:</p>
<div class="code"><pre class="code literal-block"><span class="o">$(</span><span class="s2">"input:focus"</span><span class="o">)</span><span class="p">.</span><span class="nc">doStuff</span><span class="o">();</span>
</pre></div>

<h3>Any jQuery</h3>
<p>If you just want to figure out which element has focus, you can use</p>
<div class="code"><pre class="code literal-block">$(document.activeElement)
</pre></div>

<p>If you aren't sure if the version will be 1.6 or lower, you can add the
<code>:focus</code> selector if it is missing:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$.</span><span class="n">expr</span><span class="p">[</span><span class="s2">":"</span><span class="p">];</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">filters</span><span class="o">.</span><span class="n">focus</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="n">filters</span><span class="o">.</span><span class="n">focus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">activeElement</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">})(</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>CSS:</p>
<div class="code"><pre class="code literal-block"><span class="na">.focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">border-color:</span><span class="nf">red</span><span class="c1">;</span>
<span class="err">}</span>
</pre></div>

<p>JQuery:</p>
<div class="code"><pre class="code literal-block">  $(document).ready(function() {

    $('input').blur(function() {
        $('input').removeClass("focus");
      })
      .focus(function() {
        $(this).addClass("focus")
      });
  });
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1093.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1091.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
