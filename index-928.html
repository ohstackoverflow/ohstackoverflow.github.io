<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 928) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-928.html">
<link rel="prev" href="index-929.html" type="text/html">
<link rel="next" href="index-927.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-maximum-possible-length-of-a-query-string/" class="u-url">What is the maximum possible length of a query string?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-maximum-possible-length-of-a-query-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:45:27+08:00" itemprop="datePublished" title="2023-02-17 19:45">2023-02-17 19:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is it browser dependent? Also, do different web stacks have different limits
on how much data they can get from the request?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>RFC 2616 (Hypertext Transfer Protocol — HTTP/1.1) states there is no limit to
the length of a query string (section 3.2.1). RFC 3986 (Uniform Resource
Identifier — URI) also states there is no limit, but indicates the hostname is
limited to 255 characters because of DNS limitations (section 2.3.3).</p>
<p>While the specifications do not specify any maximum length, practical limits
are imposed by web browser and server software. Based on research which is
unfortunately no longer available on its original site (it leads to a shady
seeming loan site) but which can still be found at Internet Archive Of
Boutell.com:</p>
<ul>
<li>
<p><strong>Microsoft Edge (Browser)</strong><br>
The limit appears to be around 81578 characters. See URL Length limitation of
Microsoft Edge</p>
</li>
<li>
<p><strong>Chrome</strong><br>
It stops <em>displaying</em> the URL after 64k characters, but can serve more than
100k characters. No further testing was done beyond that.</p>
</li>
<li>
<p><strong>Firefox (Browser)</strong><br>
After 65,536 characters, the location bar no longer displays the URL in
Windows Firefox 1.5.x. However, longer URLs will work. No further testing was
done after 100,000 characters.</p>
</li>
<li>
<p><strong>Safari (Browser)</strong><br>
At least 80,000 characters will work. Testing was not tried beyond that.</p>
</li>
<li>
<p><strong>Opera (Browser)</strong><br>
At least 190,000 characters will work. Stopped testing after 190,000
characters. Opera 9 for Windows continued to display a fully editable,
copyable and pasteable URL in the location bar even at 190,000 characters.</p>
</li>
<li>
<p><strong>Microsoft Internet Explorer (Browser)</strong><br>
Microsoft states that the maximum length of a URL in Internet Explorer is
2,083 characters, with no more than 2,048 characters in the path portion of
the URL. Attempts to use URLs longer than this produced a clear error message
in Internet Explorer.</p>
</li>
<li>
<p><strong>Apache (Server)</strong><br>
Early attempts to measure the maximum URL length in web browsers bumped into a
server URL length limit of approximately 4,000 characters, after which Apache
produces a "413 Entity Too Large" error. The current up to date Apache build
found in Red Hat Enterprise Linux 4 was used. The official Apache
documentation only mentions an 8,192-byte limit on an individual field in a
request.</p>
</li>
<li>
<p><strong>Microsoft Internet Information Server (Server)</strong><br>
The default limit is 16,384 characters (yes, Microsoft's web server accepts
longer URLs than Microsoft's web browser). This is configurable.</p>
</li>
<li>
<p><strong>Perl HTTP::Daemon (Server)</strong><br>
Up to 8,000 bytes will work. Those constructing web application servers with
Perl's HTTP::Daemon module will encounter a 16,384 byte limit on the combined
size of all HTTP request headers. This does not include POST-method form data,
file uploads, etc., but it does include the URL. In practice this resulted in
a 413 error when a URL was significantly longer than 8,000 characters. This
limitation can be easily removed. Look for all occurrences of 16x1024 in
Daemon.pm and replace them with a larger value. Of course, this does increase
your exposure to denial of service attacks.</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Recommended Security and Performance Max: 2048 CHARACTERS</strong></p>
<p>Although officially there is no limit specified by RFC 2616, many security
protocols and recommendations state that maxQueryStrings on a server should be
set to a maximum character limit of 1024. While the entire URL, including the
querystring, should be set to a max of 2048 characters. This is to prevent the
Slow HTTP Request DDOS/DOS attack vulnerability on a web server. This
typically shows up as a vulnerability on the Qualys Web Application Scanner
and other security scanners.</p>
<p>Please see the below example code for Windows IIS Servers with Web.config:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;system.webServer&gt;</span>
<span class="nt">&lt;security&gt;</span>
<span class="w">    </span><span class="nt">&lt;requestFiltering&gt;</span>
<span class="w">        </span><span class="nt">&lt;requestLimits</span><span class="w"> </span><span class="na">maxQueryString=</span><span class="s">"1024"</span><span class="w"> </span><span class="na">maxUrl=</span><span class="s">"2048"</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="nt">&lt;headerLimits&gt;</span>
<span class="w">              </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">header=</span><span class="s">"Content-type"</span><span class="w"> </span><span class="na">sizeLimit=</span><span class="s">"100"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">           </span><span class="nt">&lt;/headerLimits&gt;</span>
<span class="w">        </span><span class="nt">&lt;/requestLimits&gt;</span>
<span class="w">     </span><span class="nt">&lt;/requestFiltering&gt;</span>
<span class="nt">&lt;/security&gt;</span>
<span class="nt">&lt;/system.webServer&gt;</span>
</pre></div>

<p>This would also work on a server level using machine.config.</p>
<p>This is just for windows operating system based servers, I'm not sure if there
is a similar issue on apache or other servers.</p>
<p>Note: Limiting query string and URL length may not completely prevent Slow
HTTP Requests DDOS attack but it is one step you can take to prevent it.</p>
<p><strong>Adding a reference as requested in the comments:</strong>
https://www.raiseupwa.com/writing-tips/what-is-the-limit-of-query-string-in-
asp-net/</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-clear-the-sql-server-transaction-log/" class="u-url">How do you clear the SQL Server transaction log?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-clear-the-sql-server-transaction-log/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:44:59+08:00" itemprop="datePublished" title="2023-02-17 19:44">2023-02-17 19:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm not a SQL expert, and I'm reminded of the fact every time I need to do
something beyond the basics. I have a test database that is not large in size,
but the transaction log definitely is. How do I clear out the transaction log?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Making a log file smaller should really be reserved for scenarios where it
encountered unexpected growth which you do not expect to happen again. If the
log file will grow to the same size again, not very much is accomplished by
shrinking it temporarily. Now, depending on the recovery goals of your
database, these are the actions you should take.</p>
<h2>First, take a full backup</h2>
<p>Never make any changes to your database without ensuring you can restore it
should something go wrong.</p>
<h2>If you care about point-in-time recovery</h2>
<p>(And by point-in-time recovery, I mean you care about being able to restore to
anything other than a full or differential backup.)</p>
<p>Presumably your database is in <code>FULL</code> recovery mode. If not, then make sure it
is:</p>
<div class="code"><pre class="code literal-block">ALTER DATABASE testdb SET RECOVERY FULL;
</pre></div>

<p>Even if you are taking regular full backups, the log file will grow and grow
until you perform a <em>log</em> backup - this is for your protection, not to
needlessly eat away at your disk space. You should be performing these log
backups quite frequently, according to your recovery objectives. For example,
if you have a business rule that states you can afford to lose no more than 15
minutes of data in the event of a disaster, you should have a job that backs
up the log every 15 minutes. Here is a script that will generate timestamped
file names based on the current time (but you can also do this with
maintenance plans etc., just don't choose any of the shrink options in
maintenance plans, they're awful).</p>
<div class="code"><pre class="code literal-block"><span class="k">DECLARE</span><span class="w"> </span><span class="nv">@path</span><span class="w"> </span><span class="nc">NVARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="s1">'\\backup_share\log\testdb_'</span><span class="w"> </span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nf">CONVERT</span><span class="p">(</span><span class="nc">CHAR</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w"> </span><span class="nf">GETDATE</span><span class="p">(),</span><span class="w"> </span><span class="mi">112</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'_'</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="nf">REPLACE</span><span class="p">(</span><span class="nf">CONVERT</span><span class="p">(</span><span class="nc">CHAR</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w"> </span><span class="nf">GETDATE</span><span class="p">(),</span><span class="w"> </span><span class="mi">108</span><span class="p">),</span><span class="s1">':'</span><span class="p">,</span><span class="s1">''</span><span class="p">)</span>
<span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="s1">'.trn'</span><span class="p">;</span>

<span class="k">BACKUP</span><span class="w"> </span><span class="nf">LOG</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="k">DISK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@path</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="n">INIT</span><span class="p">,</span><span class="w"> </span><span class="n">COMPRESSION</span><span class="p">;</span>
</pre></div>

<p>Note that <code>\\backup_share\</code> should be on a different machine that represents a
different underlying storage device. Backing these up to the same machine (or
to a different machine that uses the same underlying disks, or a different VM
that's on the same physical host) does not really help you, since if the
machine blows up, you've lost your database <em>and</em> its backups. Depending on
your network infrastructure it may make more sense to backup locally and then
transfer them to a different location behind the scenes; in either case, you
want to get them off the primary database machine as quickly as possible.</p>
<p>Now, once you have regular log backups running, it should be reasonable to
shrink the log file to something more reasonable than whatever it's blown up
to now. This does <em>not</em> mean running <code>SHRINKFILE</code> over and over again until
the log file is 1 MB - even if you are backing up the log frequently, it still
needs to accommodate the sum of any concurrent transactions that can occur.
Log file autogrow events are expensive, since SQL Server has to zero out the
files (unlike data files when instant file initialization is enabled), and
user transactions have to wait while this happens. You want to do this grow-
shrink-grow-shrink routine as little as possible, and you certainly don't want
to make your users pay for it.</p>
<p>Note that you may need to back up the log twice before a shrink is possible
(thanks Robert).</p>
<p>So, you need to come up with a practical size for your log file. Nobody here
can tell you what that is without knowing a lot more about your system, but if
you've been frequently shrinking the log file and it has been growing again, a
good watermark is probably 10-50% higher than the largest it's been. Let's say
that comes to 200 MB, and you want any subsequent autogrowth events to be 50
MB, then you can adjust the log file size this way:</p>
<div class="code"><pre class="code literal-block"><span class="k">USE</span><span class="w"> </span><span class="o">[</span><span class="n">master</span><span class="o">]</span><span class="p">;</span>
<span class="k">GO</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">Test1</span><span class="w"> </span>
<span class="w">  </span><span class="k">MODIFY</span><span class="w"> </span><span class="k">FILE</span>
<span class="w">  </span><span class="p">(</span><span class="n">NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yourdb_log</span><span class="p">,</span><span class="w"> </span><span class="k">SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="n">MB</span><span class="p">,</span><span class="w"> </span><span class="n">FILEGROWTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span><span class="n">MB</span><span class="p">);</span>
<span class="k">GO</span>
</pre></div>

<p>Note that if the log file is currently &gt; 200 MB, you may need to run this
first:</p>
<div class="code"><pre class="code literal-block"><span class="k">USE</span><span class="w"> </span><span class="n">yourdb</span><span class="p">;</span>
<span class="k">GO</span>
<span class="k">DBCC</span><span class="w"> </span><span class="n">SHRINKFILE</span><span class="p">(</span><span class="n">yourdb_log</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<span class="k">GO</span>
</pre></div>

<h2>If you don't care about point-in-time recovery</h2>
<p>If this is a test database, and you don't care about point-in-time recovery,
then you should make sure that your database is in <code>SIMPLE</code> recovery mode.</p>
<div class="code"><pre class="code literal-block">ALTER DATABASE testdb SET RECOVERY SIMPLE;
</pre></div>

<p>Putting the database in <code>SIMPLE</code> recovery mode will make sure that SQL Server
re-uses portions of the log file (essentially phasing out inactive
transactions) instead of growing to keep a record of <em>all</em> transactions (like
<code>FULL</code> recovery does until you back up the log). <code>CHECKPOINT</code> events will help
control the log and make sure that it doesn't need to grow unless you generate
a lot of t-log activity between <code>CHECKPOINT</code>s.</p>
<p>Next, you should make absolute sure that this log growth was truly due to an
abnormal event (say, an annual spring cleaning or rebuilding your biggest
indexes), and not due to normal, everyday usage. If you shrink the log file to
a ridiculously small size, and SQL Server just has to grow it again to
accommodate your normal activity, what did you gain? Were you able to make use
of that disk space you freed up only temporarily? If you need an immediate
fix, then you can run the following:</p>
<div class="code"><pre class="code literal-block"><span class="k">USE</span><span class="w"> </span><span class="n">yourdb</span><span class="p">;</span>
<span class="k">GO</span>
<span class="k">CHECKPOINT</span><span class="p">;</span>
<span class="k">GO</span>
<span class="k">CHECKPOINT</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">twice</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="n">wrap</span><span class="o">-</span><span class="n">around</span>
<span class="k">GO</span>
<span class="k">DBCC</span><span class="w"> </span><span class="n">SHRINKFILE</span><span class="p">(</span><span class="n">yourdb_log</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">MBs</span>
<span class="k">GO</span>
</pre></div>

<p>Otherwise, set an appropriate size and growth rate. As per the example in the
point-in-time recovery case, you can use the same code and logic to determine
what file size is appropriate and set reasonable autogrowth parameters.</p>
<h2>Some things you don't want to do</h2>
<ul>
<li>
<p><strong>Back up the log with<code>TRUNCATE_ONLY</code> option and then <code>SHRINKFILE</code></strong>. For one, this <code>TRUNCATE_ONLY</code> option has been deprecated and is no longer available in current versions of SQL Server. Second, if you are in <code>FULL</code> recovery model, this will destroy your log chain and require a new, full backup.</p>
</li>
<li>
<p><strong>Detach the database, delete the log file, and re-attach</strong>. I can't emphasize how dangerous this can be. Your database may not come back up, it may come up as suspect, you may have to revert to a backup (if you have one), etc. etc.</p>
</li>
<li>
<p><strong>Use the "shrink database" option</strong>. <code>DBCC SHRINKDATABASE</code> and the maintenance plan option to do the same are bad ideas, especially if you really only need to resolve a log problem issue. Target the file you want to adjust and adjust it independently, using <code>DBCC SHRINKFILE</code> or <code>ALTER DATABASE ... MODIFY FILE</code> (examples above).</p>
</li>
<li>
<p><strong>Shrink the log file to 1 MB</strong>. This looks tempting because, hey, SQL Server will let me do it in certain scenarios, and look at all the space it frees! Unless your database is read only (and it is, you should mark it as such using <code>ALTER DATABASE</code>), this will absolutely just lead to many unnecessary growth events, as the log has to accommodate current transactions regardless of the recovery model. What is the point of freeing up that space temporarily, just so SQL Server can take it back slowly and painfully?</p>
</li>
<li>
<p><strong>Create a second log file</strong>. This will provide temporarily relief for the drive that has filled your disk, but this is like trying to fix a punctured lung with a band-aid. You should deal with the problematic log file directly instead of just adding another potential problem. Other than redirecting some transaction log activity to a different drive, a second log file really does nothing for you (unlike a second data file), since only one of the files can ever be used at a time. Paul Randal also explains why multiple log files can bite you later.</p>
</li>
</ul>
<h2>Be proactive</h2>
<p>Instead of shrinking your log file to some small amount and letting it
constantly autogrow at a small rate on its own, set it to some reasonably
large size (one that will accommodate the sum of your largest set of
concurrent transactions) and set a reasonable autogrow setting as a fallback,
so that it doesn't have to grow multiple times to satisfy single transactions
and so that it will be relatively rare for it to ever have to grow during
normal business operations.</p>
<p>The worst possible settings here are 1 MB growth or 10% growth. Funny enough,
these are the defaults for SQL Server (which I've complained about and asked
for changes to no avail) - 1 MB for data files, and 10% for log files. The
former is much too small in this day and age, and the latter leads to longer
and longer events every time (say, your log file is 500 MB, first growth is 50
MB, next growth is 55 MB, next growth is 60.5 MB, etc. etc. - and on slow I/O,
believe me, you will really notice this curve).</p>
<h2>Further reading</h2>
<p>Please don't stop here; while much of the advice you see out there about
shrinking log files is inherently bad and even potentially disastrous, there
are some people who care more about data integrity than freeing up disk space.</p>
<p>A blog post I wrote in 2009, when I saw a few "here's how to shrink the log
file" posts spring up.</p>
<p>A blog post Brent Ozar wrote four years ago, pointing to multiple resources,
in response to a SQL Server Magazine article that should <em>not</em> have been
published.</p>
<p>A blog post by Paul Randal explaining why t-log maintenance is important and
why you shouldn't shrink your data files, either.</p>
<p>Mike Walsh has a great answer covering some of these aspects too, including
reasons why you might not be able to shrink your log file immediately.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="o">--</span><span class="w"> </span><span class="n">DON</span><span class="err">'</span><span class="n">T</span><span class="w"> </span><span class="n">FORGET</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="k">BACKUP</span><span class="w"> </span><span class="n">THE</span><span class="w"> </span><span class="n">DB</span><span class="w"> </span><span class="err">:</span><span class="n">D</span><span class="w"> </span><span class="p">(</span><span class="k">Check</span><span class="w"> </span><span class="o">[</span><span class="n">here</span><span class="o">][</span><span class="n">1</span><span class="o">]</span><span class="p">)</span>


<span class="k">USE</span><span class="w"> </span><span class="n">AdventureWorks2008R2</span><span class="p">;</span>
<span class="k">GO</span>
<span class="o">--</span><span class="w"> </span><span class="k">Truncate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">recovery</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">SIMPLE</span><span class="p">.</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">AdventureWorks2008R2</span>
<span class="k">SET</span><span class="w"> </span><span class="n">RECOVERY</span><span class="w"> </span><span class="n">SIMPLE</span><span class="p">;</span>
<span class="k">GO</span>
<span class="o">--</span><span class="w"> </span><span class="n">Shrink</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">truncated</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">MB</span><span class="p">.</span>
<span class="k">DBCC</span><span class="w"> </span><span class="n">SHRINKFILE</span><span class="w"> </span><span class="p">(</span><span class="n">AdventureWorks2008R2_Log</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="k">GO</span>
<span class="o">--</span><span class="w"> </span><span class="n">Reset</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">recovery</span><span class="w"> </span><span class="n">model</span><span class="p">.</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">AdventureWorks2008R2</span>
<span class="k">SET</span><span class="w"> </span><span class="n">RECOVERY</span><span class="w"> </span><span class="k">FULL</span><span class="p">;</span>
<span class="k">GO</span>
</pre></div>

<p>From: <em>DBCC SHRINKFILE (Transact-SQL)</em></p>
<p>You may want to backup first.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-static-and-shared-libraries/" class="u-url">Difference between static and shared libraries?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-static-and-shared-libraries/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:44:34+08:00" itemprop="datePublished" title="2023-02-17 19:44">2023-02-17 19:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between static and shared libraries?</p>
<p>I use Eclipse and there are several project types including Static Libraries
and Shared Libraries? Does one have an advantage over the other?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Shared libraries are .so (or in Windows .dll, or in OS X .dylib) files. All
the code relating to the library is in this file, and it is referenced by
programs using it at run-time. A program using a shared library only makes
reference to the code that it uses in the shared library.</p>
<p>Static libraries are .a (or in Windows .lib) files. All the code relating to
the library is in this file, and it is directly linked into the program at
compile time. A program using a static library takes copies of the code that
it uses from the static library and makes it part of the program. [Windows
also has .lib files which are used to reference .dll files, but they act the
same way as the first one].</p>
<p>There are advantages and disadvantages in each method:</p>
<ul>
<li>
<p>Shared libraries reduce the amount of code that is duplicated in each program that makes use of the library, keeping the binaries small. It also allows you to replace the shared object with one that is functionally equivalent, but may have added performance benefits without needing to recompile the program that makes use of it. Shared libraries will, however have a small additional cost for the execution of the functions as well as a run-time loading cost as all the symbols in the library need to be connected to the things they use. Additionally, shared libraries can be loaded into an application at run-time, which is the general mechanism for implementing binary plug-in systems.</p>
</li>
<li>
<p>Static libraries increase the overall size of the binary, but it means that you don't need to carry along a copy of the library that is being used. As the code is connected at compile time there are not any additional run-time loading costs. The code is simply there.</p>
</li>
</ul>
<p>Personally, I prefer shared libraries, but use static libraries when needing
to ensure that the binary does not have many external dependencies that may be
difficult to meet, such as specific versions of the C++ standard library or
specific versions of the Boost C++ library.</p>
<p><br></p>
<h3>Suggest</h3>
<p>A static library is like a bookstore, and a shared library is like... a
library. With the former, you get your own copy of the book/function to take
home; with the latter you and everyone else go to the library to use the same
book/function. So anyone who wants to use the (shared) library needs to know
where it is, because you have to "go get" the book/function. With a static
library, the book/function is yours to own, and you keep it within your
home/program, and once you have it you don't care where or when you got it.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-929.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-927.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
