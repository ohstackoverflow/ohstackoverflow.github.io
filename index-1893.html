<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1893) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1893.html">
<link rel="prev" href="index-1894.html" type="text/html">
<link rel="next" href="index-1892.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/change-values-in-array-when-doing-foreach/" class="u-url">change values in array when doing foreach</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/change-values-in-array-when-doing-foreach/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:53:59+08:00" itemprop="datePublished" title="2023-03-03 11:53">2023-03-03 11:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"one"</span><span class="p">,</span><span class="s2">"two"</span><span class="p">,</span><span class="s2">"three"</span><span class="p">];</span>

<span class="n">arr</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">part</span><span class="p">){</span>
<span class="w">  </span><span class="n">part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="p">})</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>

<p>The array is still with it's original values, is there any way to have writing
access to array's elements from iterating function ?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The callback is passed the element, the index, and the array itself.</p>
<div class="code"><pre class="code literal-block"><span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">,</span><span class="w"> </span><span class="n">theArray</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">theArray</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"hello world"</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p><em>edit</em> — as noted in a comment, the <code>.forEach()</code> function can take a second
argument, which will be used as the value of <code>this</code> in each call to the
callback:</p>
<div class="code"><pre class="code literal-block"><span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">this</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"hello world"</span><span class="p">;</span>
<span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="n">arr</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">this</span>
</pre></div>

<p>That second example shows <code>arr</code> itself being set up as <code>this</code> in the
callback.One might think that the array involved in the <code>.forEach()</code> call
might be the <em>default</em> value of <code>this</code>, but for whatever reason it's not;
<code>this</code> will be <code>undefined</code> if that second argument is not provided.</p>
<p>(Note: the above stuff about <code>this</code> does not apply if the callback is a <code>=&gt;</code>
function, because <code>this</code> is never bound to anything when such functions are
invoked.)</p>
<p>Also it's important to remember that there is a whole family of similar
utilities provided on the Array prototype, and many questions pop up on
Stackoverflow about one function or another such that the best solution is to
simply pick a different tool. You've got:</p>
<ul>
<li>
<code>forEach</code> for doing a thing with or to every entry in an array;</li>
<li>
<code>filter</code> for producing a new array containing only qualifying entries;</li>
<li>
<code>map</code> for making a one-to-one new array by transforming an existing array;</li>
<li>
<code>some</code> to check whether at least one element in an array fits some description;</li>
<li>
<code>every</code> to check whether <em>all</em> entries in an array match a description;</li>
<li>
<code>find</code> to look for a value in an array</li>
</ul>
<p>and so on. MDN link</p>
<p><br></p>
<h3>Suggest</h3>
<p>Let's <em>try</em> to keep it simple and discuss how it is actually working. It has
to do with variable types and function parameters.</p>
<p>Here is your code we are talking about:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"one"</span><span class="p">,</span><span class="s2">"two"</span><span class="p">,</span><span class="s2">"three"</span><span class="p">];</span>

<span class="n">arr</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">part</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="p">})</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>

<p>First off, here is where you should be reading about
Array.prototype.forEach():</p>
<p>https://developer.mozilla.org/en-
US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach</p>
<p>Second, let's talk briefly about value types in JavaScript.</p>
<p><strong>Primitives</strong> (undefined, null, String, Boolean, Number) store an actual
value.</p>
<p>ex: <code>var x = 5;</code></p>
<p><strong>Reference Types</strong> (custom objects) store the memory location of the object.</p>
<p>ex: <code>var xObj = { x : 5 };</code></p>
<p>And third, how function parameters work.</p>
<p>In functions, parameters are <strong>always</strong> passed by value.</p>
<p>Because <code>arr</code> is an array of Strings, it's an array of <strong>primitive</strong> objects,
which means they are stored by value.</p>
<p>So for your code above, this means that each time the forEach() iterates,
<code>part</code> is equal to the same value as <code>arr[index]</code>, <strong>but not the same
object</strong>.</p>
<p><code>part = "four";</code> will change the <code>part</code> variable, but will leave <code>arr</code> alone.</p>
<p>The following code will change the values you desire:</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">"one","two","three"</span><span class="o">]</span><span class="p">;</span>

<span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"four"</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>

<p>Now if array <code>arr</code> was an array of <strong>reference types</strong> , the following code
will work because reference types store a memory location of an object instead
of the actual object.</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">{ num : "one" }, { num : "two"}, { num : "three"}</span><span class="o">]</span><span class="p">;</span>

<span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">object</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">to</span>

<span class="w">  </span><span class="n">part</span><span class="p">.</span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"four"</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
</pre></div>

<p>The following illustrates that you can change <code>part</code> to point to a new object
while leaving the objects stored in <code>arr</code> alone:</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">{ num : "one" }, { num : "two"}, { num : "three"}</span><span class="o">]</span><span class="p">;</span>

<span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">object</span>
<span class="w">  </span><span class="n">part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/error-can-t-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysqld-sock-2-missing-var-run-mysqld-mysqld-sock/" class="u-url">error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)' -- Missing /var/run/mysqld/mysqld.sock</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/error-can-t-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysqld-sock-2-missing-var-run-mysqld-mysqld-sock/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:53:31+08:00" itemprop="datePublished" title="2023-03-03 11:53">2023-03-03 11:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>My problem started off with me not being able to log in as root any more on my
mysql install. I was attempting to run mysql without passwords turned on...
but whenever I ran the command</p>
<div class="code"><pre class="code literal-block"># mysqld_safe --skip-grant-tables &amp;
</pre></div>

<p>I would never get the prompt back. I was trying to follow these instructions
to recover the password.</p>
<p>The screen just looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="n">root</span><span class="err">@</span><span class="n">jj</span><span class="o">-</span><span class="n">SFF</span><span class="o">-</span><span class="n">PC</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="c1"># mysqld_safe --skip-grant-tables</span>
<span class="mi">120816</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">53</span><span class="w"> </span><span class="n">mysqld_safe</span><span class="w"> </span><span class="n">Logging</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">syslog</span><span class="o">.</span>
<span class="mi">120816</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">53</span><span class="w"> </span><span class="n">mysqld_safe</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">mysqld</span><span class="w"> </span><span class="n">daemon</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">databases</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span>
</pre></div>

<p>and I don't get a prompt to start typing the SQL commands to reset the
password.</p>
<p>When I kill it by pressing <code>CTRL</code> + <code>C</code>, I get the following message:</p>
<div class="code"><pre class="code literal-block"><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="s1">'Can'</span><span class="n">t</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="s1">'/var/run/mysqld/mysqld.sock'</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="s1">'</span>

<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">mysqld</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">socket</span><span class="p">:</span><span class="w"> </span><span class="s1">'/var/run/mysqld/mysqld.sock'</span><span class="w"> </span><span class="n">exists</span><span class="o">!</span>
</pre></div>

<p>If I retry the command and leave it long enough, I do get the following series
of messages:</p>
<div class="code"><pre class="code literal-block"><span class="n">root</span><span class="err">@</span><span class="n">jj</span><span class="o">-</span><span class="n">SFF</span><span class="o">-</span><span class="n">PC</span><span class="p">:</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="c1"># 120816 13:15:02 mysqld_safe Logging to syslog.</span>
<span class="mi">120816</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">02</span><span class="w"> </span><span class="n">mysqld_safe</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">mysqld</span><span class="w"> </span><span class="n">daemon</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">databases</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span>
<span class="mi">120816</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">42</span><span class="w"> </span><span class="n">mysqld_safe</span><span class="w"> </span><span class="n">mysqld</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">pid</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">pid</span><span class="w"> </span><span class="n">ended</span>

<span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="w">  </span><span class="n">Done</span><span class="w">                    </span><span class="n">mysqld_safe</span><span class="w"> </span><span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">grant</span><span class="o">-</span><span class="n">tables</span>
<span class="n">root</span><span class="err">@</span><span class="n">jj</span><span class="o">-</span><span class="n">SFF</span><span class="o">-</span><span class="n">PC</span><span class="p">:</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="c1">#</span>
</pre></div>

<p>But then if I try to log in as root by doing:</p>
<div class="code"><pre class="code literal-block"># mysql -u root
</pre></div>

<p>I get the following error message:</p>
<div class="code"><pre class="code literal-block"><span class="n">ERROR</span><span class="w"> </span><span class="mi">2002</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">Can</span><span class="s1">'t connect to local MySQL server through socket '</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">sock</span><span class="s1">' (2)</span>
</pre></div>

<p>I checked and <code>/var/run/mysqld/mysqld.sock</code> file doesn't not exist. The folder
does, but not the file.</p>
<p>Also, I don't know if this helps or not, but I ran <code>find / -name mysqld</code> and
it came up with:</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">folder</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">mysqld</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">file</span>
<span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">folder</span>
</pre></div>

<p>I don't know if this is normal or not. But I'm including this info just in
case it helps.</p>
<p><strong>I finally decided to uninstall and reinstall mysql.</strong></p>
<div class="code"><pre class="code literal-block">apt-get remove mysql-server
apt-get remove mysql-client
apt-get remove mysql-common
apt-get remove phpmyadmin
</pre></div>

<p>After reinstalling all packages again in the same order as above, during the
phpmyadmin install, I got the same error:</p>
<div class="code"><pre class="code literal-block"><span class="n">ERROR</span><span class="w"> </span><span class="mi">2002</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> </span><span class="n">Can</span><span class="s1">'t connect to local MySQL server through socket '</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">sock</span><span class="s1">' (2)</span>
</pre></div>

<p>So I tried again to uninstall/reinstall. This time, after I uninstalled the
packages, I also manually renamed all mysql files and directories to
<code>mysql.bad</code> in their respective locations.</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span><span class="w"> </span>
<span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">perl5</span><span class="o">/</span><span class="n">DBD</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">perl5</span><span class="o">/</span><span class="n">auto</span><span class="o">/</span><span class="n">DBD</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">dbconfig</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">internal</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apparmor</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">abstractions</span><span class="o">/</span><span class="n">mysql</span>
<span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mysql</span>
</pre></div>

<p>Then I tried to reinstall <code>mysql-server</code> and <code>mysql-client</code> again. But I've
noticed that it doesn't prompt me for a password. Isn't it supposed to ask for
an admin password?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To find all socket files on your system run:</p>
<div class="code"><pre class="code literal-block">sudo find / -type s
</pre></div>

<p>My Mysql server system had the socket open at <code>/var/lib/mysql/mysql.sock</code></p>
<p>Once you find where the socket is being opened, add or edit the line to your
/etc/my.cnf file with the path to the socket file:</p>
<div class="code"><pre class="code literal-block"><span class="n">socket</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">mysql</span><span class="o">.</span><span class="n">sock</span>
</pre></div>

<p>Sometimes the system startup script that launched the command line executable
specifies a flag <code>--socket=path</code>. This flag could override the my.cnf
location, and that would result in a socket not being found where the my.cnf
file indicates it should be. Then when you try to run the mysql command line
client, it will read my.cnf to find the socket, but it will not find it since
it deviates from where the server created one. So, Unless you care where the
socket resides, just changing the my.cnf to match should work.</p>
<p>Then, stop the mysqld process. How you do this will vary by system.</p>
<p>If you're super user in the linux system, try one of the following if you
don't know the specific method your Mysql setup uses:</p>
<ul>
<li><code>service mysqld stop</code></li>
<li><code>/etc/init.d/mysqld stop</code></li>
<li><code>mysqladmin -u root -p shutdown</code></li>
<li>Some systems aren't setup to have an elegant way to stop mysql (or for some reason mysql doesn't respond) and you can force terminate mysql with either: <ul>
<li>One step: <code>pkill -9 mysqld</code>
</li>
<li>Two step (least preferred): </li>
<li>Find the process id of mysql with either <code>pgrep mysql</code> or <code>ps aux | grep mysql | grep -v grep</code>
</li>
<li>Assuming the process id is <code>4969</code> terminate with <code>kill -9 4969</code>
</li>
</ul>
</li>
</ul>
<p>After you do this you might want to look for a pid file in <code>/var/run/mysqld/</code>
and delete it</p>
<p>Make sure the permissions on your socket is such that whatever user mysqld is
running as can read/write to it. An easy test is to open it up to full
read/write and see if it still works:</p>
<div class="code"><pre class="code literal-block"><span class="n">chmod</span><span class="w"> </span><span class="mi">777</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">sock</span>
</pre></div>

<p>If that fixes the issue, you can tailor the permissions and ownership of the
socket as needed based on your security settings.</p>
<p>Also, the directory the socket resides in has to be reachable by the user
running the mysqld process.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To find all socket files on your system run:</p>
<div class="code"><pre class="code literal-block">sudo find / -type s
</pre></div>

<p>My Mysql server system had the socket open at <code>/var/lib/mysql/mysql.sock</code></p>
<p>Once you find where the socket is being opened, add or edit the line to your
/etc/my.cnf file with the path to the socket file:</p>
<div class="code"><pre class="code literal-block"><span class="n">socket</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">mysql</span><span class="o">.</span><span class="n">sock</span>
</pre></div>

<p>Sometimes the system startup script that launched the command line executable
specifies a flag <code>--socket=path</code>. This flag could override the my.cnf
location, and that would result in a socket not being found where the my.cnf
file indicates it should be. Then when you try to run the mysql command line
client, it will read my.cnf to find the socket, but it will not find it since
it deviates from where the server created one. So, Unless you care where the
socket resides, just changing the my.cnf to match should work.</p>
<p>Then, stop the mysqld process. How you do this will vary by system.</p>
<p>If you're super user in the linux system, try one of the following if you
don't know the specific method your Mysql setup uses:</p>
<ul>
<li><code>service mysqld stop</code></li>
<li><code>/etc/init.d/mysqld stop</code></li>
<li><code>mysqladmin -u root -p shutdown</code></li>
<li>Some systems aren't setup to have an elegant way to stop mysql (or for some reason mysql doesn't respond) and you can force terminate mysql with either: <ul>
<li>One step: <code>pkill -9 mysqld</code>
</li>
<li>Two step (least preferred): </li>
<li>Find the process id of mysql with either <code>pgrep mysql</code> or <code>ps aux | grep mysql | grep -v grep</code>
</li>
<li>Assuming the process id is <code>4969</code> terminate with <code>kill -9 4969</code>
</li>
</ul>
</li>
</ul>
<p>After you do this you might want to look for a pid file in <code>/var/run/mysqld/</code>
and delete it</p>
<p>Make sure the permissions on your socket is such that whatever user mysqld is
running as can read/write to it. An easy test is to open it up to full
read/write and see if it still works:</p>
<div class="code"><pre class="code literal-block"><span class="n">chmod</span><span class="w"> </span><span class="mi">777</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">sock</span>
</pre></div>

<p>If that fixes the issue, you can tailor the permissions and ownership of the
socket as needed based on your security settings.</p>
<p>Also, the directory the socket resides in has to be reachable by the user
running the mysqld process.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/create-windows-service-from-executable/" class="u-url">Create Windows service from executable</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/create-windows-service-from-executable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:53:06+08:00" itemprop="datePublished" title="2023-03-03 11:53">2023-03-03 11:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there any quick way to, given an executable file, create a Windows service
that, when started, launches it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To create a Windows Service from an executable, you can use <code>sc.exe</code>:</p>
<div class="code"><pre class="code literal-block">sc.exe create &lt;new_service_name&gt; binPath= "&lt;path_to_the_service_executable&gt;"
</pre></div>

<p>You must have quotation marks around the actual <code>exe</code> path, and a space after
the <code>binPath=</code>.</p>
<p>More information on the <code>sc</code> command can be found in Microsoft KB251192.</p>
<p>Note that it will not work for just any executable: the executable must be a
Windows Service (i.e. implement ServiceMain). When registering a non-service
executable as a service, you'll get the following error upon trying to start
the service:</p>
<blockquote>
<p>Error 1053: The service did not respond to the start or control request in a
timely fashion.</p>
</blockquote>
<p>There are tools that can create a Windows Service from arbitrary, non-service
executables, see the other answers for examples of such tools.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Use NSSM( <strong>the non-Sucking Service Manager</strong> ) to run a .BAT or any .EXE file
as a service.</p>
<p>http://nssm.cc/</p>
<ul>
<li>
<strong>Step 1</strong> : Download NSSM</li>
<li>
<strong>Step 2</strong> : Install your sevice with <code>nssm.exe install [serviceName]</code>
</li>
<li>
<strong>Step 3</strong> : This will open a GUI which you will use to locate your executable</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1894.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1892.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
