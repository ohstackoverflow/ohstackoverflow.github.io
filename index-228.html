<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 228) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-228.html">
<link rel="prev" href="index-229.html" type="text/html">
<link rel="next" href="index-227.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/create-a-branch-in-git-from-another-branch/" class="u-url">Create a branch in Git from another branch</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/create-a-branch-in-git-from-another-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:29:08+08:00" itemprop="datePublished" title="2023-02-17 01:29">2023-02-17 01:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have two branches: <strong>master</strong> and <strong>dev</strong></p>
<p>I want to create a "feature branch" from the <em>dev</em> branch.</p>
<p>Currently on the branch <em>dev</em> , I do:</p>
<div class="code"><pre class="code literal-block">git checkout -b myfeature dev
</pre></div>

<p>... (some work)</p>
<div class="code"><pre class="code literal-block">git commit -am "blablabla"
git push origin myfeature
</pre></div>

<p>But, after visualizing my branches, I got:</p>
<div class="code"><pre class="code literal-block">--**master**
------0-----0-----0-----0-----0
------------------------**dev**----**myfeature**
</pre></div>

<p>I mean that the branch seems fast-forward merged, and I don't understand
why...</p>
<p>What am I doing wrong?</p>
<p>How can you branch off from another branch and push back to the remote
repository for the feature branch?</p>
<p>All that in a branching model like the one described here.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you like the method in the link you've posted, have a look at Git Flow.</p>
<p>It's a set of scripts he created for that workflow.</p>
<p>But to answer your question:</p>
<div class="code"><pre class="code literal-block">git checkout -b myFeature dev
</pre></div>

<p>Creates the <em>MyFeature</em> branch off <em>dev</em>. Do your work and then</p>
<div class="code"><pre class="code literal-block">git commit -am "Your message"
</pre></div>

<p>Now merge your changes to <em>dev</em> without a fast-forward</p>
<div class="code"><pre class="code literal-block">git checkout dev
git merge --no-ff myFeature
</pre></div>

<p>Now push the changes to the server</p>
<div class="code"><pre class="code literal-block">git push origin dev
git push origin myFeature
</pre></div>

<p>And you'll see it how you want it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you want create a new branch from any of the existing branches in Git, just
follow the options.</p>
<p>First change/checkout into the branch from where you want to create a new
branch. For example, if you have the following branches like:</p>
<ul>
<li><strong>master</strong></li>
<li><strong>dev</strong></li>
<li><strong>branch1</strong></li>
</ul>
<p>So if you want to create a new branch called <em><strong>"subbranch_of_b1"</strong></em> under the
branch named <em><strong>"branch1"</strong></em> follow the steps:</p>
<ol>
<li>
<p>Checkout or change into <strong>"branch1"</strong></p>
<div class="code"><pre class="code literal-block"> git checkout branch1
</pre></div>

</li>
<li>
<p>Now create your new branch called <strong>"subbranch_of_b1"</strong> under the <strong>"branch1"</strong> using the following command.</p>
<div class="code"><pre class="code literal-block"> git checkout -b subbranch_of_b1 branch1
</pre></div>

</li>
</ol>
<p>The above will create a new branch called <strong>subbranch_of_b1</strong> under the branch
<strong>branch1</strong> (note that <code>branch1</code> in the above command isn't mandatory since
the HEAD is currently pointing to it, you can precise it if you are on a
different branch though).</p>
<ol>
<li>Now after working with the <strong>subbranch_of_b1</strong> you can commit and push or merge it locally or remotely.</li>
</ol>
<p><img alt="A sample Graphical Illustration Of Creating Branches Under another
Branch" src="images/6qEWk.jpg"></p>
<p>Push the <em>subbranch_of_b1</em> to remote:</p>
<div class="code"><pre class="code literal-block"> git push origin subbranch_of_b1
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-find-waldo-with-mathematica/" class="u-url">How do I find Waldo with Mathematica?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-find-waldo-with-mathematica/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:28:42+08:00" itemprop="datePublished" title="2023-02-17 01:28">2023-02-17 01:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This was bugging me over the weekend: What is a good way to solve those
<em>Where's Waldo?</em> [ <em>'Wally'</em> outside of North America] puzzles, using
Mathematica (image-processing and other functionality)?</p>
<p>Here is what I have so far, a function which reduces the visual complexity a
little bit by dimming some of the non-red colors:</p>
<div class="code"><pre class="code literal-block"><span class="n">whereIsWaldo</span><span class="o">[</span><span class="n">url_</span><span class="o">]</span><span class="w"> </span><span class="err">:</span><span class="o">=</span><span class="w"> </span><span class="k">Module</span><span class="o">[</span><span class="n">{waldo, waldo2, waldoMask},</span>
<span class="n">    waldo = Import[url</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="n">waldo2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Image</span><span class="o">[</span><span class="n">ImageData[</span>
<span class="n">        waldo</span><span class="o">]</span><span class="w"> </span><span class="o">/</span><span class="p">.</span><span class="w"> </span><span class="err">{{</span><span class="n">r_</span><span class="p">,</span><span class="w"> </span><span class="n">g_</span><span class="p">,</span><span class="w"> </span><span class="n">b_</span><span class="err">}</span><span class="w"> </span><span class="o">/</span><span class="p">;</span>
<span class="w">          </span><span class="ow">Not</span><span class="o">[</span><span class="n">r &gt; .7 &amp;&amp; g &lt; .3 &amp;&amp; b &lt; .3</span><span class="o">]</span><span class="w"> </span><span class="err">:</span><span class="o">&gt;</span><span class="w"> </span><span class="err">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">          </span><span class="mi">0</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="err">{</span><span class="n">r_</span><span class="p">,</span><span class="w"> </span><span class="n">g_</span><span class="p">,</span><span class="w"> </span><span class="n">b_</span><span class="err">}</span><span class="w"> </span><span class="o">/</span><span class="p">;</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">.7</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">.3</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">.3</span><span class="p">)</span><span class="w"> </span><span class="err">:</span><span class="o">&gt;</span><span class="w"> </span><span class="err">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">          </span><span class="mi">1</span><span class="err">}}]</span><span class="p">;</span>
<span class="w">    </span><span class="n">waldoMask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Closing</span><span class="o">[</span><span class="n">waldo2, 4</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="n">ImageCompose</span><span class="o">[</span><span class="n">waldo, {waldoMask, .5}</span><span class="o">]</span>
<span class="err">]</span>
</pre></div>

<p>And an example of a URL where this 'works':</p>
<div class="code"><pre class="code literal-block">whereIsWaldo["http://www.findwaldo.com/fankit/graphics/IntlManOfLiterature/Scenes/DepartmentStore.jpg"]
</pre></div>

<p>(Waldo is by the cash register):</p>
<p><img alt="Original image" src="images/reNlF.jpg"></p>
<p><img alt="Mathematica graphic" src="images/5IDuu.jpg"></p>
<p><br><br></p>
<h2>Answer</h2>
<p>I've found Waldo!</p>
<p><img alt="waldo had been found" src="images/UYMae.jpg"></p>
<p><strong>How I've done it</strong></p>
<p>First, I'm filtering out all colours that aren't red</p>
<div class="code"><pre class="code literal-block"><span class="n">waldo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Import</span><span class="o">[</span><span class="n">"http://www.findwaldo.com/fankit/graphics/IntlManOfLiterature/Scenes/DepartmentStore.jpg"</span><span class="o">]</span><span class="p">;</span>
<span class="n">red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Fold</span><span class="o">[</span><span class="n">ImageSubtract, #[[1</span><span class="o">]</span><span class="err">]</span><span class="p">,</span><span class="w"> </span><span class="n">Rest</span><span class="o">[</span><span class="n">#</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">&amp;</span><span class="nv">@ColorSeparate</span><span class="o">[</span><span class="n">waldo</span><span class="o">]</span><span class="p">;</span>
</pre></div>

<p>Next, I'm calculating the correlation of this image with a simple black and
white pattern to find the red and white transitions in the shirt.</p>
<div class="code"><pre class="code literal-block"><span class="k">corr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ImageCorrelate</span><span class="o">[</span><span class="n">red, </span>
<span class="n">   Image@Join[ConstantArray[1, {2, 4}</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">ConstantArray</span><span class="o">[</span><span class="n">0, {2, 4}</span><span class="o">]</span><span class="err">]</span><span class="p">,</span><span class="w"> </span>
<span class="w">   </span><span class="n">NormalizedSquaredEuclideanDistance</span><span class="err">]</span><span class="p">;</span>
</pre></div>

<p>I use <code>Binarize</code> to pick out the pixels in the image with a sufficiently high
correlation and draw white circle around them to emphasize them using
<code>Dilation</code></p>
<div class="code"><pre class="code literal-block">pos = Dilation[ColorNegate[Binarize[corr, .12]], DiskMatrix[30]];
</pre></div>

<p>I had to play around a little with the level. If the level is too high, too
many false positives are picked out.</p>
<p>Finally I'm combining this result with the original image to get the result
above</p>
<div class="code"><pre class="code literal-block">found = ImageMultiply[waldo, ImageAdd[ColorConvert[pos, "GrayLevel"], .5]]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>My guess at a "bulletproof way to do this" (think CIA finding Waldo in any
satellite image any time, not just a single image without competing elements,
like striped shirts)... I would train a Boltzmann machine on many images of
Waldo - all variations of him sitting, standing, occluded, etc.; shirt, hat,
camera, and all the works. You don't need a large corpus of Waldos (maybe 3-5
will be enough), but the more the better.</p>
<p>This will assign clouds of probabilities to various elements occurring in
whatever the correct arrangement, and then establish (via segmentation) what
an average object size is, fragment the source image into cells of objects
which most resemble individual people (considering possible occlusions and
pose changes), but since Waldo pictures usually include a LOT of people at
about the same scale, this should be a very easy task, then feed these
segments of the pre-trained Boltzmann machine. It will give you probability of
each one being Waldo. Take one with the highest probability.</p>
<p>This is how OCR, ZIP code readers, and strokeless handwriting recognition work
today. Basically you know the answer is there, you know more or less what it
should look like, and everything else may have common elements, but is
definitely "not it", so you don't bother with the "not it"s, you just look of
the likelihood of "it" among all possible "it"s you've seen before" (in ZIP
codes for example, you'd train BM for just 1s, just 2s, just 3s, etc., then
feed each digit to each machine, and pick one that has most confidence). This
works a lot better than a single neural network learning features of all
numbers.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-the-filename-without-the-extension-from-a-path-in-python/" class="u-url">How do I get the filename without the extension from a path in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-the-filename-without-the-extension-from-a-path-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:28:09+08:00" itemprop="datePublished" title="2023-02-17 01:28">2023-02-17 01:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I get the filename without the extension from a path in Python?</p>
<div class="code"><pre class="code literal-block">"/path/to/some/file.txt"  →  "file"
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Getting the name of the file without the extension:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="s2">"/path/to/some/file.txt"</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

<p>Prints:</p>
<div class="code"><pre class="code literal-block">/path/to/some/file
</pre></div>

<p>Documentation for <code>os.path.splitext</code>.</p>
<p><em>Important Note:</em> If the filename has multiple dots, only the extension after
the last one is removed. For example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="s2">"/path/to/some/file.txt.zip.asc"</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

<p>Prints:</p>
<div class="code"><pre class="code literal-block">/path/to/some/file.txt.zip
</pre></div>

<p>See other answers below if you need to handle that case.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Use <code>.stem</code> from <code>pathlib</code> in Python 3.4+</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">Path</span><span class="p">(</span><span class="s1">'/root/dir/sub/file.ext'</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span>
</pre></div>

<p>will return</p>
<div class="code"><pre class="code literal-block">'file'
</pre></div>

<p>Note that if your file has multiple extensions <code>.stem</code> will only remove the
last extension. For example, <code>Path('file.tar.gz').stem</code> will return
<code>'file.tar'</code>.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-229.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-227.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
