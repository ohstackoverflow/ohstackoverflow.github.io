<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2798) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2798.html">
<link rel="prev" href="index-2799.html" type="text/html">
<link rel="next" href="index-2797.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/converting-file-size-in-bytes-to-human-readable-string/" class="u-url">Converting file size in bytes to human-readable string</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/converting-file-size-in-bytes-to-human-readable-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:43:58+08:00" itemprop="datePublished" title="2023-03-05 18:43">2023-03-05 18:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using this function to convert a file size in bytes to a human-readable
file size:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">getReadableFileSizeString</span><span class="p">(</span><span class="n">fileSizeInBytes</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="nf">var</span><span class="w"> </span><span class="n">byteUnits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">' kB', ' MB', ' GB', ' TB', 'PB', 'EB', 'ZB', 'YB'</span><span class="o">]</span><span class="p">;</span>
<span class="w">  </span><span class="n">do</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">fileSizeInBytes</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>
<span class="w">    </span><span class="n">i</span><span class="o">++</span><span class="p">;</span>
<span class="w">  </span><span class="err">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">fileSizeInBytes</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="n">fileSizeInBytes</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">).</span><span class="n">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">byteUnits</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">getReadableFileSizeString</span><span class="p">(</span><span class="mi">1551859712</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ss">"1.4 GB"</span>
</pre></div>

<p>However, it seems like this isn't 100% accurate. For example:</p>
<div class="code"><pre class="code literal-block">getReadableFileSizeString(1551859712); // output is "1.4 GB"
</pre></div>

<p>Shouldn't this be <code>"1.5 GB"</code>? It seems like the division by 1024 is losing
precision. Am I totally misunderstanding something or is there a better way to
do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It depends on whether you want to use the binary or decimal convention.</p>
<p>RAM, for instance, is always measured in binary, so to express 1551859712 as
~1.4GiB would be correct.</p>
<p>On the other hand, hard disk manufacturers like to use decimal, so they would
call it ~1.6GB.</p>
<p>And just to be confusing, floppy disks use a mixture of the two systems -
their 1MB is actually 1024000 bytes.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Another embodiment of the calculation</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">humanFileSize</span><span class="p">(</span><span class="k">size</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="vm">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">size</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1024</span><span class="p">));</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="k">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)).</span><span class="n">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="n">'B', 'kB', 'MB', 'GB', 'TB'</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/duplicate-id-tag-null-or-parent-id-with-another-fragment-for-com-google-android-gms-maps-mapfragment/" class="u-url">Duplicate ID, tag null, or parent id with another fragment for com.google.android.gms.maps.MapFragment</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/duplicate-id-tag-null-or-parent-id-with-another-fragment-for-com-google-android-gms-maps-mapfragment/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:41:52+08:00" itemprop="datePublished" title="2023-03-05 18:41">2023-03-05 18:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an application with three tabs.</p>
<p>Each tab has its own layout .xml file. The main.xml has its own map fragment.
It's the one that shows up when the application first launches.</p>
<p>Everything works fine except for when I change between tabs. If I try to
switch back to the map fragment tab, I get this error. Switching to and
between other tabs works just fine.</p>
<p>What could be wrong here?</p>
<p>This is my main class and my main.xml, as well as a relevant class that I use
( you will also find the error log at the bottom )</p>
<p><strong>main class</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">nfc</span><span class="o">.</span><span class="n">demo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">android.app.ActionBar</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.app.ActionBar.Tab</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.app.Fragment</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.app.FragmentTransaction</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">NFCDemoActivity</span> <span class="n">extends</span> <span class="n">Activity</span> <span class="p">{</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>

        <span class="n">ActionBar</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">getActionBar</span><span class="p">();</span>
        <span class="n">bar</span><span class="o">.</span><span class="n">setNavigationMode</span><span class="p">(</span><span class="n">ActionBar</span><span class="o">.</span><span class="n">NAVIGATION_MODE_TABS</span><span class="p">);</span>
        <span class="n">bar</span><span class="o">.</span><span class="n">setDisplayOptions</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ActionBar</span><span class="o">.</span><span class="n">DISPLAY_SHOW_TITLE</span><span class="p">);</span>

        <span class="n">bar</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">bar</span>
                <span class="o">.</span><span class="n">newTab</span><span class="p">()</span>
                <span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"Map"</span><span class="p">)</span>
                <span class="o">.</span><span class="n">setTabListener</span><span class="p">(</span>
                        <span class="n">new</span> <span class="n">TabListener</span><span class="o">&lt;</span><span class="n">MapFragment</span><span class="o">&gt;</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="s2">"map"</span><span class="p">,</span>
                                <span class="n">MapFragment</span><span class="o">.</span><span class="n">class</span><span class="p">)));</span>
        <span class="n">bar</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">bar</span>
                <span class="o">.</span><span class="n">newTab</span><span class="p">()</span>
                <span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"Settings"</span><span class="p">)</span>
                <span class="o">.</span><span class="n">setTabListener</span><span class="p">(</span>
                        <span class="n">new</span> <span class="n">TabListener</span><span class="o">&lt;</span><span class="n">SettingsFragment</span><span class="o">&gt;</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="s2">"settings"</span><span class="p">,</span>
                                <span class="n">SettingsFragment</span><span class="o">.</span><span class="n">class</span><span class="p">)));</span>
        <span class="n">bar</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">bar</span>
                <span class="o">.</span><span class="n">newTab</span><span class="p">()</span>
                <span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">"About"</span><span class="p">)</span>
                <span class="o">.</span><span class="n">setTabListener</span><span class="p">(</span>
                        <span class="n">new</span> <span class="n">TabListener</span><span class="o">&lt;</span><span class="n">AboutFragment</span><span class="o">&gt;</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="s2">"about"</span><span class="p">,</span>
                                <span class="n">AboutFragment</span><span class="o">.</span><span class="n">class</span><span class="p">)));</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">savedInstanceState</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">bar</span><span class="o">.</span><span class="n">setSelectedNavigationItem</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="o">.</span><span class="n">getInt</span><span class="p">(</span><span class="s2">"tab"</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="o">//</span> <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">main</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="n">protected</span> <span class="n">void</span> <span class="n">onSaveInstanceState</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">outState</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">onSaveInstanceState</span><span class="p">(</span><span class="n">outState</span><span class="p">);</span>
        <span class="n">outState</span><span class="o">.</span><span class="n">putInt</span><span class="p">(</span><span class="s2">"tab"</span><span class="p">,</span> <span class="n">getActionBar</span><span class="p">()</span><span class="o">.</span><span class="n">getSelectedNavigationIndex</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">static</span> <span class="k">class</span> <span class="nc">TabListener</span><span class="o">&lt;</span><span class="n">T</span> <span class="n">extends</span> <span class="n">Fragment</span><span class="o">&gt;</span> <span class="n">implements</span>
            <span class="n">ActionBar</span><span class="o">.</span><span class="n">TabListener</span> <span class="p">{</span>
        <span class="n">private</span> <span class="n">final</span> <span class="n">Activity</span> <span class="n">mActivity</span><span class="p">;</span>
        <span class="n">private</span> <span class="n">final</span> <span class="n">String</span> <span class="n">mTag</span><span class="p">;</span>
        <span class="n">private</span> <span class="n">final</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">mClass</span><span class="p">;</span>
        <span class="n">private</span> <span class="n">final</span> <span class="n">Bundle</span> <span class="n">mArgs</span><span class="p">;</span>
        <span class="n">private</span> <span class="n">Fragment</span> <span class="n">mFragment</span><span class="p">;</span>

        <span class="n">public</span> <span class="n">TabListener</span><span class="p">(</span><span class="n">Activity</span> <span class="n">activity</span><span class="p">,</span> <span class="n">String</span> <span class="n">tag</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">clz</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">this</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">clz</span><span class="p">,</span> <span class="n">null</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="n">public</span> <span class="n">TabListener</span><span class="p">(</span><span class="n">Activity</span> <span class="n">activity</span><span class="p">,</span> <span class="n">String</span> <span class="n">tag</span><span class="p">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">clz</span><span class="p">,</span>
                <span class="n">Bundle</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">mActivity</span> <span class="o">=</span> <span class="n">activity</span><span class="p">;</span>
            <span class="n">mTag</span> <span class="o">=</span> <span class="n">tag</span><span class="p">;</span>
            <span class="n">mClass</span> <span class="o">=</span> <span class="n">clz</span><span class="p">;</span>
            <span class="n">mArgs</span> <span class="o">=</span> <span class="n">args</span><span class="p">;</span>

            <span class="o">//</span> <span class="n">Check</span> <span class="n">to</span> <span class="n">see</span> <span class="k">if</span> <span class="n">we</span> <span class="n">already</span> <span class="n">have</span> <span class="n">a</span> <span class="n">fragment</span> <span class="k">for</span> <span class="n">this</span> <span class="n">tab</span><span class="p">,</span>
            <span class="o">//</span> <span class="n">probably</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">previously</span> <span class="n">saved</span> <span class="n">state</span><span class="o">.</span> <span class="n">If</span> <span class="n">so</span><span class="p">,</span> <span class="n">deactivate</span>
            <span class="o">//</span> <span class="n">it</span><span class="p">,</span> <span class="n">because</span> <span class="n">our</span> <span class="n">initial</span> <span class="n">state</span> <span class="ow">is</span> <span class="n">that</span> <span class="n">a</span> <span class="n">tab</span> <span class="n">isn</span><span class="s1">'t shown.</span>
            <span class="n">mFragment</span> <span class="o">=</span> <span class="n">mActivity</span><span class="o">.</span><span class="n">getFragmentManager</span><span class="p">()</span><span class="o">.</span><span class="n">findFragmentByTag</span><span class="p">(</span><span class="n">mTag</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mFragment</span> <span class="o">!=</span> <span class="n">null</span> <span class="o">&amp;&amp;</span> <span class="err">!</span><span class="n">mFragment</span><span class="o">.</span><span class="n">isDetached</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">FragmentTransaction</span> <span class="n">ft</span> <span class="o">=</span> <span class="n">mActivity</span><span class="o">.</span><span class="n">getFragmentManager</span><span class="p">()</span>
                        <span class="o">.</span><span class="n">beginTransaction</span><span class="p">();</span>
                <span class="n">ft</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">mFragment</span><span class="p">);</span>
                <span class="n">ft</span><span class="o">.</span><span class="n">commit</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">public</span> <span class="n">void</span> <span class="n">onTabSelected</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span><span class="p">,</span> <span class="n">FragmentTransaction</span> <span class="n">ft</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mFragment</span> <span class="o">==</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">mFragment</span> <span class="o">=</span> <span class="n">Fragment</span><span class="o">.</span><span class="n">instantiate</span><span class="p">(</span><span class="n">mActivity</span><span class="p">,</span> <span class="n">mClass</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span>
                        <span class="n">mArgs</span><span class="p">);</span>
                <span class="n">ft</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">android</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">mFragment</span><span class="p">,</span> <span class="n">mTag</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">ft</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">mFragment</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">public</span> <span class="n">void</span> <span class="n">onTabUnselected</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span><span class="p">,</span> <span class="n">FragmentTransaction</span> <span class="n">ft</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mFragment</span> <span class="o">!=</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">ft</span><span class="o">.</span><span class="n">detach</span><span class="p">(</span><span class="n">mFragment</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">public</span> <span class="n">void</span> <span class="n">onTabReselected</span><span class="p">(</span><span class="n">Tab</span> <span class="n">tab</span><span class="p">,</span> <span class="n">FragmentTransaction</span> <span class="n">ft</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Toast</span><span class="o">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">mActivity</span><span class="p">,</span> <span class="s2">"Reselected!"</span><span class="p">,</span> <span class="n">Toast</span><span class="o">.</span><span class="n">LENGTH_SHORT</span><span class="p">)</span>
                         <span class="o">.</span><span class="n">show</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p><strong>main.xml</strong></p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="w"> </span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;fragment</span>
<span class="w">        </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">"@+id/mapFragment"</span>
<span class="w">        </span><span class="na">android:name=</span><span class="s">"com.google.android.gms.maps.MapFragment"</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

<p><strong>relevant class ( MapFragment.java )</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">nfc</span><span class="o">.</span><span class="n">demo</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">android.app.Fragment</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.view.LayoutInflater</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.view.ViewGroup</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">MapFragment</span> <span class="n">extends</span> <span class="n">Fragment</span> <span class="p">{</span>

    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">View</span> <span class="n">onCreateView</span><span class="p">(</span><span class="n">LayoutInflater</span> <span class="n">inflater</span><span class="p">,</span> <span class="n">ViewGroup</span> <span class="n">container</span><span class="p">,</span>
            <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">onCreateView</span><span class="p">(</span><span class="n">inflater</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="n">savedInstanceState</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">inflater</span><span class="o">.</span><span class="n">inflate</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">main</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">onDestroy</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">onDestroy</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>error</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">android</span>.<span class="nv">view</span>.<span class="nv">InflateException</span>:<span class="w"> </span><span class="nv">Binary</span><span class="w"> </span><span class="nv">XML</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="sc">#7</span>:<span class="w"> </span>
<span class="w">     </span><span class="nv">Error</span><span class="w"> </span><span class="nv">inflating</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">fragment</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">view</span>.<span class="nv">LayoutInflater</span>.<span class="nv">createViewFromTag</span><span class="ss">(</span><span class="nv">LayoutInflater</span>.<span class="nv">java</span>:<span class="mi">704</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">view</span>.<span class="nv">LayoutInflater</span>.<span class="nv">rInflate</span><span class="ss">(</span><span class="nv">LayoutInflater</span>.<span class="nv">java</span>:<span class="mi">746</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">view</span>.<span class="nv">LayoutInflater</span>.<span class="nv">inflate</span><span class="ss">(</span><span class="nv">LayoutInflater</span>.<span class="nv">java</span>:<span class="mi">489</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">view</span>.<span class="nv">LayoutInflater</span>.<span class="nv">inflate</span><span class="ss">(</span><span class="nv">LayoutInflater</span>.<span class="nv">java</span>:<span class="mi">396</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">com</span>.<span class="nv">nfc</span>.<span class="nv">demo</span>.<span class="nv">MapFragment</span>.<span class="nv">onCreateView</span><span class="ss">(</span><span class="nv">MapFragment</span>.<span class="nv">java</span>:<span class="mi">15</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">Fragment</span>.<span class="nv">performCreateView</span><span class="ss">(</span><span class="nv">Fragment</span>.<span class="nv">java</span>:<span class="mi">1695</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">FragmentManagerImpl</span>.<span class="nv">moveToState</span><span class="ss">(</span><span class="nv">FragmentManager</span>.<span class="nv">java</span>:<span class="mi">885</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">FragmentManagerImpl</span>.<span class="nv">attachFragment</span><span class="ss">(</span><span class="nv">FragmentManager</span>.<span class="nv">java</span>:<span class="mi">1255</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">BackStackRecord</span>.<span class="nv">run</span><span class="ss">(</span><span class="nv">BackStackRecord</span>.<span class="nv">java</span>:<span class="mi">672</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">FragmentManagerImpl</span>.<span class="nv">execPendingActions</span><span class="ss">(</span><span class="nv">FragmentManager</span>.<span class="nv">java</span>:<span class="mi">1435</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">FragmentManagerImpl</span><span class="mh">$1</span>.<span class="nv">run</span><span class="ss">(</span><span class="nv">FragmentManager</span>.<span class="nv">java</span>:<span class="mi">441</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">os</span>.<span class="nv">Handler</span>.<span class="nv">handleCallback</span><span class="ss">(</span><span class="nv">Handler</span>.<span class="nv">java</span>:<span class="mi">725</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">os</span>.<span class="nv">Handler</span>.<span class="nv">dispatchMessage</span><span class="ss">(</span><span class="nv">Handler</span>.<span class="nv">java</span>:<span class="mi">92</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">os</span>.<span class="nv">Looper</span>.<span class="k">loop</span><span class="ss">(</span><span class="nv">Looper</span>.<span class="nv">java</span>:<span class="mi">137</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">ActivityThread</span>.<span class="nv">main</span><span class="ss">(</span><span class="nv">ActivityThread</span>.<span class="nv">java</span>:<span class="mi">5039</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">java</span>.<span class="nv">lang</span>.<span class="nv">reflect</span>.<span class="nv">Method</span>.<span class="nv">invokeNative</span><span class="ss">(</span><span class="nv">Native</span><span class="w"> </span><span class="nv">Method</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">java</span>.<span class="nv">lang</span>.<span class="nv">reflect</span>.<span class="nv">Method</span>.<span class="nv">invoke</span><span class="ss">(</span><span class="nv">Method</span>.<span class="nv">java</span>:<span class="mi">511</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">com</span>.<span class="nv">android</span>.<span class="nv">internal</span>.<span class="nv">os</span>.<span class="nv">ZygoteInit</span>$<span class="nv">MethodAndArgsCaller</span>.<span class="nv">run</span><span class="ss">(</span><span class="nv">ZygoteInit</span>.<span class="nv">java</span>:<span class="mi">793</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">com</span>.<span class="nv">android</span>.<span class="nv">internal</span>.<span class="nv">os</span>.<span class="nv">ZygoteInit</span>.<span class="nv">main</span><span class="ss">(</span><span class="nv">ZygoteInit</span>.<span class="nv">java</span>:<span class="mi">560</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">dalvik</span>.<span class="nv">system</span>.<span class="nv">NativeStart</span>.<span class="nv">main</span><span class="ss">(</span><span class="nv">Native</span><span class="w"> </span><span class="nv">Method</span><span class="ss">)</span>

<span class="nv">Caused</span><span class="w"> </span><span class="nv">by</span>:<span class="w"> </span><span class="nv">java</span>.<span class="nv">lang</span>.<span class="nv">IllegalArgumentException</span>:<span class="w"> </span>
<span class="w">     </span><span class="nv">Binary</span><span class="w"> </span><span class="nv">XML</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="sc">#7</span>:<span class="w"> </span><span class="nv">Duplicate</span><span class="w"> </span><span class="nv">id</span><span class="w"> </span><span class="mi">0</span><span class="nv">x7f040005</span>,<span class="w"> </span><span class="nv">tag</span><span class="w"> </span><span class="nv">null</span>,<span class="w"> </span><span class="nv">or</span><span class="w"> </span>
<span class="w">     </span><span class="nv">parent</span><span class="w"> </span><span class="nv">id</span><span class="w"> </span><span class="mi">0</span><span class="nv">xffffffff</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">another</span><span class="w"> </span><span class="nv">fragment</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>
<span class="w">     </span><span class="nv">com</span>.<span class="nv">google</span>.<span class="nv">android</span>.<span class="nv">gms</span>.<span class="nv">maps</span>.<span class="nv">MapFragment</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">app</span>.<span class="nv">Activity</span>.<span class="nv">onCreateView</span><span class="ss">(</span><span class="nv">Activity</span>.<span class="nv">java</span>:<span class="mi">4722</span><span class="ss">)</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">android</span>.<span class="nv">view</span>.<span class="nv">LayoutInflater</span>.<span class="nv">createViewFromTag</span><span class="ss">(</span><span class="nv">LayoutInflater</span>.<span class="nv">java</span>:<span class="mi">680</span><span class="ss">)</span>
<span class="w">   </span>...<span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="nv">more</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The answer Matt suggests works, but it causes the map to be recreated and
redrawn, which isn't always desirable. After lots of trial and error, I found
a solution that works for me:</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">View</span><span class="w"> </span><span class="k">view</span><span class="p">;</span>

<span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="k">View</span><span class="w"> </span><span class="n">onCreateView</span><span class="p">(</span><span class="n">LayoutInflater</span><span class="w"> </span><span class="n">inflater</span><span class="p">,</span><span class="w"> </span><span class="n">ViewGroup</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">Bundle</span><span class="w"> </span><span class="n">savedInstanceState</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">view</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">ViewGroup</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ViewGroup</span><span class="p">)</span><span class="w"> </span><span class="k">view</span><span class="p">.</span><span class="n">getParent</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">parent</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
<span class="w">            </span><span class="n">parent</span><span class="p">.</span><span class="n">removeView</span><span class="p">(</span><span class="k">view</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inflater</span><span class="p">.</span><span class="n">inflate</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="k">map</span><span class="p">,</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">InflateException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="cm">/* map is already there, just return view as it is */</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">view</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>For good measure, here's "map.xml" (R.layout.map) with R.id.mapFragment
(android:id="@+id/mapFragment"):</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">android:id=</span><span class="s">"@+id/mapLayout"</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="w"> </span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;fragment</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">        </span><span class="na">android:id=</span><span class="s">"@+id/mapFragment"</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
<span class="w">        </span><span class="na">class=</span><span class="s">"com.google.android.gms.maps.SupportMapFragment"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

<p>I hope this helps, but I can't guarantee that it doesn't have any adverse
effects.</p>
<p><strong>Edit:</strong> There were some adverse effects, such as when exiting the
application and starting it again. Since the application isn't necessarily
completely shut down (but just put to sleep in the background), the previous
code i submitted would fail upon restarting the application. I've updated the
code to something that works for me, both going in &amp; out of the map and
exiting and restarting the application, I'm not too happy with the try-catch
bit, but it seem to work well enough. <del>When looking at the stack trace it
occurred to me that I could just check if the map fragment is in the
FragmentManager, no need for the try-catch block, code updated.</del></p>
<p><strong>More edits:</strong> It turns out that you need that try-catch after all. Just
checking for the map fragment turned out not to work so well after all.
Blergh.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The problem is that what you are trying to do shouldn't be done. You shouldn't
be inflating fragments inside other fragments. From Android's documentation:</p>
<blockquote>
<p>Note: You cannot inflate a layout into a fragment when that layout includes
a <fragment>. Nested fragments are only supported when added to a fragment
dynamically.</fragment></p>
</blockquote>
<p>While you may be able to accomplish the task with the hacks presented here, I
highly suggest you don't do it. Its impossible to be sure that these hacks
will handle what each new Android OS does when you try to inflate a layout for
a fragment containing another fragment.</p>
<p>The only Android-supported way to add a fragment to another fragment is via a
transaction from the child fragment manager.</p>
<p>Simply change your XML layout into an empty container (add an ID if needed):</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">android:id=</span><span class="s">"@+id/mapFragmentContainer"</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

<p>Then in the Fragment <code>onViewCreated(View view, @Nullable Bundle
savedInstanceState)</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onViewCreated</span><span class="p">(</span><span class="k">View</span><span class="w"> </span><span class="k">view</span><span class="p">,</span><span class="w"> </span><span class="nv">@Nullable</span><span class="w"> </span><span class="n">Bundle</span><span class="w"> </span><span class="n">savedInstanceState</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">.</span><span class="n">onViewCreated</span><span class="p">(</span><span class="k">view</span><span class="p">,</span><span class="w"> </span><span class="n">savedInstanceState</span><span class="p">);</span>
<span class="w">    </span><span class="n">FragmentManager</span><span class="w"> </span><span class="n">fm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getChildFragmentManager</span><span class="p">();</span>
<span class="w">    </span><span class="n">SupportMapFragment</span><span class="w"> </span><span class="n">mapFragment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">SupportMapFragment</span><span class="p">)</span><span class="w"> </span><span class="n">fm</span><span class="p">.</span><span class="n">findFragmentByTag</span><span class="p">(</span><span class="ss">"mapFragment"</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mapFragment</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">mapFragment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SupportMapFragment</span><span class="p">();</span>
<span class="w">        </span><span class="n">FragmentTransaction</span><span class="w"> </span><span class="n">ft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fm</span><span class="p">.</span><span class="n">beginTransaction</span><span class="p">();</span>
<span class="w">        </span><span class="n">ft</span><span class="p">.</span><span class="k">add</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">mapFragmentContainer</span><span class="p">,</span><span class="w"> </span><span class="n">mapFragment</span><span class="p">,</span><span class="w"> </span><span class="ss">"mapFragment"</span><span class="p">);</span>
<span class="w">        </span><span class="n">ft</span><span class="p">.</span><span class="k">commit</span><span class="p">();</span>
<span class="w">        </span><span class="n">fm</span><span class="p">.</span><span class="n">executePendingTransactions</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="n">mapFragment</span><span class="p">.</span><span class="n">getMapAsync</span><span class="p">(</span><span class="n">callback</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/open-and-write-data-to-text-file-using-bash/" class="u-url">Open and write data to text file using Bash?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/open-and-write-data-to-text-file-using-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:40:14+08:00" itemprop="datePublished" title="2023-03-05 18:40">2023-03-05 18:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I write data to a text file automatically by shell scripting in Linux?</p>
<p>I was able to open the file. However, I don't know how to write data to it.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The short answer:</p>
<div class="code"><pre class="code literal-block"><span class="nv">echo</span><span class="w"> </span><span class="s2">"some data for the file"</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nv">fileName</span>
</pre></div>

<p>However, <code>echo</code> doesn't deal with end of line characters (EOFs) in an ideal
way. So, if you're going to append more than one line, do it with <code>printf</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">printf</span><span class="w"> </span><span class="s2">"some data for the file\nAnd a new line"</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nv">fileName</span>
</pre></div>

<p>The <code>&gt;&gt;</code> and <code>&gt;</code> operators are very useful for <em>redirecting output of
commands</em> , they work with multiple other bash commands.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/sh</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="nv">FILE</span><span class="o">=</span><span class="s2">"/path/to/file"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code>/bin/cat<span class="w"> </span><span class="s">&lt;&lt;EOM &gt;$FILE</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><span class="s">text1</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="s">text2 # This comment will be inside of the file.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><span class="s">The keyword EOM</span><span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>any<span class="w"> </span>text,<span class="w"> </span>but<span class="w"> </span>it<span class="w"> </span>must<span class="w"> </span>start<span class="w"> </span>the<span class="w"> </span>line<span class="w"> </span>and<span class="w"> </span>be<span class="w"> </span>alone.
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><span class="w"> </span>EOM<span class="w"> </span><span class="c1"># This will be also inside of the file, see the space in front of EOM.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code>EOM<span class="w"> </span><span class="c1"># No comments and spaces around here, or it will not work.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code>text4<span class="w"> </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/open-and-write-data-to-text-file-using-bash/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code>EOM
</code></td>
</tr>
</table></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2799.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2797.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
