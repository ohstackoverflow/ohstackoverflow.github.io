<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 163) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-163.html">
<link rel="prev" href="index-164.html" type="text/html">
<link rel="next" href="index-162.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-efficiently-count-the-number-of-keys-properties-of-an-object-in-javascript/" class="u-url">How to efficiently count the number of keys/properties of an object in JavaScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-efficiently-count-the-number-of-keys-properties-of-an-object-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:29:55+08:00" itemprop="datePublished" title="2023-02-16 23:29">2023-02-16 23:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What's the fastest way to count the number of keys/properties of an object? Is
it possible to do this without iterating over the object? I.e., without doing:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">myobj</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">myobj</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="n">k</span><span class="p">))</span><span class="w"> </span><span class="o">++</span><span class="n">count</span><span class="p">;</span>
</pre></div>

<p>(Firefox did provide a magic <code>__count__</code> property, but this was removed
somewhere around version 4.)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To do this in any <em>ES5-compatible environment</em> , such as Node.js, Chrome,
Internet Explorer 9+, Firefox 4+, or Safari 5+:</p>
<div class="code"><pre class="code literal-block">Object.keys(obj).length
</pre></div>

<ul>
<li>Browser compatibility</li>
<li>Object.keys documentation (includes a method you can add to non-ES5 browsers)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>You could use this code:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">keys</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="n">k</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">keys</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">keys</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</pre></div>

<p>Then you can use this in older browsers as well:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-make-a-placeholder-for-a-select-box/" class="u-url">How do I make a placeholder for a 'select' box?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-make-a-placeholder-for-a-select-box/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:29:22+08:00" itemprop="datePublished" title="2023-02-16 23:29">2023-02-16 23:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using placeholders for text inputs which is working out just fine. But I'd
like to use a placeholder for my selectboxes as well. Of course I can just use
this code:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;select&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select<span class="w"> </span>your<span class="w"> </span>option<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"hurr"</span><span class="nt">&gt;</span>Durr<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>

<p>But the 'Select your option' is in black instead of lightgrey. So my solution
could possibly be CSS-based. jQuery is fine too.</p>
<p>This only makes the option grey in the dropdown (so after clicking the arrow):</p>
<div class="code"><pre class="code literal-block"><span class="n">option</span><span class="o">:</span><span class="n">first</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">color</span><span class="o">:</span><span class="w"> </span><span class="err">#</span><span class="mi">999</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

<p>The question is: How do people create placeholders in selectboxes? But it has
already been answered, cheers.</p>
<p>And using this results in the selected value always being grey (even after
selecting a real option):</p>
<div class="code"><pre class="code literal-block"><span class="nt">select</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>A non-CSS - no JavaScript/jQuery answer:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;label&gt;</span>Option<span class="w"> </span>name
<span class="nt">&lt;select&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">""</span><span class="w"> </span><span class="err">disabled</span><span class="w"> </span><span class="err">selected</span><span class="nt">&gt;</span>Select<span class="w"> </span>your<span class="w"> </span>option<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"hurr"</span><span class="nt">&gt;</span>Durr<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/label&gt;</span>
</pre></div>

<p><strong>Update</strong> (December 2021):</p>
<p>This works for latest Firefox, Chrome, and Safari. It used to not work for
many browsers in the past, as pointed out in the comments.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I just stumbled across this question, and here's what works in Firefox and
Chrome (at least):</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;style&gt;</span>
select:invalid<span class="w"> </span>{<span class="w"> </span>color:<span class="w"> </span>gray;<span class="w"> </span>}
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;form&gt;</span>
<span class="nt">&lt;select</span><span class="w"> </span><span class="err">required</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">""</span><span class="w"> </span><span class="err">disabled</span><span class="w"> </span><span class="err">selected</span><span class="w"> </span><span class="err">hidden</span><span class="nt">&gt;</span>Please<span class="w"> </span>Choose...<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Open<span class="w"> </span>when<span class="w"> </span>powered<span class="w"> </span>(most<span class="w"> </span>valves<span class="w"> </span>do<span class="w"> </span>this)<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Closed<span class="w"> </span>when<span class="w"> </span>powered,<span class="w"> </span>auto-opens<span class="w"> </span>when<span class="w"> </span>power<span class="w"> </span>is<span class="w"> </span>cut<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>The <em>Disabled</em> option stops the <code>&lt;option&gt;</code> being selected with both mouse and
keyboard, whereas just using <code>'display:none'</code> allows the user to still select
via the keyboard arrows. The <code>'display:none'</code> style just makes the list box
look 'nice'.</p>
<p>Note: Using an empty <code>value</code> attribute on the "placeholder" option allows
validation (required attribute) to work around having the "placeholder", so if
the option isn't changed, but is required, the browser should prompt the user
to choose an option from the list.</p>
<p><strong>Update (July 2015):</strong></p>
<p>This method is confirmed working in the following browsers:</p>
<ul>
<li>Google Chrome - v.43.0.2357.132</li>
<li>Mozilla Firefox - v.39.0</li>
<li>Safari - v.8.0.7 (the placeholder is visible in dropdown, but it is not selectable)</li>
<li>Microsoft Internet Explorer - v.11 (Placeholder is visible in dropdown but is not selectable)</li>
<li>Project Spartan - v.15.10130 (the placeholder is visible in dropdown, but it is not selectable)</li>
</ul>
<p><strong>Update (October 2015):</strong></p>
<p>I removed the <code>style="display: none"</code> in favour of HTML5 attribute <code>hidden</code>
which has wide support. The <code>hidden</code> element has similar traits as <code>display:
none</code> in Safari, Internet Explorer, (Project Spartan needs checking) where the
<code>option</code> is visible in dropdown, but it is not selectable.</p>
<p><strong>Update (January 2016):</strong></p>
<p>When the <code>select</code> element is <code>required</code> it allows use of the <code>:invalid</code> CSS
pseudo-class which allows you to style the <code>select</code> element when in its
"placeholder" state. <code>:invalid</code> works here because of the empty value in the
placeholder <code>option</code>.</p>
<p>Once a value has been set, the <code>:invalid</code> pseudo-class will be dropped. You
can optionally also use <code>:valid</code> if you so wish.</p>
<p>Most browsers support this pseudo-class. Internet Explorer 10 and later. This
works best with custom styled <code>select</code> elements; in some cases i.e. (Mac in
Chrome / Safari) you'll need to change the default appearance of the <code>select</code>
box so that certain styles display, i.e., <code>background-color</code> and <code>color</code>. You
can find some examples and more about compatibility at developer.mozilla.org.</p>
<p>Native element appearance Mac in Chrome:</p>
<p><img alt="Select box native Mac in Chrome" src="images/L6cVA.png"></p>
<p>Using altered border element Mac in Chrome:</p>
<p><img alt="Altered select box Mac in Chrome" src="images/OWMDi.png"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/who-is-listening-on-a-given-tcp-port-on-mac-os-x/" class="u-url">Who is listening on a given TCP port on Mac OS X?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/who-is-listening-on-a-given-tcp-port-on-mac-os-x/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:28:50+08:00" itemprop="datePublished" title="2023-02-16 23:28">2023-02-16 23:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>On Linux, I can use <code>netstat -pntl | grep $PORT</code> or <code>fuser -n tcp $PORT</code> to
find out which process (PID) is listening on the specified TCP port. How do I
get the same information on Mac OS X?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>On macOS <code>Big Sur</code> and later, use this command:</p>
<div class="code"><pre class="code literal-block">sudo lsof -i -P | grep LISTEN | grep :$PORT
</pre></div>

<p>or to just see just IPv4:</p>
<div class="code"><pre class="code literal-block">sudo lsof -nP -i4TCP:$PORT | grep LISTEN
</pre></div>

<p>On older versions, use one of the following forms:</p>
<div class="code"><pre class="code literal-block">sudo lsof -nP -iTCP:$PORT | grep LISTEN
sudo lsof -nP -i:$PORT | grep LISTEN
</pre></div>

<p>Substitute <code>$PORT</code> with the port number or a comma-separated list of port
numbers.</p>
<p>Prepend <code>sudo</code> (followed by a space) if you need information on ports below</p>
<h2>1024.</h2>
<p>The <code>-n</code> flag is for displaying IP addresses instead of host names. This makes
the command execute much faster, because DNS lookups to get the host names can
be slow (several seconds or a minute for many hosts).</p>
<p>The <code>-P</code> flag is for displaying raw port numbers instead of resolved names
like <code>http</code>, <code>ftp</code> or more esoteric service names like <code>dpserve</code>, <code>socalia</code>.</p>
<p>See the comments for more options.</p>
<p>For completeness, because frequently used together:</p>
<p>To kill the PID:</p>
<div class="code"><pre class="code literal-block">sudo kill -9 &lt;PID&gt;
# kill -9 60401
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Up to <strong>macOS 13 Ventura</strong> , every version of macOS supports this:</p>
<p><code>sudo lsof -iTCP -sTCP:LISTEN -n -P</code></p>
<p>Personally I've end up with this simple function in my <code>~/.bash_profile</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">listening</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="n"> $# -eq 0 </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="n">sudo</span><span class="w"> </span><span class="n">lsof</span><span class="w"> </span><span class="o">-</span><span class="n">iTCP</span><span class="w"> </span><span class="o">-</span><span class="nl">sTCP</span><span class="p">:</span><span class="n">LISTEN</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="n">P</span>
<span class="w">    </span><span class="n">elif</span><span class="w"> </span><span class="o">[</span><span class="n"> $# -eq 1 </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="n">sudo</span><span class="w"> </span><span class="n">lsof</span><span class="w"> </span><span class="o">-</span><span class="n">iTCP</span><span class="w"> </span><span class="o">-</span><span class="nl">sTCP</span><span class="p">:</span><span class="n">LISTEN</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="n">P</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="o">--</span><span class="n">color</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="n">echo</span><span class="w"> </span><span class="ss">"Usage: listening [pattern]"</span>
<span class="w">    </span><span class="n">fi</span>
<span class="err">}</span>
</pre></div>

<p>Then <code>listening</code> command gives you a listing of processes listening on some
port and <code>listening smth</code> greps this for some pattern.</p>
<p>Having this, it's quite easy to ask about particular process, e.g. <code>listening
dropbox</code>, or port, e.g. <code>listening 22</code>.</p>
<p><code>lsof</code> command has some specialized options for asking about port, protocol,
process etc. but personally I've found above function much more handy, since I
don't need to remember all these low-level options. <code>lsof</code> is quite powerful
tool, but unfortunately not so comfy to use.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-164.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-162.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
