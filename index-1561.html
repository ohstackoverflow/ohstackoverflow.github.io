<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1561) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1561.html">
<link rel="prev" href="index-1562.html" type="text/html">
<link rel="next" href="index-1560.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/comparing-date-part-only-without-comparing-time-in-javascript/" class="u-url">Comparing date part only without comparing time in JavaScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/comparing-date-part-only-without-comparing-time-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:57:35+08:00" itemprop="datePublished" title="2023-03-03 03:57">2023-03-03 03:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is wrong with the code below?</p>
<p>Maybe it would be simpler to just compare date and not time. I am not sure how
to do this either, and I searched, but I couldn't find my exact problem.</p>
<p>BTW, when I display the two dates in an alert, they show as exactly the same.</p>
<p>My code:</p>
<div class="code"><pre class="code literal-block"><span class="n">window</span><span class="o">.</span><span class="n">addEvent</span><span class="p">(</span><span class="s1">'domready'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'datum'</span><span class="p">)</span><span class="o">.</span><span class="n">getValue</span><span class="p">();</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">dateArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">userMonth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">dateArray</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">userDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>
<span class="w">    </span><span class="n">userDate</span><span class="o">.</span><span class="n">setFullYear</span><span class="p">(</span><span class="n">dateArray</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">userMonth</span><span class="p">,</span><span class="w"> </span><span class="n">dateArray</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">now</span><span class="o">.</span><span class="n">getHours</span><span class="p">(),</span><span class="w"> </span><span class="n">now</span><span class="o">.</span><span class="n">getMinutes</span><span class="p">(),</span><span class="w"> </span><span class="n">now</span><span class="o">.</span><span class="n">getSeconds</span><span class="p">(),</span><span class="w"> </span><span class="n">now</span><span class="o">.</span><span class="n">getMilliseconds</span><span class="p">());</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">userDate</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">now</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">now</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">userDate</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>Is there a simpler way to compare dates and not including the time?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I'm still learning JavaScript, and the only way that I've found which works
for me to compare two dates without the time is to use the <strong><code>setHours</code></strong>
method of the Date object and set the hours, minutes, seconds and milliseconds
to zero. Then compare the two dates.</p>
<p>For example,</p>
<div class="code"><pre class="code literal-block">date1 = new Date()
date2 = new Date(2011,8,20)
</pre></div>

<p><code>date2</code> will be set with hours, minutes, seconds and milliseconds to zero, but
date1 will have them set to the time that date1 was created. To get rid of the
hours, minutes, seconds and milliseconds on date1 do the following:</p>
<div class="code"><pre class="code literal-block">date1.setHours(0,0,0,0)
</pre></div>

<p>Now you can compare the two dates as DATES only without worrying about time
elements.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>BEWARE THE TIMEZONE</h3>
<p>Using the date object to represent just-a-date straight away gets you into a
huge excess precision problem. You need to manage time and timezone to keep
them out, and they can sneak back in at any step. <strong>The accepted answer to
this question falls into the trap.</strong></p>
<p>A javascript date has <em>no notion of timezone</em>. It's a moment in time (ticks
since the epoch) with handy (static) functions for translating to and from
strings, using by default the "local" timezone of the device, or, if
specified, UTC or another timezone. To represent just-a-date™ with a date
object, <strong>you want your dates to represent UTC midnight at the start of the
date in question.</strong> This is a common and necessary convention that lets you
work with dates regardless of the season or timezone of their creation. So you
need to be very vigilant to manage the notion of timezone, both when you
create your midnight UTC Date object, and when you serialize it.</p>
<p>Lots of folks are confused by the default behaviour of the console. If you
spray a date to the console, the output you see will include your timezone.
This is just because the console calls <code>toString()</code> on your date, and
<code>toString()</code> gives you a local represenation. The underlying date <em>has no
timezone</em>! (So long as the time matches the timezone offset, you still have a
midnight UTC date object)</p>
<p><strong>Deserializing (or creating midnight UTC Date objects)</strong></p>
<p>This is the rounding step, with the trick that there are two "right" answers.
Most of the time, you will want your date to reflect the local timezone of the
user. <strong>What's the date here where I am.</strong>. Users in NZ and US can click at
the same time and usually get different dates. In that case, do this...</p>
<div class="code"><pre class="code literal-block"><span class="c1">// create a date (utc midnight) reflecting the value of myDate and the environment's timezone offset.</span>
<span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">Date</span><span class="p">.</span><span class="n">UTC</span><span class="p">(</span><span class="n">myDate</span><span class="p">.</span><span class="n">getFullYear</span><span class="p">(),</span><span class="n">myDate</span><span class="p">.</span><span class="n">getMonth</span><span class="p">(),</span><span class="w"> </span><span class="n">myDate</span><span class="p">.</span><span class="n">getDate</span><span class="p">()));</span>
</pre></div>

<p>Sometimes, international comparability trumps local accuracy. In that case, do
this...</p>
<div class="code"><pre class="code literal-block"><span class="c1">// the date in London of a moment in time. Device timezone is ignored.</span>
<span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">Date</span><span class="p">.</span><span class="n">UTC</span><span class="p">(</span><span class="n">myDate</span><span class="p">.</span><span class="n">getUTCFullYear</span><span class="p">(),</span><span class="w"> </span><span class="n">myDate</span><span class="p">.</span><span class="n">getUTCMonth</span><span class="p">(),</span><span class="w"> </span><span class="n">myDate</span><span class="p">.</span><span class="n">getUTCDate</span><span class="p">()));</span>
</pre></div>

<p><strong>Deserialize a date</strong></p>
<p>Often dates on the wire will be in the format YYYY-MM-DD. To deserialize them,
do this...</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">midnightUTCDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="w"> </span><span class="n">dateString</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'T00:00:00Z'</span><span class="p">);</span>
</pre></div>

<p><strong>Serializing</strong></p>
<p>Having taken care to manage timezone when you create, you now need to be sure
to keep timezone out when you convert back to a string representation. <strong>So
you can safely use...</strong></p>
<ul>
<li><code>toISOString()</code></li>
<li><code>getUTCxxx()</code></li>
<li><code>getTime() //returns a number with no time or timezone.</code></li>
<li><code>.toLocaleDateString("fr",{timeZone:"UTC"}) // whatever locale you want, but ALWAYS UTC.</code></li>
</ul>
<p><strong>And totally avoid everything else, especially...</strong></p>
<ul>
<li>
<code>getYear()</code>,<code>getMonth()</code>,<code>getDate()</code>
</li>
</ul>
<p>So to answer your question, 7 years too late...</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"date"</span><span class="w"> </span><span class="na">onchange=</span><span class="s">"isInPast(event)"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script&gt;</span>
var<span class="w"> </span>isInPast<span class="w"> </span>=<span class="w"> </span>function(event){
<span class="w">  </span>var<span class="w"> </span>userEntered<span class="w"> </span>=<span class="w"> </span>new<span class="w"> </span>Date(event.target.valueAsNumber);<span class="w"> </span>//<span class="w"> </span>valueAsNumber<span class="w"> </span>has<span class="w"> </span>no<span class="w"> </span>time<span class="w"> </span>or<span class="w"> </span>timezone!
<span class="w">  </span>var<span class="w"> </span>now<span class="w"> </span>=<span class="w"> </span>new<span class="w"> </span>Date();
<span class="w">  </span>var<span class="w"> </span>today<span class="w"> </span>=<span class="w"> </span>new<span class="w"> </span>Date(Date.UTC(now.getUTCFullYear(),<span class="w"> </span>now.getUTCMonth(),<span class="w"> </span>now.getUTCDate()<span class="w"> </span>));
<span class="w">  </span>if(userEntered.getTime()<span class="w"> </span><span class="nt">&lt; today.getTime</span><span class="err">())</span>
<span class="w">    </span><span class="err">alert("date</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">past");</span>
<span class="w">  </span><span class="err">else</span><span class="w"> </span><span class="err">if(userEntered.getTime()</span><span class="w"> </span><span class="err">==</span><span class="w"> </span><span class="err">today.getTime())</span>
<span class="w">    </span><span class="err">alert("date</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">today");</span>
<span class="w">  </span><span class="err">else</span>
<span class="w">    </span><span class="err">alert("date</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">future");</span>

<span class="err">}</span>
<span class="err">&lt;/script</span><span class="nt">&gt;</span>
</pre></div>

<p>See it running...</p>
<h3>Update 2022... free stuff with tests ...</h3>
<p>The code below is now an npm package, Epoq. The code is on github. You're
welcome :-)</p>
<h3>Update 2019... free stuff...</h3>
<p>Given the popularity of this answer, I've put it all in code. The following
function returns a wrapped date object, and only exposes those functions that
are safe to use with just-a-date™.</p>
<p>Call it with a Date object and it will resolve to JustADate reflecting the
timezone of the user. Call it with a string: if the string is an ISO 8601 with
timezone specified, we'll just round off the time part. If timezone is not
specified, we'll convert it to a date reflecting the local timezone, just as
for date objects.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">JustADate</span><span class="p">(</span><span class="n">initDate</span><span class="p">){</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">utcMidnightDateObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">supplied</span><span class="p">,</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">Now</span><span class="o">.</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">initDate</span><span class="p">)</span>
<span class="w">    </span><span class="n">initDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">();</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">initDate</span><span class="w"> </span><span class="n">specifies</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">timezone</span><span class="w"> </span><span class="n">offset</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">UTC</span><span class="p">,</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="n">reflecting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">_in</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">timezone_</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">initDate</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"string"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">initDate</span><span class="o">.</span><span class="k">match</span><span class="p">(</span><span class="o">/</span><span class="p">(</span><span class="o">-</span>\<span class="n">d</span>\<span class="n">d</span><span class="o">|</span><span class="p">(</span>\<span class="o">+|-</span><span class="p">)</span>\<span class="n">d</span><span class="p">{</span><span class="mi">2</span><span class="p">}:</span>\<span class="n">d</span><span class="p">{</span><span class="mi">2</span><span class="p">}</span><span class="o">|</span><span class="n">Z</span><span class="p">)</span><span class="o">$/</span><span class="n">gm</span><span class="p">)){</span><span class="w">  </span>
<span class="w">     </span><span class="n">utcMidnightDateObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="w"> </span><span class="n">initDate</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'T00:00:00Z'</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">init</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">object</span><span class="p">,</span><span class="w"> </span><span class="n">feed</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">constructor</span><span class="o">.</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">initDate</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">Date</span><span class="p">))</span>
<span class="w">      </span><span class="n">initDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">initDate</span><span class="p">);</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">Vital</span><span class="w"> </span><span class="n">Step</span><span class="o">!</span><span class="w"> </span><span class="n">Strip</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">part</span><span class="o">.</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">UTC</span><span class="w"> </span><span class="n">midnight</span><span class="w"> </span><span class="n">dateObj</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">timezone</span><span class="o">.</span>
<span class="w">      </span><span class="n">utcMidnightDateObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">Date</span><span class="o">.</span><span class="n">UTC</span><span class="p">(</span><span class="n">initDate</span><span class="o">.</span><span class="n">getFullYear</span><span class="p">(),</span><span class="n">initDate</span><span class="o">.</span><span class="n">getMonth</span><span class="p">(),</span><span class="w"> </span><span class="n">initDate</span><span class="o">.</span><span class="n">getDate</span><span class="p">()));</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">toISOString</span><span class="p">:()</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">toISOString</span><span class="p">(),</span>
<span class="w">    </span><span class="n">getUTCDate</span><span class="p">:()</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">getUTCDate</span><span class="p">(),</span>
<span class="w">    </span><span class="n">getUTCDay</span><span class="p">:()</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">getUTCDay</span><span class="p">(),</span>
<span class="w">    </span><span class="n">getUTCFullYear</span><span class="p">:()</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">getUTCFullYear</span><span class="p">(),</span>
<span class="w">    </span><span class="n">getUTCMonth</span><span class="p">:()</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">getUTCMonth</span><span class="p">(),</span>
<span class="w">    </span><span class="n">setUTCDate</span><span class="p">:(</span><span class="n">arg</span><span class="p">)</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">setUTCDate</span><span class="p">(</span><span class="n">arg</span><span class="p">),</span>
<span class="w">    </span><span class="n">setUTCFullYear</span><span class="p">:(</span><span class="n">arg</span><span class="p">)</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">setUTCFullYear</span><span class="p">(</span><span class="n">arg</span><span class="p">),</span>
<span class="w">    </span><span class="n">setUTCMonth</span><span class="p">:(</span><span class="n">arg</span><span class="p">)</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">setUTCMonth</span><span class="p">(</span><span class="n">arg</span><span class="p">),</span>
<span class="w">    </span><span class="n">addDays</span><span class="p">:(</span><span class="n">days</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">      </span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">setUTCDate</span><span class="p">(</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">getUTCDate</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">days</span><span class="p">)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">toString</span><span class="p">:()</span><span class="o">=&gt;</span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">toString</span><span class="p">(),</span>
<span class="w">    </span><span class="n">toLocaleDateString</span><span class="p">:(</span><span class="n">locale</span><span class="p">,</span><span class="n">options</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">      </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{};</span>
<span class="w">      </span><span class="n">options</span><span class="o">.</span><span class="n">timeZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">;</span>
<span class="w">      </span><span class="n">locale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">locale</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">"en-EN"</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">utcMidnightDateObj</span><span class="o">.</span><span class="n">toLocaleDateString</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span><span class="n">options</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>


<span class="o">//</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">initDate</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">timezone</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="s1">'ll just use the date part directly</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">JustADate</span><span class="p">(</span><span class="s1">'1963-11-22T12:30:00-06:00'</span><span class="p">)</span><span class="o">.</span><span class="n">toLocaleDateString</span><span class="p">())</span>
<span class="o">//</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="err">@</span><span class="n">prototype</span><span class="s1">'s comment</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"@prototype's issue fixed... "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">JustADate</span><span class="p">(</span><span class="s1">'1963-11-22'</span><span class="p">)</span><span class="o">.</span><span class="n">toLocaleDateString</span><span class="p">())</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/hiding-axis-text-in-matplotlib-plots/" class="u-url">Hiding axis text in matplotlib plots</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/hiding-axis-text-in-matplotlib-plots/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:57:12+08:00" itemprop="datePublished" title="2023-03-03 03:57">2023-03-03 03:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to plot a figure without tickmarks or numbers on either of the axes
(I use axes in the traditional sense, not the matplotlib nomenclature!). An
issue I have come across is where matplotlib adjusts the x(y)ticklabels by
subtracting a value N, then adds N at the end of the axis.</p>
<p>This may be vague, but the following simplified example highlights the issue,
with '6.18' being the offending value of N:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="n">prefix</span> <span class="o">=</span> <span class="mf">6.18</span>

<span class="n">rx</span> <span class="o">=</span> <span class="p">[</span><span class="n">prefix</span><span class="o">+</span><span class="p">(</span><span class="mf">0.001</span><span class="o">*</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="n">ry</span> <span class="o">=</span> <span class="p">[</span><span class="n">prefix</span><span class="o">+</span><span class="p">(</span><span class="mf">0.001</span><span class="o">*</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rx</span><span class="p">,</span><span class="n">ry</span><span class="p">,</span><span class="s1">'ko'</span><span class="p">)</span>

<span class="n">frame1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="k">for</span> <span class="n">xlabel_i</span> <span class="ow">in</span> <span class="n">frame1</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">():</span>
    <span class="n">xlabel_i</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">xlabel_i</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">xlabel_i</span> <span class="ow">in</span> <span class="n">frame1</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_yticklabels</span><span class="p">():</span>
    <span class="n">xlabel_i</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">xlabel_i</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">frame1</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_xticklines</span><span class="p">():</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">frame1</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_yticklines</span><span class="p">():</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p>The three things I would like to know are:</p>
<ol>
<li>
<p>How to turn off this behaviour in the first place (although in most cases it is useful, it is not always!) I have looked through <code>matplotlib.axis.XAxis</code> and cannot find anything appropriate</p>
</li>
<li>
<p>How can I make N disappear (i.e. <code>X.set_visible(False)</code>)</p>
</li>
<li>
<p>Is there a better way to do the above anyway? My final plot would be 4x4 subplots in a figure, if that is relevant.</p>
</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>Instead of hiding each element, you can hide the whole axis:</p>
<div class="code"><pre class="code literal-block">frame1.axes.get_xaxis().set_visible(False)
frame1.axes.get_yaxis().set_visible(False)
</pre></div>

<p>Or, you can set the ticks to an empty list:</p>
<div class="code"><pre class="code literal-block">frame1.axes.get_xaxis().set_ticks([])
frame1.axes.get_yaxis().set_ticks([])
</pre></div>

<p>In this second option, you can still use <code>plt.xlabel()</code> and <code>plt.ylabel()</code> to
add labels to the axes.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you want to hide just the axis text keeping the grid lines:</p>
<div class="code"><pre class="code literal-block">frame1 = plt.gca()
frame1.axes.xaxis.set_ticklabels([])
frame1.axes.yaxis.set_ticklabels([])
</pre></div>

<p>Doing <code>set_visible(False)</code> or <code>set_ticks([])</code> will also hide the grid lines.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/short-description-of-the-scoping-rules/" class="u-url">Short description of the scoping rules?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/short-description-of-the-scoping-rules/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:56:48+08:00" itemprop="datePublished" title="2023-03-03 03:56">2023-03-03 03:56</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What <strong>exactly</strong> are the Python scoping rules?</p>
<p>If I have some code:</p>
<div class="code"><pre class="code literal-block"><span class="nv">code1</span>
<span class="nv">class</span><span class="w"> </span><span class="nv">Foo</span>:
<span class="w">   </span><span class="nv">code2</span>
<span class="w">   </span><span class="nv">def</span><span class="w"> </span><span class="nv">spam</span>.....
<span class="w">      </span><span class="nv">code3</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="nv">code4</span>..:
<span class="w">       </span><span class="nv">code5</span>
<span class="w">       </span><span class="nv">x</span><span class="ss">()</span>
</pre></div>

<p>Where is <code>x</code> found? Some possible choices include the list below:</p>
<ol>
<li>In the enclosing source file</li>
<li>In the class namespace</li>
<li>In the function definition</li>
<li>In the for loop index variable</li>
<li>Inside the for loop</li>
</ol>
<p>Also there is the context during execution, when the function <code>spam</code> is passed
somewhere else. And maybe lambda functions pass a bit differently?</p>
<p>There must be a simple reference or algorithm somewhere. It's a confusing
world for intermediate Python programmers.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Actually, a concise rule for Python Scope resolution, from Learning Python,
3rd. Ed.. (These rules are specific to variable names, not attributes. If you
reference it without a period, these rules apply.)</p>
<p><strong>LEGB Rule</strong></p>
<ul>
<li>
<p><strong>L</strong> ocal — Names assigned in any way within a function (<code>def</code> or <code>lambda</code>), and not declared global in that function</p>
</li>
<li>
<p><strong>E</strong> nclosing-function — Names assigned in the local scope of any and all statically enclosing functions (<code>def</code> or <code>lambda</code>), from inner to outer</p>
</li>
<li>
<p><strong>G</strong> lobal (module) — Names assigned at the top-level of a module file, or by executing a <code>global</code> statement in a <code>def</code> within the file</p>
</li>
<li>
<p><strong>B</strong> uilt-in (Python) — Names preassigned in the built-in names module: <code>open</code>, <code>range</code>, <code>SyntaxError</code>, etc</p>
</li>
</ul>
<p>So, in the case of</p>
<div class="code"><pre class="code literal-block"><span class="nv">code1</span>
<span class="nv">class</span><span class="w"> </span><span class="nv">Foo</span>:
<span class="w">    </span><span class="nv">code2</span>
<span class="w">    </span><span class="nv">def</span><span class="w"> </span><span class="nv">spam</span><span class="ss">()</span>:
<span class="w">        </span><span class="nv">code3</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">code4</span>:
<span class="w">            </span><span class="nv">code5</span>
<span class="w">            </span><span class="nv">x</span><span class="ss">()</span>
</pre></div>

<p>The <code>for</code> loop does not have its own namespace. In LEGB order, the scopes
would be</p>
<ul>
<li>L: Local in <code>def spam</code> (in <code>code3</code>, <code>code4</code>, and <code>code5</code>)</li>
<li>E: Any enclosing functions (if the whole example were in another <code>def</code>)</li>
<li>G: Were there any <code>x</code> declared globally in the module (in <code>code1</code>)?</li>
<li>B: Any builtin <code>x</code> in Python.</li>
</ul>
<p><code>x</code> will never be found in <code>code2</code> (even in cases where you might expect it
would, see Antti's answer or here).</p>
<p><br></p>
<h3>Suggest</h3>
<p>Essentially, the only thing in Python that introduces a new scope is a
function definition. Classes are a bit of a special case in that anything
defined directly in the body is placed in the class's namespace, but they are
not directly accessible from within the methods (or nested classes) they
contain.</p>
<p>In your example there are only 3 scopes where x will be searched in:</p>
<ul>
<li>
<p>spam's scope - containing everything defined in code3 and code5 (as well as code4, your loop variable)</p>
</li>
<li>
<p>The global scope - containing everything defined in code1, as well as Foo (and whatever changes after it)</p>
</li>
<li>
<p>The builtins namespace. A bit of a special case - this contains the various Python builtin functions and types such as len() and str(). Generally this shouldn't be modified by any user code, so expect it to contain the standard functions and nothing else.</p>
</li>
</ul>
<p>More scopes only appear when you introduce a nested function (or lambda) into
the picture. These will behave pretty much as you'd expect however. The nested
function can access everything in the local scope, as well as anything in the
enclosing function's scope. eg.</p>
<div class="code"><pre class="code literal-block">def foo():
    x=4
    def bar():
        print x  # Accesses x from foo's scope
    bar()  # Prints 4
    x=5
    bar()  # Prints 5
</pre></div>

<p><strong>Restrictions:</strong></p>
<p>Variables in scopes other than the local function's variables can be accessed,
but can't be rebound to new parameters without further syntax. Instead,
assignment will create a new <strong>local</strong> variable instead of affecting the
variable in the parent scope. For example:</p>
<div class="code"><pre class="code literal-block"><span class="n">global_var1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">global_var2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>

<span class="n">def</span><span class="w"> </span><span class="k">func</span><span class="p">():</span>
<span class="w">    </span><span class="c1"># This is OK: It's just accessing, not rebinding</span>
<span class="w">    </span><span class="n">global_var1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># This won't affect global_var2. Instead it creates a new variable</span>
<span class="w">    </span><span class="n">global_var2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span>

<span class="w">    </span><span class="n">local1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">embedded_func</span><span class="p">():</span>
<span class="w">        </span><span class="c1"># Again, this doen't affect func's local1 variable.  It creates a </span>
<span class="w">        </span><span class="c1"># new local variable also called local1 instead.</span>
<span class="w">        </span><span class="n">local1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="w">        </span><span class="nb">print</span><span class="w"> </span><span class="n">local1</span>

<span class="w">    </span><span class="n">embedded_func</span><span class="p">()</span><span class="w"> </span><span class="c1"># Prints 5</span>
<span class="w">    </span><span class="nb">print</span><span class="w"> </span><span class="n">local1</span><span class="w">    </span><span class="c1"># Prints 4</span>
</pre></div>

<p>In order to actually modify the bindings of global variables from within a
function scope, you need to specify that the variable is global with the
global keyword. Eg:</p>
<div class="code"><pre class="code literal-block"><span class="n">global_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span>
<span class="n">def</span><span class="w"> </span><span class="n">change_global</span><span class="p">():</span>
<span class="w">    </span><span class="n">global</span><span class="w"> </span><span class="n">global_var</span>
<span class="w">    </span><span class="n">global_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">global_var</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</pre></div>

<p>Currently there is no way to do the same for variables in enclosing <em>function</em>
scopes, but Python 3 introduces a new keyword, "<code>nonlocal</code>" which will act in
a similar way to global, but for nested function scopes.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1562.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1560.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
