<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1696) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1696.html">
<link rel="prev" href="index-1697.html" type="text/html">
<link rel="next" href="index-1695.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-prevent-a-parent-s-onclick-event-from-firing-when-a-child-anchor-is-clicked/" class="u-url">How do I prevent a parent's onclick event from firing when a child anchor is clicked?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-prevent-a-parent-s-onclick-event-from-firing-when-a-child-anchor-is-clicked/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:10:20+08:00" itemprop="datePublished" title="2023-03-03 07:10">2023-03-03 07:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm currently using jQuery to make a div clickable and in this div I also have
anchors. The problem I'm running into is that when I click on an anchor both
click events are firing (for the div and the anchor). How do I prevent the
div's onclick event from firing when an anchor is clicked?</p>
<p>Here's the broken code:</p>
<p><strong>JavaScript</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s2">"#clickable a"</span><span class="p">)</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s2">"href"</span><span class="p">);</span>

<span class="o">$</span><span class="p">(</span><span class="s2">"#clickable"</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="p">})</span>
</pre></div>

<p><strong>HTML</strong></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"clickable"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Other content. --&gt;</span>
<span class="w">    </span><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"http://foo.example"</span><span class="nt">&gt;</span>I<span class="w"> </span>don't<span class="w"> </span>want<span class="w"> </span>#clickable<span class="w"> </span>to<span class="w"> </span>handle<span class="w"> </span>this<span class="w"> </span>click<span class="w"> </span>event.<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Events bubble to the highest point in the DOM at which a click event has been
attached. So in your example, even if you didn't have any other explicitly
clickable elements in the div, every child element of the div would bubble
their click event up the DOM to until the DIV's click event handler catches
it.</p>
<p>There are two solutions to this is to check to see who actually originated the
event. jQuery passes an eventargs object along with the event:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">(</span><span class="s2">"#clickable"</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">senderElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">target</span><span class="p">;</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">sender</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="o">$</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">target</span><span class="p">)</span><span class="o">.</span><span class="k">is</span><span class="p">(</span><span class="s2">"div"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<p>You can also attach a click event handler to your links which tell them to
stop event bubbling after their own handler executes:</p>
<div class="code"><pre class="code literal-block">$<span class="ss">(</span><span class="s2">"#clickable a"</span><span class="ss">)</span>.<span class="nv">click</span><span class="ss">(</span><span class="nv">function</span><span class="ss">(</span><span class="nv">e</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">something</span>
<span class="w">   </span><span class="nv">e</span>.<span class="nv">stopPropagation</span><span class="ss">()</span><span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Use stopPropagation method, see an example:</p>
<div class="code"><pre class="code literal-block">$("#clickable a").click(function(e) {
   e.stopPropagation();
});
</pre></div>

<p>As said by jQuery Docs:</p>
<blockquote>
<p><code>stopPropagation</code> method prevents the event from bubbling up the DOM tree,
preventing any parent handlers from being notified of the event.</p>
</blockquote>
<p>Keep in mind that it does not <strong>prevent others listeners to handle this
event</strong> (ex. more than one click handler for a button), if it is not the
desired effect, you must use <code>stopImmediatePropagation</code> instead.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/redirecting-to-a-relative-url-in-javascript/" class="u-url">Redirecting to a relative URL in JavaScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/redirecting-to-a-relative-url-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:09:59+08:00" itemprop="datePublished" title="2023-03-03 07:09">2023-03-03 07:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>My problem is that I want to redirect via JavaScript to a directory above.</p>
<p><strong>My code:</strong></p>
<div class="code"><pre class="code literal-block">location.href = (location.href).substr(0, (location.href).lastIndexOf('folder'))
</pre></div>

<p>The URL looks like this:</p>
<p><code>example.com/path/folder/index.php?file=abc&amp;test=123&amp;lol=cool</code></p>
<p>The redirect affect just this:</p>
<p><code>example.com/path/&amp;test=123&amp;lol=cool</code></p>
<p>But want to have this:</p>
<p><code>example.com/path/</code></p>
<p>How can I do it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can do a relative redirect:</p>
<div class="code"><pre class="code literal-block">window.location.href = '../'; //one level up
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">window.location.href = '/path'; //relative to domain
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you use <code>location.hostname</code> you will get your domain.com part. Then
<code>location.pathname</code> will give you /path/folder. I would split
<code>location.pathname</code> by / and reassemble the URL. But unless you need the
querystring, you can just redirect to <code>..</code> to go a directory above.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-posted-json-in-flask/" class="u-url">How to get POSTed JSON in Flask?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-posted-json-in-flask/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:09:34+08:00" itemprop="datePublished" title="2023-03-03 07:09">2023-03-03 07:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to build a simple API using Flask, in which I now want to read some
POSTed JSON. I do the POST with the Postman Chrome extension, and the JSON I
POST is simply <code>{"text":"lalala"}</code>. I try to read the JSON using the following
method:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/api/add_message/&lt;uuid&gt;'</span><span class="p">,</span><span class="w"> </span><span class="n">methods</span><span class="o">=[</span><span class="n">'GET', 'POST'</span><span class="o">]</span><span class="p">)</span>
<span class="n">def</span><span class="w"> </span><span class="n">add_message</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span><span class="err">:</span>
<span class="w">    </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="n">json</span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="n">content</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">uuid</span>
</pre></div>

<p>On the browser it correctly returns the UUID I put in the GET, but on the
console, it just prints out <code>None</code> (where I expect it to print out the
<code>{"text":"lalala"}</code>. Does anybody know how I can get the posted JSON from
within the Flask method?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>First of all, the <code>.json</code> attribute is a property that delegates to the
<code>request.get_json()</code> method, which documents why you see <code>None</code> here.</p>
<p>You need to set the request content type to <code>application/json</code> for the <code>.json</code>
property and <code>.get_json()</code> method (with no arguments) to work as either will
produce <code>None</code> otherwise. See the Flask <code>Request</code> documentation:</p>
<blockquote>
<p>This will contain the parsed JSON data if the mimetype indicates JSON (
<em>application/json</em> , see <code>is_json()</code>), otherwise it will be <code>None</code>.</p>
</blockquote>
<p>You can tell <code>request.get_json()</code> to skip the content type requirement by
passing it the <code>force=True</code> keyword argument.</p>
<p>Note that if an <em>exception</em> is raised at this point (possibly resulting in a
400 Bad Request response), your JSON <em>data</em> is invalid. It is in some way
malformed; you may want to check it with a JSON validator.</p>
<p><br></p>
<h3>Suggest</h3>
<p>For reference, here's complete code for how to send json from a Python client:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">'http://localhost:5000/api/add_message/1234'</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">"mytext"</span><span class="p">:</span><span class="s2">"lalala"</span><span class="p">})</span>
<span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</pre></div>

<p>The "json=" input will automatically set the content-type, as discussed here:
How to POST JSON data with Python Requests?</p>
<p>And the above client will work with this server-side code:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">'/api/add_message/&lt;uuid&gt;'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">'GET'</span><span class="p">,</span> <span class="s1">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">add_message</span><span class="p">(</span><span class="n">uuid</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">[</span><span class="s1">'mytext'</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">"uuid"</span><span class="p">:</span><span class="n">uuid</span><span class="p">})</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span> <span class="s1">'0.0.0.0'</span><span class="p">,</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1697.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1695.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
