<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 586) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-586.html">
<link rel="prev" href="index-587.html" type="text/html">
<link rel="next" href="index-585.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-list-dog-a-subclass-of-list-animal-why-are-java-generics-not-implicitly-polymorphic/" class="u-url">Is List&lt;Dog&gt; a subclass of List&lt;Animal&gt;? Why are Java generics not implicitly polymorphic?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-list-dog-a-subclass-of-list-animal-why-are-java-generics-not-implicitly-polymorphic/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:39:27+08:00" itemprop="datePublished" title="2023-02-17 10:39">2023-02-17 10:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm a bit confused about how Java generics handle inheritance / polymorphism.</p>
<p>Assume the following hierarchy -</p>
<p><strong>Animal</strong> (Parent)</p>
<p><strong>Dog</strong> - <strong>Cat</strong> (Children)</p>
<p>So suppose I have a method <code>doSomething(List&lt;Animal&gt; animals)</code>. By all the
rules of inheritance and polymorphism, I would assume that a <code>List&lt;Dog&gt;</code> <em>is</em>
a <code>List&lt;Animal&gt;</code> and a <code>List&lt;Cat&gt;</code> <em>is</em> a <code>List&lt;Animal&gt;</code> - and so either one
could be passed to this method. Not so. If I want to achieve this behavior, I
have to explicitly tell the method to accept a list of any subclass of Animal
by saying <code>doSomething(List&lt;? extends Animal&gt; animals)</code>.</p>
<p>I understand that this is Java's behavior. My question is <em>why</em>? Why is
polymorphism generally implicit, but when it comes to generics it must be
specified?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>No, a <code>List&lt;Dog&gt;</code> is <em>not</em> a <code>List&lt;Animal&gt;</code>. Consider what you can do with a
<code>List&lt;Animal&gt;</code> - you can add <em>any</em> animal to it... including a cat. Now, can
you logically add a cat to a litter of puppies? Absolutely not.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Illegal code - because otherwise life would be Bad</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Dog</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dogs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Dog</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// ArrayList implements List</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span><span class="w"> </span><span class="n">animals</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">dogs</span><span class="p">;</span><span class="w"> </span><span class="c1">// Awooga awooga</span>
<span class="n">animals</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">());</span>
<span class="n">Dog</span><span class="w"> </span><span class="n">dog</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">dogs</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// This should be safe, right?</span>
</pre></div>

<p>Suddenly you have a <em>very</em> confused cat.</p>
<p>Now, you <em>can't</em> add a <code>Cat</code> to a <code>List&lt;? extends Animal&gt;</code> because you don't
know it's a <code>List&lt;Cat&gt;</code>. You can retrieve a value and know that it will be an
<code>Animal</code>, but you can't add arbitrary animals. The reverse is true for <code>List&lt;?
super Animal&gt;</code> - in that case you can add an <code>Animal</code> to it safely, but you
don't know anything about what might be retrieved from it, because it could be
a <code>List&lt;Object&gt;</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>What you are looking for is called <em>covariant type parameters</em>. This means
that if one type of object can be substituted for another in a method (for
instance, <code>Animal</code> can be replaced with <code>Dog</code>), the same applies to
expressions using those objects (so <code>List&lt;Animal&gt;</code> could be replaced with
<code>List&lt;Dog&gt;</code>). The problem is that covariance is not safe for mutable lists in
general. Suppose you have a <code>List&lt;Dog&gt;</code>, and it is being used as a
<code>List&lt;Animal&gt;</code>. What happens when you try to add a Cat to this <code>List&lt;Animal&gt;</code>
which is really a <code>List&lt;Dog&gt;</code>? Automatically allowing type parameters to be
covariant breaks the type system.</p>
<p>It would be useful to add syntax to allow type parameters to be specified as
covariant, which avoids the <code>? extends Foo</code> in method declarations, but that
does add additional complexity.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-vim-recording-and-how-can-it-be-disabled/" class="u-url">What is Vim recording and how can it be disabled?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-vim-recording-and-how-can-it-be-disabled/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:39:04+08:00" itemprop="datePublished" title="2023-02-17 10:39">2023-02-17 10:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I keep seeing the <code>recording</code> message at the bottom of my gVim 7.2 window.</p>
<p>What is it and how do I turn it off?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You start recording by <code>q``&lt;letter&gt;</code> and you can end it by typing <code>q</code> again.</p>
<p>Recording is a really useful feature of Vim.</p>
<p>It records everything you type. You can then replay it simply by typing
<code>@``&lt;letter&gt;</code>. Record search, movement, replacement...</p>
<p>One of the best feature of Vim IMHO.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Type <code>:h recording</code> to learn more.</p>
<div class="code"><pre class="code literal-block"><span class="w">                           </span><span class="o">***</span><span class="n">q</span><span class="o">***</span><span class="w"> </span><span class="o">***</span><span class="n">recording</span><span class="o">***</span>
<span class="n">q</span><span class="err">{</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z</span><span class="ss">"}           Record typed characters into register {0-9a-zA-Z"</span><span class="err">}</span>
<span class="w">                        </span><span class="p">(</span><span class="n">uppercase</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">append</span><span class="p">).</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="s1">'q'</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">disabled</span>
<span class="w">                        </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">register</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">doesn</span><span class="s1">'t work inside</span>
<span class="s1">                        a mapping.  {Vi: no recording}</span>

<span class="s1">q                       Stops recording.  (Implementation note: The '</span><span class="n">q</span><span class="s1">' that</span>
<span class="s1">                        stops recording is not stored in the register, unless</span>
<span class="s1">                        it was the result of a mapping)  {Vi: no recording}</span>


<span class="s1">                                                        *@*</span>
<span class="s1">@{0-9a-z".=*}           Execute the contents of register {0-9a-z".=*} [count]</span>
<span class="s1">                        times.  Note that register '</span><span class="o">%</span><span class="s1">' (name of the current</span>
<span class="s1">                        file) and '</span><span class="err">#'</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alternate</span><span class="w"> </span><span class="k">file</span><span class="p">)</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">be</span>
<span class="w">                        </span><span class="n">used</span><span class="p">.</span><span class="w">  </span><span class="k">For</span><span class="w"> </span><span class="ss">"@="</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">prompted</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">enter</span><span class="w"> </span><span class="n">an</span>
<span class="w">                        </span><span class="n">expression</span><span class="p">.</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">then</span>
<span class="w">                        </span><span class="n">executed</span><span class="p">.</span><span class="w">  </span><span class="n">See</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="o">|</span><span class="err">@:</span><span class="o">|</span><span class="p">.</span><span class="w">  </span><span class="err">{</span><span class="nl">Vi</span><span class="p">:</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">registers</span><span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-any-standard-for-json-api-response-format/" class="u-url">Is there any standard for JSON API response format?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-any-standard-for-json-api-response-format/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:38:38+08:00" itemprop="datePublished" title="2023-02-17 10:38">2023-02-17 10:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Do standards or best practices exist for structuring JSON responses from an
API? Obviously, every application's data is different, so that much I'm not
concerned with, but rather the "response boilerplate", if you will. An example
of what I mean:</p>
<p><strong>Successful request:</strong></p>
<div class="code"><pre class="code literal-block"><span class="p">{</span>
<span class="w">  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Application</span><span class="o">-</span><span class="n">specific</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">go</span><span class="w"> </span><span class="n">here</span><span class="o">.</span><span class="w"> </span><span class="o">*/</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Failed request:</strong></p>
<div class="code"><pre class="code literal-block"><span class="p">{</span>
<span class="w">  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Application</span><span class="o">-</span><span class="n">specific</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">go</span><span class="w"> </span><span class="n">here</span><span class="o">.</span><span class="w"> </span><span class="o">*/</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An error occurred!"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Yes there are a couple of standards (albeit some liberties on the definition
of standard) that have emerged:</p>
<ol>
<li>JSON API - JSON API covers creating and updating resources as well, not just responses.</li>
<li>JSend - Simple and probably what you are already doing.</li>
<li>OData JSON Protocol - Very complicated.</li>
<li>HAL - Like OData but aiming to be HATEOAS like.</li>
</ol>
<p>There are also JSON API description formats:</p>
<ul>
<li>Swagger <ul>
<li>JSON Schema (used by swagger but you could use it stand alone)</li>
</ul>
</li>
<li>WADL in JSON</li>
<li>RAML</li>
<li>HAL because HATEOAS in theory is self describing.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<h4>Google JSON guide</h4>
<p>Success response return <code>data</code></p>
<div class="code"><pre class="code literal-block">{
  "data": {
    "id": 1001,
    "name": "Wing"
  }
}
</pre></div>

<p>Error response return <code>error</code></p>
<div class="code"><pre class="code literal-block">{
  "error": {
    "code": 404,
    "message": "ID not found"
  }
}
</pre></div>

<p>and if your client is JS, you can use <code>if ("error" in response) {}</code> to check
if there is an error.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-587.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-585.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
