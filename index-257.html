<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 257) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-257.html">
<link rel="prev" href="index-258.html" type="text/html">
<link rel="next" href="index-256.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/zi-fu-chuan-ge-shi-vs-format-vs-f-string-literal/" class="u-url">字符串格式：% vs.format vs. f-string literal</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/zi-fu-chuan-ge-shi-vs-format-vs-f-string-literal/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:20:54+08:00" itemprop="datePublished" title="2023-02-17 02:20">2023-02-17 02:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>有多种字符串格式化方法：</p>
<ul>
<li>蟒蛇&lt;2.6：<code>"Hello %s" % name</code>
</li>
<li>Python 2.6+：（<code>"Hello {}".format(name)</code> 使用<code>str.format</code>）</li>
<li>Python 3.6+：（<code>f"{name}"</code> 使用 f 字符串）</li>
</ul>
<p>哪个更好，适用于什么情况？</p>
<hr>
<ol>
<li>
<p>下面这几种方法的结果是一样的，那么有什么区别呢？</p>
<div class="code"><pre class="code literal-block">name = "Alice"
</pre></div>

<p>"Hello %s" % name
"Hello {0}".format(name)
f"Hello {name}"</p>
<h2>Using named arguments:</h2>
<p>"Hello %(kwarg)s" % {'kwarg': name}
"Hello {kwarg}".format(kwarg=name)
f"Hello {name}"</p>
</li>
<li>
<p>字符串格式化何时运行，如何避免运行时性能损失？</p>
</li>
</ol>
<hr>
<p>如果您试图关闭只是寻找格式化字符串的方法的重复问题，请使用如何将变量的值放入字符串中？.</p>
<p><br><br></p>
<h2>解答</h2>
<p>回答你的第一个问题......<code>.format</code>只是在很多方面看起来更复杂。一个烦人的事情<code>%</code>也是它如何接受变量或元组。你会认为以下总是有效的：</p>
<div class="code"><pre class="code literal-block">"Hello %s" % name
</pre></div>

<p>然而，如果<code>name</code>碰巧是<code>(1, 2, 3)</code>，它会抛出一个<code>TypeError</code>. 为了保证它总是打印，你需要做</p>
<div class="code"><pre class="code literal-block">"Hello %s" % (name,)   # supply the single argument as a single-item tuple
</pre></div>

<p>这太丑了。<code>.format</code>没有那些问题。同样在你给出的第二个例子中，这个<code>.format</code>例子看起来更清晰。</p>
<p>仅将其用于与 Python 2.5 的向后兼容。</p>
<hr>
<p>要回答您的第二个问题，字符串格式化与任何其他操作同时发生 - 当评估字符串格式化表达式时。Python
不是惰性语言，它会在调用函数之前对表达式求值，因此表达式<code>log.debug("some debug info: %s" %
some_info)</code>会首先对字符串求值，例如<code>"some debug info: roflcopters are
active"</code>，然后将该字符串传递给<code>log.debug()</code>。</p>
<p><br></p>
<h3>更多建议</h3>
<p>模运算符（ % ）不能做的事情，afaik：</p>
<div class="code"><pre class="code literal-block">tu = (12,45,22222,103,6)
print '{0} {2} {1} {2} {3} {2} {4} {2}'.format(*tu)
</pre></div>

<p>结果</p>
<div class="code"><pre class="code literal-block"><span class="mf">12</span><span class="w"> </span><span class="mf">22222</span><span class="w"> </span><span class="mf">45</span><span class="w"> </span><span class="mf">22222</span><span class="w"> </span><span class="mf">103</span><span class="w"> </span><span class="mf">22222</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">22222</span>
</pre></div>

<p>很有用。</p>
<p>还有一点：<code>format()</code>作为一个函数，可以在其他函数中用作参数：</p>
<div class="code"><pre class="code literal-block"><span class="n">li</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">784</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">1254</span><span class="p">,</span><span class="mi">4785</span><span class="p">,</span><span class="mi">984</span><span class="p">]</span>
<span class="nb">print</span> <span class="nb">map</span><span class="p">(</span><span class="s1">'the number is </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">,</span><span class="n">li</span><span class="p">)</span>

<span class="nb">print</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span><span class="n">timedelta</span>

<span class="n">once_upon_a_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">hours</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>  <span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="n">gen</span> <span class="o">=</span><span class="p">(</span><span class="n">once_upon_a_time</span> <span class="o">+</span><span class="n">x</span><span class="o">*</span><span class="n">delta</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

<span class="nb">print</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="s1">'{:%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S}'</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">gen</span><span class="p">))</span>
</pre></div>

<p>结果是：</p>
<div class="code"><pre class="code literal-block"><span class="k">['the number is 12', 'the number is 45', 'the number is 78', 'the number is 784', 'the number is 2', 'the number is 69', 'the number is 1254', 'the number is 4785', 'the number is 984']</span>

<span class="na">2010-07-01 12</span><span class="o">:</span><span class="s">00:00</span>
<span class="na">2010-07-14 20</span><span class="o">:</span><span class="s">20:00</span>
<span class="na">2010-07-28 04</span><span class="o">:</span><span class="s">40:00</span>
<span class="na">2010-08-10 13</span><span class="o">:</span><span class="s">00:00</span>
<span class="na">2010-08-23 21</span><span class="o">:</span><span class="s">20:00</span>
<span class="na">2010-09-06 05</span><span class="o">:</span><span class="s">40:00</span>
<span class="na">2010-09-19 14</span><span class="o">:</span><span class="s">00:00</span>
<span class="na">2010-10-02 22</span><span class="o">:</span><span class="s">20:00</span>
<span class="na">2010-10-16 06</span><span class="o">:</span><span class="s">40:00</span>
<span class="na">2010-10-29 15</span><span class="o">:</span><span class="s">00:00</span>
<span class="na">2010-11-11 23</span><span class="o">:</span><span class="s">20:00</span>
<span class="na">2010-11-25 07</span><span class="o">:</span><span class="s">40:00</span>
<span class="na">2010-12-08 16</span><span class="o">:</span><span class="s">00:00</span>
<span class="na">2010-12-22 00</span><span class="o">:</span><span class="s">20:00</span>
<span class="na">2011-01-04 08</span><span class="o">:</span><span class="s">40:00</span>
<span class="na">2011-01-17 17</span><span class="o">:</span><span class="s">00:00</span>
<span class="na">2011-01-31 01</span><span class="o">:</span><span class="s">20:00</span>
<span class="na">2011-02-13 09</span><span class="o">:</span><span class="s">40:00</span>
<span class="na">2011-02-26 18</span><span class="o">:</span><span class="s">00:00</span>
<span class="na">2011-03-12 02</span><span class="o">:</span><span class="s">20:00</span>
</pre></div>

<p><br><br><a href="posts/string-formatting-vs-format-vs-f-string-literal/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-shi-yong-jquery-geng-gai-chao-lian-jie-de-href-shu-xing/" class="u-url">如何使用 jQuery 更改超链接的 href 属性</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-shi-yong-jquery-geng-gai-chao-lian-jie-de-href-shu-xing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:20:28+08:00" itemprop="datePublished" title="2023-02-17 02:20">2023-02-17 02:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>如何<code>href</code>使用 jQuery 更改超链接的属性（链接目标）？</p>
<p><br><br></p>
<h2>解答</h2>
<p>使用</p>
<div class="code"><pre class="code literal-block">$("a").attr("href", "http://www.google.com/")
</pre></div>

<p>将修改所有超链接的 href 以指向 Google。不过，您可能想要一个更精致的选择器。例如，如果您混合使用链接源（超链接）和链接目标（又名“锚”）锚标记：</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">name=</span><span class="s">"MyLinks"</span><span class="nt">&gt;&lt;/a&gt;</span>
<span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"http://www.codeproject.com/"</span><span class="nt">&gt;</span>The<span class="w"> </span>CodeProject<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>...那么您可能不想不小心<code>href</code>向它们添加属性。为了安全起见，我们可以指定我们的选择器将只匹配<code>&lt;a&gt;</code>具有现有属性的标签<code>href</code>：</p>
<div class="code"><pre class="code literal-block"><span class="err">$</span><span class="p">(</span><span class="ss">"a[href]"</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="p">...</span>
</pre></div>

<p>当然，您可能会有更有趣的想法。如果你想将一个锚点与一个特定的现有的匹配<code>href</code>，你可以使用这样的东西：</p>
<div class="code"><pre class="code literal-block">$("a[href='http://www.google.com/']").attr('href', 'http://www.live.com/')
</pre></div>

<p><code>href</code>这将找到与字符串完全匹配的链接<code>http://www.google.com/</code>。一个更复杂的任务可能是匹配，然后只更新部分<code>href</code>：</p>
<div class="code"><pre class="code literal-block"><span class="o">$(</span><span class="s2">"a</span><span class="cp">[</span><span class="nx">href</span><span class="p">^</span><span class="o">=</span><span class="s1">'http://stackoverflow.com'</span><span class="cp">]</span><span class="s2">"</span><span class="o">)</span>
<span class="w">   </span><span class="p">.</span><span class="nc">each</span><span class="o">(</span><span class="nt">function</span><span class="o">()</span>
<span class="w">   </span><span class="p">{</span><span class="w"> </span>
<span class="w">      </span><span class="err">this.href</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">this.href.replace(/^</span><span class="n">http</span><span class="p">:</span><span class="err">\</span><span class="o">/</span><span class="err">\</span><span class="o">/</span><span class="n">beta</span><span class="err">\</span><span class="o">.</span><span class="n">stackoverflow</span><span class="err">\</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="p">,</span><span class="w"> </span>
<span class="w">         </span><span class="s2">"http://stackoverflow.com"</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span><span class="o">);</span>
</pre></div>

<p>第一部分仅选择 href 以 <em>开头的</em> 链接<code>http://stackoverflow.com</code>。然后，定义了一个函数，该函数使用一个简单的正则表达式将
URL 的这一部分替换为新的 URL。请注意这为您提供的灵活性 - 可以在此处对链接进行任何类型的修改。</p>
<p><br></p>
<h3>更多建议</h3>
<p>对于 jQuery 1.6 及更高版本，您应该使用：</p>
<div class="code"><pre class="code literal-block">$("a").prop("href", "http://www.jakcms.com")
</pre></div>

<p><code>prop</code>和之间的区别<code>attr</code>是<code>attr</code>获取 HTML 属性，而<code>prop</code>获取 DOM 属性。</p>
<p>您可以在这篇文章中找到更多详细信息：.prop() vs .attr()</p>
<p><br><br><a href="posts/how-to-change-the-href-attribute-for-a-hyperlink-using-jquery/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pdf-wen-jian-de-zheng-que-mime-mei-ti-lei-xing/" class="u-url">PDF 文件的正确 MIME 媒体类型</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pdf-wen-jian-de-zheng-que-mime-mei-ti-lei-xing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:19:57+08:00" itemprop="datePublished" title="2023-02-17 02:19">2023-02-17 02:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>在处理 PDF 时，我遇到过 MIME 类型<code>application/pdf</code>和<code>application/x-pdf</code>其他类型。</p>
<p>这两种类型之间有区别吗？如果有区别是什么？一个比另一个更受欢迎吗？</p>
<p>我正在开发一个必须提供大量 PDF 的网络应用程序，如果有的话，我想以正确的方式进行。</p>
<p><br><br></p>
<h2>解答</h2>
<p>标准媒体类型（以前称为 MIME 类型）是<code>application/pdf</code>. 该分配在RFC 3778，The application/pdf Media
Type中定义，引用自Media Types registry。</p>
<p>媒体类型由标准机构控制，即互联网编号分配机构(IANA)。这是管理根名称服务器和 IP 地址空间的同一组织。</p>
<p>的使用<code>x-pdf</code>早于 PDF
媒体类型的标准化。命名空间中的媒体类型<code>x-</code>被认为是实验性的，就像<code>vnd.</code>命名空间中的媒体类型被认为是供应商特定的一样。<code>x-pdf</code>可能用于与旧软件兼容。</p>
<p><br></p>
<h3>更多建议</h3>
<p>这是RFC 2045 - Multipurpose Internet Mail Extensions (MIME) Part One: Format of
Internet Message Bodies中定义的约定。</p>
<blockquote>
<ol>
<li>
<p>私有 <em>[子类型]</em> 值（以“X-”开头）可以在两个合作代理之间双边定义，无需外部注册或标准化。此类值无法注册或标准化。</p>
</li>
<li>
<p>新的标准值应该按照RFC 2048中的描述向 IANA 注册。</p>
</li>
</ol>
</blockquote>
<p>类似的限制适用于顶级类型。来自同一来源，</p>
<blockquote>
<p>如果出于任何原因要使用另一个顶级类型，则必须为其指定一个以“X-”开头的名称，以表明其非标准状态并避免与未来的正式名称发生潜在冲突。</p>
</blockquote>
<p><em>（请注意，根据 RFC 2045，“[m] 媒体类型和子类型的匹配始终不区分大小写”，因此 'X-' 和 'x-' 的解释没有区别。）</em></p>
<p>因此可以合理地猜测在 IANA 定义“application/foo”之前使用了“application/x-foo”。它仍然可能被不了解 IANA
令牌分配的人使用。</p>
<p>正如 Chris Hanson 所说，MIME 类型由 IANA 控制。这在RFC 2048 - 多用途 Internet 邮件扩展 (MIME)
第四部分：注册程序中有详细说明。根据IANA 引用的RFC 3778作为“application/pdf”的定义，</p>
<blockquote>
<p>application/pdf 媒体类型于 1993 年由 Paul Lindner 首次注册，供 gopher 协议使用；该注册随后于 1994 年由
Steve Zilles 更新。</p>
</blockquote>
<p>“application/pdf”类型已经存在了十多年。所以在我看来，无论在新应用程序中使用“application/x-pdf”的地方，这个决定都可能不是故意的。</p>
<p><br><br><a href="posts/proper-mime-media-type-for-pdf-files/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-258.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-256.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
