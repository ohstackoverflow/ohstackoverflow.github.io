<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 213) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-213.html">
<link rel="prev" href="index-214.html" type="text/html">
<link rel="next" href="index-212.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/calculate-relative-time-in-c/" class="u-url">Calculate relative time in C#</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/calculate-relative-time-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:02:07+08:00" itemprop="datePublished" title="2023-02-17 01:02">2023-02-17 01:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Given a specific <code>DateTime</code> value, how do I display relative time, like:</p>
<ul>
<li><code>2 hours ago</code></li>
<li><code>3 days ago</code></li>
<li><code>a month ago</code></li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>Jeff, your code is nice but could be clearer with constants (as suggested in
Code Complete).</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">SECOND</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">MINUTE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">SECOND</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">HOUR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MINUTE</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">DAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">HOUR</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">MONTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">DAY</span><span class="p">;</span>

<span class="k">var</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">TimeSpan</span><span class="p">(</span><span class="n">DateTime</span><span class="o">.</span><span class="n">UtcNow</span><span class="o">.</span><span class="n">Ticks</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">yourDate</span><span class="o">.</span><span class="n">Ticks</span><span class="p">);</span>
<span class="n">double</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">Abs</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">TotalSeconds</span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MINUTE</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ts</span><span class="o">.</span><span class="n">Seconds</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="s2">"one second ago"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ts</span><span class="o">.</span><span class="n">Seconds</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" seconds ago"</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MINUTE</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"a minute ago"</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MINUTE</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ts</span><span class="o">.</span><span class="n">Minutes</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" minutes ago"</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MINUTE</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"an hour ago"</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">HOUR</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ts</span><span class="o">.</span><span class="n">Hours</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" hours ago"</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">HOUR</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"yesterday"</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">DAY</span><span class="p">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ts</span><span class="o">.</span><span class="n">Days</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" days ago"</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MONTH</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">months</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Convert</span><span class="o">.</span><span class="n">ToInt32</span><span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">Floor</span><span class="p">((</span><span class="n">double</span><span class="p">)</span><span class="n">ts</span><span class="o">.</span><span class="n">Days</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">30</span><span class="p">));</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">months</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="s2">"one month ago"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">months</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" months ago"</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
<span class="w">  </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">years</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Convert</span><span class="o">.</span><span class="n">ToInt32</span><span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">Floor</span><span class="p">((</span><span class="n">double</span><span class="p">)</span><span class="n">ts</span><span class="o">.</span><span class="n">Days</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">365</span><span class="p">));</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">years</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="s2">"one year ago"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">years</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" years ago"</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h3>jquery.timeago plugin</h3>
<p>Jeff, because Stack Overflow uses jQuery extensively, I recommend the
jquery.timeago plugin.</p>
<p>Benefits:</p>
<ul>
<li>Avoid timestamps dated "1 minute ago" even though the page was opened 10 minutes ago; timeago refreshes automatically.</li>
<li>You can take full advantage of page and/or fragment caching in your web applications, because the timestamps aren't calculated on the server.</li>
<li>You get to use microformats like the cool kids.</li>
</ul>
<p>Just attach it to your timestamps on DOM ready:</p>
<div class="code"><pre class="code literal-block">jQuery(document).ready(function() {
    jQuery('abbr.timeago').timeago();
});
</pre></div>

<p>This will turn all <code>abbr</code> elements with a class of timeago and an ISO 8601
timestamp in the title:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;abbr</span><span class="w"> </span><span class="na">class=</span><span class="s">"timeago"</span><span class="w"> </span><span class="na">title=</span><span class="s">"2008-07-17T09:24:17Z"</span><span class="nt">&gt;</span>July<span class="w"> </span>17,<span class="w"> </span>2008<span class="nt">&lt;/abbr&gt;</span>
</pre></div>

<p>into something like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;abbr</span><span class="w"> </span><span class="na">class=</span><span class="s">"timeago"</span><span class="w"> </span><span class="na">title=</span><span class="s">"July 17, 2008"</span><span class="nt">&gt;</span>4<span class="w"> </span>months<span class="w"> </span>ago<span class="nt">&lt;/abbr&gt;</span>
</pre></div>

<p>which yields: 4 months ago. As time passes, the timestamps will automatically
update.</p>
<p><em>Disclaimer: I wrote this plugin, so I'm biased.</em></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-get-the-id-of-an-element-using-jquery/" class="u-url">How can I get the ID of an element using jQuery?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-get-the-id-of-an-element-using-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:01:39+08:00" itemprop="datePublished" title="2023-02-17 01:01">2023-02-17 01:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="w">  </span>$(document).ready(function()<span class="w"> </span>{
<span class="w">    </span>alert($('#test').id);
<span class="w">  </span>});<span class="w">  </span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>Why doesn't the above work, and how should I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The jQuery way:</p>
<div class="code"><pre class="code literal-block">$('#test').attr('id')
</pre></div>

<p>In your example:</p>
<div class="code"><pre class="code literal-block">$(document).ready(function()<span class="w"> </span>{
<span class="w">  </span>console.log($('#test').attr('id'));
});


<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>

<p>Or through the DOM:</p>
<div class="code"><pre class="code literal-block">$('#test').get(0).id;
</pre></div>

<p>or even :</p>
<div class="code"><pre class="code literal-block">$('#test')[0].id;
</pre></div>

<p>and reason behind usage of <code>$('#test').get(0)</code> in JQuery or even
<code>$('#test')[0]</code> is that <code>$('#test')</code> is a JQuery selector and <strong>returns an
array() of results</strong> not a single element by its default functionality</p>
<p>an alternative for DOM selector in jquery is</p>
<div class="code"><pre class="code literal-block">$('#test').prop('id')
</pre></div>

<p>which is different from <code>.attr()</code> and <code>$('#test').prop('foo')</code> grabs the
specified DOM <code>foo</code> property, while <code>$('#test').attr('foo')</code> grabs the
specified HTML <code>foo</code> attribute and you can find more details about differences
here.</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>$('selector').attr('id')</code> will return the id of the first matched element.
Reference.</p>
<p>If your matched set contains more than one element, you can use the
conventional <code>.each</code> iterator to return an array containing each of the ids:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="o">$</span><span class="p">(</span><span class="s1">'selector'</span><span class="p">)</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="n">function</span><span class="p">(){</span>
<span class="w">  </span><span class="n">retval</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="o">$</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s1">'id'</span><span class="p">))</span>
<span class="p">})</span>
<span class="k">return</span><span class="w"> </span><span class="n">retval</span>
</pre></div>

<p>Or, if you're willing to get a little grittier, you can avoid the wrapper and
use the <code>.map</code> shortcut.</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span>$<span class="ss">(</span><span class="s1">'.selector'</span><span class="ss">)</span>.<span class="nv">map</span><span class="ss">(</span><span class="nv">function</span><span class="ss">(</span><span class="nv">index</span>,<span class="nv">dom</span><span class="ss">)</span>{<span class="k">return</span><span class="w"> </span><span class="nv">dom</span>.<span class="nv">id</span>}<span class="ss">)</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-force-a-favicon-refresh/" class="u-url">How do I force a favicon refresh?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-force-a-favicon-refresh/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:00:54+08:00" itemprop="datePublished" title="2023-02-17 01:00">2023-02-17 01:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a Grails application running locally using its own tomcat and I have
just changed the favicon for a new one. Problem is that I can not see it in
any browser. The old favicon shows up or I get no favicon at all, but not my
new one. I do not think this is a Grails issue per se, more an issue with
favicons.</p>
<p>What is supposed to happen with favicons? How are they supposed to work? I
have numerous bookmarks in my browser which have the wrong icons and they
never seem to get refreshed. How do I force the server/browser to stop caching
them? It seems pretty silly to always cache them given they are normally only
16x16. Why not just upload them with every visit to the page? It is not
exactly a huge overhead.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To refresh your site's favicon you can force browsers to download a new
version using the link tag and a query string on your filename.<br>
This is especially helpful in production environments to make sure your users
get the update.</p>
<div class="code"><pre class="code literal-block">&lt;link rel="icon" href="http://www.yoursite.com/favicon.ico?v=2" /&gt;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Adapted from lineofbird's answer beloew, you can do the following:</p>
<ol>
<li>
<p>Go directly to the favicon url in the address bar by typing in it's address <em>e.g.</em></p>
<ul>
<li><code>www.yoursite.com/favicon.ico</code></li>
<li><code>www.yoursite.com/apple-touch-icon.png</code></li>
<li>etc.</li>
<li>Navigate to the url by pressing <code>Enter</code>
</li>
</ul>
</li>
<li>
<p>Refresh with <code>Ctrl</code>+<code>F5</code></p>
</li>
<li>
<p>Restart your browser (e.g. Chrome, Firefox)</p>
</li>
</ol>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-214.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-212.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
