<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1672) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1672.html">
<link rel="prev" href="index-1673.html" type="text/html">
<link rel="next" href="index-1671.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/retrieving-a-list-from-a-java-util-stream-stream-in-java-8/" class="u-url">Retrieving a List from a java.util.stream.Stream in Java 8</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/retrieving-a-list-from-a-java-util-stream-stream-in-java-8/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:37:36+08:00" itemprop="datePublished" title="2023-03-03 06:37">2023-03-03 06:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was playing around with Java 8 lambdas to easily filter collections. But I
did not find a concise way to retrieve the result as a new list within the
same statement. Here is my most concise approach so far:</p>
<div class="code"><pre class="code literal-block"><span class="nt">List</span><span class="o">&lt;</span><span class="nt">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">sourceLongList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">Arrays</span><span class="p">.</span><span class="nc">asList</span><span class="o">(</span><span class="nt">1L</span><span class="o">,</span><span class="w"> </span><span class="nt">10L</span><span class="o">,</span><span class="w"> </span><span class="nt">50L</span><span class="o">,</span><span class="w"> </span><span class="nt">80L</span><span class="o">,</span><span class="w"> </span><span class="nt">100L</span><span class="o">,</span><span class="w"> </span><span class="nt">120L</span><span class="o">,</span><span class="w"> </span><span class="nt">133L</span><span class="o">,</span><span class="w"> </span><span class="nt">333L</span><span class="o">);</span>
<span class="nt">List</span><span class="o">&lt;</span><span class="nt">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">targetLongList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="nt">sourceLongList</span><span class="p">.</span><span class="nc">stream</span><span class="o">()</span><span class="p">.</span><span class="nc">filter</span><span class="o">(</span><span class="nt">l</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">l</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">100</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">targetLongList</span><span class="p">::</span><span class="nd">add</span><span class="o">);</span>
</pre></div>

<p>Examples on the net did not answer my question because they stop without
generating a new result list. There must be a more concise way. I would have
expected, that the <code>Stream</code> class has methods as <code>toList()</code>, <code>toSet()</code>, …</p>
<p>Is there a way that the variables <code>targetLongList</code> can be directly be assigned
by the third line?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>What you are doing may be the simplest way, provided your stream stays
sequential—otherwise you will have to put a call to sequential() before
<code>forEach</code>.</p>
<p>[later edit: the reason the call to sequential() is necessary is that the code
as it stands (<code>forEach(targetLongList::add)</code>) would be racy if the stream was
parallel. Even then, it will not achieve the effect intended, as <code>forEach</code> is
explicitly nondeterministic—even in a sequential stream the order of element
processing is not guaranteed. You would have to use <code>forEachOrdered</code> to ensure
correct ordering. The intention of the Stream API designers is that you will
use collector in this situation, as below.]</p>
<p>An alternative is</p>
<div class="code"><pre class="code literal-block"><span class="n">targetLongList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sourceLongList</span><span class="p">.</span><span class="n">stream</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Updated:</p>
<p>Another approach is to use <code>Collectors.toList</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">targetLongList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="n">sourceLongList</span><span class="p">.</span><span class="n">stream</span><span class="p">().</span>
<span class="w">    </span><span class="n">filter</span><span class="p">(</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="p">).</span>
<span class="w">    </span><span class="n">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>
</pre></div>

<p>Previous Solution:</p>
<p>Another approach is to use <code>Collectors.toCollection</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nt">targetLongList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="nt">sourceLongList</span><span class="p">.</span><span class="nc">stream</span><span class="o">().</span>
<span class="w">    </span><span class="nt">filter</span><span class="o">(</span><span class="nt">l</span><span class="w"> </span><span class="nt">-</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">l</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">100</span><span class="o">).</span>
<span class="w">    </span><span class="nt">collect</span><span class="o">(</span><span class="nt">Collectors</span><span class="p">.</span><span class="nc">toCollection</span><span class="o">(</span><span class="nt">ArrayList</span><span class="p">::</span><span class="nd">new</span><span class="o">));</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/regular-expression-search-replace-in-sublime-text-2/" class="u-url">Regular expression search replace in Sublime Text 2</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/regular-expression-search-replace-in-sublime-text-2/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:37:11+08:00" itemprop="datePublished" title="2023-03-03 06:37">2023-03-03 06:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm looking to do search replace with regular expressions in Sublime Text 2.
The documentation on this is rather anemic. Specifically, I want to do a
replace on groups, so something like converting this text:</p>
<p><code>Hello my name is bob</code></p>
<p>And this search term:</p>
<p>Find what: <code>my name is (\w)+</code></p>
<p>Replace with: <code>my name used to be $(1)</code></p>
<p>The search term works just fine but I can't figure out a way to actually do a
replace using the regexp group.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Usually a back-reference is either <code>$1</code> or <code>\1</code> (backslash one) for the first
capture group (the first match of a pattern in parentheses), and indeed
Sublime supports both syntaxes. So try:</p>
<div class="code"><pre class="code literal-block">my name used to be \1
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">my name used to be $1
</pre></div>

<p>Also note that your original capture pattern:</p>
<div class="code"><pre class="code literal-block">my name is (\w)+
</pre></div>

<p>is incorrect and will only capture the final letter of the name rather than
the whole name. You should use the following pattern to capture all of the
letters of the name:</p>
<div class="code"><pre class="code literal-block">my name is (\w+)
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>By the way, in the question above:</p>
<p>For:</p>
<div class="code"><pre class="code literal-block">Hello, my name is bob
</pre></div>

<p>Find part:</p>
<div class="code"><pre class="code literal-block">my name is (\w)+
</pre></div>

<p>With replace part:</p>
<div class="code"><pre class="code literal-block">my name used to be \1
</pre></div>

<p>Would return:</p>
<div class="code"><pre class="code literal-block">Hello, my name used to be b
</pre></div>

<p>Change find part to:</p>
<div class="code"><pre class="code literal-block">my name is (\w+)
</pre></div>

<p>And replace will be what you expect:</p>
<div class="code"><pre class="code literal-block">Hello, my name used to be bob
</pre></div>

<p>While (\w)+ will match "bob", it is not the grouping you want for replacement.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-not-true-in-false-true-return-false/" class="u-url">Why does "not(True) in [False, True]" return False?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-not-true-in-false-true-return-false/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T06:34:52+08:00" itemprop="datePublished" title="2023-03-03 06:34">2023-03-03 06:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I do this:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; False in [False, True]
True
</pre></div>

<p>That returns <code>True</code>. Simply because <code>False</code> is in the list.</p>
<p>But if I do:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; not(True) in [False, True]
False
</pre></div>

<p>That returns <code>False</code>. Whereas <code>not(True)</code> is equal to <code>False</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; not(True)
False
</pre></div>

<p>Why?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Operator precedence</strong> 2.x, 3.x. The precedence of <code>not</code> is lower than that
of <code>in</code>. So it is equivalent to:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; not ((True) in [False, True])
False
</pre></div>

<p>This is what you want:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; (not True) in [False, True]
True
</pre></div>

<hr>
<p>As @Ben points out: It's recommended to never write <code>not(True)</code>, prefer <code>not
True</code>. The former makes it look like a function call, while <code>not</code> is an
operator, not a function.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong><code>not x in y</code></strong> is evaluated as <strong><code>x not in y</code></strong></p>
<p>You can see exactly what's happening by disassembling the code. The first case
works as you expect:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; x = lambda: False in [False, True]
&gt;&gt;&gt; dis.dis(x)
  1           0 LOAD_GLOBAL              0 (False)
              3 LOAD_GLOBAL              0 (False)
              6 LOAD_GLOBAL              1 (True)
              9 BUILD_LIST               2
             12 COMPARE_OP               6 (in)
             15 RETURN_VALUE
</pre></div>

<p>The second case, evaluates to <code>True not in [False, True]</code>, which is <code>False</code>
clearly:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; x = lambda: not(True) in [False, True]
&gt;&gt;&gt; dis.dis(x)
  1           0 LOAD_GLOBAL              0 (True)
              3 LOAD_GLOBAL              1 (False)
              6 LOAD_GLOBAL              0 (True)
              9 BUILD_LIST               2
             12 COMPARE_OP               7 (not in)
             15 RETURN_VALUE        
&gt;&gt;&gt;
</pre></div>

<p>What you wanted to express instead was <code>(not(True)) in [False, True]</code>, which
as expected is <code>True</code>, and you can see why:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; x = lambda: (not(True)) in [False, True]
&gt;&gt;&gt; dis.dis(x)
  1           0 LOAD_GLOBAL              0 (True)
              3 UNARY_NOT           
              4 LOAD_GLOBAL              1 (False)
              7 LOAD_GLOBAL              0 (True)
             10 BUILD_LIST               2
             13 COMPARE_OP               6 (in)
             16 RETURN_VALUE
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1673.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1671.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
