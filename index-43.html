<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 43) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-43.html">
<link rel="prev" href="index-44.html" type="text/html">
<link rel="next" href="index-42.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-stash-only-one-file-out-of-multiple-files-that-have-changed/" class="u-url">How do I stash only one file out of multiple files that have changed?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-stash-only-one-file-out-of-multiple-files-that-have-changed/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:27:17+08:00" itemprop="datePublished" title="2023-02-16 19:27">2023-02-16 19:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I stash only one of the multiple changed files on my branch?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">git stash push -p -m "my commit message"
</pre></div>

<p><code>-p</code> let's you select the hunks that should be stashed; whole files can be
selected as well.</p>
<p>You'll be prompted with a few actions for each hunk:</p>
<div class="code"><pre class="code literal-block"><span class="w">   </span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">stash</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span>
<span class="w">   </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">stash</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span>
<span class="w">   </span><span class="n">q</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">quit</span><span class="p">;</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">stash</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="n">ones</span>
<span class="w">   </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">stash</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">hunks</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">file</span>
<span class="w">   </span><span class="n">d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">stash</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">later</span><span class="w"> </span><span class="n">hunks</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">file</span>
<span class="w">   </span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">go</span><span class="w"> </span><span class="k">to</span>
<span class="w">   </span><span class="o">/</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">given</span><span class="w"> </span><span class="n">regex</span>
<span class="w">   </span><span class="n">j</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="n">undecided</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="n">undecided</span><span class="w"> </span><span class="n">hunk</span>
<span class="w">   </span><span class="n">J</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="n">undecided</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="n">hunk</span>
<span class="w">   </span><span class="n">k</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="n">undecided</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">undecided</span><span class="w"> </span><span class="n">hunk</span>
<span class="w">   </span><span class="n">K</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="n">undecided</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">hunk</span>
<span class="w">   </span><span class="n">s</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">split</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">hunk</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">smaller</span><span class="w"> </span><span class="n">hunks</span>
<span class="w">   </span><span class="n">e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">manually</span><span class="w"> </span><span class="n">edit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">hunk</span>
<span class="w">   </span><span class="vm">?</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">print</span><span class="w"> </span><span class="n">help</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>Disclaimer</strong> : the following answer is for git before git 2.13. For git 2.13
and over, check out another answer further down.</p>
<hr>
<p><strong>Warning</strong></p>
<p>As noted in the comments, this puts everything into the stash, both staged and
unstaged. The --keep-index just leaves the index alone after the stash is
done. This can cause merge conflicts when you later pop the stash.</p>
<hr>
<p>This will stash everything that you haven't previously added. Just <code>git add</code>
the things you want to keep, then run it.</p>
<div class="code"><pre class="code literal-block">git stash --keep-index
</pre></div>

<p>For example, if you want to split an old commit into more than one changeset,
you can use this procedure:</p>
<ol>
<li><code>git rebase -i &lt;last good commit&gt;</code></li>
<li>Mark some changes as <code>edit</code>.</li>
<li><code>git reset HEAD^</code></li>
<li><code>git add &lt;files you want to keep in this change&gt;</code></li>
<li><code>git stash --keep-index</code></li>
<li>Fix things up as necessary. Don't forget to <code>git add</code> any changes.</li>
<li><code>git commit</code></li>
<li><code>git stash pop</code></li>
<li>Repeat, from #5, as necessary.</li>
<li><code>git rebase --continue</code></li>
</ol>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/set-cellpadding-and-cellspacing-in-css/" class="u-url">Set cellpadding and cellspacing in CSS?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/set-cellpadding-and-cellspacing-in-css/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:26:50+08:00" itemprop="datePublished" title="2023-02-16 19:26">2023-02-16 19:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In an HTML table, the <code>cellpadding</code> and <code>cellspacing</code> can be set like this:</p>
<div class="code"><pre class="code literal-block">&lt;table cellspacing="1" cellpadding="1"&gt;
</pre></div>

<p>How can the same be accomplished using CSS?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Basics</strong></p>
<p>For controlling "cellpadding" in CSS, you can simply use <code>padding</code> on table
cells. E.g. for 10px of "cellpadding":</p>
<div class="code"><pre class="code literal-block"><span class="nt">td</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>For "cellspacing", you can apply the <code>border-spacing</code> CSS property to your
table. E.g. for 10px of "cellspacing":</p>
<div class="code"><pre class="code literal-block"><span class="nt">table</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="k">border-spacing</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">border-collapse</span><span class="p">:</span><span class="w"> </span><span class="kc">separate</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>This property will even allow separate horizontal and vertical spacing,
something you couldn't do with old-school "cellspacing".</p>
<p><strong>Issues in IE ≤ 7</strong></p>
<p>This will work in almost all popular browsers except for Internet Explorer up
through Internet Explorer 7, where you're almost out of luck. I say "almost"
because these browsers still support the <code>border-collapse</code> property, which
merges the borders of adjoining table cells. If you're trying to eliminate
cellspacing (that is, <code>cellspacing="0"</code>) then <code>border-collapse:collapse</code>
should have the same effect: no space between table cells. This support is
buggy, though, as it does not override an existing <code>cellspacing</code> HTML
attribute on the table element.</p>
<p>In short: for non-Internet Explorer 5-7 browsers, <code>border-spacing</code> handles
you. For Internet Explorer, if your situation is just right (you want 0
cellspacing and your table doesn't have it defined already), you can use
<code>border-collapse:collapse</code>.</p>
<div class="code"><pre class="code literal-block"><span class="nt">table</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="k">border-spacing</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">border-collapse</span><span class="p">:</span><span class="w"> </span><span class="kc">collapse</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Note: For a great overview of CSS properties that one can apply to tables and
for which browsers, see this fantastic Quirksmode page.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>Default</h3>
<p>The default behavior of the browser is equivalent to:</p>
<div class="code"><pre class="code literal-block"><span class="nt">table</span><span class="w"> </span><span class="p">{</span><span class="k">border-collapse</span><span class="p">:</span><span class="w"> </span><span class="kc">collapse</span><span class="p">;}</span>
<span class="nt">td</span><span class="w">    </span><span class="p">{</span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">px</span><span class="p">;}</span>
</pre></div>

<p><img alt="Enter image description here" src="images/cukle.png"></p>
<h3>Cellpadding</h3>
<p>Sets the amount of space between the contents of the cell and the cell wall</p>
<div class="code"><pre class="code literal-block"><span class="nt">table</span><span class="w"> </span><span class="p">{</span><span class="k">border-collapse</span><span class="p">:</span><span class="w"> </span><span class="kc">collapse</span><span class="p">;}</span>
<span class="nt">td</span><span class="w">    </span><span class="p">{</span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="p">;}</span>
</pre></div>

<p><img alt="Enter image description here" src="images/c0ght.png"></p>
<h3>Cellspacing</h3>
<p>Controls the space between table cells</p>
<div class="code"><pre class="code literal-block"><span class="nt">table</span><span class="w"> </span><span class="p">{</span><span class="k">border-spacing</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;}</span>
<span class="nt">td</span><span class="w">    </span><span class="p">{</span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">px</span><span class="p">;}</span>
</pre></div>

<p><img alt="Enter image description here" src="images/WNuBP.png"></p>
<h3>Both</h3>
<div class="code"><pre class="code literal-block"><span class="nt">table</span><span class="w"> </span><span class="p">{</span><span class="k">border-spacing</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;}</span>
<span class="nt">td</span><span class="w">    </span><span class="p">{</span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="p">;}</span>
</pre></div>

<p><img alt="Enter image description here" src="images/eyZQl.png"></p>
<h3>Both (special)</h3>
<div class="code"><pre class="code literal-block"><span class="nt">table</span><span class="w"> </span><span class="p">{</span><span class="k">border-spacing</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;}</span>
<span class="nt">td</span><span class="w">    </span><span class="p">{</span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="p">;}</span>
</pre></div>

<p><img alt="Enter image description here" src="images/gbJ3T.png"></p>
<blockquote>
<p><strong>Note:</strong> If there is <code>border-spacing</code> set, it indicates <code>border-collapse</code>
property of the table is <code>separate</code>.</p>
</blockquote>
<p>Try it yourself!</p>
<p>Here you can find the old HTML way of achieving this.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-correctly-clone-a-javascript-object/" class="u-url">How do I correctly clone a JavaScript object?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-correctly-clone-a-javascript-object/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:26:21+08:00" itemprop="datePublished" title="2023-02-16 19:26">2023-02-16 19:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an object <code>x</code>. I'd like to copy it as object <code>y</code>, such that changes to
<code>y</code> do not modify <code>x</code>. I realized that copying objects derived from built-in
JavaScript objects will result in extra, unwanted properties. This isn't a
problem, since I'm copying one of my own literal-constructed objects.</p>
<p>How do I correctly clone a JavaScript object?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>2022 update</h4>
<p>There's a new JS standard called structured cloning. It works in many browsers
(see Can I Use).</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">structuredClone</span><span class="p">(</span><span class="n">object</span><span class="p">);</span>
</pre></div>

<h3>Old answer</h3>
<p>To do this for any object in JavaScript will not be simple or straightforward.
You will run into the problem of erroneously picking up attributes from the
object's prototype that should be left in the prototype and not copied to the
new instance. If, for instance, you are adding a <code>clone</code> method to
<code>Object.prototype</code>, as some answers depict, you will need to explicitly skip
that attribute. But what if there are other additional methods added to
<code>Object.prototype</code>, or other intermediate prototypes, that you don't know
about? In that case, you will copy attributes you shouldn't, so you need to
detect unforeseen, non-local attributes with the <code>hasOwnProperty</code> method.</p>
<p>In addition to non-enumerable attributes, you'll encounter a tougher problem
when you try to copy objects that have hidden properties. For example,
<code>prototype</code> is a hidden property of a function. Also, an object's prototype is
referenced with the attribute <code>__proto__</code>, which is also hidden, and will not
be copied by a for/in loop iterating over the source object's attributes. I
think <code>__proto__</code> might be specific to Firefox's JavaScript interpreter and it
may be something different in other browsers, but you get the picture. Not
everything is enumerable. You can copy a hidden attribute if you know its
name, but I don't know of any way to discover it automatically.</p>
<p>Yet another snag in the quest for an elegant solution is the problem of
setting up the prototype inheritance correctly. If your source object's
prototype is <code>Object</code>, then simply creating a new general object with <code>{}</code>
will work, but if the source's prototype is some descendant of <code>Object</code>, then
you are going to be missing the additional members from that prototype which
you skipped using the <code>hasOwnProperty</code> filter, or which were in the prototype,
but weren't enumerable in the first place. One solution might be to call the
source object's <code>constructor</code> property to get the initial copy object and then
copy over the attributes, but then you still will not get non-enumerable
attributes. For example, a <code>Date</code> object stores its data as a hidden member:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">clone</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">"object"</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">typeof</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="p">.</span><span class="k">constructor</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">attr</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span><span class="w"> </span><span class="n">copy</span><span class="o">[</span><span class="n">attr</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">attr</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">copy</span><span class="p">;</span>
<span class="err">}</span>

<span class="nf">var</span><span class="w"> </span><span class="n">d1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nc">Date</span><span class="p">();</span>

<span class="cm">/* Executes function after 5 seconds. */</span>
<span class="n">setTimeout</span><span class="p">(</span><span class="k">function</span><span class="p">()</span><span class="err">{</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">d2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clone</span><span class="p">(</span><span class="n">d1</span><span class="p">);</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="ss">"d1 = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">d1</span><span class="p">.</span><span class="n">toString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">"\nd2 = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">d2</span><span class="p">.</span><span class="n">toString</span><span class="p">());</span>
<span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="mi">5000</span><span class="p">);</span>
</pre></div>

<p>The date string for <code>d1</code> will be 5 seconds behind that of <code>d2</code>. A way to make
one <code>Date</code> the same as another is by calling the <code>setTime</code> method, but that is
specific to the <code>Date</code> class. I don't think there is a bullet-proof general
solution to this problem, though I would be happy to be wrong!</p>
<p>When I had to implement general deep copying I ended up compromising by
assuming that I would only need to copy a plain <code>Object</code>, <code>Array</code>, <code>Date</code>,
<code>String</code>, <code>Number</code>, or <code>Boolean</code>. The last 3 types are immutable, so I could
perform a shallow copy and not worry about it changing. I further assumed that
any elements contained in <code>Object</code> or <code>Array</code> would also be one of the 6
simple types in that list. This can be accomplished with code like the
following:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">clone</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">copy</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">types</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">undefined</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">null</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">"object"</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">typeof</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="nc">Date</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="nc">Date</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">copy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nc">Date</span><span class="p">();</span>
<span class="w">        </span><span class="n">copy</span><span class="p">.</span><span class="n">setTime</span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">getTime</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">copy</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="k">Array</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="k">Array</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">copy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nf">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">len</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">copy</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clone</span><span class="p">(</span><span class="n">obj</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">copy</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="k">Object</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="k">Object</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">copy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">attr</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span><span class="w"> </span><span class="n">copy</span><span class="o">[</span><span class="n">attr</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clone</span><span class="p">(</span><span class="n">obj</span><span class="o">[</span><span class="n">attr</span><span class="o">]</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">copy</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="ss">"Unable to copy obj! Its type isn't supported."</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<p>The above function will work adequately for the 6 simple types I mentioned, as
long as the data in the objects and arrays form a tree structure. That is,
there isn't more than one reference to the same data in the object. For
example:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">cloneable</span><span class="p">:</span>
<span class="k">var</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"left"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"left"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"data"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="mi">8</span>
<span class="p">};</span>

<span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">kind</span><span class="o">-</span><span class="n">of</span><span class="w"> </span><span class="n">work</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">copies</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="n">inner</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">references</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">copy</span>
<span class="k">var</span><span class="w"> </span><span class="n">directedAcylicGraph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"left"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"left"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="s2">"data"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="mi">8</span>
<span class="p">};</span>
<span class="n">directedAcyclicGraph</span><span class="p">[</span><span class="s2">"right"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">directedAcyclicGraph</span><span class="p">[</span><span class="s2">"left"</span><span class="p">];</span>

<span class="o">//</span><span class="w"> </span><span class="n">Cloning</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">stack</span><span class="w"> </span><span class="n">overflow</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">infinite</span><span class="w"> </span><span class="n">recursion</span><span class="p">:</span>
<span class="k">var</span><span class="w"> </span><span class="n">cyclicGraph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"left"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"left"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="s2">"data"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="mi">8</span>
<span class="p">};</span>
<span class="n">cyclicGraph</span><span class="p">[</span><span class="s2">"right"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cyclicGraph</span><span class="p">;</span>
</pre></div>

<p>It will not be able to handle any JavaScript object, but it may be sufficient
for many purposes as long as you don't assume that it will just work for
anything you throw at it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you do not use <code>Date</code>s, functions, undefined, regExp or Infinity within
your object, a very simple one liner is <code>JSON.parse(JSON.stringify(object))</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">string</span><span class="p">:</span><span class="w"> </span><span class="s1">'string'</span><span class="p">,</span>
<span class="w">  </span><span class="n">number</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">  </span><span class="nb nb-Type">bool</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">  </span><span class="n">nul</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">  </span><span class="n">date</span><span class="p">:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(),</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">stringified</span>
<span class="w">  </span><span class="n">undef</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="p">,</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">lost</span>
<span class="w">  </span><span class="n">inf</span><span class="p">:</span><span class="w"> </span><span class="n">Infinity</span><span class="p">,</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">forced</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s1">'null'</span>
<span class="p">}</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">date</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">object</span>
<span class="k">const</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">a</span><span class="p">));</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">clone</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">clone</span><span class="o">.</span><span class="n">date</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="o">.</span><span class="n">toISOString</span><span class="p">()</span>
</pre></div>

<p>This works for all kind of objects containing objects, arrays, strings,
booleans and numbers.</p>
<p>See also this article about the structured clone algorithm of browsers which
is used when posting messages to and from a worker. It also contains a
function for deep cloning.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-44.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-42.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
