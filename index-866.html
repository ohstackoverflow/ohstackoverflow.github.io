<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 866) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-866.html">
<link rel="prev" href="index-867.html" type="text/html">
<link rel="next" href="index-865.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/the-shortest-possible-output-from-git-log-containing-author-and-date/" class="u-url">The shortest possible output from git log containing author and date</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/the-shortest-possible-output-from-git-log-containing-author-and-date/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:06:03+08:00" itemprop="datePublished" title="2023-02-17 18:06">2023-02-17 18:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I show a git log output with (at least) this information:</p>
<div class="code"><pre class="code literal-block">* author
* commit date
* change
</pre></div>

<p>I want it compressed to one line per log entry. What's the shortest possible
format for that?</p>
<p>(tried <code>--format=oneline</code> but that does not show the date)</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">git log --pretty=format:"%h%x09%an%x09%ad%x09%s"
</pre></div>

<p>does the job. This outputs:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nv">fbc3503</span><span class="w"> </span><span class="nv">mads</span><span class="w">    </span><span class="nv">Thu</span><span class="w"> </span><span class="nv">Dec</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">07</span>:<span class="mi">43</span>:<span class="mi">27</span><span class="w"> </span><span class="mi">2008</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span><span class="w">   </span><span class="k">show</span><span class="w"> </span><span class="nv">mobile</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">phone</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">null</span>...<span class="w">   </span>
<span class="w">  </span><span class="nv">ec36490</span><span class="w"> </span><span class="nv">jesper</span><span class="w">  </span><span class="nv">Wed</span><span class="w"> </span><span class="nv">Nov</span><span class="w"> </span><span class="mi">26</span><span class="w"> </span><span class="mi">05</span>:<span class="mi">41</span>:<span class="mi">37</span><span class="w"> </span><span class="mi">2008</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span><span class="w">  </span><span class="nv">Cleanup</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span>[<span class="mi">942</span>]:<span class="w"> </span><span class="nv">Using</span><span class="w"> </span><span class="nv">timezon</span>
<span class="w">  </span><span class="nv">ae62afd</span><span class="w"> </span><span class="nv">tobias</span><span class="w">  </span><span class="nv">Tue</span><span class="w"> </span><span class="nv">Nov</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class="mi">21</span>:<span class="mi">42</span>:<span class="mi">55</span><span class="w"> </span><span class="mi">2008</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span><span class="w">  </span><span class="nv">Fixed</span><span class="w"> </span><span class="sc">#67</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">adding</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">zone</span><span class="w"> </span><span class="nv">supp</span>
<span class="w">  </span><span class="mi">164</span><span class="nv">be7e</span><span class="w"> </span><span class="nv">mads</span><span class="w">    </span><span class="nv">Tue</span><span class="w"> </span><span class="nv">Nov</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class="mi">19</span>:<span class="mi">56</span>:<span class="mi">43</span><span class="w"> </span><span class="mi">2008</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span><span class="w">  </span><span class="nv">fixed</span><span class="w"> </span><span class="nv">tests</span>,<span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="err">'unending appoi</span>
<span class="err">  93f1526 jesper  Tue Nov 25 09:45:56 2008 +0000  adding time.ZONE.now as time zone </span>
<span class="err">  2f0f8c1 tobias  Tue Nov 25 03:07:02 2008 +0000  Timezone configured in environment</span>
<span class="err">  a33c1dc jesper  Tue Nov 25 01:26:18 2008 +0000  updated to most recent will_pagina</span>
</pre></div>

<p>Inspired by stackoverflow question: "git log output like svn ls -v", I found
out that I could add the exact params I needed.</p>
<p>To shorten the date (not showing the time) use <code>--date=short</code></p>
<p>In case you were curious what the different options were:<br><code>%h</code> = abbreviated commit hash<br><code>%x09</code> = tab (character for code 9)<br><code>%an</code> = author name<br><code>%ad</code> = author date (format respects --date= option)<br><code>%s</code> = subject<br>
From kernel.org/pub/software/scm/git/docs/git-log.html (PRETTY FORMATS
section) by comment of Vivek.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I use these two .gitconfig settings:</p>
<div class="code"><pre class="code literal-block"><span class="k">[log]</span>
<span class="w">  </span><span class="na">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">relative</span>
<span class="k">[format]</span>
<span class="w">  </span><span class="na">pretty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">format:%h %Cblue%ad%Creset %ae %Cgreen%s%Creset</span>
</pre></div>

<p>%ad is the author date, which can be overidden by <code>--date</code> or the option
specified in the [log] stanza in .gitconfig. I like the relative date because
it gives an immediate feeling of when stuff was comitted. Output looks like
this:</p>
<div class="code"><pre class="code literal-block"><span class="mf">6</span><span class="n">c3e1a2</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="n">ago</span><span class="w"> </span><span class="n">you</span><span class="err">@</span><span class="n">me</span><span class="mf">.</span><span class="n">com</span><span class="w"> </span><span class="n">lsof</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">now</span><span class="mf">.</span>
<span class="mf">0754</span><span class="n">f18</span><span class="w"> </span><span class="mf">11</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="n">ago</span><span class="w"> </span><span class="n">you</span><span class="err">@</span><span class="n">me</span><span class="mf">.</span><span class="n">com</span><span class="w"> </span><span class="n">Properly</span><span class="w"> </span><span class="n">unmount</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">detaching</span><span class="w"> </span><span class="n">works</span><span class="mf">.</span>
<span class="mf">336</span><span class="n">a3ac</span><span class="w"> </span><span class="mf">13</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="n">ago</span><span class="w"> </span><span class="n">you</span><span class="err">@</span><span class="n">me</span><span class="mf">.</span><span class="n">com</span><span class="w"> </span><span class="n">Show</span><span class="w"> </span><span class="n">ami</span><span class="w"> </span><span class="n">registration</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="n">auto</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="n">fails</span>
<span class="n">be2ad45</span><span class="w"> </span><span class="mf">17</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="n">ago</span><span class="w"> </span><span class="n">you</span><span class="err">@</span><span class="n">me</span><span class="mf">.</span><span class="n">com</span><span class="w"> </span><span class="n">Fixes</span><span class="w"> </span><span class="err">#</span><span class="mf">6.</span><span class="w"> </span><span class="n">Sao</span><span class="w"> </span><span class="n">Paolo</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">well</span><span class="mf">.</span>
<span class="mf">5</span><span class="n">aed68e</span><span class="w"> </span><span class="mf">17</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="n">ago</span><span class="w"> </span><span class="n">you</span><span class="err">@</span><span class="n">me</span><span class="mf">.</span><span class="n">com</span><span class="w"> </span><span class="n">Shorten</span><span class="w"> </span><span class="n">while</span><span class="w"> </span><span class="n">loops</span>
</pre></div>

<p>This is all of course in color, so it is easy to distinguish the various parts
of a log line. Also it is the default when typing <code>git log</code> because of the
[format] section.</p>
<p>2014 UPDATE: Since git now supports padding I have a nice amendment to the
version above:</p>
<div class="code"><pre class="code literal-block">pretty = format:%C(yellow)%h %Cblue%&gt;(12)%ad %Cgreen%&lt;(7)%aN%Cred%d %Creset%s
</pre></div>

<p>This right aligns the relative dates and left aligns committer names, meaning
you get a column-like look that is easy on the eyes.</p>
<p><strong>Screenshot</strong></p>
<p><img alt="ss#1" src="https://i.imgur.com/eRYXa0F.png"></p>
<p>2016 UPDATE: Since GPG commit signing is becoming a thing, I thought I'd
update this post with a version that includes signature verification (in the
screenshot it's the magenta letter right after the commit). A short
explanation of the flag:</p>
<blockquote>
<p>%G?: show "G" for a good (valid) signature, "B" for a bad signature, "U" for
a good signature with unknown validity and "N" for no signature</p>
</blockquote>
<p>Other changes include:</p>
<ul>
<li>colors are now removed if the output is to something other than the tty (which is useful for grepping etc.)</li>
<li>
<code>git log -g</code> now contains the reflog selector.</li>
<li>Save 2 parens on refnames and put them at the end (to preserve column alignment)</li>
<li>Truncate relative dates if they are too long (e.g. <code>3 years, 4..</code>)</li>
<li>Truncate commiter names (might be a little short for some ppl, just change the <code>%&lt;(7,trunc)</code> or check out the git .mailmap feature to shorten commiter names)</li>
</ul>
<p>Here's the config:</p>
<div class="code"><pre class="code literal-block">pretty = format:%C(auto,yellow)%h%C(auto,magenta)% G? %C(auto,blue)%&gt;(12,trunc)%ad %C(auto,green)%&lt;(7,trunc)%aN%C(auto,reset)%s%C(auto,red)% gD% D
</pre></div>

<p>All in all column alignment is now preserved a lot better at the expense of
some (hopefully) useless characters. Feel free to edit if you have any
improvements, I'd love to make the message color depend on whether a commit is
signed, but it doesn't seem like that is possible atm.</p>
<p><strong>Screenshot</strong></p>
<p><img alt="Screenshot of git log" src="https://i.imgur.com/fRyUrXV.png"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-catch-and-rethrow-an-exception-in-c/" class="u-url">Why catch and rethrow an exception in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-catch-and-rethrow-an-exception-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:05:33+08:00" itemprop="datePublished" title="2023-02-17 18:05">2023-02-17 18:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm looking at the article <em>C# - Data Transfer Object</em> on serializable DTOs.</p>
<p>The article includes this piece of code:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">SerializeDTO</span><span class="ss">(</span><span class="nv">DTO</span><span class="w"> </span><span class="nv">dto</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">try</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">XmlSerializer</span><span class="w"> </span><span class="nv">xmlSer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">XmlSerializer</span><span class="ss">(</span><span class="nv">dto</span>.<span class="nv">GetType</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">StringWriter</span><span class="w"> </span><span class="nv">sWriter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">StringWriter</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">xmlSer</span>.<span class="nv">Serialize</span><span class="ss">(</span><span class="nv">sWriter</span>,<span class="w"> </span><span class="nv">dto</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">sWriter</span>.<span class="nv">ToString</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span>}
<span class="w">    </span><span class="nv">catch</span><span class="ss">(</span><span class="nv">Exception</span><span class="w"> </span><span class="nv">ex</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">throw</span><span class="w"> </span><span class="nv">ex</span><span class="c1">;</span>
<span class="w">    </span>}
}
</pre></div>

<p>The rest of the article looks sane and reasonable (to a noob), but that try-
catch-throw throws a WtfException... <strong>Isn't this exactly equivalent to not
handling exceptions at all?</strong></p>
<p>Ergo:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">SerializeDTO</span><span class="ss">(</span><span class="nv">DTO</span><span class="w"> </span><span class="nv">dto</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">XmlSerializer</span><span class="w"> </span><span class="nv">xmlSer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">XmlSerializer</span><span class="ss">(</span><span class="nv">dto</span>.<span class="nv">GetType</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">StringWriter</span><span class="w"> </span><span class="nv">sWriter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">StringWriter</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">xmlSer</span>.<span class="nv">Serialize</span><span class="ss">(</span><span class="nv">sWriter</span>,<span class="w"> </span><span class="nv">dto</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">sWriter</span>.<span class="nv">ToString</span><span class="ss">()</span><span class="c1">;</span>
}
</pre></div>

<p>Or am I missing something fundamental about error handling in C#? It's pretty
much the same as Java (minus checked exceptions), isn't it? ... That is, they
both refined C++.</p>
<p>The Stack Overflow question <em>The difference between re-throwing parameter-less
catch and not doing anything?</em> seems to support my contention that try-catch-
throw is-a no-op.</p>
<hr>
<p><strong>EDIT:</strong></p>
<p>Just to summarise for anyone who finds this thread in future...</p>
<p><strong>DO NOT</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">try</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">stuff</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">might</span><span class="w"> </span><span class="nv">throw</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">exception</span>
}
<span class="nv">catch</span><span class="w"> </span><span class="ss">(</span><span class="nv">Exception</span><span class="w"> </span><span class="nv">e</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">throw</span><span class="w"> </span><span class="nv">e</span><span class="c1">; // This destroys the strack trace information!</span>
}
</pre></div>

<p>The stack trace information can be crucial to identifying the root cause of
the problem!</p>
<p><strong>DO</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">try</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">stuff</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">might</span><span class="w"> </span><span class="nv">throw</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">exception</span>
}
<span class="nv">catch</span><span class="w"> </span><span class="ss">(</span><span class="nv">SqlException</span><span class="w"> </span><span class="nv">e</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Log</span><span class="w"> </span><span class="nv">it</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">e</span>.<span class="nv">ErrorCode</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">NO_ROW_ERROR</span><span class="ss">)</span><span class="w"> </span>{<span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">filter</span><span class="w"> </span><span class="nv">out</span><span class="w"> </span><span class="nv">NoDataFound</span>.
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">cleanup</span>,<span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">maybe</span><span class="w"> </span><span class="nv">closing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"dirty"</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="nv">connection</span>.
<span class="w">        </span><span class="nv">throw</span><span class="c1">; // This preserves the stack trace</span>
<span class="w">    </span>}
}
<span class="nv">catch</span><span class="w"> </span><span class="ss">(</span><span class="nv">IOException</span><span class="w"> </span><span class="nv">e</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Log</span><span class="w"> </span><span class="nv">it</span>
<span class="w">    </span><span class="nv">throw</span><span class="c1">;</span>
}
<span class="nv">catch</span><span class="w"> </span><span class="ss">(</span><span class="nv">Exception</span><span class="w"> </span><span class="nv">e</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Log</span><span class="w"> </span><span class="nv">it</span>
<span class="w">    </span><span class="nv">throw</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">DAOException</span><span class="ss">(</span><span class="s2">"Excrement occurred"</span>,<span class="w"> </span><span class="nv">e</span><span class="ss">)</span><span class="c1">; // wrapped &amp; chained exceptions (just like java).</span>
}
<span class="nv">finally</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Normal</span><span class="w"> </span><span class="nv">clean</span><span class="w"> </span><span class="nv">goes</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="ss">(</span><span class="nv">like</span><span class="w"> </span><span class="nv">closing</span><span class="w"> </span><span class="nv">open</span><span class="w"> </span><span class="nv">files</span><span class="ss">)</span>.
}
</pre></div>

<p>Catch the more specific exceptions before the less specific ones (just like
Java).</p>
<hr>
<p><strong>References:</strong></p>
<ul>
<li>MSDN - Exception Handling</li>
<li>MSDN - try-catch (C# Reference)</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>First, the way that the code in the article does it is evil. <code>throw ex</code> will
reset the call stack in the exception to the point where this throw statement
is losing the information about where the exception actually was created.</p>
<p>Second, if you just catch and re-throw like that, I see no added value. The
code example above would be just as good (or, given the <code>throw ex</code> bit, even
better) without the try-catch.</p>
<p>However, there are cases where you might want to catch and rethrow an
exception. Logging could be one of them:</p>
<div class="code"><pre class="code literal-block">    try 
    {
        // code that may throw exceptions    
    }
    catch(Exception ex) 
    {
        // add error logging here
        throw;
    }
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Don't do this,</p>
<div class="code"><pre class="code literal-block">try 
{
...
}
catch(Exception ex)
{
   throw ex;
}
</pre></div>

<p>You'll lose the stack trace information...</p>
<p>Either do,</p>
<div class="code"><pre class="code literal-block">try { ... }
catch { throw; }
</pre></div>

<p>OR</p>
<div class="code"><pre class="code literal-block">try { ... }
catch (Exception ex)
{
    throw new Exception("My Custom Error Message", ex);
}
</pre></div>

<p>One of the reason you might want to rethrow is if you're handling different
exceptions, for e.g.</p>
<div class="code"><pre class="code literal-block"><span class="nv">try</span>
{
<span class="w">   </span>...
}
<span class="nv">catch</span><span class="ss">(</span><span class="nv">SQLException</span><span class="w"> </span><span class="nv">sex</span><span class="ss">)</span>
{
<span class="w">   </span><span class="o">//</span><span class="k">Do</span><span class="w"> </span><span class="nv">Custom</span><span class="w"> </span><span class="nv">Logging</span><span class="w"> </span>
<span class="w">   </span><span class="o">//</span><span class="nv">Don</span><span class="err">'t throw exception - swallow it here</span>
<span class="err">}</span>
<span class="err">catch(OtherException oex)</span>
<span class="err">{</span>
<span class="err">   //Do something else</span>
<span class="err">   throw new WrappedException("Other Exception occured");</span>
<span class="err">}</span>
<span class="err">catch</span>
<span class="err">{</span>
<span class="err">   System.Diagnostics.Debug.WriteLine("Eeep! an error, not to worry, will be handled higher up the call stack");</span>
<span class="err">   throw; //Chuck everything else back up the stack</span>
<span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/yaml-do-i-need-quotes-for-strings-in-yaml/" class="u-url">YAML: Do I need quotes for strings in YAML?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/yaml-do-i-need-quotes-for-strings-in-yaml/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:05:05+08:00" itemprop="datePublished" title="2023-02-17 18:05">2023-02-17 18:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to write a YAML dictionary for internationalisation of a Rails
project. I am a little confused though, as in some files I see strings in
double-quotes and in some without. A few points to consider:</p>
<ul>
<li>example 1 - all strings use double quotes;</li>
<li>example 2 - no strings (except the last two) use quotes;</li>
<li>the YAML cookbook says: <em>Enclosing strings in double quotes allows you to use escaping to represent ASCII and Unicode characters.</em> Does this mean I need to use double quotes only when I want to escape some characters? If yes - why do they use double quotes everywhere in the first example - only for the sake of unity / stylistic reasons?</li>
<li>the last two lines of example 2 use <code>!</code> - the non-specific tag, while the last two lines of the first example don't - and they both work.</li>
</ul>
<p>My question is: what are the rules for using the different types of quotes in
YAML?</p>
<p>Could it be said that:</p>
<ul>
<li>in general, you don't need quotes;</li>
<li>if you want to escape characters use double quotes;</li>
<li>use <code>!</code> with single quotes, when... ?!?</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>After a brief review of the YAML cookbook cited in the question and some
testing, here's my interpretation:</p>
<ul>
<li>In general, you don't need quotes.</li>
<li>Use quotes to force a string, e.g. if your key or value is <code>10</code> but you want it to return a String and not a Fixnum, write <code>'10'</code> or <code>"10"</code>.</li>
<li>Use quotes if your value includes special characters, (e.g. <code>:</code>, <code>{</code>, <code>}</code>, <code>[</code>, <code>]</code>, <code>,</code>, <code>&amp;</code>, <code>*</code>, <code>#</code>, <code>?</code>, <code>|</code>, <code>-</code>, <code>&lt;</code>, <code>&gt;</code>, <code>=</code>, <code>!</code>, <code>%</code>, <code>@</code>, <code>\</code>).</li>
<li>Single quotes let you put almost any character in your string, and won't try to parse escape codes. <code>'\n'</code> would be returned as the string <code>\n</code>.</li>
<li>Double quotes parse escape codes. <code>"\n"</code> would be returned as a line feed character.</li>
<li>The exclamation mark introduces a method, e.g. <code>!ruby/sym</code> to return a Ruby symbol.</li>
</ul>
<p>Seems to me that the best approach would be to not use quotes unless you have
to, and then to use single quotes unless you specifically want to process
escape codes.</p>
<p><strong>Update</strong></p>
<p>"Yes" and "No" should be enclosed in quotes (single or double) or else they
will be interpreted as TrueClass and FalseClass values:</p>
<div class="code"><pre class="code literal-block"><span class="n">en</span><span class="o">:</span>
<span class="w">  </span><span class="n">yesno</span><span class="o">:</span>
<span class="w">    </span><span class="s1">'yes'</span><span class="o">:</span><span class="w"> </span><span class="s1">'Yes'</span>
<span class="w">    </span><span class="s1">'no'</span><span class="o">:</span><span class="w"> </span><span class="s1">'No'</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>While Mark's answer nicely summarizes when the quotes are <strong>needed</strong> according
to the YAML language rules, I think what many of the developers/administrators
are asking themselves, when working with strings in YAML, is "what <strong>should</strong>
be <strong>my</strong> rule of thumb for handling the strings?"</p>
<p>It may sound subjective, but the number of rules you have to remember, if you
want to use the quotes <strong>only</strong> when they are really <strong>needed as per the
language spec</strong> , is somewhat excessive for such a simple thing as specifying
one of the most common datatypes. Don't get me wrong, you will eventually
remember them when working with YAML regularly, but what if you use it
occasionally, and you didn't develop automatism for writing YAML? Do you
really want to spend time remembering all the rules just to specify the string
correctly?</p>
<p>The whole point of the "rule of thumb" is to save the cognitive resource and
to handle a common task without thinking about it. Our "CPU" time can arguably
be used for something more useful than handling the strings correctly.</p>
<p>From this - pure practical - perspective, I think the best rule of thumb is to
single quote the strings. The rationale behind it:</p>
<ul>
<li>Single quoted strings work for all scenarios, except when you need to use escape sequences.</li>
<li>The only special character you have to handle within a single-quoted string is the single quote itself.</li>
</ul>
<p>These are just 2 rules to remember for some occasional YAML user, minimizing
the cognitive effort.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-867.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-865.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
