<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2766) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2766.html">
<link rel="prev" href="index-2767.html" type="text/html">
<link rel="next" href="index-2765.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/most-efficient-way-to-prepend-a-value-to-an-array/" class="u-url">Most efficient way to prepend a value to an array</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/most-efficient-way-to-prepend-a-value-to-an-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T16:22:50+08:00" itemprop="datePublished" title="2023-03-05 16:22">2023-03-05 16:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Assuming I have an array that has a size of <code>N</code> (where <code>N &gt; 0</code>), is there a
more efficient way of prepending to the array that would not require O(N + 1)
steps?</p>
<p>In code, essentially, what I currently am doing is</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">prependArray</span><span class="p">(</span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="n">oldArray</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="nf">var</span><span class="w"> </span><span class="n">newArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Array</span><span class="p">(</span><span class="k">value</span><span class="p">);</span>

<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">oldArray</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">newArray</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">oldArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<span class="w">  </span><span class="err">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">newArray</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>I'm not sure about more efficient in terms of big-O but certainly using the
<code>unshift</code> method is more concise:</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">];</span>
<span class="n">a</span><span class="o">.</span><span class="n">unshift</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">({</span><span class="n">a</span><span class="p">});</span>
</pre></div>

<p><strong>[Edit]</strong></p>
<p>This jsPerf benchmark shows that <code>unshift</code> is decently faster in at least a
couple of browsers, regardless of possibly different big-O performance <em>if</em>
you are ok with modifying the array in-place. If you really can't mutate the
original array then you would do something like the below snippet, which
doesn't seem to be appreciably faster than your solution:</p>
<div class="code"><pre class="code literal-block">a.slice().unshift(0); // Use "slice" to avoid mutating "a".
</pre></div>

<p><strong>[Edit 2]</strong></p>
<p>For completeness, the following function can be used instead of OP's example
<code>prependArray(...)</code> to take advantage of the Array <code>unshift(...)</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">prepend</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">newArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="n">slice</span><span class="p">();</span>
<span class="w">  </span><span class="n">newArray</span><span class="o">.</span><span class="n">unshift</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">newArray</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">var</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="k">var</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prepend</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="o">//</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">({</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">});</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>With ES6, you can now use the spread operator to create a new array with your
new elements inserted before the original elements.</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">Prepend</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">item</span><span class="o">.</span>
<span class="k">const</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="n">a</span><span class="p">]);</span>







<span class="o">//</span><span class="w"> </span><span class="n">Prepend</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="o">.</span>
<span class="k">const</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span>
<span class="k">const</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">([</span><span class="o">...</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="n">a</span><span class="p">]);</span>
</pre></div>

<h4>Update 2018-08-17: Performance</h4>
<p>I intended this answer to present an alternative syntax that I think is more
memorable and concise. It should be noted that according to some benchmarks
(see this other answer), this syntax is significantly slower. This is probably
not going to matter unless you are doing many of these operations in a loop.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/visual-studio-code-how-to-split-the-editor-vertically/" class="u-url">Visual Studio Code: How to split the editor vertically</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/visual-studio-code-how-to-split-the-editor-vertically/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T16:21:23+08:00" itemprop="datePublished" title="2023-03-05 16:21">2023-03-05 16:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Visual Studio Code, a while ago, when I used menu <em>View</em> → <em>Split Editor</em> ,
it would split vertically. (One file on the left and one file on the right.)</p>
<p>I updated Visual Studio Code and when when I do menu <em>View</em> → <em>Split Editor</em> ,
it always splits horizontally. (One file on the top and one file on the
bottom.)</p>
<p>How can I split vertically?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Change editor split layout from horizontal to vertical</h2>
<h3>In 1.20</h3>
<ul>
<li>
<code>ALT</code>+<code>SHIFT</code>+<code>0</code> <strong>PC</strong> (Windows, Linux)</li>
<li>
<code>⌘</code>+<code>⌥</code>+<code>0</code> <strong>Mac</strong>
</li>
</ul>
<h3>Pre-1.20</h3>
<ul>
<li>
<code>ALT</code>+<code>SHIFT</code>+<code>1</code> <strong>PC</strong> (Windows, Linux)</li>
<li>
<code>⌘</code>+<code>⌥</code>+<code>1</code> <strong>Mac</strong>
</li>
</ul>
<h3>In 1.25</h3>
<ul>
<li>You can split editor into <code>Grid</code> layout. Check <code>View</code>=&gt;<code>Editor Layout</code>
</li>
<li>It is nicely presented in Release notes v1.25: VS Code grid editor layout</li>
</ul>
<h3>In 1.58.2 **</h3>
<p>** Someone update this with the lowest version where this became true.</p>
<ul>
<li>The menu entry with the shortcut given above is <code>View</code>=&gt;<code>Editor Layout</code>=&gt;<code>Flip Layout</code>
</li>
<li>The Command Palette entry is labeled "Toggle Vertical/Horizontal Editor Layout"</li>
<li>The settings entry is <div class="code"><pre class="code literal-block">{
</pre></div>

<p>"key": "alt+cmd+0",
  "command": "workbench.action.toggleEditorGroupLayout"
}</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>If you're looking for a way to change this through the GUI, at least in the
current version 1.10.1 if you hover over the <code>OPEN EDITORS</code> group in the
<code>EXPLORER</code> pane a button appears that toggles the editor group layout between
horizontal and vertical.</p>
<p><img alt="Visual Studio Code - toggle editor group layout button" src="images/tZBpj.png"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mongodb-mongoose-findmany-find-all-documents-with-ids-listed-in-array/" class="u-url">mongodb/mongoose findMany - find all documents with IDs listed in array</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mongodb-mongoose-findmany-find-all-documents-with-ids-listed-in-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T16:20:33+08:00" itemprop="datePublished" title="2023-03-05 16:20">2023-03-05 16:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an array of _ids and I want to get all docs accordingly, what's the
best way to do it ?</p>
<p>Something like ...</p>
<div class="code"><pre class="code literal-block"><span class="c1">// doesn't work ... of course ...</span>

<span class="n">model</span><span class="p">.</span><span class="nb">find</span><span class="p">({</span>
<span class="w">    </span><span class="s">'_id'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s">'4ed3ede8844f0f351100000c'</span><span class="p">,</span>
<span class="w">        </span><span class="s">'4ed3f117a844e0471100000d'</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="s">'4ed3f18132f50c491100000e'</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">},</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">err</span><span class="p">,</span><span class="w"> </span><span class="n">docs</span><span class="p">){</span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="nb">log</span><span class="p">(</span><span class="n">docs</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>The array might contain hundreds of _ids.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>find</code> function in mongoose is a full query to mongoDB. This means you can
use the handy mongoDB <code>$in</code> clause, which works just like the SQL version of
the same.</p>
<div class="code"><pre class="code literal-block"><span class="nt">model</span><span class="p">.</span><span class="nc">find</span><span class="o">(</span><span class="p">{</span>
<span class="w">    </span><span class="err">'_id':</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="err">$</span><span class="n">in</span><span class="p">:</span><span class="w"> </span><span class="cp">[</span>
<span class="w">        </span><span class="nx">mongoose.Types.ObjectId</span><span class="p">(</span><span class="s1">'4ed3ede8844f0f351100000c'</span><span class="p">),</span>
<span class="w">        </span><span class="nx">mongoose.Types.ObjectId</span><span class="p">(</span><span class="s1">'4ed3f117a844e0471100000d'</span><span class="p">),</span><span class="w"> </span>
<span class="w">        </span><span class="nx">mongoose.Types.ObjectId</span><span class="p">(</span><span class="s1">'4ed3f18132f50c491100000e'</span><span class="p">)</span>
<span class="w">    </span><span class="cp">]</span><span class="p">}</span>
<span class="err">}</span><span class="o">,</span><span class="w"> </span><span class="nt">function</span><span class="o">(</span><span class="nt">err</span><span class="o">,</span><span class="w"> </span><span class="nt">docs</span><span class="o">)</span><span class="p">{</span>
<span class="w">     </span><span class="err">console.log(docs)</span><span class="p">;</span>
<span class="p">}</span><span class="o">);</span>
</pre></div>

<p>This method will work well even for arrays containing tens of thousands of
ids. (See Efficiently determine the owner of a record)</p>
<p>I would recommend that anybody working with <code>mongoDB</code> read through the
Advanced Queries section of the excellent Official mongoDB Docs</p>
<p><br></p>
<h3>Suggest</h3>
<p>Ids is the array of object ids:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="p">[</span>
<span class="w">    </span><span class="s1">'4ed3ede8844f0f351100000c'</span><span class="p">,</span>
<span class="w">    </span><span class="s1">'4ed3f117a844e0471100000d'</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="s1">'4ed3f18132f50c491100000e'</span><span class="p">,</span>
<span class="p">];</span>
</pre></div>

<p>Using Mongoose with callback:</p>
<div class="code"><pre class="code literal-block"><span class="nv">Model</span>.<span class="nv">find</span><span class="ss">()</span>.<span class="nv">where</span><span class="ss">(</span><span class="s1">'_id'</span><span class="ss">)</span>.<span class="nv">in</span><span class="ss">(</span><span class="nv">ids</span><span class="ss">)</span>.<span class="k">exec</span><span class="ss">((</span><span class="nv">err</span>,<span class="w"> </span><span class="nv">records</span><span class="ss">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>{}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Using Mongoose with async function:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">records</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">Model</span><span class="o">.</span><span class="n">find</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">'_id'</span><span class="p">)</span><span class="o">.</span><span class="ow">in</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span><span class="o">.</span><span class="n">exec</span><span class="p">();</span>
</pre></div>

<p>Or more concise:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">records</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">Model</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="w"> </span><span class="s1">'_id'</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">$</span><span class="ow">in</span><span class="p">:</span><span class="w"> </span><span class="n">ids</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
</pre></div>

<p>Don't forget to change Model with your actual model.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2767.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2765.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
