<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 339) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-339.html">
<link rel="prev" href="index-340.html" type="text/html">
<link rel="next" href="index-338.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-mark-a-method-as-obsolete-or-deprecated/" class="u-url">How to mark a method as obsolete or deprecated?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-mark-a-method-as-obsolete-or-deprecated/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:21:00+08:00" itemprop="datePublished" title="2023-02-17 04:21">2023-02-17 04:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I mark a method as obsolete or deprecated using C#?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The shortest way is by adding the <code>ObsoleteAttribute</code> as an attribute to the
method. Make sure to include an appropriate explanation:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Obsolete("Method1 is deprecated, please use Method2 instead.")]</span>
<span class="na">public void Method1()</span>
<span class="na">{ … }</span>
</pre></div>

<p>You can also cause the compilation to fail, treating the usage of the method
as an <strong><em>error instead of warning</em></strong> , if the method is called from somewhere
in code like this:</p>
<div class="code"><pre class="code literal-block">[Obsolete("Method1 is deprecated, please use Method2 instead.", true)]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>To mark as obsolete with a warning:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Obsolete]</span>
<span class="na">private static void SomeMethod()</span>
</pre></div>

<p>You get a warning when you use it:</p>
<p><img alt="Obsolete warning is shown" src="images/4ZE8t.png"></p>
<p>And with IntelliSense:</p>
<p><img alt="Obsolete warning with IntelliSense" src="images/9anFu.png"></p>
<p>If you want a message:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Obsolete("My message")]</span>
<span class="na">private static void SomeMethod()</span>
</pre></div>

<p>Here's the IntelliSense tool tip:</p>
<p><img alt="IntelliSense shows the obsolete message" src="images/3Azpi.png"></p>
<p>Finally if you want the usage to be flagged as an error:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Obsolete("My message", true)]</span>
<span class="na">private static void SomeMethod()</span>
</pre></div>

<p>When used this is what you get:</p>
<p><img alt="Method usage is displayed as an error" src="images/5Go6W.png"></p>
<p>Note: Use the message to tell people what they should use instead, not why it
is obsolete.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/could-not-find-a-part-of-the-path-bin-roslyn-csc-exe/" class="u-url">Could not find a part of the path ... bin\roslyn\csc.exe</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/could-not-find-a-part-of-the-path-bin-roslyn-csc-exe/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:20:32+08:00" itemprop="datePublished" title="2023-02-17 04:20">2023-02-17 04:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to run an ASP.NET MVC (model-view-controller) project retrieved
from TFS (Team Foundation Server) source control. I have added all assembly
references and I am able to build and compile successfully without any error
or warning.</p>
<p>But I get the following error in the browser:</p>
<blockquote>
<p>Could not find a part of the path
'C:\B8akWorkspace\B8akProject\B8akSolution\B8AK.Portal\bin\roslyn\csc.exe'.</p>
</blockquote>
<p>Here is a full screenshot of the error page.</p>
<p><img alt="enter image description here" src="images/lkxJP.png"></p>
<p>After few days of research, I understood that Roslyn is a .NET compiler
platform that offers advanced compiling features. However, I do not understand
why my build is trying to find \bin\roslyn\csc.exe because I did not configure
anything related to Roslyn. Nor did I intend to use Roslyn in my project.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The problem with the default VS2015 templates is that the compiler isn't
actually copied to the <code>tfr\bin\roslyn\</code> directory, but rather the
<code>{outdir}\roslyn\</code> directory</p>
<p>Add this code in your .csproj file:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;Target</span><span class="w"> </span><span class="na">Name=</span><span class="s">"CopyRoslynFiles"</span><span class="w"> </span><span class="na">AfterTargets=</span><span class="s">"AfterBuild"</span><span class="w"> </span><span class="na">Condition=</span><span class="s">"!$(Disable_CopyWebApplication) And '$(OutDir)' != '$(OutputPath)'"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;ItemGroup&gt;</span>
<span class="w">      </span><span class="nt">&lt;RoslynFiles</span><span class="w"> </span><span class="na">Include=</span><span class="s">"$(CscToolPath)\*"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ItemGroup&gt;</span>
<span class="w">    </span><span class="nt">&lt;MakeDir</span><span class="w"> </span><span class="na">Directories=</span><span class="s">"$(WebProjectOutputDir)\bin\roslyn"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Copy</span><span class="w"> </span><span class="na">SourceFiles=</span><span class="s">"@(RoslynFiles)"</span><span class="w"> </span><span class="na">DestinationFolder=</span><span class="s">"$(WebProjectOutputDir)\bin\roslyn"</span><span class="w"> </span><span class="na">SkipUnchangedFiles=</span><span class="s">"true"</span><span class="w"> </span><span class="na">Retries=</span><span class="s">"$(CopyRetryCount)"</span><span class="w"> </span><span class="na">RetryDelayMilliseconds=</span><span class="s">"$(CopyRetryDelayMilliseconds)"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Target&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The problem with the default VS2015 templates is that the compiler isn't
actually copied to the <code>tfr\bin\roslyn\</code> directory, but rather the
<code>{outdir}\roslyn\</code> directory</p>
<p>Add this code in your .csproj file:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;Target</span><span class="w"> </span><span class="na">Name=</span><span class="s">"CopyRoslynFiles"</span><span class="w"> </span><span class="na">AfterTargets=</span><span class="s">"AfterBuild"</span><span class="w"> </span><span class="na">Condition=</span><span class="s">"!$(Disable_CopyWebApplication) And '$(OutDir)' != '$(OutputPath)'"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;ItemGroup&gt;</span>
<span class="w">      </span><span class="nt">&lt;RoslynFiles</span><span class="w"> </span><span class="na">Include=</span><span class="s">"$(CscToolPath)\*"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ItemGroup&gt;</span>
<span class="w">    </span><span class="nt">&lt;MakeDir</span><span class="w"> </span><span class="na">Directories=</span><span class="s">"$(WebProjectOutputDir)\bin\roslyn"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Copy</span><span class="w"> </span><span class="na">SourceFiles=</span><span class="s">"@(RoslynFiles)"</span><span class="w"> </span><span class="na">DestinationFolder=</span><span class="s">"$(WebProjectOutputDir)\bin\roslyn"</span><span class="w"> </span><span class="na">SkipUnchangedFiles=</span><span class="s">"true"</span><span class="w"> </span><span class="na">Retries=</span><span class="s">"$(CopyRetryCount)"</span><span class="w"> </span><span class="na">RetryDelayMilliseconds=</span><span class="s">"$(CopyRetryDelayMilliseconds)"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Target&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-initialise-a-static-map/" class="u-url">How can I initialise a static Map?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-initialise-a-static-map/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:20:01+08:00" itemprop="datePublished" title="2023-02-17 04:20">2023-02-17 04:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How would you initialise a static <code>Map</code> in Java?</p>
<p>Method one: static initialiser<br>
Method two: instance initialiser (anonymous subclass) or some other method?</p>
<p>What are the pros and cons of each?</p>
<p>Here is an example illustrating the two methods:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">Test</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">static</span> <span class="n">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">myMap</span> <span class="o">=</span> <span class="n">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="n">static</span> <span class="p">{</span>
        <span class="n">myMap</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"one"</span><span class="p">);</span>
        <span class="n">myMap</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"two"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">private</span> <span class="n">static</span> <span class="n">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">myMap2</span> <span class="o">=</span> <span class="n">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">(){</span>
        <span class="p">{</span>
            <span class="n">put</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"one"</span><span class="p">);</span>
            <span class="n">put</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"two"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The instance initialiser is just syntactic sugar in this case, right? I don't
see why you need an extra anonymous class just to initialize. And it won't
work if the class being created is final.</p>
<p>You can create an immutable map using a static initialiser too:</p>
<div class="code"><pre class="code literal-block">public class Test {
    private static final Map&lt;Integer, String&gt; myMap;
    static {
        Map&lt;Integer, String&gt; aMap = ....;
        aMap.put(1, "one");
        aMap.put(2, "two");
        myMap = Collections.unmodifiableMap(aMap);
    }
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I like the Guava way of initialising a static, immutable map:</p>
<div class="code"><pre class="code literal-block">static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.of(
    1, "one",
    2, "two"
);
</pre></div>

<p>As you can see, it's very concise (because of the convenient factory methods
in <code>ImmutableMap</code>).</p>
<p>If you want the map to have more than 5 entries, you can no longer use
<code>ImmutableMap.of()</code>. Instead, try <code>ImmutableMap.builder()</code> along these lines:</p>
<div class="code"><pre class="code literal-block">static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.&lt;Integer, String&gt;builder()
    .put(1, "one")
    .put(2, "two")
    // ... 
    .put(15, "fifteen")
    .build();
</pre></div>

<p>To learn more about the benefits of Guava's immutable collection utilities,
see <em>Immutable Collections Explained</em> in Guava User Guide.</p>
<p>(A subset of) Guava used to be called <em>Google Collections</em>. If you aren't
using this library in your Java project yet, I <strong>strongly</strong> recommend trying
it out! Guava has quickly become one of the most popular and useful free 3rd
party libs for Java, as fellow SO users agree. (If you are new to it, there
are some excellent learning resources behind that link.)</p>
<hr>
<p><strong>Update (2015)</strong> : As for <strong>Java 8</strong> , well, I would still use the Guava
approach because it is way cleaner than anything else. If you don't want Guava
dependency, consider a plain old init method. The hack with two-dimensional
array and Stream API is pretty ugly if you ask me, and gets uglier if you need
to create a Map whose keys and values are not the same type (like
<code>Map&lt;Integer, String&gt;</code> in the question).</p>
<p>As for future of Guava in general, with regards to Java 8, Louis Wasserman
said this back in 2014, and [ <em>update</em> ] in 2016 it was announced that <strong>Guava
21 will require and properly support Java 8</strong>.</p>
<hr>
<p><strong>Update (2016)</strong> : As Tagir Valeev points out, <strong>Java 9</strong> will finally make
this clean to do using nothing but pure JDK, by adding convenience factory
methods for collections:</p>
<div class="code"><pre class="code literal-block">static final Map&lt;Integer, String&gt; MY_MAP = Map.of(
    1, "one", 
    2, "two"
);
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-340.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-338.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
