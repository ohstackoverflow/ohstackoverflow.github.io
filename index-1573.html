<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1573) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1573.html">
<link rel="prev" href="index-1574.html" type="text/html">
<link rel="next" href="index-1572.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-are-there-no-and-operators-in-python/" class="u-url">Why are there no ++ and -- operators in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-are-there-no-and-operators-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:14:49+08:00" itemprop="datePublished" title="2023-03-03 04:14">2023-03-03 04:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Why are there no <code>++</code> and <code>--</code> operators in Python?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It's not because it doesn't make sense; it makes perfect sense to define "x++"
as "x += 1, evaluating to the previous binding of x".</p>
<p>If you want to know the original reason, you'll have to either wade through
old Python mailing lists or ask somebody who was there (eg. Guido), but it's
easy enough to justify after the fact:</p>
<p>Simple increment and decrement aren't needed as much as in other languages.
You don't write things like <code>for(int i = 0; i &lt; 10; ++i)</code> in Python very
often; instead you do things like <code>for i in range(0, 10)</code>.</p>
<p>Since it's not needed nearly as often, there's much less reason to give it its
own special syntax; when you do need to increment, <code>+=</code> is usually just fine.</p>
<p>It's not a decision of whether it makes sense, or whether it can be done--it
does, and it can. It's a question of whether the benefit is worth adding to
the core syntax of the language. Remember, this is <em>four</em> operators--postinc,
postdec, preinc, predec, and each of these would need to have its own class
overloads; they all need to be specified, and tested; it would add opcodes to
the language (implying a larger, and therefore slower, VM engine); every class
that supports a logical increment would need to implement them (on top of <code>+=</code>
and <code>-=</code>).</p>
<p>This is all redundant with <code>+=</code> and <code>-=</code>, so it would become a net loss.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>This original answer I wrote is a myth from the folklore of computing</strong> :
debunked by Dennis Ritchie as "historically impossible" as noted in the
letters to the editors of <em>Communications of the ACM</em> July 2012
doi:10.1145/2209249.2209251</p>
<hr>
<p>The C increment/decrement operators were invented at a time when the C
compiler wasn't very smart and the authors wanted to be able to specify the
direct intent that a machine language operator should be used which saved a
handful of cycles for a compiler which might do a</p>
<div class="code"><pre class="code literal-block"><span class="nb">load</span><span class="w"> </span><span class="n">memory</span>
<span class="nb">load</span><span class="w"> </span><span class="mi">1</span>
<span class="n">add</span>
<span class="n">store</span><span class="w"> </span><span class="n">memory</span>
</pre></div>

<p>instead of</p>
<div class="code"><pre class="code literal-block">inc memory
</pre></div>

<p>and the PDP-11 even supported "autoincrement" and "autoincrement deferred"
instructions corresponding to <code>*++p</code> and <code>*p++</code>, respectively. See section 5.3
of the manual if horribly curious.</p>
<p>As compilers are smart enough to handle the high-level optimization tricks
built into the syntax of C, they are just a syntactic convenience now.</p>
<p>Python doesn't have tricks to convey intentions to the assembler because it
doesn't use one.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-unit-test-abstract-classes-extend-with-stubs/" class="u-url">How to unit test abstract classes: extend with stubs?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-unit-test-abstract-classes-extend-with-stubs/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:14:24+08:00" itemprop="datePublished" title="2023-03-03 04:14">2023-03-03 04:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was wondering how to unit test abstract classes, and classes that extend
abstract classes.</p>
<p>Should I test the abstract class by extending it, stubbing out the abstract
methods, and then test all the concrete methods? Then only test the methods I
override, and test the abstract methods in the unit tests for objects that
extend my abstract class?</p>
<p>Should I have an abstract test case that can be used to test the methods of
the abstract class, and extend this class in my test case for objects that
extend the abstract class?</p>
<p>Note that my abstract class has some concrete methods.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are two ways in which abstract base classes are used.</p>
<ol>
<li>
<p>You are specializing your abstract object, but all clients will use the derived class through its base interface.</p>
</li>
<li>
<p>You are using an abstract base class to factor out duplication within objects in your design, and clients use the concrete implementations through their own interfaces.!</p>
</li>
</ol>
<hr>
<p><strong>Solution For 1 - Strategy Pattern</strong></p>
<p><img alt="Option1" src="images/Bu4Vy.png"></p>
<p>If you have the first situation, then you actually have an interface defined
by the virtual methods in the abstract class that your derived classes are
implementing.</p>
<p>You should consider making this a real interface, changing your abstract class
to be concrete, and take an instance of this interface in its constructor.
Your derived classes then become implementations of this new interface.</p>
<p><img alt="IMotor" src="images/wPPqA.png"></p>
<p>This means you can now test your previously abstract class using a mock
instance of the new interface, and each new implementation through the now
public interface. Everything is simple and testable.</p>
<hr>
<p><strong>Solution For 2</strong></p>
<p>If you have the second situation, then your abstract class is working as a
helper class.</p>
<p><img alt="AbstractHelper" src="images/ABrGO.png"></p>
<p>Take a look at the functionality it contains. See if any of it can be pushed
onto the objects that are being manipulated to minimize this duplication. If
you still have anything left, look at making it a helper class that your
concrete implementation take in their constructor and remove their base class.</p>
<p><img alt="Motor Helper" src="images/eySjQ.png"></p>
<p>This again leads to concrete classes that are simple and easily testable.</p>
<hr>
<p><strong>As a Rule</strong></p>
<p>Favor complex network of simple objects over a simple network of complex
objects.</p>
<p>The key to extensible testable code is small building blocks and independent
wiring.</p>
<hr>
<p><strong>Updated : How to handle mixtures of both?</strong></p>
<p>It is possible to have a base class performing both of these roles... ie: it
has a public interface, and has protected helper methods. If this is the case,
then you can factor out the helper methods into one class (scenario2) and
convert the inheritance tree into a strategy pattern.</p>
<p>If you find you have some methods your base class implements directly and
other are virtual, then you can still convert the inheritance tree into a
strategy pattern, but I would also take it as a good indicator that the
responsibilities are not correctly aligned, and may need refactoring.</p>
<hr>
<p><strong>Update 2 : Abstract Classes as a stepping stone (2014/06/12)</strong></p>
<p>I had a situation the other day where I used abstract, so I'd like to explore
why.</p>
<p>We have a standard format for our configuration files. This particular tool
has 3 configuration files all in that format. I wanted a strongly typed class
for each setting file so, through dependency injection, a class could ask for
the settings it cared about.</p>
<p>I implemented this by having an abstract base class that knows how to parse
the settings files formats and derived classes that exposed those same
methods, but encapsulated the location of the settings file.</p>
<p>I could have written a "SettingsFileParser" that the 3 classes wrapped, and
then delegated through to the base class to expose the data access methods. I
chose not to do this <em>yet</em> as it would lead to 3 derived classes with more
<em>delegation</em> code in them than anything else.</p>
<p>However... as this code evolves and the consumers of each of these settings
classes become clearer. Each settings users will ask for some settings and
transform them in some way (as settings are text they may wrap them in objects
of convert them to numbers etc.). As this happens I will start to extract this
logic into data manipulation methods and push them back onto the strongly
typed settings classes. This will lead to a higher level interface for each
set of settings, that is eventually no longer aware it's dealing with
'settings'.</p>
<p>At this point the strongly typed settings classes will no longer need the
"getter" methods that expose the underlying 'settings' implementation.</p>
<p>At that point I would no longer want their public interface to include the
settings accessor methods; so I will change this class to encapsulate a
settings parser class instead of derive from it.</p>
<p>The Abstract class is therefore: a way for me to avoid delegation code at the
moment, and a marker in the code to remind me to change the design later. I
may never get to it, so it may live a good while... only the code can tell.</p>
<p>I find this to be true with any rule... like "no static methods" or "no
private methods". They indicate a smell in the code... and that's good. It
keeps you looking for the abstraction that you have missed... and lets you
carry on providing value to your customer in the mean time.</p>
<p>I imagine rules like this one defining a landscape, where maintainable code
lives in the valleys. As you add new behaviour, it's like rain landing on your
code. Initially you put it wherever it lands.. then you refactor to allow the
forces of good design to push the behaviour around until it all ends up in the
valleys.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Write a Mock object and use them just for testing. They usually are very very
very minimal (inherit from the abstract class) and not more.Then, in your Unit
Test you can call the abstract method you want to test.</p>
<p>You should test abstract class that contain some logic like all other classes
you have.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-add-item-to-the-beginning-of-list-t/" class="u-url">How to add item to the beginning of List&lt;T&gt;?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-add-item-to-the-beginning-of-list-t/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:13:59+08:00" itemprop="datePublished" title="2023-03-03 04:13">2023-03-03 04:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to add a "Select One" option to a drop down list bound to a <code>List&lt;T&gt;</code>.</p>
<p>Once I query for the <code>List&lt;T&gt;</code>, how do I add my initial <code>Item</code>, not part of
the data source, as the FIRST element in that <code>List&lt;T&gt;</code> ? I have:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// populate ti from data               </span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">MyTypeItem</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ti</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">MyTypeItem</span><span class="p">.</span><span class="n">GetTypeItems</span><span class="p">();</span><span class="w">    </span>
<span class="c1">//create initial entry    </span>
<span class="n">MyTypeItem</span><span class="w"> </span><span class="n">initialItem</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">MyTypeItem</span><span class="p">();</span><span class="w">    </span>
<span class="n">initialItem</span><span class="p">.</span><span class="n">TypeItem</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"Select One"</span><span class="p">;</span><span class="w">    </span>
<span class="n">initialItem</span><span class="p">.</span><span class="n">TypeItemID</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">ti</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">initialItem</span><span class="p">)</span><span class="w">  </span><span class="o">&lt;</span>!<span class="o">--</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">TOP</span>!<span class="w">    </span>
<span class="c1">// then     </span>
<span class="n">DropDownList1</span><span class="p">.</span><span class="n">DataSource</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ti</span><span class="p">;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Use the Insert method:</p>
<div class="code"><pre class="code literal-block">ti.Insert(0, initialItem);
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Since .NET 4.7.1, you can use the side-effect free <code>Prepend()</code> and <code>Append()</code>.
The output is going to be an IEnumerable.</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">Creating</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">numbers</span>
<span class="k">var</span><span class="w"> </span><span class="n">ti</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">int</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>

<span class="o">//</span><span class="w"> </span><span class="n">Prepend</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Append</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">type</span>
<span class="k">var</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ti</span><span class="o">.</span><span class="n">Prepend</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span>
<span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">Join</span><span class="p">(</span><span class="s2">", "</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">));</span>
</pre></div>

<hr>
<p>Edit:</p>
<p>If you want to explicitly mutate your given list:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">Creating</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">numbers</span>
<span class="k">var</span><span class="w"> </span><span class="n">ti</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">int</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span>

<span class="o">//</span><span class="w"> </span><span class="n">mutating</span><span class="w"> </span><span class="n">ti</span>
<span class="n">ti</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ti</span><span class="o">.</span><span class="n">Prepend</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ToList</span><span class="p">();</span>
</pre></div>

<p>but at that point just use <code>Insert(0, 0)</code></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1574.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1572.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
