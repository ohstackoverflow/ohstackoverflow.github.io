<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2365) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2365.html">
<link rel="prev" href="index-2366.html" type="text/html">
<link rel="next" href="index-2364.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-are-only-final-variables-accessible-in-anonymous-class/" class="u-url">Why are only final variables accessible in anonymous class?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-are-only-final-variables-accessible-in-anonymous-class/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T10:44:19+08:00" itemprop="datePublished" title="2023-03-04 10:44">2023-03-04 10:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <ol>
<li>
<p><code>a</code> can only be final here. Why? How can I reassign <code>a</code> in <code>onClick()</code> method without keeping it as private member?</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">Button</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="err">{</span>
<span class="n">b</span><span class="p">.</span><span class="n">addClickHandler</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ClickHandler</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">ClickEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="mi">5</span><span class="p">;</span>

<span class="w">    </span><span class="err">}</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p>}</p>
</li>
<li>
<p>How can I return the <code>5 * a</code> when it clicked? I mean,</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">Button</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="err">{</span>
<span class="n">b</span><span class="p">.</span><span class="n">addClickHandler</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ClickHandler</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">ClickEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">         </span><span class="nc">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="mi">5</span><span class="p">;</span>
<span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">void</span><span class="w"> </span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p>}</p>
</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>As noted in comments, some of this becomes irrelevant in Java 8, where <code>final</code>
can be implicit. Only an <em>effectively</em> final variable can be used in an
anonymous inner class or lambda expression though.</p>
<hr>
<p>It's basically due to the way Java manages closures.</p>
<p>When you create an instance of an anonymous inner class, any variables which
are used within that class have their <em>values</em> copied in via the autogenerated
constructor. This avoids the compiler having to autogenerate various extra
types to hold the logical state of the "local variables", as for example the
C# compiler does... (When C# captures a variable in an anonymous function, it
really captures the variable - the closure can update the variable in a way
which is seen by the main body of the method, and vice versa.)</p>
<p>As the value has been copied into the instance of the anonymous inner class,
it would look odd if the variable could be modified by the rest of the method
- you could have code which appeared to be working with an out-of-date
variable (because that's effectively what <em>would</em> be happening... you'd be
working with a copy taken at a different time). Likewise if you could make
changes within the anonymous inner class, developers might expect those
changes to be visible within the body of the enclosing method.</p>
<p>Making the variable final removes all these possibilities - as the value can't
be changed at all, you don't need to worry about whether such changes will be
visible. The only ways to allow the method and the anonymous inner class see
each other's changes is to use a mutable type of some description. This could
be the enclosing class itself, an array, a mutable wrapper type... anything
like that. Basically it's a bit like communicating between one method and
another: changes made to the <em>parameters</em> of one method aren't seen by its
caller, but changes made to the objects <em>referred to</em> by the parameters are
seen.</p>
<p>If you're interested in a more detailed comparison between Java and C#
closures, I have an article which goes into it further. I wanted to focus on
the Java side in this answer :)</p>
<p><br></p>
<h3>Suggest</h3>
<p>There is a trick that allows anonymous class to update data in the outer
scope.</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">Button</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="nc">int</span><span class="err">[]</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nc">int</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="n">addClickHandler</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ClickHandler</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nv">@Override</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">ClickEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">res</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span><span class="p">);</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">But</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">likely</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">yet</span><span class="err">!</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">How</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">res</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ready</span><span class="vm">?</span>
<span class="err">}</span>
</pre></div>

<p>However, this trick is not very good due to the synchronization issues. If
handler is invoked later, you need to 1) synchronize access to res if handler
was invoked from the different thread 2) need to have some sort of flag or
indication that res was updated</p>
<p>This trick works OK, though, if anonymous class is invoked in the same thread
immediately. Like:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// ...</span>

<span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="p">[]</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb">int</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<span class="n">r</span><span class="p">.</span><span class="n">run</span><span class="p">();</span>
<span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

<span class="c1">// ...</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-in-boto3-between-resource-client-and-session/" class="u-url">Difference in boto3 between resource, client, and session?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-in-boto3-between-resource-client-and-session/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T10:43:01+08:00" itemprop="datePublished" title="2023-03-04 10:43">2023-03-04 10:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am using Python 2.7.12 in Ubuntu 16.04 LTS. I'm learning how to use boto3
from the following link:
https://boto3.readthedocs.io/en/latest/guide/quickstart.html#using-boto-3. My
doubt is when to use resource, client, or session, and their respective
functionality.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Client</strong> and <strong>Resource</strong> are two different abstractions within the boto3
SDK for making AWS service requests. If you want to make API calls to an AWS
service with boto3, then you do so via a Client or a Resource.</p>
<p>You would typically choose to use either the Client abstraction or the
Resource abstraction, but you can use both, as needed. I've outlined the
differences below to help readers decide which to use.</p>
<p><strong>Session</strong> is largely orthogonal to the concepts of Client and Resource (but
is used by both).</p>
<p>Here's some more detailed information on what Client, Resource, and Session
are all about.</p>
<hr>
<p><strong>Client:</strong></p>
<ul>
<li>this is the original boto3 API abstraction</li>
<li>it provides low-level AWS service access</li>
<li>all AWS service operations are supported by clients</li>
<li>it exposes botocore client to the developer</li>
<li>it typically maps 1:1 with the AWS service API</li>
<li>it exposes snake-cased method names (e.g. ListBuckets API =&gt; list_buckets method)</li>
<li>typically yields primitive, non-marshalled data (e.g. DynamoDB attributes are dicts representing primitive DynamoDB values)</li>
<li>requires you to code result pagination</li>
<li>it is generated from an AWS <strong>service</strong> description</li>
</ul>
<p>Here's an example of client-level access to an S3 bucket's objects:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">boto3</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">'s3'</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_objects_v2</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="s1">'mybucket'</span><span class="p">)</span>

<span class="k">for</span> <span class="n">content</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">'Contents'</span><span class="p">]:</span>
    <span class="n">obj_dict</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="s1">'mybucket'</span><span class="p">,</span> <span class="n">Key</span><span class="o">=</span><span class="n">content</span><span class="p">[</span><span class="s1">'Key'</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">[</span><span class="s1">'Key'</span><span class="p">],</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s1">'LastModified'</span><span class="p">])</span>
</pre></div>

<p>Note: this client-level code is limited to listing at most 1000 objects. You
would have to use a paginator, or implement your own loop, <code>calling
list_objects_v2()</code> repeatedly with a continuation marker if there were more
than 1000 objects.</p>
<p>OK, so that's the low-level Client interface. Now onto the higher-level (more
abstract) Resource interface.</p>
<hr>
<p><strong>Resource:</strong></p>
<ul>
<li>this is the newer boto3 API abstraction</li>
<li>it provides a high-level, object-oriented API</li>
<li>it does not provide 100% API coverage of AWS services</li>
<li>it uses identifiers and attributes</li>
<li>it has actions (operations on resources)</li>
<li>it exposes sub-resources and collections of AWS resources</li>
<li>typically yields marshalled data, not primitive AWS data (e.g. DynamoDB attributes are native Python values representing primitive DynamoDB values)</li>
<li>does result pagination for you</li>
<li>it is generated from an AWS <strong>resource</strong> description</li>
</ul>
<p>Here's the equivalent example using resource-level access to an S3 bucket's
objects:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">boto3</span>

<span class="n">s3</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s1">'s3'</span><span class="p">)</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">Bucket</span><span class="p">(</span><span class="s1">'mybucket'</span><span class="p">)</span>

<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">bucket</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_modified</span><span class="p">)</span>
</pre></div>

<p>Note: in this case you do not have to make a second API call to get the
objects; they're available to you as a collection on the bucket. These
collections of sub-resources are lazily-loaded.</p>
<p>You can see that the <code>Resource</code> version of the code is much simpler, more
compact, and has more capability (for example it does pagination for you and
it exposes properties instead of a raw dictionary). The <code>Client</code> version of
the code would actually be more complicated than shown above if you wanted to
include pagination.</p>
<p>Finally, onto Session which is fundamental to both Client and Resource and how
both get access to AWS credentials, for example.</p>
<hr>
<p><strong>Session:</strong></p>
<ul>
<li>stores configuration information (primarily credentials and selected region)</li>
<li>allows you to create service clients and resources</li>
<li>boto3 creates a default session for you when needed</li>
</ul>
<p>A useful resource to learn more about these boto3 concepts is the introductory
re:Invent video.</p>
<hr>
<p>Update Jan 2023: per the Resources page in the boto3 documentation:</p>
<blockquote>
<p>The AWS Python SDK team does not intend to add new features to the resources
interface in boto3. Existing interfaces will continue to operate during
boto3's lifecycle. Customers can find access to newer service features
through the client interface.</p>
</blockquote>
<p>You can read more about the plans to deprecate resources at
boto3/discussions/3563.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I'll try and explain it as simple as possible. So there is no guarantee of the
accuracy of the actual terms.</p>
<p><strong>Session</strong> is where to initiate the connectivity to AWS services. E.g.
following is default session that uses the default credential profile(e.g.
~/.aws/credentials, or assume your EC2 using IAM instance profile )</p>
<div class="code"><pre class="code literal-block">sqs = boto3.client('sqs')
s3 = boto3.resource('s3')
</pre></div>

<p>Because default session is limit to the profile or instance profile used,
sometimes you need to use the custom session to override the default session
configuration (e.g. region_name, endpoint_url, etc. ) e.g.</p>
<div class="code"><pre class="code literal-block"><span class="p">#</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">boto3</span><span class="p">.</span><span class="n">Session</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">override</span>
<span class="n">my_west_session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boto3</span><span class="p">.</span><span class="n">Session</span><span class="p">(</span><span class="n">region_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">'</span><span class="n">us</span><span class="o">-</span><span class="n">west</span><span class="o">-</span><span class="mh">2</span><span class="p">')</span>
<span class="n">my_east_session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boto3</span><span class="p">.</span><span class="n">Session</span><span class="p">(</span><span class="n">region_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">'</span><span class="n">us</span><span class="o">-</span><span class="n">east</span><span class="o">-</span><span class="mh">1</span><span class="p">')</span>
<span class="n">backup_s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_west_session</span><span class="p">.</span><span class="n">resource</span><span class="p">('</span><span class="n">s3</span><span class="p">')</span>
<span class="n">video_s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_east_session</span><span class="p">.</span><span class="n">resource</span><span class="p">('</span><span class="n">s3</span><span class="p">')</span>

<span class="p">#</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">choices</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="w"> </span>
<span class="n">backup_s3c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_west_session</span><span class="p">.</span><span class="n">client</span><span class="p">('</span><span class="n">s3</span><span class="p">')</span>
<span class="n">video_s3c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boto3</span><span class="p">.</span><span class="n">client</span><span class="p">(</span><span class="s">"s3"</span><span class="p">,</span><span class="w"> </span><span class="n">region_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">'</span><span class="n">us</span><span class="o">-</span><span class="n">east</span><span class="o">-</span><span class="mh">1</span><span class="p">')</span>
</pre></div>

<p><strong>Resource</strong> : This is the high-level service class recommended to be used.
This allows you to tied particular AWS resources and passes it along, so you
just use this abstraction than worry which target services are pointed to. As
you notice from the session part, if you have a custom session, you just pass
this abstract object than worrying about all custom regions,etc to pass along.
Following is a complicated example E.g.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">boto3</span> 
<span class="n">my_west_session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">region_name</span> <span class="o">=</span> <span class="s1">'us-west-2'</span><span class="p">)</span>
<span class="n">my_east_session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">region_name</span> <span class="o">=</span> <span class="s1">'us-east-1'</span><span class="p">)</span>
<span class="n">backup_s3</span> <span class="o">=</span> <span class="n">my_west_session</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s2">"s3"</span><span class="p">)</span>
<span class="n">video_s3</span> <span class="o">=</span> <span class="n">my_east_session</span><span class="o">.</span><span class="n">resource</span><span class="p">(</span><span class="s2">"s3"</span><span class="p">)</span>
<span class="n">backup_bucket</span> <span class="o">=</span> <span class="n">backup_s3</span><span class="o">.</span><span class="n">Bucket</span><span class="p">(</span><span class="s1">'backupbucket'</span><span class="p">)</span> 
<span class="n">video_bucket</span> <span class="o">=</span> <span class="n">video_s3</span><span class="o">.</span><span class="n">Bucket</span><span class="p">(</span><span class="s1">'videobucket'</span><span class="p">)</span>

<span class="c1"># just pass the instantiated bucket object</span>
<span class="k">def</span> <span class="nf">list_bucket_contents</span><span class="p">(</span><span class="n">bucket</span><span class="p">):</span>
   <span class="k">for</span> <span class="nb">object</span> <span class="ow">in</span> <span class="n">bucket</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
      <span class="nb">print</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

<span class="n">list_bucket_contents</span><span class="p">(</span><span class="n">backup_bucket</span><span class="p">)</span>
<span class="n">list_bucket_contents</span><span class="p">(</span><span class="n">video_bucket</span><span class="p">)</span>
</pre></div>

<p><strong>Client</strong> is a low level class object. For each client call, you need to
explicitly specify the targeting resources, the designated service target name
must be pass long. You will lose the abstraction ability.</p>
<p>For example, if you only deal with the default session, this looks similar to
boto3.resource.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">boto3</span> 
<span class="n">s3</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">'s3'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">list_bucket_contents</span><span class="p">(</span><span class="n">bucket_name</span><span class="p">):</span>
   <span class="k">for</span> <span class="nb">object</span> <span class="ow">in</span> <span class="n">s3</span><span class="o">.</span><span class="n">list_objects_v2</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="n">bucket_name</span><span class="p">)</span> <span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

<span class="n">list_bucket_contents</span><span class="p">(</span><span class="s1">'Mybucket'</span><span class="p">)</span>
</pre></div>

<p>However, if you want to list objects from a bucket in different regions, you
need to specify the explicit bucket parameter required for the client.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">boto3</span> 
<span class="n">backup_s3</span> <span class="o">=</span> <span class="n">my_west_session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">'s3'</span><span class="p">,</span><span class="n">region_name</span> <span class="o">=</span> <span class="s1">'us-west-2'</span><span class="p">)</span>
<span class="n">video_s3</span> <span class="o">=</span> <span class="n">my_east_session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s1">'s3'</span><span class="p">,</span><span class="n">region_name</span> <span class="o">=</span> <span class="s1">'us-east-1'</span><span class="p">)</span>

<span class="c1"># you must pass boto3.Session.client and the bucket name </span>
<span class="k">def</span> <span class="nf">list_bucket_contents</span><span class="p">(</span><span class="n">s3session</span><span class="p">,</span> <span class="n">bucket_name</span><span class="p">):</span>
   <span class="n">response</span> <span class="o">=</span> <span class="n">s3session</span><span class="o">.</span><span class="n">list_objects_v2</span><span class="p">(</span><span class="n">Bucket</span><span class="o">=</span><span class="n">bucket_name</span><span class="p">)</span>
   <span class="k">if</span> <span class="s1">'Contents'</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
     <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">'Contents'</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s1">'key'</span><span class="p">])</span>

<span class="n">list_bucket_contents</span><span class="p">(</span><span class="n">backup_s3</span><span class="p">,</span> <span class="s1">'backupbucket'</span><span class="p">)</span>
<span class="n">list_bucket_contents</span><span class="p">(</span><span class="n">video_s3</span> <span class="p">,</span> <span class="s1">'videobucket'</span><span class="p">)</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-java-servlet/" class="u-url">What is Java Servlet?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-java-servlet/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T10:41:38+08:00" itemprop="datePublished" title="2023-03-04 10:41">2023-03-04 10:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I read many articles to understand Java servlet but I did not succeed.</p>
<p>Can you please give brief introduction of Java servlets (in easy language).
What is a servlet? What are the advantages?</p>
<p>I can't understand the difference between server-side programming languages
(PHP, ASP) and servlets.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A servlet is simply a class which responds to a particular type of network
request - most commonly an HTTP request. Basically servlets are usually used
to implement web applications - but there are also various frameworks which
operate on top of servlets (e.g. Struts) to give a higher-level abstraction
than the "here's an HTTP request, write to this HTTP response" level which
servlets provide.</p>
<p>Servlets run in a <em>servlet container</em> which handles the networking side (e.g.
parsing an HTTP request, connection handling etc). One of the best-known open
source servlet containers is Tomcat.</p>
<p><br></p>
<h3>Suggest</h3>
<p>A servlet at its very core is a java class; which can handle HTTP requests.
Typically the internal nitty-gritty of reading a HTTP request and response
over the wire is taken care of by the containers like Tomcat. This is done so
that as a server side developer you can focus on what to do with the HTTP
request and responses and not bother about dealing with code that deals with
networking etc. The container will take care of things like wrapping the whole
thing in a HTTP response object and send it over to the client (say a
browser).</p>
<p>Now the next logical question to ask is who decides what is a container
supposed to do? And the answer is; In Java world at least It is guided (note I
did not use the word controlled) by specifications. For example Servlet
specifications (See resource 2) dictates what a servlet must be able to do. So
if you can write an implementation for the specification, congratulations you
just created a container (Technically containers like Tomcat also implement
other specifications and do tricky stuff like custom class loaders etc but you
get the idea).</p>
<p>Assuming you have a container, your servlets are now java classes whose
lifecycle will be maintained by the container but their reaction to incoming
HTTP requests will be decided by you. You do that by writing what-you-want-to-
do in the pre-defined methods like init(), doGet(), doPost() etc. Look at
Resource 3.</p>
<p>Here is a fun exercise for you. Create a simple servlet like in Resource 3 and
write a few System.out.println() statements in it's constructor method (Yes
you can have a constructor of a servlet), init(), doGet(), doPost() methods
and run the servlet in tomcat. See the console logs and tomcat logs.</p>
<p><strong>Resources</strong></p>
<ol>
<li>
<p>Look how the HTTP servlet looks here(Tomcat example).</p>
</li>
<li>
<p>Servlet Specification.</p>
</li>
<li>
<p>Simple Servlet example.</p>
</li>
<li>
<p>Start reading the book online/PDF It also provides you download of the whole book. May be this will help. if you are just starting servlets may be it's a good idea to read the material along with the servlet API. it's a slower process of learning, but is way more helpful in getting the basics clear.</p>
</li>
</ol>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2366.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2364.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
