<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 385) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-385.html">
<link rel="prev" href="index-386.html" type="text/html">
<link rel="next" href="index-384.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/r-cannot-be-resolved-android-error/" class="u-url">R cannot be resolved - Android error</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/r-cannot-be-resolved-android-error/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:30:36+08:00" itemprop="datePublished" title="2023-02-17 05:30">2023-02-17 05:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I just downloaded and installed the new Android SDK. I wanted to create a
simple application to test drive it.</p>
<p>The wizard created this code:</p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">eu</span><span class="o">.</span><span class="n">mauriziopz</span><span class="o">.</span><span class="n">gps</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">ggps</span> <span class="n">extends</span> <span class="n">Activity</span> <span class="p">{</span>
    <span class="o">/**</span> <span class="n">Called</span> <span class="n">when</span> <span class="n">the</span> <span class="n">activity</span> <span class="ow">is</span> <span class="n">first</span> <span class="n">created</span><span class="o">.</span> <span class="o">*/</span>
    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
        <span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">main</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>but Eclipse gives me the error</p>
<blockquote>
<p>R cannot be resolved</p>
</blockquote>
<p>on line</p>
<div class="code"><pre class="code literal-block">setContentView(R.layout.main);
</pre></div>

<p>Why?</p>
<p>PS: I do have an XML file named <code>main.xml</code> under <code>res/layout/</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>What Will said was right</p>
<blockquote>
<p>R is an automatically generated class that holds the constants used to
identify your &gt;resources. If you don't have an R.java file (it would be
gen/eu.mauriziopz.gps/R.java in &gt;Eclipse with the 1.5 SDK) I would recommend
closing and reopening your project or going to &gt;Project &gt; Build all (and
selecting "Build Automatically" while there as recommended by &gt;Josef). If
that doesn't work than try making a new project, if the problem is recreated
than &gt;post here again and we'll go into more detail.</p>
</blockquote>
<p>but I've found out that there was another problem that was causing the first
one. The tools in the SDK directory didn't have the permissions to be
executed, so it was like the didn't exist for Eclipse, thus it didn't build
the <code>R.java</code> file.</p>
<p>So modifying the permission and selecting "Build Automatically" solved the
problem.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Each time I had a problem with R not been generated, or even disappeared, this
was due to some problem in the XML layout file that prevented the application
from being built.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/calculate-distance-between-two-latitude-longitude-points-haversine-formula/" class="u-url">Calculate distance between two latitude-longitude points? (Haversine formula)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/calculate-distance-between-two-latitude-longitude-points-haversine-formula/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:30:06+08:00" itemprop="datePublished" title="2023-02-17 05:30">2023-02-17 05:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I calculate the distance between two points specified by latitude and
longitude?</p>
<p>For clarification, I'd like the distance in kilometers; the points use the
WGS84 system and I'd like to understand the relative accuracies of the
approaches available.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This link might be helpful to you, as it details the use of the Haversine
formula to calculate the distance.</p>
<p>Excerpt:</p>
<blockquote>
<p>This script [in Javascript] calculates great-circle distances between the
two points – that is, the shortest distance over the earth’s surface – using
the ‘Haversine’ formula.</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">getDistanceFromLatLonInKm</span><span class="p">(</span><span class="n">lat1</span><span class="p">,</span><span class="n">lon1</span><span class="p">,</span><span class="n">lat2</span><span class="p">,</span><span class="n">lon2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6371</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Radius</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">earth</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">km</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">dLat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">deg2rad</span><span class="p">(</span><span class="n">lat2</span><span class="o">-</span><span class="n">lat1</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nb">deg2rad</span><span class="w"> </span><span class="n">below</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">dLon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">deg2rad</span><span class="p">(</span><span class="n">lon2</span><span class="o">-</span><span class="n">lon1</span><span class="p">);</span><span class="w"> </span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="n">Math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dLat</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dLat</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span>
<span class="w">    </span><span class="n">Math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="nb">deg2rad</span><span class="p">(</span><span class="n">lat1</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="nb">deg2rad</span><span class="p">(</span><span class="n">lat2</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>
<span class="w">    </span><span class="n">Math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dLon</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dLon</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">;</span><span class="w"> </span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">a</span><span class="p">));</span><span class="w"> </span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Distance</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">km</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="nb">deg2rad</span><span class="p">(</span><span class="n">deg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">deg</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="bp">PI</span><span class="o">/</span><span class="mi">180</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I needed to calculate a lot of distances between the points for my project, so
I went ahead and tried to optimize the code, I have found here. On average in
different browsers my new implementation <strong>runs 2 times faster</strong> than the most
upvoted answer.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">distance</span><span class="p">(</span><span class="n">lat1</span><span class="p">,</span><span class="w"> </span><span class="n">lon1</span><span class="p">,</span><span class="w"> </span><span class="n">lat2</span><span class="p">,</span><span class="w"> </span><span class="n">lon2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.017453292519943295</span><span class="p">;</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="bp">PI</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">180</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">cos</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="p">((</span><span class="n">lat2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">lat1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>
<span class="w">          </span><span class="n">c</span><span class="p">(</span><span class="n">lat1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">(</span><span class="n">lat2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>
<span class="w">          </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="p">((</span><span class="n">lon2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">lon1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">p</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">12742</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">asin</span><span class="p">(</span><span class="n">Math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">R</span><span class="p">;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6371</span><span class="w"> </span><span class="n">km</span>
<span class="p">}</span>
</pre></div>

<p>You can play with my jsPerf and see the results here.</p>
<p>Recently I needed to do the same in python, so here is a <strong>python
implementation</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">asin</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">pi</span>

<span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="n">lat1</span><span class="p">,</span> <span class="n">lon1</span><span class="p">,</span> <span class="n">lat2</span><span class="p">,</span> <span class="n">lon2</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">180</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">cos</span><span class="p">((</span><span class="n">lat2</span><span class="o">-</span><span class="n">lat1</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">lat1</span><span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">lat2</span><span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">cos</span><span class="p">((</span><span class="n">lon2</span><span class="o">-</span><span class="n">lon1</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span>
    <span class="k">return</span> <span class="mi">12742</span> <span class="o">*</span> <span class="n">asin</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="c1">#2*R*asin...</span>
</pre></div>

<p>And for the sake of completeness: Haversine on Wikipedia.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-java-class/" class="u-url">What is the difference between canonical name, simple name and class name in Java Class?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-canonical-name-simple-name-and-class-name-in-java-class/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:29:41+08:00" itemprop="datePublished" title="2023-02-17 05:29">2023-02-17 05:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Java, what is the difference between these:</p>
<div class="code"><pre class="code literal-block">Object o1 = ....
o1.getClass().getSimpleName();
o1.getClass().getName();
o1.getClass().getCanonicalName();
</pre></div>

<p>I have checked the Javadoc multiple times and yet this never explains it well.
I also ran a test and that didn't reflect any real meaning behind the way
these methods are called.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you're unsure about something, try writing a test first.</p>
<p>I did this:</p>
<div class="code"><pre class="code literal-block"><span class="kd">class</span><span class="w"> </span><span class="nx">ClassNameTest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="nx">main</span><span class="p">(</span><span class="kr">final</span><span class="w"> </span><span class="nb">String</span><span class="p">...</span><span class="w"> </span><span class="nx">arguments</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">printNamesForClass</span><span class="p">(</span>
<span class="w">            </span><span class="kr">int</span><span class="p">.</span><span class="kd">class</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"int.class (primitive)"</span><span class="p">);</span>
<span class="w">        </span><span class="nx">printNamesForClass</span><span class="p">(</span>
<span class="w">            </span><span class="nb">String</span><span class="p">.</span><span class="kd">class</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"String.class (ordinary class)"</span><span class="p">);</span>
<span class="w">        </span><span class="nx">printNamesForClass</span><span class="p">(</span>
<span class="w">            </span><span class="nx">java</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">HashMap</span><span class="p">.</span><span class="nx">SimpleEntry</span><span class="p">.</span><span class="kd">class</span><span class="p">,</span>
<span class="w">            </span><span class="s2">"java.util.HashMap.SimpleEntry.class (nested class)"</span><span class="p">);</span>
<span class="w">        </span><span class="nx">printNamesForClass</span><span class="p">(</span>
<span class="w">            </span><span class="ow">new</span><span class="w"> </span><span class="nx">java</span><span class="p">.</span><span class="nx">io</span><span class="p">.</span><span class="nx">Serializable</span><span class="p">(){}.</span><span class="nx">getClass</span><span class="p">(),</span>
<span class="w">            </span><span class="s2">"new java.io.Serializable(){}.getClass() (anonymous inner class)"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kr">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="nx">printNamesForClass</span><span class="p">(</span><span class="kr">final</span><span class="w"> </span><span class="nx">Class</span><span class="cp">&lt;?</span><span class="o">&gt;</span> <span class="nx">clazz</span><span class="p">,</span> <span class="k">final</span> <span class="nx">String</span> <span class="nx">label</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="nx">label</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"    getName():          "</span> <span class="o">+</span> <span class="nx">clazz</span><span class="o">.</span><span class="nx">getName</span><span class="p">());</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"    getCanonicalName(): "</span> <span class="o">+</span> <span class="nx">clazz</span><span class="o">.</span><span class="nx">getCanonicalName</span><span class="p">());</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"    getSimpleName():    "</span> <span class="o">+</span> <span class="nx">clazz</span><span class="o">.</span><span class="nx">getSimpleName</span><span class="p">());</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"    getTypeName():      "</span> <span class="o">+</span> <span class="nx">clazz</span><span class="o">.</span><span class="nx">getTypeName</span><span class="p">());</span> <span class="c1">// added in Java 8</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Prints:</p>
<div class="code"><pre class="code literal-block">int.class (primitive):
    getName():          int
    getCanonicalName(): int
    getSimpleName():    int
    getTypeName():      int

String.class (ordinary class):
    getName():          java.lang.String
    getCanonicalName(): java.lang.String
    getSimpleName():    String
    getTypeName():      java.lang.String

java.util.HashMap.SimpleEntry.class (nested class):
    getName():          java.util.AbstractMap$SimpleEntry
    getCanonicalName(): java.util.AbstractMap.SimpleEntry
    getSimpleName():    SimpleEntry
    getTypeName():      java.util.AbstractMap$SimpleEntry

new java.io.Serializable(){}.getClass() (anonymous inner class):
    getName():          ClassNameTest$1
    getCanonicalName(): null
    getSimpleName():    
    getTypeName():      ClassNameTest$1
</pre></div>

<p>There's an empty entry in the last block where <code>getSimpleName</code> returns an
empty string.</p>
<p>The upshot looking at this is:</p>
<blockquote>
<ul>
<li>the <strong>name</strong> is the name that you'd use to dynamically load the class
with, for example, a call to <code>Class.forName</code> with the default <code>ClassLoader</code>.
Within the scope of a certain <code>ClassLoader</code>, all classes have unique names.</li>
<li>the <strong>canonical name</strong> is the name that would be used in an import
statement. It might be useful during <code>toString</code> or logging operations. When
the <code>javac</code> compiler has complete view of a classpath, it enforces
uniqueness of canonical names within it by clashing fully qualified class
and package names at compile time. However JVMs must accept such name
clashes, and thus canonical names do not uniquely identify classes within a
<code>ClassLoader</code>. (In hindsight, a better name for this getter would have been
<code>getJavaName</code>; but this method dates from a time when the JVM was used
solely to run Java programs.)</li>
<li>the <strong>simple name</strong> loosely identifies the class, again might be useful
during <code>toString</code> or logging operations but is not guaranteed to be unique.</li>
<li>the <strong>type name</strong> returns "an informative string for the name of this
type", "It's like <code>toString</code>: it's purely informative and has no contract
value". (as written by sir4ur0n)
</li>
</ul>
</blockquote>
<p>Also you can commonly reference the Java Language Specification documentation
for these types technical Java API details:</p>
<blockquote>
<ul>
<li>Here's the Java 11 <strong>Specification</strong> on this subject matter:
https://docs.oracle.com/javase/specs/jls/se11/html/jls-6.html#jls-6.7
</li>
</ul>
<p><code>Example 6.7-2.</code> and <code>Example 6.7-2.</code> goes over <code>Fully Qualified Names</code> and
<code>Fully Qualified Names v. Canonical Name</code> respectively</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Adding local classes, lambdas and the <code>toString()</code> method to complete the
previous two answers. Further, I add arrays of lambdas and arrays of anonymous
classes (which do not make any sense in practice though):</p>
<div class="code"><pre class="code literal-block"><span class="kr">package</span><span class="w"> </span><span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">;</span>

<span class="kr">public</span><span class="w"> </span><span class="kr">final</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">TestClassNames</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="nx">showClass</span><span class="p">(</span><span class="nx">Class</span><span class="cp">&lt;?</span><span class="o">&gt;</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"getName():          "</span> <span class="o">+</span> <span class="nx">c</span><span class="o">.</span><span class="nx">getName</span><span class="p">());</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"getCanonicalName(): "</span> <span class="o">+</span> <span class="nx">c</span><span class="o">.</span><span class="nx">getCanonicalName</span><span class="p">());</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"getSimpleName():    "</span> <span class="o">+</span> <span class="nx">c</span><span class="o">.</span><span class="nx">getSimpleName</span><span class="p">());</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">(</span><span class="s2">"toString():         "</span> <span class="o">+</span> <span class="nx">c</span><span class="o">.</span><span class="nx">toString</span><span class="p">());</span>
        <span class="nx">System</span><span class="o">.</span><span class="nx">out</span><span class="o">.</span><span class="nx">println</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="nx">void</span> <span class="nx">x</span><span class="p">(</span><span class="nx">Runnable</span> <span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">r</span><span class="o">.</span><span class="nx">getClass</span><span class="p">());</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">java</span><span class="o">.</span><span class="nx">lang</span><span class="o">.</span><span class="nx">reflect</span><span class="o">.</span><span class="k">Array</span><span class="o">.</span><span class="nx">newInstance</span><span class="p">(</span><span class="nx">r</span><span class="o">.</span><span class="nx">getClass</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nx">getClass</span><span class="p">());</span> <span class="c1">// Obtains an array class of a lambda base type.</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">NestedClass</span> <span class="p">{}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">InnerClass</span> <span class="p">{}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="nx">void</span> <span class="nx">main</span><span class="p">(</span><span class="nx">String</span><span class="p">[]</span> <span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">class</span> <span class="nc">LocalClass</span> <span class="p">{}</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">void</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">int</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">String</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">Runnable</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">SomeEnum</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">SomeAnnotation</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">int</span><span class="p">[]</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">String</span><span class="p">[]</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">NestedClass</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">InnerClass</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">LocalClass</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">LocalClass</span><span class="p">[]</span><span class="o">.</span><span class="nx">class</span><span class="p">);</span>
        <span class="nx">Object</span> <span class="nx">anonymous</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">java</span><span class="o">.</span><span class="nx">io</span><span class="o">.</span><span class="nx">Serializable</span><span class="p">()</span> <span class="p">{};</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">anonymous</span><span class="o">.</span><span class="nx">getClass</span><span class="p">());</span>
        <span class="nx">showClass</span><span class="p">(</span><span class="nx">java</span><span class="o">.</span><span class="nx">lang</span><span class="o">.</span><span class="nx">reflect</span><span class="o">.</span><span class="k">Array</span><span class="o">.</span><span class="nx">newInstance</span><span class="p">(</span><span class="nx">anonymous</span><span class="o">.</span><span class="nx">getClass</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nx">getClass</span><span class="p">());</span> <span class="c1">// Obtains an array class of an anonymous base type.</span>
        <span class="nx">x</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="p">{});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">enum</span> <span class="nx">SomeEnum</span> <span class="p">{</span>
   <span class="nx">BLUE</span><span class="p">,</span> <span class="nx">YELLOW</span><span class="p">,</span> <span class="nx">RED</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">@</span><span class="k">interface</span> <span class="nx">SomeAnnotation</span> <span class="p">{}</span>
</pre></div>

<p>This is the full output:</p>
<div class="code"><pre class="code literal-block">getName():          void
getCanonicalName(): void
getSimpleName():    void
toString():         void

getName():          int
getCanonicalName(): int
getSimpleName():    int
toString():         int

getName():          java.lang.String
getCanonicalName(): java.lang.String
getSimpleName():    String
toString():         class java.lang.String

getName():          java.lang.Runnable
getCanonicalName(): java.lang.Runnable
getSimpleName():    Runnable
toString():         interface java.lang.Runnable

getName():          com.example.SomeEnum
getCanonicalName(): com.example.SomeEnum
getSimpleName():    SomeEnum
toString():         class com.example.SomeEnum

getName():          com.example.SomeAnnotation
getCanonicalName(): com.example.SomeAnnotation
getSimpleName():    SomeAnnotation
toString():         interface com.example.SomeAnnotation

getName():          [I
getCanonicalName(): int[]
getSimpleName():    int[]
toString():         class [I

getName():          [Ljava.lang.String;
getCanonicalName(): java.lang.String[]
getSimpleName():    String[]
toString():         class [Ljava.lang.String;

getName():          com.example.TestClassNames$NestedClass
getCanonicalName(): com.example.TestClassNames.NestedClass
getSimpleName():    NestedClass
toString():         class com.example.TestClassNames$NestedClass

getName():          com.example.TestClassNames$InnerClass
getCanonicalName(): com.example.TestClassNames.InnerClass
getSimpleName():    InnerClass
toString():         class com.example.TestClassNames$InnerClass

getName():          com.example.TestClassNames$1LocalClass
getCanonicalName(): null
getSimpleName():    LocalClass
toString():         class com.example.TestClassNames$1LocalClass

getName():          [Lcom.example.TestClassNames$1LocalClass;
getCanonicalName(): null
getSimpleName():    LocalClass[]
toString():         class [Lcom.example.TestClassNames$1LocalClass;

getName():          com.example.TestClassNames$1
getCanonicalName(): null
getSimpleName():    
toString():         class com.example.TestClassNames$1

getName():          [Lcom.example.TestClassNames$1;
getCanonicalName(): null
getSimpleName():    []
toString():         class [Lcom.example.TestClassNames$1;

getName():          com.example.TestClassNames$$Lambda$1/1175962212
getCanonicalName(): com.example.TestClassNames$$Lambda$1/1175962212
getSimpleName():    TestClassNames$$Lambda$1/1175962212
toString():         class com.example.TestClassNames$$Lambda$1/1175962212

getName():          [Lcom.example.TestClassNames$$Lambda$1;
getCanonicalName(): com.example.TestClassNames$$Lambda$1/1175962212[]
getSimpleName():    TestClassNames$$Lambda$1/1175962212[]
toString():         class [Lcom.example.TestClassNames$$Lambda$1;
</pre></div>

<p>So, here are the rules. First, lets start with primitive types and <code>void</code>:</p>
<ol>
<li>If the class object represents a primitive type or <code>void</code>, all the four methods simply returns its name.</li>
</ol>
<p>Now the rules for the <code>getName()</code> method:</p>
<ol>
<li>Every non-lambda and non-array class or interface (i.e, top-level, nested, inner, local and anonymous) has a name (which is returned by <code>getName()</code>) that is the package name followed by a dot (if there is a package), followed by the name of its class-file as generated by the compiler (whithout the suffix <code>.class</code>). If there is no package, it is simply the name of the class-file. If the class is an inner, nested, local or anonymous class, the compiler should generate at least one <code>$</code> in its class-file name. Note that for anonymous classes, the class name would end with a dollar-sign followed by a number.</li>
<li>Lambda class names are generally unpredictable, and you shouldn't care about they anyway. Exactly, their name is the name of the enclosing class, followed by <code>$$Lambda$</code>, followed by a number, followed by a slash, followed by another number.</li>
<li>The class descriptor of the primitives are <code>Z</code> for <code>boolean</code>, <code>B</code> for <code>byte</code>, <code>S</code> for <code>short</code>, <code>C</code> for <code>char</code>, <code>I</code> for <code>int</code>, <code>J</code> for <code>long</code>, <code>F</code> for <code>float</code> and <code>D</code> for <code>double</code>. For non-array classes and interfaces the class descriptor is <code>L</code> followed by what is given by <code>getName()</code> followed by <code>;</code>. For array classes, the class descriptor is <code>[</code> followed by the class descriptor of the component type (which may be itself another array class).</li>
<li>For array classes, the <code>getName()</code> method returns its class descriptor. This rule seems to fail only for array classes whose the component type is a lambda (which possibly is a bug), but hopefully this should not matter anyway because there is no point even on the existence of array classes whose component type is a lambda.</li>
</ol>
<p>Now, the <code>toString()</code> method:</p>
<ol>
<li>If the class instance represents an interface (or an annotation, which is a special type of interface), the <code>toString()</code> returns <code>"interface " + getName()</code>. If it is a primitive, it returns simply <code>getName()</code>. If it is something else (a class type, even if it is a pretty weird one), it returns <code>"class " + getName()</code>.</li>
</ol>
<p>The <code>getCanonicalName()</code> method:</p>
<ol>
<li>For top-level classes and interfaces, the <code>getCanonicalName()</code> method returns just what the <code>getName()</code> method returns.</li>
<li>The <code>getCanonicalName()</code> method returns <code>null</code> for anonymous or local classes and for array classes of those.</li>
<li>For inner and nested classes and interfaces, the <code>getCanonicalName()</code> method returns what the <code>getName()</code> method would replacing the compiler-introduced dollar-signs by dots.</li>
<li>For array classes, the <code>getCanonicalName()</code> method returns <code>null</code> if the canonical name of the component type is <code>null</code>. Otherwise, it returns the canonical name of the component type followed by <code>[]</code>.</li>
</ol>
<p>The <code>getSimpleName()</code> method:</p>
<ol>
<li>For top-level, nested, inner and local classes, the <code>getSimpleName()</code> returns the name of the class as written in the source file.</li>
<li>For anonymous classes the <code>getSimpleName()</code> returns an empty <code>String</code>.</li>
<li>For lambda classes the <code>getSimpleName()</code> just returns what the <code>getName()</code> would return without the package name. This do not makes much sense and looks like a bug for me, but there is no point in calling <code>getSimpleName()</code> on a lambda class to start with.</li>
<li>For array classes the <code>getSimpleName()</code> method returns the simple name of the component class followed by <code>[]</code>. This have the funny/weird side-effect that array classes whose component type is an anonymous class have just <code>[]</code> as their simple names.</li>
</ol>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-386.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-384.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
