<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2698) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2698.html">
<link rel="prev" href="index-2699.html" type="text/html">
<link rel="next" href="index-2697.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wrong-requestcode-in-onactivityresult/" class="u-url">Wrong requestCode in onActivityResult</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/wrong-requestcode-in-onactivityresult/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:16:03+08:00" itemprop="datePublished" title="2023-03-05 11:16">2023-03-05 11:16</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm starting a new Activity from my Fragment with</p>
<div class="code"><pre class="code literal-block">startActivityForResult(intent, 1);
</pre></div>

<p>and want to handle the result in the Fragment's parent Activity:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Override</span>
<span class="n">protected</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onActivityResult</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">Intent</span><span class="w"> </span><span class="k">data</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nf">Log</span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="ss">"onActivityResult, requestCode: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">requestCode</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">", resultCode: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">resultCode</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">requestCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">bla</span><span class="w"> </span><span class="n">bla</span><span class="w"> </span><span class="n">bla</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>The problem is that I never got the <code>requestCode</code> I've just posted to
<code>startActivityForResult()</code>.</p>
<p>I got something like <code>0x40001</code>, <code>0x20001</code> etc. with a random higher bit set.
The docs don't say anything about this. Any ideas?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You are calling <code>startActivityForResult()</code> from your <code>Fragment</code>. When you do
this, the <code>requestCode</code> is changed by the <code>Activity</code> that owns the <code>Fragment</code>.</p>
<p>If you want to get the correct <code>resultCode</code> in your activity try this:</p>
<p>Change:</p>
<div class="code"><pre class="code literal-block">startActivityForResult(intent, 1);
</pre></div>

<p>To:</p>
<div class="code"><pre class="code literal-block">getActivity().startActivityForResult(intent, 1);
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The request code is not wrong. When using v4 support library fragments,
fragment index is encoded in the top 16 bits of the request code and your
request code is in the bottom 16 bits. The fragment index is later used to
find the correct fragment to deliver the result.</p>
<p>Hence for Activities started form fragment object, handle onActivityResult
requestCode like below:</p>
<div class="code"><pre class="code literal-block">originalRequestCode = changedRequestCode - (indexOfFragment &lt;&lt; 16)
      6             =      196614        -       (3 &lt;&lt; 16)
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-most-efficient-way-to-erase-duplicates-and-sort-a-vector/" class="u-url">What's the most efficient way to erase duplicates and sort a vector?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-most-efficient-way-to-erase-duplicates-and-sort-a-vector/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:14:20+08:00" itemprop="datePublished" title="2023-03-05 11:14">2023-03-05 11:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to take a C++ vector with potentially a lot of elements, erase
duplicates, and sort it.</p>
<p>I currently have the below code, but it doesn't work.</p>
<div class="code"><pre class="code literal-block"><span class="nt">vec</span><span class="p">.</span><span class="nc">erase</span><span class="o">(</span>
<span class="w">      </span><span class="nt">std</span><span class="p">::</span><span class="nd">unique</span><span class="o">(</span><span class="nt">vec</span><span class="p">.</span><span class="nc">begin</span><span class="o">(),</span><span class="w"> </span><span class="nt">vec</span><span class="p">.</span><span class="nc">end</span><span class="o">()),</span>
<span class="w">      </span><span class="nt">vec</span><span class="p">.</span><span class="nc">end</span><span class="o">());</span>
<span class="nt">std</span><span class="p">::</span><span class="nd">sort</span><span class="o">(</span><span class="nt">vec</span><span class="p">.</span><span class="nc">begin</span><span class="o">(),</span><span class="w"> </span><span class="nt">vec</span><span class="p">.</span><span class="nc">end</span><span class="o">());</span>
</pre></div>

<p>How can I correctly do this?</p>
<p>Additionally, is it faster to erase the duplicates first (similar to coded
above) or perform the sort first? If I do perform the sort first, is it
guaranteed to remain sorted after <code>std::unique</code> is executed?</p>
<p>Or is there another (perhaps more efficient) way to do all this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I agree with R. Pate and Todd Gardner; a <code>std::set</code> might be a good idea here.
Even if you're stuck using vectors, if you have enough duplicates, you might
be better off creating a set to do the dirty work.</p>
<p>Let's compare three approaches:</p>
<p><strong>Just using vector, sort + unique</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">sort</span><span class="ss">(</span><span class="w"> </span><span class="nv">vec</span>.<span class="nv">begin</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">vec</span>.<span class="k">end</span><span class="ss">()</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">vec</span>.<span class="nv">erase</span><span class="ss">(</span><span class="w"> </span><span class="nv">unique</span><span class="ss">(</span><span class="w"> </span><span class="nv">vec</span>.<span class="nv">begin</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">vec</span>.<span class="k">end</span><span class="ss">()</span><span class="w"> </span><span class="ss">)</span>,<span class="w"> </span><span class="nv">vec</span>.<span class="k">end</span><span class="ss">()</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p><strong>Convert to set (manually)</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">set</span><span class="o">&lt;</span><span class="nc">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="n">unsigned</span><span class="w"> </span><span class="k">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">size</span><span class="p">();</span>
<span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="n">unsigned</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">size</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">insert</span><span class="p">(</span><span class="w"> </span><span class="n">vec</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="p">);</span>
<span class="n">vec</span><span class="p">.</span><span class="n">assign</span><span class="p">(</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><strong>Convert to set (using a constructor)</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="n">vec</span><span class="p">.</span><span class="k">assign</span><span class="p">(</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>Here's how these perform as the number of duplicates changes:</p>
<p><img alt="comparison of vector and set approaches" src="images/gGgtR.png"></p>
<p><strong>Summary</strong> : when the number of duplicates is large enough, <em>it's actually
faster to convert to a set and then dump the data back into a vector</em>.</p>
<p>And for some reason, doing the set conversion manually seems to be faster than
using the set constructor -- at least on the toy random data that I used.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I redid Nate Kohl's profiling and got different results. For my test case,
directly sorting the vector is always more efficient than using a set. I added
a new more efficient method, using an <code>unordered_set</code>.</p>
<p>Keep in mind that the <code>unordered_set</code> method only works if you have a good
hash function for the type you need uniqued and sorted. For ints, this is
easy! (The standard library provides a default hash which is simply the
identity function.) Also, don't forget to sort at the end since unordered_set
is, well, unordered :)</p>
<p>I did some digging inside the <code>set</code> and <code>unordered_set</code> implementation and
discovered that the constructor actually construct a new node for every
element, before checking its value to determine if it should actually be
inserted (in Visual Studio implementation, at least).</p>
<p>Here are the 5 methods:</p>
<p><strong>f1: Just using<code>vector</code>, <code>sort</code> + <code>unique</code></strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">sort</span><span class="ss">(</span><span class="w"> </span><span class="nv">vec</span>.<span class="nv">begin</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">vec</span>.<span class="k">end</span><span class="ss">()</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">vec</span>.<span class="nv">erase</span><span class="ss">(</span><span class="w"> </span><span class="nv">unique</span><span class="ss">(</span><span class="w"> </span><span class="nv">vec</span>.<span class="nv">begin</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">vec</span>.<span class="k">end</span><span class="ss">()</span><span class="w"> </span><span class="ss">)</span>,<span class="w"> </span><span class="nv">vec</span>.<span class="k">end</span><span class="ss">()</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p><strong>f2: Convert to<code>set</code> (using a constructor)</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="n">vec</span><span class="p">.</span><span class="k">assign</span><span class="p">(</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><strong>f3: Convert to<code>set</code> (manually)</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">vec</span><span class="p">)</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="n">vec</span><span class="p">.</span><span class="k">assign</span><span class="p">(</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><strong>f4: Convert to<code>unordered_set</code> (using a constructor)</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">(</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="n">vec</span><span class="p">.</span><span class="k">assign</span><span class="p">(</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="n">sort</span><span class="p">(</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><strong>f5: Convert to<code>unordered_set</code> (manually)</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">vec</span><span class="p">)</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="n">vec</span><span class="p">.</span><span class="k">assign</span><span class="p">(</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="n">sort</span><span class="p">(</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="k">end</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>I did the test with a vector of 100,000,000 ints chosen randomly in ranges
[1,10], [1,1000], and [1,100000]</p>
<p>The results (in seconds, smaller is better):</p>
<div class="code"><pre class="code literal-block">range         f1       f2       f3       f4      f5
[1,10]      1.6821   7.6804   2.8232   6.2634  0.7980
[1,1000]    5.0773  13.3658   8.2235   7.6884  1.9861
[1,100000]  8.7955  32.1148  26.5485  13.3278  3.9822
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-entropy-and-information-gain/" class="u-url">What is "entropy and information gain"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-entropy-and-information-gain/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:12:52+08:00" itemprop="datePublished" title="2023-03-05 11:12">2023-03-05 11:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am reading this book (NLTK) and it is confusing. <strong>Entropy</strong> is defined as:</p>
<blockquote>
<p>Entropy is the sum of the probability of each label times the log
probability of that same label</p>
</blockquote>
<p>How can I apply <em>entropy</em> and <em>maximum entropy</em> in terms of text mining? Can
someone give me a easy, simple example (visual)?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I assume entropy was mentioned in the context of building <strong>decision trees</strong>.</p>
<p>To illustrate, imagine the task of learning to classify first-names into
male/female groups. That is given a list of names each labeled with either <code>m</code>
or <code>f</code>, we want to learn a model that fits the data and can be used to predict
the gender of a new unseen first-name.</p>
<div class="code"><pre class="code literal-block">name       gender
-----------------        Now we want to predict 
Ashley        f              the gender of "Amro" (my name)
Brian         m
Caroline      f
David         m
</pre></div>

<p>First step is deciding what <strong>features</strong> of the data are relevant to the
target class we want to predict. Some example features include: first/last
letter, length, number of vowels, does it end with a vowel, etc.. So after
feature extraction, our data looks like:</p>
<div class="code"><pre class="code literal-block"># name    ends-vowel  num-vowels   length   gender
# ------------------------------------------------
Ashley        1         3           6        f
Brian         0         2           5        m
Caroline      1         4           8        f
David         0         2           5        m
</pre></div>

<p>The goal is to build a decision tree. An example of a tree would be:</p>
<div class="code"><pre class="code literal-block">length&lt;7
|   num-vowels&lt;3: male
|   num-vowels&gt;=3
|   |   ends-vowel=1: female
|   |   ends-vowel=0: male
length&gt;=7
|   length=5: male
</pre></div>

<p>basically each node represent a test performed on a single attribute, and we
go left or right depending on the result of the test. We keep traversing the
tree until we reach a leaf node which contains the class prediction (<code>m</code> or
<code>f</code>)</p>
<p>So if we run the name <em>Amro</em> down this tree, we start by testing " <em>is the
length &lt;7?</em>" and the answer is <em>yes</em> , so we go down that branch. Following
the branch, the next test " <em>is the number of vowels &lt;3?</em>" again evaluates to
<em>true</em>. This leads to a leaf node labeled <code>m</code>, and thus the prediction is
<em>male</em> (which I happen to be, so the tree predicted the outcome correctly).</p>
<p>The decision tree is built in a top-down fashion, but the question is how do
you choose which attribute to split at each node? The answer is find the
feature that best splits the target class into the purest possible children
nodes (ie: nodes that don't contain a mix of both male and female, rather pure
nodes with only one class).</p>
<p>This measure of <em>purity</em> is called the <strong>information</strong>. It represents the
expected amount of information that would be needed to specify whether a new
instance (first-name) should be classified male or female, given the example
that reached the node. We calculate it based on the number of male and female
classes at the node.</p>
<p><strong>Entropy</strong> on the other hand is a measure of <em>impurity</em> (the opposite). It is
defined for a binary class with values <code>a</code>/<code>b</code> as:</p>
<div class="code"><pre class="code literal-block">Entropy = - p(a)*log(p(a)) - p(b)*log(p(b))
</pre></div>

<p>This binary entropy function is depicted in the figure below (random variable
can take one of two values). It reaches its maximum when the probability is
<code>p=1/2</code>, meaning that <code>p(X=a)=0.5</code> or similarly<code>p(X=b)=0.5</code> having a 50%/50%
chance of being either <code>a</code> or <code>b</code> (uncertainty is at a maximum). The entropy
function is at zero minimum when probability is <code>p=1</code> or <code>p=0</code> with complete
certainty (<code>p(X=a)=1</code> or <code>p(X=a)=0</code> respectively, latter implies <code>p(X=b)=1</code>).</p>
<p><img alt="https://en.wikipedia.org/wiki/File:Binary_entropy_plot.svg" src="images/OUgcx.png"></p>
<p>Of course the definition of entropy can be generalized for a discrete random
variable X with N outcomes (not just two):</p>
<p><img alt="entropy" src="images/vIFD7.png"></p>
<p><em>(the<code>log</code> in the formula is usually taken as the logarithm to the base 2)</em></p>
<hr>
<p>Back to our task of name classification, lets look at an example. Imagine at
some point during the process of constructing the tree, we were considering
the following split:</p>
<div class="code"><pre class="code literal-block">     ends-vowel
      [9m,5f]          &lt;--- the [..,..] notation represents the class
    /          \            distribution of instances that reached a node
   =1          =0
 -------     -------
 [3m,4f]     [6m,1f]
</pre></div>

<p>As you can see, before the split we had 9 males and 5 females, i.e.
<code>P(m)=9/14</code> and <code>P(f)=5/14</code>. According to the definition of entropy:</p>
<div class="code"><pre class="code literal-block">Entropy_before = - (5/14)*log2(5/14) - (9/14)*log2(9/14) = 0.9403
</pre></div>

<p>Next we compare it with the entropy computed after considering the split by
looking at two child branches. In the left branch of <code>ends-vowel=1</code>, we have:</p>
<div class="code"><pre class="code literal-block">Entropy_left = - (3/7)*log2(3/7) - (4/7)*log2(4/7) = 0.9852
</pre></div>

<p>and the right branch of <code>ends-vowel=0</code>, we have:</p>
<div class="code"><pre class="code literal-block">Entropy_right = - (6/7)*log2(6/7) - (1/7)*log2(1/7) = 0.5917
</pre></div>

<p>We combine the left/right entropies using the number of instances down each
branch as weight factor (7 instances went left, and 7 instances went right),
and get the final entropy after the split:</p>
<div class="code"><pre class="code literal-block">Entropy_after = 7/14*Entropy_left + 7/14*Entropy_right = 0.7885
</pre></div>

<p>Now by comparing the entropy before and after the split, we obtain a measure
of <strong>information gain</strong> , or how much information we gained by doing the split
using that particular feature:</p>
<div class="code"><pre class="code literal-block">Information_Gain = Entropy_before - Entropy_after = 0.1518
</pre></div>

<p><em>You can interpret the above calculation as following: by doing the split with
the<code>end-vowels</code> feature, we were able to reduce uncertainty in the sub-tree
prediction outcome by a small amount of 0.1518 (measured in bits as units of
information).</em></p>
<p>At each node of the tree, this calculation is performed for every feature, and
the feature with the <em>largest information gain</em> is chosen for the split in a
greedy manner (thus favoring features that produce <em>pure</em> splits with low
uncertainty/entropy). This process is applied recursively from the root-node
down, and stops when a leaf node contains instances all having the same class
(no need to split it further).</p>
<p>Note that I skipped over some details which are beyond the scope of this post,
including how to handle numeric features, missing values, overfitting and
pruning trees, etc..</p>
<p><br></p>
<h3>Suggest</h3>
<p>To begin with, it would be best to understand <code>the measure of information</code>.</p>
<h2>How do we <code>measure</code> the information?</h2>
<p>When something unlikely happens, we say it's a big news. Also, when we say
something predictable, it's not really interesting. So to quantify this
<code>interesting-ness</code>, the function should satisfy</p>
<ul>
<li>if the probability of the event is 1 (predictable), then the function gives 0</li>
<li>if the probability of the event is close to 0, then the function should give high number</li>
<li>if probability 0.5 events happens it give <code>one bit</code> of information.</li>
</ul>
<p>One natural measure that satisfy the constraints is</p>
<div class="code"><pre class="code literal-block">I(X) = -log_2(p)
</pre></div>

<p>where <em>p</em> is the probability of the event <code>X</code>. And the unit is in <code>bit</code>, the
same bit computer uses. 0 or 1.</p>
<h3>Example 1</h3>
<p>Fair coin flip :</p>
<p>How much information can we get from one coin flip?</p>
<p>Answer : <code>-log(p) = -log(1/2) = 1 (bit)</code></p>
<h3>Example 2</h3>
<p>If a meteor strikes the Earth tomorrow, <code>p=2^{-22}</code> then we can get 22 bits of
information.</p>
<p>If the Sun rises tomorrow, <code>p ~ 1</code> then it is 0 bit of information.</p>
<h2>Entropy</h2>
<p>So if we take expectation on the <code>interesting-ness</code> of an event <code>Y</code>, then it
is the entropy. i.e. entropy is an expected value of the interesting-ness of
an event.</p>
<div class="code"><pre class="code literal-block">H(Y) = E[ I(Y)]
</pre></div>

<p>More formally, the entropy is the expected number of bits of an event.</p>
<h3>Example</h3>
<p>Y = 1 : an event X occurs with probability p</p>
<p>Y = 0 : an event X does not occur with probability 1-p</p>
<div class="code"><pre class="code literal-block">H(Y) = E[I(Y)] = p I(Y==1) + (1-p) I(Y==0) 
     = - p log p - (1-p) log (1-p)
</pre></div>

<p>Log base 2 for all log.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2699.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2697.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
