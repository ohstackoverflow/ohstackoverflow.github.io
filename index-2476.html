<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2476) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2476.html">
<link rel="prev" href="index-2477.html" type="text/html">
<link rel="next" href="index-2475.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/facebook-graph-api-v2-0-me-friends-returns-empty-or-only-friends-who-also-use-my-application/" class="u-url">Facebook Graph API v2.0+ - /me/friends returns empty, or only friends who also use my application</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/facebook-graph-api-v2-0-me-friends-returns-empty-or-only-friends-who-also-use-my-application/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T18:57:03+08:00" itemprop="datePublished" title="2023-03-04 18:57">2023-03-04 18:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to get my friend name and ids with Graph API v2.0, but data
returns empty:</p>
<div class="code"><pre class="code literal-block">{
  "data": [
  ]
}
</pre></div>

<p>When I was using v1.0, everything was OK with the following request:</p>
<div class="code"><pre class="code literal-block"><span class="n">FBRequest</span><span class="o">*</span><span class="w"> </span><span class="n">friendsRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">FBRequest</span><span class="w"> </span><span class="n">requestForMyFriends</span><span class="p">];</span>
<span class="p">[</span><span class="n">friendsRequest</span><span class="w"> </span><span class="n">startWithCompletionHandler</span><span class="o">:</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="n">FBRequestConnection</span><span class="w"> </span><span class="o">*</span><span class="n">connection</span><span class="p">,</span>
<span class="w">                                              </span><span class="bp">NSDictionary</span><span class="o">*</span><span class="w"> </span><span class="n">result</span><span class="p">,</span>
<span class="w">                                              </span><span class="bp">NSError</span><span class="w"> </span><span class="o">*</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="bp">NSArray</span><span class="o">*</span><span class="w"> </span><span class="n">friends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">result</span><span class="w"> </span><span class="n">objectForKey</span><span class="o">:</span><span class="s">@"data"</span><span class="p">];</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"Found: %i friends"</span><span class="p">,</span><span class="w"> </span><span class="n">friends</span><span class="p">.</span><span class="n">count</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="bp">NSDictionary</span><span class="o">&lt;</span><span class="n">FBGraphUser</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">friend</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">friends</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"I have a friend named %@ with id %@"</span><span class="p">,</span><span class="w"> </span><span class="n">friend</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">friend</span><span class="p">.</span><span class="kt">id</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}];</span>
</pre></div>

<p>But now I cannot get friends!</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In v2.0 of the Graph API, calling <code>/me/friends</code> returns the person's friends
who also use the app.</p>
<p>In addition, in v2.0, you must request the <code>user_friends</code> permission from each
user. <code>user_friends</code> is no longer included by default in every login. Each
user must grant the <code>user_friends</code> permission in order to appear in the
response to <code>/me/friends</code>. See the Facebook upgrade guide for more detailed
information, or review the summary below.</p>
<p>If you want to access a list of non-app-using friends, there are two options:</p>
<ol>
<li>
<p><strong>If you want to let your people tag their friends</strong> in stories that they publish to Facebook using your App, you can use the <code>/me/taggable_friends</code> API. Use of this endpoint requires review by Facebook and should only be used for the case where you're rendering a list of friends in order to let the user tag them in a post.</p>
</li>
<li>
<p><strong>If your App is a Game AND your Game supports Facebook Canvas</strong> , you can use the <code>/me/invitable_friends</code> endpoint in order to render a custom invite dialog, then pass the tokens returned by this API to the standard Requests Dialog.</p>
</li>
</ol>
<p>In other cases, apps are no longer able to retrieve the full list of a user's
friends (only those friends who have specifically authorized your app using
the <code>user_friends</code> permission). This has been confirmed by Facebook as 'by
design'.</p>
<p>For apps wanting allow people to invite friends to use an app, you can still
use the Send Dialog on Web or the new Message Dialog on iOS and Android.</p>
<p>UPDATE: Facebook have published an FAQ on these changes here:
https://developers.facebook.com/docs/apps/faq which explain all the options
available to developers in order to invite friends etc.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Although <em>Simon Cross's</em> answer is accepted and correct, I thought I would
beef it up a bit with an example (Android) of what needs to be done. I'll keep
it as general as I can and focus on just the question. Personally I wound up
storing things in a database so the loading was smooth, but that requires a
CursorAdapter and ContentProvider which is a bit out of scope here.</p>
<p>I came here myself and then thought, now what?!</p>
<p><strong>The Issue</strong></p>
<p>Just like <em>user3594351</em> , I was noticing the friend data was blank. I found
this out by using the FriendPickerFragment. What worked three months ago, no
longer works. Even Facebook's examples broke. So my issue was 'How Do I create
FriendPickerFragment by hand?</p>
<p><strong>What Did Not Work</strong></p>
<p>Option #1 from <em>Simon Cross</em> was not strong enough to invite friends to the
app. <em>Simon Cross</em> also recommended the Requests Dialog, but that would only
allow five requests at a time. The requests dialog also showed the same
friends during any given Facebook logged in session. Not useful.</p>
<p><strong>What Worked (Summary)</strong></p>
<p>Option #2 with some hard work. You must make sure you fulfill Facebook's new
rules: 1.) You're a game 2.) You have a Canvas app (Web Presence) 3.) Your app
is registered with Facebook. It is all done on the Facebook developer website
under <em>Settings</em>.</p>
<p>To emulate the friend picker by hand inside my app I did the following:</p>
<ol>
<li>Create a tab activity that shows two fragments. Each fragment shows a list. One fragment for available friend ( <em>/me/friends</em> ) and another for invitable friends ( <em>/me/invitable_friends</em> ). Use the same fragment code to render both tabs.</li>
<li>Create an AsyncTask that will get the friend data from Facebook. Once that data is loaded, toss it to the adapter which will render the values to the screen.</li>
</ol>
<p><strong>Details</strong></p>
<p>The AsynchTask</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">DownloadFacebookFriendsTask</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">AsyncTask</span><span class="o">&lt;</span><span class="n">FacebookFriend</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span><span class="w"> </span><span class="n">Boolean</span><span class="p">,</span><span class="w"> </span><span class="n">Boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">TAG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DownloadFacebookFriendsTask</span><span class="o">.</span><span class="k">class</span><span class="o">.</span><span class="n">getSimpleName</span><span class="p">();</span>
<span class="w">    </span><span class="n">GraphObject</span><span class="w"> </span><span class="n">graphObject</span><span class="p">;</span>
<span class="w">    </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">FacebookFriend</span><span class="o">&gt;</span><span class="w"> </span><span class="n">myList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">FacebookFriend</span><span class="o">&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">protected</span><span class="w"> </span><span class="n">Boolean</span><span class="w"> </span><span class="n">doInBackground</span><span class="p">(</span><span class="n">FacebookFriend</span><span class="o">.</span><span class="n">Type</span><span class="o">...</span><span class="w"> </span><span class="n">pickType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Determine</span><span class="w"> </span><span class="n">Type</span>
<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">facebookRequest</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pickType</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">FacebookFriend</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">AVAILABLE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">facebookRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/me/friends"</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">facebookRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/me/invitable_friends"</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Launch</span><span class="w"> </span><span class="n">Facebook</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">WAIT</span><span class="o">.</span>
<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="n">new</span><span class="w"> </span><span class="n">Request</span><span class="p">(</span>
<span class="w">            </span><span class="n">Session</span><span class="o">.</span><span class="n">getActiveSession</span><span class="p">(),</span>
<span class="w">            </span><span class="n">facebookRequest</span><span class="p">,</span>
<span class="w">            </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">HttpMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span>
<span class="w">            </span><span class="n">new</span><span class="w"> </span><span class="n">Request</span><span class="o">.</span><span class="n">Callback</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onCompleted</span><span class="p">(</span><span class="n">Response</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">FacebookRequestError</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">getError</span><span class="p">();</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">Log</span><span class="o">.</span><span class="n">e</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">.</span><span class="n">toString</span><span class="p">());</span>
<span class="w">                    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">graphObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">getGraphObject</span><span class="p">();</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">)</span><span class="o">.</span><span class="n">executeAndWait</span><span class="p">();</span>

<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Process</span><span class="w"> </span><span class="n">Facebook</span><span class="w"> </span><span class="n">response</span>
<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">graphObject</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">numberOfRecords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="n">JSONArray</span><span class="w"> </span><span class="n">dataArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">JSONArray</span><span class="p">)</span><span class="w"> </span><span class="n">graphObject</span><span class="o">.</span><span class="n">getProperty</span><span class="p">(</span><span class="s2">"data"</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dataArray</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">Ensure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">least</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">friend</span><span class="w"> </span><span class="o">...</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">dataArray</span><span class="o">.</span><span class="n">length</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">                </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataArray</span><span class="o">.</span><span class="n">optJSONObject</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">                </span><span class="n">FacebookFriend</span><span class="w"> </span><span class="n">facebookFriend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">FacebookFriend</span><span class="p">(</span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">pickType</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">facebookFriend</span><span class="o">.</span><span class="n">isValid</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">numberOfRecords</span><span class="o">++</span><span class="p">;</span>

<span class="w">                    </span><span class="n">myList</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">facebookFriend</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">records</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">numberOfRecords</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">protected</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onProgressUpdate</span><span class="p">(</span><span class="n">Boolean</span><span class="o">...</span><span class="w"> </span><span class="n">booleans</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="n">finishes</span><span class="o">.</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">protected</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onPostExecute</span><span class="p">(</span><span class="n">Boolean</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="o">/*</span>
<span class="w">            </span><span class="n">User</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="s2">"myList"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">adapter</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">showing</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">list</span><span class="o">.</span>
<span class="w">             </span><span class="o">*/</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Log</span><span class="o">.</span><span class="n">i</span><span class="p">(</span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="s2">"Facebook Thread unable to Get/Parse friend data. Type = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">pickType</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>The FacebookFriend class I created</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">FacebookFriend</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">facebookId</span><span class="p">;</span>
<span class="w">    </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">pictureUrl</span><span class="p">;</span>
<span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">invitable</span><span class="p">;</span>
<span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">available</span><span class="p">;</span>
<span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">isValid</span><span class="p">;</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="p">{</span><span class="n">AVAILABLE</span><span class="p">,</span><span class="w"> </span><span class="n">INVITABLE</span><span class="p">};</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">FacebookFriend</span><span class="p">(</span><span class="n">JSONObject</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="o">//</span><span class="n">Parse</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Facebook</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">object</span><span class="o">.</span>
<span class="w">        </span><span class="o">//</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Type</span><span class="o">.</span><span class="n">INVITABLE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="o">//</span><span class="n">parse</span><span class="w"> </span><span class="o">/</span><span class="n">me</span><span class="o">/</span><span class="n">invitable_friend</span>
<span class="w">                </span><span class="n">this</span><span class="o">.</span><span class="n">facebookId</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">jsonObject</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
<span class="w">                </span><span class="n">this</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonObject</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="s2">"name"</span><span class="p">);</span>

<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">Handle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">picture</span><span class="w"> </span><span class="n">data</span><span class="o">.</span>
<span class="w">                </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">pictureJsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonObject</span><span class="o">.</span><span class="n">getJSONObject</span><span class="p">(</span><span class="s2">"picture"</span><span class="p">)</span><span class="o">.</span><span class="n">getJSONObject</span><span class="p">(</span><span class="s2">"data"</span><span class="p">);</span>
<span class="w">                </span><span class="n">boolean</span><span class="w"> </span><span class="n">isSilhouette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pictureJsonObject</span><span class="o">.</span><span class="n">getBoolean</span><span class="p">(</span><span class="s2">"is_silhouette"</span><span class="p">);</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">isSilhouette</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">this</span><span class="o">.</span><span class="n">pictureUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pictureJsonObject</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="s2">"url"</span><span class="p">);</span>

<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">this</span><span class="o">.</span><span class="n">pictureUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="n">this</span><span class="o">.</span><span class="n">invitable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">Parse</span><span class="w"> </span><span class="o">/</span><span class="n">me</span><span class="o">/</span><span class="n">friends</span>
<span class="w">                </span><span class="n">this</span><span class="o">.</span><span class="n">facebookId</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">jsonObject</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
<span class="w">                </span><span class="n">this</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsonObject</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="s2">"name"</span><span class="p">);</span>
<span class="w">                </span><span class="n">this</span><span class="o">.</span><span class="n">available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">                </span><span class="n">this</span><span class="o">.</span><span class="n">pictureUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="n">isValid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JSONException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Log</span><span class="o">.</span><span class="n">w</span><span class="p">(</span><span class="s2">"#"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Warnings - unable to process Facebook JSON: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">getLocalizedMessage</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-difference-between-truncate-and-delete-in-sql/" class="u-url">What's the difference between TRUNCATE and DELETE in SQL</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-difference-between-truncate-and-delete-in-sql/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T18:55:31+08:00" itemprop="datePublished" title="2023-03-04 18:55">2023-03-04 18:55</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What's the difference between <code>TRUNCATE</code> and <code>DELETE</code> in SQL?</p>
<p>If your answer is platform specific, please indicate that.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's a list of differences. I've highlighted Oracle-specific features, and
hopefully the community can add in other vendors' specific difference also.
Differences that are common to most vendors can go directly below the
headings, with differences highlighted below.</p>
<hr>
<h2>General Overview</h2>
<p>If you want to quickly delete all of the rows from a table, and you're really
sure that you want to do it, and you do not have foreign keys against the
tables, then a TRUNCATE is probably going to be faster than a DELETE.</p>
<p>Various system-specific issues have to be considered, as detailed below.</p>
<hr>
<h2>Statement type</h2>
<p>Delete is DML, Truncate is DDL (What is DDL and DML?)</p>
<hr>
<h2>Commit and Rollback</h2>
<p>Variable by vendor</p>
<p><strong>SQL*Server</strong></p>
<p>Truncate can be rolled back.</p>
<p><strong>PostgreSQL</strong></p>
<p>Truncate can be rolled back.</p>
<p><strong>Oracle</strong></p>
<p>Because a TRUNCATE is DDL it involves two commits, one before and one after
the statement execution. Truncate can therefore not be rolled back, and a
failure in the truncate process will have issued a commit anyway.</p>
<p>However, see Flashback below.</p>
<hr>
<h2>Space reclamation</h2>
<p>Delete does not recover space, Truncate recovers space</p>
<p><strong>Oracle</strong></p>
<p>If you use the REUSE STORAGE clause then the data segments are not de-
allocated, which can be marginally more efficient if the table is to be
reloaded with data. The high water mark is reset.</p>
<hr>
<h2>Row scope</h2>
<p>Delete can be used to remove all rows or only a subset of rows. Truncate
removes all rows.</p>
<p><strong>Oracle</strong></p>
<p>When a table is partitioned, the individual partitions can be truncated in
isolation, thus a partial removal of all the table's data is possible.</p>
<hr>
<h2>Object types</h2>
<p>Delete can be applied to tables and tables inside a cluster. Truncate applies
only to tables or the entire cluster. (May be Oracle specific)</p>
<hr>
<h2>Data Object Identity</h2>
<p><strong>Oracle</strong></p>
<p>Delete does not affect the data object id, but truncate assigns a new data
object id <em>unless</em> there has never been an insert against the table since its
creation Even a single insert that is rolled back will cause a new data object
id to be assigned upon truncation.</p>
<hr>
<h2>Flashback (Oracle)</h2>
<p>Flashback works across deletes, but a truncate prevents flashback to states
prior to the operation.</p>
<p>However, from 11gR2 the FLASHBACK ARCHIVE feature allows this, except in
Express Edition</p>
<p>Use of FLASHBACK in Oracle
http://docs.oracle.com/cd/E11882_01/appdev.112/e41502/adfns_flashback.htm#ADFNS638</p>
<hr>
<h2>Privileges</h2>
<p>Variable</p>
<p><strong>Oracle</strong></p>
<p>Delete can be granted on a table to another user or role, but truncate cannot
be without using a DROP ANY TABLE grant.</p>
<hr>
<h2>Redo/Undo</h2>
<p>Delete generates a small amount of redo and a large amount of undo. Truncate
generates a negligible amount of each.</p>
<hr>
<h2>Indexes</h2>
<p><strong>Oracle</strong></p>
<p>A truncate operation renders unusable indexes usable again. Delete does not.</p>
<hr>
<h2>Foreign Keys</h2>
<p>A truncate cannot be applied when an enabled foreign key references the table.
Treatment with delete depends on the configuration of the foreign keys.</p>
<hr>
<h2>Table Locking</h2>
<p><strong>Oracle</strong></p>
<p>Truncate requires an exclusive table lock, delete requires a shared table
lock. Hence disabling table locks is a way of preventing truncate operations
on a table.</p>
<hr>
<h2>Triggers</h2>
<p>DML triggers do not fire on a truncate.</p>
<p><strong>Oracle</strong></p>
<p>DDL triggers are available.</p>
<hr>
<h2>Remote Execution</h2>
<p><strong>Oracle</strong></p>
<p>Truncate cannot be issued over a database link.</p>
<hr>
<h2>Identity Columns</h2>
<p><strong>SQL*Server</strong></p>
<p>Truncate resets the sequence for IDENTITY column types, delete does not.</p>
<hr>
<h2>Result set</h2>
<p>In most implementations, a <code>DELETE</code> statement can return to the client the
rows that were deleted.</p>
<p>e.g. in an Oracle PL/SQL subprogram you could:</p>
<div class="code"><pre class="code literal-block">DELETE FROM employees_temp
WHERE       employee_id = 299 
RETURNING   first_name,
            last_name
INTO        emp_first_name,
            emp_last_name;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The difference between truncate and delete is listed below:</p>
<div class="code"><pre class="code literal-block"><span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">|                Truncate                |                    Delete                    |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">| We can't Rollback after performing     | We can Rollback after delete</span><span class="nt">.</span><span class="c">                |</span>
<span class="c">| Truncate</span><span class="nt">.</span><span class="c">                              |                                              |</span>
<span class="c">|                                        |                                              |</span>
<span class="c">| Example:                               | Example:                                     |</span>
<span class="c">| BEGIN TRAN                             | BEGIN TRAN                                   |</span>
<span class="c">| TRUNCATE TABLE tranTest                | DELETE FROM tranTest                         |</span>
<span class="c">| SELECT * FROM tranTest                 | SELECT * FROM tranTest                       |</span>
<span class="c">| ROLLBACK                               | ROLLBACK                                     |</span>
<span class="c">| SELECT * FROM tranTest                 | SELECT * FROM tranTest                       |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">| Truncate reset identity of table</span><span class="nt">.</span><span class="c">      | Delete does not reset identity of table</span><span class="nt">.</span><span class="c">     |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">| It locks the entire table</span><span class="nt">.</span><span class="c">             | It locks the table row</span><span class="nt">.</span><span class="c">                      |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">| Its DDL(Data Definition Language)      | Its DML(Data Manipulation Language)          |</span>
<span class="c">| command</span><span class="nt">.</span><span class="c">                               | command</span><span class="nt">.</span><span class="c">                                     |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">| We can't use WHERE clause with it</span><span class="nt">.</span><span class="c">     | We can use WHERE to filter data to delete</span><span class="nt">.</span><span class="c">   |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">| Trigger is not fired while truncate</span><span class="nt">.</span><span class="c">   | Trigger is fired</span><span class="nt">.</span><span class="c">                            |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
<span class="c">| Syntax :                               | Syntax :                                     |</span>
<span class="c">| 1) TRUNCATE TABLE table_name           | 1) DELETE FROM table_name                    |</span>
<span class="c">|                                        | 2) DELETE FROM table_name WHERE              |</span>
<span class="c">|                                        |    example_column_id IN (1</span><span class="nt">,</span><span class="c">2</span><span class="nt">,</span><span class="c">3)              |</span>
<span class="nb">+----------------------------------------+----------------------------------------------+</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/expanding-a-parent-div-to-the-height-of-its-children/" class="u-url">Expanding a parent &lt;div&gt; to the height of its children</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/expanding-a-parent-div-to-the-height-of-its-children/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T18:53:56+08:00" itemprop="datePublished" title="2023-03-04 18:53">2023-03-04 18:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a page structure similar to this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;body&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"parent"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"childRightCol"</span><span class="nt">&gt;</span>
<span class="w">      </span>/*Content*/
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"childLeftCol"</span><span class="nt">&gt;</span>
<span class="w">      </span>/*Content*/
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>

<p>I would like for the parent <code>div</code> to expand in <code>height</code> when the inner <code>div</code>'s
<code>height</code> increases.</p>
<p><strong>Edit:</strong><br>
One problem is that if the <code>width</code> of the child content expands past the
<code>width</code> of the browser window, my current CSS puts a horizontal scrollbar on
the parent <code>div</code>. I would like the scrollbar to be at the page level.
Currently my parent div is set to <code>overflow: auto;</code></p>
<p>Can you please help me with the CSS for this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try this for the parent, it worked for me.</p>
<div class="code"><pre class="code literal-block"><span class="n">overflow</span><span class="o">:</span><span class="n">auto</span><span class="o">;</span>
</pre></div>

<p><strong>UPDATE:</strong></p>
<p>One more solution that worked:</p>
<p><strong>Parent</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="n">display</span><span class="o">:</span><span class="w"> </span><span class="n">table</span><span class="o">;</span>
</pre></div>

<p><strong>Child</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="n">display</span><span class="o">:</span><span class="w"> </span><span class="n">table</span><span class="o">-</span><span class="n">row</span><span class="o">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Try to give <code>max-content</code>for parent's height.</p>
<div class="code"><pre class="code literal-block"><span class="na">.parent</span><span class="p">{</span>
<span class="w">  </span><span class="nl">height:</span><span class="w"> </span><span class="nf">max-content</span><span class="c1">;</span>
<span class="err">}</span>
</pre></div>

<p>https://jsfiddle.net/FreeS/so4L83wu/5/</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2477.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2475.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
