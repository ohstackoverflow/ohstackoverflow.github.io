<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2324) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2324.html">
<link rel="prev" href="index-2325.html" type="text/html">
<link rel="next" href="index-2323.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-purpose-of-git-mv/" class="u-url">What's the purpose of git-mv?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-purpose-of-git-mv/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T07:42:10+08:00" itemprop="datePublished" title="2023-03-04 07:42">2023-03-04 07:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>From what I understand, Git doesn't really need to track <em>file</em>
rename/move/copy operations, so what's the real purpose of <code>git mv</code>? The man
page isn't particularly descriptive...</p>
<p>Is it obsolete? Is it an internal command, not meant to be used by regular
users?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">git mv oldname newname
</pre></div>

<p>is just shorthand for:</p>
<div class="code"><pre class="code literal-block">mv oldname newname
git add newname
git rm oldname
</pre></div>

<p>i.e. it updates the index for both old and new paths automatically.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From the official GitFaq:</p>
<blockquote>
<p>Git has a rename command <code>git mv</code>, but that is just a convenience. The
effect is indistinguishable from removing the file and adding another with
different name and the same content</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-database-does-google-use/" class="u-url">What database does Google use?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-database-does-google-use/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T07:40:50+08:00" itemprop="datePublished" title="2023-03-04 07:40">2023-03-04 07:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is it Oracle or MySQL or something they have built themselves?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Bigtable</h3>
<p>A Distributed Storage System for Structured Data</p>
<blockquote>
<p>Bigtable is a distributed storage system (built by Google) for managing
structured data that is designed to scale to a very large size: petabytes of
data across thousands of commodity servers.</p>
<p>Many projects at Google store data in Bigtable, including web indexing,
Google Earth, and Google Finance. These applications place very different
demands on Bigtable, both in terms of data size (from URLs to web pages to
satellite imagery) and latency requirements (from backend bulk processing to
real-time data serving).</p>
<p>Despite these varied demands, Bigtable has successfully provided a flexible,
high-performance solution for all of these Google products.</p>
</blockquote>
<p><strong>Some features</strong></p>
<ul>
<li>fast and extremely large-scale DBMS</li>
<li>a sparse, distributed multi-dimensional sorted map, sharing characteristics of both row-oriented and column-oriented databases.</li>
<li>designed to scale into the petabyte range</li>
<li>it works across hundreds or thousands of machines</li>
<li>it is easy to add more machines to the system and automatically start taking advantage of those resources without any reconfiguration</li>
<li>each table has multiple dimensions (one of which is a field for time, allowing versioning)</li>
<li>tables are optimized for GFS (Google File System) by being split into multiple tablets - segments of the table as split along a row chosen such that the tablet will be ~200 megabytes in size.</li>
</ul>
<p><strong>Architecture</strong></p>
<p>BigTable is not a relational database. It does not support joins nor does it
support rich SQL-like queries. Each table is a multidimensional sparse map.
Tables consist of rows and columns, and each cell has a time stamp. There can
be multiple versions of a cell with different time stamps. The time stamp
allows for operations such as "select 'n' versions of this Web page" or
"delete cells that are older than a specific date/time."</p>
<p>In order to manage the huge tables, Bigtable splits tables at row boundaries
and saves them as tablets. A tablet is around 200 MB, and each machine saves
about 100 tablets. This setup allows tablets from a single table to be spread
among many servers. It also allows for fine-grained load balancing. If one
table is receiving many queries, it can shed other tablets or move the busy
table to another machine that is not so busy. Also, if a machine goes down, a
tablet may be spread across many other servers so that the performance impact
on any given machine is minimal.</p>
<p>Tables are stored as immutable SSTables and a tail of logs (one log per
machine). When a machine runs out of system memory, it compresses some tablets
using Google proprietary compression techniques (BMDiff and Zippy). Minor
compactions involve only a few tablets, while major compactions involve the
whole table system and recover hard-disk space.</p>
<p>The locations of Bigtable tablets are stored in cells. The lookup of any
particular tablet is handled by a three-tiered system. The clients get a point
to a META0 table, of which there is only one. The META0 table keeps track of
many META1 tablets that contain the locations of the tablets being looked up.
Both META0 and META1 make heavy use of pre-fetching and caching to minimize
bottlenecks in the system.</p>
<p><strong>Implementation</strong></p>
<p>BigTable is built on <strong>Google File System</strong> (GFS), which is used as a backing
store for log and data files. GFS provides reliable storage for SSTables, a
Google-proprietary file format used to persist table data.</p>
<p>Another service that BigTable makes heavy use of is <strong>Chubby</strong> , a highly-
available, reliable distributed lock service. Chubby allows clients to take a
lock, possibly associating it with some metadata, which it can renew by
sending keep alive messages back to Chubby. The locks are stored in a
filesystem-like hierarchical naming structure.</p>
<p>There are three primary <strong>server types</strong> of interest in the Bigtable system:</p>
<ol>
<li>Master servers: assign tablets to tablet servers, keeps track of where tablets are located and redistributes tasks as needed. </li>
<li>Tablet servers: handle read/write requests for tablets and split tablets when they exceed size limits (usually 100MB - 200MB). If a tablet server fails, then a 100 tablet servers each pickup 1 new tablet and the system recovers. </li>
<li>Lock servers: instances of the Chubby distributed lock service. Lots of actions within BigTable require acquisition of locks including opening tablets for writing, ensuring that there is no more than one active Master at a time, and access control checking.</li>
</ol>
<p><strong>Example from Google's research paper:</strong></p>
<p><img alt="alt text" src="images/oN41X.png"></p>
<blockquote>
<p>A slice of an example table that stores Web pages. The row name is a
<strong>reversed URL</strong>. The contents column family contains the <strong>page contents</strong>
, and the anchor column family contains the <strong>text of any anchors</strong> that
reference the page. CNN's home page is referenced by both the Sports
Illustrated and the MY-look home pages, so the row contains columns named
<code>anchor:cnnsi.com</code> and <code>anchor:my.look.ca</code>. Each anchor cell has <strong>one
version</strong> ; the contents column has <strong>three versions</strong> , at timestamps <code>t3</code>,
<code>t5</code>, and <code>t6</code>.</p>
</blockquote>
<p><strong>API</strong></p>
<p>Typical operations to BigTable are creation and deletion of tables and column
families, writing data and deleting columns from a row. BigTable provides this
functions to application developers in an API. Transactions are supported at
the row level, but not across several row keys.</p>
<hr>
<p>Here is the link to the PDF of the research paper.</p>
<p>And here you can find a video showing Google's Jeff Dean in a lecture at the
University of Washington, discussing the Bigtable content storage system used
in Google's backend.</p>
<p><br></p>
<h3>Suggest</h3>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/content-security-policy-data-not-working-for-base64-images-in-chrome-28/" class="u-url">Content Security Policy "data" not working for base64 Images in Chrome 28</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/content-security-policy-data-not-working-for-base64-images-in-chrome-28/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T07:39:54+08:00" itemprop="datePublished" title="2023-03-04 07:39">2023-03-04 07:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In this simple example, I'm trying to set a CSP header with the meta http-
equiv header. I included a base64 image and I'm trying to make Chrome load the
image.</p>
<p>I thought the <code>data</code> keyword should do that, but somehow it's not working.</p>
<p>I just get the following error in Developer Tools:</p>
<blockquote>
<p>Refused to load the image
'data:image/png;base64,R0lGODlhDwAPAOZEAMkJCfAwMMYGBtZMTP75+euIiPFBP+hVVf3v7…nw7yk4Mjr6GLUY+joiBI2QAACABwJDCHgoKOHEoAYVBAgY8GGAxAoNGAmiwMHBCgccKDAKBAA7'
because it violates the following Content Security Policy directive: "img-
src 'self' data".</p>
</blockquote>
<p>The example code (JSFiddle is not working for this example because I cannot
set meta header there):</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="nt">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nt">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nt">meta</span><span class="w"> </span><span class="nt">http-equiv</span><span class="o">=</span><span class="s2">"Content-Security-Policy"</span><span class="w"> </span><span class="nt">content</span><span class="o">=</span><span class="s2">"</span>
<span class="s2">        default-src 'none';</span>
<span class="s2">        style-src 'self' 'unsafe-inline';</span>
<span class="s2">        img-src 'self' data;</span>
<span class="s2">        "</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">#</span><span class="nn">helloCSP</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">url</span><span class="p">(</span><span class="sx">data:image/png;base64,R0lGODlhDwAPAOZEAMkJCfAwMMYGBtZMTP75+euIiPFBP+hVVf3v7+iHh/JNTfh9dNUYGPjTvskXFfOLi/daVe96es4eHPWIiOqbi9dNRvzWwexdV9U1NeFSS94iIvuxodVGP/ZsZM8jI+ibm/alluQzMdxSSvbGstwsKu2Yid4iIfjQu/JnYO6djvajlMQEBPvLuOJdXeMxL/3jzPBSTdwqKNY2Mf3i4vU5OfbPz/3f3/zUv/zizO0tLc0NDfMzM+UlJekpKeEhId0dHdUVFdkZGdEREf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEQALAAAAAAPAA8AAAepgESCRBsLEDQQCxuDgxYdO5CROx0WgywGAQEKM0M2CpkGN0QvMDmmE0OpE6Y5KEQqPbE9D6lDD7I9IBc8vDwRtRG9PBcuPsY+B7UHxz4hP8/PGghDCBrQPyYxQdvbBUMF3NskGUDl5QwtDOblGSVC7+8JNQnw7yk4Mjr6GLUY+joiBI2QAACABwJDCHgoKOHEoAYVBAgY8GGAxAoNGAmiwMHBCgccKDAKBAA7</span><span class="p">)</span><span class="w"> </span><span class="kc">no-repeat</span><span class="p">;</span>
<span class="w">            </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nt">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nt">body</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nt">h1</span><span class="o">&gt;</span><span class="nt">CSP</span><span class="o">&lt;/</span><span class="nt">h1</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nt">div</span><span class="w"> </span><span class="nt">id</span><span class="o">=</span><span class="s2">"helloCSP"</span><span class="o">&gt;&lt;/</span><span class="nt">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nt">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nt">html</span><span class="o">&gt;</span>
</pre></div>

<p>You can also open this example here:<br>
https://dl.dropboxusercontent.com/u/638360/ps/csp.html</p>
<p><br><br></p>
<h2>Answer</h2>
<p>According to the grammar in the CSP spec, you need to specify schemes as
<code>scheme:</code>, not just <code>scheme</code>. So, you need to change the image source
directive to:</p>
<div class="code"><pre class="code literal-block">img-src 'self' data:;
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2325.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2323.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
