<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2384) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2384.html">
<link rel="prev" href="index-2385.html" type="text/html">
<link rel="next" href="index-2383.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-add-conditional-attribute-in-angular-2/" class="u-url">How to add conditional attribute in Angular 2?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-add-conditional-attribute-in-angular-2/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T12:09:26+08:00" itemprop="datePublished" title="2023-03-04 12:09">2023-03-04 12:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I conditionally add an element attribute e.g. the <code>checked</code> of a
checkbox?</p>
<p>Previous versions of Angular had <code>NgAttr</code> and I think <code>NgChecked</code> which all
seem to provide the functionality that I'm after. However, these attributes do
not appear to exist in Angular 2 and I see no other way of providing this
functionality.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>null</code> removes it:</p>
<div class="code"><pre class="code literal-block">[attr.checked]="value ? '' : null"
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">[attr.checked]="value ? 'checked' : null"
</pre></div>

<h3>Hint:</h3>
<h4>Attribute vs property</h4>
<p>When the HTML element where you add this binding does not have a property with
the name used in the binding (<code>checked</code> in this case) and also no Angular
component or directive is applied to the same element that has an <code>@Input()
checked;</code>, then <code>[xxx]="..."</code> can not be used.</p>
<p>See also What is the difference between properties and attributes in HTML?</p>
<h4>What to bind to when there is no such property</h4>
<p>Alternatives are <code>[style.xxx]="..."</code>, <code>[attr.xxx]="..."</code>, <code>[class.xxx]="..."</code>
depending on what you try to accomplish.</p>
<p>Because <code>&lt;input&gt;</code> only has a <code>checked</code> attribute, but no <code>checked</code> property
<code>[attr.checked]="..."</code> is the right way for this specific case.</p>
<h4>Attributes can only handle string values</h4>
<p>A common pitfall is also that for <code>[attr.xxx]="..."</code> bindings the value
(<code>...</code>) is <em>always</em> stringified. Only properties and <code>@Input()</code>s can receive
other value types like boolean, number, object, ...</p>
<p><em>Most</em> properties and attributes of elements are connected and have the same
name.</p>
<h4>Property-attribute connection</h4>
<p>When bound to the attribute the property also only receives the stringified
value from the attribute.<br>
When bound to the property the property receives the value bound to it
(boolean, number, object, ...) and the attribute again the stringified value.</p>
<p>Two cases where attribute and property names do not match.</p>
<ul>
<li>Error while adding "for" attribute to label in angular 2.0 template</li>
<li>
<p>https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/htmlFor (see the first sentence of the description <code>htmlFor property reflects the value of the for</code> - <code>for</code> probably didn't work because it's a keyword in C or JavaScript)</p>
</li>
<li>
<p>Why is colspan not a known native attribute in Angular 2?</p>
</li>
</ul>
<p>Angular was changed since then and knows about these special cases and handles
them so that you can bind to <code>&lt;label [for]="</code> even though no such property
exists (same for <code>colspan</code>)</p>
<p><br></p>
<h3>Suggest</h3>
<p>in angular-2 attribute syntax is</p>
<div class="code"><pre class="code literal-block">&lt;div [attr.role]="myAriaRole"&gt;
</pre></div>

<p>Binds attribute role to the result of expression myAriaRole.</p>
<p>so can use like</p>
<div class="code"><pre class="code literal-block">[attr.role]="myAriaRole ? true: null"
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-pip-install-a-package-with-min-and-max-version-range/" class="u-url">How to pip install a package with min and max version range?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-pip-install-a-package-with-min-and-max-version-range/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T12:08:09+08:00" itemprop="datePublished" title="2023-03-04 12:08">2023-03-04 12:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm wondering if there's any way to tell pip, specifically in a requirements
file, to install a package with both a minimum version (<code>pip install
package&gt;=0.2</code>) and a maximum version which should never be installed
(theoretical api: <code>pip install package&lt;0.3</code>).</p>
<p>I ask because I am using a third party library that's in active development.
I'd like my pip requirements file to specify that it should always install the
most recent minor release of the 0.5.x branch, but I don't want pip to ever
try to install any newer major versions (like 0.6.x) since the API is
different. This is important because even though the 0.6.x branch is
available, the devs are still releasing patches and bugfixes to the 0.5.x
branch, so I don't want to use a static <code>package==0.5.9</code> line in my
requirements file.</p>
<p>Is there any way to do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can do:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">"package&gt;=0.2,&lt;0.3"</span>
</pre></div>

<p>And <code>pip</code> will look for the best match, assuming the version is at least 0.2,
and less than 0.3.</p>
<p>This also applies to pip requirements files. See the full details on version
specifiers in PEP 440.</p>
<p><br></p>
<h3>Suggest</h3>
<p>you can also use:</p>
<div class="code"><pre class="code literal-block">pip install package==0.5.*
</pre></div>

<p>which is more consistent and easy to read.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-double-brace-initialization-in-java/" class="u-url">What is Double Brace initialization in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-double-brace-initialization-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T12:06:47+08:00" itemprop="datePublished" title="2023-03-04 12:06">2023-03-04 12:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is Double Brace initialization syntax (<code>{{ ... }}</code>) in Java?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Double brace initialisation creates an anonymous class derived from the
specified class (the <em>outer</em> braces), and provides an initialiser block within
that class (the <em>inner</em> braces). e.g.</p>
<div class="code"><pre class="code literal-block">new ArrayList&lt;Integer&gt;() {{
   add(1);
   add(2);
}};
</pre></div>

<p>Note that an effect of using this double brace initialisation is that you're
creating anonymous inner classes. The created class has an implicit <code>this</code>
pointer to the surrounding outer class. Whilst not normally a problem, it can
cause grief in some circumstances e.g. when serialising or garbage collecting,
and it's worth being aware of this.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Every time someone uses double brace initialisation, a kitten gets killed.</strong></p>
<p>Apart from the syntax being rather unusual and not really idiomatic (taste is
debatable, of course), you are unnecessarily creating two significant problems
in your application, which I've just recently blogged about in more detail
here.</p>
<h4>1. You're creating way too many anonymous classes</h4>
<p>Each time you use double brace initialisation a new class is made. E.g. this
example:</p>
<div class="code"><pre class="code literal-block">Map source = new HashMap(){{
    put("firstName", "John");
    put("lastName", "Smith");
    put("organizations", new HashMap(){{
        put("0", new HashMap(){{
            put("id", "1234");
        }});
        put("abc", new HashMap(){{
            put("id", "5678");
        }});
    }});
}};
</pre></div>

<p>... will produce these classes:</p>
<div class="code"><pre class="code literal-block">Test$1$1$1.class
Test$1$1$2.class
Test$1$1.class
Test$1.class
Test.class
</pre></div>

<p>That's quite a bit of overhead for your classloader - for nothing! Of course
it won't take much initialisation time if you do it once. But if you do this
20'000 times throughout your enterprise application... all that heap memory
just for a bit of "syntax sugar"?</p>
<h4>2. You're potentially creating a memory leak!</h4>
<p>If you take the above code and return that map from a method, callers of that
method might be unsuspectingly holding on to very heavy resources that cannot
be garbage collected. Consider the following example:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">ReallyHeavyObject</span><span class="w"> </span>{

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Just</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">illustrate</span>...
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">int</span>[]<span class="w"> </span><span class="nv">tonsOfValues</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">Resource</span>[]<span class="w"> </span><span class="nv">tonsOfResources</span><span class="c1">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">method</span><span class="w"> </span><span class="nv">almost</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">nothing</span>
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">Map</span><span class="w"> </span><span class="nv">quickHarmlessMethod</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">Map</span><span class="w"> </span><span class="nv">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">HashMap</span><span class="ss">()</span>{{
<span class="w">            </span><span class="nv">put</span><span class="ss">(</span><span class="s2">"firstName"</span>,<span class="w"> </span><span class="s2">"John"</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">            </span><span class="nv">put</span><span class="ss">(</span><span class="s2">"lastName"</span>,<span class="w"> </span><span class="s2">"Smith"</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">            </span><span class="nv">put</span><span class="ss">(</span><span class="s2">"organizations"</span>,<span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">HashMap</span><span class="ss">()</span>{{
<span class="w">                </span><span class="nv">put</span><span class="ss">(</span><span class="s2">"0"</span>,<span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">HashMap</span><span class="ss">()</span>{{
<span class="w">                    </span><span class="nv">put</span><span class="ss">(</span><span class="s2">"id"</span>,<span class="w"> </span><span class="s2">"1234"</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">                </span>}}<span class="ss">)</span><span class="c1">;</span>
<span class="w">                </span><span class="nv">put</span><span class="ss">(</span><span class="s2">"abc"</span>,<span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">HashMap</span><span class="ss">()</span>{{
<span class="w">                    </span><span class="nv">put</span><span class="ss">(</span><span class="s2">"id"</span>,<span class="w"> </span><span class="s2">"5678"</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">                </span>}}<span class="ss">)</span><span class="c1">;</span>
<span class="w">            </span>}}<span class="ss">)</span><span class="c1">;</span>
<span class="w">        </span>}}<span class="c1">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">source</span><span class="c1">;</span>
<span class="w">    </span>}
}
</pre></div>

<p>The returned <code>Map</code> will now contain a reference to the enclosing instance of
<code>ReallyHeavyObject</code>. You probably don't want to risk that:</p>
<p><img alt="Memory Leak Right Here" src="images/DJ8ov.png"></p>
<p>Image from http://blog.jooq.org/2014/12/08/dont-be-clever-the-double-curly-
braces-anti-pattern/</p>
<h4>3. You can pretend that Java has map literals</h4>
<p>To answer your actual question, people have been using this syntax to pretend
that Java has something like map literals, similar to the existing array
literals:</p>
<div class="code"><pre class="code literal-block"><span class="x">String[] array = { "John", "Doe" };</span>
<span class="x">Map map = new HashMap() </span><span class="cp">{{</span> <span class="nv">put</span><span class="o">(</span><span class="s2">"John"</span><span class="o">,</span> <span class="s2">"Doe"</span><span class="o">)</span><span class="err">;</span> <span class="cp">}}</span><span class="x">;</span>
</pre></div>

<p>Some people may find this syntactically stimulating.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2385.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2383.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
