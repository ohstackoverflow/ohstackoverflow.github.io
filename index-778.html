<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 778) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-778.html">
<link rel="prev" href="index-779.html" type="text/html">
<link rel="next" href="index-777.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/regex-to-replace-multiple-spaces-with-a-single-space/" class="u-url">Regex to replace multiple spaces with a single space</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/regex-to-replace-multiple-spaces-with-a-single-space/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T15:45:18+08:00" itemprop="datePublished" title="2023-02-17 15:45">2023-02-17 15:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Given a string like:</p>
<div class="code"><pre class="code literal-block">"The dog      has a long   tail, and it     is RED!"
</pre></div>

<p>What kind of jQuery or JavaScript magic can be used to keep spaces to only one
space max?</p>
<p>Goal:</p>
<div class="code"><pre class="code literal-block">"The dog has a long tail, and it is RED!"
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Given that you also want to cover tabs, newlines, etc, just replace <code>\s\s+</code>
with <code>' '</code>:</p>
<div class="code"><pre class="code literal-block">string = string.replace(/\s\s+/g, ' ');
</pre></div>

<p>If you really want to cover only spaces (and thus not tabs, newlines, etc), do
so:</p>
<div class="code"><pre class="code literal-block">string = string.replace(/  +/g, ' ');
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Since you seem to be interested in performance, I profiled these with firebug.
Here are the results I got:</p>
<div class="code"><pre class="code literal-block"><span class="n">str</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="w"> </span><span class="o">/</span><span class="w">  </span><span class="o">+/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s">' '</span><span class="w"> </span><span class="p">)</span><span class="w">       </span><span class="o">-&gt;</span><span class="w">  </span><span class="mi">380</span><span class="n">ms</span>
<span class="n">str</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="w"> </span><span class="o">/</span><span class="err">\</span><span class="n">s</span><span class="err">\</span><span class="n">s</span><span class="o">+/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s">' '</span><span class="w"> </span><span class="p">)</span><span class="w">     </span><span class="o">-&gt;</span><span class="w">  </span><span class="mi">390</span><span class="n">ms</span>
<span class="n">str</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">,}</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s">' '</span><span class="w"> </span><span class="p">)</span><span class="w">     </span><span class="o">-&gt;</span><span class="w">  </span><span class="mi">470</span><span class="n">ms</span>
<span class="n">str</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">+/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s">' '</span><span class="w"> </span><span class="p">)</span><span class="w">        </span><span class="o">-&gt;</span><span class="w">  </span><span class="mi">790</span><span class="n">ms</span>
<span class="n">str</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">+</span><span class="p">(</span><span class="o">?=</span><span class="w"> </span><span class="p">)</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s">' '</span><span class="p">)</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">3250</span><span class="n">ms</span>
</pre></div>

<p>This is on Firefox, running 100k string replacements.</p>
<p>I encourage you to do your own profiling tests with firebug, if you think
performance is an issue. Humans are notoriously bad at predicting where the
bottlenecks in their programs lie.</p>
<p>(Also, note that IE 8's developer toolbar also has a profiler built in -- it
might be worth checking what the performance is like in IE.)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/intellij-inspection-gives-cannot-resolve-symbol-but-still-compiles-code/" class="u-url">IntelliJ inspection gives "Cannot resolve symbol" but still compiles code</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/intellij-inspection-gives-cannot-resolve-symbol-but-still-compiles-code/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T15:44:50+08:00" itemprop="datePublished" title="2023-02-17 15:44">2023-02-17 15:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Platform: IntelliJ Community Edition 10.0.3<br>
SDK: jdk1.6.0_21<br>
OS: Windows 7</p>
<p>So I have a strange situation with IntelliJ that has me completely stumped. I
setup a Maven project and add log4j as a dependency in the pom.xml file. The
IDEA inspections run fine and my unit tests all compile and run.</p>
<p>I then added hunnysoft's jmime library to my local maven repository using the
mvn install:install-file as follows.</p>
<div class="code"><pre class="code literal-block">mvn install:install-file -Dfile=jmime.jar -DgroupId=jmime \
-DartifactId=jmime -Dversion=3.1.1e -Dpackaging=jar
</pre></div>

<p>Maven installed the jar file just fine into my local repository.</p>
<p>I then went into IntelliJ's Settings =&gt; Maven =&gt; Repository Services and
Updated my local repository (so that IntelliJ would reindex the repository
contents).</p>
<p>Finally, I added the following dependency to my pom.xml file (just above the
log4j dependency).</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>jmime<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>jmime<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>3.1.1e<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<p>I now create a new class as follows:</p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">stackoverflow</span><span class="o">.</span><span class="n">question</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.apache.log4j.Logger</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.hunnysoft.jmime.ByteString</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.hunnysoft.jmime.Field</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.hunnysoft.jmime.FieldBody</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">StackOverflowQuestion</span> <span class="p">{</span>
    <span class="n">public</span> <span class="n">Field</span> <span class="n">create</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="p">,</span> <span class="n">String</span> <span class="n">text</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Logger</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">getClass</span><span class="p">())</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"create entered"</span><span class="p">);</span>
        <span class="n">FieldBody</span> <span class="n">body</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FieldBody</span><span class="p">();</span>
        <span class="n">body</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">new</span> <span class="n">ByteString</span><span class="p">(</span><span class="n">text</span><span class="p">));</span>
        <span class="n">Field</span> <span class="n">field</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Field</span><span class="p">();</span>
        <span class="n">field</span><span class="o">.</span><span class="n">setFieldName</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
        <span class="n">field</span><span class="o">.</span><span class="n">setFieldBody</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">field</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Now for the weirdness. IntelliJ's intention mechanism picks up and recognizes
the Logger import in the maven pom file just fine. However, for all of the
hunnysoft imports it reports: "Cannot resolve symbol
'ByteString/Field/FieldBody'", <em>BUT</em> Build =&gt; Compile
'StackOverflowQuestion.java' compiles everything correctly and the unit test I
created for this class runs fine (though the intentions mark the call to
create() as a problem area too).</p>
<p>So somewhere, somehow IntelliJ is ignoring the jmime.jar file for the
intention subsystem. I'm confused because the log4j dependency works fine and
everything compiles and runs fine. F12 ("Go To Declaration") works on the
Logger import, but breaks on all the jmime imports.</p>
<p>Oh, one other thing, if I go to the 'Packages' view in the "Projects" window
the "com.hunnysoft.jmime" package appears and I can see ALL of the classes I
imported in the code snippet above under "Libraries". Removing the above
dependency from the pom.xml file causes this package to disappear and the
compilation breaks.</p>
<p>It appears that the inspection's classpath is broken, but there does not seem
to be a setting for this anywhere in the Settings =&gt; Intentions | Compiler
areas (not that I expected any such settings, I believe the IDEA should
already know the correct classpath based on the pom file and JDK).</p>
<p>As a final experiment I created a brand new standard J2SE application project
(without using maven) and added the jmime.jar file directly to the project as
one of its libraries. I run into exactly the same problems as described above
in this new project.</p>
<p>Here is the MANIFEST.MF from the jmime jar file.</p>
<div class="code"><pre class="code literal-block">Manifest-Version: 1.0
Ant-Version: Apache Ant 1.5.4
Created-By: 10.0-b23 (Sun Microsystems Inc.)

Name: com/hunnysoft/jmime/
Sealed: true
Specification-Title: Hunny JMIME
Specification-Version: 3.1.1
Specification-Vendor: Hunny Software, Inc.
Implementation-Title: com.hunnysoft.jmime
Implementation-Version: 3.1.1E
Implementation-Vendor: Hunny Software, Inc.
</pre></div>

<p>I don't see anything unusual in this jar file.</p>
<p>My best guess is that perhaps the problem might be a missing dependency issue.
But AFAIK jmime is supposed to be self contained (JarAnalyzer doesn't come up
with anything, but I'm not sure it would if a dependency jar is missing).</p>
<p>So, anyone have any IDEAs?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>First of all you should try <code>File | Invalidate Caches</code> and if it doesn't help,
delete IDEA system directory. Then re-import the Maven project and see if it
helps.</p>
<p>In some weird cases compiled classes may report wrong info and confuse IDEA.
Verify that the classes from this jar report correct names using javap.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The following trick resolved this issue for me:</p>
<ul>
<li>Right click on the code editor</li>
<li>Hover on Maven and expand</li>
<li>Click on Reimport</li>
</ul>
<p>My idea version is 12.0.4</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/find-and-replace-inside-a-text-file-from-a-bash-command/" class="u-url">Find and Replace Inside a Text File from a Bash Command</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/find-and-replace-inside-a-text-file-from-a-bash-command/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T15:44:18+08:00" itemprop="datePublished" title="2023-02-17 15:44">2023-02-17 15:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What's the simplest way to do a find and replace for a given input string, say
<code>abc</code>, and replace with another string, say <code>XYZ</code> in file <code>/tmp/file.txt</code>?</p>
<p>I am writting an app and using IronPython to execute commands through SSH —
but I don't know Unix that well and don't know what to look for.</p>
<p>I have heard that Bash, apart from being a command line interface, can be a
very powerful scripting language. So, if this is true, I assume you can
perform actions like these.</p>
<p>Can I do it with bash, and what's the simplest (one line) script to achieve my
goal?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The easiest way is to use sed (or perl):</p>
<div class="code"><pre class="code literal-block">sed -i -e 's/abc/XYZ/g' /tmp/file.txt
</pre></div>

<p>Which will invoke sed to do an in-place edit due to the <code>-i</code> option. This can
be called from bash.</p>
<p>If you really really want to use just bash, then the following can work:</p>
<div class="code"><pre class="code literal-block">while<span class="w"> </span>IFS=''<span class="w"> </span>read<span class="w"> </span>-r<span class="w"> </span>a;<span class="w"> </span>do
<span class="w">    </span>echo<span class="w"> </span>"<span class="cp">${</span><span class="n">a</span><span class="o">//</span><span class="n">abc</span><span class="o">/</span><span class="n">XYZ</span><span class="cp">}</span>"
done<span class="w"> </span><span class="err">&lt;</span><span class="w"> </span>/tmp/file.txt<span class="w"> </span>&gt;<span class="w"> </span>/tmp/file.txt.t
mv<span class="w"> </span>/tmp/file.txt{.t,}
</pre></div>

<p>This loops over each line, doing a substitution, and writing to a temporary
file (don't want to clobber the input). The move at the end just moves
temporary to the original name. (For robustness and security, the temporary
file name should not be static or predictable, but let's not go there.)</p>
<h4>For Mac users:</h4>
<div class="code"><pre class="code literal-block">sed -i '' 's/abc/XYZ/g' /tmp/file.txt
</pre></div>

<p><em>(See the comment below why)</em></p>
<p><br></p>
<h3>Suggest</h3>
<p>File manipulation isn't normally done by Bash, but by programs invoked by
Bash, e.g.:</p>
<div class="code"><pre class="code literal-block">perl -pi -e 's/abc/XYZ/g' /tmp/file.txt
</pre></div>

<p>The <code>-i</code> flag tells it to do an in-place replacement.</p>
<p>See <code>man perlrun</code> for more details, including how to take a backup of the
original file.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-779.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-777.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
