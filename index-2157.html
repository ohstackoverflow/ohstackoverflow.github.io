<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2157) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2157.html">
<link rel="prev" href="index-2158.html" type="text/html">
<link rel="next" href="index-2156.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/add-an-element-to-an-array-in-swift/" class="u-url">Add an element to an array in Swift</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/add-an-element-to-an-array-in-swift/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:14:13+08:00" itemprop="datePublished" title="2023-03-03 19:14">2023-03-03 19:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Suppose I have an array, for example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"Steve"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bill"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Linus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bret"</span><span class="p">]</span>
</pre></div>

<p>And later I want to push/append an element to the end of said array, to get:</p>
<p><code>["Steve", "Bill", "Linus", "Bret", "Tim"]</code></p>
<p>What method should I use?</p>
<p>And what about the case where I want to add an element to the <strong>front</strong> of the
array? Is there a constant time unshift?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As of <strong>Swift 3 / 4 / 5</strong> , this is done as follows.</p>
<p>To add a new element to the end of an Array.</p>
<div class="code"><pre class="code literal-block">anArray.append("This String")
</pre></div>

<p>To append a different Array to the end of your Array.</p>
<div class="code"><pre class="code literal-block">anArray += ["Moar", "Strings"]
anArray.append(contentsOf: ["Moar", "Strings"])
</pre></div>

<p>To insert a new element into your Array.</p>
<div class="code"><pre class="code literal-block">anArray.insert("This String", at: 0)
</pre></div>

<p>To insert the contents of a different Array into your Array.</p>
<div class="code"><pre class="code literal-block">anArray.insert(contentsOf: ["Moar", "Strings"], at: 0)
</pre></div>

<p>More information can be found in the "Collection Types" chapter of "The Swift
Programming Language", starting on page 110.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can also pass in a variable and/or object if you wanted to.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">str1</span><span class="p">:</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"John"</span>
<span class="k">var</span><span class="w"> </span><span class="n">str2</span><span class="p">:</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bob"</span>

<span class="k">var</span><span class="w"> </span><span class="n">myArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"Steve"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bill"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Linus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bret"</span><span class="p">]</span>

<span class="o">//</span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">append</span>
<span class="n">myArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">str1</span><span class="p">)</span>
<span class="n">myArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">str2</span><span class="p">)</span>
</pre></div>

<p>To add them to the front:</p>
<div class="code"><pre class="code literal-block"><span class="c1">//use 'insert' instead of append</span>
<span class="n">myArray</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span><span class="w"> </span><span class="n">atIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">)</span>
<span class="n">myArray</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">str2</span><span class="p">,</span><span class="w"> </span><span class="n">atIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">//Swift 3</span>
<span class="n">myArray</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span><span class="w"> </span><span class="n">at</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="n">myArray</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">str2</span><span class="p">,</span><span class="w"> </span><span class="n">at</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
</pre></div>

<p>As others have already stated, you can no longer use '+=' as of xCode 6.1</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-array-map-array-walk-and-array-filter/" class="u-url">Difference between array_map, array_walk and array_filter</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-array-map-array-walk-and-array-filter/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:12:51+08:00" itemprop="datePublished" title="2023-03-03 19:12">2023-03-03 19:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What exactly is the difference between <code>array_map</code>, <code>array_walk</code> and
<code>array_filter</code>. What I could see from documentation is that you could pass a
callback function to perform an action on the supplied array. But I don't seem
to find any particular difference between them.</p>
<p>Do they perform the same thing?<br>
Can they be used interchangeably?</p>
<p>I would appreciate your help with illustrative example if they are different
at all.</p>
<p><br><br></p>
<h2>Answer</h2>
<ul>
<li>Changing Values: <ul>
<li>
<code>array_map</code> cannot change the values inside input array(s) while <code>array_walk</code> can; in particular, <code>array_map</code> never changes its arguments.</li>
</ul>
</li>
<li>Array Keys Access: <ul>
<li>
<code>array_map</code> cannot operate with the array keys, <code>array_walk</code> can.</li>
</ul>
</li>
<li>Return Value: <ul>
<li>
<code>array_map</code> returns a new array, <code>array_walk</code> only returns <code>true</code>. Hence, if you don't want to create an array as a result of traversing one array, you should use <code>array_walk</code>.</li>
</ul>
</li>
<li>Iterating Multiple Arrays: <ul>
<li>
<code>array_map</code> also can receive an arbitrary number of arrays and it can iterate over them in parallel, while <code>array_walk</code> operates only on one.</li>
</ul>
</li>
<li>Passing Arbitrary Data to Callback: <ul>
<li>
<code>array_walk</code> can receive an extra arbitrary parameter to pass to the callback. This mostly irrelevant since PHP 5.3 (when anonymous functions were introduced).</li>
</ul>
</li>
<li>Length of Returned Array: <ul>
<li>The resulting array of <code>array_map</code> has the same length as that of the largest input array; <code>array_walk</code> does not return an array but at the same time it cannot alter the number of elements of original array; <code>array_filter</code> picks only a subset of the elements of the array according to a filtering function. It does preserve the keys.</li>
</ul>
</li>
</ul>
<p>Example:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;pre&gt;</span>
<span class="cp">&lt;?php</span>

<span class="nv">$origarray1</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mf">2.4</span><span class="p">,</span> <span class="mf">2.6</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">);</span>
<span class="nv">$origarray2</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mf">2.4</span><span class="p">,</span> <span class="mf">2.6</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">);</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nb">array_map</span><span class="p">(</span><span class="s1">'floor'</span><span class="p">,</span> <span class="nv">$origarray1</span><span class="p">));</span> <span class="c1">// $origarray1 stays the same</span>

<span class="c1">// changes $origarray2</span>
<span class="nb">array_walk</span><span class="p">(</span><span class="nv">$origarray2</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="o">&amp;</span><span class="nv">$v</span><span class="p">,</span> <span class="nv">$k</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$v</span> <span class="o">=</span> <span class="nb">floor</span><span class="p">(</span><span class="nv">$v</span><span class="p">);</span> <span class="p">});</span> 
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$origarray2</span><span class="p">);</span>

<span class="c1">// this is a more proper use of array_walk</span>
<span class="nb">array_walk</span><span class="p">(</span><span class="nv">$origarray1</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$v</span><span class="p">,</span> <span class="nv">$k</span><span class="p">)</span> <span class="p">{</span> <span class="k">echo</span> <span class="s2">"</span><span class="si">$k</span><span class="s2"> =&gt; </span><span class="si">$v</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span> <span class="p">});</span>

<span class="c1">// array_map accepts several arrays</span>
<span class="nb">print_r</span><span class="p">(</span>
    <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$a</span> <span class="o">*</span> <span class="nv">$b</span><span class="p">;</span> <span class="p">},</span> <span class="nv">$origarray1</span><span class="p">,</span> <span class="nv">$origarray2</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// select only elements that are &gt; 2.5</span>
<span class="nb">print_r</span><span class="p">(</span>
    <span class="nb">array_filter</span><span class="p">(</span><span class="nv">$origarray1</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$a</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$a</span> <span class="o">&gt;</span> <span class="mf">2.5</span><span class="p">;</span> <span class="p">})</span>
<span class="p">);</span>

<span class="cp">?&gt;</span>
<span class="nt">&lt;/pre&gt;</span>
</pre></div>

<p>Result:</p>
<div class="code"><pre class="code literal-block">Array
(
    [0] =&gt; 2
    [1] =&gt; 2
    [2] =&gt; 3
)
Array
(
    [0] =&gt; 2
    [1] =&gt; 2
    [2] =&gt; 3
)
0 =&gt; 2.4
1 =&gt; 2.6
2 =&gt; 3.5
Array
(
    [0] =&gt; 4.8
    [1] =&gt; 5.2
    [2] =&gt; 10.5
)
Array
(
    [1] =&gt; 2.6
    [2] =&gt; 3.5
)
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The idea of mapping an function to array of data comes from functional
programming. You shouldn't think about <code>array_map</code> as a <code>foreach</code> loop that
calls a function on each element of the array (even though that's how it's
implemented). It should be thought of as applying the function to each element
in the array independently.</p>
<p>In theory such things as function mapping can be done in parallel since the
function being applied to the data should ONLY affect the data and NOT the
global state. This is because an <code>array_map</code> could choose any order in which
to apply the function to the items in (even though in PHP it doesn't).</p>
<p><code>array_walk</code> on the other hand it the exact opposite approach to handling
arrays of data. Instead of handling each item separately, it uses a state
(<code>&amp;$userdata</code>) and can edit the item in place (much like a foreach loop).
Since each time an item has the <code>$funcname</code> applied to it, it could change the
global state of the program and therefor requires a single <em>correct</em> way of
processing the items.</p>
<p>Back in PHP land, <code>array_map</code> and <code>array_walk</code> are almost identical except
<code>array_walk</code> gives you more control over the iteration of data and is normally
used to "change" the data in-place vs returning a new "changed" array.</p>
<p><code>array_filter</code> is really an application of <code>array_walk</code> (or <code>array_reduce</code>)
and it more-or-less just provided for convenience.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/switch-statement-fallthrough-in-c/" class="u-url">Switch statement fallthrough in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/switch-statement-fallthrough-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:11:32+08:00" itemprop="datePublished" title="2023-03-03 19:11">2023-03-03 19:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Switch statement fallthrough is one of my personal major reasons for loving
<code>switch</code> vs. <code>if/else if</code> constructs. An example is in order here:</p>
<div class="code"><pre class="code literal-block"><span class="k">static</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">NumberToWords</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">number</span><span class="p">)</span>
<span class="err">{</span>
<span class="w">    </span><span class="n">string</span><span class="err">[]</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">string</span><span class="err">[]</span><span class="w"> </span>
<span class="w">        </span><span class="err">{</span><span class="w"> </span><span class="ss">""</span><span class="p">,</span><span class="w"> </span><span class="ss">"one"</span><span class="p">,</span><span class="w"> </span><span class="ss">"two"</span><span class="p">,</span><span class="w"> </span><span class="ss">"three"</span><span class="p">,</span><span class="w"> </span><span class="ss">"four"</span><span class="p">,</span><span class="w"> </span><span class="ss">"five"</span><span class="p">,</span><span class="w"> </span>
<span class="w">          </span><span class="ss">"six"</span><span class="p">,</span><span class="w"> </span><span class="ss">"seven"</span><span class="p">,</span><span class="w"> </span><span class="ss">"eight"</span><span class="p">,</span><span class="w"> </span><span class="ss">"nine"</span><span class="w"> </span><span class="err">}</span><span class="p">;</span>
<span class="w">    </span><span class="n">string</span><span class="err">[]</span><span class="w"> </span><span class="n">tens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">string</span><span class="err">[]</span><span class="w"> </span>
<span class="w">        </span><span class="err">{</span><span class="w"> </span><span class="ss">""</span><span class="p">,</span><span class="w"> </span><span class="ss">""</span><span class="p">,</span><span class="w"> </span><span class="ss">"twenty"</span><span class="p">,</span><span class="w"> </span><span class="ss">"thirty"</span><span class="p">,</span><span class="w"> </span><span class="ss">"forty"</span><span class="p">,</span><span class="w"> </span><span class="ss">"fifty"</span><span class="p">,</span><span class="w"> </span>
<span class="w">          </span><span class="ss">"sixty"</span><span class="p">,</span><span class="w"> </span><span class="ss">"seventy"</span><span class="p">,</span><span class="w"> </span><span class="ss">"eighty"</span><span class="p">,</span><span class="w"> </span><span class="ss">"ninety"</span><span class="w"> </span><span class="err">}</span><span class="p">;</span>
<span class="w">    </span><span class="n">string</span><span class="err">[]</span><span class="w"> </span><span class="n">teens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">string</span><span class="err">[]</span>
<span class="w">        </span><span class="err">{</span><span class="w"> </span><span class="ss">"ten"</span><span class="p">,</span><span class="w"> </span><span class="ss">"eleven"</span><span class="p">,</span><span class="w"> </span><span class="ss">"twelve"</span><span class="p">,</span><span class="w"> </span><span class="ss">"thirteen"</span><span class="p">,</span><span class="w"> </span><span class="ss">"fourteen"</span><span class="p">,</span><span class="w"> </span><span class="ss">"fifteen"</span><span class="p">,</span>
<span class="w">          </span><span class="ss">"sixteen"</span><span class="p">,</span><span class="w"> </span><span class="ss">"seventeen"</span><span class="p">,</span><span class="w"> </span><span class="ss">"eighteen"</span><span class="p">,</span><span class="w"> </span><span class="ss">"nineteen"</span><span class="w"> </span><span class="err">}</span><span class="p">;</span>

<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">ans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">""</span><span class="p">;</span>
<span class="w">    </span><span class="n">switch</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="p">.</span><span class="n">ToString</span><span class="p">().</span><span class="n">Length</span><span class="p">)</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">3</span><span class="err">:</span>
<span class="w">            </span><span class="n">ans</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">string</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="ss">"{0} hundred and "</span><span class="p">,</span><span class="w"> </span><span class="n">numbers</span><span class="o">[</span><span class="n">number / 100</span><span class="o">]</span><span class="p">);</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="err">:</span>
<span class="w">            </span><span class="nc">int</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">            </span><span class="err">{</span>
<span class="w">                </span><span class="n">ans</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">teens</span><span class="o">[</span><span class="n">number % 10</span><span class="o">]</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                </span><span class="n">ans</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">string</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="ss">"{0}-"</span><span class="p">,</span><span class="w"> </span><span class="n">tens</span><span class="o">[</span><span class="n">t</span><span class="o">]</span><span class="p">);</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span>
<span class="w">            </span><span class="nc">int</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">            </span><span class="n">ans</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">numbers</span><span class="o">[</span><span class="n">o</span><span class="o">]</span><span class="p">;</span>

<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="err">:</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArgumentException</span><span class="p">(</span><span class="ss">"number"</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ans</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>The smart people are cringing because the <code>string[]</code>s should be declared
outside the function: well, they are, this is just an example.</p>
<p>The compiler fails with the following error:</p>
<div class="code"><pre class="code literal-block">Control cannot fall through from one case label ('case 3:') to another
Control cannot fall through from one case label ('case 2:') to another
</pre></div>

<p>Why? And is there any way to get this sort of behaviour without having three
<code>if</code>s?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>(Copy/paste of an answer I provided elsewhere)</p>
<p>Falling through <code>switch</code>-<code>case</code>s can be achieved by having no code in a <code>case</code>
(see <code>case 0</code>), or using the special <code>goto case</code> (see <code>case 1</code>) or <code>goto
default</code> (see <code>case 2</code>) forms:</p>
<div class="code"><pre class="code literal-block"><span class="nt">switch</span><span class="w"> </span><span class="o">(</span><span class="c">/*...*/</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">0:</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">shares</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">exact</span><span class="w"> </span><span class="err">same</span><span class="w"> </span><span class="err">code</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">case</span><span class="w"> </span><span class="err">1</span>
<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">1:</span>
<span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">something</span>
<span class="w">        </span><span class="err">goto</span><span class="w"> </span><span class="err">case</span><span class="w"> </span><span class="err">2</span><span class="p">;</span>
<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">2:</span>
<span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">something</span><span class="w"> </span><span class="err">else</span>
<span class="w">        </span><span class="err">goto</span><span class="w"> </span><span class="err">default</span><span class="p">;</span>
<span class="w">    </span><span class="n">default</span><span class="p">:</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">entirely</span><span class="w"> </span><span class="n">different</span>
<span class="w">        </span><span class="n">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The "why" is to avoid accidental fall-through, for which I'm grateful. This is
a not uncommon source of bugs in C and Java.</p>
<p>The workaround is to use goto, e.g.</p>
<div class="code"><pre class="code literal-block"><span class="nt">switch</span><span class="w"> </span><span class="o">(</span><span class="nt">number</span><span class="p">.</span><span class="nc">ToString</span><span class="o">()</span><span class="p">.</span><span class="nc">Length</span><span class="o">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">3:</span>
<span class="w">        </span><span class="err">ans</span><span class="w"> </span><span class="err">+=</span><span class="w"> </span><span class="err">string.Format("{0</span><span class="p">}</span><span class="w"> </span><span class="nt">hundred</span><span class="w"> </span><span class="nt">and</span><span class="w"> </span><span class="err">"</span><span class="o">,</span><span class="w"> </span><span class="nt">numbers</span><span class="cp">[</span><span class="nx">number</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="cp">]</span><span class="o">);</span>
<span class="w">        </span><span class="nt">goto</span><span class="w"> </span><span class="nt">case</span><span class="w"> </span><span class="nt">2</span><span class="o">;</span>
<span class="w">    </span><span class="nt">case</span><span class="w"> </span><span class="nt">2</span><span class="o">:</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nt">Etc</span>
<span class="err">}</span>
</pre></div>

<p>The general design of switch/case is a little bit unfortunate in my view. It
stuck too close to C - there are some useful changes which could be made in
terms of scoping etc. Arguably a smarter switch which could do pattern
matching etc would be helpful, but that's really changing from switch to
"check a sequence of conditions" - at which point a different name would
perhaps be called for.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2158.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2156.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
