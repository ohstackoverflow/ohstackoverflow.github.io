<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2697) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2697.html">
<link rel="prev" href="index-2698.html" type="text/html">
<link rel="next" href="index-2696.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/electron-jquery-is-not-defined/" class="u-url">Electron: jQuery is not defined</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/electron-jquery-is-not-defined/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:11:27+08:00" itemprop="datePublished" title="2023-03-05 11:11">2023-03-05 11:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Problem: while developing using Electron, when you try to use any JS plugin
that requires jQuery, the plugin doesn't find jQuery, even if you load in the
correct path using script tags.</p>
<p>For example,</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;p</span><span class="w"> </span><span class="na">id=</span><span class="s">"click-me"</span><span class="nt">&gt;</span>Click<span class="w"> </span>me!<span class="nt">&lt;/p&gt;</span>
...
<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"node_modules/jquery/dist/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span><span class="w"> </span>//jQuery<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>loaded<span class="w"> </span>now
<span class="nt">&lt;script&gt;</span>$("#click-me").click(()<span class="w"> </span>=&gt;<span class="w"> </span>{alert("Clicked")});<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>

<p>Running this code above wouldn't work. In fact, open up DevTools, go to the
Console view, and click on the <code>&lt;p&gt;</code> element. You should see that <code>function $
is not defined</code> or something to that effect.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>A better and more generic solution IMO:</strong></p>
<div class="code"><pre class="code literal-block"><span class="cm">&lt;!-- Insert this line above script imports  --&gt;</span>
<span class="nt">&lt;script&gt;</span>if<span class="w"> </span>(typeof<span class="w"> </span>module<span class="w"> </span>===<span class="w"> </span>'object')<span class="w"> </span>{window.module<span class="w"> </span>=<span class="w"> </span>module;<span class="w"> </span>module<span class="w"> </span>=<span class="w"> </span>undefined;}<span class="nt">&lt;/script&gt;</span>

<span class="cm">&lt;!-- normal script imports etc  --&gt;</span>
<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"scripts/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span><span class="w">    </span>
<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"scripts/vendor.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="cm">&lt;!-- Insert this line after script imports --&gt;</span>
<span class="nt">&lt;script&gt;</span>if<span class="w"> </span>(window.module)<span class="w"> </span>module<span class="w"> </span>=<span class="w"> </span>window.module;<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p><strong>Benefits</strong></p>
<ul>
<li>Works for both browser and electron with the same code</li>
<li>Fixes issues for ALL 3rd-party libraries (not just jQuery) without having to specify each one</li>
<li>Script Build / Pack Friendly (i.e. Grunt / Gulp all scripts into vendor.js)</li>
<li>Does NOT require <code>node-integration</code> to be false</li>
</ul>
<p>source here</p>
<p><br></p>
<h3>Suggest</h3>
<p>As seen in https://github.com/atom/electron/issues/254 the problem is caused
because of this code:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">typeof</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"object"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">typeof</span><span class="w"> </span><span class="n">module</span><span class="p">.</span><span class="n">exports</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"object"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n n-Quoted">`module`</span>
<span class="err">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n n-Quoted">`window`</span>
<span class="err">}</span>
</pre></div>

<p>The jQuery code "sees" that its running in a CommonJS environment and ignores
<code>window</code>.</p>
<p><strong>The solution is really easy</strong> , instead of loading jQuery through <code>&lt;script
src="..."&gt;</code>, you should load like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script&gt;</span>window.$<span class="w"> </span>=<span class="w"> </span>window.jQuery<span class="w"> </span>=<span class="w"> </span>require('./path/to/jquery');<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p><strong>Note:</strong> <em>the dot before the path is required</em> , since it indicates that it's
the current directory. Also, <em>remember to load jQuery before loading any other
plugin that depends on it</em>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-viewport-window-height-in-reactjs/" class="u-url">Get viewport/window height in ReactJS</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-viewport-window-height-in-reactjs/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:10:33+08:00" itemprop="datePublished" title="2023-03-05 11:10">2023-03-05 11:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I get the viewport height in ReactJS? In normal JavaScript I use</p>
<div class="code"><pre class="code literal-block">window.innerHeight()
</pre></div>

<p>but using ReactJS, I'm not sure how to get this information. My understanding
is that</p>
<div class="code"><pre class="code literal-block">ReactDOM.findDomNode()
</pre></div>

<p>only works for components created. However this is not the case for the
<code>document</code> or <code>body</code> element, which could give me height of the window.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">AppComponent</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">React</span><span class="o">.</span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">(</span><span class="n">props</span><span class="p">);</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="n">props</span><span class="o">.</span><span class="n">height</span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">componentWillMount</span><span class="p">(){</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">setState</span><span class="p">({</span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">innerHeight</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'px'</span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">render</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">component</span><span class="o">...</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<blockquote>
<p>Set the props</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="nt">AppComponent</span><span class="p">.</span><span class="nc">propTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">height</span><span class="p">:</span><span class="n">React</span><span class="o">.</span><span class="n">PropTypes</span><span class="o">.</span><span class="n">string</span>
<span class="p">}</span><span class="o">;</span>

<span class="nt">AppComponent</span><span class="p">.</span><span class="nc">defaultProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">height</span><span class="p">:</span><span class="s1">'500px'</span>
<span class="p">}</span><span class="o">;</span>
</pre></div>

<blockquote>
<p>viewport height is now available as {this.state.height} in rendering
template</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>This answer is similar to Jabran Saeed's, except it handles window resizing as
well. I got it from here.</p>
<div class="code"><pre class="code literal-block"><span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">super</span><span class="p">(</span><span class="n">props</span><span class="p">);</span>
<span class="w">  </span><span class="n">this</span><span class="o">.</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="n">this</span><span class="o">.</span><span class="n">updateWindowDimensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">updateWindowDimensions</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">componentDidMount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">this</span><span class="o">.</span><span class="n">updateWindowDimensions</span><span class="p">();</span>
<span class="w">  </span><span class="n">window</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'resize'</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">updateWindowDimensions</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">componentWillUnmount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">window</span><span class="o">.</span><span class="n">removeEventListener</span><span class="p">(</span><span class="s1">'resize'</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">updateWindowDimensions</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">updateWindowDimensions</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">this</span><span class="o">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">innerWidth</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">innerHeight</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/should-i-add-the-visual-studio-2015-vs-folder-to-source-control/" class="u-url">Should I add the Visual Studio 2015 .vs folder to source control?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/should-i-add-the-visual-studio-2015-vs-folder-to-source-control/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:10:11+08:00" itemprop="datePublished" title="2023-03-05 11:10">2023-03-05 11:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Visual Studio 2015 creates a new folder called ".vs". What is the purpose of
it and should I add it to source control?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>No, you should not add it to source control. The purpose of this folder is to
move machine- and user-specific files to a central location. The explanation
on the Visual Studio User Voice issue explains it well:</p>
<blockquote>
<p>So far, we have moved the .SUO file and the VB/C# compiler IntelliSense
database files to the new location. All new project specific, machine local
files will be added to the new location too. We plan on taking this even
further in future releases and are investigating how to improve the
directory structure of build output and other existing files that can
clutter the source tree.</p>
</blockquote>
<p>These are all files that you would never check in, since they are generated
from a build or contain machine-specific information.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Github provides alot of .gitignore templates. In their template for visual
studio they have ignored the .vs folder. Snippet from the template on github.</p>
<div class="code"><pre class="code literal-block"><span class="c1"># Visual Studio 2015 cache/options directory</span>
<span class="na">.vs</span><span class="err">/</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2698.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2696.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
