<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2526) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2526.html">
<link rel="prev" href="index-2527.html" type="text/html">
<link rel="next" href="index-2525.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-easiest-way-to-ignore-a-jpa-field-during-persistence/" class="u-url">What is the easiest way to ignore a JPA field during persistence?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-easiest-way-to-ignore-a-jpa-field-during-persistence/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T22:39:27+08:00" itemprop="datePublished" title="2023-03-04 22:39">2023-03-04 22:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm essentially looking for a "@Ignore" type annotation with which I can stop
a particular field from being persisted. How can this be achieved?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>@Transient</code> complies with your needs.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To ignore a field, annotate it with <code>@Transient</code> so it will not be mapped by
hibernate.</p>
<p>but then <strong>jackson will not serialize</strong> the field when converting to JSON.</p>
<p><strong>If you need mix JPA with JSON</strong> (omit by JPA but still include in Jackson)
use <code>@JsonInclude</code> :</p>
<div class="code"><pre class="code literal-block"><span class="nv">@JsonInclude</span><span class="p">()</span>
<span class="nv">@Transient</span>
<span class="n">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">;</span>
</pre></div>

<p><strong>TIP:</strong></p>
<p>You can also use JsonInclude.Include.NON_NULL and hide fields in JSON during
deserialization when <code>token == null</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@JsonInclude</span><span class="p">(</span><span class="n">JsonInclude</span><span class="p">.</span><span class="k">Include</span><span class="p">.</span><span class="n">NON_NULL</span><span class="p">)</span>
<span class="nv">@Transient</span>
<span class="n">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">token</span><span class="p">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/unicodedecodeerror-utf8-codec-can-t-decode-byte-0xa5-in-position-0-invalid-start-byte/" class="u-url">UnicodeDecodeError: 'utf8' codec can't decode byte 0xa5 in position 0: invalid start byte</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/unicodedecodeerror-utf8-codec-can-t-decode-byte-0xa5-in-position-0-invalid-start-byte/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T22:37:58+08:00" itemprop="datePublished" title="2023-03-04 22:37">2023-03-04 22:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am using <code>Python-2.6 CGI</code> scripts but found this error in server log while
doing <code>json.dumps()</code>,</p>
<div class="code"><pre class="code literal-block"><span class="nv">Traceback</span><span class="w"> </span><span class="ss">(</span><span class="nv">most</span><span class="w"> </span><span class="nv">recent</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="nl">last</span><span class="ss">)</span>:
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/etc/mongodb/server/cgi-bin/getstats.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">135</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">module</span><span class="o">&gt;</span>
<span class="w">    </span><span class="nv">print</span><span class="w"> </span><span class="nv">json</span>.<span class="nv">dumps</span><span class="ss">(</span>​​<span class="nv">__get</span>​<span class="nv">data</span><span class="ss">())</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/usr/lib/python2.7/json/__init__.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">231</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">dumps</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">_default_encoder</span>.<span class="nv">encode</span><span class="ss">(</span><span class="nv">obj</span><span class="ss">)</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/usr/lib/python2.7/json/encoder.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">201</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">encode</span>
<span class="w">    </span><span class="nv">chunks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">self</span>.<span class="nv">iterencode</span><span class="ss">(</span><span class="nv">o</span>,<span class="w"> </span><span class="nv">_one_shot</span><span class="o">=</span><span class="nv">True</span><span class="ss">)</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/usr/lib/python2.7/json/encoder.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">264</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">iterencode</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">_iterencode</span><span class="ss">(</span><span class="nv">o</span>,<span class="w"> </span><span class="mi">0</span><span class="ss">)</span>
<span class="nv">UnicodeDecodeError</span>:<span class="w"> </span><span class="s1">'utf8'</span><span class="w"> </span><span class="nv">codec</span><span class="w"> </span><span class="nv">can</span><span class="err">'t decode byte 0xa5 in position 0: invalid start byte</span>
</pre></div>

<p>​Here ,</p>
<p><code>​__get​data()</code> function returns <code>dictionary {}</code> .</p>
<p>Before posting this question I have referred <strong>this</strong> of question os SO.</p>
<hr>
<h3>UPDATES</h3>
<p>Following line is hurting JSON encoder,</p>
<div class="code"><pre class="code literal-block">now = datetime.datetime.now()
now = datetime.datetime.strftime(now, '%Y-%m-%dT%H:%M:%S.%fZ')
print json.dumps({'current_time': now}) # this is the culprit
</pre></div>

<p>I got a temporary fix for it</p>
<div class="code"><pre class="code literal-block">print json.dumps( {'old_time': now.encode('ISO-8859-1').strip() })
</pre></div>

<p>But I am not sure is it correct way to do it.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The error is because there is some non-ascii character in the dictionary and
it can't be encoded/decoded. One simple way to avoid this error is to encode
such strings with <code>encode()</code> function as follows (if <code>a</code> is the string with
non-ascii character):</p>
<div class="code"><pre class="code literal-block">a.encode('utf-8').strip()
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Try the below code snippet:</p>
<div class="code"><pre class="code literal-block">with open(path, 'rb') as f:
  text = f.read()
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-check-if-an-html-element-is-empty-using-jquery/" class="u-url">How do I check if an HTML element is empty using jQuery?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-check-if-an-html-element-is-empty-using-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T22:36:32+08:00" itemprop="datePublished" title="2023-03-04 22:36">2023-03-04 22:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to call a function only if an HTML element is empty, using jQuery.</p>
<p>Something like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">isEmpty</span><span class="ss">(</span>$<span class="ss">(</span><span class="s1">'#element'</span><span class="ss">)))</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">something</span>
}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span>$<span class="ss">(</span><span class="s1">'#element'</span><span class="ss">)</span>.<span class="nv">is</span><span class="ss">(</span><span class="s1">':empty'</span><span class="ss">))</span>{
<span class="w">  </span><span class="o">//</span><span class="k">do</span><span class="w"> </span><span class="nv">something</span>
}
</pre></div>

<p>for more info see http://api.jquery.com/is/ and http://api.jquery.com/empty-
selector/</p>
<p><strong>EDIT:</strong></p>
<p>As some have pointed, the browser interpretation of an empty element can vary.
If you would like to ignore invisible elements such as spaces and line breaks
and make the implementation more consistent you can create a function (or just
use the code inside of it).</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nv">function</span><span class="w"> </span><span class="nv">isEmpty</span><span class="ss">(</span><span class="w"> </span><span class="nv">el</span><span class="w"> </span><span class="ss">)</span>{
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="o">!</span>$.<span class="nv">trim</span><span class="ss">(</span><span class="nv">el</span>.<span class="nv">html</span><span class="ss">())</span>
<span class="w">  </span>}
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">isEmpty</span><span class="ss">(</span>$<span class="ss">(</span><span class="s1">'#element'</span><span class="ss">)))</span><span class="w"> </span>{
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">something</span>
<span class="w">  </span>}
</pre></div>

<p>You can also make it into a jQuery plugin, but you get the idea.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I found this to be the only reliable way (since Chrome &amp; FF consider
whitespaces and linebreaks as elements):</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">(</span>$.<span class="nv">trim</span><span class="ss">(</span>$<span class="ss">(</span><span class="s2">"selector"</span><span class="ss">)</span>.<span class="nv">html</span><span class="ss">())</span><span class="o">==</span><span class="s1">''</span><span class="ss">)</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2527.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2525.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
