<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 463) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-463.html">
<link rel="prev" href="index-464.html" type="text/html">
<link rel="next" href="index-462.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-cong-git-cun-chu-ku-de-ti-jiao-li-shi-ji-lu-zhong-yi-chu-shan-chu-da-wen-jian/" class="u-url">如何从 Git 存储库的提交历史记录中移除/删除大文件？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-cong-git-cun-chu-ku-de-ti-jiao-li-shi-ji-lu-zhong-yi-chu-shan-chu-da-wen-jian/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:35:00+08:00" itemprop="datePublished" title="2023-02-17 07:35">2023-02-17 07:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我不小心将 DVD-rip 放到了一个网站项目中，然后粗心大意<code>git commit -a -m ...</code>，然后 zap，repo 被 2.2 gigs
膨胀了。下次我做了一些编辑，删除了视频文件，并提交了所有内容，但压缩文件仍然存在于存储库中，在历史记录中。</p>
<p>我知道我可以从这些提交开始分支并将一个分支变基到另一个分支。但是我应该怎么做才能合并 2 次提交，以便大文件不会显示在历史记录中并在垃圾收集过程中被清除？</p>
<p><br><br></p>
<h2>解答</h2>
<p>Why not use this simple but powerful command?</p>
<div class="code"><pre class="code literal-block">git filter-branch --tree-filter 'rm -f DVD-rip' HEAD
</pre></div>

<p>The <code>--tree-filter</code> option runs the specified command after each checkout of
the project and then recommits the results. In this case, you remove a file
called DVD-rip from every snapshot, whether it exists or not.</p>
<p>If you know which commit introduced the huge file (say 35dsa2), you can
replace HEAD with 35dsa2..HEAD to avoid rewriting too much history, thus
avoiding diverging commits if you haven't pushed yet. This comment courtesy of
@alpha_989 seems too important to leave out here.</p>
<p>See this link.</p>
<p><br></p>
<h3>更多建议</h3>
<p>如果您已将历史记录发布给其他开发人员，那么您想要做的事情是非常具有破坏性的。有关修复历史记录后的必要步骤，请参阅文档中的“从上游 Rebase 中恢复”
。<code>git rebase</code></p>
<p>您至少有两个选择：<code>git filter-branch</code>和一个交互式 rebase，两者都在下面解释。</p>
<h3>使用<code>git filter-branch</code>
</h3>
<p>我对来自 Subversion 导入的大量二进制测试数据有类似的问题，并写过关于从 git 存储库中删除数据的文章。</p>
<p>假设你的 git 历史是：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>f772d66<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>cb14efd<span class="w"> </span>Remove<span class="w"> </span>DVD-rip
<span class="p">|</span><span class="w"> </span>D<span class="w">     </span>oops.iso
*<span class="w"> </span>ce36c98<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>oops.iso
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>请注意，这<code>git lola</code>是一个非标准但非常有用的别名。（有关详细信息，请参阅此答案末尾的附录。）切换<code>--name-status</code>到<code>git
log</code>显示与每个提交关联的树修改。</p>
<p>在“粗心”提交（其 SHA1 对象名称为 ce36c98）中，该文件<code>oops.iso</code>是意外添加的 DVD-rip，并在下一次提交 cb14efd
中删除。使用上述博客文章中描述的技术，要执行的命令是：</p>
<div class="code"><pre class="code literal-block">git filter-branch --prune-empty -d /dev/shm/scratch \
  --index-filter "git rm --cached -f --ignore-unmatch oops.iso" \
  --tag-name-filter cat -- --all
</pre></div>

<p>选项：</p>
<ul>
<li>
<code>--prune-empty</code>删除由于过滤操作而变为空的提交（ <em>即，不更改树）。</em> 在典型情况下，此选项会产生更清晰的历史记录。</li>
<li>
<code>-d</code>命名一个尚不存在的临时目录，用于构建过滤的历史记录。如果您在现代 Linux 发行版上运行，则在其中指定一棵树<code>/dev/shm</code>将导致执行速度更快。</li>
<li>
<code>--index-filter</code>是主要事件，并且在历史记录的每一步都与指数相对应。你想删除<code>oops.iso</code>它所在的任何地方，但它并不存在于所有提交中。该命令<code>git rm --cached -f --ignore-unmatch oops.iso</code>会删除存在的 DVD-rip，否则不会失败。</li>
<li>
<code>--tag-name-filter</code>描述了如何重写标签名称。的过滤器<code>cat</code>是恒等操作。您的存储库，如上面的示例，可能没有任何标签，但我包含此选项是为了完全通用。</li>
<li>
<code>--</code>指定选项的结尾<code>git filter-branch</code>
</li>
<li>
<code>--all</code>以下<code>--</code>是所有参考文献的简写。您的存储库，如上面的示例，可能只有一个 ref（master），但我包含此选项是为了完全通用。</li>
</ul>
<p>经过一番翻腾，现在的历史是：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>8e0a11c<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>e45ac59<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
<span class="p">|</span>
<span class="p">|</span><span class="w"> </span>*<span class="w"> </span>f772d66<span class="w"> </span><span class="o">(</span>refs/original/refs/heads/master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>A<span class="w">   </span>login.html
<span class="p">|</span><span class="w"> </span>*<span class="w"> </span>cb14efd<span class="w"> </span>Remove<span class="w"> </span>DVD-rip
<span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>D<span class="w">   </span>oops.iso
<span class="p">|</span><span class="w"> </span>*<span class="w"> </span>ce36c98<span class="w"> </span>Careless
<span class="p">|</span>/<span class="w">  </span>A<span class="w">   </span>oops.iso
<span class="p">|</span><span class="w">   </span>A<span class="w">   </span>other.html
<span class="p">|</span>
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>请注意，新的“Careless”提交仅添加<code>other.html</code>，而“Remove DVD-rip”提交不再位于 master
分支上。标记的分支<code>refs/original/refs/heads/master</code>包含您的原始提交，以防您犯错。要删除它，请按照“收缩存储库的清单”中的步骤进行操作。</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>update-ref<span class="w"> </span>-d<span class="w"> </span>refs/original/refs/heads/master
$<span class="w"> </span>git<span class="w"> </span>reflog<span class="w"> </span>expire<span class="w"> </span>--expire<span class="o">=</span>now<span class="w"> </span>--all
$<span class="w"> </span>git<span class="w"> </span>gc<span class="w"> </span>--prune<span class="o">=</span>now
</pre></div>

<p>对于更简单的替代方法，克隆存储库以丢弃不需要的位。</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/src
$<span class="w"> </span>mv<span class="w"> </span>repo<span class="w"> </span>repo.old
$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>file:///home/user/src/repo.old<span class="w"> </span>repo
</pre></div>

<p>使用<code>file:///...</code>克隆 URL 复制对象而不是仅创建硬链接。</p>
<p>现在你的历史是：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>8e0a11c<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>e45ac59<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>前两个提交的 SHA1
对象名称（“索引”和“管理页面”）保持不变，因为过滤操作没有修改这些提交。“Careless”丢失了<code>oops.iso</code>，“Login
page”有了新的父级，因此它们的 SHA1 <em>确实发生了</em> 变化。</p>
<h3>交互式变基</h3>
<p>具有以下历史：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>f772d66<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>cb14efd<span class="w"> </span>Remove<span class="w"> </span>DVD-rip
<span class="p">|</span><span class="w"> </span>D<span class="w">     </span>oops.iso
*<span class="w"> </span>ce36c98<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>oops.iso
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>你想<code>oops.iso</code>从“Careless”中删除，就好像你从未添加过它一样，然后“Remove DVD-rip”对你没用。因此，我们进入交互式
rebase 的计划是保留“管理页面”，编辑“粗心”，并丢弃“删除 DVD-rip”。</p>
<p>运行<code>$ git rebase -i 5af4522</code>会启动一个包含以下内容的编辑器。</p>
<div class="code"><pre class="code literal-block"><span class="nv">pick</span><span class="w"> </span><span class="nv">ce36c98</span><span class="w"> </span><span class="nv">Careless</span>
<span class="nv">pick</span><span class="w"> </span><span class="nv">cb14efd</span><span class="w"> </span><span class="nv">Remove</span><span class="w"> </span><span class="nv">DVD</span><span class="o">-</span><span class="nv">rip</span>
<span class="nv">pick</span><span class="w"> </span><span class="nv">f772d66</span><span class="w"> </span><span class="nv">Login</span><span class="w"> </span><span class="nv">page</span>

#<span class="w"> </span><span class="nv">Rebase</span><span class="w"> </span><span class="mi">5</span><span class="nv">af4522</span>..<span class="nv">f772d66</span><span class="w"> </span><span class="nv">onto</span><span class="w"> </span><span class="mi">5</span><span class="nv">af4522</span>
#
#<span class="w"> </span><span class="nv">Commands</span>:
#<span class="w">  </span><span class="nv">p</span>,<span class="w"> </span><span class="nv">pick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>
#<span class="w">  </span><span class="nv">r</span>,<span class="w"> </span><span class="nv">reword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">edit</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="nv">message</span>
#<span class="w">  </span><span class="nv">e</span>,<span class="w"> </span><span class="nv">edit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">stop</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">amending</span>
#<span class="w">  </span><span class="nv">s</span>,<span class="w"> </span><span class="nv">squash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">meld</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">commit</span>
#<span class="w">  </span><span class="nv">f</span>,<span class="w"> </span><span class="nv">fixup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="s2">"squash"</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">discard</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">commit</span><span class="err">'s log message</span>
<span class="err">#  x, exec = run command (the rest of the line) using shell</span>
<span class="err">#</span>
<span class="err"># If you remove a line here THAT COMMIT WILL BE LOST.</span>
<span class="err"># However, if you remove everything, the rebase will be aborted.</span>
<span class="err">#</span>
</pre></div>

<p>执行我们的计划，我们将其修改为</p>
<div class="code"><pre class="code literal-block">edit ce36c98 Careless
pick f772d66 Login page

# Rebase 5af4522..f772d66 onto 5af4522
# ...
</pre></div>

<p>也就是说，我们删除带有“Remove DVD-rip”的行，并将“Careless”上的操作更改为而<code>edit</code>不是<code>pick</code>。</p>
<p>保存-退出编辑器将我们带到命令提示符下，并显示以下消息。</p>
<div class="code"><pre class="code literal-block"><span class="nv">Stopped</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">ce36c98</span>...<span class="w"> </span><span class="nv">Careless</span>
<span class="nv">You</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">amend</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="nv">now</span>,<span class="w"> </span><span class="nv">with</span>

<span class="w">        </span><span class="nv">git</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="o">--</span><span class="nv">amend</span>

<span class="nv">Once</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">satisfied</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">changes</span>,<span class="w"> </span><span class="nv">run</span>

<span class="w">        </span><span class="nv">git</span><span class="w"> </span><span class="nv">rebase</span><span class="w"> </span><span class="o">--</span><span class="k">continue</span>
</pre></div>

<p>正如消息告诉我们的那样，我们正在进行要编辑的“粗心”提交，因此我们运行两个命令。</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>rm<span class="w"> </span>--cached<span class="w"> </span>oops.iso
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>--amend<span class="w"> </span>-C<span class="w"> </span>HEAD
$<span class="w"> </span>git<span class="w"> </span>rebase<span class="w"> </span>--continue
</pre></div>

<p>第一个从索引中删除有问题的文件。第二个将“Careless”修改或修改为更新的索引，并<code>-C HEAD</code>指示 git 重用旧的提交消息。最后，<code>git
rebase --continue</code>继续进行其余的变基操作。</p>
<p>这给出了以下历史：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>93174be<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>a570198<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>这就是你想要的。</p>
<h3>附录：<code>git lola</code>通过启用<code>~/.gitconfig</code>
</h3>
<p>引用康拉德·帕克的话：</p>
<blockquote>
<p>我在 2010 年 Scott Chacon 在 linux.conf.au 的演讲 Git Wrangling - Advanced Tips and
Tricks 中学到的最好的技巧是这个别名：</p>
<div class="code"><pre class="code literal-block">lol = log --graph --decorate --pretty=oneline --abbrev-commit
</pre></div>

<p>这提供了一个非常好的树图，显示了合并的分支结构等。当然，有非常好的 GUI 工具可以显示此类图，但它的优点是它可以在控制台或控制台上运行，<code>git
lol</code>因此<code>ssh</code>它对嵌入式板上的远程开发或本机开发……</p>
<p>So, just copy the following into <code>~/.gitconfig</code> for your full color <code>git
lola</code> action:</p>
<div class="code"><pre class="code literal-block"><span class="k">[alias]</span>
<span class="w">        </span><span class="na">lol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">log --graph --decorate --pretty=oneline --abbrev-commit</span>
<span class="w">        </span><span class="na">lola</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">log --graph --decorate --pretty=oneline --abbrev-commit</span>
</pre></div>

<p>--all
    [color]
            branch = auto
            diff = auto
            interactive = auto
            status = auto
</p>
</blockquote>
<p><br><br><a href="posts/how-to-remove-delete-a-large-file-from-commit-history-in-the-git-repository/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/python-zhong-bian-liang-he-han-shu-de-ming-ming-yue-ding-shi-shi-yao/" class="u-url">Python 中变量和函数的命名约定是什么？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/python-zhong-bian-liang-he-han-shu-de-ming-ming-yue-ding-shi-shi-yao/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:34:31+08:00" itemprop="datePublished" title="2023-02-17 07:34">2023-02-17 07:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>来自 C# 背景的变量和方法名称的命名约定通常是 camelCase 或 PascalCase：</p>
<div class="code"><pre class="code literal-block"><span class="c1">// C# example</span>
<span class="nb">string</span><span class="w"> </span><span class="n">thisIsMyVariable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"a"</span>
<span class="n">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">ThisIsMyMethod</span><span class="p">()</span>
</pre></div>

<p>在 Python 中，我看到了上面的内容，但我也看到使用了下划线：</p>
<div class="code"><pre class="code literal-block"><span class="c1"># python example</span>
<span class="n">this_is_my_variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'a'</span>
<span class="n">def</span><span class="w"> </span><span class="n">this_is_my_function</span><span class="p">():</span>
</pre></div>

<p>是否有更可取、更明确的 Python 编码风格？</p>
<p><br><br></p>
<h2>解答</h2>
<p>请参阅 Python PEP 8：函数和变量名称：</p>
<blockquote>
<p>函数名应该是小写的，必要时用下划线分隔单词以提高可读性。</p>
<p>变量名称遵循与函数名称相同的约定。</p>
<p>mixedCase只允许在已经是流行风格的上下文中使用（例如threading.py），以保持向后兼容性。</p>
</blockquote>
<p><br></p>
<h3>更多建议</h3>
<p>Google Python 风格指南有以下约定：</p>
<blockquote>
<p><code>module_name</code>,,,,,,,,,,,, <code>package_name</code>。<code>ClassName</code><em> <code>method_name</code></em>
<code>ExceptionName</code><em> <code>function_name</code></em> <code>GLOBAL_CONSTANT_NAME</code><em> <code>global_var_name</code></em>
<code>instance_var_name</code><em> <code>function_parameter_name</code></em> <code>local_var_name</code>_</p>
</blockquote>
<p>类似的命名方案应该应用于<code>CLASS_CONSTANT_NAME</code></p>
<p><br><br><a href="posts/what-is-the-naming-convention-in-python-for-variable-and-function/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-shu-lei-xing-pang-bian-de-3-ge-dian-zai-java-zhong-yi-wei-zhao-shi-yao/" class="u-url">参数类型旁边的 3 个点在 Java 中意味着什么？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-shu-lei-xing-pang-bian-de-3-ge-dian-zai-java-zhong-yi-wei-zhao-shi-yao/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:32:37+08:00" itemprop="datePublished" title="2023-02-17 07:32">2023-02-17 07:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>String</code>以下方法中后面的3个点是什么意思？</p>
<div class="code"><pre class="code literal-block">public void myMethod(String... strings) {
    // method body
}
</pre></div>

<p><br><br></p>
<h2>解答</h2>
<p>这意味着零个或多个 String 对象（或它们的单个数组）可以作为该方法的参数传递。</p>
<p>请参阅此处的“任意数量的参数”部分：http://java.sun.com/docs/books/tutorial/java/javaOO/arguments.html#varargs</p>
<p>在您的示例中，您可以将其称为以下任何一种：</p>
<div class="code"><pre class="code literal-block">myMethod(); // Likely useless, but possible
myMethod("one", "two", "three");
myMethod("solo");
myMethod(new String[]{"a", "b", "c"});
</pre></div>

<p><strong>重要说明：</strong> 以这种方式传递的参数始终是一个数组——即使只有一个。确保在方法主体中以这种方式对待它。</p>
<p><strong>重要说明 2：</strong> 获取 的参数<code>...</code>必须是方法签名中的最后一个。所以，<code>myMethod(int i, String...
strings)</code>没关系，但<code>myMethod(String... strings, int i)</code>不好。</p>
<p>感谢 Vash 在他的评论中做出的澄清。</p>
<p><br></p>
<h3>更多建议</h3>
<p>该功能称为varargs，它是 Java 5 中引入的功能。这意味着函数可以接收多个<code>String</code>参数：</p>
<div class="code"><pre class="code literal-block"><span class="n">myMethod</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">);</span>
<span class="n">myMethod</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w"> </span><span class="s2">"baz"</span><span class="p">);</span>
<span class="n">myMethod</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="p">[]{</span><span class="s2">"foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"var"</span><span class="p">,</span><span class="w"> </span><span class="s2">"baz"</span><span class="p">});</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">array</span>
</pre></div>

<p>然后，您可以将<code>String</code>var 用作数组：</p>
<div class="code"><pre class="code literal-block"><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">myMethod</span><span class="p">(</span><span class="n">String</span><span class="p">...</span><span class="w"> </span><span class="n">strings</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">whatever</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="n">strings</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">ever</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="k">to</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strings</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">classical</span><span class="w"> </span><span class="k">for</span><span class="p">.</span><span class="w"> </span><span class="ow">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">strings</span><span class="o">[</span><span class="n">i</span><span class="o">]</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>这个答案大量借鉴了 kiswa 和 Lorenzo 的……以及 Graphain 的评论。</p>
<p><br><br><a href="posts/what-do-3-dots-next-to-a-parameter-type-mean-in-java/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-464.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-462.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
