<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 463) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-463.html">
<link rel="prev" href="index-464.html" type="text/html">
<link rel="next" href="index-462.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-a-function-name-as-a-string/" class="u-url">How to get a function name as a string?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-a-function-name-as-a-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:27:47+08:00" itemprop="datePublished" title="2023-02-17 07:27">2023-02-17 07:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I get a function's name as a string?</p>
<div class="code"><pre class="code literal-block">def foo():
    pass

&gt;&gt;&gt; name_of(foo)
"foo"
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">my_function.__name__
</pre></div>

<p>Using <code>__name__</code> is the preferred method as it applies uniformly. Unlike
<code>func_name</code>, it works on built-in functions as well:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">time</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">func_name</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="err">?</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">'builtin_function_or_method'</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">'func_name'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="vm">__name__</span> 
<span class="s1">'time'</span>
</pre></div>

<p>Also the double underscores indicate to the reader this is a special
attribute. As a bonus, classes and modules have a <code>__name__</code> attribute too, so
you only have remember one special name.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To get the current function's or method's name from inside it, consider:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">inspect</span>

<span class="n">this_function_name</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</pre></div>

<p><code>sys._getframe</code> also works instead of <code>inspect.currentframe</code> although the
latter avoids accessing a private function.</p>
<p>To get the calling function's name instead, consider <code>f_back</code> as in
<code>inspect.currentframe().f_back.f_code.co_name</code>.</p>
<hr>
<p>If also using <code>mypy</code>, it can complain that:</p>
<blockquote>
<p>error: Item "None" of "Optional[FrameType]" has no attribute "f_code"</p>
</blockquote>
<p>To suppress the above error, consider:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>

<span class="n">this_function_name</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">FrameType</span><span class="p">,</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">())</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-set-a-default-value-for-a-mysql-datetime-column/" class="u-url">How do you set a default value for a MySQL Datetime column?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-set-a-default-value-for-a-mysql-datetime-column/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:27:20+08:00" itemprop="datePublished" title="2023-02-17 07:27">2023-02-17 07:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do you set a default value for a MySQL Datetime column?</p>
<p>In SQL Server it's <code>getdate()</code>. What is the equivalant for MySQL? I'm using
MySQL 5.x if that is a factor.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>IMPORTANT EDIT:</strong> It is now possible to achieve this with DATETIME fields
since <strong>MySQL 5.6.5</strong> , take a look at the other post below...</p>
<p>Previous versions can't do that with DATETIME...</p>
<p>But you can do it with TIMESTAMP:</p>
<div class="code"><pre class="code literal-block"><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> create table test (str varchar(32)</span><span class="nt">,</span><span class="c"> ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP);</span>
<span class="c">Query OK</span><span class="nt">,</span><span class="c"> 0 rows affected (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> desc test;</span>
<span class="nb">+-------+-------------+------+-----+-------------------+-------+</span>
<span class="c">| Field | Type        | Null | Key | Default           | Extra |</span>
<span class="nb">+-------+-------------+------+-----+-------------------+-------+</span>
<span class="c">| str   | varchar(32) | YES  |     | NULL              |       | </span>
<span class="c">| ts    | timestamp   | NO   |     | CURRENT_TIMESTAMP |       | </span>
<span class="nb">+-------+-------------+------+-----+-------------------+-------+</span>
<span class="c">2 rows in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> insert into test (str) values ("demo");</span>
<span class="c">Query OK</span><span class="nt">,</span><span class="c"> 1 row affected (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> select * from test;</span>
<span class="nb">+------+---------------------+</span>
<span class="c">| str  | ts                  |</span>
<span class="nb">+------+---------------------+</span>
<span class="c">| demo | 2008</span><span class="nb">-</span><span class="c">10</span><span class="nb">-</span><span class="c">03 22:59:52 | </span>
<span class="nb">+------+---------------------+</span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span>
</pre></div>

<p><strong>CAVEAT:</strong> <em>IF you define a column with CURRENT_TIMESTAMP ON as default, you
will need to ALWAYS specify a value for this column or the value will
automatically reset itself to "now()" on update. This means that if you do not
want the value to change, your UPDATE statement must contain "[your column
name] = [your column name]" (or some other value) or the value will become
"now()". Weird, but true. I am using 5.5.56-MariaDB</em></p>
<p><br></p>
<h3>Suggest</h3>
<p>In version 5.6.5, it is possible to set a default value on a datetime column,
and even make a column that will update when the row is updated. The type
definition:</p>
<div class="code"><pre class="code literal-block"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n n-Quoted">`creation_time`</span><span class="w">     </span><span class="kt">DATETIME</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
<span class="w">    </span><span class="n n-Quoted">`modification_time`</span><span class="w"> </span><span class="kt">DATETIME</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span>
<span class="p">)</span>
</pre></div>

<p>Reference: http://optimize-this.blogspot.com/2012/04/datetime-default-now-
finally-available.html</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-insert-an-element-after-another-element-in-javascript-without-using-a-library/" class="u-url">How to insert an element after another element in JavaScript without using a library?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-insert-an-element-after-another-element-in-javascript-without-using-a-library/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:26:53+08:00" itemprop="datePublished" title="2023-02-17 07:26">2023-02-17 07:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>There's <code>insertBefore()</code> in JavaScript, but how can I insert an element
<em>after</em> another element without using jQuery or another library?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
</pre></div>

<p>Where <code>referenceNode</code> is the node you want to put <code>newNode</code> after. If
<code>referenceNode</code> is the last child within its parent element, that's fine,
because <code>referenceNode.nextSibling</code> will be <code>null</code> and <code>insertBefore</code> handles
that case by adding to the end of the list.</p>
<p>So:</p>
<div class="code"><pre class="code literal-block">function insertAfter(referenceNode, newNode) {
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
}
</pre></div>

<hr>
<p>You can test it using the following snippet:</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block">function<span class="w"> </span>insertAfter(referenceNode,<span class="w"> </span>newNode)<span class="w"> </span>{
<span class="w">  </span>referenceNode.parentNode.insertBefore(newNode,<span class="w"> </span>referenceNode.nextSibling);
}

var<span class="w"> </span>el<span class="w"> </span>=<span class="w"> </span>document.createElement("span");
el.innerHTML<span class="w"> </span>=<span class="w"> </span>"test";
var<span class="w"> </span>div<span class="w"> </span>=<span class="w"> </span>document.getElementById("foo");
insertAfter(div,<span class="w"> </span>el);


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"foo"</span><span class="nt">&gt;</span>Hello<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Straightforward JavaScript would be the following:</p>
<p><em>Append Before:</em></p>
<div class="code"><pre class="code literal-block">element.parentNode.insertBefore(newElement, element);
</pre></div>

<p><em>Append After:</em></p>
<div class="code"><pre class="code literal-block">element.parentNode.insertBefore(newElement, element.nextSibling);
</pre></div>

<hr>
<p>But toss some <em>prototypes</em> in there for ease of use:</p>
<p>By building the following prototypes, you will be able to call these function
directly from newly created elements.</p>
<ul>
<li>
<p><code>newElement.appendBefore(element);</code></p>
</li>
<li>
<p><code>newElement.appendAfter(element);</code></p>
</li>
</ul>
<p><em>.appendBefore(element) Prototype</em></p>
<div class="code"><pre class="code literal-block">Element.prototype.appendBefore = function (element) {
  element.parentNode.insertBefore(this, element);
},false;
</pre></div>

<p><em>.appendAfter(element) Prototype</em></p>
<div class="code"><pre class="code literal-block">Element.prototype.appendAfter = function (element) {
  element.parentNode.insertBefore(this, element.nextSibling);
},false;
</pre></div>

<hr>
<p>Code Snippet to see it all in action:</p>
<p>Show code snippet</p>
<div class="code"><pre class="code literal-block">/*<span class="w"> </span>Adds<span class="w"> </span>Element<span class="w"> </span>BEFORE<span class="w"> </span>NeighborElement<span class="w"> </span>*/
Element.prototype.appendBefore<span class="w"> </span>=<span class="w"> </span>function(element)<span class="w"> </span>{
<span class="w">  </span>element.parentNode.insertBefore(this,<span class="w"> </span>element);
},<span class="w"> </span>false;

/*<span class="w"> </span>Adds<span class="w"> </span>Element<span class="w"> </span>AFTER<span class="w"> </span>NeighborElement<span class="w"> </span>*/
Element.prototype.appendAfter<span class="w"> </span>=<span class="w"> </span>function(element)<span class="w"> </span>{
<span class="w">  </span>element.parentNode.insertBefore(this,<span class="w"> </span>element.nextSibling);
},<span class="w"> </span>false;


/*<span class="w"> </span>Typical<span class="w"> </span>Creation<span class="w"> </span>and<span class="w"> </span>Setup<span class="w"> </span>A<span class="w"> </span>New<span class="w"> </span>Orphaned<span class="w"> </span>Element<span class="w"> </span>Object<span class="w"> </span>*/
var<span class="w"> </span>NewElement<span class="w"> </span>=<span class="w"> </span>document.createElement('div');
NewElement.innerHTML<span class="w"> </span>=<span class="w"> </span>'New<span class="w"> </span>Element';
NewElement.id<span class="w"> </span>=<span class="w"> </span>'NewElement';


/*<span class="w"> </span>Add<span class="w"> </span>NewElement<span class="w"> </span>BEFORE<span class="w"> </span>-OR-<span class="w"> </span>AFTER<span class="w"> </span>Using<span class="w"> </span>the<span class="w"> </span>Aforementioned<span class="w"> </span>Prototypes<span class="w"> </span>*/
NewElement.appendAfter(document.getElementById('Neighbor2'));


div<span class="w"> </span>{
<span class="w">  </span>text-align:<span class="w"> </span>center;
}
#Neighborhood<span class="w"> </span>{
<span class="w">  </span>color:<span class="w"> </span>brown;
}
#NewElement<span class="w"> </span>{
<span class="w">  </span>color:<span class="w"> </span>green;
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"Neighborhood"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"Neighbor1"</span><span class="nt">&gt;</span>Neighbor<span class="w"> </span>1<span class="nt">&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"Neighbor2"</span><span class="nt">&gt;</span>Neighbor<span class="w"> </span>2<span class="nt">&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"Neighbor3"</span><span class="nt">&gt;</span>Neighbor<span class="w"> </span>3<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p><strong>Run it on JSFiddle</strong></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-464.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-462.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
