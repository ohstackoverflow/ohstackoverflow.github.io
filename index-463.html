<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 463) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-463.html">
<link rel="prev" href="index-464.html" type="text/html">
<link rel="next" href="index-462.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-deal-with-this-git-warning-pulling-without-specifying-how-to-reconcile-divergent-branches-is-discouraged/" class="u-url">How can I deal with this Git warning? "Pulling without specifying how to reconcile divergent branches is discouraged"</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-deal-with-this-git-warning-pulling-without-specifying-how-to-reconcile-divergent-branches-is-discouraged/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:28:16+08:00" itemprop="datePublished" title="2023-02-17 07:28">2023-02-17 07:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>After a <code>git pull origin master</code>, I get the following message:</p>
<div class="code"><pre class="code literal-block"><span class="n">warning</span><span class="o">:</span><span class="w"> </span><span class="n">Pulling</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">specifying</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reconcile</span><span class="w"> </span><span class="n">divergent</span><span class="w"> </span><span class="n">branches</span><span class="w"> </span><span class="k">is</span>
<span class="n">discouraged</span><span class="o">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">squelch</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span>
<span class="n">commands</span><span class="w"> </span><span class="n">sometime</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">pull</span><span class="o">:</span>

<span class="w">  </span><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">pull</span><span class="o">.</span><span class="na">rebase</span><span class="w"> </span><span class="kc">false</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="o">(</span><span class="n">the</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">strategy</span><span class="o">)</span>
<span class="w">  </span><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">pull</span><span class="o">.</span><span class="na">rebase</span><span class="w"> </span><span class="kc">true</span><span class="w">   </span><span class="err">#</span><span class="w"> </span><span class="n">rebase</span>
<span class="w">  </span><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">pull</span><span class="o">.</span><span class="na">ff</span><span class="w"> </span><span class="n">only</span><span class="w">       </span><span class="err">#</span><span class="w"> </span><span class="n">fast</span><span class="o">-</span><span class="n">forward</span><span class="w"> </span><span class="n">only</span>

<span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="s2">"git config"</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s2">"git config --global"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kd">set</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">default</span>
<span class="n">preference</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">repositories</span><span class="o">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="o">--</span><span class="n">rebase</span><span class="o">,</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">rebase</span><span class="o">,</span>
<span class="n">or</span><span class="w"> </span><span class="o">--</span><span class="n">ff</span><span class="o">-</span><span class="n">only</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="kd">override</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">per</span>
<span class="n">invocation</span><span class="o">.</span>

<span class="n">remote</span><span class="o">:</span><span class="w"> </span><span class="n">Enumerating</span><span class="w"> </span><span class="n">objects</span><span class="o">:</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="n">done</span><span class="o">.</span>
<span class="n">remote</span><span class="o">:</span><span class="w"> </span><span class="n">Counting</span><span class="w"> </span><span class="n">objects</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="o">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="o">),</span><span class="w"> </span><span class="n">done</span><span class="o">.</span>
<span class="n">remote</span><span class="o">:</span><span class="w"> </span><span class="n">Compressing</span><span class="w"> </span><span class="n">objects</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="o">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="o">),</span><span class="w"> </span><span class="n">done</span><span class="o">.</span>
<span class="n">remote</span><span class="o">:</span><span class="w"> </span><span class="n">Total</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">(</span><span class="n">delta</span><span class="w"> </span><span class="mi">0</span><span class="o">),</span><span class="w"> </span><span class="n">reused</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">(</span><span class="n">delta</span><span class="w"> </span><span class="mi">0</span><span class="o">),</span><span class="w"> </span><span class="n">pack</span><span class="o">-</span><span class="n">reused</span><span class="w"> </span><span class="mi">0</span>
<span class="n">Unpacking</span><span class="w"> </span><span class="n">objects</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="o">(</span><span class="mi">4</span><span class="sr">/4), 51.49 KiB | 850.00 KiB/s</span><span class="o">,</span><span class="w"> </span><span class="n">done</span><span class="o">.</span>
</pre></div>

<p>The pull seems successful, but I am unsure.</p>
<p>What can I do to fix this?</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>In its default mode, git pull is shorthand for git fetch followed by git
merge FETCH_HEAD.</p>
</blockquote>
<p>When you do a <code>git pull origin master</code>,<br><code>git pull</code> performs a merge, which often creates a merge commit. Therefore, by
default, pulling from the remote is <em>not</em> a harmless operation: it can create
a new commit SHA hash value that didn’t exist before. This behavior can
confuse a user, because what feels like it should be a harmless download
operation actually changes the commit history in unpredictable ways.</p>
<p>To avoid this, you need</p>
<div class="code"><pre class="code literal-block">git pull --ff-only
</pre></div>

<p>(or not? read on to see which one fits your requirements)</p>
<p>With <code>git pull --ff-only</code>, Git will update your branch only if it can be
“fast-forwarded” without creating new commits. If this can’t be done, <code>git
pull --ff-only</code> simply aborts with an error message.</p>
<p>You can configure your Git client to always use <code>--ff-only</code> by default, so you
get this behavior even if you forget the command-line flag:</p>
<div class="code"><pre class="code literal-block">git config --global pull.ff only
</pre></div>

<p>Note: The <code>--global</code> flag applies the change for all repositories on your
machine. If you want this behaviour only for the repository you're in, omit
the flag.</p>
<p>Taken from here  </p>
<hr>
<p>This warning was added in Git 2.27.</p>
<p>This is what the complete warning looks like:</p>
<blockquote>
<p>Pulling without specifying how to reconcile divergent branches is
discouraged. You can squelch this message by running one of the following
commands sometime before your next pull:  </p>
<p>git config pull.rebase false # merge (the default strategy)<br>
 git config pull.rebase true # rebase<br>
 git config pull.ff only # fast-forward only  </p>
<p>You can replace "git config" with "git config --global" to set a default
preference for all repositories. You can also pass --rebase, --no-rebase, or
--ff-only on the command line to override the configured default per
invocation.</p>
</blockquote>
<p>The warning presents three commands as options, all of these will suppress the
warning. But they serve different purposes:</p>
<div class="code"><pre class="code literal-block">git config pull.rebase false     # merge (the default strategy)
</pre></div>

<p>This keeps the default behaviour and suppresses the warning.</p>
<div class="code"><pre class="code literal-block">git config pull.rebase true      # rebase
</pre></div>

<p>This actually commits on top of the remote branch, maintaining a single branch
both locally and remotely (unlike the default behaviour where two different
branches are involved - one on local and the other on remote - and, to combine
the two, a merge is performed).</p>
<div class="code"><pre class="code literal-block">git config pull.ff only          # fast-forward only
</pre></div>

<p>This only performs the pull if the local branch can be fast-forwarded. If not,
it simply aborts with an error message (and does not create any commits).</p>
<hr>
<p><strong>Update:</strong>  </p>
<p>If you have Git 2.29 or above, you can now set <code>pull.ff</code> to <code>false</code>, <code>true</code> or
<code>only</code> to get rid of the warning.</p>
<div class="code"><pre class="code literal-block">git config pull.ff true
</pre></div>

<p><code>true</code> - This is the default behaviour. Pull is fast-forwarded if possible,
otherwise it's merged.</p>
<div class="code"><pre class="code literal-block">git config pull.ff false
</pre></div>

<p><code>false</code> - Pull is never fast-forwarded, and a merge is always created.</p>
<div class="code"><pre class="code literal-block">git config pull.ff only
</pre></div>

<p><code>only</code> - Pull is fast-forwarded if possible, otherwise operation is aborted
with an error message.</p>
<hr>
<p><strong>Note:</strong> You may want to keep an eye on VonC's answer here for updates on
changes made to this feature in future updates.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is a new warning added in Git 2.27:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s2">"git pull"</span><span class="w"> </span><span class="n">issues</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pull</span><span class="o">.</span><span class="n">rebase</span>
<span class="w">   </span><span class="n">configuration</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="n">given</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">existing</span>
<span class="w">   </span><span class="n">users</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">annoying</span><span class="o">---</span><span class="n">those</span><span class="w"> </span><span class="n">who</span><span class="w"> </span><span class="n">prefer</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rebase</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span>
<span class="w">   </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="bp">false</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">squelch</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">warning</span><span class="o">.</span>
</pre></div>

<p>To remove the warning, set one of the suggested values to your preferred
default behaviour for <code>git pull</code> if you don't specify behaviour on the command
line (using <code>--ff</code>, <code>--no-ff</code>, <code>--ff-only</code>, <code>--rebase</code>). In all cases, <code>git</code>
will attempt a fast-forward (What is git fast-forwarding?) merge if possible.
The settings control what happens when there are changes in your branch but
<em>not</em> present in the remote branch.</p>
<div class="code"><pre class="code literal-block">  git config pull.rebase false  # merge (the default strategy)
</pre></div>

<p>This is the existing default behaviour; set this for no warning, and no change
in behaviour; <code>git</code> will merge the remote branch into your local one.</p>
<div class="code"><pre class="code literal-block">  git config pull.rebase true   # rebase
</pre></div>

<p>Here, <code>git</code> will attempt to rebase your changes on top of the remote branch.
See When should I use git pull --rebase? for more detail on why you might want
that.</p>
<div class="code"><pre class="code literal-block">  git config pull.ff only       # fast-forward only
</pre></div>

<p>If a fast-forward merge is not possible, <code>git</code> will refuse to proceed. As
Difference between git pull --rebase and git pull --ff-only quotes:</p>
<blockquote>
<p>Refuse to merge and exit with a non-zero status unless the current HEAD is
already up-to-date or the merge can be resolved as a fast-forward</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-a-function-name-as-a-string/" class="u-url">How to get a function name as a string?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-a-function-name-as-a-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:27:47+08:00" itemprop="datePublished" title="2023-02-17 07:27">2023-02-17 07:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I get a function's name as a string?</p>
<div class="code"><pre class="code literal-block">def foo():
    pass

&gt;&gt;&gt; name_of(foo)
"foo"
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">my_function.__name__
</pre></div>

<p>Using <code>__name__</code> is the preferred method as it applies uniformly. Unlike
<code>func_name</code>, it works on built-in functions as well:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">time</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">func_name</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="err">?</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">'builtin_function_or_method'</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">'func_name'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="vm">__name__</span> 
<span class="s1">'time'</span>
</pre></div>

<p>Also the double underscores indicate to the reader this is a special
attribute. As a bonus, classes and modules have a <code>__name__</code> attribute too, so
you only have remember one special name.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To get the current function's or method's name from inside it, consider:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">inspect</span>

<span class="n">this_function_name</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</pre></div>

<p><code>sys._getframe</code> also works instead of <code>inspect.currentframe</code> although the
latter avoids accessing a private function.</p>
<p>To get the calling function's name instead, consider <code>f_back</code> as in
<code>inspect.currentframe().f_back.f_code.co_name</code>.</p>
<hr>
<p>If also using <code>mypy</code>, it can complain that:</p>
<blockquote>
<p>error: Item "None" of "Optional[FrameType]" has no attribute "f_code"</p>
</blockquote>
<p>To suppress the above error, consider:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>

<span class="n">this_function_name</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">FrameType</span><span class="p">,</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">())</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-set-a-default-value-for-a-mysql-datetime-column/" class="u-url">How do you set a default value for a MySQL Datetime column?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-set-a-default-value-for-a-mysql-datetime-column/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:27:20+08:00" itemprop="datePublished" title="2023-02-17 07:27">2023-02-17 07:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do you set a default value for a MySQL Datetime column?</p>
<p>In SQL Server it's <code>getdate()</code>. What is the equivalant for MySQL? I'm using
MySQL 5.x if that is a factor.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>IMPORTANT EDIT:</strong> It is now possible to achieve this with DATETIME fields
since <strong>MySQL 5.6.5</strong> , take a look at the other post below...</p>
<p>Previous versions can't do that with DATETIME...</p>
<p>But you can do it with TIMESTAMP:</p>
<div class="code"><pre class="code literal-block"><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> create table test (str varchar(32)</span><span class="nt">,</span><span class="c"> ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP);</span>
<span class="c">Query OK</span><span class="nt">,</span><span class="c"> 0 rows affected (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> desc test;</span>
<span class="nb">+-------+-------------+------+-----+-------------------+-------+</span>
<span class="c">| Field | Type        | Null | Key | Default           | Extra |</span>
<span class="nb">+-------+-------------+------+-----+-------------------+-------+</span>
<span class="c">| str   | varchar(32) | YES  |     | NULL              |       | </span>
<span class="c">| ts    | timestamp   | NO   |     | CURRENT_TIMESTAMP |       | </span>
<span class="nb">+-------+-------------+------+-----+-------------------+-------+</span>
<span class="c">2 rows in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> insert into test (str) values ("demo");</span>
<span class="c">Query OK</span><span class="nt">,</span><span class="c"> 1 row affected (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> select * from test;</span>
<span class="nb">+------+---------------------+</span>
<span class="c">| str  | ts                  |</span>
<span class="nb">+------+---------------------+</span>
<span class="c">| demo | 2008</span><span class="nb">-</span><span class="c">10</span><span class="nb">-</span><span class="c">03 22:59:52 | </span>
<span class="nb">+------+---------------------+</span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>

<span class="c">mysql</span><span class="nv">&gt;</span>
</pre></div>

<p><strong>CAVEAT:</strong> <em>IF you define a column with CURRENT_TIMESTAMP ON as default, you
will need to ALWAYS specify a value for this column or the value will
automatically reset itself to "now()" on update. This means that if you do not
want the value to change, your UPDATE statement must contain "[your column
name] = [your column name]" (or some other value) or the value will become
"now()". Weird, but true. I am using 5.5.56-MariaDB</em></p>
<p><br></p>
<h3>Suggest</h3>
<p>In version 5.6.5, it is possible to set a default value on a datetime column,
and even make a column that will update when the row is updated. The type
definition:</p>
<div class="code"><pre class="code literal-block"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n n-Quoted">`creation_time`</span><span class="w">     </span><span class="kt">DATETIME</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
<span class="w">    </span><span class="n n-Quoted">`modification_time`</span><span class="w"> </span><span class="kt">DATETIME</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span>
<span class="p">)</span>
</pre></div>

<p>Reference: http://optimize-this.blogspot.com/2012/04/datetime-default-now-
finally-available.html</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-464.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-462.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
