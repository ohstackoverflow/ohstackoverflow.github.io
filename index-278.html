<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 278) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-278.html">
<link rel="prev" href="index-279.html" type="text/html">
<link rel="next" href="index-277.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-pass-props-to-this-props-children/" class="u-url">How to pass props to {this.props.children}</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-pass-props-to-this-props-children/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:49:42+08:00" itemprop="datePublished" title="2023-02-17 02:49">2023-02-17 02:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to find the proper way to define some components which could be
used in a generic way:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;Parent&gt;</span>
<span class="w">  </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;Child</span><span class="w"> </span><span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/Parent&gt;</span>
</pre></div>

<p>There is a logic going on for rendering between parent and children components
of course, you can imagine <code>&lt;select&gt;</code> and <code>&lt;option&gt;</code> as an example of this
logic.</p>
<p>This is a dummy implementation for the purpose of the question:</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>Parent<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>doSomething:<span class="w"> </span>function(value)<span class="w"> </span>{
<span class="w">  </span>},
<span class="w">  </span>render:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>(<span class="nt">&lt;div&gt;</span>{this.props.children}<span class="nt">&lt;/div&gt;</span>);
<span class="w">  </span>}
});

var<span class="w"> </span>Child<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>onClick:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span>this.props.doSomething(this.props.value);<span class="w"> </span>//<span class="w"> </span>doSomething<span class="w"> </span>is<span class="w"> </span>undefined
<span class="w">  </span>},
<span class="w">  </span>render:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>(<span class="nt">&lt;div</span><span class="w"> </span><span class="na">onClick=</span><span class="s">{this.onClick}</span><span class="nt">&gt;&lt;/div&gt;</span>);
<span class="w">  </span>}
});
</pre></div>

<p>The question is whenever you use <code>{this.props.children}</code> to define a wrapper
component, how do you pass down some property to all its children?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Cloning children with new props</h3>
<p>You can use <code>React.Children</code> to iterate over the children, and then clone each
element with new props (shallow merged) using <code>React.cloneElement</code>.</p>
<p>See the code comment why I don't recommend this approach.</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">Child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="n">childName</span><span class="p">,</span><span class="w"> </span><span class="n">sayHello</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">sayHello</span><span class="p">(</span><span class="n">childName</span><span class="p">)}</span><span class="o">&gt;</span><span class="p">{</span><span class="n">childName</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
<span class="p">);</span>

<span class="n">function</span><span class="w"> </span><span class="nf">Parent</span><span class="p">({</span><span class="w"> </span><span class="n">children</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// We pass this `sayHello` function into the child elements.</span>
<span class="w">  </span><span class="n">function</span><span class="w"> </span><span class="n">sayHello</span><span class="p">(</span><span class="n">childName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Hello</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">$</span><span class="p">{</span><span class="n">childName</span><span class="p">}</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">child</span><span class="err">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">childrenWithProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">React</span><span class="p">.</span><span class="n">Children</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Checking isValidElement is the safe way and avoids a</span>
<span class="w">    </span><span class="c1">// typescript error too.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">React</span><span class="p">.</span><span class="n">isValidElement</span><span class="p">(</span><span class="n">child</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">React</span><span class="p">.</span><span class="n">cloneElement</span><span class="p">(</span><span class="n">child</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">sayHello</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">child</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span><span class="p">{</span><span class="n">childrenWithProps</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="nf">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// This approach is less type-safe and Typescript friendly since it</span>
<span class="w">  </span><span class="c1">// looks like you're trying to render `Child` without `sayHello`.</span>
<span class="w">  </span><span class="c1">// It's also confusing to readers of this code.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">Parent</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">childName</span><span class="o">=</span><span class="s">"Billy"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">childName</span><span class="o">=</span><span class="s">"Bob"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;/</span><span class="n">Parent</span><span class="o">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">ReactDOM</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="o">&lt;</span><span class="n">App</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">"container"</span><span class="p">));</span>


<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react@17/umd/react.production.min.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="kt">id</span><span class="o">=</span><span class="s">"container"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>

<h3>Calling children as a function</h3>
<p>Alternatively, you can pass props to children via render props. In this
approach, the children (which can be <code>children</code> or any other prop name) is a
function which can accept any arguments you want to pass and returns the
actual children:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">Child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="n">childName</span><span class="p">,</span><span class="w"> </span><span class="n">sayHello</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">sayHello</span><span class="p">(</span><span class="n">childName</span><span class="p">)}</span><span class="o">&gt;</span><span class="p">{</span><span class="n">childName</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
<span class="p">);</span>

<span class="n">function</span><span class="w"> </span><span class="nf">Parent</span><span class="p">({</span><span class="w"> </span><span class="n">children</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">function</span><span class="w"> </span><span class="n">sayHello</span><span class="p">(</span><span class="n">childName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="err">`</span><span class="n">Hello</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">$</span><span class="p">{</span><span class="n">childName</span><span class="p">}</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">child</span><span class="err">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// `children` of this component must be a function</span>
<span class="w">  </span><span class="c1">// which returns the actual children. We can pass</span>
<span class="w">  </span><span class="c1">// it args to then pass into them as props (in this</span>
<span class="w">  </span><span class="c1">// case we pass `sayHello`).</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span><span class="p">{</span><span class="n">children</span><span class="p">(</span><span class="n">sayHello</span><span class="p">)}</span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="nf">App</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// sayHello is the arg we passed in Parent, which</span>
<span class="w">  </span><span class="c1">// we now pass through to Child.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">Parent</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{(</span><span class="n">sayHello</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="n">React</span><span class="p">.</span><span class="n">Fragment</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">childName</span><span class="o">=</span><span class="s">"Billy"</span><span class="w"> </span><span class="n">sayHello</span><span class="o">=</span><span class="p">{</span><span class="n">sayHello</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="n">Child</span><span class="w"> </span><span class="n">childName</span><span class="o">=</span><span class="s">"Bob"</span><span class="w"> </span><span class="n">sayHello</span><span class="o">=</span><span class="p">{</span><span class="n">sayHello</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;/</span><span class="n">React</span><span class="p">.</span><span class="n">Fragment</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">)}</span>
<span class="w">    </span><span class="o">&lt;/</span><span class="n">Parent</span><span class="o">&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">ReactDOM</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="o">&lt;</span><span class="n">App</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">"container"</span><span class="p">));</span>


<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react@17/umd/react.production.min.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="kt">id</span><span class="o">=</span><span class="s">"container"</span><span class="o">&gt;&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>For a slightly cleaner way to do it, try:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div&gt;</span>
<span class="w">    </span>{React.cloneElement(this.props.children,<span class="w"> </span>{<span class="w"> </span>loggedIn:<span class="w"> </span>this.state.loggedIn<span class="w"> </span>})}
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>Edit: To use with multiple individual children (the child must itself be a
component) you can do. Tested in 16.8.6</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div&gt;</span>
<span class="w">    </span>{React.cloneElement(this.props.children[0],<span class="w"> </span>{<span class="w"> </span>loggedIn:<span class="w"> </span>true,<span class="w"> </span>testPropB:<span class="w"> </span>true<span class="w"> </span>})}
<span class="w">    </span>{React.cloneElement(this.props.children[1],<span class="w"> </span>{<span class="w"> </span>loggedIn:<span class="w"> </span>true,<span class="w"> </span>testPropA:<span class="w"> </span>false<span class="w"> </span>})}
<span class="nt">&lt;/div&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-reformat-html-code-using-sublime-text-2/" class="u-url">How do I reformat HTML code using Sublime Text 2?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-reformat-html-code-using-sublime-text-2/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:48:44+08:00" itemprop="datePublished" title="2023-02-17 02:48">2023-02-17 02:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've got some poorly-formatted HTML code that I'd like to reformat. Is there a
command that will automatically reformat HTML code in Sublime Text 2 so it
looks better and is easier to read?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You don't need any plugins to do this. Just select all lines (<code>CTRL</code>+<code>A</code>) and
then from the menu select Edit → Line → Reindent. This will work if your file
is saved with an extension that contains HTML like <code>.html</code> or <code>.php</code>.</p>
<p>If you do this often, you may find this key mapping useful:</p>
<div class="code"><pre class="code literal-block">{ "keys": ["ctrl+shift+r"], "command": "reindent" , "args": { "single_line": false } }
</pre></div>

<p>If your file is not saved (e.g. you just pasted in a snippet to a new window),
you can manually set the language for indentation by selecting the menu View →
Syntax → <code>language of choice</code> before selecting the reindent option.</p>
<p><br></p>
<h3>Suggest</h3>
<p>There are half a dozen or so ways to format HTML in Sublime. I've tested each
of the most popular plugins (see the writeup I did on my blog for full
details), but here's a quick overview of some of the most popular options:</p>
<h3>Reindent command</h3>
<p>Pros:</p>
<ul>
<li>Ships with Sublime, so no plugin install needed</li>
</ul>
<p>Cons:</p>
<ul>
<li>Doesn't delete extra blank lines</li>
<li>Can't handle minified HTML, lines with multiple open tags</li>
<li>Doesn't properly format <code>&lt;script&gt;</code> blocks</li>
</ul>
<h3>Tag</h3>
<p>Pros:</p>
<ul>
<li>Supports ST2/ST3</li>
<li>Removes extra blank lines</li>
<li>No binary dependencies</li>
</ul>
<p>Cons:</p>
<ul>
<li>Chokes on PHP tags</li>
<li>Doesn't handle <code>&lt;script&gt;</code> blocks correctly</li>
</ul>
<h3>HTMLTidy</h3>
<p>Pros:</p>
<ul>
<li>Handles PHP tags</li>
<li>Some settings to tweak formatting</li>
</ul>
<p>Cons:</p>
<ul>
<li>Requires PHP (falls back to web service)</li>
<li>ST2 only</li>
<li>Abandoned?</li>
</ul>
<h3>HTMLBeautify</h3>
<p>Pros:</p>
<ul>
<li>Supports ST2/ST3</li>
<li>Simple and no binaray dependencies</li>
<li>Support for OS X, Win and Linux</li>
</ul>
<p>Cons:</p>
<ul>
<li>Chokes a bit with inline comments</li>
<li>Does not expand minimized or compressed code</li>
</ul>
<h3>HTML-CSS-JS Prettify</h3>
<p>Pros:</p>
<ul>
<li>Supports ST2/ST3</li>
<li>Handles HTML, CSS, JS</li>
<li>Great integration with Sublime's menus</li>
<li>Highly customizable</li>
<li>Per-project settings</li>
<li>Format on save option</li>
</ul>
<p>Cons:</p>
<ul>
<li>Requires Node.js</li>
<li>Not great for embedded PHP</li>
</ul>
<h3>Which is best?</h3>
<p>HTML-CSS-JS Prettify is the winner in my book. Lots of great features, not
much to complain about.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-the-xms-and-xmx-parameters-when-starting-jvm/" class="u-url">What are the -Xms and -Xmx parameters when starting JVM?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-the-xms-and-xmx-parameters-when-starting-jvm/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:48:21+08:00" itemprop="datePublished" title="2023-02-17 02:48">2023-02-17 02:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Please explain the use of the <code>Xms</code> and <code>Xmx</code> parameters in JVMs. What are the
default values for them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The flag <code>Xmx</code> specifies the maximum memory allocation pool for a Java Virtual
Machine (JVM), while <code>Xms</code> specifies the initial memory allocation pool.</p>
<p>This means that your JVM will be started with <code>Xms</code> amount of memory and will
be able to use a maximum of <code>Xmx</code> amount of memory. For example, starting a
JVM like below will start it with 256 MB of memory and will allow the process
to use up to 2048 MB of memory:</p>
<div class="code"><pre class="code literal-block">java -Xms256m -Xmx2048m
</pre></div>

<p>The memory flag can also be specified in different sizes, such as kilobytes,
megabytes, and so on.</p>
<div class="code"><pre class="code literal-block">-Xmx1024k
-Xmx512m
-Xmx8g
</pre></div>

<p>The <code>Xms</code> flag has no default value, and <code>Xmx</code> typically has a default value
of 256 MB. A common use for these flags is when you encounter a
<code>java.lang.OutOfMemoryError</code>.</p>
<p>When using these settings, keep in mind that these settings are for the JVM's
<em>heap</em> , and that the JVM can and will use more memory than just the size
allocated to the heap. From Oracle's documentation:</p>
<blockquote>
<p>Note that the JVM uses more memory than just the heap. For example Java
methods, thread stacks and native handles are allocated in memory separate
from the heap, as well as JVM internal data structures.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Run the command <code>java -X</code> and you will get a list of all <code>-X</code> options:</p>
<div class="code"><pre class="code literal-block"><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">Admin</span><span class="o">&gt;</span><span class="n">java</span><span class="w"> </span><span class="o">-</span><span class="n">X</span>
<span class="o">-</span><span class="n">Xmixed</span><span class="w">           </span><span class="n">mixed</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">-</span><span class="n">Xint</span><span class="w">             </span><span class="n">interpreted</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">only</span>
<span class="o">-</span><span class="n">Xbootclasspath</span><span class="p">:</span><span class="o">&lt;</span><span class="n">directories</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">zip</span><span class="o">/</span><span class="n">jar</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="p">;</span><span class="o">&gt;</span>
<span class="w">                      </span><span class="n">set</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">bootstrap</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">resources</span>
<span class="o">-</span><span class="n">Xbootclasspath</span><span class="o">/</span><span class="n">a</span><span class="p">:</span><span class="o">&lt;</span><span class="n">directories</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">zip</span><span class="o">/</span><span class="n">jar</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="p">;</span><span class="o">&gt;</span>
<span class="w">                      </span><span class="n">append</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">bootstrap</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">path</span>
<span class="o">-</span><span class="n">Xbootclasspath</span><span class="o">/</span><span class="n">p</span><span class="p">:</span><span class="o">&lt;</span><span class="n">directories</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">zip</span><span class="o">/</span><span class="n">jar</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">separated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="p">;</span><span class="o">&gt;</span>
<span class="w">                      </span><span class="n">prepend</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">front</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">bootstrap</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">path</span>
<span class="o">-</span><span class="n">Xdiag</span><span class="w">            </span><span class="n">show</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">diagnostic</span><span class="w"> </span><span class="n">messages</span>
<span class="o">-</span><span class="n">Xnoclassgc</span><span class="w">       </span><span class="n">disable</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">garbage</span><span class="w"> </span><span class="n">collection</span>
<span class="o">-</span><span class="n">Xincgc</span><span class="w">           </span><span class="n">enable</span><span class="w"> </span><span class="n">incremental</span><span class="w"> </span><span class="n">garbage</span><span class="w"> </span><span class="n">collection</span>
<span class="o">-</span><span class="n">Xloggc</span><span class="p">:</span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="w">    </span><span class="nb">log</span><span class="w"> </span><span class="n">GC</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">stamps</span>
<span class="o">-</span><span class="n">Xbatch</span><span class="w">           </span><span class="n">disable</span><span class="w"> </span><span class="n">background</span><span class="w"> </span><span class="n">compilation</span>
<span class="o">-</span><span class="n">Xms</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span><span class="w">        </span><span class="n">set</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="n">heap</span><span class="w"> </span><span class="n">size</span><span class="o">.........................</span>
<span class="o">-</span><span class="n">Xmx</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span><span class="w">        </span><span class="n">set</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">Java</span><span class="w"> </span><span class="n">heap</span><span class="w"> </span><span class="n">size</span><span class="o">.........................</span>
<span class="o">-</span><span class="n">Xss</span><span class="o">&lt;</span><span class="n">size</span><span class="o">&gt;</span><span class="w">        </span><span class="n">set</span><span class="w"> </span><span class="n">java</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="n">stack</span><span class="w"> </span><span class="n">size</span>
<span class="o">-</span><span class="n">Xprof</span><span class="w">            </span><span class="n">output</span><span class="w"> </span><span class="n">cpu</span><span class="w"> </span><span class="n">profiling</span><span class="w"> </span><span class="n">data</span>
<span class="o">-</span><span class="n">Xfuture</span><span class="w">          </span><span class="n">enable</span><span class="w"> </span><span class="n">strictest</span><span class="w"> </span><span class="n">checks</span><span class="p">,</span><span class="w"> </span><span class="n">anticipating</span><span class="w"> </span><span class="n">future</span><span class="w"> </span><span class="n">default</span>
<span class="o">-</span><span class="n">Xrs</span><span class="w">              </span><span class="n">reduce</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">OS</span><span class="w"> </span><span class="n">signals</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">Java</span><span class="o">/</span><span class="n">VM</span><span class="w"> </span><span class="p">(</span><span class="n">see</span><span class="w"> </span><span class="n">documentation</span><span class="p">)</span>
<span class="o">-</span><span class="n">Xcheck</span><span class="p">:</span><span class="n">jni</span><span class="w">       </span><span class="n">perform</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">checks</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">JNI</span><span class="w"> </span><span class="n">functions</span>
<span class="o">-</span><span class="n">Xshare</span><span class="p">:</span><span class="n">off</span><span class="w">       </span><span class="n">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">attempt</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">data</span>
<span class="o">-</span><span class="n">Xshare</span><span class="p">:</span><span class="n">auto</span><span class="w">      </span><span class="n">use</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">possible</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">-</span><span class="n">Xshare</span><span class="p">:</span><span class="n">on</span><span class="w">        </span><span class="n">require</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">fail</span><span class="o">.</span>
<span class="o">-</span><span class="n">XshowSettings</span><span class="w">    </span><span class="n">show</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">continue</span>
<span class="o">-</span><span class="n">XshowSettings</span><span class="p">:</span><span class="n">all</span><span class="w">         </span><span class="n">show</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">continue</span>
<span class="o">-</span><span class="n">XshowSettings</span><span class="p">:</span><span class="n">vm</span><span class="w">          </span><span class="n">show</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">vm</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">continue</span>
<span class="o">-</span><span class="n">XshowSettings</span><span class="p">:</span><span class="n">properties</span><span class="w">  </span><span class="n">show</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">continue</span>
<span class="o">-</span><span class="n">XshowSettings</span><span class="p">:</span><span class="n">locale</span><span class="w">      </span><span class="n">show</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">locale</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">continue</span>
</pre></div>

<p><strong>The -X options are non-standard and subject to change without notice.</strong></p>
<p>I hope this will help you understand <code>Xms</code>, <code>Xmx</code> as well as many other things
that matters the most. :)</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-279.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-277.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
