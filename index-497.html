<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 497) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-497.html">
<link rel="prev" href="index-498.html" type="text/html">
<link rel="next" href="index-496.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-get-column-names-from-a-table-in-sql-server/" class="u-url">How can I get column names from a table in SQL Server?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-get-column-names-from-a-table-in-sql-server/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:22:00+08:00" itemprop="datePublished" title="2023-02-17 08:22">2023-02-17 08:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to query the name of all columns of a table. I found how to do this in:</p>
<ul>
<li>Oracle</li>
<li>MySQL</li>
<li>PostgreSQL</li>
</ul>
<p>But I also need to know: <strong>how can this be done in <em>Microsoft SQL Server</em>
(2008 in my case)?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can obtain this information and much, much more by querying the
Information Schema views.</p>
<p>This sample query:</p>
<div class="code"><pre class="code literal-block">SELECT *
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = N'Customers'
</pre></div>

<p>Can be made over all these DB objects:</p>
<ul>
<li>CHECK_CONSTRAINTS </li>
<li>COLUMN_DOMAIN_USAGE</li>
<li>COLUMN_PRIVILEGES </li>
<li>COLUMNS </li>
<li>CONSTRAINT_COLUMN_USAGE </li>
<li>CONSTRAINT_TABLE_USAGE </li>
<li>DOMAIN_CONSTRAINTS </li>
<li>DOMAINS </li>
<li>KEY_COLUMN_USAGE </li>
<li>PARAMETERS </li>
<li>REFERENTIAL_CONSTRAINTS </li>
<li>ROUTINES </li>
<li>ROUTINE_COLUMNS </li>
<li>SCHEMATA </li>
<li>TABLE_CONSTRAINTS </li>
<li>TABLE_PRIVILEGES </li>
<li>TABLES </li>
<li>VIEW_COLUMN_USAGE </li>
<li>VIEW_TABLE_USAGE </li>
<li>VIEWS </li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>You can use the stored procedure sp_columns which would return information
pertaining to all columns for a given table. More info can be found here
http://msdn.microsoft.com/en-us/library/ms176077.aspx</p>
<p>You can also do it by a SQL query. Some thing like this should help:</p>
<div class="code"><pre class="code literal-block">SELECT * FROM sys.columns WHERE object_id = OBJECT_ID('dbo.yourTableName')
</pre></div>

<p>Or a variation would be:</p>
<div class="code"><pre class="code literal-block">SELECT   o.Name, c.Name
FROM     sys.columns c 
         JOIN sys.objects o ON o.object_id = c.object_id 
WHERE    o.type = 'U' 
ORDER BY o.Name, c.Name
</pre></div>

<p>This gets all columns from all tables, ordered by table name and then on
column name.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/convert-a-php-object-to-an-associative-array/" class="u-url">Convert a PHP object to an associative array</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/convert-a-php-object-to-an-associative-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:21:27+08:00" itemprop="datePublished" title="2023-02-17 08:21">2023-02-17 08:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm integrating an API to my website which works with data stored in objects
while my code is written using arrays.</p>
<p>I'd like a quick-and-dirty function to convert an object to an array.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Just typecast it</p>
<div class="code"><pre class="code literal-block">$array = (array) $yourObject;
</pre></div>

<p>From <em>Arrays</em> :</p>
<blockquote>
<p>If an object is converted to an array, the result is an array whose elements
are the object's properties. The keys are the member variable names, with a
few notable exceptions: integer properties are unaccessible; private
variables have the class name prepended to the variable name; protected
variables have a '*' prepended to the variable name. These prepended values
have null bytes on either side.</p>
</blockquote>
<p><strong>Example: Simple Object</strong></p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">StdClass</span><span class="p">;</span>
<span class="o">$</span><span class="n">object</span><span class="o">-&gt;</span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="o">$</span><span class="n">object</span><span class="o">-&gt;</span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="n">var_dump</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="n">object</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><em>Output:</em></p>
<div class="code"><pre class="code literal-block">array(2) {
  'foo' =&gt; int(1)
  'bar' =&gt; int(2)
}
</pre></div>

<p><strong>Example: Complex Object</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">Foo</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="o">$</span><span class="n">foo</span><span class="p">;</span>
<span class="w">    </span><span class="n">protected</span><span class="w"> </span><span class="o">$</span><span class="n">bar</span><span class="p">;</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="o">$</span><span class="n">baz</span><span class="p">;</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">__construct</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="o">$</span><span class="n">this</span><span class="o">-&gt;</span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="o">$</span><span class="n">this</span><span class="o">-&gt;</span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">        </span><span class="o">$</span><span class="n">this</span><span class="o">-&gt;</span><span class="n">baz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">StdClass</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">var_dump</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p><em>Output (with \0s edited in for clarity):</em></p>
<div class="code"><pre class="code literal-block">array(3) {
  '\0Foo\0foo' =&gt; int(1)
  '\0*\0bar' =&gt; int(2)
  'baz' =&gt; class stdClass#2 (0) {}
}
</pre></div>

<p><em>Output with<code>var_export</code> instead of <code>var_dump</code>:</em></p>
<div class="code"><pre class="code literal-block">array (
  '' . "\0" . 'Foo' . "\0" . 'foo' =&gt; 1,
  '' . "\0" . '*' . "\0" . 'bar' =&gt; 2,
  'baz' =&gt;
  stdClass::__set_state(array(
  )),
)
</pre></div>

<p>Typecasting this way will not do deep casting of the object graph and you need
to apply the null bytes (as explained in the manual quote) to access any non-
public attributes. So this works best when casting StdClass objects or objects
with only public properties. For quick and dirty (what you asked for) it's
fine.</p>
<p>Also see this in-depth blog post:</p>
<ul>
<li><em>Fast PHP Object to Array conversion</em></li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>You can quickly convert deeply nested objects to associative arrays by relying
on the behavior of the JSON encode/decode functions:</p>
<div class="code"><pre class="code literal-block">$array = json_decode(json_encode($nested_object), true);
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/proper-use-of-yield-return/" class="u-url">Proper use of 'yield return'</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/proper-use-of-yield-return/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:20:22+08:00" itemprop="datePublished" title="2023-02-17 08:20">2023-02-17 08:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The yield keyword is one of those keywords in C# that continues to mystify me,
and I've never been confident that I'm using it correctly.</p>
<p>Of the following two pieces of code, which is the preferred and why?</p>
<p><strong>Version 1:</strong> Using yield return</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetAllProducts</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">using</span><span class="w"> </span><span class="p">(</span><span class="n">AdventureWorksEntities</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">AdventureWorksEntities</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">db</span><span class="o">.</span><span class="n">Product</span>
<span class="w">                       </span><span class="n">select</span><span class="w"> </span><span class="n">product</span><span class="p">;</span>

<span class="w">        </span><span class="n">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">Product</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">products</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nb">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">product</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Version 2:</strong> Return the list</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetAllProducts</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">using</span><span class="w"> </span><span class="p">(</span><span class="n">AdventureWorksEntities</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">AdventureWorksEntities</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">db</span><span class="o">.</span><span class="n">Product</span>
<span class="w">                       </span><span class="n">select</span><span class="w"> </span><span class="n">product</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">products</span><span class="o">.</span><span class="n">ToList</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>I tend to use yield-return when I calculate the next item in the list (or even
the next group of items).</p>
<p>Using your Version 2, you must have the complete list before returning. By
using yield-return, you really only need to have the next item before
returning.</p>
<p>Among other things, this helps spread the computational cost of complex
calculations over a larger time-frame. For example, if the list is hooked up
to a GUI and the user never goes to the last page, you never calculate the
final items in the list.</p>
<p>Another case where yield-return is preferable is if the IEnumerable represents
an infinite set. Consider the list of Prime Numbers, or an infinite list of
random numbers. You can never return the full IEnumerable at once, so you use
yield-return to return the list incrementally.</p>
<p>In your particular example, you have the full list of products, so I'd use
Version 2.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Populating a temporary list is like downloading the whole video, whereas using
<code>yield</code> is like streaming that video.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-498.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-496.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
