<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2861) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2861.html">
<link rel="prev" href="index-2862.html" type="text/html">
<link rel="next" href="index-2860.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-analyze-disk-usage-of-a-docker-container/" class="u-url">How to analyze disk usage of a Docker container</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-analyze-disk-usage-of-a-docker-container/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T23:28:05+08:00" itemprop="datePublished" title="2023-03-05 23:28">2023-03-05 23:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I can see that Docker takes 12GB of my filesystem:</p>
<div class="code"><pre class="code literal-block"><span class="mf">2.7</span><span class="n">G</span><span class="w">    </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">vfs</span><span class="o">/</span><span class="n">dir</span>
<span class="mf">2.7</span><span class="n">G</span><span class="w">    </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">vfs</span>
<span class="mf">2.8</span><span class="n">G</span><span class="w">    </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">devicemapper</span><span class="o">/</span><span class="n">mnt</span>
<span class="mf">6.3</span><span class="n">G</span><span class="w">    </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">devicemapper</span><span class="o">/</span><span class="n">devicemapper</span>
<span class="mf">9.1</span><span class="n">G</span><span class="w">    </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">devicemapper</span>
<span class="mf">12</span><span class="n">G</span><span class="w">     </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">docker</span>
</pre></div>

<p>But, how do I know how this is distributed over the containers?</p>
<p>I tried to attach to the containers by running (the new v1.3 command)</p>
<div class="code"><pre class="code literal-block"><span class="nv">docker</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="o">-</span><span class="nv">it</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">container_name</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">bash</span>
</pre></div>

<p>and then running 'df -h' to analyze the disk usage. It seems to be working,
but not with containers that use 'volumes-from'.</p>
<p>For example, I use a data-only container for MongoDB, called 'mongo-data'.</p>
<p>When I run <code>docker run -it --volumes-from mongo-data busybox</code>, and then <code>df
-h</code> inside the container, It says that the filesystem mounted on <code>/data/db</code>
(my 'mongo-data' data-only container) uses 11.3G, but when I do <code>du -h
/data/db</code>, it says that it uses only 2.1G.</p>
<p>So, how do I analyze a container/volume disk usage? Or, in my case, how do I
find out the 'mongo-data' container size?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To see the file size of your containers, you can use the <code>--size</code> argument of
<code>docker ps</code>:</p>
<div class="code"><pre class="code literal-block">docker ps --size
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>After <strong>1.13.0, Docker</strong> includes a new command <code>docker system df</code> to show
docker disk usage.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>docker<span class="w"> </span>system<span class="w"> </span>df
TYPE<span class="w">            </span>TOTAL<span class="w">        </span>ACTIVE<span class="w">     </span>SIZE<span class="w">        </span>RECLAIMABLE
Images<span class="w">          </span><span class="m">5</span><span class="w">            </span><span class="m">1</span><span class="w">          </span><span class="m">2</span>.777<span class="w"> </span>GB<span class="w">    </span><span class="m">2</span>.647<span class="w"> </span>GB<span class="w"> </span><span class="o">(</span><span class="m">95</span>%<span class="o">)</span>
Containers<span class="w">      </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">          </span><span class="m">0</span><span class="w"> </span>B<span class="w">         </span>0B
Local<span class="w"> </span>Volumes<span class="w">   </span><span class="m">4</span><span class="w">            </span><span class="m">1</span><span class="w">          </span><span class="m">3</span>.207<span class="w"> </span>GB<span class="w">    </span><span class="m">2</span>.261<span class="w"> </span><span class="o">(</span><span class="m">70</span>%<span class="o">)</span>
</pre></div>

<p>To show more detailed information on space usage:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>docker<span class="w"> </span>system<span class="w"> </span>df<span class="w"> </span>--verbose
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/color-tint-uibutton-image/" class="u-url">Color Tint UIButton Image</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/color-tint-uibutton-image/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T23:26:26+08:00" itemprop="datePublished" title="2023-03-05 23:26">2023-03-05 23:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I noticed that when I place a white or black <code>UIImage</code> into a
<code>UISegmentedControl</code> it automatically color masks it to match the tint of the
segmented control. I thought this was really cool, and was wondering if I
could do this elsewhere as well. For example, I have a bunch of buttons that
have a uniform shape but varied colors. Instead of making a PNG for each
button, could I somehow use this color masking to use the same image for all
of them but then set a tint color or something to change their actual color?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As of iOS 7, there is a new method on <code>UIImage</code> to specify the rendering mode.
Using the rendering mode <code>UIImageRenderingModeAlwaysTemplate</code> will allow the
image color to be controlled by the button's tint color.</p>
<p>Objective-C</p>
<div class="code"><pre class="code literal-block"><span class="bp">UIButton</span><span class="w"> </span><span class="o">*</span><span class="n">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">UIButton</span><span class="w"> </span><span class="n">buttonWithType</span><span class="o">:</span><span class="n">UIButtonTypeCustom</span><span class="p">];</span>
<span class="bp">UIImage</span><span class="w"> </span><span class="o">*</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="bp">UIImage</span><span class="w"> </span><span class="n">imageNamed</span><span class="o">:</span><span class="s">@"image_name"</span><span class="p">]</span><span class="w"> </span><span class="n">imageWithRenderingMode</span><span class="o">:</span><span class="n">UIImageRenderingModeAlwaysTemplate</span><span class="p">];</span>
<span class="p">[</span><span class="n">button</span><span class="w"> </span><span class="n">setImage</span><span class="o">:</span><span class="n">image</span><span class="w"> </span><span class="n">forState</span><span class="o">:</span><span class="n">UIControlStateNormal</span><span class="p">];</span><span class="w"> </span>
<span class="n">button</span><span class="p">.</span><span class="n">tintColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">UIColor</span><span class="w"> </span><span class="n">redColor</span><span class="p">];</span>
</pre></div>

<p>Swift</p>
<div class="code"><pre class="code literal-block"><span class="nv">let</span><span class="w"> </span><span class="nv">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIButton</span><span class="ss">(</span><span class="nv">type</span>:<span class="w"> </span>.<span class="nv">custom</span><span class="ss">)</span>
<span class="nv">let</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIImage</span><span class="ss">(</span><span class="nv">named</span>:<span class="w"> </span><span class="s2">"image_name"</span><span class="ss">)</span>?.<span class="nv">withRenderingMode</span><span class="ss">(</span>.<span class="nv">alwaysTemplate</span><span class="ss">)</span>
<span class="nv">button</span>.<span class="nv">setImage</span><span class="ss">(</span><span class="nv">image</span>,<span class="w"> </span><span class="k">for</span>:<span class="w"> </span>.<span class="nv">normal</span><span class="ss">)</span>
<span class="nv">button</span>.<span class="nv">tintColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIColor</span>.<span class="nv">red</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>As Ric already mentioned in his post you can set the render mode in code, you
can also do this directly in the image catalog, see attached image below. Just
set the <code>Render As</code> to <code>Template Image</code></p>
<p><img alt="enter image description here" src="images/5V3qQ.png"></p>
<p><strong>Caveat</strong> I have had problems with iOS 7 and this approach. So if you use iOS
7 as well you might want to do it in code as well to be sure, as described
here.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/jquery-ajax-post-sending-options-as-request-method-in-firefox/" class="u-url">jQuery $.ajax(), $.post sending "OPTIONS" as REQUEST_METHOD in Firefox</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/jquery-ajax-post-sending-options-as-request-method-in-firefox/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T23:24:47+08:00" itemprop="datePublished" title="2023-03-05 23:24">2023-03-05 23:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Having trouble with what I thought was a relatively simple jQuery plugin...</p>
<p>The plugin should fetch data from a php script via ajax to add options to a
<code>&lt;select&gt;</code>. The ajax request is pretty generic:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">.</span><span class="nc">ajax</span><span class="o">(</span><span class="p">{</span>
<span class="w">  </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="n">o</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
<span class="w">  </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'post'</span><span class="p">,</span>
<span class="w">  </span><span class="n">contentType</span><span class="o">:</span><span class="w"> </span><span class="s2">"application/x-www-form-urlencoded"</span><span class="p">,</span>
<span class="w">  </span><span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="s1">'{"method":"getStates", "program":"EXPLORE"}'</span><span class="p">,</span>
<span class="w">  </span><span class="n">success</span><span class="o">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">"Success!!"</span><span class="p">);</span>
<span class="w">    </span><span class="err">console.log(data)</span><span class="p">;</span>
<span class="w">    </span><span class="err">console.log(status)</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="o">,</span>
<span class="w">  </span><span class="nt">error</span><span class="o">:</span><span class="w"> </span><span class="nt">function</span><span class="w"> </span><span class="o">(</span><span class="nt">xhr</span><span class="o">,</span><span class="w"> </span><span class="nt">desc</span><span class="o">,</span><span class="w"> </span><span class="nt">err</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">console.log(xhr)</span><span class="p">;</span>
<span class="w">    </span><span class="err">console.log("</span><span class="n">Desc</span><span class="p">:</span><span class="w"> </span><span class="s2">" + desc + "</span><span class="err">\</span><span class="n">nErr</span><span class="o">:</span><span class="err">"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">err</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="err">}</span><span class="o">);</span>
</pre></div>

<p>This seems to work fine in Safari. In Firefox 3.5, the <code>REQUEST_TYPE</code> on the
server is always 'OPTIONS', and the $_POST data does not appear. Apache logs
the request as type 'OPTIONS':</p>
<div class="code"><pre class="code literal-block">
</pre></div>

<p>Why would this ajax call work in Safari, but not Firefox, and how do I fix it
for Firefox?</p>
<div class="code"><pre class="code literal-block"><span class="nt">Response</span><span class="w"> </span><span class="nt">Headers</span>
<span class="nt">Date</span><span class="o">:</span><span class="w"> </span><span class="nt">Wed</span><span class="o">,</span><span class="w"> </span><span class="nt">08</span><span class="w"> </span><span class="nt">Jul</span><span class="w"> </span><span class="nt">2009</span><span class="w"> </span><span class="nt">21</span><span class="p">:</span><span class="nd">22</span><span class="p">:</span><span class="nd">17</span><span class="w"> </span><span class="nt">GMT</span>
<span class="nt">Server</span><span class="p">:</span><span class="nd">Apache</span><span class="o">/</span><span class="nt">2</span><span class="p">.</span><span class="nc">0</span><span class="p">.</span><span class="nc">59</span><span class="w"> </span><span class="o">(</span><span class="nt">Unix</span><span class="o">)</span><span class="w"> </span><span class="nt">PHP</span><span class="o">/</span><span class="nt">5</span><span class="p">.</span><span class="nc">2</span><span class="p">.</span><span class="nc">6</span><span class="w"> </span><span class="nt">DAV</span><span class="o">/</span><span class="nt">2</span>
<span class="nt">X-Powered-By</span><span class="o">:</span><span class="w"> </span><span class="nt">PHP</span><span class="o">/</span><span class="nt">5</span><span class="p">.</span><span class="nc">2</span><span class="p">.</span><span class="nc">6</span>
<span class="nt">Content-Length</span><span class="w">  </span><span class="nt">46</span>
<span class="nt">Keep-Alive</span><span class="w">  </span><span class="nt">timeout</span><span class="o">=</span><span class="nt">15</span><span class="o">,</span><span class="w"> </span><span class="nt">max</span><span class="o">=</span><span class="nt">100</span>
<span class="nt">Connection</span><span class="w">  </span><span class="nt">Keep-Alive</span>
<span class="nt">Content-Type</span><span class="w">    </span><span class="nt">text</span><span class="o">/</span><span class="nt">html</span>

<span class="nt">Request</span><span class="w"> </span><span class="nt">Headers</span>
<span class="nt">Host</span><span class="w">    </span><span class="nt">orderform</span><span class="p">:</span><span class="nd">8888</span>
<span class="nt">User-Agent</span><span class="w">  </span><span class="nt">Mozilla</span><span class="o">/</span><span class="nt">5</span><span class="p">.</span><span class="nc">0</span><span class="w"> </span><span class="o">(</span><span class="nt">Macintosh</span><span class="o">;</span><span class="w"> </span><span class="nt">U</span><span class="o">;</span><span class="w"> </span><span class="nt">Intel</span><span class="w"> </span><span class="nt">Mac</span><span class="w"> </span><span class="nt">OS</span><span class="w"> </span><span class="nt">X</span><span class="w"> </span><span class="nt">10</span><span class="p">.</span><span class="nc">5</span><span class="o">;</span><span class="w"> </span><span class="nt">en-US</span><span class="o">;</span><span class="w"> </span><span class="nt">rv</span><span class="p">:</span><span class="nd">1</span><span class="p">.</span><span class="nc">9</span><span class="p">.</span><span class="nc">1</span><span class="o">)</span><span class="w"> </span><span class="nt">Gecko</span><span class="o">/</span><span class="nt">20090624</span><span class="w"> </span><span class="nt">Firefox</span><span class="o">/</span><span class="nt">3</span><span class="p">.</span><span class="nc">5</span>
<span class="nt">Accept</span><span class="w">  </span><span class="nt">text</span><span class="o">/</span><span class="nt">html</span><span class="o">,</span><span class="nt">application</span><span class="o">/</span><span class="nt">xhtml</span><span class="o">+</span><span class="nt">xml</span><span class="o">,</span><span class="nt">application</span><span class="o">/</span><span class="nt">xml</span><span class="o">;</span><span class="nt">q</span><span class="o">=</span><span class="nt">0</span><span class="p">.</span><span class="nc">9</span><span class="o">,*/*;</span><span class="nt">q</span><span class="o">=</span><span class="nt">0</span><span class="p">.</span><span class="nc">8</span>
<span class="nt">Accept-Language</span><span class="w"> </span><span class="nt">en-us</span><span class="o">,</span><span class="nt">en</span><span class="o">;</span><span class="nt">q</span><span class="o">=</span><span class="nt">0</span><span class="p">.</span><span class="nc">5</span>
<span class="nt">Accept-Encoding</span><span class="w"> </span><span class="nt">gzip</span><span class="o">,</span><span class="nt">deflate</span>
<span class="nt">Accept-Charset</span><span class="w">  </span><span class="nt">ISO-8859-1</span><span class="o">,</span><span class="nt">utf-8</span><span class="o">;</span><span class="nt">q</span><span class="o">=</span><span class="nt">0</span><span class="p">.</span><span class="nc">7</span><span class="o">,*;</span><span class="nt">q</span><span class="o">=</span><span class="nt">0</span><span class="p">.</span><span class="nc">7</span>
<span class="nt">Keep-Alive</span><span class="w">  </span><span class="nt">300</span>
<span class="nt">Connection</span><span class="w">  </span><span class="nt">keep-alive</span>
<span class="nt">Origin</span><span class="w">  </span><span class="nt">http</span><span class="o">://</span><span class="nt">ux</span><span class="p">.</span><span class="nc">inetu</span><span class="p">.</span><span class="nc">act</span><span class="p">.</span><span class="nc">org</span>
<span class="nt">Access-Control-Request-Method</span><span class="w">   </span><span class="nt">POST</span>
<span class="nt">Access-Control-Request-Headers</span><span class="w">  </span><span class="nt">x-requested-with</span>
</pre></div>

<p>Here is a picture of the Firebug output:</p>
<p><img alt="" src="images/Tid8P.jpg"></p>
<p><br><br></p>
<h2>Answer</h2>
<p>The reason for the error is the same origin policy. It only allows you to do
XMLHTTPRequests to your own domain. See if you can use a JSONP callback
instead:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">.</span><span class="nc">getJSON</span><span class="o">(</span><span class="w"> </span><span class="s1">'http://&lt;url&gt;/api.php?callback=?'</span><span class="o">,</span><span class="w"> </span><span class="nt">function</span><span class="w"> </span><span class="o">(</span><span class="w"> </span><span class="nt">data</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">alert</span><span class="w"> </span><span class="err">(</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I used the following code on Django side to interpret the OPTIONS request and
to set the required Access-Control headers. After this my cross domain
requests from Firefox started working. As said before, the browser first sends
the OPTIONS request and then immediately after that the POST/GET</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">send_data</span><span class="ss">(</span><span class="nv">request</span><span class="ss">)</span>:
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">request</span>.<span class="nv">method</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"OPTIONS"</span>:<span class="w"> </span>
<span class="w">        </span><span class="nv">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">HttpResponse</span><span class="ss">()</span>
<span class="w">        </span><span class="nv">response</span>[<span class="s1">'Access-Control-Allow-Origin'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'*'</span>
<span class="w">        </span><span class="nv">response</span>[<span class="s1">'Access-Control-Allow-Methods'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'POST, GET, OPTIONS'</span>
<span class="w">        </span><span class="nv">response</span>[<span class="s1">'Access-Control-Max-Age'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">        </span>#<span class="w"> </span><span class="nv">note</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="s1">'*'</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">valid</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Access</span><span class="o">-</span><span class="nv">Control</span><span class="o">-</span><span class="nv">Allow</span><span class="o">-</span><span class="nv">Headers</span>
<span class="w">        </span><span class="nv">response</span>[<span class="s1">'Access-Control-Allow-Headers'</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'origin, x-csrftoken, content-type, accept'</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">response</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">request</span>.<span class="nv">method</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"POST"</span>:
<span class="w">        </span>#<span class="w"> </span>...
</pre></div>

<p>Edit: it seems to be that at least in some cases you also need to add the same
Access-Control headers to the actual response. This can be a little bit
confusing, since the request seems to succeed, but Firefox does not pass the
contents of the response to the Javascript.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2862.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2860.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
