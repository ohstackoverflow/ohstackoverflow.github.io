<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 174) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-174.html">
<link rel="prev" href="index-175.html" type="text/html">
<link rel="next" href="index-173.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-align-checkboxes-and-their-labels-consistently-cross-browsers/" class="u-url">How to align checkboxes and their labels consistently cross-browsers</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-align-checkboxes-and-their-labels-consistently-cross-browsers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:51:59+08:00" itemprop="datePublished" title="2023-02-16 23:51">2023-02-16 23:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This is one of the minor CSS problems that plague me constantly.</p>
<p>How do folks around Stack Overflow vertically align <em><strong><code>checkboxes</code></strong></em> and
their <em><strong><code>labels</code></strong></em> consistently <strong>cross-browser</strong>?</p>
<p>Whenever I align them correctly in Safari (usually using <code>vertical-align:
baseline</code> on the <code>input</code>), they're completely off in Firefox and IE.</p>
<p>Fix it in Firefox, and Safari and IE are inevitably messed up. I waste time on
this every time I code a form.</p>
<p>Here's the standard code that I work with:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form&gt;</span>
<span class="w">    </span><span class="nt">&lt;div&gt;</span>
<span class="w">        </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span>Label<span class="w"> </span>text<span class="nt">&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>I usually use Eric Meyer's reset, so form elements are relatively clean of
overrides. Looking forward to any tips or tricks that you have to offer!</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Warning! This answer is <em><strong>too old</strong></em> and <em><strong>doesn't work</strong></em> on modern</h2>
<p>browsers.</p>
<p>I'm not the poster of this answer, but at the time of writing this, this is
the most voted answer by far in both positive and negative votes (+1035 -17),
and it's still marked as accepted answer (probably because the original poster
of the question is the one who wrote this answer).</p>
<p>As already noted many times in the comments, this answer does not work on most
browsers anymore (and seems to be failing to do that since 2013).</p>
<hr>
<p>After over an hour of tweaking, testing, and trying different styles of
markup, I think I may have a decent solution. The requirements for this
particular project were:</p>
<ol>
<li>Inputs must be on their own line.</li>
<li>Checkbox inputs need to align vertically with the label text similarly (if not identically) across all browsers.</li>
<li>If the label text wraps, it needs to be indented (so no wrapping down underneath the checkbox).</li>
</ol>
<p>Before I get into any explanation, I'll just give you the code:</p>
<div class="code"><pre class="code literal-block">label<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>block;
<span class="w">  </span>padding-left:<span class="w"> </span>15px;
<span class="w">  </span>text-indent:<span class="w"> </span>-15px;
}
input<span class="w"> </span>{
<span class="w">  </span>width:<span class="w"> </span>13px;
<span class="w">  </span>height:<span class="w"> </span>13px;
<span class="w">  </span>padding:<span class="w"> </span>0;
<span class="w">  </span>margin:0;
<span class="w">  </span>vertical-align:<span class="w"> </span>bottom;
<span class="w">  </span>position:<span class="w"> </span>relative;
<span class="w">  </span>top:<span class="w"> </span>-1px;
<span class="w">  </span>*overflow:<span class="w"> </span>hidden;
}


<span class="nt">&lt;form&gt;</span>
<span class="w">  </span><span class="nt">&lt;div&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span>Label<span class="w"> </span>text<span class="nt">&lt;/label&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>Here is the working example in JSFiddle.</p>
<p>This code assumes that you're using a reset like Eric Meyer's that doesn't
override form input margins and padding (hence putting margin and padding
resets in the input CSS). Obviously in a live environment you'll probably be
nesting/overriding stuff to support other input elements, but I wanted to keep
things simple.</p>
<p>Things to note:</p>
<ul>
<li>The <code>*overflow</code> declaration is an inline IE hack (the star-property hack). Both IE 6 and 7 will notice it, but Safari and Firefox will properly ignore it. I think it might be valid CSS, but you're still better off with conditional comments; just used it for simplicity.</li>
<li>As best I can tell, the only <code>vertical-align</code> statement that was consistent across browsers was <code>vertical-align: bottom</code>. Setting this and then relatively positioning upwards behaved almost identically in Safari, Firefox and IE with only a pixel or two of discrepancy.</li>
<li>The major problem in working with alignment is that IE sticks a bunch of mysterious space around input elements. It isn't padding or margin, and it's damned persistent. Setting a width and height on the checkbox and then <code>overflow: hidden</code> for some reason cuts off the extra space and allows IE's positioning to act very similarly to Safari and Firefox.</li>
<li>Depending on your text sizing, you'll no doubt need to adjust the relative positioning, width, height, and so forth to get things looking right.</li>
</ul>
<p>I haven't tried this specific technique on any projects other than the one I
was working on this morning, so definitely pipe up if you find something that
works more consistently.</p>
<hr>
<h2>Warning! This answer is <em><strong>too old</strong></em> and <em><strong>doesn't work</strong></em> on modern</h2>
<p>browsers.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Sometimes vertical-align needs two inline (span, label, input, etc...)
elements next to each other to work properly. The following checkboxes are
properly vertically centered in IE, Safari, FF, and Chrome, even if the text
size is very small or large.</p>
<p>They all float next to each other on the same line, but the nowrap means that
the whole label text always stays next to the checkbox.</p>
<p>The downside is the extra meaningless SPAN tags.</p>
<div class="code"><pre class="code literal-block">.checkboxes<span class="w"> </span>label<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>inline-block;
<span class="w">  </span>padding-right:<span class="w"> </span>10px;
<span class="w">  </span>white-space:<span class="w"> </span>nowrap;
}
.checkboxes<span class="w"> </span>input<span class="w"> </span>{
<span class="w">  </span>vertical-align:<span class="w"> </span>middle;
}
.checkboxes<span class="w"> </span>label<span class="w"> </span>span<span class="w"> </span>{
<span class="w">  </span>vertical-align:<span class="w"> </span>middle;
}


<span class="nt">&lt;form&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"checkboxes"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="nt">&gt;</span><span class="w"> </span><span class="nt">&lt;span&gt;</span>Label<span class="w"> </span>text<span class="w"> </span>x<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="nt">&gt;</span><span class="w"> </span><span class="nt">&lt;span&gt;</span>Label<span class="w"> </span>text<span class="w"> </span>y<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="nt">&gt;</span><span class="w"> </span><span class="nt">&lt;span&gt;</span>Label<span class="w"> </span>text<span class="w"> </span>z<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>Now, if you had a very long label text that <em>needed</em> to wrap without wrapping
under the checkbox, you'd use padding and negative text indent on the label
elements:</p>
<div class="code"><pre class="code literal-block">.checkboxes<span class="w"> </span>label<span class="w"> </span>{
<span class="w">  </span>display:<span class="w"> </span>block;
<span class="w">  </span>padding-right:<span class="w"> </span>10px;
<span class="w">  </span>padding-left:<span class="w"> </span>22px;
<span class="w">  </span>text-indent:<span class="w"> </span>-22px;
}
.checkboxes<span class="w"> </span>input<span class="w"> </span>{
<span class="w">  </span>vertical-align:<span class="w"> </span>middle;
}
.checkboxes<span class="w"> </span>label<span class="w"> </span>span<span class="w"> </span>{
<span class="w">  </span>vertical-align:<span class="w"> </span>middle;
}


<span class="nt">&lt;form&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"checkboxes"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="nt">&gt;</span><span class="w"> </span><span class="nt">&lt;span&gt;</span>Label<span class="w"> </span>text<span class="w"> </span>x<span class="w"> </span>so<span class="w"> </span>long<span class="w"> </span>that<span class="w"> </span>it<span class="w"> </span>will<span class="w"> </span>probably<span class="w"> </span>wrap<span class="w"> </span>so<span class="w"> </span>let's<span class="w"> </span>see<span class="w"> </span>how<span class="w"> </span>it<span class="w"> </span>goes<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>proposed<span class="w"> </span>CSS<span class="w"> </span>(expected:<span class="w"> </span>two<span class="w"> </span>lines<span class="w"> </span>are<span class="w"> </span>aligned<span class="w"> </span>nicely)<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="nt">&gt;</span><span class="w"> </span><span class="nt">&lt;span&gt;</span>Label<span class="w"> </span>text<span class="w"> </span>y<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;label&gt;&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="nt">&gt;</span><span class="w"> </span><span class="nt">&lt;span&gt;</span>Label<span class="w"> </span>text<span class="w"> </span>z<span class="nt">&lt;/span&gt;&lt;/label&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-return-the-string-10/" class="u-url">Why does ++[[]][+[]]+[+[]] return the string "10"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-return-the-string-10/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:51:27+08:00" itemprop="datePublished" title="2023-02-16 23:51">2023-02-16 23:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This is valid and returns the string <code>"10"</code> in JavaScript (more examples
here):</p>
<div class="code"><pre class="code literal-block">console.log(++[[]][+[]]+[+[]])
</pre></div>

<p>Why? What is happening here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If we split it up, the mess is equal to:</p>
<div class="code"><pre class="code literal-block">++[[]][+[]]
+
[+[]]
</pre></div>

<p>In JavaScript, it is true that <code>+[] === 0</code>. <code>+</code> converts something into a
number, and in this case it will come down to <code>+""</code> or <code>0</code> (see specification
details below).</p>
<p>Therefore, we can simplify it (<code>++</code> has precendence over <code>+</code>):</p>
<div class="code"><pre class="code literal-block">++[[]][0]
+
[0]
</pre></div>

<p>Because <code>[[]][0]</code> means: get the first element from <code>[[]]</code>, it is true that:</p>
<p><code>[[]][0]</code> returns the inner array (<code>[]</code>). Due to references it's wrong to say
<code>[[]][0] === []</code>, but let's call the inner array <code>A</code> to avoid the wrong
notation.</p>
<p><code>++</code> before its operand means “increment by one and return the incremented
result”. So <code>++[[]][0]</code> is equivalent to <code>Number(A) + 1</code> (or <code>+A + 1</code>).</p>
<p>Again, we can simplify the mess into something more legible. Let's substitute
<code>[]</code> back for <code>A</code>:</p>
<div class="code"><pre class="code literal-block">(+[] + 1)
+
[0]
</pre></div>

<p>Before <code>+[]</code> can coerce the array into the number <code>0</code>, it needs to be coerced
into a string first, which is <code>""</code>, again. Finally, <code>1</code> is added, which
results in <code>1</code>.</p>
<ul>
<li><code>(+[] + 1) === (+"" + 1)</code></li>
<li><code>(+"" + 1) === (0 + 1)</code></li>
<li><code>(0 + 1) === 1</code></li>
</ul>
<p>Let's simplify it even more:</p>
<div class="code"><pre class="code literal-block"><span class="mf">1</span>
<span class="o">+</span>
<span class="err">[</span><span class="mf">0</span><span class="err">]</span>
</pre></div>

<p>Also, this is true in JavaScript: <code>[0] == "0"</code>, because it's joining an array
with one element. Joining will concatenate the elements separated by <code>,</code>. With
one element, you can deduce that this logic will result in the first element
itself.</p>
<p>In this case, <code>+</code> sees two operands: a number and an array. It’s now trying to
coerce the two into the same type. First, the array is coerced into the string
<code>"0"</code>, next, the number is coerced into a string (<code>"1"</code>). <em>Number<code>+</code> String
<code>===</code> String</em>.</p>
<div class="code"><pre class="code literal-block">"1" + "0" === "10" // Yay!
</pre></div>

<hr>
<p>Specification details for <code>+[]</code>:</p>
<p>This is quite a maze, but to do <code>+[]</code>, first it is being converted to a string
because that's what <code>+</code> says:</p>
<blockquote>
<p>11.4.6 Unary + Operator</p>
<p>The unary + operator converts its operand to Number type.</p>
<p>The production UnaryExpression : + UnaryExpression is evaluated as follows:</p>
<ol>
<li>
<p>Let expr be the result of evaluating UnaryExpression.</p>
</li>
<li>
<p>Return ToNumber(GetValue(expr)).</p>
</li>
</ol>
</blockquote>
<p><code>ToNumber()</code> says:</p>
<blockquote>
<p>Object</p>
<p>Apply the following steps:</p>
<ol>
<li>
<p>Let primValue be ToPrimitive(input argument, hint String).</p>
</li>
<li>
<p>Return ToString(primValue).</p>
</li>
</ol>
</blockquote>
<p><code>ToPrimitive()</code> says:</p>
<blockquote>
<p>Object</p>
<p>Return a default value for the Object. The default value of an object is
retrieved by calling the [[DefaultValue]] internal method of the object,
passing the optional hint PreferredType. The behaviour of the
[[DefaultValue]] internal method is defined by this specification for all
native ECMAScript objects in 8.12.8.</p>
</blockquote>
<p><code>[[DefaultValue]]</code> says:</p>
<blockquote>
<p>8.12.8 [[DefaultValue]] (hint)</p>
<p>When the [[DefaultValue]] internal method of O is called with hint String,
the following steps are taken:</p>
<ol>
<li>
<p>Let toString be the result of calling the [[Get]] internal method of
object O with argument "toString".</p>
</li>
<li>
<p>If IsCallable(toString) is true then,</p>
</li>
</ol>
<p>a. Let str be the result of calling the [[Call]] internal method of
toString, with O as the this value and an empty argument list.</p>
<p>b. If str is a primitive value, return str.</p>
</blockquote>
<p>The <code>.toString</code> of an array says:</p>
<blockquote>
<p>15.4.4.2 Array.prototype.toString ( )</p>
<p>When the toString method is called, the following steps are taken:</p>
<ol>
<li>
<p>Let array be the result of calling ToObject on the this value.</p>
</li>
<li>
<p>Let func be the result of calling the [[Get]] internal method of array
with argument "join".</p>
</li>
<li>
<p>If IsCallable(func) is false, then let func be the standard built-in
method Object.prototype.toString (15.2.4.2).</p>
</li>
<li>
<p>Return the result of calling the [[Call]] internal method of func
providing array as the this value and an empty arguments list.</p>
</li>
</ol>
</blockquote>
<p>So <code>+[]</code> comes down to <code>+""</code>, because <code>[].join() === ""</code>.</p>
<p>Again, the <code>+</code> is defined as:</p>
<blockquote>
<p>11.4.6 Unary + Operator</p>
<p>The unary + operator converts its operand to Number type.</p>
<p>The production UnaryExpression : + UnaryExpression is evaluated as follows:</p>
<ol>
<li>
<p>Let expr be the result of evaluating UnaryExpression.</p>
</li>
<li>
<p>Return ToNumber(GetValue(expr)).</p>
</li>
</ol>
</blockquote>
<p><code>ToNumber</code> is defined for <code>""</code> as:</p>
<blockquote>
<p>The MV of StringNumericLiteral ::: [empty] is 0.</p>
</blockquote>
<p>So <code>+"" === 0</code>, and thus <code>+[] === 0</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<ul>
<li>
<code>++[ [] ][+[]] === 1</code><ul>
<li><code>+[] === 0</code></li>
<li><code>++[ [] ][0] === 1</code></li>
</ul>
</li>
<li>
<code>[ +[] ]</code> is <code>[ 0 ]</code>
</li>
</ul>
<p>Then we have a string concatenation:</p>
<p><code>1 + String([ 0 ]) === 10</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-do-i-need-to-do-set-upstream-all-the-time/" class="u-url">Why do I need to do `--set-upstream` all the time?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-do-i-need-to-do-set-upstream-all-the-time/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:50:54+08:00" itemprop="datePublished" title="2023-02-16 23:50">2023-02-16 23:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I create a new branch in Git:</p>
<div class="code"><pre class="code literal-block">git branch my_branch
</pre></div>

<p>Push it:</p>
<div class="code"><pre class="code literal-block">git push origin my_branch
</pre></div>

<p>Now say someone made some changes on the server and I want to pull from
<code>origin/my_branch</code>. I do:</p>
<div class="code"><pre class="code literal-block">git pull
</pre></div>

<p>But I get:</p>
<div class="code"><pre class="code literal-block"><span class="nv">You</span><span class="w"> </span><span class="nv">asked</span><span class="w"> </span><span class="nv">me</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">pull</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">telling</span><span class="w"> </span><span class="nv">me</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">you</span>
<span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">merge</span><span class="w"> </span><span class="nv">with</span>,<span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s1">'branch.my_branch.merge'</span><span class="w"> </span><span class="nv">in</span>
<span class="nv">your</span><span class="w"> </span><span class="nv">configuration</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">tell</span><span class="w"> </span><span class="nv">me</span>,<span class="w"> </span><span class="nv">either</span>.<span class="w"> </span><span class="nv">Please</span>
<span class="nv">specify</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">command</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">and</span>
<span class="nv">try</span><span class="w"> </span><span class="nv">again</span><span class="w"> </span><span class="ss">(</span><span class="nv">e</span>.<span class="nv">g</span>.<span class="w"> </span><span class="s1">'git pull &lt;repository&gt; &lt;refspec&gt;'</span><span class="ss">)</span>.
<span class="nv">See</span><span class="w"> </span><span class="nv">git</span><span class="o">-</span><span class="nv">pull</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">details</span>.

<span class="k">If</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">often</span><span class="w"> </span><span class="nv">merge</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">branch</span>,<span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span>
<span class="nv">use</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">configuration</span><span class="w"> </span><span class="nv">file</span>:

<span class="w">    </span>[<span class="nv">branch</span><span class="w"> </span><span class="s2">"my_branch"</span>]
<span class="w">    </span><span class="nv">remote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">nickname</span><span class="o">&gt;</span>
<span class="w">    </span><span class="nv">merge</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">-</span><span class="nv">ref</span><span class="o">&gt;</span>

<span class="w">    </span>[<span class="nv">remote</span><span class="w"> </span><span class="s2">"&lt;nickname&gt;"</span>]
<span class="w">    </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">url</span><span class="o">&gt;</span>
<span class="w">    </span><span class="nv">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">refspec</span><span class="o">&gt;</span>

<span class="nv">See</span><span class="w"> </span><span class="nv">git</span><span class="o">-</span><span class="nv">config</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">details</span>.
</pre></div>

<p>I learned that I can make it work with:</p>
<div class="code"><pre class="code literal-block">git branch --set-upstream my_branch origin/my_branch
</pre></div>

<p>But why do I need to do this for every branch I create? Isn't it obvious that
if I push <code>my_branch</code> into <code>origin/my_branch</code>, then I would want to pull
<code>origin/my_branch</code> into <code>my_branch</code>? How can I make this the default behavior?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Git v2.37.1 and above</h4>
<p>If you are using the mentioned version or above you can use this new config
entry to automatically setup remote tracking:</p>
<p><code>git config --global push.autoSetupRemote true</code></p>
<p>After that, when you do <code>git push</code> tracking is setup automatically. No need
for <code>git push -u origin my_branch</code></p>
<hr>
<p>A shortcut, which doesn't depend on remembering the syntax for <code>git branch
--set-upstream</code> 1 is to do:</p>
<div class="code"><pre class="code literal-block">git push -u origin my_branch
</pre></div>

<p>... the first time that you push that branch. Or, to push to the current
branch from a branch of the same name (handy for an alias):</p>
<div class="code"><pre class="code literal-block">git push -u origin HEAD
</pre></div>

<p>You only need to use <code>-u</code> once, and that sets up the association between your
branch and the one at <code>origin</code> in the same way as <code>git branch --set-upstream</code>
does.</p>
<p>Personally, I think it's a good thing to have to set up that association
between your branch and one on the remote explicitly. It's just a shame that
the rules are different for <code>git push</code> and <code>git pull</code>.</p>
<hr>
<p>1 It may sound silly, but I very frequently forget to specify the current
branch, assuming that's the default - it's not, and the results are most
confusing.</p>
<p><em>Update 2012-10-11</em> : Apparently I'm not the only person who found it easy to
get wrong! Thanks to VonC for pointing out that git 1.8.0 introduces the more
obvious <code>git branch --set-upstream-to</code>, which can be used as follows, if
you're on the branch <code>my_branch</code>:</p>
<div class="code"><pre class="code literal-block">git branch --set-upstream-to origin/my_branch
</pre></div>

<p>... or with the short option:</p>
<div class="code"><pre class="code literal-block">git branch -u origin/my_branch
</pre></div>

<p>This change, and its reasoning, is described in the release notes for git
1.8.0, release candidate 1:</p>
<blockquote>
<p>It was tempting to say <code>git branch --set-upstream origin/master</code>, but that
tells Git to arrange the local branch <code>origin/master</code> to integrate with the
currently checked out branch, which is highly unlikely to be what the user
meant. The option is deprecated; use the new <code>--set-upstream-to</code> (with a
short-and-sweet <code>-u</code>) option instead.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>You can make this happen with less typing. First, change the way your push
works:</p>
<div class="code"><pre class="code literal-block">git config --global push.default current
</pre></div>

<p>This will infer the <code>origin my_branch</code> part, thus you can do:</p>
<div class="code"><pre class="code literal-block">git push -u
</pre></div>

<p>Which will both create the remote branch with the same name and track it.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-175.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-173.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
