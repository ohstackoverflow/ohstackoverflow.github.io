<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1034) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1034.html">
<link rel="prev" href="index-1035.html" type="text/html">
<link rel="next" href="index-1033.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-milliseconds-to-x-mins-x-seconds-in-java/" class="u-url">How to convert Milliseconds to "X mins, x seconds" in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-milliseconds-to-x-mins-x-seconds-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:13:24+08:00" itemprop="datePublished" title="2023-02-17 23:13">2023-02-17 23:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to record the time using <code>System.currentTimeMillis()</code> when a user
begins something in my program. When he finishes, I will subtract the current
<code>System.currentTimeMillis()</code> from the <code>start</code> variable, and I want to show
them the time elapsed using a human readable format such as "XX hours, XX
mins, XX seconds" or even "XX mins, XX seconds" because its not likely to take
someone an hour.</p>
<p>What's the best way to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use the <code>java.util.concurrent.TimeUnit</code> class:</p>
<div class="code"><pre class="code literal-block">String.format("%d min, %d sec", 
    TimeUnit.MILLISECONDS.toMinutes(millis),
    TimeUnit.MILLISECONDS.toSeconds(millis) - 
    TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis))
);
</pre></div>

<p>Note: <code>TimeUnit</code> is part of the Java 1.5 specification, but <code>toMinutes</code> was
added as of Java 1.6.</p>
<p>To add a leading zero for values 0-9, just do:</p>
<div class="code"><pre class="code literal-block">String.format("%02d min, %02d sec", 
    TimeUnit.MILLISECONDS.toMinutes(millis),
    TimeUnit.MILLISECONDS.toSeconds(millis) - 
    TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis))
);
</pre></div>

<p>If <code>TimeUnit</code> or <code>toMinutes</code> are unsupported (such as on Android before API
version 9), use the following equations:</p>
<div class="code"><pre class="code literal-block">int seconds = (int) (milliseconds / 1000) % 60 ;
int minutes = (int) ((milliseconds / (1000*60)) % 60);
int hours   = (int) ((milliseconds / (1000*60*60)) % 24);
//etc...
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Based on @siddhadev's answer, I wrote a function which converts milliseconds
to a formatted string:</p>
<div class="code"><pre class="code literal-block"><span class="w">   </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Convert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">millisecond</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb">string</span><span class="w"> </span><span class="nb">format</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">millis</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb">string</span><span class="w"> </span><span class="n">form</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="nb">string</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="s">"X Days Y Hours Z Minutes A Seconds"</span><span class="p">.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">getDurationBreakdown</span><span class="p">(</span><span class="n">long</span><span class="w"> </span><span class="n">millis</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">millis</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">throw</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">"Duration must be greater than zero!"</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">long</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">MILLISECONDS</span><span class="p">.</span><span class="n">toDays</span><span class="p">(</span><span class="n">millis</span><span class="p">);</span>
<span class="w">        </span><span class="n">millis</span><span class="w"> </span><span class="o">-</span><span class="p">=</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">DAYS</span><span class="p">.</span><span class="n">toMillis</span><span class="p">(</span><span class="n">days</span><span class="p">);</span>
<span class="w">        </span><span class="n">long</span><span class="w"> </span><span class="n">hours</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">MILLISECONDS</span><span class="p">.</span><span class="n">toHours</span><span class="p">(</span><span class="n">millis</span><span class="p">);</span>
<span class="w">        </span><span class="n">millis</span><span class="w"> </span><span class="o">-</span><span class="p">=</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">HOURS</span><span class="p">.</span><span class="n">toMillis</span><span class="p">(</span><span class="n">hours</span><span class="p">);</span>
<span class="w">        </span><span class="n">long</span><span class="w"> </span><span class="n">minutes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">MILLISECONDS</span><span class="p">.</span><span class="n">toMinutes</span><span class="p">(</span><span class="n">millis</span><span class="p">);</span>
<span class="w">        </span><span class="n">millis</span><span class="w"> </span><span class="o">-</span><span class="p">=</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">MINUTES</span><span class="p">.</span><span class="n">toMillis</span><span class="p">(</span><span class="n">minutes</span><span class="p">);</span>
<span class="w">        </span><span class="n">long</span><span class="w"> </span><span class="n">seconds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">MILLISECONDS</span><span class="p">.</span><span class="n">toSeconds</span><span class="p">(</span><span class="n">millis</span><span class="p">);</span>

<span class="w">        </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sb</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">(</span><span class="mi">64</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">days</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">" Days "</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">hours</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">" Hours "</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">minutes</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">" Minutes "</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">seconds</span><span class="p">);</span>
<span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">" Seconds"</span><span class="p">);</span>

<span class="w">        </span><span class="k">return</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="n">toString</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-difference-between-head-working-tree-and-index-in-git/" class="u-url">What's the difference between HEAD, working tree and index, in Git?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-difference-between-head-working-tree-and-index-in-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:12:48+08:00" itemprop="datePublished" title="2023-02-17 23:12">2023-02-17 23:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Can someone tell me the difference between HEAD, working tree and index, in
Git?</p>
<p>From what I understand, they are all names for different branches. Is my
assumption correct?</p>
<p>I found this:</p>
<blockquote>
<p>A single git repository can track an arbitrary number of branches, but your
working tree is associated with just one of them (the "current" or "checked
out" branch), and HEAD points to that branch.</p>
</blockquote>
<p>Does this mean that HEAD and working tree are always the same?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A few other good references on those topics:</p>
<ul>
<li>My Git Workflow</li>
</ul>
<p><img alt="workflow" src="images/cZkcV.jpg"></p>
<blockquote>
<p>I use the index as a <em>checkpoint</em>.</p>
<p>When I'm about to make a change that might go awry — when I want to explore
some direction that I'm not sure if I can follow through on or even whether
it's a good idea, such as a conceptually demanding refactoring or changing a
representation type — I checkpoint my work into the index.</p>
<p>If this is the first change I've made since my last commit, then I can use
the local repository as a checkpoint, but often I've got one conceptual
change that I'm implementing as a set of little steps.<br>
 I want to checkpoint after each step, but save the commit until I've gotten
back to working, tested code.</p>
<p>Notes:</p>
<ol>
<li>
<p>the <strong>workspace</strong> is the directory tree of (source) files that you see
and edit.</p>
</li>
<li>
<p>The <strong>index</strong> is a single, large, binary file in
<code>&lt;baseOfRepo&gt;/.git/index</code>, which lists all files in the current branch,
their <em>sha1</em> checksums, time stamps and the file name -- it is not another
directory with a copy of files in it.</p>
</li>
<li>
<p>The <strong>local repository</strong> is a hidden directory (<code>.git</code>) including an
<code>objects</code> directory containing all versions of every file in the repo (local
branches and copies of remote branches) as a compressed "blob" file.</p>
</li>
</ol>
<p>Don't think of the four 'disks' represented in the image above as separate
copies of the repo files.</p>
</blockquote>
<ul>
<li>Why Git is better than X</li>
</ul>
<p><img alt="3 states" src="images/CYO5D.jpg"></p>
<ul>
<li>Git Is Your Friend not a Foe Vol. 3: Refs and Index</li>
</ul>
<blockquote>
<p>They are basically named references for Git commits. There are two major
types of refs: tags and heads.</p>
<ul>
<li>Tags are fixed references that mark a specific point in history, for
example v2.6.29.</li>
<li>On the contrary, heads are always moved to reflect the current position
of project development.
</li>
</ul>
<p><img alt="commits" src="images/ipLiO.jpg"></p>
</blockquote>
<p>(note: as commented by Timo Huovinen, those arrows are not what the commits
point to, it's the <strong>workflow order</strong> , basically showing arrows as <code>1 -&gt; 2 -&gt;
3 -&gt; 4</code> where <code>1</code> is the first commit and <code>4</code> is the last)</p>
<blockquote>
<p>Now we know what is happening in the project.<br>
 But to know what is happening right here, right now there is a special
reference called HEAD. It serves two major purposes:</p>
<ul>
<li>it tells Git which commit to take files from when you checkout, and</li>
<li>it tells Git where to put new commits when you commit.
</li>
</ul>
<p>When you run <code>git checkout ref</code> it points <code>HEAD</code> to the ref you’ve
designated and extracts files from it. When you run <code>git commit</code> it creates
a new commit object, which becomes a child of current <code>HEAD</code>. Normally
<code>HEAD</code> points to one of the heads, so everything works out just fine.</p>
<p><img alt="checkout" src="images/u2kuU.jpg"></p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>The difference between <strong>HEAD</strong> (current branch or last committed state on
current branch), <strong>index</strong> (aka. staging area) and <strong>working tree</strong> (the state
of <em>files</em> in checkout) is described in "The Three States" section of the "1.3
Git Basics" chapter of Pro Git book by Scott Chacon (Creative Commons
licensed).</p>
<p>Here is the image illustrating it from this chapter:</p>
<p><img alt="Local Operations - working directory vs. staging area (index) vs git
repository (HEAD)" src="images/NxTUz.png"></p>
<p>In the above image "working directory" is the same as "working tree", the
"staging area" is an alternate name for git "index", and <strong>HEAD</strong> points to
currently checked out branch, which tip points to last commit in the "git
directory (repository)"</p>
<p>Note that <code>git commit -a</code> would stage changes and commit in one step.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-run-a-program-with-commandline-arguments-using-gdb-within-a-bash-script/" class="u-url">How do I run a program with commandline arguments using GDB within a Bash script?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-run-a-program-with-commandline-arguments-using-gdb-within-a-bash-script/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:10:50+08:00" itemprop="datePublished" title="2023-02-17 23:10">2023-02-17 23:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When running a program on GDB, usually, the arguments for the program are
given at the <code>run</code> command. Is there a way to run the program using GDB and as
well as give arguments within a shell script?</p>
<p>I saw an answer in a related question, mentioning that we can attach GDB to
the program after the script starts executing. But then I will have to 'wait'
the program.</p>
<p>Is there another way to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can run gdb with <code>--args</code> parameter:</p>
<div class="code"><pre class="code literal-block">gdb --args executablename arg1 arg2 arg3
</pre></div>

<p>If you are doing this often (e.g. when running GDB from a script), you might
want to consider the following arguments to automate things further. First,
you can place your GDB commands (such as 'run') in a text file and provide the
filename to the <code>-x</code> argument. Second, you can have GDB exit after running
your commands by providing the <code>--batch</code> argument. A full example:</p>
<div class="code"><pre class="code literal-block">gdb -x commands.txt --batch --args executablename arg1 arg2 arg3
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">gdb -ex=r --args myprogram arg1 arg2
</pre></div>

<p><code>-ex=r</code> is short for <code>-ex=run</code> and tells gdb to run your program immediately,
rather than wait for you to type "run" at the prompt. Then <code>--args</code> says that
everything that follows is the command and arguments, just as you'd normally
type them at the commandline prompt.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1035.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1033.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
