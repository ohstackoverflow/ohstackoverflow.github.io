<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 623) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-623.html">
<link rel="prev" href="index-624.html" type="text/html">
<link rel="next" href="index-622.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/using-boolean-values-in-c/" class="u-url">Using boolean values in C</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/using-boolean-values-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:37:44+08:00" itemprop="datePublished" title="2023-02-17 11:37">2023-02-17 11:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>C doesn't have any built-in boolean types. What's the best way to use them in
C?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From best to worse:</p>
<p><strong>Option 1 (C99 and newer)</strong></p>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdbool.h&gt;</span>
</pre></div>

<p><strong>Option 2</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="p">;</span>
</pre></div>

<p><strong>Option 3</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">typedef</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="p">;</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="p">};</span>
</pre></div>

<p><strong>Option 4</strong></p>
<div class="code"><pre class="code literal-block">typedef int bool;
#define true 1
#define false 0
</pre></div>

<h2>Explanation</h2>
<ul>
<li>Option 1 will work only if you use C99 (or newer) and it's the "standard way" to do it. Choose this if possible.</li>
<li>Options 2, 3 and 4 will have in practice the same identical behavior. #2 and #3 don't use #defines though, which in my opinion is better.</li>
</ul>
<p>If you are undecided, go with #1!</p>
<p><br></p>
<h3>Suggest</h3>
<p>A few thoughts on booleans in C:</p>
<p>I'm old enough that I just use plain <code>int</code>s as my boolean type without any
typedefs or special defines or enums for true/false values. If you follow my
suggestion below on never comparing against boolean constants, then you only
need to use 0/1 to initialize the flags anyway. However, such an approach may
be deemed too reactionary in these modern times. In that case, one should
definitely use <code>&lt;stdbool.h&gt;</code> since it at least has the benefit of being
standardized.</p>
<p>Whatever the boolean constants are called, use them only for initialization.
Never ever write something like</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">ready</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">TRUE</span><span class="ss">)</span><span class="w"> </span>...
<span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="nv">empty</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">FALSE</span><span class="ss">)</span><span class="w"> </span>...
</pre></div>

<p>These can always be replaced by the clearer</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">ready</span><span class="ss">)</span><span class="w"> </span>...
<span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span><span class="nv">empty</span><span class="ss">)</span><span class="w"> </span>...
</pre></div>

<p>Note that these can actually reasonably and understandably be read out loud.</p>
<p>Give your boolean variables positive names, ie <code>full</code> instead of <code>notfull</code>.
The latter leads to code that is difficult to read easily. Compare</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">full</span><span class="ss">)</span><span class="w"> </span>...
<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span><span class="nv">full</span><span class="ss">)</span><span class="w"> </span>...
</pre></div>

<p>with</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span><span class="nv">notfull</span><span class="ss">)</span><span class="w"> </span>...
<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">notfull</span><span class="ss">)</span><span class="w"> </span>...
</pre></div>

<p>Both of the former pair read naturally, while <code>!notfull</code> is awkward to read
even as it is, and becomes much worse in more complex boolean expressions.</p>
<p>Boolean arguments should generally be avoided. Consider a function defined
like this</p>
<div class="code"><pre class="code literal-block">void foo(bool option) { ... }
</pre></div>

<p>Within the body of the function, it is very clear what the argument means
since it has a convenient, and hopefully meaningful, name. But, the call sites
look like</p>
<div class="code"><pre class="code literal-block">foo(TRUE);
foo(FALSE):
</pre></div>

<p>Here, it's essentially impossible to tell what the parameter meant without
always looking at the function definition or declaration, and it gets much
worse as soon if you add even more boolean parameters. I suggest either</p>
<div class="code"><pre class="code literal-block"><span class="n">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">OPT_ON</span><span class="p">,</span><span class="w"> </span><span class="n">OPT_OFF</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">foo_option</span><span class="p">;</span>
<span class="nb nb-Type">void</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="n">foo_option</span><span class="w"> </span><span class="n">option</span><span class="p">);</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">#define OPT_ON true
#define OPT_OFF false
void foo(bool option) { ... }
</pre></div>

<p>In either case, the call site now looks like</p>
<div class="code"><pre class="code literal-block">foo(OPT_ON);
foo(OPT_OFF);
</pre></div>

<p>which the reader has at least a chance of understanding without dredging up
the definition of <code>foo</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-create-a-dialog-with-ok-and-cancel-options/" class="u-url">How to create a dialog with “Ok” and “Cancel” options</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-create-a-dialog-with-ok-and-cancel-options/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:37:17+08:00" itemprop="datePublished" title="2023-02-17 11:37">2023-02-17 11:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am going to make a button to take an action and save the data into a
database.</p>
<p>Once the user clicks on the button, I want a JavaScript alert to offer “yes”
and “cancel” options. If the user selects “yes”, the data will be inserted
into the database, otherwise no action will be taken.</p>
<p>How do I display such a dialog?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You’re probably looking for <code>confirm()</code>, which displays a prompt and returns
<code>true</code> or <code>false</code> based on what the user decided:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">confirm</span><span class="ss">(</span><span class="s1">'Are you sure you want to save this thing into the database?'</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">Save</span><span class="w"> </span><span class="nv">it</span><span class="o">!</span>
<span class="w">  </span><span class="nv">console</span>.<span class="nv">log</span><span class="ss">(</span><span class="s1">'Thing was saved to the database.'</span><span class="ss">)</span><span class="c1">;</span>
}<span class="w"> </span><span class="k">else</span><span class="w"> </span>{
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">nothing</span><span class="o">!</span>
<span class="w">  </span><span class="nv">console</span>.<span class="nv">log</span><span class="ss">(</span><span class="s1">'Thing was not saved to the database.'</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">answer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s2">"Save data?"</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">answer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="n">some</span><span class="w"> </span><span class="n">code</span>
<span class="p">}</span>
<span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="n">some</span><span class="w"> </span><span class="n">code</span>
<span class="p">}</span>
</pre></div>

<p>Use <code>window.confirm</code> instead of alert. This is the easiest way to achieve that
functionality.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/finding-diff-between-current-and-last-version/" class="u-url">Finding diff between current and last version</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/finding-diff-between-current-and-last-version/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:36:48+08:00" itemprop="datePublished" title="2023-02-17 11:36">2023-02-17 11:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Using Git, how can you find the difference between the current and the last
version?</p>
<div class="code"><pre class="code literal-block">git diff last version:HEAD
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>I don't really understand the meaning of "last version".</p>
<p>As the previous commit can be accessed with HEAD^, I think that you are
looking for something like:</p>
<div class="code"><pre class="code literal-block">git diff HEAD^ HEAD
</pre></div>

<p>That also can be applied for a :commithash</p>
<div class="code"><pre class="code literal-block">git diff $commithash^ $commithash
</pre></div>

<p>As of Git 1.8.5, <code>@</code> is an alias for <code>HEAD</code>, so you can use:</p>
<div class="code"><pre class="code literal-block">git diff @~..@
</pre></div>

<p>The following will also work:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="k">show</span>
</pre></div>

<p>If you want to know the diff between head and any commit you can use:</p>
<div class="code"><pre class="code literal-block">git diff commit_id HEAD
</pre></div>

<p>And this will launch your visual diff tool (if configured):</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">difftool</span><span class="w"> </span><span class="n">HEAD</span><span class="o">^</span><span class="w"> </span><span class="n">HEAD</span>
</pre></div>

<p>Since comparison to HEAD is default you can omit it (as pointed out by
Orient):</p>
<div class="code"><pre class="code literal-block">git diff @^
git diff HEAD^
git diff commit_id
</pre></div>

<h3>Warnings</h3>
<ul>
<li>@ScottF and @Panzercrisis explain in the comments that on Windows the <code>~</code> character must be used instead of <code>^</code>.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Assuming "current version" is the working directory (uncommitted
modifications) and "last version" is <code>HEAD</code> (last committed modifications for
the current branch), simply do</p>
<div class="code"><pre class="code literal-block">git diff HEAD
</pre></div>

<p><em>Credit for the following goes to user<code>Cerran</code>.</em></p>
<p>And if you always skip the staging area with <code>-a</code> when you commit, then you
can simply use <code>git diff</code>.</p>
<p><strong>Summary</strong></p>
<ol>
<li>
<code>git diff</code> shows unstaged changes.</li>
<li>
<code>git diff --cached</code> shows staged changes.</li>
<li>
<code>git diff HEAD</code> shows all changes (both staged and unstaged).</li>
</ol>
<p>Source: git-diff(1) Manual Page – Cerran</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-624.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-622.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
