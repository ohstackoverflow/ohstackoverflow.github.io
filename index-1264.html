<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1264) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1264.html">
<link rel="prev" href="index-1265.html" type="text/html">
<link rel="next" href="index-1263.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-would-i-create-a-uialertview-in-swift/" class="u-url">How would I create a UIAlertView in Swift?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-would-i-create-a-uialertview-in-swift/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:12:44+08:00" itemprop="datePublished" title="2023-02-18 05:12">2023-02-18 05:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have been working to create a UIAlertView in Swift, but for some reason I
can't get the statement right because I'm getting this error:</p>
<blockquote>
<p>Could not find an overload for 'init' that accepts the supplied arguments</p>
</blockquote>
<p>Here is how I have it written:</p>
<div class="code"><pre class="code literal-block">let button2Alert: UIAlertView = UIAlertView(title: "Title", message: "message",
                     delegate: self, cancelButtonTitle: "OK", otherButtonTitles: nil)
</pre></div>

<p>Then to call it I'm using:</p>
<div class="code"><pre class="code literal-block"><span class="nv">button2Alert</span>.<span class="k">show</span><span class="ss">()</span>
</pre></div>

<p>As of right now it is crashing and I just can't seem to get the syntax right.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From the <code>UIAlertView</code> class:</p>
<blockquote>
<p>// UIAlertView is deprecated. Use <strong>UIAlertController</strong> with a
preferredStyle of UIAlertControllerStyleAlert instead</p>
</blockquote>
<p>On iOS 8, you can do this:</p>
<div class="code"><pre class="code literal-block">let alert = UIAlertController(title: "Alert", message: "Message", preferredStyle: UIAlertControllerStyle.Alert)
alert.addAction(UIAlertAction(title: "Click", style: UIAlertActionStyle.Default, handler: nil))
self.presentViewController(alert, animated: true, completion: nil)
</pre></div>

<p>Now <code>UIAlertController</code> is a single class for creating and interacting with
what we knew as <code>UIAlertView</code>s and <code>UIActionSheet</code>s on iOS 8.</p>
<p><strong>Edit:</strong> To handle actions:</p>
<div class="code"><pre class="code literal-block">alert.addAction(UIAlertAction(title: "OK", style: .Default, handler: { action in
    switch action.style{
    case .Default:
        print("default")

    case .Cancel:
        print("cancel")

    case .Destructive:
        print("destructive")
    }
}}))
</pre></div>

<p><strong>Edit for Swift 3:</strong></p>
<div class="code"><pre class="code literal-block">let alert = UIAlertController(title: "Alert", message: "Message", preferredStyle: UIAlertControllerStyle.alert)
alert.addAction(UIAlertAction(title: "Click", style: UIAlertActionStyle.default, handler: nil))
self.present(alert, animated: true, completion: nil)
</pre></div>

<p><strong>Edit for Swift 4.x:</strong></p>
<div class="code"><pre class="code literal-block">let alert = UIAlertController(title: "Alert", message: "Message", preferredStyle: .alert)
alert.addAction(UIAlertAction(title: "OK", style: .default, handler: { action in
    switch action.style{
        case .default:
        print("default")

        case .cancel:
        print("cancel")

        case .destructive:
        print("destructive")

    }
}))
self.present(alert, animated: true, completion: nil)
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h2>One Button</h2>
<p><img alt="One Button Screenshot" src="images/OSaIi.png"></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">ViewController</span><span class="p">:</span><span class="w"> </span><span class="n">UIViewController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="err">@</span><span class="n">IBAction</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">showAlertButtonTapped</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="n">sender</span><span class="p">:</span><span class="w"> </span><span class="n">UIButton</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alert</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">alert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIAlertController</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Title"</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is my message."</span><span class="p">,</span><span class="w"> </span><span class="n">preferredStyle</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertController</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">alert</span><span class="p">)</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
<span class="w">        </span><span class="n">alert</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertAction</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">))</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alert</span>
<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span><span class="w"> </span><span class="n">animated</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span><span class="w"> </span><span class="n">completion</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>Two Buttons</h2>
<p><img alt="Two Button Alert Screenshot" src="images/gmAj9.png"></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">ViewController</span><span class="p">:</span><span class="w"> </span><span class="n">UIViewController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="err">@</span><span class="n">IBAction</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">showAlertButtonTapped</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="n">sender</span><span class="p">:</span><span class="w"> </span><span class="n">UIButton</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alert</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">alert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIAlertController</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"UIAlertController"</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">:</span><span class="w"> </span><span class="s2">"Would you like to continue learning how to use iOS alerts?"</span><span class="p">,</span><span class="w"> </span><span class="n">preferredStyle</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertController</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">alert</span><span class="p">)</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actions</span><span class="w"> </span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span>
<span class="w">        </span><span class="n">alert</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"Continue"</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertAction</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">))</span>
<span class="w">        </span><span class="n">alert</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cancel"</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertAction</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">cancel</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">))</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alert</span>
<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span><span class="w"> </span><span class="n">animated</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span><span class="w"> </span><span class="n">completion</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>Three Buttons</h2>
<p><img alt="enter image description here" src="images/aQgqD.png"></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">ViewController</span><span class="p">:</span><span class="w"> </span><span class="n">UIViewController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="err">@</span><span class="n">IBAction</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">showAlertButtonTapped</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="n">sender</span><span class="p">:</span><span class="w"> </span><span class="n">UIButton</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alert</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">alert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIAlertController</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notice"</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lauching this missile will destroy the entire universe. Is this what you intended to do?"</span><span class="p">,</span><span class="w"> </span><span class="n">preferredStyle</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertController</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">alert</span><span class="p">)</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actions</span><span class="w"> </span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span>
<span class="w">        </span><span class="n">alert</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"Remind Me Tomorrow"</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertAction</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">))</span>
<span class="w">        </span><span class="n">alert</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cancel"</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertAction</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">cancel</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">))</span>
<span class="w">        </span><span class="n">alert</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">UIAlertAction</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s2">"Launch the Missile"</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="p">:</span><span class="w"> </span><span class="n">UIAlertAction</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">destructive</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">))</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">alert</span>
<span class="w">        </span><span class="bp">self</span><span class="o">.</span><span class="n">present</span><span class="p">(</span><span class="n">alert</span><span class="p">,</span><span class="w"> </span><span class="n">animated</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span><span class="w"> </span><span class="n">completion</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>Handling Button Taps</h2>
<p>The <code>handler</code> was <code>nil</code> in the above examples. You can replace <code>nil</code> with a
closure to do something when the user taps a button. For example:</p>
<div class="code"><pre class="code literal-block"><span class="nv">alert</span>.<span class="nv">addAction</span><span class="ss">(</span><span class="nv">UIAlertAction</span><span class="ss">(</span><span class="nv">title</span>:<span class="w"> </span><span class="s2">"Launch the Missile"</span>,<span class="w"> </span><span class="nv">style</span>:<span class="w"> </span><span class="nv">UIAlertAction</span>.<span class="nv">Style</span>.<span class="nv">destructive</span>,<span class="w"> </span><span class="nv">handler</span>:<span class="w"> </span>{<span class="w"> </span><span class="nv">action</span><span class="w"> </span><span class="nv">in</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">like</span>...
<span class="w">    </span><span class="nv">self</span>.<span class="nv">launchMissile</span><span class="ss">()</span>

}<span class="ss">))</span>
</pre></div>

<h2>Notes</h2>
<ul>
<li>Multiple buttons do not necessarily need to use different <code>UIAlertAction.Style</code> types. They could all be <code>.default</code>.</li>
<li>For more than three buttons consider using an Action Sheet. The setup is very similar. Here is an example.</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-are-mutable-structs-evil/" class="u-url">Why are mutable structs “evil”?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-are-mutable-structs-evil/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:11:29+08:00" itemprop="datePublished" title="2023-02-18 05:11">2023-02-18 05:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Following the discussions here on SO I already read several times the remark
that mutable structs are “evil” (like in the answer to this question).</p>
<p>What's the actual problem with mutability and structs in C#?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Structs are value types which means they are copied when they are passed
around.</p>
<p>So if you change a copy you are changing only that copy, not the original and
not any other copies which might be around.</p>
<p>If your struct is immutable then all automatic copies resulting from being
passed by value will be the same.</p>
<p>If you want to change it you have to consciously do it by creating a new
instance of the struct with the modified data. (not a copy)</p>
<p><br></p>
<h3>Suggest</h3>
<p>Where to start ;-p</p>
<p>Eric Lippert's blog is always good for a quote:</p>
<blockquote>
<p>This is yet another reason why mutable value types are evil. Try to always
make value types immutable.</p>
</blockquote>
<p>First, you tend to lose changes quite easily... for example, getting things
out of a list:</p>
<div class="code"><pre class="code literal-block">Foo foo = list[0];
foo.Name = "abc";
</pre></div>

<p>what did that change? Nothing useful...</p>
<p>The same with properties:</p>
<div class="code"><pre class="code literal-block">myObj.SomeProperty.Size = 22; // the compiler spots this one
</pre></div>

<p>forcing you to do:</p>
<div class="code"><pre class="code literal-block">Bar bar = myObj.SomeProperty;
bar.Size = 22;
myObj.SomeProperty = bar;
</pre></div>

<p>less critically, there is a size issue; mutable objects <strong>tend</strong> to have
multiple properties; yet if you have a struct with two <code>int</code>s, a <code>string</code>, a
<code>DateTime</code> and a <code>bool</code>, you can very quickly burn through a lot of memory.
With a class, multiple callers can share a reference to the same instance
(references are small).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-deal-with-java-lang-outofmemoryerror-java-heap-space-error/" class="u-url">How to deal with "java.lang.OutOfMemoryError: Java heap space" error?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-deal-with-java-lang-outofmemoryerror-java-heap-space-error/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:11:01+08:00" itemprop="datePublished" title="2023-02-18 05:11">2023-02-18 05:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am writing a client-side <strong>Swing</strong> application (graphical font designer) on
<strong>Java 5</strong>. Recently, I am running into <code>java.lang.OutOfMemoryError: Java heap
space</code> error because I am not being conservative on memory usage. The user can
open unlimited number of files, and the program keeps the opened objects in
the memory. After a quick research I found Ergonomics in the 5.0 Java Virtual
Machine and others saying on Windows machine the JVM defaults max heap size as
<code>64MB</code>.</p>
<p>Given this situation, how should I deal with this constraint?</p>
<p>I could increase the <strong>max heap size</strong> using <strong>command line</strong> option to java,
but that would require figuring out available RAM and writing some launching
program or script. Besides, increasing to some <strong>finite</strong> max does not
<strong>ultimately</strong> get rid of the issue.</p>
<p>I could rewrite some of my code to persist objects to file system frequently
(using database is the same thing) to free up the memory. It could work, but
it's probably a lot work too.</p>
<p>If you could point me to details of above ideas or some alternatives like
<strong>automatic virtual memory, extending heap size dynamically</strong> , that will be
great.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Ultimately you always have a finite max of heap to use no matter what platform
you are running on. In Windows 32 bit this is around <code>2GB</code> (not specifically
heap but total amount of memory per process). It just happens that Java
chooses to make the default smaller (presumably so that the programmer can't
create programs that have runaway memory allocation without running into this
problem and having to examine exactly what they are doing).</p>
<p>So this given there are several approaches you could take to either determine
what amount of memory you need or to reduce the amount of memory you are
using. One common mistake with garbage collected languages such as Java or C#
is to keep around references to objects that you <strong>no longer</strong> are using, or
allocating many objects when you could <strong>reuse</strong> them instead. As long as
objects have a reference to them they will continue to use heap space as the
garbage collector will not delete them.</p>
<p>In this case you can use a Java memory profiler to determine what methods in
your program are allocating large number of objects and then determine if
there is a way to make sure they are no longer referenced, or to not allocate
them in the first place. One option which I have used in the past is "JMP"
http://www.khelekore.org/jmp/.</p>
<p>If you determine that you are allocating these objects for a reason and you
need to keep around references (depending on what you are doing this might be
the case), you will just need to increase the max heap size when you start the
program. However, once you do the memory profiling and understand how your
objects are getting allocated you should have a better idea about how much
memory you need.</p>
<p>In general if you can't guarantee that your program will run in some finite
amount of memory (perhaps depending on input size) you will always run into
this problem. Only after exhausting all of this will you need to look into
caching objects out to disk etc. At this point you should have a very good
reason to say "I need Xgb of memory" for something and you can't work around
it by improving your algorithms or memory allocation patterns. Generally this
will only usually be the case for algorithms operating on large datasets (like
a database or some scientific analysis program) and then techniques like
caching and memory mapped IO become useful.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Run Java with the command-line option <code>-Xmx</code>, which sets the <em>maximum</em> size of
the heap.</p>
<p>See here for details.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1265.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1263.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
