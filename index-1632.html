<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1632) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1632.html">
<link rel="prev" href="index-1633.html" type="text/html">
<link rel="next" href="index-1631.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-debug-error-spawn-enoent-on-node-js/" class="u-url">How do I debug "Error: spawn ENOENT" on node.js?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-debug-error-spawn-enoent-on-node-js/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:39:54+08:00" itemprop="datePublished" title="2023-03-03 05:39">2023-03-03 05:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <h3>When I get the following error:</h3>
<div class="code"><pre class="code literal-block"><span class="nt">events</span><span class="p">.</span><span class="nc">js</span><span class="p">:</span><span class="nd">72</span>
<span class="w">        </span><span class="nt">throw</span><span class="w"> </span><span class="nt">er</span><span class="o">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">Unhandled</span><span class="w"> </span><span class="s1">'error'</span><span class="w"> </span><span class="nt">event</span>
<span class="w">              </span><span class="o">^</span>
<span class="nt">Error</span><span class="o">:</span><span class="w"> </span><span class="nt">spawn</span><span class="w"> </span><span class="nt">ENOENT</span>
<span class="w">    </span><span class="nt">at</span><span class="w"> </span><span class="nt">errnoException</span><span class="w"> </span><span class="o">(</span><span class="nt">child_process</span><span class="p">.</span><span class="nc">js</span><span class="p">:</span><span class="nd">1000</span><span class="p">:</span><span class="nd">11</span><span class="o">)</span>
<span class="w">    </span><span class="nt">at</span><span class="w"> </span><span class="nt">Process</span><span class="p">.</span><span class="nc">ChildProcess</span><span class="p">.</span><span class="nc">_handle</span><span class="p">.</span><span class="nc">onexit</span><span class="w"> </span><span class="o">(</span><span class="nt">child_process</span><span class="p">.</span><span class="nc">js</span><span class="p">:</span><span class="nd">791</span><span class="p">:</span><span class="nd">34</span><span class="o">)</span>
</pre></div>

<h3>What procedure can I follow to fix it?</h3>
<p><strong>Author note</strong> : Lots of issues with this error encouraged me to post this
question for future references.</p>
<p><strong>Related questions:</strong></p>
<ul>
<li>using spawn function with NODE_ENV=production</li>
<li>node.js child_process.spawn ENOENT error - only under supervisord</li>
<li>spawn ENOENT node.js error</li>
<li>https://stackoverflow.com/questions/27603713/nodejs-spawn-enoent-error-on-travis-calling-global-npm-package</li>
<li>Node JS - child_process spawn('npm install') in Grunt task results in ENOENT error</li>
<li>Running "foreman" task Fatal error: spawn ENOENT</li>
<li>unhandled error event in node js Error: spawn ENOENT at errnoException (child_process.js:975:11)</li>
<li>Node.js SpookyJS: error executing hello.js</li>
<li>https://stackoverflow.com/questions/26572214/run-grunt-on-a-directory-nodewebkit</li>
<li>Run exe file with Child Process NodeJS</li>
<li>Node: child_process.spawn not working on Java even though it's in the path (ENOENT)</li>
<li>spawn ENOENT error with NodeJS (PYTHON related)</li>
<li>image resizing is not working in node.js (partial.js) (non-installed dependency)</li>
<li>npm install error ENOENT (build dependency problem)</li>
<li>Cannot install node.js - oracle module on Windows 7 (build dependency problem)</li>
<li>Error installing gulp using nodejs on windows (strange case)</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<h2>How to research the spawn call raising the error:</h2>
<ul>
<li>Use NODE_DEBUG=child_process, Credits to @karl-richter. <em>Simple, quick, October 2019</em>
</li>
<li>Use a wrapper to decorate <code>child_process.spawn</code>, Credits to @jiaji-zhou. <em>Simple, quick, January 2015</em>
</li>
<li>Long procedure, credits to @laconbass. <em>Complex, time-cost, December 2014</em>
</li>
</ul>
<h2>Known, usual causes</h2>
<ol>
<li>
<p>Environment issues</p>
<ul>
<li>The command executable does not exist within the system (dependency not being installed). <em>see prominc's answer</em>
</li>
<li>The command executable does not exist within a directory of those specified by <code>PATH</code> environment variable.</li>
<li>The executable binary was compiled with uncompatible libraries. <em>see danilo-ramirez answer</em>
</li>
<li>
<p>Windows-only bugs/quirks</p>
</li>
<li>
<p>'.cmd' extension / shell: true. <em>see li-zheng answer</em></p>
</li>
<li>Administrator permisions. <em>see steve's answer</em>
</li>
<li>
<p>Wrong <code>spawn('command', ['--argument', 'list'], { cwd, env, ...opts })</code> usage</p>
</li>
<li>
<p>Specified working directory (<code>opts.cwd</code>) does not exist · <em>see leeroy-brun's answer</em></p>
</li>
<li>Argument list within command <code>String</code> <del><code>spawn('command --wrong --argument list')</code></del>
</li>
<li>Env vars within command string <del><code>spawn('ENV_VAR=WRONG command')</code></del>
</li>
<li>Argument list <code>Array</code> specified as <code>String</code> <del><code>spawn('cmd', '--argument list')</code></del>
</li>
<li>Unset <code>PATH</code> env variable <del><code>spawn('cmd', [], { env: { variable } }</code></del> =&gt; <code>spawn('cmd', [], { env: { ...process.env, variable } }</code>
</li>
</ul>
</li>
</ol>
<hr>
<blockquote>
<h3>There are 2 posible origins for <code>ENOENT</code>:</h3>
<ol>
<li>Code you are writing</li>
<li>Code you depend on
</li>
</ol>
<p>When origin is code you depend on, usual cause is an <strong>Environment Issue</strong>
(or windows quirk)</p>
</blockquote>
<hr>
<p><br></p>
<h3>Suggest</h3>
<h3>Step 1: Ensure <code>spawn</code> is called the right way</h3>
<p>First, review the docs for child_process.spawn( command, args, options ):</p>
<blockquote>
<p>Launches a new process with the given <code>command</code>, with command line arguments
in <code>args</code>. If omitted, <code>args</code> defaults to an empty Array.</p>
<p>The third argument is used to specify additional options, which defaults to:</p>
<p><code>{ cwd: undefined, env: process.env }</code></p>
<p>Use <code>env</code> to specify environment variables that will be visible to the new
process, the default is <code>process.env</code>.</p>
</blockquote>
<p><strong>Ensure you are not putting any command line arguments in<code>command</code> and the
whole <code>spawn</code> call is valid</strong>. Proceed to next step.</p>
<h3>Step 2: Identify the Event Emitter that emits the error event</h3>
<p>Search on your source code for each call to <code>spawn</code>, or <code>child_process.spawn</code>,
i.e.</p>
<div class="code"><pre class="code literal-block">spawn('some-command', [ '--help' ]);
</pre></div>

<p>and attach there an event listener for the 'error' event, so you get noticed
the exact Event Emitter that is throwing it as 'Unhandled'. After debugging,
that handler can be removed.</p>
<div class="code"><pre class="code literal-block">spawn('some-command', [ '--help' ])
  .on('error', function( err ){ throw err })
;
</pre></div>

<p>Execute and you should get the file path and line number where your 'error'
listener was registered. Something like:</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="n">that</span><span class="o">/</span><span class="n">registers</span><span class="o">/</span><span class="n">the</span><span class="o">/</span><span class="n">error</span><span class="o">/</span><span class="n">listener</span><span class="p">.</span><span class="nl">js:</span><span class="mh">29</span>
<span class="w">      </span><span class="n">throw</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="w">            </span><span class="o">^</span>
<span class="nl">Error:</span><span class="w"> </span><span class="n">spawn</span><span class="w"> </span><span class="n">ENOENT</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">errnoException</span><span class="w"> </span><span class="p">(</span><span class="n">child_process</span><span class="p">.</span><span class="nl">js:</span><span class="mh">1000</span><span class="o">:</span><span class="mh">11</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Process</span><span class="p">.</span><span class="n">ChildProcess</span><span class="p">.</span><span class="n">_handle</span><span class="p">.</span><span class="n">onexit</span><span class="w"> </span><span class="p">(</span><span class="n">child_process</span><span class="p">.</span><span class="nl">js:</span><span class="mh">791</span><span class="o">:</span><span class="mh">34</span><span class="p">)</span>
</pre></div>

<p>If the first two lines are still</p>
<div class="code"><pre class="code literal-block"><span class="nt">events</span><span class="p">.</span><span class="nc">js</span><span class="p">:</span><span class="nd">72</span>
<span class="w">        </span><span class="nt">throw</span><span class="w"> </span><span class="nt">er</span><span class="o">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">Unhandled</span><span class="w"> </span><span class="s1">'error'</span><span class="w"> </span><span class="nt">event</span>
</pre></div>

<p>do this step again until they are not. <strong>You must identify the listener that
emits the error before going on next step.</strong></p>
<h3>Step 3: Ensure the environment variable <code>$PATH</code> is set</h3>
<p>There are two possible scenarios:</p>
<ol>
<li>You rely on the default <code>spawn</code> behaviour, so child process environment will be the same as <code>process.env</code>.</li>
<li>You are explicity passing an <code>env</code> object to <code>spawn</code> on the <code>options</code> argument.</li>
</ol>
<p><strong>In both scenarios, you must inspect the<code>PATH</code> key on the environment object
that the spawned child process will use.</strong></p>
<p><em>Example for scenario 1</em></p>
<div class="code"><pre class="code literal-block"><span class="c1">// inspect the PATH key on process.env</span>
<span class="n">console</span><span class="p">.</span><span class="nb">log</span><span class="p">(</span><span class="w"> </span><span class="n">process</span><span class="p">.</span><span class="n">env</span><span class="p">.</span><span class="n">PATH</span><span class="w"> </span><span class="p">);</span>
<span class="n">spawn</span><span class="p">(</span><span class="s">'some-command'</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s">'--help'</span><span class="p">]);</span>
</pre></div>

<p><em>Example for scenario 2</em></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getEnvKeyValuePairsSomeHow</span><span class="p">();</span>
<span class="o">//</span><span class="w"> </span><span class="n">inspect</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">PATH</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="n">object</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="w"> </span><span class="n">env</span><span class="o">.</span><span class="n">PATH</span><span class="w"> </span><span class="p">);</span>
<span class="n">spawn</span><span class="p">(</span><span class="s1">'some-command'</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'--help'</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">env</span><span class="p">:</span><span class="w"> </span><span class="n">env</span><span class="w"> </span><span class="p">});</span>
</pre></div>

<p><strong>The absence of<code>PATH</code> (i.e., it's <code>undefined</code>) will cause <code>spawn</code> to emit the
<code>ENOENT</code> error</strong>, as it will not be possible to locate any <code>command</code> unless
it's an absolute path to the executable file.</p>
<p><strong>When<code>PATH</code> is correctly set, proceed to next step.</strong> It should be a
directory, or a list of directories. Last case is the usual.</p>
<h3>Step 4: Ensure <code>command</code> exists on a directory of those defined in <code>PATH</code>
</h3>
<p><strong>Spawn may emit the<code>ENOENT</code> error if the filename <code>command</code> (i.e, 'some-
command') does not exist in at least one of the directories defined on
<code>PATH</code>.</strong></p>
<p>Locate the exact place of <code>command</code>. On most linux distributions, this can be
done from a terminal with the <code>which</code> command. It will tell you the absolute
path to the executable file (like above), or tell if it's not found.</p>
<p><em>Example usage of which and its output when a command is <strong>found</strong></em></p>
<div class="code"><pre class="code literal-block">&gt; which some-command
some-command is /usr/bin/some-command
</pre></div>

<p><em>Example usage of which and its output when a command is <strong>not found</strong></em></p>
<div class="code"><pre class="code literal-block">&gt; which some-command
bash: type: some-command: not found
</pre></div>

<p><strong>miss-installed programs are the most common cause for a <em>not found</em>
command.</strong> Refer to each command documentation if needed and install it.</p>
<p><strong>When command is a simple script file ensure it's accessible from a directory
on the<code>PATH</code>.</strong> If it's not, either move it to one or make a link to it.</p>
<p>Once you determine <code>PATH</code> is correctly set and <code>command</code> is accessible from
it, you should be able to spawn your child process without <code>spawn ENOENT</code>
being thrown.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-best-data-type-to-use-for-money-in-c/" class="u-url">What is the best data type to use for money in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-best-data-type-to-use-for-money-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:39:32+08:00" itemprop="datePublished" title="2023-03-03 05:39">2023-03-03 05:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the best data type to use for money in C#?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As it is described at decimal as:</p>
<blockquote>
<p>The decimal keyword indicates a 128-bit data type. Compared to floating-
point types, the decimal type has more precision and a smaller range, which
makes it <strong>appropriate for financial and monetary</strong> calculations.</p>
</blockquote>
<p>You can use a decimal as follows:</p>
<div class="code"><pre class="code literal-block">decimal myMoney = 300.5m;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>System.Decimal</p>
<blockquote>
<p>The Decimal value type represents decimal numbers ranging from positive
79,228,162,514,264,337,593,543,950,335 to negative
79,228,162,514,264,337,593,543,950,335. The Decimal value type is
appropriate for financial calculations requiring large numbers of
significant integral and fractional digits and no round-off errors. The
Decimal type does not eliminate the need for rounding. Rather, it minimizes
errors due to rounding.</p>
</blockquote>
<p>I'd like to point to this excellent answer by zneak on why double shouldn't be
used.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/when-to-use-dynamic-vs-static-libraries/" class="u-url">When to use dynamic vs. static libraries</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/when-to-use-dynamic-vs-static-libraries/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:39:07+08:00" itemprop="datePublished" title="2023-03-03 05:39">2023-03-03 05:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When creating a class library in C++, you can choose between dynamic (<code>.dll</code>,
<code>.so</code>) and static (<code>.lib</code>, <code>.a</code>) libraries. What is the difference between
them and when is it appropriate to use which?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Static libraries increase the size of the code in your binary. They're always
loaded and whatever version of the code you compiled with is the version of
the code that will run.</p>
<p>Dynamic libraries are stored and versioned separately. It's possible for a
version of the dynamic library to be loaded that wasn't the original one that
shipped with your code <strong>if</strong> the update is considered binary compatible with
the original version.</p>
<p>Additionally dynamic libraries aren't necessarily loaded -- they're usually
loaded when first called -- and can be shared among components that use the
same library (multiple data loads, one code load).</p>
<p>Dynamic libraries were considered to be the better approach most of the time,
but originally they had a major flaw (google DLL hell), which has all but been
eliminated by more recent Windows OSes (Windows XP in particular).</p>
<p><br></p>
<h3>Suggest</h3>
<p>Others have adequately explained what a static library is, but I'd like to
point out some of the caveats of using static libraries, at least on Windows:</p>
<ul>
<li>
<p><strong>Singletons:</strong> If something needs to be global/static and unique, be very careful about putting it in a static library. If multiple DLLs are linked against that static library they will each get their own copy of the singleton. However, if your application is a single EXE with no custom DLLs, this may not be a problem.</p>
</li>
<li>
<p><strong>Unreferenced code removal:</strong> When you link against a static library, only the parts of the static library that are referenced by your DLL/EXE will get linked into your DLL/EXE. </p>
</li>
</ul>
<p>For example, if <code>mylib.lib</code> contains <code>a.obj</code> and <code>b.obj</code> and your DLL/EXE only
references functions or variables from <code>a.obj</code>, the entirety of <code>b.obj</code> will
get discarded by the linker. If <code>b.obj</code> contains global/static objects, their
constructors and destructors will not get executed. If those
constructors/destructors have side effects, you may be disappointed by their
absence.</p>
<p>Likewise, if the static library contains special entrypoints you may need to
take care that they are actually included. An example of this in embedded
programming (okay, not Windows) would be an interrupt handler that is marked
as being at a specific address. You also need to mark the interrupt handler as
an entrypoint to make sure it doesn't get discarded.</p>
<p>Another consequence of this is that a static library may contain object files
that are completely unusable due to unresolved references, but it won't cause
a linker error until you reference a function or variable from those object
files. This may happen long after the library is written.</p>
<ul>
<li>
<p><strong>Debug symbols:</strong> You may want a separate PDB for each static library, or you may want the debug symbols to be placed in the object files so that they get rolled into the PDB for the DLL/EXE. The Visual C++ documentation explains the necessary options.</p>
</li>
<li>
<p><strong>RTTI:</strong> You may end up with multiple <code>type_info</code> objects for the same class if you link a single static library into multiple DLLs. If your program assumes that <code>type_info</code> is "singleton" data and uses <code>&amp;typeid()</code> or <code>type_info::before()</code>, you may get undesirable and surprising results. </p>
</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1633.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1631.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
