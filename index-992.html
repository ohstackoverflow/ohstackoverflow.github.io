<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 992) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-992.html">
<link rel="prev" href="index-993.html" type="text/html">
<link rel="next" href="index-991.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-simple-way-to-remove-multiple-spaces-in-a-string/" class="u-url">Is there a simple way to remove multiple spaces in a string?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-simple-way-to-remove-multiple-spaces-in-a-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:52:00+08:00" itemprop="datePublished" title="2023-02-17 21:52">2023-02-17 21:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Suppose this string:</p>
<div class="code"><pre class="code literal-block">The   fox jumped   over    the log.
</pre></div>

<p>Turning into:</p>
<div class="code"><pre class="code literal-block">The fox jumped over the log.
</pre></div>

<p>What is the simplest (1-2 lines) to achieve this, without splitting and going
into lists?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">re</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">' +'</span><span class="p">,</span> <span class="s1">' '</span><span class="p">,</span> <span class="s1">'The     quick brown    fox'</span><span class="p">)</span>
<span class="s1">'The quick brown fox'</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><code>foo</code> is your string:</p>
<div class="code"><pre class="code literal-block">" ".join(foo.split())
</pre></div>

<p>Be warned though this removes "all whitespace characters (space, tab, newline,
return, formfeed)" (thanks to hhsaffar, see comments). I.e., <code>"this is \t a
test\n"</code> will effectively end up as <code>"this is a test"</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/undefined-unspecified-and-implementation-defined-behavior/" class="u-url">Undefined, unspecified and implementation-defined behavior</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/undefined-unspecified-and-implementation-defined-behavior/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:51:08+08:00" itemprop="datePublished" title="2023-02-17 21:51">2023-02-17 21:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is <em>undefined behavior</em> (UB) in C and C++? What about <em>unspecified
behavior</em> and <em>implementation-defined</em> behavior? What is the difference
between them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><em><strong>Undefined behavior</strong></em> is one of those aspects of the C and C++ language
that can be surprising to programmers coming from other languages (other
languages try to hide it better). Basically, it is possible to write C++
programs that do not behave in a predictable way, even though many C++
compilers will not report any errors in the program!</p>
<p>Let's look at a classic example:</p>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="kr">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="kr">char</span><span class="o">*</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"hello!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span><span class="w">   </span><span class="c1">// yes I know, deprecated conversion</span>
<span class="w">    </span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">'y'</span><span class="p">;</span>
<span class="w">    </span><span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">'w'</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>The variable <code>p</code> points to the string literal <code>"hello!\n"</code>, and the two
assignments below try to modify that string literal. What does this program
do? According to section 2.14.5 paragraph 11 of the C++ standard, it invokes
<em>undefined behavior</em> :</p>
<blockquote>
<p>The effect of attempting to modify a string literal is undefined.</p>
</blockquote>
<p>I can hear people screaming "But wait, I can compile this no problem and get
the output <code>yellow</code>" or "What do you mean undefined, string literals are
stored in read-only memory, so the first assignment attempt results in a core
dump". This is exactly the problem with undefined behavior. Basically, the
standard allows anything to happen once you invoke undefined behavior (even
nasal demons). If there is a "correct" behavior according to your mental model
of the language, that model is simply wrong; The C++ standard has the only
vote, period.</p>
<p>Other examples of undefined behavior include accessing an array beyond its
bounds, dereferencing the null pointer, accessing objects after their lifetime
ended or writing allegedly clever expressions like <code>i++ + ++i</code>.</p>
<p>Section 1.9 of the C++ standard also mentions undefined behavior's two less
dangerous brothers, <strong>unspecified behavior</strong> and <strong>implementation-defined
behavior</strong> :</p>
<blockquote>
<p>The semantic descriptions in this International Standard define a
parameterized nondeterministic abstract machine.</p>
<p>Certain aspects and operations of the abstract machine are described in this
International Standard as <strong>implementation-defined</strong> (for example,
<code>sizeof(int)</code>). These constitute the parameters of the abstract machine.
Each implementation shall include documentation describing its
characteristics and behavior in these respects.</p>
<p>Certain other aspects and operations of the abstract machine are described
in this International Standard as <strong>unspecified</strong> (for example, order of
evaluation of arguments to a function). Where possible, this International
Standard defines a set of allowable behaviors. These define the
nondeterministic aspects of the abstract machine.</p>
<p>Certain other operations are described in this International Standard as
<strong>undefined</strong> (for example, the effect of dereferencing the null pointer). [
<em>Note</em> : <strong>this International Standard imposes no requirements on the
behavior of programs that contain undefined behavior.</strong> — <em>end note</em> ]</p>
</blockquote>
<p>Specifically, section 1.3.24 states:</p>
<blockquote>
<p>Permissible undefined behavior ranges from <strong>ignoring the situation
completely with unpredictable results</strong> , to behaving during translation or
program execution in a documented manner characteristic of the environment
(with or without the issuance of a diagnostic message), to terminating a
translation or execution (with the issuance of a diagnostic message).</p>
</blockquote>
<p>What can you do to avoid running into undefined behavior? Basically, you have
to read good C++ books by authors who know what they're talking about. Avoid
internet tutorials. Avoid bullschildt.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Well, this is basically a straight copy-paste from the standard</p>
<blockquote>
<p><strong>3.4.1</strong> 1 <strong>implementation-defined behavior</strong> unspecified behavior where
each implementation documents how the choice is made</p>
<p>2 EXAMPLE An example of implementation-defined behavior is the propagation
of the high-order bit when a signed integer is shifted right.</p>
<p><strong>3.4.3</strong> 1 <strong>undefined behavior</strong> behavior, upon use of a nonportable or
erroneous program construct or of erroneous data, for which this
International Standard imposes no requirements</p>
<p>2 NOTE Possible undefined behavior ranges from ignoring the situation
completely with unpredictable results, to behaving during translation or
program execution in a documented manner characteristic of the environment
(with or without the issuance of a diagnostic message), to terminating a
translation or execution (with the issuance of a diagnostic message).</p>
<p>3 EXAMPLE An example of undefined behavior is the behavior on integer
overflow.</p>
<p><strong>3.4.4</strong> 1 <strong>unspecified behavior</strong> use of an unspecified value, or other
behavior where this International Standard provides two or more
possibilities and imposes no further requirements on which is chosen in any
instance</p>
<p>2 EXAMPLE An example of unspecified behavior is the order in which the
arguments to a function are evaluated.</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-do-you-need-to-put-bin-bash-at-the-beginning-of-a-script-file/" class="u-url">Why do you need to put #!/bin/bash at the beginning of a script file?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-do-you-need-to-put-bin-bash-at-the-beginning-of-a-script-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:50:33+08:00" itemprop="datePublished" title="2023-02-17 21:50">2023-02-17 21:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have made Bash scripts before and they all ran fine without <code>#!/bin/bash</code> at
the beginning.</p>
<p>What's the point of putting it in? Would things be any different?</p>
<p>Also, how do you pronounce <code>#</code>? I know that <code>!</code> is pronounced as "bang."</p>
<p>How is <code>#!</code> pronounced?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It's a convention so the *nix shell knows what kind of interpreter to run.</p>
<p>For example, older flavors of ATT defaulted to <em>sh</em> (the Bourne shell), while
older versions of BSD defaulted to <em>csh</em> (the C shell).</p>
<p>Even today (where most systems run bash, the <em>"Bourne Again Shell"</em> ), scripts
can be in bash, python, perl, ruby, PHP, etc, etc. For example, you might see
<code>#!/bin/perl</code> or <code>#!/bin/perl5</code>.</p>
<p>PS: The exclamation mark (<code>!</code>) is affectionately called <em>"bang"</em>. The shell
comment symbol (<code>#</code>) is sometimes called <em>"hash"</em>.</p>
<p>PPS: Remember - under *nix, associating a suffix with a file type is merely a
<em>convention</em> , not a <em>"rule"</em>. An <em>executable</em> can be a binary program, any
one of a million script types and other things as well. Hence the need for
<code>#!/bin/bash</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To be more precise the shebang <code>#!</code>, when it is the first two bytes of an
<em>executable</em> (<code>x</code> mode) file, is interpreted by the execve(2) system call
(which execute programs). But POSIX specification for <code>execve</code> don't mention
the shebang.</p>
<p>It must be followed by a file path of an interpreter executable (which BTW
could even be relative, but most often is absolute).</p>
<p>A nice trick (or perhaps not so nice one) to find an interpreter (e.g.
<code>python</code>) in the user's <code>$PATH</code> is to use the <code>env</code> program (always at
<code>/usr/bin/env</code> on all Linux) like e.g.</p>
<div class="code"><pre class="code literal-block"> #!/usr/bin/env python
</pre></div>

<p>Any ELF executable can be an interpreter. You could even use <code>#!/bin/cat</code> or
<code>#!/bin/true</code> if you wanted to! (but that would be often useless)</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-993.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-991.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
