<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 345) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-345.html">
<link rel="prev" href="index-346.html" type="text/html">
<link rel="next" href="index-344.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/parsing-json-with-unix-tools/" class="u-url">Parsing JSON with Unix tools</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/parsing-json-with-unix-tools/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:30:10+08:00" itemprop="datePublished" title="2023-02-17 04:30">2023-02-17 04:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to parse JSON returned from a curl request, like so:</p>
<div class="code"><pre class="code literal-block"><span class="n">curl</span><span class="w"> </span><span class="s1">'http://twitter.com/users/username.json'</span><span class="w"> </span><span class="o">|</span>
<span class="w">    </span><span class="n">sed</span><span class="w"> </span><span class="o">-</span><span class="n">e</span><span class="w"> </span><span class="s1">'s/[{}]/''/g'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>
<span class="w">    </span><span class="n">awk</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">k</span><span class="o">=</span><span class="ss">"text"</span><span class="w"> </span><span class="s1">'{n=split($0,a,","); for (i=1; i&lt;=n; i++) print a[i]}'</span>
</pre></div>

<p>The above splits the JSON into fields, for example:</p>
<div class="code"><pre class="code literal-block"><span class="c">% ...</span>
<span class="s">"geo_enabled"</span><span class="p">:</span><span class="nb">false</span>
<span class="s">"friends_count"</span><span class="p">:</span><span class="mi">245</span>
<span class="s">"profile_text_color"</span><span class="p">:</span><span class="s">"000000"</span>
<span class="s">"status"</span><span class="p">:</span><span class="s">"in_reply_to_screen_name"</span><span class="p">:</span><span class="nb">null</span>
<span class="s">"source"</span><span class="p">:</span><span class="s">"web"</span>
<span class="s">"truncated"</span><span class="p">:</span><span class="nb">false</span>
<span class="s">"text"</span><span class="p">:</span><span class="s">"My status"</span>
<span class="s">"favorited"</span><span class="p">:</span><span class="nb">false</span>
<span class="c">% ...</span>
</pre></div>

<p>How do I print a specific field (denoted by the <code>-v k=text</code>)?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are a number of tools specifically designed for the purpose of
manipulating JSON from the command line, and will be a lot easier and more
reliable than doing it with Awk, such as <code>jq</code>:</p>
<div class="code"><pre class="code literal-block">curl -s 'https://api.github.com/users/lambda' | jq -r '.name'
</pre></div>

<p>You can also do this with tools that are likely already installed on your
system, like Python using the <code>json</code> module, and so avoid any extra
dependencies, while still having the benefit of a proper JSON parser. The
following assume you want to use UTF-8, which the original JSON should be
encoded in and is what most modern terminals use as well:</p>
<p>Python 3:</p>
<div class="code"><pre class="code literal-block"><span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="s1">'https://api.github.com/users/lambda'</span> <span class="o">|</span> \
    <span class="n">python3</span> <span class="o">-</span><span class="n">c</span> <span class="s2">"import sys, json; print(json.load(sys.stdin)['name'])"</span>
</pre></div>

<p>Python 2:</p>
<div class="code"><pre class="code literal-block"><span class="n">export</span> <span class="n">PYTHONIOENCODING</span><span class="o">=</span><span class="n">utf8</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">s</span> <span class="s1">'https://api.github.com/users/lambda'</span> <span class="o">|</span> \
    <span class="n">python2</span> <span class="o">-</span><span class="n">c</span> <span class="s2">"import sys, json; print json.load(sys.stdin)['name']"</span>
</pre></div>

<h3>Frequently Asked Questions</h3>
<h4>Why not a pure shell solution?</h4>
<p>The standard POSIX/Single Unix Specification shell is a very limited language
which doesn't contain facilities for representing sequences (list or arrays)
or associative arrays (also known as hash tables, maps, dicts, or objects in
some other languages). This makes representing the result of parsing JSON
somewhat tricky in portable shell scripts. There are somewhat hacky ways to do
it, but many of them can break if keys or values contain certain special
characters.</p>
<p>Bash 4 and later, zsh, and ksh have support for arrays and associative arrays,
but these shells are not universally available (macOS stopped updating Bash at
Bash 3, due to a change from GPLv2 to GPLv3, while many Linux systems don't
have zsh installed out of the box). It's possible that you could write a
script that would work in either Bash 4 or zsh, one of which is available on
most macOS, Linux, and BSD systems these days, but it would be tough to write
a shebang line that worked for such a polyglot script.</p>
<p>Finally, writing a full fledged JSON parser in shell would be a significant
enough dependency that you might as well just use an existing dependency like
jq or Python instead. It's not going to be a one-liner, or even small five-
line snippet, to do a good implementation.</p>
<h4>Why not use awk, sed, or grep?</h4>
<p>It is possible to use these tools to do some quick extraction from JSON with a
known shape and formatted in a known way, such as one key per line. There are
several examples of suggestions for this in other answers.</p>
<p>However, these tools are designed for line based or record based formats; they
are not designed for recursive parsing of matched delimiters with possible
escape characters.</p>
<p>So these quick and dirty solutions using awk/sed/grep are likely to be
fragile, and break if some aspect of the input format changes, such as
collapsing whitespace, or adding additional levels of nesting to the JSON
objects, or an escaped quote within a string. A solution that is robust enough
to handle all JSON input without breaking will also be fairly large and
complex, and so not too much different than adding another dependency on <code>jq</code>
or Python.</p>
<p>I have had to deal with large amounts of customer data being deleted due to
poor input parsing in a shell script before, so I never recommend quick and
dirty methods that may be fragile in this way. If you're doing some one-off
processing, see the other answers for suggestions, but I still highly
recommend just using an existing tested JSON parser.</p>
<h3>Historical notes</h3>
<p>This answer originally recommended jsawk, which should still work, but is a
little more cumbersome to use than <code>jq</code>, and depends on a standalone
JavaScript interpreter being installed which is less common than a Python
interpreter, so the above answers are probably preferable:</p>
<div class="code"><pre class="code literal-block"><span class="nv">curl</span><span class="w"> </span><span class="o">-</span><span class="nv">s</span><span class="w"> </span><span class="s1">'https://api.github.com/users/lambda'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">jsawk</span><span class="w"> </span><span class="o">-</span><span class="nv">a</span><span class="w"> </span><span class="s1">'return this.name'</span>
</pre></div>

<p>This answer also originally used the Twitter API from the question, but that
API no longer works, making it hard to copy the examples to test out, and the
new Twitter API requires API keys, so I've switched to using the GitHub API
which can be used easily without API keys. The first answer for the original
question would be:</p>
<div class="code"><pre class="code literal-block">curl 'http://twitter.com/users/username.json' | jq -r '.text'
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>To quickly extract the values for a particular key, I personally like to use
"grep -o", which only returns the regex's match. For example, to get the
"text" field from tweets, something like:</p>
<div class="code"><pre class="code literal-block">grep -Po '"text":.*?[^\\]",' tweets.json
</pre></div>

<p>This regex is more robust than you might think; for example, it deals fine
with strings having embedded commas and escaped quotes inside them. I think
with a little more work you could make one that is actually guaranteed to
extract the value, if it's atomic. (If it has nesting, then a regex can't do
it of course.)</p>
<p>And to further clean (albeit keeping the string's original escaping) you can
use something like: <code>| perl -pe 's/"text"://; s/^"//; s/",$//'</code>. (I did this
for this analysis.)</p>
<p>To all the haters who insist you should use a real JSON parser -- yes, that is
essential for correctness, but</p>
<ol>
<li>To do a really quick analysis, like counting values to check on data cleaning bugs or get a general feel for the data, banging out something on the command line is faster. Opening an editor to write a script is distracting.</li>
<li>
<code>grep -o</code> is orders of magnitude faster than the Python standard <code>json</code> library, at least when doing this for tweets (which are ~2 KB each). I'm not sure if this is just because <code>json</code> is slow (I should compare to yajl sometime); but in principle, a regex should be faster since it's finite state and much more optimizable, instead of a parser that has to support recursion, and in this case, spends lots of CPU building trees for structures you don't care about. (If someone wrote a finite state transducer that did proper (depth-limited) JSON parsing, that would be fantastic! In the meantime we have "grep -o".)</li>
</ol>
<p>To write maintainable code, I always use a real parsing library. I haven't
tried jsawk, but if it works well, that would address point #1.</p>
<p>One last, wackier, solution: I wrote a script that uses Python <code>json</code> and
extracts the keys you want, into tab-separated columns; then I pipe through a
wrapper around <code>awk</code> that allows named access to columns. In here: the
json2tsv and tsvawk scripts. So for this example it would be:</p>
<div class="code"><pre class="code literal-block">json2tsv id text &lt; tweets.json | tsvawk '{print "tweet " $id " is: " $text}'
</pre></div>

<p>This approach doesn't address #2, is more inefficient than a single Python
script, and it's a little brittle: it forces normalization of newlines and
tabs in string values, to play nice with awk's field/record-delimited view of
the world. But it does let you stay on the command line, with more correctness
than <code>grep -o</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-iterate-through-two-lists-in-parallel/" class="u-url">How do I iterate through two lists in parallel?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-iterate-through-two-lists-in-parallel/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:29:44+08:00" itemprop="datePublished" title="2023-02-17 04:29">2023-02-17 04:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have two iterables, and I want to go over them in pairs:</p>
<div class="code"><pre class="code literal-block"><span class="nv">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="mi">1</span>,<span class="w"> </span><span class="mi">2</span>,<span class="w"> </span><span class="mi">3</span>]
<span class="nv">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[<span class="mi">4</span>,<span class="w"> </span><span class="mi">5</span>,<span class="w"> </span><span class="mi">6</span>]

<span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">f</span>,<span class="w"> </span><span class="nv">b</span><span class="ss">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">iterate_together</span><span class="ss">(</span><span class="nv">foo</span>,<span class="w"> </span><span class="nv">bar</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"f:"</span>,<span class="w"> </span><span class="nv">f</span>,<span class="w"> </span><span class="s2">" |  b:"</span>,<span class="w"> </span><span class="nv">b</span><span class="ss">)</span>
</pre></div>

<p>That should result in:</p>
<div class="code"><pre class="code literal-block"><span class="n">f</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="mi">4</span>
<span class="n">f</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="mi">5</span>
<span class="n">f</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span>
</pre></div>

<p><em>One</em> way to do it is to iterate over the indices:</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">foo</span><span class="p">))</span><span class="err">:</span>
<span class="w">    </span><span class="k">print</span><span class="p">(</span><span class="ss">"f:"</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="ss">" |  b:"</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>
</pre></div>

<p>But that seems somewhat unpythonic to me. Is there a better way to do it?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Python 3</h3>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="nv">f</span>,<span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span><span class="nv">foo</span>,<span class="w"> </span><span class="nv">bar</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="nv">f</span>,<span class="w"> </span><span class="nv">b</span><span class="ss">)</span>
</pre></div>

<p><code>zip</code> stops when the shorter of <code>foo</code> or <code>bar</code> stops.</p>
<p>In <strong>Python 3</strong> , <code>zip</code> returns an iterator of tuples, like <code>itertools.izip</code>
in Python2. To get a list of tuples, use <code>list(zip(foo, bar))</code>. And to zip
until both iterators are exhausted, you would use itertools.zip_longest.</p>
<h3>Python 2</h3>
<p>In <strong>Python 2</strong> , <code>zip</code> returns a list of tuples. This is fine when <code>foo</code> and
<code>bar</code> are not massive. If they are both massive then forming <code>zip(foo,bar)</code> is
an unnecessarily massive temporary variable, and should be replaced by
<code>itertools.izip</code> or <code>itertools.izip_longest</code>, which returns an iterator
instead of a list.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">itertools</span>
<span class="k">for</span> <span class="n">f</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">izip</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span><span class="n">bar</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">izip_longest</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span><span class="n">bar</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>

<p><code>izip</code> stops when either <code>foo</code> or <code>bar</code> is exhausted. <code>izip_longest</code> stops
when both <code>foo</code> and <code>bar</code> are exhausted. When the shorter iterator(s) are
exhausted, <code>izip_longest</code> yields a tuple with <code>None</code> in the position
corresponding to that iterator. You can also set a different <code>fillvalue</code>
besides <code>None</code> if you wish. See here for the full story.</p>
<hr>
<p>Note also that <code>zip</code> and its <code>zip</code>-like brethen can accept an arbitrary number
of iterables as arguments. For example,</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="nv">num</span>,<span class="w"> </span><span class="nv">cheese</span>,<span class="w"> </span><span class="nv">color</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">zip</span><span class="ss">(</span>[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>],<span class="w"> </span>[<span class="s1">'manchego'</span>,<span class="w"> </span><span class="s1">'stilton'</span>,<span class="w"> </span><span class="s1">'brie'</span>],<span class="w"> </span>
<span class="w">                              </span>[<span class="s1">'red'</span>,<span class="w"> </span><span class="s1">'blue'</span>,<span class="w"> </span><span class="s1">'green'</span>]<span class="ss">)</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s1">'{} {} {}'</span>.<span class="nv">format</span><span class="ss">(</span><span class="nv">num</span>,<span class="w"> </span><span class="nv">color</span>,<span class="w"> </span><span class="nv">cheese</span><span class="ss">))</span>
</pre></div>

<p>prints</p>
<div class="code"><pre class="code literal-block"><span class="mf">1</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="n">manchego</span>
<span class="mf">2</span><span class="w"> </span><span class="n">blue</span><span class="w"> </span><span class="n">stilton</span>
<span class="mf">3</span><span class="w"> </span><span class="n">green</span><span class="w"> </span><span class="n">brie</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You want the <code>zip</code> function.</p>
<div class="code"><pre class="code literal-block"><span class="nt">for</span><span class="w"> </span><span class="o">(</span><span class="nt">f</span><span class="o">,</span><span class="nt">b</span><span class="o">)</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">zip</span><span class="o">(</span><span class="nt">foo</span><span class="o">,</span><span class="w"> </span><span class="nt">bar</span><span class="o">):</span>
<span class="w">    </span><span class="nt">print</span><span class="w"> </span><span class="s2">"f: "</span><span class="o">,</span><span class="w"> </span><span class="nt">f</span><span class="w"> </span><span class="o">,</span><span class="s2">"; b: "</span><span class="o">,</span><span class="w"> </span><span class="nt">b</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-pass-environment-variables-to-docker-containers/" class="u-url">How do I pass environment variables to Docker containers?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-pass-environment-variables-to-docker-containers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:29:17+08:00" itemprop="datePublished" title="2023-02-17 04:29">2023-02-17 04:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can one access an external database from a container? Is the best way to
hard code in the connection string?</p>
<div class="code"><pre class="code literal-block"># Dockerfile
ENV DATABASE_URL amazon:rds/connection?string
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can pass environment variables to your containers with the <code>-e</code> flag.</p>
<p>An example from a startup script:</p>
<div class="code"><pre class="code literal-block">sudo docker run -d -t -i -e REDIS_NAMESPACE='staging' \ 
-e POSTGRES_ENV_POSTGRES_PASSWORD='foo' \
-e POSTGRES_ENV_POSTGRES_USER='bar' \
-e POSTGRES_ENV_DB_NAME='mysite_staging' \
-e POSTGRES_PORT_5432_TCP_ADDR='docker-db-1.hidden.us-east-1.rds.amazonaws.com' \
-e SITE_URL='staging.mysite.com' \
-p 80:80 \
--link redis:redis \  
--name container_name dockerhub_id/image_name
</pre></div>

<p>Or, if you don't want to have the value on the command-line where it will be
displayed by <code>ps</code>, etc., <code>-e</code> can pull in the value from the current
environment if you just give it without the <code>=</code>:</p>
<div class="code"><pre class="code literal-block">sudo PASSWORD='foo' docker run  [...] -e PASSWORD [...]
</pre></div>

<p>If you have many environment variables and especially if they're meant to be
secret, you can use an env-file:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--env-file<span class="w"> </span>./env.list<span class="w"> </span>ubuntu<span class="w"> </span>bash
</pre></div>

<blockquote>
<p>The --env-file flag takes a filename as an argument and expects each line to
be in the VAR=VAL format, mimicking the argument passed to --env. Comment
lines need only be prefixed with #</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>You can pass using <code>-e</code> parameters with the <code>docker run ..</code> command as
mentioned here and as mentioned by errata.</p>
<p>However, the possible downside of this approach is that your credentials will
be displayed in the process listing, where you run it.</p>
<p>To make it more secure, you may write your credentials in a configuration file
and do <code>docker run</code> with <code>--env-file</code> as mentioned here. Then you can control
the access of that configuration file so that others having access to that
machine wouldn't see your credentials.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-346.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-344.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
