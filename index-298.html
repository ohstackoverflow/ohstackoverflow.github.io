<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 298) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-298.html">
<link rel="prev" href="index-299.html" type="text/html">
<link rel="next" href="index-297.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/correct-way-to-write-line-to-file/" class="u-url">Correct way to write line to file?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/correct-way-to-write-line-to-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:20:05+08:00" itemprop="datePublished" title="2023-02-17 03:20">2023-02-17 03:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I write a line to a file in modern Python? I heard that this is
deprecated:</p>
<div class="code"><pre class="code literal-block">print &gt;&gt;f, "hi there"
</pre></div>

<p>Also, does <code>"\n"</code> work on all platforms, or should I use <code>"\r\n"</code> on Windows?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This should be as simple as:</p>
<div class="code"><pre class="code literal-block">with open('somefile.txt', 'a') as the_file:
    the_file.write('Hello\n')
</pre></div>

<p>From The Documentation:</p>
<blockquote>
<p>Do not use <code>os.linesep</code> as a line terminator when writing files opened in
text mode (the default); use a single <code>'\n'</code> instead, on all platforms.</p>
</blockquote>
<p>Some useful reading:</p>
<ul>
<li>The <code>with</code> statement</li>
<li>
<code>open()</code><ul>
<li>
<code>'a'</code> is for append, or use</li>
<li>
<code>'w'</code> to write with truncation</li>
</ul>
</li>
<li>
<code>os</code> (particularly <code>os.linesep</code>)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>You should use the <code>print()</code> function which is available since Python 2.6+</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>  <span class="c1"># Only needed for Python 2</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"hi there"</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
</pre></div>

<p>For Python 3 you don't need the <code>import</code>, since the <code>print()</code> function is the
default.</p>
<p>The alternative in Python 3 would be to use:</p>
<div class="code"><pre class="code literal-block">with open('myfile', 'w') as f:
    f.write('hi there\n')  # python will convert \n to os.linesep
</pre></div>

<p>Quoting from Python documentation regarding newlines:</p>
<blockquote>
<p>When writing output to the stream, if <em>newline</em> is <code>None</code>, any <code>'\n'</code>
characters written are translated to the system default line separator,
<code>os.linesep</code>. If <em>newline</em> is <code>''</code> or <code>'\n'</code>, no translation takes place. If
<em>newline</em> is any of the other legal values, any <code>'\n'</code> characters written
are translated to the given string.</p>
</blockquote>
<p>See also: Reading and Writing Files - The Python Tutorial</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-create-a-constant-in-python/" class="u-url">How do I create a constant in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-create-a-constant-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:19:30+08:00" itemprop="datePublished" title="2023-02-17 03:19">2023-02-17 03:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I declare a constant in Python?</p>
<p>In Java, we do:</p>
<div class="code"><pre class="code literal-block">public static final String CONST_NAME = "Name";
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You cannot declare a variable or value as constant in Python.</p>
<hr>
<p>To <em>indicate</em> to programmers that a variable is a constant, one usually writes
it in upper case:</p>
<div class="code"><pre class="code literal-block">CONST_NAME = "Name"
</pre></div>

<hr>
<p>To raise exceptions when constants are changed, see Constants in Python by
Alex Martelli. Note that this is not commonly used in practice.</p>
<hr>
<p>As of Python 3.8, there's a <code>typing.Final</code> variable annotation that will tell
static type checkers (like mypy) that your variable shouldn't be reassigned.
This is the closest equivalent to Java's <code>final</code>. However, it <strong>does not
actually prevent reassignment</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Final</span>

<span class="n">a</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Executes fine, but mypy will report an error if you run mypy on this:</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>There's no <code>const</code> keyword as in other languages, however it is possible to
create a Property that <strong>has a "getter function"</strong> to read the data, but <strong>no
"setter function"</strong> to re-write the data. <strong>This essentially protects the
identifier from being changed.</strong></p>
<p>Here is an alternative implementation using class property:</p>
<p><em>Note that the code is far from easy for a reader wondering about constants.
See explanation below.</em></p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="n">constant</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="n">raise</span><span class="w"> </span><span class="n">TypeError</span>
<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">fget</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="p">()</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">property</span><span class="p">(</span><span class="n">fget</span><span class="p">,</span><span class="w"> </span><span class="n">fset</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="n">_Const</span><span class="p">(</span><span class="n">object</span><span class="p">):</span>
<span class="w">    </span><span class="err">@</span><span class="n">constant</span>
<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">FOO</span><span class="p">():</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mh">0xBAADFACE</span>
<span class="w">    </span><span class="err">@</span><span class="n">constant</span>
<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">BAR</span><span class="p">():</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mh">0xDEADBEEF</span>

<span class="n">CONST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_Const</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">hex</span><span class="p">(</span><span class="n">CONST</span><span class="o">.</span><span class="n">FOO</span><span class="p">))</span><span class="w">  </span><span class="c1"># -&gt; '0xbaadfaceL'</span>

<span class="n">CONST</span><span class="o">.</span><span class="n">FOO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="c1">##Traceback (most recent call last):</span>
<span class="c1">##  File "example1.py", line 22, in &lt;module&gt;</span>
<span class="c1">##    CONST.FOO = 0</span>
<span class="c1">##  File "example1.py", line 5, in fset</span>
<span class="c1">##    raise TypeError</span>
<span class="c1">##TypeError</span>
</pre></div>

<p><strong>Code Explanation:</strong></p>
<ol>
<li>Define a function <code>constant</code> that takes an expression, and uses it to construct a "getter" - a function that solely returns the value of the expression.</li>
<li>The setter function raises a TypeError so it's read-only</li>
<li>Use the <code>constant</code> function we just created as a decoration to quickly define read-only properties.</li>
</ol>
<hr>
<p>And in some other more old-fashioned way:</p>
<p><em>(The code is quite tricky, more explanations below)</em></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">_Const</span>(<span class="n">object</span>):
    <span class="n">def</span> <span class="n">FOO</span>():
        <span class="n">def</span> <span class="n">fset</span>(<span class="nb">self</span>, <span class="nb">value</span>):
            <span class="n">raise</span> <span class="n">TypeError</span>
        <span class="n">def</span> <span class="n">fget</span>(<span class="nb">self</span>):
            <span class="k">return</span> <span class="mh">0xBAADFACE</span>
        <span class="k">return</span> <span class="n">property</span>(**<span class="n">locals</span>())
    <span class="n">FOO</span> = <span class="n">FOO</span>()  <span class="c1"># Define property.</span>

<span class="n">CONST</span> = <span class="n">_Const</span>()

<span class="nb">print</span>(<span class="n">hex</span>(<span class="n">CONST</span>.<span class="n">FOO</span>))  <span class="c1"># -&gt; '0xbaadfaceL'</span>

<span class="n">CONST</span>.<span class="n">FOO</span> = <span class="mi">0</span>
<span class="c1">##Traceback (most recent call last):</span>
<span class="c1">##  File "example2.py", line 16, in &lt;module&gt;</span>
<span class="c1">##    CONST.FOO = 0</span>
<span class="c1">##  File "example2.py", line 6, in fset</span>
<span class="c1">##    raise TypeError</span>
<span class="c1">##TypeError</span>
</pre></div>

<ol>
<li>To define the identifier FOO, firs define two functions (fset, fget - the names are at my choice).</li>
<li>Then use the built-in <code>property</code> function to construct an object that can be "set" or "get".</li>
<li>Note hat the <code>property</code> function's first two parameters are named <code>fset</code> and <code>fget</code>.</li>
<li>Use the fact that we chose these very names for our own getter &amp; setter and create a keyword-dictionary using the ** (double asterisk) applied to all the local definitions of that scope to pass parameters to the <code>property</code> function</li>
</ol>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/github-relative-link-in-markdown-file/" class="u-url">GitHub relative link in Markdown file</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/github-relative-link-in-markdown-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:19:03+08:00" itemprop="datePublished" title="2023-02-17 03:19">2023-02-17 03:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a way to create a URL anchor, <code>&lt;a&gt;</code>, link from within a Markdown
file, to another file within the same repository and branch (aka a link
relative to the current branch)?</p>
<p>For example, in the master branch I have a README.md file, which I would like
do something like:</p>
<div class="code"><pre class="code literal-block"><span class="err">#</span><span class="w"> </span><span class="n">My</span><span class="w"> </span><span class="n">Project</span>
<span class="k">is</span><span class="w"> </span><span class="n">really</span><span class="w"> </span><span class="n">really</span><span class="w"> </span><span class="n">cool</span><span class="p">.</span><span class="w"> </span><span class="n">My</span><span class="w"> </span><span class="n">Project</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subdir</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">myLib</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">below</span><span class="p">.</span>

<span class="err">##</span><span class="w"> </span><span class="n">myLib</span><span class="w"> </span><span class="n">documentation</span>
<span class="n">see</span><span class="w"> </span><span class="n">documentation</span><span class="w"> </span><span class="o">[</span><span class="n">here</span><span class="o">]</span><span class="p">(</span><span class="n">myLib</span><span class="o">/</span><span class="n">README</span><span class="p">.</span><span class="n">md</span><span class="p">)</span>
</pre></div>

<p>This would allow me to link from one .md to another within the same branch and
not have to worry about which branch I'm in (avoid having to do an absolute
URL that includes the github.com branch name).</p>
<p>Here is a working example of what I mean:</p>
<ol>
<li>GOTO http://github.com/rynop/testRel, link does not work.</li>
<li>GOTO http://github.com/rynop/testRel/blob/master/README.md, link works.</li>
</ol>
<p>This is expected because at this point the starting URL is in the branch. Now
how do I get it to pick up the current branch in the README.md at the root of
the repository?</p>
<p><strong>Update</strong> : I opened an issue against GitHub for this feature request.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Update <strong>30th, January 2013</strong> , 16 months later:</p>
<h3>GitHub Blog Post <strong>Relative links in markup files</strong> :</h3>
<blockquote>
<p>Starting today, <strong>GitHub supports relative links in markup files</strong>.<br>
 Now you can link directly between different documentation files, whether
you view the documentation on GitHub itself, or locally, using a different
markup renderer.</p>
<p>You want examples of link definitions and how they work? Here's some
Markdown for you.<br>
 Instead of an absolute link:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">link</span><span class="p">](</span><span class="n">https</span><span class="o">:</span><span class="c1">//github.com/user/repo/blob/branch/other_file.md)</span>
</pre></div>

<p>…you can use a relative link:</p>
<div class="code"><pre class="code literal-block">[a relative link](other_file.md)
[a relative link](path%20with%20spaces/other_file.md)
</pre></div>

<p>and we'll make sure it gets linked to <code>user/repo/blob/branch/other_file.md</code>.</p>
<p>If you were using a workaround like <code>[a workaround
link](repo/blob/master/other_file.md)</code>, you'll have to update your
documentation to use the new syntax.</p>
<p>This also means <strong>your documentation can now easily stand on its own,
without always pointing to GitHub</strong>.</p>
</blockquote>
<p>Marcono1234 adds in the comments</p>
<blockquote>
<p>Also useful: When the link starts with a <code>/</code>, it is relative to the root of
the repository (regardless of whether the markdown file is nested in
subdirectories)</p>
</blockquote>
<hr>
<p>Update December 20th, 2011:</p>
<p>The GitHub markup issue 84 is currently closed by technoweenie, with the
comment:</p>
<blockquote>
<p>We tried adding a <code>&lt;base&gt;</code> tag for this, but it causes problems with other
relative links on the site.</p>
</blockquote>
<hr>
<p>October 12th, 2011:</p>
<p>If you look at the <strong>raw source of the<code>README.md</code></strong> of Markdown itself(!),
relative paths don't seem to be supported.<br>
You will find references like:</p>
<div class="code"><pre class="code literal-block"><span class="o">[</span><span class="n">r2h</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">markup</span><span class="o">/</span><span class="n">tree</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">commands</span><span class="o">/</span><span class="n">rest2html</span>
<span class="o">[</span><span class="n">r2hc</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">markup</span><span class="o">/</span><span class="n">tree</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">markups</span><span class="p">.</span><span class="n">rb#L13</span>
</pre></div>

<hr>
<p>As noted in InvisibleWolf's answer, if the target link is a directory and it
has space, then you need to use <code>%20</code> for each space.</p>
<p><br></p>
<h3>Suggest</h3>
<p>For example, you have a repo like the following:</p>
<div class="code"><pre class="code literal-block">project/
    text.md
    subpro/
       subtext.md
       subsubpro/
           subsubtext.md
       subsubpro2/
           subsubtext2.md
</pre></div>

<p>The relative link to <code>subtext.md</code> in <code>text.md</code> might look like this:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">this</span><span class="w"> </span><span class="n">subtext</span><span class="p">](</span><span class="n">subpro</span><span class="o">/</span><span class="n">subtext</span><span class="p">.</span><span class="n">md</span><span class="p">)</span>
</pre></div>

<p>The relative link to <code>subsubtext.md</code> in <code>text.md</code> might look like this:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">this</span><span class="w"> </span><span class="n">subsubtext</span><span class="p">](</span><span class="n">subpro</span><span class="o">/</span><span class="n">subsubpro</span><span class="o">/</span><span class="n">subsubtext</span><span class="p">.</span><span class="n">md</span><span class="p">)</span>
</pre></div>

<p>The relative link to <code>subtext.md</code> in <code>subsubtext.md</code> might look like this:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">this</span><span class="w"> </span><span class="n">subtext</span><span class="p">](..</span><span class="o">/</span><span class="n">subtext</span><span class="p">.</span><span class="n">md</span><span class="p">)</span>
</pre></div>

<p>The relative link to <code>subsubtext2.md</code> in <code>subsubtext.md</code> might look like this:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">this</span><span class="w"> </span><span class="n">subsubtext2</span><span class="p">](..</span><span class="o">/</span><span class="n">subsubpro2</span><span class="o">/</span><span class="n">subsubtext2</span><span class="p">.</span><span class="n">md</span><span class="p">)</span>
</pre></div>

<p>The relative link to <code>text.md</code> in <code>subsubtext.md</code> might look like this:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">this</span><span class="w"> </span><span class="n">text</span><span class="p">](..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">text</span><span class="p">.</span><span class="n">md</span><span class="p">)</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-299.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-297.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
