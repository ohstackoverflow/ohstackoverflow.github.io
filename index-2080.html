<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2080) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2080.html">
<link rel="prev" href="index-2081.html" type="text/html">
<link rel="next" href="index-2079.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-run-a-program-with-a-different-working-directory-from-current-from-linux-shell/" class="u-url">How do I run a program with a different working directory from current, from Linux shell?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-run-a-program-with-a-different-working-directory-from-current-from-linux-shell/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:27:49+08:00" itemprop="datePublished" title="2023-03-03 16:27">2023-03-03 16:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Using a <strong>Linux shell</strong> , how do I start a program with a different working
directory from the current working directory?</p>
<p>For example, I have a binary file <code>helloworld</code> that creates the file <code>hello-
world.txt</code> in the <strong>current directory</strong>.  </p>
<p>This file is inside of directory <code>/a</code>.</p>
<p>Currently, I am in the directory <code>/b</code>. I want to start my program running
<code>../a/helloworld</code> and get the <code>hello-world.txt</code> somewhere in a third directory
<code>/c</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Call the program like this:</p>
<div class="code"><pre class="code literal-block">(cd /c; /a/helloworld)
</pre></div>

<p>The parentheses cause a sub-shell to be spawned. This sub-shell then changes
its working directory to <code>/c</code>, then executes <code>helloworld</code> from <code>/a</code>. After the
program exits, the sub-shell terminates, returning you to your prompt of the
parent shell, in the directory you started from.</p>
<p><strong>Error handling:</strong> To avoid running the program without having changed the
directory, e.g. when having misspelled <code>/c</code>, make the execution of
<code>helloworld</code> conditional:</p>
<div class="code"><pre class="code literal-block">(cd /c &amp;&amp; /a/helloworld)
</pre></div>

<p><strong>Reducing memory usage:</strong> To avoid having the subshell waste memory while
hello world executes, call <code>helloworld</code> via exec:</p>
<div class="code"><pre class="code literal-block"><span class="ss">(</span><span class="nv">cd</span><span class="w"> </span><span class="o">/</span><span class="nv">c</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="o">/</span><span class="nv">a</span><span class="o">/</span><span class="nv">helloworld</span><span class="ss">)</span>
</pre></div>

<p>[Thanks to Josh and Juliano for giving tips on improving this answer!]</p>
<p><br></p>
<h3>Suggest</h3>
<p>Similar to David Schmitt's answer, plus Josh's suggestion, but doesn't leave a
shell process running:</p>
<div class="code"><pre class="code literal-block"><span class="ss">(</span><span class="nv">cd</span><span class="w"> </span><span class="o">/</span><span class="nv">c</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="o">/</span><span class="nv">a</span><span class="o">/</span><span class="nv">helloworld</span><span class="ss">)</span>
</pre></div>

<p>This way is more similar to how you usually run commands on the shell. To see
the practical difference, you have to run <code>ps ef</code> from another shell with each
solution.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-a-user-s-client-ip-address-in-asp-net/" class="u-url">How to get a user's client IP address in ASP.NET?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-a-user-s-client-ip-address-in-asp-net/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:27:24+08:00" itemprop="datePublished" title="2023-03-03 16:27">2023-03-03 16:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>We have <code>Request.UserHostAddress</code> to get the IP address in ASP.NET, but this
is usually the user's ISP's IP address, not exactly the user's machine IP
address who for example clicked a link. How can I get the real IP Address?</p>
<p>For example, in a Stack Overflow user profile it is: <strong>"Last account activity:
4 hours ago from 86.123.127.8"</strong> , but my machine IP address is a bit
different. How does Stack Overflow get this address?</p>
<p>In some web systems there is an IP address check for some purposes. For
example, with a certain IP address, for every 24 hours can the user just have
only 5 clicks on download links? This IP address should be unique, not for an
ISP that has a huge range of clients or Internet users.</p>
<p>Did I understand well?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As others have said you can't do what you are asking. If you describe the
problem you are trying to solve maybe someone can help?</p>
<p>E.g.</p>
<ul>
<li>are you trying to uniquely identify your users? </li>
<li>Could you use a cookie, or the session ID perhaps instead of the IP address?</li>
</ul>
<p><strong>Edit</strong> The address you see on the server shouldn't be the ISP's address, as
you say that would be a huge range. The address for a home user on broadband
will be the address at their router, so every device inside the house will
appear on the outside to be the same, but the router uses NAT to ensure that
traffic is routed to each device correctly. For users accessing from an office
environment the address may well be the same for all users. Sites that use IP
address for ID run the risk of getting it very wrong - the examples you give
are good ones and they often fail. For example my office is in the UK, the
breakout point (where I "appear" to be on the internet) is in another country
where our main IT facility is, so from my office my IP address appears to be
not in the UK. For this reason I can't access UK only web content, such as the
BBC iPlayer). At any given time there would be hundreds, or even thousands, of
people at my company who appear to be accessing the web from the same IP
address.</p>
<p>When you are writing server code you can never be sure what the IP address you
see is referring to. Some users like it this way. Some people deliberately use
a proxy or VPN to further confound you.</p>
<p>When you say your machine address is different to the IP address shown on
StackOverflow, how are you finding out your machine address? If you are just
looking locally using <code>ipconfig</code> or something like that I would expect it to
be different for the reasons I outlined above. If you want to double check
what the outside world thinks have a look at whatismyipaddress.com/.</p>
<p>This Wikipedia link on NAT will provide you some background on this.</p>
<p><br></p>
<h3>Suggest</h3>
<p>As others have said you can't do what you are asking. If you describe the
problem you are trying to solve maybe someone can help?</p>
<p>E.g.</p>
<ul>
<li>are you trying to uniquely identify your users? </li>
<li>Could you use a cookie, or the session ID perhaps instead of the IP address?</li>
</ul>
<p><strong>Edit</strong> The address you see on the server shouldn't be the ISP's address, as
you say that would be a huge range. The address for a home user on broadband
will be the address at their router, so every device inside the house will
appear on the outside to be the same, but the router uses NAT to ensure that
traffic is routed to each device correctly. For users accessing from an office
environment the address may well be the same for all users. Sites that use IP
address for ID run the risk of getting it very wrong - the examples you give
are good ones and they often fail. For example my office is in the UK, the
breakout point (where I "appear" to be on the internet) is in another country
where our main IT facility is, so from my office my IP address appears to be
not in the UK. For this reason I can't access UK only web content, such as the
BBC iPlayer). At any given time there would be hundreds, or even thousands, of
people at my company who appear to be accessing the web from the same IP
address.</p>
<p>When you are writing server code you can never be sure what the IP address you
see is referring to. Some users like it this way. Some people deliberately use
a proxy or VPN to further confound you.</p>
<p>When you say your machine address is different to the IP address shown on
StackOverflow, how are you finding out your machine address? If you are just
looking locally using <code>ipconfig</code> or something like that I would expect it to
be different for the reasons I outlined above. If you want to double check
what the outside world thinks have a look at whatismyipaddress.com/.</p>
<p>This Wikipedia link on NAT will provide you some background on this.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-the-android-device-s-primary-e-mail-address/" class="u-url">How to get the Android device's primary e-mail address</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-the-android-device-s-primary-e-mail-address/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:26:58+08:00" itemprop="datePublished" title="2023-03-03 16:26">2023-03-03 16:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do you get the Android's primary e-mail address (or a list of e-mail
addresses)?</p>
<p>It's my understanding that on OS 2.0+ there's support for multiple e-mail
addresses, but below 2.0 you can only have one e-mail address per device.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are several ways to do this, shown below.</p>
<p><strong>As a friendly warning, be careful and up-front to the user when dealing with
account, profile, and contact data. If you misuse a user's email address or
other personal information, bad things can happen.</strong></p>
<h2>Method A: Use AccountManager (API level 5+)</h2>
<p>You can use <code>AccountManager.getAccounts</code> or <code>AccountManager.getAccountsByType</code>
to get a list of all account names on the device. Fortunately, for certain
account types (including <code>com.google</code>), the account names are email addresses.
Example snippet below.</p>
<div class="code"><pre class="code literal-block"><span class="nv">Pattern</span><span class="w"> </span><span class="nv">emailPattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Patterns</span>.<span class="nv">EMAIL_ADDRESS</span><span class="c1">; // API level 8+</span>
<span class="nv">Account</span>[]<span class="w"> </span><span class="nv">accounts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">AccountManager</span>.<span class="nv">get</span><span class="ss">(</span><span class="nv">context</span><span class="ss">)</span>.<span class="nv">getAccounts</span><span class="ss">()</span><span class="c1">;</span>
<span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">Account</span><span class="w"> </span><span class="nv">account</span><span class="w"> </span>:<span class="w"> </span><span class="nv">accounts</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">emailPattern</span>.<span class="nv">matcher</span><span class="ss">(</span><span class="nv">account</span>.<span class="nv">name</span><span class="ss">)</span>.<span class="nv">matches</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">String</span><span class="w"> </span><span class="nv">possibleEmail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">account</span>.<span class="nv">name</span><span class="c1">;</span>
<span class="w">        </span>...
<span class="w">    </span>}
}
</pre></div>

<p>Note that this requires the <code>GET_ACCOUNTS</code> permission:</p>
<div class="code"><pre class="code literal-block">&lt;uses-permission android:name="android.permission.GET_ACCOUNTS" /&gt;
</pre></div>

<p>More on using <code>AccountManager</code> can be found at the Contact Manager sample code
in the SDK.</p>
<h2>Method B: Use ContactsContract.Profile (API level 14+)</h2>
<p>As of Android 4.0 (Ice Cream Sandwich), you can get the user's email addresses
by accessing their profile. Accessing the user profile is a bit heavyweight as
it requires two permissions (more on that below), but email addresses are
fairly sensitive pieces of data, so this is the price of admission.</p>
<p>Below is a full example that uses a <code>CursorLoader</code> to retrieve profile data
rows containing email addresses.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">ExampleActivity</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Activity</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">LoaderManager</span><span class="o">.</span><span class="n">LoaderCallbacks</span><span class="o">&lt;</span><span class="n">Cursor</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span><span class="w"> </span><span class="n">savedInstanceState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<span class="w">        </span><span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">activity_main</span><span class="p">);</span>
<span class="w">        </span><span class="n">getLoaderManager</span><span class="p">()</span><span class="o">.</span><span class="n">initLoader</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">Loader</span><span class="o">&lt;</span><span class="n">Cursor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">onCreateLoader</span><span class="p">(</span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">Bundle</span><span class="w"> </span><span class="n">arguments</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">CursorLoader</span><span class="p">(</span><span class="n">this</span><span class="p">,</span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">Retrieve</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">rows</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">user</span><span class="s1">'s '</span><span class="n">profile</span><span class="s1">' contact.</span>
<span class="w">                </span><span class="n">Uri</span><span class="o">.</span><span class="n">withAppendedPath</span><span class="p">(</span>
<span class="w">                        </span><span class="n">ContactsContract</span><span class="o">.</span><span class="n">Profile</span><span class="o">.</span><span class="n">CONTENT_URI</span><span class="p">,</span>
<span class="w">                        </span><span class="n">ContactsContract</span><span class="o">.</span><span class="n">Contacts</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">CONTENT_DIRECTORY</span><span class="p">),</span>
<span class="w">                </span><span class="n">ProfileQuery</span><span class="o">.</span><span class="n">PROJECTION</span><span class="p">,</span>

<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">Select</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="n">addresses</span><span class="o">.</span>
<span class="w">                </span><span class="n">ContactsContract</span><span class="o">.</span><span class="n">Contacts</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">MIMETYPE</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" = ?"</span><span class="p">,</span>
<span class="w">                </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="p">[]{</span><span class="n">ContactsContract</span><span class="o">.</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="n">Email</span><span class="o">.</span><span class="n">CONTENT_ITEM_TYPE</span><span class="p">},</span>

<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">Show</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="n">first</span><span class="o">.</span><span class="w"> </span><span class="n">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">won</span><span class="s1">'t be</span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">hasn</span><span class="s1">'t specified one.</span>
<span class="w">                </span><span class="n">ContactsContract</span><span class="o">.</span><span class="n">Contacts</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">IS_PRIMARY</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" DESC"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onLoadFinished</span><span class="p">(</span><span class="n">Loader</span><span class="o">&lt;</span><span class="n">Cursor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cursorLoader</span><span class="p">,</span><span class="w"> </span><span class="n">Cursor</span><span class="w"> </span><span class="n">cursor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">emails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="n">cursor</span><span class="o">.</span><span class="n">moveToFirst</span><span class="p">();</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">cursor</span><span class="o">.</span><span class="n">isAfterLast</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">emails</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="n">ProfileQuery</span><span class="o">.</span><span class="n">ADDRESS</span><span class="p">));</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">Potentially</span><span class="w"> </span><span class="n">filter</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">ProfileQuery</span><span class="o">.</span><span class="n">IS_PRIMARY</span>
<span class="w">            </span><span class="n">cursor</span><span class="o">.</span><span class="n">moveToNext</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="o">...</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onLoaderReset</span><span class="p">(</span><span class="n">Loader</span><span class="o">&lt;</span><span class="n">Cursor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cursorLoader</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">ProfileQuery</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb nb-Type">String</span><span class="p">[]</span><span class="w"> </span><span class="n">PROJECTION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">ContactsContract</span><span class="o">.</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="n">Email</span><span class="o">.</span><span class="n">ADDRESS</span><span class="p">,</span>
<span class="w">                </span><span class="n">ContactsContract</span><span class="o">.</span><span class="n">CommonDataKinds</span><span class="o">.</span><span class="n">Email</span><span class="o">.</span><span class="n">IS_PRIMARY</span><span class="p">,</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">ADDRESS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">IS_PRIMARY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>This requires both the <code>READ_PROFILE</code> and <code>READ_CONTACTS</code> permissions:</p>
<div class="code"><pre class="code literal-block">&lt;uses-permission android:name="android.permission.READ_PROFILE" /&gt;
&lt;uses-permission android:name="android.permission.READ_CONTACTS" /&gt;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This could be useful to others:</p>
<p>Using AccountPicker to get user's email address without any global
permissions, and allowing the user to be aware and authorize or cancel the
process.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2081.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2079.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
