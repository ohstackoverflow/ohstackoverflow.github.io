<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2446) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2446.html">
<link rel="prev" href="index-2447.html" type="text/html">
<link rel="next" href="index-2445.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-commit-only-some-files/" class="u-url">How do I commit only some files?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-commit-only-some-files/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T16:45:59+08:00" itemprop="datePublished" title="2023-03-04 16:45">2023-03-04 16:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have two projects. One is the "official" project and the second is a light
modification (some files added). I created new branch and I put new files to
them. But in during development some files common to both branches is changed.</p>
<p>How do I commit only these files?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I suppose you want to commit the changes to one branch and then make those
changes visible in the other branch. In git you should have no changes on top
of HEAD when changing branches.</p>
<p>You commit only the changed files by:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="p">[</span><span class="n">some</span><span class="w"> </span><span class="n">files</span><span class="p">]</span>
</pre></div>

<p>Or if you are sure that you have a clean staging area you can</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">[</span><span class="n">some</span><span class="w"> </span><span class="n">files</span><span class="p">]</span><span class="w">       </span><span class="err">#</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">[</span><span class="n">some</span><span class="w"> </span><span class="n">files</span><span class="p">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">staging</span><span class="w"> </span><span class="n">area</span>
<span class="n">git</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">[</span><span class="n">some</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">files</span><span class="p">]</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">[</span><span class="n">some</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">files</span><span class="p">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">staging</span><span class="w"> </span><span class="n">area</span>
<span class="n">git</span><span class="w"> </span><span class="n">commit</span><span class="w">                 </span><span class="err">#</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="p">[</span><span class="n">some</span><span class="w"> </span><span class="n">files</span><span class="p">]</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="p">[</span><span class="n">some</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">files</span><span class="p">]</span>
</pre></div>

<p>If you want to make that commit available on both branches you do</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">stash</span><span class="w">                     </span>#<span class="w"> </span><span class="nv">remove</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">changes</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">HEAD</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">save</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">somewhere</span><span class="w"> </span><span class="k">else</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">other</span><span class="o">-</span><span class="nv">project</span><span class="o">&gt;</span><span class="w">  </span>#<span class="w"> </span><span class="nv">change</span><span class="w"> </span><span class="nv">branches</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">cherry</span><span class="o">-</span><span class="nv">pick</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">commit</span><span class="o">-</span><span class="nv">id</span><span class="o">&gt;</span><span class="w">   </span>#<span class="w"> </span><span class="nv">pick</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">ANY</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">apply</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">first</span><span class="o">-</span><span class="nv">project</span><span class="o">&gt;</span><span class="w">  </span>#<span class="w"> </span><span class="nv">change</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">branch</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">stash</span><span class="w"> </span><span class="nv">pop</span><span class="w">                 </span>#<span class="w"> </span><span class="nv">restore</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">changes</span><span class="w"> </span><span class="nv">again</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>Get a list of files you want to commit</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>status

Changes<span class="w"> </span>not<span class="w"> </span>staged<span class="w"> </span><span class="k">for</span><span class="w"> </span>commit:
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">"git add &lt;file&gt;..."</span><span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span>what<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>committed<span class="o">)</span>
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">"git checkout -- &lt;file&gt;..."</span><span class="w"> </span>to<span class="w"> </span>discard<span class="w"> </span>changes<span class="w"> </span><span class="k">in</span><span class="w"> </span>working<span class="w"> </span>directory<span class="o">)</span>

modified:<span class="w">   </span>file1
modified:<span class="w">   </span>file2
modified:<span class="w">   </span>file3
modified:<span class="w">   </span>file4
</pre></div>

<p><strong>Add the files to staging</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>file1<span class="w"> </span>file2
</pre></div>

<p><strong>Check to see what you are committing</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>status

Changes<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>committed:
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">"git reset HEAD &lt;file&gt;..."</span><span class="w"> </span>to<span class="w"> </span>unstage<span class="o">)</span>

<span class="w">    </span>modified:<span class="w">   </span>file1
<span class="w">    </span>modified:<span class="w">   </span>file2

Changes<span class="w"> </span>not<span class="w"> </span>staged<span class="w"> </span><span class="k">for</span><span class="w"> </span>commit:
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">"git add &lt;file&gt;..."</span><span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span>what<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>committed<span class="o">)</span>
<span class="w">  </span><span class="o">(</span>use<span class="w"> </span><span class="s2">"git checkout -- &lt;file&gt;..."</span><span class="w"> </span>to<span class="w"> </span>discard<span class="w"> </span>changes<span class="w"> </span><span class="k">in</span><span class="w"> </span>working<span class="w"> </span>directory<span class="o">)</span>

<span class="w">    </span>modified:<span class="w">   </span>file3
<span class="w">    </span>modified:<span class="w">   </span>file4
</pre></div>

<p><strong>Commit the files with a commit message</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Fixed files 1 and 2"</span>
</pre></div>

<p><strong>If you accidentally commit the wrong files</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>reset<span class="w"> </span>--soft<span class="w"> </span>HEAD~1
</pre></div>

<p><strong>If you want to unstage the files and start over</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>reset

Unstaged<span class="w"> </span>changes<span class="w"> </span>after<span class="w"> </span>reset:
M<span class="w"> </span>file1
M<span class="w"> </span>file2
M<span class="w"> </span>file3
M<span class="w"> </span>file4
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/passing-environment-dependent-variables-in-webpack/" class="u-url">Passing environment-dependent variables in webpack</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/passing-environment-dependent-variables-in-webpack/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T16:45:07+08:00" itemprop="datePublished" title="2023-03-04 16:45">2023-03-04 16:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to convert an angular app from gulp to webpack. in gulp I use gulp-
preprocess to replace some variables in the html page (e.g. database name)
depending on the NODE_ENV. What is the best way of achieving a similar result
with webpack?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are two basic ways to achieve this.</p>
<h3>DefinePlugin</h3>
<div class="code"><pre class="code literal-block">new webpack.DefinePlugin({
    'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV || 'development')
}),
</pre></div>

<p>Note that this will just replace the matches "as is". That's why the string is
in the format it is. You could have a more complex structure, such as an
object there but you get the idea.</p>
<h3>EnvironmentPlugin</h3>
<div class="code"><pre class="code literal-block">new webpack.EnvironmentPlugin(['NODE_ENV'])
</pre></div>

<p><code>EnvironmentPlugin</code> uses <code>DefinePlugin</code> internally and maps the environment
values to code through it. Terser syntax.</p>
<h3>Alias</h3>
<p>Alternatively you could consume configuration through an aliased module. From
consumer side it would look like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'config'</span><span class="p">);</span>
</pre></div>

<p>Configuration itself could look like this:</p>
<div class="code"><pre class="code literal-block">resolve: {
    alias: {
        config: path.join(__dirname, 'config', process.env.NODE_ENV)
    }
}
</pre></div>

<p>Let's say <code>process.env.NODE_ENV</code> is <code>development</code>. It would map into
<code>./config/development.js</code> then. The module it maps to can export configuration
like this:</p>
<div class="code"><pre class="code literal-block"><span class="n">module</span><span class="o">.</span><span class="n">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">testing</span><span class="p">:</span><span class="w"> </span><span class="s1">'something'</span><span class="p">,</span>
<span class="w">    </span><span class="o">...</span>
<span class="p">};</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Just another option, if you want to use only a cli interface, just use the
<code>define</code> option of webpack. I add the following script in my <code>package.json</code> :</p>
<div class="code"><pre class="code literal-block">"build-production": "webpack -p --define process.env.NODE_ENV='\"production\"' --progress --colors"
</pre></div>

<p>So I just have to run <code>npm run build-production</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/setting-up-and-using-meld-as-your-git-difftool-and-mergetool/" class="u-url">Setting up and using Meld as your git difftool and mergetool</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/setting-up-and-using-meld-as-your-git-difftool-and-mergetool/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T16:43:50+08:00" itemprop="datePublished" title="2023-03-04 16:43">2023-03-04 16:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Although much of the information in this question and answer is available on
<em>StackOverflow</em> , it is spread out over lots of pages and among other answers
which are either wrong or misleading. It took me a while to piece together
everything I wanted to know.</p>
<p>There are a lot of different programs that can be used as your git difftool
and mergetool, and there is certainly no consensus as to which is the <em>best</em>
(opinions, requirements, and OSes will clearly differ).</p>
<p>Meld is a popular free, open-source, and cross-platform (UNIX/Linux, OSX,
Windows) choice as shown in the <em>StackOverflow</em> question, What's the best
visual merge tool for Git?, in which the answer proposing Meld has more than 3
times the votes as any other tool.</p>
<p>The following 2 questions will be answered in my answer below:</p>
<ul>
<li><em>How do I set up and use Meld as my git difftool?</em></li>
<li><em>How do I set up and use Meld as my git mergetool?</em></li>
</ul>
<p>Note: It is not necessary to use the same program as both your difftool and
mergetool, different programs can be set for both.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>How do I set up and use Meld as my git difftool?</h3>
<p>git difftool displays the diff using a GUI diff program (i.e. Meld) instead of
displaying the diff output in your terminal.</p>
<p>Although you can set the GUI program on the command line using <code>-t &lt;tool&gt; /
--tool=&lt;tool&gt;</code> it makes more sense to configure it in your <code>.gitconfig</code> file.
[Note: See the sections about escaping quotes and Windows paths at the
bottom.]</p>
<div class="code"><pre class="code literal-block"><span class="err">#</span><span class="w"> </span><span class="k">Add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="p">.</span><span class="n">gitconfig</span><span class="w"> </span><span class="k">file</span><span class="p">.</span>
<span class="o">[</span><span class="n">diff</span><span class="o">]</span>
<span class="w">    </span><span class="n">tool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meld</span>
<span class="o">[</span><span class="n">difftool</span><span class="o">]</span>
<span class="w">    </span><span class="n">prompt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span>
<span class="o">[</span><span class="n">difftool "meld"</span><span class="o">]</span>
<span class="w">    </span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meld</span><span class="w"> </span><span class="ss">"$LOCAL"</span><span class="w"> </span><span class="ss">"$REMOTE"</span>
</pre></div>

<p>[Note: These settings will not alter the behaviour of <code>git diff</code> which will
continue to function as usual.]</p>
<p>You use <code>git difftool</code> in exactly the same way as you use <code>git diff</code>. e.g.</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">difftool</span><span class="w"> </span><span class="o">&lt;</span><span class="n">COMMIT_HASH</span><span class="o">&gt;</span><span class="w"> </span><span class="n">file_name</span>
<span class="n">git</span><span class="w"> </span><span class="n">difftool</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BRANCH_NAME</span><span class="o">&gt;</span><span class="w"> </span><span class="n">file_name</span>
<span class="n">git</span><span class="w"> </span><span class="n">difftool</span><span class="w"> </span><span class="o">&lt;</span><span class="n">COMMIT_HASH_1</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">COMMIT_HASH_2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">file_name</span>
</pre></div>

<p>If properly configured a Meld window will open displaying the diff using a GUI
interface.</p>
<p>The order of the Meld GUI window panes can be controlled by the order of
<code>$LOCAL</code> and <code>$REMOTE</code> in <code>cmd</code>, that is to say which file is shown in the
left pane and which in the right pane. If you want them the other way around
simply swap them around like this:</p>
<div class="code"><pre class="code literal-block">    cmd = meld "$REMOTE" "$LOCAL"
</pre></div>

<p>Finally the <code>prompt = false</code> line simply stops git from prompting you as to
whether you want to launch Meld or not, by default git will issue a prompt.</p>
<hr>
<h3>How do I set up and use Meld as my git mergetool?</h3>
<p>git mergetool allows you to use a GUI merge program (i.e. Meld) to resolve the
merge conflicts that have occurred during a merge.</p>
<p>Like difftool you can set the GUI program on the command line using <code>-t &lt;tool&gt;
/ --tool=&lt;tool&gt;</code> but, as before, it makes more sense to configure it in your
<code>.gitconfig</code> file. [Note: See the sections about escaping quotes and Windows
paths at the bottom.]</p>
<div class="code"><pre class="code literal-block"><span class="err">#</span><span class="w"> </span><span class="k">Add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="p">.</span><span class="n">gitconfig</span><span class="w"> </span><span class="k">file</span><span class="p">.</span>
<span class="o">[</span><span class="n">merge</span><span class="o">]</span>
<span class="w">    </span><span class="n">tool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meld</span>
<span class="o">[</span><span class="n">mergetool "meld"</span><span class="o">]</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nf">Choose</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="p">(</span><span class="ow">not</span><span class="w"> </span><span class="k">both</span><span class="err">!</span><span class="p">)</span><span class="w"> </span><span class="n">explained</span><span class="w"> </span><span class="n">below</span><span class="p">.</span>
<span class="w">    </span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meld</span><span class="w"> </span><span class="ss">"$LOCAL"</span><span class="w"> </span><span class="ss">"$MERGED"</span><span class="w"> </span><span class="ss">"$REMOTE"</span><span class="w"> </span><span class="o">--</span><span class="k">output</span><span class="w"> </span><span class="ss">"$MERGED"</span>
<span class="w">    </span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meld</span><span class="w"> </span><span class="ss">"$LOCAL"</span><span class="w"> </span><span class="ss">"$BASE"</span><span class="w"> </span><span class="ss">"$REMOTE"</span><span class="w"> </span><span class="c1">--output "$MERGED"</span>
</pre></div>

<p>You do NOT use <code>git mergetool</code> to perform an actual merge. Before using <code>git
mergetool</code> you perform a merge in the usual way with git. e.g.</p>
<div class="code"><pre class="code literal-block">git checkout master
git merge branch_name
</pre></div>

<p>If there is a merge conflict git will display something like this:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>merge<span class="w"> </span>branch_name
Auto-merging<span class="w"> </span>file_name
CONFLICT<span class="w"> </span><span class="o">(</span>content<span class="o">)</span>:<span class="w"> </span>Merge<span class="w"> </span>conflict<span class="w"> </span><span class="k">in</span><span class="w"> </span>file_name
Automatic<span class="w"> </span>merge<span class="w"> </span>failed<span class="p">;</span><span class="w"> </span>fix<span class="w"> </span>conflicts<span class="w"> </span>and<span class="w"> </span><span class="k">then</span><span class="w"> </span>commit<span class="w"> </span>the<span class="w"> </span>result.
</pre></div>

<p>At this point <code>file_name</code> will contain the partially merged file with the
merge conflict information (that's the file with all the <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code> and
<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> entries in it).</p>
<p>Mergetool can now be used to resolve the merge conflicts. You start it very
easily with:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">mergetool</span>
</pre></div>

<p>If properly configured a Meld window will open displaying 3 files. Each file
will be contained in a separate pane of its GUI interface.</p>
<p>In the example <code>.gitconfig</code> entry above, 2 lines are suggested as the
<code>[mergetool "meld"]</code> <code>cmd</code> line. In fact there are all kinds of ways for
advanced users to configure the <code>cmd</code> line, but that is beyond the scope of
this answer.</p>
<p>This answer has 2 alternative <code>cmd</code> lines which, between them, will cater for
most users, and will be a good starting point for advanced users who wish to
take the tool to the next level of complexity.</p>
<p>Firstly here is what the parameters mean:</p>
<ul>
<li>
<code>$LOCAL</code> is the file in the current branch (e.g. master).</li>
<li>
<code>$REMOTE</code> is the file in the branch being merged (e.g. branch_name).</li>
<li>
<code>$MERGED</code> is the partially merged file with the merge conflict information in it.</li>
<li>
<code>$BASE</code> is the shared commit ancestor of <code>$LOCAL</code> and <code>$REMOTE</code>, this is to say the file as it was when the branch containing <code>$REMOTE</code> was originally created.</li>
</ul>
<p>I suggest you use either:</p>
<div class="code"><pre class="code literal-block"><span class="k">[mergetool "meld"]</span>
<span class="w">    </span><span class="na">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">meld "$LOCAL" "$MERGED" "$REMOTE" --output "$MERGED"</span>
</pre></div>

<p>or:</p>
<div class="code"><pre class="code literal-block"><span class="k">[mergetool "meld"]</span>
<span class="w">    </span><span class="na">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">meld "$LOCAL" "$BASE" "$REMOTE" --output "$MERGED"</span>
<span class="w">    </span><span class="c1"># See 'Note On Output File' which explains --output "$MERGED".</span>
</pre></div>

<p>The choice is whether to use <code>$MERGED</code> or <code>$BASE</code> in between <code>$LOCAL</code> and
<code>$REMOTE</code>.</p>
<p>Either way Meld will display 3 panes with <code>$LOCAL</code> and <code>$REMOTE</code> in the left
and right panes and either <code>$MERGED</code> or <code>$BASE</code> in the middle pane.</p>
<p>In BOTH cases the middle pane is the file that you should edit to resolve the
merge conflicts. The difference is just in which starting edit position you'd
prefer; <code>$MERGED</code> for the file which contains the partially merged file with
the merge conflict information or <code>$BASE</code> for the shared commit ancestor of
<code>$LOCAL</code> and <code>$REMOTE</code>. [Since both <code>cmd</code> lines can be useful I keep them both
in my <code>.gitconfig</code> file. Most of the time I use the <code>$MERGED</code> line and the
<code>$BASE</code> line is commented out, but the commenting out can be swapped over if I
want to use the <code>$BASE</code> line instead.]</p>
<p>Note On Output File: Do not worry that <code>--output "$MERGED"</code> is used in <code>cmd</code>
regardless of whether <code>$MERGED</code> or <code>$BASE</code> was used earlier in the <code>cmd</code> line.
The <code>--output</code> option simply tells Meld what filename git wants the conflict
resolution file to be saved in. Meld will save your conflict edits in that
file regardless of whether you use <code>$MERGED</code> or <code>$BASE</code> as your starting edit
point.</p>
<p>After editing the middle pane to resolve the merge conflicts, just save the
file and close the Meld window. Git will do the update automatically and the
file in the current branch (e.g. master) will now contain whatever you ended
up with in the middle pane.</p>
<p>git will have made a backup of the partially merged file with the merge
conflict information in it by appending <code>.orig</code> to the original filename. e.g.
<code>file_name.orig</code>. After checking that you are happy with the merge and running
any tests you may wish to do, the <code>.orig</code> file can be deleted.</p>
<p>At this point you can now do a commit to commit the changes.</p>
<p>If, while you are editing the merge conflicts in Meld, you wish to abandon the
use of Meld, then quit Meld without saving the merge resolution file in the
middle pane. git will respond with the message <code>file_name seems unchanged</code> and
then ask <code>Was the merge successful? [y/n]</code>, if you answer <code>n</code> then the merge
conflict resolution will be aborted and the file will remain unchanged. Note
that if you have saved the file in Meld at any point then you will not receive
the warning and prompt from git. [Of course you can just delete the file and
replace it with the backup <code>.orig</code> file that git made for you.]</p>
<p>If you have more than 1 file with merge conflicts then git will open a new
Meld window for each, one after another until they are all done. They won't
all be opened at the same time, but when you finish editing the conflicts in
one, and close Meld, git will then open the next one, and so on until all the
merge conflicts have been resolved.</p>
<p>It would be sensible to create a dummy project to test the use of <code>git
mergetool</code> before using it on a <em>live</em> project. Be sure to use a filename
containing a space in your test, in case your OS requires you to escape the
quotes in the <code>cmd</code> line, see below.</p>
<hr>
<h4>Escaping quote characters</h4>
<p>Some operating systems may need to have the quotes in <code>cmd</code> escaped. Less
experienced users should remember that config command lines should be tested
with filenames that include spaces, and if the <code>cmd</code> lines don't work with the
filenames that include spaces then try escaping the quotes. e.g.</p>
<div class="code"><pre class="code literal-block">cmd = meld \"$LOCAL\" \"$REMOTE\"
</pre></div>

<p>In some cases more complex quote escaping may be needed. The 1st of the
Windows path links below contains an example of triple-escaping each quote.
It's a bore but sometimes necessary. e.g.</p>
<div class="code"><pre class="code literal-block">cmd = meld \\\"$LOCAL\\\" \\\"$REMOTE\\\"
</pre></div>

<h4>Windows paths</h4>
<p>Windows users will probably need extra configuration added to the Meld <code>cmd</code>
lines. They may need to use the full path to <code>meldc</code>, which is designed to be
called on Windows from the command line, or they may need or want to use a
wrapper. They should read the <em>StackOverflow</em> pages linked below which are
about setting the correct Meld <code>cmd</code> line for Windows. Since I am a Linux user
I am unable to test the various Windows <code>cmd</code> lines and have no further
information on the subject other than to recommend using my examples with the
addition of a full path to Meld or <code>meldc</code>, or adding the Meld program folder
to your <code>path</code>.</p>
<ul>
<li>Git Diff and Meld on Windows</li>
<li>How to set Meld as git mergetool</li>
<li>Git mergetool with Meld on Windows</li>
</ul>
<h4>Ignoring trailing whitespace with Meld</h4>
<p>Meld has a number of preferences that can be configured in the GUI.</p>
<p>In the preferences <code>Text Filters</code> tab there are several useful filters to
ignore things like comments when performing a diff. Although there are filters
to ignore <code>All whitespace</code> and <code>Leading whitespace</code>, there is no ignore
<code>Trailing whitespace</code> filter (this has been suggested as an addition in the
Meld mailing list but is not available in my version).</p>
<p>Ignoring trailing whitespace is often very useful, especially when
collaborating, and can be manually added easily with a simple regular
expression in the Meld preferences <code>Text Filters</code> tab.</p>
<div class="code"><pre class="code literal-block"><span class="p">#</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">regexes</span><span class="w"> </span><span class="n">depending</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">comprehensive</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="p">.</span>
<span class="p">[</span><span class="w"> </span><span class="n">\t]*$</span>
<span class="p">[</span><span class="w"> </span><span class="n">\t\r\f\v]*$</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>While the other answer is correct, here's the fastest way to just go ahead and
configure Meld as your visual diff tool. Just copy/paste this:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">diff</span><span class="o">.</span><span class="k">tool</span><span class="w"> </span><span class="n">meld</span>
<span class="n">git</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">--</span><span class="n">global</span><span class="w"> </span><span class="n">difftool</span><span class="o">.</span><span class="n">prompt</span><span class="w"> </span><span class="bp">false</span>
</pre></div>

<p>Now run <code>git difftool</code> in a directory and Meld will be launched for each
different file.</p>
<p>Side note: Meld is surprisingly slow at comparing CSV files, and no Linux diff
tool I've found is faster than this Windows tool called Compare It! (last
updated in 2010).</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2447.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2445.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
