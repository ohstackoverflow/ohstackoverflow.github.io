<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1215) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1215.html">
<link rel="prev" href="index-1216.html" type="text/html">
<link rel="next" href="index-1214.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-override-nested-npm-dependency-versions/" class="u-url">How do I override nested NPM dependency versions?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-override-nested-npm-dependency-versions/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:01:04+08:00" itemprop="datePublished" title="2023-02-18 04:01">2023-02-18 04:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would like to use the <code>grunt-contrib-jasmine</code> NPM package. It has various
dependencies. Part of the dependency graph looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="err">─┬</span><span class="w"> </span><span class="n">grunt</span><span class="o">-</span><span class="n">contrib</span><span class="o">-</span><span class="n">jasmine</span><span class="mf">@0.4.1</span>
<span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">├─┬</span><span class="w"> </span><span class="n">grunt</span><span class="o">-</span><span class="n">lib</span><span class="o">-</span><span class="n">phantomjs</span><span class="mf">@0.2.0</span>
<span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">├─┬</span><span class="w"> </span><span class="n">phantomjs</span><span class="mf">@1.8.2</span><span class="mi">-2</span>
</pre></div>

<p>Unfortunately, there's a bug in this version <code>phantomjs</code> which prevents it
from installing correctly on Mac OS X. This is fixed in the latest version.</p>
<p><strong>How can I get<code>grunt-lib-phantomjs</code> to use a newer version of <code>phantomjs</code>?</strong></p>
<p>Some additional context:</p>
<ul>
<li>
<code>grunt-contrib-jasmine</code> explicitly requires version <code>"~0.2.0"</code> of <code>grunt-lib-phantomjs</code>, which explicitly requires version <code>"~1.8.1"</code> of <code>phantomjs</code>.</li>
<li>Adding <code>phantomjs</code> to my package's dependencies first has no effect; both versions are installed and <code>grunt-contrib-jasmine</code> still uses the older versions (see: When installing a package with NPM, can you tell it to use a different version of one of its dependencies?).</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>As of NPM v8.3, the correct way to deal with this is via the <code>overrides</code>
section of your <code>package.json</code> file.</p>
<blockquote>
<p>If you need to make specific changes to dependencies of your dependencies,
for example replacing the version of a dependency with a known security
issue, replacing an existing dependency with a fork, or making sure that the
same version of a package is used everywhere, then you may add an override.</p>
<p>Overrides provide a way to replace a package in your dependency tree with
another version, or another package entirely. These changes can be scoped as
specific or as vague as desired.</p>
<p>To make sure the package foo is always installed as version 1.0.0 no matter
what version your dependencies rely on:</p>
<div class="code"><pre class="code literal-block">{
  "overrides": {
    "foo": "1.0.0"
  }
}
</pre></div>

</blockquote>
<p>There are a variety of other, more nuanced configurations allowing you to only
override a package when it's a dependency of a particular package hierarchy.
For more details, check out https://docs.npmjs.com/cli/v8/configuring-
npm/package-json#overrides</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>As of npm cli v8.3.0 (2021-12-09) this can be solved using the<code>overrides</code>
field of package.json</strong>. <em>As described in StriplingWarrior's answer</em></p>
<p>For example, the project has <code>typescript</code> version <code>4.6.2</code> as <em>direct</em>
development dependency and <code>awesome-typescript-loader</code> that uses old version
<code>2.7</code> of <code>typescript</code>. Here is how you can tell <code>npm</code> to use version <code>4.6.2</code>
of <code>typescript</code> for <code>awesome-typescript-loader</code>:</p>
<div class="code"><pre class="code literal-block"><span class="p">{</span>
<span class="w">  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myproject"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="s2">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"typescript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~4.6.2"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"awesome-typescript-loader"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^5.2.1"</span><span class="p">,</span>
<span class="w">    </span><span class="o">...</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">"overrides"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"awesome-typescript-loader"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">"typescript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$typescript"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>If you don't use <code>typescript</code> as <em>direct</em> development dependency, then you
have to write <code>4.6.2</code> instead of <code>$typescript</code> in <code>overrides</code> section:</p>
<div class="code"><pre class="code literal-block"><span class="p">{</span>
<span class="w">  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myproject"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="s2">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"awesome-typescript-loader"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^5.2.1"</span><span class="p">,</span>
<span class="w">    </span><span class="o">...</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">"overrides"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"awesome-typescript-loader"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">"typescript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~4.6.2"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>For using the latest version of dependency:</p>
<div class="code"><pre class="code literal-block"><span class="p">{</span>
<span class="w">  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myproject"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.0"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="o">...</span>
<span class="w">  </span><span class="s2">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"awesome-typescript-loader"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^5.2.1"</span><span class="p">,</span>
<span class="w">    </span><span class="o">...</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">"overrides"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"awesome-typescript-loader"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">"typescript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"latest"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Same <code>overrides</code> can be used for both <code>dependencies</code> and <code>devDependencies</code>.</p>
<hr>
<p>If you're using npm version &gt;5 but &lt;8.3.0: edit your <code>package-lock.json</code>:
remove the library from <code>"requires"</code> section and add it under "dependencies".</p>
<p>For example, you want <code>deglob</code> package to use <code>glob</code> package version <code>3.2.11</code>
instead of its current one. You open <code>package-lock.json</code> and see:</p>
<div class="code"><pre class="code literal-block"><span class="s">"deglob"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s">"version"</span><span class="o">:</span><span class="w"> </span><span class="s">"2.1.0"</span><span class="p">,</span>
<span class="w">  </span><span class="s">"resolved"</span><span class="o">:</span><span class="w"> </span><span class="s">"https://registry.npmjs.org/deglob/-/deglob-2.1.0.tgz"</span><span class="p">,</span>
<span class="w">  </span><span class="s">"integrity"</span><span class="o">:</span><span class="w"> </span><span class="s">"sha1-TUSr4W7zLHebSXK9FBqAMlApoUo="</span><span class="p">,</span>
<span class="w">  </span><span class="s">"requires"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">"find-root"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.1.0"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"glob"</span><span class="o">:</span><span class="w"> </span><span class="s">"7.1.2"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"ignore"</span><span class="o">:</span><span class="w"> </span><span class="s">"3.3.5"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"pkg-config"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.1.1"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"run-parallel"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.1.6"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"uniq"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.0.1"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">},</span>
</pre></div>

<p>Remove <code>"glob": "7.1.2",</code> from <code>"requires"</code>, add <code>"dependencies"</code> with proper
version:</p>
<div class="code"><pre class="code literal-block"><span class="s">"deglob"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s">"version"</span><span class="o">:</span><span class="w"> </span><span class="s">"2.1.0"</span><span class="p">,</span>
<span class="w">  </span><span class="s">"resolved"</span><span class="o">:</span><span class="w"> </span><span class="s">"https://registry.npmjs.org/deglob/-/deglob-2.1.0.tgz"</span><span class="p">,</span>
<span class="w">  </span><span class="s">"integrity"</span><span class="o">:</span><span class="w"> </span><span class="s">"sha1-TUSr4W7zLHebSXK9FBqAMlApoUo="</span><span class="p">,</span>
<span class="w">  </span><span class="s">"requires"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">"find-root"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.1.0"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"ignore"</span><span class="o">:</span><span class="w"> </span><span class="s">"3.3.5"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"pkg-config"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.1.1"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"run-parallel"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.1.6"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"uniq"</span><span class="o">:</span><span class="w"> </span><span class="s">"1.0.1"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s">"dependencies"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">"glob"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s">"version"</span><span class="o">:</span><span class="w"> </span><span class="s">"3.2.11"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">},</span>
</pre></div>

<p>Now remove your <code>node_modules</code> folder, run <code>npm ci</code> (or <code>npm install</code> for old
version of node/npm) and it will add missing parts to the <code>"dependencies"</code>
section.</p>
<hr>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-json-and-what-is-it-used-for/" class="u-url">What is JSON and what is it used for?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-json-and-what-is-it-used-for/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:00:38+08:00" itemprop="datePublished" title="2023-02-18 04:00">2023-02-18 04:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've looked on Wikipedia and Googled it and read the official documentation,
but I still haven't got to the point where I really understand what JSON is,
and why I'd use it.</p>
<p>I have been building applications using PHP, MySQL and JavaScript / HTML for a
while, and if JSON can do something to make my life easier or my code better
or my user interface better, then I'd like to know about it. Can someone give
me a succinct explanation?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>JSON (JavaScript Object Notation) is a lightweight format that is used for
data interchanging.</strong> It is based on a subset of JavaScript language (the way
objects are built in JavaScript). As stated in the MDN, some JavaScript is not
JSON, and some JSON is not JavaScript.</p>
<p>An example of where this is used is web services responses. In the 'old' days,
web services used XML as their primary data format for transmitting back data,
but since JSON appeared ( <em>The JSON format is specified in RFC 4627 by Douglas
Crockford</em> ), it has been the preferred format because it is much more
<strong>lightweight</strong></p>
<p>You can find a lot more info on the official JSON web site.</p>
<p>JSON is built on two structures:</p>
<ul>
<li>A collection of name/value pairs. In various languages, this is realized as an object, record, struct, dictionary, hash table, keyed list, or associative array.</li>
<li>An ordered list of values. In most languages, this is realized as an array, vector, list, or sequence.</li>
</ul>
<hr>
<h3>JSON Structure</h3>
<p><img alt="JSON Object diagram" src="images/VHjrV.gif"></p>
<p><img alt="JSON Array diagram" src="images/OCsS0.gif"></p>
<p><img alt="JSON Value diagram" src="images/7zOHB.gif"></p>
<p><img alt="JSON String diagram" src="images/pzAPZ.gif"></p>
<p><img alt="JSON Number diagram" src="images/EK6wD.gif"></p>
<p>Here is an example of JSON data:</p>
<div class="code"><pre class="code literal-block">{
     "firstName": "John",
     "lastName": "Smith",
     "address": {
         "streetAddress": "21 2nd Street",
         "city": "New York",
         "state": "NY",
         "postalCode": 10021
     },
     "phoneNumbers": [
         "212 555-1234",
         "646 555-4567"
     ]
 }
</pre></div>

<hr>
<h2>JSON in JavaScript</h2>
<p><strong>JSON (in Javascript) is a string!</strong></p>
<p>People often assume all Javascript objects are JSON and that JSON is a
Javascript object. This is incorrect.</p>
<p>In Javascript <code>var x = {x:y}</code> is <strong>not JSON</strong> , this is a <strong>Javascript
object</strong>. The two are not the same thing. The JSON equivalent (represented in
the Javascript language) would be <code>var x = '{"x":"y"}'</code>. <code>x</code> is an object of
type <strong>string</strong> not an object in its own right. To turn this into a fully
fledged Javascript object you must first parse it, <code>var x =
JSON.parse('{"x":"y"}');</code>, <code>x</code> is now an object but this is not JSON anymore.</p>
<p>See Javascript object Vs JSON</p>
<hr>
<p>When working with JSON and JavaScript, you may be tempted to use the <code>eval</code>
function to evaluate the result returned in the callback, but this is not
suggested since there are two characters (U+2028 &amp; U+2029) valid in JSON but
not in JavaScript (read more of this here).</p>
<p>Therefore, one must always try to use Crockford's script that checks for a
valid JSON before evaluating it. Link to the script explanation is found here
and here is a direct link to the js file. Every major browser nowadays has its
own implementation for this.</p>
<p>Example on how to use the JSON parser (with the json from the above code
snippet):</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="n">The</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span>
<span class="k">var</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">johnny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="w">    </span><span class="o">//</span><span class="n">Now</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="s1">'johnny'</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">snippet</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="n">example</span><span class="p">)</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="n">johnny</span><span class="o">.</span><span class="n">firstName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">johnny</span><span class="o">.</span><span class="n">lastName</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="n">Will</span><span class="w"> </span><span class="n">alert</span><span class="w"> </span><span class="s1">'John Smith'</span>
<span class="p">};</span>
</pre></div>

<p>The JSON parser also offers another very useful method, <code>stringify</code>. This
method accepts a JavaScript object as a parameter, and outputs back a string
with JSON format. This is useful for when you want to <em>send data back to the
server:</em></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">anObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s2">"Andreas"</span><span class="p">,</span><span class="w"> </span><span class="n">surname</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Grech"</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">jsonFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">anObject</span><span class="p">);</span>
<span class="o">//</span><span class="n">The</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">this</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Andreas"</span><span class="p">,</span><span class="s2">"surname"</span><span class="p">:</span><span class="s2">"Grech"</span><span class="p">,</span><span class="s2">"age"</span><span class="p">:</span><span class="mi">20</span><span class="p">}</span>
</pre></div>

<p>The above two methods (<code>parse</code> and <code>stringify</code>) also take a second parameter,
which is a function that will be called for every key and value at every level
of the final result, and each value will be replaced by result of your
inputted function. (More on this here)</p>
<p>Btw, for all of you out there who think JSON is just for JavaScript, check out
this post that explains and confirms otherwise.</p>
<hr>
<h3>References</h3>
<ul>
<li>JSON.org</li>
<li>Wikipedia</li>
<li>Json in 3 minutes (Thanks mson)</li>
<li>Using JSON with Yahoo! Web Services (Thanks gljivar)</li>
<li>JSON to CSV Converter</li>
<li>Alternative JSON to CSV Converter</li>
<li>JSON Lint (JSON validator)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<h3>The Concept Explained - No Code or Technical Jargon</h3>
<p><strong>What is JSON? – How I explained it to my wife TM</strong></p>
<p><strong>Me:</strong> “It’s basically a way of communicating with someone in writing....but
with very specific rules.</p>
<p><strong>Wife:</strong> yeah....?</p>
<p><strong>Me:</strong> In prosaic English, the rules are pretty loose: just like with cage
fighting. Not so with JSON. There are many ways of describing something:</p>
<p>• Example 1: Our family has 4 people: You, me and 2 kids.</p>
<p>• Example 2: Our family: you, me, kid1 and kid2.</p>
<p>• Example 3: Family: [ you, me, kid1, kid2]</p>
<p>• Example 4: we got 4 people in our family: mum, dad, kid1 and kid2.</p>
<p><strong>Wife:</strong> Why don’t they just use plain English instead?</p>
<p><strong>Me:</strong> They would, but remember we’re dealing with computers. A computer is
stupid and is not going to be able to understand sentences. So we gotta be
really specific when computers are involved otherwise they get confused.
Furthermore, JSON is a fairly efficient way of communicating, so most of the
irrelevant stuff is cut out, which is pretty hand. If you wanted to
communicate our family, to a computer, one way you could do so is like this:</p>
<div class="code"><pre class="code literal-block">{
    "Family": ["Me", "Wife", "Kid1", "Kid2"] 
}
</pre></div>

<p>……and that is basically JSON. But remember, you MUST obey the JSON grammar
rules. If you break those rules, then a computer simply will not understand
(i.e. parse) what you are writing.</p>
<p><strong>Wife:</strong> So how do I write in Json?</p>
<p>A good way would be to use a json serialiser - which is a library which does
the heavy lifting for you.</p>
<p><strong>Summary</strong></p>
<blockquote>
<p><strong>JSON is basically a way of communicating data to someone, with very, very
specific rules. Using Key Value Pairs and Arrays.</strong> This is the concept
explained, at this point it is worth reading the specific rules above.</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/finding-a-branch-point-with-git/" class="u-url">Finding a branch point with Git?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/finding-a-branch-point-with-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:00:09+08:00" itemprop="datePublished" title="2023-02-18 04:00">2023-02-18 04:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a repository with branches master and A and lots of merge activity
between the two. How can I find the commit in my repository when branch A was
created based on master?</p>
<p>My repository basically looks like this:</p>
<div class="code"><pre class="code literal-block">-- X -- A -- B -- C -- D -- F  (master) 
          \     /   \     /
           \   /     \   /
             G -- H -- I -- J  (branch A)
</pre></div>

<p>I'm looking for revision A, which is not what <code>git merge-base (--all)</code> finds.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I was looking for the same thing, and I found this question. Thank you for
asking it!</p>
<p>However, I found that the answers I see here don't seem to <em>quite</em> give the
answer you asked for (or that I was looking for) -- they seem to give the <code>G</code>
commit, instead of the <code>A</code> commit.</p>
<p>So, I've created the following tree (letters assigned in chronological order),
so I could test things out:</p>
<div class="code"><pre class="code literal-block"><span class="n">A</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="bp">F</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">G</span><span class="w">   </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">"master"</span><span class="w"> </span><span class="nf">branch </span><span class="p">(</span><span class="n">at</span><span class="w"> </span><span class="n">G</span><span class="p">)</span>
<span class="w">     </span>\<span class="w">   </span>\<span class="w">     </span><span class="o">/</span>
<span class="w">      </span><span class="n">C</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">--</span><span class="s">'</span><span class="err">     &lt;- "topic" branch (still at E)</span>
</pre></div>

<p>This looks a little different than yours, because I wanted to make sure that I
got (referring to this graph, not yours) B, but not A (and not D or E). Here
are the letters attached to SHA prefixes and commit messages (my repo can be
cloned from here, if that's interesting to anyone):</p>
<div class="code"><pre class="code literal-block"><span class="n">G</span><span class="o">:</span><span class="w"> </span><span class="n">a9546a2</span><span class="w"> </span><span class="n">merge</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">master</span>
<span class="n">F</span><span class="o">:</span><span class="w"> </span><span class="n">e7c863d</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">merged</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">topic</span>
<span class="n">E</span><span class="o">:</span><span class="w"> </span><span class="mi">648</span><span class="n">ca35</span><span class="w"> </span><span class="n">merging</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">onto</span><span class="w"> </span><span class="n">topic</span>
<span class="n">D</span><span class="o">:</span><span class="w"> </span><span class="mi">37</span><span class="n">ad159</span><span class="w"> </span><span class="n">post</span><span class="o">-</span><span class="n">branch</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">master</span>
<span class="n">C</span><span class="o">:</span><span class="w"> </span><span class="mi">132</span><span class="n">ee2a</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="n">branch</span>
<span class="n">B</span><span class="o">:</span><span class="w"> </span><span class="mi">6</span><span class="n">aafd7f</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">branching</span>
<span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="mi">4112403</span><span class="w"> </span><span class="n">initial</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">master</span>
</pre></div>

<p>So, the <strong><em>goal: find B</em></strong>. Here are three ways that I found, after a bit of
tinkering:</p>
<hr>
<h3>1. visually, with gitk:</h3>
<p>You should visually see a tree like this (as viewed from master):</p>
<p><img alt="gitk screen capture from master" src="images/AVDtS.png"></p>
<p>or here (as viewed from topic):</p>
<p><img alt="gitk screen capture from topic" src="images/D4ZVU.png"></p>
<p>in both cases, I've selected the commit that is <code>B</code> in my graph. Once you
click on it, its full SHA is presented in a text input field just below the
graph.</p>
<hr>
<h3>2. visually, but from the terminal:</h3>
<p><code>git log --graph --oneline --all</code></p>
<p><em>(Edit/side-note: adding<code>--decorate</code> can also be interesting; it adds an
indication of branch names, tags, etc. Not adding this to the command-line
above since the output below doesn't reflect its use.)</em></p>
<p>which shows (assuming <code>git config --global color.ui auto</code>):</p>
<p><img alt="output of git log --graph --oneline --all" src="images/OCZPM.png"></p>
<p>Or, in straight text:</p>
<div class="code"><pre class="code literal-block">*   a9546a2 merge from topic back to master
|\  
| *   648ca35 merging master onto topic
| |\  
| * | 132ee2a first commit on topic branch
* | | e7c863d commit on master after master was merged to topic
| |/  
|/|   
* | 37ad159 post-branch commit on master
|/  
* 6aafd7f second commit on master before branching
* 4112403 initial commit on master
</pre></div>

<p>in either case, we see the 6aafd7f commit as the lowest common point, i.e. <code>B</code>
in my graph, or <code>A</code> in yours.</p>
<hr>
<h3>3. With shell magic:</h3>
<p>You don't specify in your question whether you wanted something like the
above, or a single command that'll just get you the one revision, and nothing
else. Well, here's the latter:</p>
<div class="code"><pre class="code literal-block"><span class="gh">diff -u &lt;(git rev-list --first-parent topic) \</span>
<span class="w"> </span>            &lt;(git rev-list --first-parent master) | \
<span class="w"> </span>    sed -ne 's/^ //p' | head -1
<span class="w">6aafd7ff98017c816033df18395c5c1e7829960d</span>
</pre></div>

<p>Which you can also put into your ~/.gitconfig as <em>(note: trailing dash is
important; thanks Brian for bringing attention to that)</em> :</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="s s-Atom">alias</span><span class="p">]</span>
    <span class="s s-Atom">oldest</span><span class="o">-</span><span class="s s-Atom">ancestor</span> <span class="o">=</span> <span class="p">!</span><span class="s s-Atom">zsh</span> <span class="o">-</span><span class="s s-Atom">c</span> <span class="s s-Atom">'diff -u &lt;(git rev-list --first-parent "${1:-master}") &lt;(git rev-list --first-parent "${2:-HEAD}") | sed -ne \"s/^ //p\" | head -1'</span> <span class="o">-</span>
</pre></div>

<p>Which could be done via the following (convoluted with quoting) command-line:</p>
<div class="code"><pre class="code literal-block"><span class="s s-Atom">git</span> <span class="s s-Atom">config</span> <span class="s s-Atom">--global</span> <span class="s s-Atom">alias</span><span class="p">.</span><span class="s s-Atom">oldest</span><span class="o">-</span><span class="s s-Atom">ancestor</span> <span class="s s-Atom">'!zsh -c '\''diff</span> <span class="o">-</span><span class="s s-Atom">u</span> <span class="s s-Atom">&lt;</span><span class="p">(</span><span class="s s-Atom">git</span> <span class="s s-Atom">rev</span><span class="o">-</span><span class="s s-Atom">list</span> <span class="s s-Atom">--first</span><span class="o">-</span><span class="s s-Atom">parent</span> <span class="s2">"${1:-master}"</span><span class="p">)</span> <span class="s s-Atom">&lt;</span><span class="p">(</span><span class="s s-Atom">git</span> <span class="s s-Atom">rev</span><span class="o">-</span><span class="s s-Atom">list</span> <span class="s s-Atom">--first</span><span class="o">-</span><span class="s s-Atom">parent</span> <span class="s2">"${2:-HEAD}"</span><span class="p">)</span> <span class="p">|</span> <span class="s s-Atom">sed</span> <span class="o">-</span><span class="s s-Atom">ne</span> <span class="s2">"s/^ //p"</span> <span class="p">|</span> <span class="s s-Atom">head</span> <span class="o">-</span><span class="mi">1</span><span class="s s-Atom">'\'' -'</span>
</pre></div>

<p>Note: <code>zsh</code> could just as easily have been <code>bash</code>, but <code>sh</code> will <em>not</em> work --
the <code>&lt;()</code> syntax doesn't exist in vanilla <code>sh</code>. (Thank you again, @conny, for
making me aware of it in a comment on another answer on this page!)</p>
<h4>Note: Alternate version of the above:</h4>
<p>Thanks to liori for pointing out that the above could fall down when comparing
identical branches, and coming up with an alternate diff form which removes
the sed form from the mix, and makes this "safer" (i.e. it returns a result
(namely, the most recent commit) even when you compare master to master):</p>
<p>As a .git-config line:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="s s-Atom">alias</span><span class="p">]</span>
    <span class="s s-Atom">oldest</span><span class="o">-</span><span class="s s-Atom">ancestor</span> <span class="o">=</span> <span class="p">!</span><span class="s s-Atom">zsh</span> <span class="o">-</span><span class="s s-Atom">c</span> <span class="s s-Atom">'diff --old-line-format='' --new-line-format='' &lt;(git rev-list --first-parent "${1:-master}") &lt;(git rev-list --first-parent "${2:-HEAD}") | head -1'</span> <span class="o">-</span>
</pre></div>

<p>From the shell:</p>
<div class="code"><pre class="code literal-block"><span class="s s-Atom">git</span> <span class="s s-Atom">config</span> <span class="s s-Atom">--global</span> <span class="s s-Atom">alias</span><span class="p">.</span><span class="s s-Atom">oldest</span><span class="o">-</span><span class="s s-Atom">ancestor</span> <span class="s s-Atom">'!zsh -c '\''diff</span> <span class="s s-Atom">--old</span><span class="o">-</span><span class="s s-Atom">line</span><span class="o">-</span><span class="s s-Atom">format=''</span> <span class="s s-Atom">--new</span><span class="o">-</span><span class="s s-Atom">line</span><span class="o">-</span><span class="s s-Atom">format=''</span> <span class="s s-Atom">&lt;</span><span class="p">(</span><span class="s s-Atom">git</span> <span class="s s-Atom">rev</span><span class="o">-</span><span class="s s-Atom">list</span> <span class="s s-Atom">--first</span><span class="o">-</span><span class="s s-Atom">parent</span> <span class="s2">"${1:-master}"</span><span class="p">)</span> <span class="s s-Atom">&lt;</span><span class="p">(</span><span class="s s-Atom">git</span> <span class="s s-Atom">rev</span><span class="o">-</span><span class="s s-Atom">list</span> <span class="s s-Atom">--first</span><span class="o">-</span><span class="s s-Atom">parent</span> <span class="s2">"${2:-HEAD}"</span><span class="p">)</span> <span class="p">|</span> <span class="s s-Atom">head</span> <span class="o">-</span><span class="mi">1</span><span class="s s-Atom">'\'' -'</span>
</pre></div>

<p>So, in my test tree (which was unavailable for a while, sorry; it's back),
that now works on both master and topic (giving commits G and B,
respectively). Thanks again, liori, for the alternate form.</p>
<hr>
<p>So, that's what I [and liori] came up with. It seems to work for me. It also
allows an additional couple of aliases that might prove handy:</p>
<div class="code"><pre class="code literal-block">git config --global alias.branchdiff '!sh -c "git diff `git oldest-ancestor`.."'
git config --global alias.branchlog '!sh -c "git log `git oldest-ancestor`.."'
</pre></div>

<p>Happy git-ing!</p>
<p><br></p>
<h3>Suggest</h3>
<p>You may be looking for <code>git merge-base</code>:</p>
<blockquote>
<p><em>git merge-base</em> finds best common ancestor(s) between two commits to use in
a three-way merge. One common ancestor is <em>better</em> than another common
ancestor if the latter is an ancestor of the former. A common ancestor that
does not have any better common ancestor is a <em>best common ancestor</em> , i.e.
a <em>merge base</em>. Note that there can be more than one merge base for a pair
of commits.</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1216.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1214.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
