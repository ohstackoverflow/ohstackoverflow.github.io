<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 243) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-243.html">
<link rel="prev" href="index-244.html" type="text/html">
<link rel="next" href="index-242.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-select-an-element-by-name-with-jquery/" class="u-url">How can I select an element by name with jQuery?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-select-an-element-by-name-with-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:52:04+08:00" itemprop="datePublished" title="2023-02-17 01:52">2023-02-17 01:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a table column I’m trying to expand and hide. jQuery seems to hide the
<code>&lt;td&gt;</code> elements when I select it by <code>class</code> but not by the element’s <code>name</code>.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block">$(".bold").hide(); // Selecting by class works.
$("tcol1").hide(); // Selecting by name does not work.
</pre></div>

<p>Note the HTML below. The second column has the same <code>name</code> for all rows. How
could I create this collection using the <code>name</code> attribute?</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;tr&gt;</span>
<span class="w">  </span><span class="nt">&lt;td&gt;</span>data1<span class="nt">&lt;/td&gt;</span>
<span class="w">  </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">name=</span><span class="s">"tcol1"</span><span class="w"> </span><span class="na">class=</span><span class="s">"bold"</span><span class="nt">&gt;</span><span class="w"> </span>data2<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;tr&gt;</span>
<span class="w">  </span><span class="nt">&lt;td&gt;</span>data1<span class="nt">&lt;/td&gt;</span>
<span class="w">  </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">name=</span><span class="s">"tcol1"</span><span class="w"> </span><span class="na">class=</span><span class="s">"bold"</span><span class="nt">&gt;</span><span class="w"> </span>data2<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;tr&gt;</span>
<span class="w">  </span><span class="nt">&lt;td&gt;</span>data1<span class="nt">&lt;/td&gt;</span>
<span class="w">  </span><span class="nt">&lt;td</span><span class="w"> </span><span class="na">name=</span><span class="s">"tcol1"</span><span class="w"> </span><span class="na">class=</span><span class="s">"bold"</span><span class="nt">&gt;</span><span class="w"> </span>data2<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can use the jQuery attribute selector:</p>
<div class="code"><pre class="code literal-block">$<span class="ss">(</span><span class="s1">'td[name="tcol1"]'</span><span class="ss">)</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="nv">Matches</span><span class="w"> </span><span class="nv">exactly</span><span class="w"> </span><span class="s1">'tcol1'</span>
$<span class="ss">(</span><span class="s1">'td[name^="tcol"]'</span><span class="w"> </span><span class="ss">)</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">Matches</span><span class="w"> </span><span class="nv">those</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">begin</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="s1">'tcol'</span>
$<span class="ss">(</span><span class="s1">'td[name$="tcol"]'</span><span class="w"> </span><span class="ss">)</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">Matches</span><span class="w"> </span><span class="nv">those</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="s1">'tcol'</span>
$<span class="ss">(</span><span class="s1">'td[name*="tcol"]'</span><span class="w"> </span><span class="ss">)</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">Matches</span><span class="w"> </span><span class="nv">those</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">contain</span><span class="w"> </span><span class="s1">'tcol'</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Any attribute can be selected using <code>[attribute_name=value]</code> way. See the
sample here:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s2">"[name='nameofobject']"</span><span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-put-the-legend-outside-the-plot/" class="u-url">How to put the legend outside the plot</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-put-the-legend-outside-the-plot/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:51:33+08:00" itemprop="datePublished" title="2023-02-17 01:51">2023-02-17 01:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a series of 20 plots (not subplots) to be made in a single figure. I
want the legend to be outside of the box. At the same time, I do not want to
change the axes, as the size of the figure gets reduced.</p>
<ol>
<li>I want to keep the legend box outside the plot area (I want the legend to be outside at the right side of the plot area).</li>
<li>Is there a way to reduce the font size of the text inside the legend box, so that the size of the legend box will be small?</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<ul>
<li>You can make the legend text smaller by specifying <code>set_size</code> of <code>FontProperties</code>.</li>
<li>
<p>Resources: </p>
<ul>
<li>Legend guide</li>
<li><code>matplotlib.legend</code></li>
<li><code>matplotlib.pyplot.legend</code></li>
<li><code>matplotlib.font_manager</code></li>
<li><code>set_size(self, size)</code></li>
<li>Valid font size are <em>xx-small</em> , <em>x-small</em> , <em>small</em> , <em>medium</em> , <em>large</em> , <em>x-large</em> , <em>xx-large</em> , <em>larger</em> , <em>smaller</em> , and <em>None</em>.</li>
<li>Real Python: Python Plotting With Matplotlib (Guide)</li>
</ul>
<p>import matplotlib.pyplot as plt
from matplotlib.font_manager import FontProperties</p>
<p>fontP = FontProperties()
fontP.set_size('xx-small')</p>
<p>p1, = plt.plot([1, 2, 3], label='Line 1')
p2, = plt.plot([3, 2, 1], label='Line 2')
plt.legend(handles=[p1, p2], title='title', bbox_to_anchor=(1.05, 1), loc='upper left', prop=fontP)</p>
</li>
</ul>
<p><img alt="Enter image description here" src="images/OMgiC.png"></p>
<ul>
<li>
<p><code>fontsize='xx-small'</code> also works, without importing <code>FontProperties</code>.</p>
<p>plt.legend(handles=[p1, p2], title='title', bbox_to_anchor=(1.05, 1), loc='upper left', fontsize='xx-small')</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<h3>Placing the legend (<code>bbox_to_anchor</code>)</h3>
<p>A legend is positioned inside the bounding box of the axes using the <code>loc</code>
argument to <code>plt.legend</code>.<br>
E.g., <code>loc="upper right"</code> places the legend in the upper right corner of the
bounding box, which by default extents from <code>(0, 0)</code> to <code>(1, 1)</code> in axes
coordinates (or in bounding box notation <code>(x0, y0, width, height) = (0, 0, 1,
1)</code>).</p>
<p>To place the legend outside of the axes bounding box, one may specify a tuple
<code>(x0, y0)</code> of axes coordinates of the lower left corner of the legend.</p>
<div class="code"><pre class="code literal-block">plt.legend(loc=(1.04, 0))
</pre></div>

<p>A more versatile approach is to manually specify the bounding box into which
the legend should be placed, using the <strong><code>bbox_to_anchor</code></strong> argument. One can
restrict oneself to supply only the <code>(x0, y0)</code> part of the bbox. This creates
a zero span box, out of which the legend will expand in the direction given by
the <code>loc</code> argument. E.g.,</p>
<hr>
<div class="code"><pre class="code literal-block">**plt.legend(bbox_to_anchor=(1.04, 1), loc="upper left")**
</pre></div>

<p>places the legend outside the axes, such that the upper left corner of the
legend is at position <code>(1.04, 1)</code> in axes coordinates.</p>
<p>Further examples are given below, where additionally the interplay between
different arguments like <code>mode</code> and <code>ncols</code> are shown.</p>
<p><img alt="Enter image description here" src="images/OIMyM.png"></p>
<div class="code"><pre class="code literal-block">l1 = plt.legend(bbox_to_anchor=(1.04, 1), borderaxespad=0)
l2 = plt.legend(bbox_to_anchor=(1.04, 0), loc="lower left", borderaxespad=0)
l3 = plt.legend(bbox_to_anchor=(1.04, 0.5), loc="center left", borderaxespad=0)
l4 = plt.legend(bbox_to_anchor=(0, 1.02, 1, 0.2), loc="lower left",
                mode="expand", borderaxespad=0, ncol=3)
l5 = plt.legend(bbox_to_anchor=(1, 0), loc="lower right",
                bbox_transform=fig.transFigure, ncol=3)
l6 = plt.legend(bbox_to_anchor=(0.4, 0.8), loc="upper right")
</pre></div>

<p>Details about how to interpret the 4-tuple argument to <code>bbox_to_anchor</code>, as in
<code>l4</code>, can be found in this question. The <code>mode="expand"</code> expands the legend
horizontally inside the bounding box given by the 4-tuple. For a vertically
expanded legend, see this question.</p>
<p>Sometimes it may be useful to specify the bounding box in figure coordinates
instead of axes coordinates. This is shown in the example <code>l5</code> from above,
where the <code>bbox_transform</code> argument is used to put the legend in the lower
left corner of the figure.</p>
<h4>Postprocessing</h4>
<p>Having placed the legend outside the axes often leads to the undesired
situation that it is completely or partially outside the figure canvas.</p>
<p>Solutions to this problem are:</p>
<ul>
<li>
<strong>Adjust the subplot parameters</strong> <br>
One can adjust the subplot parameters such, that the axes take less space
inside the figure (and thereby leave more space to the legend) by using
<code>plt.subplots_adjust</code>. E.g.,<div class="code"><pre class="code literal-block">plt.subplots_adjust(right=0.7)
</pre></div>

</li>
</ul>
<p>leaves 30% space on the right-hand side of the figure, where one could place
the legend.</p>
<ul>
<li>
<p><strong>Tight layout</strong> <br>
Using <code>plt.tight_layout</code> Allows to automatically adjust the subplot parameters
such that the elements in the figure sit tight against the figure edges.
Unfortunately, the legend is not taken into account in this automatism, but we
can supply a rectangle box that the whole subplots area (including labels)
will fit into.</p>
<div class="code"><pre class="code literal-block">plt.tight_layout(rect=[0, 0, 0.75, 1])
</pre></div>

</li>
<li>
<p><strong>Saving the figure with<code>bbox_inches = "tight"</code></strong> <br>
The argument <code>bbox_inches = "tight"</code> to <code>plt.savefig</code> can be used to save the
figure such that all artist on the canvas (including the legend) are fit into
the saved area. If needed, the figure size is automatically adjusted.</p>
<div class="code"><pre class="code literal-block">plt.savefig("output.png", bbox_inches="tight")
</pre></div>

</li>
<li>
<p><strong>Automatically adjusting the subplot parameters</strong> <br>
A way to automatically adjust the subplot position such that the legend fits
inside the canvas <strong>without changing the figure size</strong> can be found in this
answer: <em>Creating figure with exact size and no padding (and legend outside
the axes)</em></p>
</li>
</ul>
<p>Comparison between the cases discussed above:</p>
<p><img alt="Enter image description here" src="images/zqKjY.png"></p>
<h3>Alternatives</h3>
<p><strong>A figure legend</strong></p>
<p>One may use a legend to the figure instead of the axes,
<code>matplotlib.figure.Figure.legend</code>. This has become especially useful for
Matplotlib version 2.1 or later, where no special arguments are needed</p>
<div class="code"><pre class="code literal-block">fig.legend(loc=7)
</pre></div>

<p>to create a legend for all artists in the different axes of the figure. The
legend is placed using the <code>loc</code> argument, similar to how it is placed inside
an axes, but in reference to the whole figure - hence it will be outside the
axes somewhat automatically. What remains is to adjust the subplots such that
there is no overlap between the legend and the axes. Here the point <em>"Adjust
the subplot parameters"</em> from above will be helpful. An example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"#7aa0c4"</span><span class="p">,</span> <span class="s2">"#ca82e1"</span><span class="p">,</span> <span class="s2">"#8bcd50"</span><span class="p">,</span> <span class="s2">"#e18882"</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="kp">sin</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">i</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"y=sin(x + </span><span class="si">{}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p><img alt="Enter image description here" src="images/v1AU6.png"></p>
<p><strong>Legend inside dedicated subplot axes</strong></p>
<p>An alternative to using <code>bbox_to_anchor</code> would be to place the legend in its
dedicated subplot axes (<code>lax</code>). Since the legend subplot should be smaller
than the plot, we may use <code>gridspec_kw={"width_ratios":[4, 1]}</code> at axes
creation. We can hide the axes <code>lax.axis("off")</code>, but we still put a legend
in. The legend handles and labels need to obtained from the real plot via <code>h,
l = ax.get_legend_handles_labels()</code> and can then be supplied to the legend in
the <code>lax</code> subplot, <code>lax.legend(h, l)</code>. A complete example is below.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">"figure.figsize"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s2">"width_ratios"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"y=sin(x)"</span><span class="p">)</span>
<span class="o">....</span>

<span class="n">h</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">lax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">lax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">"off"</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p>This produces a plot which is visually pretty similar to the plot from above:</p>
<p><img alt="Enter image description here" src="images/4RrYb.png"></p>
<p>We could also use the first axes to place the legend, but use the
<code>bbox_transform</code> of the legend axes,</p>
<div class="code"><pre class="code literal-block">ax.legend(bbox_to_anchor=(0, 0, 1, 1), bbox_transform=lax.transAxes)
lax.axis("off")
</pre></div>

<p>In this approach, we do not need to obtain the legend handles externally, but
we need to specify the <code>bbox_to_anchor</code> argument.</p>
<h4>Further reading and notes:</h4>
<ul>
<li>Consider the Matplotlib legend guide with some examples of other stuff you want to do with legends.</li>
<li>Some example code for placing legends for pie charts may directly be found in answer to this question: Python - Legend overlaps with the pie chart</li>
<li>The <code>loc</code> argument can take numbers instead of strings, which make calls shorter, however, they are not very intuitively mapped to each other. Here is the mapping for reference:</li>
</ul>
<p><img alt="Enter image description here" src="images/jxecX.png"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-don-t-self-closing-script-elements-work/" class="u-url">Why don't self-closing script elements work?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-don-t-self-closing-script-elements-work/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:50:50+08:00" itemprop="datePublished" title="2023-02-17 01:50">2023-02-17 01:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the reason browsers do not correctly recognize:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"foobar.js"</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"> </span><span class="o">&lt;!--</span><span class="w"> </span><span class="kr">self</span><span class="o">-</span><span class="n">closing</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">--&gt;</span>
</pre></div>

<p>Only this is recognized:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"foobar.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>Does this break the concept of XHTML support?</p>
<p>Note: This statement is correct at least for all IE (6-8 beta 2).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The non-normative appendix ‘HTML Compatibility Guidelines’ of the XHTML 1
specification says:</p>
<p>С.3. Element Minimization and Empty Element Content</p>
<blockquote>
<p>Given an empty instance of an element whose content model is not <code>EMPTY</code>
(for example, an empty title or paragraph) do not use the minimized form
(e.g. use <code>&lt;p&gt; &lt;/p&gt;</code> and not <code>&lt;p /&gt;</code>).</p>
</blockquote>
<p>XHTML DTD specifies script elements as:</p>
<div class="code"><pre class="code literal-block"><span class="c">&lt;!-- script statements, which may include CDATA sections --&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">script</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>To add to what Brad and squadette have said, the self-closing XML syntax
<code>&lt;script /&gt;</code> actually <strong>is</strong> correct XML, but for it to work in practice, your
web server also needs to send your documents as properly formed XML with an
XML mimetype like <code>application/xhtml+xml</code> in the HTTP Content-Type header (and
<em>not</em> as <code>text/html</code>).</p>
<p>However, sending an XML mimetype will cause your pages not to be parsed by
IE7, which only likes <code>text/html</code>.</p>
<p>From w3:</p>
<blockquote>
<p>In summary, 'application/xhtml+xml' SHOULD be used for XHTML Family
documents, and the use of 'text/html' SHOULD be limited to HTML-compatible
XHTML 1.0 documents. 'application/xml' and 'text/xml' MAY also be used, but
whenever appropriate, 'application/xhtml+xml' SHOULD be used rather than
those generic XML media types.</p>
</blockquote>
<p>I puzzled over this a few months ago, and the only workable (compatible with
FF3+ and IE7) solution was to use the old <code>&lt;script&gt;&lt;/script&gt;</code> syntax with
<code>text/html</code> (HTML syntax + HTML mimetype).</p>
<p>If your server sends the <code>text/html</code> type in its HTTP headers, even with
otherwise properly formed XHTML documents, FF3+ will use its HTML rendering
mode which means that <code>&lt;script /&gt;</code> will not work (this is a change, Firefox
was previously less strict).</p>
<p>This will happen regardless of any fiddling with <code>http-equiv</code> meta elements,
the XML prolog or doctype inside your document -- Firefox branches once it
gets the <code>text/html</code> header, that determines whether the HTML or XML parser
looks inside the document, and the HTML parser does not understand <code>&lt;script
/&gt;</code>.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-244.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-242.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
