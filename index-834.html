<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 834) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-834.html">
<link rel="prev" href="index-835.html" type="text/html">
<link rel="next" href="index-833.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/this-action-could-not-be-completed-try-again-22421/" class="u-url">This action could not be completed. Try Again (-22421)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/this-action-could-not-be-completed-try-again-22421/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:12:24+08:00" itemprop="datePublished" title="2023-02-17 17:12">2023-02-17 17:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to upload an <strong>Apple TV</strong> App to the App Store for testing
purposes, but I got the issue:</p>
<blockquote>
<p>This Action could not be completed. Try Again (-22421)</p>
</blockquote>
<p>as in the below image:</p>
<p><img alt="enter image description here" src="images/eV1e7.png"></p>
<p>So what can I do?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This happens because Apple's servers may not be working correctly. Just wait
and try later or next time. It will work for sure eventually.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Just try exporting the iPA file and then upload that exported iPA file with
application loader. It will solve your problem.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-select-an-element-in-a-component-template/" class="u-url">How can I select an element in a component template?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-select-an-element-in-a-component-template/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:11:56+08:00" itemprop="datePublished" title="2023-02-17 17:11">2023-02-17 17:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Does anybody know how to get hold of an element defined in a component
template? Polymer makes it really easy with the <code>$</code> and <code>$$</code>.</p>
<p>I was just wondering how to go about it in Angular.</p>
<p>Take the example from the tutorial:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span><span class="n">Component</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
    <span class="n">selector</span><span class="p">:</span><span class="s1">'display'</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span><span class="err">`</span>
     <span class="o">&lt;</span><span class="nb">input</span> <span class="c1">#myname (input)="updateName(myname.value)"/&gt;</span>
     <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">My</span> <span class="n">name</span> <span class="p">:</span> <span class="p">{{</span><span class="n">myName</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
     <span class="err">`</span>   
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">DisplayComponent</span> <span class="p">{</span>
    <span class="n">myName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">"Aman"</span><span class="p">;</span>
    <span class="n">updateName</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">myName</span> <span class="o">=</span> <span class="nb">input</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>How do I catch hold or get a reference of the <code>p</code> or <code>input</code> element from
within the class definition?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Instead of injecting <code>ElementRef</code> and using <code>querySelector</code> or similar from
there, a declarative way can be used instead to access elements in the view
directly:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="k">input</span><span class="w"> </span><span class="n">#myname</span><span class="o">&gt;</span>



<span class="nv">@ViewChild</span><span class="p">(</span><span class="s1">'myname'</span><span class="p">)</span><span class="w"> </span><span class="k">input</span><span class="p">;</span>
</pre></div>

<p>element</p>
<div class="code"><pre class="code literal-block">ngAfterViewInit() {
  console.log(this.input.nativeElement.value);
}
</pre></div>

<p><strong>StackBlitz example</strong></p>
<ul>
<li>@ViewChild() supports directive or component type as parameter, or the name (string) of a template variable. </li>
<li>@ViewChildren() also supports a list of names as comma separated list (currently no spaces allowed <code>@ViewChildren('var1,var2,var3')</code>). </li>
<li>@ContentChild() and @ContentChildren() do the same but in the light DOM (<code>&lt;ng-content&gt;</code> projected elements).</li>
</ul>
<p><strong>descendants</strong></p>
<p><code>@ContentChildren()</code> is the only one that allows to also query for descendants</p>
<div class="code"><pre class="code literal-block"><span class="nv">@ContentChildren</span><span class="p">(</span><span class="n">SomeTypeOrVarName</span><span class="p">,</span><span class="w"> </span><span class="err">{</span><span class="nl">descendants</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="err">}</span><span class="p">)</span><span class="w"> </span><span class="n">someField</span><span class="p">;</span>
</pre></div>

<p><del><code>{descendants: true}</code> should be the default but is not in 2.0.0 final and
it's considered a bug </del><br>
This was fixed in 2.0.1</p>
<p><strong>read</strong></p>
<p>If there are a component and directives the <code>read</code> parameter allows to specify
which instance should be returned.</p>
<p>For example <code>ViewContainerRef</code> that is required by dynamically created
components instead of the default <code>ElementRef</code></p>
<div class="code"><pre class="code literal-block"><span class="nv">@ViewChild</span><span class="p">(</span><span class="s1">'myname'</span><span class="p">,</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="k">read</span><span class="err">:</span><span class="w"> </span><span class="n">ViewContainerRef</span><span class="w"> </span><span class="err">}</span><span class="p">)</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>
</pre></div>

<p><strong>subscribe changes</strong></p>
<p>Even though view children are only set when <code>ngAfterViewInit()</code> is called and
content children are only set when <code>ngAfterContentInit()</code> is called, if you
want to subscribe to changes of the query result, it should be done in
<code>ngOnInit()</code></p>
<p>https://github.com/angular/angular/issues/9689#issuecomment-229247134</p>
<div class="code"><pre class="code literal-block"><span class="nv">@ViewChildren</span><span class="p">(</span><span class="n">SomeType</span><span class="p">)</span><span class="w"> </span><span class="n">viewChildren</span><span class="p">;</span>
<span class="nv">@ContentChildren</span><span class="p">(</span><span class="n">SomeType</span><span class="p">)</span><span class="w"> </span><span class="n">contentChildren</span><span class="p">;</span>

<span class="n">ngOnInit</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">this</span><span class="p">.</span><span class="n">viewChildren</span><span class="p">.</span><span class="n">changes</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">changes</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">changes</span><span class="p">));</span>
<span class="w">  </span><span class="n">this</span><span class="p">.</span><span class="n">contentChildren</span><span class="p">.</span><span class="n">changes</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">changes</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">changes</span><span class="p">));</span>
<span class="err">}</span>
</pre></div>

<p><strong>direct DOM access</strong></p>
<p>can only query DOM elements, but not components or directive instances:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyComponent</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">constructor</span><span class="p">(</span><span class="n">private</span><span class="w"> </span><span class="n">elRef</span><span class="p">:</span><span class="n">ElementRef</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="n">ngAfterViewInit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">elRef</span><span class="o">.</span><span class="n">nativeElement</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">div</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">transcluded</span><span class="w"> </span><span class="n">content</span>
<span class="w">  </span><span class="n">ngAfterContentInit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">elRef</span><span class="o">.</span><span class="n">nativeElement</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">'div'</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">div</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>get arbitrary projected content</strong></p>
<p>See Access transcluded content</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can get a handle to the DOM element via <code>ElementRef</code> by injecting it into
your component's constructor:</p>
<div class="code"><pre class="code literal-block"><span class="n">constructor</span><span class="p">(</span><span class="n">private</span><span class="w"> </span><span class="n">myElement</span><span class="p">:</span><span class="w"> </span><span class="n">ElementRef</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>Docs: https://angular.io/docs/ts/latest/api/core/index/ElementRef-class.html</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-store-node-js-deployment-settings-configuration-files/" class="u-url">How to store Node.js deployment settings/configuration files?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-store-node-js-deployment-settings-configuration-files/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:11:26+08:00" itemprop="datePublished" title="2023-02-17 17:11">2023-02-17 17:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have been working on a few Node apps, and I've been looking for a good
pattern of storing deployment-related settings. In the Django world (where I
come from), the common practise would be to have a <code>settings.py</code> file
containing the standard settings (timezone, etc), and then a
<code>local_settings.py</code> for deployment specific settings, ie. what database to
talk to, what memcache socket, e-mail address for the admins and so on.</p>
<p>I have been looking for similar patterns for Node. Just a config file would be
nice, so it does not have to be jammed in with everything else in <code>app.js</code>,
but I find it important to have a way to have server-specific configuration in
a file that is not in source control. The same app could well be deployed
across different servers with wildly different settings, and having to deal
with merge conflicts and all that is not my idea of fun.</p>
<p>So is there some kind of framework/tool for this, or does everyone just hack
something together themselves?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Much later, I found a pretty good Node.js module for managing configuration:
nconf.</p>
<p>A simple example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">nconf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'nconf'</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">First</span><span class="w"> </span><span class="n">consider</span><span class="w"> </span><span class="n">commandline</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="p">,</span><span class="w"> </span><span class="n">respectively</span><span class="o">.</span>
<span class="n">nconf</span><span class="o">.</span><span class="n">argv</span><span class="p">()</span><span class="o">.</span><span class="n">env</span><span class="p">();</span>

<span class="o">//</span><span class="w"> </span><span class="n">Then</span><span class="w"> </span><span class="nb">load</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">designated</span><span class="w"> </span><span class="n">file</span><span class="o">.</span>
<span class="n">nconf</span><span class="o">.</span><span class="n">file</span><span class="p">({</span><span class="w"> </span><span class="n">file</span><span class="p">:</span><span class="w"> </span><span class="s1">'config.json'</span><span class="w"> </span><span class="p">});</span>

<span class="o">//</span><span class="w"> </span><span class="n">Provide</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">above</span><span class="o">.</span>
<span class="n">nconf</span><span class="o">.</span><span class="n">defaults</span><span class="p">({</span>
<span class="w">    </span><span class="s1">'http'</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s1">'port'</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="o">//</span><span class="w"> </span><span class="n">Once</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">place</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">nconf</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">settings</span><span class="o">.</span>
<span class="o">//</span><span class="w"> </span><span class="n">So</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">configure</span><span class="w"> </span><span class="err">`</span><span class="n">myApp</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">listen</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="mi">1337</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">port</span>
<span class="o">//</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">overridden</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">inputs</span>
<span class="o">//</span><span class="w"> </span><span class="n">mentioned</span><span class="w"> </span><span class="n">above</span><span class="o">.</span>
<span class="n">myApp</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">nconf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'http:port'</span><span class="p">));</span>
</pre></div>

<p>It also supports storing settings in Redis, writing configuration files, and
has a fairly solid API, and is also backed by one of the more well-respected
Node.js shops, Nodejitsu, as part of the Flatiron framework initiative, so it
should be fairly future-proof.</p>
<p>Check out nconf at Github.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can require JSON files as of Node v0.5.x (referencing this answer)</p>
<p>config.json:</p>
<div class="code"><pre class="code literal-block">{
    "username" : "root",
    "password" : "foot"
}
</pre></div>

<p>app.js:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'./config.json'</span><span class="p">);</span>
<span class="n">log_in</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="o">.</span><span class="n">password</span><span class="p">);</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-835.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-833.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
