<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1619) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1619.html">
<link rel="prev" href="index-1620.html" type="text/html">
<link rel="next" href="index-1618.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-instanceof-and-class-isassignablefrom/" class="u-url">What is the difference between instanceof and Class.isAssignableFrom(...)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-instanceof-and-class-isassignablefrom/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:21:08+08:00" itemprop="datePublished" title="2023-03-03 05:21">2023-03-03 05:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Which of the following is better?</p>
<div class="code"><pre class="code literal-block">a instanceof B
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">B.class.isAssignableFrom(a.getClass())
</pre></div>

<p>The only difference that I know of is, when 'a' is null, the first returns
false, while the second throws an exception. Other than that, do they always
give the same result?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>When using <code>instanceof</code>, you need to know the class of <code>B</code> at compile time.
When using <code>isAssignableFrom()</code> it can be dynamic and change during runtime.</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>instanceof</code> can only be used with reference types, not primitive types.
<code>isAssignableFrom()</code> can be used with any class objects:</p>
<div class="code"><pre class="code literal-block">a instanceof int  // syntax error
3 instanceof Foo  // syntax error
int.class.isAssignableFrom(int.class)  // true
</pre></div>

<p>See
http://java.sun.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom(java.lang.Class).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-write-trycatch-in-r/" class="u-url">How to write trycatch in R</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-write-trycatch-in-r/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:20:43+08:00" itemprop="datePublished" title="2023-03-03 05:20">2023-03-03 05:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to write <code>trycatch</code> code to deal with error in downloading from the
web.</p>
<div class="code"><pre class="code literal-block"><span class="n">url</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span>
<span class="w">    </span><span class="s">"http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"http://en.wikipedia.org/wiki/Xz"</span><span class="p">)</span>
<span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">mapply</span><span class="p">(</span><span class="n">readLines</span><span class="p">,</span><span class="w"> </span><span class="n">con</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
</pre></div>

<p>These two statements run successfully. Below, I create a non-exist web
address:</p>
<div class="code"><pre class="code literal-block"><span class="n">url</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">"xxxxx"</span><span class="p">,</span><span class="w"> </span><span class="s">"http://en.wikipedia.org/wiki/Xz"</span><span class="p">)</span>
</pre></div>

<p><code>url[1]</code> does not exist. How does one write a <code>trycatch</code> loop (function) so
that:</p>
<ol>
<li>When the URL is wrong, the output will be: "web URL is wrong, can't get". </li>
<li>When the URL is wrong, the code does not stop, but continues to download until the end of the list of URLs?</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>Well then: welcome to the R world ;-)</p>
<p>Here you go</p>
<h3>Setting up the code</h3>
<div class="code"><pre class="code literal-block"><span class="n">urls</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span>
<span class="w">    </span><span class="s">"http://stat.ethz.ch/R-manual/R-devel/library/base/html/connections.html"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"http://en.wikipedia.org/wiki/Xz"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"xxxxx"</span>
<span class="p">)</span>
<span class="n">readUrl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tryCatch</span><span class="p">(</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="c1"># Just to highlight: if you want to use more than one </span>
<span class="w">            </span><span class="c1"># R expression in the "try" part then you'll have to </span>
<span class="w">            </span><span class="c1"># use curly brackets.</span>
<span class="w">            </span><span class="c1"># 'tryCatch()' will return the last evaluated expression </span>
<span class="w">            </span><span class="c1"># in case the "try" part was completed successfully</span>

<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="s">"This is the 'try' part"</span><span class="p">)</span>

<span class="w">            </span><span class="nf">readLines</span><span class="p">(</span><span class="n">con</span><span class="o">=</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">warn</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span>
<span class="w">            </span><span class="c1"># The return value of `readLines()` is the actual value </span>
<span class="w">            </span><span class="c1"># that will be returned in case there is no condition </span>
<span class="w">            </span><span class="c1"># (e.g. warning or error). </span>
<span class="w">            </span><span class="c1"># You don't need to state the return value via `return()` as code </span>
<span class="w">            </span><span class="c1"># in the "try" part is not wrapped inside a function (unlike that</span>
<span class="w">            </span><span class="c1"># for the condition handlers for warnings and error below)</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">error</span><span class="o">=</span><span class="nf">function</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">"URL does not seem to exist:"</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p">))</span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="s">"Here's the original error message:"</span><span class="p">)</span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span>
<span class="w">            </span><span class="c1"># Choose a return value in case of error</span>
<span class="w">            </span><span class="nf">return</span><span class="p">(</span><span class="kc">NA</span><span class="p">)</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">warning</span><span class="o">=</span><span class="nf">function</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">"URL caused a warning:"</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p">))</span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="s">"Here's the original warning message:"</span><span class="p">)</span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span>
<span class="w">            </span><span class="c1"># Choose a return value in case of warning</span>
<span class="w">            </span><span class="nf">return</span><span class="p">(</span><span class="kc">NULL</span><span class="p">)</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">finally</span><span class="o">=</span><span class="p">{</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1"># Here goes everything that should be executed at the end,</span>
<span class="w">        </span><span class="c1"># regardless of success or error.</span>
<span class="w">        </span><span class="c1"># If you want more than one expression to be executed, then you </span>
<span class="w">        </span><span class="c1"># need to wrap them in curly brackets ({...}); otherwise you could</span>
<span class="w">        </span><span class="c1"># just have written 'finally=&lt;expression&gt;' </span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">"Processed URL:"</span><span class="p">,</span><span class="w"> </span><span class="n">url</span><span class="p">))</span>
<span class="w">            </span><span class="nf">message</span><span class="p">(</span><span class="s">"Some other message at the end"</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span><span class="w">    </span>
<span class="w">    </span><span class="nf">return</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<h3>Applying the code</h3>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">lapply</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span><span class="w"> </span><span class="n">readUrl</span><span class="p">)</span>
<span class="n">Processed</span><span class="w"> </span><span class="n">URL</span><span class="o">:</span><span class="w"> </span><span class="n">http</span><span class="o">://</span><span class="n">stat.ethz.ch</span><span class="o">/</span><span class="n">R</span><span class="o">-</span><span class="n">manual</span><span class="o">/</span><span class="n">R</span><span class="o">-</span><span class="n">devel</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">base</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">connections.html</span>
<span class="n">Some</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span>
<span class="n">Processed</span><span class="w"> </span><span class="n">URL</span><span class="o">:</span><span class="w"> </span><span class="n">http</span><span class="o">://</span><span class="n">en.wikipedia.org</span><span class="o">/</span><span class="n">wiki</span><span class="o">/</span><span class="n">Xz</span>
<span class="n">Some</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span>
<span class="n">URL</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">seem</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">exist</span><span class="o">:</span><span class="w"> </span><span class="n">xxxxx</span>
<span class="n">Here</span><span class="s">'s the original error message:</span>
<span class="s">cannot open the connection</span>
<span class="s">Processed URL: xxxxx</span>
<span class="s">Some other message at the end</span>
<span class="s">Warning message:</span>
<span class="s">In file(con, "r") : cannot open file '</span><span class="n">xxxxx</span><span class="s">'</span><span class="err">: No such file or directory</span>
</pre></div>

<h3>Investigating the output</h3>
<div class="code"><pre class="code literal-block">&gt; head(y[[1]])
[1] "<span class="cp">&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"&gt;</span>"      
[2] "<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;</span><span class="nt">title</span><span class="p">&gt;</span>R: Functions to Manipulate Connections<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>"      
[3] "<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">\"Content-Type\"</span> <span class="na">content</span><span class="o">=</span><span class="s">\"text/html;</span> <span class="na">charset</span><span class="o">=</span><span class="s">utf-8\"</span><span class="p">&gt;</span>"
[4] "<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">\"stylesheet\"</span> <span class="na">type</span><span class="o">=</span><span class="s">\"text/css\"</span> <span class="na">href</span><span class="o">=</span><span class="s">\"R.css\"</span><span class="p">&gt;</span>"             
[5] "<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;&lt;</span><span class="nt">body</span><span class="p">&gt;</span>"                                                          
[6] ""

&gt; length(y)
[1] 3

&gt; y[[3]]
[1] NA
</pre></div>

<h3>Additional remarks</h3>
<p><strong>tryCatch</strong></p>
<p><code>tryCatch</code> returns the value associated to executing <code>expr</code> unless there's an
error or a warning. In this case, specific return values (see <code>return(NA)</code>
above) can be specified by supplying a respective handler function (see
arguments <code>error</code> and <code>warning</code> in <code>?tryCatch</code>). These can be functions that
already exist, but you can also define them within <code>tryCatch()</code> (as I did
above).</p>
<p><strong>The implications of choosing specific return values of the handler
functions</strong></p>
<p>As we've specified that <code>NA</code> should be returned in case of error, the third
element in <code>y</code> is <code>NA</code>. If we'd have chosen <code>NULL</code> to be the return value, the
length of <code>y</code> would just have been <code>2</code> instead of <code>3</code> as <code>lapply()</code> will
simply "ignore" return values that are <code>NULL</code>. Also note that if you don't
specify an <strong>explicit</strong> return value via <code>return()</code>, the handler functions
will return <code>NULL</code> (i.e. in case of an error or a warning condition).</p>
<p><strong>"Undesired" warning message</strong></p>
<p>As <code>warn=FALSE</code> doesn't seem to have any effect, an alternative way to
suppress the warning (which in this case isn't really of interest) is to use</p>
<div class="code"><pre class="code literal-block">suppressWarnings(readLines(con=url))
</pre></div>

<p>instead of</p>
<div class="code"><pre class="code literal-block">readLines(con=url, warn=FALSE)
</pre></div>

<p><strong>Multiple expressions</strong></p>
<p>Note that you can also place multiple expressions in the "actual expressions
part" (argument <code>expr</code> of <code>tryCatch()</code>) if you wrap them in curly brackets
(just like I illustrated in the <code>finally</code> part).</p>
<p><br></p>
<h3>Suggest</h3>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/list-tables-in-a-postgresql-schema/" class="u-url">List tables in a PostgreSQL schema</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/list-tables-in-a-postgresql-schema/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:20:21+08:00" itemprop="datePublished" title="2023-03-03 05:20">2023-03-03 05:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When I do a <code>\dt</code> in psql I only get a listing of tables in the current schema
(<code>public</code> by default).</p>
<p>How can I get a list of all tables in all schemas or a particular schema?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In all schemas:</p>
<div class="code"><pre class="code literal-block">=&gt; \dt *.*
</pre></div>

<p>In a particular schema:</p>
<div class="code"><pre class="code literal-block">=&gt; \dt public.*
</pre></div>

<p>It is possible to use regular expressions with some restrictions</p>
<div class="code"><pre class="code literal-block">\dt (public|s).(s|t)
       List of relations
 Schema | Name | Type  | Owner 
--------+------+-------+-------
 public | s    | table | cpn
 public | t    | table | cpn
 s      | t    | table | cpn
</pre></div>

<blockquote>
<p>Advanced users can use regular-expression notations such as character
classes, for example [0-9] to match any digit. All regular expression
special characters work as specified in Section 9.7.3, except for <code>.</code> which
is taken as a separator as mentioned above, <code>*</code> which is translated to the
regular-expression notation <code>.*</code>, <code>?</code> which is translated to <code>.</code>, and <code>$</code>
which is matched literally. You can emulate these pattern characters at need
by writing <code>?</code> for <code>.</code>, <code>(R+|)</code> for <code>R*</code>, or <code>(R|)</code> for <code>R?</code>. <code>$</code> is not
needed as a regular-expression character since the pattern must match the
whole name, unlike the usual interpretation of regular expressions (in other
words, <code>$</code> is automatically appended to your pattern). Write <code>*</code> at the
beginning and/or end if you don't wish the pattern to be anchored. Note that
within double quotes, all regular expression special characters lose their
special meanings and are matched literally. Also, the regular expression
special characters are matched literally in operator name patterns (i.e.,
the argument of <code>\do</code>).</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>You can select the tables from <code>information_schema</code></p>
<div class="code"><pre class="code literal-block">SELECT * FROM information_schema.tables 
WHERE table_schema = 'public'
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1620.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1618.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
