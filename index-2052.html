<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2052) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2052.html">
<link rel="prev" href="index-2053.html" type="text/html">
<link rel="next" href="index-2051.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/android-java-lang-outofmemoryerror-failed-to-allocate-a-23970828-byte-allocation-with-2097152-free-bytes-and-2mb-until-oom/" class="u-url">Android:java.lang.OutOfMemoryError: Failed to allocate a 23970828 byte allocation with 2097152 free bytes and 2MB until OOM</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/android-java-lang-outofmemoryerror-failed-to-allocate-a-23970828-byte-allocation-with-2097152-free-bytes-and-2mb-until-oom/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:48:05+08:00" itemprop="datePublished" title="2023-03-03 15:48">2023-03-03 15:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to show the <strong>Bitmap</strong> image in <strong>ImageView</strong> from sd card which is
stored already. After run my application is crash and getting
<strong>OutOfMemoryError</strong> error of:</p>
<blockquote>
<p>(java.lang.OutOfMemoryError: Failed to allocate a 23970828 byte allocation
with 2097152 free bytes and 2MB until OOM)</p>
</blockquote>
<p>I have no idea or why its out of memory. I think my image size is very large
so I tried to change it.</p>
<div class="code"><pre class="code literal-block"><span class="nv">Iterator</span><span class="o">&lt;</span><span class="nv">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">imageArray</span>.<span class="nv">iterator</span><span class="ss">()</span><span class="c1">;</span>
<span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="nv">it</span>.<span class="nv">hasNext</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">Object</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">it</span>.<span class="k">next</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">String</span><span class="w"> </span><span class="nv">objElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">element</span>.<span class="nv">toString</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"objElement "</span>,<span class="w"> </span><span class="s2">" = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">objElement</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">final</span><span class="w"> </span><span class="nv">ImageView</span><span class="w"> </span><span class="nv">imageView</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">ImageView</span><span class="w"> </span><span class="ss">(</span><span class="nv">getContext</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">final</span><span class="w"> </span><span class="nv">ProgressBar</span><span class="w"> </span><span class="nv">pBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">ProgressBar</span><span class="ss">(</span><span class="nv">getContext</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">null</span>,<span class="w"> </span>
<span class="w">                                           </span><span class="nv">android</span>.<span class="nv">R</span>.<span class="nv">attr</span>.<span class="nv">progressBarStyleSmall</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">imageView</span>.<span class="nv">setTag</span><span class="ss">(</span><span class="nv">it</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">pBar</span>.<span class="nv">setTag</span><span class="ss">(</span><span class="nv">it</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">  </span><span class="nv">imageView</span>.<span class="nv">setImageResource</span><span class="ss">(</span><span class="nv">R</span>.<span class="nv">drawable</span>.<span class="nv">img_placeholder</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">pBar</span>.<span class="nv">setVisibility</span><span class="ss">(</span><span class="nv">View</span>.<span class="nv">VISIBLE</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">objElement</span>.<span class="nv">endsWith</span><span class="ss">(</span><span class="nv">mp3_Pattern</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"Mp3 "</span>,<span class="w"> </span><span class="s2">" ends with "</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">pBar</span>.<span class="nv">setVisibility</span><span class="ss">(</span><span class="nv">View</span>.<span class="nv">GONE</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">imageView</span>.<span class="nv">setImageResource</span><span class="ss">(</span><span class="nv">R</span>.<span class="nv">drawable</span>.<span class="nv">audio_control</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span>}
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">objElement</span>.<span class="nv">endsWith</span><span class="ss">(</span><span class="nv">png_Pattern</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">     </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">BitmapFactory</span>.<span class="nv">decodeFile</span><span class="ss">(</span><span class="nv">objElement</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">int</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Math</span>.<span class="nv">min</span><span class="ss">(</span><span class="nv">bitmap</span>.<span class="nv">getWidth</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">bitmap</span>.<span class="nv">getHeight</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">int</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="nv">bitmap</span>.<span class="nv">getWidth</span><span class="ss">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">size</span><span class="ss">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">int</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="nv">bitmap</span>.<span class="nv">getHeight</span><span class="ss">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">size</span><span class="ss">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">bitmap_Resul</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Bitmap</span>.<span class="nv">createBitmap</span><span class="ss">(</span><span class="nv">bitmap</span>,<span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">y</span>,<span class="w"> </span><span class="nv">size</span>,<span class="w"> </span><span class="nv">size</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"bitmap_Resul "</span>,<span class="s2">" = "</span><span class="o">+</span><span class="w"> </span><span class="nv">bitmap_Resul</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">bitmap_Resul</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">bitmap</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">bitmap</span>.<span class="nv">recycle</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">     </span>}
<span class="w">     </span><span class="nv">imageView</span>.<span class="nv">setImageBitmap</span><span class="ss">(</span><span class="nv">bitmap_Resul</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"png_Pattern "</span>,<span class="w"> </span><span class="s2">" ends with "</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">" bitmap "</span>,<span class="s2">" = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">bitmap</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span>}

<span class="w">  </span><span class="nv">holder</span>.<span class="nv">linearLayout</span>.<span class="nv">addView</span><span class="ss">(</span><span class="nv">imageView</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">holder</span>.<span class="nv">linearLayout</span>.<span class="nv">addView</span><span class="ss">(</span><span class="nv">pBar</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>The log cat information:</p>
<div class="code"><pre class="code literal-block"><span class="mf">08</span><span class="o">-</span><span class="mf">27</span><span class="w"> </span><span class="mf">14</span><span class="p">:</span><span class="mf">11</span><span class="p">:</span><span class="mf">15.307</span><span class="w">    </span><span class="mf">1857</span><span class="o">-</span><span class="mf">1857</span><span class="o">/</span><span class="err">?</span><span class="w"> </span><span class="n">E</span><span class="o">/</span><span class="ow">And</span><span class="n">roidRuntime</span><span class="err">﹕</span><span class="w"> </span><span class="n">FATAL</span><span class="w"> </span><span class="n">EXCEPTION</span><span class="p">:</span><span class="w"> </span><span class="n">main</span>
<span class="w">    </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="n">example</span><span class="mf">.</span><span class="n">tazeen</span><span class="mf">.</span><span class="n">classnkk</span><span class="p">,</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mf">1857</span>
<span class="w">    </span><span class="n">java</span><span class="mf">.</span><span class="n">lang</span><span class="mf">.</span><span class="n">OutOfMemoryError</span><span class="p">:</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">allocate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mf">23970828</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="mf">2097152</span><span class="w"> </span><span class="nb">fre</span><span class="n">e</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mf">2</span><span class="n">MB</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">OOM</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">dalvik</span><span class="mf">.</span><span class="kr">sys</span><span class="n">tem</span><span class="mf">.</span><span class="n">VMRuntime</span><span class="mf">.</span><span class="kr">new</span><span class="n">NonMovableArray</span><span class="p">(</span><span class="n">Native</span><span class="w"> </span><span class="n">Method</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">nativeCreate</span><span class="p">(</span><span class="n">Native</span><span class="w"> </span><span class="n">Method</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">812</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">789</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">709</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">634</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="n">example</span><span class="mf">.</span><span class="n">tazeen</span><span class="mf">.</span><span class="n">classnkk</span><span class="mf">.</span><span class="n">AllPosts_Page$MyListAdapter</span><span class="mf">.</span><span class="kr">get</span><span class="n">View</span><span class="p">(</span><span class="n">AllPosts_Page</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">357</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">obtainView</span><span class="p">(</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">2347</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">makeAndAddView</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1864</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">fillDown</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">698</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">fillFromTop</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">759</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">layoutChildren</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1659</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">2151</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">setChildFrame</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1703</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">layoutVertical</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1557</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1466</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">layoutChildren</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">579</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">514</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">setChildFrame</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1703</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">layoutVertical</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1557</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1466</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">layoutChildren</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">579</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">514</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">performLayout</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">2086</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">performTraversals</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1843</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">doTraversal</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1061</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl$TraversalRunnable</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5885</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer$CallbackRecord</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">767</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">doCallbacks</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">580</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">doFrame</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">550</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer$FrameDisplayEventReceiver</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">753</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">Handler</span><span class="mf">.</span><span class="n">handleCallback</span><span class="p">(</span><span class="n">Handler</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">739</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">Handler</span><span class="mf">.</span><span class="n">dispatchMessage</span><span class="p">(</span><span class="n">Handler</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">95</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">Looper</span><span class="mf">.</span><span class="n">loop</span><span class="p">(</span><span class="n">Looper</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">135</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">app</span><span class="mf">.</span><span class="n">ActivityThread</span><span class="mf">.</span><span class="n">main</span><span class="p">(</span><span class="n">ActivityThread</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5257</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">java</span><span class="mf">.</span><span class="n">lang</span><span class="mf">.</span><span class="n">reflect</span><span class="mf">.</span><span class="n">Method</span><span class="mf">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Native</span><span class="w"> </span><span class="n">Method</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">java</span><span class="mf">.</span><span class="n">lang</span><span class="mf">.</span><span class="n">reflect</span><span class="mf">.</span><span class="n">Method</span><span class="mf">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Method</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">372</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="nb">int</span><span class="n">ernal</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">ZygoteInit$MethodAndArgsCaller</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">ZygoteInit</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">903</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="nb">int</span><span class="n">ernal</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">ZygoteInit</span><span class="mf">.</span><span class="n">main</span><span class="p">(</span><span class="n">ZygoteInit</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">698</span><span class="p">)</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>OutOfMemoryError</strong> is the most common problem that occurs in android while
especially dealing with bitmaps. This error is thrown by the Java Virtual
Machine (JVM) when an object cannot be allocated due to lack of memory space
and also, the garbage collector cannot free some space.</p>
<p>As mentioned by Aleksey, you can add the below entities in your manifest file
<code>android:hardwareAccelerated="false"</code> , <code>android:largeHeap="true"</code> it will
work for some environments.</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">application</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">allowBackup</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">hardwareAccelerated</span><span class="o">=</span><span class="ss">"false"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">icon</span><span class="o">=</span><span class="ss">"@mipmap/ic_launcher"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="ss">"@string/app_name"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">largeHeap</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">supportsRtl</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">theme</span><span class="o">=</span><span class="ss">"@style/AppTheme"</span><span class="o">&gt;</span>
</pre></div>

<p>you should definitely read some of Androids Developer concept's, especially
here:Displaying Bitmaps Efficiently</p>
<p>Read all 5 topics and rewrite your code again. If it still doesn't work we
will be happy to see what you've done wrong with the tutorial material.</p>
<p>Here some of the possible answers for these type of errors in SOF</p>
<p>Android: BitmapFactory.decodeStream() out of memory with a 400KB file with 2MB
free heap</p>
<p>How to solve java.lang.OutOfMemoryError trouble in Android</p>
<p>Android : java.lang.OutOfMemoryError</p>
<p>java.lang.OutOfMemoryError</p>
<p>Solution for OutOfMemoryError: bitmap size exceeds VM budget</p>
<p>Edit: From the comments of @cjnash</p>
<p>For anyone that still had crashes after they added this line, try sticking
your image into your res/drawable-xhdpi/ folder instead of your res/drawable/
and this should resolve this issue</p>
<p><br></p>
<h3>Suggest</h3>
<p>have you tried adding this to your manifest under applications?
<code>android:largeHeap="true"</code>?</p>
<p><strong>like this</strong></p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="o">&lt;</span><span class="n">application</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="ss">".ParaseApplication"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">allowBackup</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">icon</span><span class="o">=</span><span class="ss">"@mipmap/ic_launcher"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="ss">"@string/app_name"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">theme</span><span class="o">=</span><span class="ss">"@style/AppTheme"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">largeHeap</span><span class="o">=</span><span class="ss">"true"</span><span class="w"> </span><span class="o">&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/execute-command-on-all-files-in-a-directory/" class="u-url">Execute command on all files in a directory</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/execute-command-on-all-files-in-a-directory/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:47:38+08:00" itemprop="datePublished" title="2023-03-03 15:47">2023-03-03 15:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Could somebody please provide the code to do the following: Assume there is a
directory of files, all of which need to be run through a program. The program
outputs the results to standard out. I need a script that will go into a
directory, execute the command on each file, and concat the output into one
big output file.</p>
<p>For instance, to run the command on 1 file:</p>
<div class="code"><pre class="code literal-block"><span class="err">$</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="o">[</span><span class="n">option</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">filename</span><span class="o">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">results</span><span class="p">.</span><span class="k">out</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The following bash code will pass $file to command where $file will represent
every file in /dir</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">dir</span><span class="cm">/*</span>
<span class="cm">do</span>
<span class="cm">  cmd [option] "$file" &gt;&gt; results.out</span>
<span class="cm">done</span>
</pre></div>

<p>Example</p>
<div class="code"><pre class="code literal-block"><span class="n">el</span><span class="nv">@defiant</span><span class="w"> </span><span class="o">~/</span><span class="n">foo</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">baz</span><span class="p">.</span><span class="n">txt</span>
<span class="n">el</span><span class="nv">@defiant</span><span class="w"> </span><span class="o">~/</span><span class="n">foo</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="n">txt</span><span class="p">;</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ss">"hello $i"</span><span class="p">;</span><span class="w"> </span><span class="n">done</span>
<span class="n">hello</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">txt</span>
<span class="n">hello</span><span class="w"> </span><span class="n">baz</span><span class="p">.</span><span class="n">txt</span>
<span class="n">hello</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">txt</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>How about this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">find</span><span class="w"> </span><span class="o">/</span><span class="nv">some</span><span class="o">/</span><span class="nv">directory</span><span class="w"> </span><span class="o">-</span><span class="nv">maxdepth</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="nv">type</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">-</span><span class="k">exec</span><span class="w"> </span><span class="nv">cmd</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span>{}<span class="w"> </span>\<span class="c1">; &gt; results.out</span>
</pre></div>

<ul>
<li>
<code>-maxdepth 1</code> argument prevents find from recursively descending into any subdirectories. (If you want such nested directories to get processed, you can omit this.)</li>
<li>
<code>-type -f</code> specifies that only plain files will be processed.</li>
<li>
<code>-exec cmd option {}</code> tells it to run <code>cmd</code> with the specified <code>option</code> for each file found, with the filename substituted for <code>{}</code>
</li>
<li>
<code>\;</code> denotes the end of the command.</li>
<li>Finally, the output from all the individual <code>cmd</code> executions is redirected to <code>results.out</code>
</li>
</ul>
<p>However, if you care about the order in which the files are processed, you
might be better off writing a loop. I think <code>find</code> processes the files in
inode order (though I could be wrong about that), which may not be what you
want.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/node-js-throws-btoa-is-not-defined-error/" class="u-url">Node.js throws "btoa is not defined" error</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/node-js-throws-btoa-is-not-defined-error/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:47:06+08:00" itemprop="datePublished" title="2023-03-03 15:47">2023-03-03 15:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In my node.js application I did an <code>npm install btoa-atob</code> so that I could use
the <code>btoa()</code> and <code>atob()</code> functions which are native in client-side javascript
but for some reason weren't included in node. The new directory showed up in
my <code>node_modules</code> folder, which itself is in root alongside <code>app.js</code>. Then I
made sure to add btoa-atob as a dependency in my <code>package.json</code> file which is
in root.</p>
<p>However, for some reason, it still will not work.</p>
<div class="code"><pre class="code literal-block">console.log(btoa("Hello World!"));
</pre></div>

<p>^ should output " <strong>SGVsbG8gV29ybGQh</strong> " to the console, but instead, I get
the error:</p>
<blockquote>
<p>btoa is not defined.</p>
</blockquote>
<p>Did I not do the install properly? What did I overlook?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The 'btoa-atob' module does not export a programmatic interface, it only
provides command line utilities.</p>
<p>If you need to convert to Base64 you could do so using Buffer:</p>
<div class="code"><pre class="code literal-block">console.log(Buffer.from('Hello World!').toString('base64'));
</pre></div>

<p>Reverse (assuming the content you're decoding is a utf8 string):</p>
<div class="code"><pre class="code literal-block">console.log(Buffer.from(b64Encoded, 'base64').toString());
</pre></div>

<hr>
<p>Note: prior to Node v4, use <code>new Buffer</code> rather than <code>Buffer.from</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The solutions posted here don't work in non-ascii characters (i.e. if you plan
to exchange base64 between Node.js and a browser). In order to make it work
you have to mark the input text as 'binary'.</p>
<div class="code"><pre class="code literal-block">Buffer.from('Hélló wórld!!', 'binary').toString('base64')
</pre></div>

<p>This gives you <code>SOlsbPMgd/NybGQhIQ==</code>. If you make
<code>atob('SOlsbPMgd/NybGQhIQ==')</code> in a browser it will decode it in the right
way. It will do it right also in Node.js via:</p>
<div class="code"><pre class="code literal-block">Buffer.from('SOlsbPMgd/NybGQhIQ==', 'base64').toString('binary')
</pre></div>

<p>If you don't do the "binary part", you will decode wrongly the special chars.</p>
<p>I got it from the implementation of the btoa npm package:</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2053.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2051.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
