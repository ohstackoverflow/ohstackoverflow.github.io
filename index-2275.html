<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2275) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2275.html">
<link rel="prev" href="index-2276.html" type="text/html">
<link rel="next" href="index-2274.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-t-operator-be-applied-to-generic-types-in-c/" class="u-url">Can't operator == be applied to generic types in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-t-operator-be-applied-to-generic-types-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T04:05:33+08:00" itemprop="datePublished" title="2023-03-04 04:05">2023-03-04 04:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>According to the documentation of the <code>==</code> operator in MSDN,</p>
<blockquote>
<p>For predefined value types, the equality operator (==) returns true if the
values of its operands are equal, false otherwise. For reference types other
than string, == returns true if its two operands refer to the same object.
For the string type, == compares the values of the strings. User-defined
value types can overload the == operator (see operator). So can user-defined
reference types, although <strong>by default == behaves as described above for
both predefined and user-defined reference types.</strong></p>
</blockquote>
<p>So why does this code snippet fail to compile?</p>
<div class="code"><pre class="code literal-block"><span class="nv">bool</span><span class="w"> </span><span class="nv">Compare</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="ss">(</span><span class="nv">T</span><span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">y</span><span class="ss">)</span><span class="w"> </span>{<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">y</span><span class="c1">; }</span>
</pre></div>

<p>I get the error <em>Operator '==' cannot be applied to operands of type 'T' and
'T'</em>. I wonder why, since as far as I understand the <code>==</code> operator is
predefined for all types?</p>
<p><strong>Edit:</strong> Thanks, everybody. I didn't notice at first that the statement was
about reference types only. I also thought that bit-by-bit comparison is
provided for all value types, which I now know is <em>not</em> correct.</p>
<p>But, in case I'm using a reference type, would the <code>==</code> operator use the
predefined reference comparison, or would it use the overloaded version of the
operator if a type defined one?</p>
<p><strong>Edit 2:</strong> Through trial and error, we learned that the <code>==</code> operator will
use the predefined reference comparison when using an unrestricted generic
type. Actually, the compiler will use the best method it can find for the
restricted type argument, but will look no further. For example, the code
below will always print <code>true</code>, even when <code>Test.test&lt;B&gt;(new B(), new B())</code> is
called:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">A</span> { <span class="n">public</span> <span class="n">static</span> <span class="n">bool</span> <span class="n">operator</span>==(<span class="n">A</span> <span class="nb">x</span>, <span class="n">A</span> <span class="n">y</span>) { <span class="k">return</span> <span class="n">true</span>; } }
<span class="k">class</span> <span class="n">B</span> : <span class="n">A</span> { <span class="n">public</span> <span class="n">static</span> <span class="n">bool</span> <span class="n">operator</span>==(<span class="n">B</span> <span class="nb">x</span>, <span class="n">B</span> <span class="n">y</span>) { <span class="k">return</span> <span class="n">false</span>; } }
<span class="k">class</span> <span class="n">Test</span> { <span class="n">void</span> <span class="n">test</span><span class="o">&lt;</span><span class="n">T</span>&gt;(<span class="n">T</span> <span class="n">a</span>, <span class="n">T</span> <span class="n">b</span>) <span class="n">where</span> <span class="n">T</span> : <span class="n">A</span> { <span class="n">Console</span>.<span class="n">WriteLine</span>(<span class="n">a</span> == <span class="n">b</span>); } }
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>"...by default == behaves as described above for both predefined and user-
defined reference types."</p>
<p>Type T is not necessarily a reference type, so the compiler can't make that
assumption.</p>
<p>However, this will compile because it is more explicit:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">bool</span><span class="w"> </span><span class="nv">Compare</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="ss">(</span><span class="nv">T</span><span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">y</span><span class="ss">)</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>:<span class="w"> </span><span class="nv">class</span>
<span class="w">    </span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">y</span><span class="c1">;</span>
<span class="w">    </span>}
</pre></div>

<p><strong>Follow up to additional question, "But, in case I'm using a reference type,
would the the == operator use the predefined reference comparison, or would it
use the overloaded version of the operator if a type defined one?"</strong></p>
<p>I would have thought that == on the Generics would use the overloaded version,
but the following test demonstrates otherwise. Interesting... I'd love to know
why! If someone knows please share.</p>
<div class="code"><pre class="code literal-block"><span class="n">namespace</span><span class="w"> </span><span class="n">TestProject</span>
<span class="p">{</span>
<span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Program</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">Main</span><span class="p">(</span><span class="n">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Test</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Test</span><span class="p">();</span>
<span class="w">        </span><span class="n">Test</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Test</span><span class="p">();</span>

<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Inline:"</span><span class="p">);</span>
<span class="w">        </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Generic:"</span><span class="p">);</span>
<span class="w">        </span><span class="n">Compare</span><span class="o">&lt;</span><span class="n">Test</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>

<span class="w">    </span><span class="p">}</span>


<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">Compare</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">class</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Test</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">==</span><span class="p">(</span><span class="n">Test</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Overloaded == called"</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">!=</span><span class="p">(</span><span class="n">Test</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Overloaded != called"</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Output</strong></p>
<p>Inline: Overloaded == called</p>
<p>Generic:</p>
<p>Press any key to continue . . .</p>
<p><strong>Follow Up 2</strong></p>
<p>I do want to point out that changing my compare method to</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">static</span><span class="w"> </span><span class="nv">bool</span><span class="w"> </span><span class="nv">Compare</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="ss">(</span><span class="nv">T</span><span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">y</span><span class="ss">)</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>:<span class="w"> </span><span class="nv">Test</span>
<span class="w">    </span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">y</span><span class="c1">;</span>
<span class="w">    </span>}
</pre></div>

<p>causes the overloaded == operator to be called. I guess without specifying the
type (as a <em>where</em> ), the compiler can't infer that it should use the
overloaded operator... though I'd think that it would have enough information
to make that decision even without specifying the type.</p>
<p><br></p>
<h3>Suggest</h3>
<p>"...by default == behaves as described above for both predefined and user-
defined reference types."</p>
<p>Type T is not necessarily a reference type, so the compiler can't make that
assumption.</p>
<p>However, this will compile because it is more explicit:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">bool</span><span class="w"> </span><span class="nv">Compare</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="ss">(</span><span class="nv">T</span><span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">y</span><span class="ss">)</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>:<span class="w"> </span><span class="nv">class</span>
<span class="w">    </span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">y</span><span class="c1">;</span>
<span class="w">    </span>}
</pre></div>

<p><strong>Follow up to additional question, "But, in case I'm using a reference type,
would the the == operator use the predefined reference comparison, or would it
use the overloaded version of the operator if a type defined one?"</strong></p>
<p>I would have thought that == on the Generics would use the overloaded version,
but the following test demonstrates otherwise. Interesting... I'd love to know
why! If someone knows please share.</p>
<div class="code"><pre class="code literal-block"><span class="n">namespace</span><span class="w"> </span><span class="n">TestProject</span>
<span class="p">{</span>
<span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Program</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">Main</span><span class="p">(</span><span class="n">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Test</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Test</span><span class="p">();</span>
<span class="w">        </span><span class="n">Test</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Test</span><span class="p">();</span>

<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Inline:"</span><span class="p">);</span>
<span class="w">        </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Generic:"</span><span class="p">);</span>
<span class="w">        </span><span class="n">Compare</span><span class="o">&lt;</span><span class="n">Test</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>

<span class="w">    </span><span class="p">}</span>


<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">Compare</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="k">class</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Test</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">==</span><span class="p">(</span><span class="n">Test</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Overloaded == called"</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">bool</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">!=</span><span class="p">(</span><span class="n">Test</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s2">"Overloaded != called"</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Output</strong></p>
<p>Inline: Overloaded == called</p>
<p>Generic:</p>
<p>Press any key to continue . . .</p>
<p><strong>Follow Up 2</strong></p>
<p>I do want to point out that changing my compare method to</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="nv">static</span><span class="w"> </span><span class="nv">bool</span><span class="w"> </span><span class="nv">Compare</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="ss">(</span><span class="nv">T</span><span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">y</span><span class="ss">)</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>:<span class="w"> </span><span class="nv">Test</span>
<span class="w">    </span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">y</span><span class="c1">;</span>
<span class="w">    </span>}
</pre></div>

<p>causes the overloaded == operator to be called. I guess without specifying the
type (as a <em>where</em> ), the compiler can't infer that it should use the
overloaded operator... though I'd think that it would have enough information
to make that decision even without specifying the type.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-represent-multiple-conditions-in-a-shell-if-statement/" class="u-url">How to represent multiple conditions in a shell if statement?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-represent-multiple-conditions-in-a-shell-if-statement/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T04:04:14+08:00" itemprop="datePublished" title="2023-03-04 04:04">2023-03-04 04:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to represent multiple conditions like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="ss">(</span><span class="w"> </span>$<span class="nv">g</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="nv">a</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"123"</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="o">-</span><span class="nv">o</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span>$<span class="nv">g</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="nv">a</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"456"</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>]<span class="w">   </span>
<span class="k">then</span><span class="w">  </span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="nv">abc</span><span class="c1">;  </span>
<span class="k">else</span><span class="w">  </span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="nv">efg</span><span class="c1">;   </span>
<span class="nv">fi</span>
</pre></div>

<p>but when I execute the script, it shows</p>
<div class="code"><pre class="code literal-block">syntax error at line 15: `[' unexpected,
</pre></div>

<p>where line 15 is the one showing if ....</p>
<p>What is wrong with this condition? I guess something is wrong with the <code>()</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Classic technique (escape metacharacters):</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span>\<span class="ss">(</span><span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="nv">a</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"123"</span><span class="w"> </span>\<span class="ss">)</span><span class="w"> </span><span class="o">-</span><span class="nv">o</span><span class="w"> </span>\<span class="ss">(</span><span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="nv">a</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"456"</span><span class="w"> </span>\<span class="ss">)</span><span class="w"> </span>]
<span class="k">then</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="nv">abc</span>
<span class="k">else</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="nv">efg</span>
<span class="nv">fi</span>
</pre></div>

<p>I've enclosed the references to <code>$g</code> in double quotes; that's good practice,
in general. Strictly, the parentheses aren't needed because the precedence of
<code>-a</code> and <code>-o</code> makes it correct even without them.</p>
<p>Note that the <code>-a</code> and <code>-o</code> operators are part of the POSIX specification for
<code>test</code>, aka <code>[</code>, mainly for backwards compatibility (since they were a part of
<code>test</code> in 7th Edition UNIX, for example), but they are explicitly marked as
'obsolescent' by POSIX. Bash (see conditional expressions) seems to preempt
the classic and POSIX meanings for <code>-a</code> and <code>-o</code> with its own alternative
operators that take arguments.</p>
<hr>
<p>With some care, you can use the more modern <code>[[</code> operator, but be aware that
the versions in Bash and Korn Shell (for example) need not be identical.</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="nv">g</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="k">do</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="mi">456</span><span class="w"> </span><span class="mi">789</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span>[[<span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"123"</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"456"</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>]]
<span class="w">        </span><span class="k">then</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"g = $g; c = $c; true"</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"g = $g; c = $c; false"</span>
<span class="w">        </span><span class="nv">fi</span>
<span class="w">    </span><span class="nv">done</span>
<span class="nv">done</span>
</pre></div>

<p>Example run, using Bash 3.2.57 on Mac OS X:</p>
<div class="code"><pre class="code literal-block">g = 1; c = 123; true
g = 1; c = 456; false
g = 1; c = 789; false
g = 2; c = 123; false
g = 2; c = 456; true
g = 2; c = 789; false
g = 3; c = 123; false
g = 3; c = 456; false
g = 3; c = 789; false
</pre></div>

<p>You don't need to quote the variables in <code>[[</code> as you do with <code>[</code> because it is
not a separate command in the same way that <code>[</code> is.</p>
<hr>
<blockquote>
<p>Isn't it a classic question?</p>
</blockquote>
<p>I would have thought so. However, there is another alternative, namely:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="nv">a</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"123"</span><span class="w"> </span>]<span class="w"> </span><span class="o">||</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="nv">a</span><span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"456"</span><span class="w"> </span>]
<span class="k">then</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="nv">abc</span>
<span class="k">else</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="nv">efg</span>
<span class="nv">fi</span>
</pre></div>

<p>Indeed, if you read the 'portable shell' guidelines for the <code>autoconf</code> tool or
related packages, this notation — using '<code>||</code>' and '<code>&amp;&amp;</code>' — is what they
recommend. I suppose you could even go so far as:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>]<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"123"</span><span class="w"> </span>]
<span class="k">then</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="nv">abc</span>
<span class="nv">elif</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$g"</span><span class="w"> </span><span class="o">-</span><span class="nv">eq</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span>]<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$c"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"456"</span><span class="w"> </span>]
<span class="k">then</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="nv">abc</span>
<span class="k">else</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="nv">efg</span>
<span class="nv">fi</span>
</pre></div>

<p>Where the actions are as trivial as echoing, this isn't bad. When the action
block to be repeated is multiple lines, the repetition is too painful and one
of the earlier versions is preferable — or you need to wrap the actions into a
function that is invoked in the different <code>then</code> blocks.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In Bash:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[[<span class="w"> </span><span class="ss">(</span><span class="w"> </span>$<span class="nv">g</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mh">$c</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span>$<span class="nv">g</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="mh">$c</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">456</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>]]
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/installed-java-7-on-mac-os-x-but-terminal-is-still-using-version-6/" class="u-url">Installed Java 7 on Mac OS X but Terminal is still using version 6</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/installed-java-7-on-mac-os-x-but-terminal-is-still-using-version-6/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T04:02:40+08:00" itemprop="datePublished" title="2023-03-04 04:02">2023-03-04 04:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've installed JDK 7u7 downloaded from oracle's website. But after
installation, the terminal is still showing java version 6</p>
<div class="code"><pre class="code literal-block">$java -version
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-11M3811)
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01-428, mixed mode)
</pre></div>

<p>any idea why java 7 is not showing up?</p>
<p><strong>Ans: OK, the problem has been resolved. Here is the answer: I found that my
Terminal has a .bash_profile and the java home variable is set to 1.6</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">JAVA_HOME</span><span class="o">=</span><span class="s2">"/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home"</span>
</pre></div>

<p>So this is the line causing the problem every time I opened a new terminal
window. Simply remove this line will solve the problem. You still need to
follow what @aleroot said, but if that doesn't work for you, check the
.bash_profile (or .bashrc) setting file to see if you've previously exported
any java version.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Because you need to enter in Java Preferences pane and flag only the JVM 7 in
this way :</p>
<p><img alt="Java Preferences" src="images/UeSQB.png"></p>
<p>To easily and quickly open the <strong>Java Preferences</strong> pane in Mac OS X you can
simply call spotlight with <code>⌘</code> <strong>+</strong><code>SPACE</code> and type <em>System Preferences</em> it
will show up in the last row of the window.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Install the <strong>JDK 7</strong> and this problem will solve itself.</p>
<p>Be sure to get the Java Development Kit (JDK) which includes compilers and
stuff like that, rather than just the Java Runtime Environment (JRE) .</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2276.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2274.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
