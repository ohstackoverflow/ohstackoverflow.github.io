<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2030) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2030.html">
<link rel="prev" href="index-2031.html" type="text/html">
<link rel="next" href="index-2029.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-do-i-get-attributeerror-nonetype-object-has-no-attribute-something/" class="u-url">Why do I get AttributeError: 'NoneType' object has no attribute 'something'?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-do-i-get-attributeerror-nonetype-object-has-no-attribute-something/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:14:44+08:00" itemprop="datePublished" title="2023-03-03 15:14">2023-03-03 15:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I keep getting an error that says</p>
<div class="code"><pre class="code literal-block">AttributeError: 'NoneType' object has no attribute 'something'
</pre></div>

<p>The code I have is too long to post here. What general scenarios would cause
this <code>AttributeError</code>, what is <code>NoneType</code> supposed to mean and how can I
narrow down what's going on?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>NoneType means that instead of an instance of whatever Class or Object you
think you're working with, you've actually got <code>None</code>. That usually means that
an assignment or function call up above failed or returned an unexpected
result.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You have a variable that is equal to None and you're attempting to access an
attribute of it called 'something'.</p>
<div class="code"><pre class="code literal-block">foo = None
foo.something = 1
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">foo = None
print(foo.something)
</pre></div>

<p>Both will yield an <code>AttributeError: 'NoneType'</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/tar-a-directory-but-don-t-store-full-absolute-paths-in-the-archive/" class="u-url">Tar a directory, but don't store full absolute paths in the archive</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/tar-a-directory-but-don-t-store-full-absolute-paths-in-the-archive/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:14:20+08:00" itemprop="datePublished" title="2023-03-03 15:14">2023-03-03 15:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have the following command in the part of a backup shell script:</p>
<div class="code"><pre class="code literal-block"><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">cjf</span><span class="w"> </span><span class="n">site1</span><span class="o">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span>
</pre></div>

<p>When I list the contents of the archive, I get:</p>
<div class="code"><pre class="code literal-block"><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">tf</span><span class="w"> </span><span class="n">site1</span><span class="o">.</span><span class="n">bz2</span>
<span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="n">style</span><span class="o">.</span><span class="n">css</span>
<span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
<span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="n">page2</span><span class="o">.</span><span class="n">html</span>
<span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="n">page3</span><span class="o">.</span><span class="n">html</span>
<span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">img1</span><span class="o">.</span><span class="n">png</span>
<span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">img2</span><span class="o">.</span><span class="n">png</span>
<span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">html</span>
</pre></div>

<p>But I would like to remove the part <code>/var/www/site1</code> from directory and file
names within the archive, in order to simplify extraction and avoid useless
constant directory structure. Never know, in case I would extract backuped
websites in a place where web data weren't stored under <code>/var/www</code>.</p>
<p>For the example above, I would like to have :</p>
<div class="code"><pre class="code literal-block">tar -tf site1.bz2
style.css
index.html
page2.html
page3.html
images/img1.png
images/img2.png
subdir/index.html
</pre></div>

<p>So, that when I extract, files are extracted in the current directory and I
don't need to move extracted files afterwards, and so that sub-directory
structures is preserved.</p>
<p>There are already many questions about tar and backuping in <code>stackoverflow</code>
and at other places on the web, but most of them ask for dropping the entire
sub-directory structure (flattening), or just add or remove the initial / in
the names (I don't know what it changes exactly when extracting), but no more.</p>
<p>After having read some of the solutions found here and there as well as the
manual, I tried :</p>
<div class="code"><pre class="code literal-block"><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">cjf</span><span class="w"> </span><span class="n">site1</span><span class="o">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span>
<span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">cjf</span><span class="w"> </span><span class="n">site1</span><span class="o">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span>
<span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">cjf</span><span class="w"> </span><span class="n">site1</span><span class="o">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span>
<span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">cjf</span><span class="w"> </span><span class="n">site1</span><span class="o">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">--</span><span class="n">strip</span><span class="o">-</span><span class="n">components</span><span class="o">=</span><span class="mi">3</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="o">/</span>
</pre></div>

<p>But none of them worked the way I want. Some do nothing, some others don't
archive sub-directories anymore.</p>
<p>It's inside a backup shell script launched by a Cron, so I don't know well,
which user runs it, what is the path and the current directory, so always
writing absolute path is required for everything, and would prefer not
changing current directory to avoid breaking something further in the script
(because it doesn't only backup websites, but also databases, then send all
that to FTP etc.)</p>
<p>How to achieve this?</p>
<p>Have I just misunderstood how the option -C works?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">cjf</span><span class="w"> </span><span class="n">site1</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">bz2</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">site1</span><span class="w"> </span><span class="o">.</span>
</pre></div>

<p>In the above example, tar will change to directory <code>/var/www/site1</code> before
doing its thing because the option <code>-C /var/www/site1</code> was given.</p>
<p>From <code>man tar</code>:</p>
<div class="code"><pre class="code literal-block">OTHER OPTIONS

  -C, --directory DIR
       change to directory DIR
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The option <code>-C</code> works; just for clarification I'll post 2 examples:</p>
<ol>
<li>creation of a tarball without the full path: full path <code>/home/testuser/workspace/project/application.war</code> and what we want is just <code>project/application.war</code> so:<div class="code"><pre class="code literal-block">tar -cvf output_filename.tar  -C /home/testuser/workspace project
</pre></div>

</li>
</ol>
<p>Note: there is a space between <code>workspace</code> and <code>project</code>; tar will replace
full path with just <code>project</code> .</p>
<ol>
<li>extraction of tarball with changing the target path (default to <code>.</code>, i.e current directory)<div class="code"><pre class="code literal-block">tar -xvf output_filename.tar -C /home/deploy/
</pre></div>

</li>
</ol>
<p><code>tar</code> will extract tarball based on given path and preserving the creation
path; in our example the file <code>application.war</code> will be extracted to
<code>/home/deploy/project/application.war</code>.</p>
<p><code>/home/deploy</code>: given on extract<br><code>project</code>: given on creation of tarball</p>
<p>Note : if you want to place the created tarball in a target directory, you
just add the target path before tarball name. e.g.:</p>
<div class="code"><pre class="code literal-block">tar -cvf /path/to/place/output_filename.tar  -C /home/testuser/workspace project
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-include-a-yaml-file-inside-another/" class="u-url">How can I include a YAML file inside another?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-include-a-yaml-file-inside-another/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:13:54+08:00" itemprop="datePublished" title="2023-03-03 15:13">2023-03-03 15:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>So I have two YAML files, "A" and "B" and I want the contents of A to be
inserted inside B, either spliced into the existing data structure, like an
array, or as a child of an element, like the value for a certain hash key.</p>
<p>Is this possible at all? How? If not, any pointers to a normative reference?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>No, standard YAML does not include any kind of "import" or "include"
statement.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Your question does not ask for a Python solution, but here is one using
PyYAML.</p>
<p>PyYAML allows you to attach custom constructors (such as <code>!include</code>) to the
YAML loader. I've included a root directory that can be set so that this
solution supports relative and absolute file references.</p>
<h2>Class-Based Solution</h2>
<p>Here is a class-based solution, that avoids the global root variable of my
original response.</p>
<p>See this gist for a similar, more robust Python 3 solution that uses a
metaclass to register the custom constructor.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">class</span> <span class="nc">Loader</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">SafeLoader</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">Loader</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">include</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">Loader</span><span class="p">)</span>

<span class="n">Loader</span><span class="o">.</span><span class="n">add_constructor</span><span class="p">(</span><span class="s1">'!include'</span><span class="p">,</span> <span class="n">Loader</span><span class="o">.</span><span class="n">include</span><span class="p">)</span>
</pre></div>

<p>An example:</p>
<p><strong><code>foo.yaml</code></strong></p>
<div class="code"><pre class="code literal-block"><span class="n">a</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="n">b</span><span class="o">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="mf">1.43</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="mf">543.55</span>
<span class="n">c</span><span class="o">:</span><span class="w"> </span><span class="o">!</span><span class="k">include</span><span class="w"> </span><span class="n">bar</span><span class="o">.</span><span class="na">yaml</span>
</pre></div>

<p><strong><code>bar.yaml</code></strong></p>
<div class="code"><pre class="code literal-block">- 3.6
- [1, 2, 3]
</pre></div>

<p>Now the files can be loaded using:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="s1">'foo.yaml'</span><span class="p">,</span><span class="w"> </span><span class="s1">'r'</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">f</span><span class="p">:</span>
<span class="o">&gt;&gt;&gt;</span><span class="w">    </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">Loader</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">data</span>
<span class="p">{</span><span class="s1">'a'</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1.43</span><span class="p">,</span><span class="w"> </span><span class="mf">543.55</span><span class="p">],</span><span class="w"> </span><span class="s1">'c'</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">3.6</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]]}</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2031.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2029.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
