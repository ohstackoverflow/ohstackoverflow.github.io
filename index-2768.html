<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2768) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2768.html">
<link rel="prev" href="index-2769.html" type="text/html">
<link rel="next" href="index-2767.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-the-max-of-two-values-in-mysql/" class="u-url">How to get the max of two values in MySQL?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-the-max-of-two-values-in-mysql/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T16:30:24+08:00" itemprop="datePublished" title="2023-03-05 16:30">2023-03-05 16:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I tried but failed:</p>
<div class="code"><pre class="code literal-block"><span class="nv">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">select</span><span class="w"> </span><span class="nv">max</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">0</span><span class="ss">)</span><span class="c1">;</span>



<span class="nv">ERROR</span><span class="w"> </span><span class="mi">1064</span><span class="w"> </span><span class="ss">(</span><span class="mi">42000</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">You</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">SQL</span><span class="w"> </span><span class="nv">syntax</span><span class="c1">; check the manual </span>
<span class="nv">that</span><span class="w"> </span><span class="nv">corresponds</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">MySQL</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span>
<span class="nv">near</span><span class="w"> </span><span class="s1">'0)'</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">1</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Use <strong>GREATEST()</strong></p>
<p>E.g.:</p>
<div class="code"><pre class="code literal-block">SELECT GREATEST(2,1);
</pre></div>

<p>Note: Whenever if any single value contains null at that time this function
always returns null (Thanks to user @sanghavi7)</p>
<p><br></p>
<h3>Suggest</h3>
<p>To get the maximum value of a column across a set of rows:</p>
<div class="code"><pre class="code literal-block">SELECT MAX(column1) FROM table; -- expect one result
</pre></div>

<p>To get the maximum value of a set of columns, literals, or variables for each
row:</p>
<div class="code"><pre class="code literal-block"><span class="k">SELECT</span><span class="w"> </span><span class="n">GREATEST</span><span class="p">(</span><span class="n">column1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nv">@val</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="nc">table</span><span class="p">;</span><span class="w"> </span><span class="c1">-- expect many results</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-assign-the-output-of-a-command-to-a-makefile-variable/" class="u-url">How to assign the output of a command to a Makefile variable</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-assign-the-output-of-a-command-to-a-makefile-variable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T16:29:07+08:00" itemprop="datePublished" title="2023-03-05 16:29">2023-03-05 16:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to execute some make rules conditionally, only if the Python installed
is greater than a certain version (say 2.5).</p>
<p>I thought I could do something like executing:</p>
<div class="code"><pre class="code literal-block"><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s1">'import sys; print int(sys.version_info &gt;= (2,5))'</span>
</pre></div>

<p>and then using the output ('1' if ok, '0' otherwise) in a <code>ifeq</code> make
statement.</p>
<p>In a simple bash shell script it's just:</p>
<div class="code"><pre class="code literal-block"><span class="n">MY_VAR</span><span class="o">=</span><span class="err">`</span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s1">'import sys; print int(sys.version_info &gt;= (2,5))'</span><span class="err">`</span>
</pre></div>

<p>but that doesn't work in a Makefile.</p>
<p>Any suggestions? I could use any other sensible workaround to achieve this.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use the Make <code>shell</code> builtin like in <code>MY_VAR=$(shell echo whatever)</code></p>
<div class="code"><pre class="code literal-block"><span class="nf">me@Zack</span><span class="o">:</span>~$<span class="n">make</span>
<span class="err">MY_VAR</span><span class="w"> </span><span class="err">IS</span><span class="w"> </span><span class="err">whatever</span>



<span class="nf">me@Zack</span><span class="o">:</span>~$ <span class="n">cat</span> <span class="n">Makefile</span> 
<span class="nv">MY_VAR</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">$(</span>shell<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>whatever<span class="k">)</span>

<span class="nf">all</span><span class="o">:</span>
<span class="w">    </span>@echo<span class="w"> </span>MY_VAR<span class="w"> </span>IS<span class="w"> </span><span class="k">$(</span>MY_VAR<span class="k">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Beware of recipes like this</p>
<div class="code"><pre class="code literal-block"><span class="n">target</span><span class="o">:</span>
<span class="w">    </span><span class="n">MY_ID</span><span class="o">=</span><span class="n">$</span><span class="o">(</span><span class="n">GENERATE_ID</span><span class="o">);</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="n">$MY_ID</span><span class="o">;</span>
</pre></div>

<p>It does two things wrong. The first line in the recipe is executed in a
separate shell instance from the second line. The variable is lost in the
meantime. Second thing wrong is that the <code>$</code> is not escaped.</p>
<div class="code"><pre class="code literal-block"><span class="n">target</span><span class="o">:</span>
<span class="w">    </span><span class="n">MY_ID</span><span class="o">=</span><span class="n">$</span><span class="o">(</span><span class="n">GENERATE_ID</span><span class="o">);</span><span class="w"> </span><span class="o">\</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="n">$$MY_ID</span><span class="o">;</span>
</pre></div>

<p>Both problems have been fixed and the variable is useable. The backslash
combines both lines to run in one single shell, hence the setting of the
variable and the reading of the variable afterwords, works.</p>
<p>I realize the original post said how to get the results of a shell command
into a MAKE variable, and this answer shows how to get it into a shell
variable. But other readers may benefit.</p>
<p>One final improvement, if the consumer expects an "environment variable" to be
set, then you have to export it.</p>
<div class="code"><pre class="code literal-block">my_shell_script
    echo $MY_ID
</pre></div>

<p>would need this in the makefile</p>
<div class="code"><pre class="code literal-block"><span class="n">target</span><span class="o">:</span>
<span class="w">    </span><span class="n">export</span><span class="w"> </span><span class="n">MY_ID</span><span class="o">=</span><span class="n">$</span><span class="o">(</span><span class="n">GENERATE_ID</span><span class="o">);</span><span class="w"> </span><span class="o">\</span>
<span class="w">    </span><span class="o">./</span><span class="n">my_shell_script</span><span class="o">;</span>
</pre></div>

<p>Hope that helps someone. In general, one should avoid doing any real work
outside of recipes, because if someone use the makefile with '--dry-run'
option, to only SEE what it will do, it won't have any undesirable side
effects. Every <code>$(shell)</code> call is evaluated at compile time and some real work
could accidentally be done. Better to leave the real work, like generating
ids, to the inside of the recipes when possible.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/angularjs-app-run-documentation/" class="u-url">AngularJS app.run() documentation?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/angularjs-app-run-documentation/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T16:27:49+08:00" itemprop="datePublished" title="2023-03-05 16:27">2023-03-05 16:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How and where is <code>app.run()</code> used? After module definition, after
<code>app.config()</code> or after <code>app.controller()</code>?</p>
<p>I am adopting the BreezeJS Angular Q, which asks whether certain code can be
run in the <code>app.run()</code> function.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's the calling order:</p>
<ol>
<li><code>app.config()</code></li>
<li><code>app.run()</code></li>
<li><em>directive's compile functions (if they are found in the dom)</em></li>
<li><code>app.controller()</code></li>
<li><em>directive's link functions (again, if found)</em></li>
</ol>
<p>Here's a simple demo where you can watch each one executing (and experiment if
you'd like).</p>
<p>From Angular's module docs:</p>
<blockquote>
<p><strong>Run blocks</strong> - get executed after the injector is created and are used to
kickstart the application. Only instances and constants can be injected into
run blocks. This is to prevent further system configuration during
application run time.</p>
<p>Run blocks are the closest thing in Angular to the main method. A run block
is the code which needs to run to kickstart the application. It is executed
after all of the services have been configured and the injector has been
created. Run blocks typically contain code which is hard to unit-test, and
for this reason should be declared in isolated modules, so that they can be
ignored in the unit-tests.</p>
</blockquote>
<p>One situation where run blocks are used is during authentications.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Specifically...</h2>
<blockquote>
<p>How and where is <code>app.run()</code> used? After module definition or after
<code>app.config()</code>, after <code>app.controller()</code>?</p>
</blockquote>
<h2>Where:</h2>
<p>In your package.js E.g. <code>/packages/dashboard/public/controllers/dashboard.js</code></p>
<h2>How:</h2>
<p>Make it look like this</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">angular</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">'mean.dashboard'</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'ui.bootstrap'</span><span class="p">]);</span>

<span class="n">app</span><span class="o">.</span><span class="n">controller</span><span class="p">(</span><span class="s1">'DashboardController'</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Global'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Dashboard'</span><span class="p">,</span>
<span class="w">    </span><span class="n">function</span><span class="p">(</span><span class="o">$</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">Global</span><span class="p">,</span><span class="w"> </span><span class="n">Dashboard</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">global</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Global</span><span class="p">;</span>
<span class="w">        </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">'dashboard'</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]);</span>

<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">editableOptions</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">editableOptions</span><span class="o">.</span><span class="n">theme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'bs3'</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">bootstrap3</span><span class="w"> </span><span class="n">theme</span><span class="o">.</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="s1">'bs2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'default'</span>
<span class="p">});</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2769.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2767.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
