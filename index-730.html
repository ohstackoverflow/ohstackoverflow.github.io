<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 730) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-730.html">
<link rel="prev" href="index-731.html" type="text/html">
<link rel="next" href="index-729.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-determine-the-current-interactive-shell-that-i-m-in-command-line/" class="u-url">How to determine the current interactive shell that I'm in (command-line)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-determine-the-current-interactive-shell-that-i-m-in-command-line/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:27:53+08:00" itemprop="datePublished" title="2023-02-17 14:27">2023-02-17 14:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I determine the current shell I am working on?</p>
<p>Would the output of the <code>ps</code> command alone be sufficient?</p>
<p>How can this be done in different flavors of Unix?</p>
<p><br><br></p>
<h2>Answer</h2>
<ul>
<li>There are three approaches to finding the <strong>name</strong> of the current shell's executable:</li>
</ul>
<p>Please note that all three approaches can be fooled if the executable of the
shell is <code>/bin/sh</code>, but it's really a renamed <code>bash</code>, for example (which
frequently happens).</p>
<p><em>Thus your second question of whether<code>ps</code> output will do is answered with "
<strong>not always</strong> ".</em></p>
<div class="code"><pre class="code literal-block"><span class="mf">1.</span><span class="w"> </span><span class="err">`</span><span class="n">echo</span><span class="w"> </span><span class="err">$</span><span class="mf">0</span><span class="err">`</span><span class="w"> </span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="kr">print</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">name</span><span class="mf">...</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">shell</span><span class="mf">.</span>

<span class="mf">2.</span><span class="w"> </span><span class="err">`</span><span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">ef</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="err">$$</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">grep</span><span class="err">`</span><span class="w"> </span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">look</span><span class="w"> </span><span class="kr">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kr">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="kr">run</span><span class="n">ning</span><span class="w"> </span><span class="n">processes</span><span class="mf">.</span><span class="w"> </span><span class="nb">Sin</span><span class="n">ce</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shell</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="mf">.</span>
</pre></div>

<p>This is not 100% reliable, as you might have <em>other</em> processes whose <code>ps</code>
listing includes the same number as shell's process ID, especially if that ID
is a small number (for example, if the shell's PID is "5", you may find
processes called "java5" or "perl5" in the same <code>grep</code> output!). <em>This is the
second problem with the "ps" approach, on top of not being able to rely on the
shell name.</em></p>
<div class="code"><pre class="code literal-block"><span class="mf">3.</span><span class="w"> </span><span class="n n-Quoted">`echo $SHELL`</span><span class="w"> </span><span class="err">\</span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="k">path</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">stored</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n n-Quoted">`SHELL`</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">any</span><span class="w"> </span><span class="n">shell</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">caveat</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">one</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">launch</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">explicitly</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subprocess</span><span class="w"> </span><span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="s1">'s not your login shell), you will get your login shell'</span><span class="n">s</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="n">instead</span><span class="p">.</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="n">that</span><span class="s1">'s a possibility, use the `ps` or `$0` approach.</span>
</pre></div>

<hr>
<ul>
<li>
<p>If, however, the executable doesn't match your actual shell (e.g. <code>/bin/sh</code> is actually bash or ksh), you need heuristics. Here are some environmental variables specific to various shells:</p>
<ul>
<li>
<p><code>$version</code> is set on tcsh</p>
</li>
<li>
<p><code>$BASH</code> is set on bash</p>
</li>
<li>
<p><code>$shell</code> (lowercase) is set to actual shell name in csh or tcsh</p>
</li>
<li>
<p><code>$ZSH_NAME</code> is set on zsh</p>
</li>
<li>
<p>ksh has <code>$PS3</code> and <code>$PS4</code> set, whereas the normal Bourne shell (<code>sh</code>) only has <code>$PS1</code> and <code>$PS2</code> set. This generally seems like the hardest to distinguish - the <em>only</em> difference in the entire set of environment variables between <code>sh</code> and <code>ksh</code> we have installed on Solaris boxen is <code>$ERRNO</code>, <code>$FCEDIT</code>, <code>$LINENO</code>, <code>$PPID</code>, <code>$PS3</code>, <code>$PS4</code>, <code>$RANDOM</code>, <code>$SECONDS</code>, and <code>$TMOUT</code>.</p>
</li>
</ul>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p><code>ps -p $$</code></p>
<p>should work anywhere that the solutions involving <code>ps -ef</code> and <code>grep</code> do (on
any Unix variant which supports POSIX options for <code>ps</code>) and will not suffer
from the false positives introduced by grepping for a sequence of digits which
may appear elsewhere.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-set-focus-on-input-field/" class="u-url">How to set focus on input field?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-set-focus-on-input-field/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:26:47+08:00" itemprop="datePublished" title="2023-02-17 14:26">2023-02-17 14:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the 'Angular way' to set focus on input field in AngularJS?</p>
<p>More specific requirements:</p>
<ol>
<li>When a Modal is opened, set focus on a predefined <code>&lt;input&gt;</code> inside this Modal.</li>
<li>Every time <code>&lt;input&gt;</code> becomes visible (e.g. by clicking some button), set focus on it.</li>
</ol>
<p>I tried to achieve the first requirement with <code>autofocus</code>, but this works only
when the Modal is opened for the first time, and only in certain browsers
(e.g. in Firefox it doesn't work).</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<ol>
<li>When a Modal is opened, set focus on a predefined <input> inside this
Modal.
</li>
</ol>
</blockquote>
<p>Define a directive and have it $watch a property/trigger so it knows when to
focus the element:</p>
<div class="code"><pre class="code literal-block"><span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"text"</span><span class="w"> </span><span class="n">focus</span><span class="o">-</span><span class="n">me</span><span class="o">=</span><span class="s2">"shouldBeOpen"</span><span class="o">&gt;</span>



<span class="n">app</span><span class="o">.</span><span class="n">directive</span><span class="p">(</span><span class="s1">'focusMe'</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'$timeout'</span><span class="p">,</span><span class="w"> </span><span class="s1">'$parse'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="o">$</span><span class="n">timeout</span><span class="p">,</span><span class="w"> </span><span class="o">$</span><span class="n">parse</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="n">scope</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">optionally</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="n">scope</span>
<span class="w">        </span><span class="n">link</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">attrs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">var</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="n">parse</span><span class="p">(</span><span class="n">attrs</span><span class="o">.</span><span class="n">focusMe</span><span class="p">);</span>
<span class="w">            </span><span class="n">scope</span><span class="o">.$</span><span class="n">watch</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'value='</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="o">$</span><span class="n">timeout</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">                    </span><span class="p">});</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="err">@</span><span class="n">blesh</span><span class="s1">'s comment, set attribute value to '</span><span class="bp">false</span><span class="s1">'</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">blur</span><span class="w"> </span><span class="n">event</span><span class="p">:</span>
<span class="w">            </span><span class="n">element</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">'blur'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'blur'</span><span class="p">);</span>
<span class="w">                </span><span class="n">scope</span><span class="o">.$</span><span class="n">apply</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="bp">false</span><span class="p">));</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}]);</span>
</pre></div>

<p>Plunker</p>
<p>The $timeout seems to be needed to give the modal time to render.</p>
<blockquote>
<p>'2.' Everytime <input> becomes visible (e.g. by clicking some button), set
focus on it.</p>
</blockquote>
<p>Create a directive essentially like the one above. Watch some scope property,
and when it becomes true (set it in your ng-click handler), execute
<code>element[0].focus()</code>. Depending on your use case, you may or may not need a
$timeout for this one:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn"</span><span class="w"> </span><span class="na">ng-click=</span><span class="s">"showForm=true; focusInput=true"</span><span class="nt">&gt;</span>show<span class="w"> </span>form<span class="w"> </span>and
<span class="w"> </span>focus<span class="w"> </span>input<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-show=</span><span class="s">"showForm"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">ng-model=</span><span class="s">"myInput"</span><span class="w"> </span><span class="na">focus-me=</span><span class="s">"focusInput"</span><span class="nt">&gt;</span><span class="w"> </span><span class="cp">{{</span> <span class="nv">myInput</span> <span class="cp">}}</span>
<span class="w">  </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn"</span><span class="w"> </span><span class="na">ng-click=</span><span class="s">"showForm=false"</span><span class="nt">&gt;</span>hide<span class="w"> </span>form<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>



app.directive('focusMe',<span class="w"> </span>function($timeout)<span class="w"> </span>{
<span class="w">  </span>return<span class="w"> </span>{
<span class="w">    </span>link:<span class="w"> </span>function(scope,<span class="w"> </span>element,<span class="w"> </span>attrs)<span class="w"> </span>{
<span class="w">      </span>scope.$watch(attrs.focusMe,<span class="w"> </span>function(value)<span class="w"> </span>{
<span class="w">        </span>if(value<span class="w"> </span>===<span class="w"> </span>true)<span class="w"> </span>{<span class="w"> </span>
<span class="w">          </span>console.log('value=',value);
<span class="w">          </span>//$timeout(function()<span class="w"> </span>{
<span class="w">            </span>element[0].focus();
<span class="w">            </span>scope[attrs.focusMe]<span class="w"> </span>=<span class="w"> </span>false;
<span class="w">          </span>//});
<span class="w">        </span>}
<span class="w">      </span>});
<span class="w">    </span>}
<span class="w">  </span>};
});
</pre></div>

<p>Plunker</p>
<hr>
<p><strong>Update 7/2013</strong> : I've seen a few people use my original isolate scope
directives and then have problems with embedded input fields (i.e., an input
field in the modal). A directive with no new scope (or possibly a new child
scope) should alleviate some of the pain. So above I updated the answer to not
use isolate scopes. Below is the original answer:</p>
<p>Original answer for 1., using an isolate scope:</p>
<div class="code"><pre class="code literal-block"><span class="x">Name: &lt;input type="text" focus-me="</span><span class="cp">{{</span><span class="nv">shouldBeOpen</span><span class="cp">}}</span><span class="x">"&gt;</span>



<span class="x">app.directive('focusMe', function($timeout) {</span>
<span class="x">  return {</span>
<span class="x">    scope: { trigger: '@focusMe' },</span>
<span class="x">    link: function(scope, element) {</span>
<span class="x">      scope.$watch('trigger', function(value) {</span>
<span class="x">        if(value === "true") { </span>
<span class="x">          $timeout(function() {</span>
<span class="x">            element[0].focus(); </span>
<span class="x">          });</span>
<span class="x">        }</span>
<span class="x">      });</span>
<span class="x">    }</span>
<span class="x">  };</span>
<span class="x">});</span>
</pre></div>

<p>Plunker.</p>
<p>Original answer for 2., using an isolate scope:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn"</span><span class="w"> </span><span class="na">ng-click=</span><span class="s">"showForm=true; focusInput=true"</span><span class="nt">&gt;</span>show<span class="w"> </span>form<span class="w"> </span>and
<span class="w"> </span>focus<span class="w"> </span>input<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-show=</span><span class="s">"showForm"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">focus-me=</span><span class="s">"focusInput"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn"</span><span class="w"> </span><span class="na">ng-click=</span><span class="s">"showForm=false"</span><span class="nt">&gt;</span>hide<span class="w"> </span>form<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>



app.directive('focusMe',<span class="w"> </span>function($timeout)<span class="w"> </span>{
<span class="w">  </span>return<span class="w"> </span>{
<span class="w">    </span>scope:<span class="w"> </span>{<span class="w"> </span>trigger:<span class="w"> </span>'=focusMe'<span class="w"> </span>},
<span class="w">    </span>link:<span class="w"> </span>function(scope,<span class="w"> </span>element)<span class="w"> </span>{
<span class="w">      </span>scope.$watch('trigger',<span class="w"> </span>function(value)<span class="w"> </span>{
<span class="w">        </span>if(value<span class="w"> </span>===<span class="w"> </span>true)<span class="w"> </span>{<span class="w"> </span>
<span class="w">          </span>//console.log('trigger',value);
<span class="w">          </span>//$timeout(function()<span class="w"> </span>{
<span class="w">            </span>element[0].focus();
<span class="w">            </span>scope.trigger<span class="w"> </span>=<span class="w"> </span>false;
<span class="w">          </span>//});
<span class="w">        </span>}
<span class="w">      </span>});
<span class="w">    </span>}
<span class="w">  </span>};
});
</pre></div>

<p>Plunker.</p>
<p>Since we need to reset the trigger/focusInput property in the directive, '='
is used for two-way databinding. In the first directive, '@' was sufficient.
Also note that when using '@' we compare the trigger value to "true" since @
always results in a string.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>(EDIT: I've added an updated solution below this explanation)</h3>
<p>Mark Rajcok is the man... and his answer is a valid answer, but it <del>has</del> had
a defect (sorry Mark)...</p>
<p><del>...Try using the boolean to focus on the input, then blur the input, then
try using it to focus the input again. It won't work unless you reset the
boolean to false, then $digest, then reset it back to true. Even if you use a
string comparison in your expression, you'll be forced to change the string to
something else, $digest, then change it back.</del> (This has been addressed with
the blur event handler.)</p>
<p>So I propose this alternate solution:</p>
<h4>Use an event, the forgotten feature of Angular.</h4>
<p>JavaScript loves events after all. Events are inherently loosely coupled, and
even better, you avoid adding another $watch to your $digest.</p>
<div class="code"><pre class="code literal-block"><span class="nv">app</span>.<span class="nv">directive</span><span class="ss">(</span><span class="s1">'focusOn'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">scope</span>,<span class="w"> </span><span class="nv">elem</span>,<span class="w"> </span><span class="nv">attr</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">      </span><span class="nv">scope</span>.$<span class="nv">on</span><span class="ss">(</span><span class="nv">attr</span>.<span class="nv">focusOn</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">e</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">          </span><span class="nv">elem</span>[<span class="mi">0</span>].<span class="nv">focus</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">      </span>}<span class="ss">)</span><span class="c1">;</span>
<span class="w">   </span>}<span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>So now you could use it like this:</p>
<div class="code"><pre class="code literal-block">&lt;input type="text" focus-on="newItemAdded" /&gt;
</pre></div>

<p>and then anywhere in your app...</p>
<div class="code"><pre class="code literal-block">$scope.addNewItem = function () {
    /* stuff here to add a new item... */

    $scope.$broadcast('newItemAdded');
};
</pre></div>

<p>This is awesome because you can do all sorts of things with something like
this. For one, you could tie into events that already exist. For another thing
you start doing something smart by having different parts of your app publish
events that other parts of your app can subscribe to.</p>
<p>Anyhow, this type of thing screams "event driven" to me. I think as Angular
developers we try really hard to hammer $scope shaped pegs into event shape
holes.</p>
<p>Is it the best solution? I don't know. It is <em>a</em> solution.</p>
<hr>
<h3>Updated Solution</h3>
<p>After @ShimonRachlenko's comment below, I've changed my method of doing this
slightly. Now I use a combination of a service and a directive that handles an
event "behind the scenes":</p>
<p>Other than that, it's the same principal outlined above.</p>
<p>Here is a quick demo Plunk</p>
<h4>Usage</h4>
<div class="code"><pre class="code literal-block">&lt;input type="text" focus-on="focusMe"/&gt;



app.controller('MyCtrl', function($scope, focus) {
    focus('focusMe');
});
</pre></div>

<h4>Source</h4>
<div class="code"><pre class="code literal-block"><span class="nv">app</span>.<span class="nv">directive</span><span class="ss">(</span><span class="s1">'focusOn'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">scope</span>,<span class="w"> </span><span class="nv">elem</span>,<span class="w"> </span><span class="nv">attr</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">      </span><span class="nv">scope</span>.$<span class="nv">on</span><span class="ss">(</span><span class="s1">'focusOn'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">e</span>,<span class="w"> </span><span class="nv">name</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="k">if</span><span class="ss">(</span><span class="nv">name</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nv">attr</span>.<span class="nv">focusOn</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">          </span><span class="nv">elem</span>[<span class="mi">0</span>].<span class="nv">focus</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span>}
<span class="w">      </span>}<span class="ss">)</span><span class="c1">;</span>
<span class="w">   </span>}<span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>

<span class="nv">app</span>.<span class="nv">factory</span><span class="ss">(</span><span class="s1">'focus'</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">rootScope</span>,<span class="w"> </span>$<span class="nb">timeout</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">name</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span>$<span class="nb">timeout</span><span class="ss">(</span><span class="nv">function</span><span class="w"> </span><span class="ss">()</span>{
<span class="w">      </span>$<span class="nv">rootScope</span>.<span class="mh">$b</span><span class="nv">roadcast</span><span class="ss">(</span><span class="s1">'focusOn'</span>,<span class="w"> </span><span class="nv">name</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span>}<span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span>}
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-fix-committing-to-the-wrong-git-branch/" class="u-url">How to fix committing to the wrong Git branch?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-fix-committing-to-the-wrong-git-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:26:19+08:00" itemprop="datePublished" title="2023-02-17 14:26">2023-02-17 14:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I just made a perfectly good commit to the wrong branch. How do I undo the
last commit in my master branch and then take those same changes and get them
into my upgrade branch?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you haven't yet pushed your changes, you can also do a soft reset:</p>
<div class="code"><pre class="code literal-block">git reset --soft HEAD^
</pre></div>

<p>This will revert the commit, but put the committed changes back into your
index. Assuming the branches are relatively up-to-date with regard to each
other, git will let you do a checkout into the other branch, whereupon you can
simply commit:</p>
<div class="code"><pre class="code literal-block">git checkout branch
git commit -c ORIG_HEAD
</pre></div>

<p>The <code>-c ORIG_HEAD</code> part is useful to not type commit message again.</p>
<p><br></p>
<h3>Suggest</h3>
<p>4 years late on the topic, but this might be helpful to someone.</p>
<p>If you forgot to create a new branch before committing and committed all on
master, no matter how many commits you did, the following approach is easier:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">stash</span><span class="w">                       </span>#<span class="w"> </span><span class="nv">skip</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">changes</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">committed</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">my_feature</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">reset</span><span class="w"> </span><span class="o">--</span><span class="nv">hard</span><span class="w"> </span><span class="nv">origin</span><span class="o">/</span><span class="nv">master</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="nv">my_feature</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">stash</span><span class="w"> </span><span class="nv">pop</span><span class="w">                   </span>#<span class="w"> </span><span class="nv">skip</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">changes</span><span class="w"> </span><span class="nv">were</span><span class="w"> </span><span class="nv">committed</span>
</pre></div>

<p>Now you have your master branch equals to <code>origin/master</code> and all new commits
are on <code>my_feature</code>. Note that <code>my_feature</code> is a local branch, not a remote
one.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-731.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-729.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
