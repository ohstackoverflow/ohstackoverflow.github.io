<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1600) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1600.html">
<link rel="prev" href="index-1601.html" type="text/html">
<link rel="next" href="index-1599.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-extract-the-substring-between-two-markers/" class="u-url">How to extract the substring between two markers?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-extract-the-substring-between-two-markers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:53:25+08:00" itemprop="datePublished" title="2023-03-03 04:53">2023-03-03 04:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Let's say I have a string <code>'gfgfdAAA1234ZZZuijjk'</code> and I want to extract just
the <code>'1234'</code> part.</p>
<p>I only know what will be the few characters directly before <code>AAA</code>, and after
<code>ZZZ</code> the part I am interested in <code>1234</code>.</p>
<p>With <code>sed</code> it is possible to do something like this with a string:</p>
<div class="code"><pre class="code literal-block">echo "$STRING" | sed -e "s|.*AAA\(.*\)ZZZ.*|\1|"
</pre></div>

<p>And this will give me <code>1234</code> as a result.</p>
<p>How to do the same thing in Python?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Using regular expressions - documentation for further reference</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">re</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">'gfgfdAAA1234ZZZuijjk'</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">'AAA(.+?)ZZZ'</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
<span class="k">if</span> <span class="n">m</span><span class="p">:</span>
    <span class="n">found</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># found: 1234</span>
</pre></div>

<p>or:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">re</span>

<span class="n">text</span> <span class="o">=</span> <span class="s1">'gfgfdAAA1234ZZZuijjk'</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">found</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">'AAA(.+?)ZZZ'</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
    <span class="c1"># AAA, ZZZ not found in the original string</span>
    <span class="n">found</span> <span class="o">=</span> <span class="s1">''</span> <span class="c1"># apply your error handling</span>

<span class="c1"># found: 1234</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'gfgfdAAA1234ZZZuijjk'</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">find</span><span class="ss">(</span><span class="s1">'AAA'</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">find</span><span class="ss">(</span><span class="s1">'ZZZ'</span>,<span class="w"> </span><span class="nv">start</span><span class="ss">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">s</span>[<span class="nv">start</span>:<span class="k">end</span>]
<span class="s1">'1234'</span>
</pre></div>

<p>Then you can use regexps with the re module as well, if you want, but that's
not necessary in your case.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-in-the-world-are-spring-beans/" class="u-url">What in the world are Spring beans?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-in-the-world-are-spring-beans/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:52:59+08:00" itemprop="datePublished" title="2023-03-03 04:52">2023-03-03 04:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am yet to find a high-level definition of Spring beans that I can
understand. I see them referenced often in Grails documentation and books, but
I think that understanding what they are would be beneficial. So what are
Spring beans? How can they be used? Do they have something to do with
Dependency Injection?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The Spring core technologies reference documentation describes what beans are.</p>
<p>Per the Introduction to the Spring IoC Container and Beans section (where
"IoC" means "inversion of control"):</p>
<blockquote>
<p>In Spring, the objects that form the backbone of your application and that
are managed by the Spring IoC container are called beans. A bean is an
object that is instantiated, assembled, and managed by a Spring IoC
container. Otherwise, a bean is simply one of many objects in your
application. Beans, and the dependencies among them, are reflected in the
configuration metadata used by a container.</p>
</blockquote>
<p>Beans and scope are described in the Bean Scopes section:</p>
<blockquote>
<p>When you create a bean definition, you create a recipe for creating actual
instances of the class defined by that bean definition. The idea that a bean
definition is a recipe is important, because it means that, as with a class,
you can create many object instances from a single recipe.</p>
<p>You can control not only the various dependencies and configuration values
that are to be plugged into an object that is created from a particular bean
definition but also control the scope of the objects created from a
particular bean definition. This approach is powerful and flexible, because
you can choose the scope of the objects you create through configuration
instead of having to bake in the scope of an object at the Java class level.
Beans can be defined to be deployed in one of a number of scopes.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Spring beans are just instance objects that are managed by the Spring
container, namely, they are created and wired by the framework and put into a
"bag of objects" (the container) from where you can get them later.</p>
<p>The "wiring" part there is what dependency injection is all about, what it
means is that you can just say "I will need this thing" and the framework will
follow some rules to get you the proper instance.</p>
<p>For someone who isn't used to Spring, I think Wikipedia Spring's article has a
nice description:</p>
<blockquote>
<p>Central to the Spring Framework is its inversion of control container, which
provides a consistent means of configuring and managing Java objects using
reflection. The container is responsible for managing object lifecycles of
specific objects: creating these objects, calling their initialization
methods, and configuring these objects by wiring them together.</p>
<p>Objects created by the container are also called <strong>managed objects</strong> or
<strong>beans</strong>. The container can be configured by loading XML files or detecting
specific Java annotations on configuration classes. These data sources
contain the bean definitions which provide the information required to
create the beans.</p>
<p>Objects can be obtained by means of either <em>dependency lookup</em> or
<em>dependency injection</em>. <em>Dependency lookup</em> is a pattern where a caller asks
the container object for an object with a specific name or of a specific
type. <em>Dependency injection</em> is a pattern where the container passes objects
by name to other objects, via either constructors, properties, or factory
methods.</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-uses-are-there-for-placement-new/" class="u-url">What uses are there for "placement new"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-uses-are-there-for-placement-new/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:52:32+08:00" itemprop="datePublished" title="2023-03-03 04:52">2023-03-03 04:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Has anyone here ever used C++'s "placement new"? If so, what for? It looks to
me like it would only be useful on memory-mapped hardware.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Placement new allows you to construct an object in memory that's already</h3>
<p>allocated.</p>
<p>You may want to do this for optimization when you need to construct multiple
instances of an object, and it is faster not to re-allocate memory each time
you need a new instance. Instead, it might be more efficient to perform a
single allocation for a chunk of memory that can hold multiple objects, even
though you don't want to use all of it at once.</p>
<p>DevX gives a good example:</p>
<blockquote>
<p>Standard C++ also supports placement new operator, which constructs an
object on a pre-allocated buffer. This is useful when building a memory
pool, a garbage collector or simply when performance and exception safety
are paramount (there's no danger of allocation failure since the memory has
already been allocated, and constructing an object on a pre-allocated buffer
takes less time):</p>
</blockquote>
<div class="code"><pre class="code literal-block">char *buf  = new char[sizeof(string)]; // pre-allocated buffer
string *p = new (buf) string("hi");    // placement new
string *q = new string("hi");          // ordinary heap allocation
</pre></div>

<p>You may also want to be sure there can be no allocation failure at a certain
part of critical code (for instance, in code executed by a pacemaker). In that
case you would want to allocate memory earlier, then use placement new within
the critical section.</p>
<h3>Deallocation in placement new</h3>
<p>You should not deallocate every object that is using the memory buffer.
Instead you should delete[] only the original buffer. You would have to then
call the destructors of your classes manually. For a good suggestion on this,
please see Stroustrup's FAQ on: Is there a "placement delete"?</p>
<p><br></p>
<h3>Suggest</h3>
<p>We use it with custom memory pools. Just a sketch:</p>
<div class="code"><pre class="code literal-block"><span class="nt">class</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
<span class="w">    </span><span class="nf">Pool</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="c">/* implementation details irrelevant */</span><span class="w"> </span><span class="p">}</span><span class="o">;</span>
<span class="w">    </span><span class="nt">virtual</span><span class="w"> </span><span class="o">~</span><span class="nt">Pool</span><span class="o">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c">/* ditto */</span><span class="w"> </span><span class="p">}</span><span class="o">;</span>

<span class="w">    </span><span class="nt">virtual</span><span class="w"> </span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">allocate</span><span class="o">(</span><span class="nt">size_t</span><span class="o">);</span>
<span class="w">    </span><span class="nt">virtual</span><span class="w"> </span><span class="nt">void</span><span class="w"> </span><span class="nt">deallocate</span><span class="o">(</span><span class="nt">void</span><span class="w"> </span><span class="o">*);</span>

<span class="w">    </span><span class="nt">static</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="o">*</span><span class="nt">Pool</span><span class="p">::</span><span class="nd">misc_pool</span><span class="o">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">return</span><span class="w"> </span><span class="err">misc_pool_p</span><span class="p">;</span><span class="w"> </span><span class="c">/* global MiscPool for general use */</span><span class="w"> </span><span class="p">}</span>
<span class="err">}</span><span class="o">;</span>

<span class="nt">class</span><span class="w"> </span><span class="nt">ClusterPool</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nt">public</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c">/* ... */</span><span class="w"> </span><span class="p">}</span><span class="o">;</span>
<span class="nt">class</span><span class="w"> </span><span class="nt">FastPool</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nt">public</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c">/* ... */</span><span class="w"> </span><span class="p">}</span><span class="o">;</span>
<span class="nt">class</span><span class="w"> </span><span class="nt">MapPool</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nt">public</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c">/* ... */</span><span class="w"> </span><span class="p">}</span><span class="o">;</span>
<span class="nt">class</span><span class="w"> </span><span class="nt">MiscPool</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nt">public</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c">/* ... */</span><span class="w"> </span><span class="p">}</span><span class="o">;</span>

<span class="o">//</span><span class="w"> </span><span class="nt">elsewhere</span><span class="o">...</span>

<span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">pnew_new</span><span class="o">(</span><span class="nt">size_t</span><span class="w"> </span><span class="nt">size</span><span class="o">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="err">return</span><span class="w"> </span><span class="n">Pool</span><span class="p">:</span><span class="o">:</span><span class="nf">misc_pool</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">allocate</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
<span class="p">}</span>

<span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">pnew_new</span><span class="o">(</span><span class="nt">size_t</span><span class="w"> </span><span class="nt">size</span><span class="o">,</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="o">*</span><span class="nt">pool_p</span><span class="o">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="err">if</span><span class="w"> </span><span class="err">(!pool_p)</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="err">return</span><span class="w"> </span><span class="n">Pool</span><span class="p">:</span><span class="o">:</span><span class="nf">misc_pool</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">allocate</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>
<span class="w">   </span><span class="nt">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="err">return</span><span class="w"> </span><span class="err">pool_p-&gt;allocate(size)</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>
<span class="err">}</span>

<span class="nt">void</span><span class="w"> </span><span class="nt">pnew_delete</span><span class="o">(</span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">p</span><span class="o">)</span>
<span class="p">{</span>
<span class="w">   </span><span class="err">Pool</span><span class="w"> </span><span class="err">*hp</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="n">Pool</span><span class="p">:</span><span class="o">:</span><span class="nf">find_pool</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="w">   </span><span class="err">//</span><span class="w"> </span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="n">if</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">Pool</span><span class="o">::</span><span class="nf">find_pool</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span>
<span class="w">   </span><span class="n">if</span><span class="w"> </span><span class="p">(</span><span class="n">hp</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="n">hp-</span><span class="o">&gt;</span><span class="nf">deallocate</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="w">   </span><span class="p">}</span>
<span class="err">}</span>

<span class="o">//</span><span class="w"> </span><span class="nt">elsewhere</span><span class="o">...</span>

<span class="nt">class</span><span class="w"> </span><span class="nt">Obj</span><span class="w"> </span><span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">misc</span><span class="w"> </span><span class="n">ctors</span><span class="p">,</span><span class="w"> </span><span class="n">dtors</span><span class="p">,</span><span class="w"> </span><span class="n">etc</span><span class="o">.</span>

<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">sampling</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">new</span><span class="o">/</span><span class="n">del</span><span class="w"> </span><span class="n">operators</span>
<span class="w">   </span><span class="n">void</span><span class="w"> </span><span class="o">*</span><span class="n">operator</span><span class="w"> </span><span class="nf">new</span><span class="p">(</span><span class="n">size_t</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">             </span><span class="err">{</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="nf">pnew_new</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">operator</span><span class="w"> </span><span class="nt">new</span><span class="o">(</span><span class="nt">size_t</span><span class="w"> </span><span class="nt">s</span><span class="o">,</span><span class="w"> </span><span class="nt">Pool</span><span class="w"> </span><span class="o">*</span><span class="nt">hp</span><span class="o">)</span><span class="w">   </span><span class="p">{</span><span class="w"> </span><span class="err">return</span><span class="w"> </span><span class="err">pnew_new(s,</span><span class="w"> </span><span class="err">hp)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="nt">void</span><span class="w"> </span><span class="nt">operator</span><span class="w"> </span><span class="nt">delete</span><span class="o">(</span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">dp</span><span class="o">)</span><span class="w">           </span><span class="p">{</span><span class="w"> </span><span class="err">pnew_delete(dp)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="nt">void</span><span class="w"> </span><span class="nt">operator</span><span class="w"> </span><span class="nt">delete</span><span class="o">(</span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">dp</span><span class="o">,</span><span class="w"> </span><span class="nt">Pool</span><span class="o">*)</span><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="err">pnew_delete(dp)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">   </span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">operator</span><span class="w"> </span><span class="nt">new</span><span class="cp">[]</span><span class="o">(</span><span class="nt">size_t</span><span class="w"> </span><span class="nt">s</span><span class="o">)</span><span class="w">           </span><span class="p">{</span><span class="w"> </span><span class="err">return</span><span class="w"> </span><span class="err">pnew_new(s)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">operator</span><span class="w"> </span><span class="nt">new</span><span class="cp">[]</span><span class="o">(</span><span class="nt">size_t</span><span class="w"> </span><span class="nt">s</span><span class="o">,</span><span class="w"> </span><span class="nt">Pool</span><span class="o">*</span><span class="w"> </span><span class="nt">hp</span><span class="o">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">return</span><span class="w"> </span><span class="err">pnew_new(s,</span><span class="w"> </span><span class="err">hp)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="nt">void</span><span class="w"> </span><span class="nt">operator</span><span class="w"> </span><span class="nt">delete</span><span class="cp">[]</span><span class="o">(</span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">dp</span><span class="o">)</span><span class="w">         </span><span class="p">{</span><span class="w"> </span><span class="err">pnew_delete(dp)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="nt">void</span><span class="w"> </span><span class="nt">operator</span><span class="w"> </span><span class="nt">delete</span><span class="cp">[]</span><span class="o">(</span><span class="nt">void</span><span class="w"> </span><span class="o">*</span><span class="nt">dp</span><span class="o">,</span><span class="w"> </span><span class="nt">Pool</span><span class="o">*)</span><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="err">pnew_delete(dp)</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="err">}</span><span class="o">;</span>

<span class="o">//</span><span class="w"> </span><span class="nt">elsewhere</span><span class="o">...</span>

<span class="nt">ClusterPool</span><span class="w"> </span><span class="o">*</span><span class="nt">cp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">ClusterPool</span><span class="o">(</span><span class="nt">arg1</span><span class="o">,</span><span class="w"> </span><span class="nt">arg2</span><span class="o">,</span><span class="w"> </span><span class="o">...);</span>

<span class="nt">Obj</span><span class="w"> </span><span class="o">*</span><span class="nt">new_obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="o">(</span><span class="nt">cp</span><span class="o">)</span><span class="w"> </span><span class="nt">Obj</span><span class="o">(</span><span class="nt">arg_a</span><span class="o">,</span><span class="w"> </span><span class="nt">arg_b</span><span class="o">,</span><span class="w"> </span><span class="o">...);</span>
</pre></div>

<p>Now you can cluster objects together in a single memory arena, select an
allocator which is very fast but does no deallocation, use memory mapping, and
any other semantic you wish to impose by choosing the pool and passing it as
an argument to an object's placement new operator.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1601.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1599.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
