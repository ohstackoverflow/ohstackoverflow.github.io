<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 592) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-592.html">
<link rel="prev" href="index-593.html" type="text/html">
<link rel="next" href="index-591.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-delete-a-stash-created-with-git-stash-create/" class="u-url">How to delete a stash created with git stash create?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-delete-a-stash-created-with-git-stash-create/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:49:42+08:00" itemprop="datePublished" title="2023-02-17 10:49">2023-02-17 10:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Git stash seems to do a lot of what I want, except that it is a little hard to
script, as the if you have no changes, then <code>git stash; git stash pop</code> will do
something different than if you do have changes in your repository.</p>
<p>It appears that <code>git stash create</code> is the answer to that problem, and
everything works, except for one thing… I can't get rid of the created stash.
Is there any way to get rid of the stash?</p>
<p>To make it 100% clear what I am doing:</p>
<p>Create the stash:</p>
<div class="code"><pre class="code literal-block">~/tmp/a(master) $ git stash create 
60629375d0eb12348f9d31933dd348ad0f038435
~/tmp/a(master) $ git st
# On branch master
# Changes to be committed:
#   (use "git reset HEAD &lt;file&gt;..." to unstage)
#
#   new file:   b
#
~/tmp/a(master) $ git reset --hard
HEAD is now at 555d572 log message
</pre></div>

<p>Use the stash:</p>
<div class="code"><pre class="code literal-block">~/tmp/a(master) $ git apply 60629375d0eb12348f9d31933dd348ad0f038435
fatal: can't open patch '60629375d0eb12348f9d31933dd348ad0f038435': No such file or directory
~/tmp/a(master) $ git stash apply 60629375d0eb12348f9d31933dd348ad0f038435
# On branch master
# Changes to be committed:
#   (use "git reset HEAD &lt;file&gt;..." to unstage)
#
#   new file:   b
#
</pre></div>

<p>Delete the stash: (except that this last bit doesn't work)</p>
<div class="code"><pre class="code literal-block">~<span class="o">/</span><span class="nv">tmp</span><span class="o">/</span><span class="nf">a</span><span class="p">(</span><span class="nv">master</span><span class="p">)</span><span class="w"> </span><span class="p">$</span><span class="w"> </span><span class="nv">git</span><span class="w"> </span><span class="nv">stash</span><span class="w"> </span><span class="nv">drop</span><span class="w"> </span><span class="o">!</span><span class="p">$</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">stash</span><span class="w"> </span><span class="nv">drop</span><span class="w"> </span><span class="mf">60629375d0</span><span class="nv">eb12348f9d31933dd348ad0f038435</span>
<span class="o">'</span><span class="mf">60629375d0</span><span class="nv">eb12348f9d31933dd348ad0f038435</span><span class="o">'</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">stash</span><span class="w"> </span><span class="nv">reference</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>To delete a normal stash created with<code>git stash</code> , you want <code>git stash drop</code>
or <code>git stash drop stash@{n}</code>. See below for more details.</strong></p>
<hr>
<p>You don't need to delete a stash created with <code>git stash create</code>. From the
docs:</p>
<blockquote>
<p>Create a stash entry (which is a regular commit object) and return its
object name, without storing it anywhere in the ref namespace. This is
intended to be useful for scripts. It is probably not the command you want
to use; see "save" above.</p>
</blockquote>
<p>Since nothing references the stash commit, it will get garbage collected
eventually.</p>
<hr>
<p>A stash created with <code>git stash</code> or <code>git stash save</code> is saved to <code>refs/stash</code>,
and can be deleted with <code>git stash drop</code>. As with all Git objects, the actual
stash contents aren't deleted from your computer until a <code>gc</code> prunes those
objects after they expire (default is 2 weeks later).</p>
<p>Older stashes are saved in the <code>refs/stash</code> reflog (try <code>cat
.git/logs/refs/stash</code>), and can be deleted with <code>git stash drop stash@{n}</code>,
where <code>n</code> is the number shown by <code>git stash list</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>To delete a normal stash created with<code>git stash</code> , you want <code>git stash drop</code>
or <code>git stash drop stash@{n}</code>. See below for more details.</strong></p>
<hr>
<p>You don't need to delete a stash created with <code>git stash create</code>. From the
docs:</p>
<blockquote>
<p>Create a stash entry (which is a regular commit object) and return its
object name, without storing it anywhere in the ref namespace. This is
intended to be useful for scripts. It is probably not the command you want
to use; see "save" above.</p>
</blockquote>
<p>Since nothing references the stash commit, it will get garbage collected
eventually.</p>
<hr>
<p>A stash created with <code>git stash</code> or <code>git stash save</code> is saved to <code>refs/stash</code>,
and can be deleted with <code>git stash drop</code>. As with all Git objects, the actual
stash contents aren't deleted from your computer until a <code>gc</code> prunes those
objects after they expire (default is 2 weeks later).</p>
<p>Older stashes are saved in the <code>refs/stash</code> reflog (try <code>cat
.git/logs/refs/stash</code>), and can be deleted with <code>git stash drop stash@{n}</code>,
where <code>n</code> is the number shown by <code>git stash list</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-jsf-servlet-and-jsp/" class="u-url">What is the difference between JSF, Servlet and JSP?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-jsf-servlet-and-jsp/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:49:14+08:00" itemprop="datePublished" title="2023-02-17 10:49">2023-02-17 10:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have some questions. These are :</p>
<ol>
<li>How are JSP and Servlet related to each other?</li>
<li>Is JSP some kind of Servlet? </li>
<li>How are JSP and JSF related to each other? </li>
<li>Is JSF some kind of <strong>Pre-Build UI based JSP</strong> like ASP.NET-MVC?</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<h4>JSP (JavaServer Pages)</h4>
<p>JSP is a <strong>Java view technology</strong> running on the server machine which allows
you to write template text in client side languages (like HTML, CSS,
JavaScript, ect.). JSP supports taglibs, which are backed by pieces of Java
code that let you control the page flow or output dynamically. A well-known
taglib is JSTL. JSP also supports Expression Language, which can be used to
access backend data (via attributes available in the page, request, session
and application scopes), mostly in combination with taglibs.</p>
<p>When a JSP is requested for the first time or when the web app starts up, the
servlet container will compile it into a class extending <code>HttpServlet</code> and use
it during the web app's lifetime. You can find the generated source code in
the server's work directory. In for example Tomcat, it's the <code>/work</code>
directory. On a JSP request, the servlet container will execute the compiled
JSP class and send the generated output (usually just HTML/CSS/JS) through the
web server over a network to the client side, which in turn displays it in the
web browser.</p>
<h4>Servlets</h4>
<p>Servlet is a <strong>Java application programming interface (API)</strong> running on the
server machine, which intercepts requests made by the client and
generates/sends a response. A well-known example is the <code>HttpServlet</code> which
provides methods to hook on HTTP requests using the popular HTTP methods such
as <code>GET</code> and <code>POST</code>. You can configure <code>HttpServlet</code>s to listen to a certain
HTTP URL pattern, which is configurable in <code>web.xml</code>, or more recently with
Java EE 6, with <code>@WebServlet</code> annotation.</p>
<p>When a Servlet is first requested or during web app startup, the servlet
container will create an instance of it and keep it in memory during the web
app's lifetime. The same instance will be reused for every incoming request
whose URL matches the servlet's URL pattern. You can access the request data
by <code>HttpServletRequest</code> and handle the response by <code>HttpServletResponse</code>. Both
objects are available as method arguments inside any of the overridden methods
of <code>HttpServlet</code>, such as <code>doGet()</code> and <code>doPost()</code>.</p>
<h4>JSF (JavaServer Faces)</h4>
<p>JSF is a <strong>component based MVC framework</strong> which is built on top of the
Servlet API and provides components via taglibs which can be used in JSP or
any other Java based view technology such as Facelets. Facelets is much more
suited to JSF than JSP. It namely provides great templating capabilities such
as composite components, while JSP basically only offers the <code>&lt;jsp:include&gt;</code>
for templating in JSF, so that you're forced to create custom components with
raw Java code (which is a bit opaque and a lot of tedious work) when you want
to replace a repeated group of components with a single component. Since JSF
2.0, JSP has been deprecated as view technology in favor of Facelets.</p>
<p><strong>Note</strong> : JSP itself is NOT deprecated, just the combination of JSF with JSP
is deprecated.</p>
<p><strong>Note</strong> : JSP has great templating abilities by means of Taglibs, especially
the (Tag File) variant. JSP templating in combination with JSF is what is
lacking.</p>
<p>As being a MVC (Model-View-Controller) framework, JSF provides the
<code>FacesServlet</code> as the sole request-response <em>Controller</em>. It takes all the
standard and tedious HTTP request/response work from your hands, such as
gathering user input, validating/converting them, putting them in model
objects, invoking actions and rendering the response. This way you end up with
basically a JSP or Facelets (XHTML) page for <em>View</em> and a JavaBean class as
<em>Model</em>. The JSF components are used to bind the view with the model (such as
your ASP.NET web control does) and the <code>FacesServlet</code> uses the <em>JSF component
tree</em> to do all the work.</p>
<h4>Related questions</h4>
<ul>
<li>What is the main-stream Java alternative to ASP.NET / PHP?</li>
<li>Java EE web development, what skills do I need?</li>
<li>How do servlets work? Instantiation, session variables and multithreading</li>
<li>What is a Javabean and where are they used?</li>
<li>How to avoid Java code in JSP files?</li>
<li>What components are MVC in JSF MVC framework?</li>
<li>What is the need of JSF, when UI can be achieved with JavaScript libraries such as jQuery and AngularJS</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>See http://www.oracle.com/technetwork/java/faq-137059.html</p>
<blockquote>
<p>JSP technology is part of the Java technology family. JSP pages are compiled
into servlets and may call JavaBeans components (beans) or Enterprise
JavaBeans components (enterprise beans) to perform processing on the server.
As such, JSP technology is a key component in a highly scalable architecture
for web-based applications.</p>
</blockquote>
<p>See https://jcp.org/en/introduction/faq</p>
<blockquote>
<p>A: JavaServer Faces technology is a framework for building user interfaces
for web applications. JavaServer Faces technology includes:</p>
<p>A set of APIs for: representing UI components and managing their state,
handling events and input validation, defining page navigation, and
supporting internationalization and accessibility.</p>
<p>A JavaServer Pages (JSP) custom tag library for expressing a JavaServer
Faces interface within a JSP page.</p>
</blockquote>
<p>JSP is a specialized kind of servlet.</p>
<p>JSF is a set of tags you can use with JSP.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/c-singleton-design-pattern/" class="u-url">C++ Singleton design pattern</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/c-singleton-design-pattern/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:48:41+08:00" itemprop="datePublished" title="2023-02-17 10:48">2023-02-17 10:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Recently I've bumped into a realization/implementation of the Singleton design
pattern for C++. It has looked like this (I have adopted it from the real-life
example):</p>
<div class="code"><pre class="code literal-block"><span class="c1">// a lot of methods are omitted here</span>
<span class="n">class</span><span class="w"> </span><span class="n">Singleton</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">public</span><span class="p">:</span>
<span class="w">       </span><span class="k">static</span><span class="w"> </span><span class="n">Singleton</span><span class="o">*</span><span class="w"> </span><span class="n">getInstance</span><span class="p">(</span><span class="w"> </span><span class="p">);</span>
<span class="w">       </span><span class="o">~</span><span class="n">Singleton</span><span class="p">(</span><span class="w"> </span><span class="p">);</span>
<span class="w">   </span><span class="n">private</span><span class="p">:</span>
<span class="w">       </span><span class="n">Singleton</span><span class="p">(</span><span class="w"> </span><span class="p">);</span>
<span class="w">       </span><span class="k">static</span><span class="w"> </span><span class="n">Singleton</span><span class="o">*</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>

<p>From this declaration, I can deduce that the instance field is initiated on
the heap. That means there is a memory allocation. What is completely unclear
for me is when exactly the memory is going to be deallocated? Or is there a
bug and memory leak? It seems like there is a problem with the implementation.</p>
<p>My main question is, how do I implement it in the right way?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In 2008 I provided a C++98 implementation of the Singleton design pattern that
is lazy-evaluated, guaranteed-destruction, not-technically-thread-safe:<br>
Can any one provide me a sample of Singleton in c++?</p>
<p>Here is an updated C++11 implementation of the Singleton design pattern that
is lazy-evaluated, correctly-destroyed, and thread-safe.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">S</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="p">:</span>
<span class="w">        </span><span class="k">static</span><span class="w"> </span><span class="n">S</span><span class="o">&amp;</span><span class="w"> </span><span class="n">getInstance</span><span class="p">()</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">static</span><span class="w"> </span><span class="n">S</span><span class="w">    </span><span class="n">instance</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Guaranteed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">destroyed</span><span class="o">.</span>
<span class="w">                                  </span><span class="o">//</span><span class="w"> </span><span class="n">Instantiated</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">use</span><span class="o">.</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">instance</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="n">private</span><span class="p">:</span>
<span class="w">        </span><span class="n">S</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w">                    </span><span class="o">//</span><span class="w"> </span><span class="n">Constructor</span><span class="err">?</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="n">brackets</span><span class="p">)</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="n">here</span><span class="o">.</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="mi">03</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="o">========</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Don</span><span class="s1">'t forget to declare these two. You want to make sure they</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">inaccessible</span><span class="p">(</span><span class="n">especially</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">outside</span><span class="p">),</span><span class="w"> </span><span class="n">otherwise</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">accidentally</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">copies</span><span class="w"> </span><span class="n">of</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">singleton</span><span class="w"> </span><span class="n">appearing</span><span class="o">.</span>
<span class="w">        </span><span class="n">S</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="p">);</span><span class="w">              </span><span class="o">//</span><span class="w"> </span><span class="n">Don</span><span class="s1">'t Implement</span>
<span class="w">        </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">operator</span><span class="o">=</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Don</span><span class="s1">'t implement</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="mi">11</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="o">=======</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">better</span><span class="w"> </span><span class="n">technique</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">deleting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">methods</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">don</span><span class="s1">'t want.</span>
<span class="w">    </span><span class="n">public</span><span class="p">:</span>
<span class="w">        </span><span class="n">S</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="n">delete</span><span class="p">;</span>
<span class="w">        </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">operator</span><span class="o">=</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="p">)</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">delete</span><span class="p">;</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Note</span><span class="p">:</span><span class="w"> </span><span class="n">Scott</span><span class="w"> </span><span class="n">Meyers</span><span class="w"> </span><span class="n">mentions</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">his</span><span class="w"> </span><span class="n">Effective</span><span class="w"> </span><span class="n">Modern</span>
<span class="w">        </span><span class="o">//</span><span class="w">       </span><span class="n">C</span><span class="o">++</span><span class="w"> </span><span class="n">book</span><span class="p">,</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">deleted</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">generally</span>
<span class="w">        </span><span class="o">//</span><span class="w">       </span><span class="n">be</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">better</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">messages</span>
<span class="w">        </span><span class="o">//</span><span class="w">       </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">compilers</span><span class="w"> </span><span class="n">behavior</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">accessibility</span>
<span class="w">        </span><span class="o">//</span><span class="w">       </span><span class="n">before</span><span class="w"> </span><span class="n">deleted</span><span class="w"> </span><span class="n">status</span>
<span class="p">};</span>
</pre></div>

<p>See this article about when to use a singleton: (not often)<br>
Singleton: How should it be used</p>
<p>See this two article about initialization order and how to cope:<br>
Static variables initialisation order<br>
Finding C++ static initialization order problems</p>
<p>See this article describing lifetimes:<br>
What is the lifetime of a static variable in a C++ function?</p>
<p>See this article that discusses some threading implications to singletons:<br>
Singleton instance declared as static variable of GetInstance method, is it
thread-safe?</p>
<p>See this article that explains why double checked locking will not work on
C++:<br>
What are all the common undefined behaviours that a C++ programmer should know
about?<br>
Dr Dobbs: C++ and The Perils of Double-Checked Locking: Part I</p>
<p><br></p>
<h3>Suggest</h3>
<p>You could avoid memory allocation. There are many variants, all having
problems in case of multithreading environment.</p>
<p>I prefer this kind of implementation (actually, it is not correctly said I
prefer, because I avoid singletons as much as possible):</p>
<div class="code"><pre class="code literal-block"><span class="nt">class</span><span class="w"> </span><span class="nt">Singleton</span>
<span class="p">{</span>
<span class="n">private</span><span class="p">:</span>
<span class="w">   </span><span class="nf">Singleton</span><span class="p">();</span>

<span class="n">public</span><span class="p">:</span>
<span class="w">   </span><span class="kc">static</span><span class="w"> </span><span class="n">Singleton</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">instance</span><span class="p">()</span>
<span class="w">   </span><span class="err">{</span>
<span class="w">      </span><span class="kc">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">INSTANCE</span><span class="p">;</span>
<span class="w">      </span><span class="err">return</span><span class="w"> </span><span class="err">INSTANCE</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
</pre></div>

<p>It has no dynamic memory allocation.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-593.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-591.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
