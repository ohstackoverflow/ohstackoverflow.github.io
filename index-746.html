<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 746) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-746.html">
<link rel="prev" href="index-747.html" type="text/html">
<link rel="next" href="index-745.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-delay-the-keyup-handler-until-the-user-stops-typing/" class="u-url">How to delay the .keyup() handler until the user stops typing?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-delay-the-keyup-handler-until-the-user-stops-typing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:52:56+08:00" itemprop="datePublished" title="2023-02-17 14:52">2023-02-17 14:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I’ve got a search field. Right now it searches for every keyup. So if someone
types “Windows”, it will make a search with AJAX for every keyup: “W”, “Wi”,
“Win”, “Wind”, “Windo”, “Window”, “Windows”.</p>
<p>I want to have a delay, so it only searches when the user stops typing for 200
ms.</p>
<p>There is no option for this in the <code>keyup</code> function, and I have tried
<code>setTimeout</code>, but it didn’t work.</p>
<p>How can I do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I use this small function for the same purpose, executing a function after the
user has stopped typing for a specified amount of time or in events that fire
at a high rate, like <code>resize</code>:</p>
<div class="code"><pre class="code literal-block">function<span class="w"> </span>delay(callback,<span class="w"> </span>ms)<span class="w"> </span>{
<span class="w">  </span>var<span class="w"> </span>timer<span class="w"> </span>=<span class="w"> </span>0;
<span class="w">  </span>return<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span>var<span class="w"> </span>context<span class="w"> </span>=<span class="w"> </span>this,<span class="w"> </span>args<span class="w"> </span>=<span class="w"> </span>arguments;
<span class="w">    </span>clearTimeout(timer);
<span class="w">    </span>timer<span class="w"> </span>=<span class="w"> </span>setTimeout(function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">      </span>callback.apply(context,<span class="w"> </span>args);
<span class="w">    </span>},<span class="w"> </span>ms<span class="w"> </span>||<span class="w"> </span>0);
<span class="w">  </span>};
}


//<span class="w"> </span>Example<span class="w"> </span>usage:

$('#input').keyup(delay(function<span class="w"> </span>(e)<span class="w"> </span>{
<span class="w">  </span>console.log('Time<span class="w"> </span>elapsed!',<span class="w"> </span>this.value);
},<span class="w"> </span>500));


<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"input"</span><span class="nt">&gt;</span>Try<span class="w"> </span>it:
<span class="nt">&lt;input</span><span class="w"> </span><span class="na">id=</span><span class="s">"input"</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">placeholder=</span><span class="s">"Type something here..."</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/label&gt;</span>
</pre></div>

<h3>How it works:</h3>
<p>The <code>delay</code> function will return a wrapped function that internally handles an
individual timer, in each execution the timer is restarted with the time delay
provided, if multiple executions occur before this time passes, the timer will
just reset and start again.</p>
<p>When the timer finally ends, the callback function is executed, passing the
original context and arguments (in this example, the jQuery's event object,
and the DOM element as <code>this</code>).</p>
<h3>UPDATE 2019-05-16</h3>
<p>I have re-implemented the function using ES5 and ES6 features for modern
environments:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">delay</span><span class="ss">(</span><span class="nv">fn</span>,<span class="w"> </span><span class="nv">ms</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">let</span><span class="w"> </span><span class="nv">timer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">function</span><span class="ss">(</span>...<span class="nv">args</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">clearTimeout</span><span class="ss">(</span><span class="nv">timer</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">timer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">setTimeout</span><span class="ss">(</span><span class="nv">fn</span>.<span class="nv">bind</span><span class="ss">(</span><span class="nv">this</span>,<span class="w"> </span>...<span class="nv">args</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">ms</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mi">0</span><span class="ss">)</span>
<span class="w">  </span>}
}
</pre></div>

<p>The implementation is covered with a set of tests.</p>
<p>For something more sophisticated, give a look to the jQuery Typewatch plugin.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you want to search after the type is done use a global variable to hold the
timeout returned from your <code>setTimout</code> call and cancel it with a
<code>clearTimeout</code> if it hasn't yet happend so that it won't fire the timeout
except on the last <code>keyup</code> event</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w">  </span>
<span class="o">$</span><span class="p">(</span><span class="s1">'#id'</span><span class="p">)</span><span class="o">.</span><span class="n">keyup</span><span class="p">(</span><span class="n">function</span><span class="p">(){</span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w"> </span><span class="n">clearTimeout</span><span class="p">(</span><span class="n">globalTimeout</span><span class="p">);</span><span class="w">  </span>
<span class="w">  </span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">=</span><span class="n">setTimeout</span><span class="p">(</span><span class="n">SearchFunc</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span><span class="w">  </span>
<span class="p">}</span><span class="w">   </span>
<span class="n">function</span><span class="w"> </span><span class="n">SearchFunc</span><span class="p">(){</span><span class="w">  </span>
<span class="w">  </span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w">  </span>
<span class="w">  </span><span class="o">//</span><span class="n">ajax</span><span class="w"> </span><span class="n">code</span>
<span class="p">}</span>
</pre></div>

<p>Or with an anonymous function :</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w">  </span>
<span class="o">$</span><span class="p">(</span><span class="s1">'#id'</span><span class="p">)</span><span class="o">.</span><span class="n">keyup</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">clearTimeout</span><span class="p">(</span><span class="n">globalTimeout</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">setTimeout</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">globalTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="n">ajax</span><span class="w"> </span><span class="n">code</span>

<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span><span class="w">  </span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for/" class="u-url">What's the shebang/hashbang (#!) in Facebook and new Twitter URLs for?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:52:26+08:00" itemprop="datePublished" title="2023-02-17 14:52">2023-02-17 14:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've just noticed that the long, convoluted Facebook URLs that we're used to
now look like this:</p>
<p><code>http://www.facebook.com/example.profile#!/pages/Another-Page/123456789012345</code></p>
<p>As far as I can recall, earlier this year it was just a normal URL-fragment-
like string (starting with <code>#</code>), without the exclamation mark. But now it's a
shebang or hashbang (<code>#!</code>), which I've previously only seen in shell scripts
and Perl scripts.</p>
<p>The new Twitter URLs now also feature the <code>#!</code> symbols. A Twitter profile URL,
for example, now looks like this:</p>
<p><code>http://twitter.com/#!/BoltClock</code></p>
<p>Does <code>#!</code> now play some special role in URLs, like for a certain Ajax
framework or something since the new Facebook and Twitter interfaces are now
largely Ajaxified?<br>
Would using this in my URLs benefit my Web application in any way?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>This technique is now deprecated.</strong></p>
<p>This <strong>used to</strong> tell Google how to index the page.</p>
<p>https://developers.google.com/webmasters/ajax-crawling/</p>
<p>This technique has mostly been supplanted by the ability to use the JavaScript
History API that was introduced alongside HTML5. For a URL like
<code>www.example.com/ajax.html#!key=value</code>, Google will check the URL
<code>www.example.com/ajax.html?_escaped_fragment_=key=value</code> to fetch a non-AJAX
version of the contents.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The octothorpe/number-sign/hashmark has a special significance in an URL, it
normally identifies the name of a section of a document. The precise term is
that the text following the hash is the <em>anchor</em> portion of an URL. If you use
Wikipedia, you will see that most pages have a table of contents and you can
jump to sections within the document with an anchor, such as:</p>
<p>https://en.wikipedia.org/wiki/Alan_Turing#Early_computers_and_the_Turing_test</p>
<p><code>https://en.wikipedia.org/wiki/Alan_Turing</code> identifies the page and
<code>Early_computers_and_the_Turing_test</code> is the anchor. The reason that Facebook
and other Javascript-driven applications (like my own Wood &amp; Stones) use
anchors is that they want to make pages bookmarkable (as suggested by a
comment on that answer) or support the back button <em>without reloading the
entire page from the server</em>.</p>
<p>In order to support bookmarking and the back button, you need to change the
URL. However, if you change the page portion (with something like
<code>window.location = 'http://raganwald.com';</code>) to a different URL or without
specifying an anchor, the browser will load the entire page from the URL. Try
this in Firebug or Safari's Javascript console. Load <code>http://minimal-
github.gilesb.com/raganwald</code>. Now in the Javascript console, type:</p>
<div class="code"><pre class="code literal-block"><span class="nt">window</span><span class="p">.</span><span class="nc">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'http://minimal-github.gilesb.com/raganwald'</span><span class="o">;</span>
</pre></div>

<p>You will see the page refresh from the server. Now type:</p>
<div class="code"><pre class="code literal-block"><span class="nt">window</span><span class="p">.</span><span class="nc">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'http://minimal-github.gilesb.com/raganwald#try_this'</span><span class="o">;</span>
</pre></div>

<p>Aha! No page refresh! Type:</p>
<div class="code"><pre class="code literal-block"><span class="nt">window</span><span class="p">.</span><span class="nc">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'http://minimal-github.gilesb.com/raganwald#and_this'</span><span class="o">;</span>
</pre></div>

<p>Still no refresh. Use the back button to see that these URLs are in the
browser history. The browser notices that we are on the same page but just
changing the anchor, so it doesn't reload. Thanks to this behaviour, we can
have a single Javascript application that appears to the browser to be on one
'page' but to have many bookmarkable sections that respect the back button.
The application must change the anchor when a user enters different 'states',
and likewise if a user uses the back button or a bookmark or a link to load
the application with an anchor included, the application must restore the
appropriate state.</p>
<p>So there you have it: Anchors provide Javascript programmers with a mechanism
for making bookmarkable, indexable, and back-button-friendly applications.
This technique has a name: It is a Single Page Interface.</p>
<p>p.s. There is a fourth benefit to this technique: Loading page content through
AJAX and then injecting it into the current DOM can be much faster than
loading a new page. In addition to the speed increase, further tricks like
loading certain portions in the background can be performed under the
programmer's control.</p>
<p>p.p.s. Given all of that, the 'bang' or exclamation mark is a further hint to
Google's web crawler that the exact same page can be loaded from the server at
a slightly different URL. See Ajax Crawling. Another technique is to make each
link point to a server-accessible URL and then use unobtrusive Javascript to
change it into an SPI with an anchor.</p>
<p>Here's the key link again: The Single Page Interface Manifesto</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-decompile-dex-into-java-source-code/" class="u-url">How to decompile DEX into Java source code?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-decompile-dex-into-java-source-code/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:51:56+08:00" itemprop="datePublished" title="2023-02-17 14:51">2023-02-17 14:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can one decompile Android DEX (VM bytecode) files into corresponding Java
source code?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>It's easy</h2>
<p>Get these tools:</p>
<ol>
<li>
<p>dex2jar to translate dex files to jar files</p>
</li>
<li>
<p>jd-gui to view the java files in the jar</p>
</li>
</ol>
<p>The source code is quite readable as dex2jar makes some optimizations.</p>
<h3>Procedure:</h3>
<p>And here's the procedure on how to decompile:</p>
<h4>Step 1:</h4>
<p>Convert classes.dex in test_apk-debug.apk to test_apk-debug_dex2jar.jar</p>
<div class="code"><pre class="code literal-block">d2j-dex2jar.sh -f -o output_jar.jar apk_to_decompile.apk
d2j-dex2jar.sh -f -o output_jar.jar dex_to_decompile.dex
</pre></div>

<blockquote>
<p><strong>Note 1:</strong> In the Windows machines all the <code>.sh</code> scripts are replaced by
<code>.bat</code> scripts</p>
<p><strong>Note 2:</strong> On linux/mac don't forget about <code>sh</code> or <code>bash</code>. The full command
should be:</p>
</blockquote>
<div class="code"><pre class="code literal-block">sh d2j-dex2jar.sh -f -o output_jar.jar apk_to_decompile.apk
</pre></div>

<blockquote>
<p><strong>Note 3:</strong> Also, remember to add execute permission to <code>dex2jar-X.X</code>
directory e.g. <code>sudo chmod -R +x dex2jar-2.0</code></p>
</blockquote>
<p>dex2jar documentation</p>
<h4>Step 2:</h4>
<p>Open the jar in JD-GUI</p>
<p><img alt="The decompiled source" src="images/PWJIX.png"></p>
<p><br></p>
<h3>Suggest</h3>
<p>To clarify somewhat, there are two major paths you might take here depending
on what you want to accomplish:</p>
<p>Decompile the Dalvik bytecode (dex) into readable Java source. You can do this
easily with dex2jar and jd-gui, as fred mentions. The resulting source is
useful to read and understand the functionality of an app, but will likely not
produce 100% usable code. In other words, you can read the source, but you
can't really modify and repackage it. Note that if the source has been
obfuscated with proguard, the resulting source code will be substantially more
difficult to untangle.</p>
<p>The other major alternative is to disassemble the bytecode to smali, an
assembly language designed for precisely this purpose. I've found that the
easiest way to do this is with apktool. Once you've got apktool installed, you
can just point it at an apk file, and you'll get back a smali file for each
class contained in the application. You can read and modify the smali or even
replace classes entirely by generating smali from new Java source (to do this,
you could compile your .java source to .class files with javac, then convert
your .class files to .dex files with Android's dx compiler, and then use
baksmali (smali disassembler) to convert the .dex to .smali files, as
described in this question. There might be a shortcut here). Once you're done,
you can easily package the apk back up with apktool again. Note that apktool
does not sign the resulting apk, so you'll need to take care of that just like
any other Android application.</p>
<p>If you go the smali route, you might want to try APK Studio, an IDE that
automates some of the above steps to assist you with decompiling and
recompiling an apk and installing it on a device.</p>
<p>In short, your choices are pretty much either to decompile into Java, which is
more readable but likely irreversible, or to disassemble to smali, which is
harder to read but much more flexible to make changes and repackage a modified
app. Which approach you choose would depend on what you're looking to achieve.</p>
<p>Lastly, the suggestion of dare is also of note. It's a retargeting tool to
convert .dex and .apk files to java .class files, so that they can be analyzed
using typical java static analysis tools.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-747.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-745.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
