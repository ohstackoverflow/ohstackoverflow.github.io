<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 303) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-303.html">
<link rel="prev" href="index-304.html" type="text/html">
<link rel="next" href="index-302.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/xcode-how-to-fix-nsunknownkeyexception-reason-this-class-is-not-key-value-coding-compliant-for-the-key-x-error/" class="u-url">Xcode - How to fix 'NSUnknownKeyException', reason: … this class is not key value coding-compliant for the key X" error?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/xcode-how-to-fix-nsunknownkeyexception-reason-this-class-is-not-key-value-coding-compliant-for-the-key-x-error/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:27:12+08:00" itemprop="datePublished" title="2023-02-17 03:27">2023-02-17 03:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to link a <code>UILabel</code> with an <code>IBOutlet</code> created in my class.</p>
<p>My application is crashing with the following error.</p>
<p>What does this mean?</p>
<p>How can I fix it?</p>
<blockquote>
<p>*** Terminating app due to uncaught exception 'NSUnknownKeyException',
reason: '[<uiviewcontroller> setValue:forUndefinedKey:]: this
class is not key value coding-compliant for the key XXX.'</uiviewcontroller></p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<h3>Your view controller may have the wrong class in your xib.</h3>
<p>I downloaded your project.</p>
<p>The error you are getting is</p>
<blockquote>
<p>'NSUnknownKeyException', reason: '[<uiviewcontroller>
setValue:forUndefinedKey:]: this class is not key value coding-compliant for
the key string.'</uiviewcontroller></p>
</blockquote>
<p>It is caused by the <code>Second</code> view controller in <code>MainWindow.xib</code> having a
class of <strong><code>UIViewController</code> instead of <code>SecondView</code></strong>. Changing to the
correct class resolves the problem.</p>
<p>By the way, it is bad practice to have names like "string" in Objective-C. It
invites a runtime naming collision. Avoid them even in once off practice apps.
Naming collisions can be very hard to track down and you don't want to waste
the time.</p>
<p>Another possible reason for this error: when copying &amp; pasting elements from
one controller into another, Xcode somehow keeps that link to the original
controller, even after editing &amp; relinking this element into the new
controller.</p>
<p><strong>Another possible reason for this error:</strong></p>
<p>Bad Outlet.</p>
<p>You have either <em>removed</em> or <em>renamed</em> an outlet name in your <code>.h</code> file.</p>
<p>Remove it in <code>.xib</code> or <code>.storyboard</code> file's Connection Inspector.</p>
<p><strong>One more possible reason</strong></p>
<p>(In my case) Extension of UIView with bindable properties and setting values
for those bindable properties (i.e. shadow, corner radius etc.) then remove
those properties from UIView extension (for some reason) but the following
<code>&lt;userDefinedRuntimeAttributes&gt;</code> remained in xml (of <code>foo.storyboard</code>):</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;userDefinedRuntimeAttributes&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"color"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowColor"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">white=</span><span class="s">"0.0"</span><span class="w"> </span><span class="na">alpha=</span><span class="s">"1"</span><span class="w"> </span><span class="na">colorSpace=</span><span class="s">"custom"</span><span class="w"> </span><span class="na">customColorSpace=</span><span class="s">"genericGamma22GrayColorSpace"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"number"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowOpacity"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;real</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">value=</span><span class="s">"50"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"point"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowOffset"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;point</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">x=</span><span class="s">"5"</span><span class="w"> </span><span class="na">y=</span><span class="s">"5"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"number"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowRadius"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;real</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">value=</span><span class="s">"16"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"number"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"borderWidthValue"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;real</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">value=</span><span class="s">"0.0"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="nt">&lt;/userDefinedRuntimeAttributes&gt;</span>
</pre></div>

<p><strong>Solution:</strong> Right click on <code>foo.storyboard</code> &gt; Open as Source Code &gt; search
by keyPath (i.e. shadowRadius) &gt; Delete the <code>&lt;/userDefinedRuntimeAttributes&gt;</code>
that causing the problem</p>
<p><br></p>
<h3>Suggest</h3>
<h3>Your view controller may have the wrong class in your xib.</h3>
<p>I downloaded your project.</p>
<p>The error you are getting is</p>
<blockquote>
<p>'NSUnknownKeyException', reason: '[<uiviewcontroller>
setValue:forUndefinedKey:]: this class is not key value coding-compliant for
the key string.'</uiviewcontroller></p>
</blockquote>
<p>It is caused by the <code>Second</code> view controller in <code>MainWindow.xib</code> having a
class of <strong><code>UIViewController</code> instead of <code>SecondView</code></strong>. Changing to the
correct class resolves the problem.</p>
<p>By the way, it is bad practice to have names like "string" in Objective-C. It
invites a runtime naming collision. Avoid them even in once off practice apps.
Naming collisions can be very hard to track down and you don't want to waste
the time.</p>
<p>Another possible reason for this error: when copying &amp; pasting elements from
one controller into another, Xcode somehow keeps that link to the original
controller, even after editing &amp; relinking this element into the new
controller.</p>
<p><strong>Another possible reason for this error:</strong></p>
<p>Bad Outlet.</p>
<p>You have either <em>removed</em> or <em>renamed</em> an outlet name in your <code>.h</code> file.</p>
<p>Remove it in <code>.xib</code> or <code>.storyboard</code> file's Connection Inspector.</p>
<p><strong>One more possible reason</strong></p>
<p>(In my case) Extension of UIView with bindable properties and setting values
for those bindable properties (i.e. shadow, corner radius etc.) then remove
those properties from UIView extension (for some reason) but the following
<code>&lt;userDefinedRuntimeAttributes&gt;</code> remained in xml (of <code>foo.storyboard</code>):</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;userDefinedRuntimeAttributes&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"color"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowColor"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">white=</span><span class="s">"0.0"</span><span class="w"> </span><span class="na">alpha=</span><span class="s">"1"</span><span class="w"> </span><span class="na">colorSpace=</span><span class="s">"custom"</span><span class="w"> </span><span class="na">customColorSpace=</span><span class="s">"genericGamma22GrayColorSpace"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"number"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowOpacity"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;real</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">value=</span><span class="s">"50"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"point"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowOffset"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;point</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">x=</span><span class="s">"5"</span><span class="w"> </span><span class="na">y=</span><span class="s">"5"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"number"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"shadowRadius"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;real</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">value=</span><span class="s">"16"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="w">  </span><span class="nt">&lt;userDefinedRuntimeAttribute</span><span class="w"> </span><span class="na">type=</span><span class="s">"number"</span><span class="w"> </span><span class="na">keyPath=</span><span class="s">"borderWidthValue"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;real</span><span class="w"> </span><span class="na">key=</span><span class="s">"value"</span><span class="w"> </span><span class="na">value=</span><span class="s">"0.0"</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/userDefinedRuntimeAttribute&gt;</span>
<span class="nt">&lt;/userDefinedRuntimeAttributes&gt;</span>
</pre></div>

<p><strong>Solution:</strong> Right click on <code>foo.storyboard</code> &gt; Open as Source Code &gt; search
by keyPath (i.e. shadowRadius) &gt; Delete the <code>&lt;/userDefinedRuntimeAttributes&gt;</code>
that causing the problem</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-check-if-a-variable-exists/" class="u-url">How do I check if a variable exists?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-check-if-a-variable-exists/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:26:46+08:00" itemprop="datePublished" title="2023-02-17 03:26">2023-02-17 03:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to check if a variable exists. Now I'm doing something like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">try</span><span class="o">:</span>
<span class="w">    </span><span class="n">myVar</span>
<span class="n">except</span><span class="w"> </span><span class="n">NameError</span><span class="o">:</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">something</span><span class="o">.</span>
</pre></div>

<p>Are there other ways without exceptions?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To check the existence of a local variable:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="s1">'myVar'</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">locals</span><span class="ss">()</span>:
<span class="w">  </span>#<span class="w"> </span><span class="nv">myVar</span><span class="w"> </span><span class="nv">exists</span>.
</pre></div>

<p>To check the existence of a global variable:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="s1">'myVar'</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">globals</span><span class="ss">()</span>:
<span class="w">  </span>#<span class="w"> </span><span class="nv">myVar</span><span class="w"> </span><span class="nv">exists</span>.
</pre></div>

<p>To check if an object has an attribute:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">hasattr</span><span class="ss">(</span><span class="nv">obj</span>,<span class="w"> </span><span class="s1">'attr_name'</span><span class="ss">)</span>:
<span class="w">  </span>#<span class="w"> </span><span class="nv">obj</span>.<span class="nv">attr_name</span><span class="w"> </span><span class="nv">exists</span>.
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The use of variables that have yet to been defined or set (implicitly or
explicitly) is often a bad thing in <em>any</em> language, since it tends to indicate
that the logic of the program hasn't been thought through properly, and is
likely to result in unpredictable behaviour.</p>
<p>If you <em>need</em> to do it in Python, the following trick, which is similar to
yours, will ensure that a variable has <em>some</em> value before use:</p>
<div class="code"><pre class="code literal-block"><span class="k">try</span><span class="o">:</span>
<span class="w">    </span><span class="n">myVar</span>
<span class="n">except</span><span class="w"> </span><span class="n">NameError</span><span class="o">:</span>
<span class="w">    </span><span class="n">myVar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">None</span><span class="w">      </span><span class="err">#</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">value</span><span class="o">.</span>

<span class="err">#</span><span class="w"> </span><span class="n">Now</span><span class="w"> </span><span class="n">you</span><span class="err">'</span><span class="n">re</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">myVar</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="n">complaining</span><span class="o">.</span>
</pre></div>

<p>However, I'm still not convinced that's a good idea - in my opinion, you
should try to refactor your code so that this situation does not occur.</p>
<p>By way of an example, the following code was given below in a comment, to
allow line drawing from a previous point to the current point:</p>
<div class="code"><pre class="code literal-block"><span class="nt">if</span><span class="w"> </span><span class="nt">last</span><span class="o">:</span>
<span class="w">    </span><span class="nt">draw</span><span class="o">(</span><span class="nt">last</span><span class="o">,</span><span class="w"> </span><span class="nt">current</span><span class="o">);</span>
<span class="nt">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">current</span>
</pre></div>

<p>In the case where <code>last</code> has not been bound to a value, that won't help in
Python at all since even the <em>checking</em> of <code>last</code> will raise an exception. A
better idea would be to ensure <code>last</code> <em>does</em> have a value, one that can be
used to decide whether or not it is valid. That would be something like:</p>
<div class="code"><pre class="code literal-block"><span class="nt">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">None</span>

<span class="err">#</span><span class="w"> </span><span class="nt">some</span><span class="w"> </span><span class="nt">time</span><span class="w"> </span><span class="nt">passes</span><span class="w"> </span><span class="o">...</span>

<span class="nt">if</span><span class="w"> </span><span class="nt">last</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">None</span><span class="o">:</span>
<span class="w">    </span><span class="nt">draw</span><span class="o">(</span><span class="nt">last</span><span class="o">,</span><span class="w"> </span><span class="nt">current</span><span class="o">);</span>
<span class="nt">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">current</span>
</pre></div>

<p>That ensures the variable exists and that you only use it if it's valid for
what you need it for. This is what I assume the <code>if last</code> was <em>meant</em> to do in
the comment code (but didn't), and you can still add the code to <em>force</em> this
if you have no control over the initial setting of the variable, using the
exception method above:</p>
<div class="code"><pre class="code literal-block"><span class="err">#</span><span class="w"> </span><span class="nt">Variable</span><span class="w"> </span><span class="s1">'last'</span><span class="w"> </span><span class="nt">may</span><span class="w"> </span><span class="nt">or</span><span class="w"> </span><span class="nt">may</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">be</span><span class="w"> </span><span class="nt">bound</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="nt">value</span><span class="w"> </span><span class="nt">at</span><span class="w"> </span><span class="nt">this</span><span class="w"> </span><span class="nt">point</span><span class="o">.</span>

<span class="nt">try</span><span class="o">:</span>
<span class="w">    </span><span class="nt">last</span>
<span class="nt">except</span><span class="w"> </span><span class="nt">NameError</span><span class="o">:</span>
<span class="w">    </span><span class="nt">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">None</span>

<span class="err">#</span><span class="w"> </span><span class="nt">It</span><span class="w"> </span><span class="nt">will</span><span class="w"> </span><span class="nt">always</span><span class="w"> </span><span class="nt">now</span><span class="w"> </span><span class="nt">be</span><span class="w"> </span><span class="nt">bound</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="nt">value</span><span class="w"> </span><span class="nt">at</span><span class="w"> </span><span class="nt">this</span><span class="w"> </span><span class="nt">point</span><span class="o">.</span>

<span class="nt">if</span><span class="w"> </span><span class="nt">last</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">None</span><span class="o">:</span>
<span class="w">    </span><span class="nt">draw</span><span class="o">(</span><span class="nt">last</span><span class="o">,</span><span class="w"> </span><span class="nt">current</span><span class="o">);</span>
<span class="nt">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">current</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-select-and-selectmany/" class="u-url">Difference Between Select and SelectMany</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-select-and-selectmany/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:26:20+08:00" itemprop="datePublished" title="2023-02-17 03:26">2023-02-17 03:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've been searching the difference between <code>Select</code> and <code>SelectMany</code> but I
haven't been able to find a suitable answer. I need to learn the difference
when using LINQ To SQL but all I've found are standard array examples.</p>
<p>Can someone provide a LINQ To SQL example?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>SelectMany</code> flattens queries that return lists of lists. For example</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">PhoneNumber</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">get</span><span class="p">;</span><span class="w"> </span><span class="n">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Person</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">PhoneNumber</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PhoneNumbers</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">get</span><span class="p">;</span><span class="w"> </span><span class="n">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">get</span><span class="p">;</span><span class="w"> </span><span class="n">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="n">people</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="p">();</span>

<span class="o">//</span><span class="w"> </span><span class="n">Select</span><span class="w"> </span><span class="n">gets</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="n">numbers</span>
<span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">PhoneNumber</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">phoneLists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">people</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">PhoneNumbers</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">SelectMany</span><span class="w"> </span><span class="n">flattens</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="n">numbers</span><span class="o">.</span>
<span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">PhoneNumber</span><span class="o">&gt;</span><span class="w"> </span><span class="n">phoneNumbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">people</span><span class="o">.</span><span class="n">SelectMany</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">PhoneNumbers</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">And</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="p">:</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="k">pass</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="p">(</span><span class="n">resultSelector</span><span class="p">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">overload</span><span class="p">:</span>
<span class="k">var</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">people</span>
<span class="w">   </span><span class="o">.</span><span class="n">SelectMany</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">PhoneNumbers</span><span class="p">,</span>
<span class="w">               </span><span class="p">(</span><span class="n">parent</span><span class="p">,</span><span class="w"> </span><span class="n">child</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">parent</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">child</span><span class="o">.</span><span class="n">Number</span><span class="w"> </span><span class="p">});</span>
</pre></div>

<p>Live Demo on .NET Fiddle</p>
<p><br></p>
<h3>Suggest</h3>
<p>Select many is like cross join operation in SQL where it takes the cross
product.<br>
For example if we have</p>
<div class="code"><pre class="code literal-block">Set A={a,b,c}
Set B={x,y}
</pre></div>

<p>Select many can be used to get the following set</p>
<div class="code"><pre class="code literal-block">{ (x,a) , (x,b) , (x,c) , (y,a) , (y,b) , (y,c) }
</pre></div>

<p>Note that here we take the all the possible combinations that can be made from
the elements of set A and set B.</p>
<p>Here is a LINQ example you can try</p>
<div class="code"><pre class="code literal-block"><span class="n">List</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">animals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"cat"</span><span class="p">,</span><span class="w"> </span><span class="s2">"dog"</span><span class="p">,</span><span class="w"> </span><span class="s2">"donkey"</span><span class="w"> </span><span class="p">};</span>
<span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">int</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="p">};</span>

<span class="k">var</span><span class="w"> </span><span class="n">mix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number</span><span class="o">.</span><span class="n">SelectMany</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">animals</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">});</span>
</pre></div>

<p>the mix will have following elements in flat structure like</p>
<div class="code"><pre class="code literal-block">{(10,cat), (10,dog), (10,donkey), (20,cat), (20,dog), (20,donkey)}
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-304.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-302.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
