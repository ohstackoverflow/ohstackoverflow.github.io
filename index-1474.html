<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1474) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1474.html">
<link rel="prev" href="index-1475.html" type="text/html">
<link rel="next" href="index-1473.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-keys-of-solidity-mapping/" class="u-url">Get Keys of Solidity mapping</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-keys-of-solidity-mapping/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T04:53:52+08:00" itemprop="datePublished" title="2023-02-28 04:53">2023-02-28 04:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was trying to get keys of a mapping to star name and address of particular
contract (not exactly) in solidity contract</p>
<div class="code"><pre class="code literal-block">mapping(string=&gt;address) nameOfAccounts;
</pre></div>

<p>What i am expecting is a method like the <code>Object.keys(nameOfAccounts)</code> in
Javascript. Is there any similar method ?. or should i use an additional
<code>array</code>. The additional Array may cause extra gas cost(This is not an option
that i prefer). Please share some insights</p>
<p>I wanted to know if there is another method that i can do if getting keys is
not an option?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The best way to iterate over the keys is that when a key is added you also
emit a Solidity event.</p>
<p>You get keys from the event logs. This can be done client-side (JavaScript,
Python) but not within Solidity itself, as EVM does not have access to event
data.</p>
<p>Solidity/EVM does not store iterable keys due to efficiency reasons in
execution constrained environment.</p>
<p>More information here.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The best way to iterate over the keys is that when a key is added you also
emit a Solidity event.</p>
<p>You get keys from the event logs. This can be done client-side (JavaScript,
Python) but not within Solidity itself, as EVM does not have access to event
data.</p>
<p>Solidity/EVM does not store iterable keys due to efficiency reasons in
execution constrained environment.</p>
<p>More information here.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/consensus-of-hyperledger-fabric/" class="u-url">Consensus of Hyperledger Fabric</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/consensus-of-hyperledger-fabric/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T04:53:32+08:00" itemprop="datePublished" title="2023-02-28 04:53">2023-02-28 04:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm new with Hyperledger Fabric. I'm reading with the document of Fabric
latest version, but I'm not clear with consensus of Fabric. What is the
consensus that Fabric used? And how does it work? Please explain.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I am assuming that you know the basics of consensus in the Blockchain context.
Hyperledger Fabric's consensus can be treated as a special case of the same,
may be a power-packed one. It kind of checks the transaction during multiple
phases to ensure the permission, order and correctness of changes which are
getting written to ledger.</p>
<p>In Fabric, when you are executing a transaction, if not in error, you would
want this transaction to commit to the ledger, ie, to write the transaction
into a block in the ledger in the right order. And then the same to be
consistently synchronized across all participants in the network, through a
collaborative process. So this process which ensures correctness in order and
data synchronization - is called consensus</p>
<p>HLF Standard definition is</p>
<blockquote>
<p>The process of keeping the ledger transactions synchronized across the
network – to ensure that ledgers update only when transactions are approved
by the appropriate participants, and that when ledgers do update, they
update with the same transactions in the same order – is called consensus</p>
</blockquote>
<p>This is done across the entire transaction cycle in the following ways</p>
<ol>
<li>When you are submitting the transactions, i.e, when you invoke a function in the smart contract, the Client SDK which you are using has to send that transaction proposal to the endorsers ( specific to that smart contract in the specific channel ) This transaction proposal is <strong>takes the user’s cryptographic credentials to produce a unique signature</strong>
</li>
<li>Endorsing peers do their share of checks, <strong>like proposal is valid, user who has attempted the transaction has the privilege for the same in that channel etc</strong> . And then they would simulate the transaction - and creates a response and R/W set. This is sent as proposal response which comes back to SDK.</li>
<li>SDK accumulates them and checks them and then sends them out to the orderer. <strong>Orderer will order the transaction as per time and creates a block and sends the block out to all the peers in the relevant channel</strong>
</li>
<li>Peers who receive the block starts <strong>inspecting each transaction in the block (using Validation System Chaincode), to see endorsement is done for all of them &amp; r/w set is proper ( MVCC check)</strong>. Depending on the checks, the transactions may be marked valid or invalid</li>
</ol>
<p>So once all the checks are ok, the transaction is marked valid and current
state is updated, and finally the blocks is written and events are generated
accordingly. This way the consensus is accomplished over multiple stages in
Hyperledger fabric. I think you would understand better if you refer to this
link below Hyperledger Fabric Transaction Flow</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-make-sure-transactions-take-0-fee-in-a-private-ethereum-blockchain/" class="u-url">How to make sure transactions take 0 fee in a private Ethereum blockchain?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-make-sure-transactions-take-0-fee-in-a-private-ethereum-blockchain/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T04:53:15+08:00" itemprop="datePublished" title="2023-02-28 04:53">2023-02-28 04:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a private parity node setup on my laptop. How can I make sure that
there is <strong>0 transaction fee</strong> whenever a transaction is posted in this
private ethereum blockchain, meaning that I can post a transaction giving
"gas: 0"?</p>
<p>Example: Account A has 20 ether, Account B has 0 ether. When I transfer 10
ether from Account A to Account B, Account A now shows 9.980 and Account B
shows 10.</p>
<p>How can I prevent the extra gas being deducted?</p>
<p>Any help is appreciated.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You control the miners in the private network, so you just need to customize
them to accept transactions with gasPrice = 0.</p>
<p>From the Parity documentation:</p>
<div class="code"><pre class="code literal-block"><span class="o">--</span><span class="nv">gasprice</span><span class="w"> </span><span class="nv">WEI</span><span class="w">                   </span><span class="nv">Minimum</span><span class="w"> </span><span class="nv">amount</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Wei</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="nv">GAS</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">paid</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">a</span>
<span class="w">                                 </span><span class="nv">transaction</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">accepted</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">mining</span>.<span class="w"> </span><span class="nv">Overrides</span>
<span class="w">                                 </span><span class="o">--</span><span class="nv">basic</span><span class="o">-</span><span class="nv">tx</span><span class="o">-</span><span class="nv">usd</span>.
</pre></div>

<p>Note that this doesn't change how gas itself works in the network. You still
have gas limits and can generate out of gas errors. The only difference is
that the client is saying it will pay 0 for gas on a transaction and the miner
is staying it is willing to accept transactions at 0 price.</p>
<p>EDIT - To address comments:</p>
<p>Admittedly, I use Geth over Parity, but this works in Geth and I'd be
surprised if it was once supported in Parity and then disabled. You may have
to change the Parity source code to get it to work. Alternatively, you can
switch to Geth.</p>
<p>Showing the results in Geth below</p>
<p><strong>Terminal 1</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>geth<span class="w"> </span>--networkid<span class="w"> </span><span class="m">29462</span><span class="w"> </span>--datadir<span class="w"> </span><span class="s2">"./data"</span><span class="w"> </span>--gasprice<span class="w"> </span><span class="m">0</span><span class="w"> </span>--nodiscover<span class="w"> </span>--port<span class="w"> </span><span class="m">31313</span>

&lt;Output<span class="w"> </span>Truncated&gt;
</pre></div>

<p><strong>Terminal 2</strong></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>geth<span class="w"> </span>attach<span class="w"> </span><span class="s1">'//./pipe/geth.ipc'</span>
Welcome<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>Geth<span class="w"> </span>JavaScript<span class="w"> </span>console!

instance:<span class="w"> </span>Geth/v1.8.2-stable-b8b9f7f4/windows-amd64/go1.9.2
coinbase:<span class="w"> </span>0xd69cc234de15189f0ba998a41421961e89837fc5
at<span class="w"> </span>block:<span class="w"> </span><span class="m">79</span><span class="w"> </span><span class="o">(</span>Tue,<span class="w"> </span><span class="m">06</span><span class="w"> </span>Mar<span class="w"> </span><span class="m">2018</span><span class="w"> </span><span class="m">07</span>:56:30<span class="w"> </span>PST<span class="o">)</span>
<span class="w"> </span>datadir:<span class="w"> </span>C:<span class="se">\c</span>ygwin<span class="se">\h</span>ome<span class="se">\a</span>damk<span class="se">\e</span>th<span class="se">\p</span>rivate<span class="se">\n</span>ode1<span class="se">\d</span>ata
<span class="w"> </span>modules:<span class="w"> </span>admin:1.0<span class="w"> </span>debug:1.0<span class="w"> </span>eth:1.0<span class="w"> </span>miner:1.0<span class="w"> </span>net:1.0<span class="w"> </span>personal:1.0<span class="w"> </span>rpc:1.0<span class="w"> </span>txpool:1.0<span class="w"> </span>web3:1.0

&gt;<span class="w"> </span>web3.eth.getBalance<span class="o">(</span><span class="s1">'0x1b8c05505f86bf20c6a1110073cd6f9b3bf555df'</span><span class="o">)</span><span class="p">;</span>

<span class="m">2000000000000000000</span>

&gt;<span class="w"> </span>web3.eth.sendTransaction<span class="o">({</span>to:<span class="w"> </span><span class="s1">'0xd69cc234de15189f0ba998a41421961e89837fc5'</span>,<span class="w"> </span>from:<span class="w"> </span><span class="s1">'0x1b8c05505f86bf20c6a1110073cd6f9b3bf555df'</span>,<span class="w"> </span>gasLimit:<span class="w"> </span><span class="m">6000000</span>,<span class="w"> </span>gasPrice:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>value:<span class="w"> </span>web3.toWei<span class="o">(</span><span class="m">1</span>,<span class="w"> </span><span class="s1">'ether'</span><span class="o">)})</span><span class="p">;</span>

<span class="s2">"0x1eceea33aee0bd27feccd1d7aba371459090bb60af2cc18d63548112019ac2b9"</span>

&gt;<span class="w"> </span>web3.eth.getBalance<span class="o">(</span><span class="s1">'0x1b8c05505f86bf20c6a1110073cd6f9b3bf555df'</span><span class="o">)</span><span class="p">;</span>

<span class="m">1000000000000000000</span>

&gt;<span class="w"> </span>web3.eth.getTransaction<span class="o">(</span><span class="s1">'0x1eceea33aee0bd27feccd1d7aba371459090bb60af2cc18d63548112019ac2b9'</span><span class="o">)</span><span class="p">;</span>

<span class="o">{</span>
<span class="w">  </span>blockHash:<span class="w"> </span><span class="s2">"0xad40ce3bfa30b2551dbd085c29ac1800add8b9bc464944625b82fb17df567823"</span>,
<span class="w">  </span>blockNumber:<span class="w"> </span><span class="m">897</span>,
<span class="w">  </span>from:<span class="w"> </span><span class="s2">"0x1b8c05505f86bf20c6a1110073cd6f9b3bf555df"</span>,
<span class="w">  </span>gas:<span class="w"> </span><span class="m">90000</span>,
<span class="w">  </span>gasPrice:<span class="w"> </span><span class="m">0</span>,
<span class="w">  </span>hash:<span class="w"> </span><span class="s2">"0x1eceea33aee0bd27feccd1d7aba371459090bb60af2cc18d63548112019ac2b9"</span>,
<span class="w">  </span>input:<span class="w"> </span><span class="s2">"0x"</span>,
<span class="w">  </span>nonce:<span class="w"> </span><span class="m">0</span>,
<span class="w">  </span>r:<span class="w"> </span><span class="s2">"0xc55b5a25f4c7670418f304db44d949f5a077c1b4c8cfcc89b486a84cccb59d22"</span>,
<span class="w">  </span>s:<span class="w"> </span><span class="s2">"0x7d1d5ee1ed54a0098299d44bd692fc0d3d249609b3c01810beb00180d11e2e35"</span>,
<span class="w">  </span>to:<span class="w"> </span><span class="s2">"0xd69cc234de15189f0ba998a41421961e89837fc5"</span>,
<span class="w">  </span>transactionIndex:<span class="w"> </span><span class="m">0</span>,
<span class="w">  </span>v:<span class="w"> </span><span class="s2">"0x1b"</span>,
<span class="w">  </span>value:<span class="w"> </span><span class="m">1000000000000000000</span>
<span class="o">}</span>
</pre></div>

<p>(Note that the initiator of the transfer,
0x1b8c05505f86bf20c6a1110073cd6f9b3bf555df, was decremented by exactly 1
ether. No fees paid.)</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1475.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1473.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
