<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 709) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-709.html">
<link rel="prev" href="index-710.html" type="text/html">
<link rel="next" href="index-708.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-volatile-keyword-useful-for/" class="u-url">What is the volatile keyword useful for?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-volatile-keyword-useful-for/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:55:23+08:00" itemprop="datePublished" title="2023-02-17 13:55">2023-02-17 13:55</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>At work today, I came across the <code>volatile</code> keyword in Java. Not being very
familiar with it, I found this explanation.</p>
<p>Given the detail in which that article explains the keyword in question, do
you ever use it or could you ever see a case in which you could use this
keyword in the correct manner?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>volatile</code> has semantics for memory visibility. Basically, the value of a
<code>volatile</code> field becomes visible to all readers (other threads in particular)
after a write operation completes on it. Without <code>volatile</code>, readers could see
some non-updated value.</p>
<p>To answer your question: Yes, I use a <code>volatile</code> variable to control whether
some code continues a loop. The loop tests the <code>volatile</code> value and continues
if it is <code>true</code>. The condition can be set to <code>false</code> by calling a "stop"
method. The loop sees <code>false</code> and terminates when it tests the value after the
stop method completes execution.</p>
<p>The book "Java Concurrency in Practice," which I highly recommend, gives a
good explanation of <code>volatile</code>. This book is written by the same person who
wrote the IBM article that is referenced in the question (in fact, he cites
his book at the bottom of that article). My use of <code>volatile</code> is what his
article calls the "pattern 1 status flag."</p>
<p>If you want to learn more about how <code>volatile</code> works under the hood, read up
on the Java memory model. If you want to go beyond that level, check out a
good computer architecture book like Hennessy &amp; Patterson and read about cache
coherence and cache consistency.</p>
<p><br></p>
<h3>Suggest</h3>
<p><em>“… the volatile modifier guarantees that any thread that reads a field will
see the most recently written value.”</em> <strong>- Josh Bloch</strong>  </p>
<p>If you are thinking about using <code>volatile</code>, read up on the package
<code>java.util.concurrent</code> which deals with atomic behaviour.  </p>
<p>The Wikipedia post on a Singleton Pattern shows volatile in use.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/converting-iso-8601-compliant-string-to-java-util-date/" class="u-url">Converting ISO 8601-compliant String to java.util.Date</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/converting-iso-8601-compliant-string-to-java-util-date/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:54:51+08:00" itemprop="datePublished" title="2023-02-17 13:54">2023-02-17 13:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to convert an ISO 8601 formatted String to a <code>java.util.Date</code>.</p>
<p>I found the pattern <code>yyyy-MM-dd'T'HH:mm:ssZ</code> to be ISO8601-compliant if used
with a Locale (compare sample).</p>
<p>However, using the <code>java.text.SimpleDateFormat</code>, I cannot convert the
correctly formatted String <code>2010-01-01T12:00:00+01:00</code>. I have to convert it
first to <code>2010-01-01T12:00:00+0100</code>, without the colon.</p>
<p>So, the current solution is</p>
<div class="code"><pre class="code literal-block"><span class="nt">SimpleDateFormat</span><span class="w"> </span><span class="nt">ISO8601DATEFORMAT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">SimpleDateFormat</span><span class="o">(</span><span class="s2">"yyyy-MM-dd'T'HH:mm:ssZ"</span><span class="o">,</span><span class="w"> </span><span class="nt">Locale</span><span class="p">.</span><span class="nc">GERMANY</span><span class="o">);</span>
<span class="nt">String</span><span class="w"> </span><span class="nt">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2010-01-01T12:00:00+01:00"</span><span class="p">.</span><span class="nc">replaceAll</span><span class="o">(</span><span class="s2">"\\+0(</span><span class="cp">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="cp">]</span><span class="s2">){1}\\:00"</span><span class="o">,</span><span class="w"> </span><span class="s2">"+0$100"</span><span class="o">);</span>
<span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">.</span><span class="nc">println</span><span class="o">(</span><span class="nt">ISO8601DATEFORMAT</span><span class="p">.</span><span class="nc">parse</span><span class="o">(</span><span class="nt">date</span><span class="o">));</span>
</pre></div>

<p>which obviously isn't that nice. Am I missing something or is there a better
solution?</p>
<hr>
<p><strong>Answer</strong></p>
<p>Thanks to JuanZe's comment, I found the Joda-Time magic, it is also described
here.</p>
<p>So, the solution is</p>
<div class="code"><pre class="code literal-block"><span class="nt">DateTimeFormatter</span><span class="w"> </span><span class="nt">parser2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">ISODateTimeFormat</span><span class="p">.</span><span class="nc">dateTimeNoMillis</span><span class="o">();</span>
<span class="nt">String</span><span class="w"> </span><span class="nt">jtdate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2010-01-01T12:00:00+01:00"</span><span class="o">;</span>
<span class="nt">System</span><span class="p">.</span><span class="nc">out</span><span class="p">.</span><span class="nc">println</span><span class="o">(</span><span class="nt">parser2</span><span class="p">.</span><span class="nc">parseDateTime</span><span class="o">(</span><span class="nt">jtdate</span><span class="o">));</span>
</pre></div>

<p>Or more simply, use the default parser via the constructor:</p>
<div class="code"><pre class="code literal-block"><span class="nt">DateTime</span><span class="w"> </span><span class="nt">dt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">DateTime</span><span class="o">(</span><span class="w"> </span><span class="s2">"2010-01-01T12:00:00+01:00"</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">;</span>
</pre></div>

<p>To me, this is nice.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Unfortunately, the time zone formats available to SimpleDateFormat (Java 6 and
earlier) are not ISO 8601 compliant. SimpleDateFormat understands time zone
strings like "GMT+01:00" or "+0100", the latter according to RFC # 822.</p>
<p>Even if Java 7 added support for time zone descriptors according to ISO 8601,
SimpleDateFormat is still not able to properly parse a complete date string,
as it has no support for optional parts.</p>
<p>Reformatting your input string using regexp is certainly one possibility, but
the replacement rules are not as simple as in your question:</p>
<ul>
<li>Some time zones are not full hours off UTC, so the string does not necessarily end with ":00".</li>
<li>ISO8601 allows only the number of hours to be included in the time zone, so "+01" is equivalent to "+01:00"</li>
<li>ISO8601 allows the usage of "Z" to indicate UTC instead of "+00:00".</li>
</ul>
<p>The easier solution is possibly to use the data type converter in JAXB, since
JAXB must be able to parse ISO8601 date string according to the XML Schema
specification.
<code>javax.xml.bind.DatatypeConverter.parseDateTime("2010-01-01T12:00:00Z")</code> will
give you a <code>Calendar</code> object and you can simply use getTime() on it, if you
need a <code>Date</code> object.</p>
<p>You could probably use Joda-Time as well, but I don't know why you should
bother with that (Update 2022; maybe because the entire <code>javax.xml.bind</code>
section is missing from Android's <code>javax.xml</code> package).</p>
<p><br></p>
<h3>Suggest</h3>
<p>The way that is blessed by Java 7 documentation:</p>
<div class="code"><pre class="code literal-block"><span class="nt">DateFormat</span><span class="w"> </span><span class="nt">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">SimpleDateFormat</span><span class="o">(</span><span class="s2">"yyyy-MM-dd'T'HH:mm:ss.SSSZ"</span><span class="o">);</span>
<span class="nt">String</span><span class="w"> </span><span class="nt">string1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2001-07-04T12:08:56.235-0700"</span><span class="o">;</span>
<span class="nt">Date</span><span class="w"> </span><span class="nt">result1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">df1</span><span class="p">.</span><span class="nc">parse</span><span class="o">(</span><span class="nt">string1</span><span class="o">);</span>

<span class="nt">DateFormat</span><span class="w"> </span><span class="nt">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">SimpleDateFormat</span><span class="o">(</span><span class="s2">"yyyy-MM-dd'T'HH:mm:ss.SSSXXX"</span><span class="o">);</span>
<span class="nt">String</span><span class="w"> </span><span class="nt">string2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2001-07-04T12:08:56.235-07:00"</span><span class="o">;</span>
<span class="nt">Date</span><span class="w"> </span><span class="nt">result2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">df2</span><span class="p">.</span><span class="nc">parse</span><span class="o">(</span><span class="nt">string2</span><span class="o">);</span>
</pre></div>

<p>You can find more examples in section <em>Examples</em> at SimpleDateFormat javadoc.</p>
<p><strong>UPD 02/13/2020:</strong> There is a completely new way to do this in Java 8</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-currying/" class="u-url">What is 'Currying'?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-currying/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:54:22+08:00" itemprop="datePublished" title="2023-02-17 13:54">2023-02-17 13:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've seen references to curried functions in several articles and blogs but I
can't find a good explanation (or at least one that makes sense!)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Currying is when you break down a function that takes multiple arguments into
a series of functions that each take only one argument. Here's an example in
JavaScript:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="ss">(</span><span class="nv">a</span>,<span class="w"> </span><span class="nv">b</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">b</span><span class="c1">;</span>
}

<span class="nv">add</span><span class="ss">(</span><span class="mi">3</span>,<span class="w"> </span><span class="mi">4</span><span class="ss">)</span><span class="c1">; // returns 7</span>
</pre></div>

<p>This is a function that takes two arguments, a and b, and returns their sum.
We will now curry this function:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="ss">(</span><span class="nv">a</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="nv">b</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">b</span><span class="c1">;</span>
<span class="w">  </span>}
}
</pre></div>

<p>This is a function that takes one argument, <code>a</code>, and returns a function that
takes another argument, <code>b</code>, and that function returns their sum.</p>
<div class="code"><pre class="code literal-block"><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">)(</span><span class="mi">4</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="mi">7</span>

<span class="k">var</span><span class="w"> </span><span class="n">add3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span>

<span class="n">add3</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="mi">7</span>
</pre></div>

<ul>
<li>The first statement returns 7, like the <code>add(3, 4)</code> statement.</li>
<li>The second statement defines a new function called <code>add3</code> that will add 3 to its argument. (This is what some may call a closure.)</li>
<li>The third statement uses the <code>add3</code> operation to add 3 to 4, again producing 7 as a result.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>In an algebra of functions, dealing with functions that take multiple
arguments (or equivalent one argument that's an N-tuple) is somewhat inelegant
-- but, as Moses Schönfinkel (and, independently, Haskell Curry) proved, it's
not needed: all you need are functions that take one argument.</p>
<p>So how do you deal with something you'd naturally express as, say, <code>f(x,y)</code>?
Well, you take that as equivalent to <code>f(x)(y)</code> -- <code>f(x)</code>, call it <code>g</code>, is a
function, and you apply that function to <code>y</code>. In other words, you only have
functions that take one argument -- but some of those functions return other
functions (which ALSO take one argument;-).</p>
<p>As usual, wikipedia has a nice summary entry about this, with many useful
pointers (probably including ones regarding your favorite languages;-) as well
as slightly more rigorous mathematical treatment.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-710.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-708.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
