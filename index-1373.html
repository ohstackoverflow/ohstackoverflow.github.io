<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1373) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1373.html">
<link rel="prev" href="index-1374.html" type="text/html">
<link rel="next" href="index-1372.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/building-a-nethack-bot-is-bayesian-analysis-a-good-strategy/" class="u-url">Building a NetHack bot: is Bayesian Analysis a good strategy?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/building-a-nethack-bot-is-bayesian-analysis-a-good-strategy/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T02:43:44+08:00" itemprop="datePublished" title="2023-02-28 02:43">2023-02-28 02:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>A friend of mine is beginning to build a NetHack bot (a bot that plays the
Roguelike game: NetHack). There is a very good working bot for the similar
game Angband, but it works partially because of the ease in going back to the
town and always being able to scum low levels to gain items.</p>
<p>In NetHack, the problem is much more difficult, because the game rewards
ballsy experimentation and is built basically as 1,000 edge cases.</p>
<p>Recently I suggested using some kind of naive bayesian analysis, in very much
the same way spam is created.</p>
<p>Basically the bot would at first build a corpus, by trying every possible
action with every item or creature it finds and storing that information with,
for instance, how close to a death, injury of negative effect it was. Over
time it seems like you could generate a reasonably playable model.</p>
<p>Can anyone point us in the right direction of what a good start would be? Am I
barking up the wrong tree or misunderstanding the idea of bayesian analysis?</p>
<p><strong>Edit:</strong> My friend put up a github repo of his NetHack patch that allows
python bindings. It's still in a pretty primitive state but if anyone's
interested...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Although Bayesian analysis encompasses much more, the Naive Bayes algorithm
well known from spam filters is based on one very fundamental assumption: all
variables are essentially independent of each other. So for instance, in spam
filtering each word is usually treated as a variable so this means assuming
that if the email contains the word 'viagra', that knowledge does affect the
probability that it will also contain the word 'medicine' (or 'foo' or 'spam'
or anything else). The interesting thing is that this assumption is quite
obviously false when it comes to natural language but still manages to produce
reasonable results.</p>
<p>Now one way people sometimes get around the independence assumption is to
define variables that are technically combinations of things (like searching
for the token 'buy viagra'). That can work if you know specific cases to look
for but in general, in a game environment, it means that you can't generally
remember anything. So each time you have to move, perform an action, etc, its
completely independent of anything else you've done so far. I would say for
even the simplest games, this is a very inefficient way to go about learning
the game.</p>
<p>I would suggest looking into using q-learning instead. Most of the examples
you'll find are usually just simple games anyway (like learning to navigate a
map while avoiding walls, traps, monsters, etc). Reinforcement learning is a
type of online unsupervised learning that does really well in situations that
can be modeled as an agent interacting with an environment, like a game (or
robots). It does this trying to figure out what the optimal action is at each
state in the environment (where each state can include as many variables as
needed, much more than just 'where am i'). The trick then is maintain just
enough state that helps the bot make good decisions without having a distinct
point in your state 'space' for every possible combination of previous
actions.</p>
<p>To put that in more concrete terms, if you were to build a chess bot you would
probably have trouble if you tried to create a decision policy that made
decisions based on all previous moves since the set of all possible
combinations of chess moves grows really quickly. Even a simpler model of
where every piece is on the board is still a very large state space so you
have to find a way to simplify what you keep track of. But notice that you do
get to keep track of some state so that your bot doesn't just keep trying to
make a left term into a wall over and over again.</p>
<p>The wikipedia article is pretty jargon heavy but this tutorial does a much
better job translating the concepts into real world examples.</p>
<p>The one catch is that you do need to be able to define rewards to provide as
the positive 'reinforcement'. That is you need to be able to define the states
that the bot is trying to get to, otherwise it will just continue forever.</p>
<p><br></p>
<h3>Suggest</h3>
<p>There is precedent: the monstrous rog-o-matic program succeeded in playing
rogue and even returned with the amulet of Yendor a few times. Unfortunately,
rogue was only released an a binary, not source, so it has died (unless you
can set up a 4.3BSD system on a MicroVAX), leaving rog-o-matic unable to play
any of the clones. It just hangs cos they're not close enough emulations.</p>
<p>However, rog-o-matic is, I think, my favourite program of all time, not only
because of what it achieved but because of the readability of the code and the
comprehensible intelligence of its algorithms. It used "genetic inheritance":
a new player would inherit a combination of preferences from a previous pair
of successful players, with some random offset, then be pitted against the
machine. More successful preferences would migrate up in the gene pool and
less successful ones down.</p>
<p>The source can be hard to find these days, but searching "rogomatic" will set
you on the path.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/detecting-an-online-poker-cheat/" class="u-url">Detecting an online poker cheat</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/detecting-an-online-poker-cheat/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T02:43:20+08:00" itemprop="datePublished" title="2023-02-28 02:43">2023-02-28 02:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It recently emerged on a large poker site that some players were possibly able
to see all opponents cards as they played through exploiting a security
vulnerability that was discovered.</p>
<p>A naïve cheater would win at an incredibly fast rate, and these cheats are
caught very quickly usually, and if not caught quickly they are easy to detect
through a quick scan through their hand histories.</p>
<p>The more difficult problem occurs when the cheater exhibits intelligence,
bluffing in spots they are bound to be called in, calling river bets with the
worst hands, the basic premise is that they lose pots on purpose to disguise
their ability to see other players cards, and they win at a reasonably
realistic rate.</p>
<p>Given:</p>
<ul>
<li>A data set of millions of verified and complete information hand histories</li>
<li>Theoretical unlimited computer power</li>
<li>Assume the game No Limit Hold'em, although suggestions on Omaha or limit poker may be beneficial</li>
</ul>
<p>How could we reasonably accurately classify these cheaters? The original 2+2
thread appeals for ideas, and I thought that the SO community might have some
useful suggestions.</p>
<p>It's an interesting problem also because it is current, and has real
application in bettering the world if someone finds a creative solution, as
there is a good chance genuine players will have funds refunded to them when
identified cheaters are discovered.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Plot V$PIP versus winrate of all players with a statistically significant</p>
<h2>hands played. You should see outliers with naked eye. I think that's the</h2>
<p>basic thing to do first.</p>
<p>Then you can plot WTSD vs winrate, winrate at showdown vs winrate without
showdown, %won at showdown vs VPIP.</p>
<p>The stats you choose must be significant statistically. If you know poker, the
above choices make sense.</p>
<p>This is not a job for a machine, outliers are detected by eye.</p>
<p>EDIT: Omaha is much tougher, since it is really variant. There are cases of
unbelievable streaks made by weak players who were not cheating.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I hate to be so blunt, but all the answers on this page with the exception of
@Erwin Smout's are worthless.</p>
<p><code>Statistical analysis is a joke for identifying poker cheats</code><br>
I realize the question allows there to be millions of hands worth of history
available to the system. I'm sure there are players with hand histories this
large, hell, I've probably played this many online hands. But I've also been
playing online for over 10 years. Thats not a small amount of time, and it is
my understanding that two conflicting things are true when it comes to
identifying online poker cheaters: it needs to happen in a small amount of
time, and like any good thief, an online poker cheat is going to take his
stash elsewhere immediately after the taking.</p>
<p>There was a great example of the variance in poker in this paper which was
generated by matching an always raise player versus an always call player
(page 13 of the PDF). Over the course of 100,000 hands, wayyyy more than I
think most people would be willing to play against someone who could see their
cards, the always call player won on average .026 small blinds per hand. I
know this does not sound like much, but assuming stakes of $5-10, that comes
out to $6,500. Maybe someone can help me find the link, but the measured
professional win rate is less not too much larger than this. Please note,
NEITHER of these players was cheating, and the statistically expected
difference over this number of hands is significantly less than what actually
transpired.</p>
<p><code>What online poker players need to understand</code><br>
Poker is gambling. It is a game of skill, because some players are able to
elicit more information from their opponents than their opponents are able to
gather, and that extra information is often as useful as seeing other peoples
cards. Even players who are better players than their typical opponents, will
end up long term losers. If you do not understand this, you're just searching
for witches with statistics in the arbitrarily small number of hands you'll be
playing against any opponent.</p>
<p><code>What can be done?</code><br>
Keeping in mind the question states that cheaters are able to see the other
players cards, you don't need statistical analysis to identify them. There are
only three ways in which that is possible.</p>
<p>First is that the server is sending the information intentionally to clients
which is an obvious security issue and should not be implemented (IMO, even
for moderators). If a site was found allowing this to happen, it is the
player's responsibility to move their funds elsewhere, or refuse to play on
the site until that terrible design decision is rectified. It should also be
the responsibility of the sites to inform their players of the exact steps
that take place during hands played on the site so they have that to make
their decision on when choosing a site in the first place. Security by
obscurity is unpermitable. As for catching the thieves, this information
should be sitting in log files on their servers, which should be regularly
audited for this type of behavior.</p>
<p>Second is that the user has hacked the poker server and they would know about
that in hurry, or else once it is exposed, it is again players responsibility
to determine where to play. In this case, the cheater can be prosecuted in
most countries.</p>
<p>Lastly, it is possible the dealing algorithm has been cracked. This one was a
major problem in the past with companies that used naive methods to deal
hands, but most of the major shops solved this problem by taking random inputs
from players logged into their system as well as using entropy generating
hardware to seed their random number generator. Thats not to say it cannot be
cracked however. If this is the case, the only option is for the company to
engineer a new random number generator.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/my-own-ocr-program-in-python/" class="u-url">My own OCR-program in Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/my-own-ocr-program-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T02:42:59+08:00" itemprop="datePublished" title="2023-02-28 02:42">2023-02-28 02:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am still a beginner but I want to write a character-recognition-program.
This program isn't ready yet. And I edited a lot, therefor the comments may
not match exactly. I will use the 8-connectivity for the connected component
labeling.</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"D:</span><span class="se">\\</span><span class="s2">Python26</span><span class="se">\\</span><span class="s2">PYTHON-PROGRAMME</span><span class="se">\\</span><span class="s2">bild_schrift.jpg"</span><span class="p">)</span>

<span class="n">w</span><span class="p">,</span><span class="n">h</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="kp">size</span>
<span class="n">w</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="n">h</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>

<span class="c1">#2D-Array for area</span>
<span class="n">area</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
    <span class="n">area</span><span class="o">.</span><span class="kp">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
        <span class="n">area</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="kp">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#number 0 is white, number 1 is black</span>

<span class="c1">#2D-Array for letter</span>
<span class="n">letter</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">letter</span><span class="o">.</span><span class="kp">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
        <span class="n">letter</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="kp">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#2D-Array for label</span>
<span class="n">label</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
    <span class="n">label</span><span class="o">.</span><span class="kp">append</span><span class="p">([])</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
        <span class="n">label</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="kp">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#image to number conversion</span>
<span class="n">pix</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="kp">load</span><span class="p">()</span>
<span class="n">threshold</span> <span class="o">=</span> <span class="mi">200</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
        <span class="n">aaa</span> <span class="o">=</span> <span class="n">pix</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
        <span class="n">bbb</span> <span class="o">=</span> <span class="n">aaa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">aaa</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">aaa</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1">#total value</span>
        <span class="k">if</span> <span class="n">bbb</span><span class="o">&lt;=</span><span class="n">threshold</span><span class="p">:</span>
            <span class="n">area</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">bbb</span><span class="o">&gt;</span><span class="n">threshold</span><span class="p">:</span>
            <span class="n">area</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">np</span><span class="o">.</span><span class="kp">set_printoptions</span><span class="p">(</span><span class="n">threshold</span><span class="o">=</span><span class="s1">'nan'</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1">#matrix transponation</span>
<span class="n">ccc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">array</span><span class="p">(</span><span class="n">area</span><span class="p">)</span> 
<span class="n">area</span> <span class="o">=</span> <span class="n">ccc</span><span class="o">.</span><span class="n">T</span> <span class="c1">#better solution?</span>

<span class="c1">#find all black pixel and set temporary label numbers</span>
<span class="n">i</span><span class="o">=</span><span class="mi">1</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span> <span class="c1"># width (later)</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span> <span class="c1"># heigth (later)</span>
        <span class="k">if</span> <span class="n">area</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">letter</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
            <span class="n">label</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">i</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1">#connected components labeling</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span> <span class="c1"># width (later)</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">):</span> <span class="c1"># heigth (later)</span>
        <span class="k">if</span> <span class="n">area</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">label</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">i</span>
            <span class="c1">#if pixel has neighbour:</span>
            <span class="k">if</span> <span class="n">area</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="c1">#pixel and neighbour get the lowest label             </span>
                <span class="k">pass</span> <span class="c1"># tomorrows work</span>
            <span class="k">if</span> <span class="n">area</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="c1">#pixel and neighbour get the lowest label             </span>
                <span class="k">pass</span> <span class="c1"># tomorrows work            </span>
            <span class="c1">#should i also compare pixel and left neighbour?</span>

<span class="c1">#find width of the letter</span>
<span class="c1">#find height of the letter</span>
<span class="c1">#find the middle of the letter</span>
<span class="c1">#middle = [width/2][height/2] #?</span>
<span class="c1">#divide letter into 30 parts --&gt; 5 x 6 array</span>

<span class="c1">#model letter</span>
<span class="c1">#letter A-Z, a-z, 0-9 (maybe more)</span>

<span class="c1">#compare each of the 30 parts of the letter with all model letters</span>
<span class="c1">#make a weighting</span>

<span class="c1">#print(letter)</span>

<span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">"D:</span><span class="se">\\</span><span class="s2">Python26</span><span class="se">\\</span><span class="s2">PYTHON-PROGRAMME</span><span class="se">\\</span><span class="s2">bild2.jpg"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'done'</span><span class="p">)</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>OCR is not an easy task indeed. That's why text CAPTCHAs still work :)</p>
<p>To talk only about the letter extraction and not the pattern recognition, the
technique you are using to separate the letters is called <strong>Connected
Component Labeling</strong>. Since you are asking for a more efficient way to do
this, try to implement the two-pass algorithm that's described in this
article. Another description can be found in the article Blob extraction.</p>
<p><strong>EDIT</strong> : Here's the implementation for the algorithm that I have suggested:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageDraw</span>

<span class="k">class</span> <span class="nc">Region</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pixels</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pixels</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min_y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_y</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_y</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">_min_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min_y</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max_y</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">find_regions</span><span class="p">(</span><span class="n">im</span><span class="p">):</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span>  <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span>
    <span class="n">regions</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">pixel_region</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">)]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">)]</span>
    <span class="n">equivalences</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">n_regions</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1">#first pass. find regions.</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
            <span class="c1">#look for a black pixel</span>
            <span class="k">if</span> <span class="n">im</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">):</span> <span class="c1">#BLACK</span>
                <span class="c1"># get the region number from north or west</span>
                <span class="c1"># or create new region</span>
                <span class="n">region_n</span> <span class="o">=</span> <span class="n">pixel_region</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">region_w</span> <span class="o">=</span> <span class="n">pixel_region</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>

                <span class="n">max_region</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">region_n</span><span class="p">,</span> <span class="n">region_w</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">max_region</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1">#a neighbour already has a region</span>
                    <span class="c1">#new region is the smallest &gt; 0</span>
                    <span class="n">new_region</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">region_n</span><span class="p">,</span> <span class="n">region_w</span><span class="p">)))</span>
                    <span class="c1">#update equivalences</span>
                    <span class="k">if</span> <span class="n">max_region</span> <span class="o">&gt;</span> <span class="n">new_region</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">max_region</span> <span class="ow">in</span> <span class="n">equivalences</span><span class="p">:</span>
                            <span class="n">equivalences</span><span class="p">[</span><span class="n">max_region</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_region</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">equivalences</span><span class="p">[</span><span class="n">max_region</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">((</span><span class="n">new_region</span><span class="p">,</span> <span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">n_regions</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">new_region</span> <span class="o">=</span> <span class="n">n_regions</span>

                <span class="n">pixel_region</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_region</span>

    <span class="c1">#Scan image again, assigning all equivalent regions the same region value.</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">pixel_region</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">r</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">while</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">equivalences</span><span class="p">:</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">equivalences</span><span class="p">[</span><span class="n">r</span><span class="p">])</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">regions</span><span class="p">:</span>
                        <span class="n">regions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span> <span class="n">Region</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">regions</span><span class="p">[</span><span class="n">r</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">regions</span><span class="o">.</span><span class="n">itervalues</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">r</span><span class="s2">"c:\users\personal\py\ocr\test.png"</span><span class="p">)</span>
    <span class="n">regions</span> <span class="o">=</span> <span class="n">find_regions</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">regions</span><span class="p">:</span>
        <span class="n">draw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">box</span><span class="p">(),</span> <span class="n">outline</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">del</span> <span class="n">draw</span> 
    <span class="c1">#im.show()</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">file</span><span class="p">(</span><span class="s2">"output.png"</span><span class="p">,</span> <span class="s2">"wb"</span><span class="p">)</span>
    <span class="n">im</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

<p>It's not 100% perfect, but since you are doing this only for learning
purposes, it may be a good starting point. With the bounding box of each
character you can now use a neural network as others have suggested here.</p>
<p><br></p>
<h3>Suggest</h3>
<p>OCR is very, very hard. Even with computer-generated characters, it's quite
challenging if you don't know the font and font size in advance. Even if
you're matching characters exactly, I would not call it a "beginning"
programming project; it's quite subtle.</p>
<p>If you want to recognize scanned, or handwritten characters, that's even
harder - you'll need to use advanced math, algorithms, and machine learning.
There are quite a few books and thousands of articles written about this
topic, so you don't need to reinvent the wheel.</p>
<p>I admire your effort, but I don't think you've gotten far enough to hit any of
the actual difficulties yet. So far you're just randomly exploring pixels and
copying them from one array to another. You haven't actually done any
comparison yet, and I'm not sure the purpose of your "random walk".</p>
<ul>
<li>Why random? Writing correct randomized algorithms is quite difficult. I would recommend starting with a deterministic algorithm first.</li>
<li>Why are you copying from one array to another? Why not just compare directly?</li>
</ul>
<p>When you get the comparison, you'll have to deal with the fact that the image
is not exactly the same as the "prototype", and it's not clear how you'll deal
with that.</p>
<p>Based on the code you've written so far, though, I have an idea for you: try
writing a program that finds its way through a "maze" in an image. The input
would be the image, plus the start pixel and the goal pixel. The output is a
path through the maze from the start to the goal. This is a much easier
problem than OCR - solving mazes is something that computers are great for -
but it's still fun and challenging.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1374.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1372.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
