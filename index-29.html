<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 29) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-29.html">
<link rel="prev" href="index-30.html" type="text/html">
<link rel="next" href="index-28.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-remove-a-submodule/" class="u-url">How do I remove a submodule?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-remove-a-submodule/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:03:27+08:00" itemprop="datePublished" title="2023-02-16 19:03">2023-02-16 19:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I remove a Git submodule? Why can't I do <code>git submodule rm
module_name</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Since git1.8.3 (April 22d, 2013):</p>
<blockquote>
<p>There was no Porcelain way to say "I no longer am interested in this
submodule", once you express your interest in a submodule with "<code>git
submodule init</code>".<br>
 " <strong><code>git submodule deinit</code></strong> " is the way to do so.</p>
</blockquote>
<p>The deletion process also uses <code>git rm</code> (since git1.8.5 October 2013).</p>
<h3>Summary</h3>
<p>The 3-steps removal process would then be:</p>
<div class="code"><pre class="code literal-block"><span class="mf">0.</span><span class="w"> </span><span class="n">mv</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule_tmp</span>

<span class="mf">1.</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">submodule</span><span class="w"> </span><span class="n">deinit</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span><span class="w">    </span>
<span class="mf">2.</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">rf</span><span class="w"> </span><span class="mf">.</span><span class="n">git</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
<span class="err">#</span><span class="w"> </span><span class="ow">Not</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="n">slash</span><span class="p">)</span>

<span class="err">#</span><span class="w"> </span><span class="ow">or</span><span class="p">,</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="kr">step</span><span class="w"> </span><span class="mf">0</span>
<span class="mf">3.</span><span class="w">   </span><span class="n">git</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">--</span><span class="n">cached</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
<span class="mf">3</span><span class="n">bis</span><span class="w"> </span><span class="n">mv</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule_tmp</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
</pre></div>

<h3>Explanation</h3>
<p><code>rm -rf</code>: This is mentioned in Daniel Schroeder's answer, and summarized by
Eonil in the comments:</p>
<blockquote>
<p>This leaves <code>.git/modules/&lt;path-to-submodule&gt;/</code> unchanged.<br>
 So if you once delete a submodule with this method and re-add them again,
it will not be possible because repository already been corrupted.</p>
</blockquote>
<hr>
<p><code>git rm</code>: See commit 95c16418:</p>
<blockquote>
<p>Currently using "<code>git rm</code>" on a submodule removes the submodule's work tree
from that of the superproject and the gitlink from the index.<br>
 But the submodule's section in <code>.gitmodules</code> is left untouched, which is a
leftover of the now removed submodule and might irritate users (as opposed
to the setting in <code>.git/config</code>, this must stay as a reminder that the user
showed interest in this submodule so it will be repopulated later when an
older commit is checked out).</p>
<p>Let "<code>git rm</code>" help the user by not only removing the submodule from the
work tree but by also removing the "<code>submodule.&lt;submodule name&gt;</code>" section
from the <code>.gitmodules</code> file and stage both.</p>
</blockquote>
<hr>
<p><code>git submodule deinit</code>: It stems from this patch:</p>
<blockquote>
<p>With "<code>git submodule init</code>" the user is able to tell git they care about one
or more submodules and wants to have it populated on the next call to "<code>git
submodule update</code>".<br>
 But currently there is no easy way they can tell git they do not care about
a submodule anymore and wants to get rid of the local work tree (unless the
user knows a lot about submodule internals and removes the
"<code>submodule.$name.url</code>" setting from <code>.git/config</code> together with the work
tree himself).</p>
<p>Help those users by providing a ' <strong><code>deinit</code></strong> ' command.<br>
 This <strong>removes the whole<code>submodule.&lt;name&gt;</code> section from <code>.git/config</code>
either for the given submodule(s)</strong> (or for all those which have been
initialized if '<code>.</code>' is given).<br>
 Fail if the current work tree contains modifications unless forced.<br>
 Complain when for a submodule given on the command line the url setting
can't be found in <code>.git/config</code>, but nonetheless don't fail.</p>
</blockquote>
<p>This takes care if the (de)initialization steps (<code>.git/config</code> and
<code>.git/modules/xxx</code>)</p>
<p>Since git1.8.5, the <code>git rm</code> takes <em>also</em> care of the:</p>
<ul>
<li>'<code>add</code>' step which records the url of a submodule in the <code>.gitmodules</code> file: it is need to removed for you.</li>
<li>the submodule <strong>special entry</strong> (as illustrated by this question): the git rm removes it from the index:<br><code>git rm --cached path_to_submodule</code> (no trailing slash)<br>
That will remove that directory stored in the index with a special mode
"160000", marking it as a submodule root directory.</li>
</ul>
<p>If you forget that last step, and try to add what was a submodule as a regular
directory, you would get error message like:</p>
<div class="code"><pre class="code literal-block">git add mysubmodule/file.txt 
Path 'mysubmodule/file.txt' is in submodule 'mysubmodule'
</pre></div>

<hr>
<p>Note: since Git 2.17 (Q2 2018), git submodule deinit is no longer a shell
script.<br>
It is a call to a C function.</p>
<p>See commit 2e61273, commit 1342476 (14 Jan 2018) by Prathamesh Chavan
(<code>pratham-pc</code>).<br>
(Merged by Junio C Hamano -- <code>gitster</code> -- in commit ead8dbe, 13 Feb 2018)</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">$</span><span class="p">{</span><span class="n">wt_prefix</span><span class="o">:+-</span><span class="n">C</span><span class="w"> </span><span class="s">"$wt_prefix"</span><span class="p">}</span><span class="w"> </span><span class="n">submodule</span><span class="o">--</span><span class="n">helper</span><span class="w"> </span><span class="n">deinit</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">GIT_QUIET</span><span class="o">:+--</span><span class="n">quiet</span><span class="p">}</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">prefix</span><span class="o">:+--</span><span class="n">prefix</span><span class="w"> </span><span class="s">"$prefix"</span><span class="p">}</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">force</span><span class="o">:+--</span><span class="n">force</span><span class="p">}</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">deinit_all</span><span class="o">:+--</span><span class="n">all</span><span class="p">}</span><span class="w"> </span><span class="s">"$@"</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Since git1.8.3 (April 22d, 2013):</p>
<blockquote>
<p>There was no Porcelain way to say "I no longer am interested in this
submodule", once you express your interest in a submodule with "<code>git
submodule init</code>".<br>
 " <strong><code>git submodule deinit</code></strong> " is the way to do so.</p>
</blockquote>
<p>The deletion process also uses <code>git rm</code> (since git1.8.5 October 2013).</p>
<h3>Summary</h3>
<p>The 3-steps removal process would then be:</p>
<div class="code"><pre class="code literal-block"><span class="mf">0.</span><span class="w"> </span><span class="n">mv</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule_tmp</span>

<span class="mf">1.</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">submodule</span><span class="w"> </span><span class="n">deinit</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span><span class="w">    </span>
<span class="mf">2.</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">rf</span><span class="w"> </span><span class="mf">.</span><span class="n">git</span><span class="o">/</span><span class="n">modules</span><span class="o">/</span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
<span class="err">#</span><span class="w"> </span><span class="ow">Not</span><span class="n">e</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="n">slash</span><span class="p">)</span>

<span class="err">#</span><span class="w"> </span><span class="ow">or</span><span class="p">,</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="kr">step</span><span class="w"> </span><span class="mf">0</span>
<span class="mf">3.</span><span class="w">   </span><span class="n">git</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">--</span><span class="n">cached</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
<span class="mf">3</span><span class="n">bis</span><span class="w"> </span><span class="n">mv</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule_tmp</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">submodule</span>
</pre></div>

<h3>Explanation</h3>
<p><code>rm -rf</code>: This is mentioned in Daniel Schroeder's answer, and summarized by
Eonil in the comments:</p>
<blockquote>
<p>This leaves <code>.git/modules/&lt;path-to-submodule&gt;/</code> unchanged.<br>
 So if you once delete a submodule with this method and re-add them again,
it will not be possible because repository already been corrupted.</p>
</blockquote>
<hr>
<p><code>git rm</code>: See commit 95c16418:</p>
<blockquote>
<p>Currently using "<code>git rm</code>" on a submodule removes the submodule's work tree
from that of the superproject and the gitlink from the index.<br>
 But the submodule's section in <code>.gitmodules</code> is left untouched, which is a
leftover of the now removed submodule and might irritate users (as opposed
to the setting in <code>.git/config</code>, this must stay as a reminder that the user
showed interest in this submodule so it will be repopulated later when an
older commit is checked out).</p>
<p>Let "<code>git rm</code>" help the user by not only removing the submodule from the
work tree but by also removing the "<code>submodule.&lt;submodule name&gt;</code>" section
from the <code>.gitmodules</code> file and stage both.</p>
</blockquote>
<hr>
<p><code>git submodule deinit</code>: It stems from this patch:</p>
<blockquote>
<p>With "<code>git submodule init</code>" the user is able to tell git they care about one
or more submodules and wants to have it populated on the next call to "<code>git
submodule update</code>".<br>
 But currently there is no easy way they can tell git they do not care about
a submodule anymore and wants to get rid of the local work tree (unless the
user knows a lot about submodule internals and removes the
"<code>submodule.$name.url</code>" setting from <code>.git/config</code> together with the work
tree himself).</p>
<p>Help those users by providing a ' <strong><code>deinit</code></strong> ' command.<br>
 This <strong>removes the whole<code>submodule.&lt;name&gt;</code> section from <code>.git/config</code>
either for the given submodule(s)</strong> (or for all those which have been
initialized if '<code>.</code>' is given).<br>
 Fail if the current work tree contains modifications unless forced.<br>
 Complain when for a submodule given on the command line the url setting
can't be found in <code>.git/config</code>, but nonetheless don't fail.</p>
</blockquote>
<p>This takes care if the (de)initialization steps (<code>.git/config</code> and
<code>.git/modules/xxx</code>)</p>
<p>Since git1.8.5, the <code>git rm</code> takes <em>also</em> care of the:</p>
<ul>
<li>'<code>add</code>' step which records the url of a submodule in the <code>.gitmodules</code> file: it is need to removed for you.</li>
<li>the submodule <strong>special entry</strong> (as illustrated by this question): the git rm removes it from the index:<br><code>git rm --cached path_to_submodule</code> (no trailing slash)<br>
That will remove that directory stored in the index with a special mode
"160000", marking it as a submodule root directory.</li>
</ul>
<p>If you forget that last step, and try to add what was a submodule as a regular
directory, you would get error message like:</p>
<div class="code"><pre class="code literal-block">git add mysubmodule/file.txt 
Path 'mysubmodule/file.txt' is in submodule 'mysubmodule'
</pre></div>

<hr>
<p>Note: since Git 2.17 (Q2 2018), git submodule deinit is no longer a shell
script.<br>
It is a call to a C function.</p>
<p>See commit 2e61273, commit 1342476 (14 Jan 2018) by Prathamesh Chavan
(<code>pratham-pc</code>).<br>
(Merged by Junio C Hamano -- <code>gitster</code> -- in commit ead8dbe, 13 Feb 2018)</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">$</span><span class="p">{</span><span class="n">wt_prefix</span><span class="o">:+-</span><span class="n">C</span><span class="w"> </span><span class="s">"$wt_prefix"</span><span class="p">}</span><span class="w"> </span><span class="n">submodule</span><span class="o">--</span><span class="n">helper</span><span class="w"> </span><span class="n">deinit</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">GIT_QUIET</span><span class="o">:+--</span><span class="n">quiet</span><span class="p">}</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">prefix</span><span class="o">:+--</span><span class="n">prefix</span><span class="w"> </span><span class="s">"$prefix"</span><span class="p">}</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">force</span><span class="o">:+--</span><span class="n">force</span><span class="p">}</span><span class="w"> </span>\
<span class="w">  </span><span class="n">$</span><span class="p">{</span><span class="n">deinit_all</span><span class="o">:+--</span><span class="n">all</span><span class="p">}</span><span class="w"> </span><span class="s">"$@"</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/change-a-html5-input-s-placeholder-color-with-css/" class="u-url">Change a HTML5 input's placeholder color with CSS</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/change-a-html5-input-s-placeholder-color-with-css/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:02:57+08:00" itemprop="datePublished" title="2023-02-16 19:02">2023-02-16 19:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Chrome supports the placeholder attribute on <code>input[type=text]</code> elements
(others probably do too).</p>
<p>But the following CSS doesn't do anything to the placeholder's value:</p>
<div class="code"><pre class="code literal-block"><span class="k">input</span><span class="o">[</span><span class="n">placeholder</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">placeholder</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="o">*[</span><span class="n">placeholder</span><span class="o">]</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nl">color</span><span class="p">:</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="err">!</span><span class="n">important</span><span class="p">;</span>
<span class="err">}</span>


<span class="o">&lt;</span><span class="k">input</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="ss">"text"</span><span class="w"> </span><span class="n">placeholder</span><span class="o">=</span><span class="ss">"Value"</span><span class="o">&gt;</span>
</pre></div>

<p>But <code>Value</code> will still remain <code>grey</code> instead of <code>red</code>.</p>
<p><strong>Is there a way to change the color of the placeholder text?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Implementation</h3>
<p>There are three different implementations: pseudo-elements, pseudo-classes,
and nothing.</p>
<ul>
<li>WebKit, Blink (Safari, Google Chrome, Opera 15+) and Microsoft Edge are using a pseudo-element: <code>::-webkit-input-placeholder</code>. [Ref]</li>
<li>Mozilla Firefox 4 to 18 is using a pseudo-class: <code>:-moz-placeholder</code> ( <em>one</em> colon). [Ref]</li>
<li>Mozilla Firefox 19+ is using a pseudo-element: <code>::-moz-placeholder</code>, but the old selector will still work for a while. [Ref]</li>
<li>Internet Explorer 10 and 11 are using a pseudo-class: <code>:-ms-input-placeholder</code>. [Ref]</li>
<li>April 2017: <strong>Most modern browsers support the simple pseudo-element<code>::placeholder</code> [Ref]</strong>
</li>
</ul>
<p>Internet Explorer 9 and lower does not support the <code>placeholder</code> attribute at
all, while Opera 12 and lower do not support any CSS selector for
placeholders.</p>
<p>The discussion about the best implementation is still going on. Note the
pseudo-elements act like real elements in the Shadow DOM. A <code>padding</code> on an
<code>input</code> will not get the same background color as the pseudo-element.</p>
<h3>CSS selectors</h3>
<p>User agents are required to ignore a rule with an unknown selector. See
Selectors Level 3:</p>
<blockquote>
<p>a group of selectors containing an invalid selector is invalid.</p>
</blockquote>
<p>So we need separate rules for each browser. Otherwise the whole group would be
ignored by all browsers.</p>
<div class="code"><pre class="code literal-block">    <span class="s s-Atom">color</span><span class="p">:</span>    <span class="s s-Atom">#</span><span class="mi">909</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">:-</span><span class="s s-Atom">moz</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span> <span class="cm">/* Mozilla Firefox 4 to 18 */</span>
   <span class="s s-Atom">color</span><span class="p">:</span>    <span class="s s-Atom">#</span><span class="mi">909</span><span class="p">;</span>
   <span class="s s-Atom">opacity</span><span class="p">:</span>  <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">::-</span><span class="s s-Atom">moz</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span> <span class="cm">/* Mozilla Firefox 19+ */</span>
   <span class="s s-Atom">color</span><span class="p">:</span>    <span class="s s-Atom">#</span><span class="mi">909</span><span class="p">;</span>
   <span class="s s-Atom">opacity</span><span class="p">:</span>  <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">:-</span><span class="s s-Atom">ms</span><span class="o">-</span><span class="s s-Atom">input</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span> <span class="cm">/* Internet Explorer 10-11 */</span>
   <span class="s s-Atom">color</span><span class="p">:</span>    <span class="s s-Atom">#</span><span class="mi">909</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">::-</span><span class="s s-Atom">ms</span><span class="o">-</span><span class="s s-Atom">input</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span> <span class="cm">/* Microsoft Edge */</span>
   <span class="s s-Atom">color</span><span class="p">:</span>    <span class="s s-Atom">#</span><span class="mi">909</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">::</span><span class="s s-Atom">placeholder</span> <span class="p">{</span> <span class="cm">/* Most modern browsers support this now. */</span>
   <span class="s s-Atom">color</span><span class="p">:</span>    <span class="s s-Atom">#</span><span class="mi">909</span><span class="p">;</span>
<span class="p">}</span>


<span class="o">&lt;</span><span class="s s-Atom">input</span> <span class="s s-Atom">placeholder=</span><span class="s2">"Stack Snippets are awesome!"</span><span class="o">&gt;</span>
</pre></div>

<h3>Usage notes</h3>
<ul>
<li>Be careful to avoid bad contrasts. Firefox's placeholder appears to be defaulting with a reduced opacity, so needs to use <code>opacity: 1</code> here.</li>
<li>Note that placeholder text is just cut off if it doesn’t fit – size your input elements in <code>em</code> and test them with big minimum font size settings. Don’t forget translations: some languages need more room for the same word.</li>
<li>Browsers with HTML support for <code>placeholder</code> but without CSS support for that (like Opera) should be tested too.</li>
<li>Placeholders are no replacement for labels, so make sure you have a label, too</li>
<li>Some browsers use additional default CSS for some <code>input</code> types (<code>email</code>, <code>search</code>). These might affect the rendering in unexpected ways. Use the properties <code>-webkit-appearance</code> and <code>-moz-appearance</code> to change that. Example:<div class="code"><pre class="code literal-block"><span class="cp">[</span><span class="k">type</span><span class="o">=</span><span class="s2">"search"</span><span class="cp">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kp">-moz-</span><span class="k">appearance</span><span class="p">:</span><span class="w">    </span><span class="n">textfield</span><span class="p">;</span>
<span class="w">    </span><span class="kp">-webkit-</span><span class="k">appearance</span><span class="p">:</span><span class="w"> </span><span class="n">textfield</span><span class="p">;</span>
<span class="w">    </span><span class="k">appearance</span><span class="p">:</span><span class="w"> </span><span class="n">textfield</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="cm">/* do not group these rules */</span>
<span class="s s-Atom">*::-webkit</span><span class="o">-</span><span class="s s-Atom">input</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span>
    <span class="s s-Atom">color</span><span class="p">:</span> <span class="s s-Atom">red</span><span class="p">;</span>
<span class="p">}</span>
<span class="s s-Atom">*:-moz</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span>
    <span class="cm">/* FF 4-18 */</span>
    <span class="s s-Atom">color</span><span class="p">:</span> <span class="s s-Atom">red</span><span class="p">;</span>
    <span class="s s-Atom">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="s s-Atom">*::-moz</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span>
    <span class="cm">/* FF 19+ */</span>
    <span class="s s-Atom">color</span><span class="p">:</span> <span class="s s-Atom">red</span><span class="p">;</span>
    <span class="s s-Atom">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="s s-Atom">*:-ms</span><span class="o">-</span><span class="s s-Atom">input</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span>
    <span class="cm">/* IE 10+ */</span>
    <span class="s s-Atom">color</span><span class="p">:</span> <span class="s s-Atom">red</span><span class="p">;</span>
<span class="p">}</span>
<span class="s s-Atom">*::-ms</span><span class="o">-</span><span class="s s-Atom">input</span><span class="o">-</span><span class="s s-Atom">placeholder</span> <span class="p">{</span>
    <span class="cm">/* Microsoft Edge */</span>
    <span class="s s-Atom">color</span><span class="p">:</span> <span class="s s-Atom">red</span><span class="p">;</span>
<span class="p">}</span>
<span class="s s-Atom">*::placeholder</span> <span class="p">{</span>
    <span class="cm">/* modern browser */</span>
    <span class="s s-Atom">color</span><span class="p">:</span> <span class="s s-Atom">red</span><span class="p">;</span>
<span class="p">}</span>


<span class="o">&lt;</span><span class="s s-Atom">input</span> <span class="s s-Atom">placeholder=</span><span class="s2">"hello"</span><span class="s s-Atom">/&gt;</span> <span class="o">&lt;</span><span class="s s-Atom">br</span> <span class="s s-Atom">/&gt;</span>
<span class="o">&lt;</span><span class="s s-Atom">textarea</span> <span class="s s-Atom">placeholder=</span><span class="s2">"hello"</span><span class="s s-Atom">&gt;&lt;/textarea</span><span class="o">&gt;</span>
</pre></div>

<p>This will style all <code>input</code> and <code>textarea</code> placeholders.</p>
<p><strong>Important Note:</strong> Do not group these rules. Instead, make a separate rule
for every selector (one invalid selector in a group makes the whole group
invalid).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-is-docker-different-from-a-virtual-machine/" class="u-url">How is Docker different from a virtual machine?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-is-docker-different-from-a-virtual-machine/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:02:28+08:00" itemprop="datePublished" title="2023-02-16 19:02">2023-02-16 19:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I keep rereading the Docker documentation to try to understand the difference
between Docker and a full VM. How does it manage to provide a full filesystem,
isolated networking environment, etc. without being as heavy?</p>
<p>Why is deploying software to a Docker image (if that's the right term) easier
than simply deploying to a consistent production environment?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Docker originally used LinuX Containers (LXC), but later switched to runC
(formerly known as <strong>libcontainer</strong> ), which runs in the same operating system
as its host. This allows it to share a lot of the host operating system
resources. Also, it uses a layered filesystem (AuFS) and manages networking.</p>
<p>AuFS is a layered file system, so you can have a read only part and a write
part which are merged together. One could have the common parts of the
operating system as read only (and shared amongst all of your containers) and
then give each container its own mount for writing.</p>
<p>So, let's say you have a 1 GB container image; if you wanted to use a full VM,
you would need to have 1 GB x number of VMs you want. With Docker and AuFS you
can share the bulk of the 1 GB between all the containers and if you have 1000
containers you still might only have a little over 1 GB of space for the
containers OS (assuming they are all running the same OS image).</p>
<p>A full virtualized system gets its own set of resources allocated to it, and
does minimal sharing. You get more isolation, but it is much heavier (requires
more resources). With Docker you get less isolation, but the containers are
lightweight (require fewer resources). So you could easily run thousands of
containers on a host, and it won't even blink. Try doing that with Xen, and
unless you have a really big host, I don't think it is possible.</p>
<p>A full virtualized system usually takes minutes to start, whereas
Docker/LXC/runC containers take seconds, and often even less than a second.</p>
<p>There are pros and cons for each type of virtualized system. If you want full
isolation with guaranteed resources, a full VM is the way to go. If you just
want to isolate processes from each other and want to run a ton of them on a
reasonably sized host, then Docker/LXC/runC seems to be the way to go.</p>
<p>For more information, check out this set of blog posts which do a good job of
explaining how LXC works.</p>
<blockquote>
<p>Why is deploying software to a docker image (if that's the right term)
easier than simply deploying to a consistent production environment?</p>
</blockquote>
<p>Deploying a consistent production environment is easier said than done. Even
if you use tools like Chef and Puppet, there are always OS updates and other
things that change between hosts and environments.</p>
<p>Docker gives you the ability to snapshot the OS into a shared image, and makes
it easy to deploy on other Docker hosts. Locally, dev, qa, prod, etc.: all the
same image. Sure you can do this with other tools, but not nearly as easily or
fast.</p>
<p>This is great for testing; let's say you have thousands of tests that need to
connect to a database, and each test needs a pristine copy of the database and
will make changes to the data. The classic approach to this is to reset the
database after every test either with custom code or with tools like Flyway -
this can be very time-consuming and means that tests must be run serially.
However, with Docker you could create an image of your database and run up one
instance per test, and then run all the tests in parallel since you know they
will all be running against the same snapshot of the database. Since the tests
are running in parallel and in Docker containers they could run all on the
same box at the same time and should finish much faster. Try doing that with a
full VM.</p>
<p>From comments...</p>
<blockquote>
<p>Interesting! I suppose I'm still confused by the notion of "snapshot[ting]
the OS". How does one do that without, well, making an image of the OS?</p>
</blockquote>
<p>Well, let's see if I can explain. You start with a base image, and then make
your changes, and commit those changes using docker, and it creates an image.
This image contains only the differences from the base. When you want to run
your image, you also need the base, and it layers your image on top of the
base using a layered file system: as mentioned above, Docker uses AuFS. AuFS
merges the different layers together and you get what you want; you just need
to run it. You can keep adding more and more images (layers) and it will
continue to only save the diffs. Since Docker typically builds on top of
ready-made images from a registry, you rarely have to "snapshot" the whole OS
yourself.</p>
<p><br></p>
<h3>Suggest</h3>
<p>It might be helpful to understand how virtualization and containers work at a
low level. That will clear up lot of things.</p>
<p>Note: I'm simplifying a bit in the description below. See references for more
information.</p>
<p><strong>How does virtualization work at a low level?</strong></p>
<p>In this case the VM manager takes over the CPU ring 0 (or the "root mode" in
newer CPUs) and intercepts all privileged calls made by the guest OS to create
the illusion that the guest OS has its own hardware. Fun fact: Before 1998 it
was thought to be impossible to achieve this on the x86 architecture because
there was no way to do this kind of interception. The folks at VMware were the
first who had an idea to rewrite the executable bytes in memory for privileged
calls of the guest OS to achieve this.</p>
<p>The net effect is that virtualization allows you to run two completely
different OSes on the same hardware. Each guest OS goes through all the
processes of bootstrapping, loading kernel, etc. You can have very tight
security. For example, a guest OS can't get full access to the host OS or
other guests and mess things up.</p>
<p><strong>How do containers work at a low level?</strong></p>
<p>Around 2006, people including some of the employees at Google implemented a
new kernel level feature called <em>namespaces</em> (however the idea long before
existed in FreeBSD). One function of the OS is to allow sharing of global
resources like network and disks among processes. What if these global
resources were wrapped in namespaces so that they are visible only to those
processes that run in the same namespace? Say, you can get a chunk of disk and
put that in namespace X and then processes running in namespace Y can't see or
access it. Similarly, processes in namespace X can't access anything in memory
that is allocated to namespace Y. Of course, processes in X can't see or talk
to processes in namespace Y. This provides a kind of virtualization and
isolation for global resources. This is how Docker works: Each container runs
in its own namespace but uses exactly the <em>same</em> kernel as all other
containers. The isolation happens because the kernel knows the namespace that
was assigned to the process and during API calls it makes sure that the
process can only access resources in its own namespace.</p>
<p>The limitations of containers vs VMs should be obvious now: You can't run
completely different OSes in containers like in VMs. However you <em>can</em> run
different distros of Linux because they do share the same kernel. The
isolation level is not as strong as in a VM. In fact, there was a way for a
"guest" container to take over the host in early implementations. Also you can
see that when you load a new container, an entire new copy of the OS doesn't
start like it does in a VM. All containers share the same kernel. This is why
containers are light weight. Also unlike a VM, you don't have to pre-allocate
a significant chunk of memory to containers because we are not running a new
copy of the OS. This enables running thousands of containers on one OS while
sandboxing them, which might not be possible if we were running separate
copies of the OS in their own VMs.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-30.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-28.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
