<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RegEx match open tags except XHTML self-contained tags | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/regex-match-open-tags-except-xhtml-self-contained-tags/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-format-a-microsoft-json-date/" title="How do I format a Microsoft JSON date?" type="text/html">
<link rel="next" href="../why-is-reading-lines-from-stdin-much-slower-in-c-than-python/" title="Why is reading lines from stdin much slower in C++ than Python?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="RegEx match open tags except XHTML self-contained tags">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/regex-match-open-tags-except-xhtml-self-contained-tags/">
<meta property="og:description" content='Locked. Comments on this question have been disabled, but it is still
accepting new answers and other interactions. Learn more.
I need to match all of these opening tags:
&lt;p&gt;
&lt;a href="foo"&gt;


But not '>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-16T22:31:11+08:00">
<meta property="article:tag" content="html">
<meta property="article:tag" content="regex">
<meta property="article:tag" content="xhtml">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">RegEx match open tags except XHTML self-contained tags</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T22:31:11+08:00" itemprop="datePublished" title="2023-02-16 22:31">2023-02-16 22:31</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><strong>Locked</strong>. Comments on this question have been disabled, but it is still
accepting new answers and other interactions. Learn more.</p>
<p>I need to match all of these opening tags:</p>
<div class="code"><pre class="code literal-block">&lt;p&gt;
&lt;a href="foo"&gt;
</pre></div>

<p>But not these:</p>
<div class="code"><pre class="code literal-block">&lt;br /&gt;
&lt;hr class="foo" /&gt;
</pre></div>

<p>I came up with this and wanted to make sure I've got it right. I am only
capturing the <code>a-z</code>.</p>
<div class="code"><pre class="code literal-block">&lt;([a-z]+) *[^/]*?&gt;
</pre></div>

<p>I believe it says:</p>
<ul>
<li>Find a less-than, then</li>
<li>Find (and capture) a-z one or more times, then</li>
<li>Find zero or more spaces, then</li>
<li>Find any character zero or more times, greedy, except <code>/</code>, then</li>
<li>Find a greater-than</li>
</ul>
<p>Do I have that right? And more importantly, what do you think?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Locked</strong>. There are disputes about this answer’s content being resolved at
this time. It is not currently accepting new interactions.</p>
<p>You can't parse [X]HTML with regex. Because HTML can't be parsed by regex.
Regex is not a tool that can be used to correctly parse HTML. As I have
answered in HTML-and-regex questions here so many times before, the use of
regex will not allow you to consume HTML. Regular expressions are a tool that
is insufficiently sophisticated to understand the constructs employed by HTML.
HTML is not a regular language and hence cannot be parsed by regular
expressions. Regex queries are not equipped to break down HTML into its
meaningful parts. so many times but it is not getting to me. Even enhanced
irregular regular expressions as used by Perl are not up to the task of
parsing HTML. You will never make me crack. HTML is a language of sufficient
complexity that it cannot be parsed by regular expressions. Even Jon Skeet
cannot parse HTML using regular expressions. Every time you attempt to parse
HTML with regular expressions, the unholy child weeps the blood of virgins,
and Russian hackers pwn your webapp. Parsing HTML with regex summons tainted
souls into the realm of the living. HTML and regex go together like love,
marriage, and ritual infanticide. The </p>
<center> cannot hold it is too late. The
force of regex and HTML together in the same conceptual space will destroy
your mind like so much watery putty. If you parse HTML with regex you are
giving in to Them and their blasphemous ways which doom us all to inhuman toil
for the One whose Name cannot be expressed in the Basic Multilingual Plane, he
comes. HTML-plus-regexp will liquify the n​erves of the sentient whilst you
observe, your psyche withering in the onslaught of horror. Rege̿̔̉x-based HTML
parsers are the cancer that is killing StackOverflow <em>it is too late it is too
late we cannot be saved</em> the transgression of a chi͡ld ensures regex will
consume all living tissue (except for HTML which it cannot, as previously
prophesied) <em>dear lord help us how can anyone survive this scourge</em> using
regex to parse HTML has doomed humanity to an eternity of dread torture and
security holes <em>using rege</em> x as a tool to process HTML establishes a brea <em>ch
between this world</em> and the dread realm of c͒ͪo͛ͫrrupt entities (like SGML
entities, but <em>more corrupt) a mere glimp</em> se of the world of reg​ <strong>ex
parsers for HTML will ins</strong> ​tantly transport a p <em>rogrammer's consciousness
i</em> nto a w <em>orl</em> d of ceaseless screaming, he comes <del>, the pestilent sl</del>
ithy regex-infection wil​ <strong>l devour your HT</strong> ​ML parser, application and
existence for all time like Visual Basic only worse <em>he comes he com</em> es <em>do
not fi</em> ​ght h <strong>e com̡e̶s, ̕h̵i</strong> ​s un̨ho͞ly radiańcé de <em>stro҉ying all
enli̍̈́̂̈́ghtenment, HTML tags <strong>lea͠ki̧n͘g fr̶ǫm ̡yo​͟ur eye͢s̸ ̛l̕ik͏e liq</strong>
​uid p_ain, the song of re̸gular exp​re <del>ssion parsing</del> will exti </em>​nguish
the voices of mor​ <strong>tal man from the sp</strong> ​here I can see it can you see
̲͚̖͔̙î̩́t̲͎̩̱͔́̋̀ it is beautiful t​<em>he f<code>inal snuf</code>fing o _f the lie​ <strong>s of
Man ALL IS LOŚ͖̩͇̗̪̏̈́T A</strong></em> <strong>LL I​S L</strong> OST th <em>e pon̷y he come</em> s he c̶̮om
<del>es he co</del> <strong> <del>me</del> s t <em>he</em> ich​</strong>or permeat <em>es al</em> l MY FAC <em>E MY FACE
ᵒh god n <strong>o NO NOO̼</strong></em> <strong>O​O N</strong> Θ stop t _he
an​<em>̶͑̾̾​̅ͫ͏̙̤g͇̫͛͆̾ͫ̑͆l͖͉̗̩̳̟̍ͫͥͨ_ e̠̅s<code>͎a̧͈͖r̽̾̈́͒͑e</code> n </em><em>​ot
rè̑ͧ̌aͨl̘̝̙̃ͤ͂̾̆ ZA̡͊͠͝LGΌ ISͮ̂҉̯͈͕̹̘̱ T</em><em> O͇̹̺ͅƝ̴ȳ̳ TH̘ </em><em>Ë͖́̉ ͠P̯͍̭O̚​N̐Y̡
H̸̡̪̯ͨ͊̽̅̾̎Ȩ̬̩̾͛ͪ̈́̀́͘ ̶̧̨̱̹̭̯ͧ̾ͬC̷̙̲̝͖ͭ̏ͥͮ͟Oͮ͏̮̪̝͍M̲̖͊̒ͪͩͬ̚̚͜Ȇ̴̟̟͙̞ͩ͌͝</em>*
S̨̥̫͎̭ͯ̿̔̀ͅ
<hr>
<p>Have you tried using an XML parser instead?</p>
<hr>
<blockquote>
<p><strong>Moderator's Note</strong></p>
<p>This post is locked to prevent inappropriate edits to its content. The post
looks exactly as it is supposed to look - there are no problems with its
content. Please do not flag it for our attention.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>While <em>arbitrary</em> HTML with only a regex is impossible, it's sometimes
appropriate to use them for parsing a <em>limited, known</em> set of HTML.</p>
<p>If you have a small set of HTML pages that you want to scrape data from and
then stuff into a database, regexes might work fine. For example, I recently
wanted to get the names, parties, and districts of Australian federal
Representatives, which I got off of the Parliament's web site. This was a
limited, one-time job.</p>
<p>Regexes worked just fine for me, and were very fast to set up.</p>
</center>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/html/" rel="tag">html</a></li>
            <li><a class="tag p-category" href="../../categories/regex/" rel="tag">regex</a></li>
            <li><a class="tag p-category" href="../../categories/xhtml/" rel="tag">xhtml</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-format-a-microsoft-json-date/" rel="prev" title="How do I format a Microsoft JSON date?">Previous post</a>
            </li>
            <li class="next">
                <a href="../why-is-reading-lines-from-stdin-much-slower-in-c-than-python/" rel="next" title="Why is reading lines from stdin much slower in C++ than Python?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
