<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>addEventListener 与 onclick | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/addeventlistener-yu-onclick/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../wei-shou-bao-hu-de-si-yao-wen-jian-shi-yong-ssh-jin-ru-amazon-ec2-shi-li-aws-shi-chu-cuo/" title="“未受保护的私钥文件！” 使用 SSH 进入 Amazon EC2 实例 (AWS) 时出错" type="text/html">
<link rel="next" href="../cong-net-zhong-de-app-config-huo-web-config-du-qu-she-zhi/" title="从 .NET 中的 app.config 或 web.config 读取设置" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="addEventListener 与 onclick">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/addeventlistener-yu-onclick/">
<meta property="og:description" content='addEventListener和 和有什么不一样onclick？
var h = document.getElementById("a");
h.onclick = dothing1;
h.addEventListener("click", dothing2);


上面的代码一起驻留在一个单独的.js文件中，并且它们都可以完美地工作。

解答
两者都是正确的，但它们本身都不是“最好的”，开发人'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T09:00:11+08:00">
<meta property="article:tag" content="addeventlistener">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="onclick">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">addEventListener 与 onclick</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:00:11+08:00" itemprop="datePublished" title="2023-02-17 09:00">2023-02-17 09:00</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><code>addEventListener</code>和 和有什么不一样<code>onclick</code>？</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span>
<span class="n">h</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dothing1</span><span class="p">;</span>
<span class="n">h</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="w"> </span><span class="n">dothing2</span><span class="p">);</span>
</pre></div>

<p>上面的代码一起驻留在一个单独的<code>.js</code>文件中，并且它们都可以完美地工作。</p>
<p><br><br></p>
<h2>解答</h2>
<p>两者都是正确的，但它们本身都不是“最好的”，开发人员选择使用这两种方法可能是有原因的。</p>
<p><strong>事件监听器（addEventListener 和 IE 的 attachEvent）</strong></p>
<p>早期版本的 Internet Explorer 实现 JavaScript 的方式与几乎所有其他浏览器都不同。对于低于 9
的版本，您可以使用<code>attachEvent</code>[ doc ] 方法，如下所示：</p>
<div class="code"><pre class="code literal-block"><span class="nv">element</span>.<span class="nv">attachEvent</span><span class="ss">(</span><span class="s1">'onclick'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">()</span><span class="w"> </span>{<span class="w"> </span><span class="cm">/* do stuff here*/</span><span class="w"> </span>}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>在大多数其他浏览器（包括 IE 9 及更高版本）中，您使用<code>addEventListener</code>[ doc ]，如下所示：</p>
<div class="code"><pre class="code literal-block"><span class="nv">element</span>.<span class="nv">addEventListener</span><span class="ss">(</span><span class="s1">'click'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">()</span><span class="w"> </span>{<span class="w"> </span><span class="cm">/* do stuff here*/</span><span class="w"> </span>},<span class="w"> </span><span class="nv">false</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>使用这种方法（DOM Level 2 事件），您可以将理论上无限数量的事件附加到任何单个元素。唯一的实际限制是客户端内存和其他性能问题，每个浏览器都不同。</p>
<p>上面的示例表示使用匿名函数[ doc ]。您还可以使用函数引用 [ doc ] 或闭包 [ doc ] 添加事件侦听器：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myFunctionReference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">stuff</span><span class="w"> </span><span class="n">here</span><span class="o">*/</span><span class="w"> </span><span class="p">}</span>

<span class="n">element</span><span class="o">.</span><span class="n">attachEvent</span><span class="p">(</span><span class="s1">'onclick'</span><span class="p">,</span><span class="w"> </span><span class="n">myFunctionReference</span><span class="p">);</span>
<span class="n">element</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="n">myFunctionReference</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>
</pre></div>

<p>的另一个重要特性<code>addEventListener</code>是 final 参数，它控制侦听器如何对冒泡事件做出反应[ doc ]。我一直在示例中传递
false，这可能是 95% 的用例的标准。<code>attachEvent</code>对于, 或 使用内联事件时没有等效参数。</p>
<p><strong>内联事件（HTML onclick="" 属性和 element.onclick）</strong></p>
<p>在所有支持 javascript 的浏览器中，您可以将事件侦听器内联，这意味着就在 HTML 代码中。你可能已经看过这个：</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">id=</span><span class="s">"testing"</span><span class="w"> </span><span class="na">href=</span><span class="s">"#"</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"alert('did stuff inline');"</span><span class="nt">&gt;</span>Click<span class="w"> </span>me<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>大多数有经验的开发人员都会避开这种方法，但它确实可以完成工作；它简单直接。您不能在此处使用闭包或匿名函数（尽管处理程序本身是某种匿名函数），并且您对范围的控制是有限的。</p>
<p>你提到的另一种方法：</p>
<div class="code"><pre class="code literal-block"><span class="nv">element</span>.<span class="nv">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">()</span><span class="w"> </span>{<span class="w"> </span><span class="cm">/*do stuff here */</span><span class="w"> </span>}<span class="c1">;</span>
</pre></div>

<p>... 等同于内联 javascript，除了您可以更好地控制范围（因为您正在编写脚本而不是 HTML）并且可以使用匿名函数、函数引用和/或闭包。</p>
<p>内联事件的显着缺点是，与上述事件侦听器不同，您可能只分配了一个内联事件。内联事件存储为元素[ doc ]的属性/特性，这意味着它可以被覆盖。</p>
<p><code>&lt;a&gt;</code>使用上面 HTML 中的示例：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'testing'</span><span class="p">);</span>
<span class="n">element</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">alert</span><span class="p">(</span><span class="s1">'did stuff #1'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="n">element</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">alert</span><span class="p">(</span><span class="s1">'did stuff #2'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
</pre></div>

<p>...当您单击该元素时，您 <strong>只会</strong> 看到“Did stuff #2”——您<code>onclick</code>用第二个值覆盖了属性的第一个赋值，并且您也覆盖了原始的内联
HTML<code>onclick</code>属性。在这里查看： http: //jsfiddle.net/jpgah/。</p>
<p>从广义上讲， <strong>不要使用内联事件</strong> 。它可能有特定的用例，但如果你不是 100% 确定你有那个用例，那么你不会也不应该使用内联事件。</p>
<p><strong>现代 Javascript（Angular 等）</strong></p>
<p>由于最初发布了这个答案，像 Angular 这样的 javascript 框架变得更加流行。你会在 Angular 模板中看到这样的代码：</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;button</span><span class="w"> </span><span class="err">(click)="doSomething()"</span><span class="nt">&gt;</span>Do<span class="w"> </span>Something<span class="nt">&lt;/button&gt;</span>
</pre></div>

<p>这看起来像一个内联事件，但它不是。这种类型的模板将被转换成更复杂的代码，这些代码在幕后使用事件监听器。我在这里写的关于事件的所有内容仍然适用，但你至少从细节中移除了一层。您应该了解具体细节，但如果您的现代
JS 框架最佳实践涉及在模板中编写此类代码，请不要觉得您在使用内联事件——您不是。</p>
<p><strong>哪个最好？</strong></p>
<p>问题是浏览器兼容性和必要性的问题。您需要将多个事件附加到一个元素吗？将来你会吗？很有可能，你会的。attachEvent 和
addEventListener
是必需的。如果没有，内联事件似乎可以解决问题，但您最好为未来做准备，尽管这看起来不太可能，但至少是可以预测的。您有可能不得不转向基于 JS
的事件侦听器，因此您不妨从那里开始。不要使用内联事件。</p>
<p>jQuery 和其他 javascript 框架将 DOM 级别 2 事件的不同浏览器实现封装在通用模型中，因此您可以编写跨浏览器兼容的代码，而不必担心
IE 作为反叛者的历史。与 jQuery 相同的代码，所有跨浏览器并准备摇滚：</p>
<div class="code"><pre class="code literal-block">$<span class="ss">(</span><span class="nv">element</span><span class="ss">)</span>.<span class="nv">on</span><span class="ss">(</span><span class="s1">'click'</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">()</span><span class="w"> </span>{<span class="w"> </span><span class="cm">/* do stuff */</span><span class="w"> </span>}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>不过，不要只为这一件事跑出一个框架。您可以轻松地推出自己的小实用程序来处理旧版浏览器：</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">addEvent</span><span class="ss">(</span><span class="nv">element</span>,<span class="w"> </span><span class="nv">evnt</span>,<span class="w"> </span><span class="nv">funct</span><span class="ss">)</span>{
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">element</span>.<span class="nv">attachEvent</span><span class="ss">)</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nv">element</span>.<span class="nv">attachEvent</span><span class="ss">(</span><span class="s1">'on'</span><span class="o">+</span><span class="nv">evnt</span>,<span class="w"> </span><span class="nv">funct</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nv">element</span>.<span class="nv">addEventListener</span><span class="ss">(</span><span class="nv">evnt</span>,<span class="w"> </span><span class="nv">funct</span>,<span class="w"> </span><span class="nv">false</span><span class="ss">)</span><span class="c1">;</span>
}

<span class="o">//</span><span class="w"> </span><span class="nv">example</span>
<span class="nv">addEvent</span><span class="ss">(</span>
<span class="w">    </span><span class="nv">document</span>.<span class="nv">getElementById</span><span class="ss">(</span><span class="s1">'myElement'</span><span class="ss">)</span>,
<span class="w">    </span><span class="s1">'click'</span>,
<span class="w">    </span><span class="nv">function</span><span class="w"> </span><span class="ss">()</span><span class="w"> </span>{<span class="w"> </span><span class="nv">alert</span><span class="ss">(</span><span class="s1">'hi!'</span><span class="ss">)</span><span class="c1">; }</span>
<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>试试看： http: //jsfiddle.net/bmArj/</p>
<p>考虑到所有这些，除非您正在查看的脚本以其他方式考虑了浏览器的差异（在您的问题中未显示的代码中），否则使用的部分在<code>addEventListener</code>IE
版本低于 9 时不起作用。</p>
<p><strong>文档和相关阅读</strong></p>
<ul>
<li>W3 HTML 规范，元素事件处理程序属性</li>
<li>MDN 上的 element.addEventListener</li>
<li>MSDN 上的 element.attachEvent</li>
<li>Jquery.on</li>
<li>quirksmode博客“事件介绍”</li>
<li>Google 的 CDN 托管 javascript 库</li>
</ul>
<p><br></p>
<h3>更多建议</h3>
<p>如果你有另外几个功能，你可以看到不同之处：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'a'</span><span class="p">);</span>
<span class="n">h</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doThing_1</span><span class="p">;</span>
<span class="n">h</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doThing_2</span><span class="p">;</span>

<span class="n">h</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="n">doThing_3</span><span class="p">);</span>
<span class="n">h</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="n">doThing_4</span><span class="p">);</span>
</pre></div>

<p>功能 2、3 和 4 起作用，但 1
不起作用。这是因为<code>addEventListener</code>不会覆盖现有的事件处理程序，而<code>onclick</code>会覆盖任何现有的<code>onclick =
fn</code>事件处理程序。</p>
<p>当然，另一个显着差异是它将<code>onclick</code>始终有效，而<code>addEventListener</code>在版本 9 之前的 Internet Explorer
中不起作用。您可以在 IE &lt;9 中使用类似的<code>attachEvent</code>（语法 <em>略有不同）。</em></p>
<p><br><br><a href="../addeventlistener-vs-onclick/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/addeventlistener/" rel="tag">addeventlistener</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/onclick/" rel="tag">onclick</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../wei-shou-bao-hu-de-si-yao-wen-jian-shi-yong-ssh-jin-ru-amazon-ec2-shi-li-aws-shi-chu-cuo/" rel="prev" title="“未受保护的私钥文件！” 使用 SSH 进入 Amazon EC2 实例 (AWS) 时出错">Previous post</a>
            </li>
            <li class="next">
                <a href="../cong-net-zhong-de-app-config-huo-web-config-du-qu-she-zhi/" rel="next" title="从 .NET 中的 app.config 或 web.config 读取设置">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
