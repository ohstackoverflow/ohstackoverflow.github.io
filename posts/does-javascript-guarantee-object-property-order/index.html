<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Does JavaScript guarantee object property order? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/does-javascript-guarantee-object-property-order/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../list-of-lists-changes-reflected-across-sublists-unexpectedly/" title="List of lists changes reflected across sublists unexpectedly" type="text/html">
<link rel="next" href="../android-os-fileuriexposedexception-file-storage-emulated-0-test-txt-exposed-beyond-app-through-intent-getdata/" title="android.os.FileUriExposedException: file:///storage/emulated/0/test.txt exposed beyond app through Intent.getData()" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Does JavaScript guarantee object property order?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/does-javascript-guarantee-object-property-order/">
<meta property="og:description" content='If I create an object like this:
var obj = {};
obj.prop1 = "Foo";
obj.prop2 = "Bar";


Will the resulting object always look like this?
{ prop1 : "Foo", prop2 : "Bar" }


That is, will the properties '>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T10:04:21+08:00">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="object">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Does JavaScript guarantee object property order?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:04:21+08:00" itemprop="datePublished" title="2023-02-17 10:04">2023-02-17 10:04</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>If I create an object like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="n">obj</span><span class="o">.</span><span class="n">prop1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Foo"</span><span class="p">;</span>
<span class="n">obj</span><span class="o">.</span><span class="n">prop2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bar"</span><span class="p">;</span>
</pre></div>

<p>Will the resulting object <em>always</em> look like this?</p>
<div class="code"><pre class="code literal-block">{ prop1 : "Foo", prop2 : "Bar" }
</pre></div>

<p>That is, will the properties be in the same order that I added them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The iteration order for objects follows a certain set of rules since ES2015,
but <strong>it does not (always) follow the insertion order</strong>. Simply put, the
iteration order is a combination of the insertion order for strings keys, and
ascending order for number-like keys:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">order</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span>
<span class="k">const</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>Using an array or a <code>Map</code> object can be a better way to achieve this. <code>Map</code>
shares some similarities with <code>Object</code> and guarantees the keys to be iterated
in order of insertion, without exception:</p>
<blockquote>
<p>The keys in Map are ordered while keys added to object are not. Thus, when
iterating over it, a Map object returns keys in order of insertion. (Note
that in the ECMAScript 2015 spec objects do preserve creation order for
string and Symbol keys, so traversal of an object with ie only string keys
would yield keys in order of insertion)</p>
</blockquote>
<p>As a note, properties order in objects weren’t guaranteed at all before
ES2015. Definition of an Object from ECMAScript Third Edition (pdf):</p>
<blockquote>
<h4>4.3.3 Object</h4>
<p>An object is a member of the type Object. <strong>It is an unordered collection of
properties</strong> each of which contains a primitive value, object, or function.
A function stored in a property of an object is called a method.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p><strong>YES (but not always insertion order).</strong></p>
<p>Most Browsers iterate object properties as:</p>
<ol>
<li>Positive integer keys in ascending order (and strings like "1" that parse as ints)</li>
<li>String keys, in insertion order (ES2015 guarantees this and all browsers comply)</li>
<li>Symbol names, in insertion order (ES2015 guarantees this and all browsers comply)</li>
</ol>
<p>Some older browsers combine categories #1 and #2, iterating all keys in
insertion order. If your keys might parse as integers, it's best not to rely
on any specific iteration order.</p>
<p><strong>Current Language Spec (since ES2015)</strong> insertion order is preserved, except
in the case of keys that parse as positive integers (eg "7" or "99"), where
behavior varies between browsers. For example, Chrome/V8 does not respect
insertion order when the keys are parse as numeric.</p>
<p><strong>Old Language Spec (before ES2015)</strong> : Iteration order was technically
undefined, but all major browsers complied with the ES2015 behavior.</p>
<p>Note that the ES2015 behavior was a good example of the language spec being
driven by existing behavior, and not the other way round. To get a deeper
sense of that backwards-compatibility mindset, see
http://code.google.com/p/v8/issues/detail?id=164, a Chrome bug that covers in
detail the design decisions behind Chrome's iteration order behavior. Per one
of the (rather opinionated) comments on that bug report:</p>
<blockquote>
<p>Standards always follow implementations, that's where XHR came from, and
Google does the same thing by implementing Gears and then embracing
equivalent HTML5 functionality. The right fix is to have ECMA formally
incorporate the de-facto standard behavior into the next rev of the spec.</p>
</blockquote>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/object/" rel="tag">object</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../list-of-lists-changes-reflected-across-sublists-unexpectedly/" rel="prev" title="List of lists changes reflected across sublists unexpectedly">Previous post</a>
            </li>
            <li class="next">
                <a href="../android-os-fileuriexposedexception-file-storage-emulated-0-test-txt-exposed-beyond-app-through-intent-getdata/" rel="next" title="android.os.FileUriExposedException: file:///storage/emulated/0/test.txt exposed beyond app through Intent.getData()">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
