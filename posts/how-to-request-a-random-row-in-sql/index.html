<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to request a random row in SQL? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-to-request-a-random-row-in-sql/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-find-the-location-of-python-module-sources/" title="How do I find the location of Python module sources?" type="text/html">
<link rel="next" href="../programmatic-equivalent-of-default-type/" title="Programmatic equivalent of default(Type)" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How to request a random row in SQL?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-to-request-a-random-row-in-sql/">
<meta property="og:description" content="How can I request a random row (or as close to truly random as is possible) in
pure SQL?

Answer
See this post: SQL to Select a random row from a database table. It goes
through methods for doing this">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T02:04:33+08:00">
<meta property="article:tag" content="random">
<meta property="article:tag" content="sql">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to request a random row in SQL?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T02:04:33+08:00" itemprop="datePublished" title="2023-02-18 02:04">2023-02-18 02:04</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>How can I request a random row (or as close to truly random as is possible) in
pure SQL?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>See this post: SQL to Select a random row from a database table. It goes
through methods for doing this in MySQL, PostgreSQL, Microsoft SQL Server, IBM
DB2 and Oracle (the following is copied from that link):</p>
<p>Select a random row with MySQL:</p>
<div class="code"><pre class="code literal-block">SELECT column FROM table
ORDER BY RAND()
LIMIT 1
</pre></div>

<p>Select a random row with PostgreSQL:</p>
<div class="code"><pre class="code literal-block"><span class="nv">SELECT</span><span class="w"> </span><span class="nv">column</span><span class="w"> </span><span class="nv">FROM</span><span class="w"> </span><span class="nv">table</span>
<span class="nv">ORDER</span><span class="w"> </span><span class="nv">BY</span><span class="w"> </span><span class="k">RANDOM</span><span class="ss">()</span>
<span class="nv">LIMIT</span><span class="w"> </span><span class="mi">1</span>
</pre></div>

<p>Select a random row with Microsoft SQL Server:</p>
<div class="code"><pre class="code literal-block">SELECT TOP 1 column FROM table
ORDER BY NEWID()
</pre></div>

<p>Select a random row with IBM DB2</p>
<div class="code"><pre class="code literal-block">SELECT column, RAND() as IDX 
FROM table 
ORDER BY IDX FETCH FIRST 1 ROWS ONLY
</pre></div>

<p>Select a random record with Oracle:</p>
<div class="code"><pre class="code literal-block">SELECT column FROM
( SELECT column FROM table
ORDER BY dbms_random.value )
WHERE rownum = 1
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Solutions like Jeremies:</p>
<div class="code"><pre class="code literal-block">SELECT * FROM table ORDER BY RAND() LIMIT 1
</pre></div>

<p>work, but they need a sequential scan of all the table (because the random
value associated with each row needs to be calculated - so that the smallest
one can be determined), which can be quite slow for even medium sized tables.
My recommendation would be to use some kind of indexed numeric column (many
tables have these as their primary keys), and then write something like:</p>
<div class="code"><pre class="code literal-block">SELECT * FROM table WHERE num_value &gt;= RAND() * 
    ( SELECT MAX (num_value ) FROM table ) 
ORDER BY num_value LIMIT 1
</pre></div>

<p>This works in logarithmic time, regardless of the table size, if <code>num_value</code>
is indexed. One caveat: this assumes that <code>num_value</code> is equally distributed
in the range <code>0..MAX(num_value)</code>. If your dataset strongly deviates from this
assumption, you will get skewed results (some rows will appear more often than
others).</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/random/" rel="tag">random</a></li>
            <li><a class="tag p-category" href="../../categories/sql/" rel="tag">sql</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-find-the-location-of-python-module-sources/" rel="prev" title="How do I find the location of Python module sources?">Previous post</a>
            </li>
            <li class="next">
                <a href="../programmatic-equivalent-of-default-type/" rel="next" title="Programmatic equivalent of default(Type)">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
