<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>jQuery Ajax POST example with PHP | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/jquery-ajax-post-example-with-php/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-create-a-unique-constraint-that-also-allows-nulls/" title="How do I create a unique constraint that also allows nulls?" type="text/html">
<link rel="next" href="../should-i-use-singular-or-plural-name-convention-for-rest-resources/" title="Should I use Singular or Plural name convention for REST resources?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="jQuery Ajax POST example with PHP">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/jquery-ajax-post-example-with-php/">
<meta property="og:description" content='I am trying to send data from a form to a database. Here is the form I am
using:
&lt;form name="foo" action="form.php" method="POST" id="foo"&gt;
    &lt;label for="bar"&gt;A bar&lt;/label&gt;
    &lt;input id="bar" name='>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T15:27:06+08:00">
<meta property="article:tag" content="ajax">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="jquery">
<meta property="article:tag" content="post">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">jQuery Ajax POST example with PHP</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T15:27:06+08:00" itemprop="datePublished" title="2023-02-17 15:27">2023-02-17 15:27</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I am trying to send data from a form to a database. Here is the form I am
using:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form</span><span class="w"> </span><span class="na">name=</span><span class="s">"foo"</span><span class="w"> </span><span class="na">action=</span><span class="s">"form.php"</span><span class="w"> </span><span class="na">method=</span><span class="s">"POST"</span><span class="w"> </span><span class="na">id=</span><span class="s">"foo"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"bar"</span><span class="nt">&gt;</span>A<span class="w"> </span>bar<span class="nt">&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">id=</span><span class="s">"bar"</span><span class="w"> </span><span class="na">name=</span><span class="s">"bar"</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">value=</span><span class="s">""</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"submit"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Send"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>The typical approach would be to submit the form, but this causes the browser
to redirect. Using jQuery and Ajax, is it possible to capture all of the
form's data and submit it to a PHP script (an example, <em>form.php</em> )?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Basic usage of <code>.ajax</code> would look something like this:</p>
<p><strong>HTML:</strong></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form</span><span class="w"> </span><span class="na">id=</span><span class="s">"foo"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"bar"</span><span class="nt">&gt;</span>A<span class="w"> </span>bar<span class="nt">&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">id=</span><span class="s">"bar"</span><span class="w"> </span><span class="na">name=</span><span class="s">"bar"</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">value=</span><span class="s">""</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"submit"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Send"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p><strong>jQuery:</strong></p>
<div class="code"><pre class="code literal-block">// <span class="nb">Variable</span> <span class="nb">to</span> <span class="n">hold</span> <span class="n">request</span>
<span class="n">var</span> <span class="n">request</span>;

// <span class="n">Bind</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">submit</span> <span class="n">event</span> <span class="nb">of</span> <span class="k">our</span> <span class="n">form</span>
$(<span class="s">"#foo"</span>).<span class="n">submit</span>(<span class="n">function</span>(<span class="n">event</span>){

    // <span class="n">Prevent</span> <span class="k">default</span> <span class="n">posting</span> <span class="nb">of</span> <span class="n">form</span> - <span class="nb">put</span> <span class="n">here</span> <span class="nb">to</span> <span class="n">work</span> <span class="nb">in</span> <span class="n">case</span> <span class="nb">of</span> <span class="n">errors</span>
    <span class="n">event</span>.<span class="n">preventDefault</span>();

    // <span class="n">Abort</span> <span class="nb">any</span> <span class="n">pending</span> <span class="n">request</span>
    <span class="k">if</span> (<span class="n">request</span>) {
        <span class="n">request</span>.<span class="n">abort</span>();
    }
    // <span class="n">setup</span> <span class="n">some</span> <span class="nb">local</span> <span class="n">variables</span>
    <span class="n">var</span> <span class="nv">$form</span> = $(<span class="n">this</span>);

    // <span class="n">Let's</span> <span class="n">select</span> <span class="o">and</span> <span class="nb">cache</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">fields</span>
    <span class="n">var</span> <span class="nv">$inputs</span> = <span class="nv">$form</span>.<span class="n">find</span>(<span class="s">"input, select, button, textarea"</span>);

    // <span class="n">Serialize</span> <span class="n">the</span> <span class="n">data</span> <span class="nb">in</span> <span class="n">the</span> <span class="n">form</span>
    <span class="n">var</span> <span class="n">serializedData</span> = <span class="nv">$form</span>.<span class="n">serialize</span>();

    // <span class="n">Let's</span> <span class="n">disable</span> <span class="n">the</span> <span class="n">inputs</span> <span class="k">for</span> <span class="n">the</span> <span class="n">duration</span> <span class="nb">of</span> <span class="n">the</span> <span class="n">Ajax</span> <span class="n">request</span>.
    // <span class="n">Note:</span> <span class="n">we</span> <span class="n">disable</span> <span class="n">elements</span> <span class="n">AFTER</span> <span class="n">the</span> <span class="n">form</span> <span class="n">data</span> <span class="k">has</span> <span class="n">been</span> <span class="n">serialized</span>.
    // <span class="n">Disabled</span> <span class="n">form</span> <span class="n">elements</span> <span class="n">will</span> <span class="nb">not</span> <span class="n">be</span> <span class="n">serialized</span>.
    <span class="nv">$inputs</span>.<span class="n">prop</span>(<span class="s">"disabled"</span>, <span class="n">true</span>);

    // <span class="n">Fire</span> <span class="n">off</span> <span class="n">the</span> <span class="n">request</span> <span class="nb">to</span> /<span class="n">form</span>.<span class="n">php</span>
    <span class="n">request</span> = <span class="nv">$.ajax</span>({
        <span class="n">url:</span> <span class="s">"/form.php"</span>,
        <span class="n">type:</span> <span class="s">"post"</span>,
        <span class="n">data:</span> <span class="n">serializedData</span>
    });

    // <span class="n">Callback</span> <span class="n">handler</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">called</span> <span class="n">on</span> <span class="n">success</span>
    <span class="n">request</span>.<span class="nb">done</span>(<span class="n">function</span> (<span class="n">response</span>, <span class="n">textStatus</span>, <span class="n">jqXHR</span>){
        // <span class="n">Log</span> <span class="n">a</span> <span class="nb">message</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">console</span>
        <span class="n">console</span>.<span class="nb">log</span>(<span class="s">"Hooray, it worked!"</span>);
    });

    // <span class="n">Callback</span> <span class="n">handler</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">called</span> <span class="n">on</span> <span class="n">failure</span>
    <span class="n">request</span>.<span class="nb">fail</span>(<span class="n">function</span> (<span class="n">jqXHR</span>, <span class="n">textStatus</span>, <span class="n">errorThrown</span>){
        // <span class="n">Log</span> <span class="n">the</span> <span class="n">error</span> <span class="nb">to</span> <span class="n">the</span> <span class="n">console</span>
        <span class="n">console</span>.<span class="n">error</span>(
            <span class="s">"The following error occurred: "</span>+
            <span class="n">textStatus</span>, <span class="n">errorThrown</span>
        );
    });

    // <span class="n">Callback</span> <span class="n">handler</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">called</span> <span class="n">regardless</span>
    // <span class="k">if</span> <span class="n">the</span> <span class="n">request</span> <span class="n">failed</span> <span class="o">or</span> <span class="n">succeeded</span>
    <span class="n">request</span>.<span class="n">always</span>(<span class="n">function</span> () {
        // <span class="n">Reenable</span> <span class="n">the</span> <span class="n">inputs</span>
        <span class="nv">$inputs</span>.<span class="n">prop</span>(<span class="s">"disabled"</span>, <span class="n">false</span>);
    });

});
</pre></div>

<p><em>Note: Since jQuery 1.8,<code>.success()</code>, <code>.error()</code> and <code>.complete()</code> are
deprecated in favor of <code>.done()</code>, <code>.fail()</code> and <code>.always()</code>.</em></p>
<p><em>Note: Remember that the above snippet has to be done after DOM ready, so you
should put it inside a<code>$(document).ready()</code> handler (or use the <code>$()</code>
shorthand).</em></p>
<p><em>Tip: You can chain the callback handlers like
this:<code>$.ajax().done().fail().always();</code></em></p>
<p><strong>PHP (that is, form.php):</strong></p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">posted</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">jQuery</span><span class="o">.</span><span class="n">ajax</span>
<span class="o">//</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="o">$</span><span class="n">_POST</span><span class="p">,</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">this</span><span class="p">:</span>
<span class="o">$</span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">isset</span><span class="p">(</span><span class="o">$</span><span class="n">_POST</span><span class="p">[</span><span class="s1">'bar'</span><span class="p">])</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="o">$</span><span class="n">_POST</span><span class="p">[</span><span class="s1">'bar'</span><span class="p">]</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
</pre></div>

<p><em>Note: Always sanitize posted data, to prevent injections and other malicious
code.</em></p>
<p>You could also use the shorthand <code>.post</code> in place of <code>.ajax</code> in the above
JavaScript code:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">.</span><span class="nc">post</span><span class="o">(</span><span class="s1">'/form.php'</span><span class="o">,</span><span class="w"> </span><span class="nt">serializedData</span><span class="o">,</span><span class="w"> </span><span class="nt">function</span><span class="o">(</span><span class="nt">response</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">Log</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">response</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">console</span>
<span class="w">    </span><span class="err">console.log("</span><span class="n">Response</span><span class="p">:</span><span class="w"> </span><span class="err">"</span><span class="o">+</span><span class="n">response</span><span class="p">);</span>
<span class="p">}</span><span class="o">);</span>
</pre></div>

<p><em>Note: The above JavaScript code is made to work with jQuery 1.8 and later,
but it should work with previous versions down to jQuery 1.5.</em></p>
<p><br></p>
<h3>Suggest</h3>
<p>To make an Ajax request using <em>jQuery</em> you can do this by the following code.</p>
<p><strong>HTML:</strong></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form</span><span class="w"> </span><span class="na">id=</span><span class="s">"foo"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"bar"</span><span class="nt">&gt;</span>A<span class="w"> </span>bar<span class="nt">&lt;/label&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">id=</span><span class="s">"bar"</span><span class="w"> </span><span class="na">name=</span><span class="s">"bar"</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">value=</span><span class="s">""</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"submit"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Send"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="cm">&lt;!-- The result of the search will be rendered inside this div --&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"result"</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>

<p><strong>JavaScript:</strong></p>
<p><strong>Method 1</strong></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">*/</span>
<span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="o">.</span><span class="n">serialize</span><span class="p">();</span>

<span class="w"> </span><span class="o">$.</span><span class="n">ajax</span><span class="p">({</span>
<span class="w">        </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.php"</span><span class="p">,</span>
<span class="w">        </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s2">"post"</span><span class="p">,</span>
<span class="w">        </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="p">,</span>
<span class="w">        </span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">           </span><span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">PHP</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="p">(</span><span class="n">what</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nb">print</span><span class="p">)</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">jqXHR</span><span class="p">,</span><span class="w"> </span><span class="n">textStatus</span><span class="p">,</span><span class="w"> </span><span class="n">errorThrown</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">textStatus</span><span class="p">,</span><span class="w"> </span><span class="n">errorThrown</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>

<p><strong>Method 2</strong></p>
<div class="code"><pre class="code literal-block"><span class="o">/*</span><span class="w"> </span><span class="n">Attach</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">submit</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">*/</span>
<span class="o">$</span><span class="p">(</span><span class="s2">"#foo"</span><span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">ajaxRequest</span><span class="p">;</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Stop</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">submitting</span><span class="w"> </span><span class="n">normally</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">event</span><span class="o">.</span><span class="n">preventDefault</span><span class="p">();</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Clear</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">div</span><span class="o">*/</span>
<span class="w">    </span><span class="o">$</span><span class="p">(</span><span class="s2">"#result"</span><span class="p">)</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="o">.</span><span class="n">serialize</span><span class="p">();</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">Send</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">put</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">div</span><span class="o">.</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">am</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">aborting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">it</span><span class="s1">'s an</span>
<span class="w">       </span><span class="n">asynchronous</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">meaning</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="n">it</span><span class="s1">'s sent it'</span><span class="n">s</span><span class="w"> </span><span class="n">out</span>
<span class="w">       </span><span class="n">there</span><span class="o">.</span><span class="w"> </span><span class="n">But</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">abort</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">it</span>
<span class="w">       </span><span class="n">by</span><span class="w"> </span><span class="n">abort</span><span class="p">()</span><span class="o">.</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="n">Ajax</span><span class="w"> </span><span class="n">methods</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">XMLHttpRequest</span>
<span class="w">       </span><span class="n">object</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">abort</span><span class="p">()</span><span class="o">.</span><span class="w"> </span><span class="o">*/</span>
<span class="w">       </span><span class="n">ajaxRequest</span><span class="o">=</span><span class="w"> </span><span class="o">$.</span><span class="n">ajax</span><span class="p">({</span>
<span class="w">            </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.php"</span><span class="p">,</span>
<span class="w">            </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s2">"post"</span><span class="p">,</span>
<span class="w">            </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="n">values</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">    </span><span class="o">/*</span><span class="w">  </span><span class="n">Request</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">aborted</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">ajaxRequest</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span><span class="w"> </span><span class="o">*/</span>

<span class="w">    </span><span class="n">ajaxRequest</span><span class="o">.</span><span class="n">done</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">textStatus</span><span class="p">,</span><span class="w"> </span><span class="n">jqXHR</span><span class="p">){</span>

<span class="w">         </span><span class="o">//</span><span class="w"> </span><span class="n">Show</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">submit</span><span class="w"> </span><span class="n">message</span>
<span class="w">         </span><span class="o">$</span><span class="p">(</span><span class="s2">"#result"</span><span class="p">)</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="s1">'Submitted successfully'</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="o">/*</span><span class="w"> </span><span class="n">On</span><span class="w"> </span><span class="n">failure</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">called</span><span class="w">  </span><span class="o">*/</span>
<span class="w">    </span><span class="n">ajaxRequest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">(){</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Show</span><span class="w"> </span><span class="n">error</span>
<span class="w">        </span><span class="o">$</span><span class="p">(</span><span class="s2">"#result"</span><span class="p">)</span><span class="o">.</span><span class="n">html</span><span class="p">(</span><span class="s1">'There is error while submit'</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>

<p>The <code>.success()</code>, <code>.error()</code>, and <code>.complete()</code> callbacks are deprecated as of
<em>jQuery 1.8</em>. To prepare your code for their eventual removal, use <code>.done()</code>,
<code>.fail()</code>, and <code>.always()</code> instead.</p>
<p><code>MDN: abort()</code> . If the request has been sent already, this method will abort
the request.</p>
<p>So we have successfully send an Ajax request, and now it's time to grab data
to server.</p>
<p><strong>PHP</strong></p>
<p>As we make a POST request in an Ajax call (<code>type: "post"</code>), we can now grab
data using either <code>$_REQUEST</code> or <code>$_POST</code>:</p>
<div class="code"><pre class="code literal-block">  $bar = $_POST['bar']
</pre></div>

<p>You can also see what you get in the POST request by simply either. BTW, make
sure that <code>$_POST</code> is set. Otherwise you will get an error.</p>
<div class="code"><pre class="code literal-block"><span class="n">var_dump</span><span class="p">(</span><span class="o">$</span><span class="n">_POST</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="n">Or</span>
<span class="n">print_r</span><span class="p">(</span><span class="o">$</span><span class="n">_POST</span><span class="p">);</span>
</pre></div>

<p>And you are inserting a value into the database. Make sure you are
<em>sensitizing</em> or <em>escaping</em> All requests (whether you made a GET or POST)
properly before making the query. The best would be using <em>prepared
statements</em>.</p>
<p>And if you want to return any data back to the page, you can do it by just
echoing that data like below.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// 1. Without JSON</span>
<span class="w">   </span><span class="n">echo</span><span class="w"> </span><span class="s">"Hello, this is one"</span>

<span class="c1">// 2. By JSON. Then here is where I want to send a value back to the success of the Ajax below</span>
<span class="n">echo</span><span class="w"> </span><span class="n">json_encode</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="s">'returned_val'</span><span class="w"> </span><span class="p">=</span><span class="o">&gt;</span><span class="w"> </span><span class="s">'yoho'</span><span class="p">));</span>
</pre></div>

<p>And then you can get it like:</p>
<div class="code"><pre class="code literal-block"> ajaxRequest.done(function (response){
    alert(response);
 });
</pre></div>

<hr>
<p>There are a couple of shorthand methods. You can use the below code. It does
the same work.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">ajaxRequest</span><span class="o">=</span><span class="w"> </span><span class="o">$.</span><span class="n">post</span><span class="p">(</span><span class="s2">"test.php"</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">alert</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="p">})</span>
<span class="w">  </span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s2">"error"</span><span class="p">);</span>
<span class="w">  </span><span class="p">})</span>
<span class="w">  </span><span class="o">.</span><span class="n">always</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s2">"finished"</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/ajax/" rel="tag">ajax</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/jquery/" rel="tag">jquery</a></li>
            <li><a class="tag p-category" href="../../categories/post/" rel="tag">post</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-create-a-unique-constraint-that-also-allows-nulls/" rel="prev" title="How do I create a unique constraint that also allows nulls?">Previous post</a>
            </li>
            <li class="next">
                <a href="../should-i-use-singular-or-plural-name-convention-for-rest-resources/" rel="next" title="Should I use Singular or Plural name convention for REST resources?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
