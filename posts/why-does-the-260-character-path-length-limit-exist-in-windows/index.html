<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Why does the 260 character path length limit exist in Windows? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/why-does-the-260-character-path-length-limit-exist-in-windows/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../contenteditable-change-events/" title="contenteditable change events" type="text/html">
<link rel="next" href="../android-8-0-java-lang-illegalstateexception-not-allowed-to-start-service-intent/" title="Android 8.0: java.lang.IllegalStateException: Not allowed to start service Intent" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Why does the 260 character path length limit exist in Windows?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/why-does-the-260-character-path-length-limit-exist-in-windows/">
<meta property="og:description" content="I have come up against this problem a few times at inopportune moments:

Trying to work on open source Java projects with deep paths
Storing deep Fitnesse wiki trees in source control
An error trying ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T09:43:53+08:00">
<meta property="article:tag" content="limit">
<meta property="article:tag" content="path">
<meta property="article:tag" content="windows">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Why does the 260 character path length limit exist in Windows?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:43:53+08:00" itemprop="datePublished" title="2023-03-03 09:43">2023-03-03 09:43</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have come up against this problem a few times at inopportune moments:</p>
<ul>
<li>Trying to work on open source Java projects with deep paths</li>
<li>Storing deep Fitnesse wiki trees in source control</li>
<li>An error trying to use Bazaar to import my source control tree</li>
</ul>
<p>Why does this limit exist?</p>
<p>Why hasn't it been removed yet?</p>
<p>How do you cope with the path limit? And no, switching to Linux or Mac OS X is
not a valid answer to this question ;)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Quoting this article https://learn.microsoft.com/en-
us/windows/desktop/FileIO/naming-a-file#maximum-path-length-limitation</p>
<blockquote>
<p><strong>Maximum Path Length Limitation</strong></p>
<p>In the Windows API (with some exceptions discussed in the following
paragraphs), the maximum length for a path is <strong>MAX_PATH</strong> , which is
defined as 260 characters. A local path is structured in the following
order: drive letter, colon, backslash, name components separated by
backslashes, and a terminating null character. For example, the maximum path
on drive D is "D:\ <em>some 256-character path string</em> <nul>" where "<nul>"
represents the invisible terminating null character for the current system
codepage. (The characters &lt; &gt; are used here for visual clarity and cannot be
part of a valid path string.)</nul></nul></p>
</blockquote>
<p>Now we see that it is 1+2+256+1 or [drive][:\][path][null] = 260. One could
assume that 256 is a reasonable fixed string length from the DOS days. And
going back to the DOS APIs we realize that the system tracked the current path
per drive, and we have 26 (32 with symbols) maximum drives (and current
directories).</p>
<p>The INT 0x21 AH=0x47 says “This function returns the path description without
the drive letter and the initial backslash.” So we see that the system stores
the CWD as a pair (drive, path) and you ask for the path by specifying the
drive (1=A, 2=B, …), if you specify a 0 then it assumes the path for the drive
returned by INT 0x21 AH=0x15 AL=0x19. So now we know why it is 260 and not
256, because those 4 bytes are not stored in the path string.</p>
<p>Why a 256 byte path string, because 640K is enough RAM.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is not strictly true as the NTFS filesystem supports paths up to 32k
characters. You can use the win32 api and "<code>\\?\</code>" prefix the path to use
greater than 260 characters.</p>
<p>A detailed explanation of long path from the .Net BCL team blog.<br>
A small excerpt highlights the issue with long paths</p>
<blockquote>
<p>Another concern is inconsistent behavior that would result by exposing long
path support. Long paths with the <code>\\?\</code> prefix can be used in most of the
file-related Windows APIs, but not all Windows APIs. For example,
LoadLibrary, which maps a module into the address of the calling process,
fails if the file name is longer than MAX_PATH. So this means MoveFile will
let you move a DLL to a location such that its path is longer than 260
characters, but when you try to load the DLL, it would fail. There are
similar examples throughout the Windows APIs; some workarounds exist, but
they are on a case-by-case basis.</p>
</blockquote>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/limit/" rel="tag">limit</a></li>
            <li><a class="tag p-category" href="../../categories/path/" rel="tag">path</a></li>
            <li><a class="tag p-category" href="../../categories/windows/" rel="tag">windows</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../contenteditable-change-events/" rel="prev" title="contenteditable change events">Previous post</a>
            </li>
            <li class="next">
                <a href="../android-8-0-java-lang-illegalstateexception-not-allowed-to-start-service-intent/" rel="next" title="Android 8.0: java.lang.IllegalStateException: Not allowed to start service Intent">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
