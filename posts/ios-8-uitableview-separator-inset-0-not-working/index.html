<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>iOS 8 UITableView separator inset 0 not working | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/ios-8-uitableview-separator-inset-0-not-working/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../vue-js-how-to-properly-watch-for-nested-data/" title="Vue.js - How to properly watch for nested data" type="text/html">
<link rel="next" href="../to-switch-from-vertical-split-to-horizontal-split-fast-in-vim/" title="To switch from vertical split to horizontal split fast in Vim" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="iOS 8 UITableView separator inset 0 not working">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/ios-8-uitableview-separator-inset-0-not-working/">
<meta property="og:description" content="I have an app where the UITableView's separator inset is set to custom
values - Right 0, Left 0. This works perfectly in iOS 7.x, however in
iOS 8.0 I see that the separator inset is set to the defaul">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T18:26:11+08:00">
<meta property="article:tag" content="ios">
<meta property="article:tag" content="ios8">
<meta property="article:tag" content="objective-c">
<meta property="article:tag" content="swift">
<meta property="article:tag" content="uitableview">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">iOS 8 UITableView separator inset 0 not working</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:26:11+08:00" itemprop="datePublished" title="2023-02-17 18:26">2023-02-17 18:26</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have an app where the <code>UITableView</code>'s separator inset is set to custom
values - Right <code>0</code>, Left <code>0</code>. This works perfectly in <code>iOS 7.x</code>, however in
<code>iOS 8.0</code> I see that the separator inset is set to the default of <code>15</code> on the
right. Even though in the xib files it set to <code>0</code>, it still shows up
incorrectly.</p>
<p>How do I remove the <code>UITableViewCell</code> separator margins?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>iOS 8.0 introduces the layoutMargins property on cells AND table views.</strong></p>
<p>This property isn't available on iOS 7.0 so you need to make sure you check
before assigning it!</p>
<p>The easy fix is to subclass your cell and override the layout margins property
as suggested by @user3570727. However you will lose any system behavior like
inheriting margins from the Safe Area so I do not recommend the below
solution:</p>
<p>(ObjectiveC)</p>
<div class="code"><pre class="code literal-block"><span class="o">-</span><span class="ss">(</span><span class="nv">UIEdgeInsets</span><span class="ss">)</span><span class="nv">layoutMargins</span><span class="w"> </span>{<span class="w"> </span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nv">UIEdgeInsetsZero</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">override</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">margins</span><span class="w"> </span><span class="nv">inc</span>.<span class="w"> </span><span class="nv">safe</span><span class="w"> </span><span class="nv">area</span>
}
</pre></div>

<p>(swift 4.2):</p>
<div class="code"><pre class="code literal-block"><span class="n">override</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">layoutMargins</span><span class="p">:</span><span class="w"> </span><span class="n">UIEdgeInsets</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">.</span><span class="n">zero</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>If you don't want to override the property, or need to set it conditionally,
keep reading.</p>
<hr>
<p>In addition to the <code>layoutMargins</code> property, Apple has added a <strong>property</strong> to
your cell that will prevent it from inheriting your Table View's margin
settings. When this property is set, your cells are allowed to configure their
own margins independently of the table view. Think of it as an override.</p>
<p>This property is called <code>preservesSuperviewLayoutMargins</code>, and setting it to
<code>NO</code> will allow the cell's <code>layoutMargin</code> setting to override whatever
<code>layoutMargin</code> is set on your TableView. It both saves time ( <strong>you don't have
to modify the Table View's settings</strong> ), and is more concise. Please refer to
Mike Abdullah's answer for a detailed explanation.</p>
<p><em>NOTE: what follows is a clean implementation for a <strong>cell-level margin
setting</strong> , as expressed in Mike Abdullah's answer. Setting your cell's
<code>preservesSuperviewLayoutMargins=NO</code> will ensure that your Table View does not
override the cell settings. If you actually want your entire table view to
have consistent margins, please adjust your code accordingly.</em></p>
<p><strong>Setup your cell margins:</strong></p>
<div class="code"><pre class="code literal-block"><span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="bp">UITableView</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">tableView</span><span class="w"> </span><span class="nf">willDisplayCell:</span><span class="p">(</span><span class="bp">UITableViewCell</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">cell</span><span class="w"> </span><span class="nf">forRowAtIndexPath:</span><span class="p">(</span><span class="bp">NSIndexPath</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Remove seperator inset</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">cell</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">setSeparatorInset</span><span class="o">:</span><span class="p">)])</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="p">[</span><span class="n">cell</span><span class="w"> </span><span class="n">setSeparatorInset</span><span class="o">:</span><span class="n">UIEdgeInsetsZero</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Prevent the cell from inheriting the Table View's margin settings</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">cell</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">setPreservesSuperviewLayoutMargins</span><span class="o">:</span><span class="p">)])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="n">cell</span><span class="w"> </span><span class="n">setPreservesSuperviewLayoutMargins</span><span class="o">:</span><span class="nb">NO</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Explictly set your cell's layout margins</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">cell</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">setLayoutMargins</span><span class="o">:</span><span class="p">)])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="n">cell</span><span class="w"> </span><span class="n">setLayoutMargins</span><span class="o">:</span><span class="n">UIEdgeInsetsZero</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Swift 4:</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">func</span><span class="w"> </span><span class="n">tableView</span><span class="p">(</span><span class="n">_</span><span class="w"> </span><span class="n">tableView</span><span class="p">:</span><span class="w"> </span><span class="n">UITableView</span><span class="p">,</span><span class="w"> </span><span class="n">willDisplay</span><span class="w"> </span><span class="n">cell</span><span class="p">:</span><span class="w"> </span><span class="n">UITableViewCell</span><span class="p">,</span><span class="w"> </span><span class="n">forRowAt</span><span class="w"> </span><span class="n">indexPath</span><span class="p">:</span><span class="w"> </span><span class="n">IndexPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="n">seperator</span><span class="w"> </span><span class="n">inset</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">cell</span><span class="o">.</span><span class="n">responds</span><span class="p">(</span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="c1">#selector(setter: UITableViewCell.separatorInset)) {</span>
<span class="w">        </span><span class="n">cell</span><span class="o">.</span><span class="n">separatorInset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">zero</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Prevent</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cell</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">inheriting</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="n">View</span><span class="s1">'s margin settings</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">cell</span><span class="o">.</span><span class="n">responds</span><span class="p">(</span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="c1">#selector(setter: UITableViewCell.preservesSuperviewLayoutMargins)) {</span>
<span class="w">        </span><span class="n">cell</span><span class="o">.</span><span class="n">preservesSuperviewLayoutMargins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Explictly</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">cell</span><span class="s1">'s layout margins</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">cell</span><span class="o">.</span><span class="n">responds</span><span class="p">(</span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="c1">#selector(setter: UITableViewCell.layoutMargins)) {</span>
<span class="w">        </span><span class="n">cell</span><span class="o">.</span><span class="n">layoutMargins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">zero</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Setting the <code>preservesSuperviewLayoutMargins</code> property on your cell to NO
<strong>should</strong> prevent your table view from overriding your cell margins. In some
cases, it seems to not function properly.</p>
<p><strong>If all fails, you may brute-force your Table View margins:</strong></p>
<div class="code"><pre class="code literal-block"><span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLayoutSubviews</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewDidLayoutSubviews</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// Force your tableview margins (this may be a bad idea)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="nb">self</span><span class="p">.</span><span class="n">tableView</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">setSeparatorInset</span><span class="o">:</span><span class="p">)])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">tableView</span><span class="w"> </span><span class="n">setSeparatorInset</span><span class="o">:</span><span class="n">UIEdgeInsetsZero</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="nb">self</span><span class="p">.</span><span class="n">tableView</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">setLayoutMargins</span><span class="o">:</span><span class="p">)])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">tableView</span><span class="w"> </span><span class="n">setLayoutMargins</span><span class="o">:</span><span class="n">UIEdgeInsetsZero</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Swift 4:</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">func</span><span class="w"> </span><span class="n">viewDidLayoutSubviews</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">viewDidLayoutSubviews</span><span class="p">()</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Force</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">tableview</span><span class="w"> </span><span class="n">margins</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="n">idea</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">tableView</span><span class="o">.</span><span class="n">responds</span><span class="p">(</span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="c1">#selector(setter: UITableView.separatorInset)) {</span>
<span class="w">        </span><span class="n">tableView</span><span class="o">.</span><span class="n">separatorInset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">zero</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">tableView</span><span class="o">.</span><span class="n">responds</span><span class="p">(</span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="c1">#selector(setter: UITableView.layoutMargins)) {</span>
<span class="w">        </span><span class="n">tableView</span><span class="o">.</span><span class="n">layoutMargins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">.</span><span class="n">zero</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>...and there you go! This should work on iOS 7 and 8.</p>
<hr>
<p><strong>EDIT:</strong> <strong>Mohamed Saleh brought to my attention a possible change in iOS
9.</strong> You may need to set the Table View's
<code>cellLayoutMarginsFollowReadableWidth</code> to <code>NO</code> if you want to customize insets
or margins. Your mileage may vary, this is not documented very well.</p>
<p>This property only exists in iOS 9 so be sure to check before setting.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="p">([</span><span class="n">myTableView</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">setCellLayoutMarginsFollowReadableWidth</span><span class="o">:</span><span class="p">)])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">myTableView</span><span class="p">.</span><span class="n">cellLayoutMarginsFollowReadableWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><strong>Swift 4:</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">myTableView</span>.<span class="nv">responds</span><span class="ss">(</span><span class="nv">to</span>:<span class="w"> </span>#<span class="nv">selector</span><span class="ss">(</span><span class="nv">setter</span>:<span class="w"> </span><span class="nv">self</span>.<span class="nv">cellLayoutMarginsFollowReadableWidth</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">myTableView</span>.<span class="nv">cellLayoutMarginsFollowReadableWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">false</span>
}
</pre></div>

<p>(above code from iOS 8 UITableView separator inset 0 not working)</p>
<p><strong>EDIT: Here's a pure Interface Builder approach:</strong></p>
<p><img alt="TableViewAttributesInspector" src="../../images/QLjGB.png"><img alt="TableViewCellSizeInspector" src="../../images/pbgBU.png"></p>
<p><em>NOTE: iOS 11 changes &amp; simplifies much of this behavior, an update will be
forthcoming...</em></p>
<p><br></p>
<h3>Suggest</h3>
<p>Arg!!! After playing around either doing this in your <code>Cell</code> subclass:</p>
<div class="code"><pre class="code literal-block"><span class="o">-</span><span class="w"> </span><span class="ss">(</span><span class="nv">UIEdgeInsets</span><span class="ss">)</span><span class="nv">layoutMargins</span>
{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">UIEdgeInsetsZero</span><span class="c1">;</span>
}
</pre></div>

<p>or setting the <code>cell.layoutMargins = UIEdgeInsetsZero;</code> fixed it for me.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/ios/" rel="tag">ios</a></li>
            <li><a class="tag p-category" href="../../categories/ios8/" rel="tag">ios8</a></li>
            <li><a class="tag p-category" href="../../categories/objective-c/" rel="tag">objective-c</a></li>
            <li><a class="tag p-category" href="../../categories/swift/" rel="tag">swift</a></li>
            <li><a class="tag p-category" href="../../categories/uitableview/" rel="tag">uitableview</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../vue-js-how-to-properly-watch-for-nested-data/" rel="prev" title="Vue.js - How to properly watch for nested data">Previous post</a>
            </li>
            <li class="next">
                <a href="../to-switch-from-vertical-split-to-horizontal-split-fast-in-vim/" rel="next" title="To switch from vertical split to horizontal split fast in Vim">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
