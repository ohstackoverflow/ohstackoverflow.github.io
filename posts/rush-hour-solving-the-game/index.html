<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rush Hour - Solving the game | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/rush-hour-solving-the-game/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-can-i-program-a-simple-chat-bot-ai/" title="How can I program a simple chat bot AI?" type="text/html">
<link rel="next" href="../how-to-recognize-rectangles-in-this-image/" title="How to recognize rectangles in this image?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Rush Hour - Solving the game">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/rush-hour-solving-the-game/">
<meta property="og:description" content="Rush Hour
if you're not familiar with it, the game consists of a collection of cars of
varying sizes, set either horizontally or vertically, on a NxM grid that has a
single exit.
Each car can move for">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-28T02:36:59+08:00">
<meta property="article:tag" content="algorithm">
<meta property="article:tag" content="artificial-intelligence">
<meta property="article:tag" content="language-agnostic">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Rush Hour - Solving the game</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T02:36:59+08:00" itemprop="datePublished" title="2023-02-28 02:36">2023-02-28 02:36</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><strong>Rush Hour</strong><br>
if you're not familiar with it, the game consists of a collection of cars of
varying sizes, set either horizontally or vertically, on a NxM grid that has a
single exit.<br>
Each car can move forward/backward in the directions it's set in, as long as
another car is not blocking it. You can <strong>never</strong> change the direction of a
car.<br>
There is one special car, usually it's the red one. It's set in the same row
that the exit is in, and the objective of the game is to find a series of
moves (a move - moving a car N steps back or forward) that will allow the red
car to drive out of the maze.</p>
<p>I've been trying to think how to solve this problem computationally, and I can
really not think of any good solution.<br>
I came up with a few:</p>
<ol>
<li>Backtracking. This is pretty simple - Recursion and some more recursion until you find the answer. However, each car can be moved a few different ways, and in each game state a few cars can be moved, and the resulting game tree will be HUGE.</li>
<li>Some sort of constraint algorithm that will take into account what needs to be moved, and work recursively somehow. This is a very rough idea, but it is an idea.</li>
<li>Graphs? Model the game states as a graph and apply some sort of variation on a coloring algorithm, to resolve dependencies? Again, this is a very rough idea. </li>
<li>A friend suggested genetic algorithms. This is sort of possible but not easily. I can't think of a good way to make an evaluation function, and without that we've got nothing.</li>
</ol>
<p>So the question is - How to create a program that takes a grid and the vehicle
layout, and outputs a series of steps needed to get the red car out?</p>
<p>Sub-issues:</p>
<ol>
<li>Finding <strong>some</strong> solution.</li>
<li>Finding an <strong>optimal</strong> solution (minimal number of moves)</li>
<li>Evaluating how good a current state is</li>
</ol>
<p>Example: How can you move the cars in this setting, so that the red car can
"exit" the maze through the exit on the right?<br><img alt="" src="../../images/NzztF.jpg"><br>
(source: scienceblogs.com)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>For classic Rush Hour, this problem is very tractable with a simple breadth
first search. The claimed hardest known initial configuration requires 93
moves to solve, with a total of only 24132 reachable configurations. Even a
naively implemented breadth-first search algorithm can explore the entire
search space in under 1 second on even a modest machine.</p>
<h4>References</h4>
<ul>
<li>Wikipedia/Rush Hour (board game)</li>
<li>Rush Hour Initial Configurations -- these are claimed to be the "hardest" problems</li>
<li>Solver source at ideone.com - with output for the "hardest" input</li>
</ul>
<hr>
<h4>The Java solver</h4>
<p>Here's the complete source code of a breadth-first search exhaustive solver,
written in C-style.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">java.util.</span><span class="o">*</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">RushHour</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">classic</span> <span class="n">Rush</span> <span class="n">Hour</span> <span class="n">parameters</span>
    <span class="n">static</span> <span class="n">final</span> <span class="nb">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="n">static</span> <span class="n">final</span> <span class="nb">int</span> <span class="n">M</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="n">static</span> <span class="n">final</span> <span class="nb">int</span> <span class="n">GOAL_R</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">static</span> <span class="n">final</span> <span class="nb">int</span> <span class="n">GOAL_C</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

    <span class="o">//</span> <span class="n">the</span> <span class="n">transcription</span> <span class="n">of</span> <span class="n">the</span> <span class="mi">93</span> <span class="n">moves</span><span class="p">,</span> <span class="n">total</span> <span class="mi">24132</span> <span class="n">configurations</span> <span class="n">problem</span>
    <span class="o">//</span> <span class="kn">from</span> <span class="nn">http</span><span class="p">:</span><span class="o">//</span><span class="n">cs</span><span class="o">.</span><span class="n">ulb</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">be</span><span class="o">/~</span><span class="n">fservais</span><span class="o">/</span><span class="n">rushhour</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">php</span><span class="err">?</span><span class="n">window_size</span><span class="o">=</span><span class="mi">20</span><span class="o">&amp;</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">static</span> <span class="n">final</span> <span class="n">String</span> <span class="n">INITIAL</span> <span class="o">=</span>   <span class="s2">"333BCC"</span> <span class="o">+</span>
                                    <span class="s2">"B22BCC"</span> <span class="o">+</span>
                                    <span class="s2">"B.XXCC"</span> <span class="o">+</span>
                                    <span class="s2">"22B..."</span> <span class="o">+</span>
                                    <span class="s2">".BB.22"</span> <span class="o">+</span>
                                    <span class="s2">".B2222"</span><span class="p">;</span>

    <span class="n">static</span> <span class="n">final</span> <span class="n">String</span> <span class="n">HORZS</span> <span class="o">=</span> <span class="s2">"23X"</span><span class="p">;</span>  <span class="o">//</span> <span class="n">horizontal</span><span class="o">-</span><span class="n">sliding</span> <span class="n">cars</span>
    <span class="n">static</span> <span class="n">final</span> <span class="n">String</span> <span class="n">VERTS</span> <span class="o">=</span> <span class="s2">"BC"</span><span class="p">;</span>   <span class="o">//</span> <span class="n">vertical</span><span class="o">-</span><span class="n">sliding</span> <span class="n">cars</span>
    <span class="n">static</span> <span class="n">final</span> <span class="n">String</span> <span class="n">LONGS</span> <span class="o">=</span> <span class="s2">"3C"</span><span class="p">;</span>   <span class="o">//</span> <span class="n">length</span> <span class="mi">3</span> <span class="n">cars</span>
    <span class="n">static</span> <span class="n">final</span> <span class="n">String</span> <span class="n">SHORTS</span> <span class="o">=</span> <span class="s2">"2BX"</span><span class="p">;</span> <span class="o">//</span> <span class="n">length</span> <span class="mi">2</span> <span class="n">cars</span>
    <span class="n">static</span> <span class="n">final</span> <span class="n">char</span> <span class="n">GOAL_CAR</span> <span class="o">=</span> <span class="s1">'X'</span><span class="p">;</span>
    <span class="n">static</span> <span class="n">final</span> <span class="n">char</span> <span class="n">EMPTY</span> <span class="o">=</span> <span class="s1">'.'</span><span class="p">;</span>      <span class="o">//</span> <span class="n">empty</span> <span class="n">space</span><span class="p">,</span> <span class="n">movable</span> <span class="n">into</span>
    <span class="n">static</span> <span class="n">final</span> <span class="n">char</span> <span class="n">VOID</span> <span class="o">=</span> <span class="s1">'@'</span><span class="p">;</span>       <span class="o">//</span> <span class="n">represents</span> <span class="n">everything</span> <span class="n">out</span> <span class="n">of</span> <span class="n">bound</span>

    <span class="o">//</span> <span class="n">breaks</span> <span class="n">a</span> <span class="n">string</span> <span class="n">into</span> <span class="n">lines</span> <span class="n">of</span> <span class="n">length</span> <span class="n">N</span> <span class="n">using</span> <span class="n">regex</span>
    <span class="n">static</span> <span class="n">String</span> <span class="n">prettify</span><span class="p">(</span><span class="n">String</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">String</span> <span class="n">EVERY_NTH</span> <span class="o">=</span> <span class="s2">"(?&lt;=</span><span class="se">\\</span><span class="s2">G.</span><span class="si">{N}</span><span class="s2">)"</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"N"</span><span class="p">,</span> <span class="n">String</span><span class="o">.</span><span class="n">valueOf</span><span class="p">(</span><span class="n">N</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">state</span><span class="o">.</span><span class="n">replaceAll</span><span class="p">(</span><span class="n">EVERY_NTH</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">conventional</span> <span class="n">row</span> <span class="n">major</span> <span class="mi">2</span><span class="n">D</span><span class="o">-</span><span class="mi">1</span><span class="n">D</span> <span class="n">index</span> <span class="n">transformation</span>
    <span class="n">static</span> <span class="nb">int</span> <span class="n">rc2i</span><span class="p">(</span><span class="nb">int</span> <span class="n">r</span><span class="p">,</span> <span class="nb">int</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">r</span> <span class="o">*</span> <span class="n">N</span> <span class="o">+</span> <span class="n">c</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">checks</span> <span class="k">if</span> <span class="n">an</span> <span class="n">entity</span> <span class="ow">is</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">type</span>
    <span class="n">static</span> <span class="n">boolean</span> <span class="n">isType</span><span class="p">(</span><span class="n">char</span> <span class="n">entity</span><span class="p">,</span> <span class="n">String</span> <span class="nb">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">finds</span> <span class="n">the</span> <span class="n">length</span> <span class="n">of</span> <span class="n">a</span> <span class="n">car</span>
    <span class="n">static</span> <span class="nb">int</span> <span class="n">length</span><span class="p">(</span><span class="n">char</span> <span class="n">car</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span>
            <span class="n">isType</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="n">LONGS</span><span class="p">)</span> <span class="err">?</span> <span class="mi">3</span> <span class="p">:</span>
            <span class="n">isType</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="n">SHORTS</span><span class="p">)</span> <span class="err">?</span> <span class="mi">2</span> <span class="p">:</span>
            <span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">;</span> <span class="o">//</span> <span class="n">a</span> <span class="n">nasty</span> <span class="n">shortcut</span> <span class="k">for</span> <span class="n">throwing</span> <span class="n">IllegalArgumentException</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="ow">in</span> <span class="n">given</span> <span class="n">state</span><span class="p">,</span> <span class="n">returns</span> <span class="n">the</span> <span class="n">entity</span> <span class="n">at</span> <span class="n">a</span> <span class="n">given</span> <span class="n">coordinate</span><span class="p">,</span> <span class="n">possibly</span> <span class="n">out</span> <span class="n">of</span> <span class="n">bound</span>
    <span class="n">static</span> <span class="n">char</span> <span class="n">at</span><span class="p">(</span><span class="n">String</span> <span class="n">state</span><span class="p">,</span> <span class="nb">int</span> <span class="n">r</span><span class="p">,</span> <span class="nb">int</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">inBound</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">M</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">inBound</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span> <span class="err">?</span> <span class="n">state</span><span class="o">.</span><span class="n">charAt</span><span class="p">(</span><span class="n">rc2i</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span> <span class="p">:</span> <span class="n">VOID</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">static</span> <span class="n">boolean</span> <span class="n">inBound</span><span class="p">(</span><span class="nb">int</span> <span class="n">v</span><span class="p">,</span> <span class="nb">int</span> <span class="nb">max</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">v</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">v</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">checks</span> <span class="k">if</span> <span class="n">a</span> <span class="n">given</span> <span class="n">state</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">goal</span> <span class="n">state</span>
    <span class="n">static</span> <span class="n">boolean</span> <span class="n">isGoal</span><span class="p">(</span><span class="n">String</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">at</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">GOAL_R</span><span class="p">,</span> <span class="n">GOAL_C</span><span class="p">)</span> <span class="o">==</span> <span class="n">GOAL_CAR</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">given</span> <span class="n">state</span><span class="p">,</span> <span class="n">starting</span> <span class="kn">from</span> <span class="nn">given</span> <span class="n">coordinate</span><span class="p">,</span> <span class="n">toward</span> <span class="n">the</span> <span class="n">given</span> <span class="n">direction</span><span class="p">,</span>
    <span class="o">//</span> <span class="n">counts</span> <span class="n">how</span> <span class="n">many</span> <span class="n">empty</span> <span class="n">spaces</span> <span class="n">there</span> <span class="n">are</span> <span class="p">(</span><span class="n">origin</span> <span class="n">inclusive</span><span class="p">)</span>
    <span class="n">static</span> <span class="nb">int</span> <span class="n">countSpaces</span><span class="p">(</span><span class="n">String</span> <span class="n">state</span><span class="p">,</span> <span class="nb">int</span> <span class="n">r</span><span class="p">,</span> <span class="nb">int</span> <span class="n">c</span><span class="p">,</span> <span class="nb">int</span> <span class="n">dr</span><span class="p">,</span> <span class="nb">int</span> <span class="n">dc</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">at</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="n">k</span> <span class="o">*</span> <span class="n">dr</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="n">k</span> <span class="o">*</span> <span class="n">dc</span><span class="p">)</span> <span class="o">==</span> <span class="n">EMPTY</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">k</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">the</span> <span class="n">predecessor</span> <span class="nb">map</span><span class="p">,</span> <span class="n">maps</span> <span class="n">currentState</span> <span class="o">=&gt;</span> <span class="n">previousState</span>
    <span class="n">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">pred</span> <span class="o">=</span> <span class="n">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="o">//</span> <span class="n">the</span> <span class="n">breadth</span> <span class="n">first</span> <span class="n">search</span> <span class="n">queue</span>
    <span class="n">static</span> <span class="n">Queue</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="o">//</span> <span class="n">the</span> <span class="n">breadth</span> <span class="n">first</span> <span class="n">search</span> <span class="n">proposal</span> <span class="n">method</span><span class="p">:</span> <span class="k">if</span> <span class="n">we</span> <span class="n">haven</span><span class="s1">'t reached it yet,</span>
    <span class="o">//</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="n">it</span> <span class="n">has</span> <span class="n">no</span> <span class="n">predecessor</span><span class="p">),</span> <span class="n">we</span> <span class="nb">map</span> <span class="n">the</span> <span class="n">given</span> <span class="n">state</span> <span class="ow">and</span> <span class="n">add</span> <span class="n">to</span> <span class="n">queue</span>
    <span class="n">static</span> <span class="n">void</span> <span class="n">propose</span><span class="p">(</span><span class="n">String</span> <span class="nb">next</span><span class="p">,</span> <span class="n">String</span> <span class="n">prev</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">pred</span><span class="o">.</span><span class="n">containsKey</span><span class="p">(</span><span class="nb">next</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">pred</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="nb">next</span><span class="p">,</span> <span class="n">prev</span><span class="p">);</span>
            <span class="n">queue</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">next</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">the</span> <span class="n">predecessor</span> <span class="n">tracing</span> <span class="n">method</span><span class="p">,</span> <span class="n">implemented</span> <span class="n">using</span> <span class="n">recursion</span> <span class="k">for</span> <span class="n">brevity</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">guaranteed</span> <span class="n">no</span> <span class="n">infinite</span> <span class="n">recursion</span><span class="p">,</span> <span class="n">but</span> <span class="n">may</span> <span class="n">throw</span> <span class="n">StackOverflowError</span> <span class="n">on</span>
    <span class="o">//</span> <span class="n">really</span> <span class="n">long</span> <span class="n">shortest</span><span class="o">-</span><span class="n">path</span> <span class="n">trace</span> <span class="p">(</span><span class="n">which</span> <span class="ow">is</span> <span class="n">infeasible</span> <span class="ow">in</span> <span class="n">standard</span> <span class="n">Rush</span> <span class="n">Hour</span><span class="p">)</span>
    <span class="n">static</span> <span class="nb">int</span> <span class="n">trace</span><span class="p">(</span><span class="n">String</span> <span class="n">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">String</span> <span class="n">prev</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">current</span><span class="p">);</span>
        <span class="nb">int</span> <span class="n">step</span> <span class="o">=</span> <span class="p">(</span><span class="n">prev</span> <span class="o">==</span> <span class="n">null</span><span class="p">)</span> <span class="err">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="n">trace</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">step</span><span class="p">);</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">prettify</span><span class="p">(</span><span class="n">current</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">step</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">given</span> <span class="n">state</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">given</span> <span class="n">origin</span> <span class="n">coordinate</span><span class="p">,</span> <span class="n">attempts</span> <span class="n">to</span> <span class="n">find</span> <span class="n">a</span> <span class="n">car</span> <span class="n">of</span> <span class="n">a</span> <span class="n">given</span> <span class="nb">type</span>
    <span class="o">//</span> <span class="n">at</span> <span class="n">a</span> <span class="n">given</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">given</span> <span class="n">direction</span><span class="p">;</span> <span class="k">if</span> <span class="n">found</span><span class="p">,</span> <span class="n">slide</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">opposite</span> <span class="n">direction</span>
    <span class="o">//</span> <span class="n">one</span> <span class="n">spot</span> <span class="n">at</span> <span class="n">a</span> <span class="n">time</span><span class="p">,</span> <span class="n">exactly</span> <span class="n">n</span> <span class="n">times</span><span class="p">,</span> <span class="n">proposing</span> <span class="n">those</span> <span class="n">states</span> <span class="n">to</span> <span class="n">the</span> <span class="n">breadth</span> <span class="n">first</span> <span class="n">search</span>
    <span class="o">//</span>
    <span class="o">//</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span>
    <span class="o">//</span>    <span class="n">direction</span> <span class="o">=</span> <span class="o">--&gt;</span>
    <span class="o">//</span>    <span class="n">__n__</span>
    <span class="o">//</span>   <span class="o">/</span>     \
    <span class="o">//</span>   <span class="o">..</span><span class="n">o</span><span class="o">....</span><span class="n">c</span>
    <span class="o">//</span>      \<span class="n">___</span><span class="o">/</span>
    <span class="o">//</span>      <span class="n">distance</span>
    <span class="o">//</span>
    <span class="n">static</span> <span class="n">void</span> <span class="n">slide</span><span class="p">(</span><span class="n">String</span> <span class="n">current</span><span class="p">,</span> <span class="nb">int</span> <span class="n">r</span><span class="p">,</span> <span class="nb">int</span> <span class="n">c</span><span class="p">,</span> <span class="n">String</span> <span class="nb">type</span><span class="p">,</span> <span class="nb">int</span> <span class="n">distance</span><span class="p">,</span> <span class="nb">int</span> <span class="n">dr</span><span class="p">,</span> <span class="nb">int</span> <span class="n">dc</span><span class="p">,</span> <span class="nb">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">r</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">dr</span><span class="p">;</span>
        <span class="n">c</span> <span class="o">+=</span> <span class="n">distance</span> <span class="o">*</span> <span class="n">dc</span><span class="p">;</span>
        <span class="n">char</span> <span class="n">car</span> <span class="o">=</span> <span class="n">at</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">isType</span><span class="p">(</span><span class="n">car</span><span class="p">,</span> <span class="nb">type</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">final</span> <span class="nb">int</span> <span class="n">L</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">car</span><span class="p">);</span>
        <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="n">new</span> <span class="n">StringBuilder</span><span class="p">(</span><span class="n">current</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">r</span> <span class="o">-=</span> <span class="n">dr</span><span class="p">;</span>
            <span class="n">c</span> <span class="o">-=</span> <span class="n">dc</span><span class="p">;</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">setCharAt</span><span class="p">(</span><span class="n">rc2i</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span> <span class="n">car</span><span class="p">);</span>
            <span class="n">sb</span><span class="o">.</span><span class="n">setCharAt</span><span class="p">(</span><span class="n">rc2i</span><span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">L</span> <span class="o">*</span> <span class="n">dr</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="n">L</span> <span class="o">*</span> <span class="n">dc</span><span class="p">),</span> <span class="n">EMPTY</span><span class="p">);</span>
            <span class="n">propose</span><span class="p">(</span><span class="n">sb</span><span class="o">.</span><span class="n">toString</span><span class="p">(),</span> <span class="n">current</span><span class="p">);</span>
            <span class="n">current</span> <span class="o">=</span> <span class="n">sb</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span> <span class="o">//</span> <span class="n">comment</span> <span class="n">to</span> <span class="n">combo</span> <span class="k">as</span> <span class="n">one</span> <span class="n">step</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">explores</span> <span class="n">a</span> <span class="n">given</span> <span class="n">state</span><span class="p">;</span> <span class="n">searches</span> <span class="k">for</span> <span class="nb">next</span> <span class="n">level</span> <span class="n">states</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">breadth</span> <span class="n">first</span> <span class="n">search</span>
    <span class="o">//</span>
    <span class="o">//</span> <span class="n">Let</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="n">be</span> <span class="n">the</span> <span class="n">intersection</span> <span class="n">point</span> <span class="n">of</span> <span class="n">this</span> <span class="n">cross</span><span class="p">:</span>
    <span class="o">//</span>
    <span class="o">//</span>     <span class="o">@</span>       <span class="n">nU</span> <span class="o">=</span> <span class="mi">3</span>     <span class="s1">'@'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">car</span><span class="p">,</span> <span class="s1">'B'</span> <span class="ow">and</span> <span class="s1">'X'</span> <span class="n">are</span> <span class="n">of</span> <span class="n">the</span> <span class="n">wrong</span> <span class="nb">type</span><span class="p">;</span>
    <span class="o">//</span>     <span class="o">.</span>       <span class="n">nD</span> <span class="o">=</span> <span class="mi">1</span>     <span class="n">only</span> <span class="s1">'2'</span> <span class="n">can</span> <span class="n">slide</span> <span class="n">to</span> <span class="n">the</span> <span class="n">right</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">5</span> <span class="n">spaces</span>
    <span class="o">//</span>   <span class="mf">2.</span><span class="o">....</span><span class="n">B</span>   <span class="n">nL</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="o">//</span>     <span class="n">X</span>       <span class="n">nR</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="o">//</span>
    <span class="o">//</span> <span class="n">The</span> <span class="n">n</span><span class="err">?</span> <span class="n">counts</span> <span class="n">how</span> <span class="n">many</span> <span class="n">spaces</span> <span class="n">are</span> <span class="n">there</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">given</span> <span class="n">direction</span><span class="p">,</span> <span class="n">origin</span> <span class="n">inclusive</span><span class="o">.</span>
    <span class="o">//</span> <span class="n">Cars</span> <span class="n">matching</span> <span class="n">the</span> <span class="nb">type</span> <span class="n">will</span> <span class="n">then</span> <span class="n">slide</span> <span class="n">on</span> <span class="n">these</span> <span class="s2">"alleys"</span><span class="o">.</span>
    <span class="o">//</span>
    <span class="n">static</span> <span class="n">void</span> <span class="n">explore</span><span class="p">(</span><span class="n">String</span> <span class="n">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">M</span><span class="p">;</span> <span class="n">r</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">c</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">at</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">!=</span> <span class="n">EMPTY</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
                <span class="nb">int</span> <span class="n">nU</span> <span class="o">=</span> <span class="n">countSpaces</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="nb">int</span> <span class="n">nD</span> <span class="o">=</span> <span class="n">countSpaces</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="nb">int</span> <span class="n">nL</span> <span class="o">=</span> <span class="n">countSpaces</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                <span class="nb">int</span> <span class="n">nR</span> <span class="o">=</span> <span class="n">countSpaces</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                <span class="n">slide</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">VERTS</span><span class="p">,</span> <span class="n">nU</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nU</span> <span class="o">+</span> <span class="n">nD</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
                <span class="n">slide</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">VERTS</span><span class="p">,</span> <span class="n">nD</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nU</span> <span class="o">+</span> <span class="n">nD</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
                <span class="n">slide</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">HORZS</span><span class="p">,</span> <span class="n">nL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">nL</span> <span class="o">+</span> <span class="n">nR</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
                <span class="n">slide</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">HORZS</span><span class="p">,</span> <span class="n">nR</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">nL</span> <span class="o">+</span> <span class="n">nR</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">typical</span> <span class="n">queue</span><span class="o">-</span><span class="n">based</span> <span class="n">breadth</span> <span class="n">first</span> <span class="n">search</span> <span class="n">implementation</span>
        <span class="n">propose</span><span class="p">(</span><span class="n">INITIAL</span><span class="p">,</span> <span class="n">null</span><span class="p">);</span>
        <span class="n">boolean</span> <span class="n">solved</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="err">!</span><span class="n">queue</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">String</span> <span class="n">current</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">remove</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">isGoal</span><span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="err">!</span><span class="n">solved</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">solved</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
                <span class="n">trace</span><span class="p">(</span><span class="n">current</span><span class="p">);</span>
                <span class="o">//</span><span class="k">break</span><span class="p">;</span> <span class="o">//</span> <span class="n">comment</span> <span class="n">to</span> <span class="k">continue</span> <span class="n">exploring</span> <span class="n">entire</span> <span class="n">space</span>
            <span class="p">}</span>
            <span class="n">explore</span><span class="p">(</span><span class="n">current</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">pred</span><span class="o">.</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" explored"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>There are two note-worthy lines in the source code:</p>
<ul>
<li>The <code>break;</code> when a solution is found <ul>
<li>This is now commented so that the breadth first search explores the <em>entire</em> search space, to confirm the numbers given in the linked website above</li>
</ul>
</li>
<li>The <code>current = sb.toString();</code> in <code>slide</code><ul>
<li>Essentially this counts each movement of any car as one move. If a car is moved 3 spaces to the left, that's 3 moves. To combo this as one move (since it involves the same car moving in the same direction), simply comment this line. The linked website does not acknowledge combo, so this line is now uncommented to match the minimum number of moves given. With combo-counting, the 93-moves problem only requires 49 combo moves. That is, if there's a parking attendant in the lot that moves these cars around, he'd only only need to go in and out of a car 49 times.</li>
</ul>
</li>
</ul>
<hr>
<h4>Overview of the algorithm</h4>
<p>The algorithm is essentially a breadth first search, implemented with a queue
as is typical. A predecessor map is maintained so that any state can be traced
back to the initial state. A key will never be remapped, and as entries are
inserted in breadth-first search order, shortest path is guaranteed.</p>
<p>A state is represented as an <code>NxM</code>-length <code>String</code>. Each <code>char</code> represents an
entity on the board, stored in row-major order.</p>
<p>Neighboring states are found by scanning all 4 directions from an empty space,
looking for an appropriate car type, sliding it as room accommodates.</p>
<p>There is plenty of redundant work here (e.g. long "alleys" are scanned
multiple times), but as mentioned before, although the generalized version is
PSPACE-complete, the classic Rush Hour variant is very tractable by brute
force.</p>
<h4>Wikipedia references</h4>
<ul>
<li>Breadth-first search</li>
<li>Row-major order</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Here is my answer. Its solves the grand master puzzle in just under 6 seconds.</p>
<p>It use a breadth first search (BFS). The trick is to look for a board layout
that you have see before in earlier searches and abort that sequence. Due to
the BFS if you have seen that layout before you have already got there a
shorter way so let that squence keep trying to solve it rather than this
longer one.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#-1"><code data-line-number="  1"></code></a></td>
<td class="code"><code><span class="c1"># Program by Rodos rodos at haywood dot org</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-2"><code data-line-number="  2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-3"><code data-line-number="  3"></code></a></td>
<td class="code"><code><span class="k">use</span><span class="w"> </span><span class="nn">Storable</span><span class="w"> </span><span class="sx">qw(dclone)</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-4"><code data-line-number="  4"></code></a></td>
<td class="code"><code><span class="k">use</span><span class="w"> </span><span class="nn">Data::Dumper</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-5"><code data-line-number="  5"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-6"><code data-line-number="  6"></code></a></td>
<td class="code"><code><span class="k">print</span><span class="w"> </span><span class="s">"Lets play Rush Hour! \n"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-7"><code data-line-number="  7"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-8"><code data-line-number="  8"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-9"><code data-line-number="  9"></code></a></td>
<td class="code"><code><span class="c1"># Lets define our current game state as a grid where each car is a different letter.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-10"><code data-line-number=" 10"></code></a></td>
<td class="code"><code><span class="c1"># Our special car is a marked with the specific letter T</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-11"><code data-line-number=" 11"></code></a></td>
<td class="code"><code><span class="c1"># The boarder is a * and the gloal point on the edge is an @.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-12"><code data-line-number=" 12"></code></a></td>
<td class="code"><code><span class="c1"># The grid must be the same witdh and height </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-13"><code data-line-number=" 13"></code></a></td>
<td class="code"><code><span class="c1"># You can use a . to mark an empty space</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-14"><code data-line-number=" 14"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-15"><code data-line-number=" 15"></code></a></td>
<td class="code"><code><span class="c1"># Grand Master</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-16"><code data-line-number=" 16"></code></a></td>
<td class="code"><code><span class="nv">@startingGrid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-17"><code data-line-number=" 17"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">],</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-18"><code data-line-number=" 18"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'A'</span><span class="p">,</span><span class="s">'O'</span><span class="p">,</span><span class="s">'O'</span><span class="p">,</span><span class="s">'O'</span><span class="p">,</span><span class="s">'*'</span><span class="p">],</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-19"><code data-line-number=" 19"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'A'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'B'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'*'</span><span class="p">],</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-20"><code data-line-number=" 20"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'T'</span><span class="p">,</span><span class="s">'T'</span><span class="p">,</span><span class="s">'C'</span><span class="p">,</span><span class="s">'B'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'@'</span><span class="p">],</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-21"><code data-line-number=" 21"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'D'</span><span class="p">,</span><span class="s">'D'</span><span class="p">,</span><span class="s">'E'</span><span class="p">,</span><span class="s">'C'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'P'</span><span class="p">,</span><span class="s">'*'</span><span class="p">],</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-22"><code data-line-number=" 22"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'F'</span><span class="p">,</span><span class="s">'E'</span><span class="p">,</span><span class="s">'G'</span><span class="p">,</span><span class="s">'G'</span><span class="p">,</span><span class="s">'P'</span><span class="p">,</span><span class="s">'*'</span><span class="p">],</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-23"><code data-line-number=" 23"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'.'</span><span class="p">,</span><span class="s">'F'</span><span class="p">,</span><span class="s">'Q'</span><span class="p">,</span><span class="s">'Q'</span><span class="p">,</span><span class="s">'Q'</span><span class="p">,</span><span class="s">'P'</span><span class="p">,</span><span class="s">'*'</span><span class="p">],</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-24"><code data-line-number=" 24"></code></a></td>
<td class="code"><code><span class="w"> </span><span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">,</span><span class="s">'*'</span><span class="p">]</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-25"><code data-line-number=" 25"></code></a></td>
<td class="code"><code><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-26"><code data-line-number=" 26"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-27"><code data-line-number=" 27"></code></a></td>
<td class="code"><code><span class="c1"># Now lets print out our grid board so we can see what it looks like.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-28"><code data-line-number=" 28"></code></a></td>
<td class="code"><code><span class="c1"># We will go through each row and then each column.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-29"><code data-line-number=" 29"></code></a></td>
<td class="code"><code><span class="c1"># As we do this we will record the list of cars (letters) we see into a hash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-30"><code data-line-number=" 30"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-31"><code data-line-number=" 31"></code></a></td>
<td class="code"><code><span class="k">print</span><span class="w"> </span><span class="s">"Here is your board.\n"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-32"><code data-line-number=" 32"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-33"><code data-line-number=" 33"></code></a></td>
<td class="code"><code><span class="o">&amp;</span><span class="n">printGrid</span><span class="p">(</span><span class="o">\</span><span class="nv">@startingGrid</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-34"><code data-line-number=" 34"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-35"><code data-line-number=" 35"></code></a></td>
<td class="code"><code><span class="c1"># Lets find the cars on the board and the direction they are sitting</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-36"><code data-line-number=" 36"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-37"><code data-line-number=" 37"></code></a></td>
<td class="code"><code><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#startingGrid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-38"><code data-line-number=" 38"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$startingGrid</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-39"><code data-line-number=" 39"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-40"><code data-line-number=" 40"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="c1"># Make spot the value of the bit on the grid we are looking at</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-41"><code data-line-number=" 41"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nv">$spot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$startingGrid</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">];</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-42"><code data-line-number=" 42"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-43"><code data-line-number=" 43"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="c1"># Lets record any cars we see into a "hash" of valid cars.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-44"><code data-line-number=" 44"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="c1"># If the splot is a non-character we will ignore it cars are only characters</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-45"><code data-line-number=" 45"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">unless</span><span class="w"> </span><span class="p">(</span><span class="nv">$spot</span><span class="w"> </span><span class="o">=~</span><span class="sr"> /\W/</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-46"><code data-line-number=" 46"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-47"><code data-line-number=" 47"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="c1"># We will record the direction of the car as the value of the hash key.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-48"><code data-line-number=" 48"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="c1"># If the location above or below our spot is the same then the car must be vertical.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-49"><code data-line-number=" 49"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="c1"># If its not vertical we mark as it as horizonal as it can't be anything else!</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-50"><code data-line-number=" 50"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-51"><code data-line-number=" 51"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$startingGrid</span><span class="p">[</span><span class="nv">$row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$spot</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">$startingGrid</span><span class="p">[</span><span class="nv">$row</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$spot</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-52"><code data-line-number=" 52"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$spot</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">'|'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-53"><code data-line-number=" 53"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-54"><code data-line-number=" 54"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$spot</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">'-'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-55"><code data-line-number=" 55"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-56"><code data-line-number=" 56"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-57"><code data-line-number=" 57"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-58"><code data-line-number=" 58"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-59"><code data-line-number=" 59"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-60"><code data-line-number=" 60"></code></a></td>
<td class="code"><code><span class="c1"># Okay we should have printed our grid and worked out the unique cars</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-61"><code data-line-number=" 61"></code></a></td>
<td class="code"><code><span class="c1"># Lets print out our list of cars in order</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-62"><code data-line-number=" 62"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-63"><code data-line-number=" 63"></code></a></td>
<td class="code"><code><span class="k">print</span><span class="w"> </span><span class="s">"\nI have determined that you have used the following cars on your grid board.\n"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-64"><code data-line-number=" 64"></code></a></td>
<td class="code"><code><span class="k">foreach</span><span class="w"> </span><span class="nv">$car</span><span class="w"> </span><span class="p">(</span><span class="nb">sort</span><span class="w"> </span><span class="nb">keys</span><span class="w"> </span><span class="nv">%cars</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-65"><code data-line-number=" 65"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="s">" $car$cars{$car}"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-66"><code data-line-number=" 66"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-67"><code data-line-number=" 67"></code></a></td>
<td class="code"><code><span class="k">print</span><span class="w"> </span><span class="s">"\n\n"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-68"><code data-line-number=" 68"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-69"><code data-line-number=" 69"></code></a></td>
<td class="code"><code><span class="n">end</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-70"><code data-line-number=" 70"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-71"><code data-line-number=" 71"></code></a></td>
<td class="code"><code><span class="o">&amp;</span><span class="n">tryMoves</span><span class="p">();</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-72"><code data-line-number=" 72"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-73"><code data-line-number=" 73"></code></a></td>
<td class="code"><code><span class="n">end</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-74"><code data-line-number=" 74"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-75"><code data-line-number=" 75"></code></a></td>
<td class="code"><code><span class="c1"># Here are our subroutines for things that we want to do over and over again or things we might do once but for </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-76"><code data-line-number=" 76"></code></a></td>
<td class="code"><code><span class="c1"># clatiry we want to keep the main line of logic clear</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-77"><code data-line-number=" 77"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-78"><code data-line-number=" 78"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">tryMoves</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-79"><code data-line-number=" 79"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-80"><code data-line-number=" 80"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Okay, this is the hard work. Take the grid we have been given. For each car see what moves are possible</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-81"><code data-line-number=" 81"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># and try each in turn on a new grid. We will do a shallow breadth first search (BFS) rather than depth first. </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-82"><code data-line-number=" 82"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># The BFS is achieved by throwing new sequences onto the end of a stack. You then keep pulling sequnces</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-83"><code data-line-number=" 83"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># from the front of the stack. Each time you get a new item of the stack you have to rebuild the grid to what</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-84"><code data-line-number=" 84"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># it looks like at that point based on the previous moves, this takes more CPU but does not consume as much</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-85"><code data-line-number=" 85"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># memory as saving all of the grid representations.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-86"><code data-line-number=" 86"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-87"><code data-line-number=" 87"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">@moveQueue</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-88"><code data-line-number=" 88"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">@thisMove</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-89"><code data-line-number=" 89"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">push</span><span class="w"> </span><span class="nv">@moveQueue</span><span class="p">,</span><span class="w"> </span><span class="o">\</span><span class="nv">@thisMove</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-90"><code data-line-number=" 90"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-91"><code data-line-number=" 91"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Whlst there are moves on the queue process them                </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-92"><code data-line-number=" 92"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nv">$sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="w"> </span><span class="nv">@moveQueue</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-93"><code data-line-number=" 93"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-94"><code data-line-number=" 94"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="c1"># We have to make a current view of the grid based on the moves that got us here</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-95"><code data-line-number=" 95"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-96"><code data-line-number=" 96"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nv">$currentGrid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dclone</span><span class="p">(</span><span class="o">\</span><span class="nv">@startingGrid</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-97"><code data-line-number=" 97"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="nv">$step</span><span class="w"> </span><span class="p">(</span><span class="nv">@</span><span class="p">{</span><span class="w"> </span><span class="nv">$sequence</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-98"><code data-line-number=" 98"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">$step</span><span class="w"> </span><span class="o">=~</span><span class="sr"> /(\w)-(\w)(\d)/</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-99"><code data-line-number=" 99"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">$car</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$2</span><span class="p">;</span><span class="w"> </span><span class="nv">$repeat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$3</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-100"><code data-line-number="100"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-101"><code data-line-number="101"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$repeat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-102"><code data-line-number="102"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarRight</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w"> </span><span class="nv">$currentGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'R'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-103"><code data-line-number="103"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarLeft</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w">  </span><span class="nv">$currentGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'L'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-104"><code data-line-number="104"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarUp</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w">    </span><span class="nv">$currentGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'U'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-105"><code data-line-number="105"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarDown</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w">  </span><span class="nv">$currentGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'D'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-106"><code data-line-number="106"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-107"><code data-line-number="107"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-108"><code data-line-number="108"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-109"><code data-line-number="109"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="c1"># Lets see what are the moves that we can do from here.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-110"><code data-line-number="110"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-111"><code data-line-number="111"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">@moves</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-112"><code data-line-number="112"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-113"><code data-line-number="113"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="nv">$car</span><span class="w"> </span><span class="p">(</span><span class="nb">sort</span><span class="w"> </span><span class="nb">keys</span><span class="w"> </span><span class="nv">%cars</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-114"><code data-line-number="114"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"-"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-115"><code data-line-number="115"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">canGoLeft</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="nv">$currentGrid</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-116"><code data-line-number="116"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">push</span><span class="w"> </span><span class="nv">@moves</span><span class="p">,</span><span class="w"> </span><span class="s">"$car-L$l"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$l</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-117"><code data-line-number="117"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">canGoRight</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="nv">$currentGrid</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-118"><code data-line-number="118"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">push</span><span class="w"> </span><span class="nv">@moves</span><span class="p">,</span><span class="w"> </span><span class="s">"$car-R$l"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$l</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-119"><code data-line-number="119"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-120"><code data-line-number="120"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">canGoUp</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="nv">$currentGrid</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-121"><code data-line-number="121"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">push</span><span class="w"> </span><span class="nv">@moves</span><span class="p">,</span><span class="w"> </span><span class="s">"$car-U$l"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$l</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-122"><code data-line-number="122"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">canGoDown</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="nv">$currentGrid</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-123"><code data-line-number="123"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">push</span><span class="w"> </span><span class="nv">@moves</span><span class="p">,</span><span class="w"> </span><span class="s">"$car-D$l"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$l</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-124"><code data-line-number="124"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-125"><code data-line-number="125"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-126"><code data-line-number="126"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-127"><code data-line-number="127"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="c1"># Try each of the moves, if it solves the puzzle we are done. Otherwise take the new </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-128"><code data-line-number="128"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="c1"># list of moves and throw it on the stack</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-129"><code data-line-number="129"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-130"><code data-line-number="130"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="nv">$step</span><span class="w"> </span><span class="p">(</span><span class="nv">@moves</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-131"><code data-line-number="131"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-132"><code data-line-number="132"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">$step</span><span class="w"> </span><span class="o">=~</span><span class="sr"> /(\w)-(\w)(\d)/</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-133"><code data-line-number="133"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">$car</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$2</span><span class="p">;</span><span class="w"> </span><span class="nv">$repeat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$3</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-134"><code data-line-number="134"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-135"><code data-line-number="135"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">my</span><span class="w"> </span><span class="nv">$newGrid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dclone</span><span class="p">(</span><span class="nv">$currentGrid</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-136"><code data-line-number="136"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-137"><code data-line-number="137"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$repeat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-138"><code data-line-number="138"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarRight</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w"> </span><span class="nv">$newGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'R'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-139"><code data-line-number="139"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarLeft</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w"> </span><span class="nv">$newGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'L'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-140"><code data-line-number="140"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarUp</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w"> </span><span class="nv">$newGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'U'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-141"><code data-line-number="141"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="o">&amp;</span><span class="n">moveCarDown</span><span class="p">(</span><span class="nv">$car</span><span class="p">,</span><span class="w"> </span><span class="nv">$newGrid</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$dir</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">'D'</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-142"><code data-line-number="142"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-143"><code data-line-number="143"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-144"><code data-line-number="144"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">isItSolved</span><span class="p">(</span><span class="nv">$newGrid</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-145"><code data-line-number="145"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">print</span><span class="w"> </span><span class="nb">sprintf</span><span class="p">(</span><span class="s">"Solution in %d moves :\n"</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nb">scalar</span><span class="w"> </span><span class="nv">@</span><span class="p">{</span><span class="w"> </span><span class="nv">$sequence</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-146"><code data-line-number="146"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">print</span><span class="w"> </span><span class="nb">join</span><span class="w"> </span><span class="s">","</span><span class="p">,</span><span class="w"> </span><span class="nv">@</span><span class="p">{</span><span class="w"> </span><span class="nv">$sequence</span><span class="w"> </span><span class="p">};</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-147"><code data-line-number="147"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">print</span><span class="w"> </span><span class="s">",$car-$dir$repeat\n"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-148"><code data-line-number="148"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">return</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-149"><code data-line-number="149"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-150"><code data-line-number="150"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-151"><code data-line-number="151"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="c1"># That did not create a solution, before we push this for further sequencing we want to see if this</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-152"><code data-line-number="152"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="c1"># pattern has been encountered before. If it has there is no point trying more variations as we already</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-153"><code data-line-number="153"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="c1"># have a sequence that gets here and it might have been shorter, thanks to our BFS</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-154"><code data-line-number="154"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-155"><code data-line-number="155"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!&amp;</span><span class="n">seen</span><span class="p">(</span><span class="nv">$newGrid</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-156"><code data-line-number="156"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="c1"># Um, looks like it was not solved, lets throw this grid on the queue for another attempt</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-157"><code data-line-number="157"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">@thisSteps</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@</span><span class="p">{</span><span class="w"> </span><span class="nv">$sequence</span><span class="w"> </span><span class="p">};</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-158"><code data-line-number="158"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="nb">push</span><span class="w"> </span><span class="nv">@thisSteps</span><span class="p">,</span><span class="w"> </span><span class="s">"$car-$dir$repeat"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-159"><code data-line-number="159"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="nb">push</span><span class="w"> </span><span class="nv">@moveQueue</span><span class="p">,</span><span class="w"> </span><span class="o">\</span><span class="nv">@thisSteps</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-160"><code data-line-number="160"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-161"><code data-line-number="161"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span><span class="w">            </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-162"><code data-line-number="162"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-163"><code data-line-number="163"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-164"><code data-line-number="164"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-165"><code data-line-number="165"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-166"><code data-line-number="166"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">isItSolved</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-167"><code data-line-number="167"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-168"><code data-line-number="168"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-169"><code data-line-number="169"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-170"><code data-line-number="170"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-171"><code data-line-number="171"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="nv">$stringVersion</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-172"><code data-line-number="172"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-173"><code data-line-number="173"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="nv">@$grid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-174"><code data-line-number="174"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nv">$stringVersion</span><span class="w"> </span><span class="o">.=</span><span class="w"> </span><span class="nb">join</span><span class="w"> </span><span class="s">""</span><span class="p">,</span><span class="nv">@$row</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-175"><code data-line-number="175"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-176"><code data-line-number="176"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-177"><code data-line-number="177"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># We know we have solve the grid lock when the T is next to the @, because that means the taxi is at the door</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-178"><code data-line-number="178"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$stringVersion</span><span class="w"> </span><span class="o">=~</span><span class="sr"> /\T\@/</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-179"><code data-line-number="179"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-180"><code data-line-number="180"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-181"><code data-line-number="181"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-182"><code data-line-number="182"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-183"><code data-line-number="183"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-184"><code data-line-number="184"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">seen</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-185"><code data-line-number="185"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-186"><code data-line-number="186"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-187"><code data-line-number="187"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-188"><code data-line-number="188"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-189"><code data-line-number="189"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="nv">$stringVersion</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-190"><code data-line-number="190"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-191"><code data-line-number="191"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="nv">@$grid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-192"><code data-line-number="192"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nv">$stringVersion</span><span class="w"> </span><span class="o">.=</span><span class="w"> </span><span class="nb">join</span><span class="w"> </span><span class="s">""</span><span class="p">,</span><span class="nv">@$row</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-193"><code data-line-number="193"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-194"><code data-line-number="194"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-195"><code data-line-number="195"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Have we seen this before?</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-196"><code data-line-number="196"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$seen</span><span class="p">{</span><span class="nv">$stringVersion</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-197"><code data-line-number="197"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-198"><code data-line-number="198"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-199"><code data-line-number="199"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nv">$seen</span><span class="p">{</span><span class="nv">$stringVersion</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-200"><code data-line-number="200"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-201"><code data-line-number="201"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-202"><code data-line-number="202"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-203"><code data-line-number="203"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">canGoDown</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-204"><code data-line-number="204"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-205"><code data-line-number="205"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-206"><code data-line-number="206"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-207"><code data-line-number="207"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"-"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-208"><code data-line-number="208"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-209"><code data-line-number="209"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-210"><code data-line-number="210"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-211"><code data-line-number="211"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-212"><code data-line-number="212"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-213"><code data-line-number="213"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-214"><code data-line-number="214"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">};</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="nv">$row</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-215"><code data-line-number="215"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-216"><code data-line-number="216"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-217"><code data-line-number="217"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="c1"># See how many we can move</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-218"><code data-line-number="218"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-219"><code data-line-number="219"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="o">++</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"."</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-220"><code data-line-number="220"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="o">++</span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-221"><code data-line-number="221"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-222"><code data-line-number="222"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-223"><code data-line-number="223"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-224"><code data-line-number="224"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-225"><code data-line-number="225"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-226"><code data-line-number="226"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-227"><code data-line-number="227"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-228"><code data-line-number="228"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-229"><code data-line-number="229"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">canGoUp</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-230"><code data-line-number="230"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-231"><code data-line-number="231"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-232"><code data-line-number="232"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-233"><code data-line-number="233"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"-"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-234"><code data-line-number="234"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-235"><code data-line-number="235"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-236"><code data-line-number="236"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-237"><code data-line-number="237"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-238"><code data-line-number="238"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-239"><code data-line-number="239"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-240"><code data-line-number="240"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-241"><code data-line-number="241"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-242"><code data-line-number="242"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="c1"># See how many we can move</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-243"><code data-line-number="243"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-244"><code data-line-number="244"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="o">--</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"."</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-245"><code data-line-number="245"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="o">++</span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-246"><code data-line-number="246"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="p">}</span><span class="w"> </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-247"><code data-line-number="247"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-248"><code data-line-number="248"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-249"><code data-line-number="249"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-250"><code data-line-number="250"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-251"><code data-line-number="251"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-252"><code data-line-number="252"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-253"><code data-line-number="253"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-254"><code data-line-number="254"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">canGoRight</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-255"><code data-line-number="255"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-256"><code data-line-number="256"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-257"><code data-line-number="257"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-258"><code data-line-number="258"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"|"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-259"><code data-line-number="259"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-260"><code data-line-number="260"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-261"><code data-line-number="261"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-262"><code data-line-number="262"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-263"><code data-line-number="263"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-264"><code data-line-number="264"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-265"><code data-line-number="265"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nv">$col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]};</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="nv">$col</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-266"><code data-line-number="266"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-267"><code data-line-number="267"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="c1"># See how many we can move</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-268"><code data-line-number="268"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-269"><code data-line-number="269"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="o">++</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"."</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-270"><code data-line-number="270"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="o">++</span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-271"><code data-line-number="271"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="p">}</span><span class="w"> </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-272"><code data-line-number="272"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-273"><code data-line-number="273"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-274"><code data-line-number="274"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-275"><code data-line-number="275"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-276"><code data-line-number="276"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-277"><code data-line-number="277"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-278"><code data-line-number="278"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-279"><code data-line-number="279"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">canGoLeft</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-280"><code data-line-number="280"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-281"><code data-line-number="281"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-282"><code data-line-number="282"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-283"><code data-line-number="283"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"|"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-284"><code data-line-number="284"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-285"><code data-line-number="285"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-286"><code data-line-number="286"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-287"><code data-line-number="287"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-288"><code data-line-number="288"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-289"><code data-line-number="289"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-290"><code data-line-number="290"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-291"><code data-line-number="291"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-292"><code data-line-number="292"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="c1"># See how many we can move</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-293"><code data-line-number="293"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-294"><code data-line-number="294"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="o">--</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"."</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-295"><code data-line-number="295"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="o">++</span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-296"><code data-line-number="296"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="p">}</span><span class="w"> </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-297"><code data-line-number="297"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nv">$l</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-298"><code data-line-number="298"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-299"><code data-line-number="299"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-300"><code data-line-number="300"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-301"><code data-line-number="301"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-302"><code data-line-number="302"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-303"><code data-line-number="303"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-304"><code data-line-number="304"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">moveCarLeft</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-305"><code data-line-number="305"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-306"><code data-line-number="306"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Move the named car to the left of the passed grid. Care must be taken with the algoritm</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-307"><code data-line-number="307"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># to not move part of the car and then come across it again on the same pass and move it again </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-308"><code data-line-number="308"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># so moving left requires sweeping left to right.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-309"><code data-line-number="309"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-310"><code data-line-number="310"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># We need to know which car you want to move and the reference to the grid you want to move it on</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-311"><code data-line-number="311"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-312"><code data-line-number="312"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-313"><code data-line-number="313"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-314"><code data-line-number="314"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Only horizontal cards can move left</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-315"><code data-line-number="315"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">die</span><span class="w"> </span><span class="s">"Opps, tried to move a vertical car $car left"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"|"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-316"><code data-line-number="316"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-317"><code data-line-number="317"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-318"><code data-line-number="318"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-319"><code data-line-number="319"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-320"><code data-line-number="320"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-321"><code data-line-number="321"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-322"><code data-line-number="322"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">die</span><span class="w"> </span><span class="s">"Tried to move car $car left into an occupied spot\n"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="ow">ne</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-323"><code data-line-number="323"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$car</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-324"><code data-line-number="324"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-325"><code data-line-number="325"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-326"><code data-line-number="326"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-327"><code data-line-number="327"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-328"><code data-line-number="328"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-329"><code data-line-number="329"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-330"><code data-line-number="330"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">moveCarRight</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-331"><code data-line-number="331"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-332"><code data-line-number="332"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Move the named car to the right of the passed grid. Care must be taken with the algoritm</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-333"><code data-line-number="333"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># to not move part of the car and then come across it again on the same pass and move it again </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-334"><code data-line-number="334"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># so moving right requires sweeping right to left (backwards).</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-335"><code data-line-number="335"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-336"><code data-line-number="336"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># We need to know which car you want to move and the reference to the grid you want to move it on</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-337"><code data-line-number="337"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-338"><code data-line-number="338"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-339"><code data-line-number="339"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-340"><code data-line-number="340"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Only horizontal cards can move right</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-341"><code data-line-number="341"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">die</span><span class="w"> </span><span class="s">"Opps, tried to move a vertical car $car right"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"|"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-342"><code data-line-number="342"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-343"><code data-line-number="343"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-344"><code data-line-number="344"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-345"><code data-line-number="345"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-346"><code data-line-number="346"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nv">$col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]};</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="nv">$col</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-347"><code data-line-number="347"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-348"><code data-line-number="348"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">die</span><span class="w"> </span><span class="s">"Tried to move car $car right into an occupied spot\n"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="ow">ne</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-349"><code data-line-number="349"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$car</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-350"><code data-line-number="350"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-351"><code data-line-number="351"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-352"><code data-line-number="352"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-353"><code data-line-number="353"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-354"><code data-line-number="354"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-355"><code data-line-number="355"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-356"><code data-line-number="356"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-357"><code data-line-number="357"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">moveCarUp</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-358"><code data-line-number="358"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-359"><code data-line-number="359"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Move the named car up in the passed grid. Care must be taken with the algoritm</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-360"><code data-line-number="360"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># to not move part of the car and then come across it again on the same pass and move it again </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-361"><code data-line-number="361"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># so moving right requires sweeping top down.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-362"><code data-line-number="362"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-363"><code data-line-number="363"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># We need to know which car you want to move and the reference to the grid you want to move it on</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-364"><code data-line-number="364"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-365"><code data-line-number="365"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-366"><code data-line-number="366"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-367"><code data-line-number="367"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Only vertical cards can move up</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-368"><code data-line-number="368"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">die</span><span class="w"> </span><span class="s">"Opps, tried to move a horizontal car $car up"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"-"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-369"><code data-line-number="369"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-370"><code data-line-number="370"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-371"><code data-line-number="371"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-372"><code data-line-number="372"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-373"><code data-line-number="373"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-374"><code data-line-number="374"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-375"><code data-line-number="375"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">die</span><span class="w"> </span><span class="s">"Tried to move car $car up into an occupied spot\n"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">ne</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-376"><code data-line-number="376"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$car</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-377"><code data-line-number="377"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-378"><code data-line-number="378"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-379"><code data-line-number="379"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-380"><code data-line-number="380"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-381"><code data-line-number="381"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-382"><code data-line-number="382"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-383"><code data-line-number="383"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">moveCarDown</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-384"><code data-line-number="384"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-385"><code data-line-number="385"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Move the named car down in the passed grid. Care must be taken with the algoritm</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-386"><code data-line-number="386"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># to not move part of the car and then come across it again on the same pass and move it again </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-387"><code data-line-number="387"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># so moving right requires sweeping upwards from the bottom.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-388"><code data-line-number="388"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-389"><code data-line-number="389"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># We need to know which car you want to move and the reference to the grid you want to move it on</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-390"><code data-line-number="390"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-391"><code data-line-number="391"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-392"><code data-line-number="392"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-393"><code data-line-number="393"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Only vertical cards can move up</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-394"><code data-line-number="394"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">die</span><span class="w"> </span><span class="s">"Opps, tried to move a horizontal car $car down"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$cars</span><span class="p">{</span><span class="nv">$car</span><span class="p">}</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="s">"-"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-395"><code data-line-number="395"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-396"><code data-line-number="396"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-397"><code data-line-number="397"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-398"><code data-line-number="398"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">};</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="nv">$row</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-399"><code data-line-number="399"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-400"><code data-line-number="400"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">eq</span><span class="w"> </span><span class="nv">$car</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-401"><code data-line-number="401"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nb">die</span><span class="w"> </span><span class="s">"Tried to move car $car down into an occupied spot\n"</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="ow">ne</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-402"><code data-line-number="402"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$car</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-403"><code data-line-number="403"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"."</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-404"><code data-line-number="404"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-405"><code data-line-number="405"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-406"><code data-line-number="406"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-407"><code data-line-number="407"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-408"><code data-line-number="408"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-409"><code data-line-number="409"></code></a></td>
<td class="code"><code><span class="k">sub</span><span class="w"> </span><span class="nf">printGrid</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-410"><code data-line-number="410"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-411"><code data-line-number="411"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="c1"># Print out a representation of a grid</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-412"><code data-line-number="412"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-413"><code data-line-number="413"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$grid</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">shift</span><span class="p">;</span><span class="w"> </span><span class="c1"># This is a reference to an array of arrays whch is passed as the argument</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-414"><code data-line-number="414"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-415"><code data-line-number="415"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">my</span><span class="w"> </span><span class="p">(</span><span class="nv">$row</span><span class="p">,</span><span class="w"> </span><span class="nv">$col</span><span class="p">);</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-416"><code data-line-number="416"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-417"><code data-line-number="417"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">$row</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-418"><code data-line-number="418"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nv">$col</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">$#</span><span class="p">{</span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">]}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-419"><code data-line-number="419"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">print</span><span class="w"> </span><span class="nv">$grid</span><span class="o">-&gt;</span><span class="p">[</span><span class="nv">$row</span><span class="p">][</span><span class="nv">$col</span><span class="p">],</span><span class="w"> </span><span class="s">" "</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-420"><code data-line-number="420"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-421"><code data-line-number="421"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">print</span><span class="w"> </span><span class="s">"\n"</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-422"><code data-line-number="422"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-423"><code data-line-number="423"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
</table></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/algorithm/" rel="tag">algorithm</a></li>
            <li><a class="tag p-category" href="../../categories/artificial-intelligence/" rel="tag">artificial-intelligence</a></li>
            <li><a class="tag p-category" href="../../categories/language-agnostic/" rel="tag">language-agnostic</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-can-i-program-a-simple-chat-bot-ai/" rel="prev" title="How can I program a simple chat bot AI?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-recognize-rectangles-in-this-image/" rel="next" title="How to recognize rectangles in this image?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
