<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Is embedding background image data into CSS as Base64 good or bad practice? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/is-embedding-background-image-data-into-css-as-base64-good-or-bad-practice/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../static-linking-vs-dynamic-linking/" title="Static linking vs dynamic linking" type="text/html">
<link rel="next" href="../filter-object-properties-by-key-in-es6/" title="Filter object properties by key in ES6" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Is embedding background image data into CSS as Base64 good or bad prac">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/is-embedding-background-image-data-into-css-as-base64-good-or-bad-practice/">
<meta property="og:description" content="I was looking at the source of a greasemonkey userscript and noticed the
following in their css:
.even { background: #fff url(data:image/gif;base64,R0lGODlhBgASALMAAOfn5+rq6uvr6+zs7O7u7vHx8fPz8/b29vj4">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T07:22:06+08:00">
<meta property="article:tag" content="background-image">
<meta property="article:tag" content="base64">
<meta property="article:tag" content="css">
<meta property="article:tag" content="data-uri">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Is embedding background image data into CSS as Base64 good or bad practice?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:22:06+08:00" itemprop="datePublished" title="2023-03-03 07:22">2023-03-03 07:22</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I was looking at the source of a greasemonkey userscript and noticed the
following in their css:</p>
<div class="code"><pre class="code literal-block"><span class="na">.even</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">background</span><span class="p">:</span><span class="w"> </span><span class="c1">#fff url(data:image/gif;base64,R0lGODlhBgASALMAAOfn5+rq6uvr6+zs7O7u7vHx8fPz8/b29vj4+P39/f///wAAAAAAAAAAAAAAAAAAACwAAAAABgASAAAIMAAVCBxIsKDBgwgTDkzAsKGAhxARSJx4oKJFAxgzFtjIkYDHjwNCigxAsiSAkygDAgA7) repeat-x bottom}</span>
</pre></div>

<p>I can appreciate that a greasemonkey script would want to bundle anything it
can within the source as opposed to host it on a server, that's obvious
enough. But since I had not seen this technique previously, I considered its
use and it seems appealing for a number of reasons:</p>
<ol>
<li>It will reduce the amount of HTTP requests on page load, thus enhancing performance</li>
<li>If no CDN, then it will reduce the amount of traffic generated through cookies being sent alongside of images</li>
<li>CSS files can be cached</li>
<li>CSS files can be GZIPPED </li>
</ol>
<p>Considering that IE6 (for instance) has problems with cache for background
images, this seems like it's not the worst idea...</p>
<p>So, is this a good or bad practice, why WOULDN'T you use it and what tools
would you use to base64 encode the images?</p>
<p><strong>update - results of testing</strong></p>
<ul>
<li>
<p>testing with image: http://fragged.org/dev/map-shot.jpg - <strong>133.6Kb</strong></p>
</li>
<li>
<p>test URL: http://fragged.org/dev/base64.html</p>
</li>
<li>
<p>dedicated CSS file: http://fragged.org/dev/base64.css - <strong>178.1Kb</strong></p>
</li>
<li>
<p>GZIP encoding server side </p>
</li>
<li>
<p>resulting size sent to client (YSLOW components test): <strong>59.3Kb</strong></p>
</li>
<li>
<p>Saving of data sent to client browser of: <strong>74.3Kb</strong></p>
</li>
</ul>
<p>Nice, but it will be slightly less useful for smaller images, I guess.</p>
<blockquote>
<p>UPDATE: Bryan McQuade, a software engineer at Google, working on PageSpeed,
expressed at ChromeDevSummit 2013 that data:uris in CSS is considered a
render-blocking anti-pattern for delivering critical/minimal CSS during his
talk <code>#perfmatters: Instant mobile web apps</code>. See
http://developer.chrome.com/devsummit/sessions and keep that in mind -
actual slide</p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<p>It's not a good idea when you want your images and style information to be
cached separately. Also if you encode a large image or a significant number of
images in to your css file it will take the browser longer to download the
file leaving your site without any of the style information until the download
completes. For small images that you don't intend on changing often if ever it
is a fine solution.</p>
<p>as far as generating the base64 encoding:</p>
<ul>
<li>http://b64.io/</li>
<li>http://www.motobit.com/util/base64-decoder-encoder.asp (upload)</li>
<li>http://www.greywyvern.com/code/php/binary2base64 (from link with little tutorials underneath)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p><strong><em>This answer is out of date and shouldn't be used.</em></strong></p>
<p><em>1) Average latency is much faster on mobile in 2017.
https://opensignal.com/reports/2016/02/usa/state-of-the-mobile-network</em></p>
<p><em>2) HTTP2 multiplexes https://http2.github.io/faq/#why-is-http2-multiplexed</em></p>
<p>"Data URIs" should definitely be considered for mobile sites. HTTP access over
cellular networks comes with higher latency per request/response. So there are
some use cases where jamming your images as data into CSS or HTML templates
could be beneficial on mobile web apps. You should measure usage on a case-by-
case basis -- I'm not advocating that data URIs should be used everywhere in a
mobile web app.</p>
<p>Note that mobile browsers have limitations on total size of files that can be
cached. Limits for iOS 3.2 were pretty low (25K per file), but are getting
larger (100K) for newer versions of Mobile Safari. So be sure to keep an eye
on your total file size when including data URIs.</p>
<p>http://www.yuiblog.com/blog/2010/06/28/mobile-browser-cache-limits/</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/background-image/" rel="tag">background-image</a></li>
            <li><a class="tag p-category" href="../../categories/base64/" rel="tag">base64</a></li>
            <li><a class="tag p-category" href="../../categories/css/" rel="tag">css</a></li>
            <li><a class="tag p-category" href="../../categories/data-uri/" rel="tag">data-uri</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../static-linking-vs-dynamic-linking/" rel="prev" title="Static linking vs dynamic linking">Previous post</a>
            </li>
            <li class="next">
                <a href="../filter-object-properties-by-key-in-es6/" rel="next" title="Filter object properties by key in ES6">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
