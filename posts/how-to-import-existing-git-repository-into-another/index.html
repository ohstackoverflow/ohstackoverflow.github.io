<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to import existing Git repository into another? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-to-import-existing-git-repository-into-another/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-set-the-value-property-in-angularjs-ng-options/" title="How do I set the value property in AngularJS' ng-options?" type="text/html">
<link rel="next" href="../what-is-the-difference-between-http-host-and-server-name-in-php/" title="What is the difference between HTTP_HOST and SERVER_NAME in PHP?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How to import existing Git repository into another?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-to-import-existing-git-repository-into-another/">
<meta property="og:description" content="I have a Git repository in a folder called XXX , and I have second Git
repository called YYY.
I want to import the XXX repository into the YYY repository as a
subdirectory named ZZZ and add all XXX 's">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T03:38:10+08:00">
<meta property="article:tag" content="git">
<meta property="article:tag" content="git-merge">
<meta property="article:tag" content="merge">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to import existing Git repository into another?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:38:10+08:00" itemprop="datePublished" title="2023-02-18 03:38">2023-02-18 03:38</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have a Git repository in a folder called <strong>XXX</strong> , and I have second Git
repository called <strong>YYY</strong>.</p>
<p>I want to import the <strong>XXX</strong> repository into the <strong>YYY</strong> repository as a
subdirectory named <strong>ZZZ</strong> and add all <strong>XXX</strong> 's change history to <strong>YYY</strong>.</p>
<p>Folder structure before:</p>
<div class="code"><pre class="code literal-block">├── XXX
│   ├── .git
│   └── (project files)
└── YYY
    ├── .git
    └── (project files)
</pre></div>

<p>Folder structure after:</p>
<div class="code"><pre class="code literal-block">YYY
├── .git  &lt;-- This now contains the change history from XXX
├──  ZZZ  &lt;-- This was originally XXX
│    └── (project files)
└──  (project files)
</pre></div>

<p>Can this be done, or must I resort to using sub-modules?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Probably the simplest way would be to pull the <strong>XXX</strong> stuff into a branch in
<strong>YYY</strong> and then merge it into master:</p>
<p>In <strong>YYY</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="o">/</span><span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">XXX</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">fetch</span><span class="w"> </span><span class="nv">other</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="o">-</span><span class="nv">b</span><span class="w"> </span><span class="nv">ZZZ</span><span class="w"> </span><span class="nv">other</span><span class="o">/</span><span class="nv">master</span>
<span class="nv">mkdir</span><span class="w"> </span><span class="nv">ZZZ</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">mv</span><span class="w"> </span><span class="nv">stuff</span><span class="w"> </span><span class="nv">ZZZ</span><span class="o">/</span><span class="nv">stuff</span><span class="w">                      </span>#<span class="w"> </span><span class="nv">repeat</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">necessary</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">file</span><span class="o">/</span><span class="nv">dir</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="o">-</span><span class="nv">m</span><span class="w"> </span><span class="s2">"Moved stuff to ZZZ"</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="nv">master</span><span class="w">                </span>
<span class="nv">git</span><span class="w"> </span><span class="nv">merge</span><span class="w"> </span><span class="nv">ZZZ</span><span class="w"> </span><span class="o">--</span><span class="nv">allow</span><span class="o">-</span><span class="nv">unrelated</span><span class="o">-</span><span class="nv">histories</span><span class="w">   </span>#<span class="w"> </span><span class="nv">should</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="nv">ZZZ</span><span class="o">/</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">master</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">commit</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="nv">rm</span><span class="w"> </span><span class="nv">other</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span><span class="nv">ZZZ</span><span class="w">                           </span>#<span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">get</span><span class="w"> </span><span class="nv">rid</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">extra</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">pushing</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">push</span><span class="w">                                    </span>#<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">remote</span>,<span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span>
</pre></div>

<p>I actually just tried this with a couple of my repos and it works. Unlike
Jörg's answer it won't let you continue to use the other repo, but I don't
think you specified that anyway.</p>
<p>Note: Since this was originally written in 2009, git has added the subtree
merge mentioned in the answer below. I would probably use that method today,
although of course this method does still work.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you want to retain the exact commit history of the second repository and
therefore also retain the ability to easily merge upstream changes in the
future then here is the method you want. It results in unmodified history of
the subtree being imported into your repo plus one merge commit to move the
merged repository to the subdirectory.</p>
<div class="code"><pre class="code literal-block">git remote add XXX_remote &lt;path-or-url-to-XXX-repo&gt;
git fetch XXX_remote
git merge -s ours --no-commit --allow-unrelated-histories XXX_remote/master
git read-tree --prefix=ZZZ/ -u XXX_remote/master
git commit -m "Imported XXX as a subtree."
</pre></div>

<p>You can track upstream changes like so:</p>
<div class="code"><pre class="code literal-block">git pull -s subtree XXX_remote master
</pre></div>

<p>Git figures out on its own where the roots are before doing the merge, so you
don't need to specify the prefix on subsequent merges.</p>
<p>The <strong>downside</strong> is that in the merged history the files are unprefixed (not
in a subdirectory). As a result <code>git log ZZZ/a</code> will show you all the changes
(if any) except those in the merged history. You can do:</p>
<div class="code"><pre class="code literal-block">git log --follow -- a
</pre></div>

<p>but that won't show the changes other then in the merged history.</p>
<p>In other words, if you don't change <code>ZZZ</code>'s files in repository <code>XXX</code>, then
you need to specify <code>--follow</code> and an unprefixed path. If you change them in
both repositories, then you have 2 commands, none of which shows all the
changes.</p>
<p><strong>Git versions before 2.9</strong> : You don’t need to pass the <code>--allow-unrelated-
histories</code> option to <code>git merge</code>.</p>
<p>The method in the other answer that uses <code>read-tree</code> and skips the <code>merge -s
ours</code> step is effectively no different than copying the files with cp and
committing the result.</p>
<p>Original source was from github's "Subtree Merge" help article. And another
useful link.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/git/" rel="tag">git</a></li>
            <li><a class="tag p-category" href="../../categories/git-merge/" rel="tag">git-merge</a></li>
            <li><a class="tag p-category" href="../../categories/merge/" rel="tag">merge</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-set-the-value-property-in-angularjs-ng-options/" rel="prev" title="How do I set the value property in AngularJS' ng-options?">Previous post</a>
            </li>
            <li class="next">
                <a href="../what-is-the-difference-between-http-host-and-server-name-in-php/" rel="next" title="What is the difference between HTTP_HOST and SERVER_NAME in PHP?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
