<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Proper use cases for Android UserManager.isUserAGoat()? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/proper-use-cases-for-android-usermanager-isuseragoat/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../is-there-a-css-parent-selector/" title="Is there a CSS parent selector?" type="text/html">
<link rel="next" href="../make-an-existing-git-branch-track-a-remote-branch/" title="Make an existing Git branch track a remote branch?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Proper use cases for Android UserManager.isUserAGoat()?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/proper-use-cases-for-android-usermanager-isuseragoat/">
<meta property="og:description" content="Want to improve this post? Provide detailed answers to this question,
including citations and an explanation of why your answer is correct. Answers
without enough detail may be edited or deleted.
I wa">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-16T19:14:30+08:00">
<meta property="article:tag" content="android">
<meta property="article:tag" content="java">
<meta property="article:tag" content="usermanager">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Proper use cases for Android UserManager.isUserAGoat()?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:14:30+08:00" itemprop="datePublished" title="2023-02-16 19:14">2023-02-16 19:14</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><strong>Want to improve this post?</strong> Provide detailed answers to this question,
including citations and an explanation of why your answer is correct. Answers
without enough detail may be edited or deleted.</p>
<p>I was looking at the new APIs introduced in Android 4.2. While looking at the
<code>UserManager</code> class I came across the following method:</p>
<blockquote>
<div class="code"><pre class="code literal-block">public boolean isUserAGoat()
</pre></div>

<p>Used to determine whether the user making this call is subject to
teleportations.</p>
<p>Returns whether the user making this call is a goat.</p>
</blockquote>
<p>How and when should this be used?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Android R Update:</h4>
<p>From Android R, this method always returns false. Google says that this is
done "to protect goat privacy":</p>
<div class="code"><pre class="code literal-block">/**
<span class="w"> </span>*<span class="w"> </span>Used<span class="w"> </span>to<span class="w"> </span>determine<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>making<span class="w"> </span>this<span class="w"> </span>call<span class="w"> </span>is<span class="w"> </span>subject<span class="w"> </span>to
<span class="w"> </span>*<span class="w"> </span>teleportations.
<span class="w"> </span>*
<span class="w"> </span>*<span class="w"> </span><span class="nt">&lt;p&gt;</span>As<span class="w"> </span>of<span class="w"> </span>{@link<span class="w"> </span>android.os.Build.VERSION_CODES#LOLLIPOP},<span class="w"> </span>this<span class="w"> </span>method<span class="w"> </span>can
<span class="w"> </span>*<span class="w"> </span>now<span class="w"> </span>automatically<span class="w"> </span>identify<span class="w"> </span>goats<span class="w"> </span>using<span class="w"> </span>advanced<span class="w"> </span>goat<span class="w"> </span>recognition<span class="w"> </span>technology.<span class="nt">&lt;/p&gt;</span>
<span class="w"> </span>*
<span class="w"> </span>*<span class="w"> </span><span class="nt">&lt;p&gt;</span>As<span class="w"> </span>of<span class="w"> </span>{@link<span class="w"> </span>android.os.Build.VERSION_CODES#R},<span class="w"> </span>this<span class="w"> </span>method<span class="w"> </span>always<span class="w"> </span>returns
<span class="w"> </span>*<span class="w"> </span>{@code<span class="w"> </span>false}<span class="w"> </span>in<span class="w"> </span>order<span class="w"> </span>to<span class="w"> </span>protect<span class="w"> </span>goat<span class="w"> </span>privacy.<span class="nt">&lt;/p&gt;</span>
<span class="w"> </span>*
<span class="w"> </span>*<span class="w"> </span>@return<span class="w"> </span>Returns<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>making<span class="w"> </span>this<span class="w"> </span>call<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>goat.
<span class="w"> </span>*/
public<span class="w"> </span>boolean<span class="w"> </span>isUserAGoat()<span class="w"> </span>{
<span class="w">    </span>if<span class="w"> </span>(mContext.getApplicationInfo().targetSdkVersion<span class="w"> </span>&gt;=<span class="w"> </span>Build.VERSION_CODES.R)<span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>false;
<span class="w">    </span>}
<span class="w">    </span>return<span class="w"> </span>mContext.getPackageManager()
<span class="w">            </span>.isPackageAvailable("com.coffeestainstudios.goatsimulator");
}
</pre></div>

<hr>
<h4>Previous answer:</h4>
<p>From their <strong>source</strong> , the method used to return <code>false</code> until it was changed
in API 21.</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nb">user</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="nb">call</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="n">to</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">teleportations</span><span class="p">.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nb">user</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="nb">call</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">goat</span><span class="w"> </span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">isUserAGoat</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>It looks like the method has no real use for us as developers. Someone has
previously stated that it might be an <strong>Easter egg</strong>.</p>
<p>In API 21 the implementation was changed to check if there is an installed app
with the package <code>com.coffeestainstudios.goatsimulator</code></p>
<div class="code"><pre class="code literal-block">/**
<span class="w"> </span>*<span class="w"> </span>Used<span class="w"> </span>to<span class="w"> </span>determine<span class="w"> </span>whether<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>making<span class="w"> </span>this<span class="w"> </span>call<span class="w"> </span>is<span class="w"> </span>subject<span class="w"> </span>to
<span class="w"> </span>*<span class="w"> </span>teleportations.
<span class="w"> </span>*
<span class="w"> </span>*<span class="w"> </span><span class="nt">&lt;p&gt;</span>As<span class="w"> </span>of<span class="w"> </span>{@link<span class="w"> </span>android.os.Build.VERSION_CODES#LOLLIPOP},<span class="w"> </span>this<span class="w"> </span>method<span class="w"> </span>can
<span class="w"> </span>*<span class="w"> </span>now<span class="w"> </span>automatically<span class="w"> </span>identify<span class="w"> </span>goats<span class="w"> </span>using<span class="w"> </span>advanced<span class="w"> </span>goat<span class="w"> </span>recognition<span class="w"> </span>technology.<span class="nt">&lt;/p&gt;</span>
<span class="w"> </span>*
<span class="w"> </span>*<span class="w"> </span>@return<span class="w"> </span>Returns<span class="w"> </span>true<span class="w"> </span>if<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>making<span class="w"> </span>this<span class="w"> </span>call<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>goat.
<span class="w"> </span>*/
public<span class="w"> </span>boolean<span class="w"> </span>isUserAGoat()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>mContext.getPackageManager()
<span class="w">            </span>.isPackageAvailable("com.coffeestainstudios.goatsimulator");
}
</pre></div>

<p>Here is the source and the change.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I don't know if this was "the" official use case, but the following produces a
warning in Java (that can further produce compile errors if mixed with
<code>return</code> statements, leading to unreachable code):</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="ss">)</span><span class="w"> </span>{<span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">Note</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="s2">"if"</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">treated</span><span class="w"> </span><span class="nv">differently</span>
<span class="w">    </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"Unreachable code"</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>However this is legal:</p>
<div class="code"><pre class="code literal-block"><span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="nv">isUserAGoat</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="s2">"Unreachable but determined at runtime, not at compile time"</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>So I often find myself writing a silly utility method for the quickest way to
dummy out a code block, then in completing debugging find all calls to it, so
provided the implementation doesn't change this can be used for that.</p>
<p>JLS points out <code>if (false)</code> does not trigger "unreachable code" for the
specific reason that this would break support for debug flags, i.e., basically
this use case (h/t @auselen). (<code>static final boolean DEBUG = false;</code> for
instance).</p>
<p>I replaced <code>while</code> for <code>if</code>, producing a more obscure use case. I <em>believe</em>
you can trip up your IDE, like Eclipse, with this behavior, but this edit is 4
years into the future, and I don't have an Eclipse environment to play with.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/android/" rel="tag">android</a></li>
            <li><a class="tag p-category" href="../../categories/java/" rel="tag">java</a></li>
            <li><a class="tag p-category" href="../../categories/usermanager/" rel="tag">usermanager</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../is-there-a-css-parent-selector/" rel="prev" title="Is there a CSS parent selector?">Previous post</a>
            </li>
            <li class="next">
                <a href="../make-an-existing-git-branch-track-a-remote-branch/" rel="next" title="Make an existing Git branch track a remote branch?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
