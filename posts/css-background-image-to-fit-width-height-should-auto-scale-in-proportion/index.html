<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CSS background image to fit width, height should auto-scale in proportion | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/css-background-image-to-fit-width-height-should-auto-scale-in-proportion/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-downgrade-or-install-an-older-version-of-cocoapods/" title="How to downgrade or install an older version of Cocoapods" type="text/html">
<link rel="next" href="../sql-difference-between-partition-by-and-group-by/" title="SQL: difference between PARTITION BY and GROUP BY" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="CSS background image to fit width, height should auto-scale in proport">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/css-background-image-to-fit-width-height-should-auto-scale-in-proportion/">
<meta property="og:description" content="I have
body {
    background: url(images/background.svg);
}


The desired effect is that this background image will have width equal to that
of the page, height changing to maintain the proportion. e.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T12:31:18+08:00">
<meta property="article:tag" content="css">
<meta property="article:tag" content="html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">CSS background image to fit width, height should auto-scale in proportion</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:31:18+08:00" itemprop="datePublished" title="2023-03-03 12:31">2023-03-03 12:31</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have</p>
<div class="code"><pre class="code literal-block"><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">url</span><span class="p">(</span><span class="sx">images/background.svg</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>The desired effect is that this background image will have width equal to that
of the page, height changing to maintain the proportion. e.g. if the original
image happens to be 100*200 (any units) and the body is 600px wide, the
background image should end up being 1200px high. The height should change
automatically if the window is resized. Is this possible?</p>
<p>At the moment, Firefox looks like it's making the height fit and then
adjusting the width. Is this perhaps because the height is the longest
dimension and it's trying to avoid cropping? I <em>want</em> to crop vertically, then
scroll: no horizontal repeat.</p>
<p>Also, Chrome is placing the image in the centre, no repeat, even when
<code>background-repeat:repeat</code> is given explicitly, which is the default anyway.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There is a CSS3 property for this, namely <code>background-size</code> (compatibility
check). While one can set length values, it's usually used with the special
values <code>contain</code> and <code>cover</code>. In your specific case, you should use <code>cover</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background-image</span><span class="p">:</span><span class="w">    </span><span class="nb">url</span><span class="p">(</span><span class="sx">images/background.svg</span><span class="p">);</span>
<span class="w">    </span><span class="k">background-size</span><span class="p">:</span><span class="w">     </span><span class="kc">cover</span><span class="p">;</span><span class="w">                      </span><span class="c">/* &lt;------ */</span>
<span class="w">    </span><span class="k">background-repeat</span><span class="p">:</span><span class="w">   </span><span class="kc">no-repeat</span><span class="p">;</span>
<span class="w">    </span><span class="k">background-position</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w">              </span><span class="c">/* optional, center the image */</span>
<span class="p">}</span>
</pre></div>

<h3>Eggsplanation for <code>contain</code> and <code>cover</code>
</h3>
<p>Sorry for the bad pun, but I'm going to use the picture of the day by Biswarup
Ganguly for demonstration. Lets say that this is your screen, and the gray
area is outside of your visible screen. For demonstration, I'm going to assume
a 16x9 ratio.</p>
<p><img alt="screen" src="../../images/rCjKe.png"></p>
<p>We want to use the aforementioned picture of the day as a background. However,
we cropped the image to 4x3 for some reason. We could set the <code>background-
size</code> property to some fixed length, but we will focus on <code>contain</code> and
<code>cover</code>. Note that I also assume that we didn't mangle the width and/or height
of <code>body</code>.</p>
<h4><code>contain</code></h4>
<blockquote>
<div class="code"><pre class="code literal-block">contain
</pre></div>

<p>Scale the image, while preserving its intrinsic aspect ratio (if any), to
the largest size such that both its width and its height can fit inside the
background positioning area.</p>
</blockquote>
<p>This makes sure that the background image is always completely contained in
the background positioning area, however, there could be some empty space
filled with your <code>background-color</code> in this case:</p>
<p><img alt="contain" src="../../images/mAtCl.png"></p>
<h4><code>cover</code></h4>
<blockquote>
<div class="code"><pre class="code literal-block">cover
</pre></div>

<p>Scale the image, while preserving its intrinsic aspect ratio (if any), to
the smallest size such that both its width and its height can completely
cover the background positioning area.</p>
</blockquote>
<p>This makes sure that the background image is covering everything. There will
be no visible <code>background-color</code>, however depending on the screen's ratio a
great part of your image could be cut off:</p>
<p><img alt="cover" src="../../images/p96P5.png"></p>
<h4>Demonstration with actual code</h4>
<div class="code"><pre class="code literal-block">div<span class="w"> </span>&gt;<span class="w"> </span>div<span class="w"> </span>{
<span class="w">  </span>background-image:<span class="w"> </span>url(http://i.stack.imgur.com/r5CAq.jpg);
<span class="w">  </span>background-repeat:<span class="w"> </span>no-repeat;
<span class="w">  </span>background-position:<span class="w"> </span>center<span class="w"> </span>center;
<span class="w">  </span>background-color:<span class="w"> </span>#ccc;
<span class="w">  </span>border:<span class="w"> </span>1px<span class="w"> </span>solid;
<span class="w">  </span>width:<span class="w"> </span>20em;
<span class="w">  </span>height:<span class="w"> </span>10em;
}
div.contain<span class="w"> </span>{
<span class="w">  </span>background-size:<span class="w"> </span>contain;
}
div.cover<span class="w"> </span>{
<span class="w">  </span>background-size:<span class="w"> </span>cover;
}
/********************************************
<span class="w"> </span>Additional<span class="w"> </span>styles<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>explanation<span class="w"> </span>boxes<span class="w"> </span>
*********************************************/

div<span class="w"> </span>&gt;<span class="w"> </span>div<span class="w"> </span>{
<span class="w">  </span>margin:<span class="w"> </span>0<span class="w"> </span>1ex<span class="w"> </span>1ex<span class="w"> </span>0;
<span class="w">  </span>float:<span class="w"> </span>left;
}
div<span class="w"> </span>+<span class="w"> </span>div<span class="w"> </span>{
<span class="w">  </span>clear:<span class="w"> </span>both;
<span class="w">  </span>border-top:<span class="w"> </span>1px<span class="w"> </span>dashed<span class="w"> </span>silver;
<span class="w">  </span>padding-top:1ex;
}
div<span class="w"> </span>&gt;<span class="w"> </span>div::after<span class="w"> </span>{
<span class="w">  </span>background-color:<span class="w"> </span>#000;
<span class="w">  </span>color:<span class="w"> </span>#fefefe;
<span class="w">  </span>margin:<span class="w"> </span>1ex;
<span class="w">  </span>padding:<span class="w"> </span>1ex;
<span class="w">  </span>opacity:<span class="w"> </span>0.8;
<span class="w">  </span>display:<span class="w"> </span>block;
<span class="w">  </span>width:<span class="w"> </span>10ex;
<span class="w">  </span>font-size:<span class="w"> </span>0.7em;
<span class="w">  </span>content:<span class="w"> </span>attr(class);
}


<span class="nt">&lt;div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"contain"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;p&gt;</span>Note<span class="w"> </span>the<span class="w"> </span>grey<span class="w"> </span>background.<span class="w"> </span>The<span class="w"> </span>image<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>cover<span class="w"> </span>the<span class="w"> </span>whole<span class="w"> </span>region,<span class="w"> </span>but<span class="w"> </span>it's<span class="w"> </span>fully<span class="w"> </span><span class="nt">&lt;em&gt;</span>contained<span class="nt">&lt;/em&gt;</span>.
<span class="w">  </span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"cover"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;p&gt;</span>Note<span class="w"> </span>the<span class="w"> </span>ducks/geese<span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>bottom<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>image.<span class="w"> </span>Most<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>water<span class="w"> </span>is<span class="w"> </span>cut,<span class="w"> </span>as<span class="w"> </span>well<span class="w"> </span>as<span class="w"> </span>a<span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>sky.<span class="w"> </span>You<span class="w"> </span>don't<span class="w"> </span>see<span class="w"> </span>the<span class="w"> </span>complete<span class="w"> </span>image<span class="w"> </span>anymore,<span class="w"> </span>but<span class="w"> </span>neither<span class="w"> </span>do<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>any<span class="w"> </span>background<span class="w"> </span>color;<span class="w"> </span>the<span class="w"> </span>image<span class="w"> </span><span class="nt">&lt;em&gt;</span>covers<span class="nt">&lt;/em&gt;</span><span class="w"> </span>all<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span><span class="nt">&lt;code&gt;</span><span class="ni">&amp;lt;</span>div<span class="ni">&amp;gt;</span><span class="nt">&lt;/code&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Based on tips from https://developer.mozilla.org/en-US/docs/CSS/background-
size I end up with the following recipe that worked for me</p>
<div class="code"><pre class="code literal-block"><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">overflow-y</span><span class="p">:</span><span class="w"> </span><span class="kc">hidden</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">important</span><span class="p">;</span>
<span class="w">        </span><span class="k">overflow-x</span><span class="p">:</span><span class="w"> </span><span class="kc">hidden</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">important</span><span class="p">;</span>
<span class="w">        </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f8f8f8</span><span class="p">;</span>
<span class="w">        </span><span class="k">background-image</span><span class="p">:</span><span class="w"> </span><span class="nb">url</span><span class="p">(</span><span class="s1">'index.png'</span><span class="p">);</span>
<span class="w">        </span><span class="c">/*background-size: cover;*/</span>
<span class="w">        </span><span class="k">background-size</span><span class="p">:</span><span class="w"> </span><span class="kc">contain</span><span class="p">;</span>
<span class="w">        </span><span class="k">background-repeat</span><span class="p">:</span><span class="w"> </span><span class="kc">no-repeat</span><span class="p">;</span>
<span class="w">        </span><span class="k">background-position</span><span class="p">:</span><span class="w"> </span><span class="kc">right</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/css/" rel="tag">css</a></li>
            <li><a class="tag p-category" href="../../categories/html/" rel="tag">html</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-downgrade-or-install-an-older-version-of-cocoapods/" rel="prev" title="How to downgrade or install an older version of Cocoapods">Previous post</a>
            </li>
            <li class="next">
                <a href="../sql-difference-between-partition-by-and-group-by/" rel="next" title="SQL: difference between PARTITION BY and GROUP BY">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
