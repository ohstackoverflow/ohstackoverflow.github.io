<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>将 .pem 转换为 .crt 和 .key | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/jiang-pem-zhuan-huan-wei-crt-he-key/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../ru-he-cong-arraylist-zhong-shan-chu-zhong-fu-de-yuan-su/" title="如何从 ArrayList 中删除重复的元素？" type="text/html">
<link rel="next" href="../ru-he-shi-yong-ming-ling-xing-qing-chu-nuget-bao-huan-cun/" title="如何使用命令行清除 NuGet 包缓存？" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="将 .pem 转换为 .crt 和 .key">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/jiang-pem-zhuan-huan-wei-crt-he-key/">
<meta property="og:description" content="谁能告诉我从文件中提取/转换证书.crt和私钥.key文件的正确方法/命令.pem？我刚刚读到它们是可以互换的，但不是如何互换的。

解答
我能够使用以下方法将 pem 转换为 crt：
openssl x509 -outform der -in your-cert.pem -out your-cert.crt



更多建议
使用 OpenSSL 转换
这些命令允许您将证书和密钥转换为不同的格式">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T03:51:38+08:00">
<meta property="article:tag" content="certificate">
<meta property="article:tag" content="private-key">
<meta property="article:tag" content="ssl">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">将 .pem 转换为 .crt 和 .key</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:51:38+08:00" itemprop="datePublished" title="2023-02-18 03:51">2023-02-18 03:51</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>谁能告诉我从文件中提取/转换证书<code>.crt</code>和私钥<code>.key</code>文件的正确方法/命令<code>.pem</code>？我刚刚读到它们是可以互换的，但不是如何互换的。</p>
<p><br><br></p>
<h2>解答</h2>
<p>我能够使用以下方法将 pem 转换为 crt：</p>
<div class="code"><pre class="code literal-block">openssl x509 -outform der -in your-cert.pem -out your-cert.crt
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p><strong>使用 OpenSSL 转换</strong></p>
<p>这些命令允许您将证书和密钥转换为不同的格式，以使其与特定类型的服务器或软件兼容。</p>
<ul>
<li>
<p>将 DER 文件 (.crt .cer .der) 转换为 PEM</p>
<div class="code"><pre class="code literal-block">openssl x509 -inform der -in certificate.cer -out certificate.pem
</pre></div>

</li>
<li>
<p>将 PEM 文件转换为 DER</p>
<div class="code"><pre class="code literal-block">openssl x509 -outform der -in certificate.pem -out certificate.der
</pre></div>

</li>
<li>
<p>将包含私钥和证书的 PKCS#12 文件 (.pfx .p12) 转换为 PEM</p>
<div class="code"><pre class="code literal-block">openssl pkcs12 -in keyStore.pfx -out keyStore.pem -nodes
</pre></div>

<p>You can add -nocerts to only output the private key or add -nokeys to only output the certificates.</p>
</li>
<li>
<p>将 PEM 证书文件和私钥转换为 PKCS#12 (.pfx .p12)</p>
<div class="code"><pre class="code literal-block"><span class="n">openssl</span><span class="w"> </span><span class="n">pkcs12</span><span class="w"> </span><span class="o">-</span><span class="k">export</span><span class="w"> </span><span class="o">-</span><span class="n">out</span><span class="w"> </span><span class="n">certificate</span><span class="o">.</span><span class="n">pfx</span><span class="w"> </span><span class="o">-</span><span class="n">inkey</span><span class="w"> </span><span class="n">privateKey</span><span class="o">.</span><span class="n">key</span><span class="w"> </span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">certificate</span><span class="o">.</span><span class="n">crt</span><span class="w"> </span><span class="o">-</span><span class="n">certfile</span><span class="w"> </span><span class="n">CACert</span><span class="o">.</span><span class="n">crt</span>
</pre></div>

</li>
<li>
<p>将 PEM 转换为 CRT（.CRT 文件）</p>
<div class="code"><pre class="code literal-block">openssl x509 -outform der -in certificate.pem -out certificate.crt
</pre></div>

</li>
</ul>
<p><strong>OpenSSL 转换 PEM</strong></p>
<ul>
<li>
<p>将 PEM 转换为 DER</p>
<div class="code"><pre class="code literal-block">openssl x509 -outform der -in certificate.pem -out certificate.der
</pre></div>

</li>
<li>
<p>将 PEM 转换为 P7B</p>
<div class="code"><pre class="code literal-block">openssl crl2pkcs7 -nocrl -certfile certificate.cer -out certificate.p7b -certfile CACert.cer
</pre></div>

</li>
<li>
<p>将 PEM 转换为 PFX</p>
<div class="code"><pre class="code literal-block"><span class="n">openssl</span><span class="w"> </span><span class="n">pkcs12</span><span class="w"> </span><span class="o">-</span><span class="k">export</span><span class="w"> </span><span class="o">-</span><span class="n">out</span><span class="w"> </span><span class="n">certificate</span><span class="o">.</span><span class="n">pfx</span><span class="w"> </span><span class="o">-</span><span class="n">inkey</span><span class="w"> </span><span class="n">privateKey</span><span class="o">.</span><span class="n">key</span><span class="w"> </span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">certificate</span><span class="o">.</span><span class="n">crt</span><span class="w"> </span><span class="o">-</span><span class="n">certfile</span><span class="w"> </span><span class="n">CACert</span><span class="o">.</span><span class="n">crt</span>
</pre></div>

</li>
</ul>
<p><strong>OpenSSL 转换 DER</strong></p>
<ul>
<li>将 DER 转换为 PEM<div class="code"><pre class="code literal-block">openssl x509 -inform der -in certificate.cer -out certificate.pem
</pre></div>

</li>
</ul>
<p><strong>OpenSSL 转换 P7B</strong></p>
<ul>
<li>
<p>将 P7B 转换为 PEM</p>
<div class="code"><pre class="code literal-block">openssl pkcs7 -print_certs -in certificate.p7b -out certificate.cer
</pre></div>

</li>
<li>
<p>P7B 转换成 PFX</p>
<div class="code"><pre class="code literal-block">openssl pkcs7 -print_certs -in certificate.p7b -out certificate.cer
</pre></div>

<p>openssl pkcs12 -export -in certificate.cer -inkey privateKey.key -out certificate.pfx -certfile CACert.cer</p>
</li>
</ul>
<p><strong>OpenSSL 转换 PFX</strong></p>
<ul>
<li>将 PFX 转换为 PEM<div class="code"><pre class="code literal-block">openssl pkcs12 -in certificate.pfx -out certificate.cer -nodes
</pre></div>

</li>
</ul>
<p><strong>通过 OpenSSL 生成 rsa 密钥</strong></p>
<ul>
<li>
<p>在命令行上使用 OpenSSL 您首先需要生成公钥和私钥，您应该使用 -passout 参数密码保护该文件，该参数可以采用许多不同的形式，因此请参阅 OpenSSL 文档了解相关信息。</p>
<div class="code"><pre class="code literal-block">openssl genrsa -out private.pem 1024
</pre></div>

</li>
<li>
<p>这将创建一个名为 private.pem 的密钥文件，它使用 1024 位。这个文件实际上有私钥和公钥，所以你应该从这个文件中提取公钥：</p>
<div class="code"><pre class="code literal-block">openssl rsa -in private.pem -out public.pem -outform PEM -pubout
</pre></div>

<p>or</p>
<p>openssl rsa -in private.pem -pubout &gt; public.pem</p>
<p>or</p>
<p>openssl rsa -in private.pem -pubout -out public.pem</p>
</li>
</ul>
<blockquote>
<p>您现在将拥有仅包含您的公钥的 public.pem，您可以与第 3
方自由共享。您可以通过使用您的公钥自己加密一些东西然后使用您的私钥解密来测试这一切，首先我们需要一些数据来加密：</p>
</blockquote>
<ul>
<li>
<p>示例文件：</p>
<div class="code"><pre class="code literal-block">echo 'too many secrets' &gt; file.txt
</pre></div>

</li>
<li>
<p>您现在在 file.txt 中有一些数据，让我们使用 OpenSSL 和公钥对其进行加密：</p>
<div class="code"><pre class="code literal-block">openssl rsautl -encrypt -inkey public.pem -pubin -in file.txt -out file.ssl
</pre></div>

</li>
<li>
<p>这会创建一个 file.txt 的加密版本，称为 file.ssl，如果您查看此文件，它只是二进制垃圾，对任何人都没有什么用处。现在您可以使用私钥对其进行解密：</p>
<div class="code"><pre class="code literal-block">openssl rsautl -decrypt -inkey private.pem -in file.ssl -out decrypted.txt
</pre></div>

</li>
<li>
<p>您现在将在 decrypted.txt 中有一个未加密的文件：</p>
<div class="code"><pre class="code literal-block">cat decrypted.txt
</pre></div>

<p>|output -&gt; too many secrets</p>
</li>
</ul>
<p><strong>OpenSSL 中的 RSA 工具选项</strong></p>
<ul>
<li><strong>姓名</strong></li>
</ul>
<blockquote>
<p>rsa - RSA 密钥处理工具</p>
</blockquote>
<ul>
<li><strong>概要</strong></li>
</ul>
<blockquote>
<p>openssl rsa [-help] [-inform PEM|NET|DER] [-outform PEM|NET|DER] [-in
filename] [-passin arg] [-out filename] [-passout arg] [-aes128] [- aes192]
[-aes256] [-camellia128] [-camellia192] [-camellia256] [-des] [-des3]
[-idea] [-text] [-noout] [-modulus] [-check] [-pubin] [-pubout]
[-RSAPublicKey_in] [-RSAPublicKey_out] [-engine id]</p>
</blockquote>
<ul>
<li><strong>描述</strong></li>
</ul>
<blockquote>
<p>The rsa command processes RSA keys. They can be converted between various
forms and their components printed out. Note this command uses the
traditional SSLeay compatible format for private key encryption: newer
applications should use the more secure PKCS#8 format using the pkcs8
utility.</p>
</blockquote>
<ul>
<li>
<strong>COMMAND OPTIONS</strong><div class="code"><pre class="code literal-block">-help
</pre></div>

</li>
</ul>
<blockquote>
<p>Print out a usage message.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -inform DER|NET|PEM
</pre></div>

<blockquote>
<p>This specifies the input format. The DER option uses an ASN1 DER encoded
form compatible with the PKCS#1 RSAPrivateKey or SubjectPublicKeyInfo
format. The PEM form is the default format: it consists of the DER format
base64 encoded with additional header and footer lines. On input PKCS#8
format private keys are also accepted. The NET form is a format is described
in the NOTES section.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -outform DER|NET|PEM
</pre></div>

<blockquote>
<p>This specifies the output format, the options have the same meaning as the
-inform option.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -in filename
</pre></div>

<blockquote>
<p>This specifies the input filename to read a key from or standard input if
this option is not specified. If the key is encrypted a pass phrase will be
prompted for.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -passin arg
</pre></div>

<blockquote>
<p>the input file password source. For more information about the format of arg
see the PASS PHRASE ARGUMENTS section in openssl.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -out filename
</pre></div>

<blockquote>
<p>This specifies the output filename to write a key to or standard output if
this option is not specified. If any encryption options are set then a pass
phrase will be prompted for. The output filename should not be the same as
the input filename.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -passout password
</pre></div>

<blockquote>
<p>the output file password source. For more information about the format of
arg see the PASS PHRASE ARGUMENTS section in openssl.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -aes128|-aes192|-aes256|-camellia128|-camellia192|-camellia256|-des|-des3|-idea
</pre></div>

<blockquote>
<p>These options encrypt the private key with the specified cipher before
outputting it. A pass phrase is prompted for. If none of these options is
specified the key is written in plain text. This means that using the rsa
utility to read in an encrypted key with no encryption option can be used to
remove the pass phrase from a key, or by setting the encryption options it
can be use to add or change the pass phrase. These options can only be used
with PEM format output files.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -text
</pre></div>

<blockquote>
<p>prints out the various public or private key components in plain text in
addition to the encoded version.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -noout
</pre></div>

<blockquote>
<p>this option prevents output of the encoded version of the key.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -modulus
</pre></div>

<blockquote>
<p>this option prints out the value of the modulus of the key.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -check
</pre></div>

<blockquote>
<p>this option checks the consistency of an RSA private key.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -pubin
</pre></div>

<blockquote>
<p>by default a private key is read from the input file: with this option a
public key is read instead.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -pubout
</pre></div>

<blockquote>
<p>by default a private key is output: with this option a public key will be
output instead. This option is automatically set if the input is a public
key.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -RSAPublicKey_in, -RSAPublicKey_out
</pre></div>

<blockquote>
<p>like -pubin and -pubout except RSAPublicKey format is used instead.</p>
</blockquote>
<div class="code"><pre class="code literal-block">    -engine id
</pre></div>

<blockquote>
<p>specifying an engine (by its unique id string) will cause rsa to attempt to
obtain a functional reference to the specified engine, thus initialising it
if needed. The engine will then be set as the default for all available
algorithms.</p>
</blockquote>
<ul>
<li><strong>NOTES</strong></li>
</ul>
<p>The PEM private key format uses the header and footer lines:</p>
<div class="code"><pre class="code literal-block">    <span class="o">-----</span><span class="kr">BEGIN</span> <span class="n">RSA</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>

<span class="o">-----</span><span class="kr">END</span> <span class="n">RSA</span> <span class="n">PRIVATE</span> <span class="n">KEY</span><span class="o">-----</span>
</pre></div>

<p>The PEM public key format uses the header and footer lines:</p>
<div class="code"><pre class="code literal-block">    <span class="o">-----</span><span class="kr">BEGIN</span> <span class="n">PUBLIC</span> <span class="n">KEY</span><span class="o">-----</span>

<span class="o">-----</span><span class="kr">END</span> <span class="n">PUBLIC</span> <span class="n">KEY</span><span class="o">-----</span>
</pre></div>

<p>The PEM RSAPublicKey format uses the header and footer lines:</p>
<div class="code"><pre class="code literal-block">    <span class="o">-----</span><span class="kr">BEGIN</span> <span class="n">RSA</span> <span class="n">PUBLIC</span> <span class="n">KEY</span><span class="o">-----</span>

<span class="o">-----</span><span class="kr">END</span> <span class="n">RSA</span> <span class="n">PUBLIC</span> <span class="n">KEY</span><span class="o">-----</span>
</pre></div>

<blockquote>
<p>The NET form is a format compatible with older Netscape servers and
Microsoft IIS .key files, this uses unsalted RC4 for its encryption. It is
not very secure and so should only be used when necessary.</p>
<p>Some newer version of IIS have additional data in the exported .key files.
To use these with the utility, view the file with a binary editor and look
for the string "private-key", then trace back to the byte sequence 0x30,
0x82 (this is an ASN1 SEQUENCE). Copy all the data from this point onwards
to another file and use that as the input to the rsa utility with the
-inform NET option.</p>
</blockquote>
<p><strong>EXAMPLES</strong></p>
<p>To remove the pass phrase on an RSA private key:</p>
<div class="code"><pre class="code literal-block">     openssl rsa -in key.pem -out keyout.pem
</pre></div>

<p>To encrypt a private key using triple DES:</p>
<div class="code"><pre class="code literal-block">     openssl rsa -in key.pem -des3 -out keyout.pem
</pre></div>

<p>To convert a private key from PEM to DER format:</p>
<div class="code"><pre class="code literal-block">      openssl rsa -in key.pem -outform DER -out keyout.der
</pre></div>

<p>To print out the components of a private key to standard output:</p>
<div class="code"><pre class="code literal-block">      openssl rsa -in key.pem -text -noout
</pre></div>

<p>To just output the public part of a private key:</p>
<div class="code"><pre class="code literal-block">      openssl rsa -in key.pem -pubout -out pubkey.pem
</pre></div>

<p>Output the public part of a private key in RSAPublicKey format:</p>
<div class="code"><pre class="code literal-block">      openssl rsa -in key.pem -RSAPublicKey_out -out pubkey.pem
</pre></div>

<p><br><br><a href="../convert-pem-to-crt-and-key/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/certificate/" rel="tag">certificate</a></li>
            <li><a class="tag p-category" href="../../categories/private-key/" rel="tag">private-key</a></li>
            <li><a class="tag p-category" href="../../categories/ssl/" rel="tag">ssl</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../ru-he-cong-arraylist-zhong-shan-chu-zhong-fu-de-yuan-su/" rel="prev" title="如何从 ArrayList 中删除重复的元素？">Previous post</a>
            </li>
            <li class="next">
                <a href="../ru-he-shi-yong-ming-ling-xing-qing-chu-nuget-bao-huan-cun/" rel="next" title="如何使用命令行清除 NuGet 包缓存？">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
