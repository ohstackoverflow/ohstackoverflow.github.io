<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to make JavaScript execute after page load? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-to-make-javascript-execute-after-page-load/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-can-i-stop-gitignore-from-appearing-in-the-list-of-untracked-files/" title="How can I stop .gitignore from appearing in the list of untracked files?" type="text/html">
<link rel="next" href="../how-to-copy-to-clipboard-in-vim/" title="How to copy to clipboard in Vim?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How to make JavaScript execute after page load?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-to-make-javascript-execute-after-page-load/">
<meta property="og:description" content="I'm executing an external script, using a &lt;script&gt; inside &lt;head&gt;.
Now since the script executes before the page has loaded, I can't access
the &lt;body&gt;, among other things. I'd like to execute some Java">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T07:24:38+08:00">
<meta property="article:tag" content="dom">
<meta property="article:tag" content="dom-events">
<meta property="article:tag" content="html">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="pageload">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to make JavaScript execute after page load?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:24:38+08:00" itemprop="datePublished" title="2023-02-17 07:24">2023-02-17 07:24</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'm executing an external script, using a <code>&lt;script&gt;</code> inside <code>&lt;head&gt;</code>.</p>
<p>Now since the script executes <strong>before</strong> the page has loaded, I can't access
the <code>&lt;body&gt;</code>, among other things. I'd like to execute some JavaScript after
the document has been "loaded" (HTML fully downloaded and in-RAM). Are there
any events that I can hook onto when my script executes, that will get
triggered on page load?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>These solutions will work:</p>
<p>As mentioned in comments use defer:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"deferMe.js"</span><span class="w"> </span><span class="err">defer</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">body</span><span class="w"> </span><span class="n">onload</span><span class="o">=</span><span class="s2">"script();"</span><span class="o">&gt;</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="n">document</span><span class="o">.</span><span class="n">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="o">...</span>
</pre></div>

<p>or even</p>
<div class="code"><pre class="code literal-block"><span class="n">window</span><span class="o">.</span><span class="n">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="o">...</span>
</pre></div>

<p>Note that <strong>the last option is a better way to go</strong> since it is unobstrusive
and is considered more standard.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Triggering scripts in the right moment</h2>
<p>A quick overview on how to load / run the script at the moment in which they
intend to be loaded / executed.  </p>
<h3>Using "defer"</h3>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"script.js"</span><span class="w"> </span><span class="err">defer</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>Using defer will trigger after domInteractive (document.readyState =
"interactive") and just before "DOMContentLoaded" Event is triggered. If you
need to execute the script after all resources (images, scripts) are loaded
use "load" event or target one of the document.readyState states. Read further
down for more information about those events / states, as well as async and
defer attributes corresponding to script fetching and execution timing.</p>
<blockquote>
<p>This Boolean attribute is set to indicate to a browser that the script is
meant to be executed after the document has been parsed, but before firing
DOMContentLoaded.</p>
<p>Scripts with the defer attribute will prevent the DOMContentLoaded event
from firing until the script has loaded and finished evaluating.</p>
</blockquote>
<p>Resource: https://developer.mozilla.org/en-
US/docs/Web/HTML/Element/script#attributes</p>
<ul>
<li>See the images at the bottom for feather explanation.</li>
</ul>
<h3>Event Listeners - Keep in mind that loading of the page has more, than one</h3>
<p>event:</p>
<h4>"DOMContentLoaded"</h4>
<p>This event is fired when the <em>initial HTML document has been completely loaded
and parsed</em> , without waiting for style sheets, images, and subframes to
finish loading. At this stage you could programmatically optimize loading of
images and CSS based on user device or bandwidth speed.  </p>
<p>Executes after DOM is loaded (before images and CSS):</p>
<div class="code"><pre class="code literal-block">document.addEventListener("DOMContentLoaded", function(){
    //....
});
</pre></div>

<blockquote>
<p>Note: Synchronous JavaScript pauses parsing of the DOM. If you want the DOM
to get parsed as fast as possible after the user requested the page, you
could <strong>turn your JavaScript asynchronous</strong> and optimize loading of style
sheets</p>
</blockquote>
<h4>"load"</h4>
<p>A very different event, <strong>load</strong>, should only be used to detect a <em>fully-
loaded page</em>. It is an incredibly popular mistake to use load where
DOMContentLoaded would be much more appropriate, so be cautious.  </p>
<p>Executes after everything is loaded and parsed:</p>
<div class="code"><pre class="code literal-block"><span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">"load"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">....</span>
<span class="p">});</span>
</pre></div>

<hr>
<p><em>MDN Resources:</em> https://developer.mozilla.org/en-
US/docs/Web/Events/DOMContentLoaded https://developer.mozilla.org/en-
US/docs/Web/Events/load</p>
<p><em>MDN list of all events:</em><br>
https://developer.mozilla.org/en-US/docs/Web/Events</p>
<h3>Event Listeners with readyStates - Alternative solution (readystatechange):</h3>
<p>You can also track document.readystatechange states to trigger script
execution.</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">Place</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="p">(</span><span class="n">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">defer</span><span class="p">)</span>
<span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'readystatechange'</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">switch</span><span class="w"> </span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">case</span><span class="w"> </span><span class="s2">"loading"</span><span class="p">:</span>
<span class="w">      </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"document.readyState: "</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="p">,</span>
<span class="w">       </span><span class="err">`</span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">loading</span><span class="o">.</span><span class="err">`</span>
<span class="w">       </span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="n">case</span><span class="w"> </span><span class="s2">"interactive"</span><span class="p">:</span>
<span class="w">      </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"document.readyState: "</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="err">`</span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">finished</span><span class="w"> </span><span class="n">loading</span><span class="w"> </span><span class="n">DOM</span><span class="o">.</span><span class="w"> </span><span class="err">`</span><span class="p">,</span>
<span class="w">        </span><span class="err">`</span><span class="o">-</span><span class="w"> </span><span class="s2">"DOMContentLoaded"</span><span class="w"> </span><span class="n">event</span><span class="err">`</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="n">case</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">:</span>
<span class="w">      </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"document.readyState: "</span><span class="p">,</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="err">`</span><span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">DOM</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">Sub</span><span class="o">-</span><span class="n">resources</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">fully</span><span class="w"> </span><span class="n">loaded</span><span class="o">.</span><span class="w"> </span><span class="err">`</span><span class="p">,</span>
<span class="w">        </span><span class="err">`</span><span class="o">-</span><span class="w"> </span><span class="s2">"load"</span><span class="w"> </span><span class="n">event</span><span class="err">`</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>MDN Resources: https://developer.mozilla.org/en-
US/docs/Web/API/Document/readyState</p>
<h3>Where to place your script (with &amp; without async/defer)?</h3>
<p>This is also very important to know where to place your script and how it
positions in HTML as well as parameters like defer and async will affects
script fetching, execution and HTML blocking.  </p>
<ul>
<li>On the image below the yellow label “Ready” indicates the moment of ending loading HTML DOM. Then it fires: document.readyState = "interactive" &gt;&gt;&gt; defered scripts &gt;&gt;&gt; DOMContentLoaded event (it's sequential); </li>
</ul>
<p><img alt="enter image description here" src="../../images/jsHK7.jpg"></p>
<p><img alt="enter image description here" src="../../images/b3ixy.jpg"></p>
<p><img alt="enter image description here" src="../../images/GkezA.jpg"></p>
<p><img alt="enter image description here" src="../../images/zx3fh.jpg"></p>
<p>If your script uses <strong>async</strong> or <strong>defer</strong> read this:
https://flaviocopes.com/javascript-async-defer/  </p>
<h3>And if all of the above points are still to early...</h3>
<p>What if you need your script to run <em>after</em> other scripts are run, including
those scheduled to run at the very end (e.g. those scheduled for the "load"
event)? See Run JavaScript after all window.onload scripts have completed?</p>
<p>What if you need to make sure your script runs <em>after</em> some other script,
regardless of when it is run? This answer to the above question has that
covered too.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/dom/" rel="tag">dom</a></li>
            <li><a class="tag p-category" href="../../categories/dom-events/" rel="tag">dom-events</a></li>
            <li><a class="tag p-category" href="../../categories/html/" rel="tag">html</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/pageload/" rel="tag">pageload</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-can-i-stop-gitignore-from-appearing-in-the-list-of-untracked-files/" rel="prev" title="How can I stop .gitignore from appearing in the list of untracked files?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-copy-to-clipboard-in-vim/" rel="next" title="How to copy to clipboard in Vim?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
