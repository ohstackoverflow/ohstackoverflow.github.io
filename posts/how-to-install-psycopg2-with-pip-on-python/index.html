<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to install psycopg2 with "pip" on Python? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-to-install-psycopg2-with-pip-on-python/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../bodyparser-is-deprecated-express-4/" title="bodyParser is deprecated express 4" type="text/html">
<link rel="next" href="../in-a-dockerfile-how-to-update-path-environment-variable/" title="In a Dockerfile, How to update PATH environment variable?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content='How to install psycopg2 with "pip" on Python?'>
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-to-install-psycopg2-with-pip-on-python/">
<meta property="og:description" content="I'm using virtualenv and I need to install &quot;psycopg2&quot;.
I have done the following:
pip install http://pypi.python.org/packages/source/p/psycopg2/psycopg2-2.4.tar.gz#md5=24f4368e2cfdc1a2b03282ddda814160">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T18:30:24+08:00">
<meta property="article:tag" content="pip">
<meta property="article:tag" content="psycopg2">
<meta property="article:tag" content="python">
<meta property="article:tag" content="virtualenv">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to install psycopg2 with "pip" on Python?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:30:24+08:00" itemprop="datePublished" title="2023-02-17 18:30">2023-02-17 18:30</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'm using <em><code>virtualenv</code></em> and I need to install "psycopg2".</p>
<p>I have done the following:</p>
<div class="code"><pre class="code literal-block">pip install http://pypi.python.org/packages/source/p/psycopg2/psycopg2-2.4.tar.gz#md5=24f4368e2cfdc1a2b03282ddda814160
</pre></div>

<p>And I have the following messages:</p>
<div class="code"><pre class="code literal-block"><span class="n">Downloading</span><span class="o">/</span><span class="n">unpacking</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">pypi</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">psycopg2</span><span class="o">/</span><span class="n">psycopg2</span>
<span class="o">-</span><span class="mf">2.4</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span><span class="c1">#md5=24f4368e2cfdc1a2b03282ddda814160</span>
<span class="w">  </span><span class="n">Downloading</span><span class="w"> </span><span class="n">psycopg2</span><span class="o">-</span><span class="mf">2.4</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span><span class="w"> </span><span class="p">(</span><span class="mi">607</span><span class="n">Kb</span><span class="p">):</span><span class="w"> </span><span class="mi">607</span><span class="n">Kb</span><span class="w"> </span><span class="n">downloaded</span>
<span class="w">  </span><span class="n">Running</span><span class="w"> </span><span class="n">setup</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="n">egg_info</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">pypi</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">sou</span>
<span class="n">rce</span><span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">psycopg2</span><span class="o">/</span><span class="n">psycopg2</span><span class="o">-</span><span class="mf">2.4</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span><span class="c1">#md5=24f4368e2cfdc1a2b03282ddda814160</span>
<span class="w">    </span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="n">pg_config</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span><span class="o">.</span>

<span class="w">    </span><span class="n">Please</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">pg_config</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">PATH</span>
<span class="w">    </span><span class="ow">or</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">option</span><span class="p">:</span>

<span class="w">        </span><span class="n">python</span><span class="w"> </span><span class="n">setup</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="n">build_ext</span><span class="w"> </span><span class="o">--</span><span class="n">pg</span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">pg_config</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">...</span>

<span class="w">    </span><span class="ow">or</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pg_config</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="s1">'setup.cfg'</span><span class="o">.</span>
<span class="w">    </span><span class="n">Complete</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">setup</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="n">egg_info</span><span class="p">:</span>
<span class="w">    </span><span class="n">running</span><span class="w"> </span><span class="n">egg_info</span>

<span class="n">creating</span><span class="w"> </span><span class="n">pip</span><span class="o">-</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>\<span class="n">psycopg2</span><span class="o">.</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>

<span class="n">writing</span><span class="w"> </span><span class="n">pip</span><span class="o">-</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>\<span class="n">psycopg2</span><span class="o">.</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>\<span class="n">PKG</span><span class="o">-</span><span class="n">INFO</span>

<span class="n">writing</span><span class="w"> </span><span class="n">top</span><span class="o">-</span><span class="n">level</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pip</span><span class="o">-</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>\<span class="n">psycopg2</span><span class="o">.</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>\<span class="n">top_level</span><span class="o">.</span><span class="n">txt</span>

<span class="n">writing</span><span class="w"> </span><span class="n">dependency_links</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pip</span><span class="o">-</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>\<span class="n">psycopg2</span><span class="o">.</span><span class="n">egg</span><span class="o">-</span><span class="n">info</span>\<span class="n">dependency_links</span><span class="o">.</span><span class="n">txt</span>

<span class="n">writing</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="s1">'pip-egg-info\psycopg2.egg-info\SOURCES.txt'</span>

<span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="n">manifest_maker</span><span class="p">:</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="s1">'-c'</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span>

<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="n">pg_config</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span><span class="o">.</span>



<span class="n">Please</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">pg_config</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">PATH</span>

<span class="ow">or</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">option</span><span class="p">:</span>



<span class="w">    </span><span class="n">python</span><span class="w"> </span><span class="n">setup</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="n">build_ext</span><span class="w"> </span><span class="o">--</span><span class="n">pg</span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">pg_config</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">...</span>



<span class="ow">or</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pg_config</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="s1">'setup.cfg'</span><span class="o">.</span>

<span class="o">----------------------------------------</span>
<span class="n">Command</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">setup</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="n">egg_info</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="mi">1</span>
<span class="n">Storing</span><span class="w"> </span><span class="n">complete</span><span class="w"> </span><span class="nb">log</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">C</span><span class="p">:</span>\<span class="n">Documents</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Settings</span>\<span class="n">anlopes</span>\<span class="n">Application</span><span class="w"> </span><span class="n">Data</span>\<span class="n">pip</span>\<span class="n">p</span>
<span class="n">ip</span><span class="o">.</span><span class="n">log</span>
</pre></div>

<p>My question, I only need to do this to get the psycopg2 working?</p>
<div class="code"><pre class="code literal-block">python setup.py build_ext --pg-config /path/to/pg_config build ...
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><em><strong>Note</strong> : Since a while back, there are binary wheels for Windows in PyPI,
so this should no longer be an issue for Windows users. Below are solutions
for Linux, Mac users, since lots of them find this post through web searches.</em></p>
<hr>
<h2>Option 1</h2>
<p>Install the <code>psycopg2-binary</code> PyPI package instead, it has Python wheels for
Linux and Mac OS.</p>
<div class="code"><pre class="code literal-block">pip install psycopg2-binary
</pre></div>

<hr>
<h2>Option 2</h2>
<p>Install the prerequsisites for building the <code>psycopg2</code> package from source:</p>
<h3>Debian/Ubuntu</h3>
<h4>Python 3</h4>
<div class="code"><pre class="code literal-block">sudo apt install libpq-dev python3-dev
</pre></div>

<p>You might need to install <code>python3.8-dev</code> or similar for e.g. Python 3.8.</p>
<h4>Python 2</h4>
<div class="code"><pre class="code literal-block">sudo apt install libpq-dev python-dev
</pre></div>

<p>If that's not enough, try</p>
<div class="code"><pre class="code literal-block">sudo apt install build-essential
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">sudo apt install postgresql-server-dev-all
</pre></div>

<p>as well before installing psycopg2 again.</p>
<h3>CentOS 6</h3>
<p>See Banjer's answer</p>
<h3>macOS</h3>
<p>See nichochar's answer</p>
<p><br></p>
<h3>Suggest</h3>
<p>On CentOS, you need the postgres dev packages:</p>
<div class="code"><pre class="code literal-block">sudo yum install python-devel postgresql-devel
</pre></div>

<p>That was the solution on CentOS 6 at least.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/pip/" rel="tag">pip</a></li>
            <li><a class="tag p-category" href="../../categories/psycopg2/" rel="tag">psycopg2</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
            <li><a class="tag p-category" href="../../categories/virtualenv/" rel="tag">virtualenv</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../bodyparser-is-deprecated-express-4/" rel="prev" title="bodyParser is deprecated express 4">Previous post</a>
            </li>
            <li class="next">
                <a href="../in-a-dockerfile-how-to-update-path-environment-variable/" rel="next" title="In a Dockerfile, How to update PATH environment variable?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
