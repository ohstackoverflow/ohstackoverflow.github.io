<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What does “DAMP not DRY” mean when talking about unit tests? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-does-damp-not-dry-mean-when-talking-about-unit-tests/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../mysql-how-to-allow-remote-connection-to-mysql/" title="MySQL: How to allow remote connection to mysql" type="text/html">
<link rel="next" href="../if-elif-else-statement-issues-in-bash/" title="if, elif, else statement issues in Bash" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What does “DAMP not DRY” mean when talking about unit tests?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-does-damp-not-dry-mean-when-talking-about-unit-tests/">
<meta property="og:description" content="I heard someone say that unit tests (e.g. nUnit, jUnit, xUnit) should be

DAMP not DRY

(E.g. unit tests should contain &quot;damp code&quot; not &quot;dry code&quot;)
What are they talking about?

Answer
It's a balance,">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T15:29:33+08:00">
<meta property="article:tag" content="unit-testing">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What does “DAMP not DRY” mean when talking about unit tests?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:29:33+08:00" itemprop="datePublished" title="2023-03-03 15:29">2023-03-03 15:29</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I heard someone say that unit tests (e.g. nUnit, jUnit, xUnit) should be</p>
<blockquote>
<p>DAMP not DRY</p>
</blockquote>
<p>(E.g. unit tests should contain "damp code" not "dry code")</p>
<p>What are they talking about?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>It's a balance, not a contradiction</h4>
<p>DAMP and DRY are not contradictory, rather they balance two different aspects
of a code's <em>maintainability</em>. Maintainable code (code that is easy to change)
is the ultimate goal here.</p>
<h4>
<strong>DAMP</strong> (Descriptive And Meaningful Phrases) promotes the <em>readability</em>
</h4>
<p>of the code.</p>
<p>To maintain code, you first need to understand the code. To understand it, you
have to read it. Consider for a moment how much time you spend <em>reading</em> code.
It's a lot. <em>DAMP increases maintainability by reducing the time necessary to
read and understand the code.</em></p>
<h4>
<strong>DRY</strong> (Don't repeat yourself) promotes the <em>orthogonality</em> of the code.</h4>
<p>Removing duplication ensures that every concept in the system has a single
authoritative representation in the code. A change to a single business
concept results in a single change to the code. <em>DRY increases maintainability
by isolating change (risk) to only those parts of the system that must
change.</em></p>
<h4>So, why is duplication more acceptable in tests?</h4>
<p>Tests often contain inherent duplication because they are testing the same
thing over and over again, only with slightly different input values or setup
code. However, unlike production code, this duplication is usually isolated
only to the scenarios within a single test fixture/file. Because of this, the
duplication is minimal and obvious, which means it poses less risk to the
project than other types of duplication.</p>
<p>Furthermore, removing this kind of duplication reduces the readability of the
tests. The details that were previously duplicated in each test are now hidden
away in some new method or class. To get the full picture of the test, you now
have to mentally put all these pieces back together.</p>
<p>Therefore, since test code duplication often carries less risk, and promotes
readability, its easy to see how it is considered acceptable.</p>
<p><em>As a principle, favor DRY in production code, favor DAMP in test code. While
both are equally important, with a little wisdom you can tip the balance in
your favor.</em></p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>DAMP - Descriptive And Meaningful Phrases.</p>
</blockquote>
<p>"DAMP not DRY" values readability over code re-use. The idea of DAMP not DRY
in test cases is that tests should be easy to understand, even if that means
test cases sometimes have repeated code.</p>
<p>See also Is duplicated code more tolerable in unit tests? for some discussion
on the merits of this viewpoint.</p>
<p>It may have been coined by Jay Fields, in relation to Domain Specific
Languages.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/unit-testing/" rel="tag">unit-testing</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../mysql-how-to-allow-remote-connection-to-mysql/" rel="prev" title="MySQL: How to allow remote connection to mysql">Previous post</a>
            </li>
            <li class="next">
                <a href="../if-elif-else-statement-issues-in-bash/" rel="next" title="if, elif, else statement issues in Bash">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
