<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Difference between Constructor and ngOnInit | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/difference-between-constructor-and-ngoninit/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-check-which-version-of-python-is-running-my-script/" title="How do I check which version of Python is running my script?" type="text/html">
<link rel="next" href="../how-to-remove-old-docker-containers/" title="How to remove old Docker containers" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Difference between Constructor and ngOnInit">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/difference-between-constructor-and-ngoninit/">
<meta property="og:description" content="Angular provides life cycle hook ngOnInit by default.
Why should ngOnInit be used, if we already have a constructor?

Answer
The Constructor is a default method of the class that is executed when the
">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T02:25:15+08:00">
<meta property="article:tag" content="angular">
<meta property="article:tag" content="angular-lifecycle-hooks">
<meta property="article:tag" content="ngoninit">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Difference between Constructor and ngOnInit</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:25:15+08:00" itemprop="datePublished" title="2023-02-17 02:25">2023-02-17 02:25</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Angular provides life cycle hook <code>ngOnInit</code> by default.</p>
<p>Why should <code>ngOnInit</code> be used, if we already have a <code>constructor</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>Constructor</code> is a default method of the class that is executed when the
class is instantiated and ensures proper initialisation of fields in the class
and its subclasses. Angular, or better Dependency Injector (DI), analyses the
constructor parameters and when it creates a new instance by calling <code>new
MyClass()</code> it tries to find providers that match the types of the constructor
parameters, resolves them and passes them to the constructor like</p>
<div class="code"><pre class="code literal-block">new MyClass(someArg);
</pre></div>

<p><code>ngOnInit</code> is a life cycle hook called by Angular to indicate that Angular is
done creating the component.</p>
<p>We have to import <code>OnInit</code> like this in order to use it (actually implementing
<code>OnInit</code> is not mandatory but considered good practice):</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
</pre></div>

<p>then to make use of the method <code>OnInit</code>, we have to implement the class like
this:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">App</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">OnInit</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Called</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ngOnInit</span><span class="p">()</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">ngOnInit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Called</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">called</span><span class="w">  </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">ngOnChanges</span><span class="p">()</span><span class="w"> </span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<blockquote>
<p>Implement this interface to execute custom initialization logic after your
directive's data-bound properties have been initialized. ngOnInit is called
right after the directive's data-bound properties have been checked for the
first time, and before any of its children have been checked. It is invoked
only once when the directive is instantiated.</p>
</blockquote>
<p>Mostly we use <code>ngOnInit</code> for all the initialization/declaration and avoid
stuff to work in the constructor. The constructor should only be used to
initialize class members but shouldn't do actual "work".</p>
<p>So you should use <code>constructor()</code> to setup Dependency Injection and not much
else. ngOnInit() is better place to "start" - it's where/when components'
bindings are resolved.</p>
<p>For more information refer here:</p>
<ul>
<li>
<p>https://angular.io/api/core/OnInit</p>
</li>
<li>
<p>Angular Component Constructor Vs OnInit</p>
</li>
</ul>
<p>Important to note that @Input values are not accessible in the constructor
(Thanks to @tim for suggestion in comments)</p>
<p><br></p>
<h3>Suggest</h3>
<p>The article The essential difference between Constructor and ngOnInit in
Angular explores the difference from multiple perspectives. This answer
provides the most important difference explanation related to the component
initialization process which also shows the different in usage.</p>
<p>Angular bootstrap process consists of the two major stages:</p>
<ul>
<li>constructing components tree</li>
<li>running change detection</li>
</ul>
<p>The constructor of the component is called when Angular constructs components
tree. All lifecycle hooks are called as part of running change detection.</p>
<p>When Angular constructs components tree the root module injector is already
configured so you can inject any global dependencies. Also, when Angular
instantiates a child component class the injector for the parent component is
also already set up so you can inject providers defined on the parent
component including the parent component itself. Component constructors is the
only method that is called in the context of the injector so if you need any
dependency that's the only place to get those dependencies.</p>
<p>When Angular starts change detection the components tree is constructed and
the constructors for all components in the tree have been called. Also every
component's template nodes are added to the DOM. The <code>@Input</code> communication
mechanism is processed during change detection so you cannot expect to have
the properties available in the constructor. It will be available on after
<code>ngOnInit</code>.</p>
<p>Let's see a quick example. Suppose you have the following template:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">my</span><span class="o">-</span><span class="n">app</span><span class="o">&gt;</span>
<span class="w">   </span><span class="o">&lt;</span><span class="n">child</span><span class="o">-</span><span class="n">comp</span><span class="w"> </span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="s1">'prop'</span><span class="o">&gt;</span>
</pre></div>

<p>So Angular starts bootstrapping the application. As I said it first creates
classes for each component. So it calls <code>MyAppComponent</code> constructor. It also
creates a DOM node which is the host element of the <code>my-app</code> component. Then
it proceeds to creating a host element for the <code>child-comp</code> and calling
<code>ChildComponent</code> constructor. At this stage it's not really concerned with the
<code>i</code> input binding and any lifecycle hooks. So when this process is finished
Angular ends up with the following tree of component views:</p>
<div class="code"><pre class="code literal-block">MyAppView
  - MyApp component instance
  - my-app host element data
       ChildCompnentView
         - ChildComponent component instance
         - child-comp host element data
</pre></div>

<p>Only then runs change detection and updates bindings for the <code>my-app</code> and
calls <code>ngOnInit</code> on the MyAppComponent class. Then it proceeds to updating the
bindings for the <code>child-comp</code> and calls <code>ngOnInit</code> on the ChildComponent
class.</p>
<p>You can do your initialization logic in either constructor or <code>ngOnInit</code>
depending on what you need available. For example the article Here is how to
get ViewContainerRef before @ViewChild query is evaluated shows what type of
initialization logic can be required to be performed in the constructor.</p>
<p>Here are some articles that will help you understand the topic better:</p>
<ul>
<li>Everything you need to know about change detection in Angular</li>
<li>Angular’s $digest is reborn in the newer version of Angular</li>
<li>The mechanics of property bindings update in Angular</li>
</ul>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/angular/" rel="tag">angular</a></li>
            <li><a class="tag p-category" href="../../categories/angular-lifecycle-hooks/" rel="tag">angular-lifecycle-hooks</a></li>
            <li><a class="tag p-category" href="../../categories/ngoninit/" rel="tag">ngoninit</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-check-which-version-of-python-is-running-my-script/" rel="prev" title="How do I check which version of Python is running my script?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-remove-old-docker-containers/" rel="next" title="How to remove old Docker containers">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
