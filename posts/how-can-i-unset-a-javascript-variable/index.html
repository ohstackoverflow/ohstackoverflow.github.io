<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How can I unset a JavaScript variable? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-can-i-unset-a-javascript-variable/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../find-first-element-by-predicate/" title="Find first element by predicate" type="text/html">
<link rel="next" href="../two-submit-buttons-in-one-form/" title="Two submit buttons in one form" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How can I unset a JavaScript variable?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-can-i-unset-a-javascript-variable/">
<meta property="og:description" content="I have a global variable in JavaScript (actually a window property, but I
don't think it matters) which was already populated by a previous script, but
I don't want another script that will run later ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T19:20:11+08:00">
<meta property="article:tag" content="global-variables">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="undefined">
<meta property="article:tag" content="unset">
<meta property="article:tag" content="variable-declaration">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How can I unset a JavaScript variable?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:20:11+08:00" itemprop="datePublished" title="2023-02-17 19:20">2023-02-17 19:20</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have a global variable in JavaScript (actually a <code>window</code> property, but I
don't think it matters) which was already populated by a previous script, but
I don't want another script that will run later to see its value or that it
was even defined.</p>
<p>I've put <code>some_var = undefined</code> and it works for the purpose of testing
<code>typeof some_var == "undefined"</code> but I really do not think it's the right way
to go about it.</p>
<p>What do you think?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>delete</code> operator removes a property from an object. It cannot remove a
variable. So the answer to the question depends on how the global variable or
property is defined.</p>
<p>(1) If it is created with <code>var</code>, it cannot be deleted.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">g_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="n">create</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="k">var</span><span class="p">,</span><span class="w"> </span><span class="n">g_a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">variable</span>
<span class="n">delete</span><span class="w"> </span><span class="n">g_a</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="k">return</span><span class="w"> </span><span class="bp">false</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">g_a</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="n">g_a</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="mi">1</span>
</pre></div>

<p>(2) If it is created without <code>var</code>, it can be deleted.</p>
<div class="code"><pre class="code literal-block"><span class="n">g_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="n">create</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="k">var</span><span class="p">,</span><span class="w"> </span><span class="n">g_b</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">property</span>
<span class="n">delete</span><span class="w"> </span><span class="n">g_b</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="k">return</span><span class="w"> </span><span class="bp">true</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">g_b</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">g_b</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">defined</span>
</pre></div>

<h3>Technical Explanation</h3>
<h4>1. Using <code>var</code>
</h4>
<p>In this case the reference <code>g_a</code> is created in what the ECMAScript spec calls
" <em>VariableEnvironment</em> " that is attached to the current scope - this may be
the a function execution context in the case of using <code>var</code> inside a function
(though it may be get a little more complicated when you consider <code>let</code>) or in
the case of "global" code the <em>VariableEnvironment</em> is attached to the global
object (often <code>window</code>).</p>
<p>References in the <em>VariableEnvironment</em> are not normally deletable - the
process detailed in ECMAScript 10.5 explains this in detail, but suffice it to
say that unless your code is executed in an <code>eval</code> context (which most
browser-based development consoles use), then variables declared with <code>var</code>
cannot be deleted.</p>
<h4>2. Without Using <code>var</code>
</h4>
<p>When trying to assign a value to a name without using the <code>var</code> keyword,
JavaScript tries to locate the named reference in what the ECMAScript spec
calls " <em>LexicalEnvironment</em> ", and the main difference is that
<em>LexicalEnvironment</em> s are nested - that is a <em>LexicalEnvironment</em> has a
parent (what the ECMAScript spec calls "outer environment reference") and when
JavaScript fails to locate the reference in a <em>LexicalEnvironment</em> , it looks
in the parent <em>LexicalEnvironment</em> (as detailed in 10.3.1 and 10.2.2.1). The
top level <em>LexicalEnvironment</em> is the " <em>global environment</em> ", and that is
bound to the global object in that its references are the global object's
properties. So if you try to access a name that was not declared using a <code>var</code>
keyword in the current scope or any outer scopes, JavaScript will eventually
fetch a property of the <code>window</code> object to serve as that reference. As we've
learned before, properties on objects can be deleted.</p>
<h4>Notes</h4>
<ol>
<li>
<p>It is important to remember that <code>var</code> declarations are "hoisted" - i.e. they are always considered to have happened in the beginning of the scope that they are in - though not the value initialization that may be done in a <code>var</code> statement - that is left where it is. So in the following code, <code>a</code> is a reference from the <em>VariableEnvironment</em> and not the <code>window</code> property and its value will be <code>10</code> at the end of the code:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>

</li>
<li>
<p>The above discussion is when "strict mode" is not enabled. Lookup rules are a bit different when using "strict mode" and lexical references that would have resolved to window properties without "strict mode" will raise "undeclared variable" errors under "strict mode". I didn't really understand where this is specified, but its how browsers behave.</p>
</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>scunliffe's answer will work, but technically it ought to be</p>
<div class="code"><pre class="code literal-block"><span class="n">delete</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">some_var</span><span class="p">;</span>
</pre></div>

<p><em>delete</em> is supposed to be a no-op when the target isn't an object property.
e.g.,</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
<span class="w">   </span><span class="n">delete</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">wont</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">anything</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="mi">123</span>
<span class="w">   </span><span class="k">var</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="p">};</span>
<span class="w">   </span><span class="n">delete</span><span class="w"> </span><span class="n">bar</span><span class="o">.</span><span class="n">foo</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">gone</span>
<span class="p">}());</span>
</pre></div>

<p>But since global variables are actually members of the window object, it
works.</p>
<p>When prototype chains are involved, using <em>delete</em> gets more complex because
it only removes the property from the target object, and not the prototype.
e.g.,</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="n">Foo</span><span class="o">.</span><span class="n">prototype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Foo</span><span class="p">();</span>
<span class="o">//</span><span class="w"> </span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mi">123</span>
<span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">456</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="mi">456</span>
<span class="n">delete</span><span class="w"> </span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="n">again</span><span class="o">.</span>
</pre></div>

<p>So be careful.</p>
<p>Note: My answer is somewhat inaccurate (see "Misconceptions" at the end). The
link explains all the gory details, but the summary is that there can be big
differences between browsers and depending on the object you are deleting
from. <code>delete object.someProp</code> should generally be safe as long as <code>object !==
window</code>. I still wouldn't use it to delete variables declared with <code>var</code>
although you can under the right circumstances.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/global-variables/" rel="tag">global-variables</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/undefined/" rel="tag">undefined</a></li>
            <li><a class="tag p-category" href="../../categories/unset/" rel="tag">unset</a></li>
            <li><a class="tag p-category" href="../../categories/variable-declaration/" rel="tag">variable-declaration</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../find-first-element-by-predicate/" rel="prev" title="Find first element by predicate">Previous post</a>
            </li>
            <li class="next">
                <a href="../two-submit-buttons-in-one-form/" rel="next" title="Two submit buttons in one form">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
