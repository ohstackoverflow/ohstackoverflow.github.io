<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to calculate number of days between two dates? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-to-calculate-number-of-days-between-two-dates/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-enable-external-request-in-iis-express/" title="How to enable external request in IIS Express?" type="text/html">
<link rel="next" href="../programmatically-find-the-number-of-cores-on-a-machine/" title="Programmatically find the number of cores on a machine" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How to calculate number of days between two dates?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-to-calculate-number-of-days-between-two-dates/">
<meta property="og:description" content='For example, given two dates in input boxes:
&lt;input id="first" value="1/1/2000"/&gt;
&lt;input id="second" value="1/1/2001"/&gt;

&lt;script&gt;
  alert(datediff("day", first, second)); // what goes here?
&lt;/script&gt;
'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T05:55:32+08:00">
<meta property="article:tag" content="date">
<meta property="article:tag" content="javascript">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to calculate number of days between two dates?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:55:32+08:00" itemprop="datePublished" title="2023-02-18 05:55">2023-02-18 05:55</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>For example, given two dates in input boxes:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;input</span><span class="w"> </span><span class="na">id=</span><span class="s">"first"</span><span class="w"> </span><span class="na">value=</span><span class="s">"1/1/2000"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;input</span><span class="w"> </span><span class="na">id=</span><span class="s">"second"</span><span class="w"> </span><span class="na">value=</span><span class="s">"1/1/2001"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="w">  </span>alert(datediff("day",<span class="w"> </span>first,<span class="w"> </span>second));<span class="w"> </span>//<span class="w"> </span>what<span class="w"> </span>goes<span class="w"> </span>here?
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>How do I get the number of days between two dates in JavaScript?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here is a <strong>quick and dirty</strong> implementation of <code>datediff</code>, as a proof of
concept to solve the problem as presented in the question. It relies on the
fact that you can get the elapsed milliseconds between two dates by
subtracting them, which coerces them into their primitive number value
(milliseconds since the start of 1970).</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Take</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dates</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">divide</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">milliseconds</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">day</span><span class="o">.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Round</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">nearest</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">deal</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">DST</span><span class="o">.</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">function</span><span class="w"> </span><span class="n">datediff</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">        </span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">second</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">first</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">1000</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">24</span><span class="p">));</span>
<span class="p">}</span>

<span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="s2">"dateString"</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">browser</span><span class="o">-</span><span class="n">dependent</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">discouraged</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">we</span><span class="s1">'ll write</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">parse</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">U</span><span class="o">.</span><span class="n">S</span><span class="o">.</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="p">(</span><span class="n">which</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">checking</span><span class="p">)</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">function</span><span class="w"> </span><span class="n">parseDate</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">mdy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">mdy</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">mdy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">mdy</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="p">}</span>

<span class="n">alert</span><span class="p">(</span><span class="n">datediff</span><span class="p">(</span><span class="n">parseDate</span><span class="p">(</span><span class="n">first</span><span class="o">.</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="n">parseDate</span><span class="p">(</span><span class="n">second</span><span class="o">.</span><span class="n">value</span><span class="p">)));</span>


<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"first"</span><span class="w"> </span><span class="n">value</span><span class="o">=</span><span class="s2">"1/1/2000"</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"second"</span><span class="w"> </span><span class="n">value</span><span class="o">=</span><span class="s2">"1/1/2001"</span><span class="o">/&gt;</span>
</pre></div>

<p>You should be aware that the "normal" Date APIs (without "UTC" in the name)
operate in the local timezone of the user's browser, so in general you could
run into issues if your user is in a timezone that you don't expect, and your
code will have to deal with Daylight Saving Time transitions. You should
carefully read the documentation for the Date object and its methods, and for
anything more complicated, strongly consider using a library that offers more
safe and powerful APIs for date manipulation.</p>
<ul>
<li>Numbers and Dates -- MDN JavaScript Guide</li>
<li>
<code>Date</code> -- MDN JavaScript reference</li>
</ul>
<p>Also, for illustration purposes, the snippet uses named access on the <code>window</code>
object for brevity, but in production you should use standardized APIs like
getElementById, or more likely, some UI framework.</p>
<p><br></p>
<h3>Suggest</h3>
<p>As of this writing, only one of the other answers correctly handles DST
(daylight saving time) transitions. Here are the results on a system located
in California:</p>
<div class="code"><pre class="code literal-block">                                        1/1/2013- 3/10/2013- 11/3/2013-
User       Formula                      2/1/2013  3/11/2013  11/4/2013  Result
---------  ---------------------------  --------  ---------  ---------  ---------
Miles                   (d2 - d1) / N   31        0.9583333  1.0416666  Incorrect
some         Math.floor((d2 - d1) / N)  31        0          1          Incorrect
fuentesjr    Math.round((d2 - d1) / N)  31        1          1          Correct
toloco     Math.ceiling((d2 - d1) / N)  31        1          2          Incorrect

N = 86400000
</pre></div>

<p>Although <code>Math.round</code> returns the correct results, I think it's somewhat
clunky. Instead, by explicitly accounting for changes to the UTC offset when
DST begins or ends, we can use exact arithmetic:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">treatAsUTC</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">date</span><span class="p">);</span>
<span class="w">    </span><span class="n">result</span><span class="o">.</span><span class="n">setMinutes</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">getMinutes</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">result</span><span class="o">.</span><span class="n">getTimezoneOffset</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">daysBetween</span><span class="p">(</span><span class="n">startDate</span><span class="p">,</span><span class="w"> </span><span class="n">endDate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">millisecondsPerDay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">treatAsUTC</span><span class="p">(</span><span class="n">endDate</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">treatAsUTC</span><span class="p">(</span><span class="n">startDate</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">millisecondsPerDay</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">alert</span><span class="p">(</span><span class="n">daysBetween</span><span class="p">(</span><span class="o">$</span><span class="p">(</span><span class="s1">'#first'</span><span class="p">)</span><span class="o">.</span><span class="n">val</span><span class="p">(),</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'#second'</span><span class="p">)</span><span class="o">.</span><span class="n">val</span><span class="p">()));</span>
</pre></div>

<h3>Explanation</h3>
<p>JavaScript date calculations are tricky because <code>Date</code> objects store times
internally in UTC, not local time. For example, 3/10/2013 12:00 AM Pacific
Standard Time (UTC-08:00) is stored as 3/10/2013 8:00 AM UTC, and 3/11/2013
12:00 AM Pacific Daylight Time (UTC-07:00) is stored as 3/11/2013 7:00 AM UTC.
On this day, midnight to midnight local time is only 23 hours in UTC!</p>
<p>Although a day in local time can have more or less than 24 hours, a day in UTC
is always exactly 24 hours.1 The <code>daysBetween</code> method shown above takes
advantage of this fact by first calling <code>treatAsUTC</code> to adjust both local
times to midnight UTC, before subtracting and dividing.</p>
<p>1. JavaScript ignores leap seconds.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/date/" rel="tag">date</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-enable-external-request-in-iis-express/" rel="prev" title="How to enable external request in IIS Express?">Previous post</a>
            </li>
            <li class="next">
                <a href="../programmatically-find-the-number-of-cores-on-a-machine/" rel="next" title="Programmatically find the number of cores on a machine">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
