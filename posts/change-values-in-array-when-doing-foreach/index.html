<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>change values in array when doing foreach | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/change-values-in-array-when-doing-foreach/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../error-can-t-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysqld-sock-2-missing-var-run-mysqld-mysqld-sock/" title="error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)' -- Missing /var/run/mysqld/mysqld.sock" type="text/html">
<link rel="next" href="../convert-pandas-column-to-datetime/" title="Convert Pandas Column to DateTime" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="change values in array when doing foreach">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/change-values-in-array-when-doing-foreach/">
<meta property="og:description" content="example:
var arr = [&quot;one&quot;,&quot;two&quot;,&quot;three&quot;];

arr.forEach(function(part){
  part = &quot;four&quot;;
  return &quot;four&quot;;
})

alert(arr);


The array is still with it's original values, is there any way to have writin">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T11:53:59+08:00">
<meta property="article:tag" content="arrays">
<meta property="article:tag" content="foreach">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="pass-by-reference">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">change values in array when doing foreach</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:53:59+08:00" itemprop="datePublished" title="2023-03-03 11:53">2023-03-03 11:53</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"one"</span><span class="p">,</span><span class="s2">"two"</span><span class="p">,</span><span class="s2">"three"</span><span class="p">];</span>

<span class="n">arr</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">part</span><span class="p">){</span>
<span class="w">  </span><span class="n">part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="p">})</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>

<p>The array is still with it's original values, is there any way to have writing
access to array's elements from iterating function ?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The callback is passed the element, the index, and the array itself.</p>
<div class="code"><pre class="code literal-block"><span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">,</span><span class="w"> </span><span class="n">theArray</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">theArray</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"hello world"</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p><em>edit</em> — as noted in a comment, the <code>.forEach()</code> function can take a second
argument, which will be used as the value of <code>this</code> in each call to the
callback:</p>
<div class="code"><pre class="code literal-block"><span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">this</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"hello world"</span><span class="p">;</span>
<span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="n">arr</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">this</span>
</pre></div>

<p>That second example shows <code>arr</code> itself being set up as <code>this</code> in the
callback.One might think that the array involved in the <code>.forEach()</code> call
might be the <em>default</em> value of <code>this</code>, but for whatever reason it's not;
<code>this</code> will be <code>undefined</code> if that second argument is not provided.</p>
<p>(Note: the above stuff about <code>this</code> does not apply if the callback is a <code>=&gt;</code>
function, because <code>this</code> is never bound to anything when such functions are
invoked.)</p>
<p>Also it's important to remember that there is a whole family of similar
utilities provided on the Array prototype, and many questions pop up on
Stackoverflow about one function or another such that the best solution is to
simply pick a different tool. You've got:</p>
<ul>
<li>
<code>forEach</code> for doing a thing with or to every entry in an array;</li>
<li>
<code>filter</code> for producing a new array containing only qualifying entries;</li>
<li>
<code>map</code> for making a one-to-one new array by transforming an existing array;</li>
<li>
<code>some</code> to check whether at least one element in an array fits some description;</li>
<li>
<code>every</code> to check whether <em>all</em> entries in an array match a description;</li>
<li>
<code>find</code> to look for a value in an array</li>
</ul>
<p>and so on. MDN link</p>
<p><br></p>
<h3>Suggest</h3>
<p>Let's <em>try</em> to keep it simple and discuss how it is actually working. It has
to do with variable types and function parameters.</p>
<p>Here is your code we are talking about:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"one"</span><span class="p">,</span><span class="s2">"two"</span><span class="p">,</span><span class="s2">"three"</span><span class="p">];</span>

<span class="n">arr</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">part</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"four"</span><span class="p">;</span>
<span class="p">})</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>

<p>First off, here is where you should be reading about
Array.prototype.forEach():</p>
<p>https://developer.mozilla.org/en-
US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach</p>
<p>Second, let's talk briefly about value types in JavaScript.</p>
<p><strong>Primitives</strong> (undefined, null, String, Boolean, Number) store an actual
value.</p>
<p>ex: <code>var x = 5;</code></p>
<p><strong>Reference Types</strong> (custom objects) store the memory location of the object.</p>
<p>ex: <code>var xObj = { x : 5 };</code></p>
<p>And third, how function parameters work.</p>
<p>In functions, parameters are <strong>always</strong> passed by value.</p>
<p>Because <code>arr</code> is an array of Strings, it's an array of <strong>primitive</strong> objects,
which means they are stored by value.</p>
<p>So for your code above, this means that each time the forEach() iterates,
<code>part</code> is equal to the same value as <code>arr[index]</code>, <strong>but not the same
object</strong>.</p>
<p><code>part = "four";</code> will change the <code>part</code> variable, but will leave <code>arr</code> alone.</p>
<p>The following code will change the values you desire:</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">"one","two","three"</span><span class="o">]</span><span class="p">;</span>

<span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"four"</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>

<p>Now if array <code>arr</code> was an array of <strong>reference types</strong> , the following code
will work because reference types store a memory location of an object instead
of the actual object.</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">{ num : "one" }, { num : "two"}, { num : "three"}</span><span class="o">]</span><span class="p">;</span>

<span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">object</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">changing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">to</span>

<span class="w">  </span><span class="n">part</span><span class="p">.</span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"four"</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
</pre></div>

<p>The following illustrates that you can change <code>part</code> to point to a new object
while leaving the objects stored in <code>arr</code> alone:</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">{ num : "one" }, { num : "two"}, { num : "three"}</span><span class="o">]</span><span class="p">;</span>

<span class="n">arr</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">object</span>
<span class="w">  </span><span class="n">part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">arr</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="p">.</span><span class="n">num</span><span class="p">);</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/arrays/" rel="tag">arrays</a></li>
            <li><a class="tag p-category" href="../../categories/foreach/" rel="tag">foreach</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/pass-by-reference/" rel="tag">pass-by-reference</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../error-can-t-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysqld-sock-2-missing-var-run-mysqld-mysqld-sock/" rel="prev" title="error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)' -- Missing /var/run/mysqld/mysqld.sock">Previous post</a>
            </li>
            <li class="next">
                <a href="../convert-pandas-column-to-datetime/" rel="next" title="Convert Pandas Column to DateTime">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
