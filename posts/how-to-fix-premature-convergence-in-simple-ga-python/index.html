<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to fix premature convergence in simple GA (Python)? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-to-fix-premature-convergence-in-simple-ga-python/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../boosting-my-ga-with-neural-networks-and-or-reinforcement-learning/" title="Boosting my GA with Neural Networks and/or Reinforcement Learning" type="text/html">
<link rel="next" href="../classify-or-keyword-match-a-natural-language-string-or-phrase/" title="Classify or keyword match a natural language string or phrase" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How to fix premature convergence in simple GA (Python)?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-to-fix-premature-convergence-in-simple-ga-python/">
<meta property="og:description" content="Yesterday i started exploring the genetic algorithms, and when i ended up
with some basic theory, i tried to write simple GA on Python, that solves
Diophantine equation. I'm new to Python and GAs, so ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-28T03:57:56+08:00">
<meta property="article:tag" content="artificial-intelligence">
<meta property="article:tag" content="genetic-algorithm">
<meta property="article:tag" content="genetic-programming">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to fix premature convergence in simple GA (Python)?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T03:57:56+08:00" itemprop="datePublished" title="2023-02-28 03:57">2023-02-28 03:57</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><em>Yesterday i started exploring the genetic algorithms, and when i ended up
with some basic theory, i tried to write simple GA on Python, that solves
Diophantine equation. I'm new to Python and GAs, so please, don't judge my
code strictly.</em></p>
<h3>Problem</h3>
<p>I cant get any result due to premature convergence (there is some no-return
point (n-population), population[n] == population[n+i], where i is any
integer. even the random mutatuion element cant change this, the generation is
degradating very quickly)</p>
<p><strong>GA is using crossover to breed, and weighted choice of parents.</strong></p>
<ul>
<li>
<strong>Q1:</strong> Is there any design mistakes in my code (below)?</li>
<li>
<strong>Q1.2:</strong> Do i need to add elitism?</li>
<li>
<strong>Q1.3:</strong> Do i need to change breed logic?</li>
<li>
<strong>Q2:</strong> Is there realy needed deep copy?</li>
</ul>
<p>Code:</p>
<div class="code"><pre class="code literal-block"><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="k">class</span> <span class="nc">Organism</span><span class="p">:</span>
    <span class="c1">#initiate</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alleles</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">likelihood</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alleles</span> <span class="o">=</span> <span class="n">alleles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fitness</span> <span class="o">=</span> <span class="n">fitness</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">likelihood</span> <span class="o">=</span> <span class="n">likelihood</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'</span><span class="si">%s</span><span class="s1"> [</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="s1">]'</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alleles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">likelihood</span><span class="p">)</span>

<span class="k">class</span>  <span class="nc">CDiophantine</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span>  <span class="n">result</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">coefficients</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>

    <span class="n">maxPopulation</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">organisms</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">def</span> <span class="nf">GetGene</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">OrganismFitness</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">gene</span><span class="p">):</span>
        <span class="n">gene</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span><span class="p">)):</span>
            <span class="n">gene</span><span class="o">.</span><span class="n">result</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">gene</span><span class="o">.</span><span class="n">alleles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">gene</span><span class="o">.</span><span class="n">fitness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">gene</span><span class="o">.</span><span class="n">result</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gene</span><span class="o">.</span><span class="n">fitness</span>

    <span class="k">def</span> <span class="nf">Fitness</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">organism</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">:</span>
            <span class="n">organism</span><span class="o">.</span><span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">OrganismFitness</span><span class="p">(</span><span class="n">organism</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">organism</span><span class="o">.</span><span class="n">fitness</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>  <span class="n">organism</span>
        <span class="k">return</span> <span class="kc">None</span>


    <span class="k">def</span> <span class="nf">MultiplyFitness</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">coefficientSum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">organism</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">:</span>
            <span class="n">coefficientSum</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">organism</span><span class="o">.</span><span class="n">fitness</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">coefficientSum</span>

    <span class="k">def</span> <span class="nf">GenerateLikelihoods</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">last</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">multiplyFitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MultiplyFitness</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">organism</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">:</span>
            <span class="n">last</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">organism</span><span class="o">.</span><span class="n">fitness</span><span class="p">)</span><span class="o">/</span><span class="n">multiplyFitness</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
            <span class="c1">#print '1/%s/%s*100 - %s' % (organism.fitness, multiplyFitness, last)</span>
            <span class="n">organism</span><span class="o">.</span><span class="n">likelihood</span> <span class="o">=</span> <span class="n">last</span>

    <span class="k">def</span> <span class="nf">Breed</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parentOne</span><span class="p">,</span> <span class="n">parentTwo</span><span class="p">):</span>
        <span class="n">crossover</span> <span class="o">=</span> <span class="n">randint</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">child</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">parentOne</span><span class="p">)</span>
        <span class="n">initial</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">final</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parentOne</span><span class="o">.</span><span class="n">alleles</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">randint</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
            <span class="n">father</span> <span class="o">=</span> <span class="n">parentOne</span>
            <span class="n">mother</span> <span class="o">=</span> <span class="n">parentTwo</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">father</span> <span class="o">=</span> <span class="n">parentTwo</span>
            <span class="n">mother</span> <span class="o">=</span> <span class="n">parentOne</span>
        <span class="n">child</span><span class="o">.</span><span class="n">alleles</span> <span class="o">=</span> <span class="n">mother</span><span class="o">.</span><span class="n">alleles</span><span class="p">[:</span><span class="n">crossover</span><span class="p">]</span> <span class="o">+</span> <span class="n">father</span><span class="o">.</span><span class="n">alleles</span><span class="p">[</span><span class="n">crossover</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">randint</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">initial</span><span class="p">,</span><span class="n">final</span><span class="p">):</span>    
                <span class="n">child</span><span class="o">.</span><span class="n">alleles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">randint</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">child</span>

    <span class="k">def</span> <span class="nf">CreateNewOrganisms</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#generating new population</span>
        <span class="n">tempPopulation</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">:</span>
            <span class="n">iterations</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">father</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">mother</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">while</span> <span class="n">father</span><span class="o">.</span><span class="n">alleles</span> <span class="o">==</span> <span class="n">mother</span><span class="o">.</span><span class="n">alleles</span><span class="p">:</span>
                <span class="n">father</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">WeightedChoice</span><span class="p">()</span>
                <span class="n">mother</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">WeightedChoice</span><span class="p">()</span>
                <span class="n">iterations</span><span class="o">+=</span><span class="mi">1</span>
                <span class="k">if</span> <span class="n">iterations</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="n">kid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Breed</span><span class="p">(</span><span class="n">father</span><span class="p">,</span><span class="n">mother</span><span class="p">)</span>
            <span class="n">tempPopulation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span> <span class="o">=</span> <span class="n">tempPopulation</span>

    <span class="k">def</span> <span class="nf">WeightedChoice</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">organism</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">:</span>
            <span class="nb">list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">organism</span><span class="o">.</span><span class="n">likelihood</span><span class="p">,</span><span class="n">organism</span><span class="p">))</span>
        <span class="nb">list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">((</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>


    <span class="k">def</span> <span class="nf">AverageFitness</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">organism</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">:</span>
            <span class="nb">sum</span> <span class="o">+=</span> <span class="n">organism</span><span class="o">.</span><span class="n">fitness</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">AverageLikelihoods</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">organism</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">:</span>
            <span class="nb">sum</span> <span class="o">+=</span> <span class="n">organism</span><span class="o">.</span><span class="n">likelihood</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Solve</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">solution</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">maxPopulation</span><span class="p">):</span>
            <span class="n">alleles</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1">#</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span><span class="p">)):</span>
                <span class="n">alleles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">organisms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Organism</span><span class="p">(</span><span class="n">alleles</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">solution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fitness</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">solution</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">solution</span><span class="o">.</span><span class="n">alleles</span>
        <span class="n">iterations</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">solution</span> <span class="ow">and</span>  <span class="n">iterations</span> <span class="o">&lt;</span><span class="mi">3000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GenerateLikelihoods</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CreateNewOrganisms</span><span class="p">()</span>
            <span class="n">solution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fitness</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">solution</span><span class="p">:</span>
                <span class="nb">print</span> <span class="s1">'SOLUTION FOUND IN </span><span class="si">%s</span><span class="s1"> ITERATIONS'</span> <span class="o">%</span> <span class="n">iterations</span>
                <span class="k">return</span> <span class="n">solution</span><span class="o">.</span><span class="n">alleles</span>
            <span class="n">iterations</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span>  <span class="o">-</span><span class="mi">1</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">diophantine</span> <span class="o">=</span> <span class="n">CDiophantine</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="mi">30</span><span class="p">)</span>
    <span class="c1">#cProfile.run('diophantine.Solve()')</span>
    <span class="nb">print</span> <span class="n">diophantine</span><span class="o">.</span><span class="n">Solve</span><span class="p">()</span>
</pre></div>

<p>I <strong>tried</strong> to change breed and weighted random choice logic but with no
results. This GA supposed to be work, i dont know, what's wrong. I know that
there are some GA libraries on Python, i'm trying to understand them at the
moment - it seems that they are quite complex to me. Sorry for mistakes,
english is not my native language. Thank you for your understanding.</p>
<p><strong>NECROUPDATE:</strong> Store chromosomes in Gray Code, not in integer.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Slight logic error: parentTwo is slightly more likely to be the father than
the mother. Even odds would be randint (1,100) &lt;= 50, not randint (1,100) &lt;
50. Won't be what's causing the issue here.</p>
<ol>
<li>Your population size is fairly small. 40 is very few for most problems. That will cause it to converge quickly. </li>
<li>Elitism will cause your population to converge faster, not slower.</li>
<li>Your WeightedChoice function appears to be rather inefficient, if I'm reading it correctly. I haven't used Python recently enough to really understand what's going on there, but looking at it it certainly feels like something inefficient. If you can improve on that, it should speed up the processing so you can increase the population size (and, seeing as I'm figuring your algorithm there is probably at least O(n^2), that'll be <em>really</em> important).</li>
</ol>
<p>With such a small population size, 200-300 generations is not surprising to
solve the problem. If you increase the population, it should reduce the
generations required.</p>
<p>Note: I found some old code that I wrote a few years ago for solving a similar
problem. It's in C, and uses tournament selection, but perhaps it can give you
a few ideas:</p>
<div class="code"><pre class="code literal-block"><span class="cm">/*Diophantine equation solving genetic algorithm</span>
<span class="cm">Copyright (C) 2009- by Joel Rein</span>
<span class="cm">Licensed under the terms of the MIT License*/</span>
<span class="n">#include</span><span class="w"> </span><span class="o">&lt;</span><span class="n">stdio</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
<span class="n">#include</span><span class="w"> </span><span class="o">&lt;</span><span class="n">stdlib</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
<span class="n">#include</span><span class="w"> </span><span class="o">&lt;</span><span class="nc">time</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
<span class="n">#define</span><span class="w"> </span><span class="n">POP</span><span class="w"> </span><span class="mi">100</span>
<span class="o">//</span><span class="n">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">solve</span><span class="w"> </span><span class="k">for</span>
<span class="n">#define</span><span class="w"> </span><span class="nf">VAR</span><span class="w"> </span><span class="mi">4</span>
<span class="o">//</span><span class="n">maximum</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="n">variables</span>
<span class="n">#define</span><span class="w"> </span><span class="nf">MAX</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span>
<span class="n">#define</span><span class="w"> </span><span class="n">MAX_GENS</span><span class="w"> </span><span class="mi">500</span>
<span class="o">//</span><span class="n">probability</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">crossover</span><span class="w"> </span><span class="p">(</span><span class="n">otherwise</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="p">)</span>
<span class="n">#define</span><span class="w"> </span><span class="n">CROSSOVER</span><span class="w"> </span><span class="mf">0.7</span>
<span class="o">//</span><span class="n">probability</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">mutation</span><span class="w"> </span><span class="p">(</span><span class="n">per</span><span class="w"> </span><span class="n">gene</span><span class="p">)</span>
<span class="n">#define</span><span class="w"> </span><span class="n">MUTATION</span><span class="w"> </span><span class="mf">0.4</span>
<span class="o">//</span><span class="k">print</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">generation</span><span class="w"> </span><span class="p">(</span><span class="nl">recommended</span><span class="p">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">RUNS</span><span class="w"> </span><span class="n">low</span><span class="p">)</span>
<span class="n">#define</span><span class="w"> </span><span class="n">DEBUG</span>
<span class="o">//</span><span class="k">print</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">individually</span>
<span class="n">#define</span><span class="w"> </span><span class="n">PRINT_RESULT</span>
<span class="o">//</span><span class="n">how</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">GA</span>
<span class="n">#define</span><span class="w"> </span><span class="n">RUNS</span><span class="w"> </span><span class="mi">1</span>

<span class="nc">int</span><span class="w"> </span><span class="n">pop</span><span class="o">[</span><span class="n">POP</span><span class="o">][</span><span class="n">VAR</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">scores</span><span class="o">[</span><span class="n">POP</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="o">[</span><span class="n">POP</span><span class="o">][</span><span class="n">VAR</span><span class="o">]</span><span class="p">;</span>
<span class="nc">int</span><span class="w"> </span><span class="n">coefficients</span><span class="o">[</span><span class="n">VAR</span><span class="o">]</span><span class="p">;</span>
<span class="nc">int</span><span class="w"> </span><span class="k">result</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

<span class="nc">int</span><span class="w"> </span><span class="n">score</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="k">index</span><span class="p">)</span><span class="err">{</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="nf">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="nf">sum</span><span class="o">+=</span><span class="n">coefficients</span><span class="o">[</span><span class="n">i</span><span class="o">]*</span><span class="n">pop</span><span class="o">[</span><span class="n">index</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">abs</span><span class="p">(</span><span class="nf">sum</span><span class="o">-</span><span class="k">result</span><span class="p">);</span>
<span class="err">}</span>

<span class="nc">int</span><span class="w"> </span><span class="n">tournament</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="k">size</span><span class="p">)</span><span class="err">{</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="n">best</span><span class="o">=</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="n">POP</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="k">size</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">comp</span><span class="o">=</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="n">POP</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">scores</span><span class="o">[</span><span class="n">comp</span><span class="o">]&lt;</span><span class="n">scores</span><span class="o">[</span><span class="n">best</span><span class="o">]</span><span class="p">)</span>
<span class="w">            </span><span class="n">best</span><span class="o">=</span><span class="n">comp</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">best</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">void</span><span class="w"> </span><span class="n">breed</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="err">{</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="n">tournament</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="n">tournament</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="w">    </span><span class="o">//</span><span class="n">copy</span><span class="w"> </span><span class="n">a</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">new</span><span class="o">[</span><span class="n">target</span><span class="o">][</span><span class="n">i</span><span class="o">]=</span><span class="n">pop</span><span class="o">[</span><span class="n">a</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="o">//</span><span class="n">crossover</span>
<span class="w">    </span><span class="k">if</span><span class="p">((</span><span class="nc">float</span><span class="p">)</span><span class="nf">rand</span><span class="p">()</span><span class="o">/</span><span class="n">RAND_MAX</span><span class="o">&lt;</span><span class="n">CROSSOVER</span><span class="p">)</span><span class="err">{</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">x</span><span class="o">=</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="nf">VAR</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">x</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="k">new</span><span class="o">[</span><span class="n">target</span><span class="o">][</span><span class="n">i</span><span class="o">]=</span><span class="n">pop</span><span class="o">[</span><span class="n">b</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="o">//</span><span class="n">mutation</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="p">((</span><span class="nc">float</span><span class="p">)</span><span class="nf">rand</span><span class="p">()</span><span class="o">/</span><span class="n">RAND_MAX</span><span class="o">&lt;</span><span class="n">MUTATION</span><span class="p">)</span>
<span class="w">            </span><span class="k">new</span><span class="o">[</span><span class="n">target</span><span class="o">][</span><span class="n">i</span><span class="o">]=</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="p">(</span><span class="k">result</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="k">result</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">void</span><span class="w"> </span><span class="n">debug</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">gen</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">best</span><span class="p">)</span><span class="err">{</span>
<span class="n">#ifdef</span><span class="w"> </span><span class="n">DEBUG</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="ss">"Gen: %3i Score: %3i --- "</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="p">,</span><span class="w"> </span><span class="n">scores</span><span class="o">[</span><span class="n">best</span><span class="o">]</span><span class="p">);</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="nf">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">        </span><span class="nf">sum</span><span class="o">+=</span><span class="n">coefficients</span><span class="o">[</span><span class="n">i</span><span class="o">]*</span><span class="n">pop</span><span class="o">[</span><span class="n">best</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="ss">"%3i*%3i+"</span><span class="p">,</span><span class="w"> </span><span class="n">coefficients</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">pop</span><span class="o">[</span><span class="n">best</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="ss">"0= %3i (target: %i)\n"</span><span class="p">,</span><span class="w"> </span><span class="nf">sum</span><span class="p">,</span><span class="w"> </span><span class="k">result</span><span class="p">);</span>
<span class="n">#endif</span>
<span class="err">}</span>

<span class="nc">int</span><span class="w"> </span><span class="n">ga</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">run</span><span class="p">)</span><span class="err">{</span>
<span class="w">    </span><span class="n">srand</span><span class="p">(</span><span class="nc">time</span><span class="p">(</span><span class="k">NULL</span><span class="p">)</span><span class="o">+</span><span class="n">run</span><span class="p">);</span>
<span class="w">    </span><span class="o">//</span><span class="n">calculate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">equation</span><span class="p">.</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="n">this</span><span class="w"> </span><span class="n">mustn</span><span class="err">'</span><span class="n">t</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">division</span><span class="o">-</span><span class="k">by</span><span class="o">-</span><span class="n">zero</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">initialising</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">mutating</span><span class="p">.</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="err">!</span><span class="k">result</span><span class="p">)</span>
<span class="w">        </span><span class="k">result</span><span class="o">=</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="nf">MAX</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">coefficients</span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="k">result</span><span class="p">;</span>
<span class="w">    </span><span class="o">//</span><span class="n">initialise</span><span class="w"> </span><span class="n">population</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">POP</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="n">pop</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]=</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="p">(</span><span class="k">result</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="k">result</span><span class="p">;</span>
<span class="w">    </span><span class="o">//</span><span class="n">main</span><span class="w"> </span><span class="n">loop</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="n">gen</span><span class="p">,</span><span class="w"> </span><span class="n">best</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">gen</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">gen</span><span class="o">&lt;</span><span class="n">MAX_GENS</span><span class="p">;</span><span class="n">gen</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">        </span><span class="n">best</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="o">//</span><span class="n">evaluate</span><span class="w"> </span><span class="n">population</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">POP</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">            </span><span class="n">scores</span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="n">score</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">scores</span><span class="o">[</span><span class="n">i</span><span class="o">]&lt;</span><span class="n">scores</span><span class="o">[</span><span class="n">best</span><span class="o">]</span><span class="p">)</span>
<span class="w">                </span><span class="n">best</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="n">debug</span><span class="p">(</span><span class="n">gen</span><span class="p">,</span><span class="w"> </span><span class="n">best</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">scores</span><span class="o">[</span><span class="n">best</span><span class="o">]==</span><span class="mi">0</span><span class="p">)</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="o">//</span><span class="n">breed</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nf">replace</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">POP</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="n">breed</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">POP</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="nf">VAR</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">                </span><span class="n">pop</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]=</span><span class="k">new</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="n">#ifdef</span><span class="w"> </span><span class="n">PRINT_RESULT</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="ss">"Terminated after %4i generations with a score of %3i\n"</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="p">,</span><span class="w"> </span><span class="n">scores</span><span class="o">[</span><span class="n">best</span><span class="o">]</span><span class="p">);</span><span class="w"> </span>
<span class="n">#else</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="ss">"."</span><span class="p">);</span>
<span class="n">#endif</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">gen</span><span class="p">;</span>
<span class="err">}</span>

<span class="nc">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="err">{</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="n">total</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">RUNS</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">total</span><span class="o">+=</span><span class="n">ga</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="ss">"\nAverage runtime: %i generations\n"</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="o">/</span><span class="n">RUNS</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/artificial-intelligence/" rel="tag">artificial-intelligence</a></li>
            <li><a class="tag p-category" href="../../categories/genetic-algorithm/" rel="tag">genetic-algorithm</a></li>
            <li><a class="tag p-category" href="../../categories/genetic-programming/" rel="tag">genetic-programming</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../boosting-my-ga-with-neural-networks-and-or-reinforcement-learning/" rel="prev" title="Boosting my GA with Neural Networks and/or Reinforcement Learning">Previous post</a>
            </li>
            <li class="next">
                <a href="../classify-or-keyword-match-a-natural-language-string-or-phrase/" rel="next" title="Classify or keyword match a natural language string or phrase">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
