<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>如何将字符串解析为浮点数或整数？ | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/ru-he-jiang-zi-fu-chuan-jie-xi-wei-fu-dian-shu-huo-zheng-shu/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../ru-he-xiu-fu-android-os-networkonmainthreadexception/" title="如何修复“android.os.NetworkOnMainThreadException”？" type="text/html">
<link rel="next" href="../ru-he-huo-qu-lie-biao-de-zui-hou-yi-ge-yuan-su/" title="如何获取列表的最后一个元素？" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="如何将字符串解析为浮点数或整数？">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/ru-he-jiang-zi-fu-chuan-jie-xi-wei-fu-dian-shu-huo-zheng-shu/">
<meta property="og:description" content='如何将 a 转换str为float？
"545.2222"  →  545.2222




如何将 a 转换str为int？
"31"        →  31





相反，请参阅在 Python 中将整数转换为字符串和将浮点数转换为字符串而不对其进行舍入。
请改为使用How can I read inputs as numbers? 关闭重复的问题，其中 OP 从用户输入中
收到一个字符串'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-16T20:51:52+08:00">
<meta property="article:tag" content="floating-point">
<meta property="article:tag" content="integer">
<meta property="article:tag" content="parsing">
<meta property="article:tag" content="python">
<meta property="article:tag" content="type-conversion">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">如何将字符串解析为浮点数或整数？</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T20:51:52+08:00" itemprop="datePublished" title="2023-02-16 20:51">2023-02-16 20:51</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <ul>
<li>
<p>如何将 a 转换<code>str</code>为<code>float</code>？</p>
<div class="code"><pre class="code literal-block">"545.2222"  →  545.2222
</pre></div>

</li>
<li>
<p>如何将 a 转换<code>str</code>为<code>int</code>？</p>
<div class="code"><pre class="code literal-block">"31"        →  31
</pre></div>

</li>
</ul>
<hr>
<p>相反，请参阅在 Python 中将整数转换为字符串和将浮点数转换为字符串而不对其进行舍入。</p>
<p>请改为使用How can I read inputs as numbers? 关闭重复的问题，其中 OP <em>从用户输入中</em>
收到一个字符串并立即想要转换它，或者希望<code>input</code>（在 3.x 中）自动转换类型。</p>
<p><br><br></p>
<h2>解答</h2>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; a = "545.2222"
&gt;&gt;&gt; float(a)
545.22220000000004
&gt;&gt;&gt; int(float(a))
545
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<h3>Python2 检查字符串是否为浮点数的方法：</h3>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">is_float</span><span class="ss">(</span><span class="nv">value</span><span class="ss">)</span>:
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span>:
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nv">False</span>
<span class="w">  </span><span class="nv">try</span>:
<span class="w">      </span><span class="nv">float</span><span class="ss">(</span><span class="nv">value</span><span class="ss">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nv">True</span>
<span class="w">  </span><span class="nv">except</span>:
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nv">False</span>
</pre></div>

<p>对于 is_float 的 Python3 版本，请参见：Checking if a string can be converted to float in
Python</p>
<p>这个函数的更长更准确的名称可以是：<code>is_convertible_to_float(value)</code></p>
<h3>什么是Python中的浮点数，什么不是浮点数可能会让您大吃一惊：</h3>
<p>下面的单元测试是使用 python2 完成的。检查 Python3
对于哪些字符串可转换为浮点数有不同的行为。一个令人困惑的区别是现在允许使用任意数量的内部下划线：<code>(float("1_3.4") ==
float(13.4))</code>is True</p>
<div class="code"><pre class="code literal-block">val                   is_float(val) Note
--------------------  ----------   --------------------------------
""                    False        Blank string
"127"                 True         Passed string
True                  True         Pure sweet Truth
"True"                False        Vile contemptible lie
False                 True         So false it becomes true
"123.456"             True         Decimal
"      -127    "      True         Spaces trimmed
"\t\n12\r\n"          True         whitespace ignored
"NaN"                 True         Not a number
"NaNanananaBATMAN"    False        I am Batman
"-iNF"                True         Negative infinity
"123.E4"              True         Exponential notation
".1"                  True         mantissa only
"1_2_3.4"             False        Underscores not allowed
"12 34"               False        Spaces not allowed on interior
"1,234"               False        Commas gtfo
u'\x30'               True         Unicode is fine.
"NULL"                False        Null is not special
0x3fade               True         Hexadecimal
"6e7777777777777"     True         Shrunk to infinity
"1.797693e+308"       True         This is max value
"infinity"            True         Same as inf
"infinityandBEYOND"   False        Extra characters wreck it
"12.34.56"            False        Only one dot allowed
u'四'                 False        Japanese '4' is not a float.
"#56"                 False        Pound sign
"56%"                 False        Percent of what?
"0E0"                 True         Exponential, move dot 0 places
0**0                  True         0___0  Exponentiation
"-5e-5"               True         Raise to a negative number
"+1e1"                True         Plus is OK with exponent
"+1e1^5"              False        Fancy exponent not interpreted
"+1e1.3"              False        No decimals in exponent
"-+1"                 False        Make up your mind
"(1)"                 False        Parenthesis is bad
</pre></div>

<p>你认为你知道什么是数字？你没有你想的那么好！没什么大惊喜。</p>
<h3>不要在生命攸关的软件上使用此代码！</h3>
<p>以这种方式捕获广泛的异常，杀死金丝雀并吞噬异常会产生一个很小的机会，即一个有效的 float 作为字符串将返回
false。这<code>float(...)</code>行代码可能由于与字符串内容无关的一千种原因中的任何一种而失败。但是，如果您正在使用像 Python
这样的鸭子类型原型语言编写对生命至关重要的软件，那么您就会遇到更大的问题。</p>
<p><br><br><a href="../how-do-i-parse-a-string-to-a-float-or-int/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/floating-point/" rel="tag">floating-point</a></li>
            <li><a class="tag p-category" href="../../categories/integer/" rel="tag">integer</a></li>
            <li><a class="tag p-category" href="../../categories/parsing/" rel="tag">parsing</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
            <li><a class="tag p-category" href="../../categories/type-conversion/" rel="tag">type-conversion</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../ru-he-xiu-fu-android-os-networkonmainthreadexception/" rel="prev" title="如何修复“android.os.NetworkOnMainThreadException”？">Previous post</a>
            </li>
            <li class="next">
                <a href="../ru-he-huo-qu-lie-biao-de-zui-hou-yi-ge-yuan-su/" rel="next" title="如何获取列表的最后一个元素？">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
