<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How do I pass variables and data from PHP to JavaScript? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-do-i-pass-variables-and-data-from-php-to-javascript/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../remove-object-from-array-using-javascript/" title="Remove Object from Array using JavaScript" type="text/html">
<link rel="next" href="../python-and-pip-list-all-versions-of-a-package-that-s-available/" title="Python and pip, list all versions of a package that's available?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How do I pass variables and data from PHP to JavaScript?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-do-i-pass-variables-and-data-from-php-to-javascript/">
<meta property="og:description" content="Want to improve this post? Provide detailed answers to this question,
including citations and an explanation of why your answer is correct. Answers
without enough detail may be edited or deleted.
I ha">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T14:45:45+08:00">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="php">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How do I pass variables and data from PHP to JavaScript?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:45:45+08:00" itemprop="datePublished" title="2023-02-17 14:45">2023-02-17 14:45</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p><strong>Want to improve this post?</strong> Provide detailed answers to this question,
including citations and an explanation of why your answer is correct. Answers
without enough detail may be edited or deleted.</p>
<p>I have a variable in PHP, and I need its value in my JavaScript code. How can
I get my variable from PHP to JavaScript?</p>
<p>I have code that looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?php</span>
<span class="nv">$val</span> <span class="o">=</span> <span class="nv">$myService</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">();</span> <span class="c1">// Makes an API and database call</span>
</pre></div>

<p>On the same page, I have JavaScript code that needs the value of the <code>$val</code>
variable to be passed as a parameter:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script&gt;</span>
<span class="w">    </span>myPlugin.start($val);<span class="w"> </span>//<span class="w"> </span>I<span class="w"> </span>tried<span class="w"> </span>this,<span class="w"> </span>but<span class="w"> </span>it<span class="w"> </span>didn't<span class="w"> </span>work
<span class="w">    </span><span class="cp">&lt;?php</span> <span class="nx">myPlugin</span><span class="o">.</span><span class="nx">start</span><span class="p">(</span><span class="nv">$val</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="w"> </span>//<span class="w"> </span>This<span class="w"> </span>didn't<span class="w"> </span>work<span class="w"> </span>either
<span class="w">    </span>myPlugin.start(<span class="cp">&lt;?</span><span class="o">=</span><span class="nv">$val</span><span class="cp">?&gt;</span>);<span class="w"> </span>//<span class="w"> </span>This<span class="w"> </span>works<span class="w"> </span>sometimes,<span class="w"> </span>but<span class="w"> </span>sometimes<span class="w"> </span>it<span class="w"> </span>fails
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>There are actually several approaches to do this. Some require more overhead
than others, and some are considered better than others.</p>
<p>In no particular order:</p>
<ol>
<li>Use AJAX to get the data you need from the server.</li>
<li>Echo the data into the page somewhere, and use JavaScript to get the information from the DOM.</li>
<li>Echo the data directly to JavaScript.</li>
</ol>
<p>In this post, we'll examine each of the above methods, and see the pros and
cons of each, as well as how to implement them.</p>
<h2>1. Use AJAX to get the data you need from the server</h2>
<p>This method is considered the best, because <strong>your server side and client side
scripts are completely separate</strong>.</p>
<h4>Pros</h4>
<ul>
<li>
<strong>Better separation between layers</strong> - If tomorrow you stop using PHP, and want to move to a servlet, a REST API, or some other service, you don't have to change much of the JavaScript code.</li>
<li>
<strong>More readable</strong> - JavaScript is JavaScript, PHP is PHP. Without mixing the two, you get more readable code on both languages.</li>
<li>
<strong>Allows for asynchronous data transfer</strong> - Getting the information from PHP might be time/resources expensive. Sometimes you just don't want to wait for the information, load the page, and have the information reach whenever.</li>
<li>
<strong>Data is not directly found on the markup</strong> - This means that your markup is kept clean of any additional data, and only JavaScript sees it.</li>
</ul>
<h4>Cons</h4>
<ul>
<li>
<strong>Latency</strong> - AJAX creates an HTTP request, and HTTP requests are carried over network and have network latencies.</li>
<li>
<strong>State</strong> - Data fetched via a separate HTTP request won't include any information from the HTTP request that fetched the HTML document. You may need this information (e.g., if the HTML document is generated in response to a form submission) and, if you do, will have to transfer it across somehow. If you have ruled out embedding the data in the page (which you have if you are using this technique) then that limits you to cookies/sessions which may be subject to race conditions.</li>
</ul>
<h3>Implementation Example</h3>
<p>With AJAX, you need two pages, one is where PHP generates the output, and the
second is where JavaScript gets that output:</p>
<h4>get-data.php</h4>
<div class="code"><pre class="code literal-block"><span class="cm">/* Do some operation here, like talk to the database, the file-session</span>
<span class="cm"> * The world beyond, limbo, the city of shimmers, and Canada.</span>
<span class="cm"> *</span>
<span class="cm"> * AJAX generally uses strings, but you can output JSON, HTML and XML as well.</span>
<span class="cm"> * It all depends on the Content-type header that you send with your AJAX</span>
<span class="cm"> * request. */</span>

<span class="n">echo</span><span class="w"> </span><span class="n">json_encode</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">In</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">end</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n n-Quoted">`echo`</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="p">.</span>
<span class="w">                      </span><span class="o">//</span><span class="w"> </span><span class="k">All</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n n-Quoted">`json_encode`</span><span class="o">-</span><span class="n">d</span><span class="p">.</span>

<span class="w">                      </span><span class="o">//</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n n-Quoted">`json_encode`</span><span class="w"> </span><span class="k">any</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">PHP</span><span class="p">,</span><span class="w"> </span><span class="n">arrays</span><span class="p">,</span><span class="w"> </span><span class="n">strings</span><span class="p">,</span>
<span class="w">                      </span><span class="o">//</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">objects</span><span class="p">.</span>
</pre></div>

<h4>index.php (or whatever the actual page is named like)</h4>
<div class="code"><pre class="code literal-block"><span class="cm">&lt;!-- snip --&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="w">    </span>fetch("get-data.php")
<span class="w">        </span>.then((response)<span class="w"> </span>=&gt;<span class="w"> </span>{
<span class="w">            </span>if(!response.ok){<span class="w"> </span>//<span class="w"> </span>Before<span class="w"> </span>parsing<span class="w"> </span>(i.e.<span class="w"> </span>decoding)<span class="w"> </span>the<span class="w"> </span>JSON<span class="w"> </span>data,
<span class="w">                              </span>//<span class="w"> </span>check<span class="w"> </span>for<span class="w"> </span>any<span class="w"> </span>errors.
<span class="w">                </span>//<span class="w"> </span>In<span class="w"> </span>case<span class="w"> </span>of<span class="w"> </span>an<span class="w"> </span>error,<span class="w"> </span>throw.
<span class="w">                </span>throw<span class="w"> </span>new<span class="w"> </span>Error("Something<span class="w"> </span>went<span class="w"> </span>wrong!");
<span class="w">            </span>}

<span class="w">            </span>return<span class="w"> </span>response.json();<span class="w"> </span>//<span class="w"> </span>Parse<span class="w"> </span>the<span class="w"> </span>JSON<span class="w"> </span>data.
<span class="w">        </span>})
<span class="w">        </span>.then((data)<span class="w"> </span>=&gt;<span class="w"> </span>{
<span class="w">             </span>//<span class="w"> </span>This<span class="w"> </span>is<span class="w"> </span>where<span class="w"> </span>you<span class="w"> </span>handle<span class="w"> </span>what<span class="w"> </span>to<span class="w"> </span>do<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>response.
<span class="w">             </span>alert(data);<span class="w"> </span>//<span class="w"> </span>Will<span class="w"> </span>alert:<span class="w"> </span>42
<span class="w">        </span>})
<span class="w">        </span>.catch((error)<span class="w"> </span>=&gt;<span class="w"> </span>{
<span class="w">             </span>//<span class="w"> </span>This<span class="w"> </span>is<span class="w"> </span>where<span class="w"> </span>you<span class="w"> </span>handle<span class="w"> </span>errors.
<span class="w">        </span>});
<span class="nt">&lt;/script&gt;</span>
<span class="cm">&lt;!-- snip --&gt;</span>
</pre></div>

<p>The above combination of the two files will alert <code>42</code> when the file finishes
loading.</p>
<h3>Some more reading material</h3>
<ul>
<li><strong>Using the Fetch API</strong></li>
<li><strong>How do I return the response from an asynchronous call?</strong></li>
</ul>
<h2>2. Echo the data into the page somewhere, and use JavaScript to get the</h2>
<p>information from the DOM</p>
<p>This method is less preferable to AJAX, but it still has its advantages. It's
still <em>relatively</em> separated between PHP and JavaScript in a sense that there
is no PHP directly in the JavaScript.</p>
<h4>Pros</h4>
<ul>
<li>
<strong>Fast</strong> - DOM operations are often quick, and you can store and access a lot of data relatively quickly.</li>
</ul>
<h4>Cons</h4>
<ul>
<li>
<strong>Potentially Unsemantic Markup</strong> - Usually, what happens is that you use some sort of <code>&lt;input type=hidden&gt;</code> to store the information, because it's easier to get the information out of <code>inputNode.value</code>, but doing so means that you have a meaningless element in your HTML. HTML has the <code>&lt;meta&gt;</code> element for data about the document, and HTML 5 introduces <code>data-*</code> attributes for data specifically for reading with JavaScript that can be associated with particular elements.</li>
<li>
<strong>Dirties up the Source</strong> - Data that PHP generates is outputted directly to the HTML source, meaning that you get a bigger and less focused HTML source.</li>
<li>
<strong>Harder to get structured data</strong> - Structured data will have to be valid HTML, otherwise you'll have to escape and convert strings yourself.</li>
<li>
<strong>Tightly couples PHP to your data logic</strong> - Because PHP is used in presentation, you can't separate the two cleanly.</li>
</ul>
<h3>Implementation Example</h3>
<p>With this, the idea is to create some sort of element which will not be
displayed to the user, but is visible to JavaScript.</p>
<h4>index.php</h4>
<div class="code"><pre class="code literal-block"><span class="cm">&lt;!-- snip --&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"dom-target"</span><span class="w"> </span><span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cp">&lt;?php</span>
        <span class="nv">$output</span> <span class="o">=</span> <span class="s2">"42"</span><span class="p">;</span> <span class="c1">// Again, do some operation, get the output.</span>
        <span class="k">echo</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$output</span><span class="p">);</span> <span class="cm">/* You have to escape because the result</span>
<span class="cm">                                           will not be valid HTML otherwise. */</span>
    <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="w">    </span>var<span class="w"> </span>div<span class="w"> </span>=<span class="w"> </span>document.getElementById("dom-target");
<span class="w">    </span>var<span class="w"> </span>myData<span class="w"> </span>=<span class="w"> </span>div.textContent;
<span class="nt">&lt;/script&gt;</span>
<span class="cm">&lt;!-- snip --&gt;</span>
</pre></div>

<h2>3. Echo the data directly to JavaScript</h2>
<p>This is probably the easiest to understand.</p>
<h4>Pros</h4>
<ul>
<li>
<strong>Very easily implemented</strong> - It takes very little to implement this, and understand.</li>
<li>
<strong>Does not dirty source</strong> - Variables are outputted directly to JavaScript, so the DOM is not affected.</li>
</ul>
<h4>Cons</h4>
<ul>
<li>
<strong>Tightly couples PHP to your data logic</strong> - Because PHP is used in presentation, you can't separate the two cleanly.</li>
</ul>
<h3>Implementation Example</h3>
<p>Implementation is relatively straightforward:</p>
<div class="code"><pre class="code literal-block"><span class="cm">&lt;!-- snip --&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="w">    </span>var<span class="w"> </span>data<span class="w"> </span>=<span class="w"> </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="s2">"42"</span><span class="p">,</span> <span class="nx">JSON_HEX_TAG</span><span class="p">);</span> <span class="cp">?&gt;</span>;<span class="w"> </span>//<span class="w"> </span>Don't<span class="w"> </span>forget<span class="w"> </span>the<span class="w"> </span>extra<span class="w"> </span>semicolon!
<span class="nt">&lt;/script&gt;</span>
<span class="cm">&lt;!-- snip --&gt;</span>
</pre></div>

<p>Good luck!</p>
<p><br></p>
<h3>Suggest</h3>
<p>I usually use data-* attributes in HTML.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span>
<span class="w">    </span><span class="na">class=</span><span class="s">"service-container"</span>
<span class="w">    </span><span class="na">data-service=</span><span class="s">"</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$myService</span><span class="o">-&gt;</span><span class="na">getValue</span><span class="p">())</span> <span class="cp">?&gt;</span><span class="s">"</span>
<span class="nt">&gt;</span>

<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="w">    </span>$(document).ready(function()<span class="w"> </span>{
<span class="w">        </span>$('.service-container').each(function()<span class="w"> </span>{
<span class="w">            </span>var<span class="w"> </span>container<span class="w"> </span>=<span class="w"> </span>$(this);
<span class="w">            </span>var<span class="w"> </span>service<span class="w"> </span>=<span class="w"> </span>container.data('service');

<span class="w">            </span>//<span class="w"> </span>Var<span class="w"> </span>"service"<span class="w"> </span>now<span class="w"> </span>contains<span class="w"> </span>the<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span>$myService-&gt;getValue();
<span class="w">        </span>});
<span class="w">    </span>});
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>This example uses jQuery, but it can be adapted for another library or vanilla
JavaScript.</p>
<p>You can read more about the dataset property here:
https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.dataset</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/php/" rel="tag">php</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../remove-object-from-array-using-javascript/" rel="prev" title="Remove Object from Array using JavaScript">Previous post</a>
            </li>
            <li class="next">
                <a href="../python-and-pip-list-all-versions-of-a-package-that-s-available/" rel="next" title="Python and pip, list all versions of a package that's available?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
