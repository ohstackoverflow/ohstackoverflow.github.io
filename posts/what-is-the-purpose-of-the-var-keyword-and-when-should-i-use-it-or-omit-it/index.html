<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What is the purpose of the var keyword and when should I use it (or omit it)? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-is-the-purpose-of-the-var-keyword-and-when-should-i-use-it-or-omit-it/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../what-is-the-best-algorithm-for-overriding-gethashcode/" title="What is the best algorithm for overriding GetHashCode?" type="text/html">
<link rel="next" href="../what-is-the-difference-between-varchar-and-nvarchar/" title="What is the difference between varchar and nvarchar?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What is the purpose of the var keyword and when should I use it (or om">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-is-the-purpose-of-the-var-keyword-and-when-should-i-use-it-or-omit-it/">
<meta property="og:description" content="NOTE : This question was asked from the viewpoint of ECMAScript
version 3 or 5. The answers might become outdated with the introduction of
new features in the release of ECMAScript 6.

What exactly is">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T00:58:50+08:00">
<meta property="article:tag" content="ecmascript-5">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="keyword">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What is the purpose of the var keyword and when should I use it (or omit it)?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:58:50+08:00" itemprop="datePublished" title="2023-02-17 00:58">2023-02-17 00:58</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <blockquote>
<p><strong><em>NOTE</em></strong> <em>: This question was asked from the viewpoint of ECMAScript
version 3 or 5. The answers might become outdated with the introduction of
new features in the release of ECMAScript 6.</em></p>
</blockquote>
<p>What exactly is the function of the <code>var</code> keyword in JavaScript, and what is
the difference between</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">someNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">someFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">doSomething</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="k">var</span><span class="w"> </span><span class="n">someObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="k">var</span><span class="w"> </span><span class="n">someObject</span><span class="o">.</span><span class="n">someProperty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
</pre></div>

<p>and</p>
<div class="code"><pre class="code literal-block">someNumber = 2;
someFunction = function() { doSomething; }
someObject = { }
someObject.someProperty = 5;
</pre></div>

<p>?</p>
<p>When would you use either one, and why/what does it do?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you're in the global scope then there's not much difference. Read Kangax's
answer for explanation</p>
<p>If you're in a function then <strong><code>var</code></strong> will create a local variable, "no var"
will look up the scope chain until it finds the variable or hits the global
scope (at which point it will create it):</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">These</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">globals</span>
<span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="n">function</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Local</span>
<span class="w">    </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Global</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Execute</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">anonymous</span><span class="w"> </span><span class="n">function</span>
<span class="w">    </span><span class="p">(</span><span class="n">function</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">wibble</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Local</span>
<span class="w">        </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Inherits</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">above</span><span class="w"> </span><span class="p">(</span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">closure</span><span class="p">)</span>
<span class="w">        </span><span class="n">moo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Global</span>
<span class="w">    </span><span class="p">}())</span>
<span class="p">}</span>
</pre></div>

<p>If you're not doing an assignment then you need to use <code>var</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Declare</span><span class="w"> </span><span class="n">x</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>There's a difference</strong>.</p>
<p><code>var x = 1</code> <strong>declares variable</strong> <code>x</code> in current scope (aka execution
context). If the declaration appears in a function - a local variable is
declared; if it's in global scope - a global variable is declared.</p>
<p><code>x = 1</code>, on the other hand, is merely a property assignment. It first tries to
resolve <code>x</code> against scope chain. If it finds it anywhere in that scope chain,
it performs assignment; if it doesn't find <code>x</code>, only then does <strong>it creates<code>x</code>
property on a global object</strong> (which is a top level object in a scope chain).</p>
<p>Now, notice that it doesn't declare a global variable, it creates a global
property.</p>
<p>The difference between the two is subtle and might be confusing unless you
understand that <strong>variable declarations also create properties</strong> (only on a
Variable Object) and that every property in Javascript (well, ECMAScript) have
certain flags that describe their properties - ReadOnly, DontEnum and
DontDelete.</p>
<p>Since variable declaration creates property with the DontDelete flag, the
difference between <code>var x = 1</code> and <code>x = 1</code> (when executed in global scope) is
that the former one - variable declaration - creates the DontDelete'able
property, and latter one doesn't. As a consequence, the property created via
this implicit assignment can then be deleted from the global object, and the
former one - the one created via variable declaration - cannot be deleted.</p>
<p>But this is just theory of course, and <strong>in practice there are even more
differences between the two</strong> , due to various bugs in implementations (such
as those from IE).</p>
<p>Hope it all makes sense : )</p>
<hr>
<p><strong>[Update 2010/12/16]</strong></p>
<p>In ES5 (ECMAScript 5; recently standardized, 5th edition of the language)
there's a so-called "strict mode" — an opt-in language mode, which slightly
changes the behavior of undeclared assignments. In strict mode, assignment to
an undeclared identifier is a <strong>ReferenceError</strong>. The rationale for this was
to catch accidental assignments, preventing creation of undesired global
properties. Some of the newer browsers have already started rolling support
for strict mode. See, for example, my compat table.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/ecmascript-5/" rel="tag">ecmascript-5</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/keyword/" rel="tag">keyword</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../what-is-the-best-algorithm-for-overriding-gethashcode/" rel="prev" title="What is the best algorithm for overriding GetHashCode?">Previous post</a>
            </li>
            <li class="next">
                <a href="../what-is-the-difference-between-varchar-and-nvarchar/" rel="next" title="What is the difference between varchar and nvarchar?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
