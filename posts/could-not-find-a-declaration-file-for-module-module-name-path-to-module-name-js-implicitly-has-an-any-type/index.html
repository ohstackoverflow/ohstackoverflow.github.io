<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Could not find a declaration file for module 'module-name'. '/path/to/module-name.js' implicitly has an 'any' type | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/could-not-find-a-declaration-file-for-module-module-name-path-to-module-name-js-implicitly-has-an-any-type/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../what-is-the-simplest-and-most-robust-way-to-get-the-user-s-current-location-on-android/" title="What is the simplest and most robust way to get the user's current location on Android?" type="text/html">
<link rel="next" href="../why-is-python-setup-py-saying-invalid-command-bdist-wheel-on-travis-ci/" title="Why is python setup.py saying invalid command 'bdist_wheel' on Travis CI?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Could not find a declaration file for module 'module-name'. '/path/to/">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/could-not-find-a-declaration-file-for-module-module-name-path-to-module-name-js-implicitly-has-an-any-type/">
<meta property="og:description" content="I read how TypeScript module resolution works.
I have the following repository: @ts-stack/di. After compiling the directory
structure is as follows:
├── dist
│   ├── annotations.d.ts
│   ├── annotatio">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T11:21:59+08:00">
<meta property="article:tag" content="node-modules">
<meta property="article:tag" content="typescript">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Could not find a declaration file for module 'module-name'. '/path/to/module-name.js' implicitly has an 'any' type</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:21:59+08:00" itemprop="datePublished" title="2023-02-17 11:21">2023-02-17 11:21</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I read how TypeScript module resolution works.</p>
<p>I have the following repository: @ts-stack/di. After compiling the directory
structure is as follows:</p>
<div class="code"><pre class="code literal-block">├── dist
│   ├── annotations.d.ts
│   ├── annotations.js
│   ├── index.d.ts
│   ├── index.js
│   ├── injector.d.ts
│   ├── injector.js
│   ├── profiler.d.ts
│   ├── profiler.js
│   ├── providers.d.ts
│   ├── providers.js
│   ├── util.d.ts
│   └── util.js
├── LICENSE
├── package.json
├── README.md
├── src
│   ├── annotations.ts
│   ├── index.ts
│   ├── injector.ts
│   ├── profiler.ts
│   ├── providers.ts
│   └── util.ts
└── tsconfig.json
</pre></div>

<p>In my package.json I wrote <code>"main": "dist/index.js"</code>.</p>
<p>In Node.js everything works fine, but TypeScript:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span><span class="n">Injector</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">'@ts-stack/di'</span><span class="p">;</span>
</pre></div>

<blockquote>
<p>Could not find a declaration file for module '@ts-stack/di'.
'/path/to/node_modules/@ts-stack/di/dist/index.js' implicitly has an 'any'
type.</p>
</blockquote>
<p>And yet, if I import as follows, then everything works:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span><span class="n">Injector</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">'/path/to/node_modules/@ts-stack/di/dist/index.js'</span><span class="p">;</span>
</pre></div>

<p>What am I doing wrong?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>For the situation where you are installing your own npm package</h4>
<p>If you're using a third party package, see my answer below.</p>
<p>Remove <code>.js</code> from <code>"main": "dist/index.js"</code> in <code>package.json</code>.</p>
<div class="code"><pre class="code literal-block">"main": "dist/index",
</pre></div>

<p>Also add <code>typings</code> in <code>package.json</code> per the TypeScript docs:</p>
<div class="code"><pre class="code literal-block">"main": "dist/index",
"typings": "dist/index",
</pre></div>

<p>The folder <code>dist</code> is where the TS compiler stores your module's files.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you're importing a third-party module <code>'foo'</code> that doesn't provide any
typings, either in the library itself, or in the <code>@types/foo</code> package
(generated from the DefinitelyTyped repository), then you can make this error
go away by declaring the module in a file with a <code>.d.ts</code> extension. TypeScript
looks for <code>.d.ts</code> files in the same places that it will look for normal <code>.ts</code>
files: as specified under "files", "include", and "exclude" in the
<code>tsconfig.json</code>.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// foo.d.ts</span>
<span class="n">declare</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="s">'foo'</span><span class="p">;</span>
</pre></div>

<p>Then when you import <code>foo</code> it'll just be typed as <code>any</code>.</p>
<hr>
<p>Alternatively, if you want to roll your own typings you can do that too:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">foo</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">ts</span>
<span class="n">declare</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="s1">'foo'</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">getRandomNumber</span><span class="p">():</span><span class="w"> </span><span class="n">number</span>
<span class="p">}</span>
</pre></div>

<p>Then this will compile correctly:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">getRandomNumber</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'foo'</span><span class="p">;</span>
<span class="n">const</span> <span class="n">x</span> <span class="o">=</span> <span class="n">getRandomNumber</span><span class="p">();</span> <span class="o">//</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">inferred</span> <span class="k">as</span> <span class="n">number</span>
</pre></div>

<p>You don't have to provide full typings for the module, just enough for the
bits that you're actually using (and want proper typings for), so it's
particularly easy to do if you're using a fairly small amount of API.</p>
<hr>
<p>On the other hand, if you don't care about the typings of external libraries
and want all libraries without typings to be imported as <code>any</code>, you can add
this to a file with a <code>.d.ts</code> extension:</p>
<div class="code"><pre class="code literal-block">declare module '*';
</pre></div>

<p>The benefit (and downside) of this is that you can import absolutely anything
and TS will compile.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/node-modules/" rel="tag">node-modules</a></li>
            <li><a class="tag p-category" href="../../categories/typescript/" rel="tag">typescript</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../what-is-the-simplest-and-most-robust-way-to-get-the-user-s-current-location-on-android/" rel="prev" title="What is the simplest and most robust way to get the user's current location on Android?">Previous post</a>
            </li>
            <li class="next">
                <a href="../why-is-python-setup-py-saying-invalid-command-bdist-wheel-on-travis-ci/" rel="next" title="Why is python setup.py saying invalid command 'bdist_wheel' on Travis CI?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
