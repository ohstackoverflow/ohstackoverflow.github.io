<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Why does an image captured using camera intent gets rotated on some devices on Android? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/why-does-an-image-captured-using-camera-intent-gets-rotated-on-some-devices-on-android/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../adding-a-legend-to-pyplot-in-matplotlib-in-the-simplest-manner-possible/" title="Adding a legend to PyPlot in Matplotlib in the simplest manner possible" type="text/html">
<link rel="next" href="../how-to-skip-to-next-iteration-in-jquery-each-util/" title="How to skip to next iteration in jQuery.each() util?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Why does an image captured using camera intent gets rotated on some de">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/why-does-an-image-captured-using-camera-intent-gets-rotated-on-some-devices-on-android/">
<meta property="og:description" content="I'm capturing an image and setting it to image view.
public void captureImage() {

    Intent intentCamera = new Intent(&quot;android.media.action.IMAGE_CAPTURE&quot;);
    File filePhoto = new File(Environment">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T09:51:17+08:00">
<meta property="article:tag" content="android">
<meta property="article:tag" content="android-camera-intent">
<meta property="article:tag" content="camera">
<meta property="article:tag" content="image">
<meta property="article:tag" content="rotation">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Why does an image captured using camera intent gets rotated on some devices on Android?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:51:17+08:00" itemprop="datePublished" title="2023-03-03 09:51">2023-03-03 09:51</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'm capturing an image and setting it to image view.</p>
<div class="code"><pre class="code literal-block"><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">captureImage</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="n">Intent</span><span class="w"> </span><span class="n">intentCamera</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Intent</span><span class="p">(</span><span class="ss">"android.media.action.IMAGE_CAPTURE"</span><span class="p">);</span>
<span class="w">    </span><span class="k">File</span><span class="w"> </span><span class="n">filePhoto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">File</span><span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">getExternalStorageDirectory</span><span class="p">(),</span><span class="w"> </span><span class="ss">"Pic.jpg"</span><span class="p">);</span>
<span class="w">    </span><span class="n">imageUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="n">fromFile</span><span class="p">(</span><span class="n">filePhoto</span><span class="p">);</span>
<span class="w">    </span><span class="n">MyApplicationGlobal</span><span class="p">.</span><span class="n">imageUri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">imageUri</span><span class="p">.</span><span class="n">getPath</span><span class="p">();</span>
<span class="w">    </span><span class="n">intentCamera</span><span class="p">.</span><span class="n">putExtra</span><span class="p">(</span><span class="n">MediaStore</span><span class="p">.</span><span class="n">EXTRA_OUTPUT</span><span class="p">,</span><span class="w"> </span><span class="n">imageUri</span><span class="p">);</span>
<span class="w">    </span><span class="n">startActivityForResult</span><span class="p">(</span><span class="n">intentCamera</span><span class="p">,</span><span class="w"> </span><span class="n">TAKE_PICTURE</span><span class="p">);</span>
<span class="err">}</span>

<span class="nv">@Override</span>
<span class="n">protected</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onActivityResult</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">Intent</span><span class="w"> </span><span class="n">intentFromCamera</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">super</span><span class="p">.</span><span class="n">onActivityResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">intentFromCamera</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">resultCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RESULT_OK</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">requestCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">TAKE_PICTURE</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">intentFromCamera</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">Bundle</span><span class="w"> </span><span class="n">extras</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">intentFromCamera</span><span class="p">.</span><span class="n">getExtras</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">extras</span><span class="p">.</span><span class="n">containsKey</span><span class="p">(</span><span class="ss">"data"</span><span class="p">))</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Bitmap</span><span class="p">)</span><span class="w"> </span><span class="n">extras</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="ss">"data"</span><span class="p">);</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getBitmapFromUri</span><span class="p">();</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getBitmapFromUri</span><span class="p">();</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">imageView</span><span class="p">.</span><span class="n">setImageBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="p">);</span>
<span class="w">        </span><span class="n">imageView</span><span class="p">.</span><span class="n">setImageURI</span><span class="p">(</span><span class="n">imageUri</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="k">public</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">getBitmapFromUri</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">notifyChange</span><span class="p">(</span><span class="n">imageUri</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">);</span>
<span class="w">    </span><span class="n">ContentResolver</span><span class="w"> </span><span class="n">cr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getContentResolver</span><span class="p">();</span>
<span class="w">    </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">bitmap</span><span class="p">;</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">android</span><span class="p">.</span><span class="n">provider</span><span class="p">.</span><span class="n">MediaStore</span><span class="p">.</span><span class="n">Images</span><span class="p">.</span><span class="n">Media</span><span class="p">.</span><span class="n">getBitmap</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span><span class="w"> </span><span class="n">imageUri</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">bitmap</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="k">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">e</span><span class="p">.</span><span class="n">printStackTrace</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>But the problem is, the image on some devices every time it gets rotated. For
example, on a Samsung device it works good, but on a Sony Xperia the image
gets rotated by 90 degrees and on Toshiba Thrive (tablet) by 180 degrees.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Most phone cameras are landscape, meaning if you take the photo in portrait,
the resulting photos will be rotated 90 degrees. In this case, the camera
software should populate the Exif data with the orientation that the photo
should be viewed in.</p>
<p>Note that the below solution depends on the camera software/device
manufacturer populating the Exif data, so it will work in most cases, but it
is not a 100% reliable solution.</p>
<div class="code"><pre class="code literal-block"><span class="nt">ExifInterface</span><span class="w"> </span><span class="nt">ei</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">ExifInterface</span><span class="o">(</span><span class="nt">photoPath</span><span class="o">);</span>
<span class="nt">int</span><span class="w"> </span><span class="nt">orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">ei</span><span class="p">.</span><span class="nc">getAttributeInt</span><span class="o">(</span><span class="nt">ExifInterface</span><span class="p">.</span><span class="nc">TAG_ORIENTATION</span><span class="o">,</span>
<span class="w">                                     </span><span class="nt">ExifInterface</span><span class="p">.</span><span class="nc">ORIENTATION_UNDEFINED</span><span class="o">);</span>

<span class="nt">Bitmap</span><span class="w"> </span><span class="nt">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">null</span><span class="o">;</span>
<span class="nt">switch</span><span class="o">(</span><span class="nt">orientation</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_ROTATE_90</span><span class="p">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rotateImage</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span><span class="w"> </span><span class="mi">90</span><span class="p">);</span>
<span class="w">        </span><span class="err">break</span><span class="p">;</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_ROTATE_180</span><span class="p">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rotateImage</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span><span class="w"> </span><span class="mi">180</span><span class="p">);</span>
<span class="w">        </span><span class="err">break</span><span class="p">;</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_ROTATE_270</span><span class="p">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">rotateImage</span><span class="p">(</span><span class="n">bitmap</span><span class="p">,</span><span class="w"> </span><span class="mi">270</span><span class="p">);</span>
<span class="w">        </span><span class="err">break</span><span class="p">;</span>

<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">ExifInterface.</span><span class="n">ORIENTATION_NORMAL</span><span class="p">:</span>
<span class="w">    </span><span class="kc">default</span><span class="o">:</span>
<span class="w">        </span><span class="n">rotatedBitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmap</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Here is the <code>rotateImage</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">rotateImage</span><span class="ss">(</span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">source</span>,<span class="w"> </span><span class="nv">float</span><span class="w"> </span><span class="nv">angle</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">Matrix</span><span class="w"> </span><span class="nv">matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Matrix</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">matrix</span>.<span class="nv">postRotate</span><span class="ss">(</span><span class="nv">angle</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">Bitmap</span>.<span class="nv">createBitmap</span><span class="ss">(</span><span class="nv">source</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="nv">source</span>.<span class="nv">getWidth</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">source</span>.<span class="nv">getHeight</span><span class="ss">()</span>,
<span class="w">                               </span><span class="nv">matrix</span>,<span class="w"> </span><span class="nv">true</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>By combining <em>Jason Robinson</em> 's answer with <em>Felix</em> 's answer and filling the
missing parts, <strong>here is the final complete solution for this issue</strong> that
will do the following after testing it on Android Android 4.1 ( <em>Jelly Bean</em>
), Android 4.4 ( <em>KitKat</em> ) and Android 5.0 ( <em>Lollipop</em> ).</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>Scale down the image if it was bigger than 1024x1024.</p>
</li>
<li>
<p>Rotate the image to the right orientation <em>only</em> if it was rotate 90, 180 or 270 degree.</p>
</li>
<li>
<p>Recycle the rotated image for memory purposes.</p>
</li>
</ol>
<p><strong>Here is the code part:</strong></p>
<p>Call the following method with the current <code>Context</code> and the image <code>URI</code> that
you want to fix</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">responsible</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">solving</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">rotation</span><span class="w"> </span><span class="n">issue</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">exist</span><span class="p">.</span><span class="w"> </span><span class="n">Also</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">images</span><span class="w"> </span><span class="n">to</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="n">x1024</span><span class="w"> </span><span class="n">resolution</span>
<span class="w"> </span><span class="o">*</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">context</span><span class="w">       </span><span class="n">The</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">context</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">selectedImage</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Image</span><span class="w"> </span><span class="n">URI</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">results</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">handleSamplingAndRotationBitmap</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="n">selectedImage</span><span class="p">)</span>
<span class="w">        </span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">MAX_HEIGHT</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>
<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">MAX_WIDTH</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// First decode with inJustDecodeBounds=true to check dimensions</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="p">();</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">inJustDecodeBounds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">InputStream</span><span class="w"> </span><span class="n">imageStream</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">openInputStream</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">);</span>
<span class="w">    </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">decodeStream</span><span class="p">(</span><span class="n">imageStream</span><span class="p">,</span><span class="w"> </span><span class="nb">null</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
<span class="w">    </span><span class="n">imageStream</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Calculate inSampleSize</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">inSampleSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">calculateInSampleSize</span><span class="p">(</span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">MAX_HEIGHT</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Decode bitmap with inSampleSize set</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">inJustDecodeBounds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="w">    </span><span class="n">imageStream</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">openInputStream</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">);</span>
<span class="w">    </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">img</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">decodeStream</span><span class="p">(</span><span class="n">imageStream</span><span class="p">,</span><span class="w"> </span><span class="nb">null</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>

<span class="w">    </span><span class="n">img</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">rotateImageIfRequired</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">selectedImage</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">img</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Here is the <code>CalculateInSampleSize</code> method from the pre mentioned source:</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">Calculate</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{@</span><span class="nb">link</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="p">}</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">decoding</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">bitmaps</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">decode</span><span class="o">*</span><span class="w"> </span><span class="k">methods</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="p">{@</span><span class="nb">link</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">}.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="n">calculates</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">closest</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">decoded</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="n">having</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="nb">and</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">equal</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nb">or</span><span class="w"> </span><span class="n">larger</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="nb">and</span><span class="w"> </span><span class="n">height</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">power</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">decoding</span><span class="w"> </span><span class="n">but</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">larger</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">isn</span><span class="o">'</span><span class="n">t</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">useful</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">caching</span><span class="w"> </span><span class="n">purposes</span><span class="p">.</span>
<span class="w">  </span><span class="o">*</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">options</span><span class="w">   </span><span class="n">An</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">out</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">populated</span><span class="w"> </span><span class="p">(</span><span class="n">run</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">decode</span><span class="o">*</span>
<span class="w">  </span><span class="o">*</span><span class="w">                  </span><span class="n">method</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">inJustDecodeBounds</span><span class="o">==</span><span class="n">true</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">reqWidth</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">resulting</span><span class="w"> </span><span class="n">bitmap</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">reqHeight</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">resulting</span><span class="w"> </span><span class="n">bitmap</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">inSampleSize</span>
<span class="w">  </span><span class="o">*/</span>
<span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">calculateInSampleSize</span><span class="p">(</span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">Options</span><span class="w"> </span><span class="n">options</span><span class="p">,</span>
<span class="w">                                         </span><span class="nb">int</span><span class="w"> </span><span class="n">reqWidth</span><span class="p">,</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">reqHeight</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Raw height and width of image</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">outHeight</span><span class="p">;</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">outWidth</span><span class="p">;</span>
<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">inSampleSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">height</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">reqHeight</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">reqWidth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="c1">// Calculate ratios of height and width to requested height and width</span>
<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">heightRatio</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">((</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">reqHeight</span><span class="p">);</span>
<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">widthRatio</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nb">round</span><span class="p">((</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">float</span><span class="p">)</span><span class="w"> </span><span class="n">reqWidth</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Choose the smallest ratio as inSampleSize value, this will guarantee a final image</span>
<span class="w">        </span><span class="c1">// with both dimensions larger than or equal to the requested height and width.</span>
<span class="w">        </span><span class="n">inSampleSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">heightRatio</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">widthRatio</span><span class="w"> </span>?<span class="w"> </span><span class="n">heightRatio</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">widthRatio</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// This offers some additional logic in case the image has a strange</span>
<span class="w">        </span><span class="c1">// aspect ratio. For example, a panorama may have a much larger</span>
<span class="w">        </span><span class="c1">// width than height. In these cases the total pixels might still</span>
<span class="w">        </span><span class="c1">// end up being too large to fit comfortably in memory, so we should</span>
<span class="w">        </span><span class="c1">// be more aggressive with sample down the image (=larger inSampleSize).</span>

<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="n">totalPixels</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Anything more than 2x the requested pixels we'll sample down further</span>
<span class="w">        </span><span class="n">final</span><span class="w"> </span><span class="n">float</span><span class="w"> </span><span class="n">totalReqPixelsCap</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">reqWidth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">reqHeight</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">totalPixels</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">inSampleSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">inSampleSize</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">totalReqPixelsCap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">inSampleSize</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">inSampleSize</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Then comes the method that will check the current image orientation to decide
the rotation angle</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Rotate</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">required</span><span class="p">.</span>
<span class="w"> </span><span class="o">*</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">img</span><span class="w">           </span><span class="n">The</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">bitmap</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="n">selectedImage</span><span class="w"> </span><span class="n">Image</span><span class="w"> </span><span class="n">URI</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">resulted</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">manipulation</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">rotateImageIfRequired</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="n">Uri</span><span class="w"> </span><span class="n">selectedImage</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>

<span class="n">InputStream</span><span class="w"> </span><span class="nb">input</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">openInputStream</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">);</span>
<span class="n">ExifInterface</span><span class="w"> </span><span class="n">ei</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Build</span><span class="p">.</span><span class="n">VERSION</span><span class="p">.</span><span class="n">SDK_INT</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">23</span><span class="p">)</span>
<span class="w">    </span><span class="n">ei</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">(</span><span class="nb">input</span><span class="p">);</span>
<span class="k">else</span>
<span class="w">    </span><span class="n">ei</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">.</span><span class="n">getPath</span><span class="p">());</span>

<span class="w">    </span><span class="nb">int</span><span class="w"> </span><span class="n">orientation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ei</span><span class="p">.</span><span class="n">getAttributeInt</span><span class="p">(</span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">TAG_ORIENTATION</span><span class="p">,</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_NORMAL</span><span class="p">);</span>

<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">orientation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_ROTATE_90</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rotateImage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="mi">90</span><span class="p">);</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_ROTATE_180</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rotateImage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="mi">180</span><span class="p">);</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="n">ExifInterface</span><span class="p">.</span><span class="n">ORIENTATION_ROTATE_270</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rotateImage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="w"> </span><span class="mi">270</span><span class="p">);</span>
<span class="w">        </span><span class="n">default</span><span class="p">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">img</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Finally the rotation method itself</p>
<div class="code"><pre class="code literal-block"><span class="nv">private</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">rotateImage</span><span class="ss">(</span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">img</span>,<span class="w"> </span><span class="nv">int</span><span class="w"> </span><span class="nv">degree</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">Matrix</span><span class="w"> </span><span class="nv">matrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Matrix</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">matrix</span>.<span class="nv">postRotate</span><span class="ss">(</span><span class="nv">degree</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">rotatedImg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Bitmap</span>.<span class="nv">createBitmap</span><span class="ss">(</span><span class="nv">img</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="mi">0</span>,<span class="w"> </span><span class="nv">img</span>.<span class="nv">getWidth</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">img</span>.<span class="nv">getHeight</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">matrix</span>,<span class="w"> </span><span class="nv">true</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">img</span>.<span class="nv">recycle</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">rotatedImg</span><span class="c1">;</span>
}
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/android/" rel="tag">android</a></li>
            <li><a class="tag p-category" href="../../categories/android-camera-intent/" rel="tag">android-camera-intent</a></li>
            <li><a class="tag p-category" href="../../categories/camera/" rel="tag">camera</a></li>
            <li><a class="tag p-category" href="../../categories/image/" rel="tag">image</a></li>
            <li><a class="tag p-category" href="../../categories/rotation/" rel="tag">rotation</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../adding-a-legend-to-pyplot-in-matplotlib-in-the-simplest-manner-possible/" rel="prev" title="Adding a legend to PyPlot in Matplotlib in the simplest manner possible">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-skip-to-next-iteration-in-jquery-each-util/" rel="next" title="How to skip to next iteration in jQuery.each() util?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
