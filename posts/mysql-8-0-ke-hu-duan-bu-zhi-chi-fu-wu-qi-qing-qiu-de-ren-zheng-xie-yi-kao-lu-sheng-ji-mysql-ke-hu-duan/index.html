<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>MySQL 8.0 - 客户端不支持服务器请求的认证协议；考虑升级 MySQL 客户端 | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/mysql-8-0-ke-hu-duan-bu-zhi-chi-fu-wu-qi-qing-qiu-de-ren-zheng-xie-yi-kao-lu-sheng-ji-mysql-ke-hu-duan/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../gpg-wu-fa-dui-shu-ju-jin-xing-zhi-ming-qian-ming-wu-fa-xie-ru-ti-jiao-dui-xiang-git-2-10-0/" title="gpg 无法对数据进行致命签名：无法写入提交对象 [Git 2.10.0]" type="text/html">
<link rel="next" href="../ru-he-huo-de-lie-biao-yuan-su-de-suo-you-ke-neng-zu-he/" title="如何获得列表元素的所有可能组合？" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="MySQL 8.0 - 客户端不支持服务器请求的认证协议；考虑升级 MySQL 客户端">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/mysql-8-0-ke-hu-duan-bu-zhi-chi-fu-wu-qi-qing-qiu-de-ren-zheng-xie-yi-kao-lu-sheng-ji-mysql-ke-hu-duan/">
<meta property="og:description" content="由于某种原因，我无法与服务器建立简单的连接。我使用默认设置安装最新的 MySQL Community 8.0 数据库和 Node.JS。
这是我的 node.js 代码
    var mysql = require('mysql');

    var con = mysql.createConnection({
      host: &quot;localhost&quot;,
      user: &quot;roo">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T18:45:23+08:00">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="node.js">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">MySQL 8.0 - 客户端不支持服务器请求的认证协议；考虑升级 MySQL 客户端</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:45:23+08:00" itemprop="datePublished" title="2023-02-17 18:45">2023-02-17 18:45</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>由于某种原因，我无法与服务器建立简单的连接。我使用默认设置安装最新的 MySQL Community 8.0 数据库和 Node.JS。</p>
<p><strong>这是我的 node.js 代码</strong></p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">mysql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'mysql'</span><span class="p">);</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">con</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mysql</span><span class="o">.</span><span class="n">createConnection</span><span class="p">({</span>
<span class="w">      </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span>
<span class="w">      </span><span class="n">user</span><span class="p">:</span><span class="w"> </span><span class="s2">"root"</span><span class="p">,</span>
<span class="w">      </span><span class="n">password</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span>
<span class="w">      </span><span class="n">insecureAuth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="n">con</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="w">      </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Connected!"</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>

<p><strong>以下是在命令提示符中发现的错误：</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span><span class="o">&gt;</span><span class="n">node</span><span class="w"> </span><span class="n">app</span><span class="o">.</span><span class="n">js</span>
<span class="w">    </span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_modules</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">Parse</span>
<span class="w">    </span><span class="n">r</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">80</span>
<span class="w">            </span><span class="n">throw</span><span class="w"> </span><span class="n">err</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Rethrow</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">MySQL</span><span class="w"> </span><span class="n">errors</span>
<span class="w">            </span><span class="o">^</span>

<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="n">ER_NOT_SUPPORTED_AUTH_MODE</span><span class="p">:</span><span class="w"> </span><span class="n">Client</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="n">requested</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">server</span><span class="p">;</span><span class="w"> </span><span class="n">consider</span><span class="w"> </span><span class="n">upgrading</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="n">client</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Handshake</span><span class="o">.</span><span class="n">Sequence</span><span class="o">.</span><span class="n">_packetToError</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span>
<span class="n">test</span>\<span class="n">node_modules</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">sequences</span>\<span class="n">Sequence</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Handshake</span><span class="o">.</span><span class="n">ErrorPacket</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_mo</span>
<span class="n">dules</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">sequences</span>\<span class="n">Handshake</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">130</span><span class="p">:</span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Protocol</span><span class="o">.</span><span class="n">_parsePacket</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_mo</span>
<span class="n">dules</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">Protocol</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">279</span><span class="p">:</span><span class="mi">23</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Parser</span><span class="o">.</span><span class="n">write</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_modules</span>\<span class="n">mys</span>
<span class="n">ql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">Parser</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">76</span><span class="p">:</span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Protocol</span><span class="o">.</span><span class="n">write</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_modules</span>\<span class="n">m</span>
<span class="n">ysql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">Protocol</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Socket</span><span class="o">.&lt;</span><span class="n">anonymous</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_modul</span>
<span class="n">es</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">Connection</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">103</span><span class="p">:</span><span class="mi">28</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Socket</span><span class="o">.</span><span class="n">emit</span><span class="w"> </span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">159</span><span class="p">:</span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">addChunk</span><span class="w"> </span><span class="p">(</span><span class="n">_stream_readable</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">265</span><span class="p">:</span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">readableAddChunk</span><span class="w"> </span><span class="p">(</span><span class="n">_stream_readable</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">252</span><span class="p">:</span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Socket</span><span class="o">.</span><span class="n">Readable</span><span class="o">.</span><span class="n">push</span><span class="w"> </span><span class="p">(</span><span class="n">_stream_readable</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">209</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="o">--------------------</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Protocol</span><span class="o">.</span><span class="n">_enqueue</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_module</span>
<span class="n">s</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">Protocol</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">145</span><span class="p">:</span><span class="mi">48</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Protocol</span><span class="o">.</span><span class="n">handshake</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_modul</span>
<span class="n">es</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">protocol</span>\<span class="n">Protocol</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">23</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">Connection</span><span class="o">.</span><span class="n">connect</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">node_modul</span>
<span class="n">es</span>\<span class="n">mysql</span>\<span class="n">lib</span>\<span class="n">Connection</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">130</span><span class="p">:</span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.&lt;</span><span class="n">anonymous</span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">mysql</span><span class="o">-</span><span class="n">test</span>\<span class="n">server</span><span class="o">.</span><span class="n">js</span><span class="p">:</span>
<span class="mi">11</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span>
<span class="n">at</span><span class="w"> </span><span class="n">Module</span><span class="o">.</span><span class="n">_compile</span><span class="w"> </span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">660</span><span class="p">:</span><span class="mi">30</span><span class="p">)</span>
<span class="n">at</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">Module</span><span class="o">.</span><span class="n">_extensions</span><span class="o">..</span><span class="n">js</span><span class="w"> </span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">671</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span>
<span class="n">at</span><span class="w"> </span><span class="n">Module</span><span class="o">.</span><span class="n">load</span><span class="w"> </span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">573</span><span class="p">:</span><span class="mi">32</span><span class="p">)</span>
<span class="n">at</span><span class="w"> </span><span class="n">tryModuleLoad</span><span class="w"> </span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">513</span><span class="p">:</span><span class="mi">12</span><span class="p">)</span>
<span class="n">at</span><span class="w"> </span><span class="n">Function</span><span class="o">.</span><span class="n">Module</span><span class="o">.</span><span class="n">_load</span><span class="w"> </span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">505</span><span class="p">:</span><span class="mi">3</span><span class="p">)</span>
<span class="n">at</span><span class="w"> </span><span class="n">Function</span><span class="o">.</span><span class="n">Module</span><span class="o">.</span><span class="n">runMain</span><span class="w"> </span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="n">js</span><span class="p">:</span><span class="mi">701</span><span class="p">:</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

<p>我已经阅读了一些内容，例如：https://dev.mysql.com/doc/refman/5.5/en/old-client.html
https://github.com/mysqljs/mysql/issues/1507</p>
<p>但我仍然不确定如何解决我的问题。任何帮助将不胜感激：D</p>
<p><br><br></p>
<h2>解答</h2>
<p>在 MYSQL Workbench 中执行以下查询</p>
<p><code>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY
'password';</code></p>
<p>作为<code>root</code>您的用户<code>localhost</code>作为您的 URL 和<code>password</code>密码</p>
<p>然后运行此查询以刷新权限：</p>
<p><code>flush privileges;</code></p>
<p>这样做之后尝试使用节点进行连接。</p>
<p>如果这不起作用，请尝试不使用任何<code>@'localhost'</code>部分。</p>
<p><br></p>
<h3>更多建议</h3>
<h3>概括</h3>
<ol>
<li>如果您只是想消除错误， <strong>以冒项目安全风险为代价</strong> （例如，这只是个人项目或开发环境），请使用@Pras 的答案——<code>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password'</code>然后<code>flush privileges</code>
</li>
<li>如果您想对其进行修复，但不知道为什么，只需安装和使用<code>mysql2</code>（而不是<code>mysql</code>）并使用它 --<code>npm i mysql2</code>和<code>mysql = require('mysql2');</code>.</li>
<li>如果您是一位总是渴望学习的好奇开发人员，请继续阅读……:)</li>
</ol>
<hr>
<h3>这是怎么回事？</h3>
<p>我们先搞清楚这是怎么回事。</p>
<p>MySQL 8 支持可插入的身份验证方法。默认情况下，使用其中一个
named<code>caching_sha2_password</code>而不是我们的好旧<code>mysql_native_password</code>（source）。很明显，使用经过多次握手的加密算法比已经存在24
年的普通密码传递更安全！</p>
<p>现在，问题出<code>mysqljs</code>在 Node（你安装并在你的 Node 代码中使用它的包<code>npm i mysql</code>）还不支持 MySQL 8
的这种新的默认身份验证方法。问题在这里： https: //github.com/mysqljs/mysql/issues/1507并且在 3 年后（截至
2019 年 7 月）仍然开放。</p>
<p><strong>2019 年 6 月更新：现在</strong> mysqljs 中有一个新的 PR来解决这个问题！</p>
<p><strong>2020 年 2 月更新：</strong> 显然它计划在 mysqljs 的第 3 版中发布。</p>
<p><strong><em>*2020 </em>*年 7 月更新：</strong> 显然它还没有（至少到 2020 年 4 月），但它声称node-
mysql2正在支持身份验证切换请求。请在下面评论是否<code>node-mysql2</code>可以很好地解决这个问题——我稍后会自己测试。</p>
<p><strong>2021 年 4 月更新：</strong> 问题似乎仍然存在，就在 3 天前，有人创建了一个分支并将它放在那里——但还没有正式出现在 mysql.js
包中。此外，根据下面的评论，似乎mysql2 包工作正常并正确支持身份验证开关。</p>
<hr>
<h2>您当前的选择</h2>
<h4>选项 1) [不推荐] 降级“MySQL”以使用旧的“mysql_native_password”进行身份验证</h4>
<p>这就是每个人在这里的建议（例如上面的最佳答案）。您只需进入<code>mysql</code>并运行一个查询，说<code>root</code>可以使用旧<code>mysql_native_password</code>方法进行身份验证：</p>
<div class="code"><pre class="code literal-block">ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password ...
</pre></div>

<p>好消息是，生活将变得简单，您仍然可以毫无问题地使用像 Sequel Pro 这样的好旧工具。但问题是，您没有利用可用的更安全（也很酷，请阅读下文）的东西。</p>
<h4>选项 2) [Meh...] 用 MySQL Connecter X DevAPI 替换“节点”包</h4>
<p>MySQL X DevAPI for Node是Node 的 Mysqljs 包的替代品，由http://dev.mysql.com官方人员提供。</p>
<p>它就像一个支持身份验证的魅力<code>caching_sha2_password</code>。（只要确保您使用端口<code>33060</code>进行X 协议通信即可。）</p>
<p>糟糕的是，您已经离开了我们<code>mysql</code>每个人都习惯并依赖的旧包。</p>
<p>好消息是，您的应用程序现在更安全了，您可以利用我们的老朋友没有提供的大量新功能！只需查看X DevAPI
的教程，您就会发现它有大量可以派上用场的新特性。您只需要支付学习曲线的代价，这预计会伴随任何技术升级而来。:)</p>
<p>附言。不幸的是，这个 XDevAPI 包还没有类型定义（TypeScript 可以理解），所以如果你在 <strong>typescript</strong>
上，你会遇到问题。我尝试使用<code>dts-gen</code>and生成 .d.ts <code>dtsmake</code>，但没有成功。所以记住这一点。</p>
<h4>选项 3）[推荐] 将“mysql.js”替换为“mysql2.js”包</h4>
<p>如上所述，mysql 包（NPM 包链接）仍然存在此问题（截至 2021 年 4 月）。但是 mysql2 包（NPM
包链接）不是。所以可能以下应该是单行答案！</p>
<div class="code"><pre class="code literal-block">npm un mysql &amp;&amp; npm i mysql2
</pre></div>

<p>请注意，这<code>mysql2</code>是流行的分叉作品<code>mysql</code>，但它的受欢迎程度（2020 年 4 月每周 62
万次下载<code>mysql2</code>）已经接近原始包（2021<code>mysql</code>年 4 月每周 72 万次下载），因此进行切换似乎是合理的！</p>
<p><br><br><a href="../mysql-8-0-client-does-not-support-authentication-protocol-requested-by-server-consider-upgrading-mysql-client/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/mysql/" rel="tag">mysql</a></li>
            <li><a class="tag p-category" href="../../categories/nodejs/" rel="tag">node.js</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../gpg-wu-fa-dui-shu-ju-jin-xing-zhi-ming-qian-ming-wu-fa-xie-ru-ti-jiao-dui-xiang-git-2-10-0/" rel="prev" title="gpg 无法对数据进行致命签名：无法写入提交对象 [Git 2.10.0]">Previous post</a>
            </li>
            <li class="next">
                <a href="../ru-he-huo-de-lie-biao-yuan-su-de-suo-you-ke-neng-zu-he/" rel="next" title="如何获得列表元素的所有可能组合？">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
