<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How to get a user's client IP address in ASP.NET? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-to-get-a-user-s-client-ip-address-in-asp-net/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-get-the-android-device-s-primary-e-mail-address/" title="How to get the Android device's primary e-mail address" type="text/html">
<link rel="next" href="../how-do-i-run-a-program-with-a-different-working-directory-from-current-from-linux-shell/" title="How do I run a program with a different working directory from current, from Linux shell?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How to get a user's client IP address in ASP.NET?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-to-get-a-user-s-client-ip-address-in-asp-net/">
<meta property="og:description" content="We have Request.UserHostAddress to get the IP address in ASP.NET, but this
is usually the user's ISP's IP address, not exactly the user's machine IP
address who for example clicked a link. How can I g">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T16:27:24+08:00">
<meta property="article:tag" content=".net-c#">
<meta property="article:tag" content="asp.net">
<meta property="article:tag" content="client">
<meta property="article:tag" content="ip-address">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How to get a user's client IP address in ASP.NET?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T16:27:24+08:00" itemprop="datePublished" title="2023-03-03 16:27">2023-03-03 16:27</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>We have <code>Request.UserHostAddress</code> to get the IP address in ASP.NET, but this
is usually the user's ISP's IP address, not exactly the user's machine IP
address who for example clicked a link. How can I get the real IP Address?</p>
<p>For example, in a Stack Overflow user profile it is: <strong>"Last account activity:
4 hours ago from 86.123.127.8"</strong> , but my machine IP address is a bit
different. How does Stack Overflow get this address?</p>
<p>In some web systems there is an IP address check for some purposes. For
example, with a certain IP address, for every 24 hours can the user just have
only 5 clicks on download links? This IP address should be unique, not for an
ISP that has a huge range of clients or Internet users.</p>
<p>Did I understand well?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As others have said you can't do what you are asking. If you describe the
problem you are trying to solve maybe someone can help?</p>
<p>E.g.</p>
<ul>
<li>are you trying to uniquely identify your users? </li>
<li>Could you use a cookie, or the session ID perhaps instead of the IP address?</li>
</ul>
<p><strong>Edit</strong> The address you see on the server shouldn't be the ISP's address, as
you say that would be a huge range. The address for a home user on broadband
will be the address at their router, so every device inside the house will
appear on the outside to be the same, but the router uses NAT to ensure that
traffic is routed to each device correctly. For users accessing from an office
environment the address may well be the same for all users. Sites that use IP
address for ID run the risk of getting it very wrong - the examples you give
are good ones and they often fail. For example my office is in the UK, the
breakout point (where I "appear" to be on the internet) is in another country
where our main IT facility is, so from my office my IP address appears to be
not in the UK. For this reason I can't access UK only web content, such as the
BBC iPlayer). At any given time there would be hundreds, or even thousands, of
people at my company who appear to be accessing the web from the same IP
address.</p>
<p>When you are writing server code you can never be sure what the IP address you
see is referring to. Some users like it this way. Some people deliberately use
a proxy or VPN to further confound you.</p>
<p>When you say your machine address is different to the IP address shown on
StackOverflow, how are you finding out your machine address? If you are just
looking locally using <code>ipconfig</code> or something like that I would expect it to
be different for the reasons I outlined above. If you want to double check
what the outside world thinks have a look at whatismyipaddress.com/.</p>
<p>This Wikipedia link on NAT will provide you some background on this.</p>
<p><br></p>
<h3>Suggest</h3>
<p>As others have said you can't do what you are asking. If you describe the
problem you are trying to solve maybe someone can help?</p>
<p>E.g.</p>
<ul>
<li>are you trying to uniquely identify your users? </li>
<li>Could you use a cookie, or the session ID perhaps instead of the IP address?</li>
</ul>
<p><strong>Edit</strong> The address you see on the server shouldn't be the ISP's address, as
you say that would be a huge range. The address for a home user on broadband
will be the address at their router, so every device inside the house will
appear on the outside to be the same, but the router uses NAT to ensure that
traffic is routed to each device correctly. For users accessing from an office
environment the address may well be the same for all users. Sites that use IP
address for ID run the risk of getting it very wrong - the examples you give
are good ones and they often fail. For example my office is in the UK, the
breakout point (where I "appear" to be on the internet) is in another country
where our main IT facility is, so from my office my IP address appears to be
not in the UK. For this reason I can't access UK only web content, such as the
BBC iPlayer). At any given time there would be hundreds, or even thousands, of
people at my company who appear to be accessing the web from the same IP
address.</p>
<p>When you are writing server code you can never be sure what the IP address you
see is referring to. Some users like it this way. Some people deliberately use
a proxy or VPN to further confound you.</p>
<p>When you say your machine address is different to the IP address shown on
StackOverflow, how are you finding out your machine address? If you are just
looking locally using <code>ipconfig</code> or something like that I would expect it to
be different for the reasons I outlined above. If you want to double check
what the outside world thinks have a look at whatismyipaddress.com/.</p>
<p>This Wikipedia link on NAT will provide you some background on this.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/net-c/" rel="tag">.net-c#</a></li>
            <li><a class="tag p-category" href="../../categories/aspnet/" rel="tag">asp.net</a></li>
            <li><a class="tag p-category" href="../../categories/client/" rel="tag">client</a></li>
            <li><a class="tag p-category" href="../../categories/ip-address/" rel="tag">ip-address</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-get-the-android-device-s-primary-e-mail-address/" rel="prev" title="How to get the Android device's primary e-mail address">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-do-i-run-a-program-with-a-different-working-directory-from-current-from-linux-shell/" rel="next" title="How do I run a program with a different working directory from current, from Linux shell?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
