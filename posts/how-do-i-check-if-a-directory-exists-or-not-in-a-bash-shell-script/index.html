<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How do I check if a directory exists or not in a Bash shell script? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-do-i-check-if-a-directory-exists-or-not-in-a-bash-shell-script/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-enumerate-an-enum/" title="How to enumerate an enum?" type="text/html">
<link rel="next" href="../how-to-close-hide-the-android-soft-keyboard-programmatically/" title="How to close/hide the Android soft keyboard programmatically?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How do I check if a directory exists or not in a Bash shell script?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-do-i-check-if-a-directory-exists-or-not-in-a-bash-shell-script/">
<meta property="og:description" content='What command checks if a directory exists or not within a Bash shell script?

Answer
To check if a directory exists:
if [ -d "$DIRECTORY" ]; then
  echo "$DIRECTORY does exist."
fi


To check if a dir'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-16T19:04:29+08:00">
<meta property="article:tag" content="bash">
<meta property="article:tag" content="command">
<meta property="article:tag" content="posix">
<meta property="article:tag" content="shell">
<meta property="article:tag" content="unix">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How do I check if a directory exists or not in a Bash shell script?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:04:29+08:00" itemprop="datePublished" title="2023-02-16 19:04">2023-02-16 19:04</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>What command checks if a directory exists or not within a Bash shell script?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To check if a directory exists:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span><span class="s2">"$DIRECTORY"</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">  </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"$DIRECTORY does exist."</span>
<span class="nv">fi</span>
</pre></div>

<p>To check if a directory does not exist:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span><span class="s2">"$DIRECTORY"</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">  </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"$DIRECTORY does not exist."</span>
<span class="nv">fi</span>
</pre></div>

<hr>
<p>However, as Jon Ericson points out, subsequent commands may not work as
intended if you do not take into account that a symbolic link to a directory
will also pass this check. E.g. running this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">ln</span><span class="w"> </span><span class="o">-</span><span class="nv">s</span><span class="w"> </span><span class="s2">"$ACTUAL_DIR"</span><span class="w"> </span><span class="s2">"$SYMLINK"</span>
<span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span><span class="s2">"$SYMLINK"</span><span class="w"> </span>]<span class="c1">; then </span>
<span class="w">  </span><span class="nv">rmdir</span><span class="w"> </span><span class="s2">"$SYMLINK"</span><span class="w"> </span>
<span class="nv">fi</span>
</pre></div>

<p>Will produce the error message:</p>
<div class="code"><pre class="code literal-block"><span class="n">rmdir</span><span class="o">:</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="err">`</span><span class="n">symlink</span><span class="err">'</span><span class="o">:</span><span class="w"> </span><span class="n">Not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">directory</span>
</pre></div>

<p>So symbolic links may have to be treated differently, if subsequent commands
expect directories:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="n"> -d "$LINK_OR_DIR" </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="n"> -L "$LINK_OR_DIR" </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">symlink</span><span class="err">!</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Symbolic</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="k">specific</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="k">go</span><span class="w"> </span><span class="n">here</span><span class="p">.</span>
<span class="w">    </span><span class="n">rm</span><span class="w"> </span><span class="ss">"$LINK_OR_DIR"</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">It</span><span class="err">'</span><span class="n">s</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">directory</span><span class="err">!</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Directory</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">goes</span><span class="w"> </span><span class="n">here</span><span class="p">.</span>
<span class="w">    </span><span class="n">rmdir</span><span class="w"> </span><span class="ss">"$LINK_OR_DIR"</span>
<span class="w">  </span><span class="n">fi</span>
<span class="n">fi</span>
</pre></div>

<hr>
<p>Take particular note of the double-quotes used to wrap the variables. The
reason for this is explained by 8jean in another answer.</p>
<p>If the variables contain spaces or other unusual characters it will probably
cause the script to fail.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Always wrap variables in double quotes when referencing them in a Bash script.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span><span class="s2">"$DIRECTORY"</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">    </span>#<span class="w"> </span><span class="nv">Will</span><span class="w"> </span><span class="nv">enter</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="mh">$D</span><span class="nv">IRECTORY</span><span class="w"> </span><span class="nv">exists</span>,<span class="w"> </span><span class="nv">even</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">contains</span><span class="w"> </span><span class="nv">spaces</span>
<span class="nv">fi</span>
</pre></div>

<p>Kids these days put spaces and lots of other funny characters in their
directory names. (Spaces! Back in my day, we didn't have no fancy spaces!) One
day, one of those kids will run your script with <code>$DIRECTORY</code> set to <code>"My
M0viez"</code> and your script will blow up. You don't want that. So use double
quotes.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/bash/" rel="tag">bash</a></li>
            <li><a class="tag p-category" href="../../categories/command/" rel="tag">command</a></li>
            <li><a class="tag p-category" href="../../categories/posix/" rel="tag">posix</a></li>
            <li><a class="tag p-category" href="../../categories/shell/" rel="tag">shell</a></li>
            <li><a class="tag p-category" href="../../categories/unix/" rel="tag">unix</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-enumerate-an-enum/" rel="prev" title="How to enumerate an enum?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-close-hide-the-android-soft-keyboard-programmatically/" rel="next" title="How to close/hide the Android soft keyboard programmatically?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
