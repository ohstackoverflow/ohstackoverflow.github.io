<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Script Tag - async &amp; defer | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/script-tag-async-defer/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-can-i-see-normal-print-output-created-during-pytest-run/" title="How can I see normal print output created during pytest run?" type="text/html">
<link rel="next" href="../how-to-read-process-command-line-arguments/" title="How to read/process command line arguments?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Script Tag - async &amp; defer">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/script-tag-async-defer/">
<meta property="og:description" content="I have a couple of questions about the attributes async &amp; defer for the
&lt;script&gt; tag which to my understanding only work in HTML5 browsers.
One of my sites has two external JavaScript files that curre">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T14:50:41+08:00">
<meta property="article:tag" content="html">
<meta property="article:tag" content="javascript">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Script Tag - async &amp; defer</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:50:41+08:00" itemprop="datePublished" title="2023-02-17 14:50">2023-02-17 14:50</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have a couple of questions about the attributes <code>async</code> &amp; <code>defer</code> for the
<code>&lt;script&gt;</code> tag which to my understanding only work in HTML5 browsers.</p>
<p>One of my sites has two external JavaScript files that currently sit just
above the <code>&lt;/body&gt;</code> tag; the first is jquery sourced from google and the
second is a local external script.</p>
<h3>With respects to site load speed</h3>
<ol>
<li>
<p>Is there any advantage in adding <code>async</code> to the two scripts I have at the bottom of the page?</p>
</li>
<li>
<p>Would there be any advantage in adding the <code>async</code> option to the two scripts and putting them at the top of the page in the <code>&lt;head&gt;</code>?</p>
</li>
<li>
<p>Would this mean they download as the page loads?</p>
</li>
<li>
<p>I assume this would cause delays for HTML4 browsers, but would it speed up page load for HTML5 browsers?</p>
</li>
</ol>
<h3>Using <code>&lt;script defer src=...</code>
</h3>
<ol>
<li>Would loading the two scripts inside <code>&lt;head&gt;</code> with the attribute <code>defer</code> the same affect as having the scripts before <code>&lt;/body&gt;</code>?</li>
<li>Once again I assume this would slow up HTML4 browsers.</li>
</ol>
<h3>Using <code>&lt;script async src=...</code>
</h3>
<p>If I have two scripts with <code>async</code> enabled</p>
<ol>
<li>Would they download at the same time?</li>
<li>Or one at a time with the rest of the page?</li>
<li>Does the order of scripts then become a problem? For example one script depends on the other so if one downloads faster, the second one might not execute correctly etc.</li>
</ol>
<p>Finally am I best to leave things as they are until HTML5 is more commonly
used?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Keep your scripts right before <code>&lt;/body&gt;</code>. Async can be used with scripts
located there in a few circumstances (see discussion below). Defer won't make
much of a difference for scripts located there because the DOM parsing work
has pretty much already been done anyway.</p>
<p>Here's an article that explains the difference between async and defer:
http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-
explained/.</p>
<p>Your HTML will display quicker in older browsers if you keep the scripts at
the end of the body right before <code>&lt;/body&gt;</code>. So, to preserve the load speed in
older browsers, you don't want to put them anywhere else.</p>
<p>If your second script depends upon the first script (e.g. your second script
uses the jQuery loaded in the first script), then you can't make them async
without additional code to control execution order, but you can make them
defer because defer scripts will still be executed in order, just not until
after the document has been parsed. If you have that code and you don't need
the scripts to run right away, you can make them async or defer.</p>
<p>You could put the scripts in the <code>&lt;head&gt;</code> tag and set them to <code>defer</code> and the
loading of the scripts will be deferred until the DOM has been parsed and that
will get fast page display in new browsers that support defer, but it won't
help you at all in older browsers and it isn't really any faster than just
putting the scripts right before <code>&lt;/body&gt;</code> which works in all browsers. So,
you can see why it's just best to put them right before <code>&lt;/body&gt;</code>.</p>
<p>Async is more useful when you really don't care when the script loads and
nothing else that is user dependent depends upon that script loading. The most
often cited example for using async is an analytics script like Google
Analytics that you don't want anything to wait for and it's not urgent to run
soon and it stands alone so nothing else depends upon it.</p>
<p>Usually the jQuery library is not a good candidate for async because other
scripts depend upon it and you want to install event handlers so your page can
start responding to user events and you may need to run some jQuery-based
initialization code to establish the initial state of the page. It can be used
async, but other scripts will have to be coded to not execute until jQuery is
loaded.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Keep your scripts right before <code>&lt;/body&gt;</code>. Async can be used with scripts
located there in a few circumstances (see discussion below). Defer won't make
much of a difference for scripts located there because the DOM parsing work
has pretty much already been done anyway.</p>
<p>Here's an article that explains the difference between async and defer:
http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-
explained/.</p>
<p>Your HTML will display quicker in older browsers if you keep the scripts at
the end of the body right before <code>&lt;/body&gt;</code>. So, to preserve the load speed in
older browsers, you don't want to put them anywhere else.</p>
<p>If your second script depends upon the first script (e.g. your second script
uses the jQuery loaded in the first script), then you can't make them async
without additional code to control execution order, but you can make them
defer because defer scripts will still be executed in order, just not until
after the document has been parsed. If you have that code and you don't need
the scripts to run right away, you can make them async or defer.</p>
<p>You could put the scripts in the <code>&lt;head&gt;</code> tag and set them to <code>defer</code> and the
loading of the scripts will be deferred until the DOM has been parsed and that
will get fast page display in new browsers that support defer, but it won't
help you at all in older browsers and it isn't really any faster than just
putting the scripts right before <code>&lt;/body&gt;</code> which works in all browsers. So,
you can see why it's just best to put them right before <code>&lt;/body&gt;</code>.</p>
<p>Async is more useful when you really don't care when the script loads and
nothing else that is user dependent depends upon that script loading. The most
often cited example for using async is an analytics script like Google
Analytics that you don't want anything to wait for and it's not urgent to run
soon and it stands alone so nothing else depends upon it.</p>
<p>Usually the jQuery library is not a good candidate for async because other
scripts depend upon it and you want to install event handlers so your page can
start responding to user events and you may need to run some jQuery-based
initialization code to establish the initial state of the page. It can be used
async, but other scripts will have to be coded to not execute until jQuery is
loaded.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/html/" rel="tag">html</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-can-i-see-normal-print-output-created-during-pytest-run/" rel="prev" title="How can I see normal print output created during pytest run?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-read-process-command-line-arguments/" rel="next" title="How to read/process command line arguments?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
