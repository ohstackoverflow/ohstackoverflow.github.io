<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Is quitting an application frowned upon? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/is-quitting-an-application-frowned-upon/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../secure-hash-and-salt-for-php-passwords/" title="Secure hash and salt for PHP passwords" type="text/html">
<link rel="next" href="../dealing-with-java-lang-outofmemoryerror-permgen-space-error/" title='Dealing with "java.lang.OutOfMemoryError: PermGen space" error' type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Is quitting an application frowned upon?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/is-quitting-an-application-frowned-upon/">
<meta property="og:description" content="Moving on in my attempt to learn Android, I just read the following:

Question: Does the user have a choice to kill the application unless we put
a menu option in to kill it? If no such option exists,">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T04:14:18+08:00">
<meta property="article:tag" content="android">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Is quitting an application frowned upon?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:14:18+08:00" itemprop="datePublished" title="2023-02-17 04:14">2023-02-17 04:14</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Moving on in my attempt to learn Android, I just read the following:</p>
<blockquote>
<p>Question: <em>Does the user have a choice to kill the application unless we put
a menu option in to kill it? If no such option exists, how does the user
terminate the application?</em></p>
<p>Answer: (Romain Guy): <em>The user doesn't, the system handles this
automatically. That's what the activity lifecycle (especially
onPause/onStop/onDestroy) is for. No matter what you do, do not put a "quit"
or "exit" application button. It is useless with Android's application
model. This is also contrary to how core applications work.</em></p>
</blockquote>
<p>Hehe, for every step I take in the Android world I run into some sort of
problem =(</p>
<p>Apparently, you cannot quit an application in Android (but the Android system
can very well totally destroy your app whenever it feels like it). What's up
with that? I am starting to think that it's impossible to write an app that
functions as a "normal app" - that the user can quit the app when he/she
decides to do so. That is not something that should be relied upon the OS to
do.</p>
<p>The application I am trying to create is not an application for the Android
Market. It is not an application for "wide use" by the general public, it is a
business app that is going to be used in a very narrow business field.</p>
<p>I was actually really looking forward to developing for the Android platform,
since it addresses a lot of issues that exist in Windows Mobile and .NET.
However, the last week has been somewhat of a turnoff for me... I hope I don't
have to abandon Android, but it doesn't look very good right now =(</p>
<p>Is there a way for me to <strong>really</strong> quit the application?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This will eventually get to your question, but I first want to address a
number of issues you raise in your various comments to the various answers
already given at the time of this writing. I have no intention of changing
your mind -- rather, these are here for others who come to read this post in
the future.</p>
<blockquote>
<p>The point is that I cannot allow for Android to determine when my app is
going to be terminated. that must be the choice of the user.</p>
</blockquote>
<p>Millions of people are perfectly happy with the model where the environment
closes up the application as needed. Those users simply don't think about
"terminating" the Android app, any more than they think about "terminating" a
Web page or "terminating" a thermostat.</p>
<p>iPhone users are much the same way, in that pressing the iPhone button does
not necessarily "feel" like the app was terminated since many iPhone apps pick
up where the user left off, even if the app really was shut down (since iPhone
only allows one third-party app at a time, at present).</p>
<blockquote>
<p>As I said above, there is a lot of things going on in my app (data being
PUSHed to the device, lists with tasks that always should be there, etc.).</p>
</blockquote>
<p>I don't know what "lists with tasks that always should be there" means, but
the "data being PUSHed to the device" is a pleasant fiction and should not be
done by activity in any case. Use a scheduled task (via <code>AlarmManager</code>) to
update your data for maximum reliability.</p>
<blockquote>
<p>Our users log in and can't be doing that every time they get a phone call
and Android decides to kill the app.</p>
</blockquote>
<p>There are many iPhone and Android applications that deal with this. Usually,
it is because they hold onto login credentials, rather than forcing users to
log in every time manually.</p>
<blockquote>
<p>For example, we want to check updates when exiting the application</p>
</blockquote>
<p>That is a mistake on any operating system. For all you know, the reason your
application is being "exited" is because the OS is shutting down, and then
your update process will fail mid-stream. Generally, that's not a good thing.
Either check updates on start or check updates totally asynchronously (e.g.,
via a scheduled task), never on exit.</p>
<blockquote>
<p>Some comments suggest that hitting the back button does not kill the app at
all (see link in my question above).</p>
</blockquote>
<p>Pressing the BACK button does not "kill the app". It finishes the activity
that was on-screen when the user pressed the BACK button.</p>
<blockquote>
<p>It should only terminate when the users want to terminate it - never ever
any other way. If you can't write apps that behave like that in Android,
then I think that Android can't be used for writing real apps =(</p>
</blockquote>
<p>Then neither can Web applications. Or WebOS, if I understand their model
correctly (haven't had a chance to play with one yet). In all of those, users
don't "terminate" anything -- they just leave. iPhone is a bit different, in
that it only presently allows one thing to run at a time (with a few
exceptions), and so the act of leaving implies a fairly immediate termination
of the app.</p>
<blockquote>
<p>Is there a way for me to really quit the application?</p>
</blockquote>
<p>As everybody else told you, users (via BACK) or your code (via <code>finish()</code>) can
close up your currently-running activity. Users generally don't need anything
else, for properly-written applications, any more than they need a "quit"
option for using Web applications.</p>
<hr>
<p>No two application environments are the same, by definition. This means that
you can see trends in environments as new ones arise and others get buried.</p>
<p>For example, there is a growing movement to try to eliminate the notion of the
"file". Most Web applications don't force users to think of files. iPhone apps
typically don't force users to think of files. Android apps generally don't
force users to think of files. And so on.</p>
<p>Similarly, there is a growing movement to try to eliminate the notion of
"terminating" an app. Most Web applications don't force the user to log out,
but rather implicitly log the user out after a period of inactivity. Same
thing with Android, and to a lesser extent, iPhone (and possibly WebOS).</p>
<p>This requires more emphasis on application design, focusing on business goals,
and not sticking with an implementation model tied to a previous application
environment. Developers who lack the time or inclination to do this will get
frustrated with newer environments that break their existing mental model.
This is not the fault of either environment, any more than it is the fault of
a mountain for storms flowing around it rather than through it.</p>
<p>For example, some development environments, like Hypercard and Smalltalk, had
the application and the development tools co-mingled in one setup. This
concept did not catch on much, outside of language extensions to apps (e.g.,
VBA in Excel, Lisp in AutoCAD). Developers who came up with mental models that
presumed the existence of development tools in the app itself, therefore,
either had to change their model or limit themselves to environments where
their model would hold true.</p>
<p>So, when you write:</p>
<blockquote>
<p>Along with other messy things I discovered, I think that developing our app
for Android is not going to happen.</p>
</blockquote>
<p>That would appear to be for the best, for you, for right now. Similarly, I
would counsel you against attempting to port your application to the Web,
since some of the same problems you have reported with Android you will find
in Web applications as well (e.g., no "termination"). Or, conversely, someday
if you <em>do</em> port your app to the Web, you may find that the Web application's
flow may be a better match for Android, and you can revisit an Android port at
that time.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I'd just like to add a correction here for the future readers of this thread.
This particular nuance has escaped my understanding for a long time so I want
to make sure none of you make the same mistakes:</p>
<p><strong><code>System.exit()</code> does not kill your app if you have more than one activity on
the stack.</strong> What actually happens is that <strong>the process is killed and
immediately restarted</strong> with one fewer activity on the stack. This is also
what happens when your app is killed by the Force Close dialog, or even when
you try to kill the process from DDMS. This is a fact that is entirely
undocumented, to my knowledge.</p>
<p>The short answer is, if you want to exit your application, you've got to keep
track of all activities in your stack and <code>finish()</code> ALL of them when the user
wants to exit (and no, there is no way to iterate through the Activity stack,
so you have to manage all of this yourself). Even this does not actually kill
the process or any dangling references you may have. It simply finishes the
activities. Also, I'm not sure whether <code>Process.killProcess(Process.myPid())</code>
works any better; I haven't tested it.</p>
<p>If, on the other hand, it is okay for you to have activities remaining in your
stack, there is another method which makes things super easy for you:
<code>Activity.moveTaskToBack(true)</code> will simply background your process and show
the home screen.</p>
<p>The long answer involves explanation of the philosophy behind this behavior.
The philosophy is born out of a number of assumptions:</p>
<ol>
<li>First of all, this only happens when your app is in the foreground. If it is in the background the process will terminate just fine. However, if it is in the foreground, the OS assumes that the user wants to keep doing whatever he/she was doing. (If you are trying to kill the process from DDMS, you should hit the home button first, and then kill it)</li>
<li>It also assumes that each activity is independent of all the other activities. This is often true, for example in the case that your app launches the Browser Activity, which is entirely separate and was not written by you. The Browser Activity may or may not be created on the same Task, depending on its manifest attributes.</li>
<li>It assumes that each of your activities is completely self-reliant and can be killed/restored in a moment's notice. (I rather dislike this particular assumption, since my app has many activities which rely on a large amount of cached data, too large to be efficiently serialized during <code>onSaveInstanceState</code>, but whaddya gonna do?) For most well-written Android apps this should be true, since you never know when your app is going to be killed off in the background.</li>
<li>The final factor is not so much an assumption, but rather a limitation of the OS: <em>killing the app explicitly is the same as the app crashing, and also the same as Android killing the app to reclaim memory.</em> This culminates in our coup de grace: since Android can't tell if the app exited or crashed or was killed in the background, it assumes the user wants to return where they left off, and so the ActivityManager restarts the process.</li>
</ol>
<p>When you think about it, this is appropriate for the platform. First, this is
exactly what happens when the process is killed in the background and the user
comes back to it, so it needs to be restarted where it left off. Second, this
is what happens when the app crashes and presents the dreaded Force Close
dialog.</p>
<p>Say I want my users to be able to take a picture and upload it. I launch the
Camera Activity from my activity, and ask it to return an image. The Camera is
pushed onto the top of my current Task (rather than being created in its own
Task). If the Camera has an error and it crashes, should that result in the
whole app crashing? From the standpoint of the user, only the Camera failed,
and they should be returned to their previous activity. So it just restarts
the process with all the same Activities in the stack, minus the Camera. Since
your Activities <em>should</em> be designed so that they can be killed and restored
at the drop of a hat, this shouldn't be a problem. Unfortunately, not all apps
can be designed that way, so it <em>is</em> a problem for many of us, no matter what
Romain Guy or anyone else tells you. So, we need to use workarounds.</p>
<p>So, my closing advice:</p>
<ul>
<li>Don't try to kill the process. Either call <code>finish()</code> on all activities or call <code>moveTaskToBack(true)</code>.</li>
<li>If your process crashes or gets killed, and if, like me, you need the data that was in memory which is now lost, you'll need to return to the root activity. To do this, you should call <code>startActivity()</code> with an Intent that contains the <code>Intent.FLAG_ACTIVITY_CLEAR_TOP</code> flag.</li>
<li>If you want to kill your app from the Eclipse DDMS perspective, it had better not be in the foreground, or it will restart itself. You should press the Home button first, and <em>then</em> kill the process.</li>
</ul>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/android/" rel="tag">android</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../secure-hash-and-salt-for-php-passwords/" rel="prev" title="Secure hash and salt for PHP passwords">Previous post</a>
            </li>
            <li class="next">
                <a href="../dealing-with-java-lang-outofmemoryerror-permgen-space-error/" rel="next" title='Dealing with "java.lang.OutOfMemoryError: PermGen space" error'>Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
