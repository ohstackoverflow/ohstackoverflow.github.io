<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>.prop() 与 .attr() | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/prop-yu-attr/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../ru-he-zai-java-zhong-sheng-ming-he-chu-shi-hua-shu-zu/" title="如何在 Java 中声明和初始化数组？" type="text/html">
<link rel="next" href="../ru-he-zhi-zuo-chu-se-de-r-ke-zhong-xian-shi-li/" title="如何制作出色的 R 可重现示例" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content=".prop() 与 .attr()">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/prop-yu-attr/">
<meta property="og:description" content="所以jQuery 1.6有了新的功能prop()。
$(selector).click(function(){
    //instead of:
    this.getAttribute('style');
    //do i use:
    $(this).prop('style');
    //or:
    $(this).attr('style');
})


或者在这种情况下他">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-16T21:22:19+08:00">
<meta property="article:tag" content="attr">
<meta property="article:tag" content="dom">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="jquery">
<meta property="article:tag" content="prop">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">.prop() 与 .attr()</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:22:19+08:00" itemprop="datePublished" title="2023-02-16 21:22">2023-02-16 21:22</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>所以jQuery 1.6有了新的功能<code>prop()</code>。</p>
<div class="code"><pre class="code literal-block"><span class="o">$(</span><span class="nt">selector</span><span class="o">)</span><span class="p">.</span><span class="nc">click</span><span class="o">(</span><span class="nt">function</span><span class="o">()</span><span class="p">{</span>
<span class="w">    </span><span class="err">//instead</span><span class="w"> </span><span class="n">of</span><span class="p">:</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="nf">getAttribute</span><span class="p">(</span><span class="s1">'style'</span><span class="p">);</span>
<span class="w">    </span><span class="err">//do</span><span class="w"> </span><span class="err">i</span><span class="w"> </span><span class="n">use</span><span class="p">:</span>
<span class="w">    </span><span class="err">$</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="o">.</span><span class="nf">prop</span><span class="p">(</span><span class="s1">'style'</span><span class="p">);</span>
<span class="w">    </span><span class="err">//</span><span class="n">or</span><span class="p">:</span>
<span class="w">    </span><span class="err">$</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="o">.</span><span class="nb">attr</span><span class="p">(</span><span class="s1">'style'</span><span class="p">);</span>
<span class="p">}</span><span class="o">)</span>
</pre></div>

<p>或者在这种情况下他们做同样的事情吗？</p>
<p>如果我 <em>必须</em> 切换到 using ，如果我切换到 1.6，<code>prop()</code>所有旧调用都会中断？<code>attr()</code></p>
<p><strong>更新</strong></p>
<div class="code"><pre class="code literal-block">selector<span class="w"> </span>=<span class="w"> </span>'#id'

$(selector).click(function()<span class="w"> </span>{
<span class="w">    </span>//instead<span class="w"> </span>of:
<span class="w">    </span>var<span class="w"> </span>getAtt<span class="w"> </span>=<span class="w"> </span>this.getAttribute('style');
<span class="w">    </span>//do<span class="w"> </span>i<span class="w"> </span>use:
<span class="w">    </span>var<span class="w"> </span>thisProp<span class="w"> </span>=<span class="w"> </span>$(this).prop('style');
<span class="w">    </span>//or:
<span class="w">    </span>var<span class="w"> </span>thisAttr<span class="w"> </span>=<span class="w"> </span>$(this).attr('style');

<span class="w">    </span>console.log(getAtt,<span class="w"> </span>thisProp,<span class="w"> </span>thisAttr);
});


<span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">'id'</span><span class="w"> </span><span class="na">style=</span><span class="s">"color: red;background: orange;"</span><span class="nt">&gt;</span>test<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>（另请参阅此小提琴：http://jsfiddle.net/maniator/JpUF2/）</p>
<p>控制台将 记录<code>getAttribute</code>为字符串，并将 记录<code>attr</code>为字符串，但将
记录<code>prop</code>为<code>CSSStyleDeclaration</code>，为什么？这对我以后的编码有何影响？</p>
<p><br><br></p>
<h2>解答</h2>
<p><strong>2012 年 11 月 1 日更新</strong></p>
<p>我原来的回答专门适用于 jQuery 1.6。我的建议保持不变，但 jQuery 1.6.1 略有改变：面对预测的一堆损坏的网站，jQuery
团队恢复<code>attr()</code>到接近（但不完全相同）其布尔属性的旧行为。John Resig 也写了关于它的博客。我可以看到他们所处的困难，但仍然不同意他对
prefer 的建议<code>attr()</code>。</p>
<p><strong>原答案</strong></p>
<p>如果您只使用过 jQuery 而不是直接使用 DOM，那么这可能是一个令人困惑的更改，尽管它在概念上绝对是一个改进。但是，对于使用 jQuery
的无数站点而言，这并不是很好，因为这种更改会导致中断。</p>
<p>我将总结主要问题：</p>
<ul>
<li>你通常想要<code>prop()</code>而不是<code>attr()</code>。</li>
<li>在大多数情况下，<code>prop()</code>做过<code>attr()</code>去做的事。在您的代码中替换对<code>attr()</code>with 的调用<code>prop()</code>通常会起作用。</li>
<li>属性通常比属性更容易处理。属性值只能是字符串，而属性可以是任何类型。例如，<code>checked</code>属性是一个布尔值，<code>style</code>属性是一个对象，每个样式都有单独的属性，<code>size</code>属性是一个数字。</li>
<li>如果同时存在一个属性和一个同名属性，通常更新一个会更新另一个，但对于输入的某些属性，情况并非如此，例如和：对于这些属性，属性始终表示当前状态<code>value</code>，<code>checked</code>而属性（旧版本的 IE 除外）对应于输入的默认值/选中状态（反映在<code>defaultValue</code>/<code>defaultChecked</code>属性中）。</li>
<li>此更改移除了一些粘在属性和属性前面的魔法 jQuery 层，这意味着 jQuery 开发人员将不得不了解一些属性和特性之间的区别。这是一件好事。</li>
</ul>
<p>如果您是一名 jQuery 开发人员并且对属性和属性的整个业务感到困惑，您需要退后一步并稍微了解一下，因为 jQuery
不再努力让您远离这些东西。对于这个主题的权威但有点枯燥的词，有规范：DOM4，HTML DOM，DOM Level 2，DOM Level
3。Mozilla 的 DOM 文档适用于大多数现代浏览器，并且比规范更易于阅读，因此您可能会发现他们的DOM 参考资料很有帮助。有一个关于元素属性的部分。</p>
<p>作为属性如何比属性更容易处理的示例，请考虑一个最初选中的复选框。以下是执行此操作的两个可能的有效 HTML 片段：</p>
<div class="code"><pre class="code literal-block">&lt;input id="cb" type="checkbox" checked&gt;
&lt;input id="cb" type="checkbox" checked="checked"&gt;
</pre></div>

<p>那么，如何使用 jQuery 确定复选框是否被选中？查看 Stack Overflow，您通常会发现以下建议：</p>
<ul>
<li><code>if ( $("#cb").attr("checked") === true ) {...}</code></li>
<li><code>if ( $("#cb").attr("checked") == "checked" ) {...}</code></li>
<li><code>if ( $("#cb").is(":checked") ) {...}</code></li>
</ul>
<p>这实际上是世界上使用<code>checked</code>Boolean 属性做的最简单的事情，自 1995 年以来，它在每个主要的可编写脚本的浏览器中都存在并完美地工作：</p>
<p><code>if (document.getElementById("cb").checked) {...}</code></p>
<p>该属性还使选中或取消选中复选框变得微不足道：</p>
<p><code>document.getElementById("cb").checked = false</code></p>
<p>在 jQuery 1.6 中，这明确地变成了</p>
<p><code>$("#cb").prop("checked", false)</code></p>
<p><code>checked</code>使用属性编写复选框脚本的想法是无益且不必要的。该物业是你所需要的。</p>
<ul>
<li>选中或取消选中复选框的正确方法是使用<code>checked</code>属性并不明显</li>
<li>属性值反映默认状态而不是当前可见状态（除了一些旧版本的 IE，因此使事情变得更难）。该属性不会告诉您页面上的复选框是否被选中。请参阅http://jsfiddle.net/VktA6/49/。</li>
</ul>
<p><br></p>
<h3>更多建议</h3>
<p>我认为蒂姆说得很好，但让我们退一步说：</p>
<p>DOM 元素是一个对象，内存中的一个东西。与 OOP 中的大多数对象一样，它具有 <em>属性</em>
。它还单独具有在元素上定义的属性映射（通常来自浏览器读取以创建元素的标记）。元素的某些 <em>属性</em> 从具有相同或相似名称的 <em>属性</em> 中获取其 <em>初始</em>
值（从“value”属性获取其初始值；从“href”属性获取其初始值，但它不是完全相同的值；从“类”属性）。其他属性以其他方式获取其初始值：例如，属性根据其父元素获取其值；
__<code>value``href``className``parentNode``style</code>属性，无论它是否具有“样式”属性。</p>
<p>让我们考虑页面中的这个锚点<code>http://example.com/testing.html</code>：</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">'foo.html'</span><span class="w"> </span><span class="na">class=</span><span class="s">'test one'</span><span class="w"> </span><span class="na">name=</span><span class="s">'fooAnchor'</span><span class="w"> </span><span class="na">id=</span><span class="s">'fooAnchor'</span><span class="nt">&gt;</span>Hi<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>一些无偿的 ASCII 艺术（并遗漏了很多东西）：</p>
<div class="code"><pre class="code literal-block"><span class="nb">+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="c">| 锚元素 |</span>
<span class="nb">+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="c">| href: "http://example</span><span class="nt">.</span><span class="c">com/foo</span><span class="nt">.</span><span class="c">html" |</span>
<span class="c">| 名称：“fooAnchor” |</span>
<span class="c">| 编号：“fooAnchor” |</span>
<span class="c">| 类名：“测试一” |</span>
<span class="c">| 属性： |</span>
<span class="c">| href: "foo</span><span class="nt">.</span><span class="c">html" |</span>
<span class="c">| 名称：“fooAnchor” |</span>
<span class="c">| 编号：“fooAnchor” |</span>
<span class="c">| 类：“测试一” |</span>
<span class="nb">+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</pre></div>

<p>请注意，属性和属性是不同的。</p>
<p>现在，虽然它们是不同的，但因为所有这些都是进化的而不是从头开始设计的，所以如果您设置它们，许多属性会写回它们派生的属性。但并非所有人都这样做，正如您从<code>href</code>上面看到的那样，映射并不总是直接“传递价值”，有时会涉及解释。</p>
<p>当我谈论属性是对象的属性时，我并不是在抽象地谈论。下面是一些非 jQuery 代码：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'fooAnchor'</span><span class="p">);</span>
<span class="n">alert</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">href</span><span class="p">);</span><span class="w">                 </span><span class="o">//</span><span class="w"> </span><span class="n">alerts</span><span class="w"> </span><span class="s2">"http://example.com/foo.html"</span>
<span class="n">alert</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s2">"href"</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">alerts</span><span class="w"> </span><span class="s2">"foo.html"</span>
</pre></div>

<p>（这些值与大多数浏览器一致；存在一些差异。）</p>
<p>对象<code>link</code>是真实的，您可以看到访问对象的 <em>属性</em> 和访问 <em>属性</em> 之间存在真正的区别。</p>
<p>正如 Tim 所说， <strong>绝大多数</strong>
时候，我们希望使用属性。部分原因是它们的值（甚至是它们的名称）在浏览器之间往往更加一致。我们大多只想在没有相关属性（自定义属性）时使用属性，或者当我们知道对于那个特定属性，属性和属性不是
1:1（如上面的和“href” <code>href</code>） .</p>
<p>标准属性在各种 DOM 规范中列出：</p>
<ul>
<li>DOM2 HTML  <em>（大部分已过时，请参阅 HTML 规范）</em>
</li>
<li>DOM2 核心 <em>（已过时）</em>
</li>
<li>DOM3 核心 <em>（已过时）</em>
</li>
<li>DOM4</li>
</ul>
<p>这些规范有很好的索引，我建议将它们的链接放在手边；我一直在使用它们。</p>
<p>自定义属性将包括，例如，<code>data-xyz</code>您可能放置在元素上以向您的代码提供元数据的任何属性（现在这在 HTML5
中是有效的，只要您坚持使用前缀<code>data-</code>）。<code>data-xyz</code>（最新版本的 jQuery 允许您通过函数访问元素<code>data</code>，但该函数不仅仅是
<strong>属性</strong> 的访问器<code>data-xyz</code>[它做的比这更多和更少]；除非您确实需要它的功能，否则我会使用该<code>attr</code>函数进行交互有<code>data-
xyz</code>属性。）</p>
<p>该<code>attr</code>函数曾经有一些复杂的逻辑来获取他们认为您想要的东西，而不是字面上获取属性。它混淆了概念。移动到<code>prop</code>并且<code>attr</code>旨在消除它们。简而言之，在
v1.6.0 中，jQuery 在这方面走得太远了，但功能很快被添加回以处理人们在技术上应该使用时使用的<code>attr</code>常见情况。<code>attr``prop</code></p>
<p><br><br><a href="../prop-vs-attr/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/attr/" rel="tag">attr</a></li>
            <li><a class="tag p-category" href="../../categories/dom/" rel="tag">dom</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/jquery/" rel="tag">jquery</a></li>
            <li><a class="tag p-category" href="../../categories/prop/" rel="tag">prop</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../ru-he-zai-java-zhong-sheng-ming-he-chu-shi-hua-shu-zu/" rel="prev" title="如何在 Java 中声明和初始化数组？">Previous post</a>
            </li>
            <li class="next">
                <a href="../ru-he-zhi-zuo-chu-se-de-r-ke-zhong-xian-shi-li/" rel="next" title="如何制作出色的 R 可重现示例">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
