<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>“找不到或无法加载主类”是什么意思？ | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/zhao-bu-dao-huo-wu-fa-jia-zai-zhu-lei-shi-shi-yao-yi-si/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../shi-zhong-zai-xin-xuan-xiang-qia-zhong-da-kai-wen-jian/" title="始终在新选项卡中打开文件" type="text/html">
<link rel="next" href="../ru-he-zai-linux-shell-jiao-ben-zhong-ti-shi-shu-ru-shi-fou-qu-xiao/" title="如何在 Linux shell 脚本中提示输入是/否/取消？" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="“找不到或无法加载主类”是什么意思？">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/zhao-bu-dao-huo-wu-fa-jia-zai-zhu-lei-shi-shi-yao-yi-si/">
<meta property="og:description" content="新的 Java 开发人员遇到的一个常见问题是他们的程序无法运行并显示错误消息：Could not find or load main class ...
这是什么意思，是什么原因造成的，您应该如何解决？

解答
命令java &lt;class-name&gt;语法
首先，您需要了解使用java（或javaw）命令启动程序的正确方法。
正常的语法1是这样的：
    java [ &lt;options&gt; ] &lt;c">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T00:09:03+08:00">
<meta property="article:tag" content="class">
<meta property="article:tag" content="java">
<meta property="article:tag" content="program-entry-point">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">“找不到或无法加载主类”是什么意思？</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:09:03+08:00" itemprop="datePublished" title="2023-02-17 00:09">2023-02-17 00:09</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>新的 Java 开发人员遇到的一个常见问题是他们的程序无法运行并显示错误消息：<code>Could not find or load main class ...</code></p>
<p>这是什么意思，是什么原因造成的，您应该如何解决？</p>
<p><br><br></p>
<h2>解答</h2>
<h3>命令<code>java &lt;class-name&gt;</code>语法</h3>
<p>首先，您需要了解使用<code>java</code>（或<code>javaw</code>）命令启动程序的正确方法。</p>
<p>正常的语法1是这样的：</p>
<div class="code"><pre class="code literal-block">    java [ &lt;options&gt; ] &lt;class-name&gt; [&lt;arg&gt; ...]
</pre></div>

<p>其中<code>&lt;option&gt;</code>是命令行选项（以“-”字符开头），<code>&lt;class-name&gt;</code>是完全限定的 Java
类名，<code>&lt;arg&gt;</code>是传递给应用程序的任意命令行参数。</p>
<hr>
<p>1 - 在这个答案的末尾附近描述了一些其他语法。</p>
<p>类的完全限定名 (FQN) 按照惯例编写，就像在 Java 源代码中一样；例如</p>
<div class="code"><pre class="code literal-block">    packagename.packagename2.packagename3.ClassName
</pre></div>

<p>但是，某些版本的<code>java</code>命令允许您使用斜线而不是句号；例如</p>
<div class="code"><pre class="code literal-block">    packagename/packagename2/packagename3/ClassName
</pre></div>

<p>这（令人困惑地）看起来像一个文件路径名，但不是一个。请注意，术语 <em>完全限定名称</em> 是标准的 Java 术语......不是我编造的让你感到困惑的东西:-)</p>
<p>以下是命令的示例<code>java</code>：</p>
<div class="code"><pre class="code literal-block">    java -Xmx100m com.acme.example.ListUsers fred joe bert
</pre></div>

<p>以上将导致<code>java</code>命令执行以下操作：</p>
<ol>
<li>搜索<code>com.acme.example.ListUsers</code>类的编译版本。</li>
<li>加载类。</li>
<li>检查该类是否有一个带有 <em>签名的</em><code>main</code>方法， <em>返回类型</em> 和 <em>修饰符</em> 由. （注意，方法参数的名称不是 <strong>签名</strong> 的一部分。） <strong> </strong> __<code>public static void main(String[])</code> ****</li>
<li>调用该方法并将命令行参数（“fred”、“joe”、“bert”）作为<code>String[]</code>.</li>
</ol>
<h3>Java找不到类的原因</h3>
<p>当您收到消息“Could not find or load main class
...”时，这意味着第一步失败了。该<code>java</code>命令无法找到类。事实上，消息中的“...”将是要查找的 <em>完全限定的类名。</em><code>java</code></p>
<p>那么为什么它可能找不到类呢？</p>
<h3>原因 #1 - 你在类名参数上犯了一个错误</h3>
<p>第一个可能的原因是您可能提供了错误的类名。（或者...正确的类名，但格式不对。）考虑上面的例子，这里有多种指定类名的 <strong>错误方法：</strong></p>
<ul>
<li>示例 #1 - 一个简单的类名：<div class="code"><pre class="code literal-block">java ListUser
</pre></div>

</li>
</ul>
<p>当类在包中声明时，例如，您必须在命令中 <em>使用</em> 包含包名称的<code>com.acme.example</code>完整类名；例如 __<code>java</code></p>
<div class="code"><pre class="code literal-block">    java com.acme.example.ListUser
</pre></div>

<ul>
<li>
<p>示例 #2 - 文件名或路径名而不是类名：</p>
<div class="code"><pre class="code literal-block">java ListUser.class
</pre></div>

<p>java com/acme/example/ListUser.class</p>
</li>
<li>
<p>示例 #3 - 大小写不正确的类名：</p>
<div class="code"><pre class="code literal-block">java com.acme.example.listuser
</pre></div>

</li>
<li>
<p>示例 #4 - 错字</p>
<div class="code"><pre class="code literal-block">java com.acme.example.mistuser
</pre></div>

</li>
<li>
<p>示例 #5 - 源文件名（Java 11 或更高版本除外；见下文）</p>
<div class="code"><pre class="code literal-block">java ListUser.java
</pre></div>

</li>
<li>
<p>示例 #6 - 你完全忘记了类名</p>
<div class="code"><pre class="code literal-block">java lots of arguments
</pre></div>

</li>
</ul>
<h3>原因 #2 - 应用程序的类路径指定不正确</h3>
<p>第二个可能的原因是类名是正确的，但是命令<code>java</code>找不到类。要理解这一点，您需要理解“类路径”的概念。Oracle 文档对此进行了 <em>很好的</em> 解释：</p>
<ul>
<li>命令<code>java</code>文档</li>
<li>设置类路径。</li>
<li>Java 教程 - PATH 和 CLASSPATH</li>
</ul>
<p>所以...如果您正确指定了类名，接下来要检查的是您是否正确指定了类路径：</p>
<ol>
<li>阅读上面链接的三个文件。（是的......阅读它们！重要的是 Java 程序员至少 <em>了解Java 类路径机制如何工作的基础知识。）</em>
</li>
<li>查看运行命令时生效的命令行和/或 CLASSPATH 环境变量<code>java</code>。检查目录名和 JAR 文件名是否正确。</li>
<li>如果类路径中有 <em>相对</em> 路径名，请检查它们是否正确解析...从运行命令时生效的当前目录<code>java</code>。</li>
<li>检查类（错误消息中提到的）是否位于 <em>有效的</em> 类路径中。</li>
<li>请注意， Windows 与 Linux 和 Mac OS 的类路径语法 <em>不同。</em> （类路径分隔符<code>;</code>在 Windows 和<code>:</code>其他操作系统上。如果您为您的平台使用了错误的分隔符，您将不会收到明确的错误消息。相反，您将在路径上看到一个不存在的文件或目录，这些文件或目录将被静默忽略.)</li>
</ol>
<h3>原因 #2a - 类路径上有错误的目录</h3>
<p>当您将一个目录放在类路径中时，它在理论上对应于限定名称空间的根目录。 <em>通过将完全限定名称映射到路径名</em>
，类位于该根下的目录结构中。因此，例如，如果“/usr/local/acme/classes”在类路径上，那么当 JVM 查找名为
的类时，它将<code>com.acme.example.Foon</code>查找具有以下路径名的“.class”文件：</p>
<div class="code"><pre class="code literal-block">  /usr/local/acme/classes/com/acme/example/Foon.class
</pre></div>

<p>如果您将“/usr/local/acme/classes/com/acme/example”放在类路径中，那么 JVM 将无法找到该类。</p>
<h3>原因 #2b - 子目录路径与 FQN 不匹配</h3>
<p>如果您的类 FQN 是<code>com.acme.example.Foon</code>，那么 JVM
将在目录“com/acme/example”中寻找“Foon.class”：</p>
<ul>
<li>
<p>如果您的目录结构与上述模式中的包命名不匹配，JVM 将找不到您的类。</p>
</li>
<li>
<p>如果你试图通过移动它 <em>来重命名</em> 一个类，那也会失败......但异常堆栈跟踪会有所不同。它可能会说这样的话：</p>
<div class="code"><pre class="code literal-block">Caused by: java.lang.NoClassDefFoundError: &lt;path&gt; (wrong name: &lt;name&gt;)
</pre></div>

</li>
</ul>
<p>因为类文件中的 FQN 与类加载器期望找到的内容不匹配。</p>
<p>举一个具体的例子，假设：</p>
<ul>
<li>你想<code>com.acme.example.Foon</code>上课，</li>
<li>完整的文件路径是<code>/usr/local/acme/classes/com/acme/example/Foon.class</code>，</li>
<li>您当前的工作目录是<code>/usr/local/acme/classes/com/acme/example/</code>，</li>
</ul>
<p>然后：</p>
<div class="code"><pre class="code literal-block"># wrong, FQN is needed
java Foon

# wrong, there is no `com/acme/example` folder in the current working directory
java com.acme.example.Foon

# wrong, similar to above
java -classpath . com.acme.example.Foon

# fine; relative classpath set
java -classpath ../../.. com.acme.example.Foon

# fine; absolute classpath set
java -classpath /usr/local/acme/classes com.acme.example.Foon
</pre></div>

<p>笔记：</p>
<ul>
<li>在大多数 Java 版本中，该<code>-classpath</code>选项可以缩短为。检查等<code>-cp</code>的相应手册条目。<code>java``javac</code>
</li>
<li>在类路径中的绝对路径名和相对路径名之间进行选择时要仔细考虑。请记住，如果当前目录更改，相对路径名可能会“中断”。</li>
</ul>
<h3>原因 #2c - 类路径中缺少依赖项</h3>
<p>类路径需要包含您的应用程序所依赖的所有其他 <em>（</em> 非系统）类。（系统类是自动定位的，你很少需要关心这个。）为了正确加载主类，JVM 需要找到：</p>
<ul>
<li>班级本身。</li>
<li>超类层次结构中的所有类和接口（例如，请参阅类路径中存在 Java 类但启动失败并显示错误：无法找到或加载主类）</li>
<li>通过变量或变量声明、方法调用或字段访问表达式引用的所有类和接口。</li>
</ul>
<p>（注意：JLS 和 JVM 规范允许 JVM 在一定范围内“延迟”加载类，这会影响何时抛出类加载器异常。）</p>
<h3>原因 #3 - 该类已在错误的包中声明</h3>
<p>偶尔会发生有人将源代码文件放入其源代码树中的错误文件夹中，或者他们遗漏了声明<code>package</code>。如果您在 IDE 中执行此操作，IDE
的编译器将立即告诉您。同样，如果您使用合适的 Java 构建工具，该工具将以<code>javac</code>检测问题的方式运行。但是，如果您手动构建 Java
代码，编译器可能不会注意到问题，并且生成的“.class”文件不在您期望的位置。</p>
<h3>还是找不到问题？</h3>
<p>有很多东西要检查，很容易漏掉一些东西。尝试将选项添加<code>-Xdiag</code>到<code>java</code>命令行（作为
之后的第一件事<code>java</code>）。它将输出有关类加载的各种信息，这可能会为您提供有关真正问题所在的线索。</p>
<p>此外，请考虑从网站、文档等复制和粘贴不可见或非 ASCII
字符可能导致的问题。并考虑“homoglyphs”，其中两个字母或符号看起来相同......但不是。</p>
<p>You may run into this problem if you have invalid or incorrect signatures in
<code>META-INF/*.SF</code>. You can try opening up the .jar in your favorite ZIP editor,
and removing files from <code>META-INF</code> until all you have is your <code>MANIFEST.MF</code>.
However this is NOT RECOMMENDED in general. (The invalid signature may be the
result of someone having injected malware into the original signed JAR file.
If you erase the invalid signature, you are in infecting your application with
the malware!) The recommended approach is to get hold of JAR files with valid
signatures, or rebuild them from the (authentic) original source code.</p>
<p>Finally, you can apparently run into this problem if there is a syntax error
in the <code>MANIFEST.MF</code> file (see https://stackoverflow.com/a/67145190/139985).</p>
<hr>
<h3>Alternative syntaxes for <code>java</code>
</h3>
<p>There are three alternative syntaxes for the launching Java programs using the
<code>java command</code>.</p>
<ol>
<li>The syntax used for launching an "executable" JAR file is as follows:<div class="code"><pre class="code literal-block">java [ &lt;options&gt; ] -jar &lt;jar-file-name&gt; [&lt;arg&gt; ...]
</pre></div>

</li>
</ol>
<p>e.g.</p>
<div class="code"><pre class="code literal-block">    java -Xmx100m -jar /usr/local/acme-example/listuser.jar fred
</pre></div>

<p>The name of the entry-point class (i.e. <code>com.acme.example.ListUser</code>) and the
classpath are specified in the MANIFEST of the JAR file.</p>
<ol>
<li>The syntax for launching an application from a module (Java 9 and later) is as follows:<div class="code"><pre class="code literal-block">java [ &lt;options&gt; ] --module &lt;module&gt;[/&lt;mainclass&gt;] [&lt;arg&gt; ...]
</pre></div>

</li>
</ol>
<p>The name of the entrypoint class is either defined by the <code>&lt;module&gt;</code> itself,
or is given by the optional <code>&lt;mainclass&gt;</code>.</p>
<ol>
<li>From Java 11 onwards, you can use the <code>java</code> command to compile and run a single source code file using the following syntax:<div class="code"><pre class="code literal-block">java [ &lt;options&gt; ] &lt;sourcefile&gt; [&lt;arg&gt; ...]
</pre></div>

</li>
</ol>
<p>where <code>&lt;sourcefile&gt;</code> is (typically) a file with the suffix ".java".</p>
<p>For more details, please refer to the official documentation for the <code>java</code>
command for the Java release that you are using.</p>
<hr>
<h3>IDEs</h3>
<p>A typical Java IDE has support for running Java applications in the IDE JVM
itself or in a child JVM. These are <em>generally</em> immune from this particular
exception, because the IDE uses its own mechanisms to construct the runtime
classpath, identify the main class and create the <code>java</code> command line.</p>
<p>However it is still possible for this exception to occur, if you do things
behind the back of the IDE. For example, if you have previously set up an
Application Launcher for your Java app in Eclipse, and you then moved the JAR
file containing the "main" class to a different place in the file system
<em>without telling Eclipse</em> , Eclipse would unwittingly launch the JVM with an
incorrect classpath.</p>
<p>In short, if you get this problem in an IDE, check for things like stale IDE
state, broken project references or broken launcher configurations.</p>
<p>It is also possible for an IDE to simply get confused. IDE's are hugely
complicated pieces of software comprising many interacting parts. Many of
these parts adopt various caching strategies in order to make the IDE as a
whole responsive. These can sometimes go wrong, and one possible symptom is
problems when launching applications. If you suspect this could be happening,
it is worth trying other things like restarting your IDE, rebuilding the
project and so on.</p>
<hr>
<h3>Other References</h3>
<ul>
<li>From the Oracle Java Tutorials - Common Problems (and Their Solutions)</li>
</ul>
<p><br></p>
<h3>更多建议</h3>
<p>如果您的源代码名称是 HelloWorld.java，那么您的编译代码将是<code>HelloWorld.class</code>.</p>
<p>如果您使用以下方式调用它，您将收到该错误：</p>
<div class="code"><pre class="code literal-block">java HelloWorld.class
</pre></div>

<p>相反，使用这个：</p>
<div class="code"><pre class="code literal-block">java HelloWorld
</pre></div>

<p><br><br><a href="../what-does-could-not-find-or-load-main-class-mean/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/class/" rel="tag">class</a></li>
            <li><a class="tag p-category" href="../../categories/java/" rel="tag">java</a></li>
            <li><a class="tag p-category" href="../../categories/program-entry-point/" rel="tag">program-entry-point</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../shi-zhong-zai-xin-xuan-xiang-qia-zhong-da-kai-wen-jian/" rel="prev" title="始终在新选项卡中打开文件">Previous post</a>
            </li>
            <li class="next">
                <a href="../ru-he-zai-linux-shell-jiao-ben-zhong-ti-shi-shu-ru-shi-fou-qu-xiao/" rel="next" title="如何在 Linux shell 脚本中提示输入是/否/取消？">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
