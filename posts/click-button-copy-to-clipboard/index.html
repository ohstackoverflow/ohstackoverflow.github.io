<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Click button copy to clipboard | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/click-button-copy-to-clipboard/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-does-the-final-keyword-in-java-work-i-can-still-modify-an-object/" title='How does the "final" keyword in Java work? (I can still modify an object.)' type="text/html">
<link rel="next" href="../how-do-i-close-a-single-buffer-out-of-many-in-vim/" title="How do I close a single buffer (out of many) in Vim?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Click button copy to clipboard">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/click-button-copy-to-clipboard/">
<meta property="og:description" content='How do I copy the text inside a div to the clipboard? I have a div and need to
add a link which will add the text to the clipboard. Is there a solution for
this?
&lt;p class="content"&gt;Lorem Ipsum is simp'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T05:00:01+08:00">
<meta property="article:tag" content="css">
<meta property="article:tag" content="html">
<meta property="article:tag" content="jquery">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Click button copy to clipboard</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:00:01+08:00" itemprop="datePublished" title="2023-02-18 05:00">2023-02-18 05:00</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>How do I copy the text inside a div to the clipboard? I have a div and need to
add a link which will add the text to the clipboard. Is there a solution for
this?</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;p</span><span class="w"> </span><span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span>Lorem<span class="w"> </span>Ipsum<span class="w"> </span>is<span class="w"> </span>simply<span class="w"> </span>dummy<span class="w"> </span>text<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>printing<span class="w"> </span>and<span class="w"> </span>typesetting<span class="w"> </span>industry.<span class="w"> </span>Lorem<span class="w"> </span>Ipsum<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>the<span class="w"> </span>industry's<span class="w"> </span>standard<span class="w"> </span>dummy<span class="w"> </span>text<span class="w"> </span>ever<span class="w"> </span>since<span class="w"> </span>the<span class="w"> </span>1500s<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;a</span><span class="w"> </span><span class="na">class=</span><span class="s">"copy-text"</span><span class="nt">&gt;</span>copy<span class="w"> </span>Text<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>After I click copy text, then I press <code>Ctrl</code> + <code>V</code>, it must be pasted.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Edit as of 2016</strong></p>
<p>As of 2016, you can now copy text to the clipboard in most browsers because
most browsers have the ability to programmatically copy a selection of text to
the clipboard using <code>document.execCommand("copy")</code> that works off a selection.</p>
<p>As with some other actions in a browser (like opening a new window), the copy
to clipboard can only be done via a specific user action (like a mouse click).
For example, it cannot be done via a timer.</p>
<p>Here's a code example:</p>
<div class="code"><pre class="code literal-block"><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"copyButton"</span><span class="p">)</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">copyToClipboard</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"copyTarget"</span><span class="p">));</span>
<span class="p">});</span>

<span class="n">function</span><span class="w"> </span><span class="n">copyToClipboard</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">hidden</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">doesn</span><span class="s1">'t already exist</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">targetId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"_hiddenCopyText_"</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">isInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"INPUT"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"TEXTAREA"</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">origSelectionStart</span><span class="p">,</span><span class="w"> </span><span class="n">origSelectionEnd</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">copy</span>
<span class="w">        </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="p">;</span>
<span class="w">        </span><span class="n">origSelectionStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">;</span>
<span class="w">        </span><span class="n">origSelectionEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">copy</span>
<span class="w">        </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="n">targetId</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">var</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"textarea"</span><span class="p">);</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"absolute"</span><span class="p">;</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"-9999px"</span><span class="p">;</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0"</span><span class="p">;</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">targetId</span><span class="p">;</span>
<span class="w">            </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">target</span><span class="o">.</span><span class="n">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">textContent</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">currentFocus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">activeElement</span><span class="p">;</span>
<span class="w">    </span><span class="n">target</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">    </span><span class="n">target</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">length</span><span class="p">);</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selection</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">succeed</span><span class="p">;</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">succeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">execCommand</span><span class="p">(</span><span class="s2">"copy"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">succeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">focus</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentFocus</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">typeof</span><span class="w"> </span><span class="n">currentFocus</span><span class="o">.</span><span class="n">focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"function"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">currentFocus</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="n">selection</span>
<span class="w">        </span><span class="n">elem</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">origSelectionStart</span><span class="p">,</span><span class="w"> </span><span class="n">origSelectionEnd</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">content</span>
<span class="w">        </span><span class="n">target</span><span class="o">.</span><span class="n">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">succeed</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">input</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="n">px</span><span class="p">;</span>
<span class="p">}</span>


<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"text"</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"copyTarget"</span><span class="w"> </span><span class="n">value</span><span class="o">=</span><span class="s2">"Text to Copy"</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"copyButton"</span><span class="o">&gt;</span><span class="n">Copy</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"text"</span><span class="w"> </span><span class="n">placeholder</span><span class="o">=</span><span class="s2">"Click here and press Ctrl-V to see clipboard contents"</span><span class="o">&gt;</span>
</pre></div>

<hr>
<p>Here's a little more advanced demo: https://jsfiddle.net/jfriend00/v9g1x0o6/</p>
<p>And, you can also get a pre-built library that does this for you with
clipboard.js.</p>
<hr>
<p><strong>Old, historical part of answer</strong></p>
<p>Directly copying to the clipboard via JavaScript is not permitted by any
modern browser for security reasons. The most common workaround is to use a
Flash capability for copying to the clipboard that can only be triggered by a
direct user click.</p>
<p>As mentioned already, ZeroClipboard is a popular set of code for managing the
Flash object to do the copy. I've used it. If Flash is installed on the
browsing device (which rules out mobile or tablet), it works.</p>
<hr>
<p>The next most common work-around is to just place the clipboard-bound text
into an input field, move the focus to that field and advise the user to press
<code>Ctrl</code> + <code>C</code> to copy the text.</p>
<p>Other discussions of the issue and possible work-arounds can be found in these
prior Stack Overflow posts:</p>
<ul>
<li>
<p><em>How do I copy to the clipboard in JavaScript?</em></p>
</li>
<li>
<p><em>How to copy text to the client's clipboard using jQuery?</em></p>
</li>
<li>
<p><em>How can you copy to clipboard without Flash?</em></p>
</li>
</ul>
<hr>
<p>These questions asking for a modern alternative to using Flash have received
lots of question upvotes and no answers with a solution (probably because none
exist):</p>
<ul>
<li>
<p><em>HTML5 alternative to flash-based ZeroClipboard for safe copying of data to clipboard?</em></p>
</li>
<li>
<p><em>Copy to clipboard without Flash</em></p>
</li>
</ul>
<hr>
<p>Internet Explorer and Firefox used to have non-standard APIs for accessing the
clipboard, but their more modern versions have deprecated those methods
(probably for security reasons).</p>
<hr>
<p>There is a nascent standards effort to try to come up with a "safe" way to
solve the most common clipboard problems (probably requiring a specific user
action like the Flash solution requires), and it looks like it may be
partially implemented in the latest versions of Firefox and Chrome, but I
haven't confirmed that yet.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Edit as of 2016</strong></p>
<p>As of 2016, you can now copy text to the clipboard in most browsers because
most browsers have the ability to programmatically copy a selection of text to
the clipboard using <code>document.execCommand("copy")</code> that works off a selection.</p>
<p>As with some other actions in a browser (like opening a new window), the copy
to clipboard can only be done via a specific user action (like a mouse click).
For example, it cannot be done via a timer.</p>
<p>Here's a code example:</p>
<div class="code"><pre class="code literal-block"><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"copyButton"</span><span class="p">)</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">copyToClipboard</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"copyTarget"</span><span class="p">));</span>
<span class="p">});</span>

<span class="n">function</span><span class="w"> </span><span class="n">copyToClipboard</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">hidden</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">doesn</span><span class="s1">'t already exist</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">targetId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"_hiddenCopyText_"</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">isInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"INPUT"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">tagName</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"TEXTAREA"</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">origSelectionStart</span><span class="p">,</span><span class="w"> </span><span class="n">origSelectionEnd</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">copy</span>
<span class="w">        </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="p">;</span>
<span class="w">        </span><span class="n">origSelectionStart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">;</span>
<span class="w">        </span><span class="n">origSelectionEnd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selection</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">copy</span>
<span class="w">        </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="n">targetId</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">var</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"textarea"</span><span class="p">);</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"absolute"</span><span class="p">;</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"-9999px"</span><span class="p">;</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0"</span><span class="p">;</span>
<span class="w">            </span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">targetId</span><span class="p">;</span>
<span class="w">            </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">target</span><span class="o">.</span><span class="n">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="o">.</span><span class="n">textContent</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">currentFocus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">activeElement</span><span class="p">;</span>
<span class="w">    </span><span class="n">target</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">    </span><span class="n">target</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">length</span><span class="p">);</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selection</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">succeed</span><span class="p">;</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">succeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">execCommand</span><span class="p">(</span><span class="s2">"copy"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">succeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">focus</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentFocus</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">typeof</span><span class="w"> </span><span class="n">currentFocus</span><span class="o">.</span><span class="n">focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"function"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">currentFocus</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isInput</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="n">selection</span>
<span class="w">        </span><span class="n">elem</span><span class="o">.</span><span class="n">setSelectionRange</span><span class="p">(</span><span class="n">origSelectionStart</span><span class="p">,</span><span class="w"> </span><span class="n">origSelectionEnd</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">content</span>
<span class="w">        </span><span class="n">target</span><span class="o">.</span><span class="n">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">succeed</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">input</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="n">px</span><span class="p">;</span>
<span class="p">}</span>


<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"text"</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"copyTarget"</span><span class="w"> </span><span class="n">value</span><span class="o">=</span><span class="s2">"Text to Copy"</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">button</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"copyButton"</span><span class="o">&gt;</span><span class="n">Copy</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"text"</span><span class="w"> </span><span class="n">placeholder</span><span class="o">=</span><span class="s2">"Click here and press Ctrl-V to see clipboard contents"</span><span class="o">&gt;</span>
</pre></div>

<hr>
<p>Here's a little more advanced demo: https://jsfiddle.net/jfriend00/v9g1x0o6/</p>
<p>And, you can also get a pre-built library that does this for you with
clipboard.js.</p>
<hr>
<p><strong>Old, historical part of answer</strong></p>
<p>Directly copying to the clipboard via JavaScript is not permitted by any
modern browser for security reasons. The most common workaround is to use a
Flash capability for copying to the clipboard that can only be triggered by a
direct user click.</p>
<p>As mentioned already, ZeroClipboard is a popular set of code for managing the
Flash object to do the copy. I've used it. If Flash is installed on the
browsing device (which rules out mobile or tablet), it works.</p>
<hr>
<p>The next most common work-around is to just place the clipboard-bound text
into an input field, move the focus to that field and advise the user to press
<code>Ctrl</code> + <code>C</code> to copy the text.</p>
<p>Other discussions of the issue and possible work-arounds can be found in these
prior Stack Overflow posts:</p>
<ul>
<li>
<p><em>How do I copy to the clipboard in JavaScript?</em></p>
</li>
<li>
<p><em>How to copy text to the client's clipboard using jQuery?</em></p>
</li>
<li>
<p><em>How can you copy to clipboard without Flash?</em></p>
</li>
</ul>
<hr>
<p>These questions asking for a modern alternative to using Flash have received
lots of question upvotes and no answers with a solution (probably because none
exist):</p>
<ul>
<li>
<p><em>HTML5 alternative to flash-based ZeroClipboard for safe copying of data to clipboard?</em></p>
</li>
<li>
<p><em>Copy to clipboard without Flash</em></p>
</li>
</ul>
<hr>
<p>Internet Explorer and Firefox used to have non-standard APIs for accessing the
clipboard, but their more modern versions have deprecated those methods
(probably for security reasons).</p>
<hr>
<p>There is a nascent standards effort to try to come up with a "safe" way to
solve the most common clipboard problems (probably requiring a specific user
action like the Flash solution requires), and it looks like it may be
partially implemented in the latest versions of Firefox and Chrome, but I
haven't confirmed that yet.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/css/" rel="tag">css</a></li>
            <li><a class="tag p-category" href="../../categories/html/" rel="tag">html</a></li>
            <li><a class="tag p-category" href="../../categories/jquery/" rel="tag">jquery</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-does-the-final-keyword-in-java-work-i-can-still-modify-an-object/" rel="prev" title='How does the "final" keyword in Java work? (I can still modify an object.)'>Previous post</a>
            </li>
            <li class="next">
                <a href="../how-do-i-close-a-single-buffer-out-of-many-in-vim/" rel="next" title="How do I close a single buffer (out of many) in Vim?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
