<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Passing data between view controllers | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/passing-data-between-view-controllers/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../when-are-you-supposed-to-use-escape-instead-of-encodeuri-encodeuricomponent/" title="When are you supposed to use escape instead of encodeURI / encodeURIComponent?" type="text/html">
<link rel="next" href="../how-do-i-convert-a-float-number-to-a-whole-number-in-javascript/" title="How do I convert a float number to a whole number in JavaScript?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Passing data between view controllers">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/passing-data-between-view-controllers/">
<meta property="og:description" content="I'm new to iOS and Objective-C and the whole MVC paradigm and I'm stuck with
the following:
I have a view that acts as a data entry form and I want to give the user the
option to select multiple produ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T01:56:24+08:00">
<meta property="article:tag" content="ios">
<meta property="article:tag" content="model-view-controller">
<meta property="article:tag" content="objective-c">
<meta property="article:tag" content="swift">
<meta property="article:tag" content="uiviewcontroller">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Passing data between view controllers</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:56:24+08:00" itemprop="datePublished" title="2023-02-17 01:56">2023-02-17 01:56</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'm new to iOS and Objective-C and the whole MVC paradigm and I'm stuck with
the following:</p>
<p>I have a view that acts as a data entry form and I want to give the user the
option to select multiple products. The products are listed on another view
with a <code>UITableViewController</code> and I have enabled multiple selections.</p>
<p>How do I transfer the data from one view to another? I will be holding the
selections on the <code>UITableView</code> in an array, but how do I then pass that back
to the previous data entry form view so it can be saved along with the other
data to Core Data on submission of the form?</p>
<p>I have surfed around and seen some people declare an array in the app
delegate. I read something about singletons, but I don't understand what these
are and I read something about creating a data model.</p>
<p>What would be the correct way of performing this and how would I go about it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This question seems to be very popular here on Stack Overflow so I thought I
would try and give a better answer to help out people starting in the world of
iOS like me.</p>
<p><strong>Passing Data Forward</strong></p>
<p>Passing data forward to a view controller from another view controller. You
would use this method if you wanted to pass an object/value from one view
controller to another view controller that you may be pushing on to a
navigation stack.</p>
<p>For this example, we will have <code>ViewControllerA</code> and <code>ViewControllerB</code></p>
<p>To pass a <code>BOOL</code> value from <code>ViewControllerA</code> to <code>ViewControllerB</code> we would do
the following.</p>
<ol>
<li>
<p>in <code>ViewControllerB.h</code> create a property for the <code>BOOL</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@property</span><span class="w"> </span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p">)</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="n">isSomethingEnabled</span><span class="p">;</span>
</pre></div>

</li>
<li>
<p>in <code>ViewControllerA</code> you need to tell it about <code>ViewControllerB</code> so use an</p>
<div class="code"><pre class="code literal-block"> <span class="c1">#import "ViewControllerB.h"</span>
</pre></div>

</li>
</ol>
<p>Then where you want to load the view, for example, <code>didSelectRowAtIndex</code> or
some <code>IBAction</code>, you need to set the property in <code>ViewControllerB</code> before you
push it onto the navigation stack.</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">viewControllerB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithNib</span><span class="o">:</span><span class="s">@"ViewControllerB"</span><span class="w"> </span><span class="n">bundle</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="w">    </span><span class="n">viewControllerB</span><span class="p">.</span><span class="n">isSomethingEnabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">    </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">pushViewController</span><span class="o">:</span><span class="n">viewControllerB</span><span class="w"> </span><span class="n">animated</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
</pre></div>

<p>This will set <code>isSomethingEnabled</code> in <code>ViewControllerB</code> to <code>BOOL</code> value <code>YES</code>.</p>
<p><strong>Passing Data Forward using Segues</strong></p>
<p>If you are using Storyboards you are most likely using segues and will need
this procedure to pass data forward. This is similar to the above but instead
of passing the data before you push the view controller, you use a method
called</p>
<div class="code"><pre class="code literal-block">-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
</pre></div>

<p>So to pass a <code>BOOL</code> from <code>ViewControllerA</code> to <code>ViewControllerB</code> we would do
the following:</p>
<ol>
<li>
<p>in <code>ViewControllerB.h</code> create a property for the <code>BOOL</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@property</span><span class="w"> </span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p">)</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="n">isSomethingEnabled</span><span class="p">;</span>
</pre></div>

</li>
<li>
<p>in <code>ViewControllerA</code> you need to tell it about <code>ViewControllerB</code>, so use an</p>
<div class="code"><pre class="code literal-block"> <span class="c1">#import "ViewControllerB.h"</span>
</pre></div>

</li>
<li>
<p>Create the segue from <code>ViewControllerA</code> to <code>ViewControllerB</code> on the storyboard and give it an identifier. In this example we'll call it <code>"showDetailSegue"</code></p>
</li>
<li>
<p>Next, we need to add the method to <code>ViewControllerA</code> that is called when any segue is performed. Because of this we need to detect which segue was called and then do something. In our example, we will check for <code>"showDetailSegue"</code> and if that's performed, we will pass our <code>BOOL</code> value to <code>ViewControllerB</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">prepareForSegue</span><span class="o">:</span><span class="p">(</span><span class="bp">UIStoryboardSegue</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="w"> </span><span class="n">sender</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span><span class="p">{</span>
<span class="w"> </span><span class="k">if</span><span class="p">([</span><span class="n">segue</span><span class="p">.</span><span class="n">identifier</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="s">@"showDetailSegue"</span><span class="p">]){</span>
<span class="w">     </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="p">.</span><span class="n">destinationViewController</span><span class="p">;</span>
<span class="w">     </span><span class="n">controller</span><span class="p">.</span><span class="n">isSomethingEnabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>

<p>}</p>
</li>
</ol>
<p>If you have your views embedded in a navigation controller, you need to change
the method above slightly to the following</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">prepareForSegue</span><span class="o">:</span><span class="p">(</span><span class="bp">UIStoryboardSegue</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="w"> </span><span class="n">sender</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">([</span><span class="n">segue</span><span class="p">.</span><span class="n">identifier</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="s">@"showDetailSegue"</span><span class="p">]){</span>
<span class="w">            </span><span class="bp">UINavigationController</span><span class="w"> </span><span class="o">*</span><span class="n">navController</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="bp">UINavigationController</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">segue</span><span class="p">.</span><span class="n">destinationViewController</span><span class="p">;</span>
<span class="w">            </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">navController</span><span class="p">.</span><span class="n">topViewController</span><span class="p">;</span>
<span class="w">            </span><span class="n">controller</span><span class="p">.</span><span class="n">isSomethingEnabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>

<p>This will set <code>isSomethingEnabled</code> in <code>ViewControllerB</code> to <code>BOOL</code> value <code>YES</code>.</p>
<p><strong>Passing Data Back</strong></p>
<p>To pass data back from <code>ViewControllerB</code> to <code>ViewControllerA</code> you need to use
<em>Protocols and Delegates</em> or <em>Blocks</em> , the latter can be used as a loosely
coupled mechanism for callbacks.</p>
<p>To do this we will make <code>ViewControllerA</code> a delegate of <code>ViewControllerB</code>.
This allows <code>ViewControllerB</code> to send a message back to <code>ViewControllerA</code>
enabling us to send data back.</p>
<p>For <code>ViewControllerA</code> to be a delegate of <code>ViewControllerB</code> it must conform to
<code>ViewControllerB</code>'s protocol which we have to specify. This tells
<code>ViewControllerA</code> which methods it must implement.</p>
<ol>
<li>
<p>In <code>ViewControllerB.h</code>, below the <code>#import</code>, but above <code>@interface</code> you specify the protocol.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@class</span><span class="w"> </span><span class="n">ViewControllerB</span><span class="p">;</span>
</pre></div>

<p>@protocol ViewControllerBDelegate <nsobject>
 - (void)addItemViewController:(ViewControllerB <em>)controller didFinishEnteringItem:(NSString </em>)item;
 @end</nsobject></p>
</li>
<li>
<p>Next still in the <code>ViewControllerB.h</code>, you need to set up a <code>delegate</code> property and synthesize in <code>ViewControllerB.m</code></p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@property</span><span class="w"> </span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span><span class="w"> </span><span class="n">weak</span><span class="p">)</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">&lt;</span><span class="n">ViewControllerBDelegate</span><span class="o">&gt;</span><span class="w"> </span><span class="n">delegate</span><span class="p">;</span>
</pre></div>

</li>
<li>
<p>In <code>ViewControllerB</code> we call a message on the <code>delegate</code> when we pop the view controller.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">itemToPassBack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@"Pass this value back to ViewControllerA"</span><span class="p">;</span>
</pre></div>

<p>[self.delegate addItemViewController:self didFinishEnteringItem:itemToPassBack];</p>
</li>
<li>
<p>That's it for <code>ViewControllerB</code>. Now in <code>ViewControllerA.h</code>, tell <code>ViewControllerA</code> to import <code>ViewControllerB</code> and conform to its protocol.</p>
<div class="code"><pre class="code literal-block"> <span class="c1">#import "ViewControllerB.h"</span>
</pre></div>

<p>@interface ViewControllerA : UIViewController <viewcontrollerbdelegate></viewcontrollerbdelegate></p>
</li>
<li>
<p>In <code>ViewControllerA.m</code> implement the following method from our protocol</p>
<div class="code"><pre class="code literal-block"> - (void)addItemViewController:(ViewControllerB *)controller didFinishEnteringItem:(NSString *)item
</pre></div>

<p>{
     NSLog(@"This was returned from ViewControllerB %@", item);
 }</p>
</li>
<li>
<p>Before pushing <code>viewControllerB</code> to navigation stack we need to tell <code>ViewControllerB</code> that <code>ViewControllerA</code> is its delegate, otherwise we will get an error.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="n">ViewControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">viewControllerB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">ViewControllerB</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithNib</span><span class="o">:</span><span class="s">@"ViewControllerB"</span><span class="w"> </span><span class="n">bundle</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
</pre></div>

<p>viewControllerB.delegate = self
 [[self navigationController] pushViewController:viewControllerB animated:YES];</p>
</li>
</ol>
<hr>
<h4>References</h4>
<ol>
<li>Using Delegation to Communicate With Other View Controllers in the <em>View Controller Programming Guide</em>
</li>
<li>Delegate Pattern</li>
</ol>
<p><strong>NSNotification center</strong></p>
<p>It's another way to pass data.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Add an observer in controller(s) where you want to receive data</span>
<span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">addObserver</span><span class="o">:</span><span class="nb">self</span><span class="w"> </span><span class="n">selector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">handleDeepLinking</span><span class="o">:</span><span class="p">)</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="s">@"handleDeepLinking"</span><span class="w"> </span><span class="n">object</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>

<span class="p">-(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">handleDeepLinking:</span><span class="p">(</span><span class="bp">NSNotification</span><span class="w"> </span><span class="o">*</span><span class="p">)</span> <span class="nv">notification</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">id</span><span class="w"> </span><span class="n">someObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">notification</span><span class="p">.</span><span class="n">object</span><span class="w"> </span><span class="c1">// Some custom object that was passed with notification fire.</span>
<span class="p">}</span>

<span class="c1">// Post notification</span>
<span class="kt">id</span><span class="w"> </span><span class="n">someObject</span><span class="p">;</span>
<span class="p">[</span><span class="bp">NSNotificationCenter</span><span class="p">.</span><span class="n">defaultCenter</span><span class="w"> </span><span class="n">postNotificationName</span><span class="o">:</span><span class="s">@"handleDeepLinking"</span><span class="w"> </span><span class="n">object</span><span class="o">:</span><span class="n">someObject</span><span class="p">];</span>
</pre></div>

<p><strong>Passing Data back from one class to another</strong> (A class can be any
controller, Network/session manager, UIView subclass or any other class)</p>
<p><em>Blocks are anonymous functions.</em></p>
<p>This example passes data from <strong>Controller B</strong> to <strong>Controller A</strong></p>
<p><strong>Define a block</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">@property</span><span class="w"> </span><span class="n">void</span><span class="p">(</span><span class="o">^</span><span class="n">selectedVoucherBlock</span><span class="p">)(</span><span class="n">NSString</span><span class="w"> </span><span class="o">*</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">ContollerA</span><span class="p">.</span><span class="n">h</span>
</pre></div>

<p><strong>Add block handler (listener)</strong></p>
<p>Where you need a value (for example, you need your API response in ControllerA
or you need ContorllerB data on A)</p>
<div class="code"><pre class="code literal-block"><span class="c1">// In ContollerA.m</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">];</span>
<span class="w">    </span><span class="n">__unsafe_unretained</span><span class="w"> </span><span class="k">typeof</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span><span class="w"> </span><span class="n">weakSelf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">;</span>
<span class="w">    </span><span class="nb">self</span><span class="p">.</span><span class="n">selectedVoucherBlock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">voucher</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">weakSelf</span><span class="o">-&gt;</span><span class="n">someLabel</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">voucher</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</pre></div>

<p><strong>Go to Controller B</strong></p>
<div class="code"><pre class="code literal-block"><span class="bp">UIStoryboard</span><span class="w"> </span><span class="o">*</span><span class="n">storyboard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">UIStoryboard</span><span class="w"> </span><span class="n">storyboardWithName</span><span class="o">:</span><span class="s">@"Main"</span><span class="w"> </span><span class="n">bundle</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="n">ControllerB</span><span class="w"> </span><span class="o">*</span><span class="n">vc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">storyboard</span><span class="w"> </span><span class="n">instantiateViewControllerWithIdentifier</span><span class="o">:</span><span class="s">@"ControllerB"</span><span class="p">];</span>
<span class="n">vc</span><span class="p">.</span><span class="n">sourceVC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">;</span>
<span class="w">    </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">navigationController</span><span class="w"> </span><span class="n">pushViewController</span><span class="o">:</span><span class="n">vc</span><span class="w"> </span><span class="n">animated</span><span class="o">:</span><span class="nb">NO</span><span class="p">];</span>
</pre></div>

<p><strong>Fire block</strong></p>
<div class="code"><pre class="code literal-block"><span class="nt">-</span><span class="o">(</span><span class="nt">void</span><span class="o">)</span><span class="nt">tableView</span><span class="o">:(</span><span class="nt">UITableView</span><span class="w"> </span><span class="o">*)</span><span class="nt">tableView</span><span class="w"> </span><span class="nt">didSelectRowAtIndexPath</span><span class="o">:</span>
<span class="o">(</span><span class="nt">NSIndexPath</span><span class="w"> </span><span class="o">*)</span><span class="nt">indexPath</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">NSString</span><span class="w"> </span><span class="err">*voucher</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">vouchersArray</span><span class="cp">[</span><span class="nx">indexPath.row</span><span class="cp">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">if</span><span class="w"> </span><span class="err">(sourceVC.selectVoucherBlock)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">sourceVC.selectVoucherBlock(voucher)</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="cp">[</span><span class="bp">self.</span><span class="nx nx-Member">navigationController</span><span class="w"> </span><span class="nx">popToViewController</span><span class="p">:</span><span class="nx">sourceVC</span><span class="w"> </span><span class="nx">animated</span><span class="p">:</span><span class="nx">YES</span><span class="cp">]</span><span class="o">;</span>
<span class="err">}</span>
</pre></div>

<p>Another Working Example for Blocks</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Swift</h2>
<p>There are tons and tons of explanations here and around Stack Overflow, but if
you are a beginner just trying to get something basic to work, try watching
this YouTube tutorial (It's what helped me to finally understand how to do
it).</p>
<ul>
<li>YouTube tutorial: <em>How to send data through segue (Swift)</em>
</li>
</ul>
<h2>Passing data forward to the next View Controller</h2>
<p>The following is an example based on the video. The idea is to pass a string
from the text field in the First View Controller to the label in the Second
View Controller.</p>
<p><img alt="Enter image description here" src="../../images/tpcnS.png"></p>
<p>Create the storyboard layout in the Interface Builder. To make the segue, you
just <code>Control</code> click on the button and drag over to the Second View
Controller.</p>
<p><strong>First View Controller</strong></p>
<p>The code for the First View Controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="k">class</span> <span class="nc">FirstViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">textField</span><span class="p">:</span> <span class="n">UITextField</span><span class="err">!</span>

    <span class="o">//</span> <span class="n">This</span> <span class="n">function</span> <span class="ow">is</span> <span class="n">called</span> <span class="n">before</span> <span class="n">the</span> <span class="n">segue</span>
    <span class="n">override</span> <span class="n">func</span> <span class="n">prepare</span><span class="p">(</span><span class="k">for</span> <span class="n">segue</span><span class="p">:</span> <span class="n">UIStoryboardSegue</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">Any</span><span class="err">?</span><span class="p">)</span> <span class="p">{</span>

        <span class="o">//</span> <span class="n">Get</span> <span class="n">a</span> <span class="n">reference</span> <span class="n">to</span> <span class="n">the</span> <span class="n">second</span> <span class="n">view</span> <span class="n">controller</span>
        <span class="n">let</span> <span class="n">secondViewController</span> <span class="o">=</span> <span class="n">segue</span><span class="o">.</span><span class="n">destination</span> <span class="k">as</span><span class="err">!</span> <span class="n">SecondViewController</span>

        <span class="o">//</span> <span class="n">Set</span> <span class="n">a</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">second</span> <span class="n">view</span> <span class="n">controller</span> <span class="k">with</span> <span class="n">the</span> <span class="n">String</span> <span class="n">to</span> <span class="k">pass</span>
        <span class="n">secondViewController</span><span class="o">.</span><span class="n">receivedString</span> <span class="o">=</span> <span class="n">textField</span><span class="o">.</span><span class="n">text</span><span class="err">!</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p><strong>Second View Controller</strong></p>
<p>And the code for the Second View Controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="k">class</span> <span class="nc">SecondViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">label</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>

    <span class="o">//</span> <span class="n">This</span> <span class="n">variable</span> <span class="n">will</span> <span class="n">hold</span> <span class="n">the</span> <span class="n">data</span> <span class="n">being</span> <span class="n">passed</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">First</span> <span class="n">View</span> <span class="n">Controller</span>
    <span class="n">var</span> <span class="n">receivedString</span> <span class="o">=</span> <span class="s2">""</span>

    <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="o">//</span> <span class="n">Used</span> <span class="n">the</span> <span class="n">text</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">First</span> <span class="n">View</span> <span class="n">Controller</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">label</span>
        <span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">receivedString</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p><strong>Don't forget</strong></p>
<ul>
<li>Hook up the outlets for the <code>UITextField</code> and the <code>UILabel</code>.</li>
<li>Set the first and second View Controllers to the appropriate Swift files in Interface Builder.</li>
</ul>
<h2>Passing data back to the previous View Controller</h2>
<p>To pass data back from the second view controller to the first view
controller, you use a protocol and a delegate. This video is a very clear walk
though of that process:</p>
<ul>
<li>YouTube tutorial: iOS Swift Basics Tutorial: Protocols and Delegates But also read this post to make sure you don't get into a strong reference cycle.</li>
</ul>
<p>The following is an example based on the video (with a few modifications).</p>
<p><img alt="Enter image description here" src="../../images/ypAga.png"></p>
<p>Create the storyboard layout in the Interface Builder. Again, to make the
segue, you just <code>Control</code> drag from the button to the Second View Controller.
Set the segue identifier to <code>showSecondViewController</code>. Also, don't forget to
hook up the outlets and actions using the names in the following code.</p>
<p><strong>First View Controller</strong></p>
<p>The code for the First View Controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="k">class</span> <span class="nc">FirstViewController</span><span class="p">:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">DataEnteredDelegate</span> <span class="p">{</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">label</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>

    <span class="n">override</span> <span class="n">func</span> <span class="n">prepare</span><span class="p">(</span><span class="k">for</span> <span class="n">segue</span><span class="p">:</span> <span class="n">UIStoryboardSegue</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">Any</span><span class="err">?</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">segue</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="s2">"showSecondViewController"</span> <span class="p">{</span>
            <span class="n">let</span> <span class="n">secondViewController</span> <span class="o">=</span> <span class="n">segue</span><span class="o">.</span><span class="n">destination</span> <span class="k">as</span><span class="err">!</span> <span class="n">SecondViewController</span>
            <span class="n">secondViewController</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">func</span> <span class="n">userDidEnterInformation</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">label</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">info</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Note the use of our custom <code>DataEnteredDelegate</code> protocol.</p>
<p><strong>Second View Controller and Protocol</strong></p>
<p>The code for the second view controller is</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="o">//</span> <span class="n">Protocol</span> <span class="n">used</span> <span class="k">for</span> <span class="n">sending</span> <span class="n">data</span> <span class="n">back</span>
<span class="n">protocol</span> <span class="n">DataEnteredDelegate</span><span class="p">:</span> <span class="n">AnyObject</span> <span class="p">{</span>
    <span class="n">func</span> <span class="n">userDidEnterInformation</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">SecondViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>

    <span class="o">//</span> <span class="n">Making</span> <span class="n">this</span> <span class="n">a</span> <span class="n">weak</span> <span class="n">variable</span><span class="p">,</span> <span class="n">so</span> <span class="n">that</span> <span class="n">it</span> <span class="n">won</span><span class="s1">'t create a strong reference cycle</span>
    <span class="n">weak</span> <span class="n">var</span> <span class="n">delegate</span><span class="p">:</span> <span class="n">DataEnteredDelegate</span><span class="err">?</span> <span class="o">=</span> <span class="n">nil</span>

    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">textField</span><span class="p">:</span> <span class="n">UITextField</span><span class="err">!</span>

    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">sendTextBackButton</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>

        <span class="o">//</span> <span class="n">Call</span> <span class="n">this</span> <span class="n">method</span> <span class="n">on</span> <span class="n">whichever</span> <span class="k">class</span> <span class="nc">implements</span> <span class="n">our</span> <span class="n">delegate</span> <span class="n">protocol</span>
        <span class="n">delegate</span><span class="err">?</span><span class="o">.</span><span class="n">userDidEnterInformation</span><span class="p">(</span><span class="n">info</span><span class="p">:</span> <span class="n">textField</span><span class="o">.</span><span class="n">text</span><span class="err">!</span><span class="p">)</span>

        <span class="o">//</span> <span class="n">Go</span> <span class="n">back</span> <span class="n">to</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">view</span> <span class="n">controller</span>
        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">navigationController</span><span class="err">?</span><span class="o">.</span><span class="n">popViewController</span><span class="p">(</span><span class="n">animated</span><span class="p">:</span> <span class="n">true</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Note that the <code>protocol</code> is outside of the View Controller class.</p>
<p>That's it. Running the app now, you should be able to send data back from the
second view controller to the first.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/ios/" rel="tag">ios</a></li>
            <li><a class="tag p-category" href="../../categories/model-view-controller/" rel="tag">model-view-controller</a></li>
            <li><a class="tag p-category" href="../../categories/objective-c/" rel="tag">objective-c</a></li>
            <li><a class="tag p-category" href="../../categories/swift/" rel="tag">swift</a></li>
            <li><a class="tag p-category" href="../../categories/uiviewcontroller/" rel="tag">uiviewcontroller</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../when-are-you-supposed-to-use-escape-instead-of-encodeuri-encodeuricomponent/" rel="prev" title="When are you supposed to use escape instead of encodeURI / encodeURIComponent?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-do-i-convert-a-float-number-to-a-whole-number-in-javascript/" rel="next" title="How do I convert a float number to a whole number in JavaScript?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
