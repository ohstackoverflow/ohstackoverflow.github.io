<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What is a blob URL and why it is used? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-is-a-blob-url-and-why-it-is-used/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-nicely-format-floating-numbers-to-string-without-unnecessary-decimal-0-s/" title="How to nicely format floating numbers to string without unnecessary decimal 0's" type="text/html">
<link rel="next" href="../javascript-add-leading-zeroes-to-date/" title="Javascript add leading zeroes to date" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What is a blob URL and why it is used?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-is-a-blob-url-and-why-it-is-used/">
<meta property="og:description" content='I am having trouble with blob URLs.
I was searching for src of a video tag on YouTube and I found that the
video src was like:
src="blob:https://video_url"


I opened the blob URL that was in src of t'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T01:21:00+08:00">
<meta property="article:tag" content="bloburls">
<meta property="article:tag" content="html5-video">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What is a blob URL and why it is used?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:21:00+08:00" itemprop="datePublished" title="2023-02-18 01:21">2023-02-18 01:21</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I am having trouble with <code>blob</code> URLs.</p>
<p>I was searching for <code>src</code> of a <code>video</code> tag on YouTube and I found that the
video <code>src</code> was like:</p>
<div class="code"><pre class="code literal-block">src="blob:https://video_url"
</pre></div>

<p>I opened the <code>blob</code> URL that was in <code>src</code> of the video, but it gave an error.
I can't open the link, but it was working with the <code>src</code> tag. How is this
possible?</p>
<p>I have a few questions:</p>
<ul>
<li>What is a <code>blob</code> URL?</li>
<li>Why it is used?</li>
<li>Can I make my own <code>blob</code> URL on a server?</li>
</ul>
<p>Any additional details about <code>blob</code> URLs would be helpful as well.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Blob URLs (ref W3C, official name) or Object-URLs (ref. MDN and method name)
are used with a Blob or a File object.</p>
<blockquote>
<p>src="blob:https://crap.crap" I opened the blob url that was in src of video
it gave a error and i can't open but was working with the src tag how it is
possible?</p>
</blockquote>
<p>Blob URLs can only be generated internally by the browser.
<code>URL.createObjectURL()</code> will create a special reference to the Blob or File
object which later can be released using <code>URL.revokeObjectURL()</code>. These URLs
can only be used locally in the single instance of the browser and in the same
session (ie. the life of the page/document).</p>
<blockquote>
<p>What is blob url?<br>
 Why it is used?</p>
</blockquote>
<p>Blob URL/Object URL is a pseudo protocol to allow Blob and File objects to be
used as URL source for things like images, download links for binary data and
so forth.</p>
<p>For example, you can not hand an Image object raw byte-data as it would not
know what to do with it. It requires for example images (which are binary
data) to be loaded via URLs. This applies to anything that require an URL as
source. Instead of uploading the binary data, then serve it back via an URL it
is better to use an extra local step to be able to access the data directly
without going via a server.</p>
<p>It is also a better alternative to Data-URI which are strings encoded as
Base-64. The problem with Data-URI is that each char takes two bytes in
JavaScript. On top of that a 33% is added due to the Base-64 encoding. Blobs
are pure binary byte-arrays which does not have any significant overhead as
Data-URI does, which makes them faster and smaller to handle.</p>
<blockquote>
<p>Can i make my own blob url on a server?</p>
</blockquote>
<p>No, Blob URLs/Object URLs can only be made internally in the browser. You can
make Blobs and get File object via the File Reader API, although BLOB just
means Binary Large OBject and is stored as byte-arrays. A client can request
the data to be sent as either ArrayBuffer or as a Blob. The server should send
the data as pure binary data. Databases often uses Blob to describe binary
objects as well, and in essence we are talking basically about byte-arrays.</p>
<blockquote>
<p>if you have then Additional detail</p>
</blockquote>
<p>You need to encapsulate the binary data as a BLOB object, then use
<code>URL.createObjectURL()</code> to generate a local URL for it:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Blob</span><span class="p">([</span><span class="n">arrayBufferWithPNG</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="p">}),</span>
<span class="w">    </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">URL</span><span class="o">.</span><span class="n">createObjectURL</span><span class="p">(</span><span class="n">blob</span><span class="p">),</span>
<span class="w">    </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Image</span><span class="p">();</span>

<span class="n">img</span><span class="o">.</span><span class="n">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">URL</span><span class="o">.</span><span class="n">revokeObjectURL</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">src</span><span class="p">);</span><span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">clean</span><span class="o">-</span><span class="n">up</span><span class="w"> </span><span class="n">memory</span>
<span class="w">    </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">DOM</span>
<span class="p">}</span>

<span class="n">img</span><span class="o">.</span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url</span><span class="p">;</span><span class="w">                         </span><span class="o">//</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="s2">"stream"</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">bytes</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This Javascript function supports to show the difference between the <strong>Blob</strong>
File API and the <strong>Data</strong> API to download a <strong>JSON</strong> file in the client
browser:</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Save</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">HTML</span><span class="w"> </span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="n">temporary</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Blob</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="n">author</span><span class="w"> </span><span class="n">Loreto</span><span class="w"> </span><span class="n">Parisi</span>
<span class="w"> </span><span class="o">*/</span>

<span class="k">var</span><span class="w"> </span><span class="n">saveAsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="w"> </span><span class="n">fileContents</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">typeof</span><span class="p">(</span><span class="n">Blob</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">'undefined'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Alternative</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">Blob</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">textFileAsBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Blob</span><span class="p">([</span><span class="n">fileContents</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s1">'text/plain'</span><span class="p">});</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">downloadLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span>
<span class="w">        </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">download</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fileName</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">webkitURL</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">webkitURL</span><span class="o">.</span><span class="n">createObjectURL</span><span class="p">(</span><span class="n">textFileAsBlob</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">URL</span><span class="o">.</span><span class="n">createObjectURL</span><span class="p">(</span><span class="n">textFileAsBlob</span><span class="p">);</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="p">);</span>
<span class="w">            </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"none"</span><span class="p">;</span>
<span class="w">            </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">downloadLink</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">downloadLink</span><span class="o">.</span><span class="n">click</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Alternative</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">Data</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">pp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">'a'</span><span class="p">);</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">'href'</span><span class="p">,</span><span class="w"> </span><span class="s1">'data:text/plain;charset=utf-8,'</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="n">encodeURIComponent</span><span class="p">(</span><span class="n">fileContents</span><span class="p">));</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">'download'</span><span class="p">,</span><span class="w"> </span><span class="n">fileName</span><span class="p">);</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">onclick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">target</span><span class="p">);</span>
<span class="w">        </span><span class="n">pp</span><span class="o">.</span><span class="n">click</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">saveAsFile</span>

<span class="o">/*</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="o">*/</span>
<span class="k">var</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w"> </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="s2">"car"</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">};</span>
<span class="n">saveAsFile</span><span class="p">(</span><span class="s1">'out.json'</span><span class="p">,</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span>
</pre></div>

<p>The function is called like <code>saveAsFile('out.json', jsonString);</code>. It will
create a ByteStream immediately recognized by the browser that will download
the generated file directly using the File API <code>URL.createObjectURL</code>.</p>
<p>In the <code>else</code>, it is possible to see the same result obtained via the <code>href</code>
element plus the Data API, but this has several limitations that the Blob API
has not.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/bloburls/" rel="tag">bloburls</a></li>
            <li><a class="tag p-category" href="../../categories/html5-video/" rel="tag">html5-video</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-nicely-format-floating-numbers-to-string-without-unnecessary-decimal-0-s/" rel="prev" title="How to nicely format floating numbers to string without unnecessary decimal 0's">Previous post</a>
            </li>
            <li class="next">
                <a href="../javascript-add-leading-zeroes-to-date/" rel="next" title="Javascript add leading zeroes to date">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
