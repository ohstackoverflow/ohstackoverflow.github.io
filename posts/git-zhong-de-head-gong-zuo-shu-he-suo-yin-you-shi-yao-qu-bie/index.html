<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Git 中的 HEAD、工作树和索引有什么区别？ | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/git-zhong-de-head-gong-zuo-shu-he-suo-yin-you-shi-yao-qu-bie/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../ru-he-zai-bash-jiao-ben-zhong-shi-yong-gdb-yun-xing-dai-you-ming-ling-xing-can-shu-de-cheng-xu/" title="如何在 Bash 脚本中使用 GDB 运行带有命令行参数的程序？" type="text/html">
<link rel="next" href="../ru-he-zai-java-zhong-jiang-hao-miao-zhuan-huan-wei-x-fen-zhong-x-miao/" title="如何在 Java 中将毫秒转换为“X 分钟，x 秒”？" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Git 中的 HEAD、工作树和索引有什么区别？">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/git-zhong-de-head-gong-zuo-shu-he-suo-yin-you-shi-yao-qu-bie/">
<meta property="og:description" content="有人能告诉我 Git 中 HEAD、工作树和索引之间的区别吗？
据我了解，它们都是不同分支的名称。我的假设正确吗？
我找到了这个：

单个 git 存储库可以跟踪任意数量的分支，但您的工作树仅与其中一个分支（“当前”或“已签出”分支）相关联，并且 HEAD 指向该分支。

这是否意味着 HEAD 和工作树总是相同的？

解答
关于这些主题的其他一些很好的参考资料：

我的 Git 工作流程



">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T23:13:14+08:00">
<meta property="article:tag" content="git">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Git 中的 HEAD、工作树和索引有什么区别？</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:13:14+08:00" itemprop="datePublished" title="2023-02-17 23:13">2023-02-17 23:13</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>有人能告诉我 Git 中 HEAD、工作树和索引之间的区别吗？</p>
<p>据我了解，它们都是不同分支的名称。我的假设正确吗？</p>
<p>我找到了这个：</p>
<blockquote>
<p>单个 git 存储库可以跟踪任意数量的分支，但您的工作树仅与其中一个分支（“当前”或“已签出”分支）相关联，并且 HEAD 指向该分支。</p>
</blockquote>
<p>这是否意味着 HEAD 和工作树总是相同的？</p>
<p><br><br></p>
<h2>解答</h2>
<p>关于这些主题的其他一些很好的参考资料：</p>
<ul>
<li>我的 Git 工作流程</li>
</ul>
<p><img alt="工作流程" src="../../images/cZkcV.jpg"></p>
<blockquote>
<p>我使用索引作为 <em>检查点</em> 。</p>
<p>当我即将做出可能出错的改变时——当我想探索某个方向时，我不确定我是否可以坚持下去，甚至不确定它是否是一个好主意，例如概念上要求苛刻的重构或改变表示类型——我将我的工作检查点放入索引中。</p>
<p>如果这是我自上次提交以来所做的第一个更改，那么我可以使用本地存储库作为检查点，但通常我会得到一个概念上的更改，我将其作为一组小步骤来实施。<br>
我想在每个步骤之后检查点，但保存提交，直到我回到工作、测试代码。</p>
<p>笔记：</p>
<ol>
<li>
<p>工作 <strong>区</strong> 是您查看和编辑的（源）文件的目录树。</p>
</li>
<li>
<p>索引是 中的单个大型二进制文件，它列出了当前分支中的所有文件、它们的 <em>sha1</em> 校验和、时间戳和文件名——它不是另一个包含文件副本的目录
<strong>。</strong><code>&lt;baseOfRepo&gt;/.git/index</code> __</p>
</li>
<li>
<p>本地 <strong>存储库</strong> 是一个隐藏目录 (
<code>.git</code>)，包括一个<code>objects</code>目录，其中包含存储库中每个文件的所有版本（本地分支和远程分支的副本）作为压缩的“blob”文件。</p>
</li>
</ol>
<p>不要将上图中表示的四个“磁盘”视为 repo 文件的单独副本。</p>
</blockquote>
<ul>
<li>为什么 Git 比 X 好</li>
</ul>
<p><img alt="3个州" src="../../images/CYO5D.jpg"></p>
<ul>
<li>Git 是你的朋友而不是敌人 Vol. 3：参考和索引</li>
</ul>
<blockquote>
<p>它们基本上是 Git 提交的命名引用。有两种主要类型的 refs：tags 和 heads。</p>
<ul>
<li>标签是标记历史上特定点的固定引用，例如 v2.6.29。</li>
<li>相反，脑袋总是被移动来反映项目开发的当前位置。
</li>
</ul>
<p><img alt="提交" src="../../images/ipLiO.jpg"></p>
</blockquote>
<p>（注意：正如Timo Huovinen评论的那样，这些箭头不是提交指向的内容，而是 <strong>工作流顺序</strong> ，基本上显示箭头是第一次提交和最后一次提交）
****<code>1 -&gt; 2 -&gt; 3 -&gt; 4``1``4</code></p>
<blockquote>
<p>现在我们知道项目中发生了什么。<br>
但是要知道这里发生了什么，现在有一个名为 HEAD 的特殊引用。它有两个主要目的：</p>
<ul>
<li>它告诉 Git 在你结帐时从哪个提交中获取文件，以及</li>
<li>它告诉 Git 在你提交时把新提交放在哪里。
</li>
</ul>
<p>当您运行<code>git checkout ref</code>它时<code>HEAD</code>，它会指向您指定的 ref 并从中提取文件。当您运行时<code>git
commit</code>，它会创建一个新的提交对象，该对象成为 current 的子对象<code>HEAD</code>。通常<code>HEAD</code>指向其中一个头部，所以一切正常。</p>
<p><img alt="查看" src="../../images/u2kuU.jpg"></p>
</blockquote>
<p><br></p>
<h3>更多建议</h3>
<p><strong>HEAD</strong> （当前分支或当前分支上的最后提交状态）、 <strong>索引</strong> （又名暂存区）和 <strong>工作树</strong> （检出 <em>文件</em> 的状态）之间的区别在“1.3
Git 基础知识”的“三种状态”部分中进行了描述Scott Chacon 撰写的Pro Git书籍的章节（知识共享许可）。</p>
<p>这是本章中说明它的图像：</p>
<p><img alt="本地操作 - 工作目录与暂存区（索引）与 git 存储库（HEAD）" src="../../images/NxTUz.png"></p>
<p>上图中“working directory”与“working tree”相同，“staging
area”是git“index”的别称，HEAD指向当前签出的 <strong>分支</strong> ，tip指向“ git 目录（存储库）”</p>
<p>请注意，这<code>git commit -a</code>将分阶段进行更改并一步提交。</p>
<p><br><br><a href="../what-s-the-difference-between-head-working-tree-and-index-in-git/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/git/" rel="tag">git</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../ru-he-zai-bash-jiao-ben-zhong-shi-yong-gdb-yun-xing-dai-you-ming-ling-xing-can-shu-de-cheng-xu/" rel="prev" title="如何在 Bash 脚本中使用 GDB 运行带有命令行参数的程序？">Previous post</a>
            </li>
            <li class="next">
                <a href="../ru-he-zai-java-zhong-jiang-hao-miao-zhuan-huan-wei-x-fen-zhong-x-miao/" rel="next" title="如何在 Java 中将毫秒转换为“X 分钟，x 秒”？">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
