<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>google-services.json for different productFlavors | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/google-services-json-for-different-productflavors/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../selecting-a-row-of-pandas-series-dataframe-by-integer-index/" title="Selecting a row of pandas series/dataframe by integer index" type="text/html">
<link rel="next" href="../do-sessions-really-violate-restfulness/" title="Do sessions really violate RESTfulness?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="google-services.json for different productFlavors">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/google-services-json-for-different-productflavors/">
<meta property="og:description" content="Update: GCM is deprecated, use FCM

I'm implementing the new Google Cloud Messaging following the guides from the
Google Developers page here
I've successfully run and test it. But my problem now is I">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T04:50:28+08:00">
<meta property="article:tag" content="android">
<meta property="article:tag" content="google-cloud-messaging">
<meta property="article:tag" content="google-play-services">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">google-services.json for different productFlavors</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:50:28+08:00" itemprop="datePublished" title="2023-02-18 04:50">2023-02-18 04:50</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <blockquote>
<p><strong>Update:</strong> GCM is deprecated, use FCM</p>
</blockquote>
<p>I'm implementing the new Google Cloud Messaging following the guides from the
Google Developers page here</p>
<p>I've successfully run and test it. But my problem now is I have different
product flavors with different applicationId/packageName and different Google
Cloud Messaging Project Id. The <code>google-services.json</code> have to be put at the
<code>/app/google-services.json</code> not the flavors folder.</p>
<p>Is there any way to make the <code>google-services.json</code> config different for many
flavors?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Google included support for flavors in version 2.0 of the play services
plugin. Since this version of the <code>gradle plugin com.google.gms:google-
services:2.0.0-alpha3</code></p>
<p>you can do this</p>
<p>Step 1: add to gradle</p>
<div class="code"><pre class="code literal-block"><span class="c1">// To auto-generate google map api key of google-services.json</span>
<span class="n">implementation</span><span class="w"> </span><span class="s">'com.google.android.gms:play-services-maps:17.0.0'</span>
</pre></div>

<p>Step 2: add to AndroidManifest.xml in the application tag</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">meta</span><span class="o">-</span><span class="k">data</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="ss">"com.google.android.geo.API_KEY"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="k">value</span><span class="o">=</span><span class="ss">"@string/google_api_key"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<p>Step 3: download each flavor JSON file from firebase and add it</p>
<div class="code"><pre class="code literal-block">app/src/
    flavor1/google-services.json
    flavor2/google-services.json
</pre></div>

<p>Version 3.0.0 of the plugin searches for the JSON file in these locations
(considering you have a <code>flavor</code> flavor1 and a build type <code>debug</code>):</p>
<div class="code"><pre class="code literal-block">/app/src/debug/google-services.json
/app/src/debug/flavor1/google-services.json
/app/google-services.json
</pre></div>

<p>This worked for me even using flavorDimensions. I have free &amp; paid in one
dimension and Mock &amp; Prod in the other dimension. I also have 3 buildTypes:
debug, release, and staging. This is how it looks in my project for the
FreeProd flavor:</p>
<p><img alt="enter image description here" src="../../images/yekEo.png"></p>
<p>How many google-services.json files will depend on your project's
characteristics, but you will need at least one JSON file for every Google
project.</p>
<p>If you want more details about what this plugin does with these JSON files,
here it is: https://github.com/googlesamples/google-
services/issues/54#issuecomment-165824720</p>
<p>Link to the official docs:
https://developers.google.com/android/guides/google-services-plugin</p>
<p>Blog post with updated info:
https://firebase.googleblog.com/2016/08/organizing-your-firebase-enabled-
android-app-builds.html</p>
<p>And go here to check the latest version of this plugin:
https://mvnrepository.com/artifact/com.google.gms/google-services?repo=google</p>
<p><br></p>
<h3>Suggest</h3>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/android/" rel="tag">android</a></li>
            <li><a class="tag p-category" href="../../categories/google-cloud-messaging/" rel="tag">google-cloud-messaging</a></li>
            <li><a class="tag p-category" href="../../categories/google-play-services/" rel="tag">google-play-services</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../selecting-a-row-of-pandas-series-dataframe-by-integer-index/" rel="prev" title="Selecting a row of pandas series/dataframe by integer index">Previous post</a>
            </li>
            <li class="next">
                <a href="../do-sessions-really-violate-restfulness/" rel="next" title="Do sessions really violate RESTfulness?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
