<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The located assembly's manifest definition does not match the assembly reference | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/the-located-assembly-s-manifest-definition-does-not-match-the-assembly-reference/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-un-commit-last-un-pushed-git-commit-without-losing-the-changes/" title="How to un-commit last un-pushed git commit without losing the changes" type="text/html">
<link rel="next" href="../how-to-define-a-two-dimensional-array/" title="How to define a two-dimensional array?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="The located assembly's manifest definition does not match the assembly">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/the-located-assembly-s-manifest-definition-does-not-match-the-assembly-reference/">
<meta property="og:description" content="I am trying to run some unit tests in a C# Windows Forms application (Visual
Studio 2005), and I get the following error:

System.IO.FileLoadException: Could not load file or assembly 'Utility,
Versio">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T10:40:55+08:00">
<meta property="article:tag" content=".net-c#">
<meta property="article:tag" content="compiler-errors">
<meta property="article:tag" content="dependencies">
<meta property="article:tag" content="reference">
<meta property="article:tag" content="version">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">The located assembly's manifest definition does not match the assembly reference</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:40:55+08:00" itemprop="datePublished" title="2023-02-17 10:40">2023-02-17 10:40</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I am trying to run some unit tests in a C# Windows Forms application (Visual
Studio 2005), and I get the following error:</p>
<blockquote>
<p>System.IO.FileLoadException: Could not load file or assembly 'Utility,
Version=1.2.0.200, Culture=neutral, PublicKeyToken=764d581291d764f7' or one
of its dependencies. The located assembly's manifest definition does not
match the assembly reference. (Exception from HRESULT: 0x80131040)**</p>
<p>at x.Foo.FooGO()</p>
<p>at x.Foo.Foo2(String groupName_) in Foo.cs:line 123</p>
<p>at x.Foo.UnitTests.FooTests.TestFoo() in FooTests.cs:line 98**</p>
<p>System.IO.FileLoadException: Could not load file or assembly 'Utility,
Version=1.2.0.203, Culture=neutral, PublicKeyToken=764d581291d764f7' or one
of its dependencies. The located assembly's manifest definition does not
match the assembly reference. (Exception from HRESULT: 0x80131040)</p>
</blockquote>
<p>I look in my references, and I only have a reference to <code>Utility version
1.2.0.203</code> (the other one is old).</p>
<p>Any suggestions on how I figure out what is trying to reference this old
version of this DLL file?</p>
<p>Besides, I don't think I even have this old assembly on my hard drive. Is
there any tool to search for this old versioned assembly?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The .NET Assembly loader:</p>
<ul>
<li>is unable to find 1.2.0.203</li>
<li>but did find a 1.2.0.200</li>
</ul>
<p>This assembly does not match what was requested and therefore you get this
error.</p>
<p>In simple words, it can't find the assembly that was referenced. Make sure it
can find the right assembly by putting it in the GAC or in the application
path.</p>
<p>run below command to add the assembly dll file to GAC:</p>
<div class="code"><pre class="code literal-block">gacutil /i "path/to/my.dll"
</pre></div>

<p>Also see https://learn.microsoft.com/archive/blogs/junfeng/the-located-
assemblys-manifest-definition-with-name-xxx-dll-does-not-match-the-assembly-
reference.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can do a couple of things to troubleshoot this issue. First, use Windows
file search to search your hard drive for your assembly (.dll). Once you have
a list of results, do View-&gt;Choose Details... and then check "File Version".
This will display the version number in the list of results, so you can see
where the old version might be coming from.</p>
<p>Also, like Lars said, check your GAC to see what version is listed there. This
Microsoft article states that assemblies found in the GAC are not copied
locally during a build, so you might need to remove the old version before
doing a rebuild all. (See my answer to this question for notes on creating a
batch file to do this for you)</p>
<p>If you still can't figure out where the old version is coming from, you can
use the fuslogvw.exe application that ships with Visual Studio to get more
information about the binding failures. Microsoft has information about this
tool here. Note that you'll have to enable logging by setting the
<code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion\EnableLog</code> registry key to 1.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/net-c/" rel="tag">.net-c#</a></li>
            <li><a class="tag p-category" href="../../categories/compiler-errors/" rel="tag">compiler-errors</a></li>
            <li><a class="tag p-category" href="../../categories/dependencies/" rel="tag">dependencies</a></li>
            <li><a class="tag p-category" href="../../categories/reference/" rel="tag">reference</a></li>
            <li><a class="tag p-category" href="../../categories/version/" rel="tag">version</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-un-commit-last-un-pushed-git-commit-without-losing-the-changes/" rel="prev" title="How to un-commit last un-pushed git commit without losing the changes">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-define-a-two-dimensional-array/" rel="next" title="How to define a two-dimensional array?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
