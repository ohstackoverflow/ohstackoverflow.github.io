<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Why is IoC / DI not common in Python? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/why-is-ioc-di-not-common-in-python/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-avoid-annoying-error-declared-and-not-used/" title='How to avoid annoying error "declared and not used"' type="text/html">
<link rel="next" href="../what-is-the-motivation-for-bringing-symbols-to-es6/" title="What is the motivation for bringing Symbols to ES6?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Why is IoC / DI not common in Python?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/why-is-ioc-di-not-common-in-python/">
<meta property="og:description" content="In Java IoC / DI is a very common practice which is extensively used in web
applications, nearly all available frameworks and Java EE. On the other hand,
there are also lots of big Python web applicat">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T17:19:11+08:00">
<meta property="article:tag" content="architecture">
<meta property="article:tag" content="dependency-injection">
<meta property="article:tag" content="design-patterns">
<meta property="article:tag" content="inversion-of-control">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Why is IoC / DI not common in Python?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:19:11+08:00" itemprop="datePublished" title="2023-03-03 17:19">2023-03-03 17:19</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>In Java IoC / DI is a very common practice which is extensively used in web
applications, nearly all available frameworks and Java EE. On the other hand,
there are also lots of big Python web applications, but beside of Zope (which
I've heard should be really horrible to code) IoC doesn't seem to be very
common in the Python world. (Please name some examples if you think that I'm
wrong).</p>
<p>There are of course several clones of popular Java IoC frameworks available
for Python, springpython for example. But none of them seems to get used
practically. At least, I've never stumpled upon a Django or
sqlalchemy+<code>&lt;insert your favorite wsgi toolkit here&gt;</code> based web application
which uses something like that.</p>
<p>In my opinion IoC has reasonable advantages and would make it easy to replace
the django-default-user-model for example, but extensive usage of interface
classes and IoC in Python looks a bit odd and not »pythonic«. But maybe
someone has a better explanation, why IoC isn't widely used in Python.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I don't actually think that DI/IoC are <em>that</em> uncommon in Python. What <em>is</em>
uncommon, however, are DI/IoC <em>frameworks/containers</em>.</p>
<p>Think about it: what does a DI container do? It allows you to</p>
<ol>
<li>wire together independent components into a complete application ...</li>
<li>... at runtime.</li>
</ol>
<p>We have names for "wiring together" and "at runtime":</p>
<ol>
<li>scripting</li>
<li>dynamic</li>
</ol>
<p>So, a DI container is nothing but an interpreter for a dynamic scripting
language. Actually, let me rephrase that: a typical Java/.NET DI container is
nothing but a crappy interpreter for a really bad dynamic scripting language
with butt-ugly, sometimes XML-based, syntax.</p>
<p>When you program in Python, why would you want to use an ugly, bad scripting
language when you have a beautiful, brilliant scripting language at your
disposal? Actually, that's a more general question: when you program in pretty
much any language, why would you want to use an ugly, bad scripting language
when you have Jython and IronPython at your disposal?</p>
<p>So, to recap: the <em>practice</em> of DI/IoC is just as important in Python as it is
in Java, for exactly the same reasons. The <em>implementation</em> of DI/IoC however,
is built into the language and often so lightweight that it completely
vanishes.</p>
<p>(Here's a brief aside for an analogy: in assembly, a subroutine call is a
pretty major deal - you have to save your local variables and registers to
memory, save your return address somewhere, change the instruction pointer to
the subroutine you are calling, arrange for it to somehow jump back into your
subroutine when it is finished, put the arguments somewhere where the callee
can find them, and so on. IOW: in assembly, "subroutine call" is a Design
Pattern, and before there were languages like Fortran which had subroutine
calls built in, people were building their own "subroutine frameworks". Would
you say that subroutine calls are "uncommon" in Python, just because you don't
use subroutine frameworks?)</p>
<p>BTW: for an example of what it looks like to take DI to its logical
conclusion, take a look at Gilad Bracha's Newspeak Programming Language and
his writings on the subject:</p>
<ul>
<li>Constructors Considered Harmful</li>
<li>Lethal Injection</li>
<li>A Ban on Imports (continued)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>IoC and DI are super common in mature Python code. You just don't need a
framework to implement DI thanks to duck typing.</p>
<p>The best example is how you set up a Django application using <code>settings.py</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">#</span> <span class="n">settings</span><span class="p">.</span><span class="n">py</span>
<span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'default'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'BACKEND'</span><span class="p">:</span> <span class="s">'django_redis.cache.RedisCache'</span><span class="p">,</span>
        <span class="s">'LOCATION'</span><span class="p">:</span> <span class="n">REDIS_URL</span> <span class="o">+</span> <span class="s">'/1'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">'local'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'BACKEND'</span><span class="p">:</span> <span class="s">'django.core.cache.backends.locmem.LocMemCache'</span><span class="p">,</span>
        <span class="s">'LOCATION'</span><span class="p">:</span> <span class="s">'snowflake'</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Django Rest Framework utilizes DI heavily:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">FooView</span>(<span class="n">APIView</span>):
    <span class="c1"># The "injected" dependencies:</span>
    <span class="n">permission_classes</span> = (<span class="n">IsAuthenticated</span>, )
    <span class="n">throttle_classes</span> = (<span class="n">ScopedRateThrottle</span>, )
    <span class="n">parser_classes</span> = (<span class="n">parsers</span>.<span class="n">FormParser</span>, <span class="n">parsers</span>.<span class="n">JSONParser</span>, <span class="n">parsers</span>.<span class="n">MultiPartParser</span>)
    <span class="n">renderer_classes</span> = (<span class="n">renderers</span>.<span class="n">JSONRenderer</span>,)

    <span class="n">def</span> <span class="nb">get</span>(<span class="nb">self</span>, <span class="n">request</span>, *<span class="nb">args</span>, **<span class="n">kwargs</span>):
        <span class="nb">pass</span>

    <span class="n">def</span> <span class="n">post</span>(<span class="nb">self</span>, <span class="n">request</span>, *<span class="nb">args</span>, **<span class="n">kwargs</span>):
        <span class="nb">pass</span>
</pre></div>

<p>Let me remind (source):</p>
<blockquote>
<p>"Dependency Injection" is a 25-dollar term for a 5-cent concept. [...]
Dependency injection means giving an object its instance variables. [...].</p>
</blockquote>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/architecture/" rel="tag">architecture</a></li>
            <li><a class="tag p-category" href="../../categories/dependency-injection/" rel="tag">dependency-injection</a></li>
            <li><a class="tag p-category" href="../../categories/design-patterns/" rel="tag">design-patterns</a></li>
            <li><a class="tag p-category" href="../../categories/inversion-of-control/" rel="tag">inversion-of-control</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-avoid-annoying-error-declared-and-not-used/" rel="prev" title='How to avoid annoying error "declared and not used"'>Previous post</a>
            </li>
            <li class="next">
                <a href="../what-is-the-motivation-for-bringing-symbols-to-es6/" rel="next" title="What is the motivation for bringing Symbols to ES6?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
