<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Check number of arguments passed to a Bash script | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/check-number-of-arguments-passed-to-a-bash-script/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-use-assert-to-verify-that-an-exception-has-been-thrown-with-mstest/" title="How do I use Assert to verify that an exception has been thrown with MSTest?" type="text/html">
<link rel="next" href="../are-http-headers-case-sensitive/" title="Are HTTP headers case-sensitive?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Check number of arguments passed to a Bash script">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/check-number-of-arguments-passed-to-a-bash-script/">
<meta property="og:description" content="I would like my Bash script to print an error message if the required argument
count is not met.
I tried the following code:
#!/bin/bash
echo Script name: $0
echo $# arguments 
if [$# -ne 1]; 
    the">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T09:01:11+08:00">
<meta property="article:tag" content="bash">
<meta property="article:tag" content="command-line-arguments">
<meta property="article:tag" content="parameter-passing">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Check number of arguments passed to a Bash script</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:01:11+08:00" itemprop="datePublished" title="2023-02-17 09:01">2023-02-17 09:01</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I would like my Bash script to print an error message if the required argument
count is not met.</p>
<p>I tried the following code:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span>Script<span class="w"> </span>name:<span class="w"> </span><span class="nv">$0</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>arguments<span class="w"> </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="nv">$#</span><span class="w"> </span>-ne<span class="w"> </span><span class="m">1</span><span class="o">]</span><span class="p">;</span><span class="w"> </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">then</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"illegal number of parameters"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="#-6"><code data-line-number="6"></code></a></td>
<td class="code"><code><span class="k">fi</span>
</code></td>
</tr>
</table></div>
<p>For some unknown reason I've got the following error:</p>
<div class="code"><pre class="code literal-block"><span class="n">test</span><span class="o">:</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span>
</pre></div>

<p>What am I doing wrong?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Just like any other simple command, <code>[ ... ]</code> or <code>test</code> requires spaces
between its arguments.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$#"</span><span class="w"> </span><span class="o">-</span><span class="nv">ne</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Illegal number of parameters"</span>
<span class="nv">fi</span>
</pre></div>

<p>Or</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="s2">"$#"</span><span class="w"> </span><span class="o">-</span><span class="nv">ne</span><span class="w"> </span><span class="mi">1</span><span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Illegal number of parameters"</span>
<span class="nv">fi</span>
</pre></div>

<h4>Suggestions</h4>
<p>When in Bash, prefer using <code>[[ ]]</code> instead as it doesn't do word splitting and
pathname expansion to its variables that quoting may not be necessary unless
it's part of an expression.</p>
<div class="code"><pre class="code literal-block">[[ $# -ne 1 ]]
</pre></div>

<p>It also has some other features like unquoted condition grouping, pattern
matching (extended pattern matching with <code>extglob</code>) and regex matching.</p>
<p>The following example checks if arguments are valid. It allows a single
argument or two.</p>
<div class="code"><pre class="code literal-block"><span class="p">[[</span><span class="w"> </span><span class="p">(</span><span class="err">$</span><span class="p">#</span><span class="w"> </span><span class="o">-</span><span class="n">eq</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="err">$</span><span class="p">#</span><span class="w"> </span><span class="o">-</span><span class="n">eq</span><span class="w"> </span><span class="mh">2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="err">$</span><span class="mh">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">&lt;</span><span class="n">glob</span><span class="w"> </span><span class="n">pattern</span><span class="o">&gt;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="err">$</span><span class="mh">1</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regex</span><span class="w"> </span><span class="n">pattern</span><span class="o">&gt;</span><span class="w"> </span><span class="p">]]</span>
</pre></div>

<p>For pure arithmetic expressions, using <code>(( ))</code> to some may still be better,
but they are still possible in <code>[[ ]]</code> with its arithmetic operators like
<code>-eq</code>, <code>-ne</code>, <code>-lt</code>, <code>-le</code>, <code>-gt</code>, or <code>-ge</code> by placing the expression as a
single string argument:</p>
<div class="code"><pre class="code literal-block">A=1
[[ 'A + 1' -eq 2 ]] &amp;&amp; echo true  ## Prints true.
</pre></div>

<p>That should be helpful if you would need to combine it with other features of
<code>[[ ]]</code> as well.</p>
<p>Take note that <code>[[ ]]</code> and <code>(( ))</code> are keywords which have same level of
parsing as <code>if</code>, <code>case</code>, <code>while</code>, and <code>for</code>.</p>
<p>Also as Dave suggested, error messages are better sent to stderr so they don't
get included when stdout is redirected:</p>
<div class="code"><pre class="code literal-block">echo "Illegal number of parameters" &gt;&amp;2
</pre></div>

<h4>Exiting the script</h4>
<p>It's also logical to make the script exit when invalid parameters are passed
to it. This has already been suggested in the comments by ekangas but someone
edited this answer to have it with <code>-1</code> as the returned value, so I might as
well do it right.</p>
<p><code>-1</code> though accepted by Bash as an argument to <code>exit</code> is not explicitly
documented and is not right to be used as a common suggestion. <code>64</code> is also
the most formal value since it's defined in <code>sysexits.h</code> with <code>#define
EX_USAGE 64 /* command line usage error */</code>. Most tools like <code>ls</code> also return
<code>2</code> on invalid arguments. I also used to return <code>2</code> in my scripts but lately I
no longer really cared, and simply used <code>1</code> in all errors. But let's just
place <code>2</code> here since it's most common and probably not OS-specific.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[[<span class="w"> </span>$#<span class="w"> </span><span class="o">-</span><span class="nv">ne</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>]]<span class="c1">; then</span>
<span class="w">    </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Illegal number of parameters"</span><span class="w"> </span><span class="o">&gt;&amp;</span><span class="mi">2</span>
<span class="w">    </span><span class="k">exit</span><span class="w"> </span><span class="mi">2</span>
<span class="nv">fi</span>
</pre></div>

<h4>References</h4>
<ul>
<li>Bash Conditional Expressions</li>
<li>Conditional Constructs</li>
<li>Pattern Matching</li>
<li>Word Splitting</li>
<li>Filename Expansion (prev. Pathname Expansion)</li>
<li>Simple Commands</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>It might be a good idea to use arithmetic expressions if you're dealing with
numbers.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">((</span><span class="w"> </span>$#<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ss">))</span><span class="c1">; then</span>
<span class="w">    </span><span class="o">&gt;&amp;</span><span class="mi">2</span><span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"Illegal number of parameters"</span>
<span class="nv">fi</span>
</pre></div>

<p><code>&gt;&amp;2</code> is used to write the error message to stderr.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/bash/" rel="tag">bash</a></li>
            <li><a class="tag p-category" href="../../categories/command-line-arguments/" rel="tag">command-line-arguments</a></li>
            <li><a class="tag p-category" href="../../categories/parameter-passing/" rel="tag">parameter-passing</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-use-assert-to-verify-that-an-exception-has-been-thrown-with-mstest/" rel="prev" title="How do I use Assert to verify that an exception has been thrown with MSTest?">Previous post</a>
            </li>
            <li class="next">
                <a href="../are-http-headers-case-sensitive/" rel="next" title="Are HTTP headers case-sensitive?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
