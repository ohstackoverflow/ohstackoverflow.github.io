<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Could we consider non-plugins web-based crypto wallets as safe? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/could-we-consider-non-plugins-web-based-crypto-wallets-as-safe/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../difference-of-geth-or-ganache/" title="Difference of Geth or Ganache" type="text/html">
<link rel="next" href="../parsererror-source-file-requires-different-compiler-version-current-compiler-is-0-8-7-commit-e28d00a7-emscripten-clang/" title="ParserError: Source file requires different compiler version (current compiler is 0.8.7+commit.e28d00a7.Emscripten.clang)" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Could we consider non-plugins web-based crypto wallets as safe?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/could-we-consider-non-plugins-web-based-crypto-wallets-as-safe/">
<meta property="og:description" content="I know a bunch of crypto wallets which works in IFRAMEs and similar
technologies right inside a web browser without needing to install any
plugins:

https://authereum.org
https://www.portis.io
https:/">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-28T04:46:31+08:00">
<meta property="article:tag" content="blockchain">
<meta property="article:tag" content="nearprotocol">
<meta property="article:tag" content="plugins">
<meta property="article:tag" content="security">
<meta property="article:tag" content="wallet">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Could we consider non-plugins web-based crypto wallets as safe?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T04:46:31+08:00" itemprop="datePublished" title="2023-02-28 04:46">2023-02-28 04:46</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I know a bunch of crypto wallets which works in IFRAMEs and similar
technologies right inside a web browser without needing to install any
plugins:</p>
<ul>
<li>https://authereum.org</li>
<li>https://www.portis.io</li>
<li>https://tor.us</li>
<li>https://fortmatic.com</li>
</ul>
<p>But are they protected from a phishing Dapp attack? In case Dapp wants to
trick you and hide the actual amount of ETH send or any other way, modify
wallet UI inside a web browser?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Storage isolation</strong></p>
<p>Extensions:</p>
<p>Browser extension-based wallets such as MetaMask use isolated local storage
that only the extension can access, with no way for a website to access. The
extension can push data to the website, or the website can request data by
doing message passing requests. Private keys are stored in the sandboxed local
storage and requests are made from the website to the extension to sign
messages. The extension returns the signed message to the website.</p>
<p>Web-based:</p>
<p>Browser-based crypto wallets such as Authereum, Portis, Torus, and Fortmatic,
use sandboxed local storage as well via an iframe. Unlike cookies, local
storage is strictly restricted by domain, meaning that if a website sets a
value in local storage, then only that website can read the value; so
alice.com cannot read bob.com's local storage. To sandbox local storage
sensitive values, they are set under a controlled subdomain, for example
x.wallet.com, since no other website will be able to read the local storage.
This subdomain contains no UI is meant for iframed communication only. The
web3 provider's of those wallets load a hidden iframe on the website, which is
used to communicate to the subdomain containing the sandboxed storage; so for
example Alice on dapp.com using Authereum, the Authereum sdk connects to
x.authereum.org using an iframe and send postMessage requests to the iframe
from the website to sign messages. This restricts the website from reading
sensitive data such as private keys and only allow the website to send sign
requests similarly to how wallet extensions work.</p>
<p>Not all web-based wallets have sandboxed local storage so you should avoid
using those since any website can read the stored sensitive data but the
wallets mentioned here are safe in that regard.</p>
<p><strong>Protection against phishing attacks</strong></p>
<p>Phishing attacks occur when a user is tricked into thinking they are using a
known website but instead are using a malicious website that resembles the
legitimate website. Authereum, Portis, and Torus are username and password
based login solutions so they open up the login auth window in a new popup or
redirect. This allows the user to verify the domain of the website for
legitimacy. Google auth does this pattern as well. Besides opening a new
window on login for the user to verify, some web-based wallet providers also
open a new window when signing messages and transactions to verify the
request.</p>
<p>Click jacking occurs when a website is loaded via an iframe on the website and
the website overlays a different UI on top of the iframed website with
pointer-events set to none and then tricks the user into entering information
or clicking a button on the overlayed UI but they are actually clicking a
button on the iframed website. This is dangerous because the action on the
iframed website can be something like sending funds to the attackers wallet.</p>
<p>To prevent the wallet site to be loaded in an iframe at all, all the wallet
site has to do is set the HTTP header <code>X-Frame-Options: DENY</code>, which is what
Authereum and Portis are doing so they are safe from these attacks.</p>
<p><strong>Trusting content scripts</strong></p>
<p>It's easy to verify browser extension source code by using source viewer
plugins, but to avoid an extension from auto-updating with malicious code, a
user can install the extension manually to lock it down to a version by
getting the source code from github if it's open source or from downloading
the source scripts.</p>
<p>Since with web-based wallets the wallet site owner controls the content
scripts then you have to trust that the content scripts managing the sensitive
key data won't be malicious since the wallet site owner or an attacker that
got access to the wallet site can at any point update the website source code
with bad code.</p>
<p>To trust content scripts, the wallet site can be hosted on IPFS since the web
address is the content hash meaning you can trust that it won't change.
Authereum is one wallet that already offers this by visiting authereum.eth or
by resolving the <code>contenthash</code> property of their ENS name.</p>
<p><strong>Convenience</strong></p>
<p>Web-based wallets are portable because you can use the same wallet on any OS,
browser, desktop or mobile, while with browser extension you are stuck with
the environment you are using the extension from. Extensions are highly
inconvenient but offer more storage isolation guarantees. With contract-based
accounts however, more security features can be offered on the wallet side.</p>
<p><strong>Contract-based accounts</strong></p>
<p>MetaMask, Portis, Torus, and Fortmatic are all externally-owned account based
(EOA) which means that funds are stored and manged by a single key. If an
attacker gains access to the signing key, then they also have access to the
funds stored at that key.</p>
<p>Contract-based accounts (CBA), such as Authereum, provide more security
guarantees because each account contract can have multiple keys to manage it
and each key may also have limited authority over what actions it can do.</p>
<p>Advantages of contract-based accounts:</p>
<ul>
<li>Funds are not stored on a single key</li>
<li>You can cycle through management keys</li>
<li>Account recovery, in case your management keys are stolen or lost</li>
<li>Transfer and withdraw limits </li>
<li>Access controls for keys, meaning you can restrict what methods a key can invoke</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p><em>Disclaimer: I am a cofounder of Authereum, one of the wallets listed in the
question.</em></p>
<p>To answer your original question, yes many web-based crypto wallets are safe.
As you mentioned, some wallets use iframes in order to protect the user from a
malicious application. With this architecture, a user's private keys are never
exposed to a dapp in plain text.</p>
<hr>
<p>It is true that a malicious dapp can try to get a user to sign malicious data.
There are additional measures that can be put in place by the web-based crypto
wallets.</p>
<p>As @tom-teman mentioned, a user can verify legitimacy of a login by verifying
the URL of a new window.</p>
<p>There are additional protections that Authereum has in place to help keep
users safe. Some of these are possible due to the contract-based architecture
of a user's wallet. The following is a non-exhaustive list of Authereum
security features:</p>
<ol>
<li>Never expose private keys to a dapp.</li>
<li>Do not broadcast transactions with a value that is greater than a user's daily allowed limit. If a dapp attempts to spend more than what a user has specified, the transaction will fail.</li>
<li>Set dapp specific limits for users (i.e. daily transaction value limit, limited # of transactions on a single dapp, etc.).</li>
<li>Blacklist applications that have been reported or are acting maliciously.</li>
<li>Optionally require 2-factor authentication per transaction. </li>
</ol>
<p><em>Note: Authereum is fully non-custodial and censorship resistant. While the
above features are a part of the Authereum system, they are not required and
can be bypassed by Authereum users if they feel they are being censored.</em></p>
<p>You can check out some of the difference between these web-based crypto
wallets here.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/blockchain/" rel="tag">blockchain</a></li>
            <li><a class="tag p-category" href="../../categories/nearprotocol/" rel="tag">nearprotocol</a></li>
            <li><a class="tag p-category" href="../../categories/plugins/" rel="tag">plugins</a></li>
            <li><a class="tag p-category" href="../../categories/security/" rel="tag">security</a></li>
            <li><a class="tag p-category" href="../../categories/wallet/" rel="tag">wallet</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../difference-of-geth-or-ganache/" rel="prev" title="Difference of Geth or Ganache">Previous post</a>
            </li>
            <li class="next">
                <a href="../parsererror-source-file-requires-different-compiler-version-current-compiler-is-0-8-7-commit-e28d00a7-emscripten-clang/" rel="next" title="ParserError: Source file requires different compiler version (current compiler is 0.8.7+commit.e28d00a7.Emscripten.clang)">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
