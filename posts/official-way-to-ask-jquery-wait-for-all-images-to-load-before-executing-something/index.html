<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Official way to ask jQuery wait for all images to load before executing something | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/official-way-to-ask-jquery-wait-for-all-images-to-load-before-executing-something/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../rm-rf-equivalent-for-windows/" title='"rm -rf" equivalent for Windows?' type="text/html">
<link rel="next" href="../sqlexception-from-entity-framework-new-transaction-is-not-allowed-because-there-are-other-threads-running-in-the-session/" title="SqlException from Entity Framework - New transaction is not allowed because there are other threads running in the session" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Official way to ask jQuery wait for all images to load before executin">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/official-way-to-ask-jquery-wait-for-all-images-to-load-before-executing-something/">
<meta property="og:description" content='In jQuery when you do this:
$(function() {
   alert("DOM is loaded, but images not necessarily all loaded");
});


It waits for the DOM to load and executes your code. If all the images are not
loaded'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T19:13:52+08:00">
<meta property="article:tag" content="jquery">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Official way to ask jQuery wait for all images to load before executing something</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:13:52+08:00" itemprop="datePublished" title="2023-02-17 19:13">2023-02-17 19:13</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>In jQuery when you do this:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">alert</span><span class="p">(</span><span class="s2">"DOM is loaded, but images not necessarily all loaded"</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>It waits for the DOM to load and executes your code. If all the images are not
loaded then it still executes the code. This is obviously what we want if
we're initializing any DOM stuff such as showing or hiding elements or
attaching events.</p>
<p>Let's say though that I want some animation and I don't want it running until
all the images are loaded. Is there an official way in jQuery to do this?</p>
<p>The best way I have is to use <code>&lt;body onload="finished()"&gt;</code>, but I don't really
want to do that unless I have to.</p>
<p>Note: There is a bug in jQuery 1.3.1 in Internet Explorer which actually does
wait for all images to load before executing code inside <code>$function() { }</code>. So
if you're using that platform you'll get the behavior I'm looking for instead
of the correct behavior described above.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>With jQuery, you use <code>$(document).ready()</code> to execute something when the <em>DOM</em>
is loaded and <code>$(window).on("load", handler)</code> to execute something when all
other things are loaded as well, such as the images.</p>
<p>The difference can be seen in the following complete HTML file, provided you
have a lot of <code>jollyrogerNN</code> JPEG files (or other suitable ones):</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;html&gt;</span>
<span class="w">    </span><span class="nt">&lt;head&gt;</span>
<span class="w">        </span><span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"jquery-1.7.1.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="w">        </span><span class="nt">&lt;script</span><span class="w"> </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="w">            </span>$(document).ready(function()<span class="w"> </span>{
<span class="w">                </span>alert<span class="w"> </span>("done");
<span class="w">            </span>});
<span class="w">        </span><span class="nt">&lt;/script&gt;</span>
<span class="w">    </span><span class="nt">&lt;/head&gt;&lt;body&gt;</span>
<span class="w">        </span>Hello
<span class="w">        </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"jollyroger00.jpg"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"jollyroger01.jpg"</span><span class="nt">&gt;</span>
<span class="w">        </span>//<span class="w"> </span>:<span class="w"> </span>100<span class="w"> </span>copies<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span>in<span class="w"> </span>total
<span class="w">        </span><span class="nt">&lt;img</span><span class="w"> </span><span class="na">src=</span><span class="s">"jollyroger99.jpg"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>

<p>With that, the alert box appears before the images are loaded, because the DOM
is ready at that point. If you then change:</p>
<div class="code"><pre class="code literal-block">$(document).ready(function() {
</pre></div>

<p>into:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">(</span><span class="n">window</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">"load"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</pre></div>

<p>then the alert box doesn't appear until <em>after</em> the images are loaded.</p>
<p>Hence, to wait until the entire page is ready, you could use something like:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">(</span><span class="n">window</span><span class="p">)</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">"load"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">weave</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">magic</span><span class="w"> </span><span class="n">here</span><span class="o">.</span>
<span class="p">});</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I wrote a plugin that can fire callbacks when images have loaded in elements,
or fire once per image loaded.</p>
<p>It is similar to <code>$(window).load(function() { .. })</code>, except it lets you
define any selector to check. If you only want to know when all images in
<code>#content</code> (for example) have loaded, this is the plugin for you.</p>
<p>It also supports loading of images referenced in the CSS, such as <code>background-
image</code>, <code>list-style-image</code>, etc.</p>
<h3>waitForImages jQuery plugin</h3>
<ul>
<li>GitHub repository.</li>
<li>Readme.</li>
<li>Production source.</li>
<li>Development source.</li>
</ul>
<h4>Example Usage</h4>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">(</span><span class="s1">'selector'</span><span class="p">)</span><span class="o">.</span><span class="n">waitForImages</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="s1">'All images are loaded.'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>Example on jsFiddle.</p>
<p>More documentation is available on the GitHub page.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/jquery/" rel="tag">jquery</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../rm-rf-equivalent-for-windows/" rel="prev" title='"rm -rf" equivalent for Windows?'>Previous post</a>
            </li>
            <li class="next">
                <a href="../sqlexception-from-entity-framework-new-transaction-is-not-allowed-because-there-are-other-threads-running-in-the-session/" rel="next" title="SqlException from Entity Framework - New transaction is not allowed because there are other threads running in the session">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
