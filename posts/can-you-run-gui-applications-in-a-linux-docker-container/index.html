<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Can you run GUI applications in a Linux Docker container? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/can-you-run-gui-applications-in-a-linux-docker-container/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-get-the-list-of-all-installed-color-schemes-in-vim/" title="How to get the list of all installed color schemes in Vim?" type="text/html">
<link rel="next" href="../what-are-the-map-files-used-for-in-bootstrap-3-x/" title="what are the .map files used for in Bootstrap 3.x?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Can you run GUI applications in a Linux Docker container?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/can-you-run-gui-applications-in-a-linux-docker-container/">
<meta property="og:description" content="How can you run GUI applications in a Linux Docker container?
Are there any images that set up vncserver or something so that you can -
for example - add an extra speedbump sandbox around say Firefox?">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T05:46:28+08:00">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="sandbox">
<meta property="article:tag" content="vnc">
<meta property="article:tag" content="x11">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Can you run GUI applications in a Linux Docker container?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T05:46:28+08:00" itemprop="datePublished" title="2023-03-03 05:46">2023-03-03 05:46</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>How can you run GUI applications in a Linux Docker container?</p>
<p>Are there any images that set up <code>vncserver</code> or something so that you can -
for example - add an extra speedbump sandbox around say Firefox?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can simply install a vncserver along with Firefox :)</p>
<p>I pushed an image, vnc/firefox, here: <code>docker pull creack/firefox-vnc</code></p>
<p>The image has been made with this Dockerfile:</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">Firefox</span><span class="w"> </span><span class="nv">over</span><span class="w"> </span><span class="nv">VNC</span>
#
#<span class="w"> </span><span class="nv">VERSION</span><span class="w">               </span><span class="mi">0</span>.<span class="mi">1</span>
#<span class="w"> </span><span class="nv">DOCKER</span><span class="o">-</span><span class="nv">VERSION</span><span class="w">        </span><span class="mi">0</span>.<span class="mi">2</span>

<span class="nv">FROM</span><span class="w">    </span><span class="nv">ubuntu</span>:<span class="mi">12</span>.<span class="mi">04</span>
#<span class="w"> </span><span class="nv">Make</span><span class="w"> </span><span class="nv">sure</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">package</span><span class="w"> </span><span class="nv">repository</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">date</span>
<span class="nv">RUN</span><span class="w">     </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"deb http://archive.ubuntu.com/ubuntu precise main universe"</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">apt</span><span class="o">/</span><span class="nv">sources</span>.<span class="nv">list</span>
<span class="nv">RUN</span><span class="w">     </span><span class="nv">apt</span><span class="o">-</span><span class="nv">get</span><span class="w"> </span><span class="nv">update</span>

#<span class="w"> </span><span class="nv">Install</span><span class="w"> </span><span class="nv">vnc</span>,<span class="w"> </span><span class="nv">xvfb</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">order</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">create</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="s1">'fake'</span><span class="w"> </span><span class="nv">display</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">firefox</span>
<span class="nv">RUN</span><span class="w">     </span><span class="nv">apt</span><span class="o">-</span><span class="nv">get</span><span class="w"> </span><span class="nv">install</span><span class="w"> </span><span class="o">-</span><span class="nv">y</span><span class="w"> </span><span class="nv">x11vnc</span><span class="w"> </span><span class="nv">xvfb</span><span class="w"> </span><span class="nv">firefox</span>
<span class="nv">RUN</span><span class="w">     </span><span class="nv">mkdir</span><span class="w"> </span><span class="o">~/</span>.<span class="nv">vnc</span>
#<span class="w"> </span><span class="nv">Setup</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">password</span>
<span class="nv">RUN</span><span class="w">     </span><span class="nv">x11vnc</span><span class="w"> </span><span class="o">-</span><span class="nv">storepasswd</span><span class="w"> </span><span class="mi">1234</span><span class="w"> </span><span class="o">~/</span>.<span class="nv">vnc</span><span class="o">/</span><span class="nv">passwd</span>
#<span class="w"> </span><span class="nv">Autostart</span><span class="w"> </span><span class="nv">firefox</span><span class="w"> </span><span class="ss">(</span><span class="nv">might</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">best</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">it</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">trick</span><span class="ss">)</span>
<span class="nv">RUN</span><span class="w">     </span><span class="nv">bash</span><span class="w"> </span><span class="o">-</span><span class="nv">c</span><span class="w"> </span><span class="s1">'echo "firefox" &gt;&gt; /.bashrc'</span>
</pre></div>

<p>This will create a Docker container running VNC with the password <code>1234</code>:</p>
<p>For Docker version 18 or newer:</p>
<div class="code"><pre class="code literal-block">docker run -p 5900:5900 -e HOME=/ creack/firefox-vnc x11vnc -forever -usepw -create
</pre></div>

<p>For Docker version 1.3 or newer:</p>
<div class="code"><pre class="code literal-block">docker run -p 5900 -e HOME=/ creack/firefox-vnc x11vnc -forever -usepw -create
</pre></div>

<p>For Docker before version 1.3:</p>
<div class="code"><pre class="code literal-block">docker run -p 5900 creack/firefox-vnc x11vnc -forever -usepw -create
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Xauthority becomes an issue with newer systems. I can either discard any
protection with xhost + before running my docker containers, or I can pass in
a well prepared Xauthority file. Typical Xauthority files are hostname
specific. With docker, each container can have a different host name (set with
docker run -h), but even setting the hostname of the container identical to
the host system did not help in my case. xeyes (I like this example) simply
would ignore the magic cookie and pass no credentials to the server. Hence we
get an error message 'No protocol specified Cannot open display'</p>
<p>The Xauthority file can be written in a way so that the hostname does not
matter. We need to set the Authentication Family to 'FamilyWild'. I am not
sure, if xauth has a proper command line for this, so here is an example that
combines xauth and sed to do that. We need to change the first 16 bits of the
nlist output. The value of FamilyWild is 65535 or 0xffff.</p>
<div class="code"><pre class="code literal-block">docker build -t xeyes - &lt;&lt; __EOF__
FROM debian
RUN apt-get update
RUN apt-get install -qqy x11-apps
ENV DISPLAY :0
CMD xeyes
__EOF__
XSOCK=/tmp/.X11-unix
XAUTH=/tmp/.docker.xauth
xauth nlist :0 | sed -e 's/^..../ffff/' | xauth -f $XAUTH nmerge -
docker run -ti -v $XSOCK:$XSOCK -v $XAUTH:$XAUTH -e XAUTHORITY=$XAUTH xeyes
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/docker/" rel="tag">docker</a></li>
            <li><a class="tag p-category" href="../../categories/linux/" rel="tag">linux</a></li>
            <li><a class="tag p-category" href="../../categories/sandbox/" rel="tag">sandbox</a></li>
            <li><a class="tag p-category" href="../../categories/vnc/" rel="tag">vnc</a></li>
            <li><a class="tag p-category" href="../../categories/x11/" rel="tag">x11</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-get-the-list-of-all-installed-color-schemes-in-vim/" rel="prev" title="How to get the list of all installed color schemes in Vim?">Previous post</a>
            </li>
            <li class="next">
                <a href="../what-are-the-map-files-used-for-in-bootstrap-3-x/" rel="next" title="what are the .map files used for in Bootstrap 3.x?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
