<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How can I view the source code for a function? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-can-i-view-the-source-code-for-a-function/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../invoking-javascript-code-in-an-iframe-from-the-parent-page/" title="Invoking JavaScript code in an iframe from the parent page" type="text/html">
<link rel="next" href="../why-does-git-perform-fast-forward-merges-by-default/" title="Why does git perform fast-forward merges by default?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How can I view the source code for a function?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-can-i-view-the-source-code-for-a-function/">
<meta property="og:description" content='I want to look at the source code for a function to see how it works. I know I
can print a function by typing its name at the prompt:
&gt; t
function (x) 
UseMethod("t")
&lt;bytecode: 0x2332948&gt;
&lt;environmen'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T19:27:59+08:00">
<meta property="article:tag" content="debugging">
<meta property="article:tag" content="function">
<meta property="article:tag" content="r">
<meta property="article:tag" content="r-faq">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How can I view the source code for a function?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:27:59+08:00" itemprop="datePublished" title="2023-02-17 19:27">2023-02-17 19:27</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I want to look at the source code for a function to see how it works. I know I
can print a function by typing its name at the prompt:</p>
<div class="code"><pre class="code literal-block">&gt; t
function (x) 
UseMethod("t")
&lt;bytecode: 0x2332948&gt;
&lt;environment: namespace:base&gt;
</pre></div>

<p>In this case, what does <code>UseMethod("t")</code> mean? How do I find the source code
that's actually being used by, for example: <code>t(1:10)</code>?</p>
<p>Is there a difference between when I see <code>UseMethod</code> and when I see
<code>standardGeneric</code> and <code>showMethods</code>, as with <code>with</code>?</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nv">with</span>
<span class="nv">standardGeneric</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">"with"</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">package</span><span class="w"> </span><span class="s2">"base"</span>

<span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="nv">data</span>,<span class="w"> </span><span class="nv">expr</span>,<span class="w"> </span>...<span class="ss">)</span><span class="w"> </span>
<span class="nv">standardGeneric</span><span class="ss">(</span><span class="s2">"with"</span><span class="ss">)</span>
<span class="o">&lt;</span><span class="nv">bytecode</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x102fb3fc0</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nv">environment</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x102fab988</span><span class="o">&gt;</span>
<span class="nv">Methods</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">arguments</span>:<span class="w"> </span><span class="nv">data</span>
<span class="nv">Use</span><span class="w">  </span><span class="nv">showMethods</span><span class="ss">(</span><span class="s2">"with"</span><span class="ss">)</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="nv">currently</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="nv">ones</span>.
</pre></div>

<p>In other cases, I can see that R functions are being called, but I can't find
the source code for those functions.</p>
<div class="code"><pre class="code literal-block"><span class="err">&gt;</span><span class="w"> </span><span class="nf">ts.union</span>
<span class="nf">function</span><span class="w"> </span><span class="p">(...,</span><span class="w"> </span><span class="no">dframe</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">FALSE</span><span class="p">)</span><span class="w"> </span>
<span class="no">.cbind.ts</span><span class="p">(</span><span class="no">list</span><span class="p">(...),</span><span class="w"> </span><span class="no">.makeNamesTs</span><span class="p">(...),</span><span class="w"> </span><span class="no">dframe</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">dframe</span><span class="p">,</span><span class="w"> </span><span class="no">union</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">TRUE</span><span class="p">)</span>
<span class="err">&lt;</span><span class="nl">bytecode:</span><span class="w"> </span><span class="err">0</span><span class="nf">x36fbf88</span><span class="err">&gt;</span>
<span class="err">&lt;</span><span class="nl">environment:</span><span class="w"> </span><span class="nl">namespace:</span><span class="nf">stats</span><span class="err">&gt;</span>
<span class="err">&gt;</span><span class="w"> </span><span class="na">.cbindts</span>
<span class="nl">Error:</span><span class="w"> </span><span class="nf">object</span><span class="w"> </span><span class="err">'</span><span class="no">.cbindts</span><span class="err">'</span><span class="w"> </span><span class="no">not</span><span class="w"> </span><span class="no">found</span>
<span class="err">&gt;</span><span class="w"> </span><span class="na">.makeNamesTs</span>
<span class="nl">Error:</span><span class="w"> </span><span class="nf">object</span><span class="w"> </span><span class="err">'</span><span class="no">.makeNamesTs</span><span class="err">'</span><span class="w"> </span><span class="no">not</span><span class="w"> </span><span class="no">found</span>
</pre></div>

<p>How do I find functions like <code>.cbindts</code> and <code>.makeNamesTs</code>?</p>
<p>In still other cases, there's a bit of R code, but most of work seems to be
done somewhere else.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="n">matrix</span>
<span class="nf">function </span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">byrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">dimnames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">)</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="nf">if </span><span class="p">(</span><span class="nf">is.object</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nf">is.atomic</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.vector</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="w">    </span><span class="nf">.Internal</span><span class="p">(</span><span class="nf">matrix</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="p">,</span><span class="w"> </span><span class="n">byrow</span><span class="p">,</span><span class="w"> </span><span class="n">dimnames</span><span class="p">,</span><span class="w"> </span><span class="nf">missing</span><span class="p">(</span><span class="n">nrow</span><span class="p">),</span><span class="w"> </span>
<span class="w">        </span><span class="nf">missing</span><span class="p">(</span><span class="n">ncol</span><span class="p">)))</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="n">bytecode</span><span class="o">:</span><span class="w"> </span><span class="mh">0x134bd10</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">environment</span><span class="o">:</span><span class="w"> </span><span class="n">namespace</span><span class="o">:</span><span class="n">base</span><span class="o">&gt;</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">.Internal</span>
<span class="nf">function </span><span class="p">(</span><span class="n">call</span><span class="p">)</span><span class="w">  </span><span class="nf">.Primitive</span><span class="p">(</span><span class="s">".Internal"</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">.Primitive</span>
<span class="nf">function </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w">  </span><span class="nf">.Primitive</span><span class="p">(</span><span class="s">".Primitive"</span><span class="p">)</span>
</pre></div>

<p>How do I find out what the <code>.Primitive</code> function does? Similarly, some
functions call <code>.C</code>, <code>.Call</code>, <code>.Fortran</code>, <code>.External</code>, or <code>.Internal</code>. How can
I find the source code for those?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>UseMethod("t")</code> is telling you that <code>t()</code> is a (S3) generic function that has
methods for different object classes.</p>
<h2>The S3 method dispatch system</h2>
<p>For S3 classes, you can use the <code>methods</code> function to list the methods for a
particular generic function or class.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nf">methods</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="n">t.data.frame</span><span class="w"> </span><span class="n">t.default</span><span class="w">    </span><span class="n">t.ts</span><span class="o">*</span>

<span class="w">   </span><span class="n">Non</span><span class="o">-</span><span class="n">visible</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">asterisked</span>
<span class="o">&gt;</span><span class="w"> </span><span class="nf">methods</span><span class="p">(</span><span class="n">class</span><span class="o">=</span><span class="s">"ts"</span><span class="p">)</span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="n">aggregate.ts</span><span class="w">     </span><span class="n">as.data.frame.ts</span><span class="w"> </span><span class="n">cbind.ts</span><span class="o">*</span><span class="w">        </span><span class="n">cycle.ts</span><span class="o">*</span><span class="w">       </span>
<span class="w"> </span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="n">diffinv.ts</span><span class="o">*</span><span class="w">      </span><span class="n">diff.ts</span><span class="w">          </span><span class="n">kernapply.ts</span><span class="o">*</span><span class="w">    </span><span class="n">lines.ts</span><span class="w">        </span>
<span class="w"> </span><span class="p">[</span><span class="m">9</span><span class="p">]</span><span class="w"> </span><span class="n">monthplot.ts</span><span class="o">*</span><span class="w">    </span><span class="n">na.omit.ts</span><span class="o">*</span><span class="w">      </span><span class="n">Ops.ts</span><span class="o">*</span><span class="w">          </span><span class="n">plot.ts</span><span class="w">         </span>
<span class="p">[</span><span class="m">13</span><span class="p">]</span><span class="w"> </span><span class="n">print.ts</span><span class="w">         </span><span class="n">time.ts</span><span class="o">*</span><span class="w">         </span><span class="p">[</span><span class="o">&lt;-</span><span class="n">.ts</span><span class="o">*</span><span class="w">          </span><span class="p">[</span><span class="n">.ts</span><span class="o">*</span><span class="w">           </span>
<span class="p">[</span><span class="m">17</span><span class="p">]</span><span class="w"> </span><span class="n">t.ts</span><span class="o">*</span><span class="w">            </span><span class="n">window</span><span class="o">&lt;-</span><span class="n">.ts</span><span class="o">*</span><span class="w">     </span><span class="n">window.ts</span><span class="o">*</span>

<span class="w">   </span><span class="n">Non</span><span class="o">-</span><span class="n">visible</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">asterisked</span>
</pre></div>

<p>"Non-visible functions are asterisked" means the function is not exported from
its package's namespace. You can still view its source code via the <code>:::</code>
function (i.e. <code>stats:::t.ts</code>), or by using <code>getAnywhere()</code>. <code>getAnywhere()</code>
is useful because you don't have to know which package the function came from.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="n">getAnywhere</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">ts</span><span class="p">)</span>
<span class="n">A</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="err">‘</span><span class="n">t</span><span class="p">.</span><span class="n">ts</span><span class="err">’</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="k">found</span>
<span class="n">It</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="k">found</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">places</span>
<span class="w">  </span><span class="n">registered</span><span class="w"> </span><span class="n">S3</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">stats</span>
<span class="w">  </span><span class="nl">namespace</span><span class="p">:</span><span class="n">stats</span>
<span class="k">with</span><span class="w"> </span><span class="k">value</span>

<span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span>
<span class="err">{</span>
<span class="w">    </span><span class="n">cl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">oldClass</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">    </span><span class="n">other</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="err">!</span><span class="p">(</span><span class="n">cl</span><span class="w"> </span><span class="o">%</span><span class="ow">in</span><span class="o">%</span><span class="w"> </span><span class="n">c</span><span class="p">(</span><span class="ss">"ts"</span><span class="p">,</span><span class="w"> </span><span class="ss">"mts"</span><span class="p">))</span>
<span class="w">    </span><span class="k">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">any</span><span class="p">(</span><span class="n">other</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">cl</span><span class="o">[</span><span class="n">other</span><span class="o">]</span>
<span class="w">    </span><span class="n">attr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="ss">"tsp"</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">NULL</span>
<span class="w">    </span><span class="n">t</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="err">}</span>
<span class="o">&lt;</span><span class="nl">bytecode</span><span class="p">:</span><span class="w"> </span><span class="mh">0x294e410</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nl">environment</span><span class="p">:</span><span class="w"> </span><span class="nl">namespace</span><span class="p">:</span><span class="n">stats</span><span class="o">&gt;</span>
</pre></div>

<h2>The S4 method dispatch system</h2>
<p>The S4 system is a newer method dispatch system and is an alternative to the
S3 system. Here is an example of an S4 function:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nv">library</span><span class="ss">(</span><span class="nv">Matrix</span><span class="ss">)</span>
<span class="nv">Loading</span><span class="w"> </span><span class="nv">required</span><span class="w"> </span><span class="nv">package</span>:<span class="w"> </span><span class="nv">lattice</span>
<span class="o">&gt;</span><span class="w"> </span><span class="nv">chol2inv</span>
<span class="nv">standardGeneric</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">"chol2inv"</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">package</span><span class="w"> </span><span class="s2">"base"</span>

<span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="nv">x</span>,<span class="w"> </span>...<span class="ss">)</span><span class="w"> </span>
<span class="nv">standardGeneric</span><span class="ss">(</span><span class="s2">"chol2inv"</span><span class="ss">)</span>
<span class="o">&lt;</span><span class="nv">bytecode</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x000000000eafd790</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nv">environment</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x000000000eb06f10</span><span class="o">&gt;</span>
<span class="nv">Methods</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">arguments</span>:<span class="w"> </span><span class="nv">x</span>
<span class="nv">Use</span><span class="w">  </span><span class="nv">showMethods</span><span class="ss">(</span><span class="s2">"chol2inv"</span><span class="ss">)</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="nv">currently</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="nv">ones</span>.
</pre></div>

<p>The output already offers a lot of information. <code>standardGeneric</code> is an
indicator of an S4 function. The method to see defined S4 methods is offered
helpfully:</p>
<div class="code"><pre class="code literal-block">&gt; showMethods(chol2inv)
Function: chol2inv (package base)
x="ANY"
x="CHMfactor"
x="denseMatrix"
x="diagonalMatrix"
x="dtrMatrix"
x="sparseMatrix"
</pre></div>

<p><code>getMethod</code> can be used to see the source code of one of the methods:</p>
<div class="code"><pre class="code literal-block">&gt; getMethod("chol2inv", "diagonalMatrix")
Method Definition:

function (x, ...) 
{
    chk.s(...)
    tcrossprod(solve(x))
}
&lt;bytecode: 0x000000000ea2cc70&gt;
&lt;environment: namespace:Matrix&gt;

Signatures:
        x               
target  "diagonalMatrix"
defined "diagonalMatrix"
</pre></div>

<p>There are also methods with more complex signatures for each method, for
example</p>
<div class="code"><pre class="code literal-block">require(raster)
showMethods(extract)
Function: extract (package raster)
x="Raster", y="data.frame"
x="Raster", y="Extent"
x="Raster", y="matrix"
x="Raster", y="SpatialLines"
x="Raster", y="SpatialPoints"
x="Raster", y="SpatialPolygons"
x="Raster", y="vector"
</pre></div>

<p>To see the source code for one of these methods the entire signature must be
supplied, e.g.</p>
<div class="code"><pre class="code literal-block">getMethod("extract" , signature = c( x = "Raster" , y = "SpatialPolygons") )
</pre></div>

<p>It will not suffice to supply the partial signature</p>
<div class="code"><pre class="code literal-block"><span class="nv">getMethod</span><span class="ss">(</span><span class="s2">"extract"</span>,<span class="nv">signature</span><span class="o">=</span><span class="s2">"SpatialPolygons"</span><span class="ss">)</span>
#<span class="nv">Error</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">getMethod</span><span class="ss">(</span><span class="s2">"extract"</span>,<span class="w"> </span><span class="nv">signature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SpatialPolygons"</span><span class="ss">)</span><span class="w"> </span>:<span class="w"> </span>
#<span class="w">  </span><span class="nv">No</span><span class="w"> </span><span class="nv">method</span><span class="w"> </span><span class="nv">found</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="s2">"extract"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">signature</span><span class="w"> </span><span class="nv">SpatialPolygons</span>
</pre></div>

<h2>Functions that call unexported functions</h2>
<p>In the case of <code>ts.union</code>, <code>.cbindts</code> and <code>.makeNamesTs</code> are unexported
functions from the <code>stats</code> namespace. You can view the source code of
unexported functions by using the <code>:::</code> operator or <code>getAnywhere</code>.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nl">stats</span><span class="p">:</span><span class="o">::</span><span class="p">.</span><span class="n">makeNamesTs</span>
<span class="k">function</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span>
<span class="err">{</span>
<span class="w">    </span><span class="n">l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">as</span><span class="p">.</span><span class="n">list</span><span class="p">(</span><span class="n">substitute</span><span class="p">(</span><span class="n">list</span><span class="p">(...)))</span><span class="o">[</span><span class="n">-1L</span><span class="o">]</span>
<span class="w">    </span><span class="n">nm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">names</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="w">    </span><span class="n">fixup</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">is</span><span class="p">.</span><span class="k">null</span><span class="p">(</span><span class="n">nm</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">seq_along</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="n">nm</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">""</span>
<span class="w">    </span><span class="n">dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">l</span><span class="o">[</span><span class="n">fixup</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">deparse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">[</span><span class="n">1L</span><span class="o">]</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">is</span><span class="p">.</span><span class="k">null</span><span class="p">(</span><span class="n">nm</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="p">(</span><span class="n">dep</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">any</span><span class="p">(</span><span class="n">fixup</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">nm</span><span class="o">[</span><span class="n">fixup</span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dep</span>
<span class="w">    </span><span class="n">nm</span>
<span class="err">}</span>
<span class="o">&lt;</span><span class="nl">bytecode</span><span class="p">:</span><span class="w"> </span><span class="mh">0x38140d0</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nl">environment</span><span class="p">:</span><span class="w"> </span><span class="nl">namespace</span><span class="p">:</span><span class="n">stats</span><span class="o">&gt;</span>
</pre></div>

<h2>Functions that call compiled code</h2>
<p>Note that "compiled" does not refer to byte-compiled R code as created by the
<strong>compiler</strong> package. The <code>&lt;bytecode: 0x294e410&gt;</code> line in the above output
indicates that the function is byte-compiled, and you can still view the
source from the R command line.</p>
<p>Functions that call <code>.C</code>, <code>.Call</code>, <code>.Fortran</code>, <code>.External</code>, <code>.Internal</code>, or
<code>.Primitive</code> are calling entry points in compiled code, so you will have to
look at sources of the compiled code if you want to fully understand the
function. This GitHub mirror of the R source code is a decent place to start.
The function <code>pryr::show_c_source</code> can be a useful tool as it will take you
directly to a GitHub page for <code>.Internal</code> and <code>.Primitive</code> calls. Packages may
use <code>.C</code>, <code>.Call</code>, <code>.Fortran</code>, and <code>.External</code>; but not <code>.Internal</code> or
<code>.Primitive</code>, because these are used to call functions built into the R
interpreter.</p>
<p>Calls to some of the above functions may use an object instead of a character
string to reference the compiled function. In those cases, the object is of
class <code>"NativeSymbolInfo"</code>, <code>"RegisteredNativeSymbol"</code>, or <code>"NativeSymbol"</code>;
and printing the object yields useful information. For example, <code>optim</code> calls
<code>.External2(C_optimhess, res$par, fn1, gr1, con)</code> (note that's <code>C_optimhess</code>,
not <code>"C_optimhess"</code>). <code>optim</code> is in the stats package, so you can type
<code>stats:::C_optimhess</code> to see information about the compiled function being
called.</p>
<h3>Compiled code in a package</h3>
<p>If you want to view compiled code in a package, you will need to
download/unpack the package source. The installed binaries are not sufficient.
A package's source code is available from the same CRAN (or CRAN compatible)
repository that the package was originally installed from. The
<code>download.packages()</code> function can get the package source for you.</p>
<div class="code"><pre class="code literal-block"><span class="n">download</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="n">pkgs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Matrix"</span><span class="p">,</span><span class="w"> </span>
<span class="w">                  </span><span class="n">destdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span>
<span class="w">                  </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="p">)</span>
</pre></div>

<p>This will download the source version of the Matrix package and save the
corresponding <code>.tar.gz</code> file in the current directory. Source code for
compiled functions can be found in the <code>src</code> directory of the uncompressed and
untared file. The uncompressing and untaring step can be done outside of <code>R</code>,
or from within <code>R</code> using the <code>untar()</code> function. It is possible to combine the
download and expansion step into a single call (note that only one package at
a time can be downloaded and unpacked in this way):</p>
<div class="code"><pre class="code literal-block"><span class="n">untar</span><span class="p">(</span><span class="n">download</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="n">pkgs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Matrix"</span><span class="p">,</span>
<span class="w">                        </span><span class="n">destdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span>
<span class="w">                        </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="p">)[,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>

<p>Alternatively, if the package development is hosted publicly (e.g. via GitHub,
R-Forge, or RForge.net), you can probably browse the source code online.</p>
<h3>Compiled code in a base package</h3>
<p>Certain packages are considered "base" packages. These packages ship with R
and their version is locked to the version of R. Examples include <code>base</code>,
<code>compiler</code>, <code>stats</code>, and <code>utils</code>. As such, they are not available as separate
downloadable packages on CRAN as described above. Rather, they are part of the
R source tree in individual package directories under <code>/src/library/</code>. How to
access the R source is described in the next section.</p>
<h3>Compiled code built into the R interpreter</h3>
<p>If you want to view the code built-in to the R interpreter, you will need to
download/unpack the R sources; or you can view the sources online via the R
Subversion repository or Winston Chang's github mirror.</p>
<p>Uwe Ligges's R news article (PDF) (p. 43) is a good general reference of how
to view the source code for <code>.Internal</code> and <code>.Primitive</code> functions. The basic
steps are to first look for the function name in <code>src/main/names.c</code> and then
search for the "C-entry" name in the files in <code>src/main/*</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In addition to the other answers on this question and its duplicates, here's a
good way to get source code for a package function without needing to know
which package it's in. e.g. say if we want the source for
<code>randomForest::rfcv()</code>:</p>
<h4>To <strong>view/edit</strong> it in a pop-up window:</h4>
<div class="code"><pre class="code literal-block">edit(getAnywhere('rfcv'), file='source_rfcv.r')

View(getAnywhere('rfcv'), file='source_rfcv.r')
</pre></div>

<p>Note that <code>edit()</code> opens a text editor (of user's choice), whereas <code>View()</code>
invokes a spreadsheet-style data viewer.</p>
<ul>
<li>
<code>View()</code> is great for browsing (multi-columnar) <strong>data</strong> , but usually terrible for <strong>code</strong> of anything other than toy length.</li>
<li>so when only want to <strong>view code</strong> , <code>edit()</code> is IMO actually far better than <code>View()</code>, since with <code>edit()</code> you can collapse/hide/dummy out all the arg-parsing/checking/default/error-message logic which can take up to 70% of an R function, and just get to the part where the function actually operationally does something(!), what type(s) of objects its return type is, whether and how it recurses, etc.</li>
</ul>
<h4>To <strong>redirect to a separate file</strong> (so you can bring up the code in your</h4>
<p>favorite IDE/editor/process it with grep/etc.):</p>
<div class="code"><pre class="code literal-block">capture.output(getAnywhere('rfcv'), file='source_rfcv.r')
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/debugging/" rel="tag">debugging</a></li>
            <li><a class="tag p-category" href="../../categories/function/" rel="tag">function</a></li>
            <li><a class="tag p-category" href="../../categories/r/" rel="tag">r</a></li>
            <li><a class="tag p-category" href="../../categories/r-faq/" rel="tag">r-faq</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../invoking-javascript-code-in-an-iframe-from-the-parent-page/" rel="prev" title="Invoking JavaScript code in an iframe from the parent page">Previous post</a>
            </li>
            <li class="next">
                <a href="../why-does-git-perform-fast-forward-merges-by-default/" rel="next" title="Why does git perform fast-forward merges by default?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
