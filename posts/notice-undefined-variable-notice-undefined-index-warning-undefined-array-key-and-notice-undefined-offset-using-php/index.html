<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>"Notice: Undefined variable", "Notice: Undefined index", "Warning: Undefined array key", and "Notice: Undefined offset" using PHP | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/notice-undefined-variable-notice-undefined-index-warning-undefined-array-key-and-notice-undefined-offset-using-php/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../git-merge-hotfix-branch-into-feature-branch/" title="Git merge hotfix branch into feature branch" type="text/html">
<link rel="next" href="../jquery-document-createelement-equivalent/" title="jQuery document.createElement equivalent?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content='"Notice: Undefined variable", "Notice: Undefined index", "Warning: Und'>
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/notice-undefined-variable-notice-undefined-index-warning-undefined-array-key-and-notice-undefined-offset-using-php/">
<meta property="og:description" content="I'm running a PHP script and continue to receive errors like:

Notice: Undefined variable: my_variable_name in C:\wamp\www\mypath\index.php
on line 10
Notice: Undefined index: my_index C:\wamp\www\myp">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T03:09:37+08:00">
<meta property="article:tag" content="arrays">
<meta property="article:tag" content="php">
<meta property="article:tag" content="undefined-index">
<meta property="article:tag" content="variables">
<meta property="article:tag" content="warnings">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">"Notice: Undefined variable", "Notice: Undefined index", "Warning: Undefined array key", and "Notice: Undefined offset" using PHP</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:09:37+08:00" itemprop="datePublished" title="2023-02-17 03:09">2023-02-17 03:09</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'm running a PHP script and continue to receive errors like:</p>
<blockquote>
<p>Notice: Undefined variable: my_variable_name in C:\wamp\www\mypath\index.php
on line 10</p>
<p>Notice: Undefined index: my_index C:\wamp\www\mypath\index.php on line 11</p>
<p>Warning: Undefined array key "my_index" in C:\wamp\www\mypath\index.php on
line 11</p>
</blockquote>
<p>Line 10 and 11 looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="n">echo</span><span class="w"> </span><span class="s2">"My variable value is: "</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">$</span><span class="n">my_variable_name</span><span class="p">;</span>
<span class="n">echo</span><span class="w"> </span><span class="s2">"My index value is: "</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">$</span><span class="n">my_array</span><span class="p">[</span><span class="s2">"my_index"</span><span class="p">];</span>
</pre></div>

<p>What is the meaning of these error messages?</p>
<p>Why do they appear all of a sudden? I used to use this script for years and
I've never had any problem.</p>
<p>How do I fix them?</p>
<hr>
<blockquote>
<p><strong>This is a General Reference question</strong> for people to link to as duplicate,
instead of having to explain the issue over and over again. I feel this is
necessary because most real-world answers on this issue are very specific.</p>
<p>Related Meta discussion:</p>
<ul>
<li>What can be done about repetitive questions?</li>
<li>Do “reference questions” make sense?
</li>
</ul>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<h2>Notice / Warning: Undefined variable</h2>
<p>Although PHP does not require a variable declaration, it does recommend it in
order to avoid some security vulnerabilities or bugs where one would forget to
give a value to a variable that will be used later in the script. What PHP
does in the case of undeclared variables is issue an error of <code>E_WARNING</code>
level.</p>
<p>This warning helps a programmer to spot a misspelled variable name. Besides,
there are other possible issues with uninitialized variables. As it's stated
in the PHP manual,</p>
<blockquote>
<p>Relying on the default value of an uninitialized variable is problematic in
the case of including one file into another which uses the same variable
name.</p>
</blockquote>
<p>Means being uninitialized in the main file, this variable may be rewritten by
a variable from the included file, that may lead to unpredictable results. To
avoid that, all variables in a php file are best to be initialized</p>
<p>Ways to deal with the issue:</p>
<ol>
<li>
<p><strong>Recommended:</strong> Declare your variables, for example when you try to append a string to an undefined variable. Or use <code>isset()</code> to check if they are declared before referencing them, as in:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">//</span><span class="n">Initializing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">variable</span>
</pre></div>

<p>$value = ""; //Initialization value; 0 for int, [] for array, etc.
 echo $value; // no error</p>
</li>
<li>
<p>Suppress the error with null coalescing operator.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="c1">// Null coalescing operator</span>
</pre></div>

<p>echo $value ?? '';</p>
</li>
</ol>
<p>For the ancient PHP versions (&lt; 7.0) isset() with ternary can be used</p>
<div class="code"><pre class="code literal-block">     echo isset($value) ? $value : '';
</pre></div>

<p><strong>Be aware</strong> though, that it's still essentially an error suppression, though
for just one particular error. So it may prevent PHP from helping you by
marking an unitialized variable.</p>
<ol>
<li>Suppress the error with the @ operator. Left here for the historical reasons but seriously, it just shouldn't happen.</li>
</ol>
<p><strong>Note:</strong> It's strongly recommended to implement just point 1.</p>
<h2>Notice: Undefined index / Undefined offset / Warning: Undefined array key</h2>
<p>This notice/warning appears when you (or PHP) try to access an undefined index
of an array.</p>
<p>Ways to deal with the issue are pretty much the same:</p>
<ol>
<li>
<p><strong>Recommended:</strong> Declare your array elements:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">//</span><span class="n">Initializing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">variable</span>
</pre></div>

<p>$array['value'] = ""; //Initialization value; 0 for int, [] for array, etc.
 echo $array['value']; // no error</p>
</li>
<li>
<p>Suppress the error with null coalescing operator":</p>
<div class="code"><pre class="code literal-block"> echo $_POST['value'] ?? '';
</pre></div>

</li>
</ol>
<p>With arrays this operator is more justified, because it can be used with
outside variables you don't have control for. Therefore, consider using it for
the outside variables only, such as <code>$_POST</code> / <code>$_GET</code> / <code>$_SESSION</code> or JSON
input. While all internal arrays are best to be predefined/initialized first.</p>
<p><strong>Better yet,</strong> validate all input, assign it to local variables, and use them
all the way in the code. So every variable you're going to access deliberately
exists.</p>
<p>Related:</p>
<ul>
<li>Notice: Undefined variable</li>
<li>Notice: Undefined Index</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Try these</p>
<blockquote>
<p>Q1: this notice means $varname is not defined at current scope of the
script.</p>
<p>Q2: Use of isset(), empty() conditions before using any suspicious variable
works well.</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="c1">// recommended solution for recent PHP versions</span>
<span class="no">$</span><span class="n">user_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">_SESSION</span><span class="p">[</span><span class="s">'user_name'</span><span class="p">]</span><span class="w"> </span>??<span class="w"> </span><span class="s">''</span><span class="p">;</span>

<span class="c1">// pre-7 PHP versions</span>
<span class="no">$</span><span class="n">user_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">''</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span>!<span class="n">empty</span><span class="p">(</span><span class="no">$</span><span class="n">_SESSION</span><span class="p">[</span><span class="s">'user_name'</span><span class="p">]))</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="no">$</span><span class="n">user_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">_SESSION</span><span class="p">[</span><span class="s">'user_name'</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<p>Or, as a quick and dirty solution:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// not the best solution, but works</span>
<span class="c1">// in your php setting use, it helps hiding site wide notices</span>
<span class="n">error_reporting</span><span class="p">(</span><span class="n">E_ALL</span><span class="w"> </span>^<span class="w"> </span><span class="n">E_NOTICE</span><span class="p">);</span>
</pre></div>

<hr>
<p>Note about sessions:</p>
<ul>
<li>
<p>When using sessions, <code>session_start();</code> is required to be placed inside all files using sessions.</p>
</li>
<li>
<p>http://php.net/manual/en/features.sessions.php</p>
</li>
</ul>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/arrays/" rel="tag">arrays</a></li>
            <li><a class="tag p-category" href="../../categories/php/" rel="tag">php</a></li>
            <li><a class="tag p-category" href="../../categories/undefined-index/" rel="tag">undefined-index</a></li>
            <li><a class="tag p-category" href="../../categories/variables/" rel="tag">variables</a></li>
            <li><a class="tag p-category" href="../../categories/warnings/" rel="tag">warnings</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../git-merge-hotfix-branch-into-feature-branch/" rel="prev" title="Git merge hotfix branch into feature branch">Previous post</a>
            </li>
            <li class="next">
                <a href="../jquery-document-createelement-equivalent/" rel="next" title="jQuery document.createElement equivalent?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
