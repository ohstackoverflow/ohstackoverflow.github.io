<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What does the [Flags] Enum Attribute mean in C#? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-does-the-flags-enum-attribute-mean-in-c/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../map-function-for-objects-instead-of-arrays/" title="map function for objects (instead of arrays)" type="text/html">
<link rel="next" href="../how-does-the-java-for-each-loop-work/" title="How does the Java 'for each' loop work?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What does the [Flags] Enum Attribute mean in C#?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-does-the-flags-enum-attribute-mean-in-c/">
<meta property="og:description" content="From time to time I see an enum like the following:
[Flags]
public enum Options 
{
    None    = 0,
    Option1 = 1,
    Option2 = 2,
    Option3 = 4,
    Option4 = 8
}


I don't understand what exact">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T00:40:35+08:00">
<meta property="article:tag" content=".net-c#">
<meta property="article:tag" content="enums">
<meta property="article:tag" content="flags">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What does the [Flags] Enum Attribute mean in C#?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:40:35+08:00" itemprop="datePublished" title="2023-02-17 00:40">2023-02-17 00:40</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>From time to time I see an enum like the following:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Flags]</span>
<span class="na">public enum Options </span>
<span class="na">{</span>
<span class="w">    </span><span class="na">None</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s">0,</span>
<span class="w">    </span><span class="na">Option1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1,</span>
<span class="w">    </span><span class="na">Option2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2,</span>
<span class="w">    </span><span class="na">Option3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4,</span>
<span class="w">    </span><span class="na">Option4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">8</span>
<span class="na">}</span>
</pre></div>

<p>I don't understand what exactly the <code>[Flags]</code> attribute does.</p>
<p>Anyone have a good explanation or example they could post?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>[Flags]</code> attribute should be used whenever the enumerable represents a
collection of possible values, rather than a single value. Such collections
are often used with bitwise operators, for example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">allowedColors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyColor</span><span class="o">.</span><span class="n">Red</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MyColor</span><span class="o">.</span><span class="n">Green</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">MyColor</span><span class="o">.</span><span class="n">Blue</span><span class="p">;</span>
</pre></div>

<p>Note that the <code>[Flags]</code> attribute <strong>doesn't</strong> enable this by itself - all it
does is allow a nice representation by the <code>.ToString()</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="n">enum</span><span class="w"> </span><span class="n">Suits</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">Spades</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Clubs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">Diamonds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">Hearts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="err">}</span>
<span class="o">[</span><span class="n">Flags</span><span class="o">]</span><span class="w"> </span><span class="n">enum</span><span class="w"> </span><span class="n">SuitsFlags</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">Spades</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Clubs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">Diamonds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">Hearts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="err">}</span>

<span class="p">...</span>

<span class="nf">var</span><span class="w"> </span><span class="n">str1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Suits</span><span class="p">.</span><span class="n">Spades</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Suits</span><span class="p">.</span><span class="n">Diamonds</span><span class="p">).</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">           </span><span class="o">//</span><span class="w"> </span><span class="ss">"5"</span>
<span class="nf">var</span><span class="w"> </span><span class="n">str2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">SuitsFlags</span><span class="p">.</span><span class="n">Spades</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SuitsFlags</span><span class="p">.</span><span class="n">Diamonds</span><span class="p">).</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">           </span><span class="o">//</span><span class="w"> </span><span class="ss">"Spades, Diamonds"</span>
</pre></div>

<p>It is also important to note that <code>[Flags]</code> <strong>does not</strong> automatically make
the enum values powers of two. If you omit the numeric values, the enum will
not work as one might expect in bitwise operations, because by default the
values start with 0 and increment.</p>
<p>Incorrect declaration:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Flags]</span>
<span class="na">public enum MyColors</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">Yellow,  // 0</span>
<span class="w">    </span><span class="na">Green,   // 1</span>
<span class="w">    </span><span class="na">Red,     // 2</span>
<span class="w">    </span><span class="na">Blue     // 3</span>
<span class="na">}</span>
</pre></div>

<p>The values, if declared this way, will be Yellow = 0, Green = 1, Red = 2, Blue
= 3. This will render it useless as flags.</p>
<p>Here's an example of a correct declaration:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Flags]</span>
<span class="na">public enum MyColors</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">Yellow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1,</span>
<span class="w">    </span><span class="na">Green</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2,</span>
<span class="w">    </span><span class="na">Red</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4,</span>
<span class="w">    </span><span class="na">Blue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">8</span>
<span class="na">}</span>
</pre></div>

<p>To retrieve the distinct values in your property, one can do this:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">myProperties</span>.<span class="nv">AllowedColors</span>.<span class="nv">HasFlag</span><span class="ss">(</span><span class="nv">MyColor</span>.<span class="nv">Yellow</span><span class="ss">))</span>
{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Yellow</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">allowed</span>...
}
</pre></div>

<p>or prior to .NET 4:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">((</span><span class="nv">myProperties</span>.<span class="nv">AllowedColors</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nv">MyColor</span>.<span class="nv">Yellow</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">MyColor</span>.<span class="nv">Yellow</span><span class="ss">)</span>
{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Yellow</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">allowed</span>...
}

<span class="k">if</span><span class="ss">((</span><span class="nv">myProperties</span>.<span class="nv">AllowedColors</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nv">MyColor</span>.<span class="nv">Green</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">MyColor</span>.<span class="nv">Green</span><span class="ss">)</span>
{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Green</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">allowed</span>...
}
</pre></div>

<p><strong>Under the covers</strong></p>
<p>This works because you used powers of two in your enumeration. Under the
covers, your enumeration values look like this in binary ones and zeros:</p>
<div class="code"><pre class="code literal-block"> Yellow: 00000001
 Green:  00000010
 Red:    00000100
 Blue:   00001000
</pre></div>

<p>Similarly, after you've set your property <em>AllowedColors</em> to Red, Green and
Blue using the binary bitwise OR <code>|</code> operator, <em>AllowedColors</em> looks like
this:</p>
<div class="code"><pre class="code literal-block">myProperties.AllowedColors: 00001110
</pre></div>

<p>So when you retrieve the value you are actually performing bitwise AND <code>&amp;</code> on
the values:</p>
<div class="code"><pre class="code literal-block">myProperties.AllowedColors: 00001110
             MyColor.Green: 00000010
             -----------------------
                            00000010 // Hey, this is the same as MyColor.Green!
</pre></div>

<p><strong>The None = 0 value</strong></p>
<p>And regarding the use of <code>0</code> in your enumeration, quoting from MSDN:</p>
<div class="code"><pre class="code literal-block"><span class="k">[Flags]</span>
<span class="na">public enum MyColors</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">None</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0,</span>
<span class="w">    </span><span class="na">....</span>
<span class="na">}</span>
</pre></div>

<blockquote>
<p>Use None as the name of the flag enumerated constant whose value is zero.
<strong>You cannot use the None enumerated constant in a bitwise AND operation to
test for a flag because the result is always zero.</strong> However, you can
perform a logical, not a bitwise, comparison between the numeric value and
the None enumerated constant to determine whether any bits in the numeric
value are set.</p>
</blockquote>
<p>You can find more info about the flags attribute and its usage at msdn and
designing flags at msdn</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can also do this</p>
<div class="code"><pre class="code literal-block"><span class="k">[Flags]</span>
<span class="na">public enum MyEnum</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">None</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">0,</span>
<span class="w">    </span><span class="na">First</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">1 &lt;&lt; 0,</span>
<span class="w">    </span><span class="na">Second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1 &lt;&lt; 1,</span>
<span class="w">    </span><span class="na">Third</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">1 &lt;&lt; 2,</span>
<span class="w">    </span><span class="na">Fourth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1 &lt;&lt; 3</span>
<span class="na">}</span>
</pre></div>

<p>I find the bit-shifting easier than typing 4,8,16,32 and so on. It has no
impact on your code because it's all done at compile time</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/net-c/" rel="tag">.net-c#</a></li>
            <li><a class="tag p-category" href="../../categories/enums/" rel="tag">enums</a></li>
            <li><a class="tag p-category" href="../../categories/flags/" rel="tag">flags</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../map-function-for-objects-instead-of-arrays/" rel="prev" title="map function for objects (instead of arrays)">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-does-the-java-for-each-loop-work/" rel="next" title="How does the Java 'for each' loop work?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
