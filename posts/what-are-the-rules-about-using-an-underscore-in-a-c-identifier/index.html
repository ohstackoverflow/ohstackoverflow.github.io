<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What are the rules about using an underscore in a C++ identifier? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-are-the-rules-about-using-an-underscore-in-a-c-identifier/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../what-is-the-difference-between-pip-and-conda/" title="What is the difference between pip and conda?" type="text/html">
<link rel="next" href="../how-can-i-find-the-time-complexity-of-an-algorithm/" title="How can I find the time complexity of an algorithm?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What are the rules about using an underscore in a C++ identifier?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-are-the-rules-about-using-an-underscore-in-a-c-identifier/">
<meta property="og:description" content="It's common in C++ to name member variables with some kind of prefix to denote
the fact that they're member variables, rather than local variables or
parameters. If you've come from an MFC background,">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T07:07:57+08:00">
<meta property="article:tag" content="c++">
<meta property="article:tag" content="c++-faq">
<meta property="article:tag" content="naming-conventions">
<meta property="article:tag" content="standards">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What are the rules about using an underscore in a C++ identifier?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:07:57+08:00" itemprop="datePublished" title="2023-02-17 07:07">2023-02-17 07:07</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>It's common in C++ to name member variables with some kind of prefix to denote
the fact that they're member variables, rather than local variables or
parameters. If you've come from an MFC background, you'll probably use
<code>m_foo</code>. I've also seen <code>myFoo</code> occasionally.</p>
<p>C# (or possibly just .NET) seems to recommend using just an underscore, as in
<code>_foo</code>. Is this allowed by the C++ standard?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The rules (which did not change in C++11):</p>
<ul>
<li>Reserved in any scope, including for use as implementation macros: <ul>
<li>identifiers beginning with an underscore followed immediately by an uppercase letter</li>
<li>identifiers containing adjacent underscores (or "double underscore")</li>
</ul>
</li>
<li>Reserved in the global namespace: <ul>
<li>identifiers beginning with an underscore</li>
</ul>
</li>
<li>Also, everything in the <code>std</code> namespace is reserved. (You are allowed to add template specializations, though.) </li>
</ul>
<p>From the 2003 C++ Standard:</p>
<blockquote>
<h4>17.4.3.1.2 Global names [lib.global.names]</h4>
<p>Certain sets of names and function signatures are always reserved to the
implementation:</p>
<ul>
<li>Each name that contains a double underscore (<code>__</code>) or begins with an
underscore followed by an uppercase letter (2.11) is reserved to the
implementation for any use.</li>
<li>Each name that begins with an underscore is reserved to the
implementation for use as a name in the global namespace.165
</li>
</ul>
<p>165) Such names are also reserved in namespace <code>::std</code> (17.4.3.1).</p>
</blockquote>
<p>Because C++ is based on the C standard (1.1/2, C++03) and C99 is a normative
reference (1.2/1, C++03) these also apply, from the 1999 C Standard:</p>
<blockquote>
<h4>7.1.3 Reserved identifiers</h4>
<p>Each header declares or defines all identifiers listed in its associated
subclause, and optionally declares or defines identifiers listed in its
associated future library directions subclause and identifiers which are
always reserved either for any use or for use as file scope identifiers.</p>
<ul>
<li>All identifiers that begin with an underscore and either an uppercase
letter or another underscore are always reserved for any use.</li>
<li>All identifiers that begin with an underscore are always reserved for
use as identifiers with file scope in both the ordinary and tag name spaces.</li>
<li>Each macro name in any of the following subclauses (including the future
library directions) is reserved for use as specified if any of its
associated headers is included; unless explicitly stated otherwise (see
7.1.4).</li>
<li>All identifiers with external linkage in any of the following subclauses
(including the future library directions) are always reserved for use as
identifiers with external linkage.154</li>
<li>Each identifier with file scope listed in any of the following
subclauses (including the future library directions) is reserved for use as
a macro name and as an identifier with file scope in the same name space if
any of its associated headers is included.
</li>
</ul>
<p>No other identifiers are reserved. If the program declares or defines an
identifier in a context in which it is reserved (other than as allowed by
7.1.4), or defines a reserved identifier as a macro name, the behavior is
undefined.</p>
<p>If the program removes (with <code>#undef</code>) any macro definition of an identifier
in the first group listed above, the behavior is undefined.</p>
<p>154) The list of reserved identifiers with external linkage includes
<code>errno</code>, <code>math_errhandling</code>, <code>setjmp</code>, and <code>va_end</code>.</p>
</blockquote>
<p>Other restrictions might apply. For example, the POSIX standard reserves a lot
of identifiers that are likely to show up in normal code:</p>
<ul>
<li>Names beginning with a capital <code>E</code> followed a digit or uppercase letter: <ul>
<li>may be used for additional error code names.</li>
</ul>
</li>
<li>Names that begin with either <code>is</code> or <code>to</code> followed by a lowercase letter <ul>
<li>may be used for additional character testing and conversion functions.</li>
</ul>
</li>
<li>Names that begin with <code>LC_</code> followed by an uppercase letter <ul>
<li>may be used for additional macros specifying locale attributes.</li>
</ul>
</li>
<li>Names of all existing mathematics functions suffixed with <code>f</code> or <code>l</code> are reserved <ul>
<li>for corresponding functions that operate on float and long double arguments, respectively.</li>
</ul>
</li>
<li>Names that begin with <code>SIG</code> followed by an uppercase letter are reserved <ul>
<li>for additional signal names.</li>
</ul>
</li>
<li>Names that begin with <code>SIG_</code> followed by an uppercase letter are reserved <ul>
<li>for additional signal actions.</li>
</ul>
</li>
<li>Names beginning with <code>str</code>, <code>mem</code>, or <code>wcs</code> followed by a lowercase letter are reserved <ul>
<li>for additional string and array functions.</li>
</ul>
</li>
<li>Names beginning with <code>PRI</code> or <code>SCN</code> followed by any lowercase letter or <code>X</code> are reserved <ul>
<li>for additional format specifier macros</li>
</ul>
</li>
<li>Names that end with <code>_t</code> are reserved <ul>
<li>for additional type names.</li>
</ul>
</li>
</ul>
<p>While using these names for your own purposes right now might not cause a
problem, they do raise the possibility of conflict with future versions of
that standard.</p>
<hr>
<p>Personally I just don't start identifiers with underscores. New addition to my
rule: Don't use double underscores anywhere, which is easy as I rarely use
underscore.</p>
<p>After doing research on this article I no longer end my identifiers with <code>_t</code>
as this is reserved by the POSIX standard.</p>
<p>The rule about any identifier ending with <code>_t</code> surprised me a lot. I think
that is a POSIX standard (not sure yet) looking for clarification and official
chapter and verse. This is from the GNU libtool manual, listing reserved
names.</p>
<p>CesarB provided the following link to the POSIX 2004 reserved symbols and
notes 'that many other reserved prefixes and suffixes ... can be found there'.
The POSIX 2008 reserved symbols are defined here. The restrictions are
somewhat more nuanced than those above.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The rules to avoid collision of names are both in the C++ standard (see
Stroustrup book) and mentioned by C++ gurus (Sutter, etc.).</p>
<h3>Personal rule</h3>
<p>Because I did not want to deal with cases, and wanted a simple rule, I have
designed a <strong>personal</strong> one that is both simple and correct:</p>
<p><strong>When naming a symbol, you will avoid collision with compiler/OS/standard
libraries if you:</strong></p>
<hr>
<p>**</p>
<ul>
<li>
<p>never start a symbol with an underscore
**</p>
</li>
<li>
<p><strong>never name a symbol with two consecutive underscores inside.</strong></p>
</li>
</ul>
<p>Of course, putting your code in an unique namespace helps to avoid collision,
too (but won't protect against evil macros)</p>
<h3>Some examples</h3>
<p>(I use macros because they are the more code-polluting of C/C++ symbols, but
it could be anything from variable name to class name)</p>
<div class="code"><pre class="code literal-block">#define _WRONG
#define __WRONG_AGAIN
#define RIGHT_
#define WRONG__WRONG
#define RIGHT_RIGHT
#define RIGHT_x_RIGHT
</pre></div>

<h3>Extracts from C++0x draft</h3>
<p>From the n3242.pdf file (I expect the final standard text to be similar):</p>
<blockquote>
<p><strong>17.6.3.3.2 Global names [global.names]</strong></p>
<p>Certain sets of names and function signatures are always reserved to the
implementation:</p>
<p>— Each name that contains a double underscore _ _ or begins with an
underscore followed by an uppercase letter (2.12) is reserved to the
implementation for any use.</p>
<p>— Each name that begins with an underscore is reserved to the implementation
for use as a name in the global namespace.</p>
</blockquote>
<p>But also:</p>
<blockquote>
<p><strong>17.6.3.3.5 User-defined literal suffixes [usrlit.suffix]</strong></p>
<p>Literal suffix identifiers that do not start with an underscore are reserved
for future standardization.</p>
</blockquote>
<p>This last clause is confusing, unless you consider that a name starting with
one underscore and followed by a lowercase letter would be Ok if <em>not</em> defined
in the global namespace...</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/c%2B%2B/" rel="tag">c++</a></li>
            <li><a class="tag p-category" href="../../categories/c%2B%2B-faq/" rel="tag">c++-faq</a></li>
            <li><a class="tag p-category" href="../../categories/naming-conventions/" rel="tag">naming-conventions</a></li>
            <li><a class="tag p-category" href="../../categories/standards/" rel="tag">standards</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../what-is-the-difference-between-pip-and-conda/" rel="prev" title="What is the difference between pip and conda?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-can-i-find-the-time-complexity-of-an-algorithm/" rel="next" title="How can I find the time complexity of an algorithm?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
