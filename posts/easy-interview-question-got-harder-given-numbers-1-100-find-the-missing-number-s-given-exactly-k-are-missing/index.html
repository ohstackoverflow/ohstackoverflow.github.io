<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Easy interview question got harder: given numbers 1..100, find the missing number(s) given exactly k are missing | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/easy-interview-question-got-harder-given-numbers-1-100-find-the-missing-number-s-given-exactly-k-are-missing/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-check-if-a-map-contains-a-key-in-go/" title="How to check if a map contains a key in Go?" type="text/html">
<link rel="next" href="../how-do-i-run-two-commands-in-one-line-in-windows-cmd/" title="How do I run two commands in one line in Windows CMD?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Easy interview question got harder: given numbers 1..100, find the mis">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/easy-interview-question-got-harder-given-numbers-1-100-find-the-missing-number-s-given-exactly-k-are-missing/">
<meta property="og:description" content="I had an interesting job interview experience a while back. The question
started really easy:

Q1 : We have a bag containing numbers 1, 2, 3, …, 100. Each
number appears exactly once, so there are 100">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T03:53:53+08:00">
<meta property="article:tag" content="algorithm">
<meta property="article:tag" content="arrays">
<meta property="article:tag" content="math">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Easy interview question got harder: given numbers 1..100, find the missing number(s) given exactly k are missing</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:53:53+08:00" itemprop="datePublished" title="2023-02-17 03:53">2023-02-17 03:53</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I had an interesting job interview experience a while back. The question
started really easy:</p>
<blockquote>
<p><strong>Q1</strong> : We have a bag containing numbers <code>1</code>, <code>2</code>, <code>3</code>, …, <code>100</code>. Each
number appears exactly once, so there are 100 numbers. Now one number is
randomly picked out of the bag. Find the missing number.</p>
</blockquote>
<p>I've heard this interview question before, of course, so I very quickly
answered along the lines of:</p>
<blockquote>
<p><strong>A1</strong> : Well, the sum of the numbers <code>1 + 2 + 3 + … + N</code> is <code>(N+1)(N/2)</code>
(see Wikipedia: sum of arithmetic series). For <code>N = 100</code>, the sum is <code>5050</code>.</p>
<p>Thus, if all numbers are present in the bag, the sum will be exactly <code>5050</code>.
Since one number is missing, the sum will be less than this, and the
difference is that number. So we can find that missing number in <code>O(N)</code> time
and <code>O(1)</code> space.</p>
</blockquote>
<p>At this point I thought I had done well, but all of a sudden the question took
an unexpected turn:</p>
<blockquote>
<p><strong>Q2</strong> : That is correct, but now how would you do this if <em>TWO</em> numbers are
missing?</p>
</blockquote>
<p>I had never seen/heard/considered this variation before, so I panicked and
couldn't answer the question. The interviewer insisted on knowing my thought
process, so I mentioned that perhaps we can get more information by comparing
against the expected product, or perhaps doing a second pass after having
gathered some information from the first pass, etc, but I really was just
shooting in the dark rather than actually having a clear path to the solution.</p>
<p>The interviewer did try to encourage me by saying that having a second
equation is indeed one way to solve the problem. At this point I was kind of
upset (for not knowing the answer before hand), and asked if this is a general
(read: "useful") programming technique, or if it's just a trick/gotcha answer.</p>
<p>The interviewer's answer surprised me: you can generalize the technique to
find 3 missing numbers. In fact, you can generalize it to find <em>k</em> missing
numbers.</p>
<blockquote>
<p><strong>Qk</strong> : If exactly <em>k</em> numbers are missing from the bag, how would you find
it efficiently?</p>
</blockquote>
<p>This was a few months ago, and I still couldn't figure out what this technique
is. Obviously there's a <code>Ω(N)</code> time lower bound since we must scan all the
numbers at least once, but the interviewer insisted that the <em>TIME</em> and
<em>SPACE</em> complexity of the solving technique (minus the <code>O(N)</code> time input scan)
is defined in <em>k</em> not <em>N</em>.</p>
<p>So the question here is simple:</p>
<ul>
<li>How would you solve <strong>Q2</strong>?</li>
<li>How would you solve <strong>Q3</strong>?</li>
<li>How would you solve <strong>Qk</strong>?</li>
</ul>
<hr>
<h4>Clarifications</h4>
<ul>
<li>Generally there are <em>N</em> numbers from 1.. <em>N</em> , not just 1..100.</li>
<li>I'm not looking for the obvious set-based solution, e.g. using a bit set, encoding the presence/absence each number by the value of a designated bit, therefore using <code>O(N)</code> bits in additional space. We can't afford any additional space proportional to <em>N</em>.</li>
<li>I'm also not looking for the obvious sort-first approach. This and the set-based approach are worth mentioning in an interview (they are easy to implement, and depending on <em>N</em> , can be very practical). I'm looking for the Holy Grail solution (which may or may not be practical to implement, but has the desired asymptotic characteristics nevertheless).</li>
</ul>
<p>So again, of course you must scan the input in <code>O(N)</code>, but you can only
capture small amount of information (defined in terms of <em>k</em> not <em>N</em> ), and
must then find the <em>k</em> missing numbers somehow.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's a summary of Dimitris Andreou's link.</p>
<p>Remember sum of i-th powers, where i=1,2,..,k. This reduces the problem to
solving the system of equations</p>
<p>a1 + a2 + ... + ak = b1</p>
<p>a12 + a22 + ... + ak2 = b2</p>
<p>...</p>
<p>a1k + a2k + ... + akk = bk</p>
<p>Using Newton's identities, knowing bi allows to compute</p>
<p>c1 = a1 + a2 + ... ak</p>
<p>c2 = a1a2 + a1a3 + ... + ak-1ak</p>
<p>...</p>
<p>ck = a1a2 ... ak</p>
<p>If you expand the polynomial (x-a1)...(x-ak) the coefficients will be exactly
c1, ..., ck - see Viète's formulas. Since every polynomial factors uniquely
(ring of polynomials is an Euclidean domain), this means ai are uniquely
determined, up to permutation.</p>
<p>This ends a proof that remembering powers is enough to recover the numbers.
For constant k, this is a good approach.</p>
<p>However, when k is varying, the direct approach of computing c1,...,ck is
prohibitely expensive, since e.g. ck is the product of all missing numbers,
magnitude n!/(n-k)!. To overcome this, perform computations in Zq field, where
q is a prime such that n &lt;= q &lt; 2n - it exists by Bertrand's postulate. The
proof doesn't need to be changed, since the formulas still hold, and
factorization of polynomials is still unique. You also need an algorithm for
factorization over finite fields, for example the one by Berlekamp or Cantor-
Zassenhaus.</p>
<p>High level pseudocode for constant k:</p>
<ul>
<li>Compute i-th powers of given numbers</li>
<li>Subtract to get sums of i-th powers of unknown numbers. Call the sums bi.</li>
<li>Use Newton's identities to compute coefficients from bi; call them ci. Basically, c1 = b1; c2 = (c1b1 - b2)/2; see Wikipedia for exact formulas</li>
<li>Factor the polynomial xk-c1xk-1 + ... + ck.</li>
<li>The roots of the polynomial are the needed numbers a1, ..., ak.</li>
</ul>
<p>For varying k, find a prime n &lt;= q &lt; 2n using e.g. Miller-Rabin, and perform
the steps with all numbers reduced modulo q.</p>
<p>EDIT: The previous version of this answer stated that instead of Zq, where q
is prime, it is possible to use a finite field of characteristic 2 (q=2^(log
n)). This is not the case, since Newton's formulas require division by numbers
up to k.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You will find it by reading the couple of pages of <em>Muthukrishnan - Data
Stream Algorithms: Puzzle 1: Finding Missing Numbers</em>. <strong>It shows exactly the
generalization you are looking for</strong>. Probably this is what your interviewer
read and why he posed these questions.</p>
<hr>
<p><strong>Also see sdcvvc's directly related answer</strong> , which also includes pseudocode
(hurray! no need to read those tricky math formulations :)) (thanks, great
work!).</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/algorithm/" rel="tag">algorithm</a></li>
            <li><a class="tag p-category" href="../../categories/arrays/" rel="tag">arrays</a></li>
            <li><a class="tag p-category" href="../../categories/math/" rel="tag">math</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-check-if-a-map-contains-a-key-in-go/" rel="prev" title="How to check if a map contains a key in Go?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-do-i-run-two-commands-in-one-line-in-windows-cmd/" rel="next" title="How do I run two commands in one line in Windows CMD?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
