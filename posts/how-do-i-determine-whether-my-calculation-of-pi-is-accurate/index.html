<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How do I determine whether my calculation of pi is accurate? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-do-i-determine-whether-my-calculation-of-pi-is-accurate/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-can-i-capitalize-the-first-letter-of-each-word-in-a-string/" title="How can I capitalize the first letter of each word in a string?" type="text/html">
<link rel="next" href="../what-is-the-python-equivalent-of-static-variables-inside-a-function/" title="What is the Python equivalent of static variables inside a function?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How do I determine whether my calculation of pi is accurate?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-do-i-determine-whether-my-calculation-of-pi-is-accurate/">
<meta property="og:description" content="I was trying various methods to implement a program that gives the digits of
pi sequentially. I tried the Taylor series method, but it proved to converge
extremely slowly (when I compared my result wi">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T13:34:25+08:00">
<meta property="article:tag" content="algorithm">
<meta property="article:tag" content="language-agnostic">
<meta property="article:tag" content="math">
<meta property="article:tag" content="pi">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How do I determine whether my calculation of pi is accurate?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:34:25+08:00" itemprop="datePublished" title="2023-02-17 13:34">2023-02-17 13:34</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I was trying various methods to implement a program that gives the digits of
pi sequentially. I tried the Taylor series method, but it proved to converge
extremely slowly (when I compared my result with the online values after some
time). Anyway, I am trying better algorithms.</p>
<p>So, while writing the program I got stuck on a problem, as with all
algorithms: How do I know that the <code>n</code> digits that I've calculated are
accurate?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Since I'm the current world record holder for the most digits of pi, I'll add
my two cents:</p>
<p>Unless you're actually setting a new world record, the common practice is just
to verify the computed digits against the known values. So that's simple
enough.</p>
<p>In fact, I have a webpage that lists snippets of digits for the purpose of
verifying computations against them: http://www.numberworld.org/digits/Pi/</p>
<hr>
<p>But when you get into world-record territory, there's nothing to compare
against.</p>
<p>Historically, the standard approach for verifying that computed digits are
correct is to recompute the digits using a second algorithm. So if either
computation goes bad, the digits at the end won't match.</p>
<p>This does typically more than double the amount of time needed (since the
second algorithm is usually slower). But it's the only way to verify the
computed digits once you've wandered into the uncharted territory of never-
before-computed digits and a new world record.</p>
<hr>
<p>Back in the days where supercomputers were setting the records, two different
AGM algorithms were commonly used:</p>
<ul>
<li>Gauss–Legendre algorithm</li>
<li>Borwein's algorithm</li>
</ul>
<p>These are both <code>O(N log(N)^2)</code> algorithms that were fairly easy to implement.</p>
<p>However, nowadays, things are a bit different. In the last three world
records, instead of performing two computations, we performed only one
computation using the fastest known formula (Chudnovsky Formula):</p>
<p><img alt="Enter image description here" src="../../images/YO0MI.png"></p>
<p>This algorithm is much harder to implement, but it is a lot faster than the
AGM algorithms.</p>
<p>Then we verify the binary digits using the BBP formulas for digit extraction.</p>
<p><img alt="Enter image description here" src="../../images/yC73N.png"></p>
<p>This formula allows you to compute arbitrary binary digits <em>without</em> computing
all the digits before it. So it is used to verify the last few computed binary
digits. Therefore it is <strong><em>much</em></strong> faster than a full computation.</p>
<p>The advantage of this is:</p>
<ol>
<li>Only one expensive computation is needed.</li>
</ol>
<p>The disadvantage is:</p>
<ol>
<li>An implementation of the Bailey–Borwein–Plouffe (BBP) formula is needed.</li>
<li>An additional step is needed to verify the radix conversion from binary to decimal.</li>
</ol>
<p>I've glossed over some details of why verifying the last few digits implies
that all the digits are correct. But it is easy to see this since any
computation error will propagate to the last digits.</p>
<hr>
<p>Now this last step (verifying the conversion) is actually fairly important.
One of the previous world record holders <strong><em>actually called us out</em></strong> on this
because, initially, I didn't give a sufficient description of how it worked.</p>
<p>So I've pulled this snippet from my blog:</p>
<div class="code"><pre class="code literal-block">N = # of decimal digits desired
p = 64-bit prime number
</pre></div>

<p><img alt="Enter image description here" src="../../images/eM9bu.png"></p>
<p>Compute A using base 10 arithmetic and B using binary arithmetic.</p>
<p><img alt="Enter image description here" src="../../images/pyxWt.png"></p>
<p>If <code>A = B</code>, then with "extremely high probability", the conversion is correct.</p>
<hr>
<p>For further reading, see my blog post <strong>Pi - 5 Trillion Digits</strong>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Undoubtedly, for your purposes (which I assume is just a programming
exercise), the best thing is to check your results against any of the listings
of the digits of pi on the web.</p>
<p>And how do we know that those values are correct? Well, I could say that there
are computer-science-y ways to prove that an implementation of an algorithm is
correct.</p>
<p>More pragmatically, if different people use different algorithms, and they all
agree to (pick a number) a thousand (million, whatever) decimal places, that
should give you a warm fuzzy feeling that they got it right.</p>
<p>Historically, William Shanks published pi to 707 decimal places in 1873. Poor
guy, he made a mistake starting at the 528th decimal place.</p>
<p>Very interestingly, in 1995 an algorithm was published that had the property
that would directly calculate the nth digit (base 16) of pi <em>without having to
calculate all the previous digits</em>!</p>
<p>Finally, I hope your initial algorithm wasn't <code>pi/4 = 1 - 1/3 + 1/5 - 1/7 +
...</code> That may be the simplest to program, but it's also one of the slowest
ways to do so. Check out the pi article on Wikipedia for faster approaches.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/algorithm/" rel="tag">algorithm</a></li>
            <li><a class="tag p-category" href="../../categories/language-agnostic/" rel="tag">language-agnostic</a></li>
            <li><a class="tag p-category" href="../../categories/math/" rel="tag">math</a></li>
            <li><a class="tag p-category" href="../../categories/pi/" rel="tag">pi</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-can-i-capitalize-the-first-letter-of-each-word-in-a-string/" rel="prev" title="How can I capitalize the first letter of each word in a string?">Previous post</a>
            </li>
            <li class="next">
                <a href="../what-is-the-python-equivalent-of-static-variables-inside-a-function/" rel="next" title="What is the Python equivalent of static variables inside a function?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
