<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Check if something is (not) in a list in Python | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/check-if-something-is-not-in-a-list-in-python/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../why-does-css-work-with-fake-elements/" title="Why does CSS work with fake elements?" type="text/html">
<link rel="next" href="../how-to-pass-optional-parameters-while-omitting-some-other-optional-parameters/" title="How to pass optional parameters while omitting some other optional parameters?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Check if something is (not) in a list in Python">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/check-if-something-is-not-in-a-list-in-python/">
<meta property="og:description" content="I have a list of tuples in Python, and I have a conditional where I want to
take the branch ONLY if the tuple is not in the list (if it is in the list,
then I don't want to take the if branch)
if curr">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T12:27:30+08:00">
<meta property="article:tag" content="conditional-statements">
<meta property="article:tag" content="list">
<meta property="article:tag" content="membership">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Check if something is (not) in a list in Python</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:27:30+08:00" itemprop="datePublished" title="2023-03-03 12:27">2023-03-03 12:27</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have a list of tuples in Python, and I have a conditional where I want to
take the branch ONLY if the tuple is not in the list (if it is in the list,
then I don't want to take the if branch)</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">curr_x</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="ss">(</span><span class="nv">curr_x</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span>,<span class="w"> </span><span class="nv">curr_y</span><span class="ss">)</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">myList</span>:

<span class="w">    </span>#<span class="w"> </span><span class="k">Do</span><span class="w"> </span><span class="nv">Something</span>
</pre></div>

<p>This is not really working for me though. What have I done wrong?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The bug is probably somewhere else in your code, because it should work fine:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; 3 not in [2, 3, 4]
False
&gt;&gt;&gt; 3 not in [4, 5, 6]
True
</pre></div>

<p>Or with tuples:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; (2, 3) not in [(2, 3), (5, 6), (9, 1)]
False
&gt;&gt;&gt; (2, 3) not in [(2, 7), (7, 3), "hi"]
True
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<blockquote>
<h4>How do I check if something is (not) in a list in Python?</h4>
</blockquote>
<p>The cheapest and most readable solution is using the <code>in</code> operator (or in your
specific case, <code>not in</code>). As mentioned in the documentation,</p>
<blockquote>
<p>The operators <code>in</code> and <code>not in</code> test for membership. <code>x in s</code> evaluates to
<code>True</code> if <code>x</code> is a member of <code>s</code>, and <code>False</code> otherwise. <code>x not in s</code>
returns the negation of <code>x in s</code>.</p>
</blockquote>
<p>Additionally,</p>
<blockquote>
<p>The operator <code>not in</code> is defined to have the inverse true value of <code>in</code>.</p>
</blockquote>
<p><code>y not in x</code> is logically the same as <code>not y in x</code>.</p>
<p>Here are a few examples:</p>
<div class="code"><pre class="code literal-block">'a' in [1, 2, 3]
# False

'c' in ['a', 'b', 'c']
# True

'a' not in [1, 2, 3]
# True

'c' not in ['a', 'b', 'c']
# False
</pre></div>

<p>This also works with tuples, since tuples are hashable (as a consequence of
the fact that they are also immutable):</p>
<div class="code"><pre class="code literal-block">(1, 2) in [(3, 4), (1, 2)]
#  True
</pre></div>

<p>If the object on the RHS defines a <code>__contains__()</code> method, <code>in</code> will
internally call it, as noted in the last paragraph of the Comparisons section
of the docs.</p>
<blockquote>
<p>... <code>in</code> and <code>not in</code>, are supported by types that are iterable or implement
the <code>__contains__()</code> method. For example, you could (but shouldn't) do this:</p>
</blockquote>
<div class="code"><pre class="code literal-block">[3, 2, 1].__contains__(1)
# True
</pre></div>

<p><code>in</code> short-circuits, so if your element is at the start of the list, <code>in</code>
evaluates faster:</p>
<div class="code"><pre class="code literal-block"><span class="n">lst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="mi">10001</span><span class="p">))</span>
<span class="nf">%timeit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">lst</span>
<span class="nf">%timeit</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">lst</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Expected</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">time</span><span class="p">.</span>

<span class="mf">68.9</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">0.613</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="w"> </span><span class="n">dev</span><span class="p">.</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">runs</span><span class="p">,</span><span class="w"> </span><span class="mi">10000000</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="n">each</span><span class="p">)</span>
<span class="mi">178</span><span class="w"> </span><span class="n">µs</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">5.01</span><span class="w"> </span><span class="n">µs</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="w"> </span><span class="n">dev</span><span class="p">.</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">runs</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="n">each</span><span class="p">)</span>
</pre></div>

<p>If you want to do more than just check whether an item is in a list, there are
options:</p>
<ul>
<li>
<code>list.index</code> can be used to retrieve the index of an item. If that element does not exist, a <code>ValueError</code> is raised.</li>
<li>
<code>list.count</code> can be used if you want to count the occurrences.</li>
</ul>
<hr>
<h4>The XY Problem: Have you considered <code>set</code>s?</h4>
<p>Ask yourself these questions:</p>
<ul>
<li>do you need to check whether an item is in a list more than once?</li>
<li>Is this check done inside a loop, or a function called repeatedly?</li>
<li>Are the items you're storing on your list hashable? IOW, can you call <code>hash</code> on them?</li>
</ul>
<p>If you answered "yes" to these questions, you should be using a <code>set</code> instead.
An <code>in</code> membership test on <code>list</code>s is O(n) time complexity. This means that
python has to do a linear scan of your list, visiting each element and
comparing it against the search item. If you're doing this repeatedly, or if
the lists are large, this operation will incur an overhead.</p>
<p><code>set</code> objects, on the other hand, hash their values for constant time
membership check. The check is also done using <code>in</code>:</p>
<div class="code"><pre class="code literal-block"><span class="mf">1</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="err">{</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="err">}</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span><span class="n">True</span>

<span class="err">'</span><span class="n">a</span><span class="err">'</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="err">{'</span><span class="n">a</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="n">b</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="n">c</span><span class="err">'}</span>
<span class="err">#</span><span class="w"> </span><span class="n">False</span>

<span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="err">{</span><span class="p">(</span><span class="err">'</span><span class="n">a</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="n">c</span><span class="err">'</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="err">}</span>
<span class="err">#</span><span class="w"> </span><span class="n">True</span>
</pre></div>

<p>If you're unfortunate enough that the element you're searching/not searching
for is at the end of your list, python will have scanned the list upto the
end. This is evident from the timings below:</p>
<div class="code"><pre class="code literal-block"><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="mi">100001</span><span class="p">))</span>
<span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">set</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>

<span class="nf">%timeit</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">l</span>
<span class="nf">%timeit</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">s</span>

<span class="mf">2.58</span><span class="w"> </span><span class="n">ms</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">58.9</span><span class="w"> </span><span class="n">µs</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="w"> </span><span class="n">dev</span><span class="p">.</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">runs</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="n">each</span><span class="p">)</span>
<span class="mi">101</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">9.53</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="w"> </span><span class="n">dev</span><span class="p">.</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">runs</span><span class="p">,</span><span class="w"> </span><span class="mi">10000000</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="n">each</span><span class="p">)</span>
</pre></div>

<p>As a reminder, this is a suitable option as long as the elements you're
storing and looking up are hashable. IOW, they would either have to be
immutable types, or objects that implement <code>__hash__</code>.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/conditional-statements/" rel="tag">conditional-statements</a></li>
            <li><a class="tag p-category" href="../../categories/list/" rel="tag">list</a></li>
            <li><a class="tag p-category" href="../../categories/membership/" rel="tag">membership</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../why-does-css-work-with-fake-elements/" rel="prev" title="Why does CSS work with fake elements?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-pass-optional-parameters-while-omitting-some-other-optional-parameters/" rel="next" title="How to pass optional parameters while omitting some other optional parameters?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
