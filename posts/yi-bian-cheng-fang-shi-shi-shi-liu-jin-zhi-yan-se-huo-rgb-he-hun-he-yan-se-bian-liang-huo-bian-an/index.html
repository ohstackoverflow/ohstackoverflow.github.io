<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>以编程方式使十六进制颜色（或 rgb 和混合颜色）变亮或变暗 | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/yi-bian-cheng-fang-shi-shi-shi-liu-jin-zhi-yan-se-huo-rgb-he-hun-he-yan-se-bian-liang-huo-bian-an/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../ru-he-shi-yong-docker-gong-kai-1-ge-yi-shang-de-duan-kou/" title="如何使用 Docker 公开 1 个以上的端口？" type="text/html">
<link rel="next" href="../que-ding-dang-qian-powershell-jiao-ben-wei-zhi-de-zui-jia-fang-fa-shi-shi-yao/" title="确定当前 PowerShell 脚本位置的最佳方法是什么？" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="以编程方式使十六进制颜色（或 rgb 和混合颜色）变亮或变暗">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/yi-bian-cheng-fang-shi-shi-shi-liu-jin-zhi-yan-se-huo-rgb-he-hun-he-yan-se-bian-liang-huo-bian-an/">
<meta property="og:description" content='这是我正在研究的一个函数，它以编程方式使十六进制颜色变亮或变暗特定量。只需传入一个字符串，例如"3F6D2A"表示颜色 ( col) 和一个
base10 整数 ( amt) 表示要变亮或变暗的量。要变暗，传入一个负数（即-20）。
我这样做的原因是因为我找到的所有解决方案，到目前为止，它们似乎使问题过于复杂。我有一种感觉，只需几行代码就可以完成。如果您发现任何问题或进行任何调整以加快速度，请告诉'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T18:51:52+08:00">
<meta property="article:tag" content="colors">
<meta property="article:tag" content="hex">
<meta property="article:tag" content="javascript">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">以编程方式使十六进制颜色（或 rgb 和混合颜色）变亮或变暗</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:51:52+08:00" itemprop="datePublished" title="2023-02-17 18:51">2023-02-17 18:51</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>这是我正在研究的一个函数，它以编程方式使十六进制颜色变亮或变暗特定量。只需传入一个字符串，例如<code>"3F6D2A"</code>表示颜色 ( <code>col</code>) 和一个
base10 整数 ( <code>amt</code>) 表示要变亮或变暗的量。要变暗，传入一个负数（即<code>-20</code>）。</p>
<p>我这样做的原因是因为我找到的所有解决方案，到目前为止，它们似乎使问题过于复杂。我有一种感觉，只需几行代码就可以完成。如果您发现任何问题或进行任何调整以加快速度，请告诉我。</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">LightenDarkenColor</span><span class="ss">(</span><span class="nv">col</span>,<span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">parseInt</span><span class="ss">(</span><span class="nv">col</span>,<span class="w"> </span><span class="mi">16</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ss">(((</span><span class="nv">col</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">0</span><span class="nv">x0000FF</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">((((</span><span class="nv">col</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="ss">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">0</span><span class="nv">x00FF</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="ss">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">(((</span><span class="nv">col</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="ss">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">amt</span><span class="ss">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">16</span><span class="ss">))</span>.<span class="nv">toString</span><span class="ss">(</span><span class="mi">16</span><span class="ss">)</span><span class="c1">;</span>
}


<span class="o">//</span><span class="w"> </span><span class="nv">TEST</span>
<span class="nv">console</span>.<span class="nv">log</span><span class="ss">(</span><span class="w"> </span><span class="nv">LightenDarkenColor</span><span class="ss">(</span><span class="s2">"3F6D2A"</span>,<span class="mi">40</span><span class="ss">)</span><span class="w"> </span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>对于开发，这里使用的是一个更易于阅读的版本：</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="w"> </span><span class="n">amt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">);</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x00FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x0000FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">newColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">16</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">newColor</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
<span class="p">}</span>


<span class="o">//</span><span class="w"> </span><span class="n">TEST</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="s2">"3F6D2A"</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">40</span><span class="p">));</span>
</pre></div>

<p>最后是一个处理可能（或可能不）以“#”开头的颜色的版本。加上调整不正确的颜色值：</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="n">amt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">usePound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">col</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"#"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">usePound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="mi">16</span><span class="p">);</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">num</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x00FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0x0000FF</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amt</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w">  </span><span class="p">(</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">usePound</span><span class="err">?</span><span class="s2">"#"</span><span class="p">:</span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>好的，现在它不仅仅是几行，但它看起来更简单，如果您不使用“#”并且不需要检查超出范围的颜色，它只是几行。</p>
<p>如果不使用“#”，您可以将其添加到代码中，例如：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3F6D2A"</span><span class="p">;</span>
<span class="n">myColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LightenDarkenColor</span><span class="p">(</span><span class="n">myColor</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
<span class="n">thePlaceTheColorIsUsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="s2">"#"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">myColor</span><span class="p">);</span>
</pre></div>

<p>我想我的主要问题是，我在这里正确吗？这不包括大多数（正常）情况吗？如果是这样，最快和最小的方法是什么？我想在动画和小环境中使用，所以这里速度是第一个最重要的因素，大小第二，准确性第三，可读性？嗯？不在要求列表中（抱歉，我知道你们中的一半人现在都在流泪！）。</p>
<p><br><br></p>
<h2>解答</h2>
<p><em>好吧，这个答案已经成为它自己的野兽。
许多新版本，它变得越来越愚蠢。非常感谢所有为这个答案做出贡献的人。但是，为了让大众保持简单。我将这个答案演变的所有版本/历史存档到我的github。并在此处使用最新版本在
StackOverflow 上重新启动它。特别感谢Mike 'Pomax' Kamermans提供的这个版本。他给了我新的数学。</em></p>
<hr>
<p>此函数 ( <code>pSBC</code>) 将采用 HEX 或 RGB
网页颜色。<code>pSBC</code>可以使它变暗或变亮，或者将它与第二种颜色混合，也可以直接传递它，但从十六进制转换为 RGB (Hex2RGB) 或从 RGB
转换为十六进制 (RGB2Hex)。您甚至都不知道您使用的是什么颜色格式。</p>
<p>这运行得非常快，可能是最快的，特别是考虑到它的许多功能。酝酿了很长时间。在我的github上查看整个故事。如果您想要绝对最小和最快的着色或混合方式，请参阅下面的微功能并使用
2 线速度恶魔之一。它们非常适合制作激烈的动画，但这里的这个版本对于大多数动画来说已经足够快了。</p>
<p>此函数使用对数混合或线性混合。但是，它不会转换为 HSL 以适当地使颜色变亮或变暗。因此， <strong>此函数的结果将不同于</strong> 那些使用 HSL
的更大和更慢的函数。</p>
<blockquote>
<p>jsFiddle 与 pSBC</p>
<p>github &gt; pSBC维基</p>
</blockquote>
<p>特征：</p>
<ul>
<li>自动检测并接受字符串形式的标准十六进制颜色。例如：<code>"#AA6622"</code>或<code>"#bb551144"</code>。</li>
<li>自动检测并接受字符串形式的标准 RGB 颜色。例如：<code>"rgb(123,45,76)"</code>或<code>"rgba(45,15,74,0.45)"</code>。</li>
<li>按百分比将颜色调整为白色或黑色。</li>
<li>按百分比将颜色混合在一起。</li>
<li>同时或单独进行 Hex2RGB 和 RGB2Hex 转换。</li>
<li>接受 3 位（或 4 位带 alpha 的）HEX 颜色代码，格式为#RGB（或#RGBA）。它将扩展它们。例如：<code>"#C41"</code>变成<code>"#CC4411"</code>.</li>
<li>接受并（线性）混合 alpha 通道。如果<code>c0</code>（从）颜色或<code>c1</code>（到）颜色有一个 alpha 通道，则返回的颜色将有一个 alpha 通道。如果两种颜色都有 alpha 通道，则返回的颜色将是使用给定百分比的两个 alpha 通道的线性混合（就像它是普通颜色通道一样）。如果两种颜色中只有一种具有 alpha 通道，则此 alpha 将直接传递给返回的颜色。这允许人们在保持透明度级别的同时混合/着色透明颜色。或者，如果透明度级别也应该混合，请确保两种颜色都有 alpha。着色时，它将直接通过 alpha 通道。如果您想要同时对 alpha 通道进行着色的基本着色，则使用<code>rgb(0,0,0,1)</code>或<code>rgb(255,255,255,1)</code>作为您的<code>c1</code>（到）颜色（或它们的十六进制等价物）。对于 RGB 颜色，返回颜色的 alpha 通道将四舍五入到小数点后 3 位。</li>
<li>使用混合时，RGB2Hex 和 Hex2RGB 转换是隐式的。不分<code>c0</code>（从）色；返回的颜色将始终采用<code>c1</code>（到）颜色的颜色格式（如果存在）。如果没有<code>c1</code>（to）颜色，则<code>'c'</code>作为<code>c1</code>颜色传入，它会着色并转换任何<code>c0</code>颜色。如果只需要转换，则也<code>0</code>以百分比 ( <code>p</code>) 的形式传入。如果<code>c1</code>省略颜色或<code>string</code>传入非-，则不会转换。</li>
<li>辅助函数也被添加到全局中。<code>pSBCr</code>可以传递十六进制或 RGB 颜色，它返回包含此颜色信息的对象。它的形式是：{r: XXX, g: XXX, b: XXX, a: X.XXX}。其中<code>.r</code>、<code>.g</code>和<code>.b</code>的范围为 0 到 255。当没有 alpha 时：<code>.a</code>为 -1。否则：<code>.a</code>范围为 0.000 到 1.000。</li>
<li>对于 RGB 输出，它会在将具有 alpha 通道的颜色传递到(from) 和/或(to)时<code>rgba()</code>输出。<code>rgb()``c0``c1</code>
</li>
<li>添加了小错误检​​查。这并不完美。它仍然会崩溃或产生乱码。但它会抓住一些东西。基本上，如果结构在某些方面有误，或者百分比不是数字或超出范围，它将返回<code>null</code>. 一个例子：<code>pSBC(0.5,"salt") == null</code>，它认为<code>#salt</code>是有效的颜色。删除以 结尾的四行<code>return null;</code>以删除此功能并使其更快更小。</li>
<li>使用对数混合。传入<code>true</code>for <code>l</code>（第4个参数）使用Linear Blending。</li>
</ul>
<h4>代码：</h4>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="nv">Version</span> <span class="mf">4.0</span>
<span class="s s-Atom">const</span> <span class="s s-Atom">pSBC=</span><span class="p">(</span><span class="s s-Atom">p</span><span class="p">,</span><span class="s s-Atom">c0</span><span class="p">,</span><span class="s s-Atom">c1</span><span class="p">,</span><span class="s s-Atom">l</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="s s-Atom">let</span> <span class="s s-Atom">r</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">,</span><span class="nv">P</span><span class="p">,</span><span class="s s-Atom">f</span><span class="p">,</span><span class="s s-Atom">t</span><span class="p">,</span><span class="s s-Atom">h</span><span class="p">,</span><span class="s s-Atom">i</span><span class="o">=</span><span class="s s-Atom">parseInt</span><span class="p">,</span><span class="s s-Atom">m</span><span class="o">=</span><span class="nv">Math</span><span class="p">.</span><span class="s s-Atom">round</span><span class="p">,</span><span class="s s-Atom">a</span><span class="o">=</span><span class="nf">typeof</span><span class="p">(</span><span class="s s-Atom">c1</span><span class="p">)</span><span class="s s-Atom">==</span><span class="s2">"string"</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(</span><span class="nf">typeof</span><span class="p">(</span><span class="s s-Atom">p</span><span class="p">)!</span><span class="s s-Atom">=</span><span class="s2">"number"</span><span class="p">||</span><span class="s s-Atom">p&lt;-</span><span class="mi">1</span><span class="p">||</span><span class="s s-Atom">p</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">||</span><span class="nf">typeof</span><span class="p">(</span><span class="s s-Atom">c0</span><span class="p">)!</span><span class="s s-Atom">=</span><span class="s2">"string"</span><span class="p">||(</span><span class="s s-Atom">c0</span><span class="p">[</span><span class="mi">0</span><span class="p">]!</span><span class="s s-Atom">='r'&amp;&amp;c0</span><span class="p">[</span><span class="mi">0</span><span class="p">]!</span><span class="s s-Atom">='#'</span><span class="p">)||(</span><span class="s s-Atom">c1&amp;&amp;</span><span class="p">!</span><span class="s s-Atom">a</span><span class="p">))</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(!</span><span class="s s-Atom">this</span><span class="p">.</span><span class="s s-Atom">pSBCr</span><span class="p">)</span><span class="s s-Atom">this</span><span class="p">.</span><span class="s s-Atom">pSBCr=</span><span class="p">(</span><span class="s s-Atom">d</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="s s-Atom">let</span> <span class="s s-Atom">n</span><span class="o">=</span><span class="s s-Atom">d</span><span class="p">.</span><span class="s s-Atom">length</span><span class="p">,</span><span class="s s-Atom">x=</span><span class="p">{};</span>
        <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&gt;</span><span class="mi">9</span><span class="p">){</span>
            <span class="p">[</span><span class="s s-Atom">r</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">,</span><span class="s s-Atom">a</span><span class="p">]</span><span class="o">=</span><span class="s s-Atom">d</span><span class="o">=</span><span class="s s-Atom">d</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="s s-Atom">n</span><span class="o">=</span><span class="s s-Atom">d</span><span class="p">.</span><span class="s s-Atom">length</span><span class="p">;</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">&gt;</span><span class="mi">4</span><span class="p">)</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
            <span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">r</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="s s-Atom">==</span><span class="s2">"a"</span><span class="nb">?</span><span class="s s-Atom">r</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">:</span><span class="s s-Atom">r</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">g</span><span class="p">),</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">b</span><span class="p">),</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">a</span><span class="o">=</span><span class="s s-Atom">a</span><span class="nb">?</span><span class="nf">parseFloat</span><span class="p">(</span><span class="s s-Atom">a</span><span class="p">)</span><span class="o">:-</span><span class="mi">1</span>
        <span class="p">}</span><span class="s s-Atom">else</span><span class="p">{</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">8</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">6</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">)</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">)</span><span class="s s-Atom">d=</span><span class="s2">"#"</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="s s-Atom">+</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">&gt;</span><span class="mi">4</span><span class="nb">?</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="s s-Atom">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">:</span><span class="s2">""</span><span class="p">);</span>
            <span class="s s-Atom">d</span><span class="o">=</span><span class="nf">i</span><span class="p">(</span><span class="s s-Atom">d</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>
            <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">9</span><span class="p">||</span><span class="s s-Atom">n</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">24</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">16</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">8</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">a</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="s s-Atom">d&amp;</span><span class="mi">255</span><span class="p">)</span><span class="o">/</span><span class="mf">0.255</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">;</span>
            <span class="s s-Atom">else</span> <span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">16</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">=</span><span class="s s-Atom">d&gt;&gt;</span><span class="mi">8</span><span class="s s-Atom">&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">=</span><span class="s s-Atom">d&amp;</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">x</span><span class="p">.</span><span class="s s-Atom">a=-</span><span class="mi">1</span>
        <span class="p">}</span><span class="s s-Atom">return</span> <span class="s s-Atom">x</span><span class="p">};</span>
    <span class="s s-Atom">h</span><span class="o">=</span><span class="s s-Atom">c0</span><span class="p">.</span><span class="s s-Atom">length</span><span class="o">&gt;</span><span class="mi">9</span><span class="p">,</span><span class="s s-Atom">h</span><span class="o">=</span><span class="s s-Atom">a</span><span class="nb">?</span><span class="s s-Atom">c1</span><span class="p">.</span><span class="s s-Atom">length</span><span class="o">&gt;</span><span class="mi">9</span><span class="nb">?</span><span class="s s-Atom">true</span><span class="p">:</span><span class="s s-Atom">c1==</span><span class="s2">"c"</span><span class="nb">?</span><span class="p">!</span><span class="s s-Atom">h</span><span class="p">:</span><span class="s s-Atom">false</span><span class="p">:</span><span class="s s-Atom">h</span><span class="p">,</span><span class="s s-Atom">f</span><span class="o">=</span><span class="s s-Atom">this</span><span class="p">.</span><span class="nf">pSBCr</span><span class="p">(</span><span class="s s-Atom">c0</span><span class="p">),</span><span class="nv">P</span><span class="o">=</span><span class="s s-Atom">p</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">t</span><span class="o">=</span><span class="s s-Atom">c1&amp;&amp;c1</span><span class="p">!</span><span class="s s-Atom">=</span><span class="s2">"c"</span><span class="nb">?</span><span class="s s-Atom">this</span><span class="p">.</span><span class="nf">pSBCr</span><span class="p">(</span><span class="s s-Atom">c1</span><span class="p">)</span><span class="o">:</span><span class="nv">P</span><span class="nb">?</span><span class="p">{</span><span class="s s-Atom">r</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">a</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="s s-Atom">r</span><span class="p">:</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">g</span><span class="p">:</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">b</span><span class="p">:</span><span class="mi">255</span><span class="p">,</span><span class="s s-Atom">a</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">},</span><span class="s s-Atom">p</span><span class="o">=</span><span class="nv">P</span><span class="nb">?</span><span class="s s-Atom">p*-</span><span class="mi">1</span><span class="o">:</span><span class="s s-Atom">p</span><span class="p">,</span><span class="nv">P</span><span class="o">=</span><span class="mi">1</span><span class="o">-</span><span class="s s-Atom">p</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(!</span><span class="s s-Atom">f</span><span class="p">||!</span><span class="s s-Atom">t</span><span class="p">)</span><span class="s s-Atom">return</span> <span class="s s-Atom">null</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">l</span><span class="p">)</span><span class="s s-Atom">r</span><span class="o">=</span><span class="nf">m</span><span class="p">(</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">r</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">r</span><span class="p">),</span><span class="s s-Atom">g</span><span class="o">=</span><span class="nf">m</span><span class="p">(</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">g</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">g</span><span class="p">),</span><span class="s s-Atom">b</span><span class="o">=</span><span class="nf">m</span><span class="p">(</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">b</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">b</span><span class="p">);</span>
    <span class="s s-Atom">else</span> <span class="s s-Atom">r</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">r**</span><span class="mi">2</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">r**</span><span class="mi">2</span><span class="p">)</span><span class="s s-Atom">**</span><span class="mf">0.5</span><span class="p">),</span><span class="s s-Atom">g</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">g**</span><span class="mi">2</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">g**</span><span class="mi">2</span><span class="p">)</span><span class="s s-Atom">**</span><span class="mf">0.5</span><span class="p">),</span><span class="s s-Atom">b</span><span class="o">=</span><span class="nf">m</span><span class="p">((</span><span class="nv">P</span><span class="o">*</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">b**</span><span class="mi">2</span><span class="o">+</span><span class="s s-Atom">p</span><span class="o">*</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">b**</span><span class="mi">2</span><span class="p">)</span><span class="s s-Atom">**</span><span class="mf">0.5</span><span class="p">);</span>
    <span class="s s-Atom">a</span><span class="o">=</span><span class="s s-Atom">f</span><span class="p">.</span><span class="s s-Atom">a</span><span class="p">,</span><span class="s s-Atom">t</span><span class="o">=</span><span class="s s-Atom">t</span><span class="p">.</span><span class="s s-Atom">a</span><span class="p">,</span><span class="s s-Atom">f</span><span class="o">=</span><span class="s s-Atom">a</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">||</span><span class="s s-Atom">t</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">,</span><span class="s s-Atom">a</span><span class="o">=</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s s-Atom">a</span><span class="o">&lt;</span><span class="mi">0</span><span class="nb">?</span><span class="s s-Atom">t</span><span class="p">:</span><span class="s s-Atom">t</span><span class="o">&lt;</span><span class="mi">0</span><span class="nb">?</span><span class="s s-Atom">a</span><span class="p">:</span><span class="s s-Atom">a</span><span class="o">*</span><span class="nv">P</span><span class="o">+</span><span class="s s-Atom">t</span><span class="o">*</span><span class="s s-Atom">p</span><span class="p">:</span><span class="mi">0</span><span class="p">;</span>
    <span class="nf">if</span><span class="p">(</span><span class="s s-Atom">h</span><span class="p">)</span><span class="s s-Atom">return</span><span class="s2">"rgb"</span><span class="s s-Atom">+</span><span class="p">(</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s2">"a("</span><span class="o">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="s s-Atom">r+</span><span class="s2">","</span><span class="o">+</span><span class="s s-Atom">g+</span><span class="s2">","</span><span class="o">+</span><span class="s s-Atom">b+</span><span class="p">(</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s2">","</span><span class="o">+</span><span class="nf">m</span><span class="p">(</span><span class="s s-Atom">a</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="o">:</span><span class="s2">""</span><span class="p">)</span><span class="s s-Atom">+</span><span class="s2">")"</span><span class="p">;</span>
    <span class="s s-Atom">else</span> <span class="s s-Atom">return</span><span class="s2">"#"</span><span class="s s-Atom">+</span><span class="p">(</span><span class="mi">4294967296</span><span class="o">+</span><span class="s s-Atom">r</span><span class="o">*</span><span class="mi">16777216</span><span class="o">+</span><span class="s s-Atom">g</span><span class="o">*</span><span class="mi">65536</span><span class="o">+</span><span class="s s-Atom">b</span><span class="o">*</span><span class="mi">256</span><span class="s s-Atom">+</span><span class="p">(</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="nf">m</span><span class="p">(</span><span class="s s-Atom">a</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">:</span><span class="mi">0</span><span class="p">)).</span><span class="nf">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nf">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s s-Atom">f</span><span class="nb">?</span><span class="s s-Atom">undefined</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<h4>用法：</h4>
<div class="code"><pre class="code literal-block"><span class="c1">// Setup:</span>

<span class="n">let</span><span class="w"> </span><span class="n">color1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgb(20,60,200)"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgba(20,60,200,0.67423)"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#67DAF0"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#5567DAF0"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#F3A"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#F3A9"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgb(200,60,20)"</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="n">color8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"rgba(200,60,20,0.98631)"</span><span class="p">;</span>

<span class="c1">// Tests:</span>

<span class="cm">/*** Log Blending ***/</span>
<span class="c1">// Shade (Lighten or Darken)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + [42% Lighter] =&gt; rgb(166,171,225)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.4</span><span class="p">,</span><span class="w"> </span><span class="n">color5</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A + [40% Darker] =&gt; #c62884</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(200,60,20,0.98631) + [42% Lighter] =&gt; rgba(225,171,166,0.98631)</span>

<span class="c1">// Shade with Conversion (use "c" as your "to" color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + [42% Lighter] + [Convert] =&gt; #a6abe1ac</span>

<span class="c1">// RGB2Hex &amp; Hex2RGB Conversion Only (set percentage to zero)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">color6</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A9 + [Convert] =&gt; rgba(255,51,170,0.6)</span>

<span class="c1">// Blending</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgba(200,60,20,0.98631) + [50% Blend] =&gt; rgba(142,60,142,0.83)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgb(200,60,20) + [70% Blend] =&gt; rgba(168,60,111,0.67423)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #67DAF0 + rgb(200,60,20) + [25% Blend] =&gt; rgb(134,191,208)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(200,60,20) + #67DAF0 + [75% Blend] =&gt; #86bfd0</span>

<span class="cm">/*** Linear Blending ***/</span>
<span class="c1">// Shade (Lighten or Darken)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + [42% Lighter] =&gt; rgb(119,142,223)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.4</span><span class="p">,</span><span class="w"> </span><span class="n">color5</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A + [40% Darker] =&gt; #991f66</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(200,60,20,0.98631) + [42% Lighter] =&gt; rgba(223,142,119,0.98631)</span>

<span class="c1">// Shade with Conversion (use "c" as your "to" color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + [42% Lighter] + [Convert] =&gt; #778edfac</span>

<span class="c1">// RGB2Hex &amp; Hex2RGB Conversion Only (set percentage to zero)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">color6</span><span class="p">,</span><span class="w"> </span><span class="s">"c"</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #F3A9 + [Convert] =&gt; rgba(255,51,170,0.6)</span>

<span class="c1">// Blending</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color8</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgba(200,60,20,0.98631) + [50% Blend] =&gt; rgba(110,60,110,0.83)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">color2</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgba(20,60,200,0.67423) + rgb(200,60,20) + [70% Blend] =&gt; rgba(146,60,74,0.67423)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #67DAF0 + rgb(200,60,20) + [25% Blend] =&gt; rgb(127,179,185)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span><span class="w"> </span><span class="n">color7</span><span class="p">,</span><span class="w"> </span><span class="n">color3</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(200,60,20) + #67DAF0 + [75% Blend] =&gt; #7fb3b9</span>

<span class="cm">/*** Other Stuff ***/</span>
<span class="c1">// Error Checking</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="s">"#FFBAA"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #FFBAA + [42% Lighter] =&gt; null  (Invalid Input Color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="p">,</span><span class="w"> </span><span class="n">color5</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + #F3A + [4200% Blend] =&gt; null  (Invalid Percentage Range)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// [object Object] + [42% Lighter] =&gt; null  (Strings Only for Color)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s">"42"</span><span class="p">,</span><span class="w"> </span><span class="n">color1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// rgb(20,60,200) + ["42"] =&gt; null  (Numbers Only for Percentage)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="s">"salt"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// salt + [42% Lighter] =&gt; null  (A Little Salt is No Good...)</span>

<span class="c1">// Error Check Fails (Some Errors are not Caught)</span>
<span class="n">pSBC</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">0.42</span><span class="p">,</span><span class="w"> </span><span class="s">"#salt"</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #salt + [42% Lighter] =&gt; #a5a5a500  (...and a Pound of Salt is Jibberish)</span>

<span class="c1">// Ripping</span>
<span class="n">pSBCr</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">color4</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// #5567DAF0 + [Rip] =&gt; [object Object] =&gt; {'r':85,'g':103,'b':218,'a':0.941}</span>
</pre></div>

<hr>
<p>下图将有助于显示两种混合方法的区别：</p>
<p><img alt="" src="https://i.imgur.com/FBe90R8.png"></p>
<hr>
<h3>微功能</h3>
<p>如果你真的想要速度和大小，你将不得不使用 RGB 而不是 HEX。RGB 更直接和简单，HEX
写入速度太慢，而且对于简单的两行代码来说有太多的风格（即它可能是 3、4、6 或 8 位十六进制代码）。您还需要牺牲一些功能，没有错误检查，没有
HEX2RGB 或 RGB2HEX。同样，您需要为颜色混合数学选择一个特定的函数（基于下面的函数名称），以及您是否想要着色或混合。这些函数确实支持
alpha 通道。当两种输入颜色都有 alpha 时，它将线性混合它们。如果两种颜色中只有一种具有
alpha，它将直接传递给结果颜色。下面是两个非常快和小的线性函数：</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">RGB_Linear_Blend</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c0</span><span class="p">,</span><span class="n">c1</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c0</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),[</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">h</span><span class="p">]</span><span class="o">=</span><span class="n">c1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">x</span><span class="o">=</span><span class="n">d</span><span class="o">||</span><span class="n">h</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="n">x</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="p">(</span><span class="o">!</span><span class="n">d</span><span class="err">?</span><span class="n">h</span><span class="p">:</span><span class="o">!</span><span class="n">h</span><span class="err">?</span><span class="n">d</span><span class="p">:</span><span class="n">r</span><span class="p">((</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="o">+</span><span class="s2">")"</span><span class="p">):</span><span class="s2">")"</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">x</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">i</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">i</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">i</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">+</span><span class="n">j</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">RGB_Linear_Shade</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">P</span><span class="o">=</span><span class="n">p</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">0</span><span class="p">:</span><span class="mi">255</span><span class="o">*</span><span class="n">p</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">1</span><span class="o">+</span><span class="n">p</span><span class="p">:</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">(</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="n">d</span><span class="p">:</span><span class="s2">")"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">RGB_Log_Blend</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c0</span><span class="p">,</span><span class="n">c1</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c0</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),[</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">h</span><span class="p">]</span><span class="o">=</span><span class="n">c1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">x</span><span class="o">=</span><span class="n">d</span><span class="o">||</span><span class="n">h</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="n">x</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="p">(</span><span class="o">!</span><span class="n">d</span><span class="err">?</span><span class="n">h</span><span class="p">:</span><span class="o">!</span><span class="n">h</span><span class="err">?</span><span class="n">d</span><span class="p">:</span><span class="n">r</span><span class="p">((</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">*</span><span class="n">P</span><span class="o">+</span><span class="n">parseFloat</span><span class="p">(</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="n">p</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="o">+</span><span class="s2">")"</span><span class="p">):</span><span class="s2">")"</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">x</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">p</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">e</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">p</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">p</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="n">j</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">RGB_Log_Shade</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">c</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">parseInt</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">,[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">]</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">),</span><span class="n">P</span><span class="o">=</span><span class="n">p</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">0</span><span class="p">:</span><span class="n">p</span><span class="o">*</span><span class="mi">255</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="n">P</span><span class="err">?</span><span class="mi">1</span><span class="o">+</span><span class="n">p</span><span class="p">:</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="s2">"rgb"</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">"a("</span><span class="p">:</span><span class="s2">"("</span><span class="p">)</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">==</span><span class="s2">"a"</span><span class="err">?</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span><span class="n">a</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="s2">","</span><span class="o">+</span><span class="n">r</span><span class="p">((</span><span class="n">P</span><span class="o">*</span><span class="n">i</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">d</span><span class="err">?</span><span class="s2">","</span><span class="o">+</span><span class="n">d</span><span class="p">:</span><span class="s2">")"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<hr>
<p>想要更多信息？阅读github上的完整文章。</p>
<p>PT</p>
<p>（Ps 如果有人知道另一种混合方法的数学，请分享。）</p>
<p><br></p>
<h3>更多建议</h3>
<p>我做了一个非常适合我的解决方案：</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">shadeColor</span><span class="p">(</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">color</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span><span class="mi">16</span><span class="p">);</span>

<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">R</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">G</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parseInt</span><span class="p">(</span><span class="n">B</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>

<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">R</span><span class="o">&lt;</span><span class="mi">255</span><span class="p">)</span><span class="err">?</span><span class="n">R</span><span class="p">:</span><span class="mi">255</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">G</span><span class="o">&lt;</span><span class="mi">255</span><span class="p">)</span><span class="err">?</span><span class="n">G</span><span class="p">:</span><span class="mi">255</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="o">&lt;</span><span class="mi">255</span><span class="p">)</span><span class="err">?</span><span class="n">B</span><span class="p">:</span><span class="mi">255</span><span class="p">;</span>

<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">RR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">R</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="err">?</span><span class="s2">"0"</span><span class="o">+</span><span class="n">R</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span><span class="n">R</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">GG</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">G</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="err">?</span><span class="s2">"0"</span><span class="o">+</span><span class="n">G</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span><span class="n">G</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">BB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">B</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="err">?</span><span class="s2">"0"</span><span class="o">+</span><span class="n">B</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">):</span><span class="n">B</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s2">"#"</span><span class="o">+</span><span class="n">RR</span><span class="o">+</span><span class="n">GG</span><span class="o">+</span><span class="n">BB</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>示例减轻：</p>
<div class="code"><pre class="code literal-block">shadeColor("#63C6FF",40);
</pre></div>

<p>示例变暗：</p>
<div class="code"><pre class="code literal-block">shadeColor("#63C6FF",-40);
</pre></div>

<p><br><br><a href="../programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/colors/" rel="tag">colors</a></li>
            <li><a class="tag p-category" href="../../categories/hex/" rel="tag">hex</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../ru-he-shi-yong-docker-gong-kai-1-ge-yi-shang-de-duan-kou/" rel="prev" title="如何使用 Docker 公开 1 个以上的端口？">Previous post</a>
            </li>
            <li class="next">
                <a href="../que-ding-dang-qian-powershell-jiao-ben-wei-zhi-de-zui-jia-fang-fa-shi-shi-yao/" rel="next" title="确定当前 PowerShell 脚本位置的最佳方法是什么？">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
