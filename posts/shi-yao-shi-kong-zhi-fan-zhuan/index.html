<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>什么是控制反转？ | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/shi-yao-shi-kong-zhi-fan-zhuan/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../ru-he-jian-cha-shi-fou-zai-bash-zhong-she-zhi-liao-bian-liang/" title="如何检查是否在 Bash 中设置了变量" type="text/html">
<link rel="next" href="../shuang-yin-hao-he-dan-yin-hao-zai-javascript-zhong-ke-yi-hu-huan-ma/" title="双引号和单引号在 JavaScript 中可以互换吗？" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="什么是控制反转？">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/shi-yao-shi-kong-zhi-fan-zhuan/">
<meta property="og:description" content="第一次遇到控制反转 (IoC) 时可能会非常困惑。

它是什么？
它解决了哪个问题？
什么时候适合使用什么时候不适合？


解答
Inversion-of-Control (IoC)模式是关于提供 任何类型
的callback，它“实现”和/或控制反应，而不是我们自己直接行动（换句话说，反转和/或将控制重定向到外部处理程序/控制器）。
Dependency-Injection (DI)模式是 Io">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-16T22:04:07+08:00">
<meta property="article:tag" content="design-patterns">
<meta property="article:tag" content="inversion-of-control">
<meta property="article:tag" content="language-agnostic">
<meta property="article:tag" content="oop">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">什么是控制反转？</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T22:04:07+08:00" itemprop="datePublished" title="2023-02-16 22:04">2023-02-16 22:04</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>第一次遇到控制反转 (IoC) 时可能会非常困惑。</p>
<ol>
<li>它是什么？</li>
<li>它解决了哪个问题？</li>
<li>什么时候适合使用什么时候不适合？</li>
</ol>
<p><br><br></p>
<h2>解答</h2>
<p><strong><code>Inversion-of-Control</code> (IoC)</strong>模式是关于提供 <em>任何类型</em>
的<code>callback</code>，它“实现”和/或控制反应，而不是我们自己直接行动（换句话说，反转和/或将控制重定向到外部处理程序/控制器）。
<strong><code>Dependency-Injection</code> (DI)</strong>模式是 IoC 模式的更具体版本，它是关于从代码中删除依赖项的。</p>
<blockquote>
<p>每个<code>DI</code>实现都可以考虑<code>IoC</code>，但不应该称之为它<code>IoC</code>，因为实现依赖注入比回调更难（不要使用通用术语“IoC”来降低产品的价值）。</p>
</blockquote>
<p>对于 DI 示例，假设您的应用程序有一个文本编辑器组件，并且您想提供拼写检查。您的标准代码如下所示：</p>
<div class="code"><pre class="code literal-block">public class TextEditor {

    private SpellChecker checker;

    public TextEditor() {
        this.checker = new SpellChecker();
    }
}
</pre></div>

<p>我们在这里所做的创建了<code>TextEditor</code>和之间的依赖关系<code>SpellChecker</code>。在 IoC 场景中，我们会改为执行以下操作：</p>
<div class="code"><pre class="code literal-block">public class TextEditor {

    private IocSpellChecker checker;

    public TextEditor(IocSpellChecker checker) {
        this.checker = checker;
    }
}
</pre></div>

<p>在第一个代码示例中，我们正在实例化<code>SpellChecker</code>( <code>this.checker = new
SpellChecker();</code>)，这意味着该类<code>TextEditor</code>直接依赖于该类<code>SpellChecker</code>。</p>
<p>在第二个代码示例中，我们通过在
的构造函数签名中包含<code>SpellChecker</code>依赖类（而不是在类中初始化依赖）来创建抽象。<code>TextEditor</code>这允许我们调用依赖项，然后将其传递给
TextEditor 类，如下所示：</p>
<div class="code"><pre class="code literal-block">SpellChecker sc = new SpellChecker(); // dependency
TextEditor textEditor = new TextEditor(sc);
</pre></div>

<p>现在创建该类的客户端<code>TextEditor</code>可以控制<code>SpellChecker</code>使用哪个实现，因为我们将依赖项注入到<code>TextEditor</code>签名中。</p>
<hr>
<p><strong>请注意</strong> ，就像 IoC 是许多其他模式的基础一样，上面的示例只是许多依赖注入类型中的一种，例如：</p>
<ul>
<li>构造函数注入。 </li>
</ul>
<blockquote>
<p>其中一个实例<code>IocSpellChecker</code>将被自动或类似于上面的手动传递给构造函数。</p>
</blockquote>
<ul>
<li>塞特注射。 </li>
</ul>
<blockquote>
<p>其中的实例<code>IocSpellChecker</code>将通过 setter 方法或属性传递<code>public</code>。</p>
</blockquote>
<ul>
<li>服务查找和/或服务定位器 </li>
</ul>
<blockquote>
<p>哪里<code>TextEditor</code>会向已知提供者询问类型的全局使用实例（服务）<code>IocSpellChecker</code>（并且可能不存储所述实例，而是一次又一次地询问提供者）。</p>
</blockquote>
<p><br></p>
<h3>更多建议</h3>
<p>控制反转是你在程序回调时得到的，例如像一个 gui 程序。</p>
<p>例如，在旧学校菜单中，您可能有：</p>
<div class="code"><pre class="code literal-block">print "enter your name"
read name
print "enter your address"
read address
etc...
store in database
</pre></div>

<p>从而控制用户交互的流程。</p>
<p>在 GUI 程序或类似程序中，我们说：</p>
<div class="code"><pre class="code literal-block">when the user types in field a, store it in NAME
when the user types in field b, store it in ADDRESS
when the user clicks the save button, call StoreInDatabase
</pre></div>

<p>所以现在控制被颠倒了……而不是计算机以固定顺序接受用户输入，用户控制输入数据的顺序，以及数据何时保存在数据库中。</p>
<p>基本上， <strong>任何</strong> 带有事件循环、回调或执行触发器的东西都属于这一类。</p>
<p><br><br><a href="../what-is-inversion-of-control/">查看原文</a></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/design-patterns/" rel="tag">design-patterns</a></li>
            <li><a class="tag p-category" href="../../categories/inversion-of-control/" rel="tag">inversion-of-control</a></li>
            <li><a class="tag p-category" href="../../categories/language-agnostic/" rel="tag">language-agnostic</a></li>
            <li><a class="tag p-category" href="../../categories/oop/" rel="tag">oop</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../ru-he-jian-cha-shi-fou-zai-bash-zhong-she-zhi-liao-bian-liang/" rel="prev" title="如何检查是否在 Bash 中设置了变量">Previous post</a>
            </li>
            <li class="next">
                <a href="../shuang-yin-hao-he-dan-yin-hao-zai-javascript-zhong-ke-yi-hu-huan-ma/" rel="next" title="双引号和单引号在 JavaScript 中可以互换吗？">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
