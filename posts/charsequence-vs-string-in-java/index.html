<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CharSequence VS String in Java? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/charsequence-vs-string-in-java/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../what-special-characters-must-be-escaped-in-regular-expressions/" title="What special characters must be escaped in regular expressions?" type="text/html">
<link rel="next" href="../disable-browser-save-password-functionality/" title="Disable browser 'Save Password' functionality" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="CharSequence VS String in Java?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/charsequence-vs-string-in-java/">
<meta property="og:description" content="Programming in Android, most of the text values are expected in
CharSequence.
Why is that? What is the benefit, and what are the main impacts of using
CharSequence over String?
What are the main diffe">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T10:45:05+08:00">
<meta property="article:tag" content="charsequence">
<meta property="article:tag" content="java">
<meta property="article:tag" content="string">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">CharSequence VS String in Java?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:45:05+08:00" itemprop="datePublished" title="2023-03-03 10:45">2023-03-03 10:45</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Programming in Android, most of the text values are expected in
<code>CharSequence</code>.</p>
<p>Why is that? What is the benefit, and what are the main impacts of using
<code>CharSequence</code> over <code>String</code>?</p>
<p>What are the main differences, and what issues are expected, while using them,
and converting from one to another?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Strings are CharSequences, so you can just use Strings and not worry. Android
is merely trying to be helpful by allowing you to also specify other
CharSequence objects, like StringBuffers.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>
<code>CharSequence</code> = interface</h2>
<p><code>String</code> = concrete implementation</p>
<ul>
<li>
<code>CharSequence</code> is an interface. </li>
<li>Several classes implement this interface. <ul>
<li>
<code>String</code> is one such class, a concrete implementation of <code>CharSequence</code>.</li>
</ul>
</li>
</ul>
<p>You said:</p>
<blockquote>
<p>converting from one to another</p>
</blockquote>
<p>There is no converting from <code>String</code>.</p>
<ul>
<li>Every <code>String</code> object <em>is</em> a <code>CharSequence</code>.</li>
<li>Every <code>CharSequence</code> can produce a <code>String</code>. Call <code>CharSequence::toString</code>. If the <code>CharSequence</code> happens to be a <code>String</code>, then the method returns a reference to its own object.</li>
</ul>
<p>In other words, every <code>String</code> is a <code>CharSequence</code>, but not every
<code>CharSequence</code> is a <code>String</code>.</p>
<h3>Programming to an interface</h3>
<blockquote>
<p>Programming in Android, most of the text values are expected in
CharSequence.</p>
<p>Why is that? What is the benefit, and what are the main impacts of using
CharSequence over String?</p>
</blockquote>
<p>Generally, programming to an interface is better than programming to concrete
classes. This yields flexibility, so we can switch between concrete
implementations of a particular interface without breaking other code.</p>
<p>When developing an API to be used by various programmers in various
situations, write your code to give and take the most general interfaces
possible. This gives the calling programmer the freedom to use various
implementations of that interface, whichever implementation is best for their
particular context.</p>
<p>For example, look at the Java Collections Framework. If your API gives or
takes an ordered collection of objects, declare your methods as using <code>List</code>
rather than <code>ArrayList</code>, <code>LinkedList</code>, or any other 3rd-party implementation
of <code>List</code>.</p>
<p>When writing a quick-and-dirty little method to be used only by your code in
one specific place, as opposed to writing an API to be used in multiple
places, you need not bother with using the more general interface rather than
a specific concrete class. But even then, it does to hurt to use the most
general interface you can.</p>
<blockquote>
<p>What are the main differences, and what issues are expected, while using
them,</p>
</blockquote>
<ul>
<li>With a <code>String</code> you know you have a single piece of text, entirely in memory, and is immutable. </li>
<li>With a <code>CharSequence</code>, you do not know what the particular features of the concrete implementation might be. </li>
</ul>
<p>The <code>CharSequence</code> object might represent an enormous chunk of text, and
therefore has memory implications. Or may be many chunks of text tracked
separately that will need to be stitched together when you call <code>toString</code>,
and therefore has performance issues. The implementation may even be
retrieving text from a remote service, and therefore has latency implications.</p>
<blockquote>
<p>and converting from one to another?</p>
</blockquote>
<p>You generally won't be converting back and forth. A <code>String</code> <em>is</em> a
<code>CharSequence</code>. If your method declares that it takes a <code>CharSequence</code>, the
calling programmer may pass a <code>String</code> object, or may pass something else such
as a <code>StringBuffer</code> or <code>StringBuilder</code>. Your method's code will simply use
whatever is passed, calling any of the <code>CharSequence</code> methods.</p>
<p>The closest you would get to converting is if your code receives a
<code>CharSequence</code> and you know you need a <code>String</code>. Perhaps your are interfacing
with old code written to <code>String</code> class rather than written to the
<code>CharSequence</code> interface. Or perhaps your code will work intensively with the
text, such as looping repeatedly or otherwise analyzing. In that case, you
want to take any possible performance hit only once, so you call <code>toString</code> up
front. Then proceed with your work using what you know to be a single piece of
text entirely in memory.</p>
<h2>Twisted history</h2>
<p>Note the comments made on the accepted Answer. The <code>CharSequence</code> interface
was retrofitted onto existing class structures, so there are some important
subtleties (<code>equals()</code> &amp; <code>hashCode()</code>). Notice the various versions of Java
(1, 2, 4 &amp; 5) tagged on the classes/interfaces—quite a bit of churn over the
years. Ideally <code>CharSequence</code> would have been in place from the beginning, but
such is life.</p>
<p>My class diagram below may help you see the big picture of string types in
Java 7/8. I'm not sure if all of these are present in Android, but the overall
context may still prove useful to you.</p>
<p><img alt="diagram of various string-related classes and interfaces" src="../../images/PIFk9.png"></p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/charsequence/" rel="tag">charsequence</a></li>
            <li><a class="tag p-category" href="../../categories/java/" rel="tag">java</a></li>
            <li><a class="tag p-category" href="../../categories/string/" rel="tag">string</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../what-special-characters-must-be-escaped-in-regular-expressions/" rel="prev" title="What special characters must be escaped in regular expressions?">Previous post</a>
            </li>
            <li class="next">
                <a href="../disable-browser-save-password-functionality/" rel="next" title="Disable browser 'Save Password' functionality">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
