<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How do I fix the Visual Studio compile error, "mismatch between processor architecture"? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-do-i-fix-the-visual-studio-compile-error-mismatch-between-processor-architecture/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../set-environment-variables-on-mac-os-x-lion/" title="Set environment variables on Mac OS X Lion" type="text/html">
<link rel="next" href="../how-to-return-a-string-value-from-a-bash-function/" title="How to return a string value from a Bash function" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content='How do I fix the Visual Studio compile error, "mismatch between proces'>
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-do-i-fix-the-visual-studio-compile-error-mismatch-between-processor-architecture/">
<meta property="og:description" content="I'm new to project configuration in Visual Studio 2010, but I've done some
research and still can't quite figure this issue out. I have a Visual Studio
solution with a C++ DLL referencing the C# DLL. ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T05:37:38+08:00">
<meta property="article:tag" content=".net">
<meta property="article:tag" content="visual-studio">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How do I fix the Visual Studio compile error, "mismatch between processor architecture"?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:37:38+08:00" itemprop="datePublished" title="2023-02-18 05:37">2023-02-18 05:37</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'm new to project configuration in Visual Studio 2010, but I've done some
research and still can't quite figure this issue out. I have a Visual Studio
solution with a C++ DLL referencing the C# DLL. The C# DLL references a few
other DLLs, some within my project and some external. When I try to compile
the C++ DLL, I get this warning:</p>
<blockquote>
<p>warning MSB3270: There was a mismatch between the processor architecture of
the project being build "MSIL" and the processor architecture of the
reference "[internal C# dll]", "x86".</p>
</blockquote>
<p>It tells me to go to Configuration Manager to align my architectures. The C#
DLL is set up with platform target x86. If I try to change this to something
else, like Any CPU, it complains because one of the external DLLs <em>it</em> depends
on has platform target x86.</p>
<p>When I look at Configuration Manager it shows the Platform for my C# DLL as
x86 and for my C++ project as Win32. This seems like the right setup; surely I
don't want the project for my C++ project to have platform set to x64, which
is the only other option presented.</p>
<p>What am I doing wrong here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This warning seems to have been introduced with the new Visual Studio 11 Beta
and .NET 4.5, although I suppose it might have been possible before.</p>
<p>First, it really is just a warning. It should not hurt anything if you are
just dealing with x86 dependencies. Microsoft is just trying to warn you when
you state that your project is compatible with "Any CPU" but you have a
dependency on a project or .dll assembly that is either x86 or x64. Because
you have an x86 dependency, technically your project is therefore not "Any
CPU" compatible. To make the warning go away, you should actually change your
project from "Any CPU" to "x86". This is very easy to do, here are the steps.</p>
<ol>
<li>Go to the Build|Configuration Manager menu item.</li>
<li>Find your project in the list, under Platform it will say "Any CPU"</li>
<li>Select the "Any CPU" option from the drop down and then select <code>&lt;New..&gt;</code>
</li>
<li>From that dialog, select x86 from the "New Platform" drop down and make sure "Any CPU" is selected in the "Copy settings from" drop down.</li>
<li>Hit OK</li>
<li>You will want to select x86 for both the Debug and Release configurations.</li>
</ol>
<p>This will make the warning go away and also state that your assembly or
project is now no longer "Any CPU" compatible but now x86 specific. This is
also applicable if you are building a 64 bit project that has an x64
dependency; you would just select x64 instead.</p>
<p>One other note, projects can be "Any CPU" compatible usually if they are pure
.NET projects. This issue only comes up if you introduce a dependency (3rd
party dll or your own C++ managed project) that targets a specific processor
architecture.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is a very stubborn warning and while it is a valid warning there are some
cases where it cannot be resolved due to use of 3rd party components and other
reasons. I have a similar issue except that the warning is because my projects
platform is AnyCPU and I'm referencing an MS library built for AMD64. This is
in Visual Studio 2010 by the way, and appears to be introduced by installing
the VS2012 and .Net 4.5.</p>
<p>Since I can't change the MS library I'm referencing, and since I know that my
target deployment environment will only ever be 64-bit, I can safely ignore
this issue.</p>
<p>What about the warning? Microsoft posted in response to a Connect report that
one option is to disable that warning. You should only do this is you're very
aware of your solution architecture and you fully understand your deployment
target and know that it's not really an issue outside the development
environment.</p>
<p>You can edit your project file and add this property group and setting to
disable the warning:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;PropertyGroup&gt;</span>
<span class="w">  </span><span class="nt">&lt;ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch&gt;</span>None<span class="nt">&lt;/ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch&gt;</span>
<span class="nt">&lt;/PropertyGroup&gt;</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/net/" rel="tag">.net</a></li>
            <li><a class="tag p-category" href="../../categories/visual-studio/" rel="tag">visual-studio</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../set-environment-variables-on-mac-os-x-lion/" rel="prev" title="Set environment variables on Mac OS X Lion">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-return-a-string-value-from-a-bash-function/" rel="next" title="How to return a string value from a Bash function">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
