<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How can I initialise a static Map? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-can-i-initialise-a-static-map/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../extract-file-name-from-path-no-matter-what-the-os-path-format/" title="Extract file name from path, no matter what the os/path format" type="text/html">
<link rel="next" href="../could-not-find-a-part-of-the-path-bin-roslyn-csc-exe/" title="Could not find a part of the path ... bin\roslyn\csc.exe" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How can I initialise a static Map?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-can-i-initialise-a-static-map/">
<meta property="og:description" content="How would you initialise a static Map in Java?
Method one: static initialiser
Method two: instance initialiser (anonymous subclass) or some other method?
What are the pros and cons of each?
Here is an">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T04:20:01+08:00">
<meta property="article:tag" content="collections">
<meta property="article:tag" content="dictionary">
<meta property="article:tag" content="idioms">
<meta property="article:tag" content="initialization">
<meta property="article:tag" content="java">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How can I initialise a static Map?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:20:01+08:00" itemprop="datePublished" title="2023-02-17 04:20">2023-02-17 04:20</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>How would you initialise a static <code>Map</code> in Java?</p>
<p>Method one: static initialiser<br>
Method two: instance initialiser (anonymous subclass) or some other method?</p>
<p>What are the pros and cons of each?</p>
<p>Here is an example illustrating the two methods:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">Test</span> <span class="p">{</span>
    <span class="n">private</span> <span class="n">static</span> <span class="n">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">myMap</span> <span class="o">=</span> <span class="n">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
    <span class="n">static</span> <span class="p">{</span>
        <span class="n">myMap</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"one"</span><span class="p">);</span>
        <span class="n">myMap</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"two"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">private</span> <span class="n">static</span> <span class="n">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">myMap2</span> <span class="o">=</span> <span class="n">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">(){</span>
        <span class="p">{</span>
            <span class="n">put</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"one"</span><span class="p">);</span>
            <span class="n">put</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"two"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The instance initialiser is just syntactic sugar in this case, right? I don't
see why you need an extra anonymous class just to initialize. And it won't
work if the class being created is final.</p>
<p>You can create an immutable map using a static initialiser too:</p>
<div class="code"><pre class="code literal-block">public class Test {
    private static final Map&lt;Integer, String&gt; myMap;
    static {
        Map&lt;Integer, String&gt; aMap = ....;
        aMap.put(1, "one");
        aMap.put(2, "two");
        myMap = Collections.unmodifiableMap(aMap);
    }
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I like the Guava way of initialising a static, immutable map:</p>
<div class="code"><pre class="code literal-block">static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.of(
    1, "one",
    2, "two"
);
</pre></div>

<p>As you can see, it's very concise (because of the convenient factory methods
in <code>ImmutableMap</code>).</p>
<p>If you want the map to have more than 5 entries, you can no longer use
<code>ImmutableMap.of()</code>. Instead, try <code>ImmutableMap.builder()</code> along these lines:</p>
<div class="code"><pre class="code literal-block">static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.&lt;Integer, String&gt;builder()
    .put(1, "one")
    .put(2, "two")
    // ... 
    .put(15, "fifteen")
    .build();
</pre></div>

<p>To learn more about the benefits of Guava's immutable collection utilities,
see <em>Immutable Collections Explained</em> in Guava User Guide.</p>
<p>(A subset of) Guava used to be called <em>Google Collections</em>. If you aren't
using this library in your Java project yet, I <strong>strongly</strong> recommend trying
it out! Guava has quickly become one of the most popular and useful free 3rd
party libs for Java, as fellow SO users agree. (If you are new to it, there
are some excellent learning resources behind that link.)</p>
<hr>
<p><strong>Update (2015)</strong> : As for <strong>Java 8</strong> , well, I would still use the Guava
approach because it is way cleaner than anything else. If you don't want Guava
dependency, consider a plain old init method. The hack with two-dimensional
array and Stream API is pretty ugly if you ask me, and gets uglier if you need
to create a Map whose keys and values are not the same type (like
<code>Map&lt;Integer, String&gt;</code> in the question).</p>
<p>As for future of Guava in general, with regards to Java 8, Louis Wasserman
said this back in 2014, and [ <em>update</em> ] in 2016 it was announced that <strong>Guava
21 will require and properly support Java 8</strong>.</p>
<hr>
<p><strong>Update (2016)</strong> : As Tagir Valeev points out, <strong>Java 9</strong> will finally make
this clean to do using nothing but pure JDK, by adding convenience factory
methods for collections:</p>
<div class="code"><pre class="code literal-block">static final Map&lt;Integer, String&gt; MY_MAP = Map.of(
    1, "one", 
    2, "two"
);
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/collections/" rel="tag">collections</a></li>
            <li><a class="tag p-category" href="../../categories/dictionary/" rel="tag">dictionary</a></li>
            <li><a class="tag p-category" href="../../categories/idioms/" rel="tag">idioms</a></li>
            <li><a class="tag p-category" href="../../categories/initialization/" rel="tag">initialization</a></li>
            <li><a class="tag p-category" href="../../categories/java/" rel="tag">java</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../extract-file-name-from-path-no-matter-what-the-os-path-format/" rel="prev" title="Extract file name from path, no matter what the os/path format">Previous post</a>
            </li>
            <li class="next">
                <a href="../could-not-find-a-part-of-the-path-bin-roslyn-csc-exe/" rel="next" title="Could not find a part of the path ... bin\roslyn\csc.exe">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
