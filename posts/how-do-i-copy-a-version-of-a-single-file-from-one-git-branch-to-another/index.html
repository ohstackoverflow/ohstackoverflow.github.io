<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How do I copy a version of a single file from one Git branch to another? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-do-i-copy-a-version-of-a-single-file-from-one-git-branch-to-another/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../retrieving-the-last-record-in-each-group-mysql/" title="Retrieving the last record in each group - MySQL" type="text/html">
<link rel="next" href="../how-to-make-a-class-json-serializable/" title="How to make a class JSON serializable" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How do I copy a version of a single file from one Git branch to anothe">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-do-i-copy-a-version-of-a-single-file-from-one-git-branch-to-another/">
<meta property="og:description" content="I've got two branches that are fully merged together.
However, after the merge is done, I realise that one file has been messed up
by the merge (someone else did an auto-format, gah), and it would jus">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T03:47:31+08:00">
<meta property="article:tag" content="branching-and-merging">
<meta property="article:tag" content="git">
<meta property="article:tag" content="git-branch">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How do I copy a version of a single file from one Git branch to another?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:47:31+08:00" itemprop="datePublished" title="2023-02-17 03:47">2023-02-17 03:47</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I've got two branches that are fully merged together.</p>
<p>However, after the merge is done, I realise that one file has been messed up
by the merge (someone else did an auto-format, gah), and it would just be
easier to change to the new version in the other branch, and then reinsert my
one line change after bringing it over into my branch.</p>
<p>So what's the easiest way in Git to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Run this from the branch where you want the file to end up:</p>
<div class="code"><pre class="code literal-block">git checkout otherbranch myfile.txt
</pre></div>

<p>General formulas:</p>
<div class="code"><pre class="code literal-block">git checkout &lt;commit_hash&gt; &lt;relative_path_to_file_or_dir&gt;
git checkout &lt;remote_name&gt;/&lt;branch_name&gt; &lt;file_or_dir&gt;
</pre></div>

<p>Some notes (from comments):</p>
<ul>
<li>Using the commit hash, you can pull files from any commit</li>
<li>This works for files and directories</li>
<li>Overwrites the file <code>myfile.txt</code> and <code>mydir</code>
</li>
<li>Wildcards don't work, but relative paths do</li>
<li>Multiple paths can be specified</li>
</ul>
<p>An alternative:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="nv">commit_id</span>:<span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">file</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">path</span><span class="o">/</span><span class="nv">to</span><span class="o">/</span><span class="nv">file</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I would use <code>git restore</code> (available since Git 2.23):</p>
<div class="code"><pre class="code literal-block">git restore --source otherbranch path/to/myfile.txt
</pre></div>

<hr>
<p>Why is this better than other options?</p>
<ul>
<li>by default <code>git restore</code> modifies files only in the working directory</li>
</ul>
<p><code>git checkout otherbranch -- path/to/myfile.txt</code> copies the file to the
working directory (your files on disk) but also to the staging area. It has
the same effect as if you copied the file manually and executed <code>git add</code> on
it. <code>git restore</code> by default changes only the working directory.</p>
<p>To get the same result as for <code>git checkout otherbranch -- path/to/myfile.txt</code>
you can write <code>git restore --source otherbranch --staged --worktree
path/to/myfile.txt</code></p>
<ul>
<li>by default <code>git restore</code> deletes files from the working directory when they are absent in the other branch</li>
</ul>
<p><code>git restore</code> can be used to restore the whole folder with <code>git restore
--source otherbranch path/to/dir</code>. You can do a similar operation with <code>git
checkout</code> but <code>git restore</code> by default will delete files that are absent in
<code>otherbranch</code>. To get <code>git checkout</code> behaviour use <code>--overlay</code> option.</p>
<p>For example, if there are fewer files on <code>otherbranch</code> than in the current
working directory (and these files are <em>tracked</em> ) without <code>--overlay</code> option
<code>git restore</code> will delete them. But this is a good default behaviour because
you most likely want the state of the directory to be "the same as
<code>otherbranch</code>", not "the same as <code>otherbranch</code> but with additional files from
my current branch".</p>
<p>To get the same result as for <code>git checkout otherbranch -- path/to/dir</code> you
can write <code>git restore --source otherbranch --staged --worktree --overlay
path/to/dir</code></p>
<ul>
<li>
<code>git restore</code> doesn't use shell redirection to create file (Powershell only problem)</li>
</ul>
<p><code>git show otherbranch:path/to/myfile.txt &gt; path/to/myfile.txt</code> uses standard
shell redirection. If you use PowerShell then there might be problem with text
encoding or could result in a corrupt file if it's binary. With <code>git restore</code>
changing files is done all by the <code>git</code> executable.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/branching-and-merging/" rel="tag">branching-and-merging</a></li>
            <li><a class="tag p-category" href="../../categories/git/" rel="tag">git</a></li>
            <li><a class="tag p-category" href="../../categories/git-branch/" rel="tag">git-branch</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../retrieving-the-last-record-in-each-group-mysql/" rel="prev" title="Retrieving the last record in each group - MySQL">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-make-a-class-json-serializable/" rel="next" title="How to make a class JSON serializable">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
