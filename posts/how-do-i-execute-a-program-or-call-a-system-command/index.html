<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How do I execute a program or call a system command? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-do-i-execute-a-program-or-call-a-system-command/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-get-the-directory-where-a-bash-script-is-located-from-within-the-script-itself/" title="How do I get the directory where a Bash script is located from within the script itself?" type="text/html">
<link rel="next" href="../how-do-i-change-the-uri-url-for-a-remote-git-repository/" title="How do I change the URI (URL) for a remote Git repository?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How do I execute a program or call a system command?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-do-i-execute-a-program-or-call-a-system-command/">
<meta property="og:description" content="How do I call an external command within Python as if I had typed it in a
shell or command prompt?

Answer
Solution:

Step #1: Add module

Use the subprocess module in the standard library:
import sub">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-16T18:34:43+08:00">
<meta property="article:tag" content="command">
<meta property="article:tag" content="python">
<meta property="article:tag" content="shell">
<meta property="article:tag" content="subprocess">
<meta property="article:tag" content="terminal">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How do I execute a program or call a system command?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T18:34:43+08:00" itemprop="datePublished" title="2023-02-16 18:34">2023-02-16 18:34</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>How do I call an external command within Python as if I had typed it in a
shell or command prompt?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Solution:</strong></p>
<blockquote>
<p>Step #1: Add module</p>
</blockquote>
<p>Use the <code>subprocess</code> module in the standard library:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">"ls"</span><span class="p">,</span> <span class="s2">"-l"</span><span class="p">])</span>
</pre></div>

<p>[This module allows you to spawn new processes, connect to their
input/output/error pipes, and obtain their return codes. Read more via:
<code>subprocess</code>]</p>
<blockquote>
<p>Step #2: Call an external command</p>
</blockquote>
<p>The simplest way to call an external command is to use the <code>subprocess.run()</code>
function, which runs the specified command and waits for it to complete.
Here's the demo code with an output:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">subprocess</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">"ls"</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
</pre></div>

<hr>
<p><strong>Advantage:</strong> The advantage of <code>subprocess.run</code> over <code>os.system</code> is that it
is more flexible (you can get the <code>stdout</code>, <code>stderr</code>, the "real" status code,
better error handling, etc...).</p>
<p><strong>Tip:</strong> The <code>shlex.split()</code> method can be used to break down simple shell
commands into individual arguments. But it may not work correctly with longer
and more complex commands that include pipe symbols. This can make debugging
difficult. To avoid this issue, the <code>shell=True</code> argument can be used,
however, this approach has potential security risks.</p>
<p><strong>Another way:</strong> You can also use other functions like <code>subprocess.Popen()</code> to
run a command and also redirect the <code>stdout</code> and <code>stderr</code> to a pipe, and you
can also redirect the input to the process.</p>
<p><strong>Security implications:</strong> While running external commands, you should be
careful to properly escape any arguments that contain special characters, as
they might be interpreted by the shell in unexpected ways.</p>
<hr>
<p><strong>Learning resources:</strong> Even the documentation for <code>os.system</code> recommends
using <code>subprocess</code> instead:</p>
<p>The <code>subprocess</code> module provides more powerful facilities for spawning new
processes and retrieving their results; using that module is preferable to
using this function. See the Replacing Older Functions with the subprocess
Module section in the <code>subprocess</code> documentation for some helpful recipes.</p>
<hr>
<p><strong>Note:</strong> On Python 3.4 and earlier, use <code>subprocess.call</code> instead of <code>.run</code>:</p>
<div class="code"><pre class="code literal-block">subprocess.call(["ls", "-l"])
</pre></div>

<p>If using Python 3.5 +, use <code>subprocess.run()</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here is a summary of ways to call external programs, including their
advantages and disadvantages:</p>
<ol>
<li>
<code>os.system</code> passes the command and arguments to your system's shell. This is nice because you can actually run multiple commands at once in this manner and set up pipes and input/output redirection. For example:<div class="code"><pre class="code literal-block">os.system("some_command &lt; input_file | another_command &gt; output_file")
</pre></div>

</li>
</ol>
<p>However, while this is convenient, you have to manually handle the escaping of
shell characters such as spaces, et cetera. On the other hand, this also lets
you run commands which are simply shell commands and not actually external
programs.</p>
<ol>
<li>
<p><code>os.popen</code> will do the same thing as <code>os.system</code> except that it gives you a file-like object that you can use to access standard input/output for that process. There are 3 other variants of popen that all handle the i/o slightly differently. If you pass everything as a string, then your command is passed to the shell; if you pass them as a list then you don't need to worry about escaping anything. Example:</p>
<div class="code"><pre class="code literal-block">print(os.popen("ls -l").read())
</pre></div>

</li>
<li>
<p><code>subprocess.Popen</code>. This is intended as a replacement for <code>os.popen</code>, but has the downside of being slightly more complicated by virtue of being so comprehensive. For example, you'd say:</p>
<div class="code"><pre class="code literal-block">print subprocess.Popen("echo Hello World", shell=True, stdout=subprocess.PIPE).stdout.read()
</pre></div>

</li>
</ol>
<p>instead of</p>
<div class="code"><pre class="code literal-block">    print os.popen("echo Hello World").read()
</pre></div>

<p>but it is nice to have all of the options there in one unified class instead
of 4 different popen functions. See the documentation.</p>
<ol>
<li>
<p><code>subprocess.call</code>. This is basically just like the <code>Popen</code> class and takes all of the same arguments, but it simply waits until the command completes and gives you the return code. For example:</p>
<div class="code"><pre class="code literal-block">return_code = subprocess.call("echo Hello World", shell=True)
</pre></div>

</li>
<li>
<p><code>subprocess.run</code>. Python 3.5+ only. Similar to the above but even more flexible and returns a <code>CompletedProcess</code> object when the command finishes executing.</p>
</li>
<li>
<p><code>os.fork</code>, <code>os.exec</code>, <code>os.spawn</code> are similar to their C language counterparts, but I don't recommend using them directly.</p>
</li>
</ol>
<p>The <code>subprocess</code> module should probably be what you use.</p>
<p>Finally, please be aware that for all methods where you pass the final command
to be executed by the shell as a string and you are responsible for escaping
it. <strong>There are serious security implications</strong> if any part of the string that
you pass can not be fully trusted. For example, if a user is entering some/any
part of the string. If you are unsure, only use these methods with constants.
To give you a hint of the implications consider this code:</p>
<div class="code"><pre class="code literal-block">print subprocess.Popen("echo %s " % user_input, stdout=PIPE).stdout.read()
</pre></div>

<p>and imagine that the user enters something "<code>my mama didnt love me &amp;&amp; rm -rf
/</code>" which could erase the whole filesystem.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/command/" rel="tag">command</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
            <li><a class="tag p-category" href="../../categories/shell/" rel="tag">shell</a></li>
            <li><a class="tag p-category" href="../../categories/subprocess/" rel="tag">subprocess</a></li>
            <li><a class="tag p-category" href="../../categories/terminal/" rel="tag">terminal</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-get-the-directory-where-a-bash-script-is-located-from-within-the-script-itself/" rel="prev" title="How do I get the directory where a Bash script is located from within the script itself?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-do-i-change-the-uri-url-for-a-remote-git-repository/" rel="next" title="How do I change the URI (URL) for a remote Git repository?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
