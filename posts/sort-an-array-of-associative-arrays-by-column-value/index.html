<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sort an array of associative arrays by column value | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/sort-an-array-of-associative-arrays-by-column-value/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-create-custom-helper-functions-in-laravel/" title="How to create custom helper functions in Laravel" type="text/html">
<link rel="next" href="../angularjs-passing-data-to-http-get-request/" title="AngularJS passing data to $http.get request" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Sort an array of associative arrays by column value">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/sort-an-array-of-associative-arrays-by-column-value/">
<meta property="og:description" content='Given this array:
$inventory = array(

   array("type"=&gt;"fruit", "price"=&gt;3.50),
   array("type"=&gt;"milk", "price"=&gt;2.90),
   array("type"=&gt;"pork", "price"=&gt;5.43),

);


I would like to sort $inventory'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T01:47:25+08:00">
<meta property="article:tag" content="arrays">
<meta property="article:tag" content="multidimensional-array">
<meta property="article:tag" content="php">
<meta property="article:tag" content="sorting">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Sort an array of associative arrays by column value</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:47:25+08:00" itemprop="datePublished" title="2023-02-18 01:47">2023-02-18 01:47</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Given this array:</p>
<div class="code"><pre class="code literal-block">$inventory = array(

   array("type"=&gt;"fruit", "price"=&gt;3.50),
   array("type"=&gt;"milk", "price"=&gt;2.90),
   array("type"=&gt;"pork", "price"=&gt;5.43),

);
</pre></div>

<p>I would like to sort <code>$inventory</code>'s elements by price to get:</p>
<div class="code"><pre class="code literal-block">$inventory = array(

   array("type"=&gt;"pork", "price"=&gt;5.43),
   array("type"=&gt;"fruit", "price"=&gt;3.50),
   array("type"=&gt;"milk", "price"=&gt;2.90),

);
</pre></div>

<p>How can I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You are right, the function you're looking for is <code>array_multisort()</code>.</p>
<p>Here's an example taken straight from the manual and adapted to your case:</p>
<div class="code"><pre class="code literal-block">$price = array();
foreach ($inventory as $key =&gt; $row)
{
    $price[$key] = $row['price'];
}
array_multisort($price, SORT_DESC, $inventory);
</pre></div>

<p>As of PHP 5.5.0 you can use <code>array_column()</code> instead of that foreach:</p>
<div class="code"><pre class="code literal-block">$price = array_column($inventory, 'price');

array_multisort($price, SORT_DESC, $inventory);
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h4>PHP 7+</h4>
<p>As of PHP 7, this can be done concisely using <code>usort</code> with an anonymous
function that uses the spaceship operator to compare elements.</p>
<p>You can do an ascending sort like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">usort</span><span class="ss">(</span>$<span class="nv">inventory</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>,<span class="w"> </span>$<span class="nv">item2</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Or a descending sort like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">usort</span><span class="ss">(</span>$<span class="nv">inventory</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>,<span class="w"> </span>$<span class="nv">item2</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>To understand how this works, note that <code>usort</code> takes a user-provided
comparison function that must behave as follows (from the docs):</p>
<blockquote>
<p>The comparison function must return an integer less than, equal to, or
greater than zero if the first argument is considered to be respectively
less than, equal to, or greater than the second.</p>
</blockquote>
<p>And note also that <code>&lt;=&gt;</code>, the spaceship operator,</p>
<blockquote>
<p>returns 0 if both operands are equal, 1 if the left is greater, and -1 if
the right is greater</p>
</blockquote>
<p>which is exactly what <code>usort</code> needs. In fact, almost the entire justification
given for adding <code>&lt;=&gt;</code> to the language in https://wiki.php.net/rfc/combined-
comparison-operator is that it</p>
<blockquote>
<p>makes writing ordering callbacks for use with <code>usort()</code> easier</p>
</blockquote>
<hr>
<h4>PHP 5.3+</h4>
<p>PHP 5.3 introduced anonymous functions, but doesn't yet have the spaceship
operator. We can still use <code>usort</code> to sort our array, but it's a little more
verbose and harder to understand:</p>
<div class="code"><pre class="code literal-block"><span class="nv">usort</span><span class="ss">(</span>$<span class="nv">inventory</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>,<span class="w"> </span>$<span class="nv">item2</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">==</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="ss">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span>$<span class="nv">item1</span>[<span class="s1">'price'</span>]<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>$<span class="nv">item2</span>[<span class="s1">'price'</span>]<span class="w"> </span>?<span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span>:<span class="w"> </span><span class="mi">1</span><span class="c1">;</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>Note that although it's fairly common for comparators dealing with integer
values to just return the difference of the values, like <code>$item2['price'] -
$item1['price']</code>, we <em>can't</em> safely do that in this case. This is because the
prices are floating point numbers in the question asker's example, but the
comparison function we pass to <code>usort</code> has to return integers for <code>usort</code> to
work properly:</p>
<blockquote>
<p>Returning <strong><em>non-integer</em></strong> values from the comparison function, such as
float, will result in an internal cast to integer of the callback's return
value. So values such as 0.99 and 0.1 will both be cast to an integer value
of 0, which will compare such values as equal.</p>
</blockquote>
<p>This is an important trap to bear in mind when using <code>usort</code> in PHP 5.x! My
original version of this answer made this mistake and yet I accrued ten
upvotes over thousands of views apparently without anybody noticing the
serious bug. The ease with which lackwits like me can screw up comparator
functions is <em>precisely</em> the reason that the easier-to-use spaceship operator
was added to the language in PHP 7.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/arrays/" rel="tag">arrays</a></li>
            <li><a class="tag p-category" href="../../categories/multidimensional-array/" rel="tag">multidimensional-array</a></li>
            <li><a class="tag p-category" href="../../categories/php/" rel="tag">php</a></li>
            <li><a class="tag p-category" href="../../categories/sorting/" rel="tag">sorting</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-create-custom-helper-functions-in-laravel/" rel="prev" title="How to create custom helper functions in Laravel">Previous post</a>
            </li>
            <li class="next">
                <a href="../angularjs-passing-data-to-http-get-request/" rel="next" title="AngularJS passing data to $http.get request">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
