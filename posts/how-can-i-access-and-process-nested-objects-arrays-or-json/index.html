<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How can I access and process nested objects, arrays, or JSON? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-can-i-access-and-process-nested-objects-arrays-or-json/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-replace-local-branch-with-remote-branch-entirely-in-git/" title="How to replace local branch with remote branch entirely in Git?" type="text/html">
<link rel="next" href="../why-would-you-use-expression-func-t-rather-than-func-t/" title="Why would you use Expression&lt;Func&lt;T&gt;&gt; rather than Func&lt;T&gt;?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How can I access and process nested objects, arrays, or JSON?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-can-i-access-and-process-nested-objects-arrays-or-json/">
<meta property="og:description" content="I have a nested data structure containing objects and arrays. How can I
extract the information, i.e. access a specific or multiple values (or keys)?
For example:
var data = {
    code: 42,
    items:">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T05:46:59+08:00">
<meta property="article:tag" content="arrays">
<meta property="article:tag" content="data-manipulation">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="nested">
<meta property="article:tag" content="object">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How can I access and process nested objects, arrays, or JSON?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:46:59+08:00" itemprop="datePublished" title="2023-02-17 05:46">2023-02-17 05:46</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have a nested data structure containing objects and arrays. How can I
extract the information, i.e. access a specific or multiple values (or keys)?</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">code</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<span class="w">    </span><span class="n">items</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">'bar'</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">};</span>
</pre></div>

<p>How could I access the <code>name</code> of the second item in <code>items</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Preliminaries</h3>
<p>JavaScript has only one data type which can contain multiple values:
<strong>Object</strong>. An <strong>Array</strong> is a special form of object.</p>
<p>(Plain) Objects have the form</p>
<div class="code"><pre class="code literal-block">{key: value, key: value, ...}
</pre></div>

<p>Arrays have the form</p>
<div class="code"><pre class="code literal-block">[value, value, ...]
</pre></div>

<p>Both arrays and objects expose a <code>key -&gt; value</code> structure. Keys in an array
must be numeric, whereas any string can be used as key in objects. The key-
value pairs are also called the <strong>"properties"</strong>.</p>
<p>Properties can be accessed either using <strong>dot notation</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">.</span><span class="n">someProperty</span><span class="p">;</span>
</pre></div>

<p>or <strong>bracket notation</strong> , if the property name would not be a valid JavaScript
identifier name <em>[spec]</em> , or the name is the value of a variable:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nf">space</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="k">character</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="k">names</span>
<span class="n">const</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">"some Property"</span><span class="o">]</span><span class="p">;</span>

<span class="o">//</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">variable</span>
<span class="n">const</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"some Property"</span><span class="p">;</span>
<span class="n">const</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">name</span><span class="o">]</span><span class="p">;</span>
</pre></div>

<p>For that reason, array elements can only be accessed using bracket notation:</p>
<div class="code"><pre class="code literal-block"><span class="n">const</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">5</span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">arr</span><span class="mf">.5</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="n">error</span>

<span class="o">//</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">variable</span>
<span class="n">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="n">const</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arr</span><span class="o">[</span><span class="n">x</span><span class="o">]</span><span class="p">;</span>
</pre></div>

<h4>Wait... what about JSON?</h4>
<p>JSON is a textual representation of data, just like XML, YAML, CSV, and
others. To work with such data, it first has to be converted to JavaScript
data types, i.e. arrays and objects (and how to work with those was just
explained). How to parse JSON is explained in the question Parse JSON in
JavaScript? .</p>
<h4>Further reading material</h4>
<p>How to access arrays and objects is fundamental JavaScript knowledge and
therefore it is advisable to read the MDN JavaScript Guide, especially the
sections</p>
<ul>
<li>Working with Objects</li>
<li>Arrays</li>
<li>Eloquent JavaScript - Data Structures</li>
</ul>
<hr>
<hr>
<h3>Accessing nested data structures</h3>
<p>A nested data structure is an array or object which refers to other arrays or
objects, i.e. its values are arrays or objects. Such structures can be
accessed by consecutively applying dot or bracket notation.</p>
<p>Here is an example:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">code</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<span class="w">    </span><span class="n">items</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span>
<span class="w">        </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">'bar'</span>
<span class="w">    </span><span class="p">}]</span>
<span class="p">};</span>
</pre></div>

<p>Let's assume we want to access the <code>name</code> of the second item.</p>
<p>Here is how we can do it step-by-step:</p>
<p>As we can see <code>data</code> is an object, hence we can access its properties using
dot notation. The <code>items</code> property is accessed as follows:</p>
<div class="code"><pre class="code literal-block">data.items
</pre></div>

<p>The value is an array, to access its second element, we have to use bracket
notation:</p>
<div class="code"><pre class="code literal-block">data.items[1]
</pre></div>

<p>This value is an object and we use dot notation again to access the <code>name</code>
property. So we eventually get:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">item_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>
</pre></div>

<p>Alternatively, we could have used bracket notation for any of the properties,
especially if the name contained characters that would have made it invalid
for dot notation usage:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">item_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="s1">'items'</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s1">'name'</span><span class="p">];</span>
</pre></div>

<hr>
<h4>I'm trying to access a property but I get only <code>undefined</code> back?</h4>
<p>Most of the time when you are getting <code>undefined</code>, the object/array simply
doesn't have a property with that name.</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">bar</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">baz</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">}};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">baz</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">undefined</span>
</pre></div>

<p>Use <code>console.log</code> or <code>console.dir</code> and inspect the structure of object /
array. The property you are trying to access might be actually defined on a
nested object / array.</p>
<div class="code"><pre class="code literal-block">console.log(foo.bar.baz); // 42
</pre></div>

<hr>
<h4>What if the property names are dynamic and I don't know them beforehand?</h4>
<p>If the property names are unknown or we want to access all properties of an
object / elements of an array, we can use the <code>for...in</code> <em>[MDN]</em> loop for
objects and the <code>for</code> <em>[MDN]</em> loop for arrays to iterate over all properties /
elements.</p>
<p><strong>Objects</strong></p>
<p>To iterate over all properties of <code>data</code>, we can iterate over the <strong>object</strong>
like so:</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">prop</span><span class="err">`</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="w"> </span><span class="err">`</span><span class="s1">'code'</span><span class="err">`</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="err">`</span><span class="s1">'items'</span><span class="err">`</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">consequently</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">data</span><span class="p">[</span><span class="n">prop</span><span class="p">]</span><span class="err">`</span><span class="w"> </span><span class="n">refers</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="err">`</span><span class="mi">42</span><span class="err">`</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">array</span>
<span class="p">}</span>
</pre></div>

<p>Depending on where the object comes from (and what you want to do), you might
have to test in each iteration whether the property is really a property of
the object, or it is an inherited property. You can do this with
<code>Object#hasOwnProperty</code> <em>[MDN]</em>.</p>
<p>As alternative to <code>for...in</code> with <code>hasOwnProperty</code>, you can use <code>Object.keys</code>
<em>[MDN]</em> to get an <em>array of property names</em> :</p>
<div class="code"><pre class="code literal-block"><span class="n">Object</span><span class="p">.</span><span class="k">keys</span><span class="p">(</span><span class="k">data</span><span class="p">).</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`prop`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">name</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`data[prop]`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">value</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p><strong>Arrays</strong></p>
<p>To iterate over all elements of the <code>data.items</code> <strong>array</strong> , we use a <code>for</code>
loop:</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">l</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="err">`</span><span class="n">i</span><span class="err">`</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="err">`</span><span class="mi">0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="mi">1</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="mi">2</span><span class="err">`</span><span class="p">,...,</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">e</span><span class="p">.</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">iteration</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="k">element</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">array</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="err">`</span><span class="k">data</span><span class="p">.</span><span class="n">items</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="nl">example</span><span class="p">:</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nf">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="n">items</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Since</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="k">element</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="p">(</span><span class="ow">in</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">example</span><span class="p">),</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="err">`</span><span class="n">obj</span><span class="p">.</span><span class="n">id</span><span class="err">`</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="err">`</span><span class="n">obj</span><span class="p">.</span><span class="n">name</span><span class="err">`</span><span class="p">.</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="err">`</span><span class="k">data</span><span class="p">.</span><span class="n">items</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">id</span><span class="err">`</span><span class="p">.</span>
<span class="err">}</span>
</pre></div>

<p>One could also use <code>for...in</code> to iterate over arrays, but there are reasons
why this should be avoided: Why is 'for(var item in list)' with arrays
considered bad practice in JavaScript?.</p>
<p>With the increasing browser support of ECMAScript 5, the array method
<code>forEach</code> <em>[MDN]</em> becomes an interesting alternative as well:</p>
<div class="code"><pre class="code literal-block"><span class="k">data</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="k">index</span><span class="p">,</span><span class="w"> </span><span class="k">array</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">callback</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">array</span><span class="p">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`value`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="n">itself</span><span class="w"> </span><span class="p">(</span><span class="n">equivalent</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n n-Quoted">`array[index]`</span><span class="p">)</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`index`</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">array</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`array`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">reference</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">array</span><span class="w"> </span><span class="n">itself</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">e</span><span class="p">.</span><span class="w"> </span><span class="n n-Quoted">`data.items`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">case</span><span class="p">)</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p>In environments supporting ES2015 (ES6), you can also use the <em><code>for...of</code></em>
<em>[MDN]</em> loop, which not only works for arrays, but for any <em>iterable</em> :</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">const</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="n">items</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n n-Quoted">`item`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">array</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="k">not</span><span class="o">**</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">index</span>
<span class="err">}</span>
</pre></div>

<p>In each iteration, <code>for...of</code> directly gives us the next element of the
iterable, there is no "index" to access or use.</p>
<hr>
<h4>What if the "depth" of the data structure is unknown to me?</h4>
<p>In addition to unknown keys, the "depth" of the data structure (i.e. how many
nested objects) it has, might be unknown as well. How to access deeply nested
properties usually depends on the exact data structure.</p>
<p>But if the data structure contains repeating patterns, e.g. the representation
of a binary tree, the solution typically includes to <strong>recursively</strong>
<em>[Wikipedia]</em> access each level of the data structure.</p>
<p>Here is an example to get the first leaf node of a binary tree:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">getLeaf</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getLeaf</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">leftChild</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">recursive</span><span class="w"> </span><span class="n">call</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">rightChild</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getLeaf</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">rightChild</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">recursive</span><span class="w"> </span><span class="n">call</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">leaf</span><span class="w"> </span><span class="n">node</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">node</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">first_leaf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getLeaf</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
</pre></div>

<p>Show code snippet</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">leftChild</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">leftChild</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">leftChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">rightChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">rightChild</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">leftChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">rightChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">rightChild</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">leftChild</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">leftChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">rightChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">rightChild</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">leftChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">rightChild</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">            </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
<span class="n">function</span><span class="w"> </span><span class="n">getLeaf</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">leftChild</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getLeaf</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">leftChild</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">rightChild</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">getLeaf</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">rightChild</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">leaf</span><span class="w"> </span><span class="n">node</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">node</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">getLeaf</span><span class="p">(</span><span class="n">root</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">);</span>
</pre></div>

<p>A more generic way to access a nested data structure with unknown keys and
depth is to test the type of the value and act accordingly.</p>
<p>Here is an example which adds all primitive values inside a nested data
structure into an array (assuming it does not contain any functions). If we
encounter an object (or array) we simply call <code>toArray</code> again on that value
(recursive call).</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">toArray</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">const</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">const</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">const</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">prop</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">typeof</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'object'</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">result</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">toArray</span><span class="p">(</span><span class="k">value</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="k">call</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">result</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">value</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">result</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>Show code snippet</p>
<div class="code"><pre class="code literal-block"><span class="n">const</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="nl">code</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<span class="w">  </span><span class="nl">items</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">{</span>
<span class="n">    id: 1,</span>
<span class="n">    name: 'foo'</span>
<span class="n">  }, {</span>
<span class="n">    id: 2,</span>
<span class="n">    name: 'bar'</span>
<span class="n">  }</span><span class="o">]</span>
<span class="err">}</span><span class="p">;</span>


<span class="k">function</span><span class="w"> </span><span class="n">toArray</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">const</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">const</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">const</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">prop</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">typeof</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'object'</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="k">result</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">toArray</span><span class="p">(</span><span class="k">value</span><span class="p">));</span>
<span class="w">    </span><span class="err">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="k">result</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">value</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">  </span><span class="err">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">result</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">toArray</span><span class="p">(</span><span class="k">data</span><span class="p">));</span>
</pre></div>

<hr>
<hr>
<h3>Helpers</h3>
<p>Since the structure of a complex object or array is not necessarily obvious,
we can inspect the value at each step to decide how to move further.
<code>console.log</code> <em>[MDN]</em> and <code>console.dir</code> <em>[MDN]</em> help us doing this. For
example (output of the Chrome console):</p>
<div class="code"><pre class="code literal-block">&gt; console.log(data.items)
 [ Object, Object ]
</pre></div>

<p>Here we see that that <code>data.items</code> is an array with two elements which are
both objects. In Chrome console the objects can even be expanded and inspected
immediately.</p>
<div class="code"><pre class="code literal-block">&gt; console.log(data.items[1])
  Object
     id: 2
     name: "bar"
     __proto__: Object
</pre></div>

<p>This tells us that <code>data.items[1]</code> is an object, and after expanding it we see
that it has three properties, <code>id</code>, <code>name</code> and <code>__proto__</code>. The latter is an
internal property used for the prototype chain of the object. The prototype
chain and inheritance is out of scope for this answer, though.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can access it this way</p>
<div class="code"><pre class="code literal-block">data.items[1].name
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">data["items"][1]["name"]
</pre></div>

<p>Both ways are equal.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/arrays/" rel="tag">arrays</a></li>
            <li><a class="tag p-category" href="../../categories/data-manipulation/" rel="tag">data-manipulation</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/nested/" rel="tag">nested</a></li>
            <li><a class="tag p-category" href="../../categories/object/" rel="tag">object</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-replace-local-branch-with-remote-branch-entirely-in-git/" rel="prev" title="How to replace local branch with remote branch entirely in Git?">Previous post</a>
            </li>
            <li class="next">
                <a href="../why-would-you-use-expression-func-t-rather-than-func-t/" rel="next" title="Why would you use Expression&lt;Func&lt;T&gt;&gt; rather than Func&lt;T&gt;?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
