<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What is the difference between a Docker image and a container? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-is-the-difference-between-a-docker-image-and-a-container/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-prune-local-tracking-branches-that-do-not-exist-on-remote-anymore/" title="How to prune local tracking branches that do not exist on remote anymore?" type="text/html">
<link rel="next" href="../what-is-the-difference-between-public-private-and-protected-inheritance-in-c/" title="What is the difference between public, private, and protected inheritance in C++?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What is the difference between a Docker image and a container?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-is-the-difference-between-a-docker-image-and-a-container/">
<meta property="og:description" content="When using Docker, we start with a base image. We boot it up, create changes
and those changes are saved in layers forming another image.
So eventually I have an image for my PostgreSQL instance and a">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T04:33:43+08:00">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="docker-container">
<meta property="article:tag" content="docker-image">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What is the difference between a Docker image and a container?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:33:43+08:00" itemprop="datePublished" title="2023-02-17 04:33">2023-02-17 04:33</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>When using Docker, we start with a base image. We boot it up, create changes
and those changes are saved in layers forming another image.</p>
<p>So eventually I have an image for my PostgreSQL instance and an image for my
web application, changes to which keep on being persisted.</p>
<p>What is a container?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>An instance of an image is called a container. You have an image, which is a
set of layers as you describe. If you start this image, you have a running
container of this image. You can have many running containers of the same
image.</p>
<p>You can see all your images with <code>docker images</code> whereas you can see your
running containers with <code>docker ps</code> (and you can see all containers with
<code>docker ps -a</code>).</p>
<p>So a running instance of an image is a container.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From my article on Automating Docker Deployments (archived):</p>
<h3>Docker Images vs. Containers</h3>
<p>In Dockerland, there are <strong>images</strong> and there are <strong>containers</strong>. The two are
closely related, but distinct. For me, grasping this dichotomy has clarified
Docker immensely.</p>
<h4>What's an Image?</h4>
<p>An image is an inert, immutable, file that's essentially a snapshot of a
container. Images are created with the build command, and they'll produce a
container when started with run. Images are stored in a Docker registry such
as registry.hub.docker.com. Because they can become quite large, images are
designed to be composed of layers of other images, allowing a minimal amount
of data to be sent when transferring images over the network.</p>
<p>Local images can be listed by running <code>docker images</code>:</p>
<div class="code"><pre class="code literal-block">REPOSITORY                TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu                    13.10               5e019ab7bf6d        2 months ago        180 MB
ubuntu                    14.04               99ec81b80c55        2 months ago        266 MB
ubuntu                    latest              99ec81b80c55        2 months ago        266 MB
ubuntu                    trusty              99ec81b80c55        2 months ago        266 MB
&lt;none&gt;                    &lt;none&gt;              4ab0d9120985        3 months ago        486.5 MB
</pre></div>

<p><strong>Some things to note:</strong></p>
<ol>
<li>IMAGE ID is the first 12 characters of the true identifier for an image. You can create many tags of a given image, but their IDs will all be the same (as above).</li>
<li>VIRTUAL SIZE is <em>virtual</em> because it's adding up the sizes of all the distinct underlying layers. This means that the sum of all the values in that column is probably much larger than the disk space used by all of those images.</li>
<li>The value in the REPOSITORY column comes from the <code>-t</code> flag of the <code>docker build</code> command, or from <code>docker tag</code>-ing an existing image. You're free to tag images using a nomenclature that makes sense to you, but know that docker will use the tag as the registry location in a <code>docker push</code> or <code>docker pull</code>.</li>
<li>The full form of a tag is <code>[REGISTRYHOST/][USERNAME/]NAME[:TAG]</code>. For <code>ubuntu</code> above, REGISTRYHOST is inferred to be <code>registry.hub.docker.com</code>. So if you plan on storing your image called <code>my-application</code> in a registry at <code>docker.example.com</code>, you should tag that image <code>docker.example.com/my-application</code>.</li>
<li>The TAG column is just the [:TAG] part of the <em>full</em> tag. This is unfortunate terminology.</li>
<li>The <code>latest</code> tag is not magical, it's simply the default tag when you don't specify a tag.</li>
<li>You can have untagged images only identifiable by their IMAGE IDs. These will get the <code>&lt;none&gt;</code> TAG and REPOSITORY. It's easy to forget about them.</li>
</ol>
<p>More information on images is available from the Docker documentation and
glossary.</p>
<h4>What's a container?</h4>
<p>To use a programming metaphor, if an image is a class, then a container is an
instance of a class—a runtime object. Containers are hopefully why you're
using Docker; they're lightweight and portable encapsulations of an
environment in which to run applications.</p>
<p>View local running containers with <code>docker ps</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">CONTAINER</span><span class="w"> </span><span class="n">ID</span><span class="w">        </span><span class="n">IMAGE</span><span class="w">                               </span><span class="n">COMMAND</span><span class="w">                </span><span class="n">CREATED</span><span class="w">             </span><span class="n">STATUS</span><span class="w">              </span><span class="n">PORTS</span><span class="w">                    </span><span class="n">NAMES</span>
<span class="n">f2ff1af05450</span><span class="w">        </span><span class="n">samalba</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="nl">registry:</span><span class="n">latest</span><span class="w">      </span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="p">'</span><span class="n">exec</span><span class="w"> </span><span class="n">doc</span><span class="w">   </span><span class="mh">4</span><span class="w"> </span><span class="n">months</span><span class="w"> </span><span class="n">ago</span><span class="w">        </span><span class="n">Up</span><span class="w"> </span><span class="mh">12</span><span class="w"> </span><span class="n">weeks</span><span class="w">         </span><span class="mf">0.0.0.0</span><span class="o">:</span><span class="mh">5000</span><span class="o">-&gt;</span><span class="mh">5000</span><span class="o">/</span><span class="n">tcp</span><span class="w">   </span><span class="n">docker</span><span class="o">-</span><span class="n">registry</span>
</pre></div>

<p>Here I'm running a dockerized version of the docker registry, so that I have a
private place to store my images. Again, some things to note:</p>
<ol>
<li>Like IMAGE ID, CONTAINER ID is the true identifier for the container. It has the same form, but it identifies a different kind of object.</li>
<li>
<code>docker ps</code> only outputs <em>running</em> containers. You can view all containers ( <em>running</em> or <em>stopped</em> ) with <code>docker ps -a</code>.</li>
<li>NAMES can be used to identify a started container via the <code>--name</code> flag.</li>
</ol>
<h4>How to avoid image and container buildup</h4>
<p>One of my early frustrations with Docker was the <strong>seemingly constant buildup
of untagged images and stopped containers</strong>. On a handful of occasions this
buildup resulted in maxed out hard drives slowing down my laptop or halting my
automated build pipeline. Talk about "containers everywhere"!</p>
<p>We can remove all untagged images by combining <code>docker rmi</code> with the recent
<code>dangling=true</code> query:</p>
<div class="code"><pre class="code literal-block">docker images -q --filter "dangling=true" | xargs docker rmi
</pre></div>

<p>Docker won't be able to remove images that are behind existing containers, so
you may have to remove stopped containers with <code>docker rm</code> first:</p>
<div class="code"><pre class="code literal-block">docker rm `docker ps --no-trunc -aq`
</pre></div>

<p>These are known pain points with Docker and may be addressed in future
releases. However, with a clear understanding of images and containers, these
situations can be avoided with a couple of practices:</p>
<ol>
<li>Always remove a useless, stopped container with <code>docker rm [CONTAINER_ID]</code>.</li>
<li>Always remove the image behind a useless, stopped container with <code>docker rmi [IMAGE_ID]</code>.</li>
</ol>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/docker/" rel="tag">docker</a></li>
            <li><a class="tag p-category" href="../../categories/docker-container/" rel="tag">docker-container</a></li>
            <li><a class="tag p-category" href="../../categories/docker-image/" rel="tag">docker-image</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-prune-local-tracking-branches-that-do-not-exist-on-remote-anymore/" rel="prev" title="How to prune local tracking branches that do not exist on remote anymore?">Previous post</a>
            </li>
            <li class="next">
                <a href="../what-is-the-difference-between-public-private-and-protected-inheritance-in-c/" rel="next" title="What is the difference between public, private, and protected inheritance in C++?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
