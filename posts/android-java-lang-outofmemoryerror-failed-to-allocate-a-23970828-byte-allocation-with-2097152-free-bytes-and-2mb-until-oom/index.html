<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Android:java.lang.OutOfMemoryError: Failed to allocate a 23970828 byte allocation with 2097152 free bytes and 2MB until OOM | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/android-java-lang-outofmemoryerror-failed-to-allocate-a-23970828-byte-allocation-with-2097152-free-bytes-and-2mb-until-oom/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../execute-command-on-all-files-in-a-directory/" title="Execute command on all files in a directory" type="text/html">
<link rel="next" href="../how-to-set-a-value-for-a-span-using-jquery/" title="How to set a value for a span using jQuery" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Android:java.lang.OutOfMemoryError: Failed to allocate a 23970828 byte">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/android-java-lang-outofmemoryerror-failed-to-allocate-a-23970828-byte-allocation-with-2097152-free-bytes-and-2mb-until-oom/">
<meta property="og:description" content="I want to show the Bitmap image in ImageView from sd card which is
stored already. After run my application is crash and getting
OutOfMemoryError error of:

(java.lang.OutOfMemoryError: Failed to allo">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T15:48:05+08:00">
<meta property="article:tag" content="android">
<meta property="article:tag" content="android-bitmap">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Android:java.lang.OutOfMemoryError: Failed to allocate a 23970828 byte allocation with 2097152 free bytes and 2MB until OOM</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T15:48:05+08:00" itemprop="datePublished" title="2023-03-03 15:48">2023-03-03 15:48</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I want to show the <strong>Bitmap</strong> image in <strong>ImageView</strong> from sd card which is
stored already. After run my application is crash and getting
<strong>OutOfMemoryError</strong> error of:</p>
<blockquote>
<p>(java.lang.OutOfMemoryError: Failed to allocate a 23970828 byte allocation
with 2097152 free bytes and 2MB until OOM)</p>
</blockquote>
<p>I have no idea or why its out of memory. I think my image size is very large
so I tried to change it.</p>
<div class="code"><pre class="code literal-block"><span class="nv">Iterator</span><span class="o">&lt;</span><span class="nv">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">imageArray</span>.<span class="nv">iterator</span><span class="ss">()</span><span class="c1">;</span>
<span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="nv">it</span>.<span class="nv">hasNext</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">Object</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">it</span>.<span class="k">next</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">String</span><span class="w"> </span><span class="nv">objElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">element</span>.<span class="nv">toString</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"objElement "</span>,<span class="w"> </span><span class="s2">" = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">objElement</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">final</span><span class="w"> </span><span class="nv">ImageView</span><span class="w"> </span><span class="nv">imageView</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">ImageView</span><span class="w"> </span><span class="ss">(</span><span class="nv">getContext</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">final</span><span class="w"> </span><span class="nv">ProgressBar</span><span class="w"> </span><span class="nv">pBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">ProgressBar</span><span class="ss">(</span><span class="nv">getContext</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">null</span>,<span class="w"> </span>
<span class="w">                                           </span><span class="nv">android</span>.<span class="nv">R</span>.<span class="nv">attr</span>.<span class="nv">progressBarStyleSmall</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">imageView</span>.<span class="nv">setTag</span><span class="ss">(</span><span class="nv">it</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">pBar</span>.<span class="nv">setTag</span><span class="ss">(</span><span class="nv">it</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">  </span><span class="nv">imageView</span>.<span class="nv">setImageResource</span><span class="ss">(</span><span class="nv">R</span>.<span class="nv">drawable</span>.<span class="nv">img_placeholder</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">pBar</span>.<span class="nv">setVisibility</span><span class="ss">(</span><span class="nv">View</span>.<span class="nv">VISIBLE</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">objElement</span>.<span class="nv">endsWith</span><span class="ss">(</span><span class="nv">mp3_Pattern</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"Mp3 "</span>,<span class="w"> </span><span class="s2">" ends with "</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">pBar</span>.<span class="nv">setVisibility</span><span class="ss">(</span><span class="nv">View</span>.<span class="nv">GONE</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">imageView</span>.<span class="nv">setImageResource</span><span class="ss">(</span><span class="nv">R</span>.<span class="nv">drawable</span>.<span class="nv">audio_control</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span>}
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">objElement</span>.<span class="nv">endsWith</span><span class="ss">(</span><span class="nv">png_Pattern</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">     </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">BitmapFactory</span>.<span class="nv">decodeFile</span><span class="ss">(</span><span class="nv">objElement</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">int</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Math</span>.<span class="nv">min</span><span class="ss">(</span><span class="nv">bitmap</span>.<span class="nv">getWidth</span><span class="ss">()</span>,<span class="w"> </span><span class="nv">bitmap</span>.<span class="nv">getHeight</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">int</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="nv">bitmap</span>.<span class="nv">getWidth</span><span class="ss">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">size</span><span class="ss">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">int</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="nv">bitmap</span>.<span class="nv">getHeight</span><span class="ss">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">size</span><span class="ss">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">bitmap_Resul</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Bitmap</span>.<span class="nv">createBitmap</span><span class="ss">(</span><span class="nv">bitmap</span>,<span class="w"> </span><span class="nv">x</span>,<span class="w"> </span><span class="nv">y</span>,<span class="w"> </span><span class="nv">size</span>,<span class="w"> </span><span class="nv">size</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"bitmap_Resul "</span>,<span class="s2">" = "</span><span class="o">+</span><span class="w"> </span><span class="nv">bitmap_Resul</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">bitmap_Resul</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">bitmap</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">bitmap</span>.<span class="nv">recycle</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">     </span>}
<span class="w">     </span><span class="nv">imageView</span>.<span class="nv">setImageBitmap</span><span class="ss">(</span><span class="nv">bitmap_Resul</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">"png_Pattern "</span>,<span class="w"> </span><span class="s2">" ends with "</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">     </span><span class="nv">Log</span>.<span class="nv">e</span><span class="ss">(</span><span class="s2">" bitmap "</span>,<span class="s2">" = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">bitmap</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span>}

<span class="w">  </span><span class="nv">holder</span>.<span class="nv">linearLayout</span>.<span class="nv">addView</span><span class="ss">(</span><span class="nv">imageView</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">holder</span>.<span class="nv">linearLayout</span>.<span class="nv">addView</span><span class="ss">(</span><span class="nv">pBar</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>The log cat information:</p>
<div class="code"><pre class="code literal-block"><span class="mf">08</span><span class="o">-</span><span class="mf">27</span><span class="w"> </span><span class="mf">14</span><span class="p">:</span><span class="mf">11</span><span class="p">:</span><span class="mf">15.307</span><span class="w">    </span><span class="mf">1857</span><span class="o">-</span><span class="mf">1857</span><span class="o">/</span><span class="err">?</span><span class="w"> </span><span class="n">E</span><span class="o">/</span><span class="ow">And</span><span class="n">roidRuntime</span><span class="err">﹕</span><span class="w"> </span><span class="n">FATAL</span><span class="w"> </span><span class="n">EXCEPTION</span><span class="p">:</span><span class="w"> </span><span class="n">main</span>
<span class="w">    </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="n">example</span><span class="mf">.</span><span class="n">tazeen</span><span class="mf">.</span><span class="n">classnkk</span><span class="p">,</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mf">1857</span>
<span class="w">    </span><span class="n">java</span><span class="mf">.</span><span class="n">lang</span><span class="mf">.</span><span class="n">OutOfMemoryError</span><span class="p">:</span><span class="w"> </span><span class="n">Failed</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">allocate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mf">23970828</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="mf">2097152</span><span class="w"> </span><span class="nb">fre</span><span class="n">e</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mf">2</span><span class="n">MB</span><span class="w"> </span><span class="n">until</span><span class="w"> </span><span class="n">OOM</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">dalvik</span><span class="mf">.</span><span class="kr">sys</span><span class="n">tem</span><span class="mf">.</span><span class="n">VMRuntime</span><span class="mf">.</span><span class="kr">new</span><span class="n">NonMovableArray</span><span class="p">(</span><span class="n">Native</span><span class="w"> </span><span class="n">Method</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">nativeCreate</span><span class="p">(</span><span class="n">Native</span><span class="w"> </span><span class="n">Method</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">812</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">789</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">709</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">graphics</span><span class="mf">.</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">createBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">634</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="n">example</span><span class="mf">.</span><span class="n">tazeen</span><span class="mf">.</span><span class="n">classnkk</span><span class="mf">.</span><span class="n">AllPosts_Page$MyListAdapter</span><span class="mf">.</span><span class="kr">get</span><span class="n">View</span><span class="p">(</span><span class="n">AllPosts_Page</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">357</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">obtainView</span><span class="p">(</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">2347</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">makeAndAddView</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1864</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">fillDown</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">698</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">fillFromTop</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">759</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">layoutChildren</span><span class="p">(</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1659</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="nb">Abs</span><span class="kr">List</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">2151</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">setChildFrame</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1703</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">layoutVertical</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1557</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1466</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">layoutChildren</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">579</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">514</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">setChildFrame</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1703</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">layoutVertical</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1557</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">LinearLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1466</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">layoutChildren</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">579</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">widget</span><span class="mf">.</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="kr">on</span><span class="n">Layout</span><span class="p">(</span><span class="n">FrameLayout</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">514</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">View</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">View</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">15671</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">layout</span><span class="p">(</span><span class="n">ViewGroup</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5038</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">performLayout</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">2086</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">performTraversals</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1843</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">doTraversal</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">1061</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">ViewRootImpl$TraversalRunnable</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">ViewRootImpl</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5885</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer$CallbackRecord</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">767</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">doCallbacks</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">580</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">doFrame</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">550</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">view</span><span class="mf">.</span><span class="n">Choreographer$FrameDisplayEventReceiver</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">Choreographer</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">753</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">Handler</span><span class="mf">.</span><span class="n">handleCallback</span><span class="p">(</span><span class="n">Handler</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">739</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">Handler</span><span class="mf">.</span><span class="n">dispatchMessage</span><span class="p">(</span><span class="n">Handler</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">95</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">Looper</span><span class="mf">.</span><span class="n">loop</span><span class="p">(</span><span class="n">Looper</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">135</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="n">app</span><span class="mf">.</span><span class="n">ActivityThread</span><span class="mf">.</span><span class="n">main</span><span class="p">(</span><span class="n">ActivityThread</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">5257</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">java</span><span class="mf">.</span><span class="n">lang</span><span class="mf">.</span><span class="n">reflect</span><span class="mf">.</span><span class="n">Method</span><span class="mf">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Native</span><span class="w"> </span><span class="n">Method</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">java</span><span class="mf">.</span><span class="n">lang</span><span class="mf">.</span><span class="n">reflect</span><span class="mf">.</span><span class="n">Method</span><span class="mf">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Method</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">372</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="nb">int</span><span class="n">ernal</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">ZygoteInit$MethodAndArgsCaller</span><span class="mf">.</span><span class="kr">run</span><span class="p">(</span><span class="n">ZygoteInit</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">903</span><span class="p">)</span>
<span class="w">            </span><span class="n">at</span><span class="w"> </span><span class="n">com</span><span class="mf">.</span><span class="ow">and</span><span class="n">roid</span><span class="mf">.</span><span class="nb">int</span><span class="n">ernal</span><span class="mf">.</span><span class="n">os</span><span class="mf">.</span><span class="n">ZygoteInit</span><span class="mf">.</span><span class="n">main</span><span class="p">(</span><span class="n">ZygoteInit</span><span class="mf">.</span><span class="n">java</span><span class="p">:</span><span class="mf">698</span><span class="p">)</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>OutOfMemoryError</strong> is the most common problem that occurs in android while
especially dealing with bitmaps. This error is thrown by the Java Virtual
Machine (JVM) when an object cannot be allocated due to lack of memory space
and also, the garbage collector cannot free some space.</p>
<p>As mentioned by Aleksey, you can add the below entities in your manifest file
<code>android:hardwareAccelerated="false"</code> , <code>android:largeHeap="true"</code> it will
work for some environments.</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">application</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">allowBackup</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">hardwareAccelerated</span><span class="o">=</span><span class="ss">"false"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">icon</span><span class="o">=</span><span class="ss">"@mipmap/ic_launcher"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="ss">"@string/app_name"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">largeHeap</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">supportsRtl</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">    </span><span class="nl">android</span><span class="p">:</span><span class="n">theme</span><span class="o">=</span><span class="ss">"@style/AppTheme"</span><span class="o">&gt;</span>
</pre></div>

<p>you should definitely read some of Androids Developer concept's, especially
here:Displaying Bitmaps Efficiently</p>
<p>Read all 5 topics and rewrite your code again. If it still doesn't work we
will be happy to see what you've done wrong with the tutorial material.</p>
<p>Here some of the possible answers for these type of errors in SOF</p>
<p>Android: BitmapFactory.decodeStream() out of memory with a 400KB file with 2MB
free heap</p>
<p>How to solve java.lang.OutOfMemoryError trouble in Android</p>
<p>Android : java.lang.OutOfMemoryError</p>
<p>java.lang.OutOfMemoryError</p>
<p>Solution for OutOfMemoryError: bitmap size exceeds VM budget</p>
<p>Edit: From the comments of @cjnash</p>
<p>For anyone that still had crashes after they added this line, try sticking
your image into your res/drawable-xhdpi/ folder instead of your res/drawable/
and this should resolve this issue</p>
<p><br></p>
<h3>Suggest</h3>
<p>have you tried adding this to your manifest under applications?
<code>android:largeHeap="true"</code>?</p>
<p><strong>like this</strong></p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="o">&lt;</span><span class="n">application</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">name</span><span class="o">=</span><span class="ss">".ParaseApplication"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">allowBackup</span><span class="o">=</span><span class="ss">"true"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">icon</span><span class="o">=</span><span class="ss">"@mipmap/ic_launcher"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">label</span><span class="o">=</span><span class="ss">"@string/app_name"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">theme</span><span class="o">=</span><span class="ss">"@style/AppTheme"</span>
<span class="w">      </span><span class="nl">android</span><span class="p">:</span><span class="n">largeHeap</span><span class="o">=</span><span class="ss">"true"</span><span class="w"> </span><span class="o">&gt;</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/android/" rel="tag">android</a></li>
            <li><a class="tag p-category" href="../../categories/android-bitmap/" rel="tag">android-bitmap</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../execute-command-on-all-files-in-a-directory/" rel="prev" title="Execute command on all files in a directory">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-set-a-value-for-a-span-using-jquery/" rel="next" title="How to set a value for a span using jQuery">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
