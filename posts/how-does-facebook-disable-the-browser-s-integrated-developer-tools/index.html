<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How does Facebook disable the browser's integrated Developer Tools? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-does-facebook-disable-the-browser-s-integrated-developer-tools/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../with-arrays-why-is-it-the-case-that-a-5-5-a/" title="With arrays, why is it the case that a[5] == 5[a]?" type="text/html">
<link rel="next" href="../what-s-the-canonical-way-to-check-for-type-in-python/" title="What's the canonical way to check for type in Python?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How does Facebook disable the browser's integrated Developer Tools?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-does-facebook-disable-the-browser-s-integrated-developer-tools/">
<meta property="og:description" content="So apparently because of the recent scams, the developer tools is exploited by
people to post spam and even used to &quot;hack&quot; accounts. Facebook has blocked the
developer tools, and I can't even use the ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T00:17:08+08:00">
<meta property="article:tag" content="facebook">
<meta property="article:tag" content="google-chrome-devtools">
<meta property="article:tag" content="javascript">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How does Facebook disable the browser's integrated Developer Tools?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:17:08+08:00" itemprop="datePublished" title="2023-02-17 00:17">2023-02-17 00:17</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>So apparently because of the recent scams, the developer tools is exploited by
people to post spam and even used to "hack" accounts. Facebook has blocked the
developer tools, and I can't even use the console.</p>
<p><img alt="Enter image description here" src="../../images/Wiatp.png"></p>
<p>How did they do that?? One Stack Overflow post claimed that it is not
possible, but Facebook has proven them wrong.</p>
<p>Just go to Facebook and open up the developer tools, type one character into
the console, and this warning pops up. No matter what you put in, it will not
get executed.</p>
<p>How is this possible?</p>
<p>They even blocked auto-complete in the console:</p>
<p><img alt="Enter image description here" src="../../images/j0Zmx.png"></p>
<p><br><br></p>
<h2>Answer</h2>
<p>I'm a security engineer at Facebook and this is my fault. We're testing this
for some users to see if it can slow down some attacks where users are tricked
into pasting (malicious) JavaScript code into the browser console.</p>
<p>Just to be clear: trying to block hackers client-side is a bad idea in
general; this is to protect against a specific social engineering attack.</p>
<p>If you ended up in the test group and are annoyed by this, sorry. I tried to
make the old opt-out page (now help page) as simple as possible while still
being scary enough to stop at least <em>some</em> of the victims.</p>
<p>The actual code is pretty similar to @joeldixon66's link; ours is a little
more complicated for no good reason.</p>
<p>Chrome wraps all console code in</p>
<div class="code"><pre class="code literal-block">with ((console &amp;&amp; console._commandLineAPI) || {}) {
  &lt;code goes here&gt;
}
</pre></div>

<p>... so the site redefines <code>console._commandLineAPI</code> to throw:</p>
<div class="code"><pre class="code literal-block">Object.defineProperty(console, '_commandLineAPI',
   { get : function() { throw 'Nooo!' } })
</pre></div>

<p>This is not quite enough (try it!), but that's the main trick.</p>
<hr>
<p>Epilogue: The Chrome team decided that defeating the console from user-side JS
was a bug and fixed the issue, rendering this technique invalid. Afterwards,
additional protection was added to protect users from self-xss.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I located the Facebook's console buster script using Chrome developer tools.
Here is the script with minor changes for readability. I have removed the bits
that I could not understand:</p>
<div class="code"><pre class="code literal-block"><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">defineProperty</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="s2">"console"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="n">console</span><span class="p">,</span>
<span class="w">    </span><span class="n">writable</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">configurable</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
<span class="p">});</span>

<span class="k">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">function</span><span class="w"> </span><span class="n">showWarningAndThrow</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">setTimeout</span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"</span><span class="si">%c</span><span class="s2">Warning message"</span><span class="p">,</span><span class="w"> </span><span class="s2">"font: 2em sans-serif; color: yellow; background-color: red;"</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">throw</span><span class="w"> </span><span class="s2">"Console is disabled"</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">var</span><span class="w"> </span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">set</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">o</span><span class="p">;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">get</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">showWarningAndThrow</span><span class="p">();</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">l</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">defineProperty</span><span class="p">(</span><span class="n">console</span><span class="p">,</span><span class="w"> </span><span class="s2">"_commandLineAPI"</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
<span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">defineProperty</span><span class="p">(</span><span class="n">console</span><span class="p">,</span><span class="w"> </span><span class="s2">"__commandLineAPI"</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
</pre></div>

<p>With this, the console auto-complete fails silently while statements typed in
console will fail to execute (the exception will be logged).</p>
<p>References:</p>
<ul>
<li>Object.defineProperty</li>
<li>Object.getOwnPropertyDescriptor</li>
<li>Chrome's console.log function (for tips on formatting output)</li>
</ul>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/facebook/" rel="tag">facebook</a></li>
            <li><a class="tag p-category" href="../../categories/google-chrome-devtools/" rel="tag">google-chrome-devtools</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../with-arrays-why-is-it-the-case-that-a-5-5-a/" rel="prev" title="With arrays, why is it the case that a[5] == 5[a]?">Previous post</a>
            </li>
            <li class="next">
                <a href="../what-s-the-canonical-way-to-check-for-type-in-python/" rel="next" title="What's the canonical way to check for type in Python?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
