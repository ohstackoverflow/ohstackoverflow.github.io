<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Android getResources().getDrawable() deprecated API 22 | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/android-getresources-getdrawable-deprecated-api-22/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-to-fix-referenceerror-primordials-is-not-defined-in-node-js/" title='How to fix "ReferenceError: primordials is not defined" in Node.js' type="text/html">
<link rel="next" href="../what-is-export-default-in-javascript/" title='What is "export default" in JavaScript?' type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Android getResources().getDrawable() deprecated API 22">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/android-getresources-getdrawable-deprecated-api-22/">
<meta property="og:description" content="With new android API 22 getResources().getDrawable() is now deprecated. Now
the best approach is to use only getDrawable().
What changed?

Answer
You have some options to handle this deprecation the r">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T11:44:28+08:00">
<meta property="article:tag" content="android">
<meta property="article:tag" content="android-5.1.1-lollipop">
<meta property="article:tag" content="android-drawable">
<meta property="article:tag" content="android-resources">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Android getResources().getDrawable() deprecated API 22</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:44:28+08:00" itemprop="datePublished" title="2023-02-17 11:44">2023-02-17 11:44</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>With new android API 22 <code>getResources().getDrawable()</code> is now deprecated. Now
the best approach is to use only <code>getDrawable()</code>.</p>
<p>What changed?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You have some options to handle this deprecation the right (and <strong>future
proof</strong> ) way, depending on which kind of drawable you are loading:</p>
<hr>
<p><strong>A)</strong> drawables <em>with</em> theme attributes</p>
<div class="code"><pre class="code literal-block">ContextCompat.getDrawable(getActivity(), R.drawable.name);
</pre></div>

<p>You'll obtain a styled Drawable as your Activity theme instructs. This is
probably what you need.</p>
<hr>
<p><strong>B)</strong> drawables <em>without</em> theme attributes</p>
<div class="code"><pre class="code literal-block">ResourcesCompat.getDrawable(getResources(), R.drawable.name, null);
</pre></div>

<p>You'll get your unstyled drawable the old way. Please note:
<code>ResourcesCompat.getDrawable()</code> is <strong>not</strong> deprecated!</p>
<hr>
<p><strong>EXTRA)</strong> drawables <em>with</em> theme attributes from <em>another</em> theme</p>
<div class="code"><pre class="code literal-block">ResourcesCompat.getDrawable(getResources(), R.drawable.name, anotherTheme);
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h4>Edit: see my blog post on the subject for a more complete explanation</h4>
<hr>
<p>You should use the following code from the support library instead:</p>
<div class="code"><pre class="code literal-block">ContextCompat.getDrawable(context, R.drawable.***)
</pre></div>

<p>Using this method is equivalent to calling:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">Build</span>.<span class="nv">VERSION</span>.<span class="nv">SDK_INT</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nv">Build</span>.<span class="nv">VERSION_CODES</span>.<span class="nv">LOLLIPOP</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">resources</span>.<span class="nv">getDrawable</span><span class="ss">(</span><span class="nv">id</span>,<span class="w"> </span><span class="nv">context</span>.<span class="nv">getTheme</span><span class="ss">())</span><span class="c1">;</span>
}<span class="w"> </span><span class="k">else</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">resources</span>.<span class="nv">getDrawable</span><span class="ss">(</span><span class="nv">id</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>As of API 21, you should use the <code>getDrawable(int, Theme)</code> method instead of
<code>getDrawable(int)</code>, as it allows you to fetch a drawable object associated
with a particular resource ID for the given screen density/theme. Calling the
deprecated <code>getDrawable(int)</code> method is equivalent to calling
<code>getDrawable(int, null)</code>.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/android/" rel="tag">android</a></li>
            <li><a class="tag p-category" href="../../categories/android-511-lollipop/" rel="tag">android-5.1.1-lollipop</a></li>
            <li><a class="tag p-category" href="../../categories/android-drawable/" rel="tag">android-drawable</a></li>
            <li><a class="tag p-category" href="../../categories/android-resources/" rel="tag">android-resources</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-to-fix-referenceerror-primordials-is-not-defined-in-node-js/" rel="prev" title='How to fix "ReferenceError: primordials is not defined" in Node.js'>Previous post</a>
            </li>
            <li class="next">
                <a href="../what-is-export-default-in-javascript/" rel="next" title='What is "export default" in JavaScript?'>Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
