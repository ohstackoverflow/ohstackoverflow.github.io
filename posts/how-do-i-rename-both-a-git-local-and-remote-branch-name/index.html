<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How do I rename both a Git local and remote branch name? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/how-do-i-rename-both-a-git-local-and-remote-branch-name/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../get-the-name-of-an-object-s-type/" title="Get the name of an object's type" type="text/html">
<link rel="next" href="../difference-between-select-and-selectmany/" title="Difference Between Select and SelectMany" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="How do I rename both a Git local and remote branch name?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/how-do-i-rename-both-a-git-local-and-remote-branch-name/">
<meta property="og:description" content="I have a local branch master that points to a remote branch origin/regacy
(oops, typo!).
How do I rename the remote branch to origin/legacy or origin/master?

I tried:
git remote rename regacy legacy
">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T03:25:55+08:00">
<meta property="article:tag" content="git">
<meta property="article:tag" content="git-branch">
<meta property="article:tag" content="rename">
<meta property="article:tag" content="repository">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">How do I rename both a Git local and remote branch name?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:25:55+08:00" itemprop="datePublished" title="2023-02-17 03:25">2023-02-17 03:25</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have a local branch <code>master</code> that points to a remote branch <code>origin/regacy</code>
(oops, typo!).</p>
<p>How do I rename the remote branch to <code>origin/legacy</code> or <code>origin/master</code>?</p>
<hr>
<p>I tried:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">rename</span><span class="w"> </span><span class="n">regacy</span><span class="w"> </span><span class="n">legacy</span>
</pre></div>

<p>But this gave an error:</p>
<blockquote>
<p>error : Could not rename config section 'remote.regacy' to 'remote.legacy'</p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<p><img alt="schematic, cute git remote graph" src="../../images/YeBYR.jpg"></p>
<hr>
<p>There are a few ways to accomplish that:</p>
<ol>
<li>Change your local branch and then push your changes</li>
<li>Push the branch to remote with the new name while keeping the original name locally</li>
</ol>
<h4>Renaming local and remote</h4>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">Rename</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">local</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">name</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="o">-</span><span class="nv">m</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">old_name</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">new_name</span><span class="o">&gt;</span>

#<span class="w"> </span><span class="nv">Delete</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">old</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">is</span>,<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">example</span>,<span class="w"> </span><span class="nv">origin</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;</span><span class="w"> </span><span class="o">--</span><span class="nv">delete</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">old_name</span><span class="o">&gt;</span>

#<span class="w"> </span><span class="nv">Or</span><span class="w"> </span><span class="nv">shorter</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">delete</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span>[:]
<span class="nv">git</span><span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;</span><span class="w"> </span>:<span class="o">&lt;</span><span class="nv">old_name</span><span class="o">&gt;</span>

#<span class="w"> </span><span class="nv">Prevent</span><span class="w"> </span><span class="nv">git</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">old</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">pushing</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="k">next</span><span class="w"> </span><span class="nv">step</span>.
#<span class="w"> </span><span class="nv">Otherwise</span>,<span class="w"> </span><span class="nv">git</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">old</span><span class="w"> </span><span class="nv">upstream</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">instead</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">new_name</span><span class="o">&gt;</span>.
<span class="nv">git</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="o">--</span><span class="nv">unset</span><span class="o">-</span><span class="nv">upstream</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">new_name</span><span class="o">&gt;</span>

#<span class="w"> </span><span class="nv">Push</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">remote</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">new_name</span><span class="o">&gt;</span>

#<span class="w"> </span><span class="nv">Reset</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">upstream</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">new_name</span><span class="w"> </span><span class="nv">local</span><span class="w"> </span><span class="nv">branch</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="nv">u</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">new_name</span><span class="o">&gt;</span>
</pre></div>

<p><img alt="console screenshot" src="../../images/YOHON.png"></p>
<hr>
<h4>Renaming Only remote branch</h4>
<p>Credit: ptim</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">option</span>,<span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">name</span>
#<span class="w"> </span><span class="k">While</span><span class="w"> </span><span class="nv">keeping</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">local</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">is</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;/&lt;</span><span class="nv">old_name</span><span class="o">&gt;</span>:<span class="nv">refs</span><span class="o">/</span><span class="nv">heads</span><span class="o">/&lt;</span><span class="nv">new_name</span><span class="o">&gt;</span><span class="w"> </span>:<span class="o">&lt;</span><span class="nv">old_name</span><span class="o">&gt;</span>
</pre></div>

<hr>
<h4>Important note:</h4>
<p>When you use the <code>git branch -m</code> (move), Git is also <strong>updating</strong> your
tracking branch with the new name.</p>
<blockquote>
<p><code>git remote rename legacy legacy</code></p>
</blockquote>
<p><code>git remote rename</code> is trying to update your remote section in your
configuration file. It will rename the remote with the given name to the new
name, but in your case, it did not find any, so the renaming failed.</p>
<p><strong>But</strong> it will not do what you think; it will rename your <strong>local</strong>
configuration remote name and <strong>not</strong> the remote branch.</p>
<hr>
<p><strong>Note</strong> Git servers might allow you to rename Git branches using the web
interface or external programs (like Sourcetree, etc.), but you have to keep
in mind that in Git all the work is done locally, so it's recommended to use
the above commands to the work.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you have named a branch incorrectly AND pushed this to the remote
repository follow these steps to rename that branch (based on this article):</p>
<ol>
<li>
<p><strong>Rename your local branch:</strong></p>
<ul>
<li>
<p>If you are on the branch you want to rename:<br><code>git branch -m new-name</code></p>
</li>
<li>
<p>If you are on a different branch:<br><code>git branch -m old-name new-name</code></p>
</li>
</ul>
</li>
<li>
<p><strong>Delete the<code>old-name</code> remote branch and push the <code>new-name</code> local branch</strong>:<br><code>git push origin :old-name new-name</code></p>
</li>
<li>
<p><strong>Reset the upstream branch for the new-name local branch</strong> :<br>
Switch to the branch and then:<br><code>git push origin -u new-name</code></p>
</li>
</ol>
</div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/git/" rel="tag">git</a></li>
            <li><a class="tag p-category" href="../../categories/git-branch/" rel="tag">git-branch</a></li>
            <li><a class="tag p-category" href="../../categories/rename/" rel="tag">rename</a></li>
            <li><a class="tag p-category" href="../../categories/repository/" rel="tag">repository</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../get-the-name-of-an-object-s-type/" rel="prev" title="Get the name of an object's type">Previous post</a>
            </li>
            <li class="next">
                <a href="../difference-between-select-and-selectmany/" rel="next" title="Difference Between Select and SelectMany">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
