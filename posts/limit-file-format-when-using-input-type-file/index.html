<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Limit file format when using &lt;input type="file"&gt;? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/limit-file-format-when-using-input-type-file/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../getting-a-list-of-all-subdirectories-in-the-current-directory/" title="Getting a list of all subdirectories in the current directory" type="text/html">
<link rel="next" href="../check-if-an-element-contains-a-class-in-javascript/" title="Check if an element contains a class in JavaScript?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content='Limit file format when using &lt;input type="file"&gt;?'>
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/limit-file-format-when-using-input-type-file/">
<meta property="og:description" content="I'd like to restrict the type of file that can be chosen from the native OS
file chooser when the user clicks the Browse button in the &lt;input
type=&quot;file&quot;&gt; element in HTML. I have a feeling it's imposs">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T10:07:38+08:00">
<meta property="article:tag" content="file">
<meta property="article:tag" content="html">
<meta property="article:tag" content="types">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Limit file format when using &lt;input type="file"&gt;?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:07:38+08:00" itemprop="datePublished" title="2023-02-17 10:07">2023-02-17 10:07</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'd like to restrict the type of file that can be chosen from the native OS
file chooser when the user clicks the Browse button in the <code>&lt;input
type="file"&gt;</code> element in HTML. I have a feeling it's impossible, but I'd like
to know if there <em>is</em> a solution. I'd like to keep solely to HTML and
JavaScript; no Flash please.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Strictly speaking, the answer is <strong>no</strong>. A developer <em>cannot</em> prevent a user
from uploading files of any type or extension using front-end validation
(HTML/JavaScript).  </p>
<p>But still, the <strong>accept</strong> attribute of <code>&lt;input type = "file"&gt;</code> can help to
provide a filter in the file select dialog box provided by the user's
browser/OS. For example,</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;!--</span><span class="w"> </span><span class="p">(</span><span class="n">IE</span><span class="w"> </span><span class="mi">10</span><span class="o">+</span><span class="p">,</span><span class="w"> </span><span class="n">Edge</span><span class="w"> </span><span class="p">(</span><span class="n">EdgeHTML</span><span class="p">),</span><span class="w"> </span><span class="n">Edge</span><span class="w"> </span><span class="p">(</span><span class="n">Chromium</span><span class="p">),</span><span class="w"> </span><span class="n">Chrome</span><span class="p">,</span><span class="w"> </span><span class="n">Firefox</span><span class="w"> </span><span class="mi">42</span><span class="o">+</span><span class="p">)</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="kr">type</span><span class="o">=</span><span class="s">"file"</span><span class="w"> </span><span class="n">accept</span><span class="o">=</span><span class="s">".xls,.xlsx"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<p>should provide a way to filter out files other than .xls or .xlsx. Although
the MDN page for <code>input</code> element always said that it supports this, to my
surprise, this didn't work for me in Firefox until version 42. This works in
IE 10+, Edge, and Chrome.</p>
<p>So, for supporting Firefox older than 42 along with IE 10+, Edge, Chrome, and
Opera, I guess it's better to use comma-separated list of MIME-types:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;!--</span><span class="w"> </span><span class="p">(</span><span class="n">IE</span><span class="w"> </span><span class="mi">10</span><span class="o">+</span><span class="p">,</span><span class="w"> </span><span class="n">Edge</span><span class="w"> </span><span class="p">(</span><span class="n">EdgeHTML</span><span class="p">),</span><span class="w"> </span><span class="n">Edge</span><span class="w"> </span><span class="p">(</span><span class="n">Chromium</span><span class="p">),</span><span class="w"> </span><span class="n">Chrome</span><span class="p">,</span><span class="w"> </span><span class="n">Firefox</span><span class="p">)</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="kr">type</span><span class="o">=</span><span class="s">"file"</span>
<span class="w"> </span><span class="n">accept</span><span class="o">=</span><span class="s">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<p>[ <strong>Edge</strong> (EdgeHTML) behavior: The file type filter dropdown shows the file
types mentioned here, but is not the default in the dropdown. The default
filter is <code>All files (*)</code>.]  </p>
<p>You can also use asterisks in MIME-types. For example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="kr">type</span><span class="o">=</span><span class="s">"file"</span><span class="w"> </span><span class="n">accept</span><span class="o">=</span><span class="s">"image/*"</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"> </span><span class="o">&lt;!--</span><span class="w"> </span><span class="kr">all</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="kr">type</span><span class="o">=</span><span class="s">"file"</span><span class="w"> </span><span class="n">accept</span><span class="o">=</span><span class="s">"audio/*"</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"> </span><span class="o">&lt;!--</span><span class="w"> </span><span class="kr">all</span><span class="w"> </span><span class="n">audio</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="kr">type</span><span class="o">=</span><span class="s">"file"</span><span class="w"> </span><span class="n">accept</span><span class="o">=</span><span class="s">"video/*"</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"> </span><span class="o">&lt;!--</span><span class="w"> </span><span class="kr">all</span><span class="w"> </span><span class="n">video</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="o">--&gt;</span>
</pre></div>

<p>W3C <strong>recommends</strong> authors to specify both MIME-types and their corresponding
extensions in the <code>accept</code> attribute. So, the <strong>best</strong> approach is:  </p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;!--</span><span class="w"> </span><span class="kr">Right</span><span class="w"> </span><span class="n">approach</span><span class="o">:</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">corresponding</span><span class="w"> </span><span class="n">MIME</span><span class="o">-</span><span class="n">types</span><span class="p">.</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="o">&lt;!--</span><span class="w"> </span><span class="p">(</span><span class="n">IE</span><span class="w"> </span><span class="mi">10</span><span class="o">+</span><span class="p">,</span><span class="w"> </span><span class="n">Edge</span><span class="w"> </span><span class="p">(</span><span class="n">EdgeHTML</span><span class="p">),</span><span class="w"> </span><span class="n">Edge</span><span class="w"> </span><span class="p">(</span><span class="n">Chromium</span><span class="p">),</span><span class="w"> </span><span class="n">Chrome</span><span class="p">,</span><span class="w"> </span><span class="n">Firefox</span><span class="p">)</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="kr">type</span><span class="o">=</span><span class="s">"file"</span>
<span class="w"> </span><span class="n">accept</span><span class="o">=</span><span class="s">".xls,.xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<p>JSFiddle of the same: here.  </p>
<p><strong>Reference:</strong> List of MIME-types  </p>
<p><strong>IMPORTANT:</strong> Using the <code>accept</code> attribute only provides a way of filtering
in the files of types that are of interest. Browsers still allow users to
choose files of any type. Additional (client-side) checks should be done
(using JavaScript, one way would be this), and definitely file types <em><strong>MUST
be verified on the server</strong></em> , using a combination of MIME-type using both the
file extension and its binary signature (ASP.NET, PHP, Ruby, Java). You might
also want to refer to these tables for file types and their magic numbers, to
perform a more robust server-side verification.  </p>
<p>Here are three good reads on file-uploads and security.</p>
<p><strong>EDIT:</strong> Maybe file type verification using its binary signature can also be
done on client side using JavaScript (rather than just by looking at the
extension) using HTML5 File API, but still, the file must be verified on the
server, because a malicious user will still be able to upload files by making
a custom HTTP request.</p>
<p><br></p>
<h3>Suggest</h3>
<p>There is the accept attribute for the input tag. However, it is not reliable
in any way. Browsers most likely treat it as a "suggestion", meaning the user
will, depending on the file manager as well, have a pre-selection that only
displays the desired types. They can still choose "all files" and upload any
file they want.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"file"</span><span class="w"> </span><span class="na">name=</span><span class="s">"pic"</span><span class="w"> </span><span class="na">id=</span><span class="s">"pic"</span><span class="w"> </span><span class="na">accept=</span><span class="s">"image/gif, image/jpeg"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>Read more in the HTML5 spec</p>
<p>Keep in mind that it is only to be used as a "help" for the user to find the
right files. Every user can send any request he/she wants to your server. You
always have to validated everything server-side.</p>
<p>So the answer is: <strong>no</strong> you <em>cannot restrict</em> , but you <em>can</em> set a pre-
selection but you <em>cannot</em> rely on it.</p>
<p>Alternatively or additionally you can do something similar by checking the
filename (value of the input field) with JavaScript, but this is nonsense
because it provides no protection and also does not ease the selection for the
user. It only potentially tricks a webmaster into thinking he/she is protected
and opens a security hole. It can be a pain in the ass for users that have
alternative file extensions (for example jpeg instead of jpg), uppercase, or
no file extensions whatsoever (as is common on Linux systems).</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/file/" rel="tag">file</a></li>
            <li><a class="tag p-category" href="../../categories/html/" rel="tag">html</a></li>
            <li><a class="tag p-category" href="../../categories/types/" rel="tag">types</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../getting-a-list-of-all-subdirectories-in-the-current-directory/" rel="prev" title="Getting a list of all subdirectories in the current directory">Previous post</a>
            </li>
            <li class="next">
                <a href="../check-if-an-element-contains-a-class-in-javascript/" rel="next" title="Check if an element contains a class in JavaScript?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
