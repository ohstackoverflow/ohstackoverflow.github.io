<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Virtual/pure virtual explained | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/virtual-pure-virtual-explained/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../what-s-the-difference-between-process-cwd-vs-dirname/" title="What's the difference between process.cwd() vs __dirname?" type="text/html">
<link rel="next" href="../how-can-i-search-git-branches-for-a-file-or-directory/" title="How can I search Git branches for a file or directory?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Virtual/pure virtual explained">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/virtual-pure-virtual-explained/">
<meta property="og:description" content="What exactly does it mean if a function is defined as virtual and is that the
same as pure virtual?

Answer
From Wikipedia's Virtual function ...

In object-oriented programming, in languages such as ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T17:02:07+08:00">
<meta property="article:tag" content="c++">
<meta property="article:tag" content="virtual">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Virtual/pure virtual explained</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:02:07+08:00" itemprop="datePublished" title="2023-03-03 17:02">2023-03-03 17:02</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>What exactly does it mean if a function is defined as virtual and is that the
same as pure virtual?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From Wikipedia's Virtual function ...</p>
<blockquote>
<p>In object-oriented programming, in languages such as C++, and Object Pascal,
a virtual function or virtual method is an inheritable and overridable
function or method for which dynamic dispatch is facilitated. This concept
is an important part of the (runtime) polymorphism portion of object-
oriented programming (OOP). In short, a virtual function defines a target
function to be executed, but the target might not be known at compile time.</p>
</blockquote>
<p>Unlike a non-virtual function, when a virtual function is overridden the most-
derived version is used at all levels of the class hierarchy, rather than just
the level at which it was created. Therefore if one method of the base class
<em>calls</em> a virtual method, the version defined in the derived class will be
used instead of the version defined in the base class.</p>
<p>This is in contrast to non-virtual functions, which can still be overridden in
a derived class, but the "new" version will only be used by the derived class
and below, but will not change the functionality of the base class at all.</p>
<p>whereas..</p>
<blockquote>
<p>A pure virtual function or pure virtual method is a virtual function that is
required to be implemented by a derived class if the derived class is not
abstract.</p>
</blockquote>
<p>When a pure virtual method exists, the class is "abstract" and can not be
instantiated on its own. Instead, a derived class that implements the pure-
virtual method(s) must be used. A pure-virtual isn't defined in the base-class
at all, so a derived class <em>must</em> define it, or that derived class is also
abstract, and can not be instantiated. Only a class that has no abstract
methods can be instantiated.</p>
<p>A virtual provides a way to override the functionality of the base class, and
a pure-virtual <em>requires</em> it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I'd like to comment on Wikipedia's definition of virtual, as repeated by
several here. [At the time this answer was written,] Wikipedia defined a
virtual method as one that can be overridden in subclasses. [Fortunately,
Wikipedia has been edited since, and it now explains this correctly.] That is
incorrect: any method, not just virtual ones, can be overridden in subclasses.
What virtual does is to give you polymorphism, that is, the <strong>ability to
select at run-time the most-derived override of a method</strong>.</p>
<p>Consider the following code:</p>
<div class="code"><pre class="code literal-block"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>

<span class="kr">class</span><span class="w"> </span><span class="nc">Base</span><span class="w"> </span><span class="p">{</span>
<span class="kr">public</span><span class="o">:</span>
<span class="w">    </span><span class="kr">void</span><span class="w"> </span><span class="n">NonVirtual</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Base NonVirtual called.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kr">virtual</span><span class="w"> </span><span class="kr">void</span><span class="w"> </span><span class="n">Virtual</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Base Virtual called.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
<span class="kr">class</span><span class="w"> </span><span class="nc">Derived</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kr">public</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="p">{</span>
<span class="kr">public</span><span class="o">:</span>
<span class="w">    </span><span class="kr">void</span><span class="w"> </span><span class="n">NonVirtual</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Derived NonVirtual called.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kr">void</span><span class="w"> </span><span class="n">Virtual</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Derived Virtual called.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="kr">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Base</span><span class="o">*</span><span class="w"> </span><span class="n">bBase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Base</span><span class="p">();</span>
<span class="w">    </span><span class="n">Base</span><span class="o">*</span><span class="w"> </span><span class="n">bDerived</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Derived</span><span class="p">();</span>

<span class="w">    </span><span class="n">bBase</span><span class="o">-&gt;</span><span class="n">NonVirtual</span><span class="p">();</span>
<span class="w">    </span><span class="n">bBase</span><span class="o">-&gt;</span><span class="n">Virtual</span><span class="p">();</span>
<span class="w">    </span><span class="n">bDerived</span><span class="o">-&gt;</span><span class="n">NonVirtual</span><span class="p">();</span>
<span class="w">    </span><span class="n">bDerived</span><span class="o">-&gt;</span><span class="n">Virtual</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>

<p>What is the output of this program?</p>
<div class="code"><pre class="code literal-block">Base NonVirtual called.
Base Virtual called.
Base NonVirtual called.
Derived Virtual called.
</pre></div>

<p>Derived overrides every method of Base: not just the virtual one, but also the
non-virtual.</p>
<p>We see that when you have a Base-pointer-to-Derived (bDerived), calling
NonVirtual calls the Base class implementation. This is resolved at compile-
time: the compiler sees that bDerived is a Base*, that NonVirtual is not
virtual, so it does the resolution on class Base.</p>
<p>However, calling Virtual calls the Derived class implementation. Because of
the keyword virtual, the selection of the method happens at <em>run-time</em> , not
compile-time. What happens here at compile-time is that the compiler sees that
this is a Base*, and that it's calling a virtual method, so it insert a call
to the vtable instead of class Base. This vtable is instantiated at run-time,
hence the run-time resolution to the most-derived override.</p>
<p>I hope this wasn't too confusing. In short, any method can be overridden, but
only virtual methods give you polymorphism, that is, run-time selection of the
most derived override. In practice, however, overriding a non-virtual method
is considered bad practice and rarely used, so many people (including whoever
wrote that Wikipedia article) think that only virtual methods can be
overridden.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/c%2B%2B/" rel="tag">c++</a></li>
            <li><a class="tag p-category" href="../../categories/virtual/" rel="tag">virtual</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../what-s-the-difference-between-process-cwd-vs-dirname/" rel="prev" title="What's the difference between process.cwd() vs __dirname?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-can-i-search-git-branches-for-a-file-or-directory/" rel="next" title="How can I search Git branches for a file or directory?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
