<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What's the difference between HEAD, working tree and index, in Git? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-s-the-difference-between-head-working-tree-and-index-in-git/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-run-a-program-with-commandline-arguments-using-gdb-within-a-bash-script/" title="How do I run a program with commandline arguments using GDB within a Bash script?" type="text/html">
<link rel="next" href="../how-to-convert-milliseconds-to-x-mins-x-seconds-in-java/" title='How to convert Milliseconds to "X mins, x seconds" in Java?' type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What's the difference between HEAD, working tree and index, in Git?">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-s-the-difference-between-head-working-tree-and-index-in-git/">
<meta property="og:description" content="Can someone tell me the difference between HEAD, working tree and index, in
Git?
From what I understand, they are all names for different branches. Is my
assumption correct?
I found this:

A single gi">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T23:12:48+08:00">
<meta property="article:tag" content="git">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What's the difference between HEAD, working tree and index, in Git?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T23:12:48+08:00" itemprop="datePublished" title="2023-02-17 23:12">2023-02-17 23:12</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Can someone tell me the difference between HEAD, working tree and index, in
Git?</p>
<p>From what I understand, they are all names for different branches. Is my
assumption correct?</p>
<p>I found this:</p>
<blockquote>
<p>A single git repository can track an arbitrary number of branches, but your
working tree is associated with just one of them (the "current" or "checked
out" branch), and HEAD points to that branch.</p>
</blockquote>
<p>Does this mean that HEAD and working tree are always the same?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A few other good references on those topics:</p>
<ul>
<li>My Git Workflow</li>
</ul>
<p><img alt="workflow" src="../../images/cZkcV.jpg"></p>
<blockquote>
<p>I use the index as a <em>checkpoint</em>.</p>
<p>When I'm about to make a change that might go awry — when I want to explore
some direction that I'm not sure if I can follow through on or even whether
it's a good idea, such as a conceptually demanding refactoring or changing a
representation type — I checkpoint my work into the index.</p>
<p>If this is the first change I've made since my last commit, then I can use
the local repository as a checkpoint, but often I've got one conceptual
change that I'm implementing as a set of little steps.<br>
 I want to checkpoint after each step, but save the commit until I've gotten
back to working, tested code.</p>
<p>Notes:</p>
<ol>
<li>
<p>the <strong>workspace</strong> is the directory tree of (source) files that you see
and edit.</p>
</li>
<li>
<p>The <strong>index</strong> is a single, large, binary file in
<code>&lt;baseOfRepo&gt;/.git/index</code>, which lists all files in the current branch,
their <em>sha1</em> checksums, time stamps and the file name -- it is not another
directory with a copy of files in it.</p>
</li>
<li>
<p>The <strong>local repository</strong> is a hidden directory (<code>.git</code>) including an
<code>objects</code> directory containing all versions of every file in the repo (local
branches and copies of remote branches) as a compressed "blob" file.</p>
</li>
</ol>
<p>Don't think of the four 'disks' represented in the image above as separate
copies of the repo files.</p>
</blockquote>
<ul>
<li>Why Git is better than X</li>
</ul>
<p><img alt="3 states" src="../../images/CYO5D.jpg"></p>
<ul>
<li>Git Is Your Friend not a Foe Vol. 3: Refs and Index</li>
</ul>
<blockquote>
<p>They are basically named references for Git commits. There are two major
types of refs: tags and heads.</p>
<ul>
<li>Tags are fixed references that mark a specific point in history, for
example v2.6.29.</li>
<li>On the contrary, heads are always moved to reflect the current position
of project development.
</li>
</ul>
<p><img alt="commits" src="../../images/ipLiO.jpg"></p>
</blockquote>
<p>(note: as commented by Timo Huovinen, those arrows are not what the commits
point to, it's the <strong>workflow order</strong> , basically showing arrows as <code>1 -&gt; 2 -&gt;
3 -&gt; 4</code> where <code>1</code> is the first commit and <code>4</code> is the last)</p>
<blockquote>
<p>Now we know what is happening in the project.<br>
 But to know what is happening right here, right now there is a special
reference called HEAD. It serves two major purposes:</p>
<ul>
<li>it tells Git which commit to take files from when you checkout, and</li>
<li>it tells Git where to put new commits when you commit.
</li>
</ul>
<p>When you run <code>git checkout ref</code> it points <code>HEAD</code> to the ref you’ve
designated and extracts files from it. When you run <code>git commit</code> it creates
a new commit object, which becomes a child of current <code>HEAD</code>. Normally
<code>HEAD</code> points to one of the heads, so everything works out just fine.</p>
<p><img alt="checkout" src="../../images/u2kuU.jpg"></p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>The difference between <strong>HEAD</strong> (current branch or last committed state on
current branch), <strong>index</strong> (aka. staging area) and <strong>working tree</strong> (the state
of <em>files</em> in checkout) is described in "The Three States" section of the "1.3
Git Basics" chapter of Pro Git book by Scott Chacon (Creative Commons
licensed).</p>
<p>Here is the image illustrating it from this chapter:</p>
<p><img alt="Local Operations - working directory vs. staging area (index) vs git
repository (HEAD)" src="../../images/NxTUz.png"></p>
<p>In the above image "working directory" is the same as "working tree", the
"staging area" is an alternate name for git "index", and <strong>HEAD</strong> points to
currently checked out branch, which tip points to last commit in the "git
directory (repository)"</p>
<p>Note that <code>git commit -a</code> would stage changes and commit in one step.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/git/" rel="tag">git</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-run-a-program-with-commandline-arguments-using-gdb-within-a-bash-script/" rel="prev" title="How do I run a program with commandline arguments using GDB within a Bash script?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-convert-milliseconds-to-x-mins-x-seconds-in-java/" rel="next" title='How to convert Milliseconds to "X mins, x seconds" in Java?'>Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
