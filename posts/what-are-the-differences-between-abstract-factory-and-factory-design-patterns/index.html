<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What are the differences between Abstract Factory and Factory design patterns? | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/what-are-the-differences-between-abstract-factory-and-factory-design-patterns/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../is-javascript-s-new-keyword-considered-harmful/" title="Is JavaScript's &quot;new&quot; keyword considered harmful?" type="text/html">
<link rel="next" href="../find-full-path-of-the-python-interpreter/" title="Find full path of the Python interpreter?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="What are the differences between Abstract Factory and Factory design p">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/what-are-the-differences-between-abstract-factory-and-factory-design-patterns/">
<meta property="og:description" content="I know there are many posts out there about the differences between these two
patterns, but there are a few things that I cannot find.
From what I have been reading, I see that the factory method patt">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-18T01:39:55+08:00">
<meta property="article:tag" content="abstract-factory">
<meta property="article:tag" content="design-patterns">
<meta property="article:tag" content="factory-method">
<meta property="article:tag" content="factory-pattern">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What are the differences between Abstract Factory and Factory design patterns?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:39:55+08:00" itemprop="datePublished" title="2023-02-18 01:39">2023-02-18 01:39</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I know there are many posts out there about the differences between these two
patterns, but there are a few things that I cannot find.</p>
<p>From what I have been reading, I see that the factory method pattern allows
you to define how to create a single concrete product but hiding the
implementation from the client as they will see a generic product. My first
question is about the abstract factory. Is its role to allow you to create
families of concrete objects in (that can depend on what specific factory you
use) rather than just a single concrete object? Does the abstract factory only
return one very large object or many objects depending on what methods you
call?</p>
<p>My final two questions are about a single quote that I cannot fully understand
that I have seen in numerous places:</p>
<blockquote>
<p>One difference between the two is that with the Abstract Factory pattern, a
class delegates the responsibility of object instantiation to another object
via composition whereas the Factory Method pattern uses inheritance and
relies on a subclass to handle the desired object instantiation.</p>
</blockquote>
<p>My understanding is that the factory method pattern has a Creator interface
that will make the ConcreteCreator be in charge of knowing which
ConcreteProduct to instantiate. Is this what it means by using inheritance to
handle object instantiation?</p>
<p>Now with regards to that quote, how exactly does the Abstract Factory pattern
delegate the responsibility of object instantiation to another object via
composition? What does this mean? It looks like the Abstract Factory pattern
also uses inheritance to do the construction process as well in my eyes, but
then again I am still learning about these patterns.</p>
<p>Any help especially with the last question, would be greatly appreciated.</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>The Difference Between The Two</h3>
<p>The main difference between a "factory method" and an "abstract factory" is
that the factory method is a method, and an abstract factory is an object. I
think a lot of people get these two terms confused, and start using them
interchangeably. I remember that I had a hard time finding exactly what the
difference was when I learnt them.</p>
<p>Because the factory method is just a method, it can be overridden in a
subclass, hence the second half of your quote:</p>
<blockquote>
<p>... the Factory Method pattern uses inheritance and relies on a subclass to
handle the desired object instantiation.</p>
</blockquote>
<p>The quote assumes that an object is calling <em>its own</em> factory method here.
Therefore the only thing that could change the return value would be a
subclass.</p>
<p>The abstract factory is an object that has multiple factory methods on it.
Looking at the first half of your quote:</p>
<blockquote>
<p>... with the Abstract Factory pattern, a class delegates the responsibility
of object instantiation to another object via composition ...</p>
</blockquote>
<p>What they're saying is that there is an object A, who wants to make a Foo
object. Instead of making the Foo object itself (e.g., with a factory method),
it's going to get a <em>different</em> object (the abstract factory) to create the
Foo object.</p>
<h3>Code Examples</h3>
<p>To show you the difference, here is a factory method in use:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">doSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">makeFoo</span><span class="p">();</span>
<span class="w">        </span><span class="n">f</span><span class="o">.</span><span class="n">whatever</span><span class="p">();</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">protected</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">makeFoo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RegularFoo</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">protected</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">makeFoo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="n">subclass</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">overriding</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="n">method</span><span class="w"> </span>
<span class="w">        </span><span class="o">//</span><span class="n">to</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">different</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SpecialFoo</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>And here is an abstract factory in use:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">Factory</span><span class="w"> </span><span class="n">factory</span><span class="p">;</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">Factory</span><span class="w"> </span><span class="n">factory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">factory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">doSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="n">The</span><span class="w"> </span><span class="n">concrete</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="s2">"f"</span><span class="w"> </span><span class="n">depends</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">concrete</span><span class="w"> </span><span class="k">class</span>
<span class="w">        </span><span class="o">//</span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">factory</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">constructor</span><span class="o">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">a</span>
<span class="w">        </span><span class="o">//</span><span class="n">different</span><span class="w"> </span><span class="n">factory</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">object</span><span class="o">.</span>
<span class="w">        </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="o">.</span><span class="n">makeFoo</span><span class="p">();</span>
<span class="w">        </span><span class="n">f</span><span class="o">.</span><span class="n">whatever</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">interface</span><span class="w"> </span><span class="n">Factory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Foo</span><span class="w"> </span><span class="n">makeFoo</span><span class="p">();</span>
<span class="w">    </span><span class="n">Bar</span><span class="w"> </span><span class="n">makeBar</span><span class="p">();</span>
<span class="w">    </span><span class="n">Aycufcn</span><span class="w"> </span><span class="n">makeAmbiguousYetCommonlyUsedFakeClassName</span><span class="p">();</span>
<span class="p">}</span>

<span class="o">//</span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">concrete</span><span class="w"> </span><span class="n">factories</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s2">"Factory"</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">here</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>Abstract factory</strong> creates a base class with abstract methods defining
methods for the objects that should be created. Each factory class which
derives the base class can create their own implementation of each object
type.</p>
<p><img alt="enter image description
here" src="https://upload.wikimedia.org/wikipedia/commons/b/b8/AbstractFactory.png"></p>
<p><strong>Factory method</strong> is just a simple method used to create objects in a class.
It's usually added in the aggregate root (The <code>Order</code> class has a method
called <code>CreateOrderLine</code>)</p>
<p><img alt="enter image description
here" src="https://upload.wikimedia.org/wikipedia/commons/e/ed/Factory_Method_UML_class_diagram.png"></p>
<h3>Abstract factory</h3>
<p>In the example below we design an interface so that we can decouple queue
creation from a messaging system and can therefore create implementations for
different queue systems without having to change the code base.</p>
<div class="code"><pre class="code literal-block"><span class="nv">interface</span><span class="w"> </span><span class="nv">IMessageQueueFactory</span>
{
<span class="w">  </span><span class="nv">IMessageQueue</span><span class="w"> </span><span class="nv">CreateOutboundQueue</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">  </span><span class="nv">IMessageQueue</span><span class="w"> </span><span class="nv">CreateReplyQueue</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span><span class="c1">;</span>
}

<span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">AzureServiceBusQueueFactory</span><span class="w"> </span>:<span class="w"> </span><span class="nv">IMessageQueueFactory</span>
{
<span class="w">      </span><span class="nv">IMessageQueue</span><span class="w"> </span><span class="nv">CreateOutboundQueue</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span>
<span class="w">      </span>{
<span class="w">           </span><span class="o">//</span><span class="nv">init</span><span class="w"> </span><span class="nv">queue</span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">AzureMessageQueue</span><span class="ss">(</span><span class="cm">/*....*/</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">      </span>}

<span class="w">      </span><span class="nv">IMessageQueue</span><span class="w"> </span><span class="nv">CreateReplyQueue</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span>
<span class="w">      </span>{
<span class="w">           </span><span class="o">//</span><span class="nv">init</span><span class="w"> </span><span class="nv">response</span><span class="w"> </span><span class="nv">queue</span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">AzureResponseMessageQueue</span><span class="ss">(</span><span class="cm">/*....*/</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">      </span>}

}

<span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">MsmqFactory</span><span class="w"> </span>:<span class="w"> </span><span class="nv">IMessageQueueFactory</span>
{
<span class="w">      </span><span class="nv">IMessageQueue</span><span class="w"> </span><span class="nv">CreateOutboundQueue</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span>
<span class="w">      </span>{
<span class="w">           </span><span class="o">//</span><span class="nv">init</span><span class="w"> </span><span class="nv">queue</span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">MsmqMessageQueue</span><span class="ss">(</span><span class="cm">/*....*/</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">      </span>}

<span class="w">      </span><span class="nv">IMessageQueue</span><span class="w"> </span><span class="nv">CreateReplyQueue</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span>
<span class="w">      </span>{
<span class="w">           </span><span class="o">//</span><span class="nv">init</span><span class="w"> </span><span class="nv">response</span><span class="w"> </span><span class="nv">queue</span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">MsmqResponseMessageQueue</span><span class="ss">(</span><span class="cm">/*....*/</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">      </span>}
}
</pre></div>

<h3>Factory method</h3>
<p>The problem in HTTP servers is that we always need an response for every
request.</p>
<div class="code"><pre class="code literal-block">public interface IHttpRequest
{
    // .. all other methods ..

    IHttpResponse CreateResponse(int httpStatusCode);
}
</pre></div>

<p>Without the factory method, the HTTP server users (i.e. programmers) would be
forced to use implementation specific classes which defeat the purpose of the
<code>IHttpRequest</code> interface.</p>
<p>Therefore we introduce the factory method so that the creation of the response
class also is abstracted away.</p>
<h3>Summary</h3>
<p>The difference is that the <strong>intended purpose</strong> of the class containing a
factory method <strong>is not to create objects</strong> , while an abstract factory should
only be used to create objects.</p>
<p>One should take care when using factory methods since it's easy to break the
LSP (Liskov Substitution principle) when creating objects.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/abstract-factory/" rel="tag">abstract-factory</a></li>
            <li><a class="tag p-category" href="../../categories/design-patterns/" rel="tag">design-patterns</a></li>
            <li><a class="tag p-category" href="../../categories/factory-method/" rel="tag">factory-method</a></li>
            <li><a class="tag p-category" href="../../categories/factory-pattern/" rel="tag">factory-pattern</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../is-javascript-s-new-keyword-considered-harmful/" rel="prev" title="Is JavaScript's &quot;new&quot; keyword considered harmful?">Previous post</a>
            </li>
            <li class="next">
                <a href="../find-full-path-of-the-python-interpreter/" rel="next" title="Find full path of the Python interpreter?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
