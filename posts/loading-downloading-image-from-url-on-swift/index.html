<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Loading/Downloading image from URL on Swift | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/loading-downloading-image-from-url-on-swift/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../can-anonymous-class-implement-interface/" title="Can anonymous class implement interface?" type="text/html">
<link rel="next" href="../how-can-i-add-a-border-to-a-widget-in-flutter/" title="How can I add a border to a widget in Flutter?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Loading/Downloading image from URL on Swift">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/loading-downloading-image-from-url-on-swift/">
<meta property="og:description" content="I'd like to load an image from a URL in my application, so I first tried with
Objective-C and it worked, however, with Swift, I've a compilation error:

'imageWithData' is unavailable: use object cons">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T04:48:25+08:00">
<meta property="article:tag" content="ios">
<meta property="article:tag" content="nsurl">
<meta property="article:tag" content="swift">
<meta property="article:tag" content="uiimage">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Loading/Downloading image from URL on Swift</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:48:25+08:00" itemprop="datePublished" title="2023-03-03 04:48">2023-03-03 04:48</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I'd like to load an image from a URL in my application, so I first tried with
Objective-C and it worked, however, with Swift, I've a compilation error:</p>
<blockquote>
<p>'imageWithData' is unavailable: use object construction 'UIImage(data:)'</p>
</blockquote>
<p>My function:</p>
<div class="code"><pre class="code literal-block"><span class="err">@</span><span class="n">IBOutlet</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">imageView</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">UIImageView</span>

<span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="n">NSURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NSURL</span><span class="o">.</span><span class="n">URLWithString</span><span class="p">(</span><span class="s2">"http://myURL/ios8.png"</span><span class="p">)</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">data</span><span class="p">:</span><span class="n">NSData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NSData</span><span class="o">.</span><span class="n">dataWithContentsOfURL</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">)</span>

<span class="w">    </span><span class="n">imageView</span><span class="o">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIImage</span><span class="o">.</span><span class="n">imageWithData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">//</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">here</span>
<span class="p">}</span>
</pre></div>

<p>In Objective-C:</p>
<div class="code"><pre class="code literal-block"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">];</span>

<span class="w">    </span><span class="bp">NSURL</span><span class="w"> </span><span class="o">*</span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSURL</span><span class="w"> </span><span class="n">URLWithString</span><span class="o">:</span><span class="p">(</span><span class="s">@"http://myURL/ios8.png"</span><span class="p">)];</span>
<span class="w">    </span><span class="bp">NSData</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSData</span><span class="w"> </span><span class="n">dataWithContentsOfURL</span><span class="o">:</span><span class="n">url</span><span class="p">];</span>

<span class="w">    </span><span class="n">_imageView</span><span class="p">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">UIImage</span><span class="w"> </span><span class="n">imageWithData</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">];</span>
<span class="w">    </span><span class="n">_labelURL</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@"http://www.quentinroussat.fr/assets/img/iOS%20icon's%20Style/ios8.png"</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>

<p>Can someone please explain me why the <code>imageWithData:</code> doesn't work with
Swift, and how can I solve the problem.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Xcode 8 or later • Swift 3 or later</strong></p>
<p><strong>Synchronously:</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Bundle</span>.<span class="nv">main</span>.<span class="nv">path</span><span class="ss">(</span><span class="nv">forResource</span>:<span class="w"> </span><span class="s2">"imageName"</span>,<span class="w"> </span><span class="nv">ofType</span>:<span class="w"> </span><span class="s2">"jpg"</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIImage</span><span class="ss">(</span><span class="nv">contentsOfFile</span>:<span class="w"> </span><span class="nv">filePath</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">imageView</span>.<span class="nv">contentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>.<span class="nv">scaleAspectFit</span>
<span class="w">    </span><span class="nv">imageView</span>.<span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">image</span>
}
</pre></div>

<p><strong>Asynchronously:</strong></p>
<p><strong>Create a method with a completion handler to get the image data from your
url</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">func</span><span class="w"> </span><span class="n">getData</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="n">URL</span><span class="p">,</span><span class="w"> </span><span class="n">completion</span><span class="p">:</span><span class="w"> </span><span class="err">@</span><span class="n">escaping</span><span class="w"> </span><span class="p">(</span><span class="n">Data</span><span class="err">?</span><span class="p">,</span><span class="w"> </span><span class="n">URLResponse</span><span class="err">?</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="err">?</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">URLSession</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">completionHandler</span><span class="p">:</span><span class="w"> </span><span class="n">completion</span><span class="p">)</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>

<p><strong>Create a method to download the image (start the task)</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">func</span><span class="w"> </span><span class="nf">downloadImage</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="o">:</span><span class="w"> </span><span class="n">URL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s">"Download Started"</span><span class="p">)</span>
<span class="w">    </span><span class="n">getData</span><span class="p">(</span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">in</span>
<span class="w">        </span><span class="n">guard</span><span class="w"> </span><span class="n">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">nil</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">print</span><span class="p">(</span><span class="n">response</span><span class="o">?</span><span class="p">.</span><span class="n">suggestedFilename</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="n">url</span><span class="p">.</span><span class="n">lastPathComponent</span><span class="p">)</span>
<span class="w">        </span><span class="n">print</span><span class="p">(</span><span class="s">"Download Finished"</span><span class="p">)</span>
<span class="w">        </span><span class="c1">// always update the UI from the main thread</span>
<span class="w">        </span><span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="k">weak</span><span class="w"> </span><span class="nb">self</span><span class="p">]</span><span class="w"> </span><span class="k">in</span>
<span class="w">            </span><span class="nb">self</span><span class="o">?</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">UIImage</span><span class="p">(</span><span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Usage:</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"Begin of code"</span><span class="p">)</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.arstechnica.net/wp-content/uploads/2018/06/macOS-Mojave-Dynamic-Wallpaper-transition.jpg"</span><span class="p">)</span><span class="o">!</span><span class="w"> </span>
<span class="w">    </span><span class="n">downloadImage</span><span class="p">(</span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p">)</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"End of code. The image will continue downloading in the background and it will be loaded when it ends."</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<hr>
<p><strong>Extension</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="n">extension</span><span class="w"> </span><span class="bp">UIImageView</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">func</span><span class="w"> </span><span class="nf">downloaded</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="o">:</span><span class="w"> </span><span class="n">URL</span><span class="p">,</span><span class="w"> </span><span class="n">contentMode</span><span class="w"> </span><span class="n">mode</span><span class="o">:</span><span class="w"> </span><span class="n">ContentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">scaleAspectFit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">contentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mode</span>
<span class="w">        </span><span class="n">URLSession</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="o">:</span><span class="w"> </span><span class="n">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">in</span>
<span class="w">            </span><span class="n">guard</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">httpURLResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">as</span><span class="o">?</span><span class="w"> </span><span class="n">HTTPURLResponse</span><span class="p">,</span><span class="w"> </span><span class="n">httpURLResponse</span><span class="p">.</span><span class="n">statusCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">mimeType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="o">?</span><span class="p">.</span><span class="n">mimeType</span><span class="p">,</span><span class="w"> </span><span class="n">mimeType</span><span class="p">.</span><span class="n">hasPrefix</span><span class="p">(</span><span class="s">"image"</span><span class="p">),</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">UIImage</span><span class="p">(</span><span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
<span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="k">weak</span><span class="w"> </span><span class="nb">self</span><span class="p">]</span><span class="w"> </span><span class="k">in</span>
<span class="w">                </span><span class="nb">self</span><span class="o">?</span><span class="p">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">image</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}.</span><span class="n">resume</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">func</span><span class="w"> </span><span class="nf">downloaded</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">link</span><span class="o">:</span><span class="w"> </span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">contentMode</span><span class="w"> </span><span class="n">mode</span><span class="o">:</span><span class="w"> </span><span class="n">ContentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">scaleAspectFit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="n">guard</span><span class="w"> </span><span class="n">let</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span><span class="w"> </span><span class="n">link</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">downloaded</span><span class="p">(</span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">contentMode</span><span class="o">:</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Usage:</p>
<div class="code"><pre class="code literal-block"><span class="n">imageView</span><span class="o">.</span><span class="n">downloaded</span><span class="p">(</span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.arstechnica.net/wp-content/uploads/2018/06/macOS-Mojave-Dynamic-Wallpaper-transition.jpg"</span><span class="p">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>(Swift 4 update)</strong> To answer the original question directly, here's the
swift equivalent of the posted Objective-C snippet.</p>
<div class="code"><pre class="code literal-block"><span class="nv">let</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">URL</span><span class="ss">(</span><span class="nv">string</span>:<span class="w"> </span><span class="nv">image</span>.<span class="nv">url</span><span class="ss">)</span>
<span class="nv">let</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">try</span>?<span class="w"> </span><span class="nv">Data</span><span class="ss">(</span><span class="nv">contentsOf</span>:<span class="w"> </span><span class="nv">url</span><span class="o">!</span><span class="ss">)</span><span class="w"> </span><span class="o">//</span><span class="nv">make</span><span class="w"> </span><span class="nv">sure</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">exist</span>,<span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">unwrap</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">try</span><span class="o">-</span><span class="nv">catch</span>
<span class="nv">imageView</span>.<span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIImage</span><span class="ss">(</span><span class="nv">data</span>:<span class="w"> </span><span class="nv">data</span><span class="o">!</span><span class="ss">)</span>
</pre></div>

<hr>
<p><strong>DISCLAIMER:</strong></p>
<p>It's important to note that the <code>Data(contentsOf:)</code> method will download the
contents of the url <strong>synchronously</strong> in the same thread the code is being
executed, so <strong>do not</strong> invoke this in the main thread of your application.</p>
<p>An easy way to make the same code run asynchronously, not blocking the UI, is
by using GCD:</p>
<div class="code"><pre class="code literal-block"><span class="nv">let</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">URL</span><span class="ss">(</span><span class="nv">string</span>:<span class="w"> </span><span class="nv">image</span>.<span class="nv">url</span><span class="ss">)</span>

<span class="nv">DispatchQueue</span>.<span class="nv">global</span><span class="ss">()</span>.<span class="nv">async</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">let</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">try</span>?<span class="w"> </span><span class="nv">Data</span><span class="ss">(</span><span class="nv">contentsOf</span>:<span class="w"> </span><span class="nv">url</span><span class="o">!</span><span class="ss">)</span><span class="w"> </span><span class="o">//</span><span class="nv">make</span><span class="w"> </span><span class="nv">sure</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">exist</span>,<span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">unwrap</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">try</span><span class="o">-</span><span class="nv">catch</span>
<span class="w">    </span><span class="nv">DispatchQueue</span>.<span class="nv">main</span>.<span class="nv">async</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">imageView</span>.<span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIImage</span><span class="ss">(</span><span class="nv">data</span>:<span class="w"> </span><span class="nv">data</span><span class="o">!</span><span class="ss">)</span>
<span class="w">    </span>}
}
</pre></div>

<p>That said, in real life applications, if you want to have the best User
Experience and avoid multiple downloads of the same image, you may want to
also have them not only downloaded, but cached. There's already quite a few
libraries that does that very seamless and they are all really easy to use. I
personally recommend Kingfisher:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">Kingfisher</span>

<span class="n">let</span> <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s2">"url_of_your_image"</span><span class="p">)</span>
<span class="o">//</span> <span class="n">this</span> <span class="n">downloads</span> <span class="n">the</span> <span class="n">image</span> <span class="n">asynchronously</span> <span class="k">if</span> <span class="n">it</span><span class="s1">'s not cached yet</span>
<span class="n">imageView</span><span class="o">.</span><span class="n">kf</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="k">with</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
</pre></div>

<p>And that's it</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/ios/" rel="tag">ios</a></li>
            <li><a class="tag p-category" href="../../categories/nsurl/" rel="tag">nsurl</a></li>
            <li><a class="tag p-category" href="../../categories/swift/" rel="tag">swift</a></li>
            <li><a class="tag p-category" href="../../categories/uiimage/" rel="tag">uiimage</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../can-anonymous-class-implement-interface/" rel="prev" title="Can anonymous class implement interface?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-can-i-add-a-border-to-a-widget-in-flutter/" rel="next" title="How can I add a border to a widget in Flutter?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
