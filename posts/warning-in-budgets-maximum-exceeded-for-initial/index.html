<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>WARNING in budgets, maximum exceeded for initial | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/warning-in-budgets-maximum-exceeded-for-initial/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../why-does-node-js-fs-readfile-return-a-buffer-instead-of-string/" title="Why does Node.js' fs.readFile() return a buffer instead of string?" type="text/html">
<link rel="next" href="../how-do-i-check-whether-an-array-contains-a-string-in-typescript/" title="How do I check whether an array contains a string in TypeScript?" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="WARNING in budgets, maximum exceeded for initial">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/warning-in-budgets-maximum-exceeded-for-initial/">
<meta property="og:description" content="When building my Angular 7 project with --prod, I receive a warning in
budgets.
I have an Angular 7 project. I am trying to build it, but I keep getting the
following warning:
WARNING in budgets, maxi">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T03:53:26+08:00">
<meta property="article:tag" content="angular">
<meta property="article:tag" content="build">
<meta property="article:tag" content="ng-build">
<meta property="article:tag" content="production">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">WARNING in budgets, maximum exceeded for initial</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:53:26+08:00" itemprop="datePublished" title="2023-03-03 03:53">2023-03-03 03:53</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>When building my Angular 7 project with --prod, I receive a warning in
<code>budgets</code>.</p>
<p>I have an Angular 7 project. I am trying to build it, but I keep getting the
following warning:</p>
<div class="code"><pre class="code literal-block"><span class="nv">WARNING</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">budgets</span>,<span class="w"> </span><span class="nv">maximum</span><span class="w"> </span><span class="nv">exceeded</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">initial</span>.<span class="w"> </span><span class="nv">Budget</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">MB</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">exceeded</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="mi">1</span>.<span class="mi">77</span><span class="w"> </span><span class="nv">MB</span>
</pre></div>

<p>These are the chunk details:</p>
<div class="code"><pre class="code literal-block"><span class="n">chunk</span><span class="w"> </span><span class="err">{</span><span class="n">scripts</span><span class="err">}</span><span class="w"> </span><span class="n">scripts</span><span class="mf">.2</span><span class="n">cc9101aa9ed72da1ec4</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="p">(</span><span class="n">scripts</span><span class="p">)</span><span class="w"> </span><span class="mi">154</span><span class="w"> </span><span class="n">kB</span><span class="w">  </span><span class="o">[</span><span class="n">rendered</span><span class="o">]</span>
<span class="n">chunk</span><span class="w"> </span><span class="err">{</span><span class="mi">0</span><span class="err">}</span><span class="w"> </span><span class="n">runtime</span><span class="p">.</span><span class="n">ec2944dd8b20ec099bf3</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="p">(</span><span class="n">runtime</span><span class="p">)</span><span class="w"> </span><span class="mf">1.41</span><span class="w"> </span><span class="n">kB</span><span class="w"> </span><span class="o">[</span><span class="n">entry</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">rendered</span><span class="o">]</span>
<span class="n">chunk</span><span class="w"> </span><span class="err">{</span><span class="mi">1</span><span class="err">}</span><span class="w"> </span><span class="n">main</span><span class="mf">.13</span><span class="n">d1eb792af7c2f359ed</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="p">(</span><span class="n">main</span><span class="p">)</span><span class="w"> </span><span class="mf">3.34</span><span class="w"> </span><span class="n">MB</span><span class="w"> </span><span class="o">[</span><span class="n">initial</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">rendered</span><span class="o">]</span>
<span class="n">chunk</span><span class="w"> </span><span class="err">{</span><span class="mi">2</span><span class="err">}</span><span class="w"> </span><span class="n">polyfills</span><span class="mf">.11</span><span class="n">b1e0c77d01e41acbba</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="p">(</span><span class="n">polyfills</span><span class="p">)</span><span class="w"> </span><span class="mf">58.2</span><span class="w"> </span><span class="n">kB</span><span class="w"> </span><span class="o">[</span><span class="n">initial</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">rendered</span><span class="o">]</span>
<span class="n">chunk</span><span class="w"> </span><span class="err">{</span><span class="mi">3</span><span class="err">}</span><span class="w"> </span><span class="n">styles</span><span class="mf">.33</span><span class="n">b11ad61bf10bb992bb</span><span class="p">.</span><span class="n">css</span><span class="w"> </span><span class="p">(</span><span class="n">styles</span><span class="p">)</span><span class="w"> </span><span class="mi">379</span><span class="w"> </span><span class="n">kB</span><span class="w"> </span><span class="o">[</span><span class="n">initial</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">rendered</span><span class="o">]</span>
</pre></div>

<p>What exactly are budgets? How should I manage them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Open <strong>angular.json</strong> file and find <code>budgets</code> keyword.</p>
<p>It should look like:</p>
<div class="code"><pre class="code literal-block">    "budgets": [
       {
          "type": "initial",
          "maximumWarning": "2mb",
          "maximumError": "5mb"
       }
    ]
</pre></div>

<p>As you’ve probably guessed you can increase the <code>maximumWarning</code> value to
prevent this warning, i.e.:</p>
<div class="code"><pre class="code literal-block">    "budgets": [
       {
          "type": "initial",
          "maximumWarning": "4mb", &lt;===
          "maximumError": "5mb"
       }
    ]
</pre></div>

<h3>What does <strong>budgets</strong> mean?</h3>
<blockquote>
<p>A performance budget is a group of limits to certain values that affect site
performance, that may not be exceeded in the design and development of any
web project.</p>
</blockquote>
<p>In our case budget is the limit for bundle sizes.</p>
<p>See also:</p>
<ul>
<li>https://github.com/webpack/webpack/issues/3216</li>
<li>https://angular.io/guide/build#configure-size-budgets</li>
<li>Performance Budgets (Keep Request Counts Low And File Sizes Small)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p><strong>What is Angular CLI Budgets?</strong> Budgets is one of the less known features of
the Angular CLI. It’s a rather small but a very neat feature!</p>
<p><em>As applications grow in functionality, they also grow in size. Budgets is a
feature in the Angular CLI which allows you to set budget thresholds in your
configuration to ensure parts of your application stay within boundaries which
you set</em> — <strong>Official Documentation</strong></p>
<p>Or in other words, we can describe our Angular application as a set of
compiled JavaScript files called bundles which are produced by the build
process. Angular budgets allows us to configure expected sizes of these
bundles. More so, we can configure thresholds for conditions when we want to
receive a warning or even fail build with an error if the bundle size gets too
out of control!</p>
<p><strong>How To Define A Budget?</strong> Angular budgets are defined in the angular.json
file. Budgets are defined per project which makes sense because every app in a
workspace has different needs.</p>
<p><em>Thinking pragmatically, it only makes sense to define budgets for the
production builds. Prod build creates bundles with “true size” after applying
all optimizations like tree-shaking and code minimization.</em></p>
<p>Oops, a build error! The maximum bundle size was exceeded. This is a great
signal that tells us that something went wrong…</p>
<ol>
<li>We might have experimented in our feature and didn’t clean up properly</li>
<li>Our tooling can go wrong and perform a bad auto-import, or we pick bad item from the suggested list of imports</li>
<li>We might import stuff from lazy modules in inappropriate locations</li>
<li>Our new feature is just really big and doesn’t fit into existing budgets</li>
</ol>
<p><strong>First Approach: Are your files gzipped?</strong></p>
<p>Generally speaking, gzipped file has only about 20% the size of the original
file, which can drastically decrease the initial load time of your app. To
check if you have gzipped your files, just open the network tab of developer
console. In the “Response Headers”, if you should see “Content-Encoding:
gzip”, you are good to go.</p>
<p><strong>How to gzip?</strong> If you host your Angular app in most of the cloud platforms
or CDN, you should not worry about this issue as they probably have handled
this for you. However, if you have your own server (such as NodeJS +
expressJS) serving your Angular app, definitely check if the files are
gzipped. The following is an example to gzip your static assets in a NodeJS +
expressJS app. You can hardly imagine this dead simple middleware
“compression” would reduce your bundle size from 2.21MB to 495.13KB.</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">compression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'compression'</span><span class="p">)</span>
<span class="k">const</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">)</span>
<span class="k">const</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">express</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">compression</span><span class="p">())</span>
</pre></div>

<p><strong>Second Approach:: Analyze your Angular bundle</strong></p>
<p>If your bundle size does get too big you may want to analyze your bundle
because you may have used an inappropriate large-sized third party package or
you forgot to remove some package if you are not using it anymore. Webpack has
an amazing feature to give us a visual idea of the composition of a webpack
bundle.</p>
<p><img alt="enter image description here" src="../../images/CBS3C.png"></p>
<p>It’s super easy to get this graph.</p>
<ol>
<li><code>npm install -g webpack-bundle-analyzer</code></li>
<li>In your Angular app, run <code>ng build --stats-json</code> (don’t use flag <code>--prod</code>). By enabling <code>--stats-json</code> you will get an additional file stats.json</li>
<li>Finally, run <code>webpack-bundle-analyzer ./dist/stats.json</code> and your browser will pop up the page at localhost:8888. Have fun with it.</li>
</ol>
<p>ref 1: How Did Angular CLI Budgets Save My Day And How They Can Save Yours</p>
<p>ref 2: Optimize Angular bundle size in 4 steps</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/angular/" rel="tag">angular</a></li>
            <li><a class="tag p-category" href="../../categories/build/" rel="tag">build</a></li>
            <li><a class="tag p-category" href="../../categories/ng-build/" rel="tag">ng-build</a></li>
            <li><a class="tag p-category" href="../../categories/production/" rel="tag">production</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../why-does-node-js-fs-readfile-return-a-buffer-instead-of-string/" rel="prev" title="Why does Node.js' fs.readFile() return a buffer instead of string?">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-do-i-check-whether-an-array-contains-a-string-in-typescript/" rel="next" title="How do I check whether an array contains a string in TypeScript?">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
