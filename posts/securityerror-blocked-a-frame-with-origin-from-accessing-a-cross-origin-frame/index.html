<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SecurityError: Blocked a frame with origin from accessing a cross-origin frame | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/securityerror-blocked-a-frame-with-origin-from-accessing-a-cross-origin-frame/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../differences-between-emacs-and-vim/" title="Differences between Emacs and Vim" type="text/html">
<link rel="next" href="../check-uncheck-checkbox-with-javascript/" title="Check/Uncheck checkbox with JavaScript" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="SecurityError: Blocked a frame with origin from accessing a cross-orig">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/securityerror-blocked-a-frame-with-origin-from-accessing-a-cross-origin-frame/">
<meta property="og:description" content="I am loading an &lt;iframe&gt; in my HTML page and trying to access the elements
within it using JavaScript, but when I try to execute my code, I get the
following error:

SecurityError: Blocked a frame wit">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-02-17T13:56:46+08:00">
<meta property="article:tag" content="iframe">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="jquery">
<meta property="article:tag" content="same-origin-policy">
<meta property="article:tag" content="security">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">SecurityError: Blocked a frame with origin from accessing a cross-origin frame</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:56:46+08:00" itemprop="datePublished" title="2023-02-17 13:56">2023-02-17 13:56</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I am loading an <code>&lt;iframe&gt;</code> in my HTML page and trying to access the elements
within it using JavaScript, but when I try to execute my code, I get the
following error:</p>
<blockquote>
<p>SecurityError: Blocked a frame with origin "http://www.example.com" from
accessing a cross-origin frame.</p>
</blockquote>
<p>How can I access the elements in the frame?</p>
<p>I am using this code for testing, but in vain:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">(</span><span class="n">document</span><span class="p">)</span><span class="o">.</span><span class="n">ready</span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">iframeWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"my-iframe-id"</span><span class="p">)</span><span class="o">.</span><span class="n">contentWindow</span><span class="p">;</span>

<span class="w">    </span><span class="n">iframeWindow</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">"load"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iframe</span><span class="o">.</span><span class="n">contentDocument</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">iframe</span><span class="o">.</span><span class="n">contentWindow</span><span class="o">.</span><span class="n">document</span><span class="p">;</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">doc</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"my-target-id"</span><span class="p">);</span>

<span class="w">        </span><span class="n">target</span><span class="o">.</span><span class="n">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Found it!"</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h3>Same-origin policy</h3>
<p>You <strong>can't</strong> access an <code>&lt;iframe&gt;</code> with different origin using JavaScript, it
would be a huge security flaw if you could do it. For the same-origin policy
<strong>browsers block scripts trying to access a frame with a different origin</strong>.</p>
<p>Origin is considered different if at least one of the following parts of the
address isn't maintained:</p>
<div class="code"><pre class="code literal-block">**protocol** :// **hostname** : **port** /...
</pre></div>

<p>Protocol, hostname and port must be the same of your domain if you want to
access a frame.</p>
<p>NOTE: Internet Explorer is known to not strictly follow this rule, see here
for details.</p>
<h4>Examples</h4>
<p>Here's what would happen trying to access the following URLs from
<code>http://www.example.com/home/index.html</code></p>
<div class="code"><pre class="code literal-block"><span class="n">URL</span><span class="w">                                             </span><span class="n">RESULT</span>
<span class="n">http</span><span class="o">://</span><span class="n">www</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">other</span><span class="p">.</span><span class="n">html</span><span class="w">       </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Success</span>
<span class="n">http</span><span class="o">://</span><span class="n">www</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">dir</span><span class="o">/</span><span class="n">inner</span><span class="o">/</span><span class="n">another</span><span class="p">.</span><span class="n">php</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Success</span>
<span class="n">http</span><span class="o">://</span><span class="n">www</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">:</span><span class="mi">80</span><span class="w">                    </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Success</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">HTTP</span><span class="p">)</span>
<span class="n">http</span><span class="o">://</span><span class="n">www</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">:</span><span class="mi">2251</span><span class="w">                  </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Failure</span><span class="o">:</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">port</span>
<span class="n">http</span><span class="o">://</span><span class="n">data</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">dir</span><span class="o">/</span><span class="n">other</span><span class="p">.</span><span class="n">html</span><span class="w">       </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Failure</span><span class="o">:</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">hostname</span>
<span class="n">https</span><span class="o">://</span><span class="n">www</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="nf">index</span><span class="p">.</span><span class="n">html</span><span class="o">:</span><span class="mi">80</span><span class="w">   </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Failure</span><span class="o">:</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">protocol</span>
<span class="n">ftp</span><span class="o">://</span><span class="n">www</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span><span class="o">:</span><span class="mi">21</span><span class="w">                     </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Failure</span><span class="o">:</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">protocol</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">port</span>
<span class="n">https</span><span class="o">://</span><span class="n">google</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">search</span><span class="o">?</span><span class="n">q</span><span class="o">=</span><span class="n">james</span><span class="o">+</span><span class="n">bond</span><span class="w">       </span><span class="o">-&gt;</span><span class="w"> </span><span class="kr">Failure</span><span class="o">:</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">protocol</span><span class="p">,</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">hostname</span>
</pre></div>

<h3>Workaround</h3>
<p>Even though same-origin policy blocks scripts from accessing the content of
sites with a different origin, <strong>if you own both the pages, you can work
around this problem using<code>window.postMessage</code> and its relative <code>message</code>
event</strong> to send messages between the two pages, like this:</p>
<ul>
<li>In your main page:<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'your-frame-id'</span><span class="p">);</span>
</pre></div>

<p>frame.contentWindow.postMessage(/<em>any variable or object here</em>/, 'https://your-second-site.example');</p>
</li>
</ul>
<p>The second argument to <code>postMessage()</code> can be <code>'*'</code> to indicate no preference
about the origin of the destination. A target origin should always be provided
when possible, to avoid disclosing the data you send to any other site.</p>
<ul>
<li>In your <code>&lt;iframe&gt;</code> (contained in the main page):<div class="code"><pre class="code literal-block"><span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s1">'message'</span><span class="o">,</span><span class="w"> </span><span class="nt">event</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="err">//</span><span class="w"> </span><span class="n">IMPORTANT</span><span class="p">:</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="o">!</span>
<span class="n">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">origin</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'https://your-first-site.example'</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">site</span><span class="o">.</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">postMessage</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">event</span><span class="o">.</span><span class="n">data</span><span class="o">:</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="nf">log</span><span class="p">(</span><span class="n">event</span><span class="err">.</span><span class="n">data</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="nt">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">was</span><span class="w"> </span><span class="err">NOT</span><span class="w"> </span><span class="err">sent</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">your</span><span class="w"> </span><span class="err">site!</span>
<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">Be</span><span class="w"> </span><span class="err">careful!</span><span class="w"> </span><span class="err">Do</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">it.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">else</span><span class="w"> </span><span class="err">branch</span><span class="w"> </span><span class="err">is</span>
<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">here</span><span class="w"> </span><span class="err">just</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">clarity,</span><span class="w"> </span><span class="err">you</span><span class="w"> </span><span class="err">usually</span><span class="w"> </span><span class="err">shouldn't</span><span class="w"> </span><span class="err">need</span><span class="w"> </span><span class="err">it.</span>
<span class="w">    </span><span class="err">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>});</p>
</li>
</ul>
<p>This method can be applied in <strong>both directions</strong> , creating a listener in the
main page too, and receiving responses from the frame. The same logic can also
be implemented in pop-ups and basically any new window generated by the main
page (e.g. using <code>window.open()</code>) as well, without any difference.</p>
<h3>Disabling same-origin policy in <em>your</em> browser</h3>
<p>There already are some good answers about this topic (I just found them
googling), so, for the browsers where this is possible, I'll link the relative
answer. However, please remember that <strong>disabling the same-origin policy will
only affect <em>your</em> browser</strong>. Also, running a browser with same-origin
security settings disabled grants <em>any</em> website access to cross-origin
resources, so <strong>it's very unsafe and should NEVER be done if you do not know
exactly what you are doing (e.g. development purposes)</strong>.</p>
<ul>
<li>Google Chrome</li>
<li>Mozilla Firefox</li>
<li>Safari</li>
<li>Opera: same as Chrome</li>
<li>Microsoft Edge: same as Chrome</li>
<li>Brave: same as Chrome</li>
<li>Microsoft Edge (old non-Chromium version): not possible</li>
<li>Microsoft Internet Explorer</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Complementing Marco Bonelli's answer: the best current way of interacting
between frames/iframes is using <code>window.postMessage</code>, supported by all
browsers</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/iframe/" rel="tag">iframe</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/jquery/" rel="tag">jquery</a></li>
            <li><a class="tag p-category" href="../../categories/same-origin-policy/" rel="tag">same-origin-policy</a></li>
            <li><a class="tag p-category" href="../../categories/security/" rel="tag">security</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../differences-between-emacs-and-vim/" rel="prev" title="Differences between Emacs and Vim">Previous post</a>
            </li>
            <li class="next">
                <a href="../check-uncheck-checkbox-with-javascript/" rel="next" title="Check/Uncheck checkbox with JavaScript">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
