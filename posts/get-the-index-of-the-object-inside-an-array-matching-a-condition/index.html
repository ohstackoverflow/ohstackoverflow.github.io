<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Get the index of the object inside an array, matching a condition | StackOverflow Snapshot</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/posts/get-the-index-of-the-object-inside-an-array-matching-a-condition/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Arya">
<link rel="prev" href="../how-do-i-get-the-parent-directory-in-python/" title="How do I get the parent directory in Python?" type="text/html">
<link rel="next" href="../the-name-configurationmanager-does-not-exist-in-the-current-context/" title="The name 'ConfigurationManager' does not exist in the current context" type="text/html">
<meta property="og:site_name" content="StackOverflow Snapshot">
<meta property="og:title" content="Get the index of the object inside an array, matching a condition">
<meta property="og:url" content="https://ohstackoverflow.netlify.app/posts/get-the-index-of-the-object-inside-an-array-matching-a-condition/">
<meta property="og:description" content='I have an array like this:
[{prop1:"abc",prop2:"qwe"},{prop1:"bnmb",prop2:"yutu"},{prop1:"zxvz",prop2:"qwrq"},...]


How can I get the index of the object that matches a condition, without
iterating o'>
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-03-03T04:05:48+08:00">
<meta property="article:tag" content="arrays">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="jquery">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Get the index of the object inside an array, matching a condition</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:05:48+08:00" itemprop="datePublished" title="2023-03-03 04:05">2023-03-03 04:05</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>I have an array like this:</p>
<div class="code"><pre class="code literal-block">[{prop1:"abc",prop2:"qwe"},{prop1:"bnmb",prop2:"yutu"},{prop1:"zxvz",prop2:"qwrq"},...]
</pre></div>

<p>How can I get the index of the object that matches a condition, without
iterating over the entire array?</p>
<p>For instance, given <code>prop2=="yutu"</code>, I want to get index <code>1</code>.</p>
<p>I saw <code>.indexOf()</code> but think it's used for simple arrays like
<code>["a1","a2",...]</code>. I also checked <code>$.grep()</code> but this returns objects, not the
index.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As of 2016, you're supposed to use <code>Array.findIndex</code> (an ES2015/ES6 standard)
for this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="cp">[</span>
<span class="w">  </span><span class="p">{</span><span class="nx">prop1</span><span class="p">:</span><span class="s2">"abc"</span><span class="p">,</span><span class="nx">prop2</span><span class="p">:</span><span class="s2">"qwe"</span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="nx">prop1</span><span class="p">:</span><span class="s2">"bnmb"</span><span class="p">,</span><span class="nx">prop2</span><span class="p">:</span><span class="s2">"yutu"</span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="nx">prop1</span><span class="p">:</span><span class="s2">"zxvz"</span><span class="p">,</span><span class="nx">prop2</span><span class="p">:</span><span class="s2">"qwrq"</span><span class="p">}</span><span class="cp">]</span><span class="o">;</span>

<span class="nt">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">a</span><span class="p">.</span><span class="nc">findIndex</span><span class="o">(</span><span class="nt">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nt">x</span><span class="p">.</span><span class="nc">prop2</span><span class="w"> </span><span class="o">===</span><span class="s2">"yutu"</span><span class="o">);</span>

<span class="nt">console</span><span class="p">.</span><span class="nc">log</span><span class="o">(</span><span class="nt">index</span><span class="o">);</span>
</pre></div>

<p>It's supported in Google Chrome, Firefox and Edge. For Internet Explorer,
there's a polyfill on the linked page.</p>
<p><strong>Performance note</strong></p>
<p>Function calls are expensive, therefore with really big arrays a simple loop
will perform much better than <code>findIndex</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">let</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1e6</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="n">test</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="err">{</span><span class="nl">prop</span><span class="p">:</span><span class="w"> </span><span class="n">i</span><span class="err">}</span><span class="p">);</span>


<span class="n">let</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">test</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="n">let</span><span class="w"> </span><span class="nf">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>

<span class="n">console</span><span class="p">.</span><span class="nc">time</span><span class="p">(</span><span class="s1">'findIndex/predefined function'</span><span class="p">);</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">obj</span><span class="p">.</span><span class="n">prop</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="k">search</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">test</span><span class="p">.</span><span class="n">findIndex</span><span class="p">(</span><span class="n">fn</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="n">timeEnd</span><span class="p">(</span><span class="s1">'findIndex/predefined function'</span><span class="p">);</span>


<span class="n">console</span><span class="p">.</span><span class="nc">time</span><span class="p">(</span><span class="s1">'findIndex/dynamic function'</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="n">test</span><span class="p">.</span><span class="n">findIndex</span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">obj</span><span class="p">.</span><span class="n">prop</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="k">search</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="n">timeEnd</span><span class="p">(</span><span class="s1">'findIndex/dynamic function'</span><span class="p">);</span>


<span class="n">console</span><span class="p">.</span><span class="nc">time</span><span class="p">(</span><span class="s1">'loop'</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nf">count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">test</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="k">index</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">test</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="p">.</span><span class="n">prop</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="k">search</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="n">console</span><span class="p">.</span><span class="n">timeEnd</span><span class="p">(</span><span class="s1">'loop'</span><span class="p">);</span>
</pre></div>

<p>As with most optimizations, this should be applied with care and only when
actually needed.</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>How can I get the index of the object tha match a condition (without iterate
along the array)?</p>
</blockquote>
<p>You cannot, <em>something</em> has to iterate through the array (at least once).</p>
<p>If the condition changes a lot, then you'll have to loop through and look at
the objects therein to see if they match the condition. However, on a system
with ES5 features (or if you install a shim), that iteration can be done
fairly concisely:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">index</span><span class="p">;</span>
<span class="n">yourArray</span><span class="o">.</span><span class="n">some</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">prop2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"yutu"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>That uses the new(ish) <code>Array#some</code> function, which loops through the entries
in the array until the function you give it returns true. The function I've
given it saves the index of the matching entry, then returns <code>true</code> to stop
the iteration.</p>
<p>Or of course, just use a <code>for</code> loop. Your various iteration options are
covered in this other answer.</p>
<p>But if you're always going to be using the same property for this lookup, and
if the property values are unique, you can loop just once and create an object
to map them:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">prop2map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="n">yourArray</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">prop2map</span><span class="p">[</span><span class="n">entry</span><span class="o">.</span><span class="n">prop2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entry</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>

<p>(Or, again, you could use a <code>for</code> loop or any of your other options.)</p>
<p>Then if you need to find the entry with <code>prop2 = "yutu"</code>, you can do this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prop2map</span><span class="p">[</span><span class="s2">"yutu"</span><span class="p">];</span>
</pre></div>

<p>I call this "cross-indexing" the array. Naturally, if you remove or add
entries (or change their <code>prop2</code> values), you need to update your mapping
object as well.</p>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/arrays/" rel="tag">arrays</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
            <li><a class="tag p-category" href="../../categories/jquery/" rel="tag">jquery</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../how-do-i-get-the-parent-directory-in-python/" rel="prev" title="How do I get the parent directory in Python?">Previous post</a>
            </li>
            <li class="next">
                <a href="../the-name-configurationmanager-does-not-exist-in-the-current-context/" rel="next" title="The name 'ConfigurationManager' does not exist in the current context">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="../../assets/js/search.js"></script>
</body>
</html>
