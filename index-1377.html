<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1377) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1377.html">
<link rel="prev" href="index-1378.html" type="text/html">
<link rel="next" href="index-1376.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-differential-evolution-and-how-does-it-compare-to-a-genetic-algorithm/" class="u-url">What's differential evolution and how does it compare to a genetic algorithm?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-differential-evolution-and-how-does-it-compare-to-a-genetic-algorithm/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T02:44:56+08:00" itemprop="datePublished" title="2023-02-28 02:44">2023-02-28 02:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>From what I've read so far they seem very similar. Differential evolution uses
floating point numbers instead, and the solutions are called vectors? I'm not
quite sure what that means. If someone could provide an overview with a little
bit about the advantages and disadvantages of both.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Well, both genetic algorithms and differential evolution are examples of
evolutionary computation.</p>
<p>Genetic algorithms keep pretty closely to the metaphor of genetic
reproduction. Even the language is mostly the same-- both talk of chromosomes,
both talk of genes, the genes are distinct alphabets, both talk of crossover,
and the crossover is fairly close to a low-level understanding of genetic
reproduction, etc.</p>
<p>Differential evolution is in the same style, but the correspondences are not
as exact. The first big change is that DE is using actual real numbers (in the
strict mathematical sense-- they're implemented as floats, or doubles, or
whatever, but in theory they're ranging over the field of reals.) As a result,
the ideas of mutation and crossover are substantially different. The mutation
operator is modified so far that it's hard for me to even see why it's called
mutation, as such, except that it serves the same purpose of breaking things
out of local minima.</p>
<p>On the plus side, there are a handful of results showing DEs are often more
effective and/or more efficient than genetic algorithms. And when working in
numerical optimization, it's nice to be able to represent things as actual
real numbers instead of having to work your way around to a chromosomal kind
of representation, first. (Note: I've read about them, but I've not messed
extensively with them so I can't really comment from first hand knowledge.)</p>
<p>On the negative side, I don't think there's been any proof of convergence for
DEs, yet.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Differential evolution is actually a specific subset of the broader space of
genetic algorithms, with the following restrictions:</p>
<ul>
<li>The genotype is some form of real-valued vector</li>
<li>The mutation / crossover operations make use of the difference between two or more vectors in the population to create a new vector (typically by adding some random proportion of the difference to one of the existing vectors, plus a small amount of random noise)</li>
</ul>
<p>DE performs well for certain situations because the vectors can be considered
to form a "cloud" that explores the high value areas of the solution solution
space quite effectively. It's pretty closely related to particle swarm
optimization in some senses.</p>
<p>It still has the usual GA problem of getting stuck in local minima however.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-flatten-input-in-nn-sequential-in-pytorch/" class="u-url">how to flatten input in `nn.Sequential` in Pytorch</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-flatten-input-in-nn-sequential-in-pytorch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T02:44:26+08:00" itemprop="datePublished" title="2023-02-28 02:44">2023-02-28 02:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>how to flatten input inside the <code>nn.Sequential</code></p>
<div class="code"><pre class="code literal-block">Model = nn.Sequential(x.view(x.shape[0],-1),
                     nn.Linear(784,256),
                     nn.ReLU(),
                     nn.Linear(256,128),
                     nn.ReLU(),
                     nn.Linear(128,64),
                     nn.ReLU(),
                     nn.Linear(64,10),
                     nn.LogSoftmax(dim=1))
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can create a new module/class as below and use it in the sequential as you
are using other modules (call <code>Flatten()</code>).</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Flatten</span>(<span class="n">torch</span>.<span class="n">nn</span>.<span class="n">Module</span>):
    <span class="n">def</span> <span class="n">forward</span>(<span class="nb">self</span>, <span class="nb">x</span>):
        <span class="n">batch_size</span> = <span class="nb">x</span>.<span class="nb">shape</span>[<span class="mi">0</span>]
        <span class="k">return</span> <span class="nb">x</span>.<span class="n">view</span>(<span class="n">batch_size</span>, -<span class="mi">1</span>)
</pre></div>

<p>Ref: https://discuss.pytorch.org/t/flatten-layer-of-pytorch-build-by-
sequential-container/5983</p>
<p>EDIT: <code>Flatten</code> is part of torch now. See
https://pytorch.org/docs/stable/nn.html?highlight=flatten#torch.nn.Flatten</p>
<p><br></p>
<h3>Suggest</h3>
<p>As being defined <code>flatten</code> method</p>
<div class="code"><pre class="code literal-block">torch.flatten(input, start_dim=0, end_dim=-1) → Tensor
</pre></div>

<p>is speed comparable to <code>view()</code>, but <code>reshape</code> is even faster.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">torch.nn</span> <span class="k">as</span> <span class="nn">nn</span>

<span class="k">class</span> <span class="nc">Flatten</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">input</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">flatten</span> <span class="o">=</span> <span class="n">Flatten</span><span class="p">()</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">random_</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>


<span class="c1">#https://pytorch.org/docs/master/torch.html#torch.flatten</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">start_dim</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_dim</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>


<span class="c1">#https://pytorch.org/docs/master/torch.html#torch.view</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>


<span class="c1">#https://pytorch.org/docs/master/torch.html#torch.reshape</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

<hr>
<p>Speed check</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">flatten</span><span class="w"> </span><span class="mi">3</span>.<span class="mi">49</span><span class="w"> </span>µ<span class="nv">s</span><span class="w"> </span>±<span class="w"> </span><span class="mi">146</span><span class="w"> </span><span class="nv">ns</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="k">loop</span><span class="w"> </span><span class="ss">(</span><span class="nv">mean</span><span class="w"> </span>±<span class="w"> </span><span class="nv">std</span>.<span class="w"> </span><span class="nv">dev</span>.<span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="nv">runs</span>,<span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="nv">loops</span><span class="w"> </span><span class="nv">each</span><span class="ss">)</span>
#<span class="w"> </span><span class="nv">view</span><span class="w"> </span><span class="mi">3</span>.<span class="mi">23</span><span class="w"> </span>µ<span class="nv">s</span><span class="w"> </span>±<span class="w"> </span><span class="mi">228</span><span class="w"> </span><span class="nv">ns</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="k">loop</span><span class="w"> </span><span class="ss">(</span><span class="nv">mean</span><span class="w"> </span>±<span class="w"> </span><span class="nv">std</span>.<span class="w"> </span><span class="nv">dev</span>.<span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="nv">runs</span>,<span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="nv">loops</span><span class="w"> </span><span class="nv">each</span><span class="ss">)</span>
#<span class="w"> </span><span class="nv">reshape</span><span class="w"> </span><span class="mi">3</span>.<span class="mi">04</span><span class="w"> </span>µ<span class="nv">s</span><span class="w"> </span>±<span class="w"> </span><span class="mi">93</span><span class="w"> </span><span class="nv">ns</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="k">loop</span><span class="w"> </span><span class="ss">(</span><span class="nv">mean</span><span class="w"> </span>±<span class="w"> </span><span class="nv">std</span>.<span class="w"> </span><span class="nv">dev</span>.<span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="nv">runs</span>,<span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="nv">loops</span><span class="w"> </span><span class="nv">each</span><span class="ss">)</span>
</pre></div>

<p>If we would use class from above</p>
<div class="code"><pre class="code literal-block"><span class="n">flatten</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Flatten</span><span class="p">()</span>
<span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">torch</span><span class="p">.</span><span class="n">Tensor</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">).</span><span class="n">random_</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="nf">%timeit</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="n">flatten</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>


<span class="mf">5.16</span><span class="w"> </span><span class="n">µs</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mi">122</span><span class="w"> </span><span class="n">ns</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="w"> </span><span class="n">dev</span><span class="p">.</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">runs</span><span class="p">,</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="n">each</span><span class="p">)</span>
</pre></div>

<p>This result shows creating a class would be slower approach. This is why it is
faster to flatten tensors inside forward. I think this is the main reason they
haven't promoted <code>nn.Flatten</code>.</p>
<p>So my suggestion would be to use inside forward for speed. Something like
this:</p>
<div class="code"><pre class="code literal-block">out = inp.reshape(inp.size(0), -1)
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pong-how-does-the-paddle-know-where-the-ball-will-hit/" class="u-url">Pong: How does the paddle know where the ball will hit?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pong-how-does-the-paddle-know-where-the-ball-will-hit/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-28T02:44:05+08:00" itemprop="datePublished" title="2023-02-28 02:44">2023-02-28 02:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>After implementing Pacman and Snake I'm implementing the next very very
classic game: Pong.</p>
<p>The implementation is really simple, but I just have one little problem
remaining. When one of the paddle (I'm not sure if it is called paddle) is
controlled by the computer, I have trouble to position it at the correct
position.</p>
<p>The ball has a current position, a speed (which for now is constant) and a
direction angle. So I could calculate the position where it will hit the side
of the computer controlled paddle. And so Icould position the paddle right
there. But however in the real game, there is a probability that the
computer's paddle will miss the ball. How can I implement this probability?</p>
<p>If I only use a probability of lets say 0.5 that the computer's paddle will
hit the ball, the problem is solved, but I think it isn't that simple.</p>
<p>From the original game I think the probability depends on the distance between
the current paddle position and the position the ball will hit the border.</p>
<p>Does anybody have any hints how exactly this is calculated?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>We made a (pseudo-)3D ping-pong game for our high school CS class. What we did
was, we made the computer always move the paddle toward the ball, but with a
maximum speed -- that way, it could miss the ball if it's too far, but it's
still smart. Does this help?</p>
<p><br></p>
<h3>Suggest</h3>
<p>We made a (pseudo-)3D ping-pong game for our high school CS class. What we did
was, we made the computer always move the paddle toward the ball, but with a
maximum speed -- that way, it could miss the ball if it's too far, but it's
still smart. Does this help?</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1378.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1376.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
