<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 406) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-406.html">
<link rel="prev" href="index-407.html" type="text/html">
<link rel="next" href="index-405.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/error-message-no-exports-were-found-that-match-the-constraint-contract-name/" class="u-url">Error message "No exports were found that match the constraint contract name"</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/error-message-no-exports-were-found-that-match-the-constraint-contract-name/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:02:44+08:00" itemprop="datePublished" title="2023-02-17 06:02">2023-02-17 06:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This morning I faced a problem while opening my Visual Studio solution, and
when I tried to run it, it said:</p>
<blockquote>
<p>No exports were found that match the constraint contract name</p>
</blockquote>
<p>How can I fix this problem?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I solved this problem by clearing Visual Studio Component Model Cache.</p>
<p>Just delete or rename this folder:</p>
<div class="code"><pre class="code literal-block"><span class="c">%LocalAppData%\Microsoft\VisualStudio\11.0\ComponentModelCache</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="c">%LocalAppData%\Microsoft\VPDExpress\11.0\ComponentModelCache</span>
</pre></div>

<p>and restart Visual Studio.</p>
<p>The version of Visual Studio you have is specified by the number e.g.</p>
<p>Visual Studio 2012 is <code>11.0</code> (as shown above)</p>
<p>Visual Studio 2013 is <code>12.0</code></p>
<p>Visual Studio 2015 is <code>14.0</code></p>
<p>Visual Studio 2017 is <code>15.0</code></p>
<p>Visual Studio 2019 is <code>16.0</code></p>
<p>For those that don't know: <code>%LocalAppData%\</code> is the same as
<code>C:\Users\{yourUsername}\AppData\Local</code></p>
<p>For those who have multiple versions of Visual Studio installed, e.g. 2012 and
2013, it might help to remove the ComponentModelCache for both versions before
restarting Visual Studio, e.g. 11.0 and 12.0.</p>
<p><br></p>
<h3>Suggest</h3>
<p>No need to rename or delete the whole folder:</p>
<div class="code"><pre class="code literal-block">(%AppData%\..\Local\Microsoft\VisualStudio\11.0\ComponentModelCache)
</pre></div>

<p>Just rename or delete the <strong><code>Microsoft.VisualStudio.Default.cache</code></strong> file
inside the above location.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-can-t-variables-be-declared-in-a-switch-statement/" class="u-url">Why can't variables be declared in a switch statement?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-can-t-variables-be-declared-in-a-switch-statement/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:02:16+08:00" itemprop="datePublished" title="2023-02-17 06:02">2023-02-17 06:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've always wondered this - why can't you declare variables after a case label
in a switch statement? In C++ you can declare variables pretty much anywhere
(and declaring them close to first use is obviously a good thing) but the
following still won't work:</p>
<div class="code"><pre class="code literal-block"><span class="nt">switch</span><span class="w"> </span><span class="o">(</span><span class="nt">val</span><span class="o">)</span><span class="w">  </span>
<span class="p">{</span><span class="w">  </span>
<span class="err">case</span><span class="w"> </span><span class="n">VAL</span><span class="p">:</span><span class="w">  </span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">won</span><span class="err">'</span><span class="n">t</span><span class="w"> </span><span class="n">work</span>
<span class="w">  </span><span class="n">int</span><span class="w"> </span><span class="n">newVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">  </span>
<span class="w">  </span><span class="err">break</span><span class="p">;</span>
<span class="err">case</span><span class="w"> </span><span class="n">ANOTHER_VAL</span><span class="p">:</span><span class="w">  </span>
<span class="w">  </span><span class="o">...</span>
<span class="w">  </span><span class="n">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>The above gives me the following error (MSC):</p>
<blockquote>
<p>initialization of 'newVal' is skipped by 'case' label</p>
</blockquote>
<p>This seems to be a limitation in other languages too. Why is this such a
problem?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>Case</code> statements are only <strong>labels</strong>. This means the compiler will interpret
this as a jump directly to the label. In C++, the problem here is one of
scope. Your curly brackets define the scope as everything inside the <code>switch</code>
statement. This means that you are left with a scope where a jump will be
performed further into the code skipping the initialization.</p>
<p>The correct way to handle this is to define a scope specific to that <code>case</code>
statement and define your variable within it:</p>
<div class="code"><pre class="code literal-block"><span class="nt">switch</span><span class="w"> </span><span class="o">(</span><span class="nt">val</span><span class="o">)</span>
<span class="p">{</span><span class="w">   </span>
<span class="err">case</span><span class="w"> </span><span class="n">VAL</span><span class="p">:</span><span class="w">  </span>
<span class="err">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">work</span>
<span class="w">  </span><span class="n">int</span><span class="w"> </span><span class="n">newVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">  </span>
<span class="w">  </span><span class="err">break</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">case</span><span class="w"> </span><span class="nt">ANOTHER_VAL</span><span class="o">:</span><span class="w">  </span>
<span class="o">...</span>
<span class="nt">break</span><span class="o">;</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This question was originally tagged as c and c++ at the same time. The
original code is indeed invalid in both C and C++, but for completely
different unrelated reasons.</p>
<ul>
<li>
<p>In C++ this code is invalid because the <code>case ANOTHER_VAL:</code> label jumps into the scope of variable <code>newVal</code> bypassing its initialization. Jumps that bypass initialization of automatic objects are illegal in C++. This side of the issue is correctly addressed by most answers.</p>
</li>
<li>
<p>However, in C language bypassing variable initialization is not an error. Jumping into the scope of a variable over its initialization is legal in C. It simply means that the variable is left uninitialized. The original code does not compile in C for a completely different reason. Label <code>case VAL:</code> in the original code is attached to the declaration of variable <code>newVal</code>. In C language declarations are not statements. They cannot be labeled. And this is what causes the error when this code is interpreted as C code.</p>
<div class="code"><pre class="code literal-block">  switch (val)
</pre></div>

<p>{<br>
  case VAL:             /<em> &lt;- C error is here </em>/
    int newVal = 42;<br>
    break;
  case ANOTHER_VAL:     /<em> &lt;- C++ error is here </em>/
    ...
    break;
  }</p>
</li>
</ul>
<p>Adding an extra <code>{}</code> block fixes both C++ and C problems, even though these
problems happen to be very different. On the C++ side it restricts the scope
of <code>newVal</code>, making sure that <code>case ANOTHER_VAL:</code> no longer jumps into that
scope, which eliminates the C++ issue. On the C side that extra <code>{}</code>
introduces a compound statement, thus making the <code>case VAL:</code> label to apply to
a statement, which eliminates the C issue.</p>
<ul>
<li>In C case the problem can be easily solved without the <code>{}</code>. Just add an empty statement after the <code>case VAL:</code> label and the code will become valid<div class="code"><pre class="code literal-block">  switch (val)
</pre></div>

<p>{<br>
  case VAL:;            /<em> Now it works in C! </em>/
    int newVal = 42;<br>
    break;
  case ANOTHER_VAL:<br>
    ...
    break;
  }</p>
</li>
</ul>
<p>Note that even though it is now valid from C point of view, it remains invalid
from C++ point of view.</p>
<ul>
<li>Symmetrically, in C++ case the the problem can be easily solved without the <code>{}</code>. Just remove the initializer from variable declaration and the code will become valid<div class="code"><pre class="code literal-block">  switch (val)
</pre></div>

<p>{<br>
  case VAL: 
    int newVal;
    newVal = 42;<br>
    break;
  case ANOTHER_VAL:     /<em> Now it works in C++! </em>/
    ...
    break;
  }</p>
</li>
</ul>
<p>Note that even though it is now valid from C++ point of view, it remains
invalid from C point of view.</p>
<p>Starting from C23 all labels in C language will be interpreted as labelling
implied null statements (N2508), i.e. the issue with being unable to place
labels in front of declarations in C will no longer exist and the above
<code>;</code>-based fix will no longer be necessary.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/convert-a-string-representation-of-a-dictionary-to-a-dictionary/" class="u-url">Convert a String representation of a Dictionary to a dictionary</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/convert-a-string-representation-of-a-dictionary-to-a-dictionary/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T06:01:51+08:00" itemprop="datePublished" title="2023-02-17 06:01">2023-02-17 06:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I convert the <code>str</code> representation of a <code>dict</code>, such as the following
string, into a <code>dict</code>?</p>
<div class="code"><pre class="code literal-block">s = "{'muffin' : 'lolz', 'foo' : 'kitty'}"
</pre></div>

<p>I prefer not to use <code>eval</code>. What else can I use?</p>
<p>The main reason for this, is one of my coworkers classes he wrote, converts
all input into strings. I'm not in the mood to go and modify his classes, to
deal with this issue.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the built-in <code>ast.literal_eval</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">ast</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="s2">"{'muffin' : 'lolz', 'foo' : 'kitty'}"</span><span class="p">)</span>
<span class="p">{</span><span class="s1">'muffin'</span><span class="p">:</span> <span class="s1">'lolz'</span><span class="p">,</span> <span class="s1">'foo'</span><span class="p">:</span> <span class="s1">'kitty'</span><span class="p">}</span>
</pre></div>

<p>This is safer than using <code>eval</code>. As its own docs say:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; help(ast.literal_eval)
Help on function literal_eval in module ast:

literal_eval(node_or_string)
    Safely evaluate an expression node or a string containing a Python
    expression.  The string or node provided may only consist of the following
    Python literal structures: strings, numbers, tuples, lists, dicts, booleans,
    and None.
</pre></div>

<p>For example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">eval</span><span class="ss">(</span><span class="s2">"shutil.rmtree('mongo')"</span><span class="ss">)</span>
<span class="nv">Traceback</span><span class="w"> </span><span class="ss">(</span><span class="nv">most</span><span class="w"> </span><span class="nv">recent</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="nl">last</span><span class="ss">)</span>:
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"&lt;stdin&gt;"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">1</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">module</span><span class="o">&gt;</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"&lt;string&gt;"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">1</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">module</span><span class="o">&gt;</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/opt/Python-2.6.1/lib/python2.6/shutil.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">208</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">rmtree</span>
<span class="w">    </span><span class="nv">onerror</span><span class="ss">(</span><span class="nv">os</span>.<span class="nv">listdir</span>,<span class="w"> </span><span class="nv">path</span>,<span class="w"> </span><span class="nv">sys</span>.<span class="nv">exc_info</span><span class="ss">())</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/opt/Python-2.6.1/lib/python2.6/shutil.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">206</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">rmtree</span>
<span class="w">    </span><span class="nv">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">os</span>.<span class="nv">listdir</span><span class="ss">(</span><span class="nv">path</span><span class="ss">)</span>
<span class="nv">OSError</span>:<span class="w"> </span>[<span class="nv">Errno</span><span class="w"> </span><span class="mi">2</span>]<span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">directory</span>:<span class="w"> </span><span class="s1">'mongo'</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="nv">ast</span>.<span class="nv">literal_eval</span><span class="ss">(</span><span class="s2">"shutil.rmtree('mongo')"</span><span class="ss">)</span>
<span class="nv">Traceback</span><span class="w"> </span><span class="ss">(</span><span class="nv">most</span><span class="w"> </span><span class="nv">recent</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="nl">last</span><span class="ss">)</span>:
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"&lt;stdin&gt;"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">1</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">module</span><span class="o">&gt;</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/opt/Python-2.6.1/lib/python2.6/ast.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">68</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">literal_eval</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">_convert</span><span class="ss">(</span><span class="nv">node_or_string</span><span class="ss">)</span>
<span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="s2">"/opt/Python-2.6.1/lib/python2.6/ast.py"</span>,<span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="mi">67</span>,<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">_convert</span>
<span class="w">    </span><span class="nv">raise</span><span class="w"> </span><span class="nv">ValueError</span><span class="ss">(</span><span class="s1">'malformed string'</span><span class="ss">)</span>
<span class="nv">ValueError</span>:<span class="w"> </span><span class="nv">malformed</span><span class="w"> </span><span class="nv">string</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>https://docs.python.org/library/json.html</p>
<p>JSON can solve this problem, though its decoder wants double quotes around
keys and values. If you don't mind a replace hack...</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">json</span>
<span class="n">s</span> <span class="o">=</span> <span class="s2">"{'muffin' : 'lolz', 'foo' : 'kitty'}"</span>
<span class="n">json_acceptable_string</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"'"</span><span class="p">,</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">"</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_acceptable_string</span><span class="p">)</span>
<span class="c1"># d = {u'muffin': u'lolz', u'foo': u'kitty'}</span>
</pre></div>

<p>NOTE that if you have single quotes as a part of your keys or values this will
fail due to improper character replacement. This solution is only recommended
if you have a strong aversion to the eval solution.</p>
<p>More about json single quote: jQuery.parseJSON throws “Invalid JSON” error due
to escaped single quote in JSON</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-407.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-405.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
