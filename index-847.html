<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 847) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-847.html">
<link rel="prev" href="index-848.html" type="text/html">
<link rel="next" href="index-846.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-search-engines-deal-with-angularjs-applications/" class="u-url">How do search engines deal with AngularJS applications?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-search-engines-deal-with-angularjs-applications/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:34:25+08:00" itemprop="datePublished" title="2023-02-17 17:34">2023-02-17 17:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I see two issues with AngularJS application regarding search engines and SEO:</p>
<p>1) What happens with custom tags? Do search engines ignore the whole content
within those tags? i.e. suppose I have</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;custom&gt;</span>
<span class="w">  </span><span class="nt">&lt;h1&gt;</span>Hey,<span class="w"> </span>this<span class="w"> </span>title<span class="w"> </span>is<span class="w"> </span>important<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/custom&gt;</span>
</pre></div>

<p>would <code>&lt;h1&gt;</code> be indexed despite being inside custom tags?</p>
<p>2) Is there a way to avoid search engines of indexing {{}} binds literally?
i.e.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;h2&gt;</span><span class="cp">{{</span><span class="nv">title</span><span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
</pre></div>

<p>I know I could do something like</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;h2</span><span class="w"> </span><span class="na">ng-bind=</span><span class="s">"title"</span><span class="nt">&gt;&lt;/h2&gt;</span>
</pre></div>

<p>but what if I want to actually let the crawler "see" the title? Is server-side
rendering the only solution?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Update May 2014</strong></p>
<p>Google crawlers now executes javascript - you can use the Google Webmaster
Tools to better understand how your sites are rendered by Google.</p>
<p><strong>Original answer</strong><br>
If you want to optimize your app for search engines there is unfortunately no
way around serving a pre-rendered version to the crawler. You can read more
about Google's recommendations for ajax and javascript-heavy sites here.</p>
<p>If this is an option I'd recommend reading this article about how to do SEO
for Angular with server-side rendering.</p>
<p>I’m not sure what the crawler does when it encounters custom tags.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Update May 2014</strong></p>
<p>Google crawlers now executes javascript - you can use the Google Webmaster
Tools to better understand how your sites are rendered by Google.</p>
<p><strong>Original answer</strong><br>
If you want to optimize your app for search engines there is unfortunately no
way around serving a pre-rendered version to the crawler. You can read more
about Google's recommendations for ajax and javascript-heavy sites here.</p>
<p>If this is an option I'd recommend reading this article about how to do SEO
for Angular with server-side rendering.</p>
<p>I’m not sure what the crawler does when it encounters custom tags.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/jquery-get-selected-element-tag-name/" class="u-url">jQuery: Get selected element tag name</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/jquery-get-selected-element-tag-name/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:34:02+08:00" itemprop="datePublished" title="2023-02-17 17:34">2023-02-17 17:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there an easy way to get a tag name?</p>
<p>For example, if I am given <code>$('a')</code> into a function, I want to get <code>'a'</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can call <code>.prop("tagName")</code>. Examples:</p>
<div class="code"><pre class="code literal-block">jQuery("&lt;a&gt;").prop("tagName"); //==&gt; "A"
jQuery("&lt;h1&gt;").prop("tagName"); //==&gt; "H1"
jQuery("&lt;coolTagName999&gt;").prop("tagName"); //==&gt; "COOLTAGNAME999"
</pre></div>

<p>If writing out <code>.prop("tagName")</code> is tedious, you can create a custom function
like so:</p>
<div class="code"><pre class="code literal-block"><span class="nv">jQuery</span>.<span class="nv">fn</span>.<span class="nv">tagName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">function</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span>.<span class="nv">prop</span><span class="ss">(</span><span class="s2">"tagName"</span><span class="ss">)</span><span class="c1">;</span>
}<span class="c1">;</span>
</pre></div>

<p>Examples:</p>
<div class="code"><pre class="code literal-block">jQuery("&lt;a&gt;").tagName(); //==&gt; "A"
jQuery("&lt;h1&gt;").tagName(); //==&gt; "H1"
jQuery("&lt;coolTagName999&gt;").tagName(); //==&gt; "COOLTAGNAME999"
</pre></div>

<p>Note that tag names are, by convention, returned <strong>CAPITALIZED</strong>. If you want
the returned tag name to be all lowercase, you can edit the custom function
like so:</p>
<div class="code"><pre class="code literal-block"><span class="nv">jQuery</span>.<span class="nv">fn</span>.<span class="nv">tagNameLowerCase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">function</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span>.<span class="nv">prop</span><span class="ss">(</span><span class="s2">"tagName"</span><span class="ss">)</span>.<span class="nv">toLowerCase</span><span class="ss">()</span><span class="c1">;</span>
}<span class="c1">;</span>
</pre></div>

<p>Examples:</p>
<div class="code"><pre class="code literal-block">jQuery("&lt;a&gt;").tagNameLowerCase(); //==&gt; "a"
jQuery("&lt;h1&gt;").tagNameLowerCase(); //==&gt; "h1"
jQuery("&lt;coolTagName999&gt;").tagNameLowerCase(); //==&gt; "cooltagname999"
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use the DOM's <code>nodeName</code> property:</p>
<div class="code"><pre class="code literal-block">$(...)[0].nodeName
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-this-javascript-require/" class="u-url">What is this JavaScript "require"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-this-javascript-require/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:33:36+08:00" itemprop="datePublished" title="2023-02-17 17:33">2023-02-17 17:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to get JavaScript to read/write to a PostgreSQL database. I found
this project on GitHub. I was able to get the following sample code to run in
Node.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">pg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'pg'</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="n">native</span><span class="w"> </span><span class="n">libpq</span><span class="w"> </span><span class="n">bindings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">`</span><span class="k">var</span><span class="w"> </span><span class="n">pg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'pg'</span><span class="p">)</span><span class="o">.</span><span class="n">native</span><span class="err">`</span>
<span class="k">var</span><span class="w"> </span><span class="n">conString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tcp://postgres:1234@localhost/postgres"</span><span class="p">;</span>

<span class="k">var</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">pg</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">conString</span><span class="p">);</span>
<span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">();</span>

<span class="o">//</span><span class="n">queries</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">queued</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">once</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="n">becomes</span><span class="w"> </span><span class="n">available</span>
<span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"CREATE TEMP TABLE beatles(name varchar(10), height integer, birthday timestamptz)"</span><span class="p">);</span>
<span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"INSERT INTO beatles(name, height, birthday) values($1, $2, $3)"</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'Ringo'</span><span class="p">,</span><span class="w"> </span><span class="mi">67</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="mi">1945</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)]);</span>
<span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"INSERT INTO beatles(name, height, birthday) values($1, $2, $3)"</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'John'</span><span class="p">,</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="mi">1944</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">)]);</span>

<span class="o">//</span><span class="n">queries</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">text</span><span class="o">/</span><span class="n">parameter</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">individual</span><span class="w"> </span><span class="n">arguments</span>
<span class="o">//</span><span class="ow">or</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">passing</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">name</span>
<span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">({</span>
<span class="w">  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">'insert beatle'</span><span class="p">,</span>
<span class="w">  </span><span class="n">text</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT INTO beatles(name, height, birthday) values($1, $2, $3)"</span><span class="p">,</span>
<span class="w">  </span><span class="n">values</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">'George'</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="mi">1946</span><span class="p">,</span><span class="w"> </span><span class="mi">02</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">)]</span>
<span class="p">});</span>

<span class="o">//</span><span class="n">subsequent</span><span class="w"> </span><span class="n">queries</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">re</span><span class="o">-</span><span class="n">parsing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">plan</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">postgres</span>
<span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">({</span>
<span class="w">  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="s1">'insert beatle'</span><span class="p">,</span>
<span class="w">  </span><span class="n">values</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">'Paul'</span><span class="p">,</span><span class="w"> </span><span class="mi">63</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="mi">1945</span><span class="p">,</span><span class="w"> </span><span class="mi">04</span><span class="p">,</span><span class="w"> </span><span class="mi">03</span><span class="p">)]</span>
<span class="p">});</span>
<span class="k">var</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"SELECT * FROM beatles WHERE name = $1"</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'John'</span><span class="p">]);</span>

<span class="o">//</span><span class="n">can</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">time</span>
<span class="n">query</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'row'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">row</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">row</span><span class="p">);</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Beatle name: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="n">name</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="n">Beatle</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">John</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Beatle birth year: </span><span class="si">%d</span><span class="s2">"</span><span class="p">,</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="n">birthday</span><span class="o">.</span><span class="n">getYear</span><span class="p">());</span><span class="w"> </span><span class="o">//</span><span class="n">dates</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">javascript</span><span class="w"> </span><span class="n">dates</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"Beatle height: </span><span class="si">%d</span><span class="s2">' </span><span class="si">%d</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">12</span><span class="p">),</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="n">height</span><span class="o">%</span><span class="mi">12</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="n">integers</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">javascript</span><span class="w"> </span><span class="n">ints</span>
<span class="p">});</span>

<span class="o">//</span><span class="n">fired</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">emitted</span>
<span class="n">query</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'end'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="n">client</span><span class="o">.</span><span class="n">end</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<p>Next I tried to make it run on a webpage, but nothing seemed to happen. I
checked on the JavaScript console and it just says "require not defined".</p>
<p>So what is this "require"? Why does it work in Node but not in a webpage?</p>
<p>Also, before I got it to work in Node, I had to do <code>npm install pg</code>. What's
that about? I looked in the directory and didn't find a file pg. Where did it
put it, and how does JavaScript find it?</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>So what is this "require?"</p>
</blockquote>
<p><code>require()</code> is not part of the standard JavaScript API. But in Node.js, it's a
built-in function with a special purpose: to load modules.</p>
<p>Modules are a way to split an application into separate files instead of
having all of your application in one file. This concept is also present in
other languages with minor differences in syntax and behavior, like C's
<code>include</code>, Python's <code>import</code>, and so on.</p>
<p>One big difference between Node.js modules and browser JavaScript is how one
script's code is accessed from another script's code.</p>
<ul>
<li>
<p>In browser JavaScript, scripts are added via the <code>&lt;script&gt;</code> element. When they execute, they all have direct access to the global scope, a "shared space" among all scripts. Any script can freely define/modify/remove/call anything on the global scope.</p>
</li>
<li>
<p>In Node.js, each module has its own scope. A module cannot directly access things defined in another module unless it chooses to expose them. To expose things from a module, they must be assigned to <code>exports</code> or <code>module.exports</code>. For a module to access another module's <code>exports</code> or <code>module.exports</code>, <em>it must use<code>require()</code></em>.</p>
</li>
</ul>
<p>In your code, <code>var pg = require('pg');</code> loads the <code>pg</code> module, a PostgreSQL
client for Node.js. This allows your code to access functionality of the
PostgreSQL client's APIs via the <code>pg</code> variable.</p>
<blockquote>
<p>Why does it work in node but not in a webpage?</p>
</blockquote>
<p><code>require()</code>, <code>module.exports</code> and <code>exports</code> are APIs of a module system that
is specific to Node.js. Browsers do not implement this module system.</p>
<blockquote>
<p>Also, before I got it to work in node, I had to do <code>npm install pg</code>. What's
that about?</p>
</blockquote>
<p>NPM is a package repository service that hosts published JavaScript modules.
<code>npm install</code> is a command that lets you download packages from their
repository.</p>
<blockquote>
<p>Where did it put it, and how does Javascript find it?</p>
</blockquote>
<p>The npm cli puts all the downloaded modules in a <code>node_modules</code> directory
where you ran <code>npm install</code>. Node.js has very detailed documentation on how
modules find other modules which includes finding a <code>node_modules</code> directory.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Alright, so let's first start with making the distinction between Javascript
<em>in a web browser</em> , and Javascript <em>on a server</em> (CommonJS and Node).</p>
<p>Javascript is a language traditionally confined to a web browser with a
limited global context defined mostly by what came to be known as the Document
Object Model (DOM) level 0 (the Netscape Navigator Javascript API).</p>
<p>Server-side Javascript eliminates that restriction and allows Javascript to
call into various pieces of native code (like the Postgres library) and open
sockets.</p>
<p>Now <code>require()</code> is a special function call defined as part of the CommonJS
spec. In node, it resolves libraries and modules in the Node search path, now
usually defined as <code>node_modules</code> in the same directory (or the directory of
the invoked javascript file) or the system-wide search path.</p>
<p>To try to answer the rest of your question, we need to use a proxy between the
code running in the the browser and the database server.</p>
<p>Since we are discussing Node and you are already familiar with how to run a
query from there, it would make sense to use Node as that proxy.</p>
<p>As a simple example, we're going to make a URL that returns a few facts about
a Beatle, given a name, as JSON.</p>
<div class="code"><pre class="code literal-block"><span class="o">/*</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">*/</span>

<span class="k">var</span><span class="w"> </span><span class="n">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">express</span><span class="o">.</span><span class="n">createServer</span><span class="p">();</span>
<span class="n">app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/beatles/:name'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span><span class="p">[</span><span class="o">^</span><span class="n">a</span><span class="o">-</span><span class="n">zA_Z</span><span class="p">]</span><span class="o">/</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">name</span><span class="o">.</span><span class="n">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">res</span><span class="o">.</span><span class="n">send</span><span class="p">({});</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">'SELECT * FROM BEATLES WHERE name =</span><span class="se">\'</span><span class="s1">'</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s1">'</span><span class="se">\'</span><span class="s1"> LIMIT 1'</span><span class="p">);</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">        </span><span class="n">query</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'row'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">row</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="p">;</span>
<span class="w">            </span><span class="n">res</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">});</span>
<span class="n">app</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="s1">'127.0.0.1'</span><span class="p">);</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-848.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-846.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
