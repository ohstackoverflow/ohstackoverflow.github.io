<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1257) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1257.html">
<link rel="prev" href="index-1258.html" type="text/html">
<link rel="next" href="index-1256.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/no-module-named-pkg-resources/" class="u-url">No module named pkg_resources</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/no-module-named-pkg-resources/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:01:49+08:00" itemprop="datePublished" title="2023-02-18 05:01">2023-02-18 05:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm deploying a Django app to a dev server and am hitting this error when I
run <code>pip install -r requirements.txt</code>:</p>
<div class="code"><pre class="code literal-block"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"/var/www/mydir/virtualenvs/dev/bin/pip"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="kn">from</span> <span class="nn">pkg_resources</span> <span class="kn">import</span> <span class="n">load_entry_point</span>
<span class="ne">ImportError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="n">pkg_resources</span>
</pre></div>

<p><code>pkg_resources</code> appears to be distributed with <code>setuptools</code>. Initially I
thought this might not be installed to the Python in the virtualenv, so I
installed <code>setuptools 2.6</code> (same version as Python) to the Python site-
packages in the virtualenv with the following command:</p>
<div class="code"><pre class="code literal-block"><span class="n">sh</span><span class="w"> </span><span class="n">setuptools</span><span class="o">-</span><span class="mf">0.6</span><span class="n">c11</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="mf">6.</span><span class="n">egg</span><span class="w"> </span><span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">dir</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">mydir</span><span class="o">/</span><span class="n">virtualenvs</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span>
</pre></div>

<p><strong>EDIT:</strong> This only happens inside the virtualenv. If I open a console outside
the virtualenv then <code>pkg_resources</code> is present, but I am still getting the
same error.</p>
<p>Any ideas as to why <code>pkg_resources</code> is not on the path?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>July 2018 Update</strong></p>
<p>Most people should now use <code>pip install setuptools</code> (possibly with <code>sudo</code>).</p>
<p>Some may need to (re)install the <code>python-setuptools</code> package via their package
manager (<code>apt-get install</code>, <code>yum install</code>, etc.).</p>
<p>This issue can be highly dependent on your OS and dev environment. See the
legacy/other answers below if the above isn't working for you.</p>
<p><strong>Explanation</strong></p>
<p>This error message is caused by a missing/broken Python <code>setuptools</code> package.
Per Matt M.'s comment and setuptools issue #581, the bootstrap script referred
to below is no longer the recommended installation method.</p>
<p>The bootstrap script instructions will remain below, in case it's still
helpful to anyone.</p>
<p><strong>Legacy Answer</strong></p>
<p>I encountered the same <code>ImportError</code> today while trying to use pip. Somehow
the <code>setuptools</code> package had been deleted in my Python environment.</p>
<p>To fix the issue, run the setup script for <code>setuptools</code>:</p>
<div class="code"><pre class="code literal-block">wget https://bootstrap.pypa.io/ez_setup.py -O - | python
</pre></div>

<p>(or if you don't have <code>wget</code> installed (e.g. OS X), try</p>
<div class="code"><pre class="code literal-block">curl https://bootstrap.pypa.io/ez_setup.py | python
</pre></div>

<p>possibly with <code>sudo</code> prepended.)</p>
<p>If you have any version of <code>distribute</code>, or any <code>setuptools</code> below 0.6, you
will have to uninstall it first.*</p>
<p>See Installation Instructions for further details.</p>
<hr>
<ul>
<li>If you already have a working <code>distribute</code>, upgrading it to the "compatibility wrapper" that switches you over to <code>setuptools</code> is easier. But if things are already broken, don't try that.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">sudo apt-get install --reinstall python-pkg-resources
</pre></div>

<p>fixed it for me in Debian. Seems like uninstalling some .deb packages (twisted
set in my case) has broken the path python uses to find packages</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/change-private-static-final-field-using-java-reflection/" class="u-url">Change private static final field using Java reflection</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/change-private-static-final-field-using-java-reflection/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:01:23+08:00" itemprop="datePublished" title="2023-02-18 05:01">2023-02-18 05:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a class with a <code>private static final</code> field that, unfortunately, I need
to change it at run-time.</p>
<p>Using reflection I get this error: <code>java.lang.IllegalAccessException: Can not
set static final boolean field</code></p>
<p>Is there any way to change the value?</p>
<div class="code"><pre class="code literal-block">Field hack = WarpTransform2D.class.getDeclaredField("USE_HACK");
hack.setAccessible(true);
hack.set(null, true);
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Assuming no <code>SecurityManager</code> is preventing you from doing this, you can use
<code>setAccessible</code> to get around <code>private</code> and resetting the modifier to get rid
of <code>final</code>, and actually modify a <code>private static final</code> field.</p>
<p>Here's an example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">java.lang.reflect.</span><span class="o">*</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">EverythingIsTrue</span> <span class="p">{</span>
   <span class="n">static</span> <span class="n">void</span> <span class="n">setFinalStatic</span><span class="p">(</span><span class="n">Field</span> <span class="n">field</span><span class="p">,</span> <span class="n">Object</span> <span class="n">newValue</span><span class="p">)</span> <span class="n">throws</span> <span class="ne">Exception</span> <span class="p">{</span>
      <span class="n">field</span><span class="o">.</span><span class="n">setAccessible</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>

      <span class="n">Field</span> <span class="n">modifiersField</span> <span class="o">=</span> <span class="n">Field</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">getDeclaredField</span><span class="p">(</span><span class="s2">"modifiers"</span><span class="p">);</span>
      <span class="n">modifiersField</span><span class="o">.</span><span class="n">setAccessible</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
      <span class="n">modifiersField</span><span class="o">.</span><span class="n">setInt</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">getModifiers</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Modifier</span><span class="o">.</span><span class="n">FINAL</span><span class="p">);</span>

      <span class="n">field</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">null</span><span class="p">,</span> <span class="n">newValue</span><span class="p">);</span>
   <span class="p">}</span>
   <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span> <span class="n">args</span><span class="p">[])</span> <span class="n">throws</span> <span class="ne">Exception</span> <span class="p">{</span>      
      <span class="n">setFinalStatic</span><span class="p">(</span><span class="n">Boolean</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">getField</span><span class="p">(</span><span class="s2">"FALSE"</span><span class="p">),</span> <span class="n">true</span><span class="p">);</span>

      <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"Everything is </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span> <span class="o">//</span> <span class="s2">"Everything is true"</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Assuming no <code>SecurityException</code> is thrown, the above code prints <code>"Everything
is true"</code>.</p>
<p>What's actually done here is as follows:</p>
<ul>
<li>The primitive <code>boolean</code> values <code>true</code> and <code>false</code> in <code>main</code> are autoboxed to reference type <code>Boolean</code> "constants" <code>Boolean.TRUE</code> and <code>Boolean.FALSE</code>
</li>
<li>Reflection is used to change the <code>public static final Boolean.FALSE</code> to refer to the <code>Boolean</code> referred to by <code>Boolean.TRUE</code>
</li>
<li>As a result, subsequently whenever a <code>false</code> is autoboxed to <code>Boolean.FALSE</code>, it refers to the same <code>Boolean</code> as the one refered to by <code>Boolean.TRUE</code>
</li>
<li>Everything that was <code>"false"</code> now is <code>"true"</code>
</li>
</ul>
<h4>Related questions</h4>
<ul>
<li>Using reflection to change <code>static final File.separatorChar</code> for unit testing</li>
<li>How to limit setAccessible to only “legitimate” uses? <ul>
<li>Has examples of messing with <code>Integer</code>'s cache, mutating a <code>String</code>, etc</li>
</ul>
</li>
</ul>
<hr>
<h4>Caveats</h4>
<p>Extreme care should be taken whenever you do something like this. It may not
work because a <code>SecurityManager</code> may be present, but even if it doesn't,
depending on usage pattern, it may or may not work.</p>
<blockquote>
<p>JLS 17.5.3 Subsequent Modification of Final Fields</p>
<p>In some cases, such as deserialization, the system will need to change the
<code>final</code> fields of an object after construction. <code>final</code> fields can be
changed via reflection and other implementation dependent means. The only
pattern in which this has reasonable semantics is one in which an object is
constructed and then the <code>final</code> fields of the object are updated. The
object should not be made visible to other threads, nor should the <code>final</code>
fields be read, until all updates to the <code>final</code> fields of the object are
complete. Freezes of a <code>final</code> field occur both at the end of the
constructor in which the <code>final</code> field is set, and immediately after each
modification of a <code>final</code> field via reflection or other special mechanism.</p>
<p>Even then, there are a number of complications. If a <code>final</code> field is
initialized to a compile-time constant in the field declaration, changes to
the <code>final</code> field may not be observed, since uses of that <code>final</code> field are
replaced at compile time with the compile-time constant.</p>
<p>Another problem is that the specification allows aggressive optimization of
<code>final</code> fields. Within a thread, it is permissible to reorder reads of a
<code>final</code> field with those modifications of a final field that do not take
place in the constructor.</p>
</blockquote>
<h4>See also</h4>
<ul>
<li>JLS 15.28 Constant Expression <ul>
<li>It's unlikely that this technique works with a primitive <code>private static final boolean</code>, because it's inlineable as a compile-time constant and thus the "new" value may not be observable</li>
</ul>
</li>
</ul>
<hr>
<h4>Appendix: On the bitwise manipulation</h4>
<p>Essentially,</p>
<div class="code"><pre class="code literal-block">field.getModifiers() &amp; ~Modifier.FINAL
</pre></div>

<p>turns off the bit corresponding to <code>Modifier.FINAL</code> from
<code>field.getModifiers()</code>. <code>&amp;</code> is the bitwise-and, and <code>~</code> is the bitwise-
complement.</p>
<h4>See also</h4>
<ul>
<li>Wikipedia/Bitwise operation</li>
</ul>
<hr>
<h4>Remember Constant Expressions</h4>
<p>Still not being able to solve this?, have fallen onto depression like I did
for it? Does your code looks like this?</p>
<div class="code"><pre class="code literal-block">public class A {
    private final String myVar = "Some Value";
}
</pre></div>

<p>Reading the comments on this answer, specially the one by @Pshemo, it reminded
me that Constant Expressions are handled different so it will be
<strong>impossible</strong> to modify it. Hence you will need to change your code to look
like this:</p>
<div class="code"><pre class="code literal-block">public class A {
    private final String myVar;

    private A() {
        myVar = "Some Value";
    }
}
</pre></div>

<p><em>if you are not the owner of the class... I feel you!</em></p>
<p>For more details about why this behavior read this?</p>
<p><br></p>
<h3>Suggest</h3>
<p>If the value assigned to a <code>static final boolean</code> field is known at compile-
time, it is a <em>constant.</em> Fields of primitive or <code>String</code> type can be compile-
time constants. A constant will be inlined in any code that references the
field. Since the field is not actually read at runtime, changing it then will
have no effect.</p>
<p>The Java language specification says this:</p>
<blockquote>
<p>If a field is a constant variable (§4.12.4), then deleting the keyword final
or changing its value will not break compatibility with pre-existing
binaries by causing them not to run, but <strong>they will not see any new value
for the usage of the field unless they are recompiled.</strong> This is true even
if the usage itself is not a compile-time constant expression (§15.28)</p>
</blockquote>
<p>Here's an example:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Flag</span> {
  <span class="n">static</span> <span class="n">final</span> <span class="n">boolean</span> <span class="n">FLAG</span> = <span class="n">true</span>;
}

<span class="k">class</span> <span class="n">Checker</span> {
  <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span>(<span class="n">String</span>... <span class="n">argv</span>) {
    <span class="n">System</span>.<span class="n">out</span>.<span class="n">println</span>(<span class="n">Flag</span>.<span class="n">FLAG</span>);
  }
}
</pre></div>

<p>If you decompile <code>Checker</code>, you'll see that instead of referencing
<code>Flag.FLAG</code>, the code simply pushes a value of 1 (<code>true</code>) onto the stack
(instruction #3).</p>
<div class="code"><pre class="code literal-block"><span class="mi">0</span><span class="o">:</span><span class="w">   </span><span class="n">getstatic</span><span class="w">       </span><span class="err">#</span><span class="mi">2</span><span class="o">;</span><span class="w"> </span><span class="c1">//Field java/lang/System.out:Ljava/io/PrintStream;</span>
<span class="mi">3</span><span class="o">:</span><span class="w">   </span><span class="n">iconst_1</span>
<span class="mi">4</span><span class="o">:</span><span class="w">   </span><span class="n">invokevirtual</span><span class="w">   </span><span class="err">#</span><span class="mi">3</span><span class="o">;</span><span class="w"> </span><span class="c1">//Method java/io/PrintStream.println:(Z)V</span>
<span class="mi">7</span><span class="o">:</span><span class="w">   </span><span class="k">return</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/visual-studio-code-open-tab-in-new-window/" class="u-url">Visual Studio Code open tab in new window</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/visual-studio-code-open-tab-in-new-window/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:00:57+08:00" itemprop="datePublished" title="2023-02-18 05:00">2023-02-18 05:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to open a tab in a new window in Visual Studio Code so I can move
it to another screen. If I drag the tab the other screen, a file is created.
Is there a shortcut to open a tab in a new Visual Studio Code window so I can
move it to another screen?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>On Windows and Linux, press <code>CTRL</code>+<code>K</code>, then release the keys and press <code>O</code>
(the letter O, not Zero).</p>
<p>On macOS, press <code>CMD</code>+<code>K</code>, then <code>O</code> (without holding <code>CMD</code>).</p>
<p>This will open the active file tab in a new window/instance.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is a <strong>very highly upvoted issue request in Github for Floating
Windows</strong>.</p>
<p>Until they support it, you can try the following <em>workarounds</em> :</p>
<h4>1. Duplicate Workspace in New Window [1]</h4>
<p>The Duplicate Workspace in new Window Command was added in v1.24 (May 2018) to
sort of address this.</p>
<ol>
<li>Open up Keyboard Shortcuts <code>Ctrl</code> + <code>K</code>, <code>Ctrl</code> + <code>S</code>
</li>
<li>Map <code>workbench.action.duplicateWorkspaceInNewWindow</code> to <code>Ctrl</code> + <code>Shift</code> + <code>N</code> or whatever you'd like</li>
</ol>
<p><img alt="Duplicate Workspace in New Window" src="images/03NXR.png"></p>
<h4>2. Open Active File in New Window [2]</h4>
<p>Rather than manually open a new window and dragging the file, you can do it
all with a single command.</p>
<ol>
<li>Open Active File in New Window <code>Ctrl</code> + <code>K</code>, <code>O</code>
</li>
</ol>
<p><img alt="Open Active File in New Window" src="images/g5UCL.png"></p>
<h4>3. New Window with Same File [3]</h4>
<p>As AllenBooTung also pointed out, you can open/drag any file in a separate
blank instance.</p>
<ol>
<li>Open New Window <code>Ctrl</code> + <code>Shift</code> + <code>N</code>
</li>
<li>Drag tab into new window</li>
</ol>
<h4>4. Open Workspace and Folder Simultaneously [4]</h4>
<p>VS Code will not allow you to open the same folder in two different instances,
but you can use Workspaces to open the same directory of files in a side by
side instance.</p>
<ol>
<li>Open Folder <code>Ctrl</code> + <code>K</code>,<code>Ctrl</code> + <code>O</code>
</li>
<li>Save Current Project As a Workspace</li>
<li>Open Folder <code>Ctrl</code> + <code>K</code>,<code>Ctrl</code> + <code>O</code>
</li>
</ol>
<hr>
<p>For <strong>any workaround</strong> , also consider setting setting up auto save so the
documents are kept in sync by updating the <code>files.autoSave</code> setting to
<code>afterDelay</code>, <code>onFocusChange</code>, or <code>onWindowChange</code></p>
<p><img alt="AutoSave" src="images/bdqYt.png"></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1258.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1256.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
