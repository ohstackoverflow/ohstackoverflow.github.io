<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 512) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-512.html">
<link rel="prev" href="index-513.html" type="text/html">
<link rel="next" href="index-511.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/whats-the-difference-between-array-and-while-declaring-a-javascript-array/" class="u-url">What’s the difference between "Array()" and "[]" while declaring a JavaScript array?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/whats-the-difference-between-array-and-while-declaring-a-javascript-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:44:42+08:00" itemprop="datePublished" title="2023-02-17 08:44">2023-02-17 08:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What's the real difference between declaring an array like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">();</span>
</pre></div>

<p>and</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>There is a difference, but there is no difference in that example.</p>
<p>Using the more verbose method: <code>new Array()</code> does have one extra option in the
parameters: if you pass a number to the constructor, you will get an array of
that length:</p>
<div class="code"><pre class="code literal-block">x = new Array(5);
alert(x.length); // 5
</pre></div>

<p>To illustrate the different ways to create an array:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[],</span><span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span>
<span class="w">    </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">(),</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'bar'</span><span class="p">],</span><span class="w">           </span><span class="o">//</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span>
<span class="w">    </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'bar'</span><span class="p">),</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">strings</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">different</span><span class="p">:</span>
<span class="w">    </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">             </span><span class="o">//</span><span class="w"> </span><span class="n">e</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span>
<span class="w">    </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">f</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">undefined</span>

<span class="p">;</span>
</pre></div>

<p>Another difference is that when using <code>new Array()</code> you're able to set the
size of the array, which affects the stack size. This can be useful if you're
getting stack overflows (Performance of Array.push vs Array.unshift) which is
what happens when the size of the array exceeds the size of the stack, and it
has to be re-created. So there can actually, depending on the use case, be a
performance increase when using <code>new Array()</code> because you can prevent the
overflow from happening.</p>
<p>As pointed out in this answer, <code>new Array(5)</code> will not actually add five
<code>undefined</code> items to the array. It simply adds space for five items. Be aware
that using <code>Array</code> this way makes it difficult to rely on <code>array.length</code> for
calculations.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The difference between creating an array with the implicit array and the array
constructor is subtle but important.</p>
<p>When you create an array using</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</pre></div>

<p>You're telling the interpreter to create a new runtime array. No extra
processing necessary at all. Done.</p>
<p>If you use:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">();</span>
</pre></div>

<p>You're telling the interpreter, I want to call the constructor "<code>Array</code>" and
generate an object. It then looks up through your execution context to find
the constructor to call, and calls it, creating your array.</p>
<p>You may think "Well, this doesn't matter at all. They're the same!".
Unfortunately you can't guarantee that.</p>
<p>Take the following example:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="k">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'SPARTA'</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">();</span>
<span class="k">var</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="n">alert</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="k">is</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">'SPARTA'</span>
<span class="n">alert</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="k">is</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">undefined</span>
<span class="n">a</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s1">'Woa'</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">TypeError</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">push</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span>
<span class="n">b</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s1">'Woa'</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="n">OK</span><span class="p">)</span>
</pre></div>

<p>In the above example, the first call will alert 'SPARTA' as you'd expect. The
second will not. You will end up seeing undefined. You'll also note that b
contains all of the native Array object functions such as <code>push</code>, where the
other does not.</p>
<p>While you may expect this to happen, it just illustrates the fact that <code>[]</code> is
not the same as <code>new Array()</code>.</p>
<p>It's probably best to just use <code>[]</code> if you know you just want an array. I also
do not suggest going around and redefining Array...</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/running-unittest-with-typical-test-directory-structure/" class="u-url">Running unittest with typical test directory structure</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/running-unittest-with-typical-test-directory-structure/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:44:13+08:00" itemprop="datePublished" title="2023-02-17 08:44">2023-02-17 08:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The very common directory structure for even a simple Python module seems to
be to separate the unit tests into their own <code>test</code> directory:</p>
<div class="code"><pre class="code literal-block">new_project/
    antigravity/
        antigravity.py
    test/
        test_antigravity.py
    setup.py
    etc.
</pre></div>

<p>My question is simply <strong>What's the usual way of actually running the tests?</strong>
I suspect this is obvious to everyone except me, but you can't just run
<code>python test_antigravity.py</code> from the test directory as its <code>import
antigravity</code> will fail as the module is not on the path.</p>
<p>I know I could modify PYTHONPATH and other search path related tricks, but I
can't believe that's the simplest way - it's fine if you're the developer but
not realistic to expect your users to use if they just want to check the tests
are passing.</p>
<p>The other alternative is just to copy the test file into the other directory,
but it seems a bit dumb and misses the point of having them in a separate
directory to start with.</p>
<p>So, if you had just downloaded the source to my new project how would you run
the unit tests? I'd prefer an answer that would let me say to my users: "To
run the unit tests do X."</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The best solution in my opinion is to use the <code>unittest</code> command line
interface which will add the directory to the <code>sys.path</code> so you don't have to
(done in the <code>TestLoader</code> class).</p>
<p>For example for a directory structure like this:</p>
<div class="code"><pre class="code literal-block">new_project
├── antigravity.py
└── test_antigravity.py
</pre></div>

<p>You can just run:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>new_project
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>test_antigravity
</pre></div>

<p>For a directory structure like yours:</p>
<div class="code"><pre class="code literal-block">new_project
├── antigravity
│   ├── __init__.py         # make it a package
│   └── antigravity.py
└── test
    ├── __init__.py         # also make test a package
    └── test_antigravity.py
</pre></div>

<p>And in the test modules inside the <code>test</code> package, you can import the
<code>antigravity</code> package and its modules as usual:</p>
<div class="code"><pre class="code literal-block"><span class="c1"># import the package</span>
<span class="kn">import</span> <span class="nn">antigravity</span>

<span class="c1"># import the antigravity module</span>
<span class="kn">from</span> <span class="nn">antigravity</span> <span class="kn">import</span> <span class="n">antigravity</span>

<span class="c1"># or an object inside the antigravity module</span>
<span class="kn">from</span> <span class="nn">antigravity.antigravity</span> <span class="kn">import</span> <span class="n">my_object</span>
</pre></div>

<p><strong>Running a single test module:</strong></p>
<p>To run a single test module, in this case <code>test_antigravity.py</code>:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>new_project
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>test.test_antigravity
</pre></div>

<p>Just reference the test module the same way you import it.</p>
<p><strong>Running a single test case or test method:</strong></p>
<p>Also you can run a single <code>TestCase</code> or a single test method:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>test.test_antigravity.GravityTestCase
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>test.test_antigravity.GravityTestCase.test_method
</pre></div>

<p><strong>Running all tests:</strong></p>
<p>You can also use test discovery which will discover and run all the tests for
you, they must be modules or packages named <code>test*.py</code> (can be changed with
the <code>-p, --pattern</code> flag):</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>new_project
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover
$<span class="w"> </span><span class="c1"># Also works without discover for Python 3</span>
$<span class="w"> </span><span class="c1"># as suggested by @Burrito in the comments</span>
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest
</pre></div>

<p>This will run all the <code>test*.py</code> modules inside the <code>test</code> package.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The simplest solution for your users is to provide an executable script
(<code>runtests.py</code> or some such) which bootstraps the necessary test environment,
including, if needed, adding your root project directory to <code>sys.path</code>
temporarily. This doesn't require users to set environment variables,
something like this works fine in a bootstrap script:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
</pre></div>

<p>Then your instructions to your users can be as simple as "<code>python
runtests.py</code>".</p>
<p>Of course, if the path you need really is <code>os.path.dirname(__file__)</code>, then
you don't need to add it to <code>sys.path</code> at all; Python always puts the
directory of the currently running script at the beginning of <code>sys.path</code>, so
depending on your directory structure, just locating your <code>runtests.py</code> at the
right place might be all that's needed.</p>
<p>Also, the unittest module in Python 2.7+ (which is backported as unittest2 for
Python 2.6 and earlier) now has test discovery built-in, so nose is no longer
necessary if you want automated test discovery: your user instructions can be
as simple as <code>python -m unittest discover</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/string-representation-of-an-enum/" class="u-url">String representation of an Enum</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/string-representation-of-an-enum/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:43:45+08:00" itemprop="datePublished" title="2023-02-17 08:43">2023-02-17 08:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have the following enumeration:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">AuthenticationMethod</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FORMS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="n">WINDOWSAUTHENTICATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="n">SINGLESIGNON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
<span class="p">}</span>
</pre></div>

<p>The problem however is that I need the word "FORMS" when I ask for
AuthenticationMethod.FORMS and not the id 1.</p>
<p>I have found the following solution for this problem (link):</p>
<p>First I need to create a custom attribute called "StringValue":</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">StringValue</span><span class="w"> </span>:<span class="w"> </span><span class="nv">System</span>.<span class="nv">Attribute</span>
{
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">readonly</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">_value</span><span class="c1">;</span>

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">StringValue</span><span class="ss">(</span><span class="nv">string</span><span class="w"> </span><span class="nv">value</span><span class="ss">)</span>
<span class="w">    </span>{
<span class="w">        </span><span class="nv">_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">value</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">Value</span>
<span class="w">    </span>{
<span class="w">        </span><span class="nv">get</span><span class="w"> </span>{<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">_value</span><span class="c1">; }</span>
<span class="w">    </span>}

}
</pre></div>

<p>Then I can add this attribute to my enumerator:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">AuthenticationMethod</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="n">StringValue</span><span class="p">(</span><span class="s2">"FORMS"</span><span class="p">)]</span>
<span class="w">    </span><span class="n">FORMS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="n">StringValue</span><span class="p">(</span><span class="s2">"WINDOWS"</span><span class="p">)]</span>
<span class="w">    </span><span class="n">WINDOWSAUTHENTICATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="n">StringValue</span><span class="p">(</span><span class="s2">"SSO"</span><span class="p">)]</span>
<span class="w">    </span><span class="n">SINGLESIGNON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
<span class="p">}</span>
</pre></div>

<p>And of course I need something to retrieve that StringValue:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">StringEnum</span>
{
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">GetStringValue</span><span class="ss">(</span><span class="nv">Enum</span><span class="w"> </span><span class="nv">value</span><span class="ss">)</span>
<span class="w">    </span>{
<span class="w">        </span><span class="nv">string</span><span class="w"> </span><span class="nv">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">null</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">Type</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">value</span>.<span class="nv">GetType</span><span class="ss">()</span><span class="c1">;</span>

<span class="w">        </span><span class="o">//</span><span class="nv">Check</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">our</span><span class="w"> </span><span class="nv">cached</span><span class="w"> </span><span class="nv">results</span>...

<span class="w">        </span><span class="o">//</span><span class="nv">Look</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">our</span><span class="w"> </span><span class="s1">'StringValueAttribute'</span>

<span class="w">        </span><span class="o">//</span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">field</span><span class="err">'s custom attributes</span>

<span class="err">        FieldInfo fi = type.GetField(value.ToString());</span>
<span class="err">        StringValue[] attrs =</span>
<span class="err">           fi.GetCustomAttributes(typeof(StringValue),</span>
<span class="err">                                   false) as StringValue[];</span>
<span class="err">        if (attrs.Length &gt; 0)</span>
<span class="err">        {</span>
<span class="err">            output = attrs[0].Value;</span>
<span class="err">        }</span>

<span class="err">        return output;</span>
<span class="err">    }</span>
<span class="err">}</span>
</pre></div>

<p>Good now I've got the tools to get a string value for an enumerator. I can
then use it like this:</p>
<div class="code"><pre class="code literal-block">string valueOfAuthenticationMethod = StringEnum.GetStringValue(AuthenticationMethod.FORMS);
</pre></div>

<p>Okay now all of these work like a charm but I find it a whole lot of work. I
was wondering if there is a better solution for this.</p>
<p>I also tried something with a dictionary and static properties but that wasn't
better either.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try type-safe-enum pattern.</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">sealed</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="w"> </span>{

<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">readonly</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">name</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">readonly</span><span class="w"> </span><span class="nv">int</span><span class="w"> </span><span class="nv">value</span><span class="c1">;</span>

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">readonly</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="w"> </span><span class="nv">FORMS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="w"> </span><span class="ss">(</span><span class="mi">1</span>,<span class="w"> </span><span class="s2">"FORMS"</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">readonly</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="w"> </span><span class="nv">WINDOWSAUTHENTICATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="w"> </span><span class="ss">(</span><span class="mi">2</span>,<span class="w"> </span><span class="s2">"WINDOWS"</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">readonly</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="w"> </span><span class="nv">SINGLESIGNON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="w"> </span><span class="ss">(</span><span class="mi">3</span>,<span class="w"> </span><span class="s2">"SSN"</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">AuthenticationMethod</span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">value</span>,<span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">name</span><span class="ss">)</span>{
<span class="w">        </span><span class="nv">this</span>.<span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">name</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">this</span>.<span class="nv">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">value</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">override</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">ToString</span><span class="ss">()</span>{
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">name</span><span class="c1">;</span>
<span class="w">    </span>}

}
</pre></div>

<hr>
<p><strong>Update</strong> Explicit (or implicit) type conversion can be done by</p>
<ul>
<li>
<p>adding static field with mapping</p>
<div class="code"><pre class="code literal-block">private static readonly Dictionary&lt;string, AuthenticationMethod&gt; instance = new Dictionary&lt;string,AuthenticationMethod&gt;();
</pre></div>

<ul>
<li>n.b. In order that the initialisation of the the "enum member" fields doesn't throw a NullReferenceException when calling the instance constructor, be sure to put the Dictionary field before the "enum member" fields in your class. This is because static field initialisers are called in declaration order, and before the static constructor, creating the weird and necessary but confusing situation that the instance constructor can be called before all static fields have been initialised, and before the static constructor is called.</li>
<li>
<p>filling this mapping in instance constructor</p>
<p>instance[name] = this;</p>
</li>
</ul>
</li>
<li>
<p>and adding user-defined type conversion operator</p>
<div class="code"><pre class="code literal-block">public static explicit operator AuthenticationMethod(string str)
</pre></div>

<p>{
    AuthenticationMethod result;
    if (instance.TryGetValue(str, out result))
        return result;
    else
        throw new InvalidCastException();
}</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Use method</p>
<div class="code"><pre class="code literal-block"><span class="n">Enum</span><span class="o">.</span><span class="n">GetName</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">MyEnumType</span><span class="p">,</span><span class="w">  </span><span class="n">object</span><span class="w"> </span><span class="n">enumvariable</span><span class="p">)</span>
</pre></div>

<p>as in (Assume <code>Shipper</code> is a defined Enum)</p>
<div class="code"><pre class="code literal-block">Shipper x = Shipper.FederalExpress;
string s = Enum.GetName(typeof(Shipper), x);
</pre></div>

<p>There are a bunch of other static methods on the Enum class worth
investigating too...</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-513.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-511.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
