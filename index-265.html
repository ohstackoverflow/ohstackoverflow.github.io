<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 265) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-265.html">
<link rel="prev" href="index-266.html" type="text/html">
<link rel="next" href="index-264.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/geng-gai-xiong-mao-zhong-de-lie-lei-xing/" class="u-url">更改熊猫中的列类型</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/geng-gai-xiong-mao-zhong-de-lie-lei-xing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:32:51+08:00" itemprop="datePublished" title="2023-02-17 02:32">2023-02-17 02:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我从列表列表创建了一个 DataFrame：</p>
<div class="code"><pre class="code literal-block">table = [
    ['a',  '1.2',  '4.2' ],
    ['b',  '70',   '0.03'],
    ['x',  '5',    '0'   ],
]

df = pd.DataFrame(table)
</pre></div>

<p>如何将列转换为特定类型？在这种情况下，我想将第 2 列和第 3 列转换为浮点数。</p>
<p>有没有办法在转换为 DataFrame 时指定类型？还是先创建 DataFrame
然后遍历列以更改每列的类型更好？理想情况下，我想以动态方式执行此操作，因为可能有数百列，而且我不想确切指定哪些列属于哪种类型。我只能保证每一列都包含相同类型的值。</p>
<p><br><br></p>
<h2>解答</h2>
<p>在 pandas 中转换类型有四个主要选项：</p>
<ol>
<li>
<p><code>to_numeric()</code>- 提供将非数字类型（例如字符串）安全地转换为合适的数字类型的功能。（另请参阅<code>to_datetime()</code>和<code>to_timedelta()</code>。）</p>
</li>
<li>
<p><code>astype()</code>- 将（几乎）任何类型转换为（几乎）任何其他类型（即使这样做不一定明智）。还允许您转换为分类类型（非常有用）。</p>
</li>
<li>
<p><code>infer_objects()</code>- 如果可能，将保存 Python 对象的对象列转换为 pandas 类型的实用方法。</p>
</li>
<li>
<p><code>convert_dtypes()</code>- 将 DataFrame 列转换为支持的“最佳可能”数据类型<code>pd.NA</code>（熊猫的对象表示缺失值）。</p>
</li>
</ol>
<p>继续阅读以了解每种方法的更详细解释和用法。</p>
<hr>
<h2>1.<code>to_numeric()</code>
</h2>
<p>将 DataFrame 的一列或多列转换为数值的最佳方法是使用<code>pandas.to_numeric()</code>.</p>
<p>此函数将尝试将非数字对象（例如字符串）适当地更改为整数或浮点数。</p>
<h3>基本用法</h3>
<p>输入<code>to_numeric()</code>是一个系列或 DataFrame 的单个列。</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series(["8", 6, "7.5", 3, "0.9"]) # mixed string and numeric values
&gt;&gt;&gt; s
0      8
1      6
2    7.5
3      3
4    0.9
dtype: object

&gt;&gt;&gt; pd.to_numeric(s) # convert everything to float values
0    8.0
1    6.0
2    7.5
3    3.0
4    0.9
dtype: float64
</pre></div>

<p>如您所见，返回了一个新系列。请记住将此输出分配给变量或列名以继续使用它：</p>
<div class="code"><pre class="code literal-block"># convert Series
my_series = pd.to_numeric(my_series)

# convert column "a" of a DataFrame
df["a"] = pd.to_numeric(df["a"])
</pre></div>

<p>您还可以使用它通过以下方法转换 DataFrame 的多个列<code>apply()</code>：</p>
<div class="code"><pre class="code literal-block"># convert all columns of DataFrame
df = df.apply(pd.to_numeric) # convert all columns of DataFrame

# convert just columns "a" and "b"
df[["a", "b"]] = df[["a", "b"]].apply(pd.to_numeric)
</pre></div>

<p>只要您的值都可以转换，这可能就是您所需要的。</p>
<h3>错误处理</h3>
<p>但是，如果某些值无法转换为数字类型怎么办？</p>
<p><code>to_numeric()</code>还采用一个<code>errors</code>关键字参数，允许您将非数字值强制为<code>NaN</code>，或者只是忽略包含这些值的列。</p>
<p><code>s</code>这是一个使用具有对象 dtype 的一系列字符串的示例：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series(['1', '2', '4.7', 'pandas', '10'])
&gt;&gt;&gt; s
0         1
1         2
2       4.7
3    pandas
4        10
dtype: object
</pre></div>

<p>默认行为是在无法转换值时引发。在这种情况下，它无法处理字符串“pandas”：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s) # or pd.to_numeric(s, errors='raise')
ValueError: Unable to parse string
</pre></div>

<p>我们可能希望将“pandas”视为缺失/错误的数值，而不是失败。我们可以使用关键字参数将无效值强制为<code>NaN</code>如下<code>errors</code>：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, errors='coerce')
0     1.0
1     2.0
2     4.7
3     NaN
4    10.0
dtype: float64
</pre></div>

<p>如果遇到无效值，第三个选项<code>errors</code>是忽略操作：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, errors='ignore')
# the original Series is returned untouched
</pre></div>

<p>最后一个选项对于转换整个 DataFrame 特别有用，但不知道我们的哪些列可以可靠地转换为数字类型。在那种情况下，只需写：</p>
<div class="code"><pre class="code literal-block">df.apply(pd.to_numeric, errors='ignore')
</pre></div>

<p>该函数将应用于 DataFrame 的每一列。可以转换为数字类型的列将被转换，而不能转换的列（例如，它们包含非数字字符串或日期）将被保留。</p>
<h3>向下倾诉</h3>
<p>默认情况下，转换<code>to_numeric()</code>将为您提供 an<code>int64</code>或<code>float64</code>dtype（或您的平台原生的任何整数宽度）。</p>
<p>这通常是你想要的，但是如果你想节省一些内存并使用更紧凑的数据类型，比如<code>float32</code>, 或 ，该<code>int8</code>怎么办？</p>
<p><code>to_numeric()</code>让您可以选择向下转换为<code>'integer'</code>, <code>'signed'</code>, <code>'unsigned'</code>,
<code>'float'</code>。这是一个简单的整数类型系列的示例<code>s</code>：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series([1, 2, -7])
&gt;&gt;&gt; s
0    1
1    2
2   -7
dtype: int64
</pre></div>

<p>向下转换<code>'integer'</code>使用可以容纳值的最小可能整数：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, downcast='integer')
0    1
1    2
2   -7
dtype: int8
</pre></div>

<p>向下转换<code>'float'</code>类似地选择一个比普通浮动类型更小的类型：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, downcast='float')
0    1.0
1    2.0
2   -7.0
dtype: float32
</pre></div>

<hr>
<h2>2.<code>astype()</code>
</h2>
<p>该<code>astype()</code>方法使您能够明确您希望 DataFrame 或 Series 具有的数据类型。它用途广泛，您可以尝试从一种类型过渡到任何其他类型。</p>
<h3>基本用法</h3>
<p>只需选择一种类型：您可以使用 NumPy dtype（例如<code>np.int16</code>）、一些 Python 类型（例如 bool）或特定于 pandas
的类型（例如 categorical dtype）。</p>
<p>在您要转换的对象上调用该方法，<code>astype()</code>并将尝试为您转换它：</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">DataFrame</span><span class="w"> </span><span class="nv">columns</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">int64</span><span class="w"> </span><span class="nv">dtype</span>
<span class="nv">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">df</span>.<span class="nv">astype</span><span class="ss">(</span><span class="nv">int</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">column</span><span class="w"> </span><span class="s2">"a"</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">int64</span><span class="w"> </span><span class="nv">dtype</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"b"</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">complex</span><span class="w"> </span><span class="nv">type</span>
<span class="nv">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">df</span>.<span class="nv">astype</span><span class="ss">(</span>{<span class="s2">"a"</span>:<span class="w"> </span><span class="nv">int</span>,<span class="w"> </span><span class="s2">"b"</span>:<span class="w"> </span><span class="nv">complex</span>}<span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">Series</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">float16</span><span class="w"> </span><span class="nv">type</span>
<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">astype</span><span class="ss">(</span><span class="nv">np</span>.<span class="nv">float16</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">Series</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Python</span><span class="w"> </span><span class="nv">strings</span>
<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">astype</span><span class="ss">(</span><span class="nv">str</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">Series</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">categorical</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">docs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">details</span>
<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">astype</span><span class="ss">(</span><span class="s1">'category'</span><span class="ss">)</span>
</pre></div>

<p>注意我说的是“尝试”——如果<code>astype()</code>不知道如何转换 Series 或 DataFrame 中的值，则会引发错误。例如，如果您有
a<code>NaN</code>或<code>inf</code>值，尝试将其转换为整数时会出错。</p>
<p>从 pandas 0.20.0 开始，可以通过传递<code>errors='ignore'</code>. 您的原始物品将原封不动地退回。</p>
<h3>当心</h3>
<p><code>astype()</code>功能强大，但有时会“错误地”转换值。例如：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series([1, 2, -7])
&gt;&gt;&gt; s
0    1
1    2
2   -7
dtype: int64
</pre></div>

<p>这些都是小整数，那么如何转换为无符号 8 位类型以节省内存呢？</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s.astype(np.uint8)
0      1
1      2
2    249
dtype: uint8
</pre></div>

<p>转换成功了，但是 -7 被环绕变成 249（即 2 8 - 7）！</p>
<p>尝试向下转换使用<code>pd.to_numeric(s, downcast='unsigned')</code>instead 可以帮助防止此错误。</p>
<hr>
<h2>3.<code>infer_objects()</code>
</h2>
<p>Version 0.21.0 of pandas introduced the method <code>infer_objects()</code> for
converting columns of a DataFrame that have an object datatype to a more
specific type (soft conversions).</p>
<p>For example, here's a DataFrame with two columns of object type. One holds
actual integers and the other holds strings representing integers:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df = pd.DataFrame({'a': [7, 1, 5], 'b': ['3','2','1']}, dtype='object')
&gt;&gt;&gt; df.dtypes
a    object
b    object
dtype: object
</pre></div>

<p>Using <code>infer_objects()</code>, you can change the type of column 'a' to int64:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df = df.infer_objects()
&gt;&gt;&gt; df.dtypes
a     int64
b    object
dtype: object
</pre></div>

<p>Column 'b' has been left alone since its values were strings, not integers. If
you wanted to force both columns to an integer type, you could use
<code>df.astype(int)</code> instead.</p>
<hr>
<h2>4. <code>convert_dtypes()</code>
</h2>
<p>Version 1.0 and above includes a method <code>convert_dtypes()</code> to convert Series
and DataFrame columns to the best possible dtype that supports the <code>pd.NA</code>
missing value.</p>
<p>Here "best possible" means the type most suited to hold the values. For
example, this a pandas integer type, if all of the values are integers (or
missing values): an object column of Python integer objects are converted to
<code>Int64</code>, a column of NumPy <code>int32</code> values, will become the pandas dtype
<code>Int32</code>.</p>
<p>With our <code>object</code> DataFrame <code>df</code>, we get the following result:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df.convert_dtypes().dtypes                                             
a     Int64
b    string
dtype: object
</pre></div>

<p>Since column 'a' held integer values, it was converted to the <code>Int64</code> type
(which is capable of holding missing values, unlike <code>int64</code>).</p>
<p>Column 'b' contained string objects, so was changed to pandas' <code>string</code> dtype.</p>
<p>By default, this method will infer the type from object values in each column.
We can change this by passing <code>infer_objects=False</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df.convert_dtypes(infer_objects=False).dtypes                          
a    object
b    string
dtype: object
</pre></div>

<p>现在“a”列仍然是一个对象列：pandas 知道它可以被描述为一个“整数”列（它在内部运行<code>infer_dtype</code>）但没有准确推断它应该具有的整数
dtype，因此没有转换它。列 'b' 再次转换为 'string' dtype，因为它被识别为保存 'string' 值。</p>
<p><br></p>
<h3>更多建议</h3>
<p>用这个：</p>
<div class="code"><pre class="code literal-block">a = [['a', '1.2', '4.2'], ['b', '70', '0.03'], ['x', '5', '0']]
df = pd.DataFrame(a, columns=['one', 'two', 'three'])
df

Out[16]:
  one  two three
0   a  1.2   4.2
1   b   70  0.03
2   x    5     0

df.dtypes

Out[17]:
one      object
two      object
three    object

df[['two', 'three']] = df[['two', 'three']].astype(float)

df.dtypes

Out[19]:
one       object
two      float64
three    float64
</pre></div>

<p><br><br><a href="posts/change-column-type-in-pandas/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pythonzhong-duan-yan-de-yong-tu-shi-shi-yao/" class="u-url">Python中“断言”的用途是什么？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pythonzhong-duan-yan-de-yong-tu-shi-shi-yao/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:32:23+08:00" itemprop="datePublished" title="2023-02-17 02:32">2023-02-17 02:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>是什么<code>assert</code>意思？它是如何使用的？</p>
<p><br><br></p>
<h2>解答</h2>
<p>该<code>assert</code>语句几乎存在于每种编程语言中。它有两个主要用途：</p>
<ol>
<li>
<p>它有助于在您的程序中及早发现原因明确的问题，而不是在其他操作失败时才发现问题。例如，Python 中的类型错误在实际引发 if 没有及早发现之前可能会经过几层代码<code>Exception</code>。</p>
</li>
<li>
<p>它作为其他开发人员阅读代码的文档，他们看到了<code>assert</code>并且可以自信地说它的条件从现在开始成立。</p>
</li>
</ol>
<p>当你做...</p>
<div class="code"><pre class="code literal-block">assert condition
</pre></div>

<p>...您告诉程序测试该条件，如果条件为假，则立即触发错误。</p>
<p>在 Python 中，它大致等同于：</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">condition</span>:
<span class="w">    </span><span class="nv">raise</span><span class="w"> </span><span class="nv">AssertionError</span><span class="ss">()</span>
</pre></div>

<p>在 Python shell 中尝试：</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; assert True # nothing happens
&gt;&gt;&gt; assert False
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AssertionError
</pre></div>

<p>断言可以包含一条可选消息，您可以在运行解释器时禁用它们。</p>
<p>要在断言失败时打印消息：</p>
<div class="code"><pre class="code literal-block">assert False, "Oh no! This assertion failed!"
</pre></div>

<p>不要像函数一样使用括号来调用 <strong>。</strong><code>assert</code>这是一个声明。如果这样做，<code>assert(condition,
message)</code>您将以元<code>assert</code>组<code>(condition, message)</code>作为第一个参数运行。</p>
<p>至于禁用它们，当<code>python</code>以优化模式运行时，其中<code>__debug__</code>is <code>False</code>、 assert 语句将被忽略。只需传递<code>-O</code>标志：</p>
<div class="code"><pre class="code literal-block">python -O script.py
</pre></div>

<p>有关相关文档，请参见此处。</p>
<p><br></p>
<h3>更多建议</h3>
<p>注意括号。正如其他答案中所指出的那样，在 Python 3
中，<code>assert</code>仍然是一个语句，因此通过类比<code>print(..)</code>，可以将相同的内容推断为<code>assert(..)</code>or<code>raise(..)</code>但你不应该这样做。</p>
<p>这是错误的：</p>
<div class="code"><pre class="code literal-block">assert(2 + 2 == 5, "Houston we've got a problem")
</pre></div>

<p>这是对的：</p>
<div class="code"><pre class="code literal-block">assert 2 + 2 == 5, "Houston we've got a problem"
</pre></div>

<p>第一个不起作用的原因是<code>bool( (False, "Houston we've got a problem") )</code>评估为<code>True</code>.</p>
<p>在语句 中<code>assert(False)</code>，这些只是围绕
的多余括号<code>False</code>，它们计算出它们的内容。但是<code>assert(False,)</code>括号现在是一个元组，一个非空元组<code>True</code>在布尔上下文中求值。</p>
<p><br><br><a href="posts/what-is-the-use-of-assert-in-python/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-shan-chu-wei-tui-song-de-git-ti-jiao/" class="u-url">如何删除未推送的 git 提交？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-shan-chu-wei-tui-song-de-git-ti-jiao/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:31:55+08:00" itemprop="datePublished" title="2023-02-17 02:31">2023-02-17 02:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我不小心犯错了分支。如何删除该提交？</p>
<p><br><br></p>
<h2>解答</h2>
<p>删除最近的提交，保留你所做的工作：</p>
<div class="code"><pre class="code literal-block">git reset --soft HEAD~1
</pre></div>

<p>删除最近的提交，破坏你所做的 <strong>工作：</strong></p>
<div class="code"><pre class="code literal-block">git reset --hard HEAD~1
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>我想知道为什么我找到的最佳答案只出现在评论中！ <strong>（ Daenyth 以 86 票赞成）</strong></p>
<div class="code"><pre class="code literal-block">git reset --hard origin
</pre></div>

<p>此命令会将本地存储库与远程存储库同步，从而消除您在本地所做的所有更改。您还可以按照 Cleary
在评论中建议的那样执行以下操作来获取您在原点中拥有的确切分支。</p>
<div class="code"><pre class="code literal-block">git reset --hard origin/&lt;branch&gt;
</pre></div>

<p><br><br><a href="posts/how-do-i-delete-unpushed-git-commits/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-266.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-264.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
