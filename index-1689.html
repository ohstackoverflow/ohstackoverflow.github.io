<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1689) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1689.html">
<link rel="prev" href="index-1690.html" type="text/html">
<link rel="next" href="index-1688.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/changing-api-level-android-studio/" class="u-url">Changing API level Android Studio</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/changing-api-level-android-studio/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:01:12+08:00" itemprop="datePublished" title="2023-03-03 07:01">2023-03-03 07:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to change the minimum SDK version in Android Studio from API 12 to API
14. I have tried changing it in the manifest file, i.e.,</p>
<div class="code"><pre class="code literal-block">&lt;uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="18" /&gt;
</pre></div>

<p>and rebuilding the project, but I still get the Android Studio IDE throwing up
some errors. I presume I have to set the min SDK in 'project properties' or
something similar so the IDE recognizes the change, but I can't find where
this is done in Android Studio.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>When you want to update your minSdkVersion in an existing Android project...</p>
<ol>
<li>
<strong>Update<code>build.gradle (Module: YourProject)</code></strong> under <strong>Gradle Script</strong> and<br>
make sure that it is <strong>NOT</strong> <code>build.gradle (Project: YourProject.app)</code>.</li>
</ol>
<p>An example of build.gradle:</p>
<div class="code"><pre class="code literal-block"><span class="nv">apply</span><span class="w"> </span><span class="nv">plugin</span>:<span class="w"> </span><span class="s1">'com.android.application'</span>

<span class="nv">android</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">compileSdkVersion</span><span class="w"> </span><span class="mi">28</span>
<span class="w">    </span><span class="nv">buildToolsVersion</span><span class="w"> </span><span class="s2">"28.0.2"</span>

<span class="w">    </span><span class="nv">defaultConfig</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">applicationId</span><span class="w"> </span><span class="s2">"com.stackoverflow.answer"</span>
<span class="w">        </span><span class="nv">minSdkVersion</span><span class="w"> </span><span class="mi">21</span>
<span class="w">        </span><span class="nv">targetSdkVersion</span><span class="w"> </span><span class="mi">28</span>
<span class="w">        </span><span class="nv">versionCode</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="nv">versionName</span><span class="w"> </span><span class="s2">"1.0"</span>
<span class="w">    </span>}
<span class="w">    </span><span class="nv">buildTypes</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">release</span><span class="w"> </span>{
<span class="w">            </span><span class="nv">minifyEnabled</span><span class="w"> </span><span class="nv">false</span>
<span class="w">            </span><span class="nv">proguardFiles</span><span class="w"> </span><span class="nv">getDefaultProguardFile</span><span class="ss">(</span><span class="s1">'proguard-android.txt'</span><span class="ss">)</span>,<span class="w"> </span><span class="s1">'proguard-rules.pro'</span>
<span class="w">    </span>}
}

<span class="nv">dependencies</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">androidTestCompile</span><span class="w"> </span><span class="s1">'junit:junit:4.12'</span>
<span class="w">    </span><span class="nv">compile</span><span class="w"> </span><span class="nv">fileTree</span><span class="ss">(</span><span class="nv">dir</span>:<span class="w"> </span><span class="s1">'libs'</span>,<span class="w"> </span><span class="k">include</span>:<span class="w"> </span>[<span class="s1">'*.jar'</span>]<span class="ss">)</span>
}
</pre></div>

<ol>
<li>
<strong>Sync gradle button</strong> (refresh all gradle projects also works).</li>
</ol>
<p><img alt="enter image description here" src="images/m5gLC.png"><br>
or<br><img alt="enter image description here" src="images/6wS2Y.png"></p>
<ol>
<li><strong>Rebuild project</strong></li>
</ol>
<p><strong>After</strong> updating the <em>build.gradle</em> 's <code>minSdkVersion</code>, you have to click on
the button to sync gradle file ("Sync Project with Gradle files"). That will
clear the marker.</p>
<p>Updating <em>manifest.xml</em> , for e.g. deleting any references to SDK levels in
the manifest file, is NOT necessary anymore in Android Studio.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Update <strong>2022</strong></p>
<p>For Android Studio users:</p>
<ol>
<li>
<p>Right click the <strong>App</strong> directory and<br>
Choose the " <strong>Open Module Settings</strong> " (F4) option <img alt="Right click App then
choose Open Module Settings" src="images/2MydR.png"></p>
</li>
<li>
<p>Change the " <strong>Min SDK Version</strong> " in the <strong>Default Config</strong> tab<br><img alt="Choose Min SDK Version" src="images/1Bc7H.png"> NOTE:<br>
You might also want to change;<br>
the " <strong>Target SDK Version</strong> " in the <strong>Default Config</strong> tab and<br>
the " <strong>Compile SDK Version</strong> " in the <strong>Properties</strong> tab <img alt="Choose Compile SDK
Version" src="images/dOTwE.png"></p>
</li>
<li>
<p>Click <strong>Apply</strong> , then <strong>OK</strong> , and Gradle should automatically be synced</p>
</li>
</ol>
<hr>
<p>For users of older Android Studio versions:</p>
<ol>
<li>
<p>Right click the <strong>App</strong> directory and<br>
Choose the " <strong>Module Setting</strong> " (F4) option</p>
</li>
<li>
<p>Change the <strong>ADK Platform</strong> to what you need</p>
</li>
<li>Click <strong>OK</strong> and Gradle should automatically be synced</li>
</ol>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-change-legend-fontsize-with-matplotlib-pyplot/" class="u-url">How to change legend fontsize with matplotlib.pyplot</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-change-legend-fontsize-with-matplotlib-pyplot/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:00:49+08:00" itemprop="datePublished" title="2023-03-03 07:00">2023-03-03 07:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Simple question here: I'm trying to get the size of my legend using
<code>matplotlib.pyplot</code> to be smaller (i.e., the text to be smaller). The code I'm
using goes something like this:</p>
<div class="code"><pre class="code literal-block"><span class="n">plot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">sum_cf</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="s1">'Sum of Cause Fractions'</span><span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">[:,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w">  </span><span class="n">color</span><span class="o">=</span><span class="s1">'b'</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="s1">'Dis 1: cf = .6, var = .2'</span><span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">[:,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span><span class="w">  </span><span class="n">color</span><span class="o">=</span><span class="s1">'r'</span><span class="p">,</span><span class="w">  </span><span class="n">label</span><span class="o">=</span><span class="s1">'Dis 2: cf = .2, var = .1'</span><span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">[:,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w">  </span><span class="n">color</span><span class="o">=</span><span class="s1">'g'</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="s1">'Dis 3: cf = .1, var = .01'</span><span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can set an individual font size for the legend by adjusting the <code>prop</code>
keyword.</p>
<div class="code"><pre class="code literal-block">plot.legend(loc=2, prop={'size': 6})
</pre></div>

<p>This takes a dictionary of keywords corresponding to
<code>matplotlib.font_manager.FontProperties</code> properties. See the documentation for
legend:</p>
<blockquote>
<p>Keyword arguments:</p>
<div class="code"><pre class="code literal-block"><span class="nv">prop</span>:<span class="w"> </span>[<span class="w"> </span><span class="nv">None</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">FontProperties</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">dict</span><span class="w"> </span>]
<span class="w">    </span><span class="nv">A</span><span class="w"> </span><span class="nv">matplotlib</span>.<span class="nv">font_manager</span>.<span class="nv">FontProperties</span><span class="w"> </span><span class="nv">instance</span>.<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">prop</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span>
<span class="w">    </span><span class="nv">dictionary</span>,<span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">instance</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">created</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">prop</span>.<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">None</span>,<span class="w"> </span><span class="nv">use</span>
<span class="w">    </span><span class="nv">rc</span><span class="w"> </span><span class="nv">settings</span>.
</pre></div>

</blockquote>
<p>It is also possible, as of version 1.2.1, to use the keyword <code>fontsize</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>using <code>import matplotlib.pyplot as plt</code></p>
<p><strong>Method 1: specify the fontsize when calling legend (repetitive)</strong></p>
<div class="code"><pre class="code literal-block">plt.legend(fontsize=20) # using a size in points
plt.legend(fontsize="x-large") # using a named size
</pre></div>

<p>With this method you can set the fontsize for each legend at creation
(allowing you to have multiple legends with different fontsizes). However, you
will have to type everything manually each time you create a legend.</p>
<p>(Note: @Mathias711 listed the available named fontsizes in his answer)</p>
<p><strong>Method 2: specify the fontsize in rcParams (convenient)</strong></p>
<div class="code"><pre class="code literal-block">plt.rc('legend',fontsize=20) # using a size in points
plt.rc('legend',fontsize='medium') # using a named size
</pre></div>

<p>With this method you set the default legend fontsize, and all legends will
automatically use that unless you specify otherwise using method 1. This means
you can set your legend fontsize at the beginning of your code, and not worry
about setting it for each individual legend.</p>
<p>If you use a named size e.g. <code>'medium'</code>, then the legend text will scale with
the global <code>font.size</code> in <code>rcParams</code>. To change <code>font.size</code> use
<code>plt.rc(font.size='medium')</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-push-to-history-in-react-router-v4/" class="u-url">How to push to History in React Router v4?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-push-to-history-in-react-router-v4/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:00:22+08:00" itemprop="datePublished" title="2023-03-03 07:00">2023-03-03 07:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In the current version of React Router (v3) I can accept a server response and
use <code>browserHistory.push</code> to go to the appropriate response page. However,
this isn't available in v4, and I'm not sure what the appropriate way to
handle this is.</p>
<p>In this example, using Redux, <em>components/app-product-form.js</em> calls
<code>this.props.addProduct(props)</code> when a user submits the form. When the server
returns a success, the user is taken to the Cart page.</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">actions</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">js</span>
<span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">addProduct</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">dispatch</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="w">    </span><span class="n">axios</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="err">`</span><span class="o">$</span><span class="p">{</span><span class="n">ROOT_URL</span><span class="p">}</span><span class="o">/</span><span class="n">cart</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">props</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="p">)</span>
<span class="w">      </span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">dispatch</span><span class="p">({</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="n">types</span><span class="o">.</span><span class="n">AUTH_USER</span><span class="w"> </span><span class="p">});</span>
<span class="w">        </span><span class="n">localStorage</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="s1">'token'</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">token</span><span class="p">);</span>
<span class="w">        </span><span class="n">browserHistory</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s1">'/cart'</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">React</span><span class="w"> </span><span class="n">Router</span><span class="w"> </span><span class="n">V4</span>
<span class="w">      </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>

<p>How can I make a redirect to the Cart page from function for React Router v4?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the <code>history</code> methods outside of your components. Try by the
following way.</p>
<p>First, create a <code>history</code> object used the history package:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="n">src</span><span class="o">/</span><span class="n">history</span><span class="o">.</span><span class="n">js</span>

<span class="kn">import</span> <span class="p">{</span> <span class="n">createBrowserHistory</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'history'</span><span class="p">;</span>

<span class="n">export</span> <span class="n">default</span> <span class="n">createBrowserHistory</span><span class="p">();</span>
</pre></div>

<p>Then wrap it in <code>&lt;Router&gt;</code> ( <strong>please note</strong> , you should use <code>import { Router
}</code> instead of <code>import { BrowserRouter as Router }</code>):</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">jsx</span>

<span class="o">//</span> <span class="o">...</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Router</span><span class="p">,</span> <span class="n">Route</span><span class="p">,</span> <span class="n">Link</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'react-router-dom'</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">history</span> <span class="kn">from</span> <span class="s1">'./history'</span><span class="p">;</span>

<span class="n">ReactDOM</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="n">Provider</span> <span class="n">store</span><span class="o">=</span><span class="p">{</span><span class="n">store</span><span class="p">}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Router</span> <span class="n">history</span><span class="o">=</span><span class="p">{</span><span class="n">history</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">Link</span> <span class="n">to</span><span class="o">=</span><span class="s2">"/"</span><span class="o">&gt;</span><span class="n">Home</span><span class="o">&lt;/</span><span class="n">Link</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">Link</span> <span class="n">to</span><span class="o">=</span><span class="s2">"/login"</span><span class="o">&gt;</span><span class="n">Login</span><span class="o">&lt;/</span><span class="n">Link</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Route</span> <span class="n">exact</span> <span class="n">path</span><span class="o">=</span><span class="s2">"/"</span> <span class="n">component</span><span class="o">=</span><span class="p">{</span><span class="n">HomePage</span><span class="p">}</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">Route</span> <span class="n">path</span><span class="o">=</span><span class="s2">"/login"</span> <span class="n">component</span><span class="o">=</span><span class="p">{</span><span class="n">LoginPage</span><span class="p">}</span> <span class="o">/&gt;</span>
      <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">Router</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">Provider</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'root'</span><span class="p">),</span>
<span class="p">);</span>
</pre></div>

<p>Change your current location from any place, for example:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span> <span class="n">src</span><span class="o">/</span><span class="n">actions</span><span class="o">/</span><span class="n">userActionCreators</span><span class="o">.</span><span class="n">js</span>

<span class="o">//</span> <span class="o">...</span>
<span class="kn">import</span> <span class="nn">history</span> <span class="kn">from</span> <span class="s1">'../history'</span><span class="p">;</span>

<span class="n">export</span> <span class="n">function</span> <span class="n">login</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">function</span> <span class="p">(</span><span class="n">dispatch</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">loginRemotely</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
      <span class="o">.</span><span class="n">then</span><span class="p">((</span><span class="n">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="o">...</span>
        <span class="n">history</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
      <span class="p">});</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></div>

<hr>
<p><strong>UPD</strong> : You can also see a slightly different example in React Router FAQ.</p>
<p><br></p>
<h3>Suggest</h3>
<p>React Router v4 is fundamentally different from v3 (and earlier) and you
cannot do <code>browserHistory.push()</code> like you used to.</p>
<p>This discussion seems related if you want more info:</p>
<blockquote>
<ul>
<li>Creating a new <code>browserHistory</code> won't work because <code>&lt;BrowserRouter&gt;</code>
creates its own history instance, and listens for changes on that. So a
different instance will change the url but not update the <code>&lt;BrowserRouter&gt;</code>.</li>
<li>
<code>browserHistory</code> is not exposed by react-router in v4, only in v2.
</li>
</ul>
</blockquote>
<hr>
<p>Instead you have a few options to do this:</p>
<ul>
<li>
<h4>Use the <code>withRouter</code> high-order component</h4>
</li>
</ul>
<p>Instead you should use the <code>withRouter</code> high order component, and wrap that to
the component that will push to history. For example:</p>
<div class="code"><pre class="code literal-block">    <span class="kn">import</span> <span class="nn">React</span> <span class="kn">from</span> <span class="s2">"react"</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">withRouter</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"react-router-dom"</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyComponent</span> <span class="n">extends</span> <span class="n">React</span><span class="o">.</span><span class="n">Component</span> <span class="p">{</span>
  <span class="o">...</span>
  <span class="n">myFunction</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">"/some/Path"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="o">...</span>
<span class="p">}</span>
<span class="n">export</span> <span class="n">default</span> <span class="n">withRouter</span><span class="p">(</span><span class="n">MyComponent</span><span class="p">);</span>
</pre></div>

<p>Check out the <strong>official documentation</strong> for more info:</p>
<blockquote>
<p>You can get access to the <code>history</code> object’s properties and the closest
<code>&lt;Route&gt;</code>'s <code>match</code> via the withRouter higher-order component. withRouter
will re-render its component every time the route changes with the same
props as <code>&lt;Route&gt;</code> render props: <code>{ match, location, history }</code>.</p>
</blockquote>
<hr>
<ul>
<li>
<h4>Use the <code>context</code> API</h4>
</li>
</ul>
<p>Using the context might be one of the easiest solutions, but being an
experimental API it is unstable and unsupported. Use it only when everything
else fails. Here's an example:</p>
<div class="code"><pre class="code literal-block">    <span class="kn">import</span> <span class="nn">React</span> <span class="kn">from</span> <span class="s2">"react"</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">PropTypes</span> <span class="kn">from</span> <span class="s2">"prop-types"</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyComponent</span> <span class="n">extends</span> <span class="n">React</span><span class="o">.</span><span class="n">Component</span> <span class="p">{</span>
  <span class="n">static</span> <span class="n">contextTypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">router</span><span class="p">:</span> <span class="n">PropTypes</span><span class="o">.</span><span class="n">object</span>
  <span class="p">}</span>
  <span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
     <span class="nb">super</span><span class="p">(</span><span class="n">props</span><span class="p">,</span> <span class="n">context</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="o">...</span>
  <span class="n">myFunction</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">"/some/Path"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div>

<p>Have a look at the <strong>official documentation</strong> on context:</p>
<blockquote>
<p>If you want your application to be stable, don't use context. It is an
experimental API and it is likely to break in future releases of React.</p>
<p>If you insist on using context despite these warnings, try to isolate your
use of context to a small area and avoid using the context API directly when
possible so that it's easier to upgrade when the API changes.</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1690.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1688.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
