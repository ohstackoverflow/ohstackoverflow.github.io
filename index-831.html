<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 831) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-831.html">
<link rel="prev" href="index-832.html" type="text/html">
<link rel="next" href="index-830.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-rake-db-migrate-db-reset-and-db-schema-load/" class="u-url">Difference between rake db:migrate db:reset and db:schema:load</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-rake-db-migrate-db-reset-and-db-schema-load/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:08:01+08:00" itemprop="datePublished" title="2023-02-17 17:08">2023-02-17 17:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The difference between <code>rake db:migrate</code> and <code>rake db:reset</code> is pretty clear
to me. The thing which I don't understand is how <code>rake db:schema:load</code> is
different from the former two.</p>
<p>Just to be sure that I am on the same page:</p>
<ul>
<li>
<code>rake db:migrate</code> - Runs the migrations which haven't been run yet.</li>
<li>
<code>rake db:reset</code> - Clears the database (presumably does a <code>rake db:drop</code> + <code>rake db:create</code> + <code>rake db:migrate</code>) and runs migration on a fresh database.</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<ul>
<li>
<p><strong>db:migrate</strong> runs (single) migrations that have not run yet.</p>
</li>
<li>
<p><strong>db:create</strong> creates the database</p>
</li>
<li>
<p><strong>db:drop</strong> deletes the database</p>
</li>
<li>
<p><strong>db:schema:load</strong> creates tables and columns within the existing database following schema.rb. This will delete existing data.</p>
</li>
<li>
<p><strong>db:setup</strong> does db:create, db:schema:load, db:seed</p>
</li>
<li>
<p><strong>db:reset</strong> does db:drop, db:setup</p>
</li>
<li>
<p><strong>db:migrate:reset</strong> does db:drop, db:create, db:migrate</p>
</li>
</ul>
<p>Typically, you would use db:migrate after having made changes to the schema
via new migration files (this makes sense only if there is already data in the
database). db:schema:load is used when you setup a new instance of your app.</p>
<hr>
<h3>For rails 3.2.12:</h3>
<p>I just checked the source and the dependencies are like this now:</p>
<ul>
<li>
<p><strong>db:create</strong> creates the database for the current env</p>
</li>
<li>
<p><strong>db:create:all</strong> creates the databases for all envs</p>
</li>
<li>
<p><strong>db:drop</strong> drops the database for the current env</p>
</li>
<li>
<p><strong>db:drop:all</strong> drops the databases for all envs</p>
</li>
<li>
<p><strong>db:migrate</strong> runs migrations for the current env that have not run yet</p>
</li>
<li>
<p><strong>db:migrate:up</strong> runs one specific migration</p>
</li>
<li>
<p><strong>db:migrate:down</strong> rolls back one specific migration</p>
</li>
<li>
<p><strong>db:migrate:status</strong> shows current migration status</p>
</li>
<li>
<p><strong>db:rollback</strong> rolls back the last migration</p>
</li>
<li>
<p><strong>db:forward</strong> advances the current schema version to the next one</p>
</li>
<li>
<p><strong>db:seed</strong> (only) runs the db/seed.rb file</p>
</li>
<li>
<p><strong>db:schema:load</strong> loads the schema into the current env's database</p>
</li>
<li>
<p><strong>db:schema:dump</strong> dumps the current env's schema (and seems to create the db as well)</p>
</li>
<li>
<p><strong>db:setup</strong> runs db:create db:schema:load db:seed</p>
</li>
<li>
<p><strong>db:reset</strong> runs db:drop db:setup</p>
</li>
<li>
<p><strong>db:migrate:redo</strong> runs (db:migrate:down db:migrate:up) or (db:rollback db:migrate) depending on the specified migration</p>
</li>
<li>
<p><strong>db:migrate:reset</strong> runs db:drop db:create db:migrate</p>
</li>
</ul>
<p>For further information please have a look at
https://github.com/rails/rails/blob/v3.2.12/activerecord/lib/active_record/railties/databases.rake
(for Rails 3.2.x) and
https://github.com/rails/rails/blob/v4.0.5/activerecord/lib/active_record/railties/databases.rake
(for Rails 4.0.x)</p>
<p><br></p>
<h3>Suggest</h3>
<h3>TLDR</h3>
<p>Use</p>
<ul>
<li>
<code>rake db:migrate</code> If you wanna make changes to the schema</li>
<li>
<code>rake db:reset</code> If you wanna drop the database, reload the schema from <code>schema.rb</code>, and reseed the database</li>
<li>
<code>rake db:schema:load</code> If you wanna reset database to schema as provided in <code>schema.rb</code> (This will delete all data)</li>
</ul>
<h3>Explanations</h3>
<p><code>rake db:schema:load</code> will set up the schema as provided in <code>schema.rb</code> file.
This is useful for a fresh install of app as it doesn't take as much time as
<code>db:migrate</code></p>
<blockquote>
<p>Important note, <code>db:schema:load</code> will <strong>delete</strong> data on server.</p>
</blockquote>
<p><code>rake db:migrate</code> makes changes to the existing schema. Its like creating
versions of schema. <code>db:migrate</code> will look in <code>db/migrate/</code> for any ruby files
and execute the migrations that aren't run yet starting with the oldest. Rails
knows which file is the oldest by looking at the timestamp at the beginning of
the migration filename. <code>db:migrate</code> comes with a benefit that data can also
be put in the database. This is actually not a good practice. Its better to
use <code>rake db:seed</code> to add data.</p>
<p><code>rake db:migrate</code> provides tasks up, down etc which enables commands like
<code>rake db:rollback</code> and makes it the most useful command.</p>
<p><code>rake db:reset</code> does a <code>db:drop</code> and <code>db:setup</code><br>
It drops the database, create it again, loads the schema, and initializes with
the seed data</p>
<h4>Relevant part of the commands from databases.rake</h4>
<hr>
<div class="code"><pre class="code literal-block"><span class="n">namespace</span><span class="w"> </span><span class="p">:</span><span class="n">schema</span><span class="w"> </span><span class="n">do</span>
<span class="w">  </span><span class="n">desc</span><span class="w"> </span><span class="s1">'Creates a db/schema.rb file that is portable against any DB supported by Active Record'</span>
<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="p">:</span><span class="n">dump</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[:</span><span class="n">environment</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">load_config</span><span class="p">]</span><span class="w"> </span><span class="n">do</span>
<span class="w">    </span><span class="n">require</span><span class="w"> </span><span class="s1">'active_record/schema_dumper'</span>
<span class="w">    </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ENV</span><span class="p">[</span><span class="s1">'SCHEMA'</span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ActiveRecord</span><span class="p">::</span><span class="n">Tasks</span><span class="p">::</span><span class="n">DatabaseTasks</span><span class="o">.</span><span class="n">db_dir</span><span class="p">,</span><span class="w"> </span><span class="s1">'schema.rb'</span><span class="p">)</span>
<span class="w">    </span><span class="n">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="s2">"w:utf-8"</span><span class="p">)</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="o">|</span><span class="n">file</span><span class="o">|</span>
<span class="w">      </span><span class="n">ActiveRecord</span><span class="p">::</span><span class="n">SchemaDumper</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">ActiveRecord</span><span class="p">::</span><span class="n">Base</span><span class="o">.</span><span class="n">connection</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="n">db_namespace</span><span class="p">[</span><span class="s1">'schema:dump'</span><span class="p">]</span><span class="o">.</span><span class="n">reenable</span>
<span class="w">  </span><span class="n">end</span>

<span class="w">  </span><span class="n">desc</span><span class="w"> </span><span class="s1">'Loads a schema.rb file into the database'</span>
<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="p">:</span><span class="nb">load</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[:</span><span class="n">environment</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">load_config</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">check_protected_environments</span><span class="p">]</span><span class="w"> </span><span class="n">do</span>
<span class="w">    </span><span class="n">ActiveRecord</span><span class="p">::</span><span class="n">Tasks</span><span class="p">::</span><span class="n">DatabaseTasks</span><span class="o">.</span><span class="n">load_schema_current</span><span class="p">(:</span><span class="n">ruby</span><span class="p">,</span><span class="w"> </span><span class="n">ENV</span><span class="p">[</span><span class="s1">'SCHEMA'</span><span class="p">])</span>
<span class="w">  </span><span class="n">end</span>
</pre></div>

<hr>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="c1"># desc 'Drops and recreates the database from db/schema.rb for the current environment and loads the seeds.'</span>
<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="p">:</span><span class="n">reset</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s1">'db:drop'</span><span class="p">,</span><span class="w"> </span><span class="s1">'db:setup'</span><span class="w"> </span><span class="p">]</span>
</pre></div>

<hr>
<div class="code"><pre class="code literal-block"><span class="n">namespace</span><span class="w"> </span><span class="p">:</span><span class="n">migrate</span><span class="w"> </span><span class="n">do</span>
<span class="w">  </span><span class="c1"># desc  'Rollbacks the database one migration and re migrate up (options: STEP=x, VERSION=x).'</span>
<span class="w">  </span><span class="n">task</span><span class="w"> </span><span class="p">:</span><span class="n">redo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[:</span><span class="n">environment</span><span class="p">,</span><span class="w"> </span><span class="p">:</span><span class="n">load_config</span><span class="p">]</span><span class="w"> </span><span class="n">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">ENV</span><span class="p">[</span><span class="s1">'VERSION'</span><span class="p">]</span>
<span class="w">      </span><span class="n">db_namespace</span><span class="p">[</span><span class="s1">'migrate:down'</span><span class="p">]</span><span class="o">.</span><span class="n">invoke</span>
<span class="w">      </span><span class="n">db_namespace</span><span class="p">[</span><span class="s1">'migrate:up'</span><span class="p">]</span><span class="o">.</span><span class="n">invoke</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="n">db_namespace</span><span class="p">[</span><span class="s1">'rollback'</span><span class="p">]</span><span class="o">.</span><span class="n">invoke</span>
<span class="w">      </span><span class="n">db_namespace</span><span class="p">[</span><span class="s1">'migrate'</span><span class="p">]</span><span class="o">.</span><span class="n">invoke</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">  </span><span class="n">end</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/find-and-replace-with-a-newline-in-visual-studio-code/" class="u-url">Find and replace with a newline in Visual Studio Code</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/find-and-replace-with-a-newline-in-visual-studio-code/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:07:33+08:00" itemprop="datePublished" title="2023-02-17 17:07">2023-02-17 17:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying out the new Microsoft Visual Studio Code editor in Linux Fedora
environment. I would like to know how to replace new line (\n) in place of
some other text.</p>
<p>For example, I have html text like this</p>
<div class="code"><pre class="code literal-block">&lt;tag&gt;&lt;tag&gt;
</pre></div>

<p>which I would like to replace as</p>
<div class="code"><pre class="code literal-block">&lt;tag&gt;
&lt;tag&gt;
</pre></div>

<p>In sublime I would use regex pattern and find <em>" &gt;&lt;"</em> and replace with _"</p>
<blockquote>
<p>\n&lt;"_ How do I accomplish this in Visual Studio Code?</p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<p>In the local searchbox (<code>ctrl</code> + <code>f</code>) you can insert newlines by pressing
<code>ctrl</code> + <code>enter</code>.</p>
<p><img alt="Image of multiline search in local
search" src="https://code.visualstudio.com/assets/updates/1_38/multiple-line-%0Asupport.gif"></p>
<p>If you use the global search (<code>ctrl</code> + <code>shift</code> + <code>f</code>) you can insert
newlines by pressing <code>shift</code> + <code>enter</code>.</p>
<p><img alt="Image of multiline search in global search" src="images/aEmuy.png"></p>
<p>If you want to search for multilines by the character literal, remember to
check the <strong>rightmost regex icon</strong>.</p>
<p><img alt="Image of regex mode in search replace" src="images/uR2Zc.png"></p>
<hr>
<p>In previous versions of Visual Studio code this was difficult or impossible.
Older versions require you to use the regex mode, older versions yet did not
support newline search whatsoever.</p>
<p><br></p>
<h3>Suggest</h3>
<p>With VS Code release 1.38 you can press <code>CTRL</code> + <code>Enter</code> in the editor find
box to add a newline character.</p>
<p><img alt="enter image description
here" src="https://code.visualstudio.com/assets/updates/1_38/multiple-line-%0Asupport.gif"></p>
<p>With VS Code release 1.30 you can type <code>Shift</code> + <code>Enter</code> in the search box to
add a newline character without needing to use regex mode.</p>
<p><img alt="enter image description here" src="images/qPRAI.png"></p>
<p>Since VS Code release 1.3, the regex find has supported newline characters. To
use this feature set the find window to regex mode and use <code>\n</code> as the newline
character.</p>
<p><img alt="Multiline find in VS Code gif" src="images/CTuAE.gif"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/set-imageview-width-and-height-programmatically/" class="u-url">Set ImageView width and height programmatically?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/set-imageview-width-and-height-programmatically/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:06:52+08:00" itemprop="datePublished" title="2023-02-17 17:06">2023-02-17 17:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I set an <code>ImageView</code>'s width and height programmatically?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It may be too late but for the sake of others who have the same problem, to
set the height of the <code>ImageView</code>:</p>
<div class="code"><pre class="code literal-block">imageView.getLayoutParams().height = 20;
</pre></div>

<p><strong>Important.</strong> If you're setting the height after the layout has already been
'laid out', make sure you also call:</p>
<div class="code"><pre class="code literal-block">imageView.requestLayout();
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If your image view is dynamic, the answer containing getLayout will fail with
null-exception.</p>
<p>In that case the correct way is:</p>
<div class="code"><pre class="code literal-block">LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(100, 100);
iv.setLayoutParams(layoutParams);
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-832.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-830.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
