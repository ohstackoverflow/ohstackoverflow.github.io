<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 291) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-291.html">
<link rel="prev" href="index-292.html" type="text/html">
<link rel="next" href="index-290.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/notice-undefined-variable-notice-undefined-index-warning-undefined-array-key-and-notice-undefined-offset-using-php/" class="u-url">"Notice: Undefined variable", "Notice: Undefined index", "Warning: Undefined array key", and "Notice: Undefined offset" using PHP</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/notice-undefined-variable-notice-undefined-index-warning-undefined-array-key-and-notice-undefined-offset-using-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:09:37+08:00" itemprop="datePublished" title="2023-02-17 03:09">2023-02-17 03:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm running a PHP script and continue to receive errors like:</p>
<blockquote>
<p>Notice: Undefined variable: my_variable_name in C:\wamp\www\mypath\index.php
on line 10</p>
<p>Notice: Undefined index: my_index C:\wamp\www\mypath\index.php on line 11</p>
<p>Warning: Undefined array key "my_index" in C:\wamp\www\mypath\index.php on
line 11</p>
</blockquote>
<p>Line 10 and 11 looks like this:</p>
<div class="code"><pre class="code literal-block"><span class="n">echo</span><span class="w"> </span><span class="s2">"My variable value is: "</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">$</span><span class="n">my_variable_name</span><span class="p">;</span>
<span class="n">echo</span><span class="w"> </span><span class="s2">"My index value is: "</span><span class="w"> </span><span class="o">.</span><span class="w"> </span><span class="o">$</span><span class="n">my_array</span><span class="p">[</span><span class="s2">"my_index"</span><span class="p">];</span>
</pre></div>

<p>What is the meaning of these error messages?</p>
<p>Why do they appear all of a sudden? I used to use this script for years and
I've never had any problem.</p>
<p>How do I fix them?</p>
<hr>
<blockquote>
<p><strong>This is a General Reference question</strong> for people to link to as duplicate,
instead of having to explain the issue over and over again. I feel this is
necessary because most real-world answers on this issue are very specific.</p>
<p>Related Meta discussion:</p>
<ul>
<li>What can be done about repetitive questions?</li>
<li>Do “reference questions” make sense?
</li>
</ul>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<h2>Notice / Warning: Undefined variable</h2>
<p>Although PHP does not require a variable declaration, it does recommend it in
order to avoid some security vulnerabilities or bugs where one would forget to
give a value to a variable that will be used later in the script. What PHP
does in the case of undeclared variables is issue an error of <code>E_WARNING</code>
level.</p>
<p>This warning helps a programmer to spot a misspelled variable name. Besides,
there are other possible issues with uninitialized variables. As it's stated
in the PHP manual,</p>
<blockquote>
<p>Relying on the default value of an uninitialized variable is problematic in
the case of including one file into another which uses the same variable
name.</p>
</blockquote>
<p>Means being uninitialized in the main file, this variable may be rewritten by
a variable from the included file, that may lead to unpredictable results. To
avoid that, all variables in a php file are best to be initialized</p>
<p>Ways to deal with the issue:</p>
<ol>
<li>
<p><strong>Recommended:</strong> Declare your variables, for example when you try to append a string to an undefined variable. Or use <code>isset()</code> to check if they are declared before referencing them, as in:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">//</span><span class="n">Initializing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">variable</span>
</pre></div>

<p>$value = ""; //Initialization value; 0 for int, [] for array, etc.
 echo $value; // no error</p>
</li>
<li>
<p>Suppress the error with null coalescing operator.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="c1">// Null coalescing operator</span>
</pre></div>

<p>echo $value ?? '';</p>
</li>
</ol>
<p>For the ancient PHP versions (&lt; 7.0) isset() with ternary can be used</p>
<div class="code"><pre class="code literal-block">     echo isset($value) ? $value : '';
</pre></div>

<p><strong>Be aware</strong> though, that it's still essentially an error suppression, though
for just one particular error. So it may prevent PHP from helping you by
marking an unitialized variable.</p>
<ol>
<li>Suppress the error with the @ operator. Left here for the historical reasons but seriously, it just shouldn't happen.</li>
</ol>
<p><strong>Note:</strong> It's strongly recommended to implement just point 1.</p>
<h2>Notice: Undefined index / Undefined offset / Warning: Undefined array key</h2>
<p>This notice/warning appears when you (or PHP) try to access an undefined index
of an array.</p>
<p>Ways to deal with the issue are pretty much the same:</p>
<ol>
<li>
<p><strong>Recommended:</strong> Declare your array elements:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="o">//</span><span class="n">Initializing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">variable</span>
</pre></div>

<p>$array['value'] = ""; //Initialization value; 0 for int, [] for array, etc.
 echo $array['value']; // no error</p>
</li>
<li>
<p>Suppress the error with null coalescing operator":</p>
<div class="code"><pre class="code literal-block"> echo $_POST['value'] ?? '';
</pre></div>

</li>
</ol>
<p>With arrays this operator is more justified, because it can be used with
outside variables you don't have control for. Therefore, consider using it for
the outside variables only, such as <code>$_POST</code> / <code>$_GET</code> / <code>$_SESSION</code> or JSON
input. While all internal arrays are best to be predefined/initialized first.</p>
<p><strong>Better yet,</strong> validate all input, assign it to local variables, and use them
all the way in the code. So every variable you're going to access deliberately
exists.</p>
<p>Related:</p>
<ul>
<li>Notice: Undefined variable</li>
<li>Notice: Undefined Index</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Try these</p>
<blockquote>
<p>Q1: this notice means $varname is not defined at current scope of the
script.</p>
<p>Q2: Use of isset(), empty() conditions before using any suspicious variable
works well.</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="c1">// recommended solution for recent PHP versions</span>
<span class="no">$</span><span class="n">user_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">_SESSION</span><span class="p">[</span><span class="s">'user_name'</span><span class="p">]</span><span class="w"> </span>??<span class="w"> </span><span class="s">''</span><span class="p">;</span>

<span class="c1">// pre-7 PHP versions</span>
<span class="no">$</span><span class="n">user_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">''</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span>!<span class="n">empty</span><span class="p">(</span><span class="no">$</span><span class="n">_SESSION</span><span class="p">[</span><span class="s">'user_name'</span><span class="p">]))</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="no">$</span><span class="n">user_name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="no">$</span><span class="n">_SESSION</span><span class="p">[</span><span class="s">'user_name'</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<p>Or, as a quick and dirty solution:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// not the best solution, but works</span>
<span class="c1">// in your php setting use, it helps hiding site wide notices</span>
<span class="n">error_reporting</span><span class="p">(</span><span class="n">E_ALL</span><span class="w"> </span>^<span class="w"> </span><span class="n">E_NOTICE</span><span class="p">);</span>
</pre></div>

<hr>
<p>Note about sessions:</p>
<ul>
<li>
<p>When using sessions, <code>session_start();</code> is required to be placed inside all files using sessions.</p>
</li>
<li>
<p>http://php.net/manual/en/features.sessions.php</p>
</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/git-merge-hotfix-branch-into-feature-branch/" class="u-url">Git merge hotfix branch into feature branch</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/git-merge-hotfix-branch-into-feature-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:09:12+08:00" itemprop="datePublished" title="2023-02-17 03:09">2023-02-17 03:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Let’s say we have the following situation in Git:</p>
<ol>
<li>
<p>A created repository:</p>
<div class="code"><pre class="code literal-block">mkdir GitTest2
</pre></div>

<p>cd GitTest2
git init</p>
</li>
<li>
<p>Some modifications in the master take place and get committed:</p>
<div class="code"><pre class="code literal-block">echo "On Master" &gt; file
</pre></div>

<p>git commit -a -m "Initial commit"</p>
</li>
<li>
<p>Feature1 branched off master and some work is done:</p>
<div class="code"><pre class="code literal-block">git branch feature1
</pre></div>

<p>git checkout feature1
echo "Feature1" &gt; featureFile
git commit -a -m "Commit for feature1"</p>
</li>
<li>
<p>Meanwhile, a bug is discovered in the master-code and a hotfix-branch is established:</p>
<div class="code"><pre class="code literal-block">git checkout master
</pre></div>

<p>git branch hotfix1
git checkout hotfix1</p>
</li>
<li>
<p>The bug is fixed in the hotfix branch and merged back into the master (perhaps after a pull request/code review):</p>
<div class="code"><pre class="code literal-block">echo "Bugfix" &gt; bugfixFile
</pre></div>

<p>git commit -a -m "Bugfix Commit"
git checkout master
git merge --no-ff hotfix1</p>
</li>
<li>
<p>Development on feature1 continues:</p>
<div class="code"><pre class="code literal-block">git checkout feature1
</pre></div>

</li>
</ol>
<p>Say I need the hotfix in my feature branch, maybe because the bug also occurs
there. How can I achieve this without duplicating the commits into my feature
branch?</p>
<p>I want to prevent to get two new commits on my feature branch which have no
relation to the feature implementation. This especially seems important for me
if I use pull requests: All these commits will also be included in the pull
request and have to be reviewed although this has already been done (as the
hotfix is already in the master).</p>
<p>I can not do a <code>git merge master --ff-only</code>: "fatal: Not possible to fast-
forward, aborting.", but I am not sure if this helped me.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>How do we merge the master branch into the feature branch? Easy:</p>
<div class="code"><pre class="code literal-block">git checkout feature1
git merge master
</pre></div>

<p>There is no point in forcing a fast forward merge here, as it cannot be done.
You committed both into the feature branch and the master branch. Fast forward
is impossible now.</p>
<p>Have a look at GitFlow. It is a branching model for git that can be followed,
and you unconsciously already did. It also is an extension to Git which adds
some commands for the new workflow steps that do things automatically which
you would otherwise need to do manually.</p>
<p>So what did you do right in your workflow? You have two branches to work with,
your feature1 branch is basically the "develop" branch in the GitFlow model.</p>
<p>You created a hotfix branch from master and merged it back. And now you are
stuck.</p>
<p>The GitFlow model asks you to merge the hotfix also to the development branch,
which is "feature1" in your case.</p>
<p>So the real answer would be:</p>
<div class="code"><pre class="code literal-block">git checkout feature1
git merge --no-ff hotfix1
</pre></div>

<p>This adds all the changes that were made inside the hotfix to the feature
branch, but <em>only</em> those changes. They might conflict with other development
changes in the branch, but they will not conflict with the master branch
should you merge the feature branch back to master eventually.</p>
<p>Be very careful with rebasing. Only rebase if the changes you did stayed local
to your repository, e.g. you did not push any branches to some other
repository. Rebasing is a great tool for you to arrange your local commits
into a useful order before pushing it out into the world, but rebasing
afterwards will mess up things for the git beginners like you.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You should be able to rebase your branch on master:</p>
<div class="code"><pre class="code literal-block">git checkout feature1
git rebase master
</pre></div>

<p>Manage all conflicts that arise. When you get to the commits with the bugfixes
(already in master), Git will say that there were no changes and that maybe
they were already applied. You then continue the rebase (while skipping the
commits already in master) with</p>
<div class="code"><pre class="code literal-block">git rebase --skip
</pre></div>

<p>If you perform a <code>git log</code> on your feature branch, you'll see the bugfix
commit appear only once, and in the master portion.</p>
<p>For a more detailed discussion, take a look at the Git book documentation on
<code>git rebase</code> (https://git-scm.com/docs/git-rebase) which cover this exact use
case.</p>
<p>================ Edit for additional context ====================</p>
<p>This answer was provided specifically for the question asked by @theomega,
taking his particular situation into account. Note this part:</p>
<blockquote>
<p>I want to prevent [...] commits on my feature branch which have no relation
to the feature implementation.</p>
</blockquote>
<p>Rebasing his private branch on master is exactly what will yield that result.
In contrast, merging master into his branch would precisely do what he
<strong><em>specifically does not want to happen</em></strong> : adding a commit that is not
related to the feature implementation he is working on via his branch.</p>
<p>To address the users that read the question title, skip over the actual
content and context of the question, and then only read the top answer blindly
assuming it will always apply to their (different) use case, allow me to
elaborate:</p>
<ul>
<li>only rebase private branches (i.e. that only exist in your local repository and haven't been shared with others). Rebasing shared branches would "break" the copies other people may have.</li>
<li>if you want to integrate changes from a branch (whether it's master or another branch) into a branch that is public (e.g. you've pushed the branch to open a pull request, but there are now conflicts with master, and you need to update your branch to resolve those conflicts) you'll need to merge them in (e.g. with <code>git merge master</code> as in @Sven's answer).</li>
<li>you can also merge branches into your local private branches if that's your preference, but be aware that it will result in "foreign" commits in your branch.</li>
</ul>
<p>Finally, if you're unhappy with the fact that this answer is not the best fit
for your situation even though it was for @theomega, adding a comment below
won't be particularly helpful: I don't control which answer is selected, only
@theomega does.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/altering-a-column-null-to-not-null/" class="u-url">Altering a column: null to not null</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/altering-a-column-null-to-not-null/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:08:46+08:00" itemprop="datePublished" title="2023-02-17 03:08">2023-02-17 03:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a table that has several nullable integer columns. This is undesirable
for several reasons, so I am looking to update all nulls to 0 and then set
these columns to <code>NOT NULL</code>. Aside from changing nulls to <code>0</code>, data must be
preserved.</p>
<p>I am looking for the <em>specific SQL syntax</em> to alter a column (call it
<code>ColumnA</code>) to "<code>not null</code>". Assume the data has been updated to not contain
nulls.</p>
<p>Using <em>SQL server 2000</em>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>First, make all current <code>NULL</code> values disappear:</p>
<div class="code"><pre class="code literal-block"><span class="k">UPDATE</span><span class="w"> </span><span class="o">[</span><span class="n">Table</span><span class="o">]</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="o">[</span><span class="n">Column</span><span class="o">]=</span><span class="mi">0</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="o">[</span><span class="n">Column</span><span class="o">]</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span>
</pre></div>

<p>Then, update the table definition to disallow "NULLs":</p>
<div class="code"><pre class="code literal-block"><span class="k">ALTER</span><span class="w"> </span><span class="nc">TABLE</span><span class="w"> </span><span class="o">[</span><span class="n">Table</span><span class="o">]</span><span class="w"> </span><span class="k">ALTER</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="o">[</span><span class="n">Column</span><span class="o">]</span><span class="w"> </span><span class="k">INTEGER</span><span class="w"> </span><span class="ow">NOT</span><span class="w"> </span><span class="k">NULL</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I had the same problem, but the field used to default to null, and now I want
to default it to 0. That required adding one more line after mdb's solution:</p>
<div class="code"><pre class="code literal-block"><span class="k">ALTER</span><span class="w"> </span><span class="nc">TABLE</span><span class="w"> </span><span class="o">[</span><span class="n">Table</span><span class="o">]</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="o">[</span><span class="n">Constraint</span><span class="o">]</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="o">[</span><span class="n">Column</span><span class="o">]</span><span class="p">;</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-292.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-290.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
