<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2187) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2187.html">
<link rel="prev" href="index-2188.html" type="text/html">
<link rel="next" href="index-2186.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-the-differences-between-arraylist-and-vector/" class="u-url">What are the differences between ArrayList and Vector?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-the-differences-between-arraylist-and-vector/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T21:26:43+08:00" itemprop="datePublished" title="2023-03-03 21:26">2023-03-03 21:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What are the differences between the two data structures <strong>ArrayList</strong> and
<strong>Vector</strong> , and where should you use each of them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Differences</strong></p>
<ul>
<li>Vectors are synchronized, ArrayLists are not.</li>
<li>Data Growth Methods</li>
</ul>
<p>Use ArrayLists if there is no specific requirement to use Vectors.</p>
<p><strong>Synchronization</strong></p>
<p>If multiple threads access an ArrayList concurrently then we must externally
synchronize the block of code which modifies the list either structurally or
simply modifies an element. Structural modification means addition or deletion
of element(s) from the list. Setting the value of an existing element is not a
structural modification.</p>
<p><code>Collections.synchronizedList</code> is normally used at the time of creation of the
list to avoid any accidental unsynchronized access to the list.</p>
<p><strong>Data growth</strong></p>
<p>Internally, both the ArrayList and Vector hold onto their contents using an
Array. When an element is inserted into an ArrayList or a Vector, the object
will need to expand its internal array if it runs out of room. <strong>A Vector
defaults to doubling the size of its array, while the ArrayList increases its
array size by 50 percent.</strong></p>
<p><br></p>
<h3>Suggest</h3>
<p>As the documentation says, a <code>Vector</code> and an <code>ArrayList</code> are almost
equivalent. The difference is that access to a <code>Vector</code> is synchronized,
whereas access to an <code>ArrayList</code> is not. What this means is that only one
thread can call methods on a <code>Vector</code> at a time, and there's a slight overhead
in acquiring the lock; if you use an <code>ArrayList</code>, this isn't the case.
Generally, you'll want to use an <code>ArrayList</code>; in the single-threaded case it's
a better choice, and in the multi-threaded case, you get better control over
locking. Want to allow concurrent reads? Fine. Want to perform one
synchronization for a batch of ten writes? Also fine. It does require a little
more care on your end, but it's likely what you want. Also note that if you
have an ArrayList, you can use the <code>Collections.synchronizedList</code> function to
create a synchronized list, thus getting you the equivalent of a <code>Vector</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-milliseconds-from-localdatetime-in-java-8/" class="u-url">How to get milliseconds from LocalDateTime in Java 8</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-milliseconds-from-localdatetime-in-java-8/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T21:25:22+08:00" itemprop="datePublished" title="2023-03-03 21:25">2023-03-03 21:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am wondering if there is a way to get current milliseconds since 1-1-1970
(epoch) using the new <code>LocalDate</code>, <code>LocalTime</code> or <code>LocalDateTime</code> classes of
Java 8.</p>
<p>The known way is below:</p>
<div class="code"><pre class="code literal-block"><span class="nv">long</span><span class="w"> </span><span class="nv">currentMilliseconds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">Date</span><span class="ss">()</span>.<span class="k">getTime</span><span class="ss">()</span><span class="c1">;</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">long currentMilliseconds = System.currentTimeMillis();
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>I'm not entirely sure what you mean by "current milliseconds" but I'll assume
it's the number of milliseconds since the "epoch," namely midnight, January 1,
1970 UTC.</p>
<p>If you want to find the number of milliseconds since the epoch <em>right now,</em>
then use <code>System.currentTimeMillis()</code> as Anubian Noob has pointed out. If so,
there's no reason to use any of the new java.time APIs to do this.</p>
<p>However, maybe you already have a <code>LocalDateTime</code> or similar object from
somewhere and you want to convert it to milliseconds since the epoch. It's not
possible to do that directly, since the <code>LocalDateTime</code> family of objects has
no notion of what time zone they're in. Thus time zone information needs to be
supplied to find the time relative to the epoch, which is in UTC.</p>
<p>Suppose you have a <code>LocalDateTime</code> like this:</p>
<div class="code"><pre class="code literal-block">LocalDateTime ldt = LocalDateTime.of(2014, 5, 29, 18, 41, 16);
</pre></div>

<p>You need to apply the time zone information, giving a <code>ZonedDateTime</code>. I'm in
the same time zone as Los Angeles, so I'd do something like this:</p>
<div class="code"><pre class="code literal-block">ZonedDateTime zdt = ldt.atZone(ZoneId.of("America/Los_Angeles"));
</pre></div>

<p>Of course, this makes assumptions about the time zone. And there are edge
cases that can occur, for example, if the local time happens to name a time
near the Daylight Saving Time (Summer Time) transition. Let's set these aside,
but you should be aware that these cases exist.</p>
<p>Anyway, if you can get a valid <code>ZonedDateTime</code>, you can convert this to the
number of milliseconds since the epoch, like so:</p>
<div class="code"><pre class="code literal-block">long millis = zdt.toInstant().toEpochMilli();
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>What I do so I don't specify a time zone is,</p>
<div class="code"><pre class="code literal-block">System.out.println("ldt " + LocalDateTime.now().atZone(ZoneId.systemDefault()).toInstant().toEpochMilli());
System.out.println("ctm " + System.currentTimeMillis());
</pre></div>

<p>gives</p>
<div class="code"><pre class="code literal-block">ldt 1424812121078 
ctm 1424812121281
</pre></div>

<p>As you can see the numbers are the same except for a small execution time.</p>
<p>Just in case you don't like System.currentTimeMillis, use
<code>Instant.now().toEpochMilli()</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-verify-a-method-is-called-two-times-with-mockito-verify/" class="u-url">How to verify a method is called two times with mockito verify()</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-verify-a-method-is-called-two-times-with-mockito-verify/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T21:24:08+08:00" itemprop="datePublished" title="2023-03-03 21:24">2023-03-03 21:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to verify if a method is called at least once through mockito verify. I
used verify and it complains like this:</p>
<div class="code"><pre class="code literal-block">org.mockito.exceptions.verification.TooManyActualInvocations: 
Wanted 1 time:
But was 2 times. Undesired invocation:
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Using the appropriate VerificationMode:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="n">mockito</span><span class="o">.</span><span class="n">Mockito</span><span class="o">.</span><span class="n">atLeast</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="n">mockito</span><span class="o">.</span><span class="n">Mockito</span><span class="o">.</span><span class="n">times</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="n">mockito</span><span class="o">.</span><span class="n">Mockito</span><span class="o">.</span><span class="n">verify</span><span class="p">;</span>

<span class="n">verify</span><span class="p">(</span><span class="n">mockObject</span><span class="p">,</span> <span class="n">atLeast</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">someMethod</span><span class="p">(</span><span class="s2">"was called at least twice"</span><span class="p">);</span>
<span class="n">verify</span><span class="p">(</span><span class="n">mockObject</span><span class="p">,</span> <span class="n">times</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">someMethod</span><span class="p">(</span><span class="s2">"was called exactly three times"</span><span class="p">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h3>For Kotlin:</h3>
<p>build gradle:</p>
<div class="code"><pre class="code literal-block">testImplementation "com.nhaarman.mockitokotlin2:mockito-kotlin:2.2.0"
</pre></div>

<p>code:</p>
<div class="code"><pre class="code literal-block">interface<span class="w"> </span>MyCallback<span class="w"> </span>{
<span class="w">  </span>fun<span class="w"> </span>someMethod(value:<span class="w"> </span>String)
}

class<span class="w"> </span>MyTestableManager(private<span class="w"> </span>val<span class="w"> </span>callback:<span class="w"> </span>MyCallback){
<span class="w">  </span>fun<span class="w"> </span>perform(){
<span class="w">    </span>callback.someMethod("first")
<span class="w">    </span>callback.someMethod("second")
<span class="w">    </span>callback.someMethod("third")
<span class="w">  </span>}
}
</pre></div>

<p>test:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">com.nhaarman.mockitokotlin2.times</span>
<span class="kn">import</span> <span class="nn">com.nhaarman.mockitokotlin2.verify</span>
<span class="kn">import</span> <span class="nn">com.nhaarman.mockitokotlin2.mock</span>
<span class="o">...</span>
<span class="n">val</span> <span class="n">callback</span><span class="p">:</span> <span class="n">MyCallback</span> <span class="o">=</span> <span class="n">mock</span><span class="p">()</span>
<span class="n">val</span> <span class="n">uut</span> <span class="o">=</span> <span class="n">MyTestableManager</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
<span class="n">uut</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

<span class="n">val</span> <span class="n">captor</span><span class="p">:</span> <span class="n">KArgumentCaptor</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">nhaarman</span><span class="o">.</span><span class="n">mockitokotlin2</span><span class="o">.</span><span class="n">argumentCaptor</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">()</span>

<span class="n">verify</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">times</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">someMethod</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">capture</span><span class="p">())</span>

<span class="n">assertTrue</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">allValues</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"first"</span><span class="p">)</span>
<span class="n">assertTrue</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">allValues</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"second"</span><span class="p">)</span>
<span class="n">assertTrue</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">allValues</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"third"</span><span class="p">)</span>
</pre></div>

<h3>For Java:</h3>
<p>Lombok used to simplify. You can also type out the constructor if you prefer.</p>
<p>build gradle:</p>
<div class="code"><pre class="code literal-block">testImplementation "org.mockito:mockito-core:3.6.28"
</pre></div>

<p>code:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// MyCallback.java</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">MyCallback</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">void</span><span class="w"> </span><span class="n">someMethod</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// MyTestableManager.java</span>
<span class="n">public</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">MyTestableManager</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">private</span><span class="w"> </span><span class="n">MyCallback</span><span class="w"> </span><span class="n">callback</span><span class="p">;</span>

<span class="w">  </span><span class="n">public</span><span class="w"> </span><span class="n">MyTestableManager</span><span class="p">(</span><span class="n">MyCallback</span><span class="w"> </span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">callback</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">callback</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">perform</span><span class="p">(){</span>
<span class="w">    </span><span class="n">callback</span><span class="p">.</span><span class="n">someMethod</span><span class="p">(</span><span class="s">"first"</span><span class="p">);</span>
<span class="w">    </span><span class="n">callback</span><span class="p">.</span><span class="n">someMethod</span><span class="p">(</span><span class="s">"second"</span><span class="p">);</span>
<span class="w">    </span><span class="n">callback</span><span class="p">.</span><span class="n">someMethod</span><span class="p">(</span><span class="s">"third"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>test:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">org.mockito.Mockito.times</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.mockito.Mockito.verify</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.mockito.Mock</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.mockito.Captor</span><span class="p">;</span>
<span class="o">//</span> <span class="n">whatever</span> <span class="n">other</span> <span class="n">imports</span> <span class="n">you</span> <span class="n">need</span>
<span class="nd">@Mock</span>
<span class="n">private</span> <span class="n">MyCallback</span> <span class="n">callback</span><span class="p">;</span>
<span class="nd">@Captor</span>
<span class="n">private</span> <span class="n">ArgumentCaptor</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">captor</span><span class="p">;</span>

<span class="n">private</span> <span class="n">MyTestableManager</span> <span class="n">uut</span> <span class="o">=</span> <span class="n">new</span> <span class="n">MyTestableManager</span><span class="p">(</span><span class="n">callback</span><span class="p">);</span>

<span class="o">//</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">test</span> <span class="n">method</span><span class="p">:</span>
<span class="n">uut</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

<span class="n">verify</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">times</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">someMethod</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">capture</span><span class="p">())</span>

<span class="n">assertTrue</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">getAllValues</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"first"</span><span class="p">)</span>
<span class="n">assertTrue</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">getAllValues</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"second"</span><span class="p">)</span>
<span class="n">assertTrue</span><span class="p">(</span><span class="n">captor</span><span class="o">.</span><span class="n">getAllValues</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"third"</span><span class="p">)</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2188.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2186.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
