<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1254) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1254.html">
<link rel="prev" href="index-1255.html" type="text/html">
<link rel="next" href="index-1253.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/check-whether-a-string-is-not-null-and-not-empty/" class="u-url">Check whether a String is not Null and not Empty</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/check-whether-a-string-is-not-null-and-not-empty/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:57:38+08:00" itemprop="datePublished" title="2023-02-18 04:57">2023-02-18 04:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I check whether a string is not <code>null</code> and not empty?</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">doStuff</span><span class="ss">(</span><span class="nv">String</span><span class="w"> </span><span class="nv">str</span><span class="ss">)</span>
{
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">str</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">str</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"**here I want to check the 'str' is empty or not**"</span><span class="ss">)</span>
<span class="w">    </span>{
<span class="w">        </span><span class="cm">/* handle empty string */</span>
<span class="w">    </span>}
<span class="w">    </span><span class="cm">/* ... */</span>
}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>What about isEmpty() ?</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">(</span><span class="nv">str</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nv">str</span>.<span class="nv">isEmpty</span><span class="ss">())</span>
</pre></div>

<p>Be sure to use the parts of <code>&amp;&amp;</code> in this order, because java will not proceed
to evaluate the second part if the first part of <code>&amp;&amp;</code> fails, thus ensuring you
will not get a null pointer exception from <code>str.isEmpty()</code> if <code>str</code> is null.</p>
<p>Beware, it's only available since Java SE 1.6. You have to check <code>str.length()
== 0</code> on previous versions.</p>
<hr>
<p>To ignore whitespace as well:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">(</span><span class="nv">str</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nv">str</span>.<span class="nv">trim</span><span class="ss">()</span>.<span class="nv">isEmpty</span><span class="ss">())</span>
</pre></div>

<p>(since Java 11 <code>str.trim().isEmpty()</code> can be reduced to <code>str.isBlank()</code> which
will also test for other Unicode white spaces)</p>
<p>Wrapped in a handy function:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">boolean</span><span class="w"> </span><span class="nv">empty</span><span class="ss">(</span><span class="w"> </span><span class="nv">final</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">Null</span><span class="o">-</span><span class="nv">safe</span>,<span class="w"> </span><span class="nv">short</span><span class="o">-</span><span class="nv">circuit</span><span class="w"> </span><span class="nv">evaluation</span>.
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">trim</span><span class="ss">()</span>.<span class="nv">isEmpty</span><span class="ss">()</span><span class="c1">;</span>
}
</pre></div>

<p>Becomes:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">(</span><span class="w"> </span><span class="o">!</span><span class="nv">empty</span><span class="ss">(</span><span class="w"> </span><span class="nv">str</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="ss">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h2>Use org.apache.commons.lang.StringUtils</h2>
<p>I like to use Apache commons-lang for these kinds of things, and especially
the StringUtils utility class:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">org.apache.commons.lang.StringUtils</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">StringUtils</span><span class="o">.</span><span class="n">isNotBlank</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="n">StringUtils</span><span class="o">.</span><span class="n">isBlank</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-c-forbid-generic-attribute-types/" class="u-url">Why does C# forbid generic attribute types?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-c-forbid-generic-attribute-types/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:57:12+08:00" itemprop="datePublished" title="2023-02-18 04:57">2023-02-18 04:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This causes a compile-time exception:</p>
<div class="code"><pre class="code literal-block">public sealed class ValidatesAttribute&lt;T&gt; : Attribute
{

}

[Validates&lt;string&gt;]
public static class StringValidation
{

}
</pre></div>

<p>I realize C# does not support generic attributes. However, after much
Googling, I can't seem to find the reason.</p>
<p>Does anyone know why generic types cannot derive from <code>Attribute</code>? Any
theories?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Well, I can't answer why it's not available, but I <em>can</em> confirm that it's not
a CLI issue. The CLI spec doesn't mention it (as far as I can see) and if you
use IL directly you can create a generic attribute. The part of the C# 3 spec
that bans it - section 10.1.4 "Class base specification" doesn't give any
justification.</p>
<p>The annotated ECMA C# 2 spec doesn't give any helpful information either,
although it does provide an example of what's not allowed.</p>
<p>My copy of the annotated C# 3 spec should arrive tomorrow... I'll see if that
gives any more information. Anyway, it's definitely a language decision rather
than a runtime one.</p>
<p>EDIT: Answer from Eric Lippert (paraphrased): no particular reason, except to
avoid complexity in both the language and compiler for a use case which
doesn't add much value.</p>
<p><br></p>
<h3>Suggest</h3>
<p>An attribute decorates a class at compile-time, but a generic class does not
receive its final type information until runtime. Since the attribute can
affect compilation, it has to be "complete" at compile time.</p>
<p>See this MSDN article for more information.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/java-util-date-vs-java-sql-date/" class="u-url">java.util.Date vs java.sql.Date</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/java-util-date-vs-java-sql-date/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T04:56:47+08:00" itemprop="datePublished" title="2023-02-18 04:56">2023-02-18 04:56</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>java.util.Date</code> vs <code>java.sql.Date</code>: when to use which and why?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Congratulations, you've hit my favorite pet peeve with JDBC: Date class
handling.</p>
<p>Basically databases usually support at least <strong>three</strong> forms of datetime
fields which are date, time and timestamp. Each of these have a corresponding
class in JDBC and <strong>each of them extend<code>java.util.Date</code></strong>. Quick semantics of
each of these three are the following:</p>
<ul>
<li>
<code>java.sql.Date</code> corresponds to SQL DATE which means it stores <em>years, months and days</em> while <em>hour, minute, second and millisecond</em> are ignored. Additionally <code>sql.Date</code> isn't tied to timezones.</li>
<li>
<code>java.sql.Time</code> corresponds to SQL TIME and as should be obvious, only contains information about <em>hour, minutes, seconds and milliseconds</em>.</li>
<li>
<code>java.sql.Timestamp</code> corresponds to SQL TIMESTAMP which is exact date to the nanosecond ( <em>note that<code>util.Date</code> only supports milliseconds!</em>) with customizable precision.</li>
</ul>
<p><strong>One of the most common bugs when using JDBC drivers in relation to these
three types is that the types are handled incorrectly.</strong> This means that
<code>sql.Date</code> is timezone specific, <code>sql.Time</code> contains current year, month and
day et cetera et cetera.</p>
<h3>Finally: Which one to use?</h3>
<p>Depends on the SQL type of the field, really. <code>PreparedStatement</code> has setters
for all three values, <code>#setDate()</code> being the one for <code>sql.Date</code>, <code>#setTime()</code>
for <code>sql.Time</code> and <code>#setTimestamp()</code> for <code>sql.Timestamp</code>.</p>
<p>Do note that if you use <code>ps.setObject(fieldIndex, utilDateObject);</code> you can
actually give a normal <code>util.Date</code> to most JDBC drivers which will happily
devour it as if it was of the correct type but when you request the data
afterwards, you may notice that you're actually missing stuff.</p>
<h3>I'm really saying that none of the Dates should be used at all.</h3>
<p>What I am saying that save the milliseconds/nanoseconds as plain longs and
convert them to whatever objects you are using ( <em>obligatory joda-time plug</em>
). One hacky way which can be done is to store the date component as one long
and time component as another, for example right now would be 20100221 and
154536123. These magic numbers can be used in SQL queries and will be portable
from database to another and will let you avoid this part of JDBC/Java Date
API:s entirely.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>LATE EDIT:</strong> Starting with Java 8 you should use neither <code>java.util.Date</code>
nor <code>java.sql.Date</code> if you can at all avoid it, and instead prefer using the
<code>java.time</code> package (based on Joda) rather than anything else. If you're not
on Java 8, here's the original response:</p>
<hr>
<p><strong><code>java.sql.Date</code></strong> - when you call methods/constructors of libraries that
use it (like JDBC). Not otherwise. You don't want to introduce dependencies to
the database libraries for applications/modules that don't explicitly deal
with JDBC.</p>
<p><strong><code>java.util.Date</code></strong> - when using libraries that use it. Otherwise, as little
as possible, for several reasons:</p>
<ul>
<li>
<p>It's mutable, which means you have to make a defensive copy of it every time you pass it to or return it from a method. </p>
</li>
<li>
<p>It doesn't handle dates very well, which backwards people like yours truly, think date handling classes should. </p>
</li>
<li>
<p>Now, because j.u.D doesn't do it's job very well, the ghastly <code>Calendar</code> classes were introduced. They are also mutable, and awful to work with, and should be avoided if you don't have any choice.</p>
</li>
<li>
<p>There are better alternatives, like the Joda Time API ( <del>which might even make it into Java 7 and become the new official date handling API</del> - a quick search says it won't).</p>
</li>
</ul>
<p>If you feel it's overkill to introduce a new dependency like Joda, <code>long</code>s
aren't all that bad to use for timestamp fields in objects, although I myself
usually wrap them in j.u.D when passing them around, for type safety and as
documentation.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1255.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1253.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
