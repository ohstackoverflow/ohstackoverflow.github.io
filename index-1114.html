<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1114) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1114.html">
<link rel="prev" href="index-1115.html" type="text/html">
<link rel="next" href="index-1113.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-make-an-android-device-vibrate-with-different-frequency/" class="u-url">How to make an Android device vibrate? with different frequency?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-make-an-android-device-vibrate-with-different-frequency/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:34:36+08:00" itemprop="datePublished" title="2023-02-18 01:34">2023-02-18 01:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I wrote an Android application. Now, I want to make the device vibrate when a
certain action occurs. How can I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Try:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">android.os.Vibrator</span><span class="p">;</span>
<span class="o">...</span>
<span class="n">Vibrator</span> <span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vibrator</span><span class="p">)</span> <span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="o">.</span><span class="n">VIBRATOR_SERVICE</span><span class="p">);</span>
<span class="o">//</span> <span class="n">Vibrate</span> <span class="k">for</span> <span class="mi">500</span> <span class="n">milliseconds</span>
<span class="k">if</span> <span class="p">(</span><span class="n">Build</span><span class="o">.</span><span class="n">VERSION</span><span class="o">.</span><span class="n">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">Build</span><span class="o">.</span><span class="n">VERSION_CODES</span><span class="o">.</span><span class="n">O</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">v</span><span class="o">.</span><span class="n">vibrate</span><span class="p">(</span><span class="n">VibrationEffect</span><span class="o">.</span><span class="n">createOneShot</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">VibrationEffect</span><span class="o">.</span><span class="n">DEFAULT_AMPLITUDE</span><span class="p">));</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="o">//</span><span class="n">deprecated</span> <span class="ow">in</span> <span class="n">API</span> <span class="mi">26</span> 
    <span class="n">v</span><span class="o">.</span><span class="n">vibrate</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p><strong>Note:</strong></p>
<p>Don't forget to include permission in AndroidManifest.xml file:</p>
<div class="code"><pre class="code literal-block">&lt;uses-permission android:name="android.permission.VIBRATE"/&gt;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<h2>Grant Vibration Permission</h2>
<p>Before you start implementing any vibration code, you have to give your
application the permission to vibrate:</p>
<div class="code"><pre class="code literal-block">&lt;uses-permission android:name="android.permission.VIBRATE"/&gt;
</pre></div>

<p>Make sure to include this line in your AndroidManifest.xml file.</p>
<h2>Import the Vibration Library</h2>
<p>Most IDEs will do this for you, but here is the import statement if yours
doesn't:</p>
<div class="code"><pre class="code literal-block"> <span class="kn">import</span> <span class="nn">android.os.Vibrator</span><span class="p">;</span>
</pre></div>

<p>Make sure this in the activity where you want the vibration to occur.</p>
<h2>How to Vibrate for a Given Time</h2>
<p>In most circumstances, you'll be wanting to vibrate the device for a short,
predetermined amount of time. You can achieve this by using the <code>vibrate(long
milliseconds)</code> method. Here is a quick example:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Get instance of Vibrator from current Context</span>
<span class="n">Vibrator</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">Vibrator</span><span class="p">)</span><span class="w"> </span><span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="p">.</span><span class="n">VIBRATOR_SERVICE</span><span class="p">);</span>

<span class="c1">// Vibrate for 400 milliseconds</span>
<span class="n">v</span><span class="p">.</span><span class="n">vibrate</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
</pre></div>

<p>That's it, simple!</p>
<h2>How to Vibrate Indefinitely</h2>
<p>It may be the case that you want the device to continue vibrating
indefinitely. For this, we use the <code>vibrate(long[] pattern, int repeat)</code>
method:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Get instance of Vibrator from current Context</span>
<span class="n">Vibrator</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">Vibrator</span><span class="p">)</span><span class="w"> </span><span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="p">.</span><span class="n">VIBRATOR_SERVICE</span><span class="p">);</span>

<span class="c1">// Start without a delay</span>
<span class="c1">// Vibrate for 100 milliseconds</span>
<span class="c1">// Sleep for 1000 milliseconds</span>
<span class="n">long</span><span class="p">[]</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">};</span>

<span class="c1">// The '0' here means to repeat indefinitely</span>
<span class="c1">// '0' is actually the index at which the pattern keeps repeating from (the start)</span>
<span class="c1">// To repeat the pattern from any other point, you could increase the index, e.g. '1'</span>
<span class="n">v</span><span class="p">.</span><span class="n">vibrate</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>

<p>When you're ready to stop the vibration, just call the <code>cancel()</code> method:</p>
<div class="code"><pre class="code literal-block">v.cancel();
</pre></div>

<h2>How to use Vibration Patterns</h2>
<p>If you want a more bespoke vibration, you can attempt to create your own
vibration patterns:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Get instance of Vibrator from current Context</span>
<span class="n">Vibrator</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">Vibrator</span><span class="p">)</span><span class="w"> </span><span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="p">.</span><span class="n">VIBRATOR_SERVICE</span><span class="p">);</span>

<span class="c1">// Start without a delay</span>
<span class="c1">// Each element then alternates between vibrate, sleep, vibrate, sleep...</span>
<span class="n">long</span><span class="p">[]</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">};</span>

<span class="c1">// The '-1' here means to vibrate once, as '-1' is out of bounds in the pattern array</span>
<span class="n">v</span><span class="p">.</span><span class="n">vibrate</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</pre></div>

<h2>More Complex Vibrations</h2>
<p>There are multiple SDKs that offer a more comprehensive range of haptic
feedback. One that I use for special effects is Immersion's Haptic Development
Platform for Android.</p>
<h2>Troubleshooting</h2>
<p>If your device won't vibrate, first make sure that it can vibrate:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Get instance of Vibrator from current Context</span>
<span class="n">Vibrator</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">Vibrator</span><span class="p">)</span><span class="w"> </span><span class="n">getSystemService</span><span class="p">(</span><span class="n">Context</span><span class="p">.</span><span class="n">VIBRATOR_SERVICE</span><span class="p">);</span>

<span class="c1">// Output yes if can vibrate, no otherwise</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">hasVibrator</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Log</span><span class="p">.</span><span class="n">v</span><span class="p">(</span><span class="s">"Can Vibrate"</span><span class="p">,</span><span class="w"> </span><span class="s">"YES"</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Log</span><span class="p">.</span><span class="n">v</span><span class="p">(</span><span class="s">"Can Vibrate"</span><span class="p">,</span><span class="w"> </span><span class="s">"NO"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Secondly, please ensure that you've given your application the permission to
vibrate! Refer back to the first point.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/iphone-uitextfield-change-placeholder-text-color/" class="u-url">iPhone UITextField - Change placeholder text color</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/iphone-uitextfield-change-placeholder-text-color/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:34:05+08:00" itemprop="datePublished" title="2023-02-18 01:34">2023-02-18 01:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to change the color of the placeholder text I set in my <code>UITextField</code>
controls, to make it black.</p>
<p>I'd prefer to do this without using normal text as the placeholder and having
to override all the methods to imitate the behaviour of a placeholder.</p>
<p>I believe if I override this method:</p>
<div class="code"><pre class="code literal-block">- (void)drawPlaceholderInRect:(CGRect)rect
</pre></div>

<p>then I should be able to do this. But I'm unsure how to access the actual
placeholder object from within this method.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can override <code>drawPlaceholderInRect:(CGRect)rect</code> as such to manually
render the placeholder text:</p>
<div class="code"><pre class="code literal-block"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">drawPlaceholderInRect:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="nv">rect</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[[</span><span class="bp">UIColor</span><span class="w"> </span><span class="n">blueColor</span><span class="p">]</span><span class="w"> </span><span class="n">setFill</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="nb">self</span><span class="w"> </span><span class="n">placeholder</span><span class="p">]</span><span class="w"> </span><span class="n">drawInRect</span><span class="o">:</span><span class="n">rect</span><span class="w"> </span><span class="n">withFont</span><span class="o">:</span><span class="p">[</span><span class="bp">UIFont</span><span class="w"> </span><span class="n">systemFontOfSize</span><span class="o">:</span><span class="mi">16</span><span class="p">]];</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Easy and pain-free, could be an easy alternative for some.</p>
<div class="code"><pre class="code literal-block">_placeholderLabel.textColor
</pre></div>

<p><strong>Not suggested for production, Apple may reject your submission.</strong></p>
<p><img alt="" src="images/EPcOv.png"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-do-browsers-match-css-selectors-from-right-to-left/" class="u-url">Why do browsers match CSS selectors from right to left?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-do-browsers-match-css-selectors-from-right-to-left/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:33:41+08:00" itemprop="datePublished" title="2023-02-18 01:33">2023-02-18 01:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>CSS Selectors are matched by browser engines from right to left. So they first
find the children and then check their parents to see if they match the rest
of the parts of the rule.</p>
<ol>
<li>Why is this?</li>
<li>Is it just because the spec says?</li>
<li>Does it affect the eventual layout if it was evaluated from left to right?</li>
</ol>
<p>To me the simplest way to do it would be use the selectors with the least
number of elements. So IDs first (as they should only return 1 element). Then
maybe classes or an element that has the fewest number of nodes — e.g. there
may only be one span on the page so go directly to that node with any rule
that references a span.</p>
<p>Here are some links backing up my claims</p>
<ol>
<li>http://code.google.com/speed/page-speed/docs/rendering.html</li>
<li>https://developer.mozilla.org/en/Writing_Efficient_CSS</li>
</ol>
<hr>
<p>It sounds like that it is done this way to avoid having to look at all the
children of parent (which could be many) rather than all the parents of a
child which must be one. Even if the DOM is deep it would only look at one
node per level rather than multiple in the RTL matching. Is it easier/faster
to evaluate CSS selectors LTR or RTL?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Keep in mind that when a browser is doing selector matching it has one element
(the one it's trying to determine style for) and all your rules and their
selectors and it needs to find which rules match the element. This is
different from the usual jQuery thing, say, where you only have one selector
and you need to find all the elements that match that selector.</p>
<p>If you only had one selector and only one element to compare against that
selector, then left-to-right makes more sense in some cases. But that's
decidedly <em>not</em> the browser's situation. The browser is trying to render Gmail
or whatever and has the one <code>&lt;span&gt;</code> it's trying to style and the 10,000+
rules Gmail puts in its stylesheet (I'm not making that number up).</p>
<p>In particular, in the situation the browser is looking at most of the
selectors it's considering <em>don't</em> match the element in question. So the
problem becomes one of deciding that a selector doesn't match as fast as
possible; if that requires a bit of extra work in the cases that do match you
still win due to all the work you save in the cases that don't match.</p>
<p>If you start by just matching the rightmost part of the selector against your
element, then chances are it won't match and you're done. If it does match,
you have to do more work, but only proportional to your tree depth, which is
not that big in most cases.</p>
<p>On the other hand, if you start by matching the leftmost part of the
selector... what do you match it against? You have to start walking the DOM,
looking for nodes that might match it. Just discovering that there's nothing
matching that leftmost part might take a while.</p>
<p>So browsers match from the right; it gives an obvious starting point and lets
you get rid of most of the candidate selectors very quickly. You can see some
data at
http://groups.google.com/group/mozilla.dev.tech.layout/browse_thread/thread/b185e455a0b3562a/7db34de545c17665
(though the notation is confusing), but the upshot is that for Gmail in
particular two years ago, for 70% of the (rule, element) pairs you could
decide that the rule does not match after just examining the tag/class/id
parts of the rightmost selector for the rule. The corresponding number for
Mozilla's pageload performance test suite was 72%. So it's really worth trying
to get rid of those 2/3 of all rules as fast as you can and then only worry
about matching the remaining 1/3.</p>
<p>Note also that there are other optimizations browsers already do to avoid even
trying to match rules that definitely won't match. For example, if the
rightmost selector has an id and that id doesn't match the element's id, then
there will be no attempt to match that selector against that element at all in
Gecko: the set of "selectors with IDs" that are attempted comes from a
hashtable lookup on the element's ID. So this is 70% of the rules which have a
pretty good chance of matching that <em>still</em> don't match after considering just
the tag/class/id of the rightmost selector.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Right to left parsing, also called as <strong>bottom-up parsing</strong> is actually
efficient for the browser.</p>
<p>Consider the following:</p>
<div class="code"><pre class="code literal-block"><span class="p">#</span><span class="nn">menu</span><span class="w"> </span><span class="nt">ul</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#00f</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>The browser first checks for <strong><code>a</code></strong> , then <strong><code>li</code></strong> , then <strong><code>ul</code></strong> , and
then <strong><code>#menu</code></strong>.</p>
<p>This is because as the browser is scanning the page it just needs to look at
the current element/node and all the previous nodes/elements that it has
scanned.</p>
<p>The thing to note is that the <strong>browser starts processing moment it gets a
complete tag/node</strong> and needn't have to wait for the whole page except when it
finds a script, in which case it temporarily pauses and completes execution of
the script and then goes forward.</p>
<p>If it does the other way round it will be inefficient because the browser
found the element it was scanning on the first check, but was then forced to
continue looking through the document for all the additional selectors. For
this the browser needs to have the entire html and may need to scan the whole
page before it starts css painting.</p>
<p>This is contrary to how most libs parse dom. There the dom is constructed and
it doesn't need to scan the entire page just find the first element and then
go on matching others inside it .</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1115.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1113.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
