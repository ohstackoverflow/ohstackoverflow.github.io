<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2547) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2547.html">
<link rel="prev" href="index-2548.html" type="text/html">
<link rel="next" href="index-2546.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-evaluated-attributes-inside-a-custom-directive/" class="u-url">How to get evaluated attributes inside a custom directive</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-evaluated-attributes-inside-a-custom-directive/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T00:09:28+08:00" itemprop="datePublished" title="2023-03-05 00:09">2023-03-05 00:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to get an <strong>evaluated</strong> attribute from my custom directive, but I
can't find the right way of doing it.</p>
<p>I've created this jsFiddle to elaborate.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-controller=</span><span class="s">"MyCtrl"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="err">my-directive</span><span class="w"> </span><span class="na">value=</span><span class="s">"123"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="err">my-directive</span><span class="w"> </span><span class="na">value=</span><span class="s">"</span><span class="cp">{{</span><span class="m">1</span><span class="o">+</span><span class="m">1</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>

myApp.directive('myDirective',<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>function<span class="w"> </span>(scope,<span class="w"> </span>element,<span class="w"> </span>attr)<span class="w"> </span>{
<span class="w">        </span>element.val("value<span class="w"> </span>=<span class="w"> </span>"+attr.value);
<span class="w">    </span>}
});
</pre></div>

<p>What am I missing?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><em>Notice: I do update this answer as I find better solutions. I also keep the
old answers for future reference as long as they remain related. Latest and
best answer comes first.</em></p>
<h3>Better answer:</h3>
<p>Directives in angularjs are very powerful, but it takes time to comprehend
which processes lie behind them.</p>
<p>While creating directives, angularjs allows you to create an <em>isolated scope</em>
with some bindings to the parent scope. These bindings are specified by the
<strong>attribute</strong> you attach the element in DOM and how you define <strong>scope</strong>
property in the <em>directive definition object</em>.</p>
<p>There are 3 types of binding options which you can define in scope and you
write those as prefixes related attribute.</p>
<div class="code"><pre class="code literal-block"><span class="n">angular</span><span class="p">.</span><span class="k">module</span><span class="p">(</span><span class="ss">"myApp"</span><span class="p">,</span><span class="w"> </span><span class="err">[]</span><span class="p">).</span><span class="n">directive</span><span class="p">(</span><span class="ss">"myDirective"</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">restrict</span><span class="err">:</span><span class="w"> </span><span class="ss">"A"</span><span class="p">,</span>
<span class="w">        </span><span class="k">scope</span><span class="err">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="nc">text</span><span class="err">:</span><span class="w"> </span><span class="ss">"@myText"</span><span class="p">,</span>
<span class="w">            </span><span class="nl">twoWayBind</span><span class="p">:</span><span class="w"> </span><span class="ss">"=myTwoWayBind"</span><span class="p">,</span>
<span class="w">            </span><span class="nl">oneWayBind</span><span class="p">:</span><span class="w"> </span><span class="ss">"&amp;myOneWayBind"</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span><span class="p">;</span>
<span class="err">}</span><span class="p">).</span><span class="n">controller</span><span class="p">(</span><span class="ss">"myController"</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="err">$</span><span class="k">scope</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="err">$</span><span class="k">scope</span><span class="p">.</span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="nl">name</span><span class="p">:</span><span class="w"> </span><span class="ss">"Umur"</span><span class="err">}</span><span class="p">;</span>
<span class="w">    </span><span class="err">$</span><span class="k">scope</span><span class="p">.</span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"qwe"</span><span class="p">;</span>
<span class="err">}</span><span class="p">);</span>
</pre></div>

<p><em>HTML</em></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-controller=</span><span class="s">"myController"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="err">my-directive</span><span class="w"> </span><span class="na">my-text=</span><span class="s">"hello </span><span class="cp">{{</span> <span class="nv">bar</span> <span class="cp">}}</span><span class="s">"</span><span class="w"> </span><span class="na">my-two-way-bind=</span><span class="s">"foo"</span><span class="w"> </span><span class="na">my-one-way-bind=</span><span class="s">"bar"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>In that case, in the scope of directive (whether it's in linking function or
controller), we can access these properties like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">/*</span><span class="w"> </span><span class="n">Directive</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="o">*/</span>

<span class="n">in</span><span class="p">:</span><span class="w"> </span><span class="no">$</span><span class="n">scope</span><span class="p">.</span><span class="n">text</span>
<span class="n">out</span><span class="p">:</span><span class="w"> </span><span class="s">"hello qwe"</span>
<span class="c1">// this would automatically update the changes of value in digest</span>
<span class="c1">// this is always string as dom attributes values are always strings</span>

<span class="n">in</span><span class="p">:</span><span class="w"> </span><span class="no">$</span><span class="n">scope</span><span class="p">.</span><span class="n">twoWayBind</span>
<span class="n">out</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">:</span><span class="s">"Umur"</span><span class="p">}</span>
<span class="c1">// this would automatically update the changes of value in digest</span>
<span class="c1">// changes in this will be reflected in parent scope</span>

<span class="c1">// in directive's scope</span>
<span class="n">in</span><span class="p">:</span><span class="w"> </span><span class="no">$</span><span class="n">scope</span><span class="p">.</span><span class="n">twoWayBind</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"John"</span>

<span class="c1">//in parent scope</span>
<span class="n">in</span><span class="p">:</span><span class="w"> </span><span class="no">$</span><span class="n">scope</span><span class="p">.</span><span class="n">foo</span><span class="p">.</span><span class="n">name</span>
<span class="n">out</span><span class="p">:</span><span class="w"> </span><span class="s">"John"</span>


<span class="n">in</span><span class="p">:</span><span class="w"> </span><span class="no">$</span><span class="n">scope</span><span class="p">.</span><span class="n">oneWayBind</span><span class="p">()</span><span class="w"> </span><span class="c1">// notice the function call, this binding is read only</span>
<span class="n">out</span><span class="p">:</span><span class="w"> </span><span class="s">"qwe"</span>
<span class="c1">// any changes here will not reflect in parent, as this only a getter .</span>
</pre></div>

<h3>"Still OK" Answer:</h3>
<p>Since this answer got accepted, but has some issues, I'm going to update it to
a better one. Apparently, <code>$parse</code> is a service which does not lie in
properties of the current scope, which means it only takes angular expressions
and cannot reach scope. <code>{{</code>,<code>}}</code> expressions are compiled while angularjs
initiating which means when we try to access them in our directives <code>postlink</code>
method, they are already compiled. (<code>{{1+1}}</code> is <code>2</code> in directive already).</p>
<p>This is how you would want to use:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myApp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">angular</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,[]);</span>

<span class="n">myApp</span><span class="o">.</span><span class="n">directive</span><span class="p">(</span><span class="s1">'myDirective'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="o">$</span><span class="n">parse</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">attr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">element</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">"value="</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">$</span><span class="n">parse</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">myDirective</span><span class="p">)(</span><span class="n">scope</span><span class="p">));</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">});</span>

<span class="n">function</span><span class="w"> </span><span class="n">MyCtrl</span><span class="p">(</span><span class="o">$</span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">aaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3432</span><span class="p">;</span>
<span class="p">}</span><span class="err">​</span>
</pre></div>

<p>.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-controller=</span><span class="s">"MyCtrl"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">my-directive=</span><span class="s">"123"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">my-directive=</span><span class="s">"1+1"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">my-directive=</span><span class="s">"'1+1'"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">my-directive=</span><span class="s">"aaa"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>​​​​​​​​
</pre></div>

<p>One thing you should notice here is that, if you want set the value string,
you should wrap it in quotes. (See 3rd input)</p>
<p>Here is the fiddle to play with: http://jsfiddle.net/neuTA/6/</p>
<h3>Old Answer:</h3>
<p><em>I'm not removing this for folks who can be misled like me, note that
using<code>$eval</code> is perfectly fine the correct way to do it, but <code>$parse</code> has a
different behavior, you probably won't need this to use in most of the cases.</em></p>
<p>The way to do it is, once again, using <code>scope.$eval</code>. Not only it compiles the
angular expression, it has also access to the current scope's properties.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myApp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">angular</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,[]);</span>

<span class="n">myApp</span><span class="o">.</span><span class="n">directive</span><span class="p">(</span><span class="s1">'myDirective'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">attr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">element</span><span class="o">.</span><span class="n">val</span><span class="p">(</span><span class="s2">"value = "</span><span class="o">+</span><span class="w"> </span><span class="n">scope</span><span class="o">.$</span><span class="n">eval</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">value</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="n">function</span><span class="w"> </span><span class="n">MyCtrl</span><span class="p">(</span><span class="o">$</span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span><span class="err">​</span>
</pre></div>

<p>What you are missing was <code>$eval</code>.</p>
<blockquote>
<p>http://docs.angularjs.org/api/ng.$rootScope.Scope#$eval</p>
<p>Executes the expression on the current scope returning the result. Any
exceptions in the expression are propagated (uncaught). This is useful when
evaluating angular expressions.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>For an attribute value that needs to be interpolated in a directive that is
not using an isolated scope, e.g.,</p>
<div class="code"><pre class="code literal-block"><span class="x">&lt;input my-directive value="</span><span class="cp">{{</span><span class="m">1</span><span class="o">+</span><span class="m">1</span><span class="cp">}}</span><span class="x">"&gt;</span>
</pre></div>

<p>use Attributes' method <code>$observe</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">myApp</span>.<span class="nv">directive</span><span class="ss">(</span><span class="s1">'myDirective'</span>,<span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">()</span><span class="w"> </span>{
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="nv">scope</span>,<span class="w"> </span><span class="nv">element</span>,<span class="w"> </span><span class="nv">attr</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">attr</span>.$<span class="nv">observe</span><span class="ss">(</span><span class="s1">'value'</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">actual_value</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">      </span><span class="nv">element</span>.<span class="nv">val</span><span class="ss">(</span><span class="s2">"value = "</span><span class="o">+</span><span class="w"> </span><span class="nv">actual_value</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span>}<span class="ss">)</span>
<span class="w"> </span>}
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>From the directive page,</p>
<blockquote>
<p>observing interpolated attributes: Use <code>$observe</code> to observe the value
changes of attributes that contain interpolation (e.g. <code>src="{{bar}}"</code>). Not
only is this very efficient but it's also the only way to easily get the
actual value because during the linking phase the interpolation hasn't been
evaluated yet and so the value is at this time set to <code>undefined</code>.</p>
</blockquote>
<p>If the attribute value is just a constant, e.g.,</p>
<div class="code"><pre class="code literal-block">&lt;input my-directive value="123"&gt;
</pre></div>

<p>you can use $eval if the value is a number or boolean, and you want the
correct type:</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">attr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">var</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scope</span><span class="o">.$</span><span class="n">eval</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">value</span><span class="p">);</span>
<span class="w">   </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>If the attribute value is a string constant, or you want the value to be
string type in your directive, you can access it directly:</p>
<div class="code"><pre class="code literal-block"><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">attr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">var</span><span class="w"> </span><span class="nb">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attr</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
<span class="w">   </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="nb">str</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" more"</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>In your case, however, since you want to support interpolated values and
constants, use <code>$observe</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/npm-install-won-t-install-devdependencies/" class="u-url">npm install won't install devDependencies</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/npm-install-won-t-install-devdependencies/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T00:08:07+08:00" itemprop="datePublished" title="2023-03-05 00:08">2023-03-05 00:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>On windows for some reason when I run <code>npm install</code> it won't install
<strong>devDependencies</strong>. AFAIK it should. If I run <code>npm install --dev</code>
<strong>devDependencies</strong> are installed. I don't understand why <code>npm install</code>
doesn't install <strong>devDependencies</strong> too, but installs only dependencies. What
could be the reason? How can I fix it?</p>
<p>Maybe something is wrong with my <em>package.json</em>? It is listed below if it may
be helpful:</p>
<div class="code"><pre class="code literal-block">{
  "name": "try-brunch",
  "version": "0.1.0",
  "private": "true",
  "devDependencies": {
    "brunch": "^2.0.4",
    "cssnano-brunch": "^1.1.5",
    "javascript-brunch": "^1.8.0",
    "sass-brunch": "^1.9.2",
    "uglify-js-brunch": "^1.7.8"
  },
  "dependencies": {
    "jquery": "^2.1.4"
  }
}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Check the NPM docs for install</p>
<blockquote>
<p>With the <code>--production</code> flag (or when the NODE_ENV environment variable is
set to production), npm will not install modules listed in devDependencies."</p>
<p>The <code>--only={prod[uction]|dev[elopment]}</code> argument will cause either only
devDependencies or only non-devDependencies to be installed regardless of
the NODE_ENV."</p>
</blockquote>
<p>Have you tried</p>
<div class="code"><pre class="code literal-block">npm install --only=dev
</pre></div>

<p>If you are worried that your <strong>package.json</strong> might be incorrect, best thing
to do is this. Create a new folder, and run:</p>
<div class="code"><pre class="code literal-block">npm init --yes
</pre></div>

<p>Then:</p>
<div class="code"><pre class="code literal-block">npm install --save-dev brunch@^2.0.4
npm install --save-dev cssnano-brunch@^1.1.5
npm install --save-dev javascript-brunch@^1.8.0
npm install --save-dev sass-brunch@^1.9.2
npm install --save-dev uglify-js-brunch@^1.7.8
npm install jquery@^2.1.4 --save
</pre></div>

<p>And you should be good to go! Otherwise, will keep posting other options.</p>
<p>Check your npm configuration:</p>
<div class="code"><pre class="code literal-block">npm config list
</pre></div>

<p>npm gets its config settings from the command line, environment variables, and
npmrc files. So check environment variables, and the npmrc file.</p>
<p><strong>Still failing?</strong></p>
<p>Ok, create a new folder, ideally somewhere else on your filesystem. ie. not in
same folder hierarchy. For instance, C:\myNewFolder - the closer to the base
C: drive the better.</p>
<p>Then run:</p>
<div class="code"><pre class="code literal-block">npm init --yes
</pre></div>

<p>Now run:</p>
<div class="code"><pre class="code literal-block">npm install underscore --save
</pre></div>

<p>and finally:</p>
<div class="code"><pre class="code literal-block">npm install mocha --save-dev
</pre></div>

<p>Does everything work as expected?</p>
<p>What I am trying to do is understand whether your problem is global, or
something local to the previous folder and dependencies.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Check if npm config production value is set to true. If this value is true, it
will skip over the dev dependencies.</p>
<p>Run <code>npm config get production</code></p>
<p>To set it: <code>npm config set -g production false</code></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-right-way-to-treat-python-argparse-namespace-as-a-dictionary/" class="u-url">What is the right way to treat Python argparse.Namespace() as a dictionary?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-right-way-to-treat-python-argparse-namespace-as-a-dictionary/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T00:06:51+08:00" itemprop="datePublished" title="2023-03-05 00:06">2023-03-05 00:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I want to use the results of <code>argparse.ArgumentParser()</code>, which is a
<code>Namespace</code> object, with a method that expects a dictionary or mapping-like
object (see collections.Mapping), what is the right way to do it?</p>
<div class="code"><pre class="code literal-block"><span class="n">C</span><span class="p">:</span>\<span class="o">&gt;</span><span class="n">python</span>
<span class="n">Python</span> <span class="mf">2.7.3</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">Apr</span> <span class="mi">10</span> <span class="mi">2012</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">26</span><span class="p">)</span> <span class="p">[</span><span class="n">MSC</span> <span class="n">v</span><span class="mf">.1500</span> <span class="mi">32</span> <span class="n">bit</span> <span class="p">(</span><span class="n">Intel</span><span class="p">)]</span> <span class="n">on</span> <span class="n">win</span>
<span class="mi">32</span>
<span class="n">Type</span> <span class="s2">"help"</span><span class="p">,</span> <span class="s2">"copyright"</span><span class="p">,</span> <span class="s2">"credits"</span> <span class="ow">or</span> <span class="s2">"license"</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">argparse</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span><span class="o">.</span><span class="n">baz</span> <span class="o">=</span> <span class="s1">'yippee'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span><span class="p">[</span><span class="s1">'baz'</span><span class="p">]</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">'Namespace'</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">'__getitem__'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">dir</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'__class__'</span><span class="p">,</span> <span class="s1">'__contains__'</span><span class="p">,</span> <span class="s1">'__delattr__'</span><span class="p">,</span> <span class="s1">'__dict__'</span><span class="p">,</span> <span class="s1">'__doc__'</span><span class="p">,</span> <span class="s1">'__eq__'</span><span class="p">,</span> <span class="s1">'_</span>
<span class="n">_format__</span><span class="s1">', '</span><span class="fm">__getattribute__</span><span class="s1">', '</span><span class="fm">__hash__</span><span class="s1">', '</span><span class="fm">__init__</span><span class="s1">', '</span><span class="vm">__module__</span><span class="s1">', '</span><span class="fm">__ne__</span><span class="s1">',</span>
<span class="s1">'__new__'</span><span class="p">,</span> <span class="s1">'__reduce__'</span><span class="p">,</span> <span class="s1">'__reduce_ex__'</span><span class="p">,</span> <span class="s1">'__repr__'</span><span class="p">,</span> <span class="s1">'__setattr__'</span><span class="p">,</span> <span class="s1">'__sizeof__</span>
<span class="s1">', '</span><span class="fm">__str__</span><span class="s1">', '</span><span class="n">__subclasshook__</span><span class="s1">', '</span><span class="vm">__weakref__</span><span class="s1">', '</span><span class="n">_get_args</span><span class="s1">', '</span><span class="n">_get_kwargs</span><span class="s1">', '</span><span class="n">ba</span>
<span class="sa">r</span><span class="s1">', '</span><span class="n">baz</span><span class="s1">', '</span><span class="n">foo</span><span class="s1">']</span>
</pre></div>

<p><strong>Is it proper to "reach into" an object and use its<code>__dict__</code> property?</strong></p>
<p>I would think the answer is no: <code>__dict__</code> smells like a convention for
implementation, but not for an interface, the way <code>__getattribute__</code> or
<code>__setattr__</code> or <code>__contains__</code> seem to be.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can access the namespace's dictionary with <em>vars()</em> :</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">argparse</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
<span class="p">{</span><span class="s1">'foo'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
</pre></div>

<p>You can modify the dictionary directly if you wish:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; d['baz'] = 'store me'
&gt;&gt;&gt; args.baz
'store me'
</pre></div>

<p>Yes, it is okay to access the <strong>dict</strong> attribute. It is a well-defined,
tested, and guaranteed behavior.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Straight from the horse's mouth:</p>
<blockquote>
<p>If you prefer to have dict-like view of the attributes, you can use the
standard Python idiom, <code>vars()</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">parser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--foo'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s1">'--foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'BAR'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">vars</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="p">{</span><span class="s1">'foo'</span><span class="p">:</span><span class="w"> </span><span class="s1">'BAR'</span><span class="p">}</span>
</pre></div>

<p>— The Python Standard Library, 16.4.4.6. The Namespace object</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2548.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2546.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
