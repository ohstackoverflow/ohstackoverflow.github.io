<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1188) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1188.html">
<link rel="prev" href="index-1189.html" type="text/html">
<link rel="next" href="index-1187.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-close-current-tab-in-a-browser-window/" class="u-url">How to close current tab in a browser window?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-close-current-tab-in-a-browser-window/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:21:24+08:00" itemprop="datePublished" title="2023-02-18 03:21">2023-02-18 03:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to create a link on a webpage that would close the currently active tab
in a browser without closing other tabs in the browser.<br>
When the user clicks the close link, an alert message should appear asking the
user to confirm with two buttons, "YES" and "NO". If the user clicks "YES",
close that page and If "NO", do nothing.</p>
<p>How can it be done? Any suggestions?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You will need Javascript to do this. Use <code>window.close()</code>:</p>
<div class="code"><pre class="code literal-block">close();
</pre></div>

<p><strong>Note:</strong> the current tab is implied. This is equivalent:</p>
<div class="code"><pre class="code literal-block">window.close();
</pre></div>

<p>or you can specify a different window.</p>
<p>So:</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">close_window</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">confirm</span><span class="ss">(</span><span class="s2">"Close Window?"</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">close</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">  </span>}
}
</pre></div>

<p>with HTML:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"javascript:close_window();"</span><span class="nt">&gt;</span>close<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>or:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"#"</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"close_window();return false;"</span><span class="nt">&gt;</span>close<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>You <code>return false</code> here to prevent the default behavior for the event.
Otherwise the browser will attempt to go to that URL (which it obviously
isn't).</p>
<p>Now the options on the <code>window.confirm()</code> dialog box will be OK and Cancel
(not Yes and No). If you <em>really</em> want Yes and No you'll need to create some
kind of modal Javascript dialog box.</p>
<p><strong>Note:</strong> there is browser-specific differences with the above. If you opened
the window with Javascript (via <code>window.open()</code>) then you are allowed to close
the window with javascript. Firefox disallows you from closing other windows.
I believe IE will ask the user for confirmation. Other browsers may vary.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try this</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"javascript:window.open('','_self').close();"</span><span class="nt">&gt;</span>close<span class="nt">&lt;/a&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/prevent-body-scrolling-but-allow-overlay-scrolling/" class="u-url">Prevent body scrolling but allow overlay scrolling</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/prevent-body-scrolling-but-allow-overlay-scrolling/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:20:55+08:00" itemprop="datePublished" title="2023-02-18 03:20">2023-02-18 03:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've been searching for a "lightbox" type solution that allows this but
haven't found one yet (please, suggest if you know of any).</p>
<p>The behavior I'm trying to recreate is just like what you'd see at Pinterest
when clicking on an image. The overlay is scrollable ( <em>as in the whole
overlay moves up like a page on top of a page</em> ) but the body <strong>behind</strong> the
overlay is fixed.</p>
<p>I attempted to create this with just CSS ( <em>i.e. a<code>div</code> overlay on top of the
whole page and body with <code>overflow: hidden</code></em>), but it doesn't prevent <code>div</code>
from being scrollable.</p>
<p>How to keep the body/page from scrolling but keep scrolling inside the
fullscreen container?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Theory</strong></p>
<p>Looking at current implementation of the pinterest site (it might change in
the future), when you open the overlay, a <code>noscroll</code> class is applied to the
<code>body</code> element (setting <code>overflow: hidden</code>) making the <code>body</code> no longer
scrollable.</p>
<p>The overlay created on-the-fly or already injected in the page and made
visible via <code>display: block</code> — <em>it makes no difference</em> – has <code>position :
fixed</code> and <code>overflow-y: scroll</code>, with <code>top</code>, <code>left</code>, <code>right</code> and <code>bottom</code>
properties set to <code>0</code>: this style makes the overlay fill the whole viewport
(but now we are in 2022, so you may use <code>inset: 0</code> instead).</p>
<p>The <code>div</code> inside the overlay is in <code>position: static</code> so the vertical
scrollbar is related to that element. This is resulting in a scrollable but
fixed overlay.</p>
<p>When you close the overlay, you have to hide it (using <code>display: none</code>) and
you could even remove the node via javascript (or just the content inside,
it's up to you but also depends on the nature of the content).</p>
<p>The final step is to also remove the <code>noscroll</code> class applied to the <code>body</code>
(so the <code>overflow</code> property gets back to the value it had previously)</p>
<hr>
<p><strong>Code</strong></p>
<blockquote>
<p>Codepen Example</p>
</blockquote>
<p>(it works by changing the <code>aria-hidden</code> attribute of the overlay in order to
show and hide it and to increase its accessibility).</p>
<p><strong>Markup</strong><br><em>(open button)</em></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"open-overlay"</span><span class="nt">&gt;</span>OPEN<span class="w"> </span>LAYER<span class="nt">&lt;/button&gt;</span>
</pre></div>

<p><em>(overlay and close button)</em></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;section</span><span class="w"> </span><span class="na">class=</span><span class="s">"overlay"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="w"> </span><span class="na">tabindex=</span><span class="s">"-1"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div&gt;</span>
<span class="w">    </span><span class="nt">&lt;h2&gt;</span>Hello,<span class="w"> </span>I'm<span class="w"> </span>the<span class="w"> </span>overlayer<span class="nt">&lt;/h2&gt;</span>
<span class="w">    </span>...<span class="w">   </span>
<span class="w">    </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"close-overlay"</span><span class="nt">&gt;</span>CLOSE<span class="w"> </span>LAYER<span class="nt">&lt;/button&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</pre></div>

<p><strong>CSS</strong></p>
<div class="code"><pre class="code literal-block"><span class="na">.noscroll</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="no">overflow</span><span class="p">:</span><span class="w"> </span><span class="no">hidden</span><span class="c1">;</span>
<span class="err">}</span>

<span class="na">.overlay</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">   </span><span class="no">position</span><span class="p">:</span><span class="w"> </span><span class="no">fixed</span><span class="c1">; </span>
<span class="w">   </span><span class="nl">overflow-y:</span><span class="w"> </span><span class="nf">scroll</span><span class="c1">;</span>
<span class="w">   </span><span class="nl">inset:</span><span class="w"> </span><span class="err">0</span><span class="c1">; }</span>

<span class="err">[</span><span class="nf">aria-hidden</span><span class="err">="</span><span class="no">true</span><span class="err">"</span><span class="p">]</span><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="no">display</span><span class="p">:</span><span class="w"> </span><span class="no">none</span><span class="c1">; }</span>
<span class="err">[</span><span class="nf">aria-hidden</span><span class="err">="</span><span class="no">false</span><span class="err">"</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">display</span><span class="p">:</span><span class="w"> </span><span class="no">block</span><span class="c1">; }</span>
</pre></div>

<p><strong>Javascript</strong> <em>(vanilla-JS)</em></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="p">,</span>
<span class="w">    </span><span class="n">overlay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">'.overlay'</span><span class="p">),</span>
<span class="w">    </span><span class="n">overlayBtts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">querySelectorAll</span><span class="p">(</span><span class="s1">'button[class$="overlay"]'</span><span class="p">),</span>
<span class="w">    </span><span class="n">openingBtt</span><span class="p">;</span>

<span class="p">[]</span><span class="o">.</span><span class="n">forEach</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">overlayBtts</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">btt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="n">btt</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">     </span><span class="o">/*</span><span class="w"> </span><span class="n">Detect</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">button</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">*/</span>
<span class="w">     </span><span class="k">var</span><span class="w"> </span><span class="n">overlayOpen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">className</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'open-overlay'</span><span class="p">;</span>

<span class="w">     </span><span class="o">/*</span><span class="w"> </span><span class="n">storing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">opening</span><span class="w"> </span><span class="n">button</span><span class="w"> </span><span class="o">*/</span>
<span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">overlayOpen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">openingBtt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">     </span><span class="p">}</span>

<span class="w">     </span><span class="o">/*</span><span class="w"> </span><span class="n">Toggle</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">aria</span><span class="o">-</span><span class="n">hidden</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span>
<span class="w">        </span><span class="n">no</span><span class="o">-</span><span class="n">scroll</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">*/</span>
<span class="w">     </span><span class="n">overlay</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">'aria-hidden'</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="n">overlayOpen</span><span class="p">);</span>
<span class="w">     </span><span class="n">body</span><span class="o">.</span><span class="n">classList</span><span class="o">.</span><span class="n">toggle</span><span class="p">(</span><span class="s1">'noscroll'</span><span class="p">,</span><span class="w"> </span><span class="n">overlayOpen</span><span class="p">);</span>

<span class="w">     </span><span class="o">/*</span><span class="w"> </span><span class="n">On</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">mobile</span><span class="w"> </span><span class="n">browser</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">previously</span>
<span class="w">        </span><span class="n">opened</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">scrolled</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">again</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">doesn</span><span class="s1">'t </span>
<span class="w">        </span><span class="n">reset</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">scrollTop</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="o">*/</span>
<span class="w">     </span><span class="n">overlay</span><span class="o">.</span><span class="n">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">      </span><span class="o">/*</span><span class="w"> </span><span class="n">forcing</span><span class="w"> </span><span class="n">focus</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Assistive</span><span class="w"> </span><span class="n">technologies</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">note</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">modal</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">phrase</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">button</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="n">the</span>
<span class="w">      </span><span class="n">focus</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">button</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">modal</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">privacy</span>
<span class="w">      </span><span class="n">policy</span><span class="p">)</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">focus</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">heading</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span>
<span class="w">      </span><span class="n">the</span><span class="w"> </span><span class="n">modal</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">focus</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">modal</span><span class="o">.</span>

<span class="w">    </span><span class="n">When</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">close</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">focus</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span>
<span class="w">    </span><span class="n">button</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">opened</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">modal</span><span class="o">.</span>
<span class="w">    </span><span class="o">*/</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">overlayOpen</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">overlay</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="n">openingBtt</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">       </span><span class="n">openingBtt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>

<span class="p">});</span>

<span class="o">/*</span><span class="w"> </span><span class="n">detect</span><span class="w"> </span><span class="n">Escape</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">overlay</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">open</span><span class="w"> </span><span class="o">*/</span>
<span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'keyup'</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="o">.</span><span class="n">key</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"Escape"</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">overlay</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">'aria-hidden'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'false'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">overlay</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">'aria-hidden'</span><span class="p">,</span><span class="w"> </span><span class="s1">'true'</span><span class="p">);</span>
<span class="w">      </span><span class="n">body</span><span class="o">.</span><span class="n">classList</span><span class="o">.</span><span class="n">toggle</span><span class="p">(</span><span class="s1">'noscroll'</span><span class="p">,</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>
<span class="w">      </span><span class="n">openingBtt</span><span class="o">.</span><span class="n">focus</span><span class="p">();</span>
<span class="w">      </span><span class="n">openingBtt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">})</span>
</pre></div>

<hr>
<p>Finally, here's another example in which the overlay opens with a fade-in
effect by a CSS <code>transition</code> applied to the <code>opacity</code> property. Also a
<code>padding-right</code> is applied to avoid a reflow on the underlying text when the
scrollbar disappears.</p>
<blockquote>
<p>Codepen Example (fade)</p>
</blockquote>
<p><strong>CSS</strong></p>
<div class="code"><pre class="code literal-block"><span class="na">.noscroll</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">overflow</span><span class="p">:</span><span class="w"> </span><span class="no">hidden</span><span class="c1">; }</span>

<span class="err">@</span><span class="nf">media</span><span class="w"> </span><span class="p">(</span><span class="no">min-device-width</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="no">px</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/* not strictly necessary, just an experiment for </span>
<span class="cm">       this specific example and couldn't be necessary </span>
<span class="cm">       at all on some browser */</span>
<span class="w">    </span><span class="na">.noscroll</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="no">padding-right</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="no">px</span><span class="c1">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="na">.overlay</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">     </span><span class="no">position</span><span class="p">:</span><span class="w"> </span><span class="no">fixed</span><span class="c1">; </span>
<span class="w">     </span><span class="nl">overflow-y:</span><span class="w"> </span><span class="nf">scroll</span><span class="c1">;</span>
<span class="w">     </span><span class="nl">inset:</span><span class="w"> </span><span class="err">0</span><span class="c1">;</span>
<span class="err">}</span>

<span class="err">[</span><span class="nf">aria-hidden</span><span class="err">="</span><span class="no">true</span><span class="err">"</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w">    </span>
<span class="w">    </span><span class="no">transition</span><span class="p">:</span><span class="w"> </span><span class="no">opacity</span><span class="w"> </span><span class="mi">1</span><span class="no">s</span><span class="p">,</span><span class="w"> </span><span class="no">z-index</span><span class="w"> </span><span class="mi">0</span><span class="no">s</span><span class="w"> </span><span class="mi">1</span><span class="no">s</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">width:</span><span class="w"> </span><span class="err">100</span><span class="nf">vw</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">z-index:</span><span class="w"> </span><span class="err">-1</span><span class="c1">; </span>
<span class="w">    </span><span class="nl">opacity:</span><span class="w"> </span><span class="err">0</span><span class="c1">;  </span>
<span class="err">}</span>

<span class="err">[</span><span class="nf">aria-hidden</span><span class="err">="</span><span class="no">false</span><span class="err">"</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="no">transition</span><span class="p">:</span><span class="w"> </span><span class="no">opacity</span><span class="w"> </span><span class="mi">1</span><span class="no">s</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">width:</span><span class="w"> </span><span class="err">100%</span><span class="c1">;</span>
<span class="w">    </span><span class="nl">z-index:</span><span class="w"> </span><span class="err">1</span><span class="c1">;  </span>
<span class="w">    </span><span class="nl">opacity:</span><span class="w"> </span><span class="err">1</span><span class="c1">; </span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><code>overscroll-behavior</code> css property allows to override the browser's default
overflow scroll behavior when reaching the top/bottom of content.</p>
<p>Just add the following styles to overlay:</p>
<div class="code"><pre class="code literal-block"><span class="na">.overlay</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nl">overscroll-behavior:</span><span class="w"> </span><span class="nf">contain</span><span class="c1">;</span>
<span class="w">   </span><span class="na">...</span>
<span class="err">}</span>
</pre></div>

<blockquote>
<p>Codepen demo</p>
</blockquote>
<p>Currently works in Chrome, Firefox and IE(caniuse)</p>
<p>For more details check google developers article.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-disable-mouse-scroll-wheel-scaling-with-google-maps-api/" class="u-url">How to disable mouse scroll wheel scaling with Google Maps API</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-disable-mouse-scroll-wheel-scaling-with-google-maps-api/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T03:20:29+08:00" itemprop="datePublished" title="2023-02-18 03:20">2023-02-18 03:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am using Google Maps API (v3) to draw a few maps on a page. One thing I'd
like to do is disable zooming when you scroll the mouse wheel over the map,
but I'm unsure how.</p>
<p>I have disabled the scaleControl (i.e. removed the scaling UI element), but
this doesn't prevent scroll wheel scaling.</p>
<p>Here is part of my function (it's a simple jQuery plugin):</p>
<div class="code"><pre class="code literal-block"><span class="o">$.</span><span class="n">fn</span><span class="o">.</span><span class="n">showMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">addr</span><span class="p">){</span>
<span class="w">  </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$.</span><span class="n">extend</span><span class="p">({</span>
<span class="w">    </span><span class="n">navigationControl</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">mapTypeControl</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">scaleControl</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">draggable</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">mapTypeId</span><span class="p">:</span><span class="w"> </span><span class="n">google</span><span class="o">.</span><span class="n">maps</span><span class="o">.</span><span class="n">MapTypeId</span><span class="o">.</span><span class="n">ROADMAP</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">google</span><span class="o">.</span><span class="n">maps</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="o">$</span><span class="p">(</span><span class="n">this</span><span class="p">)</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)),</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="n">cut</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">relevant</span>
<span class="p">};</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>In version 3 of the Maps API you can simply set the <code>scrollwheel</code> option to
false within the MapOptions properties:</p>
<div class="code"><pre class="code literal-block"><span class="nt">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">.</span><span class="nc">extend</span><span class="o">(</span><span class="p">{</span>
<span class="w">    </span><span class="n">scrollwheel</span><span class="p">:</span><span class="w"> </span><span class="n">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">navigationControl</span><span class="o">:</span><span class="w"> </span><span class="n">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">mapTypeControl</span><span class="o">:</span><span class="w"> </span><span class="n">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">scaleControl</span><span class="o">:</span><span class="w"> </span><span class="n">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">draggable</span><span class="o">:</span><span class="w"> </span><span class="n">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">mapTypeId</span><span class="o">:</span><span class="w"> </span><span class="n">google</span><span class="o">.</span><span class="n">maps</span><span class="o">.</span><span class="n">MapTypeId</span><span class="o">.</span><span class="n">ROADMAP</span>
<span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="nt">options</span><span class="o">);</span>
</pre></div>

<p>If you were using version 2 of the Maps API you would have had to use the
disableScrollWheelZoom() API call as follows:</p>
<div class="code"><pre class="code literal-block">map.disableScrollWheelZoom();
</pre></div>

<p>The <code>scrollwheel</code> zooming is enabled by default in version 3 of the Maps API,
but in version 2 it is disabled unless explicitly enabled with the
<code>enableScrollWheelZoom()</code> API call.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Daniel's code does the job (thanks a heap!). But I wanted to disable zooming
completely. I found I had to use all four of these options to do so:</p>
<div class="code"><pre class="code literal-block">{
  zoom: 14,                        // Set the zoom level manually
  zoomControl: false,
  scaleControl: false,
  scrollwheel: false,
  disableDoubleClickZoom: true,
  ...
}
</pre></div>

<p>See: <em>MapOptions object specification</em></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1189.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1187.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
