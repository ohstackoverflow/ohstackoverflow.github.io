<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1897) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1897.html">
<link rel="prev" href="index-1898.html" type="text/html">
<link rel="next" href="index-1896.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/check-folder-size-in-bash/" class="u-url">Check folder size in Bash</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/check-folder-size-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:01:09+08:00" itemprop="datePublished" title="2023-03-03 12:01">2023-03-03 12:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to write a script that will calculate a directory size and if the
size is less than 10GB, and greater then 2GB do some action. Where do I need
to mention my folder name?</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="mi">10</span><span class="nv">GB</span>
<span class="nv">SIZE</span><span class="o">=</span><span class="s2">"1074747474"</span>

#<span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">size</span>
<span class="nv">CHECK</span><span class="o">=</span><span class="s2">"`du /data/sflow_log/`"</span>
<span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$CHECK"</span><span class="w"> </span><span class="o">-</span><span class="nv">gt</span><span class="w"> </span><span class="s2">"$SIZE"</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">  </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"DONE"</span>
<span class="nv">fi</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can do:</p>
<div class="code"><pre class="code literal-block">du -hs your_directory
</pre></div>

<p>which will give you a brief output of the size of your target directory. Using
a wildcard like <code>*</code> can select multiple directories.</p>
<p>If you want a full listing of sizes for all files and sub-directories inside
your target, you can do:</p>
<div class="code"><pre class="code literal-block">du -h your_directory
</pre></div>

<p><strong>Tips:</strong></p>
<ul>
<li>
<p>Add the argument <code>-c</code> to see a <em>Total</em> line at the end. Example: <code>du -hcs</code> or <code>du -hc</code>.</p>
</li>
<li>
<p>Remove the argument <code>-h</code> to see the sizes in exact KiB instead of human-readable MiB or GiB formats. Example: <code>du -s</code> or <code>du -cs</code>.</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>if you just want to see the folder size and not the sub-folders, you can use:</p>
<div class="code"><pre class="code literal-block">du -hs /path/to/directory
</pre></div>

<p><strong>Update:</strong></p>
<p>You should know that <code>du</code> shows the used disk space; and not the file size.</p>
<p>You can use <code>--apparent-size</code> if u want to see sum of actual file sizes.</p>
<div class="code"><pre class="code literal-block">--apparent-size
      print  apparent  sizes,  rather  than  disk  usage; although the apparent size is usually smaller, it may be larger due to holes in ('sparse')
      files, internal fragmentation, indirect blocks, and the like
</pre></div>

<p>And of course theres no need for <code>-h</code> (Human readable) option inside a script.</p>
<p>Instead You can use <code>-b</code> for easier comparison inside script.</p>
<p>But You should Note that <code>-b</code> applies <code>--apparent-size</code> by itself. And it
might not be what you need.</p>
<div class="code"><pre class="code literal-block">-b, --bytes
      equivalent to '--apparent-size --block-size=1'
</pre></div>

<p>so I think, you should use <code>--block-size</code> or <code>-B</code></p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/check-folder-size-in-bash/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/check-folder-size-in-bash/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><span class="nv">SIZE</span><span class="o">=</span><span class="k">$(</span>du<span class="w"> </span>-B<span class="w"> </span><span class="m">1</span><span class="w"> </span>/path/to/directory<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f<span class="w"> </span><span class="m">1</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">"   "</span><span class="k">)</span><span class="w">    </span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/check-folder-size-in-bash/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="c1"># 2GB = 2147483648 bytes</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/check-folder-size-in-bash/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="c1"># 10GB = 10737418240 bytes</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/check-folder-size-in-bash/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$SIZE</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">2147483648</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">$SIZE</span><span class="w"> </span>-lt<span class="w"> </span><span class="m">10737418240</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/check-folder-size-in-bash/#-6"><code data-line-number="6"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s1">'Condition returned True'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/check-folder-size-in-bash/#-7"><code data-line-number="7"></code></a></td>
<td class="code"><code><span class="k">fi</span>
</code></td>
</tr>
</table></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-update-a-single-library-with-composer/" class="u-url">How to update a single library with Composer?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-update-a-single-library-with-composer/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:00:45+08:00" itemprop="datePublished" title="2023-03-03 12:00">2023-03-03 12:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to install only 1 package for my SF2 distribution (DoctrineFixtures).</p>
<p>When I run</p>
<div class="code"><pre class="code literal-block">php composer.phar update
</pre></div>

<p>I get</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">Updating</span><span class="w"> </span><span class="n">twig</span><span class="o">/</span><span class="n">twig</span><span class="w"> </span><span class="p">(</span><span class="n">dev</span><span class="o">-</span><span class="k">master</span><span class="w"> </span><span class="mi">39</span><span class="n">d94fa</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">v1</span><span class="o">.</span><span class="mf">13.0</span><span class="p">)</span>
<span class="w">    </span><span class="n">The</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">modified</span><span class="w"> </span><span class="n">files</span><span class="p">:</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">CHANGELOG</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">doc</span><span class="o">/</span><span class="n">filters</span><span class="o">/</span><span class="n">batch</span><span class="o">.</span><span class="n">test</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">doc</span><span class="o">/</span><span class="n">filters</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">rst</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">doc</span><span class="o">/</span><span class="n">filters</span><span class="o">/</span><span class="n">url_encode</span><span class="o">.</span><span class="n">rst</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">doc</span><span class="o">/</span><span class="n">functions</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">rst</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">doc</span><span class="o">/</span><span class="n">tags</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">rst</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">doc</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">rst</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span><span class="n">Twig</span><span class="o">/</span><span class="n">Autoloader</span><span class="o">.</span><span class="n">php</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span><span class="n">Twig</span><span class="o">/</span><span class="n">Compiler</span><span class="o">.</span><span class="n">php</span>
<span class="w">    </span><span class="n">M</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span><span class="n">Twig</span><span class="o">/</span><span class="n">CompilerInterface</span><span class="o">.</span><span class="n">php</span>
<span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">modified</span><span class="p">,</span><span class="w"> </span><span class="n">choose</span><span class="w"> </span><span class="s2">"v"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">list</span>
</pre></div>

<p>It appears the last developer edited a lot of files inside vendor.</p>
<p>In order to get around this, I tried</p>
<div class="code"><pre class="code literal-block">php composer.phar update &lt;package_name&gt;
</pre></div>

<p>But that doesn't seem to work. How can I update/install only one library from
composer.json?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To install <code>doctrine/doctrine-fixtures-bundle</code> with version <code>2.1.*</code> and
minimum stability <code>@dev</code> use this:</p>
<div class="code"><pre class="code literal-block"><span class="n">composer</span><span class="w"> </span><span class="n">require</span><span class="w"> </span><span class="n">doctrine</span><span class="o">/</span><span class="n">doctrine</span><span class="o">-</span><span class="n">fixtures</span><span class="o">-</span><span class="nl">bundle</span><span class="p">:</span><span class="mf">2.1</span><span class="p">.</span><span class="o">*</span><span class="nv">@dev</span>
</pre></div>

<p>then to update only this single package:</p>
<div class="code"><pre class="code literal-block">composer update doctrine/doctrine-fixtures-bundle
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you just want to update a few packages and not all, you can list them as
such:</p>
<div class="code"><pre class="code literal-block">php composer.phar update vendor/package:2.* vendor/package2:dev-master
</pre></div>

<p>You can also use wildcards to update a bunch of packages at once:</p>
<div class="code"><pre class="code literal-block">php composer.phar update vendor/*
</pre></div>

<p>As commented by @ZeroThe2nd ZSH users may need to wrap their vendor/* in
quotation marks:</p>
<div class="code"><pre class="code literal-block">php composer.phar update "vendor/*"
</pre></div>

<ul>
<li>
<strong>--prefer-source</strong> : Install packages from <code>source</code> when available.</li>
<li>
<strong>--prefer-dist</strong> : Install packages from <code>dist</code> when available.</li>
<li>
<strong>--ignore-platform-reqs</strong> : ignore <code>php</code>, <code>hhvm</code>, <code>lib-*</code> and <code>ext-*</code> requirements and force the installation even if the local machine does not fulfill these. See also the <code>platform</code> config option.</li>
<li>
<strong>--dry-run</strong> : Simulate the command without actually doing anything.</li>
<li>
<strong>--dev</strong> : Install packages listed in <code>require-dev</code> (this is the default behavior).</li>
<li>
<strong>--no-dev</strong> : Skip installing packages listed in <code>require-dev</code>. The autoloader generation skips the <code>autoload-dev</code> rules.</li>
<li>
<strong>--no-autoloader</strong> : Skips autoloader generation.</li>
<li>
<strong>--no-scripts</strong> : Skips execution of scripts defined in composer.json.</li>
<li>
<strong>--no-plugins</strong> : Disables plugins.</li>
<li>
<strong>--no-progress</strong> : Removes the progress display that can mess with some terminals or scripts which don't handle backspace characters.</li>
<li>
<strong>--optimize-autoloader (-o)</strong> : Convert PSR-0/4 autoloading to classmap to get a faster autoloader. This is recommended especially for production, but can take a bit of time to run so it is currently not done by default.</li>
<li>
<strong>--lock</strong> : Only updates the lock file hash to suppress warning about the lock file being out of date.</li>
<li>
<strong>--with-dependencies</strong> : Add also all dependencies of whitelisted packages to the whitelist.</li>
<li>
<strong>--prefer-stable</strong> : Prefer stable versions of dependencies.</li>
<li>
<strong>--prefer-lowest</strong> : Prefer lowest versions of dependencies. Useful for testing minimal versions of requirements, generally used with <code>--prefer-stable</code>.</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-way-to-automatically-build-the-package-json-file-for-node-js-projects/" class="u-url">Is there a way to automatically build the package.json file for Node.js projects</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-way-to-automatically-build-the-package-json-file-for-node-js-projects/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:00:20+08:00" itemprop="datePublished" title="2023-03-03 12:00">2023-03-03 12:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is package.json supposed to be manually edited? Couldn't a program like npm
just look through the files, see the "require" statements, and then use that
to put the necessary entries in the package.json file? Are there any programs
like that?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The package.json file is used by <strong>npm</strong> to learn about your node.js project.</p>
<p>Use <code>npm init</code> to generate package.json files for you!</p>
<p>It comes bundled with npm. Read its documentation here:
https://docs.npmjs.com/cli/init</p>
<p>Also, there's an official tool you can use to generate this file
programmatically: https://github.com/npm/init-package-json</p>
<p><br></p>
<h3>Suggest</h3>
<p>First off, run</p>
<div class="code"><pre class="code literal-block">npm init
</pre></div>

<p>...will ask you a few questions (read this first) about your project/package
and then generate a package.json file for you.</p>
<p>Then, once you have a package.json file, use</p>
<div class="code"><pre class="code literal-block">npm install &lt;pkg&gt; --save
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">npm install &lt;pkg&gt; --save-dev
</pre></div>

<p>...to install a dependency and automatically append it to your
<code>package.json</code>'s <code>dependencies</code> list.</p>
<p>(Note: You may need to manually tweak the version ranges for your
dependencies.)</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1898.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1896.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
