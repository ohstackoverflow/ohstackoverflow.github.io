<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1548) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1548.html">
<link rel="prev" href="index-1549.html" type="text/html">
<link rel="next" href="index-1547.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/resizing-an-iframe-based-on-content/" class="u-url">Resizing an iframe based on content</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/resizing-an-iframe-based-on-content/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:39:14+08:00" itemprop="datePublished" title="2023-03-03 03:39">2023-03-03 03:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am working on an iGoogle-like application. Content from other applications
(on other domains) is shown using iframes.</p>
<p>How do I resize the iframes to fit the height of the iframes' content?</p>
<p>I've tried to decipher the javascript Google uses but it's obfuscated, and
searching the web has been fruitless so far.</p>
<p><strong>Update:</strong> Please note that content is loaded from other domains, so the
same-origin policy applies.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>We had this type of problem, but slightly in reverse to your situation - we
were providing the iframed content to sites on other domains, so the same
origin policy was also an issue. After many hours spent trawling google, we
eventually found a (somewhat..) workable solution, which you may be able to
adapt to your needs.</p>
<p>There is a way around the same origin policy, but it requires changes on both
the iframed content and the framing page, so if you haven't the ability to
request changes on both sides, this method won't be very useful to you, i'm
afraid.</p>
<p>There's a browser quirk which allows us to skirt the same origin policy -
javascript can communicate either with pages on its own domain, or with pages
it has iframed, but never pages in which it is framed, e.g. if you have:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">foo</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">home</span><span class="p">.</span><span class="n">html</span><span class="p">,</span><span class="w"> </span><span class="nf">which</span><span class="w"> </span><span class="n">iframes</span>
<span class="w"> </span><span class="o">|-&gt;</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">net</span><span class="o">/</span><span class="n">framed</span><span class="p">.</span><span class="n">html</span><span class="p">,</span><span class="w"> </span><span class="nf">which</span><span class="w"> </span><span class="n">iframes</span>
<span class="w">     </span><span class="o">|-&gt;</span><span class="w"> </span><span class="n">www</span><span class="p">.</span><span class="n">foo</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">helper</span><span class="p">.</span><span class="n">html</span>
</pre></div>

<p>then <code>home.html</code> can communicate with <code>framed.html</code> (iframed) and
<code>helper.html</code> (same domain).</p>
<div class="code"><pre class="code literal-block"><span class="c"> Communication options for each page:</span>
<span class="c"> </span><span class="nb">+-------------------------+-----------+-------------+-------------+</span>
<span class="c"> |                         | home</span><span class="nt">.</span><span class="c">html | framed</span><span class="nt">.</span><span class="c">html | helper</span><span class="nt">.</span><span class="c">html |</span>
<span class="c"> </span><span class="nb">+-------------------------+-----------+-------------+-------------+</span>
<span class="c"> | www</span><span class="nt">.</span><span class="c">foo</span><span class="nt">.</span><span class="c">com/home</span><span class="nt">.</span><span class="c">html   |    N/A    |     YES     |     YES     |</span>
<span class="c"> | www</span><span class="nt">.</span><span class="c">bar</span><span class="nt">.</span><span class="c">net/framed</span><span class="nt">.</span><span class="c">html |    NO     |     N/A     |     YES     |</span>
<span class="c"> | www</span><span class="nt">.</span><span class="c">foo</span><span class="nt">.</span><span class="c">com/helper</span><span class="nt">.</span><span class="c">html |    YES    |     YES     |     N/A     |</span>
<span class="c"> </span><span class="nb">+-------------------------+-----------+-------------+-------------+</span>
</pre></div>

<p><code>framed.html</code> can send messages to <code>helper.html</code> (iframed) but <em>not</em>
<code>home.html</code> (child can't communicate cross-domain with parent).</p>
<p>The key here is that <code>helper.html</code> can receive messages from <code>framed.html</code>,
and <strong>can also communicate</strong> with <code>home.html</code>.</p>
<p>So essentially, when <code>framed.html</code> loads, it works out its own height, tells
<code>helper.html</code>, which passes the message on to <code>home.html</code>, which can then
resize the iframe in which <code>framed.html</code> sits.</p>
<p>The simplest way we found to pass messages from <code>framed.html</code> to <code>helper.html</code>
was through a URL argument. To do this, <code>framed.html</code> has an iframe with
<code>src=''</code> specified. When its <code>onload</code> fires, it evaluates its own height, and
sets the src of the iframe at this point to <code>helper.html?height=N</code></p>
<p>There's an explanation here of how facebook handle it, which may be slightly
clearer than mine above!</p>
<hr>
<p><strong>Code</strong></p>
<p>In <code>www.foo.com/home.html</code>, the following javascript code is required (this
can be loaded from a .js file on any domain, incidentally..):</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script&gt;</span>
<span class="w">  </span>//<span class="w"> </span>Resize<span class="w"> </span>iframe<span class="w"> </span>to<span class="w"> </span>full<span class="w"> </span>height
<span class="w">  </span>function<span class="w"> </span>resizeIframe(height)
<span class="w">  </span>{
<span class="w">    </span>//<span class="w"> </span>"+60"<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>general<span class="w"> </span>rule<span class="w"> </span>of<span class="w"> </span>thumb<span class="w"> </span>to<span class="w"> </span>allow<span class="w"> </span>for<span class="w"> </span>differences<span class="w"> </span>in
<span class="w">    </span>//<span class="w"> </span>IE<span class="w"> </span><span class="err">&amp;</span><span class="w"> </span>and<span class="w"> </span>FF<span class="w"> </span>height<span class="w"> </span>reporting,<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>adjusted<span class="w"> </span>as<span class="w"> </span>required..
<span class="w">    </span>document.getElementById('frame_name_here').height<span class="w"> </span>=<span class="w"> </span>parseInt(height)+60;
<span class="w">  </span>}
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;iframe</span><span class="w"> </span><span class="na">id=</span><span class="s">'frame_name_here'</span><span class="w"> </span><span class="na">src=</span><span class="s">'http://www.bar.net/framed.html'</span><span class="nt">&gt;&lt;/iframe&gt;</span>
</pre></div>

<p>In <code>www.bar.net/framed.html</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">body</span><span class="w"> </span><span class="n">onload</span><span class="o">=</span><span class="s2">"iframeResizePipe()"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">iframe</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s2">"helpframe"</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s1">''</span><span class="w"> </span><span class="n">height</span><span class="o">=</span><span class="s1">'0'</span><span class="w"> </span><span class="n">width</span><span class="o">=</span><span class="s1">'0'</span><span class="w"> </span><span class="n">frameborder</span><span class="o">=</span><span class="s1">'0'</span><span class="o">&gt;&lt;/</span><span class="n">iframe</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s2">"text/javascript"</span><span class="o">&gt;</span>
<span class="w">  </span><span class="n">function</span><span class="w"> </span><span class="n">iframeResizePipe</span><span class="p">()</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">What</span><span class="s1">'s the page height?</span>
<span class="w">     </span><span class="k">var</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">scrollHeight</span><span class="p">;</span>

<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Going</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s1">'pipe'</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">helpframe</span><span class="o">..</span>
<span class="w">     </span><span class="k">var</span><span class="w"> </span><span class="n">pipe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'helpframe'</span><span class="p">);</span>

<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Cachebuster</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">precaution</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">browser</span><span class="w"> </span><span class="n">caching</span><span class="w"> </span><span class="n">interfering</span>
<span class="w">     </span><span class="n">pipe</span><span class="o">.</span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'http://www.foo.com/helper.html?height='</span><span class="o">+</span><span class="n">height</span><span class="o">+</span><span class="s1">'&amp;cacheb='</span><span class="o">+</span><span class="n">Math</span><span class="o">.</span><span class="n">random</span><span class="p">();</span>

<span class="w">  </span><span class="p">}</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>

<p>Contents of <code>www.foo.com/helper.html</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span><span class="w"> </span>
<span class="o">&lt;!--</span><span class="w"> </span>
<span class="n">This</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">can</span>
<span class="n">communicate</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">iframe</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="n">resizing</span>
<span class="n">to</span><span class="w"> </span><span class="n">fit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span>
<span class="o">--&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="o">&lt;</span><span class="n">body</span><span class="w"> </span><span class="n">onload</span><span class="o">=</span><span class="s2">"parentIframeResize()"</span><span class="o">&gt;</span><span class="w"> </span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span><span class="w"> </span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">Tell</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">parent</span><span class="w"> </span><span class="n">iframe</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">iframe</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span>
<span class="w">      </span><span class="n">function</span><span class="w"> </span><span class="n">parentIframeResize</span><span class="p">()</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="k">var</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getParam</span><span class="p">(</span><span class="s1">'height'</span><span class="p">);</span>
<span class="w">         </span><span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">parent</span><span class="s1">'s parent is on our domain..</span>
<span class="w">         </span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resizeIframe</span><span class="p">(</span><span class="n">height</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">Helper</span><span class="w"> </span><span class="n">function</span><span class="p">,</span><span class="w"> </span><span class="n">parse</span><span class="w"> </span><span class="n">param</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">string</span>
<span class="w">      </span><span class="n">function</span><span class="w"> </span><span class="n">getParam</span><span class="p">(</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">)</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span><span class="p">[</span>\<span class="p">[]</span><span class="o">/</span><span class="p">,</span><span class="s2">"</span><span class="se">\\</span><span class="s2">\["</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span><span class="p">[</span>\<span class="p">]]</span><span class="o">/</span><span class="p">,</span><span class="s2">"</span><span class="se">\\</span><span class="s2">\]"</span><span class="p">);</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">regexS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"[</span><span class="se">\\</span><span class="s2">?&amp;]"</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s2">"=([^&amp;#]*)"</span><span class="p">;</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="w"> </span><span class="n">regexS</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regex</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">href</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">)</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span><span class="w"> </span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you do not need to handle iframe content from a different domain, try this
code, it will solve the problem completely and it's simple:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script</span><span class="w"> </span><span class="na">language=</span><span class="s">"JavaScript"</span><span class="nt">&gt;</span>
<span class="cm">&lt;!--</span>
<span class="cm">function autoResize(id){</span>
<span class="cm">    var newheight;</span>
<span class="cm">    var newwidth;</span>

<span class="cm">    if(document.getElementById){</span>
<span class="cm">        newheight=document.getElementById(id).contentWindow.document .body.scrollHeight;</span>
<span class="cm">        newwidth=document.getElementById(id).contentWindow.document .body.scrollWidth;</span>
<span class="cm">    }</span>

<span class="cm">    document.getElementById(id).height= (newheight) + "px";</span>
<span class="cm">    document.getElementById(id).width= (newwidth) + "px";</span>
<span class="cm">}</span>
<span class="cm">//--&gt;</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;iframe</span><span class="w"> </span><span class="na">src=</span><span class="s">"usagelogs/default.aspx"</span><span class="w"> </span><span class="na">width=</span><span class="s">"100%"</span><span class="w"> </span><span class="na">height=</span><span class="s">"200px"</span><span class="w"> </span><span class="na">id=</span><span class="s">"iframe1"</span><span class="w"> </span><span class="na">marginheight=</span><span class="s">"0"</span><span class="w"> </span><span class="na">frameborder=</span><span class="s">"0"</span><span class="w"> </span><span class="na">onLoad=</span><span class="s">"autoResize('iframe1');"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-difference-between-staticresource-and-dynamicresource-in-wpf/" class="u-url">What's the difference between StaticResource and DynamicResource in WPF?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-difference-between-staticresource-and-dynamicresource-in-wpf/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:38:49+08:00" itemprop="datePublished" title="2023-03-03 03:38">2023-03-03 03:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When using resources such as brushes, templates and styles in WPF, they can be
specified either as StaticResources</p>
<div class="code"><pre class="code literal-block">&lt;Rectangle Fill="{StaticResource MyBrush}" /&gt;
</pre></div>

<p>or as a DynamicResource</p>
<div class="code"><pre class="code literal-block">&lt;ItemsControl ItemTemplate="{DynamicResource MyItemTemplate}"  /&gt;
</pre></div>

<p>Most of the times (always?), only one works and the other will throw exception
during runtime. But I'd like to know why:</p>
<ul>
<li>What is the main difference. Like memory or performance implications</li>
<li>Are there rules in WPF like "brushes are always static" and "templates are always dynamic" etc.?</li>
</ul>
<p>I <strong>assume</strong> the choice between Static vs Dynamic isn't as arbitrary as it
seems... but I fail to see the pattern.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A StaticResource will be resolved and assigned to the property during the
loading of the XAML which occurs before the application is actually run. It
will only be assigned once and any changes to resource dictionary ignored.</p>
<p>A DynamicResource assigns an Expression object to the property during loading
but does not actually lookup the resource until runtime when the Expression
object is asked for the value. This defers looking up the resource until it is
needed at runtime. A good example would be a forward reference to a resource
defined later on in the XAML. Another example is a resource that will not even
exist until runtime. It will update the target if the source resource
dictionary is changed.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I was also confused about them. See this example below:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;Window</span><span class="w"> </span><span class="na">x:Class=</span><span class="s">"WpfApplicationWPF.CommandsWindow"</span>
<span class="w">        </span><span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
<span class="w">        </span><span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
<span class="w">        </span><span class="na">Title=</span><span class="s">"CommandsWindow"</span><span class="w"> </span><span class="na">Height=</span><span class="s">"300"</span><span class="w"> </span><span class="na">Width=</span><span class="s">"300"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;StackPanel&gt;</span>
<span class="w">        </span><span class="nt">&lt;Button</span><span class="w"> </span><span class="na">Name=</span><span class="s">"ButtonNew"</span><span class="w"> </span>
<span class="w">                </span><span class="na">Click=</span><span class="s">"ButtonNew_Click"</span><span class="w"> </span>
<span class="w">                </span><span class="na">Background=</span><span class="s">"{DynamicResource PinkBrush}"</span><span class="nt">&gt;</span>NEW<span class="nt">&lt;/Button&gt;</span>
<span class="w">        </span><span class="nt">&lt;Image</span><span class="w"> </span><span class="na">Name=</span><span class="s">"ImageNew"</span><span class="w"> </span>
<span class="w">               </span><span class="na">Source=</span><span class="s">"pack://application:,,,/images/winter.jpg"</span><span class="nt">&gt;&lt;/Image&gt;</span>
<span class="w">    </span><span class="nt">&lt;/StackPanel&gt;</span>


<span class="w">    </span><span class="nt">&lt;Window.Background&gt;</span>
<span class="w">        </span><span class="nt">&lt;DynamicResource</span><span class="w"> </span><span class="na">ResourceKey=</span><span class="s">"PinkBrush"</span><span class="nt">&gt;&lt;/DynamicResource&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Window.Background&gt;</span>

<span class="nt">&lt;/Window&gt;</span>
</pre></div>

<p>Here I have used dynamic resource for button and window and have not declared
it anywhere.Upon runtime, the ResourceDictionary of the hierarchy will be
checked.Since I have not defined it, I guess the default will be used.</p>
<p>If I add the code below to click event of Button, since they use
DynamicResource, the background will be updated accordingly.</p>
<div class="code"><pre class="code literal-block">private void ButtonNew_Click(object sender, RoutedEventArgs e)
{
    this.Resources.Add(  "PinkBrush"
                         ,new SolidColorBrush(SystemColors.DesktopColor)
                       );
}
</pre></div>

<p>If they had used StaticResource:</p>
<ul>
<li>The resource has to be declared in XAML </li>
<li>And that too "before" they are used. </li>
</ul>
<p>Hope I cleared some confusion.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/reloading-submodules-in-ipython/" class="u-url">Reloading submodules in IPython</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/reloading-submodules-in-ipython/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T03:38:20+08:00" itemprop="datePublished" title="2023-03-03 03:38">2023-03-03 03:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Currently I am working on a python project that contains sub modules and uses
numpy/scipy. Ipython is used as interactive console. Unfortunately I am not
very happy with workflow that I am using right now, I would appreciate some
advice.</p>
<p>In IPython, the framework is loaded by a simple <code>import</code> command. However, it
is often necessary to change code in one of the submodules of the framework.
At this point a model is already loaded and I use IPython to interact with it.</p>
<p>Now, the framework contains many modules that depend on each other, i.e. when
the framework is initially loaded the main module is importing and configuring
the submodules. The changes to the code are only executed if the module is
reloaded using <code>reload(main_mod.sub_mod)</code>. This is cumbersome as I need to
reload all changed modules individually using the full path. It would be very
convenient if <code>reload(main_module)</code> would also reload all sub modules, but
without reloading numpy/scipy..</p>
<p><br><br></p>
<h2>Answer</h2>
<p>IPython comes with some automatic reloading magic:</p>
<div class="code"><pre class="code literal-block"><span class="nf">%load_ext</span><span class="w"> </span><span class="n">autoreload</span>
<span class="nf">%autoreload</span><span class="w"> </span><span class="mi">2</span>
</pre></div>

<p>It will reload all changed modules every time before executing a new line. The
way this works is slightly different than <code>dreload</code>. Some caveats apply, type
<code>%autoreload?</code> to see what can go wrong.</p>
<hr>
<p>If you want to always enable this settings, modify your IPython configuration
file <code>~/.ipython/profile_default/ipython_config.py</code>[1] and appending:</p>
<div class="code"><pre class="code literal-block"><span class="n">c</span><span class="o">.</span><span class="n">InteractiveShellApp</span><span class="o">.</span><span class="n">extensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'autoreload'</span><span class="p">]</span><span class="w">     </span>
<span class="n">c</span><span class="o">.</span><span class="n">InteractiveShellApp</span><span class="o">.</span><span class="n">exec_lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'%autoreload 2'</span><span class="p">]</span>
</pre></div>

<p><em>Credit to @Kos via a comment below.</em></p>
<p>[1] If you don't have the file <code>~/.ipython/profile_default/ipython_config.py</code>,
you need to call <code>ipython profile create</code> first. Or the file may be located at
<code>$IPYTHONDIR</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Module named <code>importlib</code> allow to access to import internals. Especially, it
provide function <code>importlib.reload()</code>:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">importlib</span>
<span class="n">importlib</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">my_module</span><span class="p">)</span>
</pre></div>

<p>In contrary of <code>%autoreload</code>, <code>importlib.reload()</code> also reset global variables
set in module. In most cases, it is what you want.</p>
<p><code>importlib</code> is only available since Python 3.1. For older version, you have to
use module <code>imp</code>.</p>
<p>I suggest to read documentation of <code>importlib.reload()</code> to get the list of all
caveats of this function (recursive reload, cases where definitions of old
objects remain, etc...).</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1549.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1547.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
