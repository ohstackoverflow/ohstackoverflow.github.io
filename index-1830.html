<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1830) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1830.html">
<link rel="prev" href="index-1831.html" type="text/html">
<link rel="next" href="index-1829.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-handle-too-long-index-names-in-a-ruby-on-rails-activerecord-migration/" class="u-url">How do I handle too long index names in a Ruby on Rails ActiveRecord migration?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-handle-too-long-index-names-in-a-ruby-on-rails-activerecord-migration/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:21:15+08:00" itemprop="datePublished" title="2023-03-03 10:21">2023-03-03 10:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to add a unique index that gets created from the foreign keys of
four associated tables:</p>
<div class="code"><pre class="code literal-block"><span class="n">add_index</span><span class="w"> </span><span class="o">:</span><span class="n">studies</span><span class="o">,</span>
<span class="w">  </span><span class="o">[</span><span class="s2">"user_id"</span><span class="o">,</span><span class="w"> </span><span class="s2">"university_id"</span><span class="o">,</span><span class="w"> </span><span class="s2">"subject_name_id"</span><span class="o">,</span><span class="w"> </span><span class="s2">"subject_type_id"</span><span class="o">],</span>
<span class="w">  </span><span class="o">:</span><span class="n">unique</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kc">true</span>
</pre></div>

<p>The database’s limitation for the index name causes the migration to fail.
Here’s the error message:</p>
<blockquote>
<p>Index name
'index_studies_on_user_id_and_university_id_and_subject_name_id_and_subject_type_id'
on table 'studies' is too long; the limit is 64 characters</p>
</blockquote>
<p>How can I handle this? Can I specify a different index name?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Provide the <code>:name</code> option to <code>add_index</code>, e.g.:</p>
<div class="code"><pre class="code literal-block"><span class="n">add_index</span><span class="w"> </span><span class="o">:</span><span class="n">studies</span><span class="o">,</span>
<span class="w">  </span><span class="o">[</span><span class="s2">"user_id"</span><span class="o">,</span><span class="w"> </span><span class="s2">"university_id"</span><span class="o">,</span><span class="w"> </span><span class="s2">"subject_name_id"</span><span class="o">,</span><span class="w"> </span><span class="s2">"subject_type_id"</span><span class="o">],</span><span class="w"> </span>
<span class="w">  </span><span class="n">unique</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="o">,</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="s1">'my_index'</span>
</pre></div>

<p>If using the <code>:index</code> option on <code>references</code> in a <code>create_table</code> block, it
takes the same options hash as <code>add_index</code> as its value:</p>
<div class="code"><pre class="code literal-block">t.references :long_name, index: { name: :my_index }
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can change the index name in column definitions within a <code>create_table</code>
block (such as you get from the migration generator).</p>
<div class="code"><pre class="code literal-block"><span class="n">create_table</span><span class="w"> </span><span class="o">:</span><span class="n">studies</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="o">|</span><span class="n">t</span><span class="o">|</span>
<span class="w">  </span><span class="n">t</span><span class="o">.</span><span class="na">references</span><span class="w"> </span><span class="o">:</span><span class="n">user</span><span class="o">,</span><span class="w"> </span><span class="n">index</span><span class="o">:</span><span class="w"> </span><span class="o">{:</span><span class="n">name</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"index_my_shorter_name"</span><span class="o">}</span>
<span class="n">end</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-it-possible-to-declare-a-variable-in-gradle-usable-in-java/" class="u-url">Is it possible to declare a variable in Gradle usable in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-it-possible-to-declare-a-variable-in-gradle-usable-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:20:49+08:00" itemprop="datePublished" title="2023-03-03 10:20">2023-03-03 10:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is it possible to declare a variable in Gradle usable in Java ? Basically I
would like to declare some vars in the build.gradle and then getting it
(obviously) at build time. Just like a pre-processor macros in C/C++...</p>
<p>An example of declaration would be something like that ... :</p>
<div class="code"><pre class="code literal-block">android {
    debug {
        A_VAR_RETRIEVABLE_IN_JAVA = 42
    }
    release {
        A_VAR_RETRIEVABLE_IN_JAVA = 42+52
    }
}
</pre></div>

<p>Is there a way to do something like that ?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here are two ways to pass value from Gradle to use in Java;</p>
<h3>Generate Java Constants</h3>
<div class="code"><pre class="code literal-block">android {
    buildTypes {
        debug {
            buildConfigField "int", "FOO", "42"
            buildConfigField "String", "FOO_STRING", "\"foo\""
            buildConfigField "boolean", "LOG", "true"
        }

        release {
            buildConfigField "int", "FOO", "52"
            buildConfigField "String", "FOO_STRING", "\"bar\""
            buildConfigField "boolean", "LOG", "false"
        }
    }
}
</pre></div>

<p>You can access them with <code>BuildConfig.FOO</code></p>
<h3>Generate Android resources</h3>
<div class="code"><pre class="code literal-block">android {
    buildTypes {
        debug{
            resValue "string", "app_name", "My App Name Debug"
        }
        release {
            resValue "string", "app_name", "My App Name"
        }
    }
}
</pre></div>

<p>You can access them in the usual way with <code>@string/app_name</code> or
<code>R.string.app_name</code></p>
<p><br></p>
<h3>Suggest</h3>
<h4>An example of usage an Api App Key in an Android application (Java and</h4>
<p>XML)</p>
<p><em>gradle.properties</em></p>
<div class="code"><pre class="code literal-block">AppKey="XXXX-XXXX"
</pre></div>

<p><em>build.gradle</em></p>
<div class="code"><pre class="code literal-block">buildTypes {
//...
    buildTypes.each {
        it.buildConfigField 'String', 'APP_KEY_1', AppKey
        it.resValue 'string', 'APP_KEY_2', AppKey
    }
}
</pre></div>

<p><em>Usage in java code</em></p>
<div class="code"><pre class="code literal-block"><span class="nt">Log</span><span class="p">.</span><span class="nc">d</span><span class="o">(</span><span class="s2">"UserActivity"</span><span class="o">,</span><span class="w"> </span><span class="s2">"onCreate, APP_KEY: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nt">getString</span><span class="o">(</span><span class="nt">R</span><span class="p">.</span><span class="nc">string</span><span class="p">.</span><span class="nc">APP_KEY_2</span><span class="o">));</span>

<span class="nt">BuildConfig</span><span class="p">.</span><span class="nc">APP_KEY_1</span>
</pre></div>

<p><em>Usage in xml code</em></p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="k">data</span><span class="w"> </span><span class="nl">android</span><span class="p">:</span><span class="n">scheme</span><span class="o">=</span><span class="ss">"@string/APP_KEY_2"</span><span class="w"> </span><span class="o">/&gt;</span>
</pre></div>

<ul>
<li>Link to an example of Api App Key usage in an Android application</li>
<li>Using String Constants Generated by Gradle Build Configurations</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-the-proxy-decorator-adapter-and-bridge-patterns-differ/" class="u-url">How do the Proxy, Decorator, Adapter, and Bridge Patterns differ?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-the-proxy-decorator-adapter-and-bridge-patterns-differ/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T10:20:24+08:00" itemprop="datePublished" title="2023-03-03 10:20">2023-03-03 10:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was looking at the Proxy Pattern, and to me it seems an awful lot like the
Decorator, Adapter, and Bridge patterns. Am I misunderstanding something?
What's the difference? Why would I use the Proxy pattern versus the others?
How have you used them in the past in real world projects?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Proxy, Decorator, Adapter, and Bridge are all variations on "wrapping" a
class. But their uses are different.</p>
<ul>
<li>
<p><strong>Proxy</strong> could be used when you want to lazy-instantiate an object, or hide the fact that you're calling a remote service, or control access to the object.</p>
</li>
<li>
<p><strong>Decorator</strong> is also called "Smart Proxy." This is used when you want to add functionality to an object, but not by extending that object's type. This allows you to do so at runtime.</p>
</li>
<li>
<p><strong>Adapter</strong> is used when you have an abstract interface, and you want to map that interface to another object which has similar functional role, but a different interface.</p>
</li>
<li>
<p><strong>Bridge</strong> is very similar to Adapter, but we call it Bridge when you define both the abstract interface and the underlying implementation. I.e. you're not adapting to some legacy or third-party code, you're the designer of all the code but you need to be able to swap out different implementations.</p>
</li>
<li>
<p><strong>Facade</strong> is a higher-level (read: simpler) interface to a subsystem of one or more classes. Suppose you have a complex concept that requires multiple objects to represent. Making changes to that set of objects is confusing, because you don't always know which object has the method you need to call. That's the time to write a Facade that provides high-level methods for all the complex operations you can do to the collection of objects. Example: a Domain Model for a school section, with methods like <code>countStudents()</code>, <code>reportAttendance()</code>, <code>assignSubstituteTeacher()</code>, and so on.</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>As Bill's answer says, their use cases are different.</p>
<p>So are their structures.</p>
<ul>
<li>
<p><strong>Proxy</strong> and <strong>Decorator</strong> both have the same interface as their wrapped types, but the proxy creates an instance under the hood, whereas the decorator takes an instance in the constructor.</p>
</li>
<li>
<p><strong>Adapter</strong> and <strong>Facade</strong> both have a different interface than what they wrap. But the adapter derives from an existing interface, whereas the facade creates a new interface.</p>
</li>
<li>
<p><strong>Bridge</strong> and <strong>Adapter</strong> both point at an existing type. But the bridge will point at an abstract type, and the adapter might point to a concrete type. The bridge will allow you to pair the implementation at runtime, whereas the adapter usually won't.</p>
</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1831.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1829.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
