<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2174) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2174.html">
<link rel="prev" href="index-2175.html" type="text/html">
<link rel="next" href="index-2173.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-run-cocoapods-on-apple-silicon-m1/" class="u-url">How to run CocoaPods on Apple Silicon (M1)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-run-cocoapods-on-apple-silicon-m1/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T20:26:22+08:00" itemprop="datePublished" title="2023-03-03 20:26">2023-03-03 20:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a Flutter project that I'm trying to run on iOS. It runs normally on my
Intel-based Mac, but on my new Apple Silicon-based M1 Mac it fails to install
pods.</p>
<div class="code"><pre class="code literal-block"><span class="n">LoadError</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dlsym</span><span class="p">(</span><span class="mh">0x7f8926035eb0</span><span class="p">,</span><span class="w"> </span><span class="n">Init_ffi_c</span><span class="p">):</span><span class="w"> </span><span class="n">symbol</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">ffi</span><span class="o">-</span><span class="mf">1.13</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ffi_c</span><span class="o">.</span><span class="n">bundle</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">ffi</span><span class="o">-</span><span class="mf">1.13</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ffi</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">rescue</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">&lt;</span><span class="n">top</span><span class="w"> </span><span class="p">(</span><span class="n">required</span><span class="p">)</span><span class="o">&gt;</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">ffi</span><span class="o">-</span><span class="mf">1.13</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ffi</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="o">&lt;</span><span class="n">top</span><span class="w"> </span><span class="p">(</span><span class="n">required</span><span class="p">)</span><span class="o">&gt;</span><span class="s1">'</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">ethon</span><span class="o">-</span><span class="mf">0.12</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ethon</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="o">&lt;</span><span class="n">top</span><span class="w"> </span><span class="p">(</span><span class="n">required</span><span class="p">)</span><span class="o">&gt;</span><span class="s1">'</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">typhoeus</span><span class="o">-</span><span class="mf">1.4</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">typhoeus</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="o">&lt;</span><span class="n">top</span><span class="w"> </span><span class="p">(</span><span class="n">required</span><span class="p">)</span><span class="o">&gt;</span><span class="s1">'</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Ruby</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">2.6</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">rubygems</span><span class="o">/</span><span class="n">core_ext</span><span class="o">/</span><span class="n">kernel_require</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">require</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">sources_manager</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">74</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">cdn_url</span><span class="err">?</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">sources_manager</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">create_source_with_url</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">sources_manager</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">find_or_create_source_with_url</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">/</span><span class="n">analyzer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">178</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">block</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">sources</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">/</span><span class="n">analyzer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">177</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">map</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">/</span><span class="n">analyzer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">177</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">sources</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">/</span><span class="n">analyzer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">1073</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">block</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">resolve_dependencies</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">user_interface</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">64</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">section</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">/</span><span class="n">analyzer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">1072</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">resolve_dependencies</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">/</span><span class="n">analyzer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">124</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">analyze</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">414</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">analyze</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">239</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">block</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">resolve_dependencies</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">user_interface</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">64</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">section</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">238</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">resolve_dependencies</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">installer</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">160</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">install</span><span class="o">!</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">command</span><span class="o">/</span><span class="n">install</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">run</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">claide</span><span class="o">-</span><span class="mf">1.0</span><span class="o">.</span><span class="mi">3</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">claide</span><span class="o">/</span><span class="n">command</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">334</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">run</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">/</span><span class="n">command</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">run</span><span class="s1">'</span>
<span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Ruby</span><span class="o">/</span><span class="n">Gems</span><span class="o">/</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">cocoapods</span><span class="o">-</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">pod</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="o">&lt;</span><span class="n">top</span><span class="w"> </span><span class="p">(</span><span class="n">required</span><span class="p">)</span><span class="o">&gt;</span><span class="s1">'</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">pod</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="nb">load</span><span class="s1">'</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">pod</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="o">&lt;</span><span class="n">main</span><span class="o">&gt;</span><span class="s1">'</span>
</pre></div>

<p>Based on a Github workaround, I tried to run Terminal using rosetta, but the
issue remains the same:
https://github.com/CocoaPods/CocoaPods/issues/9907#issuecomment-655870749</p>
<p>Realising it's still early for Macs with Apple Silicon. Is there a way to make
this work for the time being?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>EDIT: I recently disabled Rosetta, and Cocoapods runs just fine with the
addition of the ffi gem.</p>
<p>For anyone else struggling with this issue, I just found a way to solve it. In
addition to running terminal in Rosetta:</p>
<ol>
<li>Right-click on Terminal in Finder</li>
<li>Get Info</li>
<li>Open with Rosetta</li>
</ol>
<p>I installed a gem that seems to be related to the symbol not found in the
error:</p>
<div class="code"><pre class="code literal-block">sudo gem install ffi
</pre></div>

<p>After doing this, cocoapods runs as expected.</p>
<p><br></p>
<h3>Suggest</h3>
<p>EDIT: I recently disabled Rosetta, and Cocoapods runs just fine with the
addition of the ffi gem.</p>
<p>For anyone else struggling with this issue, I just found a way to solve it. In
addition to running terminal in Rosetta:</p>
<ol>
<li>Right-click on Terminal in Finder</li>
<li>Get Info</li>
<li>Open with Rosetta</li>
</ol>
<p>I installed a gem that seems to be related to the symbol not found in the
error:</p>
<div class="code"><pre class="code literal-block">sudo gem install ffi
</pre></div>

<p>After doing this, cocoapods runs as expected.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-is-it-common-to-put-csrf-prevention-tokens-in-cookies/" class="u-url">Why is it common to put CSRF prevention tokens in cookies?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-is-it-common-to-put-csrf-prevention-tokens-in-cookies/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T20:24:56+08:00" itemprop="datePublished" title="2023-03-03 20:24">2023-03-03 20:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to understand the whole issue with CSRF and appropriate ways to
prevent it. (Resources I've read, understand, and agree with: OWASP CSRF
Prevention Cheat Sheet, Questions about CSRF)</p>
<p>As I understand it, the vulnerability around CSRF is introduced by the
assumption that (from the webserver's point of view) a valid session cookie in
an incoming HTTP request reflects the wishes of an authenticated user. But all
cookies for the origin domain are magically attached to the request by the
browser, so really all the server can infer from the presence of a valid
session cookie in a request is that the request comes from a browser which has
an authenticated session; it cannot further assume anything about the <em>code</em>
running in that browser, or whether it really reflects user wishes. The way to
prevent this is to include additional authentication information (the "CSRF
token") in the request, carried by some means other than the browser's
automatic cookie handling. Loosely speaking, then, the session cookie
authenticates the user/browser and the CSRF token authenticates the code
running in the browser.</p>
<p>So in a nutshell, if you're using a session cookie to authenticate users of
your web application, you should also add a CSRF token to each response, and
require a matching CSRF token in each (mutating) request. The CSRF token then
makes a roundtrip from server to browser back to server, proving to the server
that the page making the request is approved by (generated by, even) that
server.</p>
<p>On to my question, which is about the specific transport method used for that
CSRF token on that roundtrip.</p>
<p>It seems common (e.g. in AngularJS, Django, Rails) to send the CSRF token from
server to client as a cookie (i.e. in a Set-Cookie header), and then have
Javascript in the client scrape it out of the cookie and attach it as a
separate XSRF-TOKEN header to send back to the server.</p>
<p>(An alternate method is the one recommended by e.g. Express, where the CSRF
token generated by the server is included in the response body via server-side
template expansion, attached directly to the code/markup that will supply it
back to the server, e.g. as a hidden form input. That example is a more web
1.0-ish way of doing things, but would generalize fine to a more JS-heavy
client.)</p>
<p>Why is it so common to use Set-Cookie as the downstream transport for the CSRF
token / why is this a good idea? I imagine the authors of all these frameworks
considered their options carefully and didn't get this wrong. But at first
glance, using cookies to work around what's essentially a design limitation on
cookies seems daft. In fact, if you used cookies as the roundtrip transport
(Set-Cookie: header downstream for the server to tell the browser the CSRF
token, and Cookie: header upstream for the browser to return it to the server)
you would reintroduce the vulnerability you are trying to fix.</p>
<p>I realize that the frameworks above don't use cookies for the whole roundtrip
for the CSRF token; they use Set-Cookie downstream, then something else (e.g.
a X-CSRF-Token header) upstream, and this does close off the vulnerability.
But even using Set-Cookie as the downstream transport is potentially
misleading and dangerous; the browser will now attach the CSRF token to every
request including genuine malicious XSRF requests; at best that makes the
request bigger than it needs to be and at worst some well-meaning but
misguided piece of server code might actually try to use it, which would be
really bad. And further, since the actual intended recipient of the CSRF token
is client-side Javascript, that means this cookie can't be protected with
http-only. So sending the CSRF token downstream in a Set-Cookie header seems
pretty suboptimal to me.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A good reason, which you have sort of touched on, is that once the CSRF cookie
has been received, it is then available for use throughout the application in
client script for use in both regular forms and AJAX POSTs. This will make
sense in a JavaScript heavy application such as one employed by AngularJS
(using AngularJS doesn't require that the application will be a single page
app, so it would be useful where state needs to flow between different page
requests where the CSRF value cannot normally persist in the browser).</p>
<p>Consider the following scenarios and processes in a typical application for
some pros and cons of each approach you describe. These are based on the
Synchronizer Token Pattern.</p>
<h2>Request Body Approach</h2>
<ol>
<li>User successfully logs in.</li>
<li>Server issues auth cookie.</li>
<li>User clicks to navigate to a form.</li>
<li>If not yet generated for this session, server generates CSRF token, stores it against the user session and outputs it to a hidden field.</li>
<li>User submits form.</li>
<li>Server checks hidden field matches session stored token.</li>
</ol>
<p><strong>Advantages:</strong></p>
<ul>
<li>Simple to implement.</li>
<li>Works with AJAX.</li>
<li>Works with forms.</li>
<li>Cookie can actually be HTTP Only.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>All forms must output the hidden field in HTML.</li>
<li>Any AJAX POSTs must also include the value.</li>
<li>The page must know in advance that it requires the CSRF token so it can include it in the page content so all pages must contain the token value somewhere, which could make it time consuming to implement for a large site.</li>
</ul>
<h2>Custom HTTP Header (downstream)</h2>
<ol>
<li>User successfully logs in.</li>
<li>Server issues auth cookie.</li>
<li>User clicks to navigate to a form. </li>
<li>Page loads in browser, then an AJAX request is made to retrieve the CSRF token. </li>
<li>Server generates CSRF token (if not already generated for session), stores it against the user session and outputs it to a header. </li>
<li>User submits form (token is sent via hidden field). </li>
<li>Server checks hidden field matches session stored token.</li>
</ol>
<p><strong>Advantages:</strong></p>
<ul>
<li>Works with AJAX.</li>
<li>Cookie can be HTTP Only.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Doesn't work without an AJAX request to get the header value.</li>
<li>All forms must have the value added to its HTML dynamically.</li>
<li>Any AJAX POSTs must also include the value.</li>
<li>The page must make an AJAX request first to get the CSRF token, so it will mean an extra round trip each time.</li>
<li>Might as well have simply output the token to the page which would save the extra request.</li>
</ul>
<h2>Custom HTTP Header (upstream)</h2>
<ol>
<li>User successfully logs in.</li>
<li>Server issues auth cookie.</li>
<li>User clicks to navigate to a form. </li>
<li>If not yet generated for this session, server generates CSRF token, stores it against the user session and outputs it in the page content somewhere.</li>
<li>User submits form via AJAX (token is sent via header). </li>
<li>Server checks custom header matches session stored token.</li>
</ol>
<p><strong>Advantages:</strong></p>
<ul>
<li>Works with AJAX.</li>
<li>Cookie can be HTTP Only.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Doesn't work with forms.</li>
<li>All AJAX POSTs must include the header.</li>
</ul>
<h2>Custom HTTP Header (upstream &amp; downstream)</h2>
<ol>
<li>User successfully logs in.</li>
<li>Server issues auth cookie.</li>
<li>User clicks to navigate to a form. </li>
<li>Page loads in browser, then an AJAX request is made to retrieve the CSRF token. </li>
<li>Server generates CSRF token (if not already generated for session), stores it against the user session and outputs it to a header. </li>
<li>User submits form via AJAX (token is sent via header) . </li>
<li>Server checks custom header matches session stored token.</li>
</ol>
<p><strong>Advantages:</strong></p>
<ul>
<li>Works with AJAX.</li>
<li>Cookie can be HTTP Only.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Doesn't work with forms.</li>
<li>All AJAX POSTs must also include the value.</li>
<li>The page must make an AJAX request first to get the CRSF token, so it will mean an extra round trip each time.</li>
</ul>
<h2>Set-Cookie</h2>
<ol>
<li>User successfully logs in.</li>
<li>Server issues auth cookie.</li>
<li>User clicks to navigate to a form.</li>
<li>Server generates CSRF token, stores it against the user session and outputs it to a cookie.</li>
<li>User submits form via AJAX or via HTML form.</li>
<li>Server checks custom header (or hidden form field) matches session stored token.</li>
<li>Cookie is available in browser for use in additional AJAX and form requests without additional requests to server to retrieve the CSRF token.</li>
</ol>
<p><strong>Advantages:</strong></p>
<ul>
<li>Simple to implement.</li>
<li>Works with AJAX.</li>
<li>Works with forms.</li>
<li>Doesn't necessarily require an AJAX request to get the cookie value. Any HTTP request can retrieve it and it can be appended to all forms/AJAX requests via JavaScript.</li>
<li>Once the CSRF token has been retrieved, as it is stored in a cookie the value can be reused without additional requests.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>All forms must have the value added to its HTML dynamically.</li>
<li>Any AJAX POSTs must also include the value.</li>
<li>The cookie will be submitted for <em>every</em> request (i.e. all GETs for images, CSS, JS, etc, that are not involved in the CSRF process) increasing request size.</li>
<li>Cookie cannot be HTTP Only.</li>
</ul>
<p>So the cookie approach is fairly dynamic offering an easy way to retrieve the
cookie value (any HTTP request) and to use it (JS can add the value to any
form automatically and it can be employed in AJAX requests either as a header
or as a form value). Once the CSRF token has been received for the session,
there is no need to regenerate it as an attacker employing a CSRF exploit has
no method of retrieving this token. If a malicious user tries to read the
user's CSRF token in any of the above methods then this will be prevented by
the Same Origin Policy. If a malicious user tries to retrieve the CSRF token
server side (e.g. via <code>curl</code>) then this token will not be associated to the
same user account as the victim's auth session cookie will be missing from the
request (it would be the attacker's - therefore it won't be associated server
side with the victim's session).</p>
<p>As well as the Synchronizer Token Pattern there is also the Double Submit
Cookie CSRF prevention method, which of course uses cookies to store a type of
CSRF token. This is easier to implement as it does not require any server side
state for the CSRF token. The CSRF token in fact could be the standard
authentication cookie when using this method, and this value is submitted via
cookies as usual with the request, but the value is also repeated in either a
hidden field or header, of which an attacker cannot replicate as they cannot
read the value in the first place. It would be recommended to choose another
cookie however, other than the authentication cookie so that the
authentication cookie can be secured by being marked HttpOnly. So this is
another common reason why you'd find CSRF prevention using a cookie based
method.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Using a cookie to provide the CSRF token to the client does not allow a
successful attack because the attacker cannot read the value of the cookie and
therefore cannot put it where the server-side CSRF validation requires it to
be.</p>
<p>The attacker will be able to cause a request to the server with both the auth
token cookie and the CSRF cookie in the request headers. But the server is not
looking for the CSRF token as a cookie in the request headers, it's looking in
the payload of the request. And even if the attacker knows where to put the
CSRF token in the payload, they would have to read its value to put it there.
But the browser's cross-origin policy prevents reading any cookie value from
the target website.</p>
<p>The same logic does not apply to the auth token cookie, because the server is
expects it in the request headers and the attacker does not have to do
anything special to put it there.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/conditionally-ignoring-tests-in-junit-4/" class="u-url">Conditionally ignoring tests in JUnit 4</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/conditionally-ignoring-tests-in-junit-4/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T20:23:47+08:00" itemprop="datePublished" title="2023-03-03 20:23">2023-03-03 20:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>OK, so the <code>@Ignore</code> annotation is good for marking that a test case shouldn't
be run.</p>
<p>However, sometimes I want to ignore a test based on runtime information. An
example might be if I have a concurrency test that needs to be run on a
machine with a certain number of cores. If this test were run on a
uniprocessor machine, I don't think it would be correct to just pass the test
(since it hasn't been run), and it certainly wouldn't be right to fail the
test and break the build.</p>
<p>So I want to be able to ignore tests at runtime, as this seems like the right
outcome (since the test framework will allow the build to pass but record that
the tests weren't run). I'm fairly sure that the annotation won't give me this
flexibility, and suspect that I'll need to manually create the test suite for
the class in question. However, the documentation doesn't mention anything
about this and looking through the API it's also not clear how this would be
done programmatically (i.e. how do I programatically create an instance of
<code>Test</code> or similar that is equivalent to that created by the <code>@Ignore</code>
annotation?).</p>
<p>If anyone has done something similar in the past, or has a bright idea of how
else I could go about this, I'd be happy to hear about it.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The JUnit way is to do this at run-time is <code>org.junit.Assume</code>.</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nv">@Before</span>
<span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">beforeMethod</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">     </span><span class="n">org</span><span class="p">.</span><span class="n">junit</span><span class="p">.</span><span class="n">Assume</span><span class="p">.</span><span class="n">assumeTrue</span><span class="p">(</span><span class="n">someCondition</span><span class="p">());</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">rest</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span>
<span class="w"> </span><span class="err">}</span>
</pre></div>

<p>You can do it in a <code>@Before</code> method or in the test itself, but not in an
<code>@After</code> method. If you do it in the test itself, your <code>@Before</code> method will
get run. You can also do it within <code>@BeforeClass</code> to prevent class
initialization.</p>
<p><strong>An assumption failure causes the test to be ignored.</strong></p>
<p><strong>Edit:</strong> To compare with the <code>@RunIf</code> annotation from <em>junit-ext</em> , their
sample code would look like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">calculateTotalSalary</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">assumeThat</span><span class="p">(</span><span class="k">Database</span><span class="p">.</span><span class="k">connect</span><span class="p">(),</span><span class="w"> </span><span class="k">is</span><span class="p">(</span><span class="n">notNull</span><span class="p">()));</span>
<span class="w">    </span><span class="o">//</span><span class="n">test</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">below</span><span class="p">.</span>
<span class="err">}</span>
</pre></div>

<p>Not to mention that it is much easier to capture and use the connection from
the <code>Database.connect()</code> method this way.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You should checkout <code>Junit-ext</code> project. They have <code>RunIf</code> annotation that
performs conditional tests, like:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Test</span>
<span class="nv">@RunIf</span><span class="p">(</span><span class="n">DatabaseIsConnected</span><span class="p">.</span><span class="k">class</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">calculateTotalSalary</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="n">your</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">there</span>
<span class="err">}</span>

<span class="k">class</span><span class="w"> </span><span class="n">DatabaseIsConnected</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">Checker</span><span class="w"> </span><span class="err">{</span>
<span class="w">   </span><span class="k">public</span><span class="w"> </span><span class="k">boolean</span><span class="w"> </span><span class="n">satisify</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">Database</span><span class="p">.</span><span class="k">connect</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">   </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>[Code sample taken from their tutorial]</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2175.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2173.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
