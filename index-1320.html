<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1320) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1320.html">
<link rel="prev" href="index-1321.html" type="text/html">
<link rel="next" href="index-1319.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-show-soft-keyboard-when-edittext-is-focused/" class="u-url">How to show soft-keyboard when edittext is focused</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-show-soft-keyboard-when-edittext-is-focused/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T06:34:19+08:00" itemprop="datePublished" title="2023-02-18 06:34">2023-02-18 06:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to automatically show the soft-keyboard when an <code>EditText</code> is focused
(if the device does not have a physical keyboard) and I have two problems:</p>
<ol>
<li>
<p>When my <code>Activity</code> is displayed, my <code>EditText</code> is focused but the keyboard is not displayed, I need to click again on it to show the keyboard (it should be displayed when my <code>Activity</code> is displayed).</p>
</li>
<li>
<p>And when I click done on the keyboard, the keyboard is dissmissed but the <code>EditText</code> stays focused and y don't want (because my edit is done).</p>
</li>
</ol>
<p>To resume, my problem is to have something more like on the iPhone: which keep
the keyboard sync with my <code>EditText</code> state (focused / not focused) and of
course does not present a soft-keyboard if there is a physical one.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To force the soft keyboard to appear, you can use</p>
<div class="code"><pre class="code literal-block">EditText yourEditText= (EditText) findViewById(R.id.yourEditText);
yourEditText.requestFocus();
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT);
</pre></div>

<p>And for removing the focus on <code>EditText</code>, sadly you need to have a dummy
<code>View</code> to grab focus.</p>
<hr>
<p>To close it you can use</p>
<div class="code"><pre class="code literal-block">InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0);
</pre></div>

<hr>
<p>This works for using it in a dialog</p>
<div class="code"><pre class="code literal-block">public void showKeyboard(){
    InputMethodManager inputMethodManager = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
    inputMethodManager.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
}

public void closeKeyboard(){
    InputMethodManager inputMethodManager = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
    inputMethodManager.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I had the same problem. Immediately after editText VISIBILITY change from GONE
to VISIBLE, I had to set the focus and display the soft keyboard. I achieved
this using the following code:</p>
<div class="code"><pre class="code literal-block">new Handler().postDelayed(new Runnable() {

    public void run() {
//        ((EditText) findViewById(R.id.et_find)).requestFocus();
//              
        EditText yourEditText= (EditText) findViewById(R.id.et_find);
//        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
//        imm.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT);

        yourEditText.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 0f, 0f, 0));
        yourEditText.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP, 0f, 0f, 0));                          
    }
}, 200);
</pre></div>

<p>It works for me with 100ms delay, but failed without any delay or with only a
delay of 1ms.</p>
<p>Commented part of code shows another approach, which works only on some
devices. I tested on OS versions 2.2 (emulator), 2.2.1 (real device) and 1.6
(emulator).</p>
<p>This approach saved me a lot of pain.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/print-div-id-printarea-div-only/" class="u-url">Print &lt;div id="printarea"&gt;&lt;/div&gt; only?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/print-div-id-printarea-div-only/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T06:33:49+08:00" itemprop="datePublished" title="2023-02-18 06:33">2023-02-18 06:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I print the indicated div (without manually disabling all other content
on the page)?</p>
<p>I want to avoid a new preview dialog, so creating a new window with this
content is not useful.</p>
<p>The page contains a couple of tables, one of them contains the div I want to
print - the table is styled with visual styles for the web, that should not
show in print.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here is a general solution, using <strong>CSS only</strong> , which I have verified to
work.</p>
<div class="code"><pre class="code literal-block"><span class="nv">@media</span><span class="w"> </span><span class="k">print</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">body</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nl">visibility</span><span class="p">:</span><span class="w"> </span><span class="n">hidden</span><span class="p">;</span>
<span class="w">  </span><span class="err">}</span>
<span class="w">  </span><span class="n">#section</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="k">print</span><span class="p">,</span><span class="w"> </span><span class="n">#section</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nl">visibility</span><span class="p">:</span><span class="w"> </span><span class="n">visible</span><span class="p">;</span>
<span class="w">  </span><span class="err">}</span>
<span class="w">  </span><span class="n">#section</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="k">print</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">position</span><span class="err">:</span><span class="w"> </span><span class="k">absolute</span><span class="p">;</span>
<span class="w">    </span><span class="nf">left</span><span class="err">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">top</span><span class="err">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>Alternative approaches aren't so good. Using <code>display</code> is tricky because if
any element has <code>display:none</code> then none of its descendants will display
either. To use it, you have to change the structure of your page.</p>
<p>Using <code>visibility</code> works better since you can turn on visibility for
descendants. The invisible elements still affect the layout though, so I move
<code>section-to-print</code> to the top left so it prints properly.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I have a better solution with minimal code.</p>
<p>Place your printable part inside a div with an id like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"printableArea"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;h1&gt;</span>Print<span class="w"> </span>me<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"printDiv('printableArea')"</span><span class="w"> </span><span class="na">value=</span><span class="s">"print a div!"</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>

<p>Then add an event like an onclick (as shown above), and pass the id of the div
like I did above.</p>
<p>Now let's create a really simple javascript:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">printDiv</span><span class="p">(</span><span class="n">divName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="k">var</span><span class="w"> </span><span class="n">printContents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="n">divName</span><span class="p">)</span><span class="o">.</span><span class="n">innerHTML</span><span class="p">;</span>
<span class="w">     </span><span class="k">var</span><span class="w"> </span><span class="n">originalContents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">innerHTML</span><span class="p">;</span>

<span class="w">     </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">printContents</span><span class="p">;</span>

<span class="w">     </span><span class="n">window</span><span class="o">.</span><span class="n">print</span><span class="p">();</span>

<span class="w">     </span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">originalContents</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Notice how simple this is? No popups, no new windows, no crazy styling, no JS
libraries like jquery. The problem with really complicated solutions (the
answer isn't complicated and not what I'm referring to) is the fact that it
will NEVER translate across all browsers, ever! If you want to make the styles
different, do as shown in the checked answer by adding the media attribute to
a stylesheet link (media="print").</p>
<p>No fluff, lightweight, it just works.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-fix-error-listen-eaddrinuse-while-using-nodejs/" class="u-url">How to fix Error: listen EADDRINUSE while using NodeJS?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-fix-error-listen-eaddrinuse-while-using-nodejs/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T06:33:20+08:00" itemprop="datePublished" title="2023-02-18 06:33">2023-02-18 06:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I run a server with the port 80, and I try to use XMLHttpRequest I am
getting this error: <code>Error: listen EADDRINUSE</code></p>
<p>Why is it problem for NodeJS, if I want to do a request, while I run a server
on the port 80? For the webbrowsers it is not a problem: I can surf on the
internet, while the server is running.</p>
<p>The server is:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="nt">net</span><span class="p">.</span><span class="nc">createServer</span><span class="o">(</span><span class="nt">function</span><span class="w"> </span><span class="o">(</span><span class="nt">socket</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">socket.name</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">socket.remoteAddress</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">":"</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">socket.remotePort</span><span class="p">;</span>
<span class="w">    </span><span class="err">console.log('connection</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">socket</span><span class="o">.</span><span class="n">remoteAddress</span><span class="p">);</span>
<span class="w">    </span><span class="err">socket.destroy()</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="o">)</span><span class="p">.</span><span class="nc">listen</span><span class="o">(</span><span class="nt">options</span><span class="p">.</span><span class="nc">port</span><span class="o">);</span>
</pre></div>

<p>And the request:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">XMLHttpRequest</span><span class="p">();</span>

<span class="n">xhr</span><span class="o">.</span><span class="n">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sys</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"State: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">readyState</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sys</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Complete.</span><span class="se">\n</span><span class="s2">Body length: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">responseText</span><span class="o">.</span><span class="n">length</span><span class="p">);</span>
<span class="w">        </span><span class="n">sys</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">"Body:</span><span class="se">\n</span><span class="s2">"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">responseText</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="n">xhr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span><span class="w"> </span><span class="s2">"http://mywebsite.com"</span><span class="p">);</span>
<span class="n">xhr</span><span class="o">.</span><span class="n">send</span><span class="p">();</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><code>EADDRINUSE</code> means that the port number which <code>listen()</code> tries to bind the
server to is already in use.</p>
<p>So, in your case, there must be running a server on port 80 already.</p>
<p>If you have another webserver running on this port you have to put node.js
behind that server and proxy it through it.</p>
<p>You should check for the <code>listening</code> event like this, to see if the server is
really listening:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">http</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">server</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">res</span><span class="p">){</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="s1">'test'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'listening'</span><span class="p">,</span><span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'ok, server is running'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><code>EADDRINUSE</code> means that the port number which <code>listen()</code> tries to bind the
server to is already in use.</p>
<p>So, in your case, there must be running a server on port 80 already.</p>
<p>If you have another webserver running on this port you have to put node.js
behind that server and proxy it through it.</p>
<p>You should check for the <code>listening</code> event like this, to see if the server is
really listening:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">http</span><span class="o">=</span><span class="n">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>

<span class="k">var</span><span class="w"> </span><span class="n">server</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">createServer</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">res</span><span class="p">){</span>
<span class="w">    </span><span class="n">res</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="s1">'test'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">'listening'</span><span class="p">,</span><span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'ok, server is running'</span><span class="p">);</span>
<span class="p">});</span>

<span class="n">server</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1321.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1319.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
