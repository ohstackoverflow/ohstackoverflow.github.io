<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 853) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-853.html">
<link rel="prev" href="index-854.html" type="text/html">
<link rel="next" href="index-852.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/node-js-version-on-the-command-line-not-the-repl/" class="u-url">Node.js version on the command line? (not the REPL)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/node-js-version-on-the-command-line-not-the-repl/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:44:06+08:00" itemprop="datePublished" title="2023-02-17 17:44">2023-02-17 17:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to get the version of Node.js on the command line. I'm expecting to run
a command like:</p>
<div class="code"><pre class="code literal-block">node -version
</pre></div>

<p>but that doesn't work. Does anybody know what the command line would be? (i.e.
not the REPL)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The command line for that is:</p>
<div class="code"><pre class="code literal-block">node -v
</pre></div>

<p>Or</p>
<div class="code"><pre class="code literal-block">node --version
</pre></div>

<p>Note:</p>
<p>If <code>node -v</code> doesn't work, but <code>nodejs -v</code> does, then something's not set up
quite right on your system. See this other question for ways to fix it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you're referring to the shell command line, either of the following will
work:</p>
<div class="code"><pre class="code literal-block">node -v

node --version
</pre></div>

<p>Just typing <code>node version</code> will cause node.js to attempt loading a module
named version, which doesn't exist unless you like working with confusing
module names.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-determine-if-a-type-implements-an-interface-with-c-reflection/" class="u-url">How to determine if a type implements an interface with C# reflection</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-determine-if-a-type-implements-an-interface-with-c-reflection/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:43:39+08:00" itemprop="datePublished" title="2023-02-17 17:43">2023-02-17 17:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><em>Does <strong>reflection</strong> in <code>C#</code> offer a way to determine if some given
<code>System.Type</code> type models some interface?</em></p>
<div class="code"><pre class="code literal-block">public interface IMyInterface {}

public class MyType : IMyInterface {}

// should yield 'true'
typeof(MyType)./* ????? */MODELS_INTERFACE(IMyInterface);
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You have a few choices:</p>
<ol>
<li><code>typeof(IMyInterface).IsAssignableFrom(typeof(MyType))</code></li>
<li><code>typeof(MyType).GetInterfaces().Contains(typeof(IMyInterface))</code></li>
<li>With C# 6 you can use <code>typeof(MyType).GetInterface(nameof(IMyInterface)) != null</code>
</li>
</ol>
<p>For a generic interface, it’s a bit different.</p>
<div class="code"><pre class="code literal-block">typeof(MyType).GetInterfaces().Any(i =&gt; i.IsGenericType &amp;&amp; i.GetGenericTypeDefinition() == typeof(IMyInterface&lt;&gt;))
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Use <code>Type.IsAssignableFrom</code>:</p>
<div class="code"><pre class="code literal-block">typeof(IMyInterface).IsAssignableFrom(typeof(MyType));
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/version-vs-build-in-xcode/" class="u-url">Version vs build in Xcode</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/version-vs-build-in-xcode/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T17:43:09+08:00" itemprop="datePublished" title="2023-02-17 17:43">2023-02-17 17:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an app that I developed with Xcode 3 and recently started editing with
Xcode 4. In the target summary I have the iOS application target form with
fields: identifier, version, build, devices, and deployment target. The
version field is blank and the build field is 3.4.0 (which matches the version
of the app from when I was still editing with Xcode 3).</p>
<p><strong>My questions are:</strong></p>
<ol>
<li>
<p>What is the difference between the version and build fields?</p>
</li>
<li>
<p>Why was the version field blank after I upgraded to Xcode 4?</p>
</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>Apple sort of rearranged/repurposed the fields.</p>
<p>Going forward, if you look on the Info tab for your Application Target, you
should use the "Bundle versions string, short" as your Version (e.g., 3.4.0)
and "Bundle version" as your Build (e.g., 500 or 1A500). If you don't see them
both, you can add them. Those will map to the proper Version and Build
textboxes on the Summary tab; they are the same values.</p>
<p>When viewing the Info tab, if you right-click and select <strong>Show Raw
Keys/Values</strong> , you'll see the actual names are <code>CFBundleShortVersionString</code>
(Version) and <code>CFBundleVersion</code> (Build).</p>
<p>The Version is usually used how you appear to have been using it with Xcode 3.
I'm not sure on what level you're asking about the Version/Build difference,
so I'll answer it philosophically.</p>
<p>There are all sorts of schemes, but a popular one is:</p>
<p>{MajorVersion}.{MinorVersion}.{Revision}</p>
<ul>
<li>
<strong>Major version</strong> - Major changes, redesigns, and functionality changes</li>
<li>
<strong>Minor version</strong> - Minor improvements, additions to functionality</li>
<li>
<strong>Revision</strong> - A patch number for bug-fixes</li>
</ul>
<p>Then the Build is used separately to indicate the total number of builds for a
release or for the entire product lifetime.</p>
<p>Many developers start the Build number at 0, and every time they build they
increase the number by one, increasing forever. In my projects, I have a
script that automatically increases the build number every time I build. See
instructions for that below.</p>
<ul>
<li>Release 1.0.0 might be build 542. It took 542 builds to get to a 1.0.0 release.</li>
<li>Release 1.0.1 might be build 578.</li>
<li>Release 1.1.0 might be build 694.</li>
<li>Release 2.0.0 might be build 949.</li>
</ul>
<p>Other developers, including Apple, have a Build number comprised of a major
version + minor version + number of builds for the release. These are the
actual software version numbers, as opposed to the values used for marketing.</p>
<p>If you go to <strong>Xcode</strong> menu &gt; <strong>About Xcode</strong> , you'll see the Version and
Build numbers. If you hit the <strong>More Info...</strong> button you'll see a bunch of
different versions. Since the <strong>More Info...</strong> button was removed in Xcode 5,
this information is also available from the <strong>Software &gt; Developer</strong> section
of the <strong>System Information</strong> app, available by opening <strong>Apple</strong> menu &gt;
<strong>About This Mac</strong> &gt; <strong>System Report...</strong>.</p>
<p>For example, Xcode 4.2 (4C139). Marketing version 4.2 is Build major version
4, Build minor version C, and Build number 139. The next release (presumably
4.3) will likely be Build release 4D, and the Build number will start over at
0 and increment from there.</p>
<p>The iPhone Simulator Version/Build numbers are the same way, as are iPhones,
Macs, etc.</p>
<ul>
<li>3.2: (7W367a)</li>
<li>4.0: (8A400)</li>
<li>4.1: (8B117)</li>
<li>4.2: (8C134)</li>
<li>4.3: (8H7)</li>
</ul>
<p><strong>Update</strong> : By request, here are the steps to create a script that runs each
time you build your app in Xcode to read the Build number, increment it, and
write it back to the app's <code>{App}-Info.plist</code> file. There are optional,
additional steps if you want to write your version/build numbers to your
<code>Settings.bundle/Root*.plist</code> file(s).</p>
<p>This is extended from the how-to article here.</p>
<p>In Xcode 4.2 - 5.0:</p>
<ol>
<li>Load your Xcode project.</li>
<li>In the left hand pane, click on your project at the very top of the hierarchy. This will load the project settings editor.</li>
<li>On the left-hand side of the center window pane, click on your app under the <strong>TARGETS</strong> heading. You will need to configure this setup for each project target.</li>
<li>Select the <strong>Build Phases</strong> tab.</li>
<li>
<ul>
<li>In Xcode 4, at the bottom right, click the <strong>Add Build Phase</strong> button and select <strong>Add Run Script</strong>.</li>
<li>In Xcode 5, select <strong>Editor</strong> menu &gt; <strong>Add Build Phase</strong> &gt; <strong>Add Run Script Build Phase</strong>.</li>
</ul>
</li>
<li>Drag-and-drop the new <strong>Run Script</strong> phase to move it to just before the <strong>Copy Bundle Resources</strong> phase (when the app-info.plist file will be bundled with your app).</li>
<li>In the new <strong>Run Script</strong> phase, set <strong>Shell</strong> : <code>/bin/bash</code>.</li>
<li>Copy and paste the following into the script area for integer build numbers:<div class="code"><pre class="code literal-block">buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
</pre></div>

<p>buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE"</p>
</li>
</ol>
<p>As @Bdebeez pointed out, the Apple Generic Versioning Tool (<code>agvtool</code>) is also
available. If you prefer to use it instead, then there are a couple things to
change first:</p>
<div class="code"><pre class="code literal-block">* Select the **Build Settings** tab.
* Under the **Versioning** section, set the **Current Project Version** to the initial build number you want to use, e.g., **1**.
* Back on the **Build Phases** tab, drag-and-drop your **Run Script** phase after the **Copy Bundle Resources** phase to avoid a race condition when trying to both build and update the source file that includes your build number.
</pre></div>

<p><strong>Note that with the<code>agvtool</code> method you may still periodically get
failed/canceled builds with no errors. For this reason, I don't recommend
using <code>agvtool</code> with this script.</strong></p>
<p>Nevertheless, in your <strong>Run Script</strong> phase, you can use the following script:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="s2">"${DEVELOPER_BIN_DIR}/agvtool"</span><span class="w"> </span><span class="n">next</span><span class="o">-</span><span class="n">version</span><span class="w"> </span><span class="o">-</span><span class="n">all</span>
</pre></div>

<p>The <code>next-version</code> argument increments the build number (<code>bump</code> is also an
alias for the same thing), and <code>-all</code> updates <code>Info.plist</code> with the new build
number.</p>
<ol>
<li>And if you have a Settings bundle where you show the Version and Build, you can add the following to the end of the script to update the version and build. <em>Note: Change the<code>PreferenceSpecifiers</code> values to match your settings. <code>PreferenceSpecifiers:2</code> means look at the item at index 2 under the <code>PreferenceSpecifiers</code> array in your plist file, so for a 0-based index, that's the 3rd preference setting in the array.</em><div class="code"><pre class="code literal-block">productVersion=$(/usr/libexec/PlistBuddy -c "Print CFBundleShortVersionString" "$INFOPLIST_FILE")
</pre></div>

<p>/usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:2:DefaultValue $buildNumber" Settings.bundle/Root.plist
/usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:1:DefaultValue $productVersion" Settings.bundle/Root.plist</p>
</li>
</ol>
<p>If you're using <code>agvtool</code> instead of reading the <code>Info.plist</code> directly, you
can add the following to your script instead:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">buildNumber</span><span class="o">=$</span><span class="p">(</span><span class="s2">"${DEVELOPER_BIN_DIR}/agvtool"</span><span class="w"> </span><span class="n">what</span><span class="o">-</span><span class="n">version</span><span class="w"> </span><span class="o">-</span><span class="n">terse</span><span class="p">)</span>
<span class="n">productVersion</span><span class="o">=$</span><span class="p">(</span><span class="s2">"${DEVELOPER_BIN_DIR}/agvtool"</span><span class="w"> </span><span class="n">what</span><span class="o">-</span><span class="n">marketing</span><span class="o">-</span><span class="n">version</span><span class="w"> </span><span class="o">-</span><span class="n">terse1</span><span class="p">)</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">libexec</span><span class="o">/</span><span class="n">PlistBuddy</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="s2">"Set PreferenceSpecifiers:2:DefaultValue $buildNumber"</span><span class="w"> </span><span class="n">Settings</span><span class="o">.</span><span class="n">bundle</span><span class="o">/</span><span class="n">Root</span><span class="o">.</span><span class="n">plist</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">libexec</span><span class="o">/</span><span class="n">PlistBuddy</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="s2">"Set PreferenceSpecifiers:1:DefaultValue $productVersion"</span><span class="w"> </span><span class="n">Settings</span><span class="o">.</span><span class="n">bundle</span><span class="o">/</span><span class="n">Root</span><span class="o">.</span><span class="n">plist</span>
</pre></div>

<ol>
<li>And if you have a universal app for iPad &amp; iPhone, then you can also set the settings for the iPhone file:<div class="code"><pre class="code literal-block">/usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:2:DefaultValue $buildNumber" Settings.bundle/Root~iphone.plist
</pre></div>

<p>/usr/libexec/PlistBuddy -c "Set PreferenceSpecifiers:1:DefaultValue $productVersion" Settings.bundle/Root~iphone.plist</p>
</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>(Just leaving this here for my own reference.) This will show version and
build for the "version" and "build" fields you see in an Xcode target:</p>
<div class="code"><pre class="code literal-block"><span class="p">-</span> <span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nf">version</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[[</span><span class="bp">NSBundle</span><span class="w"> </span><span class="n">mainBundle</span><span class="p">]</span><span class="w"> </span><span class="n">infoDictionary</span><span class="p">]</span><span class="w"> </span><span class="n">objectForKey</span><span class="o">:</span><span class="s">@"CFBundleShortVersionString"</span><span class="p">];</span>
<span class="w">    </span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[[</span><span class="bp">NSBundle</span><span class="w"> </span><span class="n">mainBundle</span><span class="p">]</span><span class="w"> </span><span class="n">infoDictionary</span><span class="p">]</span><span class="w"> </span><span class="n">objectForKey</span><span class="o">:</span><span class="s">@"CFBundleVersion"</span><span class="p">];</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="bp">NSString</span><span class="w"> </span><span class="n">stringWithFormat</span><span class="o">:</span><span class="s">@"%@ build %@"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">,</span><span class="w"> </span><span class="n">build</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<p>In Swift</p>
<div class="code"><pre class="code literal-block"><span class="k">func</span><span class="w"> </span><span class="n">version</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">dictionary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NSBundle</span><span class="o">.</span><span class="n">mainBundle</span><span class="p">()</span><span class="o">.</span><span class="n">infoDictionary</span><span class="o">!</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dictionary</span><span class="p">[</span><span class="s2">"CFBundleShortVersionString"</span><span class="p">]</span><span class="w"> </span><span class="k">as</span><span class="err">?</span><span class="w"> </span><span class="nb nb-Type">String</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dictionary</span><span class="p">[</span><span class="s2">"CFBundleVersion"</span><span class="p">]</span><span class="w"> </span><span class="k">as</span><span class="err">?</span><span class="w"> </span><span class="nb nb-Type">String</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s2">"\(version) build \(build)"</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-854.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-852.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
