<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1062) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1062.html">
<link rel="prev" href="index-1063.html" type="text/html">
<link rel="next" href="index-1061.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-shi-yong-git-dui-fen/" class="u-url">如何使用 git 对分？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-shi-yong-git-dui-fen/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:27:01+08:00" itemprop="datePublished" title="2023-02-18 00:27">2023-02-18 00:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我读过一些文章说这<code>git bisect</code>很棒。但是，我不明白为什么它很棒。</p>
<p>有人可以用一些代码示例来演示：</p>
<ol>
<li>如何使用它？</li>
<li>只是像吗<code>svn blame</code>？</li>
</ol>
<p><br><br></p>
<h2>解答</h2>
<p>背后的想法<code>git bisect</code>是在历史中执行二分搜索以找到特定的回归。假设您有以下开发历史：</p>
<div class="code"><pre class="code literal-block">... --- 0 --- 1 --- 2 --- 3 --- 4* --- 5 --- current
</pre></div>

<p>您知道您的程序在修订时不能正常工作<code>current</code>，并且它在修订时可以正常工作<code>0</code>。所以回归很可能是在其中一个提交中<code>1</code>引入的<code>2</code>，，，，，，。<code>3``4``5``current</code></p>
<p>您可以尝试检查每个提交，构建它，检查回归是否存在。如果有大量提交，这可能需要很长时间。这是一个线性搜索。我们可以通过进行二分查找来做得更好。这就是<code>git
bisect</code>命令的作用。在每一步，它都试图将可能有问题的修订数量减少一半。</p>
<p>您将像这样使用命令：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>stash<span class="w"> </span>save
$<span class="w"> </span>git<span class="w"> </span>bisect<span class="w"> </span>start
$<span class="w"> </span>git<span class="w"> </span>bisect<span class="w"> </span>bad
$<span class="w"> </span>git<span class="w"> </span>bisect<span class="w"> </span>good<span class="w"> </span><span class="m">0</span>
Bisecting:<span class="w"> </span><span class="m">2</span><span class="w"> </span>revisions<span class="w"> </span>left<span class="w"> </span>to<span class="w"> </span><span class="nb">test</span><span class="w"> </span>after<span class="w"> </span>this<span class="w"> </span><span class="o">(</span>roughly<span class="w"> </span><span class="m">2</span><span class="w"> </span>steps<span class="o">)</span>
<span class="o">[</span>&lt;<span class="w"> </span>...<span class="w"> </span>sha<span class="w"> </span>...<span class="w"> </span>&gt;<span class="o">]</span><span class="w"> </span><span class="m">3</span>
</pre></div>

<p>在此命令之后，<code>git</code>将签出一个提交。在我们的例子中，它将是 commit
<code>3</code>。您需要构建您的程序，并检查回归是否存在。您还需要通过回归是否存在来告知<code>git</code>此修订的状态。<code>git bisect bad``git bisect
good</code></p>
<p>假设回归是在 commit 中引入的<code>4</code>。然后回归不存在于此修订中，我们告诉它<code>git</code>。</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>make
$<span class="w"> </span>make<span class="w"> </span><span class="nb">test</span>
...<span class="w"> </span>...<span class="w"> </span>...
$<span class="w"> </span>git<span class="w"> </span>bisect<span class="w"> </span>good
Bisecting:<span class="w"> </span><span class="m">0</span><span class="w"> </span>revisions<span class="w"> </span>left<span class="w"> </span>to<span class="w"> </span><span class="nb">test</span><span class="w"> </span>after<span class="w"> </span>this<span class="w"> </span><span class="o">(</span>roughly<span class="w"> </span><span class="m">1</span><span class="w"> </span>step<span class="o">)</span>
<span class="o">[</span>&lt;<span class="w"> </span>...<span class="w"> </span>sha<span class="w"> </span>...<span class="w"> </span>&gt;<span class="o">]</span><span class="w"> </span><span class="m">5</span>
</pre></div>

<p>然后它将检查另一个提交。或者<code>4</code>（<code>5</code>因为只有两个提交）。让我们假设它选择了<code>5</code>。在构建之后，我们测试程序并发现回归存在。然后我们告诉它<code>git</code>：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>make
$<span class="w"> </span>make<span class="w"> </span><span class="nb">test</span>
...<span class="w"> </span>...<span class="w"> </span>...
$<span class="w"> </span>git<span class="w"> </span>bisect<span class="w"> </span>bad
Bisecting:<span class="w"> </span><span class="m">0</span><span class="w"> </span>revisions<span class="w"> </span>left<span class="w"> </span>to<span class="w"> </span><span class="nb">test</span><span class="w"> </span>after<span class="w"> </span>this<span class="w"> </span><span class="o">(</span>roughly<span class="w"> </span><span class="m">0</span><span class="w"> </span>steps<span class="o">)</span>
<span class="o">[</span>&lt;<span class="w"> </span>...<span class="w"> </span>sha<span class="w"> </span>...<span class="w"> </span>&gt;<span class="o">]</span><span class="w"> </span><span class="m">4</span>
</pre></div>

<p>我们测试最后一次修订，<code>4</code>. 由于它是引入回归的那个，我们告诉它<code>git</code>：</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>make
$<span class="w"> </span>make<span class="w"> </span><span class="nb">test</span>
...<span class="w"> </span>...<span class="w"> </span>...
$<span class="w"> </span>git<span class="w"> </span>bisect<span class="w"> </span>bad
&lt;<span class="w"> </span>...<span class="w"> </span>sha<span class="w"> </span>...<span class="w"> </span>&gt;<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>first<span class="w"> </span>bad<span class="w"> </span>commit
&lt;<span class="w"> </span>...<span class="w"> </span>commit<span class="w"> </span>message<span class="w"> </span>...<span class="w"> </span>&gt;
</pre></div>

<p>在这种简单的情况下，我们只需要测试 3 个版本 ( <code>3</code>, <code>4</code>, <code>5</code>) 而不是 4 个 ( <code>1</code>, <code>2</code>, <code>3</code>,
<code>4</code>)。这是一个小胜利，但这是因为我们的历史太小了。如果搜索范围是 N 次提交，我们应该期望通过线性搜索测试 1 + log2 N 次提交，而<code>git
bisect</code>不是大致 N / 2 次提交。</p>
<p>找到引入回归的提交后，您可以研究它以找到问题。完成此操作后，您可以<code>git bisect reset</code>在使用命令之前将所有内容恢复到原始状态<code>git
bisect</code>。</p>
<p><br></p>
<h3>更多建议</h3>
<h3>
<code>git bisect run</code>自动平分</h3>
<p>如果你有一个<code>./test</code>退出状态为 0 且测试正常的自动化脚本，你可以自动找到错误<code>bisect run</code>：</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="nv">KNOWN_BAD_COMMIT</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">bisect</span><span class="w"> </span><span class="nv">start</span>

#<span class="w"> </span><span class="nv">Confirm</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">our</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="nv">script</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">correct</span>,<span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">fails</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">bad</span><span class="w"> </span><span class="nv">commit</span>.
.<span class="o">/</span><span class="nv">test</span>
#<span class="w"> </span><span class="nv">Should</span><span class="w"> </span><span class="nv">output</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span>.
<span class="nv">echo</span><span class="w"> </span>$?
#<span class="w"> </span><span class="nv">Tell</span><span class="w"> </span><span class="nv">Git</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">bad</span>.
<span class="nv">git</span><span class="w"> </span><span class="nv">bisect</span><span class="w"> </span><span class="nv">bad</span>

#<span class="w"> </span><span class="nv">Same</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">known</span><span class="w"> </span><span class="nv">good</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">past</span>.
<span class="nv">git</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="nv">KNOWN_GOOD_COMMIT</span>
.<span class="o">/</span><span class="nv">test</span>
#<span class="w"> </span><span class="nv">Should</span><span class="w"> </span><span class="nv">output</span><span class="w"> </span><span class="mi">0</span>.
<span class="nv">echo</span><span class="w"> </span>$?
#<span class="w"> </span><span class="nv">After</span><span class="w"> </span><span class="nv">this</span>,<span class="w"> </span><span class="nv">git</span><span class="w"> </span><span class="nv">automatically</span><span class="w"> </span><span class="nv">checks</span><span class="w"> </span><span class="nv">out</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">commit</span>
#<span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">middle</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">KNOWN_BAD_COMMIT</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">KNOWN_GOOD_COMMIT</span>.
<span class="nv">git</span><span class="w"> </span><span class="nv">bisect</span><span class="w"> </span><span class="nv">good</span>

#<span class="w"> </span><span class="nv">Bisect</span><span class="w"> </span><span class="nv">automatically</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">bad</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">last</span><span class="w"> </span><span class="nv">good</span><span class="w"> </span><span class="nv">rev</span>.
<span class="nv">git</span><span class="w"> </span><span class="nv">bisect</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span>.<span class="o">/</span><span class="nv">test</span>

#<span class="w"> </span><span class="k">End</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">bisect</span><span class="w"> </span><span class="nv">operation</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">checkout</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">master</span><span class="w"> </span><span class="nv">again</span>.
<span class="nv">git</span><span class="w"> </span><span class="nv">bisect</span><span class="w"> </span><span class="nv">reset</span>
</pre></div>

<p>这当然假设如果测试脚本<code>./test</code>被 git 跟踪，它不会在二分期间的一些早期提交中消失。</p>
<p><code>PATH</code>我发现通常情况下，您只需将树内脚本从树中复制出来，并可能使用-like 变量，然后从那里运行它，就可以逃脱。</p>
<p>当然，如果<code>test</code>依赖于旧提交的测试基础架构中断，那么就没有解决方案，您将不得不手动执行操作，决定如何一个一个地测试提交。</p>
<p>然而，我发现使用这种自动化通常是有效的，并且可以为你积压的任务中较慢的测试节省大量时间，你可以让它运行一整夜，并且可能在第二天早上发现你的错误，这是值得的尝试。</p>
<h3>更多攻略</h3>
<p>在 bisect 之后留在第一个失败的提交上，而不是返回到<code>master</code>：</p>
<div class="code"><pre class="code literal-block">git bisect reset HEAD
</pre></div>

<p><code>start</code>+ 初始<code>bad</code>和<code>good</code>一次性：</p>
<div class="code"><pre class="code literal-block">git bisect start KNOWN_BAD_COMMIT KNOWN_GOOD_COMMIT~
</pre></div>

<p>是相同的：</p>
<div class="code"><pre class="code literal-block">git checkout KNOWN_BAD_COMMIT
git bisect start
git bisect bad
git bisect good KNOWN_GOOD_COMMIT
</pre></div>

<p>查看到目前为止已测试的内容（通过手动<code>good</code>和<code>bad</code>或<code>run</code>）：</p>
<div class="code"><pre class="code literal-block">git bisect log
</pre></div>

<p>示例输出：</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="nf">log</span>
<span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="k">start</span>
<span class="err">#</span><span class="w"> </span><span class="nl">bad</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">00b9fcdbe7e7d2579f212b51342f4d605e53253d</span><span class="o">]</span><span class="w"> </span><span class="mi">9</span>
<span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="mi">00</span><span class="n">b9fcdbe7e7d2579f212b51342f4d605e53253d</span>
<span class="err">#</span><span class="w"> </span><span class="nl">good</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">db7ec3d602db2d994fe981c0da55b7b85ca62566</span><span class="o">]</span><span class="w"> </span><span class="mi">0</span>
<span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="n">good</span><span class="w"> </span><span class="n">db7ec3d602db2d994fe981c0da55b7b85ca62566</span>
<span class="err">#</span><span class="w"> </span><span class="nl">good</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">2461cd8ce8d3d1367ddb036c8f715c7b896397a5</span><span class="o">]</span><span class="w"> </span><span class="mi">4</span>
<span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="n">good</span><span class="w"> </span><span class="mi">2461</span><span class="n">cd8ce8d3d1367ddb036c8f715c7b896397a5</span>
<span class="err">#</span><span class="w"> </span><span class="nl">good</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">8fbab5a3b44fd469a2da3830dac5c4c1358a87a0</span><span class="o">]</span><span class="w"> </span><span class="mi">6</span>
<span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="n">good</span><span class="w"> </span><span class="mi">8</span><span class="n">fbab5a3b44fd469a2da3830dac5c4c1358a87a0</span>
<span class="err">#</span><span class="w"> </span><span class="nl">bad</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">dd2c05e71c246f9bcbd2fbe81deabf826c54be23</span><span class="o">]</span><span class="w"> </span><span class="mi">8</span>
<span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="n">dd2c05e71c246f9bcbd2fbe81deabf826c54be23</span>
<span class="err">#</span><span class="w"> </span><span class="nl">bad</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">c536b1b7242d5fcf92cd87e9a534bedb1c0c9c05</span><span class="o">]</span><span class="w"> </span><span class="mi">7</span>
<span class="n">git</span><span class="w"> </span><span class="n">bisect</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="n">c536b1b7242d5fcf92cd87e9a534bedb1c0c9c05</span>
<span class="err">#</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="n">bad</span><span class="w"> </span><span class="k">commit</span><span class="err">:</span><span class="w"> </span><span class="err">[</span><span class="n">c536b1b7242d5fcf92cd87e9a534bedb1c0c9c0</span>
</pre></div>

<p>在 git log 上显示好的和坏的引用以获得更好的时间概念：</p>
<div class="code"><pre class="code literal-block">git log --decorate --pretty=fuller --simplify-by-decoration master
</pre></div>

<p>这仅显示具有相应引用的提交，这大大减少了噪音，但确实包括自动生成的类型引用：</p>
<div class="code"><pre class="code literal-block">refs/bisect/good*
refs/bisect/bad*
</pre></div>

<p>它告诉我们我们将哪些提交标记为好或坏。</p>
<p>如果您想使用该命令，请考虑这个测试仓库。</p>
<h3>失败来得快，成功来得慢</h3>
<p>有时：</p>
<ul>
<li>失败发生得很快，例如第一个测试中断</li>
<li>成功需要一段时间，例如，失败的测试通过，而我们不关心的所有其他测试都会跟进</li>
</ul>
<p>对于那些情况，例如，假设失败总是在 5 秒内发生，并且如果我们懒得让测试更具体，我们确实应该这样做，我们可以使用 as <code>timeout</code>：</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/usr/bin/env bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code>timeout<span class="w"> </span><span class="m">5</span><span class="w"> </span>test-command
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="k">fi</span>
</code></td>
</tr>
</table></div>
<p>这有效，因为<code>timeout</code>exits而exits<code>124</code>失败。<code>test-command``1</code></p>
<h3>魔法退出状态</h3>
<p><code>git bisect run</code>对退出状态有点挑剔：</p>
<ul>
<li>任何高于 127 的值都会使二分法失败，例如：<div class="code"><pre class="code literal-block">git bisect run failed:
</pre></div>

<p>exit code 134 from '../test -aa' is &lt; 0 or &gt;= 128</p>
</li>
</ul>
<p>特别是 C<code>assert(0)</code>导致 a<code>SIGABRT</code>并以状态 134 退出，非常烦人。</p>
<ul>
<li>125 is magic and makes the run be skipped with <code>git bisect skip</code>.</li>
</ul>
<p>The intention of this is to help skip broken builds due to unrelated reasons.</p>
<p>See <code>man git-bisect</code> for the details.</p>
<p>So you might want to use something like:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/usr/bin/env bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><span class="nb">set</span><span class="w"> </span>-eu
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code>./build
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="nv">status</span><span class="o">=</span><span class="m">0</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code>./actual-test-command<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">status</span><span class="o">=</span><span class="nv">$?</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-6"><code data-line-number="6"></code></a></td>
<td class="code"><code><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">"</span><span class="nv">$status</span><span class="s2">"</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">125</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">"</span><span class="nv">$status</span><span class="s2">"</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">127</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-7"><code data-line-number="7"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="nv">status</span><span class="o">=</span><span class="m">1</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-8"><code data-line-number="8"></code></a></td>
<td class="code"><code><span class="k">fi</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/ru-he-shi-yong-git-dui-fen/#-9"><code data-line-number="9"></code></a></td>
<td class="code"><code><span class="nb">exit</span><span class="w"> </span><span class="s2">"</span><span class="nv">$status</span><span class="s2">"</span>
</code></td>
</tr>
</table></div>
<p>Tested on git 2.16.1.</p>
<p><br><br><a href="posts/how-to-use-git-bisect/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sql-server-zhong-shi-fou-you-xiang-net-zhong-de-math-max-yi-yang-cai-yong-liang-ge-zhi-de-max-han-shu/" class="u-url">SQL Server 中是否有像 .NET 中的 Math.Max 一样采用两个值的 Max 函数？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/sql-server-zhong-shi-fou-you-xiang-net-zhong-de-math-max-yi-yang-cai-yong-liang-ge-zhi-de-max-han-shu/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:26:32+08:00" itemprop="datePublished" title="2023-02-18 00:26">2023-02-18 00:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我想写一个这样的查询：</p>
<div class="code"><pre class="code literal-block">SELECT o.OrderId, MAX(o.NegotiatedPrice, o.SuggestedPrice)
FROM Order o
</pre></div>

<p>但这不是<code>MAX</code>函数的工作方式，对吧？它是一个聚合函数，因此它需要一个参数，然后返回所有行的最大值。</p>
<p>有谁知道我该怎么做？</p>
<p><br><br></p>
<h2>解答</h2>
<p>如果您想使用与您的示例相似的语法，您需要制作一个，但是您可以像其他人所说的那样，<code>User-Defined
Function</code>通过语句很容易地内联来做您想做的事情吗？<code>CASE</code></p>
<p>可能<code>UDF</code>是这样的：</p>
<div class="code"><pre class="code literal-block"><span class="k">create</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">dbo</span><span class="p">.</span><span class="n">InlineMax</span><span class="p">(</span><span class="nv">@val1</span><span class="w"> </span><span class="nc">int</span><span class="p">,</span><span class="w"> </span><span class="nv">@val2</span><span class="w"> </span><span class="nc">int</span><span class="p">)</span>
<span class="k">returns</span><span class="w"> </span><span class="nc">int</span>
<span class="k">as</span>
<span class="k">begin</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nv">@val1</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">@val2</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">@val1</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nf">isnull</span><span class="p">(</span><span class="nv">@val2</span><span class="p">,</span><span class="nv">@val1</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>

<p>......你会这样称呼它......</p>
<div class="code"><pre class="code literal-block">SELECT o.OrderId, dbo.InlineMax(o.NegotiatedPrice, o.SuggestedPrice) 
FROM Order o
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>可以一行完成：</p>
<div class="code"><pre class="code literal-block"><span class="o">--</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">calculates</span><span class="w"> </span><span class="o">==&gt;</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="nv">@val1</span><span class="p">,</span><span class="w"> </span><span class="nv">@val2</span><span class="p">)</span>
<span class="k">SELECT</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">((</span><span class="nv">@val1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">@val2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">ABS</span><span class="p">(</span><span class="nv">@val1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">@val2</span><span class="p">))</span>
</pre></div>

<p><strong>编辑：</strong> <em>如果您要处理非常大的数字，则必须将值变量转换为 bigint 以避免整数溢出。</em></p>
<p><br><br><a href="posts/is-there-a-max-function-in-sql-server-that-takes-two-values-like-math-max-in-net/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-zai-javascript-zhong-jin-xing-guan-lian-shu-zu-san-lie/" class="u-url">如何在 JavaScript 中进行关联数组/散列</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-zai-javascript-zhong-jin-xing-guan-lian-shu-zu-san-lie/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:25:53+08:00" itemprop="datePublished" title="2023-02-18 00:25">2023-02-18 00:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我需要像在 C# 中那样使用 JavaScript 存储一些统计信息：</p>
<div class="code"><pre class="code literal-block">Dictionary&lt;string, int&gt; statistics;

statistics["Foo"] = 10;
statistics["Goo"] = statistics["Goo"] + 1;
statistics.Add("Zoo", 1);
</pre></div>

<p>JavaScript 中有 an<code>Hashtable</code>或类似的东西吗？我怎么能以这种方式存储价值？<code>Dictionary&lt;TKey, TValue&gt;</code>  </p>
<p><br><br></p>
<h2>解答</h2>
<p>使用JavaScript 对象作为关联数组。</p>
<blockquote>
<p>关联数组：简单来说，关联数组使用字符串而不是整数作为索引。</p>
</blockquote>
<p>创建一个对象</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">dictionary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
</pre></div>

<blockquote>
<p>JavaScript 允许您使用以下语法向对象添加属性：</p>
</blockquote>
<div class="code"><pre class="code literal-block">Object.yourProperty = value;
</pre></div>

<p>相同的替代语法是：</p>
<div class="code"><pre class="code literal-block">Object["yourProperty"] = value;
</pre></div>

<p>如果可以，还可以使用以下语法创建键值对象映射：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="mi">2</span><span class="w"> </span><span class="p">};</span>

<span class="n">point</span><span class="p">[</span><span class="s2">"x"</span><span class="p">]</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="mi">3</span>
<span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="mi">2</span>
</pre></div>

<blockquote>
<p>您可以使用 for..in 循环结构遍历关联数组，如下所示</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">Object</span><span class="p">.</span><span class="n">keys</span><span class="p">(</span><span class="n">dict</span><span class="p">))</span><span class="err">{</span>
<span class="w">  </span><span class="nf">var</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dict</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
<span class="w">  </span><span class="cm">/* use key/value for intended purpose */</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">associativeArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="n">associativeArray</span><span class="p">[</span><span class="s2">"one"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"First"</span><span class="p">;</span>
<span class="n">associativeArray</span><span class="p">[</span><span class="s2">"two"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Second"</span><span class="p">;</span>
<span class="n">associativeArray</span><span class="p">[</span><span class="s2">"three"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Third"</span><span class="p">;</span>
</pre></div>

<p>如果您来自面向对象的语言，您应该查看这篇文章。</p>
<p><br><br><a href="posts/how-to-do-associative-array-hashing-in-javascript/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1063.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1061.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
