<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 574) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-574.html">
<link rel="prev" href="index-575.html" type="text/html">
<link rel="next" href="index-573.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-import-the-class-within-the-same-directory-or-sub-directory/" class="u-url">How to import the class within the same directory or sub directory?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-import-the-class-within-the-same-directory-or-sub-directory/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:20:33+08:00" itemprop="datePublished" title="2023-02-17 10:20">2023-02-17 10:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a directory that stores all the <strong>.py</strong> files.</p>
<div class="code"><pre class="code literal-block">bin/
   main.py
   user.py # where class User resides
   dir.py # where class Dir resides
</pre></div>

<p>I want to use classes from <strong>user.py</strong> and <strong>dir.py</strong> in <strong>main.py</strong>.<br>
How can I import these Python classes into <strong>main.py</strong>?<br>
Furthermore, how can I import class <code>User</code> if <strong>user.py</strong> is in a sub
directory?</p>
<div class="code"><pre class="code literal-block">bin/
    dir.py
    main.py
    usr/
        user.py
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h2>Python 2</h2>
<p>Make an empty file called <code>__init__.py</code> in the same directory as the files.
That will signify to Python that it's "ok to import from this directory".</p>
<p>Then just do...</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">user</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">dir</span> <span class="kn">import</span> <span class="n">Dir</span>
</pre></div>

<p>The same holds true if the files are in a subdirectory - put an <code>__init__.py</code>
in the subdirectory as well, and then use regular import statements, with dot
notation. For each level of directory, you need to add to the import path.</p>
<div class="code"><pre class="code literal-block">bin/
    main.py
    classes/
        user.py
        dir.py
</pre></div>

<p>So if the directory was named "classes", then you'd do this:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">classes.user</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">classes.dir</span> <span class="kn">import</span> <span class="n">Dir</span>
</pre></div>

<h2>Python 3</h2>
<p>Same as previous, but prefix the module name with a <code>.</code> if not using a
subdirectory:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">.user</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">.dir</span> <span class="kn">import</span> <span class="n">Dir</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I just learned (thanks to martineau's comment) that, in order to import
classes from files within the same directory, you would now write in Python 3:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">.user</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">.dir</span> <span class="kn">import</span> <span class="n">Dir</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/there-is-no-tracking-information-for-the-current-branch/" class="u-url">There is no tracking information for the current branch</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/there-is-no-tracking-information-for-the-current-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:20:04+08:00" itemprop="datePublished" title="2023-02-17 10:20">2023-02-17 10:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've been using github from a relatively short period, and I've always used
the client to perform commits and pulls. I decided to try it from the git bash
yesterday, and I successfully created a new repo and committed files.</p>
<p>Today I did changes to the repository from another computer, I've committed
the changes and now I'm back home and performed a <code>git pull</code> to update my
local version and I get this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">tracking</span><span class="w"> </span><span class="nv">information</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">branch</span>.
<span class="w">    </span><span class="nv">Please</span><span class="w"> </span><span class="nv">specify</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">merge</span><span class="w"> </span><span class="nv">with</span>.
<span class="w">    </span><span class="nv">See</span><span class="w"> </span><span class="nv">git</span><span class="o">-</span><span class="nv">pull</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">details</span>

<span class="w">    </span><span class="nv">git</span><span class="w"> </span><span class="nv">pull</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">branch</span><span class="o">&gt;</span>

<span class="k">If</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">wish</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">tracking</span><span class="w"> </span><span class="nv">information</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">with</span>:

<span class="w">    </span><span class="nv">git</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="o">--</span><span class="nv">set</span><span class="o">-</span><span class="nv">upstream</span><span class="w"> </span><span class="nv">develop</span><span class="w"> </span><span class="nv">origin</span><span class="o">/&lt;</span><span class="nv">branch</span><span class="o">&gt;</span>
</pre></div>

<p>the only contributor to this repo is me and there are no branches (just a
master). I'm on windows and I've performed the pull from git bash:</p>
<p><img alt="enter image description here" src="images/AeyH8.png"></p>
<p>git status:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>status
<span class="c1"># On branch master</span>
nothing<span class="w"> </span>to<span class="w"> </span>commit,<span class="w"> </span>working<span class="w"> </span>directory<span class="w"> </span>clean
</pre></div>

<p>git branch:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>branch
*<span class="w"> </span>master
</pre></div>

<p>What am I doing wrong?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You could specify what branch you want to pull:</p>
<div class="code"><pre class="code literal-block">git pull origin master
</pre></div>

<p>Or you could set it up so that your local master branch tracks github master
branch as an upstream:</p>
<div class="code"><pre class="code literal-block">git branch --set-upstream-to=origin/master master
git pull
</pre></div>

<p>This branch tracking is set up for you automatically when you clone a
repository (for the default branch only), but if you add a remote to an
existing repository you have to set up the tracking yourself. Thankfully, the
advice given by git makes that pretty easy to remember how to do.</p>
<p><br></p>
<h3>Suggest</h3>
<p>See: git checkout tag, git pull fails in branch</p>
<p>If like me you need to do this all the time, you can set up an alias to do it
automatically by adding the following to your <code>.gitconfig</code> file:</p>
<div class="code"><pre class="code literal-block"><span class="k">[alias]</span>
<span class="w">    </span><span class="na">set-upstream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>\
<span class="w">       </span><span class="s">!git branch </span>\
<span class="w">           </span><span class="s">--set-upstream-to=origin/`git symbolic-ref --short HEAD`</span>
</pre></div>

<p>When you see the message <code>There is no tracking information...</code>, run:</p>
<div class="code"><pre class="code literal-block"> git set-upstream
 git push
</pre></div>

<p>Thanks to https://zarino.co.uk/post/git-set-upstream/</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/optimistic-vs-pessimistic-locking/" class="u-url">Optimistic vs. Pessimistic locking</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/optimistic-vs-pessimistic-locking/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T10:19:32+08:00" itemprop="datePublished" title="2023-02-17 10:19">2023-02-17 10:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I understand the differences between optimistic and pessimistic locking. Now,
could someone explain to me when I would use either one in general?</p>
<p>And does the answer to this question change depending on whether or not I'm
using a stored procedure to perform the query?</p>
<p>But just to check, optimistic means "don't lock the table while reading" and
pessimistic means "lock the table while reading."</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Optimistic Locking is a strategy where you read a record, take note of a
version number (other methods to do this involve dates, timestamps or
checksums/hashes) and check that the version hasn't changed before you write
the record back. When you write the record back you filter the update on the
version to make sure it's atomic. (i.e. hasn't been updated between when you
check the version and write the record to the disk) and update the version in
one hit.</p>
<p>If the record is dirty (i.e. different version to yours) you abort the
transaction and the user can re-start it.</p>
<p>This strategy is most applicable to high-volume systems and three-tier
architectures where you do not necessarily maintain a connection to the
database for your session. In this situation the client cannot actually
maintain database locks as the connections are taken from a pool and you may
not be using the same connection from one access to the next.</p>
<p>Pessimistic Locking is when you lock the record for your exclusive use until
you have finished with it. It has much better integrity than optimistic
locking but requires you to be careful with your application design to avoid
Deadlocks. To use pessimistic locking you need either a direct connection to
the database (as would typically be the case in a two tier client server
application) or an externally available transaction ID that can be used
independently of the connection.</p>
<p>In the latter case you open the transaction with the TxID and then reconnect
using that ID. The DBMS maintains the locks and allows you to pick the session
back up through the TxID. This is how distributed transactions using two-phase
commit protocols (such as XA or COM+ Transactions) work.</p>
<p><br></p>
<h3>Suggest</h3>
<p>When dealing with conflicts, you have two options:</p>
<ul>
<li>You can try to avoid the conflict, and that's what Pessimistic Locking does.</li>
<li>Or, you could allow the conflict to occur, but you need to detect it upon committing your transactions, and that's what Optimistic Locking does.</li>
</ul>
<p>Now, let's consider the following Lost Update anomaly:</p>
<p><img alt="Lost Update" src="images/vCagm.png"></p>
<p>The Lost Update anomaly can happen in the Read Committed isolation level.</p>
<p>In the diagram above we can see that Alice believes she can withdraw 40 from
her <code>account</code> but does not realize that Bob has just changed the account
balance, and now there are only 20 left in this account.</p>
<h3>Pessimistic Locking</h3>
<p>Pessimistic locking achieves this goal by taking a shared or read lock on the
account so Bob is prevented from changing the account.</p>
<p><img alt="Lost Update Pessimistic Locking" src="images/oybRy.png"></p>
<p>In the diagram above, both Alice and Bob will acquire a read lock on the
<code>account</code> table row that both users have read. The database acquires these
locks on SQL Server when using Repeatable Read or Serializable.</p>
<p>Because both Alice and Bob have read the <code>account</code> with the PK value of <code>1</code>,
neither of them can change it until one user releases the read lock. This is
because a write operation requires a write/exclusive lock acquisition, and
shared/read locks prevent write/exclusive locks.</p>
<p>Only after Alice has committed her transaction and the read lock was released
on the <code>account</code> row, Bob <code>UPDATE</code> will resume and apply the change. Until
Alice releases the read lock, Bob's UPDATE blocks.</p>
<h3>Optimistic Locking</h3>
<p>Optimistic Locking allows the conflict to occur but detects it upon applying
Alice's UPDATE as the version has changed.</p>
<p><img alt="Application-level transactions" src="images/DEdlF.png"></p>
<p>This time, we have an additional <code>version</code> column. The <code>version</code> column is
incremented every time an UPDATE or DELETE is executed, and it is also used in
the WHERE clause of the UPDATE and DELETE statements. For this to work, we
need to issue the SELECT and read the current <code>version</code> prior to executing the
UPDATE or DELETE, as otherwise, we would not know what version value to pass
to the WHERE clause or to increment.</p>
<h3>Application-level transactions</h3>
<p>Relational database systems have emerged in the late 70's early 80's when a
client would, typically, connect to a mainframe via a terminal. That's why we
still see database systems define terms such as SESSION setting.</p>
<p>Nowadays, over the Internet, we no longer execute reads and writes in the
context of the same database transaction, and ACID is no longer sufficient.</p>
<p>For instance, consider the following use case:</p>
<p><img alt="Application-level transactions and Optimistic Locking" src="images/FCyHh.png"></p>
<p>Without optimistic locking, there is no way this Lost Update would have been
caught even if the database transactions used Serializable. This is because
reads and writes are executed in separate HTTP requests, hence on different
database transactions.</p>
<p>So, optimistic locking can help you prevent Lost Updates even when using
application-level transactions that incorporate the user-think time as well.</p>
<h3>Conclusion</h3>
<p>Optimistic locking is a very useful technique, and it works just fine even
when using less-strict isolation levels, like Read Committed, or when reads
and writes are executed in subsequent database transactions.</p>
<p>The downside of optimistic locking is that a rollback will be triggered by the
data access framework upon catching an <code>OptimisticLockException</code>, therefore
losing all the work we've done previously by the currently executing
transaction.</p>
<p>The more contention, the more conflicts, and the greater the chance of
aborting transactions. Rollbacks can be costly for the database system as it
needs to revert all current pending changes which might involve both table
rows and index records.</p>
<p>For this reason, pessimistic locking might be more suitable when conflicts
happen frequently, as it reduces the chance of rolling back transactions.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-575.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-573.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
