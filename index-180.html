<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 180) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-180.html">
<link rel="prev" href="index-181.html" type="text/html">
<link rel="next" href="index-179.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-use-getters-and-setters-accessors/" class="u-url">Why use getters and setters/accessors?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-use-getters-and-setters-accessors/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:03:49+08:00" itemprop="datePublished" title="2023-02-17 00:03">2023-02-17 00:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What's the advantage of using getters and setters - that only get and set -
instead of simply using public fields for those variables?</p>
<p>If getters and setters are ever doing more than just the simple get/set, I can
figure this one out very quickly, but I'm not 100% clear on how:</p>
<div class="code"><pre class="code literal-block">public String foo;
</pre></div>

<p>is any worse than:</p>
<div class="code"><pre class="code literal-block"><span class="nv">private</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">foo</span><span class="c1">;</span>
<span class="nv">public</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">setFoo</span><span class="ss">(</span><span class="nv">String</span><span class="w"> </span><span class="nv">foo</span><span class="ss">)</span><span class="w"> </span>{<span class="w"> </span><span class="nv">this</span>.<span class="nv">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">foo</span><span class="c1">; }</span>
<span class="nv">public</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">getFoo</span><span class="ss">()</span><span class="w"> </span>{<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">foo</span><span class="c1">; }</span>
</pre></div>

<p>Whereas the former takes a lot less boilerplate code.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>There are actually <em>many good reasons</em> to consider using accessors</strong> rather
than directly exposing fields of a class - beyond just the argument of
encapsulation and making future changes easier.</p>
<p><em>Here are the some of the reasons I am aware of:</em></p>
<ul>
<li>Encapsulation of behavior associated with getting or setting the property - this allows additional functionality (like validation) to be added more easily later.</li>
<li>Hiding the internal representation of the property while exposing a property using an alternative representation.</li>
<li>Insulating your public interface from change - allowing the public interface to remain constant while the implementation changes without affecting existing consumers.</li>
<li>Controlling the lifetime and memory management (disposal) semantics of the property - particularly important in non-managed memory environments (like C++ or Objective-C).</li>
<li>Providing a debugging interception point for when a property changes at runtime - debugging when and where a property changed to a particular value can be quite difficult without this in some languages.</li>
<li>Improved interoperability with libraries that are designed to operate against property getter/setters - Mocking, Serialization, and WPF come to mind.</li>
<li>Allowing inheritors to change the semantics of how the property behaves and is exposed by overriding the getter/setter methods.</li>
<li>Allowing the getter/setter to be passed around as lambda expressions rather than values.</li>
<li>Getters and setters can allow different access levels - for example the get may be public, but the set could be protected.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Because 2 weeks (months, years) from now when you realize that your setter
needs to do <strong>more</strong> than just set the value, you'll also realize that the
property has been used directly in 238 other classes :-)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-undo-git-reset/" class="u-url">How do I undo 'git reset'?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-undo-git-reset/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:03:21+08:00" itemprop="datePublished" title="2023-02-17 00:03">2023-02-17 00:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to undo this command:</p>
<div class="code"><pre class="code literal-block">git reset HEAD~
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h4>Short answer:</h4>
<div class="code"><pre class="code literal-block">git reset 'HEAD@{1}'
</pre></div>

<h4>Long answer:</h4>
<p>Git keeps a log of all ref updates (e.g., checkout, reset, commit, merge). You
can view it by typing:</p>
<div class="code"><pre class="code literal-block">git reflog
</pre></div>

<p>Somewhere in this list is the commit that you lost. Let's say you just typed
<code>git reset HEAD~</code> and want to undo it. My reflog looks like this:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>reflog
3f6db14<span class="w"> </span>HEAD@<span class="o">{</span><span class="m">0</span><span class="o">}</span>:<span class="w"> </span>HEAD~:<span class="w"> </span>updating<span class="w"> </span>HEAD
d27924e<span class="w"> </span>HEAD@<span class="o">{</span><span class="m">1</span><span class="o">}</span>:<span class="w"> </span>checkout:<span class="w"> </span>moving<span class="w"> </span>from<span class="w"> </span>d27924e0fe16776f0d0f1ee2933a0334a4787b4c
<span class="o">[</span>...<span class="o">]</span>
</pre></div>

<p>The first line says that <code>HEAD</code> 0 positions ago (in other words, the current
position) is 3f6db14; it was obtained by resetting to <code>HEAD~</code>. The second line
says that <code>HEAD</code> 1 position ago (in other words, the state before the reset)
is d27924e. It was obtained by checking out a particular commit (though that's
not important right now). So, to undo the reset, run <code>git reset HEAD@{1}</code> (or
<code>git reset d27924e</code>).</p>
<p>If, on the other hand, you've run some other commands since then that update
HEAD, the commit you want won't be at the top of the list, and you'll need to
search through the <code>reflog</code>.</p>
<p>One final note: It may be easier to look at the <code>reflog</code> for the specific
branch you want to un-reset, say master, rather than <code>HEAD</code>:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>reflog<span class="w"> </span>show<span class="w"> </span>master
c24138b<span class="w"> </span>master@<span class="o">{</span><span class="m">0</span><span class="o">}</span>:<span class="w"> </span>merge<span class="w"> </span>origin/master:<span class="w"> </span>Fast-forward
90a2bf9<span class="w"> </span>master@<span class="o">{</span><span class="m">1</span><span class="o">}</span>:<span class="w"> </span>merge<span class="w"> </span>origin/master:<span class="w"> </span>Fast-forward
<span class="o">[</span>...<span class="o">]</span>
</pre></div>

<p>This should have less noise it in than the general <code>HEAD reflog</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Old question, and the posted answers work great. I'll chime in with another
option though.</p>
<p><code>git reset ORIG_HEAD</code></p>
<p><code>ORIG_HEAD</code> references the commit that <code>HEAD</code> previously referenced.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-grep-search-committed-code-in-the-git-history/" class="u-url">How to grep (search) committed code in the Git history</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-grep-search-committed-code-in-the-git-history/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:02:51+08:00" itemprop="datePublished" title="2023-02-17 00:02">2023-02-17 00:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have deleted a file or some code in a file sometime in the past. Can I grep
in the content (not in the commit messages)?</p>
<p>A very poor solution is to grep the log:</p>
<div class="code"><pre class="code literal-block">git log -p | grep &lt;pattern&gt;
</pre></div>

<p>However, this doesn't return the commit hash straight away. I played around
with <code>git grep</code> to no avail.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To search for commit <em>content</em> (i.e., actual lines of source, as opposed to
commit messages and the like), you need to do:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp</span><span class="o">&gt;</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="n">git</span><span class="w"> </span><span class="n">rev</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="p">)</span>
</pre></div>

<p><code>git rev-list --all | xargs git grep &lt;expression&gt;</code> will work if you run into
an "Argument list too long" error.</p>
<p>If you want to limit the search to some subtree (for instance, "lib/util"),
you will need to pass that to the <code>rev-list</code> subcommand and <code>grep</code> as well:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp</span><span class="o">&gt;</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="n">git</span><span class="w"> </span><span class="n">rev</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span><span class="n">util</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">lib</span><span class="o">/</span><span class="n">util</span>
</pre></div>

<p>This will grep through all your commit text for <code>regexp</code>.</p>
<p>The reason for passing the path in both commands is because <code>rev-list</code> will
return the revisions list where all the changes to <code>lib/util</code> happened, but
also you need to pass to <code>grep</code> so that it will only search in <code>lib/util</code>.</p>
<p>Just imagine the following scenario: <code>grep</code> might find the same <code>&lt;regexp&gt;</code> on
other files which are contained in the same revision returned by <code>rev-list</code>
(even if there was no change to that file on that revision).</p>
<p>Here are some other useful ways of searching your source:</p>
<p>Search working tree for text matching regular expression regexp:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp</span><span class="o">&gt;</span>
</pre></div>

<p>Search working tree for lines of text matching regular expression regexp1 or
regexp2:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">e</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp1</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="o">--</span><span class="k">or</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">e</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp2</span><span class="o">&gt;</span>
</pre></div>

<p>Search working tree for lines of text matching regular expression regexp1 and
regexp2, reporting file paths only:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="o">-</span><span class="n">e</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp1</span><span class="o">&gt;</span><span class="w"> </span><span class="o">--</span><span class="k">and</span><span class="w"> </span><span class="o">-</span><span class="n">e</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp2</span><span class="o">&gt;</span>
</pre></div>

<p>Search working tree for files that have lines of text matching regular
expression regexp1 and lines of text matching regular expression regexp2:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="o">-</span><span class="n">match</span><span class="w"> </span><span class="o">-</span><span class="n">e</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp1</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="n">e</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp2</span><span class="o">&gt;</span>
</pre></div>

<p>Search working tree for changed lines of text matching pattern:</p>
<div class="code"><pre class="code literal-block">git diff --unified=0 | grep &lt;pattern&gt;
</pre></div>

<p>Search all revisions for text matching regular expression regexp:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp</span><span class="o">&gt;</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="n">git</span><span class="w"> </span><span class="n">rev</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="o">--</span><span class="n">all</span><span class="p">)</span>
</pre></div>

<p>Search all revisions between rev1 and rev2 for text matching regular
expression regexp:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">&lt;</span><span class="n">regexp</span><span class="o">&gt;</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="n">git</span><span class="w"> </span><span class="n">rev</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="o">&lt;</span><span class="n">rev1</span><span class="o">&gt;</span><span class="p">..</span><span class="o">&lt;</span><span class="n">rev2</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You should use the pickaxe (<code>-S</code>) option of <code>git log</code>.</p>
<p>To search for <code>Foo</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">log</span><span class="w"> </span><span class="o">-</span><span class="nv">SFoo</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nv">path_containing_change</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">log</span><span class="w"> </span><span class="o">-</span><span class="nv">SFoo</span><span class="w"> </span><span class="o">--</span><span class="nv">since</span><span class="o">=</span><span class="mi">2009</span>.<span class="mi">1</span>.<span class="mi">1</span><span class="w"> </span><span class="o">--</span><span class="k">until</span><span class="o">=</span><span class="mi">2010</span>.<span class="mi">1</span>.<span class="mi">1</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nv">path_containing_change</span>
</pre></div>

<p>See Git history - find lost line by keyword for more.</p>
<p><code>-S</code> (named <code>pickaxe</code>) comes originally from a <code>git diff</code> option (Git v0.99,
May 2005).<br>
Then <code>-S</code> (<code>pickaxe</code>) was ported to <code>git log</code> in May 2006 with Git 1.4.0-rc1.</p>
<hr>
<p>As Jakub Narębski commented:</p>
<ul>
<li>
<p>this <strong>looks for differences that introduce or remove an instance of<code>&lt;string&gt;</code></strong>. It usually means "revisions where you added or removed line with 'Foo'".</p>
</li>
<li>
<p>the <code>--pickaxe-regex</code> option allows you to use extended POSIX regex instead of searching for a string. Example (from <code>git log</code>): <code>git log -S"frotz\(nitfol" --pickaxe-regex</code></p>
</li>
</ul>
<hr>
<p>As Rob commented, this search is case-sensitive - he opened a follow-up
question on how to search case-insensitive.</p>
<hr>
<p>Hi Angel notes in the comments:</p>
<blockquote>
<p>Executing a <code>git log -G&lt;regexp&gt; --branches --all</code> (the <code>-G</code> is same as <code>-S</code>
but for regexes) does same thing as the accepted one (<code>git grep &lt;regexp&gt;
$(git rev-list --all)</code>), but it soooo much faster!</p>
<p>The accepted answer was still searching for text after ≈10 minutes of me
running it, whereas this one gives results after ≈4 seconds 🤷‍♂️.<br>
 The output here is more useful as well</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-181.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-179.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
