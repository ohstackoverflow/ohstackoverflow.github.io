<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2478) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2478.html">
<link rel="prev" href="index-2479.html" type="text/html">
<link rel="next" href="index-2477.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-git-clone-and-checkout/" class="u-url">What is the difference between git clone and checkout?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-git-clone-and-checkout/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:05:10+08:00" itemprop="datePublished" title="2023-03-04 19:05">2023-03-04 19:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between <code>git clone</code> and <code>git checkout</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The man page for checkout: http://git-scm.com/docs/git-checkout</p>
<p>The man page for clone: http://git-scm.com/docs/git-clone</p>
<p>To sum it up, clone is for fetching repositories you don't have, checkout is
for switching between branches in a repository you already have.</p>
<p>Note: for those who have a SVN/CVS background and new to Git, the equivalent
of <code>git clone</code> in SVN/CVS is <code>checkout</code>. The same wording of different terms
is often confusing.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>git clone</strong> is to fetch your repositories from the remote git server.</p>
<p><strong>git checkout</strong> is to checkout your desired status of your repository (like
branches or particular files).</p>
<p>E.g., you are currently on master branch and you want to switch into develop
branch.</p>
<div class="code"><pre class="code literal-block">git checkout develop_branch
</pre></div>

<p>E.g., you want to checkout to a particular status of a particular file</p>
<div class="code"><pre class="code literal-block">git checkout commit_point_A -- &lt;filename&gt;
</pre></div>

<p>Here is a good reference for you to learn Git, lets you understand much more
easily.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-in-make-shared-and-normal-shared-ptr-in-c/" class="u-url">Difference in make_shared and normal shared_ptr in C++</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-in-make-shared-and-normal-shared-ptr-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:04:07+08:00" itemprop="datePublished" title="2023-03-04 19:04">2023-03-04 19:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div class="code"><pre class="code literal-block"><span class="nt">std</span><span class="p">::</span><span class="nd">shared_ptr</span><span class="o">&lt;</span><span class="nt">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">std</span><span class="p">::</span><span class="nd">make_shared</span><span class="o">&lt;</span><span class="nt">Object</span><span class="o">&gt;(</span><span class="s2">"foo"</span><span class="o">);</span>
<span class="nt">std</span><span class="p">::</span><span class="nd">shared_ptr</span><span class="o">&lt;</span><span class="nt">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">p2</span><span class="o">(</span><span class="nt">new</span><span class="w"> </span><span class="nt">Object</span><span class="o">(</span><span class="s2">"foo"</span><span class="o">));</span>
</pre></div>

<p>Many google and stackoverflow posts are there on this, but I am not able to
understand why <code>make_shared</code> is more efficient than directly using
<code>shared_ptr</code>.</p>
<p>Can someone explain me step by step sequence of objects created and operations
done by both so that I will be able to understand how <code>make_shared</code> is
efficient. I have given one example above for reference.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The difference is that <code>std::make_shared</code> performs one heap-allocation,
whereas calling the <code>std::shared_ptr</code> constructor performs two.</p>
<h4>Where do the heap-allocations happen?</h4>
<p><code>std::shared_ptr</code> manages two entities:</p>
<ul>
<li>the control block (stores meta data such as ref-counts, type-erased deleter, etc)</li>
<li>the object being managed</li>
</ul>
<p><code>std::make_shared</code> performs a single heap-allocation accounting for the space
necessary for both the control block and the data. In the other case, <code>new
Obj("foo")</code> invokes a heap-allocation for the managed data and the
<code>std::shared_ptr</code> constructor performs another one for the control block.</p>
<p>For further information, check out the <strong>implementation notes</strong> at
cppreference.</p>
<h3>Update I: Exception-Safety</h3>
<p><strong>NOTE (2019/08/30)</strong> : This is not a problem since C++17, due to the changes
in the evaluation order of function arguments. Specifically, each argument to
a function is required to fully execute before evaluation of other arguments.</p>
<p>Since the OP seem to be wondering about the exception-safety side of things,
I've updated my answer.</p>
<p>Consider this example,</p>
<div class="code"><pre class="code literal-block"><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Lhs</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">lhs</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Rhs</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">*/</span><span class="w"> </span><span class="p">}</span>

<span class="n">F</span><span class="p">(</span><span class="n">std</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Lhs</span><span class="o">&gt;</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">Lhs</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">)),</span>
<span class="w">  </span><span class="n">std</span><span class="p">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Rhs</span><span class="o">&gt;</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">Rhs</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">)));</span>
</pre></div>

<p>Because C++ allows arbitrary order of evaluation of subexpressions, one
possible ordering is:</p>
<ol>
<li><code>new Lhs("foo"))</code></li>
<li><code>new Rhs("bar"))</code></li>
<li><code>std::shared_ptr&lt;Lhs&gt;</code></li>
<li><code>std::shared_ptr&lt;Rhs&gt;</code></li>
</ol>
<p>Now, suppose we get an exception thrown at step 2 (e.g., out of memory
exception, <code>Rhs</code> constructor threw some exception). We then lose memory
allocated at step 1, since nothing will have had a chance to clean it up. The
core of the problem here is that the raw pointer didn't get passed to the
<code>std::shared_ptr</code> constructor immediately.</p>
<p>One way to fix this is to do them on separate lines so that this arbitary
ordering cannot occur.</p>
<div class="code"><pre class="code literal-block"><span class="nt">auto</span><span class="w"> </span><span class="nt">lhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">std</span><span class="p">::</span><span class="nd">shared_ptr</span><span class="o">&lt;</span><span class="nt">Lhs</span><span class="o">&gt;(</span><span class="nt">new</span><span class="w"> </span><span class="nt">Lhs</span><span class="o">(</span><span class="s2">"foo"</span><span class="o">));</span>
<span class="nt">auto</span><span class="w"> </span><span class="nt">rhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">std</span><span class="p">::</span><span class="nd">shared_ptr</span><span class="o">&lt;</span><span class="nt">Rhs</span><span class="o">&gt;(</span><span class="nt">new</span><span class="w"> </span><span class="nt">Rhs</span><span class="o">(</span><span class="s2">"bar"</span><span class="o">));</span>
<span class="nt">F</span><span class="o">(</span><span class="nt">lhs</span><span class="o">,</span><span class="w"> </span><span class="nt">rhs</span><span class="o">);</span>
</pre></div>

<p>The preferred way to solve this of course is to use <code>std::make_shared</code>
instead.</p>
<div class="code"><pre class="code literal-block"><span class="nt">F</span><span class="o">(</span><span class="nt">std</span><span class="p">::</span><span class="nd">make_shared</span><span class="o">&lt;</span><span class="nt">Lhs</span><span class="o">&gt;(</span><span class="s2">"foo"</span><span class="o">),</span><span class="w"> </span><span class="nt">std</span><span class="p">::</span><span class="nd">make_shared</span><span class="o">&lt;</span><span class="nt">Rhs</span><span class="o">&gt;(</span><span class="s2">"bar"</span><span class="o">));</span>
</pre></div>

<h3>Update II: Disadvantage of <code>std::make_shared</code>
</h3>
<p>Quoting Casey's comments:</p>
<blockquote>
<p>Since there there's only one allocation, the pointee's memory cannot be
deallocated until the control block is no longer in use. A <code>weak_ptr</code> can
keep the control block alive indefinitely.</p>
</blockquote>
<h4>Why do instances of <code>weak_ptr</code>s keep the control block alive?</h4>
<p>There must be a way for <code>weak_ptr</code>s to determine if the managed object is
still valid (eg. for <code>lock</code>). They do this by checking the number of
<code>shared_ptr</code>s that own the managed object, which is stored in the control
block. The result is that the control blocks are alive until the <code>shared_ptr</code>
count and the <code>weak_ptr</code> count both hit 0.</p>
<h4>Back to <code>std::make_shared</code>
</h4>
<p>Since <code>std::make_shared</code> makes a single heap-allocation for both the control
block and the managed object, there is no way to free the memory for control
block and the managed object independently. We must wait until we can free
both the control block and the managed object, which happens to be until there
are no <code>shared_ptr</code>s or <code>weak_ptr</code>s alive.</p>
<p>Suppose we instead performed two heap-allocations for the control block and
the managed object via <code>new</code> and <code>shared_ptr</code> constructor. Then we free the
memory for the managed object (maybe earlier) when there are no <code>shared_ptr</code>s
alive, and free the memory for the control block (maybe later) when there are
no <code>weak_ptr</code>s alive.</p>
<p><br></p>
<h3>Suggest</h3>
<p>There is another case where the two possibilities differ, on top of those
already mentioned: if you need to call a non-public constructor (protected or
private), make_shared might not be able to access it, while the variant with
the new works fine.</p>
<div class="code"><pre class="code literal-block"><span class="nt">class</span><span class="w"> </span><span class="nt">A</span>
<span class="p">{</span>
<span class="n">public</span><span class="p">:</span>

<span class="w">    </span><span class="n">A</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nf">val</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="err">{</span><span class="p">}</span>

<span class="w">    </span><span class="nt">std</span><span class="p">::</span><span class="nd">shared_ptr</span><span class="o">&lt;</span><span class="nt">A</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">createNext</span><span class="o">()</span><span class="p">{</span><span class="w"> </span><span class="err">return</span><span class="w"> </span><span class="n">std</span><span class="p">:</span><span class="o">:</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="p">(</span><span class="n">val</span><span class="mi">+1</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nt">Invalid</span><span class="w"> </span><span class="nt">because</span><span class="w"> </span><span class="nt">make_shared</span><span class="w"> </span><span class="nt">needs</span><span class="w"> </span><span class="nt">to</span><span class="w"> </span><span class="nt">call</span><span class="w"> </span><span class="nt">A</span><span class="o">(</span><span class="nt">int</span><span class="o">)</span><span class="w"> </span><span class="o">**</span><span class="nt">internally</span><span class="o">**</span>

<span class="w">    </span><span class="nt">std</span><span class="p">::</span><span class="nd">shared_ptr</span><span class="o">&lt;</span><span class="nt">A</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">createNext</span><span class="o">()</span><span class="p">{</span><span class="w"> </span><span class="err">return</span><span class="w"> </span><span class="n">std</span><span class="p">:</span><span class="o">:</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">val</span><span class="mi">+1</span><span class="p">));</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nt">Works</span><span class="w"> </span><span class="nt">fine</span><span class="w"> </span><span class="nt">because</span><span class="w"> </span><span class="nt">A</span><span class="o">(</span><span class="nt">int</span><span class="o">)</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">called</span><span class="w"> </span><span class="nt">explicitly</span>

<span class="nt">private</span><span class="o">:</span>

<span class="w">    </span><span class="nt">int</span><span class="w"> </span><span class="nt">val</span><span class="o">;</span>

<span class="w">    </span><span class="nt">A</span><span class="o">(</span><span class="nt">int</span><span class="w"> </span><span class="nt">v</span><span class="o">):</span><span class="w"> </span><span class="nt">val</span><span class="o">(</span><span class="nt">v</span><span class="o">)</span><span class="p">{}</span>
<span class="err">}</span><span class="o">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-order-citations-by-appearance-using-bibtex/" class="u-url">How to order citations by appearance using BibTeX?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-order-citations-by-appearance-using-bibtex/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T19:02:47+08:00" itemprop="datePublished" title="2023-03-04 19:02">2023-03-04 19:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>By default (using the <code>plain</code> style) BibTeX orders citations alphabetically.</p>
<p>How to order the citations by order of appearance in the document?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are three good answers to this question.</p>
<ul>
<li>Use the <code>unsrt</code> bibliography style, if you're happy with its formatting otherwise</li>
<li>Use the <code>makebst</code> (link) tool to design your own bibliography style</li>
</ul>
<p>And my personal recommendation:</p>
<ul>
<li>Use the <code>biblatex</code> package (link). It's the most complete and flexible bibliography tool in the LaTeX world.</li>
</ul>
<p>Using <code>biblatex</code>, you'd write something like</p>
<div class="code"><pre class="code literal-block"><span class="k">\documentclass</span><span class="na">[12pt]</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="na">[sorting=none]</span><span class="nb">{</span>biblatex<span class="nb">}</span>
<span class="k">\bibliography</span><span class="nb">{</span>journals,phd-references<span class="nb">}</span> <span class="c">% Where journals.bib and phd-references.bib are BibTeX databases</span>
<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
<span class="k">\cite</span><span class="nb">{</span>robertson2007<span class="nb">}</span>
<span class="k">\cite</span><span class="nb">{</span>earnshaw1842<span class="nb">}</span>
<span class="k">\printbibliography</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Change</p>
<div class="code"><pre class="code literal-block">\bibliographystyle{plain}
</pre></div>

<p>to</p>
<div class="code"><pre class="code literal-block">\bibliographystyle{ieeetr}
</pre></div>

<p>Then rebuild it a few times to replace the <code>.aux</code> and <code>.bbl</code> files that were
made when you used the plain style.</p>
<p>Or simply delete the <code>.aux</code> and <code>.bbl</code> files and rebuild.</p>
<p>If you use MiKTeX you shouldn't need to download anything extra.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2479.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2477.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
