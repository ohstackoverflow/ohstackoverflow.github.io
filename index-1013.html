<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1013) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1013.html">
<link rel="prev" href="index-1014.html" type="text/html">
<link rel="next" href="index-1012.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/comparing-two-byte-arrays-in-net/" class="u-url">Comparing two byte arrays in .NET</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/comparing-two-byte-arrays-in-net/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:31:31+08:00" itemprop="datePublished" title="2023-02-17 22:31">2023-02-17 22:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I do this fast?</p>
<p>Sure I can do this:</p>
<div class="code"><pre class="code literal-block"><span class="k">static</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="n">ByteArrayCompare</span><span class="p">(</span><span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">a2</span><span class="p">)</span>
<span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a1</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">a2</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="n">a1</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a1</span><span class="o">[</span><span class="n">i</span><span class="o">]!=</span><span class="n">a2</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>But I'm looking for either a BCL function or some highly optimized proven way
to do this.</p>
<div class="code"><pre class="code literal-block">java.util.Arrays.equals((sbyte[])(Array)a1, (sbyte[])(Array)a2);
</pre></div>

<p>works nicely, but it doesn't look like that would work for x64.</p>
<p>Note my super-fast answer here.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Edit: modern fast way is to use <code>a1.SequenceEquals(a2)</code></p>
<p>User <em>gil</em> suggested unsafe code which spawned this solution:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Copyright (c) 2008-2013 Hafthor Stefansson</span>
<span class="c1">// Distributed under the MIT/X11 software license</span>
<span class="c1">// Ref: http://www.opensource.org/licenses/mit-license.php.</span>
<span class="k">static</span><span class="w"> </span><span class="n">unsafe</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="n">UnsafeCompare</span><span class="p">(</span><span class="n">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">unchecked</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">a1</span><span class="o">==</span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">true</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">a1</span><span class="o">==</span><span class="nb">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">a2</span><span class="o">==</span><span class="nb">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">Length</span>!<span class="p">=</span><span class="n">a2</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="w">    </span><span class="n">fixed</span><span class="w"> </span><span class="p">(</span><span class="n">byte</span><span class="o">*</span><span class="w"> </span><span class="n">p1</span><span class="p">=</span><span class="n">a1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">=</span><span class="n">a2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">byte</span><span class="o">*</span><span class="w"> </span><span class="n">x1</span><span class="p">=</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">x2</span><span class="p">=</span><span class="n">p2</span><span class="p">;</span>
<span class="w">      </span><span class="nb">int</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">a1</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nb">int</span><span class="w"> </span><span class="n">i</span><span class="p">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">l</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">,</span><span class="w"> </span><span class="n">x1</span><span class="o">+</span><span class="p">=</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">x2</span><span class="o">+</span><span class="p">=</span><span class="mi">8</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="n">long</span><span class="o">*</span><span class="p">)</span><span class="n">x1</span><span class="p">)</span><span class="w"> </span>!<span class="p">=</span><span class="w"> </span><span class="o">*</span><span class="p">((</span><span class="n">long</span><span class="o">*</span><span class="p">)</span><span class="n">x2</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">l</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>!<span class="p">=</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="nb">int</span><span class="o">*</span><span class="p">)</span><span class="n">x1</span><span class="p">)</span>!<span class="p">=</span><span class="o">*</span><span class="p">((</span><span class="nb">int</span><span class="o">*</span><span class="p">)</span><span class="n">x2</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">false</span><span class="p">;</span><span class="w"> </span><span class="n">x1</span><span class="o">+</span><span class="p">=</span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="n">x2</span><span class="o">+</span><span class="p">=</span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">l</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>!<span class="p">=</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="n">short</span><span class="o">*</span><span class="p">)</span><span class="n">x1</span><span class="p">)</span>!<span class="p">=</span><span class="o">*</span><span class="p">((</span><span class="n">short</span><span class="o">*</span><span class="p">)</span><span class="n">x2</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">false</span><span class="p">;</span><span class="w"> </span><span class="n">x1</span><span class="o">+</span><span class="p">=</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">x2</span><span class="o">+</span><span class="p">=</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">l</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>!<span class="p">=</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="n">byte</span><span class="o">*</span><span class="p">)</span><span class="n">x1</span><span class="p">)</span><span class="w"> </span>!<span class="p">=</span><span class="w"> </span><span class="o">*</span><span class="p">((</span><span class="n">byte</span><span class="o">*</span><span class="p">)</span><span class="n">x2</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>which does 64-bit based comparison for as much of the array as possible. This
kind of counts on the fact that the arrays start qword aligned. It'll work if
not qword aligned, just not as fast as if it were.</p>
<p>It performs about seven timers faster than the simple <code>for</code> loop. Using the J#
library performed equivalently to the original <code>for</code> loop. Using
.SequenceEqual runs around seven times slower; I think just because it is
using IEnumerator.MoveNext. I imagine LINQ-based solutions being at least that
slow or worse.</p>
<p><br></p>
<h3>Suggest</h3>
<p>P/Invoke powers activate!</p>
<div class="code"><pre class="code literal-block"><span class="k">[DllImport("msvcrt.dll", CallingConvention=CallingConvention.Cdecl)]</span>
<span class="na">static extern int memcmp(byte[] b1, byte[] b2, long count);</span>

<span class="na">static bool ByteArrayCompare(byte[] b1, byte[] b2)</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">// Validate buffers are the same length.</span>
<span class="w">    </span><span class="na">// This also ensures that the count does not exceed the length of either buffer.  </span>
<span class="w">    </span><span class="na">return b1.Length</span><span class="w"> </span><span class="o">=</span><span class="s">= b2.Length &amp;&amp; memcmp(b1, b2, b1.Length) == 0</span><span class="c1">;</span>
<span class="na">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/cocoa-what-s-the-difference-between-the-frame-and-the-bounds/" class="u-url">Cocoa: What's the difference between the frame and the bounds?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/cocoa-what-s-the-difference-between-the-frame-and-the-bounds/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:30:56+08:00" itemprop="datePublished" title="2023-02-17 22:30">2023-02-17 22:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><code>UIView</code> and its subclasses all have the properties <code>frame</code> and <code>bounds</code>.
What's the difference?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <strong>bounds</strong> of an UIView is the rectangle, expressed as a location (x,y)
and size (width,height) relative to its own coordinate system (0,0).</p>
<p>The <strong>frame</strong> of an UIView is the rectangle, expressed as a location (x,y) and
size (width,height) relative to the superview it is contained within.</p>
<p>So, imagine a view that has a size of 100x100 (width x height) positioned at
25,25 (x,y) of its superview. The following code prints out this view's bounds
and frame:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// This method is in the view controller of the superview</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">];</span>

<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"bounds.origin.x: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"bounds.origin.y: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"bounds.size.width: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"bounds.size.height: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>

<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"frame.origin.x: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"frame.origin.y: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"frame.size.width: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">);</span>
<span class="w">    </span><span class="n">NSLog</span><span class="p">(</span><span class="s">@"frame.size.height: %f"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>And the output of this code is:</p>
<div class="code"><pre class="code literal-block">bounds.origin.x: 0
bounds.origin.y: 0
bounds.size.width: 100
bounds.size.height: 100

frame.origin.x: 25
frame.origin.y: 25
frame.size.width: 100
frame.size.height: 100
</pre></div>

<p>So, we can see that in both cases, the width and the height of the view is the
same regardless of whether we are looking at the bounds or frame. What is
different is the x,y positioning of the view. In the case of the bounds, the x
and y coordinates are at 0,0 as these coordinates are relative to the view
itself. However, the frame x and y coordinates are relative to the position of
the view within the parent view (which earlier we said was at 25,25).</p>
<p>There is also a great presentation that covers UIViews. See slides 1-20 which
not only explain the difference between frames and bounds but also show visual
examples.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>Short Answer</h2>
<p><strong>frame</strong> = a view's location and size using the <strong>parent view's coordinate
system</strong></p>
<ul>
<li>Important for: placing the view in the parent</li>
</ul>
<p><strong>bounds</strong> = a view's location and size using <strong>its own coordinate system</strong></p>
<ul>
<li>Important for: placing the view's content or subviews within itself</li>
</ul>
<hr>
<h2>Detailed Answer</h2>
<p>To help me remember <strong>frame</strong> , I think of <strong>a picture frame on a wall</strong>. The
picture frame is like the border of a view. I can hang the picture anywhere I
want on the wall. In the same way, I can put a view anywhere I want inside a
parent view (also called a superview). The parent view is like the wall. The
origin of the coordinate system in iOS is the top left. We can put our view at
the origin of the superview by setting the view frame's x-y coordinates to (0,
0), which is like hanging our picture in the very top left corner of the wall.
To move it right, increase x, to move it down increase y.</p>
<p>To help me remember <strong>bounds</strong> , I think of <strong>a basketball court</strong> where
sometimes <strong>the basketball gets knocked out of bounds</strong>. You are dribbling the
ball all over the basketball court, but you don't really care where the court
itself is. It could be in a gym, or outside at a high school, or in front of
your house. It doesn't matter. You just want to play basketball. In the same
way, the coordinate system for a view's bounds only cares about the view
itself. It doesn't know anything about where the view is located in the parent
view. The bounds' origin (point (0, 0) by default) is the top left corner of
the view. Any subviews that this view has are laid out in relation to this
point. It is like taking the basketball to the front left corner of the court.</p>
<p>Now the confusion comes when you try to compare frame and bounds. It actually
isn't as bad as it seems at first, though. Let's use some pictures to help us
understand.</p>
<h3>Frame vs Bounds</h3>
<p>In the first picture on the left we have a view that is located at the top
left of its parent view. <strong>The yellow rectangle represents the view's frame.</strong>
On the right we see the view again but this time the parent view is not shown.
That's because the bounds don't know about the parent view. <strong>The green
rectangle represents the view's bounds.</strong> The <strong>red dot</strong> in both images
represents the <strong>origin</strong> of the frame or bounds.</p>
<div class="code"><pre class="code literal-block">Frame
    origin = (0, 0)
    width = 80
    height = 130

Bounds 
    origin = (0, 0)
    width = 80
    height = 130
</pre></div>

<p><img alt="enter image description here" src="images/SI1lH.png"></p>
<p>So the frame and bounds were exactly the same in that picture. Let's look at
an example where they are different.</p>
<div class="code"><pre class="code literal-block">Frame
    origin = (40, 60)  // That is, x=40 and y=60
    width = 80
    height = 130

Bounds 
    origin = (0, 0)
    width = 80
    height = 130
</pre></div>

<p><img alt="enter image description here" src="images/SGdGA.png"></p>
<p>So you can see that changing the x-y coordinates of the frame moves it in the
parent view. But the content of the view itself still looks exactly the same.
The bounds have no idea that anything is different.</p>
<p>Up to now the width and height of both the frame and the bounds have been
exactly the same. That isn't always true, though. Look what happens if we
rotate the view 20 degrees clockwise. (Rotation is done using transforms. See
the the documentation and these view and layer examples for more information.)</p>
<div class="code"><pre class="code literal-block">Frame
    origin = (20, 52)  // These are just rough estimates.
    width = 118
    height = 187

Bounds 
    origin = (0, 0)
    width = 80
    height = 130
</pre></div>

<p><img alt="enter image description here" src="images/kBHgE.png"></p>
<p>You can see that the bounds are still the same. They still don't know anything
has happened! The frame values have all changed, though.</p>
<p>Now it is a little easier to see the difference between frame and bounds,
isn't it? The article You Probably Don't Understand frames and bounds defines
a view frame as</p>
<blockquote>
<p>...the smallest bounding box of that view with respect to it’s parents
coordinate system, including any transformations applied to that view.</p>
</blockquote>
<p>It is important to note that if you transform a view, then the frame becomes
undefined. So actually, the yellow frame that I drew around the rotated green
bounds in the image above never actually exists. That means if you rotate,
scale or do some other transformation then you shouldn't use the frame values
any more. You can still use the bounds values, though. The Apple docs warn:</p>
<blockquote>
<p><strong>Important:</strong> If a view’s <code>transform</code> property does not contain the
identity transform, the frame of that view is undefined and so are the
results of its autoresizing behaviors.</p>
</blockquote>
<p>Rather unfortunate about the autoresizing.... There is something you can do,
though.</p>
<p>The Apple docs state:</p>
<blockquote>
<p>When modifying the <code>transform</code> property of your view, all transformations
are performed relative to the center point of the view.</p>
</blockquote>
<p>So if you do need to move a view around in the parent after a transformation
has been done, you can do it by changing the <code>view.center</code> coordinates. Like
<code>frame</code>, <code>center</code> uses the coordinate system of the parent view.</p>
<p>Ok, let's get rid of our rotation and focus on the bounds. So far the bounds
origin has always stayed at (0, 0). It doesn't have to, though. What if our
view has a large subview that is too big to display all at once? We'll make it
a <code>UIImageView</code> with a large image. Here is our second picture from above
again, but this time we can see what the whole content of our view's subview
would look like.</p>
<div class="code"><pre class="code literal-block">Frame
    origin = (40, 60)
    width = 80
    height = 130

Bounds 
    origin = (0, 0)
    width = 80
    height = 130
</pre></div>

<p><img alt="enter image description here" src="images/71kvH.png"></p>
<p>Only the top left corner of the image can fit inside the view's bounds. Now
look what happens if we change the bounds' origin coordinates.</p>
<div class="code"><pre class="code literal-block">Frame
    origin = (40, 60)
    width = 80
    height = 130

Bounds 
    origin = (280, 70)
    width = 80
    height = 130
</pre></div>

<p><img alt="enter image description here" src="images/4izhy.png"></p>
<p>The frame hasn't moved in the superview but the content inside the frame has
changed because the origin of the bounds rectangle starts at a different part
of the view. This is the whole idea behind a <code>UIScrollView</code> and it's
subclasses (for example, a <code>UITableView</code>). See Understanding UIScrollView for
more explanation.</p>
<h3>When to use frame and when to use bounds</h3>
<p>Since <code>frame</code> relates a view's location in its parent view, you use it when
you are making <strong>outward changes</strong> , like changing its width or finding the
distance between the view and the top of its parent view.</p>
<p>Use the <code>bounds</code> when you are making <strong>inward changes</strong> , like drawing things
or arranging subviews within the view. Also use the bounds to get the size of
the view if you have done some transfomation on it.</p>
<h3>Articles for further research:</h3>
<p><strong>Apple docs</strong></p>
<ul>
<li>View Geometry</li>
<li>Views</li>
<li>View and Window Architecture</li>
</ul>
<p><strong>Related StackOverflow questions</strong></p>
<ul>
<li>UIView frame, bounds and center</li>
<li>UIView's frame, bounds, center, origin, when to use what?</li>
<li>"Incorrect" frame / window size after re-orientation in iPhone</li>
</ul>
<p><strong>Other resources</strong></p>
<ul>
<li>You Probably Don't Understand frames and bounds</li>
<li>iOS Fundamentals: Frames, Bounds, and CGGeometry</li>
<li>CS193p Lecture 5 - Views, Drawing, Animation</li>
</ul>
<h3>Practice yourself</h3>
<p>In addition to reading the above articles, it helps me a lot to make a test
app. You might want to try to do something similar. (I got the idea from this
video course but unfortunately it isn't free.)</p>
<p><img alt="enter image description here" src="images/C09vT.png"></p>
<p>Here is the code for your reference:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">UIKit</span>

<span class="k">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>


    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">myView</span><span class="p">:</span> <span class="n">UIView</span><span class="err">!</span>

    <span class="o">//</span> <span class="n">Labels</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameX</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameY</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameWidth</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameHeight</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsX</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsY</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsWidth</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsHeight</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">centerX</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">centerY</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">rotation</span><span class="p">:</span> <span class="n">UILabel</span><span class="err">!</span>

    <span class="o">//</span> <span class="n">Sliders</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameXSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameYSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameWidthSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">frameHeightSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsXSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsYSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsWidthSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">boundsHeightSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">centerXSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">centerYSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>
    <span class="nd">@IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="n">rotationSlider</span><span class="p">:</span> <span class="n">UISlider</span><span class="err">!</span>

    <span class="o">//</span> <span class="n">Slider</span> <span class="n">actions</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">frameXSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">frameXSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">frameYSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">frameYSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">frameWidthSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">frameWidthSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">frameHeightSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">frameHeightSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">boundsXSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">boundsXSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">boundsYSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">boundsYSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">boundsWidthSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">boundsWidthSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">boundsHeightSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">boundsHeightSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">centerXSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">centerXSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">centerYSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">centerYSlider</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nd">@IBAction</span> <span class="n">func</span> <span class="n">rotationSliderChanged</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">rotation</span> <span class="o">=</span> <span class="n">CGAffineTransform</span><span class="p">(</span><span class="n">rotationAngle</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">rotationSlider</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
        <span class="n">myView</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">rotation</span>
        <span class="n">updateLabels</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">private</span> <span class="n">func</span> <span class="n">updateLabels</span><span class="p">()</span> <span class="p">{</span>

        <span class="n">frameX</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"frame x = \(Int(myView.frame.origin.x))"</span>
        <span class="n">frameY</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"frame y = \(Int(myView.frame.origin.y))"</span>
        <span class="n">frameWidth</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"frame width = \(Int(myView.frame.width))"</span>
        <span class="n">frameHeight</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"frame height = \(Int(myView.frame.height))"</span>
        <span class="n">boundsX</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"bounds x = \(Int(myView.bounds.origin.x))"</span>
        <span class="n">boundsY</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"bounds y = \(Int(myView.bounds.origin.y))"</span>
        <span class="n">boundsWidth</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"bounds width = \(Int(myView.bounds.width))"</span>
        <span class="n">boundsHeight</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"bounds height = \(Int(myView.bounds.height))"</span>
        <span class="n">centerX</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"center x = \(Int(myView.center.x))"</span>
        <span class="n">centerY</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"center y = \(Int(myView.center.y))"</span>
        <span class="n">rotation</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">"rotation = \((rotationSlider.value))"</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/purge-or-recreate-a-ruby-on-rails-database/" class="u-url">Purge or recreate a Ruby on Rails database</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/purge-or-recreate-a-ruby-on-rails-database/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:29:36+08:00" itemprop="datePublished" title="2023-02-17 22:29">2023-02-17 22:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a dev Ruby on Rails database full of data. I want to delete everything
and rebuild the database. I'm thinking of using something like:</p>
<div class="code"><pre class="code literal-block">rake db:recreate
</pre></div>

<p>Is this possible?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I know two ways to do this:</p>
<p>This will reset your database and reload your current schema with all:</p>
<div class="code"><pre class="code literal-block">rake db:reset db:migrate
</pre></div>

<p>This will destroy your db and then create it and then migrate your current
schema:</p>
<div class="code"><pre class="code literal-block">rake db:drop db:create db:migrate
</pre></div>

<p>All data will be lost in both scenarios.</p>
<p><br></p>
<h3>Suggest</h3>
<p>On Rails 4, all needed is</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="w"> </span><span class="n">rake</span><span class="w"> </span><span class="n">db</span><span class="p">:</span><span class="n">schema</span><span class="p">:</span><span class="nb">load</span>
</pre></div>

<p>That would delete the entire contents on your DB and recreate the schema from
your schema.rb file, without having to apply all migrations one by one.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1014.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1012.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
