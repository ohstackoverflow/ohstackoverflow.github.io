<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 258) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-258.html">
<link rel="prev" href="index-259.html" type="text/html">
<link rel="next" href="index-257.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-gravity-and-layout-gravity-in-android/" class="u-url">What is the difference between gravity and layout_gravity in Android?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-gravity-and-layout-gravity-in-android/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:18:11+08:00" itemprop="datePublished" title="2023-02-17 02:18">2023-02-17 02:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I know we can set the following values to the <strong><code>android:gravity</code></strong> and
<strong><code>android:layout_gravity</code></strong> properties:</p>
<ol>
<li><code>center</code></li>
<li><code>center_vertical</code></li>
<li>
<code>center_horizontal</code>, etc.</li>
</ol>
<p>But I am confused regarding both of these.</p>
<p>What is the difference between the usage of <code>android:gravity</code> and
<code>android:layout_gravity</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Their names should help you:</p>
<ul>
<li>
<code>android:gravity</code> sets the gravity of the contents (i.e. its subviews) of the <code>View</code> it's used on. </li>
<li>
<code>android:layout_gravity</code> sets the gravity of the <code>View</code> or <code>Layout</code> relative to its parent. </li>
</ul>
<p>And an example is here.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Inside - Outside</strong></p>
<ul>
<li>
<code>gravity</code> arranges the content <em>inside</em> the view. </li>
<li>
<code>lay **out** _gravity</code> arranges the view's position <em>outside</em> of itself.</li>
</ul>
<p>Sometimes it helps to see a picture, too. The green and blue are <code>TextViews</code>
and the other two background colors are <code>LinearLayouts</code>.</p>
<p><img alt="enter image description here" src="images/nymDt.png"></p>
<h2>Notes</h2>
<ul>
<li>The <code>layout_gravity</code> does not work for views in a <code>RelativeLayout</code>. Use it for views in a <code>LinearLayout</code> or <code>FrameLayout</code>. See my supplemental answer for more details.</li>
<li>The view's width (or height) has to be greater than its content. Otherwise <code>gravity</code> won't have any effect. Thus, <code>wrap_content</code> and <code>gravity</code> are meaningless together.</li>
<li>The view's width (or height) has to be less than the parent. Otherwise <code>layout_gravity</code> won't have any effect. Thus, <code>match_parent</code> and <code>layout_gravity</code> are meaningless together.</li>
<li>The <code>layout_gravity=center</code> looks the same as <code>layout_gravity=center_horizontal</code> here because they are in a vertical linear layout. You can't center vertically in this case, so <code>layout_gravity=center</code> only centers horizontally.</li>
<li>This answer only dealt with setting <code>gravity</code> and <code>layout_gravity</code> on the views within a layout. To see what happens when you set the <code>gravity</code> of the of the parent layout itself, check out the supplemental answer that I referred to above. (Summary: <code>gravity</code> doesn't work well on a <code>RelativeLayout</code> but can be useful with a <code>LinearLayout</code>.)</li>
</ul>
<p><em>So remember, <strong>layout</strong> _gravity arranges a view in its <strong>layout</strong>. Gravity
arranges the content inside the view.</em></p>
<h2>xml</h2>
<p>Here is the xml for the above image for your reference:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="w"> </span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;LinearLayout</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">"0dp"</span>
<span class="w">        </span><span class="na">android:layout_weight=</span><span class="s">"1"</span>
<span class="w">        </span><span class="na">android:background=</span><span class="s">"#e3e2ad"</span>
<span class="w">        </span><span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="w"> </span><span class="nt">&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="w">            </span><span class="na">android:layout_gravity=</span><span class="s">"center_horizontal"</span>
<span class="w">            </span><span class="na">android:textSize=</span><span class="s">"24sp"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"gravity="</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#bcf5b1"</span>
<span class="w">            </span><span class="na">android:gravity=</span><span class="s">"left"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"left"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#aacaff"</span>
<span class="w">            </span><span class="na">android:gravity=</span><span class="s">"center_horizontal"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"center_horizontal"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#bcf5b1"</span>
<span class="w">            </span><span class="na">android:gravity=</span><span class="s">"right"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"right"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#aacaff"</span>
<span class="w">            </span><span class="na">android:gravity=</span><span class="s">"center"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"center"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;/LinearLayout&gt;</span>

<span class="w">    </span><span class="nt">&lt;LinearLayout</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">"0dp"</span>
<span class="w">        </span><span class="na">android:layout_weight=</span><span class="s">"1"</span>
<span class="w">        </span><span class="na">android:background=</span><span class="s">"#d6c6cd"</span>
<span class="w">        </span><span class="na">android:orientation=</span><span class="s">"vertical"</span><span class="w"> </span><span class="nt">&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="w">            </span><span class="na">android:layout_gravity=</span><span class="s">"center_horizontal"</span>
<span class="w">            </span><span class="na">android:textSize=</span><span class="s">"24sp"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"layout_gravity="</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:layout_gravity=</span><span class="s">"left"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#bcf5b1"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"left"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:layout_gravity=</span><span class="s">"center_horizontal"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#aacaff"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"center_horizontal"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:layout_gravity=</span><span class="s">"right"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#bcf5b1"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"right"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;TextView</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"200dp"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"40dp"</span>
<span class="w">            </span><span class="na">android:layout_gravity=</span><span class="s">"center"</span>
<span class="w">            </span><span class="na">android:background=</span><span class="s">"#aacaff"</span>
<span class="w">            </span><span class="na">android:text=</span><span class="s">"center"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;/LinearLayout&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

<h2>Related</h2>
<ul>
<li>Difference between a View's Padding and Margin</li>
<li>Match_parent vs wrap_content</li>
<li>How to set both gravity and layout gravity of a LinearLayout programatically</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/virtual-member-call-in-a-constructor/" class="u-url">Virtual member call in a constructor</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/virtual-member-call-in-a-constructor/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:17:44+08:00" itemprop="datePublished" title="2023-02-17 02:17">2023-02-17 02:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm getting a warning from ReSharper about a call to a virtual member from my
objects constructor.</p>
<p>Why would this be something not to do?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>When an object written in C# is constructed, what happens is that the
initializers run in order from the most derived class to the base class, and
then constructors run in order from the base class to the most derived class
(see Eric Lippert's blog for details as to why this is).</p>
<p>Also in .NET objects do not change type as they are constructed, but start out
as the most derived type, with the method table being for the most derived
type. This means that virtual method calls always run on the most derived
type.</p>
<p>When you combine these two facts you are left with the problem that if you
make a virtual method call in a constructor, and it is not the most derived
type in its inheritance hierarchy, that it will be called on a class whose
constructor has not been run, and therefore may not be in a suitable state to
have that method called.</p>
<p>This problem is, of course, mitigated if you mark your class as sealed to
ensure that it is the most derived type in the inheritance hierarchy - in
which case it is perfectly safe to call the virtual method.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In order to answer your question, consider this question: what will the below
code print out when the <code>Child</code> object is instantiated?</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Parent</span>
{
    <span class="n">public</span> <span class="n">Parent</span>()
    {
        <span class="n">DoSomething</span>();
    }

    <span class="n">protected</span> <span class="n">virtual</span> <span class="n">void</span> <span class="n">DoSomething</span>() 
    {
    }
}

<span class="k">class</span> <span class="n">Child</span> : <span class="n">Parent</span>
{
    <span class="nb">private</span> <span class="n">string</span> <span class="n">foo</span>;

    <span class="n">public</span> <span class="n">Child</span>() 
    { 
        <span class="n">foo</span> = <span class="s">"HELLO"</span>; 
    }

    <span class="n">protected</span> <span class="n">override</span> <span class="n">void</span> <span class="n">DoSomething</span>()
    {
        <span class="n">Console</span>.<span class="n">WriteLine</span>(<span class="n">foo</span>.<span class="n">ToLower</span>()); //<span class="n">NullReferenceException</span>!?!
    }
}
</pre></div>

<p>The answer is that in fact a <code>NullReferenceException</code> will be thrown, because
<code>foo</code> is null. <strong>An object's base constructor is called before its own
constructor</strong>. By having a <code>virtual</code> call in an object's constructor you are
introducing the possibility that inheriting objects will execute code before
they have been fully initialized.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-i-concatenate-multiple-mysql-rows-into-one-field/" class="u-url">Can I concatenate multiple MySQL rows into one field?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-i-concatenate-multiple-mysql-rows-into-one-field/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:17:01+08:00" itemprop="datePublished" title="2023-02-17 02:17">2023-02-17 02:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Using <code>MySQL</code>, I can do something like:</p>
<div class="code"><pre class="code literal-block">SELECT hobbies FROM peoples_hobbies WHERE person_id = 5;
</pre></div>

<p><strong>My Output:</strong></p>
<div class="code"><pre class="code literal-block">shopping
fishing
coding
</pre></div>

<p>but instead I just want 1 row, 1 col:</p>
<p><strong>Expected Output:</strong></p>
<div class="code"><pre class="code literal-block">shopping, fishing, coding
</pre></div>

<p>The reason is that I'm selecting multiple values from multiple tables, and
after all the joins I've got a lot more rows than I'd like.</p>
<p>I've looked for a function on MySQL Doc and it doesn't look like the <code>CONCAT</code>
or <code>CONCAT_WS</code> functions accept result sets.</p>
<p>So does anyone here know how to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use <code>GROUP_CONCAT</code>:</p>
<div class="code"><pre class="code literal-block">SELECT person_id,
   GROUP_CONCAT(hobbies SEPARATOR ', ')
FROM peoples_hobbies
GROUP BY person_id;
</pre></div>

<p>As Ludwig stated in his comment, you can add the <code>DISTINCT</code> operator to avoid
duplicates:</p>
<div class="code"><pre class="code literal-block">SELECT person_id,
   GROUP_CONCAT(DISTINCT hobbies SEPARATOR ', ')
FROM peoples_hobbies
GROUP BY person_id;
</pre></div>

<p>As Jan stated in their comment, you can also sort the values before imploding
it using <code>ORDER BY</code>:</p>
<div class="code"><pre class="code literal-block">SELECT person_id, 
       GROUP_CONCAT(hobbies ORDER BY hobbies ASC SEPARATOR ', ')
FROM peoples_hobbies
GROUP BY person_id;
</pre></div>

<p>As Dag stated in his comment, there is a 1024 byte limit on the result. To
solve this, run this query before your query:</p>
<div class="code"><pre class="code literal-block">SET group_concat_max_len = 2048;
</pre></div>

<p>Of course, you can change <code>2048</code> according to your needs. To calculate and
assign the value:</p>
<div class="code"><pre class="code literal-block">SET group_concat_max_len = CAST(
                     (SELECT SUM(LENGTH(hobbies)) + COUNT(*) * LENGTH(', ')
                           FROM peoples_hobbies
                           GROUP BY person_id) AS UNSIGNED);
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Have a look at <code>GROUP_CONCAT</code> if your MySQL version (4.1) supports it. See the
documentation for more details.</p>
<p>It would look something like:</p>
<div class="code"><pre class="code literal-block">  SELECT GROUP_CONCAT(hobbies SEPARATOR ', ') 
  FROM peoples_hobbies 
  WHERE person_id = 5 
  GROUP BY 'all';
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-259.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-257.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
