<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1015) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1015.html">
<link rel="prev" href="index-1016.html" type="text/html">
<link rel="next" href="index-1014.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-format-an-inline-code-in-confluence/" class="u-url">How to format an inline code in Confluence?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-format-an-inline-code-in-confluence/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:35:29+08:00" itemprop="datePublished" title="2023-02-17 22:35">2023-02-17 22:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I format an <code>inline code</code> in Confluence <code>like this</code>? I mean, not a
separate code block, but just inline <code>classname</code>, for example.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To insert inline monospace font in Confluence, surround the text in double
curly-braces.</p>
<p>This is an <code>{{example}}</code>.</p>
<p>If you're using Confluence 4.x or higher, you can also just select the
"Preformatted" option from the paragraph style menu. Please note that will
apply to the <em>entire</em> line.</p>
<p>Full reference here.</p>
<p><br></p>
<h3>Suggest</h3>
<p>By default Confluence renders monospaced text with transparent background. You
can edit global CSS to add grey color. From Confluence manual:</p>
<ol>
<li>Choose the cog icon at top right of the screen, then choose Confluence Admin.</li>
<li>Choose Stylesheet.</li>
<li>Choose Edit.</li>
<li>Paste your custom CSS into the text field.</li>
<li>Choose Save. </li>
</ol>
<p>Custom CSS for displaying grey background in monospaced blocks:</p>
<div class="code"><pre class="code literal-block"><span class="nt">code</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="n">Consolas</span><span class="p">,</span><span class="w"> </span><span class="n">Menlo</span><span class="p">,</span><span class="w"> </span><span class="n">Monaco</span><span class="p">,</span><span class="w"> </span><span class="n">Lucida</span><span class="w"> </span><span class="n">Console</span><span class="p">,</span><span class="w"> </span><span class="n">Liberation</span><span class="w"> </span><span class="n">Mono</span><span class="p">,</span><span class="w"> </span><span class="n">DejaVu</span><span class="w"> </span><span class="n">Sans</span><span class="w"> </span><span class="n">Mono</span><span class="p">,</span><span class="w"> </span><span class="n">Bitstream</span><span class="w"> </span><span class="n">Vera</span><span class="w"> </span><span class="n">Sans</span><span class="w"> </span><span class="n">Mono</span><span class="p">,</span><span class="w"> </span><span class="n">Courier</span><span class="w"> </span><span class="n">New</span><span class="p">,</span><span class="w"> </span><span class="kc">monospace</span><span class="p">,</span><span class="w"> </span><span class="kc">serif</span><span class="p">;</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#eeeeee</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>If you're using Confluence OnDemand (cloud):</p>
<ol>
<li>Click the cog/gear in the bottom of the sidebar on the left</li>
<li>Select <strong>Look and Feel</strong>
</li>
<li>Click the <strong>Sidebar, Header and Footer</strong> tab</li>
<li>Paste your custom CSS into the <strong>Header</strong> field</li>
<li>Wrap the code in a <code>{style}</code> block</li>
<li>Save</li>
</ol>
<p>Paste the following:</p>
<div class="code"><pre class="code literal-block"><span class="p">{</span><span class="err">style</span><span class="p">}</span>
<span class="nt">code</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="n">Consolas</span><span class="p">,</span><span class="w"> </span><span class="n">Menlo</span><span class="p">,</span><span class="w"> </span><span class="n">Monaco</span><span class="p">,</span><span class="w"> </span><span class="n">Lucida</span><span class="w"> </span><span class="n">Console</span><span class="p">,</span><span class="w"> </span><span class="n">Liberation</span><span class="w"> </span><span class="n">Mono</span><span class="p">,</span><span class="w"> </span><span class="n">DejaVu</span><span class="w"> </span><span class="n">Sans</span><span class="w"> </span><span class="n">Mono</span><span class="p">,</span><span class="w"> </span><span class="n">Bitstream</span><span class="w"> </span><span class="n">Vera</span><span class="w"> </span><span class="n">Sans</span><span class="w"> </span><span class="n">Mono</span><span class="p">,</span><span class="w"> </span><span class="n">Courier</span><span class="w"> </span><span class="n">New</span><span class="p">,</span><span class="w"> </span><span class="kc">monospace</span><span class="p">,</span><span class="w"> </span><span class="kc">serif</span><span class="p">;</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#eeeeee</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">{</span><span class="err">style</span><span class="p">}</span>
</pre></div>

<p>After that you'll get nice and tidy stackoverflow-stylish inline code spans
just by writing <code>{{sometext}}</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-lock-mutex-and-semaphore/" class="u-url">What is the difference between lock, mutex and semaphore?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-lock-mutex-and-semaphore/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:34:54+08:00" itemprop="datePublished" title="2023-02-17 22:34">2023-02-17 22:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've heard these words related to concurrent programming, but what's the
difference between lock, mutex and semaphore?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A lock allows only one thread to enter the part that's locked and the lock is
not shared with any other processes.</p>
<p>A mutex is the same as a lock but it can be system wide (shared by multiple
processes).</p>
<p>A semaphore does the same as a mutex but allows x number of threads to enter,
this can be used for example to limit the number of cpu, io or ram intensive
tasks running at the same time.</p>
<p>For a more detailed post about the differences between mutex and semaphore
read here.</p>
<p>You also have read/write locks that allows either unlimited number of readers
or 1 writer at any given time.</p>
<p><em>The descriptions are from a .NET perspective and might not be 100% accurate
for all OS/Languages.</em></p>
<p><br></p>
<h3>Suggest</h3>
<p>There are a lot of misconceptions regarding these words.</p>
<p>This is from a previous post (https://stackoverflow.com/a/24582076/3163691)
which fits superb here:</p>
<p><strong>1) Critical Section</strong> = User object used for allowing the execution of just
<strong><em>one active thread</em></strong> from many others <strong><em>within one process</em></strong>. The other
non selected threads (@ acquiring this object) are put to <strong><em>sleep</em></strong>.</p>
<p>[No interprocess capability, very primitive object].</p>
<p><strong>2) Mutex Semaphore (aka Mutex)</strong> = Kernel object used for allowing the
execution of just <strong><em>one active thread</em></strong> from many others, <strong><em>among different
processes</em></strong>. The other non selected threads (@ acquiring this object) are put
to <strong><em>sleep</em></strong>. This object supports thread ownership, thread termination
notification, recursion (multiple 'acquire' calls from same thread) and
'priority inversion avoidance'.</p>
<p>[Interprocess capability, very safe to use, a kind of 'high level'
synchronization object].</p>
<p><strong>3) Counting Semaphore (aka Semaphore)</strong> = Kernel object used for allowing
the execution of <strong><em>a group of active threads</em></strong> from many others. The other
non selected threads (@ acquiring this object) are put to <strong><em>sleep</em></strong>.</p>
<p>[Interprocess capability however not very safe to use because it lacks
following 'mutex' attributes: thread termination notification, recursion?,
'priority inversion avoidance'?, etc].</p>
<p><strong>4) And now, talking about 'spinlocks', first some definitions:</strong></p>
<p>Critical Region= A region of memory shared by 2 or more processes.</p>
<p>Lock= A variable whose value allows or denies the entrance to a 'critical
region'. (It could be implemented as a simple 'boolean flag').</p>
<p>Busy waiting= Continuosly testing of a variable until some value appears.</p>
<p>Finally:</p>
<p><strong>Spin-lock (aka Spinlock)</strong> = A <strong><em>lock</em></strong> which uses <strong><em>busy waiting</em></strong>.
(The acquiring of the <strong><em>lock</em></strong> is made by <strong><em>xchg</em></strong> or similar <strong><em>atomic
operations</em></strong> ).</p>
<p>[No thread sleeping, mostly used at kernel level only. Ineffcient for User
level code].</p>
<p>As a last comment, I am not sure but I can bet you some big bucks that the
above first 3 synchronizing objects (#1, #2 and #3) make use of this simple
beast (#4) as part of their implementation.</p>
<p>Have a good day!.</p>
<p><strong><em>References:</em></strong></p>
<p>-Real-Time Concepts for Embedded Systems by Qing Li with Caroline Yao (CMP Books).</p>
<p>-Modern Operating Systems (3rd) by Andrew Tanenbaum (Pearson Education International).</p>
<p>-Programming Applications for Microsoft Windows (4th) by Jeffrey Richter (Microsoft Programming Series).</p>
<p>Also, you can take a look at look at:
https://stackoverflow.com/a/24586803/3163691</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mongodb-relationships-embed-or-reference/" class="u-url">MongoDB relationships: embed or reference?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mongodb-relationships-embed-or-reference/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:34:24+08:00" itemprop="datePublished" title="2023-02-17 22:34">2023-02-17 22:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to design a question structure with some comments. Which relationship
should I use for comments: <code>embed</code> or <code>reference</code>?</p>
<p>A question with some comments, like stackoverflow, would have a structure like
this:</p>
<div class="code"><pre class="code literal-block">Question
    title = 'aaa'
    content = 'bbb'
    comments = ???
</pre></div>

<p>At first, I thought of using embedded comments (I think <code>embed</code> is recommended
in MongoDB), like this:</p>
<div class="code"><pre class="code literal-block">Question
    title = 'aaa'
    content = 'bbb'
    comments = [ { content = 'xxx', createdAt = 'yyy'}, 
                 { content = 'xxx', createdAt = 'yyy'}, 
                 { content = 'xxx', createdAt = 'yyy'} ]
</pre></div>

<p>It is clear, but I'm worried about this case: <strong>If I want to edit a specified
comment, how do I get its content and its question?</strong> There is no <code>_id</code> to let
me find one, nor <code>question_ref</code> to let me find its question. (Is there perhaps
a way to do this without <code>_id</code> and <code>question_ref</code>?)</p>
<p>Do I have to use <code>ref</code> rather than <code>embed</code>? Do I then have to create a new
collection for comments?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This is more an art than a science. The Mongo Documentation on Schemas is a
good reference, but here are some things to consider:</p>
<ul>
<li>Put as much in as possible</li>
</ul>
<p>The joy of a Document database is that it eliminates lots of Joins. Your first
instinct should be to place as much in a single document as you can. Because
MongoDB documents have structure, and because you can efficiently query within
that structure (this means that you can take the part of the document that you
need, so document size shouldn't worry you much) there is no immediate need to
normalize data like you would in SQL. In particular any data that is not
useful apart from its parent document should be part of the same document.</p>
<ul>
<li>Separate data that can be referred to from multiple places into its own collection.</li>
</ul>
<p>This is not so much a "storage space" issue as it is a "data consistency"
issue. If many records will refer to the same data it is more efficient and
less error prone to update a single record and keep references to it in other
places.</p>
<ul>
<li>Document size considerations</li>
</ul>
<p>MongoDB imposes a 4MB (16MB with 1.8) size limit on a single document. In a
world of GB of data this sounds small, but it is also 30 thousand tweets or
250 typical Stack Overflow answers or 20 flicker photos. On the other hand,
this is far more information than one might want to present at one time on a
typical web page. First consider what will make your queries easier. In many
cases concern about document sizes will be premature optimization.</p>
<ul>
<li>Complex data structures:</li>
</ul>
<p>MongoDB can store arbitrary deep nested data structures, but cannot search
them efficiently. If your data forms a tree, forest or graph, you effectively
need to store each node and its edges in a separate document. (Note that there
are data stores specifically designed for this type of data that one should
consider as well)</p>
<p>It has also been pointed out than it is impossible to return a subset of
elements in a document. If you need to pick-and-choose a few bits of each
document, it will be easier to separate them out.</p>
<ul>
<li>Data Consistency</li>
</ul>
<p>MongoDB makes a trade off between efficiency and consistency. The rule is
changes to a single document are <strong>always</strong> atomic, while updates to multiple
documents should never be assumed to be atomic. There is also no way to "lock"
a record on the server (you can build this into the client's logic using for
example a "lock" field). When you design your schema consider how you will
keep your data consistent. Generally, the more that you keep in a document the
better.</p>
<p>For what you are describing, I would embed the comments, and give each comment
an id field with an ObjectID. The ObjectID has a time stamp embedded in it so
you can use that instead of created at if you like.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In general, embed is good if you have one-to-one or one-to-many relationships
between entities, and reference is good if you have many-to-many
relationships.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1016.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1014.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
