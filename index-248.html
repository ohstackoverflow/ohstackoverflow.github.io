<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 248) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-248.html">
<link rel="prev" href="index-249.html" type="text/html">
<link rel="next" href="index-247.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-concurrency-and-parallelism/" class="u-url">What is the difference between concurrency and parallelism?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-concurrency-and-parallelism/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:02:46+08:00" itemprop="datePublished" title="2023-02-17 02:02">2023-02-17 02:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between concurrency and parallelism?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Concurrency</strong> is when two or more tasks can start, run, and complete in
overlapping time <strong>periods</strong>. It doesn't necessarily mean they'll ever both be
running <strong>at the same instant</strong>. For example, <em>multitasking</em> on a single-core
machine.</p>
<p><strong>Parallelism</strong> is when tasks <em>literally</em> run at the same time, e.g., on a
multicore processor.</p>
<hr>
<p>Quoting Sun's <em>Multithreaded Programming Guide</em> :</p>
<ul>
<li>
<p>Concurrency: A condition that exists when at least two threads are making progress. A more generalized form of parallelism that can include time-slicing as a form of virtual parallelism.</p>
</li>
<li>
<p>Parallelism: A condition that arises when at least two threads are executing simultaneously.</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<h2>Why the Confusion Exists</h2>
<p>Confusion exists because dictionary meanings of both these words are almost
the same:</p>
<ul>
<li>
<strong>Concurrent</strong> : existing, happening, or done at the same time(dictionary.com)</li>
<li>
<strong>Parallel</strong> : very similar and often happening at the same time(merriam webster).</li>
</ul>
<p>Yet the way they are used in computer science and programming are quite
different. Here is my interpretation:</p>
<ul>
<li>
<strong>Concurrency</strong> : Interruptability</li>
<li>
<strong>Parallelism</strong> : Independentability</li>
</ul>
<p><strong>So what do I mean by above definitions?</strong></p>
<p>I will clarify with a real world analogy. Let’s say you have to get done 2
very important tasks in one day:</p>
<ol>
<li>Get a passport</li>
<li>Get a presentation done</li>
</ol>
<p>Now, the problem is that task-1 requires you to go to an extremely
bureaucratic government office that makes you wait for 4 hours in a line to
get your passport. Meanwhile, task-2 is required by your office, and it is a
critical task. Both must be finished on a specific day.</p>
<h3>Case 1: Sequential Execution</h3>
<p>Ordinarily, you will drive to passport office for 2 hours, wait in the line
for 4 hours, get the task done, drive back two hours, go home, stay awake 5
more hours and get presentation done.</p>
<h3>Case 2: Concurrent Execution</h3>
<p>But you’re smart. You plan ahead. You carry a laptop with you, and while
waiting in the line, you start working on your presentation. This way, once
you get back at home, you just need to work 1 extra hour instead of 5.</p>
<p>In this case, both tasks are done by you, just in pieces. You interrupted the
passport task while waiting in the line and worked on presentation. When your
number was called, you interrupted presentation task and switched to passport
task. The saving in time was essentially possible due to interruptability of
both the tasks.</p>
<p>Concurrency, IMO, can be understood as the "isolation" property in ACID. Two
database transactions are considered isolated if sub-transactions can be
performed in each and any interleaved way and the final result is same as if
the two tasks were done sequentially. Remember, that for both the passport and
presentation tasks, <em>you are the sole executioner</em>.</p>
<h3>Case 3: Parallel Execution</h3>
<p>Now, since you are such a smart fella, you’re obviously a higher-up, and you
have got an assistant. So, before you leave to start the passport task, you
call him and tell him to prepare first draft of the presentation. You spend
your entire day and finish passport task, come back and see your mails, and
you find the presentation draft. He has done a pretty solid job and with some
edits in 2 more hours, you finalize it.</p>
<p>Now since, your assistant is just as smart as you, he was able to work on it
<em>independently</em> , without needing to constantly ask you for clarifications.
Thus, due to the independentability of the tasks, they were performed at the
same time by <em>two different executioners</em>.</p>
<p><em>Still with me? Alright...</em></p>
<h3>Case 4: Concurrent But Not Parallel</h3>
<p>Remember your passport task, where you have to wait in the line? Since it is
<strong>your</strong> passport, your assistant cannot wait in line for you. Thus, the
passport task has <em>interruptability</em> (you can stop it while waiting in the
line, and resume it later when your number is called), but no
<em>independentability</em> (your assistant cannot wait in your stead).</p>
<h3>Case 5: Parallel But Not Concurrent</h3>
<p>Suppose the government office has a security check to enter the premises.
Here, you must remove all electronic devices and submit them to the officers,
and they only return your devices after you complete your task.</p>
<p>In this, case, the passport task is neither <em>independentable</em> nor
<em>interruptible</em>. Even if you are waiting in the line, you cannot work on
something else because you do not have necessary equipment.</p>
<p>Similarly, say the presentation is so highly mathematical in nature that you
require 100% concentration for at least 5 hours. You cannot do it while
waiting in line for passport task, even if you have your laptop with you.</p>
<p>In this case, the presentation task is <em>independentable</em> (either you or your
assistant can put in 5 hours of focused effort), but not <em>interruptible</em>.</p>
<h3>Case 6: Concurrent and Parallel Execution</h3>
<p>Now, say that in addition to assigning your assistant to the presentation, you
also carry a laptop with you to passport task. While waiting in the line, you
see that your assistant has created the first 10 slides in a shared deck. You
send comments on his work with some corrections. Later, when you arrive back
home, instead of 2 hours to finalize the draft, you just need 15 minutes.</p>
<p>This was possible because presentation task has <em>independentability</em> (either
one of you can do it) and <em>interruptability</em> (you can stop it and resume it
later). So you concurrently executed <em>both</em> tasks, and executed the
presentation task in parallel.</p>
<p>Let’s say that, in addition to being overly bureaucratic, the government
office is corrupt. Thus, you can show your identification, enter it, start
waiting in line for your number to be called, bribe a guard and someone else
to hold your position in the line, sneak out, come back before your number is
called, and resume waiting yourself.</p>
<p>In this case, you can perform both the passport and presentation tasks
concurrently and in parallel. You can sneak out, and your position is held by
your assistant. Both of you can then work on the presentation, etc.</p>
<hr>
<h2>Back to Computer Science</h2>
<p>In computing world, here are example scenarios typical of each of these cases:</p>
<ul>
<li>
<strong>Case 1:</strong> Interrupt processing.</li>
<li>
<strong>Case 2:</strong> When there is only one processor, but all executing tasks have wait times due to I/O.</li>
<li>
<strong>Case 3:</strong> Often seen when we are talking about map-reduce or hadoop clusters.</li>
<li>
<strong>Case 4:</strong> I think Case 4 is rare. It’s uncommon for a task to be concurrent but not parallel. But it <em>could</em> happen. For example, suppose your task requires access to a special computational chip that can be accessed through only processor-1. Thus, even if processor-2 is free and processor-1 is performing some other task, the special computation task cannot proceed on processor-2.</li>
<li>
<strong>Case 5:</strong> also rare, but not quite as rare as Case 4. A non-concurrent code can be a critical region protected by mutexes. Once it is started, it <em>must</em> execute to completion. However, two different critical regions can progress simultaneously on two different processors.</li>
<li>
<strong>Case 6:</strong> IMO, most discussions about parallel or concurrent programming are basically talking about Case 6. This is a mix and match of both parallel and concurrent executions.</li>
</ul>
<h2>Concurrency and Go</h2>
<p>If you see why Rob Pike is saying concurrency is better, you have to
understand what the reason is. You have a really long task in which there are
multiple waiting periods where you wait for some external operations like file
read, network download. In his lecture, all he is saying is, “just break up
this long sequential task so that you can do something useful while you wait.”
That is why he talks about different organizations with various gophers.</p>
<p>Now the strength of Go comes from making this breaking really easy with <code>go</code>
keyword and channels. Also, there is excellent underlying support in the
runtime to schedule these goroutines.</p>
<p>But essentially, is concurrency better than parallelism?</p>
<p>Are apples better than oranges?</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/safely-turning-a-json-string-into-an-object/" class="u-url">Safely turning a JSON string into an object</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/safely-turning-a-json-string-into-an-object/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:01:53+08:00" itemprop="datePublished" title="2023-02-17 02:01">2023-02-17 02:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Given a string of JSON data, how can I safely turn that string into a
JavaScript object?</p>
<p>Obviously I can do this unsafely with something like:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eval</span><span class="p">(</span><span class="s2">"("</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">')'</span><span class="p">);</span>
</pre></div>

<p>but that leaves me vulnerable to the JSON string containing other code, which
it seems very dangerous to simply eval.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>JSON.parse(jsonString)</code> is a pure JavaScript approach so long as you can
guarantee a reasonably modern browser.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The jQuery method is now deprecated. Use this method instead:</p>
<div class="code"><pre class="code literal-block">let jsonObject = JSON.parse(jsonString);
</pre></div>

<hr>
<p><em>Original answer using deprecated jQuery functionality</em> :</p>
<p>If you're using jQuery just use:</p>
<div class="code"><pre class="code literal-block">jQuery.parseJSON( jsonString );
</pre></div>

<p>It's exactly what you're looking for (see the jQuery documentation).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/unicodeencodeerror-ascii-codec-can-t-encode-character-u-xa0-in-position-20-ordinal-not-in-range-128/" class="u-url">UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 20: ordinal not in range(128)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/unicodeencodeerror-ascii-codec-can-t-encode-character-u-xa0-in-position-20-ordinal-not-in-range-128/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:01:24+08:00" itemprop="datePublished" title="2023-02-17 02:01">2023-02-17 02:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm having problems dealing with unicode characters from text fetched from
different web pages (on different sites). I am using BeautifulSoup.</p>
<p>The problem is that the error is not always reproducible; it sometimes works
with some pages, and sometimes, it barfs by throwing a <code>UnicodeEncodeError</code>. I
have tried just about everything I can think of, and yet I have not found
anything that works consistently without throwing some kind of Unicode-related
error.</p>
<p>One of the sections of code that is causing problems is shown below:</p>
<div class="code"><pre class="code literal-block"><span class="nv">agent_telno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">agent</span>.<span class="nv">find</span><span class="ss">(</span><span class="s1">'div'</span>,<span class="w"> </span><span class="s1">'agent_contact_number'</span><span class="ss">)</span>
<span class="nv">agent_telno</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">agent_telno</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">agent_telno</span>.<span class="nv">contents</span>[<span class="mi">0</span>]
<span class="nv">p</span>.<span class="nv">agent_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">str</span><span class="ss">(</span><span class="nv">agent_contact</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">agent_telno</span><span class="ss">)</span>.<span class="nv">strip</span><span class="ss">()</span>
</pre></div>

<p>Here is a stack trace produced on SOME strings when the snippet above is run:</p>
<div class="code"><pre class="code literal-block">Traceback (most recent call last):
  File "foobar.py", line 792, in &lt;module&gt;
    p.agent_info = str(agent_contact + ' ' + agent_telno).strip()
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 20: ordinal not in range(128)
</pre></div>

<p>I suspect that this is because some pages (or more specifically, pages from
some of the sites) may be encoded, whilst others may be unencoded. All the
sites are based in the UK and provide data meant for UK consumption - so there
are no issues relating to internalization or dealing with text written in
anything other than English.</p>
<p>Does anyone have any ideas as to how to solve this so that I can CONSISTENTLY
fix this problem?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Read the Python Unicode HOWTO. This error is the very first example.</p>
<p>Do not use <code>str()</code> to convert from unicode to encoded text / bytes.</p>
<p>Instead, use <code>.encode()</code> to encode the string:</p>
<div class="code"><pre class="code literal-block">p.agent_info = u' '.join((agent_contact, agent_telno)).encode('utf-8').strip()
</pre></div>

<p>or work entirely in unicode.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is a classic python unicode pain point! Consider the following:</p>
<div class="code"><pre class="code literal-block">a = u'bats\u00E0'
print a
 =&gt; batsà
</pre></div>

<p>All good so far, but if we call str(a), let's see what happens:</p>
<div class="code"><pre class="code literal-block">str(a)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe0' in position 4: ordinal not in range(128)
</pre></div>

<p>Oh dip, that's not gonna do anyone any good! To fix the error, encode the
bytes explicitly with .encode and tell python what codec to use:</p>
<div class="code"><pre class="code literal-block">a.encode('utf-8')
 =&gt; 'bats\xc3\xa0'
print a.encode('utf-8')
 =&gt; batsà
</pre></div>

<p>Voil\u00E0!</p>
<p>The issue is that when you call str(), python uses the default character
encoding to try and encode the bytes you gave it, which in your case are
sometimes representations of unicode characters. To fix the problem, you have
to tell python how to deal with the string you give it by using
.encode('whatever_unicode'). Most of the time, you should be fine using utf-8.</p>
<p>For an excellent exposition on this topic, see Ned Batchelder's PyCon talk
here: http://nedbatchelder.com/text/unipain.html</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-249.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-247.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
