<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2752) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2752.html">
<link rel="prev" href="index-2753.html" type="text/html">
<link rel="next" href="index-2751.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-detect-when-someone-shakes-an-iphone/" class="u-url">How do I detect when someone shakes an iPhone?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-detect-when-someone-shakes-an-iphone/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T15:20:12+08:00" itemprop="datePublished" title="2023-03-05 15:20">2023-03-05 15:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to react when somebody shakes the iPhone. I don't particularly care how
they shake it, just that it was waved vigorously about for a split second.
Does anyone know how to detect this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In 3.0, there's now an easier way - hook into the new motion events.</p>
<p>The main trick is that you need to have some UIView (not UIViewController)
that you want as firstResponder to receive the shake event messages. Here's
the code that you can use in any UIView to get shake events:</p>
<div class="code"><pre class="code literal-block"><span class="k">@implementation</span> <span class="nc">ShakingView</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">motionEnded:</span><span class="p">(</span><span class="n">UIEventSubtype</span><span class="p">)</span><span class="nv">motion</span><span class="w"> </span><span class="nf">withEvent:</span><span class="p">(</span><span class="bp">UIEvent</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">event</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">subtype</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UIEventSubtypeMotionShake</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Put in code here to handle shake</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">respondsToSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">motionEnded</span><span class="o">:</span><span class="n">withEvent</span><span class="o">:</span><span class="p">)]</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">motionEnded</span><span class="o">:</span><span class="n">motion</span><span class="w"> </span><span class="n">withEvent</span><span class="o">:</span><span class="n">event</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">canBecomeFirstResponder</span>
<span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="k">@end</span>
</pre></div>

<p>You can easily transform any UIView (even system views) into a view that can
get the shake event simply by subclassing the view with only these methods
(and then selecting this new type instead of the base type in IB, or using it
when allocating a view).</p>
<p>In the view controller, you want to set this view to become first responder:</p>
<div class="code"><pre class="code literal-block"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">viewWillAppear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="n">shakeView</span><span class="w"> </span><span class="n">becomeFirstResponder</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewWillAppear</span><span class="o">:</span><span class="n">animated</span><span class="p">];</span>
<span class="p">}</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">viewWillDisappear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="n">shakeView</span><span class="w"> </span><span class="n">resignFirstResponder</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewWillDisappear</span><span class="o">:</span><span class="n">animated</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<p>Don't forget that if you have other views that become first responder from
user actions (like a search bar or text entry field) you'll also need to
restore the shaking view first responder status when the other view resigns!</p>
<p>This method works even if you set applicationSupportsShakeToEdit to NO.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From my Diceshaker application:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Ensures the shake is strong enough on at least two axes before declaring it a shake.</span>
<span class="c1">// "Strong enough" means "greater than a client-supplied threshold" in G's.</span>
<span class="k">static</span><span class="w"> </span><span class="kt">BOOL</span><span class="w"> </span><span class="nf">L0AccelerationIsShaking</span><span class="p">(</span><span class="bp">UIAcceleration</span><span class="o">*</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="bp">UIAcceleration</span><span class="o">*</span><span class="w"> </span><span class="n">current</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">threshold</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span>
<span class="w">        </span><span class="n">deltaX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fabs</span><span class="p">(</span><span class="n">last</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">current</span><span class="p">.</span><span class="n">x</span><span class="p">),</span>
<span class="w">        </span><span class="n">deltaY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fabs</span><span class="p">(</span><span class="n">last</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">current</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>
<span class="w">        </span><span class="n">deltaZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fabs</span><span class="p">(</span><span class="n">last</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">current</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span>
<span class="w">        </span><span class="p">(</span><span class="n">deltaX</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">deltaY</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="p">(</span><span class="n">deltaX</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">deltaZ</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="p">(</span><span class="n">deltaY</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">deltaZ</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">threshold</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">@interface</span> <span class="nc">L0AppDelegate</span> : <span class="bp">NSObject</span><span class="w"> </span><span class="o">&lt;</span><span class="bp">UIApplicationDelegate</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">BOOL</span><span class="w"> </span><span class="n">histeresisExcited</span><span class="p">;</span>
<span class="w">    </span><span class="bp">UIAcceleration</span><span class="o">*</span><span class="w"> </span><span class="n">lastAcceleration</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@property</span><span class="p">(</span><span class="k">retain</span><span class="p">)</span><span class="w"> </span><span class="bp">UIAcceleration</span><span class="o">*</span><span class="w"> </span><span class="n">lastAcceleration</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">L0AppDelegate</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">applicationDidFinishLaunching:</span><span class="p">(</span><span class="bp">UIApplication</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">application</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="bp">UIAccelerometer</span><span class="w"> </span><span class="n">sharedAccelerometer</span><span class="p">].</span><span class="n">delegate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">accelerometer:</span><span class="p">(</span><span class="bp">UIAccelerometer</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">accelerometer</span><span class="w"> </span><span class="nf">didAccelerate:</span><span class="p">(</span><span class="bp">UIAcceleration</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">acceleration</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">lastAcceleration</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">histeresisExcited</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">L0AccelerationIsShaking</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">lastAcceleration</span><span class="p">,</span><span class="w"> </span><span class="n">acceleration</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">histeresisExcited</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>

<span class="w">            </span><span class="cm">/* SHAKE DETECTED. DO HERE WHAT YOU WANT. */</span>

<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">histeresisExcited</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">L0AccelerationIsShaking</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">lastAcceleration</span><span class="p">,</span><span class="w"> </span><span class="n">acceleration</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">histeresisExcited</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">self</span><span class="p">.</span><span class="n">lastAcceleration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acceleration</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// and proper @synthesize and -dealloc boilerplate code</span>

<span class="k">@end</span>
</pre></div>

<p>The histeresis prevents the shake event from triggering multiple times until
the user stops the shake.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/i-get-exception-when-using-thread-sleep-x-or-wait/" class="u-url">I get exception when using Thread.sleep(x) or wait()</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/i-get-exception-when-using-thread-sleep-x-or-wait/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T15:15:54+08:00" itemprop="datePublished" title="2023-03-05 15:15">2023-03-05 15:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have tried to delay - or put to sleep - my Java program, but an error
occurs.</p>
<p>I'm unable to use <code>Thread.sleep(x)</code> or <code>wait()</code>. The same error message
appears:</p>
<blockquote>
<p>unreported exception java.lang.InterruptedException; must be caught or
declared to be thrown.</p>
</blockquote>
<p>Is there any step required before using the <code>Thread.sleep()</code> or <code>wait()</code>
methods?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You have a lot of reading ahead of you. From compiler errors through exception
handling, threading and thread interruptions. But this will do what you want:</p>
<div class="code"><pre class="code literal-block">try {
    Thread.sleep(1000);                 //1000 milliseconds is one second.
} catch(InterruptedException ex) {
    Thread.currentThread().interrupt();
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>As other users have said you should surround your call with a <code>try{...}
catch{...}</code> block. But since Java 1.5 was released, there is TimeUnit class
which do the same as <strong>Thread.sleep(millis)</strong> but is more convenient. You can
pick time unit for sleep operation.</p>
<div class="code"><pre class="code literal-block">try {
    TimeUnit.NANOSECONDS.sleep(100);
    TimeUnit.MICROSECONDS.sleep(100);
    TimeUnit.MILLISECONDS.sleep(100);
    TimeUnit.SECONDS.sleep(100);
    TimeUnit.MINUTES.sleep(100);
    TimeUnit.HOURS.sleep(100);
    TimeUnit.DAYS.sleep(100);
} catch (InterruptedException e) {
    //Handle exception
}
</pre></div>

<p>Also it has additional methods: TimeUnit Oracle Documentation</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/scaffold-of-called-with-a-context-that-does-not-contain-a-scaffold/" class="u-url">Scaffold.of() called with a context that does not contain a Scaffold</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/scaffold-of-called-with-a-context-that-does-not-contain-a-scaffold/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T15:14:27+08:00" itemprop="datePublished" title="2023-03-05 15:14">2023-03-05 15:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>As you can see, my button is inside the <code>Scaffold</code>'s body. But I get this
exception:</p>
<p><em>Scaffold.of() called with a context that does not contain a Scaffold.</em></p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="s1">'package:flutter/material.dart'</span><span class="p">;</span>

<span class="n">void</span> <span class="n">main</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">runApp</span><span class="p">(</span><span class="n">MyApp</span><span class="p">());</span>

<span class="k">class</span> <span class="nc">MyApp</span> <span class="n">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
      <span class="n">title</span><span class="p">:</span> <span class="s1">'Flutter Demo'</span><span class="p">,</span>
      <span class="n">theme</span><span class="p">:</span> <span class="n">ThemeData</span><span class="p">(</span>
        <span class="n">primarySwatch</span><span class="p">:</span> <span class="n">Colors</span><span class="o">.</span><span class="n">blue</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="n">home</span><span class="p">:</span> <span class="n">HomePage</span><span class="p">(),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">HomePage</span> <span class="n">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="p">(</span>
      <span class="n">appBar</span><span class="p">:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">'SnackBar Playground'</span><span class="p">),</span>
      <span class="p">),</span>
      <span class="n">body</span><span class="p">:</span> <span class="n">Center</span><span class="p">(</span>
        <span class="n">child</span><span class="p">:</span> <span class="n">RaisedButton</span><span class="p">(</span>
          <span class="n">color</span><span class="p">:</span> <span class="n">Colors</span><span class="o">.</span><span class="n">pink</span><span class="p">,</span>
          <span class="n">textColor</span><span class="p">:</span> <span class="n">Colors</span><span class="o">.</span><span class="n">white</span><span class="p">,</span>
          <span class="n">onPressed</span><span class="p">:</span> <span class="n">_displaySnackBar</span><span class="p">(</span><span class="n">context</span><span class="p">),</span>
          <span class="n">child</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">'Display SnackBar'</span><span class="p">),</span>
        <span class="p">),</span>
      <span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">_displaySnackBar</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">final</span> <span class="n">snackBar</span> <span class="o">=</span> <span class="n">SnackBar</span><span class="p">(</span><span class="n">content</span><span class="p">:</span> <span class="n">Text</span><span class="p">(</span><span class="s1">'Are you talkin</span><span class="se">\'</span><span class="s1"> to me?'</span><span class="p">));</span>
  <span class="n">Scaffold</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="n">showSnackBar</span><span class="p">(</span><span class="n">snackBar</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>EDIT:</p>
<p>I found another solution to this problem. If we give the <code>Scaffold</code> a key
which is the <code>GlobalKey&lt;ScaffoldState&gt;</code>, we can display the SnackBar as
following without the need to wrap our body within the <code>Builder</code> widget. The
widget which returns the <code>Scaffold</code> should be a Stateful widget though.</p>
<div class="code"><pre class="code literal-block"> _scaffoldKey.currentState.showSnackBar(snackbar);
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>This exception happens because you are using the <code>context</code> of the widget that
instantiated <code>Scaffold</code>. Not the <code>context</code> of a child of <code>Scaffold</code>.</p>
<p>You can solve this by just using a different context :</p>
<div class="code"><pre class="code literal-block"><span class="nt">Scaffold</span><span class="o">(</span>
<span class="w">    </span><span class="nt">appBar</span><span class="o">:</span><span class="w"> </span><span class="nt">AppBar</span><span class="o">(</span>
<span class="w">        </span><span class="nt">title</span><span class="o">:</span><span class="w"> </span><span class="nt">Text</span><span class="o">(</span><span class="s1">'SnackBar Playground'</span><span class="o">),</span>
<span class="w">    </span><span class="o">),</span>
<span class="w">    </span><span class="nt">body</span><span class="o">:</span><span class="w"> </span><span class="nt">Builder</span><span class="o">(</span>
<span class="w">        </span><span class="nt">builder</span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="nt">context</span><span class="o">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="w">            </span><span class="nt">Center</span><span class="o">(</span>
<span class="w">            </span><span class="nt">child</span><span class="o">:</span><span class="w"> </span><span class="nt">RaisedButton</span><span class="o">(</span>
<span class="w">            </span><span class="nt">color</span><span class="o">:</span><span class="w"> </span><span class="nt">Colors</span><span class="p">.</span><span class="nc">pink</span><span class="o">,</span>
<span class="w">            </span><span class="nt">textColor</span><span class="o">:</span><span class="w"> </span><span class="nt">Colors</span><span class="p">.</span><span class="nc">white</span><span class="o">,</span>
<span class="w">            </span><span class="nt">onPressed</span><span class="o">:</span><span class="w"> </span><span class="o">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nt">_displaySnackBar</span><span class="o">(</span><span class="nt">context</span><span class="o">),</span>
<span class="w">            </span><span class="nt">child</span><span class="o">:</span><span class="w"> </span><span class="nt">Text</span><span class="o">(</span><span class="s1">'Display SnackBar'</span><span class="o">),</span>
<span class="w">            </span><span class="o">),</span>
<span class="w">        </span><span class="o">),</span>
<span class="w">    </span><span class="o">),</span>
<span class="o">);</span>
</pre></div>

<p>Note that while we're using <code>Builder</code> here, this is not the only way to obtain
a different <code>BuildContext</code>.</p>
<p>It is also possible to extract the subtree into a different <code>Widget</code> (usually
using <code>extract widget</code> refactor)</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can use a <code>GlobalKey</code>. The only downside is that using GlobalKey might not
be the most efficient way of doing this.</p>
<p>A good thing about this is that you can also pass this key to other custom
widgets class that do not contain any scaffold. See(here)</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">HomePage</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">StatelessWidget</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">final</span><span class="w"> </span><span class="n">_scaffoldKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GlobalKey</span><span class="o">&lt;</span><span class="n">ScaffoldState</span><span class="o">&gt;</span><span class="p">();</span><span class="w"> </span>\\<span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">line</span>
<span class="w">  </span><span class="err">@</span><span class="n">override</span>
<span class="w">  </span><span class="n">Widget</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Scaffold</span><span class="p">(</span>
<span class="w">      </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">_scaffoldKey</span><span class="p">,</span><span class="w">                           </span>\\<span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">line</span>
<span class="w">      </span><span class="n">appBar</span><span class="p">:</span><span class="w"> </span><span class="n">AppBar</span><span class="p">(</span>
<span class="w">        </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span><span class="s1">'SnackBar Playground'</span><span class="p">),</span>
<span class="w">      </span><span class="p">),</span>
<span class="w">      </span><span class="n">body</span><span class="p">:</span><span class="w"> </span><span class="n">Center</span><span class="p">(</span>
<span class="w">        </span><span class="n">child</span><span class="p">:</span><span class="w"> </span><span class="n">RaisedButton</span><span class="p">(</span>
<span class="w">          </span><span class="n">color</span><span class="p">:</span><span class="w"> </span><span class="n">Colors</span><span class="o">.</span><span class="n">pink</span><span class="p">,</span>
<span class="w">          </span><span class="n">textColor</span><span class="p">:</span><span class="w"> </span><span class="n">Colors</span><span class="o">.</span><span class="n">white</span><span class="p">,</span>
<span class="w">          </span><span class="n">onPressed</span><span class="p">:</span><span class="w"> </span><span class="n">_displaySnackBar</span><span class="p">(</span><span class="n">context</span><span class="p">),</span>
<span class="w">          </span><span class="n">child</span><span class="p">:</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span><span class="s1">'Display SnackBar'</span><span class="p">),</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">      </span><span class="p">),</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">_displaySnackBar</span><span class="p">(</span><span class="n">BuildContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">final</span><span class="w"> </span><span class="n">snackBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SnackBar</span><span class="p">(</span><span class="n">content</span><span class="p">:</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span><span class="s1">'Are you talkin</span><span class="se">\'</span><span class="s1"> to me?'</span><span class="p">));</span>
<span class="w">    </span><span class="n">_scaffoldKey</span><span class="o">.</span><span class="n">currentState</span><span class="o">.</span><span class="n">showSnackBar</span><span class="p">(</span><span class="n">snackBar</span><span class="p">);</span><span class="w">   </span>\\<span class="w"> </span><span class="n">edited</span><span class="w"> </span><span class="n">line</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2753.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2751.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
