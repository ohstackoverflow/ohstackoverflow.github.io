<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 812) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-812.html">
<link rel="prev" href="index-813.html" type="text/html">
<link rel="next" href="index-811.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/generate-an-integer-that-is-not-among-four-billion-given-ones/" class="u-url">Generate an integer that is not among four billion given ones</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/generate-an-integer-that-is-not-among-four-billion-given-ones/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T16:37:02+08:00" itemprop="datePublished" title="2023-02-17 16:37">2023-02-17 16:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have been given this interview question:</p>
<blockquote>
<p>Given an input file with four billion integers, provide an algorithm to
generate an integer which is not contained in the file. Assume you have 1 GB
memory. Follow up with what you would do if you have only 10 MB of memory.</p>
</blockquote>
<h4>My analysis:</h4>
<p>The size of the file is 4×109×4 bytes = 16 GB.</p>
<p>We can do external sorting, thus letting us know the range of the integers.</p>
<p>My question is what is the best way to detect the missing integer in the
sorted big integer sets?</p>
<h4>My understanding (after reading all the answers):</h4>
<p>Assuming we are talking about 32-bit integers, there are 232 = 4*109 distinct
integers.</p>
<h2>Case 1: we have 1 GB = 1 * 109 * 8 bits = 8 billion bits memory.</h2>
<h4>Solution:</h4>
<p>If we use one bit representing one distinct integer, it is enough. we don't
need sort.</p>
<h4>Implementation:</h4>
<div class="code"><pre class="code literal-block"><span class="nc">int</span><span class="w"> </span><span class="n">radix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">bitfield</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">byte</span><span class="o">[</span><span class="n">0xffffffff/radix</span><span class="o">]</span><span class="p">;</span>
<span class="n">void</span><span class="w"> </span><span class="n">F</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">FileNotFoundException</span><span class="err">{</span>
<span class="w">    </span><span class="n">Scanner</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Scanner</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="ss">"a.txt"</span><span class="p">));</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="ow">in</span><span class="p">.</span><span class="n">hasNextInt</span><span class="p">())</span><span class="err">{</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">in</span><span class="p">.</span><span class="n">nextInt</span><span class="p">();</span>
<span class="w">        </span><span class="n">bitfield</span><span class="o">[</span><span class="n">n/radix</span><span class="o">]</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="o">%</span><span class="n">radix</span><span class="p">));</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="w"> </span><span class="n">bitfield</span><span class="p">.</span><span class="n">lenght</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">&lt;</span><span class="n">radix</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">bitfield</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">j</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">radix</span><span class="o">+</span><span class="n">j</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<h2>Case 2: 10 MB memory = 10 * 106 * 8 bits = 80 million bits</h2>
<blockquote>
<h4>Solution:</h4>
<p>For all possible 16-bit prefixes, there are 216 number of integers = 65536,
we need 216 * 4 * 8 = 2 million bits. We need build 65536 buckets. For each
bucket, we need 4 bytes holding all possibilities because the worst case is
all the 4 billion integers belong to the same bucket.</p>
<ol>
<li>Build the counter of each bucket through the first pass through the
file.</li>
<li>Scan the buckets, find the first one who has less than 65536 hit.</li>
<li>Build new buckets whose high 16-bit prefixes are we found in step2
through second pass of the file</li>
<li>Scan the buckets built in step3, find the first bucket which doesnt
have a hit.
</li>
</ol>
<p>The code is very similar to above one.</p>
</blockquote>
<p>Conclusion: We decrease memory through increasing file pass.</p>
<hr>
<p>A clarification for those arriving late: The question, as asked, does not say
that there is exactly one integer that is not contained in the file—at least
that's not how most people interpret it. Many comments in the comment thread
<strong>are</strong> about that variation of the task, though. Unfortunately the comment
that <strong>introduced</strong> it to the comment thread was later deleted by its author,
so now it looks like the orphaned replies to it just misunderstood everything.
It's very confusing, sorry.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Assuming that "integer" means 32 bits</strong> : 10 MB of space is more than enough
for you to count how many numbers there are in the input file with any given
16-bit prefix, for all possible 16-bit prefixes in one pass through the input
file. At least one of the buckets will have be hit less than 216 times. Do a
second pass to find of which of the possible numbers in that bucket are used
already.</p>
<p><strong>If it means more than 32 bits, but still of bounded size</strong> : Do as above,
ignoring all input numbers that happen to fall outside the (signed or
unsigned; your choice) 32-bit range.</p>
<p><strong>If "integer" means mathematical integer</strong> : Read through the input once and
keep track of the <del>largest number</del> length of the longest number you've ever
seen. When you're done, output <del>the maximum plus one</del> a random number that
has one more digit. (One of the numbers in the file may be a bignum that takes
more than 10 MB to represent exactly, but if the input is a file, then you can
at least represent the <em>length</em> of anything that fits in it).</p>
<p><br></p>
<h3>Suggest</h3>
<p>Statistically informed algorithms solve this problem using fewer passes than
deterministic approaches.</p>
<p><strong>If very large integers are allowed</strong> then one can generate a number that is
likely to be unique in O(1) time. A pseudo-random 128-bit integer like a GUID
will only collide with one of the existing four billion integers in the set in
less than one out of every 64 billion billion billion cases.</p>
<p><strong>If integers are limited to 32 bits</strong> then one can generate a number that is
likely to be unique in a single pass using much less than 10 MB. The odds that
a pseudo-random 32-bit integer will collide with one of the 4 billion existing
integers is about 93% (4e9 / 2^32). The odds that 1000 pseudo-random integers
will all collide is less than one in 12,000 billion billion billion (odds-of-
one-collision ^ 1000). So if a program maintains a data structure containing
1000 pseudo-random candidates and iterates through the known integers,
eliminating matches from the candidates, it is all but certain to find at
least one integer that is not in the file.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-current-route/" class="u-url">How to get current route</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-current-route/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T16:36:34+08:00" itemprop="datePublished" title="2023-02-17 16:36">2023-02-17 16:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The current docs only talk about getting route params, not the actual route
segments.</p>
<p>For example, if i want to find the parent of current route, how is that
possible?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The new V3 router has a url property.</p>
<div class="code"><pre class="code literal-block">this.router.url === '/login'
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Angular RC4:</p>
<p>You can import <code>Router</code> from <code>@angular/router</code></p>
<p>Then inject it:</p>
<div class="code"><pre class="code literal-block"><span class="n">constructor</span><span class="p">(</span><span class="n">private</span><span class="w"> </span><span class="n">router</span><span class="p">:</span><span class="w"> </span><span class="n">Router</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>
</pre></div>

<p>Then call it's URL parameter:</p>
<div class="code"><pre class="code literal-block">console.log(this.router.url); //  /routename
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/if-else-statement-in-angularjs-templates/" class="u-url">if else statement in AngularJS templates</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/if-else-statement-in-angularjs-templates/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T16:36:07+08:00" itemprop="datePublished" title="2023-02-17 16:36">2023-02-17 16:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to do a condition in an AngularJS template. I fetch a video list from
the Youtube API. Some of the videos are in 16:9 ratio and some are in 4:3
ratio.</p>
<p>I want to make a condition like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">video</span>.<span class="nv">yt</span><span class="mh">$a</span><span class="nv">spectRatio</span><span class="w"> </span><span class="nv">equals</span><span class="w"> </span><span class="nv">widescreen</span><span class="w"> </span><span class="k">then</span><span class="w"> </span>
<span class="w">    </span><span class="nv">element</span><span class="err">'s attr height="270px"</span>
<span class="err">else</span>
<span class="w">    </span><span class="nv">element</span><span class="err">'s attr height="360px"</span>
</pre></div>

<p>I'm iterating the videos using <code>ng-repeat</code>. Have no idea what should I do for
this condition:</p>
<ul>
<li>Add a function in the scope? </li>
<li>Do it in template?</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>Angularjs (versions below 1.1.5) does not provide the <code>if/else</code> functionality
. Following are a few options to consider for what you want to achieve:</p>
<p>( <strong> <em>Jump to the update below (#5) if you are using version 1.1.5 or
greater</em></strong> )</p>
<h4>1. Ternary operator:</h4>
<p>As suggested by @Kirk in the comments, the cleanest way of doing this would be
to use a ternary operator as follows:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;span&gt;</span><span class="cp">{{</span><span class="nv">isLarge</span> <span class="err">?</span> <span class="s1">'video.large'</span> <span class="o">:</span> <span class="s1">'video.small'</span><span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
</pre></div>

<h4>2. <code>ng-switch</code> directive:</h4>
<p>can be used something like the following.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="err">ng-switch</span><span class="w"> </span><span class="na">on=</span><span class="s">"video"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-switch-when=</span><span class="s">"video.large"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="cm">&lt;!-- code to render a large video block--&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="err">ng-switch-default</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="cm">&lt;!-- code to render the regular video block --&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<h4>3. <code>ng-hide</code> / <code>ng-show</code> directives</h4>
<p>Alternatively, you might also use <code>ng-show/ng-hide</code> but using this will
actually render both a large video and a small video element and then hide the
one that meets the <code>ng-hide</code> condition and shows the one that meets <code>ng-show</code>
condition. So on each page you'll actually be rendering two different
elements.</p>
<h4>4. Another option to consider is <code>ng-class</code> directive.</h4>
<p>This can be used as follows.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-class=</span><span class="s">"{large-video: video.large}"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- video block goes here --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>The above basically will add a <code>large-video</code> css class to the div element if
<code>video.large</code> is truthy.</p>
<h4>UPDATE: Angular 1.1.5 introduced the <code>ngIf directive</code>
</h4>
<h4>5. <code>ng-if</code> directive:</h4>
<p>In the versions above <code>1.1.5</code> you can use the <code>ng-if</code> directive. This would
remove the element if the expression provided returns <code>false</code> and re-inserts
the <code>element</code> in the DOM if the expression returns <code>true</code>. Can be used as
follows.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-if=</span><span class="s">"video == video.large"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- code to render a large video block--&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-if=</span><span class="s">"video != video.large"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- code to render the regular video block --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>In the latest version of Angular (as of 1.1.5), they have included a
conditional directive called <code>ngIf</code>. It is different from <code>ngShow</code> and
<code>ngHide</code> in that the elements aren't hidden, but not included in the DOM at
all. They are very useful for components which are costly to create but aren't
used:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-if=</span><span class="s">"video == video.large"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- code to render a large video block--&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-if=</span><span class="s">"video != video.large"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- code to render the regular video block --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-813.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-811.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
