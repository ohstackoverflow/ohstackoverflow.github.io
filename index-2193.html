<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2193) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2193.html">
<link rel="prev" href="index-2194.html" type="text/html">
<link rel="next" href="index-2192.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/react-ignores-for-attribute-of-the-label-element/" class="u-url">React ignores 'for' attribute of the label element</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/react-ignores-for-attribute-of-the-label-element/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T21:54:18+08:00" itemprop="datePublished" title="2023-03-03 21:54">2023-03-03 21:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In React (Facebook's framework), I need to render a label element bound to a
text input using the standard <code>for</code> attribute.</p>
<p>e.g. the following JSX is used:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"test"</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">id=</span><span class="s">"test"</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>

<p>However, this produces HTML missing the required (and standard) <code>for</code>
attribute:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;label&gt;</span>Test<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">id=</span><span class="s">"test"</span><span class="nt">&gt;</span>
</pre></div>

<p>What am I doing wrong?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>for</code> attribute is called <code>htmlFor</code> for consistency with the DOM property
API. If you're using the development build of React, you should have seen a
warning in your console about this.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Yes, for react,</p>
<p><code>for</code> becomes <code>htmlFor</code></p>
<p><code>class</code> becomes <code>className</code></p>
<p>etc.</p>
<p>see full list of how HTML attributes are changed here:</p>
<p>https://facebook.github.io/react/docs/dom-elements.html</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-is-quicksort-better-than-mergesort/" class="u-url">Why is quicksort better than mergesort?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-is-quicksort-better-than-mergesort/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T21:52:49+08:00" itemprop="datePublished" title="2023-03-03 21:52">2023-03-03 21:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I was asked this question during an interview. They're both O(nlogn) and yet
most people use Quicksort instead of Mergesort. Why is that?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Quicksort has O( <em>n</em> 2) worst-case runtime and O( <em>n</em> log <em>n</em> ) average case
runtime. However, it’s superior to merge sort in many scenarios because many
factors influence an algorithm’s runtime, and, when taking them all together,
quicksort wins out.</p>
<p>In particular, the often-quoted runtime of sorting algorithms refers to the
number of comparisons or the number of swaps necessary to perform to sort the
data. This is indeed a good measure of performance, especially since it’s
independent of the underlying hardware design. However, other things – such as
locality of reference (i.e. do we read lots of elements which are probably in
cache?) – also play an important role on current hardware. Quicksort in
particular requires little additional space and exhibits good cache locality,
and this makes it faster than merge sort in many cases.</p>
<p>In addition, it’s very easy to avoid quicksort’s worst-case run time of O( <em>n</em>
2) almost entirely by using an appropriate choice of the pivot – such as
picking it at random (this is an excellent strategy).</p>
<p>In practice, many modern implementations of quicksort (in particular
libstdc++’s <code>std::sort</code>) are actually introsort, whose theoretical worst-case
is O( <em>n</em> log <em>n</em> ), same as merge sort. It achieves this by limiting the
recursion depth, and switching to a different algorithm (heapsort) once it
exceeds log <em>n</em>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>As many people have noted, the average case performance for quicksort is
faster than mergesort. <strong>But</strong> this is only true if you are assuming constant
time to access any piece of memory on demand.</p>
<p>In RAM this assumption is generally not too bad (it is not always true because
of caches, but it is not too bad). However if your data structure is big
enough to live on disk, then quicksort gets <em>killed</em> by the fact that your
average disk does something like 200 random seeks per second. But that same
disk has no trouble reading or writing megabytes per second of data
sequentially. Which is exactly what mergesort does.</p>
<p>Therefore if data has to be sorted on disk, you really, really want to use
some variation on mergesort. (Generally you quicksort sublists, then start
merging them together above some size threshold.)</p>
<p>Furthermore if you have to do <em>anything</em> with datasets of that size, think
hard about how to avoid seeks to disk. For instance this is why it is standard
advice that you drop indexes before doing large data loads in databases, and
then rebuild the index later. Maintaining the index during the load means
constantly seeking to disk. By contrast if you drop the indexes, then the
database can rebuild the index by first sorting the information to be dealt
with (using a mergesort of course!) and then loading it into a BTREE
datastructure for the index. (BTREEs are naturally kept in order, so you can
load one from a sorted dataset with few seeks to disk.)</p>
<p>There have been a number of occasions where understanding how to avoid disk
seeks has let me make data processing jobs take hours rather than days or
weeks.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-do-we-need-monads/" class="u-url">Why do we need monads?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-do-we-need-monads/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T21:50:49+08:00" itemprop="datePublished" title="2023-03-03 21:50">2023-03-03 21:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In my humble opinion the answers to the famous question "What is a monad?",
especially the most voted ones, try to explain what is a monad without clearly
explaining <em>why monads are really necessary</em>. Can they be explained as the
solution to a problem?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Why do we need monads?</h3>
<ol>
<li>We want to program <strong>only using functions</strong>. ("functional programming (FP)" after all).</li>
<li>Then, we have a first big problem. This is a program:</li>
</ol>
<p><code>f(x) = 2 * x</code></p>
<p><code>g(x,y) = x / y</code></p>
<p>How can we say <strong>what is to be executed first</strong>? How can we form an ordered
sequence of functions (i.e. <strong>a program</strong> ) <em>using no more than functions</em>?</p>
<p>Solution: <strong>compose functions</strong>. If you want first <code>g</code> and then <code>f</code>, just
write <code>f(g(x,y))</code>. This way, "the program" is a function as well: <code>main =
f(g(x,y))</code>. OK, but ...</p>
<ol>
<li>More problems: some functions <strong>might fail</strong> (i.e. <code>g(2,0)</code>, divide by 0). We have <strong>no "exceptions"</strong> in FP (an exception is not a function). How do we solve it?</li>
</ol>
<p>Solution: Let's <strong>allow functions to return two kind of things</strong> : instead of
having <code>g : Real,Real -&gt; Real</code> (function from two reals into a real), let's
allow <code>g : Real,Real -&gt; Real | Nothing</code> (function from two reals into (real or
nothing)).</p>
<ol>
<li>But functions should (to be simpler) return only <strong>one thing</strong>. </li>
</ol>
<p>Solution: let's create a new type of data to be returned, a " <strong>boxing type</strong>
" that encloses maybe a real or be simply nothing. Hence, we can have <code>g :
Real,Real -&gt; Maybe Real</code>. OK, but ...</p>
<ol>
<li>What happens now to <code>f(g(x,y))</code>? <code>f</code> is not ready to consume a <code>Maybe Real</code>. And, we don't want to change every function we could connect with <code>g</code> to consume a <code>Maybe Real</code>.</li>
</ol>
<p>Solution: let's <strong>have a special function to "connect"/"compose"/"link"
functions</strong>. That way, we can, behind the scenes, adapt the output of one
function to feed the following one.</p>
<p>In our case: <code>g &gt;&gt;= f</code> (connect/compose <code>g</code> to <code>f</code>). We want <code>&gt;&gt;=</code> to get
<code>g</code>'s output, inspect it and, in case it is <code>Nothing</code> just don't call <code>f</code> and
return <code>Nothing</code>; or on the contrary, extract the boxed <code>Real</code> and feed <code>f</code>
with it. (This algorithm is just the implementation of <code>&gt;&gt;=</code> for the <code>Maybe</code>
type). Also note that <code>&gt;&gt;=</code> must be written <strong>only once</strong> per "boxing type"
(different box, different adapting algorithm).</p>
<ol>
<li>
<p>Many other problems arise which can be solved using this same pattern: 1. Use a "box" to codify/store different meanings/values, and have functions like <code>g</code> that return those "boxed values". 2. Have a composer/linker <code>g &gt;&gt;= f</code> to help connecting <code>g</code>'s output to <code>f</code>'s input, so we don't have to change any <code>f</code> at all.</p>
</li>
<li>
<p>Remarkable problems that can be solved using this technique are: </p>
<ul>
<li>
<p>having a global state that every function in the sequence of functions ("the program") can share: solution <code>StateMonad</code>. </p>
</li>
<li>
<p>We don't like "impure functions": functions that yield <em>different</em> output for <em>same</em> input. Therefore, let's mark those functions, making them to return a tagged/boxed value: <code>IO</code> monad.</p>
</li>
</ul>
</li>
</ol>
<p>Total happiness!</p>
<p><br></p>
<h3>Suggest</h3>
<p>The answer is, of course, <strong>"We don't"</strong>. As with all abstractions, it isn't
necessary.</p>
<p>Haskell does not need a monad abstraction. It isn't necessary for performing
IO in a pure language. The <code>IO</code> type takes care of that just fine by itself.
The existing monadic desugaring of <code>do</code> blocks could be replaced with
desugaring to <code>bindIO</code>, <code>returnIO</code>, and <code>failIO</code> as defined in the <code>GHC.Base</code>
module. (It's not a documented module on hackage, so I'll have to point at its
source for documentation.) So no, there's no need for the monad abstraction.</p>
<p>So if it's not needed, why does it exist? Because it was found that many
patterns of computation form monadic structures. Abstraction of a structure
allows for writing code that works across all instances of that structure. To
put it more concisely - code reuse.</p>
<p>In functional languages, the most powerful tool found for code reuse has been
composition of functions. The good old <code>(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; (a -&gt;
c)</code> operator is exceedingly powerful. It makes it easy to write tiny functions
and glue them together with minimal syntactic or semantic overhead.</p>
<p>But there are cases when the types don't work out quite right. What do you do
when you have <code>foo :: (b -&gt; Maybe c)</code> and <code>bar :: (a -&gt; Maybe b)</code>? <code>foo . bar</code>
doesn't typecheck, because <code>b</code> and <code>Maybe b</code> aren't the same type.</p>
<p>But... it's almost right. You just want a bit of leeway. You want to be able
to treat <code>Maybe b</code> as if it were basically <code>b</code>. It's a poor idea to just flat-
out treat them as the same type, though. That's more or less the same thing as
null pointers, which Tony Hoare famously called the billion-dollar mistake. So
if you can't treat them as the same type, maybe you can find a way to extend
the composition mechanism <code>(.)</code> provides.</p>
<p>In that case, it's important to really examine the theory underlying <code>(.)</code>.
Fortunately, someone has already done this for us. It turns out that the
combination of <code>(.)</code> and <code>id</code> form a mathematical construct known as a
category. But there are other ways to form categories. A Kleisli category, for
instance, allows the objects being composed to be augmented a bit. A Kleisli
category for <code>Maybe</code> would consist of <code>(.) :: (b -&gt; Maybe c) -&gt; (a -&gt; Maybe b)
-&gt; (a -&gt; Maybe c)</code> and <code>id :: a -&gt; Maybe a</code>. That is, the objects in the
category augment the <code>(-&gt;)</code> with a <code>Maybe</code>, so <code>(a -&gt; b)</code> becomes <code>(a -&gt; Maybe
b)</code>.</p>
<p>And suddenly, we've extended the power of composition to things that the
traditional <code>(.)</code> operation doesn't work on. This is a source of new
abstraction power. Kleisli categories work with more types than just <code>Maybe</code>.
They work with every type that can assemble a proper category, obeying the
category laws.</p>
<ol>
<li>Left identity: <code>id . f</code> = <code>f</code>
</li>
<li>Right identity: <code>f . id</code> = <code>f</code>
</li>
<li>Associativity: <code>f . (g . h)</code> = <code>(f . g) . h</code>
</li>
</ol>
<p>As long as you can prove that your type obeys those three laws, you can turn
it into a Kleisli category. And what's the big deal about that? Well, it turns
out that monads are exactly the same thing as Kleisli categories. <code>Monad</code>'s
<code>return</code> is the same as Kleisli <code>id</code>. <code>Monad</code>'s <code>(&gt;&gt;=)</code> isn't identical to
Kleisli <code>(.)</code>, but it turns out to be very easy to write each in terms of the
other. And the category laws are the same as the monad laws, when you
translate them across the difference between <code>(&gt;&gt;=)</code> and <code>(.)</code>.</p>
<p>So why go through all this bother? Why have a <code>Monad</code> abstraction in the
language? As I alluded to above, it enables code reuse. It even enables code
reuse along two different dimensions.</p>
<p>The first dimension of code reuse comes directly from the presence of the
abstraction. You can write code that works across all instances of the
abstraction. There's the entire monad-loops package consisting of loops that
work with any instance of <code>Monad</code>.</p>
<p>The second dimension is indirect, but it follows from the existence of
composition. When composition is easy, it's natural to write code in small,
reusable chunks. This is the same way having the <code>(.)</code> operator for functions
encourages writing small, reusable functions.</p>
<p>So why does the abstraction exist? Because it's proven to be a tool that
enables more composition in code, resulting in creating reusable code and
encouraging the creation of more reusable code. Code reuse is one of the holy
grails of programming. The monad abstraction exists because it moves us a
little bit towards that holy grail.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2194.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2192.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
