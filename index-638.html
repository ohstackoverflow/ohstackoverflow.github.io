<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 638) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-638.html">
<link rel="prev" href="index-639.html" type="text/html">
<link rel="next" href="index-637.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-check-whether-an-object-is-a-date/" class="u-url">How to check whether an object is a date?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-check-whether-an-object-is-a-date/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T12:01:11+08:00" itemprop="datePublished" title="2023-02-17 12:01">2023-02-17 12:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an annoying bug in on a webpage:</p>
<blockquote>
<p>date.GetMonth() is not a function</p>
</blockquote>
<p>So, I suppose that I am doing something wrong. The variable <code>date</code> is not an
object of type <code>Date</code>. <strong>How can I check for a datatype in Javascript?</strong> I
tried to add a <code>if (date)</code>, but it doesn't work.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">getFormatedDate</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">var</span><span class="w"> </span><span class="n">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="o">.</span><span class="n">GetMonth</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>So, if I want to write defensive code and prevent the date (which is not one)
to be formatted, how do I do that?</p>
<p>Thanks!</p>
<p><strong>UPDATE:</strong> I don't want to check the format of the date, but I want to be
sure that the parameter passed to the method <code>getFormatedDate()</code> is of type
<code>Date</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>As an alternative to duck typing via</p>
<div class="code"><pre class="code literal-block">typeof date.getMonth === 'function'
</pre></div>

<p>you can use the <code>instanceof</code> operator, i.e. But it will return true for
invalid dates too, e.g. <code>new Date('random_string')</code> is also instance of Date</p>
<div class="code"><pre class="code literal-block">date instanceof Date
</pre></div>

<p>This will fail if objects are passed across frame boundaries.</p>
<p>A work-around for this is to check the object's class via</p>
<div class="code"><pre class="code literal-block"><span class="n">Object</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">toString</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="err">'</span><span class="p">[</span><span class="n">object</span><span class="w"> </span><span class="n">Date</span><span class="p">]</span><span class="err">'</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use the following code:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">myvar</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">Date</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="bp">false</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-run-multiple-bat-files-within-a-bat-file/" class="u-url">How to run multiple .BAT files within a .BAT file</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-run-multiple-bat-files-within-a-bat-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T12:00:43+08:00" itemprop="datePublished" title="2023-02-17 12:00">2023-02-17 12:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to get my <code>commit-build.bat</code> to execute other .BAT files as part of
our build process.</p>
<p>Content of <code>commit-build.bat</code>:</p>
<div class="code"><pre class="code literal-block">"msbuild.bat"
"unit-tests.bat"
"deploy.bat"
</pre></div>

<p>This seems simple enough, but <code>commit-build.bat</code> only executes the first item
in the list (<code>msbuild.bat</code>).</p>
<p>I have run each of the files separately with no problems.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use:</p>
<div class="code"><pre class="code literal-block">call msbuild.bat
call unit-tests.bat
call deploy.bat
</pre></div>

<p>When not using CALL, the current batch file stops and the called batch file
starts executing. It's a peculiar behavior dating back to the early MS-DOS
days.</p>
<p><br></p>
<h3>Suggest</h3>
<p>All the other answers are correct: use call. For example:</p>
<div class="code"><pre class="code literal-block"> call "msbuild.bat"
</pre></div>

<p><strong>History</strong></p>
<p>In ancient DOS versions it was not possible to recursively execute batch
files. Then the call command was introduced that called another cmd shell to
execute the batch file and returned execution back to the calling cmd shell
when finished.</p>
<p>Obviously in later versions no other cmd shell was necessary anymore.</p>
<p>In the early days many batch files depended on the fact that calling a batch
file would not return to the calling batch file. Changing that behaviour
without additional syntax would have broken many systems like batch menu
systems (using batch files for menu structures).</p>
<p>As in many cases with Microsoft, backward compatibility therefore is the
reason for this behaviour.</p>
<p><strong>Tips</strong></p>
<p>If your batch files have spaces in their names, use quotes around the name:</p>
<div class="code"><pre class="code literal-block">call "unit tests.bat"
</pre></div>

<p>By the way: if you do not have all the names of the batch files, you could
also use for to do this (it does not guarantee the correct order of batch file
calls; it follows the order of the file system):</p>
<div class="code"><pre class="code literal-block"><span class="k">FOR</span><span class="w"> </span><span class="o">%</span><span class="nv">x</span><span class="w"> </span><span class="nv">IN</span><span class="w"> </span><span class="ss">(</span><span class="o">*</span>.<span class="nv">bat</span><span class="ss">)</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="s2">"%x"</span>
</pre></div>

<p>You can also react on errorlevels after a call. Use:</p>
<div class="code"><pre class="code literal-block"><span class="k">exit</span><span class="w"> </span><span class="o">/</span><span class="nv">B</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span>#<span class="w"> </span><span class="nv">Or</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">integer</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="mi">0</span>..<span class="mi">255</span>
</pre></div>

<p>to give back an errorlevel. 0 denotes correct execution. In the calling batch
file you can react using</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">errorlevel</span><span class="w"> </span><span class="nv">neq</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">batch</span><span class="w"> </span><span class="nv">command</span><span class="o">&gt;</span>
</pre></div>

<p>Use <code>if errorlevel 1</code> if you have an older Windows than NT4/2000/XP to catch
all errorlevels 1 and greater.</p>
<p>To control the flow of a batch file, there is goto :-(</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">errorlevel</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="nl">label2</span>
<span class="k">if</span><span class="w"> </span><span class="nv">errorlevel</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="nl">label1</span>
...
<span class="nl">:label1</span>
...
<span class="nl">:label2</span>
...
</pre></div>

<p>As others pointed out: have a look at build systems to replace batch files.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-apply-important-using-css/" class="u-url">How to apply !important using .css()?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-apply-important-using-css/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T12:00:12+08:00" itemprop="datePublished" title="2023-02-17 12:00">2023-02-17 12:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am having trouble applying a style that is <code>!important</code>. I’ve tried:</p>
<div class="code"><pre class="code literal-block">$("#elem").css("width", "100px !important");
</pre></div>

<p>This does <strong>nothing</strong> ; no width style whatsoever is applied. Is there a
jQuery-ish way of applying such a style without having to overwrite <code>cssText</code>
(which would mean I’d need to parse it first, etc.)?</p>
<p><strong>Edit</strong> : I should add that I have a stylesheet with an <code>!important</code> style
that I am trying to override with an <code>!important</code> style inline, so using
<code>.width()</code> and the like does not work since it gets overridden by my external
<code>!important</code> style.</p>
<p>Also, the value that will override the previous value <strong>is computed</strong> , so I
cannot simply create another external style.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Most of these answers are now outdated, IE7 support is not an issue.</p>
<p>The best way to do this that <strong>supports IE11+ and all modern browsers</strong> is:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="o">$</span><span class="n">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s2">"#elem"</span><span class="p">);</span>
<span class="o">$</span><span class="n">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s1">'width'</span><span class="p">,</span><span class="w"> </span><span class="s1">'100px'</span><span class="p">,</span><span class="w"> </span><span class="s1">'important'</span><span class="p">);</span>
</pre></div>

<hr>
<p>Or if you want, you can create a small jQuery plugin that does this. This
plugin closely matches jQuery's own <code>css()</code> method in the parameters it
supports:</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Sets</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CSS</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selected</span><span class="w"> </span><span class="n">element</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="o">!</span><span class="n">important</span><span class="w"> </span><span class="n">priority</span><span class="o">.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">camelCased</span><span class="w"> </span><span class="n">CSS</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">calling</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="err">`</span><span class="n">css</span><span class="p">()</span><span class="err">`</span><span class="w"> </span><span class="n">method</span><span class="o">.</span><span class="w"> </span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Unlike</span><span class="w"> </span><span class="n">jQuery</span><span class="s1">'s css() this does NOT work as a getter.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="p">{</span><span class="n">string</span><span class="o">|</span><span class="nb nb-Type">Object</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="p">}</span><span class="w"> </span><span class="n">name</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="p">{</span><span class="n">string</span><span class="o">|</span><span class="n">undefined</span><span class="p">}</span><span class="w"> </span><span class="n">value</span>
<span class="w"> </span><span class="o">*/</span><span class="w">   </span>
<span class="n">jQuery</span><span class="o">.</span><span class="n">fn</span><span class="o">.</span><span class="n">cssImportant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="o">$</span><span class="n">this</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">applyStyles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Convert</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">camelCase</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">dashed</span><span class="o">-</span><span class="n">case</span><span class="o">.</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">dashedName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span><span class="p">(</span><span class="o">.</span><span class="p">)([</span><span class="n">A</span><span class="o">-</span><span class="n">Z</span><span class="p">])(</span><span class="o">.</span><span class="p">)</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">m1</span><span class="p">,</span><span class="w"> </span><span class="n">upper</span><span class="p">,</span><span class="w"> </span><span class="n">m2</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">m1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"-"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">upper</span><span class="o">.</span><span class="n">toLowerCase</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">m2</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Loop</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">selector</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">styles</span><span class="o">.</span>
<span class="w">    </span><span class="o">$</span><span class="n">this</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="n">function</span><span class="p">(){</span>
<span class="w">      </span><span class="n">this</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="n">dashedName</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="s1">'important'</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="p">,</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Loop</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">styles</span><span class="o">.</span><span class="w"> </span>
<span class="w">  </span><span class="k">if</span><span class="p">(</span><span class="n">jQuery</span><span class="o">.</span><span class="n">isPlainObject</span><span class="p">(</span><span class="n">name</span><span class="p">)){</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="p">[</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">]</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">entries</span><span class="p">(</span><span class="n">name</span><span class="p">)){</span>
<span class="w">       </span><span class="n">applyStyles</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Otherwise</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">value</span><span class="o">.</span>
<span class="w">    </span><span class="n">applyStyles</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="n">chainable</span><span class="o">.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">$</span><span class="n">this</span><span class="p">;</span>
<span class="p">};</span>



<span class="o">//</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">plugin</span><span class="p">:</span>
<span class="o">$</span><span class="p">(</span><span class="s1">'#elem'</span><span class="p">)</span><span class="o">.</span><span class="n">cssImportant</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span><span class="w"> </span><span class="s1">'100px'</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">camelCased</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">names</span><span class="p">:</span>
<span class="o">$</span><span class="p">(</span><span class="s1">'#another'</span><span class="p">)</span><span class="o">.</span><span class="n">cssImportant</span><span class="p">({</span><span class="n">backgroundColor</span><span class="p">:</span><span class="w"> </span><span class="s1">'salmon'</span><span class="p">,</span><span class="w"> </span><span class="n">display</span><span class="p">:</span><span class="w"> </span><span class="s1">'block'</span><span class="p">});</span>

<span class="o">//</span><span class="w"> </span><span class="n">Call</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">items</span><span class="p">:</span>
<span class="o">$</span><span class="p">(</span><span class="s1">'.item, #foo, #bar'</span><span class="p">)</span><span class="o">.</span><span class="n">cssImportant</span><span class="p">(</span><span class="s1">'color'</span><span class="p">,</span><span class="w"> </span><span class="s1">'red'</span><span class="p">);</span>
</pre></div>

<p>Example jsfiddle here.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I think I've found a solution. I've made it into a new function:</p>
<p><code>jQuery.style(name, value, priority);</code></p>
<p>You can use it to get values with <code>.style('name')</code> just like <code>.css('name')</code>,
get the <code>CSSStyleDeclaration</code> with <code>.style()</code>, and also set values, with the
ability to specify the priority as <em>'important'</em>. See this.</p>
<h3>Example</h3>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">div</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'someDiv'</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">'color'</span><span class="p">));</span>
<span class="n">div</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">'color'</span><span class="p">,</span><span class="w"> </span><span class="s1">'red'</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">'color'</span><span class="p">));</span>
<span class="n">div</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">'color'</span><span class="p">,</span><span class="w"> </span><span class="s1">'blue'</span><span class="p">,</span><span class="w"> </span><span class="s1">'important'</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">'color'</span><span class="p">));</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">div</span><span class="o">.</span><span class="n">style</span><span class="p">()</span><span class="o">.</span><span class="n">getPropertyPriority</span><span class="p">(</span><span class="s1">'color'</span><span class="p">));</span>
</pre></div>

<p><strong>Example output:</strong></p>
<div class="code"><pre class="code literal-block">null
red
blue
important
</pre></div>

<hr>
<h3>The Function</h3>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="o">$</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">    </span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">$.</span><span class="n">fn</span><span class="o">.</span><span class="n">style</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Escape</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="n">chars</span><span class="w"> </span><span class="n">with</span><span class="w"> </span>\
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">escape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span><span class="p">[</span><span class="o">-</span><span class="p">[</span>\<span class="p">]{}()</span><span class="o">*+</span><span class="err">?</span><span class="o">.</span><span class="p">,</span>\\<span class="o">^$|</span><span class="c1">#\s]/g, "\\$&amp;");</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">who</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="w"> </span><span class="n">IE</span><span class="w"> </span><span class="mi">9</span><span class="p">),</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">CSS</span><span class="w"> </span><span class="n">functions</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">isStyleFuncSupported</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!!</span><span class="n">CSSStyleDeclaration</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">getPropertyValue</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">isStyleFuncSupported</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">CSSStyleDeclaration</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">getPropertyValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">CSSStyleDeclaration</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">setProperty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">styleName</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">priority</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">this</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">styleName</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">      </span><span class="k">var</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">typeof</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">'undefined'</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">priority</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">''</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="n">manually</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">rule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="n">escape</span><span class="p">(</span><span class="n">styleName</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'</span><span class="se">\\</span><span class="s1">s*:</span><span class="se">\\</span><span class="s1">s*'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">escape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="s1">'(</span><span class="se">\\</span><span class="s1">s*;)?'</span><span class="p">,</span><span class="w"> </span><span class="s1">'gmi'</span><span class="p">);</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">cssText</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">cssText</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">rule</span><span class="p">,</span><span class="w"> </span><span class="n">styleName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">': '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">' !'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">';'</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">CSSStyleDeclaration</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">removeProperty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">removeAttribute</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">CSSStyleDeclaration</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">getPropertyPriority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">styleName</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">var</span><span class="w"> </span><span class="n">rule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RegExp</span><span class="p">(</span><span class="n">escape</span><span class="p">(</span><span class="n">styleName</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'</span><span class="se">\\</span><span class="s1">s*:</span><span class="se">\\</span><span class="s1">s*[^</span><span class="se">\\</span><span class="s1">s]*</span><span class="se">\\</span><span class="s1">s*!important(</span><span class="se">\\</span><span class="s1">s*;)?'</span><span class="p">,</span>
<span class="w">          </span><span class="s1">'gmi'</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">rule</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">cssText</span><span class="p">)</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="s1">'important'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">function</span>
<span class="w">  </span><span class="o">$.</span><span class="n">fn</span><span class="o">.</span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">styleName</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">priority</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">DOM</span><span class="w"> </span><span class="n">node</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Ensure</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">DOM</span><span class="w"> </span><span class="n">node</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'undefined'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">CSSStyleDeclaration</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="p">;</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Getter</span><span class="o">/</span><span class="n">Setter</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">styleName</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">'undefined'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">'undefined'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">property</span>
<span class="w">        </span><span class="n">priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">typeof</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">'undefined'</span><span class="w"> </span><span class="err">?</span><span class="w"> </span><span class="n">priority</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>
<span class="w">        </span><span class="n">style</span><span class="o">.</span><span class="n">setProperty</span><span class="p">(</span><span class="n">styleName</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">priority</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">property</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">style</span><span class="o">.</span><span class="n">getPropertyValue</span><span class="p">(</span><span class="n">styleName</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">CSSStyleDeclaration</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">style</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">})(</span><span class="n">jQuery</span><span class="p">);</span>
</pre></div>

<p>See this for examples of how to read and set the CSS values. My issue was that
I had already set <code>!important</code> for the width in my CSS to avoid conflicts with
other theme CSS, but any changes I made to the width in jQuery would be
unaffected since they would be added to the style attribute.</p>
<h3>Compatibility</h3>
<p>For setting with the priority using the <code>setProperty</code> function, This Article
says there is support for IE 9+ and all other browsers. I have tried with IE 8
and it has failed, which is why I built support for it in my functions (see
above). It will work on all other browsers using <code>setProperty</code>, but it will
need my custom code to work in &lt; IE 9.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-639.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-637.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
