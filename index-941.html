<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 941) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-941.html">
<link rel="prev" href="index-942.html" type="text/html">
<link rel="next" href="index-940.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-a-folder-from-git-tracking/" class="u-url">Remove a folder from git tracking</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-a-folder-from-git-tracking/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:06:40+08:00" itemprop="datePublished" title="2023-02-17 20:06">2023-02-17 20:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to exclude a folder (name uploads) from tracking. I tried to run</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">--</span><span class="n">cached</span><span class="w"> </span><span class="n">wordpress</span><span class="o">/</span><span class="n">wp</span><span class="o">-</span><span class="n">content</span><span class="o">/</span><span class="n">uploads</span>
</pre></div>

<p>and after that I added the path to .gitignore</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="n">wordpress</span><span class="o">/</span><span class="n">wp</span><span class="o">-</span><span class="n">content</span><span class="o">/</span><span class="n">uploads</span>
</pre></div>

<p>but when I ran <code>git status</code> they show up as deleted. If I try to commit the
changes, the files will be deleted, not only removed from tracking.</p>
<p>What am I doing wrong?</p>
<p>I have also tried</p>
<div class="code"><pre class="code literal-block">git update-index --assume-unchanged &lt;file&gt;
</pre></div>

<p>but this seems to untrack only files. But I need to remove an entire folder
(including subfolders) from tracking.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I came across this question while Googling for "git remove folder from
tracking". The OP's question lead me to the answer. I am summarizing it here
for future generations.</p>
<p><strong>Question</strong></p>
<p>How do I remove a folder from my git repository without deleting it from my
local machine (i.e., development environment)?</p>
<p><strong>Answer</strong></p>
<p>Step 1. Add the folder path to your repo's root <code>.gitignore</code> file.</p>
<div class="code"><pre class="code literal-block">path_to_your_folder/
</pre></div>

<p>Step 2. Remove the folder from your local git tracking, but keep it on your
disk.</p>
<div class="code"><pre class="code literal-block">git rm -r --cached path_to_your_folder/
</pre></div>

<p>Step 3. Push your changes to your git repo.</p>
<p>The folder will be considered "deleted" from Git's point of view (i.e. they
are in past history, but not in the latest commit, and people pulling from
this repo will get the files removed from their trees), but stay on your
working directory because you've used <code>--cached</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This works for me:</p>
<div class="code"><pre class="code literal-block">git rm -r --cached --ignore-unmatch folder_name
</pre></div>

<p><code>--ignore-unmatch</code> is important here, without that option git will exit with
error on the first file not in the index.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/psql-fatal-role-postgres-does-not-exist/" class="u-url">psql: FATAL: role "postgres" does not exist</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/psql-fatal-role-postgres-does-not-exist/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:06:12+08:00" itemprop="datePublished" title="2023-02-17 20:06">2023-02-17 20:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm a postgres novice.</p>
<p>I installed the postgres.app for mac. I was playing around with the psql
commands and I accidentally dropped the postgres database. I don't know what
was in it.</p>
<p>I'm currently working on a tutorial: http://www.rosslaird.com/blog/building-a-
project-with-mezzanine/</p>
<p>And I'm stuck at <code>sudo -u postgres psql postgres</code></p>
<p>ERROR MESSAGE: <code>psql: FATAL: role "postgres" does not exist</code></p>
<p>$ which psql</p>
<div class="code"><pre class="code literal-block">/Applications/Postgres.app/Contents/MacOS/bin/psql
</pre></div>

<p>This is what prints out of <code>psql -l</code></p>
<div class="code"><pre class="code literal-block">                                List of databases
    Name    |   Owner    | Encoding | Collate | Ctype |     Access privileges     
------------+------------+----------+---------+-------+---------------------------
 user       | user       | UTF8     | en_US   | en_US | 
 template0  | user       | UTF8     | en_US   | en_US | =c/user                  +
            |            |          |         |       | user      =CTc/user      
 template1  | user       | UTF8     | en_US   | en_US | =c/user                  +
            |            |          |         |       | user      =CTc/user      
(3 rows)
</pre></div>

<p>So what are the steps I should take? Delete an everything related to psql and
reinstall everything?</p>
<p>Thanks for the help guys!</p>
<p><br><br></p>
<h2>Answer</h2>
<p>NOTE: If you installed postgres using homebrew, see the comment from
@user3402754 below.</p>
<p>Note that the error message does <strong>NOT</strong> talk about a missing database, it
talks about a missing role. Later in the login process it might also stumble
over the missing database.</p>
<p>But the first step is to check the missing role: What is the output within
<code>psql</code> of the command <code>\du</code> ? On my Ubuntu system the relevant line looks like
this:</p>
<div class="code"><pre class="code literal-block">                              List of roles
 Role name |            Attributes             | Member of 
-----------+-----------------------------------+-----------
 postgres  | Superuser, Create role, Create DB | {}
</pre></div>

<p>If there is not at least one role with <code>superuser</code>, then you have a problem
:-)</p>
<p>If there is one, you can use that to login. And looking at the output of your
<code>\l</code> command: The permissions for <code>user</code> on the <code>template0</code> and <code>template1</code>
databases are the same as on my Ubuntu system for the superuser <code>postgres</code>. So
I think your setup simple uses <code>user</code> as the superuser. So you could try this
command to login:</p>
<div class="code"><pre class="code literal-block">sudo -u user psql user
</pre></div>

<p>If <code>user</code> is really the DB superuser you can create another DB superuser and a
private, empty database for him:</p>
<div class="code"><pre class="code literal-block">CREATE USER postgres SUPERUSER;
CREATE DATABASE postgres WITH OWNER postgres;
</pre></div>

<p>But since your postgres.app setup does not seem to do this, you also should
not. Simple adapt the tutorial.</p>
<p><br></p>
<h3>Suggest</h3>
<p>For MAC:</p>
<ol>
<li>Install Homebrew </li>
<li><code>brew install postgres</code></li>
<li><code>initdb /usr/local/var/postgres</code></li>
<li>
<code>/usr/local/Cellar/postgresql/&lt;version&gt;/bin/createuser -s postgres</code> or <code>/usr/local/opt/postgres/bin/createuser -s postgres</code> which will just use the latest version.</li>
<li>start postgres server manually: <code>pg_ctl -D /usr/local/var/postgres start</code>
</li>
</ol>
<hr>
<p>To start server at startup</p>
<ul>
<li><code>mkdir -p ~/Library/LaunchAgents</code></li>
<li><code>ln -sfv /usr/local/opt/postgresql/*.plist ~/Library/LaunchAgents</code></li>
<li><code>launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist</code></li>
</ul>
<hr>
<p>Now, it is set up, login using <code>psql -U postgres -h localhost</code> or use PgAdmin
for GUI.</p>
<p>By default user <code>postgres</code> will not have any login password.</p>
<p>Check this site for more articles like this:
https://medium.com/@Nithanaroy/installing-postgres-on-mac-18f017c5d3f7</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mysql-error-1071-specified-key-was-too-long-max-key-length-is-767-bytes/" class="u-url">MySQL Error #1071 - Specified key was too long; max key length is 767 bytes</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mysql-error-1071-specified-key-was-too-long-max-key-length-is-767-bytes/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:05:41+08:00" itemprop="datePublished" title="2023-02-17 20:05">2023-02-17 20:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When I executed the following command:</p>
<div class="code"><pre class="code literal-block"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n n-Quoted">`mytable`</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span>
<span class="n n-Quoted">`column1`</span><span class="w"> </span><span class="p">,</span>
<span class="n n-Quoted">`column2`</span>
<span class="p">);</span>
</pre></div>

<p>I got this error message:</p>
<div class="code"><pre class="code literal-block">#1071 - Specified key was too long; max key length is 767 bytes
</pre></div>

<p>Information about column1 and column2:</p>
<div class="code"><pre class="code literal-block"><span class="n">column1</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="n">utf8_general_ci</span>
<span class="n">column2</span><span class="w">  </span><span class="n">varchar</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span><span class="w"> </span><span class="n">utf8_general_ci</span>
</pre></div>

<p>I think <code>varchar(20)</code> only requires 21 bytes while <code>varchar(500)</code> only
requires 501 bytes. So the total bytes are 522, less than 767. So why did I
get the error message?</p>
<div class="code"><pre class="code literal-block">#1071 - Specified key was too long; max key length is 767 bytes
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>767 bytes in MySQL version 5.6</strong> (and prior versions), is the stated prefix
limitation for InnoDB tables. It's 1,000 bytes long for MyISAM tables. This
limit has been increased to <strong>3072 bytes In MySQL version 5.7</strong> (and upwards).</p>
<p>You also have to be aware that if you set an index on a big char or <code>varchar</code>
field which is <code>utf8mb4</code> encoded, you have to divide the max index prefix
length of 767 bytes (or 3072 bytes) by 4 resulting in <strong>191</strong>. This is because
the maximum length of a <code>utf8mb4</code> character is four bytes. For a <code>utf8</code>
character it would be three bytes resulting in max index prefix length of
<strong>255</strong> (or minus null-terminator, 254 characters).</p>
<p>One option you have is to just place lower limit on your <code>VARCHAR</code> fields.</p>
<p>Another option (according to the response to this issue) is to get the subset
of the column rather than the entire amount, i.e.:</p>
<div class="code"><pre class="code literal-block"><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n n-Quoted">`mytable`</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">column1</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span><span class="w"> </span><span class="n">column2</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>Tweak as you need to get the key to apply, but I wonder if it would be worth
it to review your data model regarding this entity to see if there's
improvements possible, which would allow you to implement the intended
business rules without hitting the MySQL limitation.</p>
<p><br></p>
<h3>Suggest</h3>
<p>When you hit the limit. Set the following.</p>
<ul>
<li>INNODB <code>utf8</code> <code>VARCHAR(255)</code>
</li>
<li>INNODB <code>utf8mb4</code> <code>VARCHAR(191)</code>
</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-942.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-940.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
