<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1867) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1867.html">
<link rel="prev" href="index-1868.html" type="text/html">
<link rel="next" href="index-1866.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/entity-framework-provider-type-could-not-be-loaded/" class="u-url">Entity Framework Provider type could not be loaded?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/entity-framework-provider-type-could-not-be-loaded/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:15:00+08:00" itemprop="datePublished" title="2023-03-03 11:15">2023-03-03 11:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to run my tests on TeamCity which is currently installed on my
machine.</p>
<blockquote>
<p><code>System.InvalidOperationException</code>:</p>
<p>The Entity Framework provider type
'<code>System.Data.Entity.SqlServer.SqlProviderServices,
EntityFramework.SqlServer</code>, <code>Version=6.0.0.0, Culture=neutral,
PublicKeyToken=b77a5c561934e089'</code> for the '<code>System.Data.SqlClient</code>' ADO.NET
provider could not be loaded. Make sure the provider assembly is available
to the running application.</p>
<p>See http://go.microsoft.com/fwlink/?LinkId=260882 for more information..</p>
</blockquote>
<p>I have no reference to <code>System.Data.Entity</code> in any of my projects as was
suggested on codeplex for upgrading to EF6.</p>
<p>So, I am not sure why am I getting this exception. I do not get any such
exception when I run the tests from VS.</p>
<p>I did try to set CopyLocal to false then again to true.. but that does not
seem to work either.</p>
<p>Update</p>
<p>My app.config has the following . Does this cause some behavior that I don't
understand ?</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
<span class="w">  </span><span class="nt">&lt;configSections&gt;</span>
<span class="w">    </span><span class="nt">&lt;section</span><span class="w"> </span><span class="na">name=</span><span class="s">"entityFramework"</span><span class="w"> </span><span class="na">type=</span><span class="s">"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"</span><span class="w"> </span><span class="na">requirePermission=</span><span class="s">"false"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;</span>
<span class="w">  </span><span class="nt">&lt;/configSections&gt;</span>
<span class="w">  </span><span class="nt">&lt;entityFramework&gt;</span>
<span class="w">    </span><span class="nt">&lt;defaultConnectionFactory</span><span class="w"> </span><span class="na">type=</span><span class="s">"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/entityFramework&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>

<p>I get the following stacktrace in teamcity .</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="n">MSTest</span><span class="p">]</span><span class="w"> </span><span class="n">IntegrationTests</span><span class="o">.</span><span class="n">CrudTest</span><span class="o">+</span><span class="n">QuestionTest</span><span class="o">.</span><span class="n">Create</span>
<span class="p">[</span><span class="mi">03</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">11</span><span class="p">][</span><span class="n">IntegrationTests</span><span class="o">.</span><span class="n">CrudTest</span><span class="o">+</span><span class="n">QuestionTest</span><span class="o">.</span><span class="n">Create</span><span class="p">]</span><span class="w"> </span><span class="n">Initialization</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">IntegrationTests</span><span class="o">.</span><span class="n">CrudTest</span><span class="o">+</span><span class="n">QuestionTest</span><span class="o">.</span><span class="n">Initialize</span><span class="w"> </span><span class="n">threw</span><span class="w"> </span><span class="n">exception</span><span class="o">.</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">InvalidOperationException</span><span class="p">:</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">InvalidOperationException</span><span class="p">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="n">Framework</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="s1">'System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s1">'System.Data.SqlClient'</span><span class="w"> </span><span class="n">ADO</span><span class="o">.</span><span class="n">NET</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">loaded</span><span class="o">.</span><span class="w"> </span><span class="n">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="n">assembly</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">application</span><span class="o">.</span><span class="w"> </span><span class="n">See</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">go</span><span class="o">.</span><span class="n">microsoft</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">fwlink</span><span class="o">/</span><span class="err">?</span><span class="n">LinkId</span><span class="o">=</span><span class="mi">260882</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">..</span>
<span class="p">[</span><span class="mi">03</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">11</span><span class="p">]</span>
<span class="p">[</span><span class="n">IntegrationTests</span><span class="o">.</span><span class="n">CrudTest</span><span class="o">+</span><span class="n">QuestionTest</span><span class="o">.</span><span class="n">Create</span><span class="p">]</span><span class="w">     </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">ProviderServicesFactory</span><span class="o">.</span><span class="n">GetInstance</span><span class="p">(</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">providerTypeName</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">providerInvariantName</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">ProviderServicesFactory</span><span class="o">.</span><span class="n">GetInstanceByConvention</span><span class="p">(</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">providerInvariantName</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">DefaultProviderServicesResolver</span><span class="o">.</span><span class="n">GetService</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">CachingDependencyResolver</span><span class="o">.&lt;&gt;</span><span class="n">c__DisplayClass1</span><span class="o">.&lt;</span><span class="n">GetService</span><span class="o">&gt;</span><span class="n">b__0</span><span class="p">(</span><span class="n">Tuple</span><span class="err">`</span><span class="mi">2</span><span class="w"> </span><span class="n">k</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Collections</span><span class="o">.</span><span class="n">Concurrent</span><span class="o">.</span><span class="n">ConcurrentDictionary</span><span class="err">`</span><span class="mf">2.</span><span class="n">GetOrAdd</span><span class="p">(</span><span class="n">TKey</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="err">`</span><span class="mi">2</span><span class="w"> </span><span class="n">valueFactory</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">CachingDependencyResolver</span><span class="o">.</span><span class="n">GetService</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">ResolverChain</span><span class="o">.&lt;&gt;</span><span class="n">c__DisplayClass3</span><span class="o">.&lt;</span><span class="n">GetService</span><span class="o">&gt;</span><span class="n">b__0</span><span class="p">(</span><span class="n">IDbDependencyResolver</span><span class="w"> </span><span class="n">r</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">Enumerable</span><span class="o">.</span><span class="n">WhereSelectArrayIterator</span><span class="err">`</span><span class="mf">2.</span><span class="n">MoveNext</span><span class="p">()</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">Enumerable</span><span class="o">.</span><span class="n">FirstOrDefault</span><span class="p">[</span><span class="n">TSource</span><span class="p">](</span><span class="n">IEnumerable</span><span class="err">`</span><span class="mi">1</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="err">`</span><span class="mi">2</span><span class="w"> </span><span class="n">predicate</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">ResolverChain</span><span class="o">.</span><span class="n">GetService</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">RootDependencyResolver</span><span class="o">.</span><span class="n">GetService</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">ResolverChain</span><span class="o">.&lt;&gt;</span><span class="n">c__DisplayClass3</span><span class="o">.&lt;</span><span class="n">GetService</span><span class="o">&gt;</span><span class="n">b__0</span><span class="p">(</span><span class="n">IDbDependencyResolver</span><span class="w"> </span><span class="n">r</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">Enumerable</span><span class="o">.</span><span class="n">WhereSelectArrayIterator</span><span class="err">`</span><span class="mf">2.</span><span class="n">MoveNext</span><span class="p">()</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">Enumerable</span><span class="o">.</span><span class="n">FirstOrDefault</span><span class="p">[</span><span class="n">TSource</span><span class="p">](</span><span class="n">IEnumerable</span><span class="err">`</span><span class="mi">1</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="err">`</span><span class="mi">2</span><span class="w"> </span><span class="n">predicate</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">ResolverChain</span><span class="o">.</span><span class="n">GetService</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">CompositeResolver</span><span class="err">`</span><span class="mf">2.</span><span class="n">GetService</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">IDbDependencyResolverExtensions</span><span class="o">.</span><span class="n">GetService</span><span class="p">[</span><span class="n">T</span><span class="p">](</span><span class="n">IDbDependencyResolver</span><span class="w"> </span><span class="n">resolver</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">InternalConfiguration</span><span class="o">.</span><span class="n">GetService</span><span class="p">[</span><span class="n">TService</span><span class="p">](</span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">DbConfiguration</span><span class="o">.</span><span class="n">GetService</span><span class="p">[</span><span class="n">TService</span><span class="p">](</span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">key</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Utilities</span><span class="o">.</span><span class="n">DbProviderFactoryExtensions</span><span class="o">.</span><span class="n">GetProviderServices</span><span class="p">(</span><span class="n">DbProviderFactory</span><span class="w"> </span><span class="n">factory</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Infrastructure</span><span class="o">.</span><span class="n">DefaultManifestTokenService</span><span class="o">.</span><span class="n">GetProviderManifestToken</span><span class="p">(</span><span class="n">DbConnection</span><span class="w"> </span><span class="n">connection</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Utilities</span><span class="o">.</span><span class="n">DbConnectionExtensions</span><span class="o">.</span><span class="n">GetProviderInfo</span><span class="p">(</span><span class="n">DbConnection</span><span class="w"> </span><span class="n">connection</span><span class="p">,</span><span class="w"> </span><span class="n">DbProviderManifest</span><span class="o">&amp;</span><span class="w"> </span><span class="n">providerManifest</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">DbModelBuilder</span><span class="o">.</span><span class="n">Build</span><span class="p">(</span><span class="n">DbConnection</span><span class="w"> </span><span class="n">providerConnection</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">LazyInternalContext</span><span class="o">.</span><span class="n">CreateModel</span><span class="p">(</span><span class="n">LazyInternalContext</span><span class="w"> </span><span class="n">internalContext</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">RetryLazy</span><span class="err">`</span><span class="mf">2.</span><span class="n">GetValue</span><span class="p">(</span><span class="n">TInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">LazyInternalContext</span><span class="o">.</span><span class="n">InitializeContext</span><span class="p">()</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">InternalContext</span><span class="o">.</span><span class="n">GetEntitySetAndBaseTypeForType</span><span class="p">(</span><span class="n">Type</span><span class="w"> </span><span class="n">entityType</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">InternalSet</span><span class="err">`</span><span class="mf">1.</span><span class="n">Initialize</span><span class="p">()</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">InternalSet</span><span class="err">`</span><span class="mf">1.</span><span class="n">get_InternalContext</span><span class="p">()</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">InternalSet</span><span class="err">`</span><span class="mf">1.</span><span class="n">ActOnSet</span><span class="p">(</span><span class="n">Action</span><span class="w"> </span><span class="n">action</span><span class="p">,</span><span class="w"> </span><span class="n">EntityState</span><span class="w"> </span><span class="n">newState</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">entity</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">methodName</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Internal</span><span class="o">.</span><span class="n">Linq</span><span class="o">.</span><span class="n">InternalSet</span><span class="err">`</span><span class="mf">1.</span><span class="n">Add</span><span class="p">(</span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">entity</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">DbSet</span><span class="err">`</span><span class="mf">1.</span><span class="n">Add</span><span class="p">(</span><span class="n">TEntity</span><span class="w"> </span><span class="n">entity</span><span class="p">)</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">EFRepository</span><span class="o">.</span><span class="n">Infrastructure</span><span class="o">.</span><span class="n">EFRepository</span><span class="err">`</span><span class="mf">1.</span><span class="n">Add</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">c</span><span class="p">:</span>\<span class="n">TeamCity</span>\<span class="n">buildAgent</span>\<span class="n">work</span>\<span class="n">da2ea4e72c0e77f0</span>\<span class="n">Repository</span>\<span class="n">Infrastructure</span>\<span class="n">EFRepository</span><span class="o">.</span><span class="n">cs</span><span class="p">:</span><span class="n">line</span><span class="w"> </span><span class="mi">22</span>
<span class="w">   </span><span class="n">at</span><span class="w"> </span><span class="n">IntegrationTests</span><span class="o">.</span><span class="n">CrudTest</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">c</span><span class="p">:</span>\<span class="n">TeamCity</span>\<span class="n">buildAgent</span>\<span class="n">work</span>\<span class="n">da2ea4e72c0e77f0</span>\<span class="n">IntegrationTests</span>\<span class="n">CrudTest</span><span class="o">.</span><span class="n">cs</span><span class="p">:</span><span class="n">line</span><span class="w"> </span><span class="mi">34</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Same problem, but i installed EF 6 through Nuget. EntityFramework.SqlServer
was missing for another executable. I simply added the nuget package to that
project.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I had the same problem in my Test projects - I installed the latest EF6 bits
via NuGet and everytime I invoke something EF-related I got:</p>
<blockquote>
<p>The Entity Framework provider type
'System.Data.Entity.SqlServer.SqlProviderServices,
EntityFramework.SqlServer' for the 'System.Data.SqlClient' ADO.NET provider
could not be loaded. Make sure the provider assembly is available to the
running application. See http://go.microsoft.com/fwlink/?LinkId=260882 for
more information.</p>
</blockquote>
<p>My workaround: I placed this method inside my test project:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">FixEfProviderServicesProblem</span><span class="p">()</span>
<span class="p">{</span>
<span class="o">//</span><span class="n">The</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="n">Framework</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="s1">'System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer'</span>
<span class="o">//</span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s1">'System.Data.SqlClient'</span><span class="w"> </span><span class="n">ADO</span><span class="o">.</span><span class="n">NET</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">loaded</span><span class="o">.</span><span class="w"> </span>
<span class="o">//</span><span class="n">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="n">assembly</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">application</span><span class="o">.</span><span class="w"> </span>
<span class="o">//</span><span class="n">See</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">go</span><span class="o">.</span><span class="n">microsoft</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">fwlink</span><span class="o">/</span><span class="err">?</span><span class="n">LinkId</span><span class="o">=</span><span class="mi">260882</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="o">.</span>

<span class="k">var</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">SqlServer</span><span class="o">.</span><span class="n">SqlProviderServices</span><span class="o">.</span><span class="n">Instance</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>This method is never been called, but I think the compiler will remove all
"unnecessary" assemblies and without using the EntityFramework.SqlServer stuff
the test fails.</p>
<p>Anyways: Works on my machine ;)</p>
<p>Note: Instead of adding the method to test project you can ensure a static
reference to SqlProviderServices from your Model/entity project.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-vector-to-array/" class="u-url">How to convert vector to array</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-vector-to-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:14:35+08:00" itemprop="datePublished" title="2023-03-03 11:14">2023-03-03 11:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I convert a <code>std::vector&lt;double&gt;</code> to a <code>double array[]</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There's a fairly simple trick to do so, since the spec now guarantees vectors
store their elements contiguously:</p>
<div class="code"><pre class="code literal-block"><span class="nt">std</span><span class="p">::</span><span class="nd">vector</span><span class="o">&lt;</span><span class="nt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">v</span><span class="o">;</span>
<span class="nt">double</span><span class="o">*</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nt">v</span><span class="cp">[</span><span class="mi">0</span><span class="cp">]</span><span class="o">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>What for? You need to clarify: Do you need a pointer to the first element of
an array, or an array?</p>
<p>If you're calling an API function that expects the former, you can do
<code>do_something(&amp;v[0], v.size())</code>, where <code>v</code> is a vector of <code>double</code>s. The
elements of a vector are contiguous.</p>
<p>Otherwise, you just have to copy each element:</p>
<div class="code"><pre class="code literal-block"><span class="nt">double</span><span class="w"> </span><span class="nt">arr</span><span class="cp">[</span><span class="mi">100</span><span class="cp">]</span><span class="o">;</span>
<span class="nt">std</span><span class="p">::</span><span class="nd">copy</span><span class="o">(</span><span class="nt">v</span><span class="p">.</span><span class="nc">begin</span><span class="o">(),</span><span class="w"> </span><span class="nt">v</span><span class="p">.</span><span class="nc">end</span><span class="o">(),</span><span class="w"> </span><span class="nt">arr</span><span class="o">);</span>
</pre></div>

<p>Ensure not only thar <code>arr</code> is big enough, but that <code>arr</code> gets filled up, or
you have uninitialized values.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-the-absolute-coordinates-of-a-view/" class="u-url">How to get the absolute coordinates of a view</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-the-absolute-coordinates-of-a-view/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:14:10+08:00" itemprop="datePublished" title="2023-03-03 11:14">2023-03-03 11:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to get the absolute screen pixel coordinates of the top left corner
of a view. However, all methods I can find such as <code>getLeft()</code> and
<code>getRight()</code> don't work as they all seem to be relative to the parent of the
view, thus giving me <code>0</code>. What is the proper way to do this?</p>
<p>If it helps, this is for a 'put the picture back in order' game. I want the
user to be able to draw a box to select multiple pieces. My assumption is that
the easiest way to do that is to <code>getRawX()</code> and <code>getRawY()</code> from the
<code>MotionEvent</code> and then compare those values against the top left corner of the
layout holding the pieces. Knowing the size of the pieces, I can then
determine how many pieces have been selected. I realise I can use <code>getX()</code> and
<code>getY()</code> on the <code>MotionEvent</code>, but as that returns a relative position that
makes determining which pieces were selected more difficult. (Not impossible,
I know, but it seems unnecessarily complicated).</p>
<p>Edit: This is the code I used to try to get the size of the holding container,
as per one of the questions. <code>TableLayout</code> is the table which holds all the
puzzle pieces.</p>
<div class="code"><pre class="code literal-block">TableLayout tableLayout = (TableLayout) findViewById(R.id.tableLayout);
Log.d(LOG_TAG, "Values " + tableLayout.getTop() + tableLayout.getLeft());
</pre></div>

<p>Edit 2: Here is the code I've tried, following more of the suggested answers.</p>
<div class="code"><pre class="code literal-block">public int[] tableLayoutCorners = new int[2];
(...)

TableLayout tableLayout = (TableLayout) findViewById(R.id.tableLayout);
tableLayout.requestLayout();
Rect corners = new Rect();
tableLayout.getLocalVisibleRect(corners);
Log.d(LOG_TAG, "Top left " + corners.top + ", " + corners.left + ", " + corners.right
            + ", " + corners.bottom);

cells[4].getLocationOnScreen(tableLayoutCorners);
Log.d(LOG_TAG, "Values " + tableLayoutCorners[0] + ", " + tableLayoutCorners[1]);
</pre></div>

<p>This code was added after all the initialisation is done. The image has been
divided up into a array of ImageViews (the cells[] array) contained within a
<code>TableLayout</code>. Cells[0] is the top left <code>ImageView</code>, and I picked cells[4] as
it's somewhere in the middle and most definitely should not have coordinates
of (0,0).</p>
<p>The code shown above still gives me all 0s in the logs, which I really don't
understand because the various puzzle pieces are correctly displayed. (I tried
public int for tableLayoutCorners and default visibility, both giving the same
result.)</p>
<p>I don't know if this is significant, but the <code>ImageView</code>s are originally not
given a size. The size of the <code>ImageView</code>s is determined during the
initialisation automatically by the View when I give it an image to display.
Could this contribute to their values being 0, even though that logging code
is after they have been given an image and have automatically resized
themselves? To potentially counter that, I added the code
<code>tableLayout.requestLayout()</code> as shown above, but that didn't help.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use <code>View.getLocationOnScreen()</code> and/or <code>getLocationInWindow()</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The accepted answer didn't actually tell how to get the location, so here is a
little more detail. You pass in an <code>int</code> array of length 2 and the values are
replaced with the view's (x, y) coordinates (of the top, left corner).</p>
<div class="code"><pre class="code literal-block">int[] location = new int[2];
myView.getLocationOnScreen(location);
int x = location[0];
int y = location[1];
</pre></div>

<p><strong>Notes</strong></p>
<ul>
<li>Replacing <code>getLocationOnScreen</code> with <code>getLocationInWindow</code> should give the same results in most cases (see this answer). However, if you are in a smaller window like a Dialog or custom keyboard, then use you will need to choose which one better suits your needs.</li>
<li>You will get <code>(0,0)</code> if you call this method in <code>onCreate</code> because the view has not been laid out yet. You can use a <code>ViewTreeObserver</code> to listen for when the layout is done and you can get the measured coordinates. (See this answer.)</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1868.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1866.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
