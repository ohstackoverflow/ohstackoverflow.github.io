<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2617) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2617.html">
<link rel="prev" href="index-2618.html" type="text/html">
<link rel="next" href="index-2616.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/function-to-clear-the-console-in-r-and-rstudio/" class="u-url">Function to clear the console in R and RStudio</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/function-to-clear-the-console-in-r-and-rstudio/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T05:15:19+08:00" itemprop="datePublished" title="2023-03-05 05:15">2023-03-05 05:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am wondering if there is a function to clear the console in R and, in
particular, RStudio I am looking for a function that I can type into the
console, and not a keyboard shortcut.</p>
<p>Someone has already provided such a function in this StackExchange post from
2010. Unfortunately, this depends on the RCom package and will not run on Mac
OS X.</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">cat("\014")
</pre></div>

<p>is the code to send <code>CTRL</code>+<code>L</code> to the console, and therefore will clear the
screen.</p>
<p>Far better than just sending a whole lot of returns.</p>
<p><br></p>
<h3>Suggest</h3>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-does-the-reified-keyword-in-kotlin-work/" class="u-url">How does the reified keyword in Kotlin work?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-does-the-reified-keyword-in-kotlin-work/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T05:14:19+08:00" itemprop="datePublished" title="2023-03-05 05:14">2023-03-05 05:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to understand the purpose of the <code>reified</code> keyword. Apparently,
it's allowing us to do reflection on generics.</p>
<p>However, when I leave it out, it works just as fine. When does this make an
actual <strong>difference</strong>?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>TL;DR: What is <code>reified</code> good for</h3>
<div class="code"><pre class="code literal-block">fun &lt;T&gt; myGenericFun(c: Class&lt;T&gt;)
</pre></div>

<p>In the body of a generic function like <code>myGenericFun</code>, you can't access the
type <code>T</code> because it's <strong>only available at compile time</strong> but <strong>erased</strong> at
runtime. Therefore, if you want to use the generic type as a normal class in
the function body you need to <em>explicitly pass the class as a parameter</em> as
shown in <code>myGenericFun</code>.</p>
<p>If you create an <code>inline</code> function with a <strong>reified</strong> <code>T</code>, the type of <code>T</code> can
be accessed even at runtime, and thus you do not need to pass the <code>Class&lt;T&gt;</code>
additionally. You can work with <code>T</code> as if it was a normal class - e.g. you
might want to check whether a variable is an <em>instance of</em> <code>T</code>, which you can
easily do then: <code>myVar is T</code>.</p>
<p>Such an <code>inline</code> function with <code>reified</code> type <code>T</code> looks as follows:</p>
<div class="code"><pre class="code literal-block">inline fun &lt;reified T&gt; myGenericFun()
</pre></div>

<hr>
<h3>How <code>reified</code> works</h3>
<p>You can only use <code>reified</code> in combination with an <code>inline</code> function. By doing
so, you instruct the compiler to copy the function's bytecode to every spot
the function is invoked from (the compiler "inlines" the function). When you
call an <code>inline</code> function with <code>reified</code> type, the compiler has to be able to
know the actual type passed as a type argument so that it can modify the
generated bytecode to use the corresponding class directly. Therefore a call
like <code>myVar is T</code> becomes <code>myVar is String</code> in the bytecode (if the type
argument is <code>String</code>).</p>
<hr>
<h3>Example</h3>
<p>Let's have a look at an example that shows how helpful <code>reified</code> can be. We
want to create an extension function for <code>String</code> called <code>toKotlinObject</code> that
tries to convert a JSON string to a plain Kotlin object with a type specified
by the function's generic type <code>T</code>. We can use
<code>com.fasterxml.jackson.module.kotlin</code> for this and the first approach is the
following:</p>
<p><strong>a) First approach without reified type</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">String</span>.<span class="nv">toKotlinObject</span><span class="ss">()</span>:<span class="w"> </span><span class="nv">T</span><span class="w"> </span>{
<span class="w">      </span><span class="nv">val</span><span class="w"> </span><span class="nv">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">jacksonObjectMapper</span><span class="ss">()</span>
<span class="w">                                                        </span><span class="o">//</span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">compile</span><span class="o">!</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nv">mapper</span>.<span class="nv">readValue</span><span class="ss">(</span><span class="nv">this</span>,<span class="w"> </span><span class="nv">T</span>::<span class="nv">class</span>.<span class="nv">java</span><span class="ss">)</span>
}
</pre></div>

<p>The <code>readValue</code> method takes a type that it is supposed to parse the
<code>JsonObject</code> to. If we try to get the <code>Class</code> of the type parameter <code>T</code>, the
compiler complains: <strong>"Cannot use 'T' as reified type parameter. Use a class
instead."</strong></p>
<p><strong>b) Workaround with explicit<code>Class</code> parameter</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">T</span>:<span class="w"> </span><span class="nv">Any</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">String</span>.<span class="nv">toKotlinObject</span><span class="ss">(</span><span class="nv">c</span>:<span class="w"> </span><span class="nv">KClass</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="ss">)</span>:<span class="w"> </span><span class="nv">T</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">val</span><span class="w"> </span><span class="nv">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">jacksonObjectMapper</span><span class="ss">()</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">mapper</span>.<span class="nv">readValue</span><span class="ss">(</span><span class="nv">this</span>,<span class="w"> </span><span class="nv">c</span>.<span class="nv">java</span><span class="ss">)</span>
}
</pre></div>

<p>As a workaround, the <code>Class</code> of <code>T</code> can be made a method parameter, which then
used as an argument to <code>readValue</code>. This works and is a common pattern in
generic Java code. It can be called as follows:</p>
<div class="code"><pre class="code literal-block">data<span class="w"> </span>class<span class="w"> </span>MyJsonType(val<span class="w"> </span>name:<span class="w"> </span>String)

val<span class="w"> </span>json<span class="w"> </span>=<span class="w"> </span>"""{"name":"example"}"""
json.toKotlinObject(MyJsonType::class)
</pre></div>

<p><strong>c) The Kotlin way:<code>reified</code></strong></p>
<p>Using an <code>inline</code> function with <code>reified</code> type parameter <code>T</code> makes it possible
to implement the function differently:</p>
<div class="code"><pre class="code literal-block"><span class="nv">inline</span><span class="w"> </span><span class="nv">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">reified</span><span class="w"> </span><span class="nv">T</span>:<span class="w"> </span><span class="nv">Any</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">String</span>.<span class="nv">toKotlinObject</span><span class="ss">()</span>:<span class="w"> </span><span class="nv">T</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">val</span><span class="w"> </span><span class="nv">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">jacksonObjectMapper</span><span class="ss">()</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">mapper</span>.<span class="nv">readValue</span><span class="ss">(</span><span class="nv">this</span>,<span class="w"> </span><span class="nv">T</span>::<span class="nv">class</span>.<span class="nv">java</span><span class="ss">)</span>
}
</pre></div>

<p>There’s no need to take the <code>Class</code> of <code>T</code> additionally, <code>T</code> can be used as if
it was an ordinary class. For the client the code looks like this:</p>
<div class="code"><pre class="code literal-block">json.toKotlinObject&lt;MyJsonType&gt;()
</pre></div>

<h4>Important Note: Working with Java</h4>
<p>An inlined function with <code>reified</code> type is <strong>not callable from Java</strong> code.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>Understanding <code>reified</code> types</h3>
<p><strong>Generics</strong></p>
<p>While using generics in Kotlin, we can perform operations on a value of any
type <code>T</code>:</p>
<div class="code"><pre class="code literal-block">fun &lt;T&gt; doSomething(value: T) {
    println("Doing something with value: $value")                 // OK
}
</pre></div>

<p>Here we are implicitly calling the <code>toString()</code> function of the <code>value</code> and
that works.</p>
<p>But we can't perform any operations on the type <code>T</code> directly:</p>
<div class="code"><pre class="code literal-block">fun<span class="w"> </span><span class="nt">&lt;T&gt;</span><span class="w"> </span>doSomething(value:<span class="w"> </span>T)<span class="w"> </span>{
<span class="w">    </span>println("Doing<span class="w"> </span>something<span class="w"> </span>with<span class="w"> </span>type:<span class="w"> </span><span class="cp">${</span><span class="n">T</span><span class="p">::</span><span class="n">class</span><span class="o">.</span><span class="n">simpleName</span><span class="cp">}</span>")<span class="w">  </span>//<span class="w"> </span>Error
}
</pre></div>

<p>Let's understand the reason for this error.</p>
<p><strong>Type erasure</strong></p>
<p>In the code above, the compiler gives an error: <code>Cannot use 'T' as reified
type parameter. Use a class instead.</code> This happens because at compile time,
the compiler removes the type argument from the function call.</p>
<p>For example, if you call the function as:</p>
<div class="code"><pre class="code literal-block">doSomething&lt;String&gt;("Some String")
</pre></div>

<p>The compiler removes the type argument part <code>&lt;String&gt;</code> and all that's left at
the runtime is:</p>
<div class="code"><pre class="code literal-block">doSomething("Some String")
</pre></div>

<p>This is called <em>type erasure</em>. So, at runtime (inside the function
definition), we cannot possibly know exactly which type the <code>T</code> stands for.</p>
<p><strong>Java solution</strong></p>
<p>The solution to this type erasure problem in Java was to pass an additional
argument specifying the type with the <code>Class</code> (in Java) or <code>KClass</code> (in
Kotlin):</p>
<div class="code"><pre class="code literal-block">fun<span class="w"> </span><span class="nt">&lt;T:</span> <span class="err">Any</span><span class="nt">&gt;</span><span class="w"> </span>doSomething(value:<span class="w"> </span>T,<span class="w"> </span>type:<span class="w"> </span>KClass<span class="nt">&lt;T&gt;</span>)<span class="w"> </span>{
<span class="w">    </span>println("Doing<span class="w"> </span>something<span class="w"> </span>with<span class="w"> </span>type:<span class="w"> </span><span class="cp">${</span><span class="nb">type</span><span class="o">.</span><span class="n">simpleName</span><span class="cp">}</span>")<span class="w">       </span>//<span class="w"> </span>OK
}
</pre></div>

<p>This way our code is not affected by type erasure. But this solution is
verbose and not very elegant since we have to declare it as well as call it
with an additional argument. Also, specifying the type bound <code>Any</code> is
mandatory.</p>
<p><strong>Type reification</strong></p>
<p>The best solution to the problem above is type reification in Kotlin. The
<code>reified</code> modifier before the type parameter enables the type information to
be retained at runtime:</p>
<div class="code"><pre class="code literal-block">inline<span class="w"> </span>fun<span class="w"> </span><span class="nt">&lt;reified</span> <span class="err">T</span><span class="nt">&gt;</span><span class="w"> </span>doSomething(value:<span class="w"> </span>T)<span class="w"> </span>{
<span class="w">    </span>println("Doing<span class="w"> </span>something<span class="w"> </span>with<span class="w"> </span>type:<span class="w"> </span><span class="cp">${</span><span class="n">T</span><span class="p">::</span><span class="n">class</span><span class="o">.</span><span class="n">simpleName</span><span class="cp">}</span>")<span class="w">    </span>//<span class="w"> </span>OK
}
</pre></div>

<p>In the code above, thanks to the <code>reified</code> type parameter, we no longer get
the error while performing an operation on type <code>T</code>. Let's see how <code>inline</code>
functions make this magic possible.</p>
<p><strong><code>inline</code> functions</strong></p>
<p>When we mark a function as <code>inline</code>, the compiler copies the actual body of
that <code>inline</code> function wherever that function is called. Since we marked our
<code>doSomething()</code> function as an <code>inline</code>, the following code:</p>
<div class="code"><pre class="code literal-block">fun main() {
    doSomething&lt;String&gt;("Some String")
}
</pre></div>

<p>gets compiled to:</p>
<div class="code"><pre class="code literal-block">fun<span class="w"> </span>main()<span class="w"> </span>{
<span class="w">    </span>println("Doing<span class="w"> </span>something<span class="w"> </span>with<span class="w"> </span>type:<span class="w"> </span><span class="cp">${</span><span class="n">String</span><span class="p">::</span><span class="n">class</span><span class="o">.</span><span class="n">simpleName</span><span class="cp">}</span>")
}
</pre></div>

<p>So, the two code snippets shown above are equivalent.</p>
<p>While copying the body of an <code>inline</code> function, the compiler also replaces the
type parameter <code>T</code> with the actual type argument that is specified or inferred
in the function call. For example, notice how the type parameter <code>T</code> is
replaced with the actual type argument <code>String</code>.</p>
<hr>
<h3>Type checking and type casting of <code>reified</code> types</h3>
<p>The main objective of a <code>reified</code> type parameter is to know the exact type
that the type parameter <code>T</code> represents at runtime.</p>
<p>Let's say we have a list of different types of fruits:</p>
<div class="code"><pre class="code literal-block">val fruits = listOf(Apple(), Orange(), Banana(), Orange())
</pre></div>

<p>And we want to filter all the <code>Orange</code> types in a separate list like
following:</p>
<div class="code"><pre class="code literal-block">val oranges = listOf(Orange(), Orange())
</pre></div>

<p><strong>Without<code>reified</code></strong></p>
<p>For filtering the fruit types, we may write an extension function on
<code>List&lt;Any&gt;</code> like following:</p>
<div class="code"><pre class="code literal-block"><span class="nv">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">List</span><span class="o">&lt;</span><span class="nv">Any</span><span class="o">&gt;</span>.<span class="nv">filterFruit</span><span class="ss">()</span>:<span class="w"> </span><span class="nv">List</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span>.<span class="nv">filter</span><span class="w"> </span>{<span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>}.<span class="nv">map</span><span class="w"> </span>{<span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>}<span class="w">          </span><span class="o">//</span><span class="w"> </span><span class="nv">Error</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Warning</span>
}
</pre></div>

<p>In this code, first we filter the types and only take the element if its type
matches the given type argument. Then we cast each element to the given type
argument and <code>return</code> the <code>List</code>. But there are two problems.</p>
<p><strong>Type checking</strong></p>
<p>While type checking <code>it is T</code>, we are introduced to another error by the
compiler: <code>Cannot check for instance of erased type: T</code>. This is another kind
of error you may come across due to type erasure.</p>
<p><strong>Type casting</strong></p>
<p>While type casting <code>it as T</code>, we are also given a warning: <code>Unchecked cast:
Any to T</code>. The compiler cannot confirm the type due to type erasure.</p>
<p><strong><code>reified</code> types to the rescue</strong></p>
<p>We can easily overcome these two problems by marking the function as <code>inline</code>
and making the type parameter <code>reified</code> as explained earlier:</p>
<div class="code"><pre class="code literal-block"><span class="nv">inline</span><span class="w"> </span><span class="nv">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">reified</span><span class="w"> </span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">List</span><span class="o">&lt;</span><span class="nv">Any</span><span class="o">&gt;</span>.<span class="nv">filterFruit</span><span class="ss">()</span>:<span class="w"> </span><span class="nv">List</span><span class="o">&lt;</span><span class="nv">T</span><span class="o">&gt;</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">this</span>.<span class="nv">filter</span><span class="w"> </span>{<span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>}.<span class="nv">map</span><span class="w"> </span>{<span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>}
}
</pre></div>

<p>And then call it like following:</p>
<div class="code"><pre class="code literal-block">val oranges = fruits.filterFruit&lt;Orange&gt;()
</pre></div>

<p>I showed this function for easier demonstration. For the purpose of filtering
the types in collections, there is already a standard library function
<code>filterIsInstance()</code>. This function has used the <code>inline</code> and <code>reified</code>
modifiers in the similar manner. You can simply call it as following:</p>
<div class="code"><pre class="code literal-block">val oranges = fruits.filterIsInstance&lt;Orange&gt;()
</pre></div>

<hr>
<h3>Passing <code>reified</code> parameter as an argument</h3>
<p>The <code>reified</code> modifier makes it possible for a function to pass the type
parameter as a type argument to another function that has <code>reified</code> modifier:</p>
<div class="code"><pre class="code literal-block">inline fun &lt;reified T&gt; doSomething() {
    // Passing T as an argument to another function
    doSomethingElse&lt;T&gt;()
}

inline fun &lt;reified T&gt; doSomethingElse() { }
</pre></div>

<hr>
<h3>Getting the generic type of the <code>reified</code> type</h3>
<p>Sometimes a type argument can be a generic type. For example, <code>List&lt;String&gt;</code>
in the function call <code>doSomething&lt;List&lt;String&gt;&gt;()</code>. It's possible to know this
entire type, thanks to reification:</p>
<div class="code"><pre class="code literal-block">inline<span class="w"> </span>fun<span class="w"> </span><span class="nt">&lt;reified</span><span class="w"> </span><span class="err">T</span><span class="nt">&gt;</span><span class="w"> </span>getGenericType()<span class="w"> </span>{
<span class="w">    </span>val<span class="w"> </span>type:<span class="w"> </span>KType<span class="w"> </span>=<span class="w"> </span>typeOf<span class="nt">&lt;T&gt;</span>()
<span class="w">    </span>println(type)
}
</pre></div>

<p>Here the <code>typeOf()</code> is a standard library function. The <code>println()</code> function
above will print <code>kotlin.collections.List&lt;kotlin.String&gt;</code>, if you call the
function as <code>getGenericType&lt;List&lt;String&gt;&gt;()</code>. The <code>KType</code> includes <code>KClass</code>,
type argument information and nullability information. Once you know the
<code>KType</code>, you can perform reflection on it.</p>
<hr>
<h3>Java interoperability</h3>
<p>The <code>inline</code> functions declared without <code>reified</code> type parameters can be
called from Java as regular Java functions. But the ones declared with the
<code>reified</code> type parameters are not callable from Java.</p>
<p>Even if you call it using the reflection like following:</p>
<div class="code"><pre class="code literal-block">Method method = YourFilenameKt.class.getDeclaredMethod("doSomething", Object.class);
method.invoke("hello", Object.class);
</pre></div>

<p>You get the <code>UnsupportedOperationException: This function has a reified type
parameter and thus can only be inlined at compilation time, not called
directly.</code></p>
<hr>
<h3>Conclusion</h3>
<p>In many cases, the <code>reified</code> types help us get rid of the following errors and
warnings:</p>
<ol>
<li><code>Error: Cannot use 'T' as reified type parameter. Use a class instead.</code></li>
<li><code>Error: Cannot check for instance of erased type: T</code></li>
<li><code>Warning: Unchecked cast: SomeType to T</code></li>
</ol>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/format-date-with-moment-js/" class="u-url">Format date with Moment.js</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/format-date-with-moment-js/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T05:10:37+08:00" itemprop="datePublished" title="2023-03-05 05:10">2023-03-05 05:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a string in this format:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">testDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Fri Apr 12 2013 19:08:55 GMT-0500 (CDT)"</span>
</pre></div>

<p>I would like to use Moment.js get it in this format <code>mm/dd/yyyy : 04/12/2013</code>
for display.</p>
<p>I tried to do it using this method,</p>
<div class="code"><pre class="code literal-block">moment(testDate,'mm/dd/yyyy');
</pre></div>

<p>Which errors and says <code>there is no such method called replace</code>? Am I
approaching this in the wrong way?</p>
<hr>
<h4>Edit</h4>
<p>I should also mention that I am using a pre-packaged version of <em>Moment.js</em> ,
packaged for <em>Meteor.js</em></p>
<div class="code"><pre class="code literal-block"><span class="n">Object</span><span class="w"> </span><span class="p">[</span><span class="n">object</span><span class="w"> </span><span class="n">Date</span><span class="p">]</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="err">'</span><span class="n">replace</span><span class="err">'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Exact</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
</pre></div>

<p>Stack Trace:</p>
<div class="code"><pre class="code literal-block"> at makeDateFromStringAndFormat (http://127.0.0.1:3000/packages/moment/lib/moment/moment.js?b4e3ac4a3d0794023a4410e7941c3e179398b5b0:539:29)
    at moment (http://127.0.0.1:3000/packages/moment/lib/moment/moment.js?b4e3ac4a3d0794023a4410e7941c3e179398b5b0:652:24)
    at populateProfileForEdit (http://127.0.0.1:3000/client/views/home/administration/directory/profiles/profiles.js?acfff908a6a099f37312f62892a22b40f82e5e0f:147:25)
    at Object.Template.profile_personal.rendered (http://127.0.0.1:3000/client/views/home/administration/directory/profiles/profiles.js?acfff908a6a099f37312f62892a22b40f82e5e0f:130:13)
    at Spark.createLandmark.rendered (http://127.0.0.1:3000/packages/templating/deftemplate.js?b622653d121262e50a80be772bf5b1e55ab33881:126:42)
    at http://127.0.0.1:3000/packages/spark/spark.js?45c746f38023ceb80745f4b4280457e15f058bbc:384:32
    at Array.forEach (native)
    at Function._.each._.forEach (http://127.0.0.1:3000/packages/underscore/underscore.js?867d3653d53e9c7a171483edbcad9670e12288c7:79:11)
    at http://127.0.0.1:3000/packages/spark/spark.js?45c746f38023ceb80745f4b4280457e15f058bbc:382:7
    at _.extend.flush (http://127.0.0.1:3000/packages/deps/deps.js?9642a93ae1f8ffa8eb1c2475b198c764f183d693:231:11)
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The 2nd argument to <code>moment()</code> is a <em>parsing</em> format rather than an <em>display</em>
format.</p>
<p>For that, you want the <code>.format()</code> method:</p>
<div class="code"><pre class="code literal-block">moment(testDate).format('MM/DD/YYYY');
</pre></div>

<p>Also note that case does matter. For Month, Day of Month, and Year, the format
should be uppercase.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Include moment.js and using the below code you can format your date</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">formatDate</span><span class="o">=</span><span class="w"> </span><span class="mi">1399919400000</span><span class="p">;</span>

<span class="k">var</span><span class="w"> </span><span class="n">responseDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">moment</span><span class="p">(</span><span class="n">formatDate</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">'DD/MM/YYYY'</span><span class="p">);</span>
</pre></div>

<p>My output is "13/05/2014"</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2618.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2616.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
