<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1580) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1580.html">
<link rel="prev" href="index-1581.html" type="text/html">
<link rel="next" href="index-1579.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/indenting-code-in-sublime-text-2/" class="u-url">Indenting code in Sublime text 2?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/indenting-code-in-sublime-text-2/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:25:46+08:00" itemprop="datePublished" title="2023-03-03 04:25">2023-03-03 04:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Visual Studio I can press <code>Ctrl</code>+<code>K</code>+<code>D</code> to indent everything so the code
is structured nicely and readable. Is there a shortcut in Sublime 2 to do the
same?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can find it in <code>Edit</code> → <code>Line</code> → <code>Reindent</code>, but it does not have a
shortcut by default. You can add a shortcut by going to the menu <code>Preferences</code>
→ <code>Keybindings</code> → <code>User</code>, then add there:</p>
<div class="code"><pre class="code literal-block">{ "keys": ["f12"], "command": "reindent", "args": {"single_line": false} }
</pre></div>

<p>(example of using the <code>F12</code> key for that functionality)</p>
<p>The config files use JSON-syntax, so these curly braces have to be placed
comma-separated in the square-brackets that are there by default. If you don't
have any other key-bindings already, then your whole <code>Keybindings</code> → <code>User</code>
file would look like this, of course:</p>
<div class="code"><pre class="code literal-block">[
    { "keys": ["f12"], "command": "reindent", "args": {"single_line": false}}
]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The reindent command only works on the currently selected lines unless the
"single_line" argument is set to false.</p>
<div class="code"><pre class="code literal-block">{ "keys": ["f12"], "command": "reindent", "args": {"single_line": false} }
</pre></div>

<p>Now, pressing <code>f12</code> will reindent the entire document.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/restore-a-postgres-backup-file-using-the-command-line/" class="u-url">Restore a postgres backup file using the command line?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/restore-a-postgres-backup-file-using-the-command-line/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:25:20+08:00" itemprop="datePublished" title="2023-03-03 04:25">2023-03-03 04:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Locally, I use pgadmin3. On the remote server, however, I have no such luxury.</p>
<p>I've already created the backup of the database and copied it over, but is
there a way to restore a backup from the command line? I only see things
related to GUI or to pg_dumps.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are two tools to look at, depending on how you created the dump file.</p>
<p>Your first source of reference should be the man page pg_dump as that is what
creates the dump itself. It says:</p>
<blockquote>
<p>Dumps can be output in script or archive file formats. Script dumps are
plain-text files containing the SQL commands required to reconstruct the
database to the state it was in at the time it was saved. To restore from
such a script, feed it to psql(1). Script files can be used to reconstruct
the database even on other machines and other architectures; with some
modifications even on other SQL database products.</p>
<p>The alternative archive file formats must be used with pg_restore(1) to
rebuild the database. They allow pg_restore to be selective about what is
restored, or even to reorder the items prior to being restored. The archive
file formats are designed to be portable across architectures.</p>
</blockquote>
<p>So depends on the way it was dumped out. If using Linux/Unix, you can probably
figure it out using the excellent <code>file(1)</code> command - if it mentions ASCII
text and/or SQL, it should be restored with psql otherwise you should probably
use pg_restore.</p>
<p>Restoring is pretty easy:</p>
<div class="code"><pre class="code literal-block"><span class="nv">psql</span><span class="w"> </span><span class="o">-</span><span class="nv">U</span><span class="w"> </span><span class="nv">username</span><span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span><span class="nv">dbname</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">filename</span>.<span class="nv">sql</span>

<span class="o">--</span><span class="w"> </span><span class="k">For</span><span class="w"> </span><span class="nv">Postgres</span><span class="w"> </span><span class="nv">versions</span><span class="w"> </span><span class="mi">9</span>.<span class="mi">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">earlier</span>
<span class="nv">psql</span><span class="w"> </span><span class="o">-</span><span class="nv">U</span><span class="w"> </span><span class="nv">username</span><span class="w"> </span><span class="o">-</span><span class="nv">d</span><span class="w"> </span><span class="nv">dbname</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="nv">f</span><span class="w"> </span><span class="nv">filename</span>.<span class="nv">sql</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">pg_restore -U username -d dbname -1 filename.dump
</pre></div>

<p>Check out their respective manpages - there's quite a few options that affect
how the restore works. You may have to clean out your "live" databases or
recreate them from template0 (as pointed out in a comment) before restoring,
depending on how the dumps were generated.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>create backup</strong></p>
<div class="code"><pre class="code literal-block">pg_dump -h localhost -p 5432 -U postgres -F c -b -v -f 
"/usr/local/backup/10.70.0.61.backup" old_db
</pre></div>

<p><code>-F c</code> is <em>custom format</em> (compressed, and able to do in parallel with <code>-j N</code>)
<code>-b</code> is <em>including blobs</em> , <code>-v</code> is <em>verbose</em> , <code>-f</code> is the <em>backup file
name</em>.</p>
<p><strong>restore from backup</strong></p>
<div class="code"><pre class="code literal-block">pg_restore -h localhost -p 5432 -U postgres -d old_db -v 
"/usr/local/backup/10.70.0.61.backup"
</pre></div>

<p><em>important to set<code>-h localhost</code> - option</em></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/error-while-installing-json-gem-mkmf-rb-can-t-find-header-files-for-ruby/" class="u-url">Error while installing json gem 'mkmf.rb can't find header files for ruby'</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/error-while-installing-json-gem-mkmf-rb-can-t-find-header-files-for-ruby/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:24:55+08:00" itemprop="datePublished" title="2023-03-03 04:24">2023-03-03 04:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>For context, it on a remote server which has a firewall. I'm setting up my
environment through a proxy. I have <code>ruby 1.8.7</code>. When I try to gem install..</p>
<div class="code"><pre class="code literal-block">sudo gem install --http-proxy &lt;host address&gt;:&lt;port&gt; json
</pre></div>

<p>I get the following error:</p>
<div class="code"><pre class="code literal-block"><span class="nv">Building</span><span class="w"> </span><span class="nv">native</span><span class="w"> </span><span class="nv">extensions</span>.<span class="w">  </span><span class="nv">This</span><span class="w"> </span><span class="nv">could</span><span class="w"> </span><span class="nv">take</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="k">while</span>...
<span class="nv">ERROR</span>:<span class="w">  </span><span class="nv">Error</span><span class="w"> </span><span class="nv">installing</span><span class="w"> </span><span class="nv">json</span>:
<span class="w">        </span><span class="nv">ERROR</span>:<span class="w"> </span><span class="nv">Failed</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">build</span><span class="w"> </span><span class="nv">gem</span><span class="w"> </span><span class="nv">native</span><span class="w"> </span><span class="nv">extension</span>.

<span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">ruby</span><span class="w"> </span><span class="nv">extconf</span>.<span class="nv">rb</span>
<span class="nv">mkmf</span>.<span class="nv">rb</span><span class="w"> </span><span class="nv">can</span><span class="err">'t find header files for ruby at /usr/lib/ruby/ruby.h</span>

<span class="err">Gem files will remain installed in /usr/lib64/ruby/gems/1.8/gems/json-1.8.1 for inspection.</span>
<span class="err">Results logged to /usr/lib64/ruby/gems/1.8/gems/json-1.8.1/ext/json/ext/generator/gem_make.out</span>
</pre></div>

<p>Since I was unsure what the problem is, I googled and found these</p>
<ul>
<li>
<p>gem install: Failed to build gem native extension (can't find header files) - the instructions here seem to be specific to the gem being installed.</p>
</li>
<li>
<p>How to install json gem - Failed to build gem native extension This seems to be slightly different error.</p>
</li>
</ul>
<p>Any hints? Thanks!</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Modern era update, as stated by mimoralea:</p>
<blockquote>
<p>In case that you are using ruby 2.0 or 2.2 (thanks @patrick-davey).</p>
<div class="code"><pre class="code literal-block">sudo apt-get install ruby2.0-dev
sudo apt-get install ruby2.2-dev
sudo apt-get install ruby2.3-dev
</pre></div>

</blockquote>
<p>or, generic way:</p>
<blockquote>
<div class="code"><pre class="code literal-block">sudo apt-get install ruby-dev
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">sudo apt-get install ruby`ruby -e 'puts RUBY_VERSION[/\d+\.\d+/]'`-dev
</pre></div>

</blockquote>
<hr>
<p>The first link you’ve posted is <em>exactly</em> your case: there is no ruby
development environment installed. Development env is needed to compile ruby
extensions, which are mostly written in <code>C</code>. Proxy has nothing to do with the
problem: everything is downloaded fine, just compilation fails.</p>
<p>I would suggest you to install <code>ruby-dev</code> (<code>ruby-devel</code> for rpm-based distros)
package onto you target machine.</p>
<p><code>gcc</code> package might be needed as well.</p>
<p>Try:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ruby-dev
</pre></div>

<p>Or, for Redhat distro:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>ruby-devel
</pre></div>

<p>Or, for [open]SuSE:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>sudo<span class="w"> </span>zypper<span class="w"> </span>install<span class="w"> </span>ruby-devel
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>For <strong>Xcode 11 on macOS 10.14</strong> , this can happen even after installing Xcode
and installing command-line tools and accepting the license with</p>
<div class="code"><pre class="code literal-block">sudo xcode-select --install
sudo xcodebuild -license accept
</pre></div>

<p>The issue is that Xcode 11 ships the macOS 10.15 SDK which includes headers
for ruby2.6, but not for macOS 10.14's ruby2.3. You can verify that this is
your problem by running</p>
<div class="code"><pre class="code literal-block">ruby -rrbconfig -e 'puts RbConfig::CONFIG["rubyhdrdir"]'
</pre></div>

<p>which on macOS 10.14 with Xcode 11 prints the <strong>non-existent</strong> path</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="nv">Applications</span><span class="o">/</span><span class="nv">Xcode</span>.<span class="nv">app</span><span class="o">/</span><span class="nv">Contents</span><span class="o">/</span><span class="nv">Developer</span><span class="o">/</span><span class="nv">Platforms</span><span class="o">/</span><span class="nv">MacOSX</span>.<span class="nv">platform</span><span class="o">/</span><span class="nv">Developer</span><span class="o">/</span><span class="nv">SDKs</span><span class="o">/</span><span class="nv">MacOSX10</span>.<span class="mi">15</span>.<span class="nv">sdk</span><span class="o">/</span><span class="nv">System</span><span class="o">/</span><span class="nv">Library</span><span class="o">/</span><span class="nv">Frameworks</span><span class="o">/</span><span class="nv">Ruby</span>.<span class="nv">framework</span><span class="o">/</span><span class="nv">Versions</span><span class="o">/</span><span class="mi">2</span>.<span class="mi">3</span><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="k">include</span><span class="o">/</span><span class="nv">ruby</span><span class="o">-</span><span class="mi">2</span>.<span class="mi">3</span>.<span class="mi">0</span>
</pre></div>

<p>However, Xcode 11 installs a macOS 10.14 SDK within
<code>/Library/Developer/CommandLineTools/SDKs/MacOS10.14.sdk</code>. It isn't necessary
to pollute the system directories by installing the old header files as
suggested in other answers. Instead, by selecting that SDK, the appropriate
ruby2.3 headers will be found:</p>
<div class="code"><pre class="code literal-block">sudo xcode-select --switch /Library/Developer/CommandLineTools
ruby -rrbconfig -e 'puts RbConfig::CONFIG["rubyhdrdir"]'
</pre></div>

<p>This should now correctly print</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="nv">Library</span><span class="o">/</span><span class="nv">Developer</span><span class="o">/</span><span class="nv">CommandLineTools</span><span class="o">/</span><span class="nv">SDKs</span><span class="o">/</span><span class="nv">MacOSX10</span>.<span class="mi">14</span>.<span class="nv">sdk</span><span class="o">/</span><span class="nv">System</span><span class="o">/</span><span class="nv">Library</span><span class="o">/</span><span class="nv">Frameworks</span><span class="o">/</span><span class="nv">Ruby</span>.<span class="nv">framework</span><span class="o">/</span><span class="nv">Versions</span><span class="o">/</span><span class="mi">2</span>.<span class="mi">3</span><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="k">include</span><span class="o">/</span><span class="nv">ruby</span><span class="o">-</span><span class="mi">2</span>.<span class="mi">3</span>.<span class="mi">0</span>
</pre></div>

<p>Likewise, <code>gem install</code> should work while that SDK is selected.</p>
<p>To switch back to the current Xcode SDK, use</p>
<div class="code"><pre class="code literal-block">sudo xcode-select --switch /Applications/Xcode.app
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1581.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1579.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
