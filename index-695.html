<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 695) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-695.html">
<link rel="prev" href="index-696.html" type="text/html">
<link rel="next" href="index-694.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-convert-a-byte-array-to-a-hex-string-in-java/" class="u-url">How to convert a byte array to a hex string in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-convert-a-byte-array-to-a-hex-string-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:31:30+08:00" itemprop="datePublished" title="2023-02-17 13:31">2023-02-17 13:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a byte array filled with hex numbers and printing it the easy way is
pretty pointless because there are many unprintable elements. What I need is
the exact hexcode in the form of: <code>3a5f771c</code></p>
<p><br><br></p>
<h2>Answer</h2>
<p>From the discussion here, and especially this answer, this is the function I
currently use:</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="nc">char</span><span class="err">[]</span><span class="w"> </span><span class="n">HEX_ARRAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"0123456789ABCDEF"</span><span class="p">.</span><span class="n">toCharArray</span><span class="p">();</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">bytesToHex</span><span class="p">(</span><span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nc">char</span><span class="err">[]</span><span class="w"> </span><span class="n">hexChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nc">char</span><span class="o">[</span><span class="n">bytes.length * 2</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bytes</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">;</span>
<span class="w">        </span><span class="n">hexChars</span><span class="o">[</span><span class="n">j * 2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HEX_ARRAY</span><span class="o">[</span><span class="n">v &gt;&gt;&gt; 4</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">hexChars</span><span class="o">[</span><span class="n">j * 2 + 1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HEX_ARRAY</span><span class="o">[</span><span class="n">v &amp; 0x0F</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">hexChars</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<p>My own tiny benchmarks (a million bytes a thousand times, 256 bytes 10 million
times) showed it to be much faster than any other alternative, about half the
time on long arrays. Compared to the answer I took it from, switching to
bitwise ops --- as suggested in the discussion --- cut about 20% off of the
time for long arrays. (Edit: When I say it's faster than the alternatives, I
mean the alternative code offered in the discussions. Performance is
equivalent to Commons Codec, which uses very similar code.)</p>
<p>2k20 version, with respect to Java 9 compact strings:</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">HEX_ARRAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"0123456789ABCDEF"</span><span class="p">.</span><span class="n">getBytes</span><span class="p">(</span><span class="n">StandardCharsets</span><span class="p">.</span><span class="n">US_ASCII</span><span class="p">);</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">bytesToHex</span><span class="p">(</span><span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">bytes</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">byte</span><span class="err">[]</span><span class="w"> </span><span class="n">hexChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">byte</span><span class="o">[</span><span class="n">bytes.length * 2</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bytes</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">;</span>
<span class="w">        </span><span class="n">hexChars</span><span class="o">[</span><span class="n">j * 2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HEX_ARRAY</span><span class="o">[</span><span class="n">v &gt;&gt;&gt; 4</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="n">hexChars</span><span class="o">[</span><span class="n">j * 2 + 1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HEX_ARRAY</span><span class="o">[</span><span class="n">v &amp; 0x0F</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">hexChars</span><span class="p">,</span><span class="w"> </span><span class="n">StandardCharsets</span><span class="p">.</span><span class="n">UTF_8</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The Apache Commons Codec library has a Hex class for doing just this type of
work.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">org.apache.commons.codec.binary.Hex</span><span class="p">;</span>

<span class="n">String</span> <span class="n">foo</span> <span class="o">=</span> <span class="s2">"I am a string"</span><span class="p">;</span>
<span class="n">byte</span><span class="p">[]</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="n">foo</span><span class="o">.</span><span class="n">getBytes</span><span class="p">();</span>
<span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span> <span class="n">Hex</span><span class="o">.</span><span class="n">encodeHexString</span><span class="p">(</span> <span class="nb">bytes</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/fixed-position-but-relative-to-container/" class="u-url">Fixed position but relative to container</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/fixed-position-but-relative-to-container/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:30:59+08:00" itemprop="datePublished" title="2023-02-17 13:30">2023-02-17 13:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to fix a <code>div</code> so it always sticks to the top of the screen,
using:</p>
<div class="code"><pre class="code literal-block"><span class="n">position</span><span class="o">:</span><span class="w"> </span><span class="n">fixed</span><span class="o">;</span>
<span class="n">top</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="n">px</span><span class="o">;</span>
<span class="n">right</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="n">px</span><span class="o">;</span>
</pre></div>

<p>However, the <code>div</code> is inside a centered container. When I use <code>position:fixed</code>
it fixes the <code>div</code> relative to the browser window, such as it's up against the
right side of the browser. Instead, it should be fixed relative to the
container.</p>
<p>I know that <code>position:absolute</code> can be used to fix an element relative to the
<code>div</code>, but when you scroll down the page the element vanishes and doesn't
stick to the top as with <code>position:fixed</code>.</p>
<p>Is there a hack or workaround to achieve this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Short answer: <del>no.</del> (It is now possible with CSS transform. See the edit
below)</p>
<p>Long answer: The problem with using "fixed" positioning is that it takes the
element <strong>out of flow</strong>. thus it can't be re-positioned relative to its parent
because it's as if it didn't have one. If, however, the container is of a
fixed, known width, you can use something like:</p>
<div class="code"><pre class="code literal-block"><span class="p">#</span><span class="nn">fixedContainer</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">fixed</span><span class="p">;</span>
<span class="w">  </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
<span class="w">  </span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="p">;</span>
<span class="w">  </span><span class="k">margin-left</span><span class="p">:</span><span class="w"> </span><span class="mi">-300</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="c">/*half the width*/</span>
<span class="p">}</span>
</pre></div>

<p>http://jsfiddle.net/HFjU6/1/</p>
<h4>Edit (03/2015):</h4>
<p>This is outdated information. It is now possible to center content of an
dynamic size (horizontally and vertically) with the help of the magic of CSS3
transform. The same principle applies, but instead of using margin to offset
your container, you can use <code>translateX(-50%)</code>. This doesn't work with the
above margin trick because you don't know how much to offset it unless the
width is fixed and you can't use relative values (like <code>50%</code>) because it will
be relative to the parent and not the element it's applied to. <code>transform</code>
behaves differently. Its values are relative to the element they are applied
to. Thus, <code>50%</code> for <code>transform</code> means half the width of the element, while
<code>50%</code> for margin is half of the parent's width. This is an IE9+ solution</p>
<p>Using similar code to the above example, I recreated the same scenario using
completely dynamic width and height:</p>
<div class="code"><pre class="code literal-block"><span class="p">.</span><span class="nc">fixedContainer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="mh">#ddd</span><span class="p">;</span>
<span class="w">    </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">fixed</span><span class="p">;</span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">em</span><span class="p">;</span>
<span class="w">    </span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="k">transform</span><span class="p">:</span><span class="w"> </span><span class="nb">translateX</span><span class="p">(</span><span class="nv">-50</span><span class="err">%</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>If you want it to be centered, you can do that too:</p>
<div class="code"><pre class="code literal-block"><span class="p">.</span><span class="nc">fixedContainer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="mh">#ddd</span><span class="p">;</span>
<span class="w">    </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">fixed</span><span class="p">;</span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">em</span><span class="p">;</span>
<span class="w">    </span><span class="k">left</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="k">transform</span><span class="p">:</span><span class="w"> </span><span class="nb">translate</span><span class="p">(</span><span class="nv">-50</span><span class="err">%</span><span class="p">,</span><span class="w"> </span><span class="nv">-50</span><span class="err">%</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h4>Demos:</h4>
<p>jsFiddle: Centered horizontally only<br>
jsFiddle: Centered both horizontally and vertically<br>
Original credit goes to user aaronk6 for pointing it out to me in this answer</p>
<p><br></p>
<h3>Suggest</h3>
<p>Actually this is possible and the accepted answer only deals with
centralising, which is straightforward enough. Also you really don't need to
use JavaScript.</p>
<h4>This will let you deal with any scenario:</h4>
<p>Set everything up as you would if you want to position: absolute inside a
position: relative container, and then create a new fixed position div inside
the div with <code>position: absolute</code>, but do <strong>not</strong> set its top and left
properties. It will then be fixed wherever you want it, relative to the
container.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block">/*<span class="w"> </span>Main<span class="w"> </span>site<span class="w"> </span>body<span class="w"> </span>*/
.wrapper<span class="w"> </span>{
<span class="w">    </span>width:<span class="w"> </span>940px;
<span class="w">    </span>margin:<span class="w"> </span>0<span class="w"> </span>auto;
<span class="w">    </span>position:<span class="w"> </span>relative;<span class="w"> </span>/*<span class="w"> </span>Ensure<span class="w"> </span>absolute<span class="w"> </span>positioned<span class="w"> </span>child<span class="w"> </span>elements<span class="w"> </span>are<span class="w"> </span>relative<span class="w"> </span>to<span class="w"> </span>this*/
}

/*<span class="w"> </span>Absolute<span class="w"> </span>positioned<span class="w"> </span>wrapper<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>element<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>fix<span class="w"> </span>position<span class="w"> </span>*/
.fixed-wrapper<span class="w"> </span>{
<span class="w">    </span>width:<span class="w"> </span>220px;
<span class="w">    </span>position:<span class="w"> </span>absolute;
<span class="w">    </span>top:<span class="w"> </span>0;
<span class="w">    </span>left:<span class="w"> </span>-240px;<span class="w"> </span>/*<span class="w"> </span>Move<span class="w"> </span>this<span class="w"> </span>out<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>left<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>site<span class="w"> </span>body,<span class="w"> </span>leaving<span class="w"> </span>a<span class="w"> </span>20px<span class="w"> </span>gutter<span class="w"> </span>*/
}

/*<span class="w"> </span>The<span class="w"> </span>element<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>fix<span class="w"> </span>the<span class="w"> </span>position<span class="w"> </span>of<span class="w"> </span>*/
.fixed<span class="w"> </span>{
<span class="w">    </span>width:<span class="w"> </span>220px;
<span class="w">    </span>position:<span class="w"> </span>fixed;
<span class="w">    </span>/*<span class="w"> </span>Do<span class="w"> </span>not<span class="w"> </span>set<span class="w"> </span>top<span class="w"> </span>/<span class="w"> </span>left!<span class="w"> </span>*/
}


<span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"fixed-wrapper"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"fixed"</span><span class="nt">&gt;</span>
<span class="w">            </span>Content<span class="w"> </span>in<span class="w"> </span>here<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>fixed<span class="w"> </span>position,<span class="w"> </span>but<span class="w"> </span>240px<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>left<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>site<span class="w"> </span>body.
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>Sadly, I was hoping this thread might solve my issue with Android's WebKit
rendering box-shadow blur pixels as margins on fixed position elements, but it
seems it's a bug.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/restful-authentication/" class="u-url">RESTful Authentication</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/restful-authentication/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:30:12+08:00" itemprop="datePublished" title="2023-02-17 13:30">2023-02-17 13:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What does RESTful Authentication mean and how does it work? I can't find a
good overview on Google. My only understanding is that you pass the session
key (remeberal) in the URL, but this could be horribly wrong.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>How to handle authentication in a RESTful Client-Server architecture is a
matter of debate.</p>
<p>Commonly, it can be achieved, in the SOA over HTTP world via:</p>
<ul>
<li>HTTP basic auth over HTTPS;</li>
<li>Cookies and session management;</li>
<li>Token in HTTP headers (e.g. <em>OAuth</em> 2.0 + JWT);</li>
<li>Query Authentication with additional signature parameters.</li>
</ul>
<p>You'll have to adapt, or even better mix those techniques, to match your
software architecture at best.</p>
<p>Each authentication scheme has its own PROs and CONs, depending on the purpose
of your security policy and software architecture.</p>
<p><strong>HTTP basic auth over HTTPS</strong></p>
<p>This first solution, based on the standard HTTPS protocol, is used by most web
services.</p>
<div class="code"><pre class="code literal-block"><span class="nf">GET</span> <span class="nn">/spec.html</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.example.org</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==</span>
</pre></div>

<p>It's easy to implement, available by default on all browsers, but has some
known drawbacks, like the awful authentication window displayed on the
Browser, which will persist (there is no LogOut-like feature here), some
server-side additional CPU consumption, and the fact that the user-name and
password are transmitted (over HTTPS) into the Server (it should be more
secure to let the password stay only on the client side, during keyboard
entry, and be stored as secure hash on the Server).</p>
<p>We may use Digest Authentication, but it requires also HTTPS, since it is
vulnerable to MiM or Replay attacks, and is specific to HTTP.</p>
<p><strong>Session via Cookies</strong></p>
<p>To be honest, a session managed on the Server is not truly Stateless.</p>
<p>One possibility could be to maintain all data within the cookie content. And,
by design, the cookie is handled on the Server side (Client, in fact, does
even not try to interpret this cookie data: it just hands it back to the
server on each successive request). But this cookie data is application state
data, so the client should manage it, not the server, in a pure Stateless
world.</p>
<div class="code"><pre class="code literal-block"><span class="nf">GET</span> <span class="nn">/spec.html</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">www.example.org</span>
<span class="na">Cookie</span><span class="o">:</span> <span class="l">theme=light; sessionToken=abc123</span>
</pre></div>

<p>The cookie technique itself is HTTP-linked, so it's not truly RESTful, which
should be protocol-independent, IMHO. It is vulnerable to MiM or Replay
attacks.</p>
<p><strong>Granted via Token (OAuth2)</strong></p>
<p>An alternative is to put a token within the HTTP headers so that the request
is authenticated. This is what <em>OAuth</em> 2.0 does, for instance. See the RFC
6749:</p>
<div class="code"><pre class="code literal-block"> GET /resource/1 HTTP/1.1
 Host: example.com
 Authorization: Bearer mF_9.B5f-4.1JqM
</pre></div>

<p>In short, this is very similar to a cookie and suffers to the same issues: not
stateless, relying on HTTP transmission details, and subject to a lot of
security weaknesses - including MiM and Replay - so is to be used only over
HTTPS. Typically, a JWT is used as a token.</p>
<p><strong>Query Authentication</strong></p>
<p>Query Authentication consists in signing each RESTful request via some
additional parameters on the URI. See this reference article.</p>
<p>It was defined as such in this article:</p>
<blockquote>
<p>All REST queries must be authenticated by signing the query parameters
sorted in lower-case, alphabetical order using the private credential as the
signing token. Signing should occur before URL encoding the query string.</p>
</blockquote>
<p>This technique is perhaps the more compatible with a Stateless architecture,
and can also be implemented with a light session management (using in-memory
sessions instead of DB persistence).</p>
<p>For instance, here is a generic URI sample from the link above:</p>
<div class="code"><pre class="code literal-block"><span class="err">GET /object?apiKey=Qwerty2010</span>
</pre></div>

<p>should be transmitted as such:</p>
<div class="code"><pre class="code literal-block"><span class="err">GET /object?timestamp=1261496500&amp;apiKey=Qwerty2010&amp;signature=abcdef0123456789</span>
</pre></div>

<p>The string being signed is <code>/object?apikey=Qwerty2010&amp;timestamp=1261496500</code>
and the signature is the SHA256 hash of that string using the private
component of the API key.</p>
<p>Server-side data caching can be always available. For instance, in our
framework, we cache the responses at the SQL level, not at the URI level. So
adding this extra parameter doesn't break the cache mechanism.</p>
<p>See this article for some details about RESTful authentication in our client-
server ORM/SOA/MVC framework, based on JSON and REST. Since we allow
communication not only over HTTP/1.1, but also named pipes or GDI messages
(locally), we tried to implement a truly RESTful authentication pattern, and
not rely on HTTP specificity (like header or cookies).</p>
<p><em>Later Note</em> : adding a signature in the URI can be seen as bad practice
(since for instance it will appear in the http server logs) so it has to be
mitigated, e.g. by a proper TTL to avoid replays. But if your http logs are
compromised, you will certainly have bigger security problems.</p>
<p>In practice, the upcoming MAC Tokens Authentication for OAuth 2.0 may be a
huge improvement in respect to the "Granted by Token" current scheme. But this
is still a work in progress and is tied to HTTP transmission.</p>
<p><strong>Conclusion</strong></p>
<p>It's worth concluding that REST is not only HTTP-based, even if, in practice,
it's also mostly implemented over HTTP. REST can use other communication
layers. So a RESTful authentication is not just a synonym of HTTP
authentication, whatever Google answers. It should even not use the HTTP
mechanism at all but shall be abstracted from the communication layer. And if
you use HTTP communication, thanks to the Let's Encrypt initiative there is no
reason not to use proper HTTPS, which is required in addition to any
authentication scheme.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I doubt whether the people enthusiastically shouting "HTTP Authentication"
ever tried making a browser-based application (instead of a machine-to-machine
web service) with REST (no offense intended - I just don't think they ever
faced the complications).</p>
<p>Problems I found with using HTTP Authentication on RESTful services that
produce HTML pages to be viewed in a browser are:</p>
<ul>
<li>user typically gets an ugly browser-made login box, which is very user-unfriendly. you cannot add password retrieval, help boxes, etcetera.</li>
<li>logging out or logging in under a different name is a problem - browsers will keep sending authentication information to the site until you close the window</li>
<li>timeouts are difficult</li>
</ul>
<p>A very insightful article that tackles these point by point is here, but this
results in a <em>lot</em> of browser-specific javascript hackery, workarounds for
workarounds, et cetera. As such, it is also not forward-compatible so will
require constant maintenance as new browsers are released. I do not consider
that clean and clear design, plus I feel it is a lot of extra work and
headache just so that I can enthusiastically show my REST-badge to my friends.</p>
<p>I believe cookies are the solution. But wait, cookies are evil, aren't they?
No, they're not, the way cookies are often used is evil. A cookie itself is
just a piece of client-side information, just like the HTTP authentication
info that the browser would keep track of while you browse. And this piece of
client-side information is sent to the server at every request, again just
like the HTTP Authentication info would be. Conceptually, the only difference
is that the <em>content</em> of this piece of client-side state can be determined by
the <em>server</em> as part of its response.</p>
<p>By making sessions a RESTful resource with just the following rules:</p>
<ul>
<li>A <em>session</em> maps a key to a user id (and possibly a last-action-timestamp for timeouts)</li>
<li>If a <em>session</em> exists, then that means that the key is valid.</li>
<li>Login means POSTing to /sessions, a new key is set as a cookie</li>
<li>Logout means DELETEing /sessions/{key} (with the overloaded POST, remember, we're a browser, and HTML 5 is a long way to go yet)</li>
<li>Authentication is done by sending the key as a cookie at every request and checking whether the session exists and is valid</li>
</ul>
<p>The only difference to HTTP Authentication, now, is that the authentication
key is generated by the server and sent to the client who keeps sending it
back, instead of the client computing it from the entered credentials.</p>
<p>converter42 adds that when using https (which we should), it is important that
the cookie will have its secure flag set so that authentication info is never
sent over a non-secure connection. Great point, hadn't seen it myself.</p>
<p>I feel that this is a sufficient solution that works fine, but I must admit
that I'm not enough of a security expert to identify potential holes in this
scheme - all I know is that hundreds of non-RESTful web applications use
essentially the same login protocol ($_SESSION in PHP, HttpSession in Java EE,
etc.). The cookie header contents are simply used to address a server-side
resource, just like an accept-language might be used to access translation
resources, etcetera. I feel that it is the same, but maybe others don't? What
do you think, guys?</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-696.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-694.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
