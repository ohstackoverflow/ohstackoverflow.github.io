<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2357) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2357.html">
<link rel="prev" href="index-2358.html" type="text/html">
<link rel="next" href="index-2356.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/rbenv-not-changing-ruby-version/" class="u-url">rbenv not changing ruby version</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/rbenv-not-changing-ruby-version/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T10:08:00+08:00" itemprop="datePublished" title="2023-03-04 10:08">2023-03-04 10:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I installed rbenv according to the github directions. I am running OSX but I
have tried this on a Ubuntu 12.04 VM and got the same results. The following
is what i get in my terminal when I try to change ruby versions:</p>
<div class="code"><pre class="code literal-block">rbenv versions
* 1.9.3-p0 (set by /Users/user/.rbenv/version)
1.9.3-p125

rbenv global
1.9.3-p0

rbenv rehash

ruby -v
ruby 1.8.7 (2011-12-28 patchlevel 357) [universal-darwin11.0]

which ruby
/usr/bin/ruby
</pre></div>

<p>Anyone have any ideas as to why rbenv isn't switching the ruby version like it
thinks it is? Also there is no .rbenv file in the local directory that would
be causing the ruby version to default to 1.8.7</p>
<div class="code"><pre class="code literal-block"><span class="nv">rbenv</span><span class="w"> </span><span class="nv">local</span>
<span class="nv">rbenv</span>:<span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">local</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="nv">configured</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">directory</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Check that PATH contains <code>$HOME/.rbenv/shims</code> and <code>$HOME/.rbenv/bin</code></p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>env<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>PATH
</pre></div>

<p>Also check that you have the following in your ~/.bash_profile if using bash
or ~/.zshenv if using zsh</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">PATH</span><span class="o">=</span><span class="s2">"$HOME/.rbenv/bin:$PATH"</span>
<span class="n">eval</span><span class="w"> </span><span class="s2">"$(rbenv init -)"</span>
</pre></div>

<p>NOTE: Make sure it's the last setting in your ~/.bash_profile . I ran into an
issue where I installed a program that updated my .bash_profile and reset
PATH.</p>
<p>Finally, make sure your <code>$HOME</code> folder doesn't have a <code>.ruby-version</code> file
that you may have created by accident if you were to have done <code>$ rbenv local
&lt;ruby-version&gt;</code> in your <code>$HOME</code> folder. Doing <code>$ rbenv global &lt;ruby-version&gt;</code>
modifies the <code>$HOME/.rbenv/version</code> file, and the existence of a <code>.ruby-
version</code> file in the <code>$HOME</code> folder would override the version set by
<code>$HOME/.rbenv/version</code>.</p>
<p>From the docs:</p>
<blockquote>
<p>Choosing the Ruby Version When you execute a shim, rbenv determines which
Ruby version to use by reading it from the following sources, in this order:</p>
<p>The RBENV_VERSION environment variable, if specified. You can use the rbenv
shell command to set this environment variable in your current shell
session.</p>
<p>The first .ruby-version file found by searching the directory of the script
you are executing and each of its parent directories until reaching the root
of your filesystem.</p>
<p>The first .ruby-version file found by searching the current working
directory and each of its parent directories until reaching the root of your
filesystem. You can modify the .ruby-version file in the current working
directory with the rbenv local command.</p>
<p>The global ~/.rbenv/version file. You can modify this file using the rbenv
global command. If the global version file is not present, rbenv assumes you
want to use the "system" Ruby—i.e. whatever version would be run if rbenv
weren't in your path.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>I fixed this by adding the following to my <code>~/.bash_profile</code>:</p>
<div class="code"><pre class="code literal-block"><span class="c1">#PATH for rbenv</span>
<span class="k">export</span><span class="w"> </span><span class="n">PATH</span><span class="o">=</span><span class="s2">"$HOME/.rbenv/shims:$PATH"</span>
</pre></div>

<p>This is what is documented at https://github.com/sstephenson/rbenv.</p>
<p>From what I can tell there <strong>isn't</strong> <code>~/.rbenv/bin</code> directory, which was
mentioned in the post by @rodowi.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/node-env-is-not-recognized-as-an-internal-or-external-command-operable-command-or-batch-file/" class="u-url">"NODE_ENV" is not recognized as an internal or external command, operable command or batch file</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/node-env-is-not-recognized-as-an-internal-or-external-command-operable-command-or-batch-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T10:06:28+08:00" itemprop="datePublished" title="2023-03-04 10:06">2023-03-04 10:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to setup an environment for a Node.js app. but I'm getting this
error every time.</p>
<blockquote>
<p>"NODE_ENV" is not recognized as an internal or external command, operable
command or batch file.</p>
</blockquote>
<p>What does this mean and how can I solve this problem?</p>
<p>I'm using Windows and also tried <code>set NODE_ENV=development</code> but had no luck.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It sounds like your error comes from an attempt to run something like this
(which works in Linux)</p>
<div class="code"><pre class="code literal-block">NODE_ENV=development node foo.js
</pre></div>

<p>the equivalent in Windows would be</p>
<div class="code"><pre class="code literal-block">SET NODE_ENV=development
node foo.js
</pre></div>

<p>running in the same command shell. You mentioned set NODE_ENV did not work,
but wasn't clear how/when you executed it.</p>
<p><br></p>
<h3>Suggest</h3>
<p>It sounds like your error comes from an attempt to run something like this
(which works in Linux)</p>
<div class="code"><pre class="code literal-block">NODE_ENV=development node foo.js
</pre></div>

<p>the equivalent in Windows would be</p>
<div class="code"><pre class="code literal-block">SET NODE_ENV=development
node foo.js
</pre></div>

<p>running in the same command shell. You mentioned set NODE_ENV did not work,
but wasn't clear how/when you executed it.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/understanding-get-and-set-and-python-descriptors/" class="u-url">Understanding __get__ and __set__ and Python descriptors</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/understanding-get-and-set-and-python-descriptors/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T10:05:32+08:00" itemprop="datePublished" title="2023-03-04 10:05">2023-03-04 10:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am <em>trying</em> to understand what Python's descriptors are and what they are
useful for. I understand how they work, but here are my doubts. Consider the
following code:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Celsius</span>(<span class="n">object</span>):
    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>, <span class="nb">value</span>=<span class="mf">0.0</span>):
        <span class="nb">self</span>.<span class="nb">value</span> = <span class="n">float</span>(<span class="nb">value</span>)
    <span class="n">def</span> <span class="n">__get__</span>(<span class="nb">self</span>, <span class="n">instance</span>, <span class="n">owner</span>):
        <span class="k">return</span> <span class="nb">self</span>.<span class="nb">value</span>
    <span class="n">def</span> <span class="n">__set__</span>(<span class="nb">self</span>, <span class="n">instance</span>, <span class="nb">value</span>):
        <span class="nb">self</span>.<span class="nb">value</span> = <span class="n">float</span>(<span class="nb">value</span>)


<span class="k">class</span> <span class="n">Temperature</span>(<span class="n">object</span>):
    <span class="n">celsius</span> = <span class="n">Celsius</span>()
</pre></div>

<ol>
<li>
<p>Why do I need the descriptor class?</p>
</li>
<li>
<p>What is <code>instance</code> and <code>owner</code> here? (in <code>__get__</code>). What is the purpose of these parameters?</p>
</li>
<li>
<p>How would I call/use this example?</p>
</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>The descriptor is how Python's <code>property</code> type is implemented. A descriptor
simply implements <code>__get__</code>, <code>__set__</code>, etc. and is then added to another
class in its definition (as you did above with the Temperature class). For
example:</p>
<div class="code"><pre class="code literal-block">temp=Temperature()
temp.celsius #calls celsius.__get__
</pre></div>

<p>Accessing the property you assigned the descriptor to (<code>celsius</code> in the above
example) calls the appropriate descriptor method.</p>
<p><code>instance</code> in <code>__get__</code> is the instance of the class (so above, <code>__get__</code>
would receive <code>temp</code>, while <code>owner</code> is the class with the descriptor (so it
would be <code>Temperature</code>).</p>
<p>You need to use a descriptor class to encapsulate the logic that powers it.
That way, if the descriptor is used to cache some expensive operation (for
example), it could store the value on itself and not its class.</p>
<p>An article about descriptors can be found here.</p>
<p>EDIT: As jchl pointed out in the comments, if you simply try
<code>Temperature.celsius</code>, <code>instance</code> will be <code>None</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>Why do I need the descriptor class?</p>
</blockquote>
<p>It gives you extra control over how attributes work. If you're used to getters
and setters in Java, for example, then it's Python's way of doing that. One
advantage is that it looks to users just like an attribute (there's no change
in syntax). So you can start with an ordinary attribute and then, when you
need to do something fancy, switch to a descriptor.</p>
<p>An attribute is just a mutable value. A descriptor lets you execute arbitrary
code when reading or setting (or deleting) a value. So you could imagine using
it to map an attribute to a field in a database, for example – a kind of ORM.</p>
<p>Another use might be refusing to accept a new value by throwing an exception
in <code>__set__</code> – effectively making the "attribute" read only.</p>
<blockquote>
<p>What is <code>instance</code> and <code>owner</code> here? (in <code>__get__</code>). What is the purpose of
these parameters?</p>
</blockquote>
<p>This is pretty subtle (and the reason I am writing a new answer here - I found
this question while wondering the same thing and didn't find the existing
answer that great).</p>
<p>A descriptor is defined on a class, but is typically called from an instance.
When it's called from an instance both <code>instance</code> and <code>owner</code> are set (and you
can work out <code>owner</code> from <code>instance</code> so it seems kinda pointless). But when
called from a class, only <code>owner</code> is set – which is why it's there.</p>
<p>This is only needed for <code>__get__</code> because it's the only one that can be called
on a class. If you set the class value you set the descriptor itself.
Similarly for deletion. Which is why the <code>owner</code> isn't needed there.</p>
<blockquote>
<p>How would I call/use this example?</p>
</blockquote>
<p>Well, here's a cool trick using similar classes:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Celsius:</span>

    <span class="n">def</span> <span class="n">__get__</span>(<span class="nb">self</span>, <span class="n">instance</span>, <span class="n">owner</span>):
        <span class="k">return</span> <span class="mi">5</span> * (<span class="n">instance</span>.<span class="n">fahrenheit</span> - <span class="mi">32</span>) / <span class="mi">9</span>

    <span class="n">def</span> <span class="n">__set__</span>(<span class="nb">self</span>, <span class="n">instance</span>, <span class="nb">value</span>):
        <span class="n">instance</span>.<span class="n">fahrenheit</span> = <span class="mi">32</span> + <span class="mi">9</span> * <span class="nb">value</span> / <span class="mi">5</span>


<span class="k">class</span> <span class="n">Temperature:</span>

    <span class="n">celsius</span> = <span class="n">Celsius</span>()

    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>, <span class="n">initial_f</span>):
        <span class="nb">self</span>.<span class="n">fahrenheit</span> = <span class="n">initial_f</span>


<span class="nb">t</span> = <span class="n">Temperature</span>(<span class="mi">212</span>)
<span class="nb">print</span>(<span class="nb">t</span>.<span class="n">celsius</span>)
<span class="nb">t</span>.<span class="n">celsius</span> = <span class="mi">0</span>
<span class="nb">print</span>(<span class="nb">t</span>.<span class="n">fahrenheit</span>)
</pre></div>

<p>(I'm using Python 3; for python 2 you need to make sure those divisions are <code>/
5.0</code> and <code>/ 9.0</code>). That gives:</p>
<div class="code"><pre class="code literal-block"><span class="mf">100.0</span>
<span class="mf">32.0</span>
</pre></div>

<p>Now there are other, arguably better ways to achieve the same effect in python
(e.g. if celsius were a property, which is the same basic mechanism but places
all the source inside the Temperature class), but that shows what can be
done...</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2358.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2356.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
