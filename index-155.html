<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 155) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-155.html">
<link rel="prev" href="index-156.html" type="text/html">
<link rel="next" href="index-154.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-exclude-a-directory-when-using-find/" class="u-url">How do I exclude a directory when using `find`?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-exclude-a-directory-when-using-find/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:15:16+08:00" itemprop="datePublished" title="2023-02-16 23:15">2023-02-16 23:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I exclude a specific directory when searching for <code>*.js</code> files using
<code>find</code>?</p>
<div class="code"><pre class="code literal-block">find . -name '*.js'
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Use the <code>-prune</code> primary. For example, if you want to exclude <code>./misc</code>:</p>
<div class="code"><pre class="code literal-block">find . -path ./misc -prune -o -name '*.txt' -print
</pre></div>

<p>To exclude multiple directories, OR them between parentheses.</p>
<div class="code"><pre class="code literal-block">find . -type d \( -path ./dir1 -o -path ./dir2 -o -path ./dir3 \) -prune -o -name '*.txt' -print
</pre></div>

<p>And, to exclude directories with a specific name at any level, use the <code>-name</code>
primary instead of <code>-path</code>.</p>
<div class="code"><pre class="code literal-block">find . -type d -name node_modules -prune -o -name '*.json' -print
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Use the <code>-prune</code> primary. For example, if you want to exclude <code>./misc</code>:</p>
<div class="code"><pre class="code literal-block">find . -path ./misc -prune -o -name '*.txt' -print
</pre></div>

<p>To exclude multiple directories, OR them between parentheses.</p>
<div class="code"><pre class="code literal-block">find . -type d \( -path ./dir1 -o -path ./dir2 -o -path ./dir3 \) -prune -o -name '*.txt' -print
</pre></div>

<p>And, to exclude directories with a specific name at any level, use the <code>-name</code>
primary instead of <code>-path</code>.</p>
<div class="code"><pre class="code literal-block">find . -type d -name node_modules -prune -o -name '*.json' -print
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/comments-in-markdown/" class="u-url">Comments in Markdown</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/comments-in-markdown/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:14:37+08:00" itemprop="datePublished" title="2023-02-16 23:14">2023-02-16 23:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do you write a comment in Markdown, i.e. text that is not rendered in the
HTML output? I found nothing on the Markdown project.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I believe that all the previously proposed solutions (apart from those that
require specific implementations) result in the comments being included in the
output HTML, even if they are not displayed.</p>
<p>If you want a comment that is strictly for yourself (readers of the converted
document should not be able to see it, even with "view source") you could
(ab)use the link labels (for use with reference style links) that are
available in the core Markdown specification:</p>
<p>http://daringfireball.net/projects/markdown/syntax#link</p>
<p>That is:</p>
<div class="code"><pre class="code literal-block"><span class="o">[</span><span class="n">comment</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">comment</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="p">)</span>
<span class="o">[</span><span class="n">comment</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="ow">in</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="n">unless</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="ow">in</span><span class="p">)</span>
<span class="o">[</span><span class="n">comment</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="n">link</span><span class="p">.)</span>
</pre></div>

<p>Or you could go further:</p>
<div class="code"><pre class="code literal-block">[//]: &lt;&gt; (This is also a comment.)
</pre></div>

<p>To improve platform compatibility (and to save one keystroke) it is also
possible to use <code>#</code> (which is a legitimate hyperlink target) instead of <code>&lt;&gt;</code>:</p>
<div class="code"><pre class="code literal-block">[//]: # (This may be the most platform independent comment)
</pre></div>

<p>For maximum portability it is important to insert a blank line before and
after this type of comments, because some Markdown parsers do not work
correctly when definitions brush up against regular text. The most recent
research with Babelmark shows that blank lines before and after are both
important. Some parsers will output the comment if there is no blank line
before, and some parsers will exclude the following line if there is no blank
line after.</p>
<p>In general, this approach should work with most Markdown parsers, since it's
part of the core specification. (even if the behavior when multiple links are
defined, or when a link is defined but never used, is not strictly specified).</p>
<p><br></p>
<h3>Suggest</h3>
<p>I use standard HTML tags, like</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;!---</span>
<span class="n">your</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">goes</span><span class="w"> </span><span class="n">here</span>
<span class="kr">and</span><span class="w"> </span><span class="n">here</span>
<span class="o">--&gt;</span>
</pre></div>

<p>Note the triple dash. The advantage is that it works with pandoc when
generating TeX or HTML output. More information is available on the pandoc-
discuss group.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-tracking-branches-no-longer-on-remote/" class="u-url">Remove tracking branches no longer on remote</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-tracking-branches-no-longer-on-remote/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:13:59+08:00" itemprop="datePublished" title="2023-02-16 23:13">2023-02-16 23:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a simple way to delete all tracking branches whose remote equivalent
no longer exists?</p>
<p>Example:</p>
<p>Branches (local and remote)</p>
<ul>
<li>master</li>
<li>origin/master</li>
<li>origin/bug-fix-a</li>
<li>origin/bug-fix-b</li>
<li>origin/bug-fix-c</li>
</ul>
<p>Locally, I only have a master branch. Now I need to work on <em>bug-fix-a</em> , so I
check it out, work on it, and push changes to the remote. Next I do the same
with <em>bug-fix-b</em>.</p>
<p>Branches (local and remote)</p>
<ul>
<li>master</li>
<li>bug-fix-a</li>
<li>bug-fix-b</li>
<li>origin/master</li>
<li>origin/bug-fix-a</li>
<li>origin/bug-fix-b</li>
<li>origin/bug-fix-c</li>
</ul>
<p>Now I have local branches <em>master</em> , <em>bug-fix-a</em> , <em>bug-fix-b</em>. The Master
branch maintainer will merge my changes into <em>master</em> and delete all branches
he has already merged.</p>
<p>So the current state is now:</p>
<p>Branches (local and remote)</p>
<ul>
<li>master</li>
<li>bug-fix-a</li>
<li>bug-fix-b</li>
<li>origin/master</li>
<li>origin/bug-fix-c</li>
</ul>
<p>Now I would like to call some command to delete branches (in this case <em>bug-
fix-a</em> , <em>bug-fix-b</em> ), which are no longer represented in the remote
repository.</p>
<p>It would be something like the existing command <code>git remote prune origin</code>, but
more like <code>git local prune origin</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>git remote prune origin</code> prunes tracking branches not on the remote.</p>
<p><code>git branch --merged</code> lists branches that have been merged into the current
branch.</p>
<p><code>xargs git branch -d</code> deletes branches listed on standard input.</p>
<p>Be careful deleting branches listed by <code>git branch --merged</code>. The list could
include <code>master</code> or other branches you'd prefer not to delete.</p>
<p>To give yourself the opportunity to edit the list before deleting branches,
you could do the following in one line:</p>
<div class="code"><pre class="code literal-block">git branch --merged &gt;/tmp/merged-branches &amp;&amp; \
  vi /tmp/merged-branches &amp;&amp; xargs git branch -d &lt;/tmp/merged-branches
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The safest way to do this is to use the "plumbing" command <code>git for-each-ref</code>
with the interpolation variable <code>%(upstream:track)</code>, which will be <code>[gone]</code>
when the branch is no longer on the remote:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="k">fetch</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="n">git</span><span class="w"> </span><span class="k">for</span><span class="o">-</span><span class="k">each</span><span class="o">-</span><span class="k">ref</span><span class="w"> </span><span class="c1">--format '%(refname) %(upstream:track)' refs/heads | awk '$2 == "[gone]" {sub("refs/heads/", "", $1); print $1}'); do git branch -D $branch; done</span>
</pre></div>

<p>This approach is somewhat safer than using the "porcelain" command, because
there is no risk of accidentally matching on part of the commit message. Here
is a version using the "porcelain" git commands:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">fetch</span><span class="w"> </span><span class="o">-</span><span class="nv">p</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span>$<span class="ss">(</span><span class="nv">git</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="o">-</span><span class="nv">vv</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="s1">': gone]'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">awk</span><span class="w"> </span><span class="s1">'{print $1}'</span><span class="ss">)</span><span class="c1">; do git branch -D $branch; done</span>
</pre></div>

<p>The way this works is that after the command</p>
<div class="code"><pre class="code literal-block">git fetch -p
</pre></div>

<p>removes the remote references, when you run</p>
<div class="code"><pre class="code literal-block">git branch -vv
</pre></div>

<p>it will show 'gone' as the remote status. For example,</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>branch<span class="w"> </span>-vv
<span class="w">  </span>master<span class="w">                 </span>b900de9<span class="w"> </span><span class="o">[</span>origin/master:<span class="w"> </span>behind<span class="w"> </span><span class="m">4</span><span class="o">]</span><span class="w"> </span>Fixed<span class="w"> </span>bug
<span class="w">  </span>release/v3.8<span class="w">           </span>fdd2f4e<span class="w"> </span><span class="o">[</span>origin/release/v3.8:<span class="w"> </span>behind<span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w"> </span>Fixed<span class="w"> </span>bug
<span class="w">  </span>release/v3.9<span class="w">           </span>0d680d0<span class="w"> </span><span class="o">[</span>origin/release/v3.9:<span class="w"> </span>behind<span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w"> </span>Updated<span class="w"> </span>comments
<span class="w">  </span>bug/1234<span class="w">               </span>57379e4<span class="w"> </span><span class="o">[</span>origin/bug/1234:<span class="w"> </span>gone<span class="o">]</span><span class="w"> </span>Fixed<span class="w"> </span>bug
</pre></div>

<p>This is what the scripts iterate over.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-156.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-154.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
