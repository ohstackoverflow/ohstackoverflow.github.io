<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2158) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2158.html">
<link rel="prev" href="index-2159.html" type="text/html">
<link rel="next" href="index-2157.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-see-what-has-changed-in-a-file-before-committing-to-git/" class="u-url">How can I see what has changed in a file before committing to git?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-see-what-has-changed-in-a-file-before-committing-to-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:18:12+08:00" itemprop="datePublished" title="2023-03-03 19:18">2023-03-03 19:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've noticed that while working on one or two tickets, if I step away, I'm not
sure what I worked on, what changed, etcetera.</p>
<p>Is there a way to see the changes made for a given file before git add and
then git commit?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You're looking for</p>
<h4><code>git diff --staged</code></h4>
<p>Depending on your exact situation, there are three useful ways to use <code>git
diff</code>:</p>
<ol>
<li>
<p>Show differences between index and working tree; that is, changes you haven't staged to commit:</p>
<p>git diff [filename]</p>
</li>
<li>
<p>Show differences between current commit and index; that is, what you're about to commit (<code>--staged</code> does exactly the same thing, use what you like):</p>
<p>git diff --cached [filename]</p>
</li>
<li>
<p>Show differences between current commit and working tree:</p>
<p>git diff HEAD [filename]</p>
</li>
</ol>
<p><code>git diff</code> works recursively on directories, and if no paths are given, it
shows all changes.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Use <code>git-diff</code>:</p>
<div class="code"><pre class="code literal-block">git diff -- yourfile
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sleep-command-in-t-sql/" class="u-url">Sleep Command in T-SQL?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/sleep-command-in-t-sql/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:16:54+08:00" itemprop="datePublished" title="2023-03-03 19:16">2023-03-03 19:16</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there to way write a T-SQL command to just make it sleep for a period of
time? I am writing a web service asynchronously and I want to be able to run
some tests to see if the asynchronous pattern is really going to make it more
scalable. In order to "mock" an external service that is slow, I want to be
able to call a SQL server with a script that runs slowly, but isn't actually
processing a ton of stuff.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Look at the WAITFOR command.</p>
<p>E.g.</p>
<div class="code"><pre class="code literal-block"><span class="o">--</span><span class="w"> </span><span class="k">wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">minute</span>
<span class="nv">WAITFOR</span><span class="w"> </span><span class="nv">DELAY</span><span class="w"> </span><span class="s1">'00:01'</span>

<span class="o">--</span><span class="w"> </span><span class="k">wait</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">second</span>
<span class="nv">WAITFOR</span><span class="w"> </span><span class="nv">DELAY</span><span class="w"> </span><span class="s1">'00:00:01'</span>
</pre></div>

<p>This command allows you a high degree of precision but is only accurate within
10ms - 16ms on a typical machine as it relies on GetTickCount. So, for
example, the call <code>WAITFOR DELAY '00:00:00:001'</code> is likely to result in no
wait at all.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">WAITFOR DELAY 'HH:MM:SS'
</pre></div>

<p>I believe the maximum time this can wait for is 23 hours, 59 minutes and 59
seconds.</p>
<p>Here's a Scalar-valued function to show it's use; the below function will take
an integer parameter of seconds, which it then translates into HH:MM:SS and
executes it using the <code>EXEC sp_executesql @sqlcode</code> command to query. Below
function is for demonstration only, i know it's not fit for purpose really as
a scalar-valued function! :-)</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">CREATE</span><span class="w"> </span><span class="k">FUNCTION</span><span class="w"> </span><span class="o">[</span><span class="n">dbo</span><span class="o">]</span><span class="p">.</span><span class="o">[</span><span class="n">ufn_DelayFor_MaxTimeIs24Hours</span><span class="o">]</span>
<span class="w">    </span><span class="p">(</span>
<span class="w">    </span><span class="nv">@sec</span><span class="w"> </span><span class="nc">int</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="k">RETURNS</span>
<span class="w">    </span><span class="nc">nvarchar</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="k">AS</span>
<span class="w">    </span><span class="k">BEGIN</span>


<span class="w">    </span><span class="k">declare</span><span class="w"> </span><span class="nv">@hours</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@sec</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span>
<span class="w">    </span><span class="k">declare</span><span class="w"> </span><span class="nv">@mins</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">@sec</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="nv">@hours</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="p">)</span>
<span class="w">    </span><span class="k">declare</span><span class="w"> </span><span class="nv">@secs</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">@sec</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">((</span><span class="nv">@hours</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="nv">@mins</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="p">)</span>


<span class="w">    </span><span class="k">IF</span><span class="w"> </span><span class="nv">@hours</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span>
<span class="w">    </span><span class="k">BEGIN</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="nv">@hours</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">23</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="nv">@mins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">59</span>
<span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="nv">@secs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">59</span>
<span class="w">    </span><span class="o">--</span><span class="w"> </span><span class="s1">'maximum wait time is 23 hours, 59 minutes and 59 seconds.'</span>
<span class="w">    </span><span class="k">END</span>


<span class="w">    </span><span class="k">declare</span><span class="w"> </span><span class="nv">@sql</span><span class="w"> </span><span class="nc">nvarchar</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'WAITFOR DELAY '</span><span class="o">+</span><span class="nc">char</span><span class="p">(</span><span class="mi">39</span><span class="p">)</span><span class="o">+</span><span class="nf">cast</span><span class="p">(</span><span class="nv">@hours</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nc">nvarchar</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s1">':'</span><span class="o">+</span><span class="nf">CAST</span><span class="p">(</span><span class="nv">@mins</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nc">nvarchar</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s1">':'</span><span class="o">+</span><span class="nf">CAST</span><span class="p">(</span><span class="nv">@secs</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nc">nvarchar</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="nc">char</span><span class="p">(</span><span class="mi">39</span><span class="p">)</span>


<span class="w">    </span><span class="k">exec</span><span class="w"> </span><span class="n">sp_executesql</span><span class="w"> </span><span class="nv">@sql</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s1">''</span>
<span class="w">    </span><span class="k">END</span>
</pre></div>

<p>IF you wish to delay longer than 24 hours, I suggest you use a @Days parameter
to go for a number of days and wrap the function executable inside a loop...
e.g..</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">Declare</span><span class="w"> </span><span class="nv">@Days</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="k">Declare</span><span class="w"> </span><span class="nv">@CurrentDay</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>

<span class="w">    </span><span class="k">WHILE</span><span class="w"> </span><span class="nv">@CurrentDay</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nv">@Days</span>
<span class="w">    </span><span class="k">BEGIN</span>

<span class="w">    </span><span class="o">--</span><span class="mi">24</span><span class="w"> </span><span class="n">hours</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="n">hours</span><span class="p">,</span><span class="w"> </span><span class="mi">59</span><span class="w"> </span><span class="n">minutes</span><span class="p">,</span><span class="w"> </span><span class="mi">59</span><span class="w"> </span><span class="n">seconds</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">run</span><span class="p">.</span>
<span class="w">    </span><span class="o">[</span><span class="n">ufn_DelayFor_MaxTimeIs24Hours</span><span class="o">]</span><span class="w"> </span><span class="mi">86400</span>

<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="nv">@CurrentDay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@CurrentDay</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">END</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-save-and-restore-multiple-different-sessions-in-vim/" class="u-url">How to save and restore multiple different sessions in Vim?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-save-and-restore-multiple-different-sessions-in-vim/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:15:32+08:00" itemprop="datePublished" title="2023-03-03 19:15">2023-03-03 19:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Depending on my task in Vim I have several tabs open.</p>
<p>How can I save different sessions for later use?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You want something like</p>
<div class="code"><pre class="code literal-block">:mksession ~/mysession.vim
</pre></div>

<p>Then later you can source that vim file and you'll have your old session back:</p>
<div class="code"><pre class="code literal-block">:source ~/mysession.vim
</pre></div>

<p>or open vim with the -S option:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>vim<span class="w"> </span>-S<span class="w"> </span>~/mysession.vim
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You might want to set these session options in your vimrc. Especially options
is annoying when you've changed your vimrc after you've saved the session.</p>
<div class="code"><pre class="code literal-block"><span class="nv">set</span><span class="w"> </span><span class="nv">ssop</span><span class="o">-=</span><span class="nv">options</span><span class="w">    </span><span class="err">" do not store global and local values in a session</span>
<span class="nv">set</span><span class="w"> </span><span class="nv">ssop</span><span class="o">-=</span><span class="nv">folds</span><span class="w">      </span><span class="err">" do not store folds</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2159.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2157.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
