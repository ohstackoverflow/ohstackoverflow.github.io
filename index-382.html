<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 382) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-382.html">
<link rel="prev" href="index-383.html" type="text/html">
<link rel="next" href="index-381.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-navigate-back-to-the-last-cursor-position-in-visual-studio-code/" class="u-url">How can I navigate back to the last cursor position in Visual Studio Code?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-navigate-back-to-the-last-cursor-position-in-visual-studio-code/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:25:25+08:00" itemprop="datePublished" title="2023-02-17 05:25">2023-02-17 05:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the keyboard shortcut to navigate back to the last cursor position in
Visual Studio Code?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <em>keyboard shortcut commands</em> are <em>Go Forward</em> and <em>Go Back</em>.</p>
<hr>
<p>On Windows:</p>
<p><code>Alt</code> + <code>←</code> ... navigate back</p>
<p><code>Alt</code> + <code>→</code> ... navigate forward</p>
<p>On Mac:</p>
<p><code>Ctrl</code> + <code>-</code> ... navigate back</p>
<p><code>Ctrl</code> + <code>Shift</code> + <code>-</code> ... navigate forward</p>
<p>On Ubuntu Linux:</p>
<p><code>Ctrl</code> + <code>Alt</code> + <code>-</code> ... navigate back</p>
<p><code>Ctrl</code> + <code>Shift</code> + <code>-</code> ... navigate forward</p>
<p><br></p>
<h3>Suggest</h3>
<p>I am on Mac OS X, so I can't answer for Windows users:</p>
<p>I added a custom keymap entry and set it to <code>Ctrl</code> + <code>←</code> + <code>Ctrl</code> + <code>→</code>,
while the original default is <code>Ctrl</code> + <code>-</code> and <code>Ctrl</code> + <code>Shift</code> + <code>-</code>
(which translates to <code>Ctrl</code> + <code>ß</code> and <code>Ctrl</code> + <code>Shift</code>+<code>ß</code> on my German
keyboard).</p>
<p>One can simply modify it in the user keymap settings:</p>
<div class="code"><pre class="code literal-block">{ "key": "ctrl+left",  "command": "workbench.action.navigateBack" },
{ "key": "ctrl+right", "command": "workbench.action.navigateForward" }
</pre></div>

<p>For the accepted answer I actually wonder :) <code>Alt</code> + <code>←</code> / <code>Alt</code> + <code>→</code> jumps
wordwise for me (which is kind of standard in all editors). Did they really do
this mapping for the Windows version?</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/does-functional-programming-replace-gof-design-patterns/" class="u-url">Does functional programming replace GoF design patterns?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/does-functional-programming-replace-gof-design-patterns/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:24:27+08:00" itemprop="datePublished" title="2023-02-17 05:24">2023-02-17 05:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Since I started learning F# and OCaml last year, I've read a huge number of
articles which insist that design patterns (especially in Java) are
workarounds for the missing features in imperative languages. One article I
found makes a fairly strong claim:</p>
<blockquote>
<p>Most people I've met have read the Design Patterns book by the Gang of Four
(GoF). Any self respecting programmer will tell you that the book is
language agnostic and the patterns apply to software engineering in general,
regardless of which language you use. This is a noble claim. Unfortunately
it is far removed from the truth.</p>
<p>Functional languages are extremely expressive. <strong>In a functional language
one does not need design patterns because the language is likely so high
level, you end up programming in concepts that eliminate design patterns all
together.</strong></p>
</blockquote>
<p>The main features of functional programming (FP) include functions as first-
class values, currying, immutable values, etc. It doesn't seem obvious to me
that OO design patterns are approximating any of those features.</p>
<p>Additionally, in functional languages which support OOP (such as F# and
OCaml), it seems obvious to me that programmers using these languages would
use the same design patterns found available to every other OOP language. In
fact, right now I use F# and OCaml every day, and there are no striking
differences between the patterns I use in these languages vs. the patterns I
use when I write in Java.</p>
<p>Is there any truth to the claim that functional programming eliminates the
need for OOP design patterns? If so, could you post or link to an example of a
typical OOP design pattern and its functional equivalent?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The blog post you quoted overstates its claim a bit. FP doesn't <em>eliminate</em>
the need for design patterns. The term "design patterns" just isn't widely
used to describe the same thing in FP languages. But they exist. Functional
languages have plenty of best practice rules of the form "when you encounter
problem X, use code that looks like Y", which is basically what a design
pattern is.</p>
<p>However, it's correct that most OOP-specific design patterns are pretty much
irrelevant in functional languages.</p>
<p>I don't think it should be particularly controversial to say that design
patterns <em>in general</em> only exist to patch up shortcomings in the language. And
if another language can solve the same problem trivially, that other language
won't have need of a design pattern for it. Users of that language may not
even be aware that the problem <em>exists</em> , because, well, it's not a problem in
that language.</p>
<p>Here is what the Gang of Four has to say about this issue:</p>
<blockquote>
<p>The choice of programming language is important because it influences one's
point of view. Our patterns assume Smalltalk/C++-level language features,
and that choice determines what can and cannot be implemented easily. If we
assumed procedural languages, we might have included design patterns called
"Inheritance", "Encapsulation," and "Polymorphism". Similarly, some of our
patterns are supported directly by the less common object-oriented
languages. CLOS has multi-methods, for example, which lessen the need for a
pattern such as Visitor. In fact, there are enough differences between
Smalltalk and C++ to mean that some patterns can be expressed more easily in
one language than the other. (See Iterator for example.)</p>
</blockquote>
<p>(The above is a quote from the Introduction to the Design Patterns book, page
4, paragraph 3)</p>
<blockquote>
<p>The main features of functional programming include functions as first-class
values, currying, immutable values, etc. It doesn't seem obvious to me that
OO design patterns are approximating any of those features.</p>
</blockquote>
<p>What is the command pattern, if not an approximation of first-class functions?
:) In an FP language, you'd simply pass a function as the argument to another
function. In an OOP language, you have to wrap up the function in a class,
which you can instantiate and then pass that object to the other function. The
effect is the same, but in OOP it's called a design pattern, and it takes a
whole lot more code. And what is the abstract factory pattern, if not
currying? Pass parameters to a function a bit at a time, to configure what
kind of value it spits out when you finally call it.</p>
<p>So yes, several GoF design patterns are rendered redundant in FP languages,
because more powerful and easier to use alternatives exist.</p>
<p>But of course there are still design patterns which are <em>not</em> solved by FP
languages. What is the FP equivalent of a singleton? (Disregarding for a
moment that singletons are generally a terrible pattern to use.)</p>
<p>And it works both ways too. As I said, FP has its design patterns too; people
just don't usually think of them as such.</p>
<p>But you may have run across monads. What are they, if not a design pattern for
"dealing with global state"? That's a problem that's so simple in OOP
languages that no equivalent design pattern exists there.</p>
<p>We don't need a design pattern for "increment a static variable", or "read
from that socket", because it's just what you <em>do</em>.</p>
<p>Saying a monad is a design pattern is as absurd as saying the Integers with
their usual operations and zero element is a design pattern. No, a monad is a
<strong>mathematical pattern</strong> , not a design pattern.</p>
<p>In (pure) functional languages, side effects and mutable state are impossible,
unless you work around it with the monad "design pattern", or any of the other
methods for allowing the same thing.</p>
<blockquote>
<p>Additionally, in functional languages which support OOP (such as F# and
OCaml), it seems obvious to me that programmers using these languages would
use the same design patterns found available to every other OOP language. In
fact, right now I use F# and OCaml everyday, and there are no striking
differences between the patterns I use in these languages vs the patterns I
use when I write in Java.</p>
</blockquote>
<p>Perhaps because you're still thinking imperatively? A lot of people, after
dealing with imperative languages all their lives, have a hard time giving up
on that habit when they try a functional language. (I've seen some pretty
funny attempts at F#, where literally <em>every</em> function was just a string of
'let' statements, basically as if you'd taken a C program, and replaced all
semicolons with 'let'. :))</p>
<p>But another possibility might be that you just haven't realized that you're
solving problems trivially which would require design patterns in an OOP
language.</p>
<p>When you use currying, or pass a function as an argument to another, stop and
think about how you'd do that in an OOP language.</p>
<blockquote>
<p>Is there any truth to the claim that functional programming eliminates the
need for OOP design patterns?</p>
</blockquote>
<p>Yep. :) When you work in a FP language, you no longer need the OOP-specific
design patterns. But you still need some general design patterns, like MVC or
other non-OOP specific stuff, and you need a couple of new FP-specific "design
patterns" instead. All languages have their shortcomings, and design patterns
are usually how we work around them.</p>
<p>Anyway, you may find it interesting to try your hand at "cleaner" FP
languages, like ML (my personal favorite, at least for learning purposes), or
Haskell, where you don't have the OOP crutch to fall back on when you're faced
with something new.</p>
<hr>
<p>As expected, a few people objected to my definition of design patterns as
"patching up shortcomings in a language", so here's my justification:</p>
<p>As already said, most design patterns are specific to one programming
paradigm, or sometimes even one specific language. Often, they solve problems
that only <em>exist</em> in that paradigm (see monads for FP, or abstract factories
for OOP).</p>
<p>Why doesn't the abstract factory pattern exist in FP? Because the problem it
tries to solve does not exist there.</p>
<p>So, if a problem exists in OOP languages, which does not exist in FP
languages, then clearly that is a shortcoming of OOP languages. The problem
can be solved, but your language does not do so, but requires a bunch of
boilerplate code from you to work around it. Ideally, we'd like our
programming language to magically make <em>all</em> problems go away. Any problem
that is still there is in principle a shortcoming of the language. ;)</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>Is there any truth to the claim that functional programming eliminates the
need for OOP design patterns?</p>
</blockquote>
<p>Functional programming is not the same as object-oriented programming. Object-
oriented design patterns don't apply to functional programming. Instead, you
have functional programming design patterns.</p>
<p>For functional programming, you won't read the OO design pattern books; you'll
read other books on FP design patterns.</p>
<blockquote>
<p>language agnostic</p>
</blockquote>
<p>Not totally. Only language-agnostic with respect to OO languages. The design
patterns don't apply to procedural languages at all. They barely make sense in
a relational database design context. They don't apply when designing a
spreadsheet.</p>
<blockquote>
<p>a typical OOP design pattern and its functional equivalent?</p>
</blockquote>
<p>The above shouldn't exist. That's like asking for a piece of procedural code
rewritten as OO code. Ummm... If I translate the original Fortran (or C) into
Java, I haven't done anything more than translate it. If I totally rewrite it
into an OO paradigm, it will no longer look anything like the original Fortran
or C -- it will be unrecognizable.</p>
<p>There's no simple mapping from OO design to functional design. They're very
different ways of looking at the problem.</p>
<p>Functional programming (like <em>all</em> styles of programming) has design patterns.
Relational databases have design patterns, OO has design patterns, and
procedural programming has design patterns. Everything has design patterns,
even the architecture of buildings.</p>
<p>Design patterns -- as a concept -- are a timeless way of building,
irrespective of technology or problem domain. However, specific design
patterns apply to specific problem domains and technologies.</p>
<p>Everyone who thinks about what they're doing will uncover design patterns.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/grouping-functions-tapply-by-aggregate-and-the-apply-family/" class="u-url">Grouping functions (tapply, by, aggregate) and the *apply family</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/grouping-functions-tapply-by-aggregate-and-the-apply-family/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T05:23:54+08:00" itemprop="datePublished" title="2023-02-17 05:23">2023-02-17 05:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Whenever I want to do something "map"py in R, I usually try to use a function
in the <code>apply</code> family.</p>
<p>However, I've never quite understood the differences between them -- how
{<code>sapply</code>, <code>lapply</code>, etc.} apply the function to the input/grouped input, what
the output will look like, or even what the input can be -- so I often just go
through them all until I get what I want.</p>
<p>Can someone explain how to use which one when?</p>
<p>My current (probably incorrect/incomplete) understanding is...</p>
<ol>
<li>
<p><code>sapply(vec, f)</code>: input is a vector. output is a vector/matrix, where element <code>i</code> is <code>f(vec[i])</code>, giving you a matrix if <code>f</code> has a multi-element output</p>
</li>
<li>
<p><code>lapply(vec, f)</code>: same as <code>sapply</code>, but output is a list?</p>
</li>
<li>
<p><code>apply(matrix, 1/2, f)</code>: input is a matrix. output is a vector, where element <code>i</code> is f(row/col i of the matrix)</p>
</li>
<li>
<code>tapply(vector, grouping, f)</code>: output is a matrix/array, where an element in the matrix/array is the value of <code>f</code> at a grouping <code>g</code> of the vector, and <code>g</code> gets pushed to the row/col names</li>
<li>
<code>by(dataframe, grouping, f)</code>: let <code>g</code> be a grouping. apply <code>f</code> to each column of the group/dataframe. pretty print the grouping and the value of <code>f</code> at each column.</li>
<li>
<code>aggregate(matrix, grouping, f)</code>: similar to <code>by</code>, but instead of pretty printing the output, aggregate sticks everything into a dataframe.</li>
</ol>
<p>Side question: I still haven't learned plyr or reshape -- would <code>plyr</code> or
<code>reshape</code> replace all of these entirely?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>R has many <em>apply functions which are ably described in the help files (e.g.
<code>?apply</code>). There are enough of them, though, that beginning useRs may have
difficulty deciding which one is appropriate for their situation or even
remembering them all. They may have a general sense that "I should be using an
</em>apply function here", but it can be tough to keep them all straight at first.</p>
<p>Despite the fact (noted in other answers) that much of the functionality of
the *apply family is covered by the extremely popular <code>plyr</code> package, the base
functions remain useful and worth knowing.</p>
<p>This answer is intended to act as a sort of <strong>signpost</strong> for new useRs to help
direct them to the correct <em>apply function for their particular problem. Note,
this is </em><em>not</em><em> intended to simply regurgitate or replace the R documentation!
The hope is that this answer helps you to decide which </em>apply function suits
your situation and then it is up to you to research it further. With one
exception, performance differences will not be addressed.</p>
<ul>
<li>
<p><strong>apply</strong> - <em>When you want to apply a function to the rows or columns of a matrix (and higher-dimensional analogues); not generally advisable for data frames as it will coerce to a matrix first.</em></p>
<div class="code"><pre class="code literal-block"> # Two dimensional matrix
</pre></div>

<p>M &lt;- matrix(seq(1,16), 4, 4)</p>
<p># apply min to rows
 apply(M, 1, min)
 [1] 1 2 3 4</p>
<p># apply max to columns
 apply(M, 2, max)
 [1]  4  8 12 16</p>
<p># 3 dimensional array
 M &lt;- array( seq(32), dim = c(4,4,2))</p>
<p># Apply sum across each M[*, , ] - i.e Sum across 2nd and 3rd dimension
 apply(M, 1, sum)
 # Result is one-dimensional
 [1] 120 128 136 144</p>
<p># Apply sum across each M[<em>, </em>, ] - i.e Sum across 3rd dimension
 apply(M, c(1,2), sum)
 # Result is two-dimensional
      [,1] [,2] [,3] [,4]
 [1,]   18   26   34   42
 [2,]   20   28   36   44
 [3,]   22   30   38   46
 [4,]   24   32   40   48</p>
</li>
</ul>
<p>If you want row/column means or sums for a 2D matrix, be sure to investigate
the highly optimized, lightning-quick <code>colMeans</code>, <code>rowMeans</code>, <code>colSums</code>,
<code>rowSums</code>.</p>
<ul>
<li>
<strong>lapply</strong> - <em>When you want to apply a function to each element of a list in turn and get a list back.</em>
</li>
</ul>
<p>This is the workhorse of many of the other *apply functions. Peel back their
code and you will often find <code>lapply</code> underneath.</p>
<div class="code"><pre class="code literal-block"><span class="w">     </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="o">:</span><span class="m">100</span><span class="p">)</span><span class="w"> </span>
<span class="w"> </span><span class="nf">lapply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">)</span><span class="w"> </span>
<span class="w"> </span><span class="o">$</span><span class="n">a</span><span class="w"> </span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span><span class="o">$</span><span class="n">b</span><span class="w"> </span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="o">$</span><span class="n">c</span><span class="w"> </span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">91</span>
<span class="w"> </span><span class="nf">lapply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">)</span><span class="w"> </span>
<span class="w"> </span><span class="o">$</span><span class="n">a</span><span class="w"> </span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span><span class="o">$</span><span class="n">b</span><span class="w"> </span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">6</span>
<span class="w"> </span><span class="o">$</span><span class="n">c</span><span class="w"> </span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">5005</span>
</pre></div>

<ul>
<li>
<strong>sapply</strong> - <em>When you want to apply a function to each element of a list in turn, but you want a <strong>vector</strong> back, rather than a list.</em>
</li>
</ul>
<p>If you find yourself typing <code>unlist(lapply(...))</code>, stop and consider <code>sapply</code>.</p>
<div class="code"><pre class="code literal-block"><span class="w">     </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="o">:</span><span class="m">100</span><span class="p">)</span>
<span class="w"> </span><span class="c1"># Compare with above; a named vector, not a list </span>
<span class="w"> </span><span class="nf">sapply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">)</span><span class="w">  </span>
<span class="w"> </span><span class="n">a</span><span class="w">  </span><span class="n">b</span><span class="w">  </span><span class="n">c</span><span class="w">   </span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">91</span>

<span class="w"> </span><span class="nf">sapply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sum</span><span class="p">)</span><span class="w">   </span>
<span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="n">b</span><span class="w">    </span><span class="n">c</span><span class="w">    </span>
<span class="w"> </span><span class="m">1</span><span class="w">    </span><span class="m">6</span><span class="w"> </span><span class="m">5005</span>
</pre></div>

<p>In more advanced uses of <code>sapply</code> it will attempt to coerce the result to a
multi-dimensional array, if appropriate. For example, if our function returns
vectors of the same length, <code>sapply</code> will use them as columns of a matrix:</p>
<div class="code"><pre class="code literal-block">     sapply(1:5,function(x) rnorm(3,x))
</pre></div>

<p>If our function returns a 2 dimensional matrix, <code>sapply</code> will do essentially
the same thing, treating each returned matrix as a single long vector:</p>
<div class="code"><pre class="code literal-block">     sapply(1:5,function(x) matrix(x,2,2))
</pre></div>

<p>Unless we specify <code>simplify = "array"</code>, in which case it will use the
individual matrices to build a multi-dimensional array:</p>
<div class="code"><pre class="code literal-block">     sapply(1:5,function(x) matrix(x,2,2), simplify = "array")
</pre></div>

<p>Each of these behaviors is of course contingent on our function returning
vectors or matrices of the same length or dimension.</p>
<ul>
<li>
<strong>vapply</strong> - <em>When you want to use<code>sapply</code> but perhaps need to squeeze some more speed out of your code or want more type safety.</em>
</li>
</ul>
<p>For <code>vapply</code>, you basically give R an example of what sort of thing your
function will return, which can save some time coercing returned values to fit
in a single atomic vector.</p>
<div class="code"><pre class="code literal-block"><span class="w">     </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="o">:</span><span class="m">100</span><span class="p">)</span>
<span class="w"> </span><span class="c1">#Note that since the advantage here is mainly speed, this</span>
<span class="w"> </span><span class="c1"># example is only for illustration. We're telling R that</span>
<span class="w"> </span><span class="c1"># everything returned by length() should be an integer of </span>
<span class="w"> </span><span class="c1"># length 1. </span>
<span class="w"> </span><span class="nf">vapply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">FUN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">,</span><span class="w"> </span><span class="n">FUN.VALUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0L</span><span class="p">)</span><span class="w"> </span>
<span class="w"> </span><span class="n">a</span><span class="w">  </span><span class="n">b</span><span class="w">  </span><span class="n">c</span><span class="w">  </span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">91</span>
</pre></div>

<ul>
<li>
<strong>mapply</strong> - <em>For when you have several data structures (e.g. vectors, lists) and you want to apply a function to the 1st elements of each, and then the 2nd elements of each, etc., coercing the result to a vector/array as in<code>sapply</code>.</em>
</li>
</ul>
<p>This is multivariate in the sense that your function must accept multiple
arguments.</p>
<div class="code"><pre class="code literal-block"><span class="w">     </span>#<span class="nv">Sums</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="mi">1</span><span class="nv">st</span><span class="w"> </span><span class="nv">elements</span>,<span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="mi">2</span><span class="nv">nd</span><span class="w"> </span><span class="nv">elements</span>,<span class="w"> </span><span class="nv">etc</span>.<span class="w"> </span>
<span class="w"> </span><span class="nv">mapply</span><span class="ss">(</span><span class="nv">sum</span>,<span class="w"> </span><span class="mi">1</span>:<span class="mi">5</span>,<span class="w"> </span><span class="mi">1</span>:<span class="mi">5</span>,<span class="w"> </span><span class="mi">1</span>:<span class="mi">5</span><span class="ss">)</span><span class="w"> </span>
<span class="w"> </span>[<span class="mi">1</span>]<span class="w">  </span><span class="mi">3</span><span class="w">  </span><span class="mi">6</span><span class="w">  </span><span class="mi">9</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">15</span>
<span class="w"> </span>#<span class="nv">To</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nv">rep</span><span class="ss">(</span><span class="mi">1</span>,<span class="mi">4</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">rep</span><span class="ss">(</span><span class="mi">2</span>,<span class="mi">3</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">etc</span>.
<span class="w"> </span><span class="nv">mapply</span><span class="ss">(</span><span class="nv">rep</span>,<span class="w"> </span><span class="mi">1</span>:<span class="mi">4</span>,<span class="w"> </span><span class="mi">4</span>:<span class="mi">1</span><span class="ss">)</span><span class="w">   </span>
<span class="w"> </span>[[<span class="mi">1</span>]]
<span class="w"> </span>[<span class="mi">1</span>]<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>

<span class="w"> </span>[[<span class="mi">2</span>]]
<span class="w"> </span>[<span class="mi">1</span>]<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span>

<span class="w"> </span>[[<span class="mi">3</span>]]
<span class="w"> </span>[<span class="mi">1</span>]<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span>

<span class="w"> </span>[[<span class="mi">4</span>]]
<span class="w"> </span>[<span class="mi">1</span>]<span class="w"> </span><span class="mi">4</span>
</pre></div>

<ul>
<li>
<p><strong>Map</strong> - <em>A wrapper to<code>mapply</code> with <code>SIMPLIFY = FALSE</code>, so it is guaranteed to return a list.</em></p>
<div class="code"><pre class="code literal-block"> Map(sum, 1:5, 1:5, 1:5)
</pre></div>

<p>[[1]]
 [1] 3</p>
<p>[[2]]
 [1] 6</p>
<p>[[3]]
 [1] 9</p>
<p>[[4]]
 [1] 12</p>
<p>[[5]]
 [1] 15</p>
</li>
<li>
<p><strong>rapply</strong> - <em>For when you want to apply a function to each element of a <strong>nested list</strong> structure, recursively.</em></p>
</li>
</ul>
<p>To give you some idea of how uncommon <code>rapply</code> is, I forgot about it when
first posting this answer! Obviously, I'm sure many people use it, but YMMV.
<code>rapply</code> is best illustrated with a user-defined function to apply:</p>
<div class="code"><pre class="code literal-block"><span class="w">     </span><span class="c1"># Append ! to string, otherwise increment</span>
<span class="w"> </span><span class="n">myFun</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">){</span>
<span class="w">     </span><span class="nf">if</span><span class="p">(</span><span class="nf">is.character</span><span class="p">(</span><span class="n">x</span><span class="p">)){</span>
<span class="w">       </span><span class="nf">return</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="s">"!"</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">""</span><span class="p">))</span>
<span class="w">     </span><span class="p">}</span>
<span class="w">     </span><span class="n">else</span><span class="p">{</span>
<span class="w">       </span><span class="nf">return</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">     </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="c1">#A nested list structure</span>
<span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Boo"</span><span class="p">,</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Eeek"</span><span class="p">),</span><span class="w"> </span>
<span class="w">           </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Yikes"</span><span class="p">,</span><span class="w"> </span>
<span class="w">           </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">b2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Hey"</span><span class="p">,</span><span class="w"> </span><span class="n">b3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">)))</span>


<span class="w"> </span><span class="c1"># Result is named vector, coerced to character          </span>
<span class="w"> </span><span class="nf">rapply</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">myFun</span><span class="p">)</span>

<span class="w"> </span><span class="c1"># Result is a nested list like l, with values altered</span>
<span class="w"> </span><span class="nf">rapply</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">myFun</span><span class="p">,</span><span class="w"> </span><span class="n">how</span><span class="o">=</span><span class="s">"replace"</span><span class="p">)</span>
</pre></div>

<ul>
<li>
<strong>tapply</strong> - <em>For when you want to apply a function to <strong>subsets</strong> of a vector and the subsets are defined by some other vector, usually a factor.</em>
</li>
</ul>
<p>The black sheep of the *apply family, of sorts. The help file's use of the
phrase "ragged array" can be a bit confusing, but it is actually quite simple.</p>
<p>A vector:</p>
<div class="code"><pre class="code literal-block"><span class="w">     </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">20</span>
</pre></div>

<p>A factor (of the same length!) defining groups:</p>
<div class="code"><pre class="code literal-block"><span class="w">     </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">factor</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="kc">letters</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">))</span>
</pre></div>

<p>Add up the values in <code>x</code> within each subgroup defined by <code>y</code>:</p>
<div class="code"><pre class="code literal-block">     tapply(x, y, sum)  
  a  b  c  d  e  
 10 26 42 58 74
</pre></div>

<p>More complex examples can be handled where the subgroups are defined by the
unique combinations of a list of several factors. <code>tapply</code> is similar in
spirit to the split-apply-combine functions that are common in R (<code>aggregate</code>,
<code>by</code>, <code>ave</code>, <code>ddply</code>, etc.) Hence its black sheep status.</p>
<p><br></p>
<h3>Suggest</h3>
<p>On the side note, here is how the various <code>plyr</code> functions correspond to the
base <code>*apply</code> functions (from the intro to plyr document from the plyr webpage
http://had.co.nz/plyr/)</p>
<div class="code"><pre class="code literal-block"><span class="n">Base</span><span class="w"> </span><span class="k">function</span><span class="w">   </span><span class="n">Input</span><span class="w">   </span><span class="n">Output</span><span class="w">   </span><span class="n">plyr</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>
<span class="o">---------------------------------------</span>
<span class="n">aggregate</span><span class="w">        </span><span class="n">d</span><span class="w">       </span><span class="n">d</span><span class="w">       </span><span class="n">ddply</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">colwise</span><span class="w"> </span>
<span class="n">apply</span><span class="w">            </span><span class="n">a</span><span class="w">       </span><span class="n">a</span><span class="o">/</span><span class="n">l</span><span class="w">     </span><span class="n">aaply</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">alply</span><span class="w"> </span>
<span class="n">by</span><span class="w">               </span><span class="n">d</span><span class="w">       </span><span class="n">l</span><span class="w">       </span><span class="n">dlply</span><span class="w"> </span>
<span class="n">lapply</span><span class="w">           </span><span class="n">l</span><span class="w">       </span><span class="n">l</span><span class="w">       </span><span class="n">llply</span><span class="w">  </span>
<span class="n">mapply</span><span class="w">           </span><span class="n">a</span><span class="w">       </span><span class="n">a</span><span class="o">/</span><span class="n">l</span><span class="w">     </span><span class="n">maply</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">mlply</span><span class="w"> </span>
<span class="n">replicate</span><span class="w">        </span><span class="n">r</span><span class="w">       </span><span class="n">a</span><span class="o">/</span><span class="n">l</span><span class="w">     </span><span class="n">raply</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">rlply</span><span class="w"> </span>
<span class="n">sapply</span><span class="w">           </span><span class="n">l</span><span class="w">       </span><span class="n">a</span><span class="w">       </span><span class="n">laply</span>
</pre></div>

<p>One of the goals of <code>plyr</code> is to provide consistent naming conventions for
each of the functions, encoding the input and output data types in the
function name. It also provides consistency in output, in that output from
<code>dlply()</code> is easily passable to <code>ldply()</code> to produce useful output, etc.</p>
<p>Conceptually, learning <code>plyr</code> is no more difficult than understanding the base
<code>*apply</code> functions.</p>
<p><code>plyr</code> and <code>reshape</code> functions have replaced almost all of these functions in
my every day use. But, also from the Intro to Plyr document:</p>
<blockquote>
<p>Related functions <code>tapply</code> and <code>sweep</code> have no corresponding function in
<code>plyr</code>, and remain useful. <code>merge</code> is useful for combining summaries with
the original data.</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-383.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-381.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
