<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 553) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-553.html">
<link rel="prev" href="index-554.html" type="text/html">
<link rel="next" href="index-552.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-malloc-and-calloc/" class="u-url">Difference between malloc and calloc?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-malloc-and-calloc/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:47:22+08:00" itemprop="datePublished" title="2023-02-17 09:47">2023-02-17 09:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between doing:</p>
<div class="code"><pre class="code literal-block">ptr = malloc(MAXELEMS * sizeof(char *));
</pre></div>

<p>And:</p>
<div class="code"><pre class="code literal-block">ptr = calloc(MAXELEMS, sizeof(char*));
</pre></div>

<p>When is it a good idea to use <code>calloc</code> over <code>malloc</code> or vice versa?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>calloc()</code> gives you a zero-initialized buffer, while <code>malloc()</code> leaves the
memory uninitialized.</p>
<p>For large allocations, most <code>calloc</code> implementations under mainstream OSes
will get known-zeroed pages from the OS (e.g. via POSIX <code>mmap(MAP_ANONYMOUS)</code>
or Windows <code>VirtualAlloc</code>) so it doesn't need to write them in user-space.
This is how normal <code>malloc</code> gets more pages from the OS as well; <code>calloc</code> just
takes advantage of the OS's guarantee.</p>
<p>This means <code>calloc</code> memory can still be "clean" and lazily-allocated, and
copy-on-write mapped to a system-wide shared physical page of zeros. (Assuming
a system with virtual memory.) The effects are visible with performance
experiments on Linux, for example.</p>
<p>Some compilers even can optimize malloc + memset(0) into calloc for you, but
it's best to just use calloc in the source if you want zeroed memory. (Or if
you were trying to pre-fault it to avoid page faults later, that optimization
will defeat your attempt.)</p>
<p>If you aren't going to ever read memory before writing it, use <code>malloc</code> so it
can (potentially) give you dirty memory from its internal free list instead of
getting new pages from the OS. (Or instead of zeroing a block of memory on the
free list for a small allocation).</p>
<hr>
<p>Embedded implementations of <code>calloc</code> may leave it up to <code>calloc</code> itself to
zero memory if there's no OS, or it's not a fancy multi-user OS that zeros
pages to stop information leaks between processes.</p>
<p>On embedded Linux, malloc could <code>mmap(MAP_UNINITIALIZED|MAP_ANONYMOUS)</code>, which
is only enabled for some embedded kernels because it's insecure on a multi-
user system.</p>
<p><br></p>
<h3>Suggest</h3>
<p>A less known difference is that in operating systems with optimistic memory
allocation, like Linux, the pointer returned by <code>malloc</code> isn't backed by real
memory until the program actually touches it.</p>
<p><code>calloc</code> does indeed touch the memory (it writes zeroes on it) and thus you'll
be sure the OS is backing the allocation with actual RAM (or swap). This is
also why it is slower than malloc (not only does it have to zero it, the OS
must also find a suitable memory area by possibly swapping out other
processes)</p>
<p>See for instance this SO question for further discussion about the behavior of
malloc</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/changing-the-color-of-an-hr-element/" class="u-url">Changing the color of an hr element</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/changing-the-color-of-an-hr-element/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:46:54+08:00" itemprop="datePublished" title="2023-02-17 09:46">2023-02-17 09:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to change the color of my <code>hr</code> tag using CSS. The code I've tried below
doesn't seem to work:</p>
<div class="code"><pre class="code literal-block"><span class="nt">hr</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#123455</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>I think you should use <code>border-color</code> instead of <code>color</code>, if your intention is
to change the color of the line produced by <code>&lt;hr&gt;</code> tag.</p>
<p>Although, it has been pointed in comments that, if you change the size of your
line, border will still be as wide as you specified in styles, and line will
be filled with the default color (which is not a desired effect most of the
time). So it seems like in this case you would also need to specify
<code>background-color</code> (as @Ibu suggested in his answer).</p>
<p><strong>HTML 5 Boilerplate</strong> project in its default stylesheet specifies the
following rule:</p>
<div class="code"><pre class="code literal-block"><span class="nt">hr</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span><span class="w"> </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">border-top</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#ccc</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">em</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p><strong>An article</strong> titled “12 Little-Known CSS Facts”, published recently by
SitePoint, mentions that <code>&lt;hr&gt;</code> can set its <code>border-color</code> to its parent's
<code>color</code> if you specify <code>hr { border-color: inherit }</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<ul>
<li>
<code>border-color</code> works in <strong>Chrome</strong> and <strong>Safari</strong>.</li>
<li>
<code>background-color</code> works in Firefox and Opera.</li>
<li>
<code>color</code> works in <strong>IE7+</strong>.</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/if-a-folder-does-not-exist-create-it/" class="u-url">If a folder does not exist, create it</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/if-a-folder-does-not-exist-create-it/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:46:11+08:00" itemprop="datePublished" title="2023-02-17 09:46">2023-02-17 09:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I use a <code>FileUploader</code> control in my application. I want to save a file to a
specified folder. If this folder does not exist, I want to first create it,
and then save my file to this folder. If the folder already exists, then just
save the file in it.</p>
<p>How can I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<h6>Use <strong><code>System.IO.Directory.CreateDirectory</code></strong>.</h6>
<p>According to the official ".NET" docs, you don't need to check if it exists
first.</p>
<blockquote>
<h6>System.io &gt; Directory &gt; Directory.CreateDirectory</h6>
<p>Any and all directories specified in <code>path</code> are created, unless they already
exist or unless some part of <code>path</code> is invalid. If the directory already
exists, this method does not create a new directory, but it returns a
<code>DirectoryInfo</code> object for the existing directory.</p>
<h6><em><strong>— learn.microsoft.com/dotnet/api/</strong></em></h6>
</blockquote>
<hr>
<p><br></p>
<h3>Suggest</h3>
<p>Use the below code as per <em>How can I create a folder dynamically using the
File upload server control?</em> :</p>
<div class="code"><pre class="code literal-block"><span class="nv">string</span><span class="w"> </span><span class="nv">subPath</span><span class="w"> </span><span class="o">=</span><span class="s2">"ImagesPath"</span><span class="c1">; // Your code goes here</span>

<span class="nv">bool</span><span class="w"> </span><span class="nv">exists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">IO</span>.<span class="nv">Directory</span>.<span class="nv">Exists</span><span class="ss">(</span><span class="nv">Server</span>.<span class="nv">MapPath</span><span class="ss">(</span><span class="nv">subPath</span><span class="ss">))</span><span class="c1">;</span>

<span class="k">if</span><span class="ss">(</span><span class="o">!</span><span class="nv">exists</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">System</span>.<span class="nv">IO</span>.<span class="nv">Directory</span>.<span class="nv">CreateDirectory</span><span class="ss">(</span><span class="nv">Server</span>.<span class="nv">MapPath</span><span class="ss">(</span><span class="nv">subPath</span><span class="ss">))</span><span class="c1">;</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-554.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-552.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
