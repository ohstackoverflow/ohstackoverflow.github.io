<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1597) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1597.html">
<link rel="prev" href="index-1598.html" type="text/html">
<link rel="next" href="index-1596.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-clone-git-repository-with-specific-revision-changeset/" class="u-url">How to clone git repository with specific revision/changeset?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-clone-git-repository-with-specific-revision-changeset/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:49:19+08:00" itemprop="datePublished" title="2023-03-03 04:49">2023-03-03 04:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I clone git repository with specific revision, something like I
usually do in Mercurial:</p>
<div class="code"><pre class="code literal-block">hg clone -r 3 /path/to/repository
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>UPDATE 2</strong> Since Git 2.5.0 the feature described below can be enabled on
server side with configuration variable
<strong><code>uploadpack.allowReachableSHA1InWant</code></strong> , here the GitHub feature request
and the GitHub commit enabling this feature. Note that some Git servers
activate this option by default, e.g. Bitbucket Server enabled it since
version 5.5+. See this answer on Stackexchange for a exmple of how to activate
the configuration option.</p>
<p><strong>UPDATE 1</strong> For Git versions <code>1.7 &lt; v &lt; 2.5</code> use git clone and git reset, as
described in Vaibhav Bajpai's answer</p>
<p>If you don't want to fetch the full repository then you probably shouldn't be
using <code>clone</code>. You can always just use fetch to choose the branch that you
want to fetch. I'm not an hg expert so I don't know the details of <code>-r</code> but in
git you can do something like this.</p>
<div class="code"><pre class="code literal-block"># make a new blank repository in the current directory
git init

# add a remote
git remote add origin url://to/source/repository

# fetch a commit (or branch or tag) of interest
# Note: the full history up to this commit will be retrieved unless 
#       you limit it with '--depth=...' or '--shallow-since=...'
git fetch origin &lt;sha1-of-commit-of-interest&gt;

# reset this repository's master branch to the commit of interest
git reset --hard FETCH_HEAD
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>UPDATE 2</strong> Since Git 2.5.0 the feature described below can be enabled on
server side with configuration variable
<strong><code>uploadpack.allowReachableSHA1InWant</code></strong> , here the GitHub feature request
and the GitHub commit enabling this feature. Note that some Git servers
activate this option by default, e.g. Bitbucket Server enabled it since
version 5.5+. See this answer on Stackexchange for a exmple of how to activate
the configuration option.</p>
<p><strong>UPDATE 1</strong> For Git versions <code>1.7 &lt; v &lt; 2.5</code> use git clone and git reset, as
described in Vaibhav Bajpai's answer</p>
<p>If you don't want to fetch the full repository then you probably shouldn't be
using <code>clone</code>. You can always just use fetch to choose the branch that you
want to fetch. I'm not an hg expert so I don't know the details of <code>-r</code> but in
git you can do something like this.</p>
<div class="code"><pre class="code literal-block"># make a new blank repository in the current directory
git init

# add a remote
git remote add origin url://to/source/repository

# fetch a commit (or branch or tag) of interest
# Note: the full history up to this commit will be retrieved unless 
#       you limit it with '--depth=...' or '--shallow-since=...'
git fetch origin &lt;sha1-of-commit-of-interest&gt;

# reset this repository's master branch to the commit of interest
git reset --hard FETCH_HEAD
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-add-a-border-to-a-widget-in-flutter/" class="u-url">How can I add a border to a widget in Flutter?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-add-a-border-to-a-widget-in-flutter/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:48:53+08:00" itemprop="datePublished" title="2023-03-03 04:48">2023-03-03 04:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using Flutter and I'd like to add a border to a widget (in this case, a
<code>Text</code> widget).</p>
<p>I tried <code>TextStyle</code> and <code>Text</code>, but I didn't see how to add a border.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can add the <code>Text</code> as a <code>child</code> to a <code>Container</code> that has a
<code>BoxDecoration</code> with <code>border</code> property:</p>
<p><img alt="enter image description here" src="images/CIrsP.png"></p>
<div class="code"><pre class="code literal-block"><span class="n">Container</span><span class="p">(</span>
<span class="w">  </span><span class="n">margin</span><span class="p">:</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">EdgeInsets</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mf">15.0</span><span class="p">),</span>
<span class="w">  </span><span class="n">padding</span><span class="p">:</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">EdgeInsets</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mf">3.0</span><span class="p">),</span>
<span class="w">  </span><span class="n">decoration</span><span class="p">:</span><span class="w"> </span><span class="n">BoxDecoration</span><span class="p">(</span>
<span class="w">    </span><span class="n">border</span><span class="p">:</span><span class="w"> </span><span class="n">Border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">color</span><span class="p">:</span><span class="w"> </span><span class="n">Colors</span><span class="o">.</span><span class="n">blueAccent</span><span class="p">)</span>
<span class="w">  </span><span class="p">),</span>
<span class="w">  </span><span class="n">child</span><span class="p">:</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span><span class="s1">'My Awesome Border'</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Here is an expanded answer. A <code>DecoratedBox</code> is what you need to add a border,
but I am using a <code>Container</code> for the convenience of adding margin and padding.</p>
<p>Here is the general setup.</p>
<p><img alt="enter image description here" src="images/H6aIE.png"></p>
<div class="code"><pre class="code literal-block"><span class="n">Widget</span><span class="w"> </span><span class="n">myWidget</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">Container</span><span class="p">(</span>
<span class="w">    </span><span class="n">margin</span><span class="p">:</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">EdgeInsets</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mf">30.0</span><span class="p">),</span>
<span class="w">    </span><span class="n">padding</span><span class="p">:</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">EdgeInsets</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mf">10.0</span><span class="p">),</span>
<span class="w">    </span><span class="n">decoration</span><span class="p">:</span><span class="w"> </span><span class="n">myBoxDecoration</span><span class="p">(),</span><span class="w"> </span><span class="o">//</span><span class="w">             </span><span class="o">&lt;---</span><span class="w"> </span><span class="n">BoxDecoration</span><span class="w"> </span><span class="n">here</span>
<span class="w">    </span><span class="n">child</span><span class="p">:</span><span class="w"> </span><span class="n">Text</span><span class="p">(</span>
<span class="w">      </span><span class="s2">"text"</span><span class="p">,</span>
<span class="w">      </span><span class="n">style</span><span class="p">:</span><span class="w"> </span><span class="n">TextStyle</span><span class="p">(</span><span class="n">fontSize</span><span class="p">:</span><span class="w"> </span><span class="mf">30.0</span><span class="p">),</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>where the <code>BoxDecoration</code> is</p>
<div class="code"><pre class="code literal-block"><span class="nt">BoxDecoration</span><span class="w"> </span><span class="nt">myBoxDecoration</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">return</span><span class="w"> </span><span class="err">BoxDecoration(</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="n">Border</span><span class="o">.</span><span class="nf">all</span><span class="p">(),</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h2>Border width</h2>
<p><img alt="enter image description here" src="images/DClft.png"></p>
<p>These have a border width of <code>1</code>, <code>3</code>, and <code>10</code> respectively.</p>
<div class="code"><pre class="code literal-block"><span class="nt">BoxDecoration</span><span class="w"> </span><span class="nt">myBoxDecoration</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">return</span><span class="w"> </span><span class="err">BoxDecoration(</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="n">Border</span><span class="o">.</span><span class="nf">all</span><span class="p">(</span>
<span class="w">      </span><span class="n">width</span><span class="err">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w">                   </span><span class="err">&lt;</span><span class="o">---</span><span class="w"> </span><span class="n">border</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="n">here</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h2>Border color</h2>
<p><img alt="enter image description here" src="images/yeQGJ.png"></p>
<p>These have a border color of</p>
<ul>
<li><code>Colors.red</code></li>
<li><code>Colors.blue</code></li>
<li><code>Colors.green</code></li>
</ul>
<p>Code</p>
<div class="code"><pre class="code literal-block"><span class="nt">BoxDecoration</span><span class="w"> </span><span class="nt">myBoxDecoration</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">return</span><span class="w"> </span><span class="err">BoxDecoration(</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="n">Border</span><span class="o">.</span><span class="nf">all</span><span class="p">(</span>
<span class="w">      </span><span class="kc">color</span><span class="err">:</span><span class="w"> </span><span class="n">Colors</span><span class="err">.</span><span class="kc">red</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w">                   </span><span class="err">&lt;</span><span class="o">---</span><span class="w"> </span><span class="n">border</span><span class="w"> </span><span class="kc">color</span>
<span class="w">      </span><span class="n">width</span><span class="err">:</span><span class="w"> </span><span class="mf">5.0</span><span class="p">,</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h2>Border side</h2>
<p><img alt="enter image description here" src="images/aFUN3.png"></p>
<p>These have a border side of</p>
<ul>
<li>left (3.0), top (3.0)</li>
<li>bottom (13.0)</li>
<li>left (blue[100], 15.0), top (blue[300], 10.0), right (blue[500], 5.0), bottom (blue[800], 3.0)</li>
</ul>
<p>Code</p>
<div class="code"><pre class="code literal-block"><span class="nt">BoxDecoration</span><span class="w"> </span><span class="nt">myBoxDecoration</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">return</span><span class="w"> </span><span class="err">BoxDecoration(</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="nf">Border</span><span class="p">(</span>
<span class="w">      </span><span class="kc">left</span><span class="err">:</span><span class="w"> </span><span class="nf">BorderSide</span><span class="p">(</span><span class="w"> </span><span class="o">//</span><span class="w">                   </span><span class="err">&lt;</span><span class="o">---</span><span class="w"> </span><span class="kc">left</span><span class="w"> </span><span class="n">side</span>
<span class="w">        </span><span class="kc">color</span><span class="err">:</span><span class="w"> </span><span class="n">Colors</span><span class="err">.</span><span class="kc">black</span><span class="p">,</span>
<span class="w">        </span><span class="n">width</span><span class="err">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">      </span><span class="p">),</span>
<span class="w">      </span><span class="kc">top</span><span class="err">:</span><span class="w"> </span><span class="nf">BorderSide</span><span class="p">(</span><span class="w"> </span><span class="o">//</span><span class="w">                    </span><span class="err">&lt;</span><span class="o">---</span><span class="w"> </span><span class="kc">top</span><span class="w"> </span><span class="n">side</span>
<span class="w">        </span><span class="kc">color</span><span class="err">:</span><span class="w"> </span><span class="n">Colors</span><span class="err">.</span><span class="kc">black</span><span class="p">,</span>
<span class="w">        </span><span class="n">width</span><span class="err">:</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span>
<span class="w">      </span><span class="p">),</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h2>Border radius</h2>
<p><img alt="enter image description here" src="images/gERsf.png"></p>
<p>These have border radii of <code>5</code>, <code>10</code>, and <code>30</code> respectively.</p>
<div class="code"><pre class="code literal-block"><span class="nt">BoxDecoration</span><span class="w"> </span><span class="nt">myBoxDecoration</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">return</span><span class="w"> </span><span class="err">BoxDecoration(</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="n">Border</span><span class="o">.</span><span class="nf">all</span><span class="p">(</span>
<span class="w">      </span><span class="n">width</span><span class="err">:</span><span class="w"> </span><span class="mf">3.0</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">    </span><span class="n">borderRadius</span><span class="o">:</span><span class="w"> </span><span class="n">BorderRadius</span><span class="o">.</span><span class="nf">all</span><span class="p">(</span>
<span class="w">        </span><span class="n">Radius</span><span class="err">.</span><span class="nf">circular</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w">                 </span><span class="err">&lt;</span><span class="o">---</span><span class="w"> </span><span class="n">border</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="n">here</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<h2>Going on</h2>
<p><code>DecoratedBox</code>/<code>BoxDecoration</code> are very flexible. Read Flutter — BoxDecoration
Cheat Sheet for many more ideas.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/loading-downloading-image-from-url-on-swift/" class="u-url">Loading/Downloading image from URL on Swift</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/loading-downloading-image-from-url-on-swift/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:48:25+08:00" itemprop="datePublished" title="2023-03-03 04:48">2023-03-03 04:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to load an image from a URL in my application, so I first tried with
Objective-C and it worked, however, with Swift, I've a compilation error:</p>
<blockquote>
<p>'imageWithData' is unavailable: use object construction 'UIImage(data:)'</p>
</blockquote>
<p>My function:</p>
<div class="code"><pre class="code literal-block"><span class="err">@</span><span class="n">IBOutlet</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">imageView</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">UIImageView</span>

<span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="n">NSURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NSURL</span><span class="o">.</span><span class="n">URLWithString</span><span class="p">(</span><span class="s2">"http://myURL/ios8.png"</span><span class="p">)</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">data</span><span class="p">:</span><span class="n">NSData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NSData</span><span class="o">.</span><span class="n">dataWithContentsOfURL</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="n">nil</span><span class="p">)</span>

<span class="w">    </span><span class="n">imageView</span><span class="o">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIImage</span><span class="o">.</span><span class="n">imageWithData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">//</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">here</span>
<span class="p">}</span>
</pre></div>

<p>In Objective-C:</p>
<div class="code"><pre class="code literal-block"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">];</span>

<span class="w">    </span><span class="bp">NSURL</span><span class="w"> </span><span class="o">*</span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSURL</span><span class="w"> </span><span class="n">URLWithString</span><span class="o">:</span><span class="p">(</span><span class="s">@"http://myURL/ios8.png"</span><span class="p">)];</span>
<span class="w">    </span><span class="bp">NSData</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSData</span><span class="w"> </span><span class="n">dataWithContentsOfURL</span><span class="o">:</span><span class="n">url</span><span class="p">];</span>

<span class="w">    </span><span class="n">_imageView</span><span class="p">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">UIImage</span><span class="w"> </span><span class="n">imageWithData</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">];</span>
<span class="w">    </span><span class="n">_labelURL</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@"http://www.quentinroussat.fr/assets/img/iOS%20icon's%20Style/ios8.png"</span><span class="p">;</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>

<p>Can someone please explain me why the <code>imageWithData:</code> doesn't work with
Swift, and how can I solve the problem.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Xcode 8 or later • Swift 3 or later</strong></p>
<p><strong>Synchronously:</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Bundle</span>.<span class="nv">main</span>.<span class="nv">path</span><span class="ss">(</span><span class="nv">forResource</span>:<span class="w"> </span><span class="s2">"imageName"</span>,<span class="w"> </span><span class="nv">ofType</span>:<span class="w"> </span><span class="s2">"jpg"</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIImage</span><span class="ss">(</span><span class="nv">contentsOfFile</span>:<span class="w"> </span><span class="nv">filePath</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">imageView</span>.<span class="nv">contentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>.<span class="nv">scaleAspectFit</span>
<span class="w">    </span><span class="nv">imageView</span>.<span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">image</span>
}
</pre></div>

<p><strong>Asynchronously:</strong></p>
<p><strong>Create a method with a completion handler to get the image data from your
url</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">func</span><span class="w"> </span><span class="n">getData</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="n">URL</span><span class="p">,</span><span class="w"> </span><span class="n">completion</span><span class="p">:</span><span class="w"> </span><span class="err">@</span><span class="n">escaping</span><span class="w"> </span><span class="p">(</span><span class="n">Data</span><span class="err">?</span><span class="p">,</span><span class="w"> </span><span class="n">URLResponse</span><span class="err">?</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="err">?</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">URLSession</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">completionHandler</span><span class="p">:</span><span class="w"> </span><span class="n">completion</span><span class="p">)</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>

<p><strong>Create a method to download the image (start the task)</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">func</span><span class="w"> </span><span class="nf">downloadImage</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="o">:</span><span class="w"> </span><span class="n">URL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">print</span><span class="p">(</span><span class="s">"Download Started"</span><span class="p">)</span>
<span class="w">    </span><span class="n">getData</span><span class="p">(</span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">in</span>
<span class="w">        </span><span class="n">guard</span><span class="w"> </span><span class="n">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">nil</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">print</span><span class="p">(</span><span class="n">response</span><span class="o">?</span><span class="p">.</span><span class="n">suggestedFilename</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="n">url</span><span class="p">.</span><span class="n">lastPathComponent</span><span class="p">)</span>
<span class="w">        </span><span class="n">print</span><span class="p">(</span><span class="s">"Download Finished"</span><span class="p">)</span>
<span class="w">        </span><span class="c1">// always update the UI from the main thread</span>
<span class="w">        </span><span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="k">weak</span><span class="w"> </span><span class="nb">self</span><span class="p">]</span><span class="w"> </span><span class="k">in</span>
<span class="w">            </span><span class="nb">self</span><span class="o">?</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">UIImage</span><span class="p">(</span><span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><strong>Usage:</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">override</span><span class="w"> </span><span class="k">func</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">super</span><span class="o">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"Begin of code"</span><span class="p">)</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.arstechnica.net/wp-content/uploads/2018/06/macOS-Mojave-Dynamic-Wallpaper-transition.jpg"</span><span class="p">)</span><span class="o">!</span><span class="w"> </span>
<span class="w">    </span><span class="n">downloadImage</span><span class="p">(</span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p">)</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">"End of code. The image will continue downloading in the background and it will be loaded when it ends."</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<hr>
<p><strong>Extension</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="n">extension</span><span class="w"> </span><span class="bp">UIImageView</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">func</span><span class="w"> </span><span class="nf">downloaded</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">url</span><span class="o">:</span><span class="w"> </span><span class="n">URL</span><span class="p">,</span><span class="w"> </span><span class="n">contentMode</span><span class="w"> </span><span class="n">mode</span><span class="o">:</span><span class="w"> </span><span class="n">ContentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">scaleAspectFit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">contentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mode</span>
<span class="w">        </span><span class="n">URLSession</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="o">:</span><span class="w"> </span><span class="n">url</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">in</span>
<span class="w">            </span><span class="n">guard</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">httpURLResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">as</span><span class="o">?</span><span class="w"> </span><span class="n">HTTPURLResponse</span><span class="p">,</span><span class="w"> </span><span class="n">httpURLResponse</span><span class="p">.</span><span class="n">statusCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">mimeType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="o">?</span><span class="p">.</span><span class="n">mimeType</span><span class="p">,</span><span class="w"> </span><span class="n">mimeType</span><span class="p">.</span><span class="n">hasPrefix</span><span class="p">(</span><span class="s">"image"</span><span class="p">),</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">UIImage</span><span class="p">(</span><span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
<span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[</span><span class="k">weak</span><span class="w"> </span><span class="nb">self</span><span class="p">]</span><span class="w"> </span><span class="k">in</span>
<span class="w">                </span><span class="nb">self</span><span class="o">?</span><span class="p">.</span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">image</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}.</span><span class="n">resume</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">func</span><span class="w"> </span><span class="nf">downloaded</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="n">link</span><span class="o">:</span><span class="w"> </span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">contentMode</span><span class="w"> </span><span class="n">mode</span><span class="o">:</span><span class="w"> </span><span class="n">ContentMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">scaleAspectFit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="n">guard</span><span class="w"> </span><span class="n">let</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="o">:</span><span class="w"> </span><span class="n">link</span><span class="p">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">downloaded</span><span class="p">(</span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">contentMode</span><span class="o">:</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Usage:</p>
<div class="code"><pre class="code literal-block"><span class="n">imageView</span><span class="o">.</span><span class="n">downloaded</span><span class="p">(</span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.arstechnica.net/wp-content/uploads/2018/06/macOS-Mojave-Dynamic-Wallpaper-transition.jpg"</span><span class="p">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>(Swift 4 update)</strong> To answer the original question directly, here's the
swift equivalent of the posted Objective-C snippet.</p>
<div class="code"><pre class="code literal-block"><span class="nv">let</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">URL</span><span class="ss">(</span><span class="nv">string</span>:<span class="w"> </span><span class="nv">image</span>.<span class="nv">url</span><span class="ss">)</span>
<span class="nv">let</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">try</span>?<span class="w"> </span><span class="nv">Data</span><span class="ss">(</span><span class="nv">contentsOf</span>:<span class="w"> </span><span class="nv">url</span><span class="o">!</span><span class="ss">)</span><span class="w"> </span><span class="o">//</span><span class="nv">make</span><span class="w"> </span><span class="nv">sure</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">exist</span>,<span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">unwrap</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">try</span><span class="o">-</span><span class="nv">catch</span>
<span class="nv">imageView</span>.<span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIImage</span><span class="ss">(</span><span class="nv">data</span>:<span class="w"> </span><span class="nv">data</span><span class="o">!</span><span class="ss">)</span>
</pre></div>

<hr>
<p><strong>DISCLAIMER:</strong></p>
<p>It's important to note that the <code>Data(contentsOf:)</code> method will download the
contents of the url <strong>synchronously</strong> in the same thread the code is being
executed, so <strong>do not</strong> invoke this in the main thread of your application.</p>
<p>An easy way to make the same code run asynchronously, not blocking the UI, is
by using GCD:</p>
<div class="code"><pre class="code literal-block"><span class="nv">let</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">URL</span><span class="ss">(</span><span class="nv">string</span>:<span class="w"> </span><span class="nv">image</span>.<span class="nv">url</span><span class="ss">)</span>

<span class="nv">DispatchQueue</span>.<span class="nv">global</span><span class="ss">()</span>.<span class="nv">async</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">let</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">try</span>?<span class="w"> </span><span class="nv">Data</span><span class="ss">(</span><span class="nv">contentsOf</span>:<span class="w"> </span><span class="nv">url</span><span class="o">!</span><span class="ss">)</span><span class="w"> </span><span class="o">//</span><span class="nv">make</span><span class="w"> </span><span class="nv">sure</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">url</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">exist</span>,<span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">unwrap</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">let</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">try</span><span class="o">-</span><span class="nv">catch</span>
<span class="w">    </span><span class="nv">DispatchQueue</span>.<span class="nv">main</span>.<span class="nv">async</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">imageView</span>.<span class="nv">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">UIImage</span><span class="ss">(</span><span class="nv">data</span>:<span class="w"> </span><span class="nv">data</span><span class="o">!</span><span class="ss">)</span>
<span class="w">    </span>}
}
</pre></div>

<p>That said, in real life applications, if you want to have the best User
Experience and avoid multiple downloads of the same image, you may want to
also have them not only downloaded, but cached. There's already quite a few
libraries that does that very seamless and they are all really easy to use. I
personally recommend Kingfisher:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">Kingfisher</span>

<span class="n">let</span> <span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s2">"url_of_your_image"</span><span class="p">)</span>
<span class="o">//</span> <span class="n">this</span> <span class="n">downloads</span> <span class="n">the</span> <span class="n">image</span> <span class="n">asynchronously</span> <span class="k">if</span> <span class="n">it</span><span class="s1">'s not cached yet</span>
<span class="n">imageView</span><span class="o">.</span><span class="n">kf</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="k">with</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
</pre></div>

<p>And that's it</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1598.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1596.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
