<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 353) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-353.html">
<link rel="prev" href="index-354.html" type="text/html">
<link rel="next" href="index-352.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/you-need-to-use-a-theme-appcompat-theme-or-descendant-with-this-activity/" class="u-url">You need to use a Theme.AppCompat theme (or descendant) with this activity</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/you-need-to-use-a-theme-appcompat-theme-or-descendant-with-this-activity/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:42:18+08:00" itemprop="datePublished" title="2023-02-17 04:42">2023-02-17 04:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Android Studio 0.4.5</p>
<p>Android documentation for creating custom dialog boxes:
http://developer.android.com/guide/topics/ui/dialogs.html</p>
<p>If you want a custom dialog, you can instead display an Activity as a dialog
instead of using the Dialog APIs. Simply create an activity and set its theme
to Theme.Holo.Dialog in the <code>&lt;activity&gt;</code> manifest element:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">activity</span><span class="w"> </span><span class="nl">android</span><span class="p">:</span><span class="n">theme</span><span class="o">=</span><span class="ss">"@android:style/Theme.Holo.Dialog"</span><span class="w"> </span><span class="o">&gt;</span>
</pre></div>

<p>However, when I tried this I get the following exception:</p>
<div class="code"><pre class="code literal-block">java.lang.IllegalStateException: You need to use a Theme.AppCompat theme (or descendant) with this activity
</pre></div>

<p>I am supporting the following, and I can't using something greater than 10 for
the min:</p>
<div class="code"><pre class="code literal-block">minSdkVersion 10
targetSdkVersion 19
</pre></div>

<p>In my styles I have the following:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">theme</span><span class="p">.</span><span class="w"> </span><span class="o">--&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">style</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s">"AppTheme"</span><span class="w"> </span><span class="n">parent</span><span class="o">=</span><span class="s">"Theme.AppCompat.Light.DarkActionBar"</span><span class="o">&gt;</span>
</pre></div>

<p>And in my manifest I have this for the activity:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="nt">&lt;application</span>
<span class="w">        </span><span class="na">android:allowBackup=</span><span class="s">"true"</span>
<span class="w">        </span><span class="na">android:icon=</span><span class="s">"@drawable/ic_launcher"</span>
<span class="w">        </span><span class="na">android:label=</span><span class="s">"@string/app_name"</span>
<span class="w">        </span><span class="na">android:theme=</span><span class="s">"@style/AppTheme"</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;activity</span>
<span class="w">            </span><span class="na">android:theme=</span><span class="s">"@android:style/Theme.Holo.Light.Dialog"</span>
<span class="w">            </span><span class="na">android:name=</span><span class="s">"com.ssd.register.Dialog_update"</span>
<span class="w">            </span><span class="na">android:label=</span><span class="s">"@string/title_activity_dialog_update"</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;/activity&gt;</span>
</pre></div>

<p>Creating the dialog box like this was something I was hopping to do, as I have
already completed the layout.</p>
<p>Can anyone tell me how I can get around this problem?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The reason you are having this problem is because the activity you are trying
to apply the dialog theme to is extending <code>ActionBarActivity</code> which requires
the <code>AppCompat</code> theme to be applied.</p>
<p><strong>Update</strong> : Extending <code>AppCompatActivity</code> would also have this problem</p>
<p>In this case, change the Java inheritance from <code>ActionBarActivity</code> to
<code>Activity</code> and leave the dialog theme in the manifest as it is, a non
<code>Theme.AppCompat</code> value</p>
<hr>
<p>The general rule is that if you want your code to support older versions of
Android, it should have the <code>AppCompat</code> theme and the java code should extend
<code>AppCompatActivity</code>. If you have *an activity that doesn't need this support,
such as you only care about the latest versions and features of Android, you
can apply any theme to it but the java code must extend plain old <code>Activity</code>.</p>
<hr>
<p>NOTE: When change from <code>AppCompatActivity</code> (or a subclass,
<code>ActionBarActivity</code>), to <code>Activity</code>, must also change the various calls with
"support" to the corresponding call <em>without</em> "support". So, instead of
<code>getSupportFragmentManager</code>, call <code>getFragmentManager</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>All you need to do is add <code>android:theme="@style/Theme.AppCompat.Light"</code> to
your application tag in the <code>AndroidManifest.xml</code> file.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/check-if-a-variable-is-of-function-type/" class="u-url">Check if a variable is of function type</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/check-if-a-variable-is-of-function-type/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:41:50+08:00" itemprop="datePublished" title="2023-02-17 04:41">2023-02-17 04:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Suppose I have any variable, which is defined as follows:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="o">/*</span><span class="w"> </span><span class="n">Statements</span><span class="w"> </span><span class="o">*/</span><span class="p">};</span>
</pre></div>

<p>I want a function which checks if the type of the variable is function-like.
i.e. :</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">foo</span><span class="ss">(</span><span class="nv">v</span><span class="ss">)</span><span class="w"> </span>{<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">v</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">type</span>?<span class="ss">)</span><span class="w"> </span>{<span class="cm">/* do something */</span>}}<span class="c1">;</span>
<span class="nv">foo</span><span class="ss">(</span><span class="nv">a</span><span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>How can I check if the variable <code>a</code> is of type <code>Function</code> in the way defined
above?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Sure underscore's way is more efficient, but the best way to check, when
efficiency isn't an issue, is written on underscore's page linked by @Paul
Rosania.</p>
<p>Inspired by underscore, the final isFunction function is as follows:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="nf">isFunction</span><span class="p">(</span><span class="n">functionToCheck</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">functionToCheck</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">{}.</span><span class="n">toString</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="n">functionToCheck</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="err">'</span><span class="p">[</span><span class="n">object</span><span class="w"> </span><span class="n">Function</span><span class="p">]</span><span class="err">'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><strong>Note</strong> : This solution doesn't work for async functions, generators or
proxied functions. Please see other answers for more up to date solutions.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Sure underscore's way is more efficient, but the best way to check, when
efficiency isn't an issue, is written on underscore's page linked by @Paul
Rosania.</p>
<p>Inspired by underscore, the final isFunction function is as follows:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="nf">isFunction</span><span class="p">(</span><span class="n">functionToCheck</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">functionToCheck</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">{}.</span><span class="n">toString</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="n">functionToCheck</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="err">'</span><span class="p">[</span><span class="n">object</span><span class="w"> </span><span class="n">Function</span><span class="p">]</span><span class="err">'</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><strong>Note</strong> : This solution doesn't work for async functions, generators or
proxied functions. Please see other answers for more up to date solutions.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-a-list-of-locally-installed-python-modules/" class="u-url">How do I get a list of locally installed Python modules?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-a-list-of-locally-installed-python-modules/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:41:05+08:00" itemprop="datePublished" title="2023-02-17 04:41">2023-02-17 04:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I get a list of Python modules installed on my computer?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Solution</h3>
<h2>Do not use with pip &gt; 10.0!</h2>
<p>My 50 cents for getting a <code>pip freeze</code>-like list from a Python script:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">pip</span>
<span class="n">installed_packages</span> <span class="o">=</span> <span class="n">pip</span><span class="o">.</span><span class="n">get_installed_distributions</span><span class="p">()</span>
<span class="n">installed_packages_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="s2">"</span><span class="si">%s</span><span class="s2">==</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">installed_packages</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">installed_packages_list</span><span class="p">)</span>
</pre></div>

<p>As a (too long) one liner:</p>
<div class="code"><pre class="code literal-block"><span class="nv">sorted</span><span class="ss">(</span>[<span class="s2">"%s==%s"</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="ss">(</span><span class="nv">i</span>.<span class="nv">key</span>,<span class="w"> </span><span class="nv">i</span>.<span class="nv">version</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">pip</span>.<span class="nv">get_installed_distributions</span><span class="ss">()</span>]<span class="ss">)</span>
</pre></div>

<p>Giving:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="s1">'behave==1.2.4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'enum34==1.0'</span><span class="p">,</span><span class="w"> </span><span class="s1">'flask==0.10.1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'itsdangerous==0.24'</span><span class="p">,</span><span class="w"> </span>
<span class="w"> </span><span class="s1">'jinja2==2.7.2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'jsonschema==2.3.0'</span><span class="p">,</span><span class="w"> </span><span class="s1">'markupsafe==0.23'</span><span class="p">,</span><span class="w"> </span><span class="s1">'nose==1.3.3'</span><span class="p">,</span><span class="w"> </span>
<span class="w"> </span><span class="s1">'parse-type==0.3.4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'parse==1.6.4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'prettytable==0.7.2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'requests==2.3.0'</span><span class="p">,</span>
<span class="w"> </span><span class="s1">'six==1.6.1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'vioozer-metadata==0.1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'vioozer-users-server==0.1'</span><span class="p">,</span><span class="w"> </span>
<span class="w"> </span><span class="s1">'werkzeug==0.9.4'</span><span class="p">]</span>
</pre></div>

<h3>Scope</h3>
<p>This solution applies to the system scope or to a virtual environment scope,
and covers packages installed by <code>setuptools</code>, <code>pip</code> and (god forbid)
<code>easy_install</code>.</p>
<h3>My use case</h3>
<p>I added the result of this call to my flask server, so when I call it with
<code>http://example.com/exampleServer/environment</code> I get the list of packages
installed on the server's virtualenv. It makes debugging a whole lot easier.</p>
<h3>Caveats</h3>
<p>I have noticed a strange behaviour of this technique - when the Python
interpreter is invoked in the same directory as a <code>setup.py</code> file, it does not
list the package installed by <code>setup.py</code>.</p>
<h4>Steps to reproduce:</h4>
<p>Create a virtual environment</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/tmp
$<span class="w"> </span>virtualenv<span class="w"> </span>test_env
New<span class="w"> </span>python<span class="w"> </span>executable<span class="w"> </span><span class="k">in</span><span class="w"> </span>test_env/bin/python
Installing<span class="w"> </span>setuptools,<span class="w"> </span>pip...done.
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>test_env/bin/activate
<span class="o">(</span>test_env<span class="o">)</span><span class="w"> </span>$
</pre></div>

<p>Clone a git repo with <code>setup.py</code></p>
<div class="code"><pre class="code literal-block">(test_env) $ git clone https://github.com/behave/behave.git
Cloning into 'behave'...
remote: Reusing existing pack: 4350, done.
remote: Total 4350 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (4350/4350), 1.85 MiB | 418.00 KiB/s, done.
Resolving deltas: 100% (2388/2388), done.
Checking connectivity... done.
</pre></div>

<p>We have behave's <code>setup.py</code> in <code>/tmp/behave</code>:</p>
<div class="code"><pre class="code literal-block">(test_env) $ ls /tmp/behave/setup.py
/tmp/behave/setup.py
</pre></div>

<p>Install the python package from the git repo</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">test_env</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">behave</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">.</span><span class="w"> </span>
<span class="n">running</span><span class="w"> </span><span class="n">install</span>
<span class="o">...</span>
<span class="n">Installed</span><span class="w"> </span><span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">test_env</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">enum34</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="mf">7.</span><span class="n">egg</span>
<span class="n">Finished</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">behave</span><span class="o">==</span><span class="mf">1.2</span><span class="o">.</span><span class="mi">5</span><span class="n">a1</span>
</pre></div>

<h4>If we run the aforementioned solution from <code>/tmp</code>
</h4>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pip</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="s2">"</span><span class="si">%s</span><span class="s2">==</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">version</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pip</span><span class="o">.</span><span class="n">get_installed_distributions</span><span class="p">()])</span>
<span class="p">[</span><span class="s1">'behave==1.2.5a1'</span><span class="p">,</span> <span class="s1">'enum34==1.0'</span><span class="p">,</span> <span class="s1">'parse-type==0.3.4'</span><span class="p">,</span> <span class="s1">'parse==1.6.4'</span><span class="p">,</span> <span class="s1">'six==1.6.1'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">os</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="s1">'/private/tmp'</span>
</pre></div>

<h4>If we run the aforementioned solution from <code>/tmp/behave</code>
</h4>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pip</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="s2">"</span><span class="si">%s</span><span class="s2">==</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">version</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pip</span><span class="o">.</span><span class="n">get_installed_distributions</span><span class="p">()])</span>
<span class="p">[</span><span class="s1">'enum34==1.0'</span><span class="p">,</span> <span class="s1">'parse-type==0.3.4'</span><span class="p">,</span> <span class="s1">'parse==1.6.4'</span><span class="p">,</span> <span class="s1">'six==1.6.1'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">os</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="s1">'/private/tmp/behave'</span>
</pre></div>

<p><code>behave==1.2.5a1</code> is missing from the second example, because the working
directory contains <code>behave</code>'s <code>setup.py</code> file.</p>
<p>I could not find any reference to this issue in the documentation. Perhaps I
shall open a bug for it.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>Solution</h3>
<h2>Do not use with pip &gt; 10.0!</h2>
<p>My 50 cents for getting a <code>pip freeze</code>-like list from a Python script:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">pip</span>
<span class="n">installed_packages</span> <span class="o">=</span> <span class="n">pip</span><span class="o">.</span><span class="n">get_installed_distributions</span><span class="p">()</span>
<span class="n">installed_packages_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="s2">"</span><span class="si">%s</span><span class="s2">==</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">installed_packages</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">installed_packages_list</span><span class="p">)</span>
</pre></div>

<p>As a (too long) one liner:</p>
<div class="code"><pre class="code literal-block"><span class="nv">sorted</span><span class="ss">(</span>[<span class="s2">"%s==%s"</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="ss">(</span><span class="nv">i</span>.<span class="nv">key</span>,<span class="w"> </span><span class="nv">i</span>.<span class="nv">version</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">pip</span>.<span class="nv">get_installed_distributions</span><span class="ss">()</span>]<span class="ss">)</span>
</pre></div>

<p>Giving:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="s1">'behave==1.2.4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'enum34==1.0'</span><span class="p">,</span><span class="w"> </span><span class="s1">'flask==0.10.1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'itsdangerous==0.24'</span><span class="p">,</span><span class="w"> </span>
<span class="w"> </span><span class="s1">'jinja2==2.7.2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'jsonschema==2.3.0'</span><span class="p">,</span><span class="w"> </span><span class="s1">'markupsafe==0.23'</span><span class="p">,</span><span class="w"> </span><span class="s1">'nose==1.3.3'</span><span class="p">,</span><span class="w"> </span>
<span class="w"> </span><span class="s1">'parse-type==0.3.4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'parse==1.6.4'</span><span class="p">,</span><span class="w"> </span><span class="s1">'prettytable==0.7.2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'requests==2.3.0'</span><span class="p">,</span>
<span class="w"> </span><span class="s1">'six==1.6.1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'vioozer-metadata==0.1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'vioozer-users-server==0.1'</span><span class="p">,</span><span class="w"> </span>
<span class="w"> </span><span class="s1">'werkzeug==0.9.4'</span><span class="p">]</span>
</pre></div>

<h3>Scope</h3>
<p>This solution applies to the system scope or to a virtual environment scope,
and covers packages installed by <code>setuptools</code>, <code>pip</code> and (god forbid)
<code>easy_install</code>.</p>
<h3>My use case</h3>
<p>I added the result of this call to my flask server, so when I call it with
<code>http://example.com/exampleServer/environment</code> I get the list of packages
installed on the server's virtualenv. It makes debugging a whole lot easier.</p>
<h3>Caveats</h3>
<p>I have noticed a strange behaviour of this technique - when the Python
interpreter is invoked in the same directory as a <code>setup.py</code> file, it does not
list the package installed by <code>setup.py</code>.</p>
<h4>Steps to reproduce:</h4>
<p>Create a virtual environment</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/tmp
$<span class="w"> </span>virtualenv<span class="w"> </span>test_env
New<span class="w"> </span>python<span class="w"> </span>executable<span class="w"> </span><span class="k">in</span><span class="w"> </span>test_env/bin/python
Installing<span class="w"> </span>setuptools,<span class="w"> </span>pip...done.
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>test_env/bin/activate
<span class="o">(</span>test_env<span class="o">)</span><span class="w"> </span>$
</pre></div>

<p>Clone a git repo with <code>setup.py</code></p>
<div class="code"><pre class="code literal-block">(test_env) $ git clone https://github.com/behave/behave.git
Cloning into 'behave'...
remote: Reusing existing pack: 4350, done.
remote: Total 4350 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (4350/4350), 1.85 MiB | 418.00 KiB/s, done.
Resolving deltas: 100% (2388/2388), done.
Checking connectivity... done.
</pre></div>

<p>We have behave's <code>setup.py</code> in <code>/tmp/behave</code>:</p>
<div class="code"><pre class="code literal-block">(test_env) $ ls /tmp/behave/setup.py
/tmp/behave/setup.py
</pre></div>

<p>Install the python package from the git repo</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">test_env</span><span class="p">)</span><span class="w"> </span><span class="o">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">behave</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">.</span><span class="w"> </span>
<span class="n">running</span><span class="w"> </span><span class="n">install</span>
<span class="o">...</span>
<span class="n">Installed</span><span class="w"> </span><span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">test_env</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">enum34</span><span class="o">-</span><span class="mf">1.0</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="mf">7.</span><span class="n">egg</span>
<span class="n">Finished</span><span class="w"> </span><span class="n">processing</span><span class="w"> </span><span class="n">dependencies</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">behave</span><span class="o">==</span><span class="mf">1.2</span><span class="o">.</span><span class="mi">5</span><span class="n">a1</span>
</pre></div>

<h4>If we run the aforementioned solution from <code>/tmp</code>
</h4>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pip</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="s2">"</span><span class="si">%s</span><span class="s2">==</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">version</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pip</span><span class="o">.</span><span class="n">get_installed_distributions</span><span class="p">()])</span>
<span class="p">[</span><span class="s1">'behave==1.2.5a1'</span><span class="p">,</span> <span class="s1">'enum34==1.0'</span><span class="p">,</span> <span class="s1">'parse-type==0.3.4'</span><span class="p">,</span> <span class="s1">'parse==1.6.4'</span><span class="p">,</span> <span class="s1">'six==1.6.1'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">os</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="s1">'/private/tmp'</span>
</pre></div>

<h4>If we run the aforementioned solution from <code>/tmp/behave</code>
</h4>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">pip</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">([</span><span class="s2">"</span><span class="si">%s</span><span class="s2">==</span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">version</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pip</span><span class="o">.</span><span class="n">get_installed_distributions</span><span class="p">()])</span>
<span class="p">[</span><span class="s1">'enum34==1.0'</span><span class="p">,</span> <span class="s1">'parse-type==0.3.4'</span><span class="p">,</span> <span class="s1">'parse==1.6.4'</span><span class="p">,</span> <span class="s1">'six==1.6.1'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">os</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="s1">'/private/tmp/behave'</span>
</pre></div>

<p><code>behave==1.2.5a1</code> is missing from the second example, because the working
directory contains <code>behave</code>'s <code>setup.py</code> file.</p>
<p>I could not find any reference to this issue in the documentation. Perhaps I
shall open a bug for it.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-354.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-352.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
