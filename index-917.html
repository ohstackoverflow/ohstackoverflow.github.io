<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 917) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-917.html">
<link rel="prev" href="index-918.html" type="text/html">
<link rel="next" href="index-916.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-view-the-source-code-for-a-function/" class="u-url">How can I view the source code for a function?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-view-the-source-code-for-a-function/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:27:59+08:00" itemprop="datePublished" title="2023-02-17 19:27">2023-02-17 19:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to look at the source code for a function to see how it works. I know I
can print a function by typing its name at the prompt:</p>
<div class="code"><pre class="code literal-block">&gt; t
function (x) 
UseMethod("t")
&lt;bytecode: 0x2332948&gt;
&lt;environment: namespace:base&gt;
</pre></div>

<p>In this case, what does <code>UseMethod("t")</code> mean? How do I find the source code
that's actually being used by, for example: <code>t(1:10)</code>?</p>
<p>Is there a difference between when I see <code>UseMethod</code> and when I see
<code>standardGeneric</code> and <code>showMethods</code>, as with <code>with</code>?</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nv">with</span>
<span class="nv">standardGeneric</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">"with"</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">package</span><span class="w"> </span><span class="s2">"base"</span>

<span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="nv">data</span>,<span class="w"> </span><span class="nv">expr</span>,<span class="w"> </span>...<span class="ss">)</span><span class="w"> </span>
<span class="nv">standardGeneric</span><span class="ss">(</span><span class="s2">"with"</span><span class="ss">)</span>
<span class="o">&lt;</span><span class="nv">bytecode</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x102fb3fc0</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nv">environment</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x102fab988</span><span class="o">&gt;</span>
<span class="nv">Methods</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">arguments</span>:<span class="w"> </span><span class="nv">data</span>
<span class="nv">Use</span><span class="w">  </span><span class="nv">showMethods</span><span class="ss">(</span><span class="s2">"with"</span><span class="ss">)</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="nv">currently</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="nv">ones</span>.
</pre></div>

<p>In other cases, I can see that R functions are being called, but I can't find
the source code for those functions.</p>
<div class="code"><pre class="code literal-block"><span class="err">&gt;</span><span class="w"> </span><span class="nf">ts.union</span>
<span class="nf">function</span><span class="w"> </span><span class="p">(...,</span><span class="w"> </span><span class="no">dframe</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">FALSE</span><span class="p">)</span><span class="w"> </span>
<span class="no">.cbind.ts</span><span class="p">(</span><span class="no">list</span><span class="p">(...),</span><span class="w"> </span><span class="no">.makeNamesTs</span><span class="p">(...),</span><span class="w"> </span><span class="no">dframe</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">dframe</span><span class="p">,</span><span class="w"> </span><span class="no">union</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">TRUE</span><span class="p">)</span>
<span class="err">&lt;</span><span class="nl">bytecode:</span><span class="w"> </span><span class="err">0</span><span class="nf">x36fbf88</span><span class="err">&gt;</span>
<span class="err">&lt;</span><span class="nl">environment:</span><span class="w"> </span><span class="nl">namespace:</span><span class="nf">stats</span><span class="err">&gt;</span>
<span class="err">&gt;</span><span class="w"> </span><span class="na">.cbindts</span>
<span class="nl">Error:</span><span class="w"> </span><span class="nf">object</span><span class="w"> </span><span class="err">'</span><span class="no">.cbindts</span><span class="err">'</span><span class="w"> </span><span class="no">not</span><span class="w"> </span><span class="no">found</span>
<span class="err">&gt;</span><span class="w"> </span><span class="na">.makeNamesTs</span>
<span class="nl">Error:</span><span class="w"> </span><span class="nf">object</span><span class="w"> </span><span class="err">'</span><span class="no">.makeNamesTs</span><span class="err">'</span><span class="w"> </span><span class="no">not</span><span class="w"> </span><span class="no">found</span>
</pre></div>

<p>How do I find functions like <code>.cbindts</code> and <code>.makeNamesTs</code>?</p>
<p>In still other cases, there's a bit of R code, but most of work seems to be
done somewhere else.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="n">matrix</span>
<span class="nf">function </span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">byrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">dimnames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">)</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="nf">if </span><span class="p">(</span><span class="nf">is.object</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nf">is.atomic</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.vector</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="w">    </span><span class="nf">.Internal</span><span class="p">(</span><span class="nf">matrix</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="p">,</span><span class="w"> </span><span class="n">byrow</span><span class="p">,</span><span class="w"> </span><span class="n">dimnames</span><span class="p">,</span><span class="w"> </span><span class="nf">missing</span><span class="p">(</span><span class="n">nrow</span><span class="p">),</span><span class="w"> </span>
<span class="w">        </span><span class="nf">missing</span><span class="p">(</span><span class="n">ncol</span><span class="p">)))</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="n">bytecode</span><span class="o">:</span><span class="w"> </span><span class="mh">0x134bd10</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">environment</span><span class="o">:</span><span class="w"> </span><span class="n">namespace</span><span class="o">:</span><span class="n">base</span><span class="o">&gt;</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">.Internal</span>
<span class="nf">function </span><span class="p">(</span><span class="n">call</span><span class="p">)</span><span class="w">  </span><span class="nf">.Primitive</span><span class="p">(</span><span class="s">".Internal"</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">.Primitive</span>
<span class="nf">function </span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w">  </span><span class="nf">.Primitive</span><span class="p">(</span><span class="s">".Primitive"</span><span class="p">)</span>
</pre></div>

<p>How do I find out what the <code>.Primitive</code> function does? Similarly, some
functions call <code>.C</code>, <code>.Call</code>, <code>.Fortran</code>, <code>.External</code>, or <code>.Internal</code>. How can
I find the source code for those?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>UseMethod("t")</code> is telling you that <code>t()</code> is a (S3) generic function that has
methods for different object classes.</p>
<h2>The S3 method dispatch system</h2>
<p>For S3 classes, you can use the <code>methods</code> function to list the methods for a
particular generic function or class.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nf">methods</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="n">t.data.frame</span><span class="w"> </span><span class="n">t.default</span><span class="w">    </span><span class="n">t.ts</span><span class="o">*</span>

<span class="w">   </span><span class="n">Non</span><span class="o">-</span><span class="n">visible</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">asterisked</span>
<span class="o">&gt;</span><span class="w"> </span><span class="nf">methods</span><span class="p">(</span><span class="n">class</span><span class="o">=</span><span class="s">"ts"</span><span class="p">)</span>
<span class="w"> </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="n">aggregate.ts</span><span class="w">     </span><span class="n">as.data.frame.ts</span><span class="w"> </span><span class="n">cbind.ts</span><span class="o">*</span><span class="w">        </span><span class="n">cycle.ts</span><span class="o">*</span><span class="w">       </span>
<span class="w"> </span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="n">diffinv.ts</span><span class="o">*</span><span class="w">      </span><span class="n">diff.ts</span><span class="w">          </span><span class="n">kernapply.ts</span><span class="o">*</span><span class="w">    </span><span class="n">lines.ts</span><span class="w">        </span>
<span class="w"> </span><span class="p">[</span><span class="m">9</span><span class="p">]</span><span class="w"> </span><span class="n">monthplot.ts</span><span class="o">*</span><span class="w">    </span><span class="n">na.omit.ts</span><span class="o">*</span><span class="w">      </span><span class="n">Ops.ts</span><span class="o">*</span><span class="w">          </span><span class="n">plot.ts</span><span class="w">         </span>
<span class="p">[</span><span class="m">13</span><span class="p">]</span><span class="w"> </span><span class="n">print.ts</span><span class="w">         </span><span class="n">time.ts</span><span class="o">*</span><span class="w">         </span><span class="p">[</span><span class="o">&lt;-</span><span class="n">.ts</span><span class="o">*</span><span class="w">          </span><span class="p">[</span><span class="n">.ts</span><span class="o">*</span><span class="w">           </span>
<span class="p">[</span><span class="m">17</span><span class="p">]</span><span class="w"> </span><span class="n">t.ts</span><span class="o">*</span><span class="w">            </span><span class="n">window</span><span class="o">&lt;-</span><span class="n">.ts</span><span class="o">*</span><span class="w">     </span><span class="n">window.ts</span><span class="o">*</span>

<span class="w">   </span><span class="n">Non</span><span class="o">-</span><span class="n">visible</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">asterisked</span>
</pre></div>

<p>"Non-visible functions are asterisked" means the function is not exported from
its package's namespace. You can still view its source code via the <code>:::</code>
function (i.e. <code>stats:::t.ts</code>), or by using <code>getAnywhere()</code>. <code>getAnywhere()</code>
is useful because you don't have to know which package the function came from.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="n">getAnywhere</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">ts</span><span class="p">)</span>
<span class="n">A</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="err">‘</span><span class="n">t</span><span class="p">.</span><span class="n">ts</span><span class="err">’</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="k">found</span>
<span class="n">It</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="k">found</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">places</span>
<span class="w">  </span><span class="n">registered</span><span class="w"> </span><span class="n">S3</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="n">stats</span>
<span class="w">  </span><span class="nl">namespace</span><span class="p">:</span><span class="n">stats</span>
<span class="k">with</span><span class="w"> </span><span class="k">value</span>

<span class="k">function</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span>
<span class="err">{</span>
<span class="w">    </span><span class="n">cl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">oldClass</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="w">    </span><span class="n">other</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="err">!</span><span class="p">(</span><span class="n">cl</span><span class="w"> </span><span class="o">%</span><span class="ow">in</span><span class="o">%</span><span class="w"> </span><span class="n">c</span><span class="p">(</span><span class="ss">"ts"</span><span class="p">,</span><span class="w"> </span><span class="ss">"mts"</span><span class="p">))</span>
<span class="w">    </span><span class="k">class</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">any</span><span class="p">(</span><span class="n">other</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">cl</span><span class="o">[</span><span class="n">other</span><span class="o">]</span>
<span class="w">    </span><span class="n">attr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="ss">"tsp"</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">NULL</span>
<span class="w">    </span><span class="n">t</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="err">}</span>
<span class="o">&lt;</span><span class="nl">bytecode</span><span class="p">:</span><span class="w"> </span><span class="mh">0x294e410</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nl">environment</span><span class="p">:</span><span class="w"> </span><span class="nl">namespace</span><span class="p">:</span><span class="n">stats</span><span class="o">&gt;</span>
</pre></div>

<h2>The S4 method dispatch system</h2>
<p>The S4 system is a newer method dispatch system and is an alternative to the
S3 system. Here is an example of an S4 function:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nv">library</span><span class="ss">(</span><span class="nv">Matrix</span><span class="ss">)</span>
<span class="nv">Loading</span><span class="w"> </span><span class="nv">required</span><span class="w"> </span><span class="nv">package</span>:<span class="w"> </span><span class="nv">lattice</span>
<span class="o">&gt;</span><span class="w"> </span><span class="nv">chol2inv</span>
<span class="nv">standardGeneric</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s2">"chol2inv"</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">package</span><span class="w"> </span><span class="s2">"base"</span>

<span class="nv">function</span><span class="w"> </span><span class="ss">(</span><span class="nv">x</span>,<span class="w"> </span>...<span class="ss">)</span><span class="w"> </span>
<span class="nv">standardGeneric</span><span class="ss">(</span><span class="s2">"chol2inv"</span><span class="ss">)</span>
<span class="o">&lt;</span><span class="nv">bytecode</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x000000000eafd790</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nv">environment</span>:<span class="w"> </span><span class="mi">0</span><span class="nv">x000000000eb06f10</span><span class="o">&gt;</span>
<span class="nv">Methods</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">arguments</span>:<span class="w"> </span><span class="nv">x</span>
<span class="nv">Use</span><span class="w">  </span><span class="nv">showMethods</span><span class="ss">(</span><span class="s2">"chol2inv"</span><span class="ss">)</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="nv">currently</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="nv">ones</span>.
</pre></div>

<p>The output already offers a lot of information. <code>standardGeneric</code> is an
indicator of an S4 function. The method to see defined S4 methods is offered
helpfully:</p>
<div class="code"><pre class="code literal-block">&gt; showMethods(chol2inv)
Function: chol2inv (package base)
x="ANY"
x="CHMfactor"
x="denseMatrix"
x="diagonalMatrix"
x="dtrMatrix"
x="sparseMatrix"
</pre></div>

<p><code>getMethod</code> can be used to see the source code of one of the methods:</p>
<div class="code"><pre class="code literal-block">&gt; getMethod("chol2inv", "diagonalMatrix")
Method Definition:

function (x, ...) 
{
    chk.s(...)
    tcrossprod(solve(x))
}
&lt;bytecode: 0x000000000ea2cc70&gt;
&lt;environment: namespace:Matrix&gt;

Signatures:
        x               
target  "diagonalMatrix"
defined "diagonalMatrix"
</pre></div>

<p>There are also methods with more complex signatures for each method, for
example</p>
<div class="code"><pre class="code literal-block">require(raster)
showMethods(extract)
Function: extract (package raster)
x="Raster", y="data.frame"
x="Raster", y="Extent"
x="Raster", y="matrix"
x="Raster", y="SpatialLines"
x="Raster", y="SpatialPoints"
x="Raster", y="SpatialPolygons"
x="Raster", y="vector"
</pre></div>

<p>To see the source code for one of these methods the entire signature must be
supplied, e.g.</p>
<div class="code"><pre class="code literal-block">getMethod("extract" , signature = c( x = "Raster" , y = "SpatialPolygons") )
</pre></div>

<p>It will not suffice to supply the partial signature</p>
<div class="code"><pre class="code literal-block"><span class="nv">getMethod</span><span class="ss">(</span><span class="s2">"extract"</span>,<span class="nv">signature</span><span class="o">=</span><span class="s2">"SpatialPolygons"</span><span class="ss">)</span>
#<span class="nv">Error</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">getMethod</span><span class="ss">(</span><span class="s2">"extract"</span>,<span class="w"> </span><span class="nv">signature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SpatialPolygons"</span><span class="ss">)</span><span class="w"> </span>:<span class="w"> </span>
#<span class="w">  </span><span class="nv">No</span><span class="w"> </span><span class="nv">method</span><span class="w"> </span><span class="nv">found</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="s2">"extract"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">signature</span><span class="w"> </span><span class="nv">SpatialPolygons</span>
</pre></div>

<h2>Functions that call unexported functions</h2>
<p>In the case of <code>ts.union</code>, <code>.cbindts</code> and <code>.makeNamesTs</code> are unexported
functions from the <code>stats</code> namespace. You can view the source code of
unexported functions by using the <code>:::</code> operator or <code>getAnywhere</code>.</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nl">stats</span><span class="p">:</span><span class="o">::</span><span class="p">.</span><span class="n">makeNamesTs</span>
<span class="k">function</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span>
<span class="err">{</span>
<span class="w">    </span><span class="n">l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">as</span><span class="p">.</span><span class="n">list</span><span class="p">(</span><span class="n">substitute</span><span class="p">(</span><span class="n">list</span><span class="p">(...)))</span><span class="o">[</span><span class="n">-1L</span><span class="o">]</span>
<span class="w">    </span><span class="n">nm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">names</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="w">    </span><span class="n">fixup</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">is</span><span class="p">.</span><span class="k">null</span><span class="p">(</span><span class="n">nm</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">seq_along</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="n">nm</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">""</span>
<span class="w">    </span><span class="n">dep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">l</span><span class="o">[</span><span class="n">fixup</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">deparse</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">[</span><span class="n">1L</span><span class="o">]</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">is</span><span class="p">.</span><span class="k">null</span><span class="p">(</span><span class="n">nm</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="p">(</span><span class="n">dep</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">any</span><span class="p">(</span><span class="n">fixup</span><span class="p">))</span><span class="w"> </span>
<span class="w">        </span><span class="n">nm</span><span class="o">[</span><span class="n">fixup</span><span class="o">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dep</span>
<span class="w">    </span><span class="n">nm</span>
<span class="err">}</span>
<span class="o">&lt;</span><span class="nl">bytecode</span><span class="p">:</span><span class="w"> </span><span class="mh">0x38140d0</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nl">environment</span><span class="p">:</span><span class="w"> </span><span class="nl">namespace</span><span class="p">:</span><span class="n">stats</span><span class="o">&gt;</span>
</pre></div>

<h2>Functions that call compiled code</h2>
<p>Note that "compiled" does not refer to byte-compiled R code as created by the
<strong>compiler</strong> package. The <code>&lt;bytecode: 0x294e410&gt;</code> line in the above output
indicates that the function is byte-compiled, and you can still view the
source from the R command line.</p>
<p>Functions that call <code>.C</code>, <code>.Call</code>, <code>.Fortran</code>, <code>.External</code>, <code>.Internal</code>, or
<code>.Primitive</code> are calling entry points in compiled code, so you will have to
look at sources of the compiled code if you want to fully understand the
function. This GitHub mirror of the R source code is a decent place to start.
The function <code>pryr::show_c_source</code> can be a useful tool as it will take you
directly to a GitHub page for <code>.Internal</code> and <code>.Primitive</code> calls. Packages may
use <code>.C</code>, <code>.Call</code>, <code>.Fortran</code>, and <code>.External</code>; but not <code>.Internal</code> or
<code>.Primitive</code>, because these are used to call functions built into the R
interpreter.</p>
<p>Calls to some of the above functions may use an object instead of a character
string to reference the compiled function. In those cases, the object is of
class <code>"NativeSymbolInfo"</code>, <code>"RegisteredNativeSymbol"</code>, or <code>"NativeSymbol"</code>;
and printing the object yields useful information. For example, <code>optim</code> calls
<code>.External2(C_optimhess, res$par, fn1, gr1, con)</code> (note that's <code>C_optimhess</code>,
not <code>"C_optimhess"</code>). <code>optim</code> is in the stats package, so you can type
<code>stats:::C_optimhess</code> to see information about the compiled function being
called.</p>
<h3>Compiled code in a package</h3>
<p>If you want to view compiled code in a package, you will need to
download/unpack the package source. The installed binaries are not sufficient.
A package's source code is available from the same CRAN (or CRAN compatible)
repository that the package was originally installed from. The
<code>download.packages()</code> function can get the package source for you.</p>
<div class="code"><pre class="code literal-block"><span class="n">download</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="n">pkgs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Matrix"</span><span class="p">,</span><span class="w"> </span>
<span class="w">                  </span><span class="n">destdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span>
<span class="w">                  </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="p">)</span>
</pre></div>

<p>This will download the source version of the Matrix package and save the
corresponding <code>.tar.gz</code> file in the current directory. Source code for
compiled functions can be found in the <code>src</code> directory of the uncompressed and
untared file. The uncompressing and untaring step can be done outside of <code>R</code>,
or from within <code>R</code> using the <code>untar()</code> function. It is possible to combine the
download and expansion step into a single call (note that only one package at
a time can be downloaded and unpacked in this way):</p>
<div class="code"><pre class="code literal-block"><span class="n">untar</span><span class="p">(</span><span class="n">download</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="n">pkgs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Matrix"</span><span class="p">,</span>
<span class="w">                        </span><span class="n">destdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span>
<span class="w">                        </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="p">)[,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>

<p>Alternatively, if the package development is hosted publicly (e.g. via GitHub,
R-Forge, or RForge.net), you can probably browse the source code online.</p>
<h3>Compiled code in a base package</h3>
<p>Certain packages are considered "base" packages. These packages ship with R
and their version is locked to the version of R. Examples include <code>base</code>,
<code>compiler</code>, <code>stats</code>, and <code>utils</code>. As such, they are not available as separate
downloadable packages on CRAN as described above. Rather, they are part of the
R source tree in individual package directories under <code>/src/library/</code>. How to
access the R source is described in the next section.</p>
<h3>Compiled code built into the R interpreter</h3>
<p>If you want to view the code built-in to the R interpreter, you will need to
download/unpack the R sources; or you can view the sources online via the R
Subversion repository or Winston Chang's github mirror.</p>
<p>Uwe Ligges's R news article (PDF) (p. 43) is a good general reference of how
to view the source code for <code>.Internal</code> and <code>.Primitive</code> functions. The basic
steps are to first look for the function name in <code>src/main/names.c</code> and then
search for the "C-entry" name in the files in <code>src/main/*</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In addition to the other answers on this question and its duplicates, here's a
good way to get source code for a package function without needing to know
which package it's in. e.g. say if we want the source for
<code>randomForest::rfcv()</code>:</p>
<h4>To <strong>view/edit</strong> it in a pop-up window:</h4>
<div class="code"><pre class="code literal-block">edit(getAnywhere('rfcv'), file='source_rfcv.r')

View(getAnywhere('rfcv'), file='source_rfcv.r')
</pre></div>

<p>Note that <code>edit()</code> opens a text editor (of user's choice), whereas <code>View()</code>
invokes a spreadsheet-style data viewer.</p>
<ul>
<li>
<code>View()</code> is great for browsing (multi-columnar) <strong>data</strong> , but usually terrible for <strong>code</strong> of anything other than toy length.</li>
<li>so when only want to <strong>view code</strong> , <code>edit()</code> is IMO actually far better than <code>View()</code>, since with <code>edit()</code> you can collapse/hide/dummy out all the arg-parsing/checking/default/error-message logic which can take up to 70% of an R function, and just get to the part where the function actually operationally does something(!), what type(s) of objects its return type is, whether and how it recurses, etc.</li>
</ul>
<h4>To <strong>redirect to a separate file</strong> (so you can bring up the code in your</h4>
<p>favorite IDE/editor/process it with grep/etc.):</p>
<div class="code"><pre class="code literal-block">capture.output(getAnywhere('rfcv'), file='source_rfcv.r')
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/invoking-javascript-code-in-an-iframe-from-the-parent-page/" class="u-url">Invoking JavaScript code in an iframe from the parent page</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/invoking-javascript-code-in-an-iframe-from-the-parent-page/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:27:23+08:00" itemprop="datePublished" title="2023-02-17 19:27">2023-02-17 19:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Basically, I have an <code>iframe</code> embedded in a page and the <code>iframe</code> has some
JavaScript routines I need to invoke from the parent page.</p>
<p>Now the opposite is quite simple as you only need to call
<code>parent.functionName()</code>, but unfortunately, I need exactly the opposite of
that.</p>
<p>Please note that my problem is not changing the source URL of the <code>iframe</code>,
but invoking a function defined in the <code>iframe</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Assume your iFrame's id is "targetFrame" and the function you want to call is
<code>targetFunction()</code>:</p>
<div class="code"><pre class="code literal-block">document.getElementById('targetFrame').contentWindow.targetFunction();
</pre></div>

<p>You can also access the frame using <code>window.frames</code> instead of
<code>document.getElementById</code>.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// this option does not work in most of latest versions of chrome and Firefox</span>
<span class="nb">window</span><span class="p">.</span><span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">frameElement</span><span class="p">.</span><span class="n">contentWindow</span><span class="p">.</span><span class="n">targetFunction</span><span class="p">();</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>There are some quirks to be aware of here.</p>
<ol>
<li>
<p><code>HTMLIFrameElement.contentWindow</code> is probably the easier way, but it's not quite a standard property and some browsers don't support it, mostly older ones. This is because the DOM Level 1 HTML standard has nothing to say about the <code>window</code> object.</p>
</li>
<li>
<p>You can also try <code>HTMLIFrameElement.contentDocument.defaultView</code>, which a couple of older browsers allow but IE doesn't. Even so, the standard doesn't explicitly say that you get the <code>window</code> object back, for the same reason as (1), but you can pick up a few extra browser versions here if you care.</p>
</li>
<li>
<p><code>window.frames['name']</code> returning the window is the oldest and hence most reliable interface. But you then have to use a <code>name="..."</code> attribute to be able to get a frame by name, which is slightly ugly/ <del>deprecated</del> /transitional. (<code>id="..."</code> would be better but IE doesn't like that.)</p>
</li>
<li>
<p><code>window.frames[number]</code> is also very reliable, but knowing the right index is the trick. You can get away with this eg. if you know you only have the one iframe on the page.</p>
</li>
<li>
<p>It is entirely possible the child iframe hasn't loaded yet, or something else went wrong to make it inaccessible. You may find it easier to reverse the flow of communications: that is, have the child iframe notify its <code>window.parent</code> script when it has finished loaded and is ready to be called back. By passing one of its own objects (eg. a callback function) to the parent script, that parent can then communicate directly with the script in the iframe without having to worry about what HTMLIFrameElement it is associated with.</p>
</li>
</ol>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-there-is-no-concurrenthashset-against-concurrenthashmap/" class="u-url">Why there is no ConcurrentHashSet against ConcurrentHashMap</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-there-is-no-concurrenthashset-against-concurrenthashmap/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T19:26:46+08:00" itemprop="datePublished" title="2023-02-17 19:26">2023-02-17 19:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>HashSet is based on HashMap.</p>
<p>If we look at <code>HashSet&lt;E&gt;</code> implementation, everything is been managed under
<code>HashMap&lt;E,Object&gt;</code>.</p>
<p><code>&lt;E&gt;</code> is used as a key of <code>HashMap</code>.</p>
<p>And we know that <code>HashMap</code> is not thread safe. That is why we have
<code>ConcurrentHashMap</code> in Java.</p>
<p>Based on this, I am confused that <strong>why we don't have a ConcurrentHashSet
which should be based on the<code>ConcurrentHashMap</code>?</strong></p>
<p>Is there anything else that I am missing? I need to use <code>Set</code> in a multi-
threaded environment.</p>
<p>Also, If I want to create my own <code>ConcurrentHashSet</code> can I achieve it by just
replacing the <code>HashMap</code> to <code>ConcurrentHashMap</code> and leaving the rest as is?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There's no built in type for <code>ConcurrentHashSet</code> because you can always
<em>derive</em> a set from a map. Since there are many types of maps, you use a
method to produce a set from a given map (or map class).</p>
<p>Prior to Java 8, you produce a concurrent hash set backed by a concurrent hash
map, by using <code>Collections.newSetFromMap(map)</code></p>
<p>In Java 8 (pointed out by @Matt), you can get a concurrent hash set <em>view</em> via
<code>ConcurrentHashMap.newKeySet()</code>. This is a bit simpler than the old
<code>newSetFromMap</code> which required you to pass in an empty map object. But it is
specific to <code>ConcurrentHashMap</code>.</p>
<p>Anyway, the Java designers could have created a new set interface every time a
new map interface was created, but that pattern would be impossible to enforce
when third parties create their own maps. It is better to have the static
methods that derive new sets; that approach always works, even when you create
your own map implementations.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">Set&lt;String&gt; mySet = Collections.newSetFromMap(new ConcurrentHashMap&lt;String, Boolean&gt;());
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-918.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-916.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
