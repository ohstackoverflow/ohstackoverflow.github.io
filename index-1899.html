<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1899) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1899.html">
<link rel="prev" href="index-1900.html" type="text/html">
<link rel="next" href="index-1898.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/downloading-a-file-from-spring-controllers/" class="u-url">Downloading a file from spring controllers</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/downloading-a-file-from-spring-controllers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:03:37+08:00" itemprop="datePublished" title="2023-03-03 12:03">2023-03-03 12:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a requirement where I need to download a PDF from the website. The PDF
needs to be generated within the code, which I thought would be a combination
of freemarker and a PDF generation framework like iText. Any better way?</p>
<p>However, my main problem is how do I allow the user to download a file through
a Spring Controller?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="nv">@RequestMapping</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"/files/{file_name}"</span><span class="p">,</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="k">GET</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">getFile</span><span class="p">(</span>
<span class="w">    </span><span class="nv">@PathVariable</span><span class="p">(</span><span class="ss">"file_name"</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">fileName</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">response</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">InputStream</span>
<span class="w">      </span><span class="n">InputStream</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<span class="w">      </span><span class="o">//</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">response</span><span class="s1">'s OutputStream</span>
<span class="s1">      org.apache.commons.io.IOUtils.copy(is, response.getOutputStream());</span>
<span class="s1">      response.flushBuffer();</span>
<span class="s1">    } catch (IOException ex) {</span>
<span class="s1">      log.info("Error writing file to output stream. Filename was '</span><span class="err">{}'</span><span class="ss">", fileName, ex);</span>
<span class="ss">      throw new RuntimeException("</span><span class="n">IOError</span><span class="w"> </span><span class="n">writing</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">stream</span><span class="err">"</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>

<span class="err">}</span>
</pre></div>

<p>Generally speaking, when you have <code>response.getOutputStream()</code>, you can write
anything there. You can pass this output stream as a place to put generated
PDF to your generator. Also, if you know what file type you are sending, you
can set</p>
<div class="code"><pre class="code literal-block">response.setContentType("application/pdf");
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I was able to stream line this by using the built in support in Spring with
it's ResourceHttpMessageConverter. This will set the content-length and
content-type if it can determine the mime-type</p>
<div class="code"><pre class="code literal-block"><span class="nv">@RequestMapping</span><span class="p">(</span><span class="k">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"/files/{file_name}"</span><span class="p">,</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="k">GET</span><span class="p">)</span>
<span class="nv">@ResponseBody</span>
<span class="k">public</span><span class="w"> </span><span class="n">FileSystemResource</span><span class="w"> </span><span class="n">getFile</span><span class="p">(</span><span class="nv">@PathVariable</span><span class="p">(</span><span class="ss">"file_name"</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">fileName</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileSystemResource</span><span class="p">(</span><span class="n">myService</span><span class="p">.</span><span class="n">getFileFor</span><span class="p">(</span><span class="n">fileName</span><span class="p">));</span><span class="w"> </span>
<span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-the-const-and-final-keywords-in-dart/" class="u-url">What is the difference between the "const" and "final" keywords in Dart?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-the-const-and-final-keywords-in-dart/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:03:11+08:00" itemprop="datePublished" title="2023-03-03 12:03">2023-03-03 12:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between the <code>const</code> and <code>final</code> keywords in Dart?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There is a post on dart's website and it explains it pretty well.</p>
<p><strong>Final:</strong></p>
<blockquote>
<p>"final" means single-assignment: a final variable or field <em>must</em> have an
initializer. Once assigned a value, a final variable's value cannot be
changed. final modifies <em>variables</em>.</p>
</blockquote>
<hr>
<p><strong>Const:</strong></p>
<blockquote>
<p>"const" has a meaning that's a bit more complex and subtle in Dart. const
modifies <em>values</em>. You can use it when creating collections, like const [1,
2, 3], and when constructing objects (instead of new) like const Point(2,
3). Here, const means that the object's entire deep state can be determined
entirely at compile time and that the object will be frozen and completely
immutable.</p>
<p>Const objects have a couple of interesting properties and restrictions:</p>
<p>They must be created from data that can be calculated at compile time. A
const object does not have access to anything you would need to calculate at
runtime. 1 + 2 is a valid const expression, but new DateTime.now() is not.</p>
<p>They are deeply, transitively immutable. If you have a final field
containing a collection, that collection can still be mutable. If you have a
const collection, everything in it must also be const, recursively.</p>
<p>They are <em>canonicalized</em>. This is sort of like string interning: for any
given const value, a single const object will be created and re-used no
matter how many times the const expression(s) are evaluated.</p>
</blockquote>
<hr>
<h3>So, what does this mean?</h3>
<p><strong>Const:</strong><br>
If the value you have is computed at runtime (<code>new DateTime.now()</code>, for
example), you can <strong>not</strong> use a const for it. However, if the value is known
at compile time (<code>const a = 1;</code>), then you should use <code>const</code> over <code>final</code>.
There are 2 other large differences between <code>const</code> and <code>final</code>. Firstly, if
you're using <code>const</code> inside a class, you have to declare it as <code>static const</code>
rather than just <code>const</code>. Secondly, if you have a <code>const</code> collection,
everything inside of that is in <code>const</code>. If you have a <code>final</code> collection,
everything inside of that is <strong>not</strong> <code>final</code>.</p>
<p><strong>Final:</strong><br><code>final</code> should be used over <code>const</code> if you don't know the value at compile
time, and it will be calculated/grabbed at runtime. If you want an HTTP
response that can't be changed, if you want to get something from a database,
or if you want to read from a local file, use <code>final</code>. Anything that isn't
known at compile time should be <code>final</code> over <code>const</code>.</p>
<hr>
<p>With all of that being said, both <code>const</code> and <code>final</code> cannot be reassigned,
but fields in a <code>final</code> object, as long as they aren't <code>const</code> or <code>final</code>
themselves, can be reassigned (unlike <code>const</code>).</p>
<p><br></p>
<h3>Suggest</h3>
<h4>Const</h4>
<p>Value must be known at <em><strong>compile-time</strong></em> , <code>const birthday = "2008/12/25"</code><br>
Can't be changed after initialized.</p>
<hr>
<h4>Final</h4>
<p>Value must be known at <em><strong>run-time</strong></em> , <code>final birthday =
getBirthDateFromDB()</code><br>
Can't be changed after initialized.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-list-of-methods-in-a-python-class/" class="u-url">How do I get list of methods in a Python class?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-list-of-methods-in-a-python-class/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T12:02:46+08:00" itemprop="datePublished" title="2023-03-03 12:02">2023-03-03 12:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to iterate through the methods in a class, or handle class or instance
objects differently based on the methods present. How do I get a list of class
methods?</p>
<p>Also see:</p>
<ul>
<li>How can I list the methods in a Python 2.5 module? </li>
<li>Looping over a Python / IronPython Object Methods </li>
<li>Finding the methods an object has </li>
<li>How do I look inside a Python object? </li>
<li>How Do I Perform Introspection on an Object in Python 2.x? </li>
<li>How to get a complete list of object’s methods and attributes? </li>
<li>Finding out which functions are available from a class instance in python?</li>
</ul>
<p><br><br></p>
<h2>Answer</h2>
<p>An example (listing the methods of the <code>optparse.OptionParser</code> class):</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">optparse</span> <span class="kn">import</span> <span class="n">OptionParser</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">inspect</span>
<span class="c1">#python2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">OptionParser</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">)</span>
<span class="p">[([(</span><span class="s1">'__init__'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="fm">__init__</span><span class="o">&gt;</span><span class="p">),</span>
<span class="o">...</span>
 <span class="p">(</span><span class="s1">'add_option'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">add_option</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'add_option_group'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">add_option_group</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'add_options'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">add_options</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'check_values'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">check_values</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'destroy'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">destroy</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'disable_interspersed_args'</span><span class="p">,</span>
  <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">disable_interspersed_args</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'enable_interspersed_args'</span><span class="p">,</span>
  <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">enable_interspersed_args</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'error'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">error</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'exit'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">exit</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">'expand_prog_name'</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">unbound</span> <span class="n">method</span> <span class="n">OptionParser</span><span class="o">.</span><span class="n">expand_prog_name</span><span class="o">&gt;</span><span class="p">),</span>
 <span class="o">...</span>
 <span class="p">]</span>
<span class="c1"># python3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">OptionParser</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>

<p>Notice that <code>getmembers</code> returns a list of 2-tuples. The first item is the
name of the member, the second item is the value.</p>
<p>You can also pass an instance to <code>getmembers</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; parser = OptionParser()
&gt;&gt;&gt; inspect.getmembers(parser, predicate=inspect.ismethod)
...
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>There is the <code>dir(theobject)</code> method to list all the fields and methods of
your object (as a tuple) and the inspect module (as codeape write) to list the
fields and methods with their doc (in """).</p>
<p>Because everything (even fields) might be called in Python, I'm not sure there
is a built-in function to list only methods. You might want to try if the
<em>object</em> you get through <code>dir</code> is callable or not.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1900.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1898.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
