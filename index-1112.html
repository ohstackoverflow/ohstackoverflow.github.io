<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1112) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1112.html">
<link rel="prev" href="index-1113.html" type="text/html">
<link rel="next" href="index-1111.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-enums-and-why-are-they-useful/" class="u-url">What are enums and why are they useful?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-enums-and-why-are-they-useful/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:32:16+08:00" itemprop="datePublished" title="2023-02-18 01:32">2023-02-18 01:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Today I was browsing through some questions on this site and I found a mention
of an <code>enum</code> being used in singleton pattern about purported thread-safety
benefits to such solution.</p>
<p>I have never used <code>enum</code>s and I have been programming in Java for more than a
couple of years now. And apparently, they changed a lot. Now they even do
full-blown support of OOP within themselves.</p>
<h4>Now why and what should I use enum in day to day programming?</h4>
<p><br><br></p>
<h2>Answer</h2>
<p>You should always use enums when a variable (especially a method parameter)
can only take one out of a small set of possible values. Examples would be
things like type constants (contract status: "permanent", "temp",
"apprentice"), or flags ("execute now", "defer execution").</p>
<p>If you use enums instead of integers (or String codes), you increase compile-
time checking and avoid errors from passing in invalid constants, and you
document which values are legal to use.</p>
<p>BTW, overuse of enums might mean that your methods do too much (it's often
better to have several separate methods, rather than one method that takes
several flags which modify what it does), but if you have to use flags or type
codes, enums are the way to go.</p>
<p>As an example, which is better?</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span><span class="w"> </span><span class="n">Counts</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">foobangs</span><span class="p">.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="n">param</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">foobangs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">count</span><span class="p">.</span><span class="w"> </span><span class="n">Can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="mi">1</span><span class="p">=</span><span class="n">green</span><span class="w"> </span><span class="n">foobangs</span><span class="p">,</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">=</span><span class="n">wrinkled</span><span class="w"> </span><span class="n">foobangs</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">=</span><span class="n">sweet</span><span class="w"> </span><span class="n">foobangs</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">=</span><span class="n">all</span><span class="w"> </span><span class="n">types</span><span class="p">.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">@</span><span class="k">return</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">foobangs</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="nb">type</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">countFoobangs</span><span class="p">(</span><span class="nb">int</span><span class="w"> </span><span class="nb">type</span><span class="p">)</span>
</pre></div>

<p>versus</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span><span class="w"> </span><span class="n">Types</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">foobangs</span><span class="o">.</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">FB_TYPE</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="n">GREEN</span><span class="p">,</span><span class="w"> </span><span class="n">WRINKLED</span><span class="p">,</span><span class="w"> </span><span class="n">SWEET</span><span class="p">,</span><span class="w"> </span>
<span class="w"> </span><span class="o">/**</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">combined</span><span class="w"> </span><span class="o">*/</span>
<span class="w"> </span><span class="n">ALL</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">Counts</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">foobangs</span><span class="o">.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">foobangs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">count</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">foobangs</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">type</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">countFoobangs</span><span class="p">(</span><span class="n">FB_TYPE</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
</pre></div>

<p>A method call like:</p>
<div class="code"><pre class="code literal-block">int sweetFoobangCount = countFoobangs(3);
</pre></div>

<p>then becomes:</p>
<div class="code"><pre class="code literal-block">int sweetFoobangCount = countFoobangs(FB_TYPE.SWEET);
</pre></div>

<hr>
<p>In the second example, it's immediately clear which types are allowed, docs
and implementation cannot go out of sync, and the compiler can enforce this.
Also, an invalid call like</p>
<div class="code"><pre class="code literal-block">int sweetFoobangCount = countFoobangs(99);
</pre></div>

<p>is no longer possible.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Why use any programming language feature? The reason we have languages at all
is for</p>
<ol>
<li>Programmers to efficiently and <em>correctly</em> express algorithms in a form computers can use.</li>
<li>Maintainers to understand algorithms others have written and <em>correctly</em> make changes.</li>
</ol>
<p>Enums improve both likelihood of correctness and readability without writing a
lot of boilerplate. If you are willing to write boilerplate, then you can
"simulate" enums:</p>
<div class="code"><pre class="code literal-block">public class Color {
    private Color() {} // Prevent others from making colors.
    public static final Color RED = new Color();
    public static final Color AMBER = new Color();
    public static final Color GREEN = new Color();
}
</pre></div>

<p>Now you can write:</p>
<div class="code"><pre class="code literal-block">Color trafficLightColor = Color.RED;
</pre></div>

<p>The boilerplate above has much the same effect as</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="nb nb-Type">Color</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">RED</span><span class="p">,</span><span class="w"> </span><span class="n">AMBER</span><span class="p">,</span><span class="w"> </span><span class="n">GREEN</span><span class="w"> </span><span class="p">};</span>
</pre></div>

<p>Both provide the same level of checking help from the compiler. Boilerplate is
just more typing. But saving a lot of typing makes the programmer more
<em>efficient</em> (see 1), so it's a worthwhile feature.</p>
<p>It's worthwhile for at least one more reason, too:</p>
<p><strong>Switch statements</strong></p>
<p>One thing that the <code>static final</code> enum simulation above does <em>not</em> give you is
nice <code>switch</code> cases. For enum types, the Java switch uses the type of its
variable to infer the scope of enum cases, so for the <code>enum Color</code> above you
merely need to say:</p>
<div class="code"><pre class="code literal-block"><span class="nt">Color</span><span class="w"> </span><span class="nt">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">;</span>
<span class="nt">switch</span><span class="w"> </span><span class="o">(</span><span class="nt">color</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="n">RED</span><span class="p">:</span>
<span class="w">        </span><span class="o">...</span>
<span class="w">        </span><span class="n">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Note it's not <code>Color.RED</code> in the cases. If you don't use enum, the only way to
use named quantities with <code>switch</code> is something like:</p>
<div class="code"><pre class="code literal-block">public Class Color {
    public static final int RED = 0;
    public static final int AMBER = 1;
    public static final int GREEN = 2;
}
</pre></div>

<p>But now a variable to hold a color must have type <code>int</code>. The nice compiler
checking of the enum and the <code>static final</code> simulation is gone. Not happy.</p>
<p>A compromise is to use a scalar-valued member in the simulation:</p>
<div class="code"><pre class="code literal-block">public class Color {
    public static final int RED_TAG = 1;
    public static final int AMBER_TAG = 2;
    public static final int GREEN_TAG = 3;

    public final int tag;

    private Color(int tag) { this.tag = tag; } 
    public static final Color RED = new Color(RED_TAG);
    public static final Color AMBER = new Color(AMBER_TAG);
    public static final Color GREEN = new Color(GREEN_TAG);
}
</pre></div>

<p>Now:</p>
<div class="code"><pre class="code literal-block"><span class="nt">Color</span><span class="w"> </span><span class="nt">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">;</span>
<span class="nt">switch</span><span class="w"> </span><span class="o">(</span><span class="nt">color</span><span class="p">.</span><span class="nc">tag</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="err">Color.</span><span class="n">RED_TAG</span><span class="p">:</span>
<span class="w">        </span><span class="o">...</span>
<span class="w">        </span><span class="n">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>But note, even more boilerplate!</p>
<p><strong>Using an enum as a singleton</strong></p>
<p>From the boilerplate above you can see why an enum provides a way to implement
a singleton. Instead of writing:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">final</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">INSTANCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="ss">()</span><span class="w"> </span>{}

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">methods</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">instance</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">here</span>
}
</pre></div>

<p>and then accessing it with</p>
<div class="code"><pre class="code literal-block">SingletonClass.INSTANCE
</pre></div>

<p>we can just say</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">SingletonClass</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">INSTANCE</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">methods</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">here</span>
<span class="p">}</span>
</pre></div>

<p>which gives us the same thing. We can get away with this because Java enums
<em>are</em> implemented as full classes with only a little syntactic sugar sprinkled
over the top. This is again less boilerplate, but it's non-obvious unless the
idiom is familiar to you. I also dislike the fact that you get the various
enum functions even though they don't make much sense for the singleton: <code>ord</code>
and <code>values</code>, etc. (There's actually a trickier simulation where <code>Color
extends Integer</code> that will work with switch, but it's so tricky that it even
more clearly shows why <code>enum</code> is a better idea.)</p>
<p><strong>Thread safety</strong></p>
<p>Thread safety is a potential problem only when singletons are created lazily
with no locking.</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="w"> </span><span class="nv">INSTANCE</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">private</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="ss">()</span><span class="w"> </span>{}
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="w"> </span><span class="nv">getInstance</span><span class="ss">()</span><span class="w"> </span>{
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">INSTANCE</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">null</span><span class="ss">)</span><span class="w"> </span><span class="nv">INSTANCE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">SingletonClass</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">INSTANCE</span><span class="c1">;</span>
<span class="w">    </span>}

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">methods</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">instance</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">here</span>
}
</pre></div>

<p>If many threads call <code>getInstance</code> simultaneously while <code>INSTANCE</code> is still
null, any number of instances can be created. This is bad. The only solution
is to add <code>synchronized</code> access to protect the variable <code>INSTANCE</code>.</p>
<p>However, the <code>static final</code> code above does not have this problem. It creates
the instance eagerly at class load time. Class loading is synchronized.</p>
<p>The <code>enum</code> singleton is effectively lazy because it's not initialized until
first use. Java initialization is also synchronized, so multiple threads can't
initialize more than one instance of <code>INSTANCE</code>. You're getting a lazily
initialized singleton with very little code. The only negative is the the
rather obscure syntax. You need to know the idiom or thoroughly understand how
class loading and initialization work to know what's happening.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/" class="u-url">How to do a logical OR operation for integer comparison in shell scripting?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:31:51+08:00" itemprop="datePublished" title="2023-02-18 01:31">2023-02-18 01:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to do a simple condition check, but it doesn't seem to work.</p>
<p>If <code>$#</code> is equal to <code>0</code> or is greater than <code>1</code> then say hello.</p>
<p>I have tried the following syntax with no success:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$#"</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="nv">o</span><span class="w"> </span><span class="s2">"$#"</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>]<span class="w"> </span><span class="c1">; then</span>
<span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"hello"</span>
<span class="nv">fi</span>

<span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$#"</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>]<span class="w"> </span><span class="o">||</span><span class="w"> </span>[<span class="w"> </span><span class="s2">"$#"</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span>]<span class="w"> </span><span class="c1">; then</span>
<span class="w"> </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"hello"</span>
<span class="nv">fi</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>This should work:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">"</span><span class="nv">$#</span><span class="s2">"</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">"</span><span class="nv">$#</span><span class="s2">"</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"hello"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="k">fi</span>
</code></td>
</tr>
</table></div>
<p>I'm not sure if this is different in other shells but if you wish to use &lt;, &gt;,
you need to put them inside double parenthesis like so:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">((</span><span class="s2">"$#"</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="ss">))</span>
<span class="w"> </span>...
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This code works for me:</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/sh</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="nv">argc</span><span class="o">=</span><span class="nv">$#</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$argc</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$argc</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">$argc</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-6"><code data-line-number="6"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"foo"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-7"><code data-line-number="7"></code></a></td>
<td class="code"><code><span class="k">else</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-8"><code data-line-number="8"></code></a></td>
<td class="code"><code><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"bar"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-do-a-logical-or-operation-for-integer-comparison-in-shell-scripting/#-9"><code data-line-number="9"></code></a></td>
<td class="code"><code><span class="k">fi</span>
</code></td>
</tr>
</table></div>
<p>I don't think sh supports "==". Use "=" to compare strings and -eq to compare
ints.</p>
<div class="code"><pre class="code literal-block">man test
</pre></div>

<p>for more details.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/convert-java-util-date-to-java-time-localdate/" class="u-url">Convert java.util.Date to java.time.LocalDate</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/convert-java-util-date-to-java-time-localdate/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:31:25+08:00" itemprop="datePublished" title="2023-02-18 01:31">2023-02-18 01:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the best way to convert a <code>java.util.Date</code> object to the new JDK
8/JSR-310 <code>java.time.LocalDate</code>?</p>
<div class="code"><pre class="code literal-block">Date input = new Date();
LocalDate date = ???
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>Short answer</strong></p>
<div class="code"><pre class="code literal-block">Date input = new Date();
LocalDate date = input.toInstant().atZone(ZoneId.systemDefault()).toLocalDate();
</pre></div>

<p><strong>Explanation</strong></p>
<p>Despite its name, <code>java.util.Date</code> represents an instant on the time-line, not
a "date". The actual data stored within the object is a <code>long</code> count of
milliseconds since 1970-01-01T00:00Z (midnight at the start of 1970 GMT/UTC).</p>
<p>The equivalent class to <code>java.util.Date</code> in JSR-310 is <code>Instant</code>, thus there
is a convenient method <code>toInstant()</code> to provide the conversion:</p>
<div class="code"><pre class="code literal-block">Date input = new Date();
Instant instant = input.toInstant();
</pre></div>

<p>A <code>java.util.Date</code> instance has no concept of time-zone. This might seem
strange if you call <code>toString()</code> on a <code>java.util.Date</code>, because the <code>toString</code>
is relative to a time-zone. However that method actually uses Java's default
time-zone on the fly to provide the string. The time-zone is not part of the
actual state of <code>java.util.Date</code>.</p>
<p>An <code>Instant</code> also does not contain any information about the time-zone. Thus,
to convert from an <code>Instant</code> to a local date it is necessary to specify a
time-zone. This might be the default zone - <code>ZoneId.systemDefault()</code> - or it
might be a time-zone that your application controls, such as a time-zone from
user preferences. Use the <code>atZone()</code> method to apply the time-zone:</p>
<div class="code"><pre class="code literal-block">Date input = new Date();
Instant instant = input.toInstant();
ZonedDateTime zdt = instant.atZone(ZoneId.systemDefault());
</pre></div>

<p>A <code>ZonedDateTime</code> contains state consisting of the local date and time, time-
zone and the offset from GMT/UTC. As such the date - <code>LocalDate</code> - can be
easily extracted using <code>toLocalDate()</code>:</p>
<div class="code"><pre class="code literal-block">Date input = new Date();
Instant instant = input.toInstant();
ZonedDateTime zdt = instant.atZone(ZoneId.systemDefault());
LocalDate date = zdt.toLocalDate();
</pre></div>

<p><strong>Java 9 answer</strong></p>
<p>In Java SE 9, a new method has been added that slightly simplifies this task:</p>
<div class="code"><pre class="code literal-block">Date input = new Date();
LocalDate date = LocalDate.ofInstant(input.toInstant(), ZoneId.systemDefault());
</pre></div>

<p>This new alternative is more direct, creating less garbage, and thus should
perform better.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Better way is:</p>
<div class="code"><pre class="code literal-block"><span class="nv">Date</span><span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>...<span class="c1">;</span>
<span class="nv">Instant</span>.<span class="nv">ofEpochMilli</span><span class="ss">(</span><span class="nv">date</span>.<span class="k">getTime</span><span class="ss">())</span>.<span class="nv">atZone</span><span class="ss">(</span><span class="nv">ZoneId</span>.<span class="nv">systemDefault</span><span class="ss">())</span>.<span class="nv">toLocalDate</span><span class="ss">()</span>
</pre></div>

<p>Advantages of this version:</p>
<ul>
<li>
<p>works regardless the input is an instance of <code>java.util.Date</code> or it's a subclass of <code>java.sql.Date</code> (unlike @JodaStephen's way). This is common with JDBC-originated data. <code>java.sql.Date.toInstant()</code> always throws an exception.</p>
</li>
<li>
<p>it's the same for JDK8 and JDK7 with JSR-310 backport</p>
</li>
</ul>
<p>I personally use an utility class (but it is not backport-compatible):</p>
<div class="code"><pre class="code literal-block"><span class="o">/**</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Utilities</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">conversion</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">JDK</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">types</span><span class="w"> </span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">between</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">code</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">code</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.*</span><span class="p">})</span><span class="o">.</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
<span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">All</span><span class="w"> </span><span class="n">methods</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="o">-</span><span class="n">safe</span><span class="o">.</span>
<span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">DateConvertUtils</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Calls</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="c1">#asLocalDate(Date, ZoneId)} with the system default time zone.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">asLocalDate</span><span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">asLocalDate</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="o">.</span><span class="n">systemDefault</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Creates</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">code</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">it</span><span class="s1">'s subclasses. Null-safe.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">asLocalDate</span><span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">toLocalDate</span><span class="p">();</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Instant</span><span class="o">.</span><span class="n">ofEpochMilli</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">getTime</span><span class="p">())</span><span class="o">.</span><span class="n">atZone</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span><span class="o">.</span><span class="n">toLocalDate</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Calls</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="c1">#asLocalDateTime(Date, ZoneId)} with the system default time zone.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">asLocalDateTime</span><span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">asLocalDateTime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="o">.</span><span class="n">systemDefault</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Creates</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">code</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">it</span><span class="s1">'s subclasses. Null-safe.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="w"> </span><span class="n">asLocalDateTime</span><span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">toLocalDateTime</span><span class="p">();</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Instant</span><span class="o">.</span><span class="n">ofEpochMilli</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">getTime</span><span class="p">())</span><span class="o">.</span><span class="n">atZone</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span><span class="o">.</span><span class="n">toLocalDateTime</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Calls</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="c1">#asUtilDate(Object, ZoneId)} with the system default time zone.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="w"> </span><span class="n">asUtilDate</span><span class="p">(</span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">asUtilDate</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="o">.</span><span class="n">systemDefault</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Creates</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">objects</span><span class="o">.</span><span class="w"> </span><span class="n">Is</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="o">-</span><span class="n">safe</span><span class="o">.</span><span class="w"> </span><span class="n">Currently</span><span class="w"> </span><span class="n">supports</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">}</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">LocalDate</span><span class="p">}</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">LocalDateTime</span><span class="p">}</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">ZonedDateTime</span><span class="p">}</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Instant</span><span class="p">}</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="n">param</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="n">Time</span><span class="w"> </span><span class="n">zone</span><span class="p">,</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="o">.</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="err">@</span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="n">exactly</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">class</span><span class="p">,</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">subclass</span><span class="p">,</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="w"> </span><span class="n">asUtilDate</span><span class="p">(</span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Date</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">(((</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">getTime</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">LocalDate</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">from</span><span class="p">(((</span><span class="n">LocalDate</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">atStartOfDay</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span><span class="o">.</span><span class="n">toInstant</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">LocalDateTime</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">from</span><span class="p">(((</span><span class="n">LocalDateTime</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">atZone</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span><span class="o">.</span><span class="n">toInstant</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">from</span><span class="p">(((</span><span class="n">ZonedDateTime</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">toInstant</span><span class="p">());</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="n">instanceof</span><span class="w"> </span><span class="n">Instant</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">from</span><span class="p">((</span><span class="n">Instant</span><span class="p">)</span><span class="w"> </span><span class="n">date</span><span class="p">);</span>

<span class="w">        </span><span class="n">throw</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">UnsupportedOperationException</span><span class="p">(</span><span class="s2">"Don't know hot to convert "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">date</span><span class="o">.</span><span class="n">getClass</span><span class="p">()</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" to java.util.Date"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Creates</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">Instant</span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">code</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">it</span><span class="s1">'s subclasses. Null-safe.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Instant</span><span class="w"> </span><span class="n">asInstant</span><span class="p">(</span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Instant</span><span class="o">.</span><span class="n">ofEpochMilli</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">getTime</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Calls</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="c1">#asZonedDateTime(Date, ZoneId)} with the system default time zone.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">asZonedDateTime</span><span class="p">(</span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">asZonedDateTime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="o">.</span><span class="n">systemDefault</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">/**</span>
<span class="w">     </span><span class="o">*</span><span class="w"> </span><span class="n">Creates</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">link</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="p">{</span><span class="err">@</span><span class="n">code</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span><span class="p">}</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">it</span><span class="s1">'s subclasses. Null-safe.</span>
<span class="w">     </span><span class="o">*/</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">asZonedDateTime</span><span class="p">(</span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">ZoneId</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">asInstant</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">atZone</span><span class="p">(</span><span class="n">zone</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p>The <code>asLocalDate()</code> method here is null-safe, uses <code>toLocalDate()</code>, if input
is <code>java.sql.Date</code> (it may be overriden by the JDBC driver to avoid timezone
problems or unnecessary calculations), otherwise uses the abovementioned
method.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1113.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1111.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
