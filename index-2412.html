<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2412) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2412.html">
<link rel="prev" href="index-2413.html" type="text/html">
<link rel="next" href="index-2411.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-prevent-the-error-index-signature-of-object-type-implicitly-has-an-any-type-when-compiling-typescript-with-noimplicitany-flag-enabled/" class="u-url">How do I prevent the error "Index signature of object type implicitly has an 'any' type" when compiling typescript with noImplicitAny flag enabled?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-prevent-the-error-index-signature-of-object-type-implicitly-has-an-any-type-when-compiling-typescript-with-noimplicitany-flag-enabled/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T14:15:10+08:00" itemprop="datePublished" title="2023-03-04 14:15">2023-03-04 14:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I always compile TypeScript with the flag <code>--noImplicitAny</code>. This makes sense
as I want my type checking to be as tight as possible.</p>
<p>My problem is that with the following code I get the error:</p>
<div class="code"><pre class="code literal-block"><span class="k">Index</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">implicitly</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="s1">'any'</span><span class="w"> </span><span class="n">type</span>



<span class="n">interface</span><span class="w"> </span><span class="n">ISomeObject</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nl">firstKey</span><span class="p">:</span><span class="w">   </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="nl">secondKey</span><span class="p">:</span><span class="w">  </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="nl">thirdKey</span><span class="p">:</span><span class="w">   </span><span class="n">string</span><span class="p">;</span>
<span class="err">}</span>

<span class="n">let</span><span class="w"> </span><span class="nl">someObject</span><span class="p">:</span><span class="w"> </span><span class="n">ISomeObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nl">firstKey</span><span class="p">:</span><span class="w">   </span><span class="s1">'firstValue'</span><span class="p">,</span>
<span class="w">    </span><span class="nl">secondKey</span><span class="p">:</span><span class="w">  </span><span class="s1">'secondValue'</span><span class="p">,</span>
<span class="w">    </span><span class="nl">thirdKey</span><span class="p">:</span><span class="w">   </span><span class="s1">'thirdValue'</span>
<span class="err">}</span><span class="p">;</span>

<span class="n">let</span><span class="w"> </span><span class="k">key</span><span class="err">:</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'secondKey'</span><span class="p">;</span>

<span class="n">let</span><span class="w"> </span><span class="nl">secondValue</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someObject</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
</pre></div>

<p>Important to note is that the idea is that the key variable comes from
somewhere else in the application and can be any of the keys in the object.</p>
<p>I've tried explicitly casting the type by:</p>
<div class="code"><pre class="code literal-block"><span class="n">let</span><span class="w"> </span><span class="nl">secondValue</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">someObject</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
</pre></div>

<p>Or is my scenario just not possible with <code>--noImplicitAny</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Adding an index signature will let TypeScript know what the type should be.</p>
<p>In your case that would be <code>[key: string]: string;</code></p>
<div class="code"><pre class="code literal-block"><span class="nt">interface</span><span class="w"> </span><span class="nt">ISomeObject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">firstKey</span><span class="p">:</span><span class="w">      </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">secondKey</span><span class="p">:</span><span class="w">     </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">thirdKey</span><span class="p">:</span><span class="w">      </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="cp">[</span><span class="nx">key</span><span class="p">:</span><span class="w"> </span><span class="kt">string</span><span class="cp">]</span><span class="err">:</span><span class="w"> </span><span class="err">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>However, this also enforces all of the property types to match the index
signature. Since all of the properties are a <code>string</code> it works.</p>
<blockquote>
<p>While index signatures are a powerful way to describe the array and
'dictionary' pattern, they also enforce that all properties match their
return type.</p>
</blockquote>
<p>Edit:</p>
<p>If the types don't match, a union type can be used <code>[key: string]:
string|IOtherObject;</code></p>
<p>With union types, it's better if you let TypeScript infer the type instead of
defining it.</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="k">Type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n n-Quoted">`secondValue`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n n-Quoted">`string|IOtherObject`</span>
<span class="n">let</span><span class="w"> </span><span class="n">secondValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someObject</span><span class="err">[</span><span class="k">key</span><span class="err">]</span><span class="p">;</span>
<span class="o">//</span><span class="w"> </span><span class="k">Type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n n-Quoted">`foo`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n n-Quoted">`string`</span>
<span class="n">let</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">secondValue</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>
</pre></div>

<p>Although that can get a little messy if you have a lot of different types in
the index signatures. The alternative to that is to use <code>any</code> in the
signature. <code>[key: string]: any;</code> Then you would need to cast the types like
you did above.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Another way to avoid the error is to use the cast like this:</p>
<p><code>let secondValue: string = (&lt;any&gt;someObject)[key];</code> <em>(Note the parenthesis)</em></p>
<p>The only problem is that this isn't type-safe anymore, as you are casting to
<code>any</code>. But you can always cast back to the correct type.</p>
<p><em>ps: I'm using typescript 1.7, not sure about previous versions.</em></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/objective-c-arc-strong-vs-retain-and-weak-vs-assign/" class="u-url">Objective-C ARC: strong vs retain and weak vs assign</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/objective-c-arc-strong-vs-retain-and-weak-vs-assign/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T14:11:40+08:00" itemprop="datePublished" title="2023-03-04 14:11">2023-03-04 14:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>There are two new memory management attributes for properties introduced by
ARC, <code>strong</code> and <code>weak</code>.</p>
<p>Apart from <code>copy</code>, which is obviously something completely different, <strong>are
there any differences between<code>strong</code> vs <code>retain</code> and <code>weak</code> vs <code>assign</code>?</strong></p>
<p>From my understanding, the only difference here is that <code>weak</code> will assign
<code>nil</code> to the pointer, while <code>assign</code> won't, which means the program will crash
when I send a message to the pointer once it's been released. But if I use
<code>weak</code>, this won't ever happen, because message send to <code>nil</code> won't do
anything.</p>
<p>I don't know about any differences between <code>strong</code> and <code>retain</code>.</p>
<p><strong>Is there any reason why should I use<code>assign</code> and <code>retain</code> in new projects,
or are the kind of being deprecated?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p>From the Transitioning to ARC Release Notes (the example in the section on
property attributes).</p>
<div class="code"><pre class="code literal-block"><span class="c1">// The following declaration is a synonym for: @property(retain) MyClass *myObject;</span>

<span class="p">@</span><span class="n">property</span><span class="p">(</span><span class="n">strong</span><span class="p">)</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="o">*</span><span class="n">myObject</span><span class="p">;</span>
</pre></div>

<p>So <code>strong</code> is the same as <code>retain</code> in a property declaration.</p>
<p>For ARC projects I would use <code>strong</code> instead of <code>retain</code>, I would use
<code>assign</code> for C primitive properties and <code>weak</code> for weak references to
Objective-C objects.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From the Transitioning to ARC Release Notes (the example in the section on
property attributes).</p>
<div class="code"><pre class="code literal-block"><span class="c1">// The following declaration is a synonym for: @property(retain) MyClass *myObject;</span>

<span class="p">@</span><span class="n">property</span><span class="p">(</span><span class="n">strong</span><span class="p">)</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="o">*</span><span class="n">myObject</span><span class="p">;</span>
</pre></div>

<p>So <code>strong</code> is the same as <code>retain</code> in a property declaration.</p>
<p>For ARC projects I would use <code>strong</code> instead of <code>retain</code>, I would use
<code>assign</code> for C primitive properties and <code>weak</code> for weak references to
Objective-C objects.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/set-object-property-using-reflection/" class="u-url">Set object property using reflection</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/set-object-property-using-reflection/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T14:10:03+08:00" itemprop="datePublished" title="2023-03-04 14:10">2023-03-04 14:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a way in C# where I can use reflection to set an object property?</p>
<p>Ex:</p>
<div class="code"><pre class="code literal-block">MyObject obj = new MyObject();
obj.Name = "Value";
</pre></div>

<p>I want to set <code>obj.Name</code> with reflection. Something like:</p>
<div class="code"><pre class="code literal-block">Reflection.SetProperty(obj, "Name") = "Value";
</pre></div>

<p>Is there a way of doing this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Yes, you can use <code>Type.InvokeMember()</code>:</p>
<div class="code"><pre class="code literal-block">using System.Reflection;
MyObject obj = new MyObject();
obj.GetType().InvokeMember("Name",
    BindingFlags.Instance | BindingFlags.Public | BindingFlags.SetProperty,
    Type.DefaultBinder, obj, "Value");
</pre></div>

<p>This will throw an exception if <code>obj</code> doesn't have a property called <code>Name</code>,
or it can't be set.</p>
<p>Another approach is to get the metadata for the property, and then set it.
This will allow you to check for the existence of the property, and verify
that it can be set:</p>
<div class="code"><pre class="code literal-block"><span class="nv">using</span><span class="w"> </span><span class="nv">System</span>.<span class="nv">Reflection</span><span class="c1">;</span>
<span class="nv">MyObject</span><span class="w"> </span><span class="nv">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">MyObject</span><span class="ss">()</span><span class="c1">;</span>
<span class="nv">PropertyInfo</span><span class="w"> </span><span class="nv">prop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">obj</span>.<span class="nv">GetType</span><span class="ss">()</span>.<span class="nv">GetProperty</span><span class="ss">(</span><span class="s2">"Name"</span>,<span class="w"> </span><span class="nv">BindingFlags</span>.<span class="nv">Public</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">BindingFlags</span>.<span class="nv">Instance</span><span class="ss">)</span><span class="c1">;</span>
<span class="k">if</span><span class="ss">(</span><span class="nv">null</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nv">prop</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">prop</span>.<span class="nv">CanWrite</span><span class="ss">)</span>
{
<span class="w">    </span><span class="nv">prop</span>.<span class="nv">SetValue</span><span class="ss">(</span><span class="nv">obj</span>,<span class="w"> </span><span class="s2">"Value"</span>,<span class="w"> </span><span class="nv">null</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can also do:</p>
<div class="code"><pre class="code literal-block">Type type = target.GetType();

PropertyInfo prop = type.GetProperty("propertyName");

prop.SetValue (target, propertyValue, null);
</pre></div>

<p>where target is the object that will have its property set.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2413.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2411.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
