<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1098) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1098.html">
<link rel="prev" href="index-1099.html" type="text/html">
<link rel="next" href="index-1097.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/npm-bao-shang-de-at-qian-zhui-shi-shi-yao-yi-si/" class="u-url">npm 包上的“at”(@) 前缀是什么意思？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/npm-bao-shang-de-at-qian-zhui-shi-shi-yao-yi-si/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:25:24+08:00" itemprop="datePublished" title="2023-02-18 01:25">2023-02-18 01:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>在Angular Component Router 文档中，我偶然发现了一个我以前从未见过的 npm 命令，我不明白发生了什么：</p>
<div class="code"><pre class="code literal-block"><span class="n">npm</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="nv">@angular</span><span class="o">/</span><span class="n">router</span><span class="w"> </span><span class="c1">--save</span>
</pre></div>

<p>是什么意思<code>@angular/router</code>？</p>
<p>整个字符串是包名吗？但是当我使用npmjs.com上的搜索时，我没有找到那个包。而且命令行搜索确实没有返回这样的包：</p>
<div class="code"><pre class="code literal-block"><span class="n">npm</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="nv">@angular</span><span class="o">/</span><span class="n">router</span>
<span class="err">:</span><span class="k">No</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="k">found</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="ss">"@angular/router"</span>
</pre></div>

<p>那么<code>@angular/</code>npm中是不是有某种前缀机制呢？它是如何工作的？</p>
<p><br><br></p>
<h2>解答</h2>
<p>这是 NPM 的一个新特性，称为“作用域包”，它有效地允许 NPM 包被命名空间。NPM
上的每个用户和组织都有自己的范围，并且他们是唯一可以向其中添加包的人。</p>
<p>这很有用，原因如下：</p>
<ul>
<li>它允许组织明确哪些包是“官方”的，哪些不是。 <ul>
<li>例如，如果一个包有 scope <code>@angular</code>，你就知道它是由 Angular 核心团队发布的。</li>
</ul>
</li>
<li>包名称只需要在它发布的范围内是唯一的，而不是整个注册表。 <ul>
<li>例如，包名<code>http</code>已经在主存储库中，但 Angular<code>@angular/http</code>也可以拥有。</li>
</ul>
</li>
</ul>
<p>范围包没有出现在公共搜索中的原因是因为它们中的很多都是使用 NPM
付费服务的组织创建的私有包，并且他们不愿意打开搜索，直到他们完全确定他们不是将不该公开的事情公之于众——从法律的角度来看，这是可以理解的。</p>
<p>有关详细信息，请参阅NPM 文档和Angular 文档。</p>
<p><strong>编辑：</strong> 看来公共范围的包现在可以正确显示在搜索中了！</p>
<p><br></p>
<h3>更多建议</h3>
<p>npm 上基本上有两种类型的模块，它们是 -</p>
<ul>
<li>
<p>全局模块——这些模块遵循当今存在的命名约定。你<code>require('foo')</code>和那里有很多欢乐。它们由一个或多个人通过<code>npm install XYZ</code>命令拥有。</p>
</li>
<li>
<p>作用域模块——这些是新模块，它们在组织名称下“作用域”，组织名称以<code>@</code>组织名称、斜杠和包名称开头，例如<code>@someOrgScope/packagename</code>. 作用域是一种将相关包组合在一起的方式，它也会影响 npm 处理包的一些方式。</p>
</li>
</ul>
<p>在 npm install 中，通过名称引用它来安装作用域包，前面加上 @ 符号：</p>
<div class="code"><pre class="code literal-block"><span class="n">npm</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="nv">@myorg</span><span class="o">/</span><span class="n">mypackage</span>
</pre></div>

<p>也可以看看</p>
<ul>
<li>
<p>http://blog.nodejitsu.com/a-summary-of-scoped-modules-in-npm/</p>
</li>
<li>
<p>https://docs.npmjs.com/misc/scope</p>
</li>
</ul>
<p><br><br><a href="posts/what-is-the-meaning-of-the-at-prefix-on-npm-packages/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/npm-install-he-npm-ci-you-shi-yao-qu-bie/" class="u-url">“npm install”和“npm ci”有什么区别？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/npm-install-he-npm-ci-you-shi-yao-qu-bie/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:25:01+08:00" itemprop="datePublished" title="2023-02-18 01:25">2023-02-18 01:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我正在使用持续集成并发现了npm ci命令。</p>
<p>我不知道在我的工作流程中使用这个命令有什么好处。</p>
<p>它更快吗？它会让测试变得更难吗？</p>
<p><br><br></p>
<h2>解答</h2>
<p>来自npm ci 的官方文档：</p>
<blockquote>
<p>简而言之，使用 npm install 和 npm ci 的主要区别是：</p>
<ul>
<li>该项目必须具有现有的 package-lock.json 或 npm-shrinkwrap.json。</li>
<li>如果包锁中的依赖项与 package.json 中的依赖项不匹配，npm ci 将报错退出，而不是更新包锁。</li>
<li>npm ci 一次只能安装整个项目：不能使用此命令添加单个依赖项。</li>
<li>如果 node_modules 已经存在，它将在 npm ci 开始安装之前自动删除。</li>
<li>它永远不会写入 package.json 或任何包锁：安装基本上是冻结的。
</li>
</ul>
</blockquote>
<hr>
<p>本质上， <strong><code>npm install</code></strong> 读取<code>package.json</code>以创建依赖项列表并用于<code>package-
lock.json</code>通知要安装这些依赖项的哪些版本。 <strong>如果依赖项不在其中，<code>package-lock.json</code>它将被添加<code>npm
install</code></strong>。</p>
<p><strong><code>npm ci</code></strong> （也称为 <strong>C</strong> lean <strong>I</strong>
nstall）旨在用于自动化环境——例如测试平台、持续集成和部署——或者任何你想确保你正在干净安装你的依赖项的情况。</p>
<p>它直接从安装依赖项<code>package-lock.json</code>并<code>package.json</code>仅用于验证没有不匹配的版本。
<strong>如果缺少任何依赖项或具有不兼容的版本，它将抛出错误</strong> 。</p>
<p>用于<code>npm
install</code>添加新的依赖项，以及更新项目的依赖项。通常，您会在开发过程中拉取更新依赖项列表的更改后使用它，但在这种情况下使用它可能是个好主意<code>npm
ci</code>。</p>
<p><code>npm ci</code>如果您需要确定性的、可重复的构建，请使用。例如在持续集成、自动化作业等过程中以及首次安装依赖项时，而不是<code>npm install</code>.</p>
<h3><code>npm install</code></h3>
<ul>
<li>安装包及其所有依赖项。</li>
<li>
<code>npm-shrinkwrap.json</code>依赖关系由and驱动<code>package-lock.json</code>（按此顺序）。</li>
<li>
<strong>没有参数</strong> ：安装本地模块的依赖项。</li>
<li>可以安装全局包。</li>
<li>将在<code>node_modules</code>.</li>
<li>它可以写入<code>package.json</code>或<code>package-lock.json</code>。 <ul>
<li>当与参数 ( <code>npm i packagename</code>) 一起使用时，它可能会写入<code>package.json</code>以添加或更新依赖项。</li>
<li>当不带参数使用时， ( <code>npm i</code>) 它可能会写入<code>package-lock.json</code>以锁定某些依赖项的版本，如果它们不在这个文件中的话。</li>
</ul>
</li>
</ul>
<h3><code>npm ci</code></h3>
<ul>
<li>至少需要 npm v5.7.1。</li>
<li>需要<code>package-lock.json</code>或<code>npm-shrinkwrap.json</code>必须在场。</li>
<li>如果这两个文件的依赖项不匹配，则抛出错误<code>package.json</code>。</li>
<li>一次删除<code>node_modules</code>并安装 <em>所有依赖项。</em>
</li>
<li>它从不写入<code>package.json</code>or <code>package-lock.json</code>。</li>
</ul>
<h3>算法</h3>
<p>在从或<code>npm ci</code>生成整个依赖关系树时，使用以下算法 <em>更新内容（</em> 来源）：<code>package-lock.json``npm-
shrinkwrap.json``npm install</code> <em><code>node_modules</code></em></p>
<blockquote>
<div class="code"><pre class="code literal-block"><span class="nb">load</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">node_modules</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">disk</span>
<span class="n">clone</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tree</span>
<span class="n">fetch</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="o">.</span><span class="n">json</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">assorted</span><span class="w"> </span><span class="n">metadata</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">clone</span>
<span class="n">walk</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">missing</span><span class="w"> </span><span class="n">dependencies</span>
<span class="w">  </span><span class="n">dependencies</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">close</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">possible</span>
<span class="w">  </span><span class="n">without</span><span class="w"> </span><span class="n">breaking</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">modules</span>
<span class="n">compare</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cloned</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span>
<span class="n">actions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="nb">convert</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">other</span>
<span class="n">execute</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actions</span><span class="p">,</span><span class="w"> </span><span class="n">deepest</span><span class="w"> </span><span class="n">first</span>
<span class="w">  </span><span class="n">kinds</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">actions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">install</span><span class="p">,</span><span class="w"> </span><span class="n">update</span><span class="p">,</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">move</span>
</pre></div>

</blockquote>
<p><br></p>
<h3>更多建议</h3>
<p><code>npm ci</code>将删除任何现有<code>node_modules</code>文件夹并依赖该<code>package-lock.json</code>文件来安装每个包的特定版本。它比 npm
install 快得多，因为它跳过了一些功能。它的干净状态安装非常适合 ci/cd 管道和 docker
构建！您还可以使用它一次性安装所有东西，而不是特定的包。</p>
<p><br><br><a href="posts/what-is-the-difference-between-npm-install-and-npm-ci/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/yi-ge-angularjs-kong-zhi-qi-ke-yi-diao-yong-ling-yi-ge-ma/" class="u-url">一个 AngularJS 控制器可以调用另一个吗？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/yi-ge-angularjs-kong-zhi-qi-ke-yi-diao-yong-ling-yi-ge-ma/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T01:24:36+08:00" itemprop="datePublished" title="2023-02-18 01:24">2023-02-18 01:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>是否可以让一个控制器使用另一个控制器？</p>
<p>例如：</p>
<p>此 HTML 文档只是将控制器传递的消息打印到文件<code>MessageCtrl</code>中<code>messageCtrl.js</code>。</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;html</span><span class="w"> </span><span class="na">xmlns:ng=</span><span class="s">"http://angularjs.org/"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="w">    </span><span class="nt">&lt;meta</span><span class="w"> </span><span class="na">charset=</span><span class="s">"utf-8"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;title&gt;</span>Inter<span class="w"> </span>Controller<span class="w"> </span>Communication<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng:controller=</span><span class="s">"MessageCtrl"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">message</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Angular Scripts --&gt;</span>
<span class="w">    </span><span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"http://code.angularjs.org/angular-0.9.19.js"</span><span class="w"> </span><span class="err">ng:autobind</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="w">    </span><span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"js/messageCtrl.js"</span><span class="w"> </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>

<p>控制器文件包含以下代码：</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="nf">MessageCtrl</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"The current date is: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">().</span><span class="n">toString</span><span class="p">();</span><span class="w"> </span>
<span class="w">    </span><span class="p">};</span>
<span class="p">}</span>
</pre></div>

<p>它只是打印当前日期；</p>
<p>如果我要添加另一个控制器，<code>DateCtrl</code>它以特定格式将日期返回给<code>MessageCtrl</code>，那么将如何做呢？DI
框架似乎关注<code>XmlHttpRequests</code>并访问服务。</p>
<p><br><br></p>
<h2>解答</h2>
<p>控制器之间有多种通信方式。</p>
<p>最好的可能是共享服务：</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="nf">FirstController</span><span class="p">(</span>someDataService<span class="p">)</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="w"> </span><span class="n">bind</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">template</span><span class="k">...</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="k">methods</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">someDataService</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">server</span>
<span class="p">}</span>

<span class="k">function</span><span class="w"> </span><span class="nf">SecondController</span><span class="p">(</span>someDataService<span class="p">)</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">service</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">knows</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">it</span>
<span class="p">}</span>
</pre></div>

<p>另一种方法是在范围内发出事件：</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="nf">FirstController</span><span class="p">(</span>$scope<span class="p">)</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">  </span>$<span class="n">scope</span><span class="p">.</span>$<span class="n">on</span><span class="p">(</span><span class="s">'someEvent'</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{});</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">directive</span>
<span class="p">}</span>

<span class="k">function</span><span class="w"> </span><span class="nf">SecondController</span><span class="p">(</span>$scope<span class="p">)</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">  </span>$<span class="n">scope</span><span class="p">.</span>$<span class="n">emit</span><span class="p">(</span><span class="s">'someEvent'</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>在这两种情况下，您也可以与任何指令进行通信。</p>
<p><br></p>
<h3>更多建议</h3>
<p>看到这个小提琴： http: //jsfiddle.net/simpulton/XqDxG/</p>
<p>另请观看以下视频：控制器之间的通信</p>
<p>网址：</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-controller=</span><span class="s">"ControllerZero"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">ng-model=</span><span class="s">"message"</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">ng-click=</span><span class="s">"handleClick(message);"</span><span class="nt">&gt;</span>LOG<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-controller=</span><span class="s">"ControllerOne"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">ng-model=</span><span class="s">"message"</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;div</span><span class="w"> </span><span class="na">ng-controller=</span><span class="s">"ControllerTwo"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">ng-model=</span><span class="s">"message"</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>javascript:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myModule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">angular</span><span class="o">.</span><span class="n">module</span><span class="p">(</span><span class="s1">'myModule'</span><span class="p">,</span><span class="w"> </span><span class="p">[]);</span>
<span class="n">myModule</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="s1">'mySharedService'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="o">$</span><span class="n">rootScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">sharedService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>

<span class="w">  </span><span class="n">sharedService</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>

<span class="w">  </span><span class="n">sharedService</span><span class="o">.</span><span class="n">prepForBroadcast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">msg</span><span class="p">;</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">broadcastItem</span><span class="p">();</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="n">sharedService</span><span class="o">.</span><span class="n">broadcastItem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">$</span><span class="n">rootScope</span><span class="o">.$</span><span class="n">broadcast</span><span class="p">(</span><span class="s1">'handleBroadcast'</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">sharedService</span><span class="p">;</span>
<span class="p">});</span>

<span class="n">function</span><span class="w"> </span><span class="n">ControllerZero</span><span class="p">(</span><span class="o">$</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">sharedService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">handleClick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sharedService</span><span class="o">.</span><span class="n">prepForBroadcast</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="o">$</span><span class="n">scope</span><span class="o">.$</span><span class="n">on</span><span class="p">(</span><span class="s1">'handleBroadcast'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sharedService</span><span class="o">.</span><span class="n">message</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span><span class="w">        </span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">ControllerOne</span><span class="p">(</span><span class="o">$</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">sharedService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="o">$</span><span class="n">scope</span><span class="o">.$</span><span class="n">on</span><span class="p">(</span><span class="s1">'handleBroadcast'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ONE: '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sharedService</span><span class="o">.</span><span class="n">message</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span><span class="w">        </span>
<span class="p">}</span>

<span class="n">function</span><span class="w"> </span><span class="n">ControllerTwo</span><span class="p">(</span><span class="o">$</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">sharedService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="o">$</span><span class="n">scope</span><span class="o">.$</span><span class="n">on</span><span class="p">(</span><span class="s1">'handleBroadcast'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">$</span><span class="n">scope</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'TWO: '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sharedService</span><span class="o">.</span><span class="n">message</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>

<span class="n">ControllerZero</span><span class="o">.$</span><span class="n">inject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span><span class="w"> </span><span class="s1">'mySharedService'</span><span class="p">];</span>

<span class="n">ControllerOne</span><span class="o">.$</span><span class="n">inject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span><span class="w"> </span><span class="s1">'mySharedService'</span><span class="p">];</span>

<span class="n">ControllerTwo</span><span class="o">.$</span><span class="n">inject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span><span class="w"> </span><span class="s1">'mySharedService'</span><span class="p">];</span>
</pre></div>

<p><br><br><a href="posts/can-one-angularjs-controller-call-another/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1099.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1097.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
