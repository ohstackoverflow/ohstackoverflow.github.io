<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 350) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-350.html">
<link rel="prev" href="index-351.html" type="text/html">
<link rel="next" href="index-349.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-understand-nil-vs-empty-vs-blank-in-ruby/" class="u-url">How to understand nil vs. empty vs. blank in Ruby</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-understand-nil-vs-empty-vs-blank-in-ruby/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:37:33+08:00" itemprop="datePublished" title="2023-02-17 04:37">2023-02-17 04:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I find myself repeatedly looking for a clear definition of the differences of
<code>nil?</code>, <code>blank?</code>, and <code>empty?</code> in Ruby on Rails. Here's the closest I've come:</p>
<ul>
<li>
<p><code>blank?</code> objects are false, empty, or a whitespace string. For example, <code>""</code>, <code>" "</code>, <code>nil</code>, <code>[]</code>, and <code>{}</code> are blank.</p>
</li>
<li>
<p><code>nil?</code> objects are instances of NilClass.</p>
</li>
<li>
<p><code>empty?</code> objects are class-specific, and the definition varies from class to class. A string is empty if it has no characters, and an array is empty if it contains no items.</p>
</li>
</ul>
<p>Is there anything missing, or a tighter comparison that can be made?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>.nil?</code> can be used on any object and is true if the object is nil.</p>
<p><code>.empty?</code> can be used on strings, arrays and hashes and returns true if:</p>
<ul>
<li>String length == 0</li>
<li>Array length == 0</li>
<li>Hash length == 0</li>
</ul>
<p>Running <code>.empty?</code> on something that is nil will throw a <code>NoMethodError</code>.</p>
<p>That is where <code>.blank?</code> comes in. It is implemented by Rails and will operate
on any object as well as work like <code>.empty?</code> on strings, arrays and hashes.</p>
<div class="code"><pre class="code literal-block">nil.blank? == true
false.blank? == true
[].blank? == true
{}.blank? == true
"".blank? == true
5.blank? == false
0.blank? == false
</pre></div>

<p><code>.blank?</code> also evaluates true on strings which are non-empty but contain only
whitespace:</p>
<div class="code"><pre class="code literal-block">"  ".blank? == true
"  ".empty? == false
</pre></div>

<p>Rails also provides <code>.present?</code>, which returns the negation of <code>.blank?</code>.</p>
<p>Array gotcha: <code>blank?</code> will return <code>false</code> even if all <em>elements</em> of an array
are blank. To determine blankness in this case, use <code>all?</code> with <code>blank?</code>, for
example:</p>
<div class="code"><pre class="code literal-block">[ nil, '' ].blank? == false
[ nil, '' ].all? &amp;:blank? == true
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I made this useful table with all the cases:</p>
<p><img alt="enter image description here" src="images/oXuhJ.png"></p>
<p><code>blank?</code>, <code>present?</code> are provided by Rails.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/git-create-a-branch-from-unstaged-uncommitted-changes-on-master/" class="u-url">Git: Create a branch from unstaged/uncommitted changes on master</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/git-create-a-branch-from-unstaged-uncommitted-changes-on-master/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:36:48+08:00" itemprop="datePublished" title="2023-02-17 04:36">2023-02-17 04:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Context: I'm working on master adding a simple feature. After a few minutes I
realize it was not so simple and it should have been better to work into a new
branch.</p>
<p>This always happens to me and I have no idea how to switch to another branch
and take all these uncommited changes with me leaving the master branch clean.
I supposed <code>git stash &amp;&amp; git stash branch new_branch</code> would simply accomplish
that but this is what I get:</p>
<div class="code"><pre class="code literal-block">~/test $ git status
# On branch master
nothing to commit (working directory clean)

~/test $ echo "hello!" &gt; testing

~/test $ git status
# On branch master
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   testing
#
no changes added to commit (use "git add" and/or "git commit -a")

~/test $ git stash
Saved working directory and index state WIP on master: 4402b8c testing
HEAD is now at 4402b8c testing

~/test $ git status
# On branch master
nothing to commit (working directory clean)

~/test $ git stash branch new_branch
Switched to a new branch 'new_branch'
# On branch new_branch
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   testing
#
no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (db1b9a3391a82d86c9fdd26dab095ba9b820e35b)

~/test $ git s
# On branch new_branch
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   testing
#
no changes added to commit (use "git add" and/or "git commit -a")

~/test $ git checkout master
M   testing
Switched to branch 'master'

~/test $ git status
# On branch master
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   testing
#
no changes added to commit (use "git add" and/or "git commit -a")
</pre></div>

<p>Do you know if there is any way of accomplishing this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>No need to stash.</p>
<h2>Update 2020 / Git 2.23</h2>
<hr>
<p>Git 2.23 adds the new <code>switch</code> subcommand, in an attempt to clear some of the
confusion caused by the overloaded usage of <code>checkout</code> (switching branches,
restoring files, detaching HEAD, etc.)</p>
<p>Starting with this version of Git, replace the <code>git checkout</code> command below
with:</p>
<div class="code"><pre class="code literal-block">git switch -c &lt;new-branch&gt;
</pre></div>

<p>The behavior remains unchanged.</p>
<h2>Before Update 2020 / Git 2.23</h2>
<hr>
<div class="code"><pre class="code literal-block">git checkout -b new_branch_name
</pre></div>

<p>does not touch your local changes. It just creates the branch from the current
HEAD and sets the HEAD there. So I guess that's what you want.</p>
<p><strong>--- Edit to explain the result of checkout master ---</strong></p>
<p>Are you confused because <code>checkout master</code> does not discard your changes?</p>
<p>Since the changes are only local, git does not want you to lose them too
easily. Upon changing branch, git does not overwrite your local changes. The
result of your <code>checkout master</code> is:</p>
<div class="code"><pre class="code literal-block">M   testing
</pre></div>

<p>, which means that your working files are not clean. git did change the HEAD,
but did not overwrite your local files. That is why your last status still
show your local changes, although you are on <code>master</code>.</p>
<p>If you really want to discard the local changes, you have to force the
checkout with <code>-f</code>.</p>
<div class="code"><pre class="code literal-block">git checkout master -f
</pre></div>

<p>Since your changes were never committed, you'd lose them.</p>
<p>Try to get back to your branch, commit your changes, then checkout the master
again.</p>
<div class="code"><pre class="code literal-block">git checkout new_branch
git commit -a -m"edited"
git checkout master
git status
</pre></div>

<p>You should get a <code>M</code> message after the first checkout, but then not anymore
after the <code>checkout master</code>, and <code>git status</code> should show no modified files.</p>
<p><strong>--- Edit to clear up confusion about working directory (local files)---</strong></p>
<p>In answer to your first comment, local changes are just... well, local. Git
does not save them automatically, you must tell it to save them for later. If
you make changes and do not explicitly commit or stash them, git will not
version them. If you change HEAD (<code>checkout master</code>), the local changes are
not overwritten since unsaved.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try:</p>
<div class="code"><pre class="code literal-block">git stash
git checkout -b new-branch
git stash apply
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-best-way-to-conditionally-apply-a-class/" class="u-url">What is the best way to conditionally apply a class?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-best-way-to-conditionally-apply-a-class/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:36:21+08:00" itemprop="datePublished" title="2023-02-17 04:36">2023-02-17 04:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Lets say you have an array that is rendered in a <code>ul</code> with an <code>li</code> for each
element and a property on the controller called <code>selectedIndex</code>. What would be
the best way to add a class to the <code>li</code> with the index <code>selectedIndex</code> in
AngularJS?</p>
<p>I am currently duplicating (by hand) the <code>li</code> code and adding the class to one
of the <code>li</code> tags and using <code>ng-show</code> and <code>ng-hide</code> to show only one <code>li</code> per
index.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you don't want to put CSS class names into Controller like I do, here is an
old trick that I use since pre-v1 days. We can write an expression that
evaluates directly to a class name <em>selected</em> , no custom directives are
necessary:</p>
<div class="code"><pre class="code literal-block"><span class="n">ng</span><span class="o">:</span><span class="kd">class</span><span class="o">=</span><span class="s2">"{true:'selected', false:''}[$index==selectedIndex]"</span>
</pre></div>

<p><em>Please note the old syntax with colon.</em></p>
<p>There is also a new better way of applying classes conditionally, like:</p>
<div class="code"><pre class="code literal-block">ng-class="{selected: $index==selectedIndex}"
</pre></div>

<p>Angular now supports expressions that return an object. Each property (name)
of this object is now considered as a class name and is applied depending on
its value.</p>
<p>However these ways are not functionally equal. Here is an example:</p>
<div class="code"><pre class="code literal-block">ng-class="{admin:'enabled', moderator:'disabled', '':'hidden'}[user.role]"
</pre></div>

<p>We could therefore reuse existing CSS classes by basically mapping a model
property to a class name and at the same time keep CSS classes out of
Controller code.</p>
<p><br></p>
<h3>Suggest</h3>
<p>ng-class supports an expression that must evaluate to either</p>
<ol>
<li>A string of space-delimited class names, or </li>
<li>An array of class names, or</li>
<li>A map/object of class names to boolean values. </li>
</ol>
<p>So, using form 3) we can simply write</p>
<div class="code"><pre class="code literal-block">ng-class="{'selected': $index==selectedIndex}"
</pre></div>

<p>See also How do I conditionally apply CSS styles in AngularJS? for a broader
answer.</p>
<hr>
<p><strong>Update</strong> : Angular 1.1.5 has added support for a ternary operator, so if
that construct is more familiar to you:</p>
<div class="code"><pre class="code literal-block">ng-class="($index==selectedIndex) ? 'selected' : ''"
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-351.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-349.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
