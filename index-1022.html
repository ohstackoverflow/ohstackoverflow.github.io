<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1022) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1022.html">
<link rel="prev" href="index-1023.html" type="text/html">
<link rel="next" href="index-1021.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-read-a-file-without-newlines/" class="u-url">How to read a file without newlines?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-read-a-file-without-newlines/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:47:10+08:00" itemprop="datePublished" title="2023-02-17 22:47">2023-02-17 22:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Python, calling e.g. <code>temp = open(filename,'r').readlines()</code> results in a
list in which each element is a line from the file. However, these strings
have a newline character at the end, which I don't want.</p>
<p>How can I get the data without the newlines?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can read the whole file and split lines using <code>str.splitlines</code>:</p>
<div class="code"><pre class="code literal-block">temp = file.read().splitlines()
</pre></div>

<p>Or you can strip the newline by hand:</p>
<div class="code"><pre class="code literal-block"><span class="s s-Atom">temp</span> <span class="o">=</span> <span class="p">[</span><span class="s s-Atom">line</span><span class="p">[</span><span class="o">:-</span><span class="mi">1</span><span class="p">]</span> <span class="s s-Atom">for</span> <span class="s s-Atom">line</span> <span class="s s-Atom">in</span> <span class="s s-Atom">file</span><span class="p">]</span>
</pre></div>

<p><strong>Note:</strong> this last solution only works if the file ends with a newline,
otherwise the last line will lose a character.</p>
<p>This assumption is true in most cases (especially for files created by text
editors, which often <em>do</em> add an ending newline anyway).</p>
<p>If you want to avoid this you can add a newline at the end of file:</p>
<div class="code"><pre class="code literal-block"><span class="s s-Atom">with</span> <span class="nf">open</span><span class="p">(</span><span class="s s-Atom">the_file</span><span class="p">,</span> <span class="s s-Atom">'r+'</span><span class="p">)</span> <span class="s s-Atom">as</span> <span class="s s-Atom">f</span><span class="p">:</span>
    <span class="s s-Atom">f</span><span class="p">.</span><span class="nf">seek</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="s s-Atom">#</span> <span class="s s-Atom">go</span> <span class="s s-Atom">at</span> <span class="s s-Atom">the</span> <span class="s s-Atom">end</span> <span class="s s-Atom">of</span> <span class="s s-Atom">the</span> <span class="s s-Atom">file</span>
    <span class="s s-Atom">if</span> <span class="s s-Atom">f</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">!</span><span class="o">=</span> <span class="s s-Atom">'\n'</span><span class="o">:</span>
        <span class="s s-Atom">#</span> <span class="s s-Atom">add</span> <span class="s s-Atom">missing</span> <span class="s s-Atom">newline</span> <span class="s s-Atom">if</span> <span class="o">not</span> <span class="s s-Atom">already</span> <span class="s s-Atom">present</span>
        <span class="s s-Atom">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s s-Atom">'\n'</span><span class="p">)</span>
        <span class="s s-Atom">f</span><span class="p">.</span><span class="nf">flush</span><span class="p">()</span>
        <span class="s s-Atom">f</span><span class="p">.</span><span class="nf">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="s s-Atom">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s s-Atom">line</span><span class="p">[</span><span class="o">:-</span><span class="mi">1</span><span class="p">]</span> <span class="s s-Atom">for</span> <span class="s s-Atom">line</span> <span class="s s-Atom">in</span> <span class="s s-Atom">f</span><span class="p">]</span>
</pre></div>

<p>Or a simpler alternative is to <code>strip</code> the newline instead:</p>
<div class="code"><pre class="code literal-block">[<span class="nv">line</span>.<span class="nv">rstrip</span><span class="ss">(</span><span class="s1">'\n'</span><span class="ss">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">file</span>]
</pre></div>

<p>Or even, although pretty unreadable:</p>
<div class="code"><pre class="code literal-block"><span class="p">[</span><span class="s s-Atom">line</span><span class="p">[</span><span class="o">:-</span><span class="p">(</span><span class="s s-Atom">line</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s s-Atom">'\n'</span><span class="p">)</span> <span class="s s-Atom">or</span> <span class="nf">len</span><span class="p">(</span><span class="s s-Atom">line</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="s s-Atom">for</span> <span class="s s-Atom">line</span> <span class="s s-Atom">in</span> <span class="s s-Atom">file</span><span class="p">]</span>
</pre></div>

<p>Which exploits the fact that the return value of <code>or</code> isn't a boolean, but the
object that was evaluated true or false.</p>
<hr>
<p>The <code>readlines</code> method is actually equivalent to:</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">readlines</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[]
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">iter</span><span class="ss">(</span><span class="nv">self</span>.<span class="nv">readline</span>,<span class="w"> </span><span class="s1">''</span><span class="ss">)</span>:
<span class="w">        </span><span class="nv">lines</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">line</span><span class="ss">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">lines</span>

#<span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">equivalently</span>

<span class="nv">def</span><span class="w"> </span><span class="nv">readlines</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[]
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nv">True</span>:
<span class="w">        </span><span class="nv">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">self</span>.<span class="nv">readline</span><span class="ss">()</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">line</span>:
<span class="w">            </span><span class="k">break</span>
<span class="w">        </span><span class="nv">lines</span>.<span class="nv">append</span><span class="ss">(</span><span class="nv">line</span><span class="ss">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">lines</span>
</pre></div>

<p>Since <code>readline()</code> keeps the newline also <code>readlines()</code> keeps it.</p>
<p><strong>Note:</strong> for symmetry to <code>readlines()</code> the <code>writelines()</code> method does <em>not</em>
add ending newlines, so <code>f2.writelines(f.readlines())</code> produces an exact copy
of <code>f</code> in <code>f2</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">temp = open(filename,'r').read().split('\n')
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/sending-multipart-formdata-with-jquery-ajax/" class="u-url">Sending multipart/formdata with jQuery.ajax</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/sending-multipart-formdata-with-jquery-ajax/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:46:35+08:00" itemprop="datePublished" title="2023-02-17 22:46">2023-02-17 22:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've got a problem sending a file to a serverside PHP-script using jQuery's
ajax-function. It's possible to get the File-List with
<code>$('#fileinput').attr('files')</code> but how is it possible to send this Data to
the server? The resulting array (<code>$_POST</code>) on the serverside php-script is 0
(<code>NULL</code>) when using the file-input.</p>
<p>I know it is possible (though I didn't find any jQuery solutions until now,
only Prototye code
(http://webreflection.blogspot.com/2009/03/safari-4-multiple-upload-with-
progress.html)).</p>
<p>This seems to be relatively new, so please do not mention file upload would be
impossible via XHR/Ajax, because it's definitely working.</p>
<p>I need the functionality in Safari 5, FF and Chrome would be nice but are not
essential.</p>
<p>My code for now is:</p>
<div class="code"><pre class="code literal-block"><span class="o">$.</span><span class="n">ajax</span><span class="p">({</span>
<span class="w">    </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'php/upload.php'</span><span class="p">,</span>
<span class="w">    </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'#file'</span><span class="p">)</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s1">'files'</span><span class="p">),</span>
<span class="w">    </span><span class="n">cache</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">contentType</span><span class="p">:</span><span class="w"> </span><span class="s1">'multipart/form-data'</span><span class="p">,</span>
<span class="w">    </span><span class="n">processData</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">    </span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">){</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Starting with Safari 5/Firefox 4, it’s easiest to use the <code>FormData</code> class:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">FormData</span><span class="p">();</span>
<span class="n">jQuery</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="n">jQuery</span><span class="p">(</span><span class="s1">'#file'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">files</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'file-'</span><span class="o">+</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>So now you have a <code>FormData</code> object, ready to be sent along with the
XMLHttpRequest.</p>
<div class="code"><pre class="code literal-block"><span class="n">jQuery</span><span class="o">.</span><span class="n">ajax</span><span class="p">({</span>
<span class="w">    </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'php/upload.php'</span><span class="p">,</span>
<span class="w">    </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
<span class="w">    </span><span class="n">cache</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">contentType</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">processData</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">method</span><span class="p">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">    </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1.9</span>
<span class="w">    </span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">){</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>It’s imperative that you set the <code>contentType</code> option to <code>false</code>, forcing
jQuery not to add a <code>Content-Type</code> header for you, otherwise, the boundary
string will be missing from it. Also, you must leave the <code>processData</code> flag
set to false, otherwise, jQuery will try to convert your <code>FormData</code> into a
string, which will fail.</p>
<p>You may now retrieve the file in PHP using:</p>
<div class="code"><pre class="code literal-block">$_FILES['file-0']
</pre></div>

<p>(There is only one file, <code>file-0</code>, unless you specified the <code>multiple</code>
attribute on your file input, in which case, the numbers will increment with
each file.)</p>
<p><strong>Using the FormData emulation for older browsers</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'php/upload.php'</span><span class="p">,</span>
<span class="w">    </span><span class="n">data</span><span class="p">:</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
<span class="w">    </span><span class="n">cache</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">contentType</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">processData</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">    </span><span class="n">method</span><span class="p">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">    </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">jQuery</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1.9</span>
<span class="w">    </span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">){</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">if</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">fake</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="n">encoding</span><span class="w"> </span><span class="n">stuff</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">xhr</span>
<span class="w">    </span><span class="n">opts</span><span class="o">.</span><span class="n">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jQuery</span><span class="o">.</span><span class="n">ajaxSettings</span><span class="o">.</span><span class="n">xhr</span><span class="p">();</span><span class="w"> </span><span class="n">xhr</span><span class="o">.</span><span class="n">send</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xhr</span><span class="o">.</span><span class="n">sendAsBinary</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">xhr</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">opts</span><span class="o">.</span><span class="n">contentType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"multipart/form-data; boundary="</span><span class="o">+</span><span class="n">data</span><span class="o">.</span><span class="n">boundary</span><span class="p">;</span>
<span class="w">    </span><span class="n">opts</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>
<span class="p">}</span>
<span class="n">jQuery</span><span class="o">.</span><span class="n">ajax</span><span class="p">(</span><span class="n">opts</span><span class="p">);</span>
</pre></div>

<p><strong>Create FormData from an existing form</strong></p>
<p>Instead of manually iterating the files, the FormData object can also be
created with the contents of an existing form object:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">FormData</span><span class="p">(</span><span class="n">jQuery</span><span class="p">(</span><span class="s1">'form'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]);</span>
</pre></div>

<p><strong>Use a PHP native array instead of a counter</strong></p>
<p>Just name your file elements the same and end the name in brackets:</p>
<div class="code"><pre class="code literal-block">jQuery.each(jQuery('#file')[0].files, function(i, file) {
    data.append('file[]', file);
});
</pre></div>

<p><code>$_FILES['file']</code> will then be an array containing the file upload fields for
every file uploaded. I actually recommend this over my initial solution as
it’s simpler to iterate over.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Look at my code, it does the job for me</p>
<div class="code"><pre class="code literal-block"><span class="o">$(</span><span class="w"> </span><span class="s1">'#formId'</span><span class="w"> </span><span class="o">)</span>
<span class="w">  </span><span class="p">.</span><span class="nc">submit</span><span class="o">(</span><span class="w"> </span><span class="nt">function</span><span class="o">(</span><span class="w"> </span><span class="nt">e</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">$.ajax(</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'FormSubmitUrl'</span><span class="p">,</span>
<span class="w">      </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">      </span><span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nf">FormData</span><span class="p">(</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="p">),</span>
<span class="w">      </span><span class="n">processData</span><span class="o">:</span><span class="w"> </span><span class="n">false</span><span class="p">,</span>
<span class="w">      </span><span class="n">contentType</span><span class="o">:</span><span class="w"> </span><span class="n">false</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="o">);</span>
<span class="w">    </span><span class="nt">e</span><span class="p">.</span><span class="nc">preventDefault</span><span class="o">();</span>
<span class="w">  </span><span class="err">}</span><span class="w"> </span><span class="o">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-current-directory-in-a-batch-file/" class="u-url">What is the current directory in a batch file?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-current-directory-in-a-batch-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:46:06+08:00" itemprop="datePublished" title="2023-02-17 22:46">2023-02-17 22:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to create a few batch files to automate a program.</p>
<p>My question is when I create the batch file, what is the current directory? Is
it the directory where the file is located or is it the same directory that
appears in the command prompt, or something else?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From within your batch file:</p>
<ul>
<li>
<code>%cd%</code> refers to the current working directory (variable)</li>
<li>
<code>%~dp0</code> refers to the full path to the batch file's directory (static)</li>
<li>
<code>%~dpnx0</code> and <code>%~f0</code> both refer to the full path to the batch directory and file name (static).</li>
</ul>
<p>See also: What does %~dp0 mean, and how does it work?</p>
<p><br></p>
<h3>Suggest</h3>
<p>It <em>usually</em> is the directory from which the batch file is started, but if you
start the batch file from a shortcut, a different starting directory could be
given. Also, when you'r in cmd, and your current directory is <code>c:\dir3</code>, you
can still start the batch file using <code>c:\dir1\dir2\batch.bat</code> in which case,
the current directory will be <code>c:\dir3</code>.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1023.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1021.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
