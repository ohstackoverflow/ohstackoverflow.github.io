<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1282) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1282.html">
<link rel="prev" href="index-1283.html" type="text/html">
<link rel="next" href="index-1281.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-return-a-string-value-from-a-bash-function/" class="u-url">How to return a string value from a Bash function</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-return-a-string-value-from-a-bash-function/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:38:05+08:00" itemprop="datePublished" title="2023-02-18 05:38">2023-02-18 05:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'd like to return a string from a Bash function.</p>
<p>I'll write the example in java to show what I'd like to do:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">getSomeString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s2">"tadaa"</span><span class="p">;</span>
<span class="p">}</span>

<span class="nb nb-Type">String</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getSomeString</span><span class="p">();</span>
</pre></div>

<p>The example below works in bash, but is there a better way to do this?</p>
<div class="code"><pre class="code literal-block">function getSomeString {
   echo "tadaa"
}

VARIABLE=$(getSomeString)
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>There is no better way I know of. Bash knows only status codes (integers) and
strings written to the stdout.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You could have the function take a variable as the first arg and modify the
variable with the string you want to return.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><span class="nb">set</span><span class="w"> </span>-x
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>pass_back_a_string<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">eval</span><span class="w"> </span><span class="s2">"</span><span class="nv">$1</span><span class="s2">='foo bar rab oof'"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-6"><code data-line-number="6"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-7"><code data-line-number="7"></code></a></td>
<td class="code"><code><span class="nv">return_var</span><span class="o">=</span><span class="s1">''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-8"><code data-line-number="8"></code></a></td>
<td class="code"><code>pass_back_a_string<span class="w"> </span>return_var
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-9"><code data-line-number="9"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$return_var</span>
</code></td>
</tr>
</table></div>
<p>Prints "foo bar rab oof".</p>
<p><strong>Edit</strong> : added quoting in the appropriate place to allow whitespace in
string to address @Luca Borrione's comment.</p>
<p><strong>Edit</strong> : As a demonstration, see the following program. This is a general-
purpose solution: it even allows you to receive a string into a local
variable.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><span class="nb">set</span><span class="w"> </span>-x
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>pass_back_a_string<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">eval</span><span class="w"> </span><span class="s2">"</span><span class="nv">$1</span><span class="s2">='foo bar rab oof'"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="nv">return_var</span><span class="o">=</span><span class="s1">''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code>pass_back_a_string<span class="w"> </span>return_var
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$return_var</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>call_a_string_func<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="w">     </span><span class="nb">local</span><span class="w"> </span><span class="nv">lvar</span><span class="o">=</span><span class="s1">''</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><span class="w">     </span>pass_back_a_string<span class="w"> </span>lvar
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="w">     </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"lvar='</span><span class="nv">$lvar</span><span class="s2">' locally"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code>call_a_string_func
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="s2">"lvar='</span><span class="nv">$lvar</span><span class="s2">' globally"</span>
</code></td>
</tr>
</table></div>
<p>This prints:</p>
<div class="code"><pre class="code literal-block"><span class="o">+</span><span class="w"> </span><span class="n">return_var</span><span class="o">=</span>
<span class="o">+</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="w"> </span><span class="n">return_var</span>
<span class="o">+</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="s1">'return_var='</span>\<span class="s1">''</span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span><span class="s1">'</span><span class="se">\'</span><span class="s1">''</span>
<span class="o">++</span><span class="w"> </span><span class="n">return_var</span><span class="o">=</span><span class="s1">'foo bar rab oof'</span>
<span class="o">+</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span>
<span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span>
<span class="o">+</span><span class="w"> </span><span class="n">call_a_string_func</span>
<span class="o">+</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">lvar</span><span class="o">=</span>
<span class="o">+</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="w"> </span><span class="n">lvar</span>
<span class="o">+</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="s1">'lvar='</span>\<span class="s1">''</span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span><span class="s1">'</span><span class="se">\'</span><span class="s1">''</span>
<span class="o">++</span><span class="w"> </span><span class="n">lvar</span><span class="o">=</span><span class="s1">'foo bar rab oof'</span>
<span class="o">+</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s1">'lvar='</span>\<span class="s1">''</span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span><span class="s1">'</span><span class="se">\'</span><span class="s1">'</span><span class="w"> </span><span class="n">locally</span><span class="s1">'</span>
<span class="n">lvar</span><span class="o">=</span><span class="s1">'foo bar rab oof'</span><span class="w"> </span><span class="n">locally</span>
<span class="o">+</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s1">'lvar='</span>\<span class="s1">'''</span><span class="se">\'</span><span class="s1">' globally'</span>
<span class="s1">lvar='' globally</span>
</pre></div>

<p><strong>Edit</strong> : demonstrating that the original variable's value <em>is</em> available in
the function, as was incorrectly criticized by @Xichen Li in a comment.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code><span class="nb">set</span><span class="w"> </span>-x
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>pass_back_a_string<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">eval</span><span class="w"> </span><span class="s2">"echo in pass_back_a_string, original </span><span class="nv">$1</span><span class="s2"> is \$</span><span class="nv">$1</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="nb">eval</span><span class="w"> </span><span class="s2">"</span><span class="nv">$1</span><span class="s2">='foo bar rab oof'"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><span class="nv">return_var</span><span class="o">=</span><span class="s1">'original return_var'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code>pass_back_a_string<span class="w"> </span>return_var
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$return_var</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>call_a_string_func<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><span class="w">     </span><span class="nb">local</span><span class="w"> </span><span class="nv">lvar</span><span class="o">=</span><span class="s1">'original lvar'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="w">     </span>pass_back_a_string<span class="w"> </span>lvar
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="w">     </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"lvar='</span><span class="nv">$lvar</span><span class="s2">' locally"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code>call_a_string_func
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-to-return-a-string-value-from-a-bash-function/#-19"><code data-line-number="19"></code></a></td>
<td class="code"><code><span class="nb">echo</span><span class="w"> </span><span class="s2">"lvar='</span><span class="nv">$lvar</span><span class="s2">' globally"</span>
</code></td>
</tr>
</table></div>
<p>This gives output:</p>
<div class="code"><pre class="code literal-block"><span class="o">+</span><span class="w"> </span><span class="n">return_var</span><span class="o">=</span><span class="s1">'original return_var'</span>
<span class="o">+</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="w"> </span><span class="n">return_var</span>
<span class="o">+</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="s1">'echo in pass_back_a_string, original return_var is $return_var'</span>
<span class="o">++</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="p">,</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">return_var</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">return_var</span>
<span class="ow">in</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="p">,</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">return_var</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">return_var</span>
<span class="o">+</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="s1">'return_var='</span>\<span class="s1">''</span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span><span class="s1">'</span><span class="se">\'</span><span class="s1">''</span>
<span class="o">++</span><span class="w"> </span><span class="n">return_var</span><span class="o">=</span><span class="s1">'foo bar rab oof'</span>
<span class="o">+</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span>
<span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span>
<span class="o">+</span><span class="w"> </span><span class="n">call_a_string_func</span>
<span class="o">+</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="s1">'lvar=original lvar'</span>
<span class="o">+</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="w"> </span><span class="n">lvar</span>
<span class="o">+</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="s1">'echo in pass_back_a_string, original lvar is $lvar'</span>
<span class="o">++</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="p">,</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">lvar</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">lvar</span>
<span class="ow">in</span><span class="w"> </span><span class="n">pass_back_a_string</span><span class="p">,</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">lvar</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="n">lvar</span>
<span class="o">+</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="s1">'lvar='</span>\<span class="s1">''</span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span><span class="s1">'</span><span class="se">\'</span><span class="s1">''</span>
<span class="o">++</span><span class="w"> </span><span class="n">lvar</span><span class="o">=</span><span class="s1">'foo bar rab oof'</span>
<span class="o">+</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s1">'lvar='</span>\<span class="s1">''</span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="n">rab</span><span class="w"> </span><span class="n">oof</span><span class="s1">'</span><span class="se">\'</span><span class="s1">'</span><span class="w"> </span><span class="n">locally</span><span class="s1">'</span>
<span class="n">lvar</span><span class="o">=</span><span class="s1">'foo bar rab oof'</span><span class="w"> </span><span class="n">locally</span>
<span class="o">+</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s1">'lvar='</span>\<span class="s1">'''</span><span class="se">\'</span><span class="s1">' globally'</span>
<span class="s1">lvar='' globally</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-fix-the-visual-studio-compile-error-mismatch-between-processor-architecture/" class="u-url">How do I fix the Visual Studio compile error, "mismatch between processor architecture"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-fix-the-visual-studio-compile-error-mismatch-between-processor-architecture/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:37:38+08:00" itemprop="datePublished" title="2023-02-18 05:37">2023-02-18 05:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm new to project configuration in Visual Studio 2010, but I've done some
research and still can't quite figure this issue out. I have a Visual Studio
solution with a C++ DLL referencing the C# DLL. The C# DLL references a few
other DLLs, some within my project and some external. When I try to compile
the C++ DLL, I get this warning:</p>
<blockquote>
<p>warning MSB3270: There was a mismatch between the processor architecture of
the project being build "MSIL" and the processor architecture of the
reference "[internal C# dll]", "x86".</p>
</blockquote>
<p>It tells me to go to Configuration Manager to align my architectures. The C#
DLL is set up with platform target x86. If I try to change this to something
else, like Any CPU, it complains because one of the external DLLs <em>it</em> depends
on has platform target x86.</p>
<p>When I look at Configuration Manager it shows the Platform for my C# DLL as
x86 and for my C++ project as Win32. This seems like the right setup; surely I
don't want the project for my C++ project to have platform set to x64, which
is the only other option presented.</p>
<p>What am I doing wrong here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This warning seems to have been introduced with the new Visual Studio 11 Beta
and .NET 4.5, although I suppose it might have been possible before.</p>
<p>First, it really is just a warning. It should not hurt anything if you are
just dealing with x86 dependencies. Microsoft is just trying to warn you when
you state that your project is compatible with "Any CPU" but you have a
dependency on a project or .dll assembly that is either x86 or x64. Because
you have an x86 dependency, technically your project is therefore not "Any
CPU" compatible. To make the warning go away, you should actually change your
project from "Any CPU" to "x86". This is very easy to do, here are the steps.</p>
<ol>
<li>Go to the Build|Configuration Manager menu item.</li>
<li>Find your project in the list, under Platform it will say "Any CPU"</li>
<li>Select the "Any CPU" option from the drop down and then select <code>&lt;New..&gt;</code>
</li>
<li>From that dialog, select x86 from the "New Platform" drop down and make sure "Any CPU" is selected in the "Copy settings from" drop down.</li>
<li>Hit OK</li>
<li>You will want to select x86 for both the Debug and Release configurations.</li>
</ol>
<p>This will make the warning go away and also state that your assembly or
project is now no longer "Any CPU" compatible but now x86 specific. This is
also applicable if you are building a 64 bit project that has an x64
dependency; you would just select x64 instead.</p>
<p>One other note, projects can be "Any CPU" compatible usually if they are pure
.NET projects. This issue only comes up if you introduce a dependency (3rd
party dll or your own C++ managed project) that targets a specific processor
architecture.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is a very stubborn warning and while it is a valid warning there are some
cases where it cannot be resolved due to use of 3rd party components and other
reasons. I have a similar issue except that the warning is because my projects
platform is AnyCPU and I'm referencing an MS library built for AMD64. This is
in Visual Studio 2010 by the way, and appears to be introduced by installing
the VS2012 and .Net 4.5.</p>
<p>Since I can't change the MS library I'm referencing, and since I know that my
target deployment environment will only ever be 64-bit, I can safely ignore
this issue.</p>
<p>What about the warning? Microsoft posted in response to a Connect report that
one option is to disable that warning. You should only do this is you're very
aware of your solution architecture and you fully understand your deployment
target and know that it's not really an issue outside the development
environment.</p>
<p>You can edit your project file and add this property group and setting to
disable the warning:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;PropertyGroup&gt;</span>
<span class="w">  </span><span class="nt">&lt;ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch&gt;</span>None<span class="nt">&lt;/ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch&gt;</span>
<span class="nt">&lt;/PropertyGroup&gt;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/set-environment-variables-on-mac-os-x-lion/" class="u-url">Set environment variables on Mac OS X Lion</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/set-environment-variables-on-mac-os-x-lion/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:37:11+08:00" itemprop="datePublished" title="2023-02-18 05:37">2023-02-18 05:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When someone says "edit your .plist file" or "your .profile" or
".bash_profile" etc, this just confuses me. I have no idea where these files
are, how to create them if I have to do that, etc, and also why there seem to
be so many different ones (why? Do they do different things?)</p>
<p>So could someone please explain very patiently to a previous Windows user
(wanting desperately to become more familiar with the pleasant if initially
somewhat confusing OS X world) how to do this step by step?</p>
<p>I need the variables to be set both for GUI applications and command line
applications, and at the moment it's for an ant script that needs the
variables, but there will most likely be other needs as well.</p>
<p>Please note that I have Lion too, since many of the answers you get Googling
seem to be outdated for Lion...</p>
<p>Also note that I have practically zero experience using the Terminal. I'm
willing to learn, but please explain for a novice...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>First, one thing to recognize about OS X is that it is built on Unix. This is
where the .bash_profile comes in. When you start the Terminal app in OS X you
get a bash shell by default. The bash shell comes from Unix and when it loads
it runs the .bash_profile script. You can modify this script for your user to
change your settings. This file is located at:</p>
<div class="code"><pre class="code literal-block">~/.bash_profile
</pre></div>

<hr>
<p><strong>Update for Mavericks</strong></p>
<p>OS X Mavericks does not use the environment.plist - at least not for OS X
windows applications. You can use the launchd configuration for windowed
applications. The .bash_profile is still supported since that is part of the
bash shell used in Terminal.</p>
<p><strong>Lion and Mountain Lion Only</strong></p>
<p>OS X windowed applications receive environment variables from the your
environment.plist file. This is likely what you mean by the ".plist" file.
This file is located at:</p>
<div class="code"><pre class="code literal-block">~/.MacOSX/environment.plist
</pre></div>

<hr>
<p>If you make a change to your environment.plist file then OS X windows
applications, including the Terminal app, will have those environment
variables set. Any environment variable you set in your .bash_profile will
only affect your bash shells.</p>
<p>Generally I only set variables in my .bash_profile file and don't change the
.plist file (or launchd file on Mavericks). Most OS X windowed applications
don't need any custom environment. Only when an application actually needs a
specific environment variable do I change the environment.plist (or launchd
file on Mavericks).</p>
<p>It sounds like what you want is to change the environment.plist file, rather
than the .bash_profile.</p>
<p>One last thing, if you look for those files, I think you will not find them.
If I recall correctly, they were not on my initial install of Lion.</p>
<p><strong>Edit:</strong> Here are some instructions for creating a plist file.</p>
<ol>
<li>Open Xcode</li>
<li>Select File -&gt; New -&gt; New File...</li>
<li>Under Mac OS X select Resources</li>
<li>Choose a plist file</li>
<li>Follow the rest of the prompts</li>
</ol>
<p>To edit the file, you can Control-click to get a menu and select Add Row. You
then can add a key value pair. For environment variables, the key is the
environment variable name and the value is the actual value for that
environment variable.</p>
<p>Once the plist file is created you can open it with Xcode to modify it anytime
you wish.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Your <code>.profile</code> or <code>.bash_profile</code> are simply files that are present in your
"home" folder. If you open a Finder window and click your account name in the
Favorites pane, you won't see them. If you open a Terminal window and type
<code>ls</code> to list files you still won't see them. However, you can find them by
using <code>ls -a</code> in the terminal. Or if you open your favorite text editor (say
TextEdit since it comes with OS X) and do File-&gt;Open and then press
<code>Command</code>+<code>Shift</code>+<code>.</code> and click on your account name (home folder) you will
see them as well. If you do not see them, then you can create one in your
favorite text editor.</p>
<p>Now, adding environment variables is relatively straightforward and remarkably
similar to windows conceptually. In your <code>.profile</code> just add, one per line,
the variable name and its value as follows:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">JAVA_HOME</span><span class="o">=/</span><span class="n">Library</span><span class="o">/</span><span class="n">Java</span><span class="o">/</span><span class="n">Home</span>
<span class="k">export</span><span class="w"> </span><span class="n">JRE_HOME</span><span class="o">=/</span><span class="n">Library</span><span class="o">/</span><span class="n">Java</span><span class="o">/</span><span class="n">Home</span>
</pre></div>

<p>etc.</p>
<p>If you are modifying your "PATH" variable, be sure to include the system's
default PATH that was already set for you:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">PATH</span><span class="o">=$</span><span class="n">PATH</span><span class="p">:</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">stuff</span>
</pre></div>

<p>Now here is the quirky part, you can either open a new Terminal window to have
the new variables take effect, or you will need to type <code>.profile</code> or
<code>.bash_profile</code> to reload the file and have the contents be applied to your
current Terminal's environment.</p>
<p>You can check that your changes took effect using the "set" command in your
Terminal. Just type <code>set</code> (or <code>set | more</code> if you prefer a paginated list) and
be sure what you added to the file is there.</p>
<p>As for adding environment variables to GUI apps, that is normally not
necessary and I'd like to hear more about what you are specifically trying to
do to better give you an answer for it.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1283.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1281.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
