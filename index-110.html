<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 110) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-110.html">
<link rel="prev" href="index-111.html" type="text/html">
<link rel="next" href="index-109.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/document-ready-equivalent-without-jquery/" class="u-url">$(document).ready equivalent without jQuery</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/document-ready-equivalent-without-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:37:03+08:00" itemprop="datePublished" title="2023-02-16 21:37">2023-02-16 21:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a script that uses <code>$(document).ready</code>, but it doesn't use anything
else from jQuery. I'd like to lighten it up by removing the jQuery dependency.</p>
<p>How can I implement my own <code>$(document).ready</code> functionality without using
jQuery? I know that using <code>window.onload</code> will not be the same, as
<code>window.onload</code> fires after all images, frames, etc. have been loaded.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There is a standards based replacement,<code>DOMContentLoaded</code> that is supported by
over 99% of browsers, though not IE8:</p>
<div class="code"><pre class="code literal-block"><span class="nv">document</span>.<span class="nv">addEventListener</span><span class="ss">(</span><span class="s2">"DOMContentLoaded"</span>,<span class="w"> </span><span class="nv">function</span><span class="ss">(</span><span class="nv">event</span><span class="ss">)</span><span class="w"> </span>{<span class="w"> </span>
<span class="w">  </span><span class="o">//</span><span class="k">do</span><span class="w"> </span><span class="nv">work</span>
}<span class="ss">)</span><span class="c1">;</span>
</pre></div>

<p>jQuery's native function is much more complicated than just window.onload, as
depicted below.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">bindReady</span><span class="p">(){</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">readyBound</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="n">readyBound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Mozilla</span><span class="p">,</span><span class="w"> </span><span class="n">Opera</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">webkit</span><span class="w"> </span><span class="n">nightlies</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">event</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">handy</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">callback</span>
<span class="w">        </span><span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="w"> </span><span class="s2">"DOMContentLoaded"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span>
<span class="w">            </span><span class="n">document</span><span class="o">.</span><span class="n">removeEventListener</span><span class="p">(</span><span class="w"> </span><span class="s2">"DOMContentLoaded"</span><span class="p">,</span><span class="w"> </span><span class="n">arguments</span><span class="o">.</span><span class="n">callee</span><span class="p">,</span><span class="w"> </span><span class="bp">false</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="n">jQuery</span><span class="o">.</span><span class="n">ready</span><span class="p">();</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="bp">false</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">IE</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">used</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">attachEvent</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">ensure</span><span class="w"> </span><span class="n">firing</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">onload</span><span class="p">,</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">maybe</span><span class="w"> </span><span class="n">late</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">safe</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">iframes</span>
<span class="w">        </span><span class="n">document</span><span class="o">.</span><span class="n">attachEvent</span><span class="p">(</span><span class="s2">"onreadystatechange"</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"complete"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">document</span><span class="o">.</span><span class="n">detachEvent</span><span class="p">(</span><span class="w"> </span><span class="s2">"onreadystatechange"</span><span class="p">,</span><span class="w"> </span><span class="n">arguments</span><span class="o">.</span><span class="n">callee</span><span class="w"> </span><span class="p">);</span>
<span class="w">                </span><span class="n">jQuery</span><span class="o">.</span><span class="n">ready</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">IE</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">iframe</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">continually</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">ready</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">doScroll</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">window</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">top</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="p">(){</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">jQuery</span><span class="o">.</span><span class="n">isReady</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">            </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">IE</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">trick</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">Diego</span><span class="w"> </span><span class="n">Perini</span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">javascript</span><span class="o">.</span><span class="n">nwbox</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">IEContentLoaded</span><span class="o">/</span>
<span class="w">                </span><span class="n">document</span><span class="o">.</span><span class="n">documentElement</span><span class="o">.</span><span class="n">doScroll</span><span class="p">(</span><span class="s2">"left"</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">setTimeout</span><span class="p">(</span><span class="w"> </span><span class="n">arguments</span><span class="o">.</span><span class="n">callee</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="n">functions</span>
<span class="w">            </span><span class="n">jQuery</span><span class="o">.</span><span class="n">ready</span><span class="p">();</span>
<span class="w">        </span><span class="p">})();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fallback</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">onload</span><span class="p">,</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">always</span><span class="w"> </span><span class="n">work</span>
<span class="w">    </span><span class="n">jQuery</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="w"> </span><span class="n">window</span><span class="p">,</span><span class="w"> </span><span class="s2">"load"</span><span class="p">,</span><span class="w"> </span><span class="n">jQuery</span><span class="o">.</span><span class="n">ready</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Edit:</p>
<h3>2023 update, use this:</h3>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">ready</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">'loading'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">fn</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span><span class="w"> </span><span class="n">fn</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>From: https://youmightnotneedjquery.com/</p>
<h3>Here is a viable replacement for jQuery ready</h3>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">ready</span><span class="p">(</span><span class="n">callback</span><span class="p">){</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">rendered</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="o">!=</span><span class="s1">'loading'</span><span class="p">)</span><span class="w"> </span><span class="n">callback</span><span class="p">();</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">modern</span><span class="w"> </span><span class="n">browsers</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">)</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">);</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">IE</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">8</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">attachEvent</span><span class="p">(</span><span class="s1">'onreadystatechange'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">readyState</span><span class="o">==</span><span class="s1">'complete'</span><span class="p">)</span><span class="w"> </span><span class="n">callback</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>

<span class="n">ready</span><span class="p">(</span><span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">something</span>
<span class="p">});</span>
</pre></div>

<p>Taken from https://plainjs.com/javascript/events/running-code-when-the-
document-is-ready-15/</p>
<p>Another good domReady function here taken from
https://stackoverflow.com/a/9899701/175071</p>
<hr>
<p>As the accepted answer was very far from complete, I stitched together a
"ready" function like <code>jQuery.ready()</code> based on jQuery 1.6.2 source:</p>
<div class="code"><pre class="code literal-block"><span class="n">var</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="p">(){</span>

<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="n">readyList</span><span class="p">,</span>
<span class="w">        </span><span class="n">DOMContentLoaded</span><span class="p">,</span>
<span class="w">        </span><span class="n">class2type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object Boolean]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"boolean"</span><span class="p">;</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object Number]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"number"</span><span class="p">;</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object String]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"string"</span><span class="p">;</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object Function]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"function"</span><span class="p">;</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object Array]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"array"</span><span class="p">;</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object Date]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"date"</span><span class="p">;</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object RegExp]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"regexp"</span><span class="p">;</span>
<span class="w">        </span><span class="n">class2type</span><span class="p">[</span><span class="s">"[object Object]"</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"object"</span><span class="p">;</span>

<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="n">ReadyObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Is the DOM ready to be used? Set to true once it occurs.</span>
<span class="w">        </span><span class="nl">isReady</span><span class="p">:</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span>
<span class="w">        </span><span class="c1">// A counter to track how many items to wait for before</span>
<span class="w">        </span><span class="c1">// the ready event fires. See #6781</span>
<span class="w">        </span><span class="nl">readyWait</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="c1">// Hold (or release) the ready event</span>
<span class="w">        </span><span class="nl">holdReady</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="w"> </span><span class="n">hold</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">hold</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">readyWait</span><span class="o">++</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="p">(</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="c1">// Handle when the DOM is ready</span>
<span class="w">        </span><span class="nl">ready</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Either a released hold or an DOMready/load event and not yet ready</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">wait</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!--</span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">readyWait</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">wait</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">isReady</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">document</span><span class="p">.</span><span class="n">body</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="n">setTimeout</span><span class="p">(</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>

<span class="w">                </span><span class="c1">// Remember that the DOM is ready</span>
<span class="w">                </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">isReady</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">                </span><span class="c1">// If a normal DOM Ready event fired, decrement, and wait if need be</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">wait</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">--</span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">readyWait</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">return</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="c1">// If there are functions bound, to execute</span>
<span class="w">                </span><span class="n">readyList</span><span class="p">.</span><span class="n">resolveWith</span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">ReadyObj</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">);</span>

<span class="w">                </span><span class="c1">// Trigger any bound ready events</span>
<span class="w">                </span><span class="c1">//if ( ReadyObj.fn.trigger ) {</span>
<span class="w">                </span><span class="c1">//    ReadyObj( document ).trigger( "ready" ).unbind( "ready" );</span>
<span class="w">                </span><span class="c1">//}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nl">bindReady</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">readyList</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">readyList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">_Deferred</span><span class="p">();</span>

<span class="w">            </span><span class="c1">// Catch cases where $(document).ready() is called after the</span>
<span class="w">            </span><span class="c1">// browser event has already occurred.</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s">"complete"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Handle it asynchronously to allow scripts the opportunity to delay ready</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">setTimeout</span><span class="p">(</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Mozilla, Opera and webkit nightlies currently support this event</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">addEventListener</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Use the handy event callback</span>
<span class="w">                </span><span class="n">document</span><span class="p">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="w"> </span><span class="s">"DOMContentLoaded"</span><span class="p">,</span><span class="w"> </span><span class="n">DOMContentLoaded</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="p">);</span>
<span class="w">                </span><span class="c1">// A fallback to window.onload, that will always work</span>
<span class="w">                </span><span class="n">window</span><span class="p">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="w"> </span><span class="s">"load"</span><span class="p">,</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="p">);</span>

<span class="w">            </span><span class="c1">// If IE event model is used</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">attachEvent</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// ensure firing before onload,</span>
<span class="w">                </span><span class="c1">// maybe late but safe also for iframes</span>
<span class="w">                </span><span class="n">document</span><span class="p">.</span><span class="n">attachEvent</span><span class="p">(</span><span class="w"> </span><span class="s">"onreadystatechange"</span><span class="p">,</span><span class="w"> </span><span class="n">DOMContentLoaded</span><span class="w"> </span><span class="p">);</span>

<span class="w">                </span><span class="c1">// A fallback to window.onload, that will always work</span>
<span class="w">                </span><span class="n">window</span><span class="p">.</span><span class="n">attachEvent</span><span class="p">(</span><span class="w"> </span><span class="s">"onload"</span><span class="p">,</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="w"> </span><span class="p">);</span>

<span class="w">                </span><span class="c1">// If IE and not a frame</span>
<span class="w">                </span><span class="c1">// continually check to see if the document is ready</span>
<span class="w">                </span><span class="n">var</span><span class="w"> </span><span class="n">toplevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>

<span class="w">                </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">toplevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">window</span><span class="p">.</span><span class="n">frameElement</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">null</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">doScroll</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">toplevel</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">doScrollCheck</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nl">_Deferred</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">var</span><span class="w"> </span><span class="c1">// callbacks list</span>
<span class="w">                </span><span class="n">callbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[],</span>
<span class="w">                </span><span class="c1">// stored [ context , args ]</span>
<span class="w">                </span><span class="n">fired</span><span class="p">,</span>
<span class="w">                </span><span class="c1">// to avoid firing when already doing so</span>
<span class="w">                </span><span class="n">firing</span><span class="p">,</span>
<span class="w">                </span><span class="c1">// flag to know if the deferred has been cancelled</span>
<span class="w">                </span><span class="n">cancelled</span><span class="p">,</span>
<span class="w">                </span><span class="c1">// the deferred itself</span>
<span class="w">                </span><span class="n">deferred</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>

<span class="w">                    </span><span class="c1">// done( f1, f2, ...)</span>
<span class="w">                    </span><span class="nl">done</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">cancelled</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="n">var</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arguments</span><span class="p">,</span>
<span class="w">                                </span><span class="n">i</span><span class="p">,</span>
<span class="w">                                </span><span class="n">length</span><span class="p">,</span>
<span class="w">                                </span><span class="n">elem</span><span class="p">,</span>
<span class="w">                                </span><span class="n">type</span><span class="p">,</span>
<span class="w">                                </span><span class="n">_fired</span><span class="p">;</span>
<span class="w">                            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">fired</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">_fired</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fired</span><span class="p">;</span>
<span class="w">                                </span><span class="n">fired</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">];</span>
<span class="w">                                </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">type</span><span class="p">(</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="p">);</span>
<span class="w">                                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s">"array"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="n">deferred</span><span class="p">.</span><span class="n">done</span><span class="p">.</span><span class="n">apply</span><span class="p">(</span><span class="w"> </span><span class="n">deferred</span><span class="p">,</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="p">);</span>
<span class="w">                                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s">"function"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="n">callbacks</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="p">);</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">_fired</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">deferred</span><span class="p">.</span><span class="n">resolveWith</span><span class="p">(</span><span class="w"> </span><span class="n">_fired</span><span class="p">[</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="n">_fired</span><span class="p">[</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">                    </span><span class="p">},</span>

<span class="w">                    </span><span class="c1">// resolve with given context and args</span>
<span class="w">                    </span><span class="nl">resolveWith</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">cancelled</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">fired</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">firing</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="c1">// make sure args are available (#8421)</span>
<span class="w">                            </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[];</span>
<span class="w">                            </span><span class="n">firing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                            </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="n">callbacks</span><span class="p">[</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="n">callbacks</span><span class="p">.</span><span class="n">shift</span><span class="p">().</span><span class="n">apply</span><span class="p">(</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="p">);</span><span class="c1">//shifts a callback, and applies it to document</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                            </span><span class="n">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="n">fired</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="p">];</span>
<span class="w">                                </span><span class="n">firing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">                    </span><span class="p">},</span>

<span class="w">                    </span><span class="c1">// resolve with this as context and given arguments</span>
<span class="w">                    </span><span class="nl">resolve</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">deferred</span><span class="p">.</span><span class="n">resolveWith</span><span class="p">(</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="p">);</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">                    </span><span class="p">},</span>

<span class="w">                    </span><span class="c1">// Has this deferred been resolved?</span>
<span class="w">                    </span><span class="nl">isResolved</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="o">!!</span><span class="p">(</span><span class="w"> </span><span class="n">firing</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">fired</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="p">},</span>

<span class="w">                    </span><span class="c1">// Cancel</span>
<span class="w">                    </span><span class="nl">cancel</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="n">cancelled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                        </span><span class="n">callbacks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="p">;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">};</span>

<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">deferred</span><span class="p">;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nl">type</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="o">?</span>
<span class="w">                </span><span class="n">String</span><span class="p">(</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">                </span><span class="n">class2type</span><span class="p">[</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">toString</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s">"object"</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// The DOM ready check for Internet Explorer</span>
<span class="w">    </span><span class="n">function</span><span class="w"> </span><span class="n">doScrollCheck</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">isReady</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// If IE is used, use the trick by Diego Perini</span>
<span class="w">            </span><span class="c1">// http://javascript.nwbox.com/IEContentLoaded/</span>
<span class="w">            </span><span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">doScroll</span><span class="p">(</span><span class="s">"left"</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="n">catch</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">setTimeout</span><span class="p">(</span><span class="w"> </span><span class="n">doScrollCheck</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// and execute any waiting functions</span>
<span class="w">        </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Cleanup functions for the document ready method</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">addEventListener</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">DOMContentLoaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">document</span><span class="p">.</span><span class="n">removeEventListener</span><span class="p">(</span><span class="w"> </span><span class="s">"DOMContentLoaded"</span><span class="p">,</span><span class="w"> </span><span class="n">DOMContentLoaded</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="p">();</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">attachEvent</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">DOMContentLoaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="n">readyState</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s">"complete"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">document</span><span class="p">.</span><span class="n">detachEvent</span><span class="p">(</span><span class="w"> </span><span class="s">"onreadystatechange"</span><span class="p">,</span><span class="w"> </span><span class="n">DOMContentLoaded</span><span class="w"> </span><span class="p">);</span>
<span class="w">                </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">ready</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">function</span><span class="w"> </span><span class="n">ready</span><span class="p">(</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Attach the listeners</span>
<span class="w">        </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">bindReady</span><span class="p">();</span>

<span class="w">        </span><span class="n">var</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReadyObj</span><span class="p">.</span><span class="n">type</span><span class="p">(</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Add the callback</span>
<span class="w">        </span><span class="n">readyList</span><span class="p">.</span><span class="n">done</span><span class="p">(</span><span class="w"> </span><span class="n">fn</span><span class="w"> </span><span class="p">);</span><span class="c1">//readyList is result of _Deferred()</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ready</span><span class="p">;</span>
<span class="p">})();</span>
</pre></div>

<p>How to use:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script&gt;</span>
<span class="w">    </span>ready(function(){
<span class="w">        </span>alert('It<span class="w"> </span>works!');
<span class="w">    </span>});
<span class="w">    </span>ready(function(){
<span class="w">        </span>alert('Also<span class="w"> </span>works!');
<span class="w">    </span>});
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>I am not sure how functional this code is, but it worked fine with my
superficial tests. This took quite a while, so I hope you and others can
benefit from it.</p>
<p>PS.: I suggest compiling it.</p>
<p>Or you can use http://dustindiaz.com/smallest-domready-ever:</p>
<div class="code"><pre class="code literal-block">function r(f){/in/.test(document.readyState)?setTimeout(r,9,f):f()}
r(function(){/*code to run*/});
</pre></div>

<p>or the native function if you only need to support the new browsers (Unlike
jQuery ready, this won't run if you add this after the page has loaded)</p>
<div class="code"><pre class="code literal-block">document.addEventListener('DOMContentLoaded',function(){/*fun code to run*/})
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/indent-multiple-lines-quickly-in-vi/" class="u-url">Indent multiple lines quickly in vi</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/indent-multiple-lines-quickly-in-vi/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:36:28+08:00" itemprop="datePublished" title="2023-02-16 21:36">2023-02-16 21:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It should be trivial, and it might even be in the help, but I can't figure out
how to navigate it. How do I indent multiple lines quickly in vi?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use the <code>&gt;</code> command. To indent five lines, <code>5``&gt;``&gt;</code>. To mark a block of lines
and indent it, <code>V``j``j``&gt;</code> to indent three lines (Vim only). To indent a
curly-braces block, put your cursor on one of the curly braces and use <code>&gt;``%</code>
or from anywhere inside block use <code>&gt;``i``B</code>.</p>
<p>If you’re copying blocks of text around and need to align the indent of a
block in its new location, use <code>]``p</code> instead of just <code>p</code>. This aligns the
pasted block with the surrounding text.</p>
<p>Also, the <code>shiftwidth</code> setting allows you to control how many spaces to
indent.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This answer summarises the other answers and comments of this question, and it
adds extra information based on the Vim documentation and the Vim wiki. For
conciseness, this answer doesn't distinguish between Vi and Vim-specific
commands.</p>
<p>In the commands below, "re-indent" means "indent lines according to your
indentation settings." <code>shiftwidth</code> is the primary variable that controls
indentation.</p>
<p><strong>General Commands</strong></p>
<div class="code"><pre class="code literal-block">&gt;&gt;   Indent line by shiftwidth spaces
&lt;&lt;   De-indent line by shiftwidth spaces
5&gt;&gt;  Indent 5 lines
5==  Re-indent 5 lines

&gt;%   Increase indent of a braced or bracketed block (place cursor on brace first)
=%   Reindent a braced or bracketed block (cursor on brace)
&lt;%   Decrease indent of a braced or bracketed block (cursor on brace)
]p   Paste text, aligning indentation with surroundings

=i{  Re-indent the 'inner block', i.e. the contents of the block
=a{  Re-indent 'a block', i.e. block and containing braces
=2a{ Re-indent '2 blocks', i.e. this block and containing block

&gt;i{  Increase inner block indent
&lt;i{  Decrease inner block indent
</pre></div>

<p>You can replace <code>{</code> with <code>}</code> or <code>B</code>, e.g. <code>=iB</code> is a valid block indent
command. Take a look at "Indent a Code Block" for a nice example to try these
commands out on.</p>
<p>Also, remember that</p>
<div class="code"><pre class="code literal-block">.    Repeat last command
</pre></div>

<p>, so indentation commands can be easily and conveniently repeated.</p>
<p><strong>Re-indenting complete files</strong></p>
<p>Another common situation is requiring indentation to be fixed throughout a
source file:</p>
<div class="code"><pre class="code literal-block">gg=G  Re-indent entire buffer
</pre></div>

<p>You can extend this idea to multiple files:</p>
<div class="code"><pre class="code literal-block">" Re-indent all your C source code:
:args *.c
:argdo normal gg=G
:wall
</pre></div>

<p>Or multiple buffers:</p>
<div class="code"><pre class="code literal-block">" Re-indent all open buffers:
:bufdo normal gg=G:wall
</pre></div>

<p><strong>In Visual Mode</strong></p>
<div class="code"><pre class="code literal-block"><span class="nv">Vjj</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">Visually</span><span class="w"> </span><span class="nv">mark</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">indent</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">lines</span>
</pre></div>

<p><strong>In insert mode</strong></p>
<p>These commands apply to the current line:</p>
<div class="code"><pre class="code literal-block">CTRL-t   insert indent at start of line
CTRL-d   remove indent at start of line
0 CTRL-d remove all indentation from line
</pre></div>

<p><strong>Ex commands</strong></p>
<p>These are useful when you want to indent a specific range of lines, without
moving your cursor.</p>
<div class="code"><pre class="code literal-block">:&lt; and :&gt; Given a range, apply indentation e.g.
:4,8&gt;   indent lines 4 to 8, inclusive
</pre></div>

<p><strong>Indenting using markers</strong></p>
<p>Another approach is via markers:</p>
<div class="code"><pre class="code literal-block">ma     Mark top of block to indent as marker 'a'
</pre></div>

<p>...move cursor to end location</p>
<div class="code"><pre class="code literal-block">&gt;'a    Indent from marker 'a' to current location
</pre></div>

<p><strong>Variables that govern indentation</strong></p>
<p>You can set these in your .vimrc file.</p>
<div class="code"><pre class="code literal-block"><span class="nv">set</span><span class="w"> </span><span class="nv">expandtab</span><span class="w">       </span><span class="err">"Use softtabstop spaces instead of tab characters for indentation</span>
<span class="nv">set</span><span class="w"> </span><span class="nv">shiftwidth</span><span class="o">=</span><span class="mi">4</span><span class="w">    </span><span class="err">"Indent by 4 spaces when using &gt;&gt;, &lt;&lt;, == etc.</span>
<span class="nv">set</span><span class="w"> </span><span class="nv">softtabstop</span><span class="o">=</span><span class="mi">4</span><span class="w">   </span><span class="err">"Indent by 4 spaces when pressing &lt;TAB&gt;</span>

<span class="nv">set</span><span class="w"> </span><span class="nv">autoindent</span><span class="w">      </span><span class="err">"Keep indentation from previous line</span>
<span class="nv">set</span><span class="w"> </span><span class="nv">smartindent</span><span class="w">     </span><span class="err">"Automatically inserts indentation in some cases</span>
<span class="nv">set</span><span class="w"> </span><span class="nv">cindent</span><span class="w">         </span><span class="err">"Like smartindent, but stricter and more customisable</span>
</pre></div>

<p>Vim has intelligent indentation based on filetype. Try adding this to your
.vimrc:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span> <span class="k">has</span> (<span class="s">"autocmd"</span>)
    " <span class="n">File</span> <span class="nb">type</span> <span class="n">detection</span>. <span class="n">Indent</span> <span class="n">based</span> <span class="n">on</span> <span class="n">filetype</span>. <span class="n">Recommended</span>.
    <span class="n">filetype</span> <span class="n">plugin</span> <span class="nb">indent</span> <span class="n">on</span>
<span class="n">endif</span>
</pre></div>

<p><strong>References</strong></p>
<ul>
<li>Indent a code block </li>
<li>Shifting blocks visually</li>
<li>Indenting source code</li>
<li><code>:help =</code></li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-guarantee-that-my-enums-definition-doesn-t-change-in-javascript/" class="u-url">How can I guarantee that my enums definition doesn't change in JavaScript?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-guarantee-that-my-enums-definition-doesn-t-change-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:35:51+08:00" itemprop="datePublished" title="2023-02-16 21:35">2023-02-16 21:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Would the following make the objects fulfil all characteristics that enums
have in JavaScript? Something like:</p>
<div class="code"><pre class="code literal-block"><span class="nv">my</span>.<span class="nv">namespace</span>.<span class="nv">ColorEnum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">RED</span><span class="w"> </span>:<span class="w"> </span><span class="mi">0</span>,
<span class="w">  </span><span class="nv">GREEN</span><span class="w"> </span>:<span class="w"> </span><span class="mi">1</span>,
<span class="w">  </span><span class="nv">BLUE</span><span class="w"> </span>:<span class="w"> </span><span class="mi">2</span>
}

<span class="o">//</span><span class="w"> </span><span class="nv">later</span><span class="w"> </span><span class="nv">on</span>

<span class="k">if</span><span class="ss">(</span><span class="nv">currentColor</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">my</span>.<span class="nv">namespace</span>.<span class="nv">ColorEnum</span>.<span class="nv">RED</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">whatever</span>
}
</pre></div>

<p>Or is there some other way I can do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Since 1.8.5 it's possible to seal and freeze the object, so define the above
as:</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">DaysEnum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">freeze</span><span class="p">({</span><span class="s2">"monday"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"tuesday"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"wednesday"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="p">})</span>
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">DaysEnum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">"monday"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"tuesday"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"wednesday"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="p">}</span>
<span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">freeze</span><span class="p">(</span><span class="n">DaysEnum</span><span class="p">)</span>
</pre></div>

<p>and voila! JS enums.</p>
<p>However, this doesn't prevent you from assigning an undesired value to a
variable, which is often the main goal of enums:</p>
<div class="code"><pre class="code literal-block">let day = DaysEnum.tuesday
day = 298832342 // goes through without any errors
</pre></div>

<p>One way to ensure a stronger degree of type safety (with enums or otherwise)
is to use a tool like TypeScript or Flow.</p>
<p>Quotes aren't needed but I kept them for consistency.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This isn't much of an answer, but I'd say that works just fine, personally</p>
<p>Having said that, since it doesn't matter what the values are (you've used 0,
1, 2), I'd use a meaningful string in case you ever wanted to output the
current value.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-111.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-109.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
