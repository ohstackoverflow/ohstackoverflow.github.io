<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2724) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2724.html">
<link rel="prev" href="index-2725.html" type="text/html">
<link rel="next" href="index-2723.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-post-data-to-specific-url-using-webclient-in-c/" class="u-url">How to post data to specific URL using WebClient in C#</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-post-data-to-specific-url-using-webclient-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T13:11:06+08:00" itemprop="datePublished" title="2023-03-05 13:11">2023-03-05 13:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to use "HTTP Post" with WebClient to post some data to a specific URL I
have.</p>
<p>Now, I know this can be accomplished with WebRequest but for some reasons I
want to use WebClient instead. Is that possible? If so, can someone show me
some example or point me to the right direction?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I just found the solution and yea it was easier than I thought :)</p>
<p>so here is the solution:</p>
<div class="code"><pre class="code literal-block"><span class="n">string</span><span class="w"> </span><span class="n">URI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://www.myurl.com/post.php"</span><span class="p">;</span>
<span class="n">string</span><span class="w"> </span><span class="n">myParameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"param1=value1&amp;param2=value2&amp;param3=value3"</span><span class="p">;</span>

<span class="n">using</span><span class="w"> </span><span class="p">(</span><span class="n">WebClient</span><span class="w"> </span><span class="n">wc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">WebClient</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">wc</span><span class="o">.</span><span class="n">Headers</span><span class="p">[</span><span class="n">HttpRequestHeader</span><span class="o">.</span><span class="n">ContentType</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"application/x-www-form-urlencoded"</span><span class="p">;</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">HtmlResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wc</span><span class="o">.</span><span class="n">UploadString</span><span class="p">(</span><span class="n">URI</span><span class="p">,</span><span class="w"> </span><span class="n">myParameters</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>it works like charm :)</p>
<p><br></p>
<h3>Suggest</h3>
<p>There is a built in method called UploadValues that can send HTTP POST (or any
kind of HTTP methods) AND handles the construction of request body
(concatenating parameters with "&amp;" and escaping characters by url encoding) in
proper form data format:</p>
<div class="code"><pre class="code literal-block"><span class="n">using</span><span class="p">(</span><span class="n">WebClient</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">WebClient</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">reqparm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">Collections</span><span class="o">.</span><span class="n">Specialized</span><span class="o">.</span><span class="n">NameValueCollection</span><span class="p">();</span>
<span class="w">    </span><span class="n">reqparm</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s2">"param1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"&lt;any&gt; kinds &amp; of = ? strings"</span><span class="p">);</span>
<span class="w">    </span><span class="n">reqparm</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s2">"param2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"escaping is already handled"</span><span class="p">);</span>
<span class="w">    </span><span class="n">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">responsebytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">.</span><span class="n">UploadValues</span><span class="p">(</span><span class="s2">"http://localhost"</span><span class="p">,</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w"> </span><span class="n">reqparm</span><span class="p">);</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">responsebody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Encoding</span><span class="o">.</span><span class="n">UTF8</span><span class="o">.</span><span class="n">GetString</span><span class="p">(</span><span class="n">responsebytes</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-pick-an-image-from-gallery-sd-card-for-my-app/" class="u-url">How to pick an image from gallery (SD Card) for my app?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-pick-an-image-from-gallery-sd-card-for-my-app/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T13:10:08+08:00" itemprop="datePublished" title="2023-03-05 13:10">2023-03-05 13:10</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This question was originally asked for Android 1.6.</p>
<p>I am working on photos options in my app.</p>
<p>I have a button and an ImageView in my Activity. When I click the button it
would redirect to the gallery and I would be able to select an image. The
selected image would appear in my ImageView.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Updated answer, nearly 5 years later:</p>
<p>The code in the original answer no longer works reliably, as images from
various sources sometimes return with a different content URI, i.e.
<code>content://</code> rather than <code>file://</code>. A better solution is to simply use
<code>context.getContentResolver().openInputStream(intent.getData())</code>, as that will
return an InputStream that you can handle as you choose.</p>
<p>For example, <code>BitmapFactory.decodeStream()</code> works perfectly in this situation,
as you can also then use the Options and inSampleSize field to downsample
large images and avoid memory problems.</p>
<p>However, things like Google Drive return URIs to images which have not
actually been downloaded yet. Therefore you need to perform the
getContentResolver() code on a background thread.</p>
<hr>
<p>Original answer:</p>
<p>The other answers explained how to send the intent, but they didn't explain
well how to handle the response. Here's some sample code on how to do that:</p>
<div class="code"><pre class="code literal-block"><span class="nt">protected</span><span class="w"> </span><span class="nt">void</span><span class="w"> </span><span class="nt">onActivityResult</span><span class="o">(</span><span class="nt">int</span><span class="w"> </span><span class="nt">requestCode</span><span class="o">,</span><span class="w"> </span><span class="nt">int</span><span class="w"> </span><span class="nt">resultCode</span><span class="o">,</span><span class="w"> </span>
<span class="w">       </span><span class="nt">Intent</span><span class="w"> </span><span class="nt">imageReturnedIntent</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">super.onActivityResult(requestCode,</span><span class="w"> </span><span class="err">resultCode,</span><span class="w"> </span><span class="err">imageReturnedIntent)</span><span class="p">;</span>

<span class="w">    </span><span class="err">switch(requestCode)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">    </span><span class="err">case</span><span class="w"> </span><span class="n">REQ_CODE_PICK_IMAGE</span><span class="p">:</span>
<span class="w">        </span><span class="nf">if</span><span class="p">(</span><span class="n">resultCode</span><span class="w"> </span><span class="err">==</span><span class="w"> </span><span class="n">RESULT_OK</span><span class="p">)</span><span class="err">{</span><span class="w">  </span>
<span class="w">            </span><span class="n">Uri</span><span class="w"> </span><span class="n">selectedImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">imageReturnedIntent</span><span class="o">.</span><span class="nf">getData</span><span class="p">();</span>
<span class="w">            </span><span class="err">String</span><span class="cp">[]</span><span class="w"> </span><span class="err">filePathColumn</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">{MediaStore.Images.Media.DATA</span><span class="p">}</span><span class="o">;</span>

<span class="w">            </span><span class="nt">Cursor</span><span class="w"> </span><span class="nt">cursor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">getContentResolver</span><span class="o">()</span><span class="p">.</span><span class="nc">query</span><span class="o">(</span>
<span class="w">                               </span><span class="nt">selectedImage</span><span class="o">,</span><span class="w"> </span><span class="nt">filePathColumn</span><span class="o">,</span><span class="w"> </span><span class="nt">null</span><span class="o">,</span><span class="w"> </span><span class="nt">null</span><span class="o">,</span><span class="w"> </span><span class="nt">null</span><span class="o">);</span>
<span class="w">            </span><span class="nt">cursor</span><span class="p">.</span><span class="nc">moveToFirst</span><span class="o">();</span>

<span class="w">            </span><span class="nt">int</span><span class="w"> </span><span class="nt">columnIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">cursor</span><span class="p">.</span><span class="nc">getColumnIndex</span><span class="o">(</span><span class="nt">filePathColumn</span><span class="cp">[</span><span class="mi">0</span><span class="cp">]</span><span class="o">);</span>
<span class="w">            </span><span class="nt">String</span><span class="w"> </span><span class="nt">filePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">cursor</span><span class="p">.</span><span class="nc">getString</span><span class="o">(</span><span class="nt">columnIndex</span><span class="o">);</span>
<span class="w">            </span><span class="nt">cursor</span><span class="p">.</span><span class="nc">close</span><span class="o">();</span>


<span class="w">            </span><span class="nt">Bitmap</span><span class="w"> </span><span class="nt">yourSelectedImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">BitmapFactory</span><span class="p">.</span><span class="nc">decodeFile</span><span class="o">(</span><span class="nt">filePath</span><span class="o">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>After this, you've got the selected image stored in "yourSelectedImage" to do
whatever you want with. This code works by getting the location of the image
in the ContentResolver database, but that on its own isn't enough. Each image
has about 18 columns of information, ranging from its filepath to 'date last
modified' to the GPS coordinates of where the photo was taken, though many of
the fields aren't actually used.</p>
<p>To save time as you don't actually need the other fields, cursor search is
done with a filter. The filter works by specifying the name of the column you
want, MediaStore.Images.Media.DATA, which is the path, and then giving that
string[] to the cursor query. The cursor query returns with the path, but you
don't know which column it's in until you use the <code>columnIndex</code> code. That
simply gets the number of the column based on its name, the same one used in
the filtering process. Once you've got that, you're finally able to decode the
image into a bitmap with the last line of code I gave.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">private static final int SELECT_PHOTO = 100;
</pre></div>

<p>Start intent</p>
<div class="code"><pre class="code literal-block">Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
photoPickerIntent.setType("image/*");
startActivityForResult(photoPickerIntent, SELECT_PHOTO);
</pre></div>

<p>Process result</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Override</span>
<span class="n">protected</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onActivityResult</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">Intent</span><span class="w"> </span><span class="n">imageReturnedIntent</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">super</span><span class="p">.</span><span class="n">onActivityResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span><span class="w"> </span><span class="n">resultCode</span><span class="p">,</span><span class="w"> </span><span class="n">imageReturnedIntent</span><span class="p">);</span>

<span class="w">    </span><span class="n">switch</span><span class="p">(</span><span class="n">requestCode</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nl">SELECT_PHOTO</span><span class="p">:</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">resultCode</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">RESULT_OK</span><span class="p">)</span><span class="err">{</span><span class="w">  </span>
<span class="w">            </span><span class="n">Uri</span><span class="w"> </span><span class="n">selectedImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">imageReturnedIntent</span><span class="p">.</span><span class="n">getData</span><span class="p">();</span>
<span class="w">            </span><span class="n">InputStream</span><span class="w"> </span><span class="n">imageStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getContentResolver</span><span class="p">().</span><span class="n">openInputStream</span><span class="p">(</span><span class="n">selectedImage</span><span class="p">);</span>
<span class="w">            </span><span class="n">Bitmap</span><span class="w"> </span><span class="n">yourSelectedImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BitmapFactory</span><span class="p">.</span><span class="n">decodeStream</span><span class="p">(</span><span class="n">imageStream</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>Alternatively, you can also downsample your image to avoid OutOfMemory errors.</p>
<div class="code"><pre class="code literal-block"><span class="nv">private</span><span class="w"> </span><span class="nv">Bitmap</span><span class="w"> </span><span class="nv">decodeUri</span><span class="ss">(</span><span class="nv">Uri</span><span class="w"> </span><span class="nv">selectedImage</span><span class="ss">)</span><span class="w"> </span><span class="nv">throws</span><span class="w"> </span><span class="nv">FileNotFoundException</span><span class="w"> </span>{

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="nv">Decode</span><span class="w"> </span><span class="nv">image</span><span class="w"> </span><span class="nv">size</span>
<span class="w">        </span><span class="nv">BitmapFactory</span>.<span class="nv">Options</span><span class="w"> </span><span class="nv">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">BitmapFactory</span>.<span class="nv">Options</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">o</span>.<span class="nv">inJustDecodeBounds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">true</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">BitmapFactory</span>.<span class="nv">decodeStream</span><span class="ss">(</span><span class="nv">getContentResolver</span><span class="ss">()</span>.<span class="nv">openInputStream</span><span class="ss">(</span><span class="nv">selectedImage</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">null</span>,<span class="w"> </span><span class="nv">o</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">scale</span><span class="w"> </span><span class="nv">to</span>
<span class="w">        </span><span class="nv">final</span><span class="w"> </span><span class="nv">int</span><span class="w"> </span><span class="nv">REQUIRED_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">140</span><span class="c1">;</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="nv">Find</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">correct</span><span class="w"> </span><span class="nv">scale</span><span class="w"> </span><span class="nv">value</span>.<span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">should</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">power</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="mi">2</span>.
<span class="w">        </span><span class="nv">int</span><span class="w"> </span><span class="nv">width_tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">o</span>.<span class="nv">outWidth</span>,<span class="w"> </span><span class="nv">height_tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">o</span>.<span class="nv">outHeight</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">int</span><span class="w"> </span><span class="nv">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="c1">;</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="ss">(</span><span class="nv">true</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">width_tmp</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">REQUIRED_SIZE</span>
<span class="w">               </span><span class="o">||</span><span class="w"> </span><span class="nv">height_tmp</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nv">REQUIRED_SIZE</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">                </span><span class="k">break</span><span class="c1">;</span>
<span class="w">            </span>}
<span class="w">            </span><span class="nv">width_tmp</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">            </span><span class="nv">height_tmp</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">            </span><span class="nv">scale</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">        </span>}

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="nv">Decode</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">inSampleSize</span>
<span class="w">        </span><span class="nv">BitmapFactory</span>.<span class="nv">Options</span><span class="w"> </span><span class="nv">o2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">BitmapFactory</span>.<span class="nv">Options</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">        </span><span class="nv">o2</span>.<span class="nv">inSampleSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">scale</span><span class="c1">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">BitmapFactory</span>.<span class="nv">decodeStream</span><span class="ss">(</span><span class="nv">getContentResolver</span><span class="ss">()</span>.<span class="nv">openInputStream</span><span class="ss">(</span><span class="nv">selectedImage</span><span class="ss">)</span>,<span class="w"> </span><span class="nv">null</span>,<span class="w"> </span><span class="nv">o2</span><span class="ss">)</span><span class="c1">;</span>

<span class="w">    </span>}
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/input-text-dialog-android/" class="u-url">Input text dialog Android</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/input-text-dialog-android/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T13:08:23+08:00" itemprop="datePublished" title="2023-03-05 13:08">2023-03-05 13:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When a user clicks a <code>Button</code> in my App (which is printed in a <code>SurfaceView</code>),
I'd like a text <code>Dialog</code> to appear and I would like to store the result in a
<code>String</code>. I'd like the text <code>Dialog</code> to overlay the current screen. How can I
do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Sounds like a good opportunity to use an AlertDialog.</p>
<p>As basic as it seems, Android does not have a built-in dialog to do this (as
far as I know). Fortunately, it's just a little extra work on top of creating
a standard AlertDialog. You simply need to create an EditText for the user to
input data, and set it as the view of the AlertDialog. You can customize the
type of input allowed using setInputType, if you need.</p>
<p>If you're able to use a member variable, you can simply set the variable to
the value of the EditText, and it will persist after the dialog has dismissed.
If you can't use a member variable, you may need to use a listener to send the
string value to the right place. (I can edit and elaborate more if this is
what you need).</p>
<p>Within your class:</p>
<div class="code"><pre class="code literal-block">private String m_Text = "";
</pre></div>

<p>Within the OnClickListener of your button (or in a function called from
there):</p>
<div class="code"><pre class="code literal-block"><span class="n">AlertDialog</span><span class="p">.</span><span class="n">Builder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AlertDialog</span><span class="p">.</span><span class="n">Builder</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<span class="n">builder</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="ss">"Title"</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="k">Set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">input</span>
<span class="n">final</span><span class="w"> </span><span class="n">EditText</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">EditText</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="n">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">expected</span><span class="p">;</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="k">sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">password</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">text</span>
<span class="k">input</span><span class="p">.</span><span class="n">setInputType</span><span class="p">(</span><span class="n">InputType</span><span class="p">.</span><span class="n">TYPE_CLASS_TEXT</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">InputType</span><span class="p">.</span><span class="n">TYPE_TEXT_VARIATION_PASSWORD</span><span class="p">);</span>
<span class="n">builder</span><span class="p">.</span><span class="n">setView</span><span class="p">(</span><span class="k">input</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="k">Set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buttons</span>
<span class="n">builder</span><span class="p">.</span><span class="n">setPositiveButton</span><span class="p">(</span><span class="ss">"OK"</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DialogInterface</span><span class="p">.</span><span class="n">OnClickListener</span><span class="p">()</span><span class="w"> </span><span class="err">{</span><span class="w"> </span>
<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">DialogInterface</span><span class="w"> </span><span class="n">dialog</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">which</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">m_Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">input</span><span class="p">.</span><span class="n">getText</span><span class="p">().</span><span class="n">toString</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span><span class="p">);</span>
<span class="n">builder</span><span class="p">.</span><span class="n">setNegativeButton</span><span class="p">(</span><span class="ss">"Cancel"</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DialogInterface</span><span class="p">.</span><span class="n">OnClickListener</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">DialogInterface</span><span class="w"> </span><span class="n">dialog</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">which</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">dialog</span><span class="p">.</span><span class="n">cancel</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span><span class="p">);</span>

<span class="n">builder</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I will add to @Aaron's answer with an approach that gives you the opportunity
to style the dialog box in a better way. Here is an adjusted example:</p>
<div class="code"><pre class="code literal-block"><span class="n">AlertDialog</span><span class="p">.</span><span class="n">Builder</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AlertDialog</span><span class="p">.</span><span class="n">Builder</span><span class="p">(</span><span class="n">getContext</span><span class="p">());</span>
<span class="n">builder</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="ss">"Title"</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="n">I</span><span class="s1">'m using fragment here so I'</span><span class="n">m</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">getView</span><span class="p">()</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">ViewGroup</span>
<span class="o">//</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">ViewGroup</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">Fragment</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Activity</span>
<span class="k">View</span><span class="w"> </span><span class="n">viewInflated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LayoutInflater</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="n">getContext</span><span class="p">()).</span><span class="n">inflate</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">text_inpu_password</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">ViewGroup</span><span class="p">)</span><span class="w"> </span><span class="n">getView</span><span class="p">(),</span><span class="w"> </span><span class="k">false</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="k">Set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">input</span>
<span class="n">final</span><span class="w"> </span><span class="n">EditText</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">EditText</span><span class="p">)</span><span class="w"> </span><span class="n">viewInflated</span><span class="p">.</span><span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="k">input</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="n">Specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">expected</span><span class="p">;</span><span class="w"> </span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="k">sets</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">password</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">text</span>
<span class="n">builder</span><span class="p">.</span><span class="n">setView</span><span class="p">(</span><span class="n">viewInflated</span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="k">Set</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buttons</span>
<span class="n">builder</span><span class="p">.</span><span class="n">setPositiveButton</span><span class="p">(</span><span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">ok</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DialogInterface</span><span class="p">.</span><span class="n">OnClickListener</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">DialogInterface</span><span class="w"> </span><span class="n">dialog</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">which</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">dialog</span><span class="p">.</span><span class="n">dismiss</span><span class="p">();</span>
<span class="w">        </span><span class="n">m_Text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">input</span><span class="p">.</span><span class="n">getText</span><span class="p">().</span><span class="n">toString</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span><span class="w">   </span>
<span class="err">}</span><span class="p">);</span><span class="w"> </span>
<span class="n">builder</span><span class="p">.</span><span class="n">setNegativeButton</span><span class="p">(</span><span class="n">android</span><span class="p">.</span><span class="n">R</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">cancel</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DialogInterface</span><span class="p">.</span><span class="n">OnClickListener</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">DialogInterface</span><span class="w"> </span><span class="n">dialog</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">which</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">dialog</span><span class="p">.</span><span class="n">cancel</span><span class="p">();</span>
<span class="w">    </span><span class="err">}</span><span class="w">   </span>
<span class="err">}</span><span class="p">);</span>

<span class="n">builder</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>

<p>Here is the example layout used to create the EditText dialog:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;FrameLayout</span><span class="w"> </span><span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
<span class="w">    </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">    </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="w">    </span><span class="na">android:padding=</span><span class="s">"@dimen/content_padding_normal"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;android.support.design.widget.TextInputLayout</span>
<span class="w">        </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">        </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">&gt;</span>

<span class="w">        </span><span class="nt">&lt;AutoCompleteTextView</span>
<span class="w">            </span><span class="na">android:id=</span><span class="s">"@+id/input"</span>
<span class="w">            </span><span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
<span class="w">            </span><span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
<span class="w">            </span><span class="na">android:hint=</span><span class="s">"@string/hint_password"</span>
<span class="w">            </span><span class="na">android:imeOptions=</span><span class="s">"actionDone"</span>
<span class="w">            </span><span class="na">android:inputType=</span><span class="s">"textPassword"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;/android.support.design.widget.TextInputLayout&gt;</span>
<span class="nt">&lt;/FrameLayout&gt;</span>
</pre></div>

<p>The final result:</p>
<p><img alt="EditText Dialog example" src="images/03TwW.png"></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2725.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2723.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
