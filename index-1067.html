<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1067) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1067.html">
<link rel="prev" href="index-1068.html" type="text/html">
<link rel="next" href="index-1066.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-c-compilation-take-so-long/" class="u-url">Why does C++ compilation take so long?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-c-compilation-take-so-long/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:19:50+08:00" itemprop="datePublished" title="2023-02-18 00:19">2023-02-18 00:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Compiling a C++ file takes a very long time when compared to C# and Java. It
takes significantly longer to compile a C++ file than it would to run a normal
size Python script. I'm currently using VC++ but it's the same with any
compiler. Why is this?</p>
<p>The two reasons I could think of were loading header files and running the
preprocessor, but that doesn't seem like it should explain why it takes so
long.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Several reasons</p>
<h2>Header files</h2>
<p>Every single compilation unit requires hundreds or even thousands of headers
to be (1) loaded and (2) compiled. Every one of them typically has to be
recompiled for every compilation unit, because the preprocessor ensures that
the result of compiling a header <em>might</em> vary between every compilation unit.
(A macro may be defined in one compilation unit which changes the content of
the header).</p>
<p>This is probably <em>the</em> main reason, as it requires huge amounts of code to be
compiled for every compilation unit, and additionally, every header has to be
compiled multiple times (once for every compilation unit that includes it).</p>
<h2>Linking</h2>
<p>Once compiled, all the object files have to be linked together. This is
basically a monolithic process that can't very well be parallelized, and has
to process your entire project.</p>
<h2>Parsing</h2>
<p>The syntax is extremely complicated to parse, depends heavily on context, and
is very hard to disambiguate. This takes a lot of time.</p>
<h2>Templates</h2>
<p>In C#, <code>List&lt;T&gt;</code> is the only type that is compiled, no matter how many
instantiations of List you have in your program. In C++, <code>vector&lt;int&gt;</code> is a
completely separate type from <code>vector&lt;float&gt;</code>, and each one will have to be
compiled separately.</p>
<p>Add to this that templates make up a full Turing-complete "sub-language" that
the compiler has to interpret, and this can become ridiculously complicated.
Even relatively simple template metaprogramming code can define recursive
templates that create dozens and dozens of template instantiations. Templates
may also result in extremely complex types, with ridiculously long names,
adding a lot of extra work to the linker. (It has to compare a lot of symbol
names, and if these names can grow into many thousand characters, that can
become fairly expensive).</p>
<p>And of course, they exacerbate the problems with header files, because
templates generally have to be defined in headers, which means far more code
has to be parsed and compiled for every compilation unit. In plain C code, a
header typically only contains forward declarations, but very little actual
code. In C++, it is not uncommon for almost all the code to reside in header
files.</p>
<h2>Optimization</h2>
<p>C++ allows for some very dramatic optimizations. C# or Java don't allow
classes to be completely eliminated (they have to be there for reflection
purposes), but even a simple C++ template metaprogram can easily generate
dozens or hundreds of classes, all of which are inlined and eliminated again
in the optimization phase.</p>
<p>Moreover, a C++ program must be fully optimized by the compiler. A C# program
can rely on the JIT compiler to perform additional optimizations at load-time,
C++ doesn't get any such "second chances". What the compiler generates is as
optimized as it's going to get.</p>
<h2>Machine</h2>
<p>C++ is compiled to machine code which may be somewhat more complicated than
the bytecode Java or .NET use (especially in the case of x86). (This is
mentioned out of completeness only because it was mentioned in comments and
such. In practice, this step is unlikely to take more than a tiny fraction of
the total compilation time).</p>
<h2>Conclusion</h2>
<p>Most of these factors are shared by C code, which actually compiles fairly
efficiently. The parsing step is a lot more complicated in C++, and can take
up significantly more time, but the main offender is probably templates.
They're useful, and make C++ a far more powerful language, but they also take
their toll in terms of compilation speed.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Parsing and code generation are actually rather fast. The real problem is
opening and closing files. Remember, even with include guards, the compiler
still have open the .H file, and read each line (and then ignore it).</p>
<p>A friend once (while bored at work), took his company's application and put
everything -- all source and header files-- into one big file. Compile time
dropped from 3 hours to 7 minutes.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/usr-bin-ld-cannot-find-l-nameofthelibrary/" class="u-url">usr/bin/ld: cannot find -l&lt;nameOfTheLibrary&gt;</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/usr-bin-ld-cannot-find-l-nameofthelibrary/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:19:20+08:00" itemprop="datePublished" title="2023-02-18 00:19">2023-02-18 00:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to compile my program and it returns this error :</p>
<div class="code"><pre class="code literal-block">usr/bin/ld: cannot find -l&lt;nameOfTheLibrary&gt;
</pre></div>

<p>in my makefile I use the command <code>g++</code> and link to my library which is a
symbolic link to my library located on an other directory.</p>
<p>Is there an option to add to make it work please?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If your library name is say <code>libxyz.so</code> and it is located on path say:</p>
<div class="code"><pre class="code literal-block">/home/user/myDir
</pre></div>

<p>then to link it to your program:</p>
<div class="code"><pre class="code literal-block">g++ -L/home/user/myDir -lxyz myprog.cpp -o myprog
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If your library name is say <code>libxyz.so</code> and it is located on path say:</p>
<div class="code"><pre class="code literal-block">/home/user/myDir
</pre></div>

<p>then to link it to your program:</p>
<div class="code"><pre class="code literal-block">g++ -L/home/user/myDir -lxyz myprog.cpp -o myprog
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-check-whether-a-pandas-dataframe-is-empty/" class="u-url">How to check whether a pandas DataFrame is empty?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-check-whether-a-pandas-dataframe-is-empty/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:18:51+08:00" itemprop="datePublished" title="2023-02-18 00:18">2023-02-18 00:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How to check whether a pandas <code>DataFrame</code> is empty? In my case I want to print
some message in terminal if the <code>DataFrame</code> is empty.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use the attribute <code>df.empty</code> to check whether it's empty or not:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">df</span>.<span class="nv">empty</span>:
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s1">'DataFrame is empty!'</span><span class="ss">)</span>
</pre></div>

<p>Source: Pandas Documentation</p>
<p><br></p>
<h3>Suggest</h3>
<p>I use the <code>len</code> function. It's much faster than <code>empty</code>. <code>len(df.index)</code> is
even faster.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">'ABCD'</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">empty</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="kp">empty</span>

<span class="k">def</span> <span class="nf">lenz</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">lenzi</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<span class="sd">'''</span>
<span class="sd">%timeit empty(df)</span>
<span class="sd">%timeit lenz(df)</span>
<span class="sd">%timeit lenzi(df)</span>

<span class="sd">10000 loops, best of 3: 13.9 µs per loop</span>
<span class="sd">100000 loops, best of 3: 2.34 µs per loop</span>
<span class="sd">1000000 loops, best of 3: 695 ns per loop</span>

<span class="sd">len on index seems to be faster</span>
<span class="sd">'''</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1068.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1066.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
