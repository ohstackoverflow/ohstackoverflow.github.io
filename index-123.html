<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 123) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-123.html">
<link rel="prev" href="index-124.html" type="text/html">
<link rel="next" href="index-122.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-inversion-of-control/" class="u-url">What is Inversion of Control?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-inversion-of-control/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T22:03:37+08:00" itemprop="datePublished" title="2023-02-16 22:03">2023-02-16 22:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Inversion of Control (IoC) can be quite confusing when it is first
encountered.</p>
<ol>
<li>What is it?</li>
<li>Which problem does it solve?</li>
<li>When is it appropriate to use and when not?</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>The <strong><code>Inversion-of-Control</code> (IoC)</strong> pattern, is about providing <em>any kind</em> of
<code>callback</code>, which "implements" and/or controls reaction, instead of acting
ourselves directly (in other words, inversion and/or redirecting control to
the external handler/controller). The <strong><code>Dependency-Injection</code> (DI)</strong> pattern
is a more specific version of IoC pattern, and is all about removing
dependencies from your code.</p>
<blockquote>
<p>Every <code>DI</code> implementation can be considered <code>IoC</code>, but one should not call
it <code>IoC</code>, because implementing Dependency-Injection is harder than callback
(Don't lower your product's worth by using the general term "IoC" instead).</p>
</blockquote>
<p>For DI example, say your application has a text-editor component, and you want
to provide spell checking. Your standard code would look something like this:</p>
<div class="code"><pre class="code literal-block">public class TextEditor {

    private SpellChecker checker;

    public TextEditor() {
        this.checker = new SpellChecker();
    }
}
</pre></div>

<p>What we've done here creates a dependency between the <code>TextEditor</code> and the
<code>SpellChecker</code>. In an IoC scenario we would instead do something like this:</p>
<div class="code"><pre class="code literal-block">public class TextEditor {

    private IocSpellChecker checker;

    public TextEditor(IocSpellChecker checker) {
        this.checker = checker;
    }
}
</pre></div>

<p>In the first code example we are instantiating <code>SpellChecker</code> (<code>this.checker =
new SpellChecker();</code>), which means the <code>TextEditor</code> class directly depends on
the <code>SpellChecker</code> class.</p>
<p>In the second code example we are creating an abstraction by having the
<code>SpellChecker</code> dependency class in <code>TextEditor</code>'s constructor signature (not
initializing dependency in class). This allows us to call the dependency then
pass it to the TextEditor class like so:</p>
<div class="code"><pre class="code literal-block">SpellChecker sc = new SpellChecker(); // dependency
TextEditor textEditor = new TextEditor(sc);
</pre></div>

<p>Now the client creating the <code>TextEditor</code> class has control over which
<code>SpellChecker</code> implementation to use because we're injecting the dependency
into the <code>TextEditor</code> signature.</p>
<hr>
<p><strong>Note</strong> that just like IoC being the base of many other patterns, above
sample is only one of many Dependency-Injection kinds, for example:</p>
<ul>
<li>Constructor Injection. </li>
</ul>
<blockquote>
<p>Where an instance of <code>IocSpellChecker</code> would be passed to constructor,
either automatically or similar to above manually.</p>
</blockquote>
<ul>
<li>Setter Injection. </li>
</ul>
<blockquote>
<p>Where an instance of <code>IocSpellChecker</code> would be passed through setter-method
or <code>public</code> property.</p>
</blockquote>
<ul>
<li>Service-lookup and/or Service-locator </li>
</ul>
<blockquote>
<p>Where <code>TextEditor</code> would ask a known provider for a globally-used-instance
(service) of <code>IocSpellChecker</code> type (and that maybe without storing said
instance, and instead, asking the provider again and again).</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>Inversion of Control is what you get when your program callbacks, e.g. like a
gui program.</p>
<p>For example, in an old school menu, you might have:</p>
<div class="code"><pre class="code literal-block">print "enter your name"
read name
print "enter your address"
read address
etc...
store in database
</pre></div>

<p>thereby controlling the flow of user interaction.</p>
<p>In a GUI program or somesuch, instead we say:</p>
<div class="code"><pre class="code literal-block">when the user types in field a, store it in NAME
when the user types in field b, store it in ADDRESS
when the user clicks the save button, call StoreInDatabase
</pre></div>

<p>So now control is inverted... instead of the computer accepting user input in
a fixed order, the user controls the order in which the data is entered, and
when the data is saved in the database.</p>
<p>Basically, <strong>anything</strong> with an event loop, callbacks, or execute triggers
falls into this category.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-check-if-a-variable-is-set-in-bash/" class="u-url">How to check if a variable is set in Bash</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-check-if-a-variable-is-set-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T22:02:53+08:00" itemprop="datePublished" title="2023-02-16 22:02">2023-02-16 22:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I know if a variable is set in Bash?</p>
<p>For example, how do I check if the user gave the first parameter to a
function?</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span>{
<span class="w">    </span>#<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="mh">$1</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span>?
}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h3>(Usually) The right way</h3>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">z</span><span class="w"> </span><span class="o">$</span><span class="p">{</span><span class="k">var</span><span class="o">+</span><span class="n">x</span><span class="p">}</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">"var is unset"</span><span class="p">;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">"var is set to '$var'"</span><span class="p">;</span><span class="w"> </span><span class="n">fi</span>
</pre></div>

<p>where <code>${var+x}</code> is a parameter expansion which evaluates to nothing if <code>var</code>
is unset, and substitutes the string <code>x</code> otherwise.</p>
<h4>Quotes Digression</h4>
<p>Quotes can be omitted (so we can say <code>${var+x}</code> instead of <code>"${var+x}"</code>)
because this syntax &amp; usage guarantees this will only expand to something that
does not require quotes (since it either expands to <code>x</code> (which contains no
word breaks so it needs no quotes), or to nothing (which results in <code>[ -z ]</code>,
which conveniently evaluates to the same value (true) that <code>[ -z "" ]</code> does as
well)).</p>
<p>However, while quotes can be safely omitted, and it was not immediately
obvious to all (it wasn't even apparent to the first author of this quotes
explanation who is also a major Bash coder), it would sometimes be better to
write the solution with quotes as <code>[ -z "${var+x}" ]</code>, at the very small
possible cost of an O(1) speed penalty. The first author also added this as a
comment next to the code using this solution giving the URL to this answer,
which now also includes the explanation for why the quotes can be safely
omitted.</p>
<h3>(Often) The wrong way</h3>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">z</span><span class="w"> </span><span class="s2">"$var"</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">"var is blank"</span><span class="p">;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">"var is set to '$var'"</span><span class="p">;</span><span class="w"> </span><span class="n">fi</span>
</pre></div>

<p>This is often wrong because it doesn't distinguish between a variable that is
unset and a variable that is set to the empty string. That is to say, if
<code>var=''</code>, then the above solution will output "var is blank".</p>
<p>The distinction between unset and "set to the empty string" is essential in
situations where the user has to specify an extension, or additional list of
properties, and that not specifying them defaults to a non-empty value,
whereas specifying the empty string should make the script use an empty
extension or list of additional properties.</p>
<p>The distinction may not be essential in every scenario though. In those cases
<code>[ -z "$var" ]</code> will be just fine.</p>
<p><br></p>
<h3>Suggest</h3>
<p>To check for non-null/non-zero string variable, i.e. if set, use</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">n</span><span class="w"> </span><span class="s2">"$1"</span><span class="w"> </span>]
</pre></div>

<p>It's the opposite of <code>-z</code>. I find myself using <code>-n</code> more than <code>-z</code>.</p>
<p>You would use it like:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span>[<span class="w"> </span><span class="o">-</span><span class="nv">n</span><span class="w"> </span><span class="s2">"$1"</span><span class="w"> </span>]<span class="c1">; then</span>
<span class="w">  </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"You supplied the first parameter!"</span>
<span class="k">else</span>
<span class="w">  </span><span class="nv">echo</span><span class="w"> </span><span class="s2">"First parameter not supplied."</span>
<span class="nv">fi</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-int-value-from-enum-in-c/" class="u-url">Get int value from enum in C#</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-int-value-from-enum-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T22:01:41+08:00" itemprop="datePublished" title="2023-02-16 22:01">2023-02-16 22:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a class called <code>Questions</code> (plural). In this class there is an enum
called <code>Question</code> (singular) which looks like this.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">Question</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Role</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="n">ProjectFunding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="n">TotalEmployee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">    </span><span class="n">NumberOfServers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="n">TopBusinessConcern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span>
<span class="p">}</span>
</pre></div>

<p>In the <code>Questions</code> class I have a <code>get(int foo)</code> function that returns a
<code>Questions</code> object for that <code>foo</code>. Is there an easy way to get the integer
value off the enum so I can do something like this
<code>Questions.Get(Question.Role)</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Just cast the enum, e.g.</p>
<div class="code"><pre class="code literal-block">int something = (int) Question.Role;
</pre></div>

<p>The above will work for the vast majority of enums you see in the wild, as the
default underlying type for an enum is <code>int</code>.</p>
<p>However, as cecilphillip points out, enums can have different underlying
types. If an enum is declared as a <code>uint</code>, <code>long</code>, or <code>ulong</code>, it should be
cast to the type of the enum; e.g. for</p>
<div class="code"><pre class="code literal-block"><span class="k">enum</span><span class="w"> </span><span class="n">StarsInMilkyWay</span><span class="p">:</span><span class="n">long</span><span class="w"> </span><span class="p">{</span><span class="n">Sun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">V645Centauri</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="n">Wolf424B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2147483649</span><span class="p">};</span>
</pre></div>

<p>you should use</p>
<div class="code"><pre class="code literal-block">long something = (long)StarsInMilkyWay.Wolf424B;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Since Enums can be any integral type (<code>byte</code>, <code>int</code>, <code>short</code>, etc.), a more
robust way to get the underlying integral value of the enum would be to make
use of the <code>GetTypeCode</code> method in conjunction with the <code>Convert</code> class:</p>
<div class="code"><pre class="code literal-block"><span class="k">enum</span><span class="w"> </span><span class="n">Sides</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Left</span><span class="p">,</span><span class="w"> </span><span class="n">Right</span><span class="p">,</span><span class="w"> </span><span class="n">Top</span><span class="p">,</span><span class="w"> </span><span class="n">Bottom</span>
<span class="p">}</span>
<span class="n">Sides</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Sides</span><span class="o">.</span><span class="n">Bottom</span><span class="p">;</span>

<span class="n">object</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Convert</span><span class="o">.</span><span class="n">ChangeType</span><span class="p">(</span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="n">side</span><span class="o">.</span><span class="n">GetTypeCode</span><span class="p">());</span>
<span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
</pre></div>

<p>This should work regardless of the underlying integral type.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-124.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-122.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
