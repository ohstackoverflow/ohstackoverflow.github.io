<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1023) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1023.html">
<link rel="prev" href="index-1024.html" type="text/html">
<link rel="next" href="index-1022.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/python-vs-cpython/" class="u-url">Python vs Cpython</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/python-vs-cpython/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:51:27+08:00" itemprop="datePublished" title="2023-02-17 22:51">2023-02-17 22:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What's all this fuss about Python and CPython <em>(Jython,IronPython)</em> , I don't
get it:</p>
<p>python.org mentions that CPython is:</p>
<blockquote>
<p><em>The "traditional" implementation of Python (nicknamed CPython)</em></p>
</blockquote>
<p>yet another Stack Overflow question mentions that:</p>
<blockquote>
<p><em>CPython is the default byte-code interpreter of Python, which is written in
C.</em></p>
</blockquote>
<p>Honestly I don't get what both of those explanations practically mean but what
I thought was that, <em>if I use CPython does that mean when I run a sample
python code, it compiles it to C language and then executes it as if it were C
code</em></p>
<p><strong>So what exactly is CPython and how does it differ when compared with python
and should I probably use CPython over Python and if so what are its
advantages?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<h3>So what is CPython?</h3>
<p>CPython is the <em>original</em> Python implementation. It is the implementation you
download from Python.org. People call it CPython to distinguish it from other,
later, Python implementations, and to distinguish the implementation of the
language engine from the Python <em>programming language</em> itself.</p>
<p>The latter part is where your confusion comes from; you need to keep Python-
the-language separate from whatever <em>runs</em> the Python code.</p>
<p>CPython <em>happens</em> to be implemented in C. That is just an implementation
detail, really. CPython compiles your Python code into bytecode
(transparently) and interprets that bytecode in a evaluation loop.</p>
<p>CPython is also the first to implement new features; Python-the-language
development uses CPython as the base; other implementations follow.</p>
<h3>What about Jython, etc.?</h3>
<p>Jython, IronPython and PyPy are the current "other" implementations of the
Python programming language; these are implemented in Java, C# and RPython (a
subset of Python), respectively. Jython compiles your Python code to <em>Java</em>
bytecode, so your Python code can run on the JVM. IronPython lets you run
Python on the Microsoft CLR. And PyPy, being implemented in (a subset of)
Python, lets you run Python code faster than CPython, which rightly should
blow your mind. :-)</p>
<h3>Actually compiling to C</h3>
<p>So CPython does <strong>not</strong> translate your Python code to C by itself. Instead, it
runs an interpreter loop. There <em>is</em> a project that <em>does</em> translate Python-
ish code to C, and that is called Cython. Cython adds a few extensions to the
Python language, and lets you compile your code to C extensions, code that
plugs <em>into</em> the CPython interpreter.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You need to distinguish between a language and an implementation. Python is a
language,</p>
<p>According to Wikipedia, "A programming language is a notation for writing
programs, which are specifications of a computation or algorithm". This means
that it's simply the rules and syntax for writing code. Separately we have a
programming language implementation which in most cases, is the actual
interpreter or compiler.</p>
<p>Python is a language. CPython is the implementation of Python in C. Jython is
the implementation in Java, and so on.</p>
<p>To sum up: You are already using CPython (if you downloaded from here).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-update-the-current-line-in-a-c-windows-console-app/" class="u-url">How can I update the current line in a C# Windows Console App?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-update-the-current-line-in-a-c-windows-console-app/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:48:53+08:00" itemprop="datePublished" title="2023-02-17 22:48">2023-02-17 22:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When building a Windows Console App in C#, is it possible to write to the
console without having to extend a current line or go to a new line? For
example, if I want to show a percentage representing how close a process is to
completion, I'd just like to update the value on the same line as the cursor,
and not have to put each percentage on a new line.</p>
<p>Can this be done with a "standard" C# console app?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you print only <code>"\r"</code> to the console the cursor goes back to the beginning
of the current line and then you can rewrite it. This should do the trick:</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="c1">; i &lt; 100; ++i)</span>
{
<span class="w">    </span><span class="nv">Console</span>.<span class="nv">Write</span><span class="ss">(</span><span class="s2">"\r{0}%   "</span>,<span class="w"> </span><span class="nv">i</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>Notice the few spaces after the number to make sure that whatever was there
before is erased.<br>
Also notice the use of <code>Write()</code> instead of <code>WriteLine()</code> since you don't want
to add an "\n" at the end of the line.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can use <code>Console.SetCursorPosition</code> to set the position of the cursor and
then write at the current position.</p>
<p>Here is an example showing a simple "spinner":</p>
<div class="code"><pre class="code literal-block"><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">Main</span><span class="p">(</span><span class="n">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">spin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ConsoleSpinner</span><span class="p">();</span>
<span class="w">    </span><span class="n">Console</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s2">"Working...."</span><span class="p">);</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">spin</span><span class="o">.</span><span class="n">Turn</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">ConsoleSpinner</span>
<span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">Turn</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">counter</span><span class="o">++</span><span class="p">;</span><span class="w">        </span>
<span class="w">        </span><span class="n">switch</span><span class="w"> </span><span class="p">(</span><span class="n">counter</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">case</span><span class="w"> </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="n">Console</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s2">"/"</span><span class="p">);</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="n">case</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="n">Console</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s2">"-"</span><span class="p">);</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="n">case</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="n">Console</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s2">"</span><span class="se">\\</span><span class="s2">"</span><span class="p">);</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="n">case</span><span class="w"> </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="n">Console</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="s2">"|"</span><span class="p">);</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">Thread</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="w">        </span><span class="n">Console</span><span class="o">.</span><span class="n">SetCursorPosition</span><span class="p">(</span><span class="n">Console</span><span class="o">.</span><span class="n">CursorLeft</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Console</span><span class="o">.</span><span class="n">CursorTop</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Note that you will have to make sure to overwrite any existing output with new
output or blanks.</p>
<p>Update: As it has been criticized that the example moves the cursor only back
by one character, I will add this for clarification: Using <code>SetCursorPosition</code>
you may set the cursor to any position in the console window.</p>
<div class="code"><pre class="code literal-block">Console.SetCursorPosition(0, Console.CursorTop);
</pre></div>

<p>will set the cursor to the beginning of the current line (or you can use
<code>Console.CursorLeft = 0</code> directly).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/nginx-static-file-serving-confusion-with-root-alias/" class="u-url">Nginx -- static file serving confusion with root &amp; alias</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/nginx-static-file-serving-confusion-with-root-alias/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:48:22+08:00" itemprop="datePublished" title="2023-02-17 22:48">2023-02-17 22:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to serve my app through my app server at <code>8080</code>, and my static files
from a directory without touching the app server.</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="c1"># app server on port 8080</span>
<span class="w">    </span><span class="c1"># nginx listens on port 8123</span>
<span class="w">    </span><span class="n">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">listen</span><span class="w">          </span><span class="mi">8123</span><span class="p">;</span>
<span class="w">            </span><span class="n">access_log</span><span class="w">      </span><span class="n">off</span><span class="p">;</span>

<span class="w">            </span><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="c1"># root /var/www/app/static/;</span>
<span class="w">                    </span><span class="n">alias</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="p">;</span>
<span class="w">                    </span><span class="n">autoindex</span><span class="w"> </span><span class="n">off</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>


<span class="w">            </span><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">proxy_pass</span><span class="w">              </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
<span class="w">                    </span><span class="n">proxy_set_header</span><span class="w">        </span><span class="n">Host</span><span class="w">             </span><span class="o">$</span><span class="n">host</span><span class="p">;</span>
<span class="w">                    </span><span class="n">proxy_set_header</span><span class="w">        </span><span class="n">X</span><span class="o">-</span><span class="n">Real</span><span class="o">-</span><span class="n">IP</span><span class="w">        </span><span class="o">$</span><span class="n">remote_addr</span><span class="p">;</span>
<span class="w">                    </span><span class="n">proxy_set_header</span><span class="w">        </span><span class="n">X</span><span class="o">-</span><span class="n">Forwarded</span><span class="o">-</span><span class="n">For</span><span class="w">  </span><span class="o">$</span><span class="n">proxy_add_x_forwarded_for</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>

<p>Now, with this config, everything is working fine. Note that the <code>root</code>
directive is commented out.</p>
<p>If I activate <code>root</code> and deactivate the <code>alias</code>, it stops working. However,
when I remove the trailing <code>/static/</code> from <code>root</code>, it starts working again.</p>
<p>Can someone explain what's going on?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There is a very important difference between the <code>root</code> and the <code>alias</code>
directives. This difference exists in the way the path specified in the <code>root</code>
or the <code>alias</code> is processed.</p>
<p><code>root</code></p>
<ul>
<li>the <code>location</code> part is appended to <code>root</code> part</li>
<li>final path = <code>root</code> + <code>location</code>
</li>
</ul>
<p><code>alias</code></p>
<ul>
<li>the <code>location</code> part is replaced by the <code>alias</code> part</li>
<li>final path = <code>alias</code>
</li>
</ul>
<p>To illustrate:</p>
<p>Let's say we have the config</p>
<div class="code"><pre class="code literal-block"><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">root</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="p">;</span>
<span class="w">    </span><span class="n">autoindex</span><span class="w"> </span><span class="n">off</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>In this case the final path that Nginx will derive will be</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="k">static</span>
</pre></div>

<p>This is going to return <code>404</code> since there is no <code>static/</code> within <code>static/</code></p>
<p>This is because the location part is appended to the path specified in the
<code>root</code>. Hence, with <code>root</code>, the correct way is</p>
<div class="code"><pre class="code literal-block"><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">root</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="p">;</span>
<span class="w">    </span><span class="n">autoindex</span><span class="w"> </span><span class="n">off</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>On the other hand, with <code>alias</code>, the location part gets <strong>dropped</strong>. So for
the config</p>
<div class="code"><pre class="code literal-block"><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alias</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="p">;</span>
<span class="w">    </span><span class="n">autoindex</span><span class="w"> </span><span class="n">off</span><span class="p">;</span><span class="w">           </span><span class="err">↑</span>
<span class="p">}</span><span class="w">                            </span><span class="o">|</span>
<span class="w">                             </span><span class="n">pay</span><span class="w"> </span><span class="n">attention</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">trailing</span><span class="w"> </span><span class="n">slash</span>
</pre></div>

<p>the final path will correctly be formed as</p>
<div class="code"><pre class="code literal-block"><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="k">static</span>
</pre></div>

<p>In a way this makes sense. The <code>alias</code> just lets you define a new path to
represent an existing "real" path. The location part is that new path, and so
it gets replaced with the real path. Think of it as a symlink.</p>
<p>Root, on the other hand is not a new path, it contains some information that
has to be collated with some other info to make the final path. And so, the
location part is used, not dropped.</p>
<h4><em>The case for trailing slash in<code>alias</code></em></h4>
<p>There is no definitive guideline about whether a trailing slash is mandatory
per Nginx documentation, but a common observation by people here and elsewhere
seems to indicate that it is.</p>
<p>A few more places have discussed this, not conclusively though.</p>
<p>https://serverfault.com/questions/376162/how-can-i-create-a-location-in-nginx-
that-works-with-and-without-a-trailing-slas</p>
<p>https://serverfault.com/questions/375602/why-is-my-nginx-alias-not-working</p>
<p><br></p>
<h3>Suggest</h3>
<p>as say as @treecoder</p>
<blockquote>
<p>In case of the <code>root</code> directive, full path is appended to the root including
the location part, whereas in case of the <code>alias</code> directive, only the
portion of the path NOT including the location part is appended to the
alias.</p>
</blockquote>
<p>A picture is worth a thousand words</p>
<p>for <code>root</code>:</p>
<p><img alt="enter image description here" src="images/vCgqh.png"></p>
<p>for <code>alias</code>:</p>
<p><img alt="enter image description here" src="images/Oahx0.png"></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1024.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1022.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
