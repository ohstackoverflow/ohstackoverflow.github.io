<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 288) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-288.html">
<link rel="prev" href="index-289.html" type="text/html">
<link rel="next" href="index-287.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-drop-rows-of-pandas-dataframe-whose-value-in-a-certain-column-is-nan/" class="u-url">How to drop rows of Pandas DataFrame whose value in a certain column is NaN</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-drop-rows-of-pandas-dataframe-whose-value-in-a-certain-column-is-nan/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:06:00+08:00" itemprop="datePublished" title="2023-02-17 03:06">2023-02-17 03:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have this <code>DataFrame</code> and want only the records whose <code>EPS</code> column is not
<code>NaN</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df
                 STK_ID  EPS  cash
STK_ID RPT_Date                   
601166 20111231  601166  NaN   NaN
600036 20111231  600036  NaN    12
600016 20111231  600016  4.3   NaN
601009 20111231  601009  NaN   NaN
601939 20111231  601939  2.5   NaN
000001 20111231  000001  NaN   NaN
</pre></div>

<p>...i.e. something like <code>df.drop(....)</code> to get this resulting dataframe:</p>
<div class="code"><pre class="code literal-block">                  STK_ID  EPS  cash
STK_ID RPT_Date                   
600016 20111231  600016  4.3   NaN
601939 20111231  601939  2.5   NaN
</pre></div>

<p>How do I do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Don't drop, just take the rows where EPS is not NA:</p>
<div class="code"><pre class="code literal-block">df = df[df['EPS'].notna()]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This question is already resolved, but...</p>
<p>...also consider the solution suggested by Wouter in his original comment. The
ability to handle missing data, including <code>dropna()</code>, is built into pandas
explicitly. Aside from potentially improved performance over doing it
manually, these functions also come with a variety of options which may be
useful.</p>
<div class="code"><pre class="code literal-block"><span class="nv">In</span><span class="w"> </span>[<span class="mi">24</span>]:<span class="w"> </span><span class="nv">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pd</span>.<span class="nv">DataFrame</span><span class="ss">(</span><span class="nv">np</span>.<span class="k">random</span>.<span class="nv">randn</span><span class="ss">(</span><span class="mi">10</span>,<span class="mi">3</span><span class="ss">))</span>

<span class="nv">In</span><span class="w"> </span>[<span class="mi">25</span>]:<span class="w"> </span><span class="nv">df</span>.<span class="nv">iloc</span>[::<span class="mi">2</span>,<span class="mi">0</span>]<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">np</span>.<span class="nv">nan</span><span class="c1">; df.iloc[::4,1] = np.nan; df.iloc[::3,2] = np.nan;</span>

<span class="nv">In</span><span class="w"> </span>[<span class="mi">26</span>]:<span class="w"> </span><span class="nv">df</span>
<span class="nv">Out</span>[<span class="mi">26</span>]:
<span class="w">          </span><span class="mi">0</span><span class="w">         </span><span class="mi">1</span><span class="w">         </span><span class="mi">2</span>
<span class="mi">0</span><span class="w">       </span><span class="nv">NaN</span><span class="w">       </span><span class="nv">NaN</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">1</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">677677</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">466923</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">750366</span>
<span class="mi">2</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">798002</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">906038</span>
<span class="mi">3</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">672201</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">964789</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">4</span><span class="w">       </span><span class="nv">NaN</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">050742</span>
<span class="mi">5</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">250970</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">030561</span><span class="w"> </span><span class="o">-</span><span class="mi">2</span>.<span class="mi">678622</span>
<span class="mi">6</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">036043</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">7</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">049896</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">308003</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">823295</span>
<span class="mi">8</span><span class="w">       </span><span class="nv">NaN</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">637482</span>
<span class="mi">9</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">310130</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">078891</span><span class="w">       </span><span class="nv">NaN</span>
</pre></div>

<hr>
<div class="code"><pre class="code literal-block">In [27]: df.dropna()     #drop all rows that have any NaN values
Out[27]:
          0         1         2
1  2.677677 -1.466923 -0.750366
5 -1.250970  0.030561 -2.678622
7  0.049896 -0.308003  0.823295
</pre></div>

<hr>
<div class="code"><pre class="code literal-block"><span class="nv">In</span><span class="w"> </span>[<span class="mi">28</span>]:<span class="w"> </span><span class="nv">df</span>.<span class="nv">dropna</span><span class="ss">(</span><span class="nv">how</span><span class="o">=</span><span class="s1">'all'</span><span class="ss">)</span><span class="w">     </span>#<span class="nv">drop</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">ALL</span><span class="w"> </span><span class="nv">columns</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">NaN</span>
<span class="nv">Out</span>[<span class="mi">28</span>]:
<span class="w">          </span><span class="mi">0</span><span class="w">         </span><span class="mi">1</span><span class="w">         </span><span class="mi">2</span>
<span class="mi">1</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">677677</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">466923</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">750366</span>
<span class="mi">2</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">798002</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">906038</span>
<span class="mi">3</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">672201</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">964789</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">4</span><span class="w">       </span><span class="nv">NaN</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">050742</span>
<span class="mi">5</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">250970</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">030561</span><span class="w"> </span><span class="o">-</span><span class="mi">2</span>.<span class="mi">678622</span>
<span class="mi">6</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">036043</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">7</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">049896</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">308003</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">823295</span>
<span class="mi">8</span><span class="w">       </span><span class="nv">NaN</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">637482</span>
<span class="mi">9</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">310130</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">078891</span><span class="w">       </span><span class="nv">NaN</span>
</pre></div>

<hr>
<div class="code"><pre class="code literal-block"><span class="nv">In</span><span class="w"> </span>[<span class="mi">29</span>]:<span class="w"> </span><span class="nv">df</span>.<span class="nv">dropna</span><span class="ss">(</span><span class="nv">thresh</span><span class="o">=</span><span class="mi">2</span><span class="ss">)</span><span class="w">   </span>#<span class="nv">Drop</span><span class="w"> </span><span class="nv">row</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="o">**</span><span class="nv">not</span><span class="o">**</span><span class="w"> </span><span class="nv">NaN</span>
<span class="nv">Out</span>[<span class="mi">29</span>]:
<span class="w">          </span><span class="mi">0</span><span class="w">         </span><span class="mi">1</span><span class="w">         </span><span class="mi">2</span>
<span class="mi">1</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">677677</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">466923</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">750366</span>
<span class="mi">2</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">798002</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">906038</span>
<span class="mi">3</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">672201</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">964789</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">5</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">250970</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">030561</span><span class="w"> </span><span class="o">-</span><span class="mi">2</span>.<span class="mi">678622</span>
<span class="mi">7</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">049896</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">308003</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">823295</span>
<span class="mi">9</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">310130</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">078891</span><span class="w">       </span><span class="nv">NaN</span>
</pre></div>

<hr>
<div class="code"><pre class="code literal-block"><span class="nv">In</span><span class="w"> </span>[<span class="mi">30</span>]:<span class="w"> </span><span class="nv">df</span>.<span class="nv">dropna</span><span class="ss">(</span><span class="nv">subset</span><span class="o">=</span>[<span class="mi">1</span>]<span class="ss">)</span><span class="w">   </span>#<span class="nv">Drop</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">NaN</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">specific</span><span class="w"> </span><span class="nv">column</span><span class="w"> </span><span class="ss">(</span><span class="nv">as</span><span class="w"> </span><span class="nv">asked</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">question</span><span class="ss">)</span>
<span class="nv">Out</span>[<span class="mi">30</span>]:
<span class="w">          </span><span class="mi">0</span><span class="w">         </span><span class="mi">1</span><span class="w">         </span><span class="mi">2</span>
<span class="mi">1</span><span class="w">  </span><span class="mi">2</span>.<span class="mi">677677</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">466923</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">750366</span>
<span class="mi">2</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">798002</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">906038</span>
<span class="mi">3</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">672201</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">964789</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">5</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>.<span class="mi">250970</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">030561</span><span class="w"> </span><span class="o">-</span><span class="mi">2</span>.<span class="mi">678622</span>
<span class="mi">6</span><span class="w">       </span><span class="nv">NaN</span><span class="w">  </span><span class="mi">1</span>.<span class="mi">036043</span><span class="w">       </span><span class="nv">NaN</span>
<span class="mi">7</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">049896</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">308003</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">823295</span>
<span class="mi">9</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span>.<span class="mi">310130</span><span class="w">  </span><span class="mi">0</span>.<span class="mi">078891</span><span class="w">       </span><span class="nv">NaN</span>
</pre></div>

<p>There are also other options (See docs at http://pandas.pydata.org/pandas-
docs/stable/generated/pandas.DataFrame.dropna.html), including dropping
columns instead of rows.</p>
<p>Pretty handy!</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/jquery-get-selected-option-from-dropdown/" class="u-url">jQuery Get Selected Option From Dropdown</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/jquery-get-selected-option-from-dropdown/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:05:31+08:00" itemprop="datePublished" title="2023-02-17 03:05">2023-02-17 03:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Usually I use <code>$("#id").val()</code> to return the value of the selected option, but
this time it doesn't work. The selected tag has the id <code>aioConceptName</code></p>
<p><strong>html code</strong></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"name"</span><span class="nt">&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"text"</span><span class="w"> </span><span class="na">name=</span><span class="s">"name"</span><span class="w"> </span><span class="na">id=</span><span class="s">"name"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"aioConceptName"</span><span class="nt">&gt;</span>AIO<span class="w"> </span>Concept<span class="w"> </span>Name<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">"aioConceptName"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option&gt;</span>choose<span class="w"> </span>io<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option&gt;</span>roma<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option&gt;</span>totti<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>For dropdown options you probably want something like this:</p>
<p><strong>For selected text</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">conceptName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'#aioConceptName'</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">();</span>
</pre></div>

<p><strong>For selected value</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">conceptName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'#aioConceptName'</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">)</span><span class="o">.</span><span class="n">val</span><span class="p">();</span>
</pre></div>

<p>The reason <code>val()</code> doesn't do the trick is because clicking an option doesn't
change the value of the dropdown--it just adds the <code>:selected</code> property to the
selected option which is a <em>child</em> of the dropdown.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Set the values for each of the options</strong></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;label</span><span class="w"> </span><span class="na">for=</span><span class="s">"aioConceptName"</span><span class="nt">&gt;</span>AIO<span class="w"> </span>Concept<span class="w"> </span>Name<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">"aioConceptName"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>choose<span class="w"> </span>io<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>roma<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>totti<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>

<p><code>$('#aioConceptName').val()</code> didn't work because <code>.val()</code> returns the <code>value</code>
attribute. To have it work properly, the <code>value</code> attributes must be set on
each <code>&lt;option&gt;</code>.</p>
<p>Now you can call <code>$('#aioConceptName').val()</code> instead of all this <code>:selected</code>
voodoo being suggested by others.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-check-if-element-is-visible-after-scrolling/" class="u-url">How to check if element is visible after scrolling?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-check-if-element-is-visible-after-scrolling/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:05:00+08:00" itemprop="datePublished" title="2023-02-17 03:05">2023-02-17 03:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm loading elements via AJAX. Some of them are only visible if you scroll
down the page. Is there any way I can know if an element is now in the visible
part of the page?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This should do the trick:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="nf">isScrolledIntoView</span><span class="p">(</span>elem<span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="nb">var</span><span class="w"> </span><span class="n">docViewTop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>$<span class="p">(</span><span class="n">window</span><span class="p">).</span><span class="n">scrollTop</span><span class="p">();</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="s">docViewBottom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">docViewTop</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>$<span class="p">(</span><span class="n">window</span><span class="p">).</span><span class="n">height</span><span class="p">();</span>

<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="s">elemTop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>$<span class="p">(</span><span class="n">elem</span><span class="p">).</span><span class="n">offset</span><span class="p">().</span><span class="n">top</span><span class="p">;</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="s">elemBottom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">elemTop</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>$<span class="p">(</span><span class="n">elem</span><span class="p">).</span><span class="n">height</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="n">elemBottom</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">docViewBottom</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">elemTop</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">docViewTop</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>

<p><strong>Simple Utility Function</strong> This will allow you to call a utility function
that accepts the element you're looking for and if you want the element to be
fully in view or partially.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">Utils</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>

<span class="n">Utils</span><span class="o">.</span><span class="n">prototype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">constructor</span><span class="p">:</span><span class="w"> </span><span class="n">Utils</span><span class="p">,</span>
<span class="w">    </span><span class="n">isElementInView</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">element</span><span class="p">,</span><span class="w"> </span><span class="n">fullyInView</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">pageTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="n">window</span><span class="p">)</span><span class="o">.</span><span class="n">scrollTop</span><span class="p">();</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">pageBottom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pageTop</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="n">window</span><span class="p">)</span><span class="o">.</span><span class="n">height</span><span class="p">();</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">elementTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">.</span><span class="n">offset</span><span class="p">()</span><span class="o">.</span><span class="n">top</span><span class="p">;</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">elementBottom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elementTop</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="n">element</span><span class="p">)</span><span class="o">.</span><span class="n">height</span><span class="p">();</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fullyInView</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="n">pageTop</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">elementTop</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">pageBottom</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">elementBottom</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">((</span><span class="n">elementTop</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">pageBottom</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">elementBottom</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">pageTop</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="k">var</span><span class="w"> </span><span class="n">Utils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Utils</span><span class="p">();</span>
</pre></div>

<p><strong>Usage</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">isElementInView</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Utils</span><span class="o">.</span><span class="n">isElementInView</span><span class="p">(</span><span class="o">$</span><span class="p">(</span><span class="s1">'#flyout-left-container'</span><span class="p">),</span><span class="w"> </span><span class="bp">false</span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isElementInView</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'in view'</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'out of view'</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>This answer in Vanilla:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">isScrolledIntoView</span><span class="p">(</span><span class="n">el</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">rect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">el</span><span class="o">.</span><span class="n">getBoundingClientRect</span><span class="p">();</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">elemTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rect</span><span class="o">.</span><span class="n">top</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">elemBottom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rect</span><span class="o">.</span><span class="n">bottom</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Only</span><span class="w"> </span><span class="n">completely</span><span class="w"> </span><span class="n">visible</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">:</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">isVisible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elemTop</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">elemBottom</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">innerHeight</span><span class="p">);</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Partially</span><span class="w"> </span><span class="n">visible</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">:</span>
<span class="w">    </span><span class="o">//</span><span class="n">isVisible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elemTop</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">innerHeight</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">elemBottom</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">isVisible</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-289.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-287.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
