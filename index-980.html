<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 980) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-980.html">
<link rel="prev" href="index-981.html" type="text/html">
<link rel="next" href="index-979.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-purpose-of-wrapping-whole-javascript-files-in-anonymous-functions-like-function/" class="u-url">What is the purpose of wrapping whole Javascript files in anonymous functions like “(function(){ … })()”?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-purpose-of-wrapping-whole-javascript-files-in-anonymous-functions-like-function/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:27:03+08:00" itemprop="datePublished" title="2023-02-17 21:27">2023-02-17 21:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have been reading a lot of Javascript lately and I have been noticing that
the whole file is wrapped like the following in the .js files to be imported.</p>
<div class="code"><pre class="code literal-block">(function() {
    ... 
    code
    ...
})();
</pre></div>

<p>What is the reason for doing this rather than a simple set of constructor
functions?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It's usually to namespace (see later) and control the visibility of member
functions and/or variables. Think of it like an object definition. The
technical name for it is an <strong>Immediately Invoked Function Expression</strong>
(IIFE). jQuery plugins are usually written like this.</p>
<p>In Javascript, you can nest functions. So, the following is legal:</p>
<div class="code"><pre class="code literal-block">function outerFunction() {
   function innerFunction() {
      // code
   }
}
</pre></div>

<p>Now you can call <code>outerFunction()</code>, but the visiblity of <code>innerFunction()</code> is
limited to the scope of <code>outerFunction()</code>, meaning it is private to
<code>outerFunction()</code>. It basically follows the same principle as variables in
Javascript:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">globalVariable</span><span class="p">;</span>

<span class="n">function</span><span class="w"> </span><span class="n">someFunction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">var</span><span class="w"> </span><span class="n">localVariable</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Correspondingly:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">globalFunction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">   </span><span class="k">var</span><span class="w"> </span><span class="n">localFunction1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="o">//</span><span class="n">I</span><span class="s1">'m anonymous! But localFunction1 is a reference to me!</span>
<span class="w">   </span><span class="p">};</span>

<span class="w">   </span><span class="n">function</span><span class="w"> </span><span class="n">localFunction2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="o">//</span><span class="n">I</span><span class="s1">'m named!</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>In the above scenario, you can call <code>globalFunction()</code> from anywhere, but you
cannot call <code>localFunction1</code> or <code>localFunction2</code>.</p>
<p>What you're doing when you write <code>(function() { ... })()</code>, is you're making
the code inside the first set of parentheses a function literal (meaning the
whole "object" is actually a function). After that, you're self-invoking the
function (the final <code>()</code>) that you just defined. So the major advantage of
this as I mentioned before, is that you can have private methods/functions and
properties:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">var</span><span class="w"> </span><span class="n">private_var</span><span class="p">;</span>

<span class="w">   </span><span class="n">function</span><span class="w"> </span><span class="n">private_function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="n">code</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">})();</span>
</pre></div>

<p>In the first example, you would explicitly invoke <code>globalFunction</code> by name to
run it. That is, you would just do <code>globalFunction()</code> to run it. But in the
above example, you're not just defining a function; you're defining <em>and</em>
invoking it in one go. This means that when the your JavaScript file is
loaded, it is immediately executed. Of course, you could do:</p>
<div class="code"><pre class="code literal-block">function globalFunction() {
    // code
}
globalFunction();
</pre></div>

<p>The behavior would largely be the same except for one significant difference:
you avoid polluting the global scope when you use an IIFE (as a consequence it
also means that you cannot invoke the function multiple times since it doesn't
have a name, but since this function is only meant to be executed once it
really isn't an issue).</p>
<p>The neat thing with IIFEs is that you can also define things inside and only
expose the parts that you want to the outside world so (an example of
namespacing so you can basically create your own library/plugin):</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">private_var</span><span class="p">;</span>

<span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">private_function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public_function1</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="n">public_function2</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>
<span class="p">})()</span>
</pre></div>

<p>Now you can call <code>myPlugin.public_function1()</code>, but you cannot access
<code>private_function()</code>! So pretty similar to a class definition. To understand
this better, I recommend the following links for some further reading:</p>
<ul>
<li>Namespacing your Javascript</li>
<li>Private members in Javascript (by Douglas Crockford)</li>
</ul>
<p><strong>EDIT</strong></p>
<p>I forgot to mention. In that final <code>()</code>, you can pass anything you want
inside. For example, when you create jQuery plugins, you pass in <code>jQuery</code> or
<code>$</code> like so:</p>
<div class="code"><pre class="code literal-block">(function(jQ) { ... code ... })(jQuery)
</pre></div>

<p>So what you're doing here is defining a function that takes in one parameter
(called <code>jQ</code>, a local variable, and known <em>only</em> to that function). Then
you're self-invoking the function and passing in a parameter (also called
<code>jQuery</code>, but <em>this</em> one is from the outside world and a reference to the
actual jQuery itself). There is no pressing need to do this, but there are
some advantages:</p>
<ul>
<li>You can redefine a global parameter and give it a name that makes sense in the local scope.</li>
<li>There is a slight performance advantage since it is faster to look things up in the local scope instead of having to walk up the scope chain into the global scope.</li>
<li>There are benefits for compression (minification).</li>
</ul>
<p>Earlier I described how these functions run automatically at startup, but if
they run automatically who is passing in the arguments? This technique assumes
that all the parameters you need are already defined as global variables. So
if jQuery wasn't already defined as a global variable this example would not
work. As you might guess, one things jquery.js does during its initialization
is define a 'jQuery' global variable, as well as its more famous '$' global
variable, which allows this code to work after jQuery has been included.</p>
<p><br></p>
<h3>Suggest</h3>
<h2>In short</h2>
<h3>Summary</h3>
<p>In its simplest form, this technique aims to wrap code inside a <strong>function
scope</strong>.</p>
<p>It helps decreases chances of:</p>
<ul>
<li>clashing with other applications/libraries</li>
<li>polluting superior (global most likely) scope</li>
</ul>
<p>It <strong>does not</strong> detect when the document is ready - it is not some kind of
<code>document.onload</code> nor <code>window.onload</code></p>
<p>It is commonly known as an <code>Immediately Invoked Function Expression (IIFE)</code> or
<code>Self Executing Anonymous Function</code>.</p>
<h3>Code Explained</h3>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">someFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'wagwan!'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>

<span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">                   </span><span class="o">/*</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">starts</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="o">*/</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'start of IIFE'</span><span class="p">);</span>

<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">             </span><span class="o">/*</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">declaration</span><span class="w"> </span><span class="o">*/</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w">  </span><span class="o">/*</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">declaration</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">              </span><span class="o">/*</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">declaration</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">anotherNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherFunc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'end of IIFE'</span><span class="p">);</span>
<span class="p">})();</span><span class="w">                           </span><span class="o">/*</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">ends</span><span class="w"> </span><span class="o">*/</span>

<span class="n">someFunction</span><span class="p">();</span><span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">reachable</span><span class="p">,</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">works</span><span class="p">:</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myFunction</span><span class="p">();</span><span class="w">              </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myObject</span><span class="o">.</span><span class="n">anotherFunc</span><span class="p">();</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
</pre></div>

<p>In the example above, any variable defined in the function (i.e. declared
using <code>var</code>) will be "private" and accessible within the function scope ONLY
(as Vivin Paliath puts it). In other words, these variables are not
visible/reachable outside the function. See live demo.</p>
<p>Javascript has function scoping. "Parameters and variables defined in a
function are not visible outside of the function, and that a variable defined
anywhere within a function is visible everywhere within the function." (from
"Javascript: The Good Parts").</p>
<hr>
<h2>More details</h2>
<h3>Alternative Code</h3>
<p>In the end, the code posted before could also be done as follows:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">someFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'wagwan!'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>

<span class="k">var</span><span class="w"> </span><span class="n">myMainFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'start of IIFE'</span><span class="p">);</span>

<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherFunc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'end of IIFE'</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">myMainFunction</span><span class="p">();</span><span class="w">          </span><span class="o">//</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">CALL</span><span class="w"> </span><span class="s2">"myMainFunction"</span><span class="w"> </span><span class="n">FUNCTION</span><span class="w"> </span><span class="n">HERE</span>
<span class="n">someFunction</span><span class="p">();</span><span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">reachable</span><span class="p">,</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">works</span><span class="p">:</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myFunction</span><span class="p">();</span><span class="w">              </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myObject</span><span class="o">.</span><span class="n">anotherFunc</span><span class="p">();</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
</pre></div>

<p>See live demo.</p>
<hr>
<h3>The Roots</h3>
<h4>Iteration 1</h4>
<p>One day, someone probably thought "there must be a way to avoid naming
'myMainFunction', since all we want is to execute it immediately."</p>
<p>If you go back to the basics, you find out that:</p>
<ul>
<li>
<code>expression</code>: something evaluating to a value. i.e. <code>3+11/x</code>
</li>
<li>
<code>statement</code>: line(s) of code doing something BUT it does <strong>not</strong> evaluate to a value. i.e. <code>if(){}</code>
</li>
</ul>
<p>Similarly, function expressions evaluate to a value. And one consequence (I
assume?) is that they can be immediately invoked:</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">italianSayinSomething</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'mamamia!'</span><span class="p">);</span><span class="w"> </span><span class="p">}();</span>
</pre></div>

<p>So our more complex example becomes:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">someFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'wagwan!'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>

<span class="k">var</span><span class="w"> </span><span class="n">myMainFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'start of IIFE'</span><span class="p">);</span>

<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherFunc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'end of IIFE'</span><span class="p">);</span>
<span class="p">}();</span>

<span class="n">someFunction</span><span class="p">();</span><span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">reachable</span><span class="p">,</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">works</span><span class="p">:</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myFunction</span><span class="p">();</span><span class="w">              </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myObject</span><span class="o">.</span><span class="n">anotherFunc</span><span class="p">();</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
</pre></div>

<p>See live demo.</p>
<h4>Iteration 2</h4>
<p>The next step is the thought "why have <code>var myMainFunction =</code> if we don't even
use it!?".</p>
<p>The answer is simple: try removing this, such as below:</p>
<div class="code"><pre class="code literal-block"> function(){ console.log('mamamia!'); }();
</pre></div>

<p>See live demo.</p>
<p>It won't work because <strong>"function declarations are not invokable"</strong>.</p>
<p>The trick is that by removing <code>var myMainFunction =</code> we transformed the
<strong>function expression</strong> into a <strong>function declaration</strong>. See the links in
"Resources" for more details on this.</p>
<p>The next question is "why can't I keep it as a function expression with
something other than <code>var myMainFunction =</code>?</p>
<p>The answer is "you can", and there are actually many ways you could do this:
adding a <code>+</code>, a <code>!</code>, a <code>-</code>, or maybe wrapping in a pair of parenthesis (as
it's now done by convention), and more I believe. As example:</p>
<div class="code"><pre class="code literal-block"> (function(){ console.log('mamamia!'); })(); // live demo: jsbin.com/zokuwodoco/1/edit?js,console.
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"> +function(){ console.log('mamamia!'); }(); // live demo: jsbin.com/wuwipiyazi/1/edit?js,console
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"> -function(){ console.log('mamamia!'); }(); // live demo: jsbin.com/wejupaheva/1/edit?js,console
</pre></div>

<ul>
<li>What does the exclamation mark do before the function?</li>
<li>JavaScript plus sign in front of function name</li>
</ul>
<p>So once the relevant modification is added to what was once our "Alternative
Code", we return to the exact same code as the one used in the "Code
Explained" example</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">someFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'wagwan!'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>

<span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'start of IIFE'</span><span class="p">);</span>

<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherFunc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'end of IIFE'</span><span class="p">);</span>
<span class="p">})();</span>

<span class="n">someFunction</span><span class="p">();</span><span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">reachable</span><span class="p">,</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">works</span><span class="p">:</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myFunction</span><span class="p">();</span><span class="w">              </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">myObject</span><span class="o">.</span><span class="n">anotherFunc</span><span class="p">();</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
</pre></div>

<p>Read more about <code>Expressions vs Statements</code>:</p>
<ul>
<li>developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators</li>
<li>developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions#Function_constructor_vs._function_declaration_vs._function_expression</li>
<li>Javascript: difference between a statement and an expression?</li>
<li>Expression Versus Statement</li>
</ul>
<hr>
<h3>Demystifying Scopes</h3>
<p>One thing one might wonder is "what happens when you do NOT define the
variable 'properly' inside the function -- i.e. do a simple assignment
instead?"</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">             </span><span class="o">/*</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">declaration</span><span class="w"> </span><span class="o">*/</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w">  </span><span class="o">/*</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">declaration</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">myObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">              </span><span class="o">/*</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">declaration</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">anotherNumber</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">anotherFunc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'formidable!'</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="n">myOtherFunction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(){</span><span class="w">  </span><span class="o">/*</span><span class="w"> </span><span class="n">oops</span><span class="p">,</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">assignment</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">declaration</span><span class="w"> </span><span class="o">*/</span>
<span class="w">    </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">'haha. got ya!'</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">})();</span>
<span class="n">myOtherFunction</span><span class="p">();</span><span class="w">         </span><span class="o">//</span><span class="w"> </span><span class="n">reachable</span><span class="p">,</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="n">works</span><span class="p">:</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
<span class="n">window</span><span class="o">.</span><span class="n">myOtherFunction</span><span class="p">();</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">works</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">browser</span><span class="p">,</span><span class="w"> </span><span class="n">myOtherFunction</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">then</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">global</span><span class="w"> </span><span class="n">scope</span>
<span class="n">myFunction</span><span class="p">();</span><span class="w">              </span><span class="o">//</span><span class="w"> </span><span class="n">unreachable</span><span class="p">,</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">console</span>
</pre></div>

<p>See live demo.</p>
<p>Basically, if a variable that was not declared in its current scope is
assigned a value, then "a look up the scope chain occurs until it finds the
variable or hits the global scope (at which point it will create it)".</p>
<p>When in a browser environment (vs a server environment like nodejs) the global
scope is defined by the <code>window</code> object. Hence we can do
<code>window.myOtherFunction()</code>.</p>
<p>My "Good practices" tip on this topic is to <strong>always use<code>var</code> when defining
anything</strong>: whether it's a number, object or function, &amp; even when in the
global scope. This makes the code much simpler.</p>
<p>Note:</p>
<ul>
<li>javascript does <strong>not</strong> have <code>block scope</code> (Update: block scope local variables added in ES6.)</li>
<li>javascript has only <code>function scope</code> &amp; <code>global scope</code> (<code>window</code> scope in a browser environment)</li>
</ul>
<p>Read more about <code>Javascript Scopes</code>:</p>
<ul>
<li>What is the purpose of the var keyword and when to use it (or omit it)?</li>
<li>What is the scope of variables in JavaScript?</li>
</ul>
<hr>
<h2>Resources</h2>
<ul>
<li>youtu.be/i_qE1iAmjFg?t=2m15s - Paul Irish presents the IIFE at min 2:15, do watch this!</li>
<li>developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions</li>
<li>Book: Javascript, the good parts - highly recommended</li>
<li>youtu.be/i_qE1iAmjFg?t=4m36s - Paul Irish presents the module pattern at 4:36</li>
</ul>
<hr>
<h2>Next Steps</h2>
<p>Once you get this <code>IIFE</code> concept, it leads to the <code>module pattern</code>, which is
commonly done by leveraging this IIFE pattern. Have fun :)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-prevent-auto-closing-of-console-after-the-execution-of-batch-file/" class="u-url">How to prevent auto-closing of console after the execution of batch file</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-prevent-auto-closing-of-console-after-the-execution-of-batch-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:26:28+08:00" itemprop="datePublished" title="2023-02-17 21:26">2023-02-17 21:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What command can I put at the end of a batch file to prevent auto-closing of
the console after the execution of the file?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In Windows/DOS batch files:</p>
<div class="code"><pre class="code literal-block"><span class="k">pause</span>
</pre></div>

<p>This prints a nice <code>"Press any key to continue . . . "</code> message</p>
<p>Or, if you don't want the <code>"Press any key to continue . . ."</code> message, do this
instead:</p>
<div class="code"><pre class="code literal-block"><span class="k">pause</span><span class="w"> </span><span class="o">&gt;</span><span class="nv">nul</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Depends on the exact question!</p>
<p>Normally <code>pause</code> does the job within a <strong>.bat</strong> file.</p>
<p>If you want <strong>cmd.exe</strong> not to close to be able to remain typing, use <code>cmd /k</code>
command at the end of the file.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-pageradapter-notifydatasetchanged-is-not-updating-the-view/" class="u-url">Why `PagerAdapter::notifyDataSetChanged` is not updating the View?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-pageradapter-notifydatasetchanged-is-not-updating-the-view/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:25:49+08:00" itemprop="datePublished" title="2023-02-17 21:25">2023-02-17 21:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using the ViewPager from the compatibility library. I have succussfully
got it displaying several views which I can page through.</p>
<p>However, I'm having a hard time figuring out how to update the ViewPager with
a new set of Views.</p>
<p>I've tried all sorts of things like calling <code>mAdapter.notifyDataSetChanged()</code>,
<code>mViewPager.invalidate()</code> even creating a brand new adapter each time I want
to use a new List of data.</p>
<p>Nothing has helped, the textviews remain unchanged from the original data.</p>
<p><strong>Update:</strong> I made a little test project and I've almost been able to update
the views. I'll paste the class below.</p>
<p>What doesn't appear to update however is the 2nd view, the 'B' remains, it
should display 'Y' after pressing the update button.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">ViewPagerBugActivity</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Activity</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">ViewPager</span><span class="w"> </span><span class="n">myViewPager</span><span class="p">;</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>

<span class="w">    </span><span class="err">@</span><span class="n">Override</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span><span class="w"> </span><span class="n">savedInstanceState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>
<span class="w">        </span><span class="n">setContentView</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">main</span><span class="p">);</span>

<span class="w">        </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">        </span><span class="n">data</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">"A"</span><span class="p">);</span>
<span class="w">        </span><span class="n">data</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">"B"</span><span class="p">);</span>
<span class="w">        </span><span class="n">data</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">"C"</span><span class="p">);</span>

<span class="w">        </span><span class="n">myViewPager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ViewPager</span><span class="p">)</span><span class="w"> </span><span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">my_view_pager</span><span class="p">);</span>
<span class="w">        </span><span class="n">myViewPager</span><span class="o">.</span><span class="n">setAdapter</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">MyViewPagerAdapter</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">));</span>

<span class="w">        </span><span class="n">Button</span><span class="w"> </span><span class="n">updateButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Button</span><span class="p">)</span><span class="w"> </span><span class="n">findViewById</span><span class="p">(</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">update_button</span><span class="p">);</span>
<span class="w">        </span><span class="n">updateButton</span><span class="o">.</span><span class="n">setOnClickListener</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">OnClickListener</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">            </span><span class="err">@</span><span class="n">Override</span>
<span class="w">            </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">onClick</span><span class="p">(</span><span class="n">View</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">updateViewPager</span><span class="p">();</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">updateViewPager</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">data</span><span class="o">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">        </span><span class="n">data</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">"X"</span><span class="p">);</span>
<span class="w">        </span><span class="n">data</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">"Y"</span><span class="p">);</span>
<span class="w">        </span><span class="n">data</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">"Z"</span><span class="p">);</span>
<span class="w">        </span><span class="n">myViewPager</span><span class="o">.</span><span class="n">getAdapter</span><span class="p">()</span><span class="o">.</span><span class="n">notifyDataSetChanged</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyViewPagerAdapter</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">PagerAdapter</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">        </span><span class="n">private</span><span class="w"> </span><span class="n">Context</span><span class="w"> </span><span class="n">ctx</span><span class="p">;</span>

<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="n">MyViewPagerAdapter</span><span class="p">(</span><span class="n">Context</span><span class="w"> </span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">;</span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">getCount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="n">size</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">instantiateItem</span><span class="p">(</span><span class="n">View</span><span class="w"> </span><span class="n">collection</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">position</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">TextView</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">TextView</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
<span class="w">            </span><span class="n">view</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">position</span><span class="p">));</span>
<span class="w">            </span><span class="p">((</span><span class="n">ViewPager</span><span class="p">)</span><span class="n">collection</span><span class="p">)</span><span class="o">.</span><span class="n">addView</span><span class="p">(</span><span class="n">view</span><span class="p">);</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">view</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">destroyItem</span><span class="p">(</span><span class="n">View</span><span class="w"> </span><span class="n">collection</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">view</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">             </span><span class="p">((</span><span class="n">ViewPager</span><span class="p">)</span><span class="w"> </span><span class="n">collection</span><span class="p">)</span><span class="o">.</span><span class="n">removeView</span><span class="p">((</span><span class="n">View</span><span class="p">)</span><span class="w"> </span><span class="n">view</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="n">isViewFromObject</span><span class="p">(</span><span class="n">View</span><span class="w"> </span><span class="n">view</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="w"> </span><span class="n">object</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">object</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="n">Parcelable</span><span class="w"> </span><span class="n">saveState</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">restoreState</span><span class="p">(</span><span class="n">Parcelable</span><span class="w"> </span><span class="n">arg0</span><span class="p">,</span><span class="w"> </span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">arg1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">startUpdate</span><span class="p">(</span><span class="n">View</span><span class="w"> </span><span class="n">arg0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="err">@</span><span class="n">Override</span>
<span class="w">        </span><span class="n">public</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">finishUpdate</span><span class="p">(</span><span class="n">View</span><span class="w"> </span><span class="n">arg0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>There are several ways to achieve this.</p>
<p>The first option is easier, but bit more inefficient.</p>
<p>Override <code>getItemPosition</code> in your <code>PagerAdapter</code> like this:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">int</span><span class="w"> </span><span class="nv">getItemPosition</span><span class="ss">(</span><span class="nv">Object</span><span class="w"> </span><span class="nv">object</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">POSITION_NONE</span><span class="c1">;</span>
}
</pre></div>

<p>This way, when you call <code>notifyDataSetChanged()</code>, the view pager will remove
all views and reload them all. As so the reload effect is obtained.</p>
<p>The second option, suggested by Alvaro Luis Bustamante (previously alvarolb),
is to <code>setTag()</code> method in <code>instantiateItem()</code> when instantiating a new view.
Then instead of using <code>notifyDataSetChanged()</code>, you can use
<code>findViewWithTag()</code> to find the view you want to update.</p>
<h3>Conclusion</h3>
<p>If you have a lot of views, or want to support modifying any specific item
and/or view (fastly at any time), then the second approach (tagging) is very
flexible and high performant, as it prevents recreating all the <strong>not</strong>
modified views.<br>
(Kudos to alvarolb for the original research.)</p>
<p>But if your App has only a "refresh" feature (without single item changes
being even allowed), or has just few items, use the first approach, as it
saves development time.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I don't think there is any kind of bug in the <code>PagerAdapter</code>. The problem is
that understanding how it works is a little complex. Looking at the solutions
explained here, there is a misunderstanding and therefore a poor usage of
instantiated views from my point of view.</p>
<p>The last few days I have been working with <code>PagerAdapter</code> and <code>ViewPager</code>, and
I found the following:</p>
<p>The <code>notifyDataSetChanged()</code> method on the <code>PagerAdapter</code> will only notify the
<code>ViewPager</code> that the underlying pages have changed. For example, if you have
created/deleted pages dynamically (adding or removing items from your list)
the <code>ViewPager</code> should take care of that. In this case I think that the
<code>ViewPager</code> determines if a new view should be deleted or instantiated using
the <code>getItemPosition()</code> and <code>getCount()</code> methods.</p>
<p>I think that <code>ViewPager</code>, after a <code>notifyDataSetChanged()</code> call takes it's
child views and checks their position with the <code>getItemPosition()</code>. If for a
child view this method returns <code>POSITION_NONE</code>, the <code>ViewPager</code> understands
that the view has been deleted, calling the <code>destroyItem()</code>, and removing this
view.</p>
<p>In this way, overriding <code>getItemPosition()</code> to always return <code>POSITION_NONE</code>
is completely wrong if you only want to update the content of the pages,
because the previously created views will be destroyed and new ones will be
created every time you call <code>notifyDatasetChanged()</code>. It may seem to be not so
wrong just for a few <code>TextView</code>s, but when you have complex views, like
ListViews populated from a database, this can be a real problem and a waste of
resources.</p>
<p>So there are several approaches to efficiently change the content of a view
without having to remove and instantiate the view again. It depends on the
problem you want to solve. <strong>My approach is to use the<code>setTag()</code> method for
any instantiated view in the <code>instantiateItem()</code> method. So when you want to
change the data or invalidate the view that you need, you can call the
<code>findViewWithTag()</code> method on the <code>ViewPager</code> to retrieve the previously
instantiated view and modify/use it as you want without having to
delete/create a new view each time you want to update some value.</strong></p>
<p>Imagine for example that you have 100 pages with 100 <code>TextView</code>s and you only
want to update one value periodically. With the approaches explained before,
this means you are removing and instantiating 100 <code>TextView</code>s on each update.
It does not make sense...</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-981.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-979.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
