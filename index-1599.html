<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1599) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1599.html">
<link rel="prev" href="index-1600.html" type="text/html">
<link rel="next" href="index-1598.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-does-this-go-into-an-infinite-loop/" class="u-url">Why does this go into an infinite loop?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-does-this-go-into-an-infinite-loop/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:52:04+08:00" itemprop="datePublished" title="2023-03-03 04:52">2023-03-03 04:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have the following code:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">Tests</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">public</span><span class="w"> </span><span class="nv">static</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">main</span><span class="ss">(</span><span class="nv">String</span>[]<span class="w"> </span><span class="nv">args</span><span class="ss">)</span><span class="w"> </span><span class="nv">throws</span><span class="w"> </span><span class="nv">Exception</span><span class="w"> </span>{
<span class="w">        </span><span class="nv">int</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
<span class="w">        </span><span class="k">while</span><span class="ss">(</span><span class="nv">x</span><span class="o">&lt;</span><span class="mi">3</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">            </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">x</span><span class="o">++</span><span class="c1">;</span>
<span class="w">            </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">        </span>}
<span class="w">    </span>}
}
</pre></div>

<p>We know he should have writen just <code>x++</code> or <code>x=x+1</code>, but on <code>x = x++</code> it
should first attribute <code>x</code> to itself, and later increment it. Why does <code>x</code>
continue with <code>0</code> as value?</p>
<p><strong>--update</strong></p>
<p>Here's the bytecode:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Tests</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">Object</span><span class="p">{</span>
<span class="n">public</span><span class="w"> </span><span class="n">Tests</span><span class="p">();</span>
<span class="w">  </span><span class="n">Code</span><span class="p">:</span>
<span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="w">   </span><span class="n">aload_0</span>
<span class="w">   </span><span class="mi">1</span><span class="p">:</span><span class="w">   </span><span class="n">invokespecial</span><span class="w">   </span><span class="c1">#1; //Method java/lang/Object."&lt;init&gt;":()V</span>
<span class="w">   </span><span class="mi">4</span><span class="p">:</span><span class="w">   </span><span class="k">return</span>

<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="n">java</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">String</span><span class="p">[])</span><span class="w">   </span><span class="n">throws</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">Exception</span><span class="p">;</span>
<span class="w">  </span><span class="n">Code</span><span class="p">:</span>
<span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="w">   </span><span class="n">iconst_0</span>
<span class="w">   </span><span class="mi">1</span><span class="p">:</span><span class="w">   </span><span class="n">istore_1</span>
<span class="w">   </span><span class="mi">2</span><span class="p">:</span><span class="w">   </span><span class="n">iload_1</span>
<span class="w">   </span><span class="mi">3</span><span class="p">:</span><span class="w">   </span><span class="n">iconst_3</span>
<span class="w">   </span><span class="mi">4</span><span class="p">:</span><span class="w">   </span><span class="n">if_icmpge</span><span class="w">   </span><span class="mi">22</span>
<span class="w">   </span><span class="mi">7</span><span class="p">:</span><span class="w">   </span><span class="n">iload_1</span>
<span class="w">   </span><span class="mi">8</span><span class="p">:</span><span class="w">   </span><span class="n">iinc</span><span class="w">    </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
<span class="w">   </span><span class="mi">11</span><span class="p">:</span><span class="w">  </span><span class="n">istore_1</span>
<span class="w">   </span><span class="mi">12</span><span class="p">:</span><span class="w">  </span><span class="n">getstatic</span><span class="w">   </span><span class="c1">#2; //Field java/lang/System.out:Ljava/io/PrintStream;</span>
<span class="w">   </span><span class="mi">15</span><span class="p">:</span><span class="w">  </span><span class="n">iload_1</span>
<span class="w">   </span><span class="mi">16</span><span class="p">:</span><span class="w">  </span><span class="n">invokevirtual</span><span class="w">   </span><span class="c1">#3; //Method java/io/PrintStream.println:(I)V</span>
<span class="w">   </span><span class="mi">19</span><span class="p">:</span><span class="w">  </span><span class="n">goto</span><span class="w">    </span><span class="mi">2</span>
<span class="w">   </span><span class="mi">22</span><span class="p">:</span><span class="w">  </span><span class="k">return</span>

<span class="p">}</span>
</pre></div>

<p>I'll read about the instructions to try to understand...</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Note</strong> : Originally I posted C# code in this answer for purposes of
illustration, since C# allows you to pass <code>int</code> parameters by reference with
the <code>ref</code> keyword. I've decided to update it with actual legal Java code using
the first <code>MutableInt</code> class I found on Google to sort of approximate what
<code>ref</code> does in C#. I can't really tell if that helps or hurts the answer. I
will say that I personally haven't done all that much Java development; so for
all I know there could be much more idiomatic ways to illustrate this point.</p>
<hr>
<p>Perhaps if we write out a method to do the equivalent of what <code>x++</code> does it
will make this clearer.</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">MutableInt</span><span class="w"> </span><span class="nv">postIncrement</span><span class="ss">(</span><span class="nv">MutableInt</span><span class="w"> </span><span class="nv">x</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">int</span><span class="w"> </span><span class="nv">valueBeforeIncrement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">x</span>.<span class="nv">intValue</span><span class="ss">()</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">x</span>.<span class="nv">add</span><span class="ss">(</span><span class="mi">1</span><span class="ss">)</span><span class="c1">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">MutableInt</span><span class="ss">(</span><span class="nv">valueBeforeIncrement</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>Right? Increment the value passed and return the original value: that's the
definition of the postincrement operator.</p>
<p>Now, let's see how this behavior plays out in your example code:</p>
<div class="code"><pre class="code literal-block">MutableInt x = new MutableInt();
x = postIncrement(x);
</pre></div>

<p><code>postIncrement(x)</code> does what? Increments <code>x</code>, yes. And then <strong>returns what<code>x</code>
<em>was</em> before the increment</strong>. This return value then gets assigned to <code>x</code>.</p>
<p>So the order of values assigned to <code>x</code> is 0, then 1, then 0.</p>
<p>This might be clearer still if we re-write the above:</p>
<div class="code"><pre class="code literal-block">MutableInt x = new MutableInt();    // x is 0.
MutableInt temp = postIncrement(x); // Now x is 1, and temp is 0.
x = temp;                           // Now x is 0 again.
</pre></div>

<p>Your fixation on the fact that when you replace <code>x</code> on the left side of the
above assignment with <code>y</code>, "you can see that it first increments x, and later
attributes it to y" strikes me as confused. It is not <code>x</code> that is being
assigned to <code>y</code>; it is <strong>the value formerly assigned to<code>x</code></strong>. Really,
injecting <code>y</code> makes things no different from the scenario above; we've simply
got:</p>
<div class="code"><pre class="code literal-block">MutableInt x = new MutableInt();    // x is 0.
MutableInt y = new MutableInt();    // y is 0.
MutableInt temp = postIncrement(x); // Now x is 1, and temp is 0.
y = temp;                           // y is still 0.
</pre></div>

<p>So it's clear: <code>x = x++</code> effectively does not change the value of x. It always
causes x to have the values x0, then x0 + 1, and then x0 again.</p>
<hr>
<p><strong>Update</strong> : Incidentally, lest you doubt that <code>x</code> ever gets assigned to 1
"between" the increment operation and the assignment in the example above,
I've thrown together a quick demo to illustrate that this intermediate value
does indeed "exist," though it will never be "seen" on the executing thread.</p>
<p>The demo calls <code>x = x++;</code> in a loop while a separate thread continuously
prints the value of <code>x</code> to the console.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">volatile</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nb nb-Type">String</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">LoopingThread</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">LoopingThread</span><span class="p">();</span>
<span class="w">        </span><span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"Starting background thread..."</span><span class="p">);</span>
<span class="w">        </span><span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>

<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="n">LoopingThread</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Thread</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="err">@</span><span class="n">Override</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="bp">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">Main</span><span class="o">.</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Below is an excerpt of the above program's output. Notice the irregular
occurrence of both 1s and 0s.</p>
<div class="code"><pre class="code literal-block">Starting background thread...
0
0
1
1
0
0
0
0
0
0
0
0
0
0
1
0
1
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><code>x = x++</code> works in the following way:</p>
<ul>
<li>First it evaluates expression <code>x++</code>. Evaluation of this expression produces an expression value (which is the value of <code>x</code> before increment) and increments <code>x</code>.</li>
<li>Later it assigns the expression value to <code>x</code>, overwriting incremented value.</li>
</ul>
<p>So, the sequence of events looks like follows (it's an actual decompiled
bytecode, as produced by <code>javap -c</code>, with my comments):</p>
<div class="code"><pre class="code literal-block"><span class="w">   </span><span class="mi">8</span><span class="p">:</span><span class="w">   </span><span class="n">iload_1</span><span class="w">         </span><span class="o">//</span><span class="w"> </span><span class="n">Remember</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span>
<span class="w">   </span><span class="mi">9</span><span class="p">:</span><span class="w">   </span><span class="n">iinc</span><span class="w">    </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Increment</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">(</span><span class="n">doesn</span><span class="s1">'t change the stack)</span>
<span class="w">   </span><span class="mi">12</span><span class="p">:</span><span class="w">  </span><span class="n">istore_1</span><span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Write</span><span class="w"> </span><span class="n">remebered</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">x</span>
</pre></div>

<p>For comparison, <code>x = ++x</code>:</p>
<div class="code"><pre class="code literal-block"><span class="w">   </span><span class="mi">8</span><span class="p">:</span><span class="w">   </span><span class="n">iinc</span><span class="w">    </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Increment</span><span class="w"> </span><span class="n">x</span>
<span class="w">   </span><span class="mi">11</span><span class="p">:</span><span class="w">  </span><span class="n">iload_1</span><span class="w">         </span><span class="o">//</span><span class="w"> </span><span class="n">Push</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">onto</span><span class="w"> </span><span class="n">stack</span>
<span class="w">   </span><span class="mi">12</span><span class="p">:</span><span class="w">  </span><span class="n">istore_1</span><span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Pop</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">x</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/400-vs-422-response-to-post-of-data/" class="u-url">400 vs 422 response to POST of data</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/400-vs-422-response-to-post-of-data/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:51:39+08:00" itemprop="datePublished" title="2023-03-03 04:51">2023-03-03 04:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to figure out what the correct status code to return on different
scenarios with a "REST-like" API that I'm working on. Let's say I have an end
point that allows POST'ing purchases in JSON format. It looks like this:</p>
<div class="code"><pre class="code literal-block">{
    "account_number": 45645511,
    "upc": "00490000486",
    "price": 1.00,
    "tax": 0.08
}
</pre></div>

<p>What should I return if the client sends me "sales_tax" (instead of the
expected "tax"). Currently, I'm returning a 400. But, I've started questioning
myself on this. Should I really be returning a 422? I mean, it's JSON (which
is supported) and it's valid JSON, it's just doesn't contain all of the
required fields.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>400 Bad Request</strong> would now seem to be the best HTTP/1.1 status code for
your use case.</p>
<p><strong>At the time of your question</strong> (and my original answer), RFC 7231 was not a
thing; at which point I objected to <code>400 Bad Request</code> because RFC 2616 said
(with emphasis mine):</p>
<blockquote>
<p>The request could not be understood by the server <strong>due to malformed
syntax</strong>.</p>
</blockquote>
<p>and the request you describe is syntactically valid JSON encased in
syntactically valid HTTP, and thus the server has no issues with the
<strong>syntax</strong> of the request.</p>
<p><strong>However</strong> as pointed out by Lee Saferite in the comments, RFC 7231, which
obsoletes RFC 2616, does not include that restriction:</p>
<blockquote>
<p>The 400 (Bad Request) status code indicates that the server cannot or will
not process the request due to something that is perceived to be a client
error (e.g., malformed request syntax, invalid request message framing, or
deceptive request routing).</p>
</blockquote>
<hr>
<p>However, <strong>prior to that re-wording</strong> (or if you want to quibble about RFC
7231 only being a <em>proposed</em> standard right now), <code>422 Unprocessable Entity</code>
does not seem an <em>incorrect</em> HTTP status code for your use case, because as
the introduction to RFC 4918 says:</p>
<blockquote>
<p>While the status codes provided by HTTP/1.1 are sufficient to describe most
error conditions encountered by WebDAV methods, there are some errors that
do not fall neatly into the existing categories. This specification defines
extra status codes developed for WebDAV methods (Section 11)</p>
</blockquote>
<p>And the description of <code>422</code> says:</p>
<blockquote>
<p>The 422 (Unprocessable Entity) status code means the server understands the
content type of the request entity (hence a 415(Unsupported Media Type)
status code is inappropriate), and the syntax of the request entity is
correct (thus a 400 (Bad Request) status code is inappropriate) but was
unable to process the contained instructions.</p>
</blockquote>
<p>(Note the reference to syntax; I suspect 7231 partly obsoletes 4918 too)</p>
<p>This sounds <em>exactly</em> like your situation, but just in case there was any
doubt, it goes on to say:</p>
<blockquote>
<p>For example, this error condition may occur if an XML request body contains
well-formed (i.e., syntactically correct), but semantically erroneous, XML
instructions.</p>
</blockquote>
<p>(Replace "XML" with "JSON" and I think we can agree that's your situation)</p>
<p>Now, some will object that RFC 4918 is about "HTTP Extensions for Web
Distributed Authoring and Versioning (WebDAV)" and that you (presumably) are
doing nothing involving WebDAV so shouldn't use things from it.</p>
<p>Given the choice between using an error code in the original standard that
explicitly doesn't cover the situation, and one from an extension that
describes the situation exactly, I would choose the latter.</p>
<p>Furthermore, RFC 4918 Section 21.4 refers to the IANA Hypertext Transfer
Protocol (HTTP) Status Code Registry, where 422 can be found.</p>
<p>I propose that it is totally reasonable for an HTTP client or server to use
any status code from that registry, so long as they do so correctly.</p>
<hr>
<p>But as of HTTP/1.1, RFC 7231 has traction, so just use <code>400 Bad Request</code>!</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Case study: GitHub API</strong></p>
<p>https://docs.github.com/en/rest/overview/resources-in-the-rest-api#client-
errors</p>
<p>Maybe copying from well known APIs is a wise idea:</p>
<blockquote>
<p>There are three possible types of client errors on API calls that receive
request bodies:</p>
<p>Sending invalid JSON will result in a 400 Bad Request response:</p>
<div class="code"><pre class="code literal-block">HTTP/1.1 400 Bad Request
Content-Length: 35
{"message":"Problems parsing JSON"}
</pre></div>

<p>Sending the wrong type of JSON values will result in a 400 Bad Request
response:</p>
<div class="code"><pre class="code literal-block">HTTP/1.1 400 Bad Request
Content-Length: 40

{"message":"Body should be a JSON object"}
</pre></div>

<p>Sending invalid fields will result in a 422 Unprocessable Entity response:</p>
<div class="code"><pre class="code literal-block">HTTP/1.1 422 Unprocessable Entity
Content-Length: 149

{
  "message": "Validation Failed",
  "errors": [
    {
      "resource": "Issue",
      "field": "title",
      "code": "missing_field"
    }
  ]
}
</pre></div>

</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-unit-test-private-methods/" class="u-url">How do you unit test private methods?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-unit-test-private-methods/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T04:51:11+08:00" itemprop="datePublished" title="2023-03-03 04:51">2023-03-03 04:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm building a class library that will have some public &amp; private methods. I
want to be able to unit test the private methods (mostly while developing, but
also it could be useful for future refactoring).</p>
<p>What is the correct way to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you are using .net, you should use the InternalsVisibleToAttribute.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If you are using .net, you should use the InternalsVisibleToAttribute.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1600.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1598.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
