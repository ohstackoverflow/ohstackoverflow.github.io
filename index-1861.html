<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1861) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1861.html">
<link rel="prev" href="index-1862.html" type="text/html">
<link rel="next" href="index-1860.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-check-if-current-thread-is-not-main-thread/" class="u-url">How to check if current thread is not main thread</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-check-if-current-thread-is-not-main-thread/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:06:51+08:00" itemprop="datePublished" title="2023-03-03 11:06">2023-03-03 11:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to check if the thread running a certain piece of code is the main (UI)
thread or not. How can I achieve this?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">Looper.myLooper() == Looper.getMainLooper()
</pre></div>

<p>if this returns true, then you're on the UI thread!</p>
<p><br></p>
<h3>Suggest</h3>
<p>you can use below code to know if current thread is UI/Main thread or not</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">(</span><span class="nv">Looper</span>.<span class="nv">myLooper</span><span class="ss">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">Looper</span>.<span class="nv">getMainLooper</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="nv">Current</span><span class="w"> </span><span class="nv">Thread</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">Main</span><span class="w"> </span><span class="nv">Thread</span>.
}
</pre></div>

<p>or you can also use this</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">(</span><span class="nv">Looper</span>.<span class="nv">getMainLooper</span><span class="ss">()</span>.<span class="nv">getThread</span><span class="ss">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">Thread</span>.<span class="nv">currentThread</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="nv">Current</span><span class="w"> </span><span class="nv">Thread</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">Main</span><span class="w"> </span><span class="nv">Thread</span>.
}
</pre></div>

<p>Here is similar question</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/generating-an-md5-checksum-of-a-file/" class="u-url">Generating an MD5 checksum of a file</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/generating-an-md5-checksum-of-a-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:06:26+08:00" itemprop="datePublished" title="2023-03-03 11:06">2023-03-03 11:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there any simple way of generating (and checking) MD5 checksums of a list
of files in Python? (I have a small program I'm working on, and I'd like to
confirm the checksums of the files).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can use hashlib.md5()</p>
<p>Note that sometimes you won't be able to fit the whole file in memory. In that
case, you'll have to read chunks of 4096 bytes sequentially and feed them to
the <code>md5</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="k">def</span> <span class="nf">md5</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
    <span class="n">hash_md5</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4096</span><span class="p">),</span> <span class="sa">b</span><span class="s2">""</span><span class="p">):</span>
            <span class="n">hash_md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hash_md5</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</pre></div>

<p><strong>Note:</strong> <code>hash_md5.hexdigest()</code> will return the <em>hex string</em> representation
for the digest, if you just need the packed bytes use <code>return
hash_md5.digest()</code>, so you don't have to convert back.</p>
<p><br></p>
<h3>Suggest</h3>
<p>There is a way that's pretty memory <strong>inefficient</strong>.</p>
<p>single file:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="k">def</span> <span class="nf">file_as_bytes</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="nb">print</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="n">file_as_bytes</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">full_path</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</pre></div>

<p>list of files:</p>
<div class="code"><pre class="code literal-block">[<span class="ss">(</span><span class="nv">fname</span>,<span class="w"> </span><span class="nv">hashlib</span>.<span class="nv">md5</span><span class="ss">(</span><span class="nv">file_as_bytes</span><span class="ss">(</span><span class="nv">open</span><span class="ss">(</span><span class="nv">fname</span>,<span class="w"> </span><span class="s1">'rb'</span><span class="ss">)))</span>.<span class="nv">digest</span><span class="ss">())</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">fname</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">fnamelst</span>]
</pre></div>

<p>Recall though, that MD5 is known broken and should not be used for any purpose
since vulnerability analysis can be really tricky, and analyzing any possible
future use your code might be put to for security issues is impossible. IMHO,
it should be flat out removed from the library so everybody who uses it is
forced to update. So, here's what you should do instead:</p>
<div class="code"><pre class="code literal-block">[<span class="ss">(</span><span class="nv">fname</span>,<span class="w"> </span><span class="nv">hashlib</span>.<span class="nv">sha256</span><span class="ss">(</span><span class="nv">file_as_bytes</span><span class="ss">(</span><span class="nv">open</span><span class="ss">(</span><span class="nv">fname</span>,<span class="w"> </span><span class="s1">'rb'</span><span class="ss">)))</span>.<span class="nv">digest</span><span class="ss">())</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">fname</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">fnamelst</span>]
</pre></div>

<p>If you only want 128 bits worth of digest you can do <code>.digest()[:16]</code>.</p>
<p>This will give you a list of tuples, each tuple containing the name of its
file and its hash.</p>
<p>Again I strongly question your use of MD5. You should be at least using SHA1,
and given recent flaws discovered in SHA1, probably not even that. Some people
think that as long as you're not using MD5 for 'cryptographic' purposes,
you're fine. But stuff has a tendency to end up being broader in scope than
you initially expect, and your casual vulnerability analysis may prove
completely flawed. It's best to just get in the habit of using the right
algorithm out of the gate. It's just typing a different bunch of letters is
all. It's not that hard.</p>
<p>Here is a way that is more complex, but <strong>memory efficient</strong> :</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">hashlib</span>

<span class="k">def</span> <span class="nf">hash_bytestr_iter</span><span class="p">(</span><span class="n">bytesiter</span><span class="p">,</span> <span class="n">hasher</span><span class="p">,</span> <span class="n">ashexstr</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">bytesiter</span><span class="p">:</span>
        <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hasher</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span> <span class="k">if</span> <span class="n">ashexstr</span> <span class="k">else</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">file_as_blockiter</span><span class="p">(</span><span class="n">afile</span><span class="p">,</span> <span class="n">blocksize</span><span class="o">=</span><span class="mi">65536</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">afile</span><span class="p">:</span>
        <span class="n">block</span> <span class="o">=</span> <span class="n">afile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">blocksize</span><span class="p">)</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">block</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">block</span>
            <span class="n">block</span> <span class="o">=</span> <span class="n">afile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">blocksize</span><span class="p">)</span>


<span class="p">[(</span><span class="n">fname</span><span class="p">,</span> <span class="n">hash_bytestr_iter</span><span class="p">(</span><span class="n">file_as_blockiter</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)),</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()))</span>
    <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">fnamelst</span><span class="p">]</span>
</pre></div>

<p>And, again, since MD5 is broken and should not really ever be used anymore:</p>
<div class="code"><pre class="code literal-block">[<span class="ss">(</span><span class="nv">fname</span>,<span class="w"> </span><span class="nv">hash_bytestr_iter</span><span class="ss">(</span><span class="nv">file_as_blockiter</span><span class="ss">(</span><span class="nv">open</span><span class="ss">(</span><span class="nv">fname</span>,<span class="w"> </span><span class="s1">'rb'</span><span class="ss">))</span>,<span class="w"> </span><span class="nv">hashlib</span>.<span class="nv">sha256</span><span class="ss">()))</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nv">fname</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">fnamelst</span>]
</pre></div>

<p>Again, you can put <code>[:16]</code> after the call to <code>hash_bytestr_iter(...)</code> if you
only want 128 bits worth of digest.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/i-lose-my-data-when-the-container-exits/" class="u-url">I lose my data when the container exits</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/i-lose-my-data-when-the-container-exits/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T11:06:01+08:00" itemprop="datePublished" title="2023-03-03 11:06">2023-03-03 11:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Despite Docker's Interactive tutorial and faq I lose my data when the
container exits.</p>
<p>I have installed Docker as described here:
http://docs.docker.io/en/latest/installation/ubuntulinux without any problem
on ubuntu 13.04.</p>
<p>But it loses all data when exits.</p>
<div class="code"><pre class="code literal-block"><span class="n">iman</span><span class="nv">@test</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">version</span>
<span class="n">Client</span><span class="w"> </span><span class="nl">version</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6.4</span><span class="w"> </span>
<span class="k">Go</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">go1</span><span class="mf">.1.2</span><span class="w"> </span>
<span class="n">Git</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="p">(</span><span class="n">client</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="mi">2</span><span class="n">f74b1c</span><span class="w"> </span>
<span class="n">Server</span><span class="w"> </span><span class="nl">version</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6.4</span><span class="w"> </span>
<span class="n">Git</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="p">(</span><span class="n">server</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="mi">2</span><span class="n">f74b1c</span><span class="w"> </span>
<span class="k">Go</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">(</span><span class="n">server</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">go1</span><span class="mf">.1.2</span><span class="w"> </span>
<span class="k">Last</span><span class="w"> </span><span class="n">stable</span><span class="w"> </span><span class="nl">version</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6.4</span>


<span class="n">iman</span><span class="nv">@test</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">ubuntu</span><span class="w"> </span><span class="n">ping</span>
<span class="mi">2013</span><span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">25</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">05</span><span class="err">:</span><span class="mi">47</span><span class="w"> </span><span class="n">Unable</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">locate</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span>
<span class="n">iman</span><span class="nv">@test</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">ubuntu</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="k">get</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">ping</span>
<span class="n">Reading</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">lists</span><span class="p">...</span><span class="w"> </span>
<span class="n">Building</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">tree</span><span class="p">...</span><span class="w"> </span>
<span class="n">The</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="k">NEW</span><span class="w"> </span><span class="n">packages</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="nl">installed</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="n">iputils</span><span class="o">-</span><span class="n">ping</span><span class="w"> </span>
<span class="mi">0</span><span class="w"> </span><span class="n">upgraded</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">newly</span><span class="w"> </span><span class="n">installed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">upgraded</span><span class="p">.</span><span class="w"> </span>
<span class="n">Need</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="mf">56.1</span><span class="w"> </span><span class="n">kB</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">archives</span><span class="p">.</span><span class="w"> </span>
<span class="k">After</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">operation</span><span class="p">,</span><span class="w"> </span><span class="mi">143</span><span class="w"> </span><span class="n">kB</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="k">disk</span><span class="w"> </span><span class="nf">space</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="p">.</span><span class="w"> </span>
<span class="k">Get</span><span class="err">:</span><span class="mi">1</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">archive</span><span class="p">.</span><span class="n">ubuntu</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="w"> </span><span class="n">precise</span><span class="o">/</span><span class="n">main</span><span class="w"> </span><span class="n">iputils</span><span class="o">-</span><span class="n">ping</span><span class="w"> </span><span class="n">amd64</span><span class="w"> </span><span class="mi">3</span><span class="err">:</span><span class="mi">20101006</span><span class="o">-</span><span class="mi">1</span><span class="n">ubuntu1</span><span class="w"> </span><span class="o">[</span><span class="n">56.1 kB</span><span class="o">]</span><span class="w"> </span>
<span class="nl">debconf</span><span class="p">:</span><span class="w"> </span><span class="n">delaying</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">configuration</span><span class="p">,</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span>
<span class="n">Fetched</span><span class="w"> </span><span class="mf">56.1</span><span class="w"> </span><span class="n">kB</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="mi">0</span><span class="n">s</span><span class="w"> </span><span class="p">(</span><span class="mi">195</span><span class="w"> </span><span class="n">kB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span><span class="w"> </span>
<span class="n">Selecting</span><span class="w"> </span><span class="n">previously</span><span class="w"> </span><span class="n">unselected</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">iputils</span><span class="o">-</span><span class="n">ping</span><span class="p">.</span><span class="w"> </span>
<span class="p">(</span><span class="n">Reading</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="mi">7545</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">directories</span><span class="w"> </span><span class="n">currently</span><span class="w"> </span><span class="n">installed</span><span class="p">.)</span><span class="w"> </span>
<span class="n">Unpacking</span><span class="w"> </span><span class="n">iputils</span><span class="o">-</span><span class="n">ping</span><span class="w"> </span><span class="p">(</span><span class="k">from</span><span class="w"> </span><span class="p">...</span><span class="o">/</span><span class="n">iputils</span><span class="o">-</span><span class="n">ping_3</span><span class="o">%</span><span class="mi">3</span><span class="n">a20101006</span><span class="o">-</span><span class="mi">1</span><span class="n">ubuntu1_amd64</span><span class="p">.</span><span class="n">deb</span><span class="p">)</span><span class="w"> </span><span class="p">...</span><span class="w"> </span>
<span class="n">Setting</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">iputils</span><span class="o">-</span><span class="n">ping</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="err">:</span><span class="mi">20101006</span><span class="o">-</span><span class="mi">1</span><span class="n">ubuntu1</span><span class="p">)</span><span class="w"> </span><span class="p">...</span><span class="w"> </span>
<span class="n">iman</span><span class="nv">@test</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">ubuntu</span><span class="w"> </span><span class="n">ping</span>
<span class="mi">2013</span><span class="o">/</span><span class="mi">10</span><span class="o">/</span><span class="mi">25</span><span class="w"> </span><span class="mi">08</span><span class="err">:</span><span class="mi">06</span><span class="err">:</span><span class="mi">11</span><span class="w"> </span><span class="n">Unable</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">locate</span><span class="w"> </span><span class="n">ping</span><span class="w"> </span>
<span class="n">iman</span><span class="nv">@test</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">ubuntu</span><span class="w"> </span><span class="n">touch</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">test</span>
<span class="n">iman</span><span class="nv">@test</span><span class="err">:</span><span class="o">~</span><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">ubuntu</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">test</span>
<span class="nl">ls</span><span class="p">:</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="nl">test</span><span class="p">:</span><span class="w"> </span><span class="k">No</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">directory</span>
</pre></div>

<p>I also tested it with interactive sessions with the same result. Did I forget
something?</p>
<h3>EDIT: IMPORTANT FOR NEW DOCKER USERS</h3>
<p>As @mohammed-noureldin and others said, actually this is <strong>NOT</strong> a <strong>container
exiting</strong>. Every time it just creates a new container.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You need to commit the changes you make to the container and then run it. Try
this:</p>
<div class="code"><pre class="code literal-block">sudo docker pull ubuntu

sudo docker run ubuntu apt-get install -y ping
</pre></div>

<p>Then get the container id using this command:</p>
<div class="code"><pre class="code literal-block">sudo docker ps -l
</pre></div>

<p>Commit changes to the container:</p>
<div class="code"><pre class="code literal-block">sudo docker commit &lt;container_id&gt; iman/ping
</pre></div>

<p>Then run the container:</p>
<div class="code"><pre class="code literal-block">sudo docker run iman/ping ping www.google.com
</pre></div>

<p>This should work.</p>
<p><br></p>
<h3>Suggest</h3>
<p>When you use <code>docker run</code> to start a container, it actually <em>creates a new
container</em> based on the image you have specified.</p>
<p>Besides the other useful answers here, note that you can restart an existing
container after it exited and your changes are still there.</p>
<div class="code"><pre class="code literal-block">docker start f357e2faab77 # restart it in the background
docker attach f357e2faab77 # reattach the terminal &amp; stdin
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1862.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1860.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
