<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 702) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-702.html">
<link rel="prev" href="index-703.html" type="text/html">
<link rel="next" href="index-701.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-shouldn-t-i-use-pypy-over-cpython-if-pypy-is-6-3-times-faster/" class="u-url">Why shouldn't I use PyPy over CPython if PyPy is 6.3 times faster?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-shouldn-t-i-use-pypy-over-cpython-if-pypy-is-6-3-times-faster/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:42:22+08:00" itemprop="datePublished" title="2023-02-17 13:42">2023-02-17 13:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've been hearing a lot about the PyPy project. They claim it is 6.3 times
faster than the CPython interpreter on their site.</p>
<p>Whenever we talk about dynamic languages like Python, speed is one of the top
issues. To solve this, they say PyPy is 6.3 times faster.</p>
<p>The second issue is parallelism, the infamous Global Interpreter Lock (GIL).
For this, PyPy says it can give GIL-less Python.</p>
<p>If PyPy can solve these great challenges, what are its weaknesses that are
preventing wider adoption? That is to say, what's preventing someone like me,
a typical Python developer, from switching to PyPy <em>right now</em>?</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p><strong>NOTE:</strong> PyPy is more mature and better supported now than it was in 2013,
when this question was asked. Avoid drawing conclusions from out-of-date
information.</p>
</blockquote>
<hr>
<ol>
<li>PyPy, as others have been quick to mention, has tenuous support for C extensions. It has support, but typically at slower-than-Python speeds and it's iffy at best. Hence a lot of modules simply require CPython. <del>PyPy doesn't support numpy</del>. Some extensions are still not supported ( <del>Pandas</del> , <del>SciPy</del> , etc.), take a look at the list of supported packages before making the change. <strong>Note that many packages marked unsupported on the list are now supported.</strong>
</li>
<li>Python 3 support <del>is experimental at the moment.</del> <strong>has just reached stable! As of 20th June 2014, PyPy3 2.3.1 - Fulcrum is out!</strong>
</li>
<li>PyPy sometimes isn't actually faster for "scripts", which a lot of people use Python for. These are the short-running programs that do something simple and small. Because PyPy is a JIT compiler its main advantages come from long run times and simple types (such as numbers). PyPy's pre-JIT speeds can be bad compared to CPython.</li>
<li>
<strong>Inertia</strong>. Moving to PyPy often requires retooling, which for some people and organizations is simply too much work.</li>
</ol>
<p>Those are the main reasons that affect me, I'd say.</p>
<p><br></p>
<h3>Suggest</h3>
<p>That site does <strong>not</strong> claim PyPy is 6.3 times faster than CPython. To quote:</p>
<blockquote>
<p>The geometric average of all benchmarks is 0.16 or 6.3 times faster than
CPython</p>
</blockquote>
<p>This is a <strong>very</strong> different statement to the blanket statement you made, and
when you understand the difference, you'll understand at least one set of
reasons why you can't just say "use PyPy". It might sound like I'm nit-
picking, but understanding why these two statements are totally different is
vital.</p>
<p>To break that down:</p>
<ul>
<li>
<p>The statement they make only applies to the benchmarks they've used. It says absolutely nothing about your program (unless your program is exactly the same as one of their benchmarks).</p>
</li>
<li>
<p>The statement is about an <strong>average</strong> of a group of benchmarks. There is no claim that running PyPy will give a 6.3 times improvement even for the programs they have tested.</p>
</li>
<li>
<p>There is no claim that PyPy will even run all the programs that CPython runs <strong>at all</strong> , let alone faster.</p>
</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-use-static-cast-int-x-instead-of-int-x/" class="u-url">Why use static_cast&lt;int&gt;(x) instead of (int)x?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-use-static-cast-int-x-instead-of-int-x/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:41:55+08:00" itemprop="datePublished" title="2023-02-17 13:41">2023-02-17 13:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've heard that the <code>static_cast</code> function should be preferred to C-style or
simple function-style casting. Is this true? Why?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The main reason is that classic C casts make no distinction between what we
call <code>static_cast&lt;&gt;()</code>, <code>reinterpret_cast&lt;&gt;()</code>, <code>const_cast&lt;&gt;()</code>, and
<code>dynamic_cast&lt;&gt;()</code>. These four things are completely different.</p>
<p>A <code>static_cast&lt;&gt;()</code> is usually safe. There is a valid conversion in the
language, or an appropriate constructor that makes it possible. The only time
it's a bit risky is when you cast down to an inherited class; you must make
sure that the object is actually the descendant that you claim it is, by means
external to the language (like a flag in the object). A <code>dynamic_cast&lt;&gt;()</code> is
safe as long as the result is checked (pointer) or a possible exception is
taken into account (reference).</p>
<p>A <code>reinterpret_cast&lt;&gt;()</code> (or a <code>const_cast&lt;&gt;()</code>) on the other hand is always
dangerous. You tell the compiler: "trust me: I know this doesn't look like a
<code>foo</code> (this looks as if it isn't mutable), but it is".</p>
<p>The first problem is that it's almost impossible to tell which one will occur
in a C-style cast without looking at large and disperse pieces of code and
knowing all the rules.</p>
<p>Let's assume these:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">CDerivedClass</span> : <span class="n">public</span> <span class="n">CMyBase</span> {...};
<span class="k">class</span> <span class="n">CMyOtherStuff</span> {...} ;

<span class="n">CMyBase</span>  *<span class="n">pSomething</span>; // <span class="n">filled</span> <span class="n">somewhere</span>
</pre></div>

<p>Now, these two are compiled the same way:</p>
<div class="code"><pre class="code literal-block">CDerivedClass *pMyObject;
pMyObject = static_cast&lt;CDerivedClass*&gt;(pSomething); // Safe; as long as we checked

pMyObject = (CDerivedClass*)(pSomething); // Same as static_cast&lt;&gt;
                                     // Safe; as long as we checked
                                     // but harder to read
</pre></div>

<p>However, let's see this almost identical code:</p>
<div class="code"><pre class="code literal-block"><span class="nt">CMyOtherStuff</span><span class="w"> </span><span class="o">*</span><span class="nt">pOther</span><span class="o">;</span>
<span class="nt">pOther</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nt">static_cast</span><span class="o">&lt;</span><span class="nt">CMyOtherStuff</span><span class="o">*&gt;(</span><span class="nt">pSomething</span><span class="o">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">Compiler</span><span class="w"> </span><span class="nt">error</span><span class="o">:</span><span class="w"> </span><span class="nt">Can</span><span class="s1">'t convert</span>

<span class="s1">pOther = (CMyOtherStuff*)(pSomething);            // No compiler error.</span>
<span class="s1">                                                  // Same as reinterpret_cast&lt;&gt;</span>
<span class="s1">                                                  // and it'</span><span class="nt">s</span><span class="w"> </span><span class="nt">wrong</span><span class="o">!!!</span>
</pre></div>

<p>As you can see, there is no easy way to distinguish between the two situations
without knowing a lot about all the classes involved.</p>
<p>The second problem is that the C-style casts are too hard to locate. In
complex expressions it can be very hard to see C-style casts. It is virtually
impossible to write an automated tool that needs to locate C-style casts (for
example a search tool) without a full blown C++ compiler front-end. On the
other hand, it's easy to search for "static_cast&lt;" or "reinterpret_cast&lt;".</p>
<div class="code"><pre class="code literal-block">pOther = reinterpret_cast&lt;CMyOtherStuff*&gt;(pSomething);
      // No compiler error.
      // but the presence of a reinterpret_cast&lt;&gt; is 
      // like a Siren with Red Flashing Lights in your code.
      // The mere typing of it should cause you to feel VERY uncomfortable.
</pre></div>

<p>That means that, not only are C-style casts more dangerous, but it's a lot
harder to find them all to make sure that they are correct.</p>
<p><br></p>
<h3>Suggest</h3>
<p>One pragmatic tip: you can search easily for the <code>static_cast</code> keyword in your
source code if you plan to tidy up the project.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-i-embed-a-custom-font-in-an-iphone-application/" class="u-url">Can I embed a custom font in an iPhone application?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-i-embed-a-custom-font-in-an-iphone-application/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T13:41:27+08:00" itemprop="datePublished" title="2023-02-17 13:41">2023-02-17 13:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I would like to have an app include a custom font for rendering text, load it,
and then use it with standard <code>UIKit</code> elements like <code>UILabel</code>. Is this
possible?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>iOS 3.2 and later support this. Straight from the <em>What's New in iPhone OS
3.2</em> doc:</p>
<blockquote>
<p><strong>Custom Font Support</strong><br>
 Applications that want to use custom fonts can now include those fonts in
their application bundle and register those fonts with the system by
including the UIAppFonts key in their Info.plist file. The value of this key
is an array of strings identifying the font files in the application’s
bundle. When the system sees the key, it loads the specified fonts and makes
them available to the application.</p>
</blockquote>
<p>Once the fonts have been set in the <code>Info.plist</code>, you can use your custom
fonts as any other font in IB or programatically.</p>
<p>There is an ongoing thread on Apple Developer Forums:<br>
https://devforums.apple.com/thread/37824 (login required)</p>
<p>And here's an excellent and simple 3 steps tutorial on how to achieve this
(broken link removed)</p>
<ol>
<li>Add your custom font files into your project using Xcode as a resource</li>
<li>Add a key to your <code>Info.plist</code> file called <code>UIAppFonts</code>.</li>
<li>Make this key an array</li>
<li>For each font you have, enter the full name of your font file (including the extension) as items to the <code>UIAppFonts</code> array</li>
<li>Save <code>Info.plist</code>
</li>
<li>Now in your application you can simply call <code>[UIFont fontWithName:@"CustomFontName" size:12]</code> to get the custom font to use with your <strong>UILabels</strong> and <strong>UITextViews</strong> , etc…</li>
</ol>
<p>Also: Make sure the fonts are in your Copy Bundle Resources.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Edit: As of iOS 3.2, this functionality is built in. If you need to support
pre-3.2, you can still use this solution.</strong></p>
<p>I created a simple module that extends <code>UILabel</code> and handles loading .ttf
files. I released it opensource under the Apache license and put it on github
Here.</p>
<p>The important files are <code>FontLabel.h</code> and <code>FontLabel.m</code>.</p>
<p>It uses some of the code from Genericrich's answer.</p>
<p>Browse the source Here.</p>
<p>OR</p>
<ul>
<li>
<p>Copy your font file into resources</p>
</li>
<li>
<p>Add a key to your <code>Info.plist</code> file called UIAppFonts. ("Fonts provided by application)</p>
</li>
<li>
<p>Make this key an array </p>
</li>
<li>
<p>For each font you have, enter the full name of your font file (including the extension) as items to the UIAppFonts array </p>
</li>
<li>
<p>Save <code>Info.plist</code></p>
</li>
<li>
<p>Now in your application you can simply call <code>[UIFont fontWithName:@"CustomFontName" size:15]</code> to get the custom font to use with your <code>UILabels</code> and <code>UITextViews</code>, etc…</p>
</li>
</ul>
<p>For More Information</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-703.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-701.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
