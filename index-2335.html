<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2335) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2335.html">
<link rel="prev" href="index-2336.html" type="text/html">
<link rel="next" href="index-2334.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/http-url-address-encoding-in-java/" class="u-url">HTTP URL Address Encoding in Java</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/http-url-address-encoding-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T08:31:37+08:00" itemprop="datePublished" title="2023-03-04 08:31">2023-03-04 08:31</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>My Java standalone application gets a URL (which points to a file) from the
user and I need to hit it and download it. The problem I am facing is that I
am not able to encode the HTTP URL address properly...</p>
<p>Example:</p>
<div class="code"><pre class="code literal-block"><span class="n">URL</span><span class="o">:</span><span class="w">  </span><span class="n">http</span><span class="o">://</span><span class="n">search</span><span class="o">.</span><span class="na">barnesandnoble</span><span class="o">.</span><span class="na">com</span><span class="sr">/booksearch/</span><span class="n">first</span><span class="w"> </span><span class="n">book</span><span class="o">.</span><span class="na">pdf</span>

<span class="n">java</span><span class="o">.</span><span class="na">net</span><span class="o">.</span><span class="na">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span><span class="w"> </span><span class="s2">"ISO-8859-1"</span><span class="o">);</span>
</pre></div>

<p>returns me:</p>
<div class="code"><pre class="code literal-block">http%3A%2F%2Fsearch.barnesandnoble.com%2Fbooksearch%2Ffirst+book.pdf
</pre></div>

<p>But, what I want is</p>
<div class="code"><pre class="code literal-block">http://search.barnesandnoble.com/booksearch/first%20book.pdf
</pre></div>

<p>(space replaced by %20)</p>
<p>I guess <code>URLEncoder</code> is not designed to encode HTTP URLs... The JavaDoc says
"Utility class for HTML form encoding"... Is there any other way to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The java.net.URI class can help; in the documentation of URL you find</p>
<blockquote>
<p>Note, the URI class does perform escaping of its component fields in certain
circumstances. The recommended way to manage the encoding and decoding of
URLs is to use an URI</p>
</blockquote>
<p>Use one of the constructors with more than one argument, like:</p>
<div class="code"><pre class="code literal-block">URI uri = new URI(
    "http", 
    "search.barnesandnoble.com", 
    "/booksearch/first book.pdf",
    null);
URL url = uri.toURL();
//or String request = uri.toString();
</pre></div>

<p><em>(the single-argument constructor of URI does NOT escape illegal characters)</em></p>
<hr>
<p>Only illegal characters get escaped by above code - it does NOT escape non-
ASCII characters (see fatih's comment).<br>
The <code>toASCIIString</code> method can be used to get a String only with US-ASCII
characters:</p>
<div class="code"><pre class="code literal-block">URI uri = new URI(
    "http", 
    "search.barnesandnoble.com", 
    "/booksearch/é",
    null);
String request = uri.toASCIIString();
</pre></div>

<hr>
<p>For an URL with a query like <code>http://www.google.com/ig/api?weather=São Paulo</code>,
use the 5-parameter version of the constructor:</p>
<div class="code"><pre class="code literal-block">URI uri = new URI(
        "http", 
        "www.google.com", 
        "/ig/api",
        "weather=São Paulo",
        null);
String request = uri.toASCIIString();
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Please be warned that most of the answers above are INCORRECT.</p>
<p>The <code>URLEncoder</code> class, despite is name, is NOT what needs to be here. It's
unfortunate that Sun named this class so annoyingly. <code>URLEncoder</code> is meant for
passing data as parameters, not for encoding the URL itself.</p>
<p>In other words, <code>"http://search.barnesandnoble.com/booksearch/first book.pdf"</code>
is the URL. Parameters would be, for example,
<code>"http://search.barnesandnoble.com/booksearch/first
book.pdf?parameter1=this&amp;param2=that"</code>. The parameters are what you would use
<code>URLEncoder</code> for.</p>
<p>The following two examples highlights the differences between the two.</p>
<p>The following produces the wrong parameters, according to the HTTP standard.
Note the ampersand (&amp;) and plus (+) are encoded incorrectly.</p>
<div class="code"><pre class="code literal-block">uri = new URI("http", null, "www.google.com", 80, 
"/help/me/book name+me/", "MY CRZY QUERY! +&amp;+ :)", null);

// URI: http://www.google.com:80/help/me/book%20name+me/?MY%20CRZY%20QUERY!%20+&amp;+%20:)
</pre></div>

<p>The following will produce the correct parameters, with the query properly
encoded. Note the spaces, ampersands, and plus marks.</p>
<div class="code"><pre class="code literal-block">uri = new URI("http", null, "www.google.com", 80, "/help/me/book name+me/", URLEncoder.encode("MY CRZY QUERY! +&amp;+ :)", "UTF-8"), null);

// URI: http://www.google.com:80/help/me/book%20name+me/?MY+CRZY+QUERY%2521+%252B%2526%252B+%253A%2529
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/typescript-function-overloading/" class="u-url">TypeScript function overloading</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/typescript-function-overloading/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T08:30:11+08:00" itemprop="datePublished" title="2023-03-04 08:30">2023-03-04 08:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Section 6.3 of the TypeScript language spec talks about function overloading
and gives concrete examples on how to implement this. However if I try
something like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">LayerFactory</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">constructor</span><span class="w"> </span><span class="p">(</span><span class="n">public</span><span class="w"> </span><span class="n">styleFactory</span><span class="p">:</span><span class="w"> </span><span class="n">Symbology</span><span class="o">.</span><span class="n">StyleFactory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="n">createFeatureLayer</span><span class="w"> </span><span class="p">(</span><span class="n">userContext</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Model</span><span class="o">.</span><span class="n">UserContext</span><span class="p">,</span><span class="w"> </span><span class="n">mapWrapperObj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MapWrapperBase</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="p">{</span><span class="w">           </span>
<span class="w">         </span><span class="n">throw</span><span class="w"> </span><span class="s2">"not implemented"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">createFeatureLayer</span><span class="p">(</span><span class="n">layerName</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">any</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">throw</span><span class="w"> </span><span class="s2">"not implemented"</span><span class="p">;</span>
<span class="w">     </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p>I get a compiler error indicating duplicate identifier even though function
parameters are of different types. Even if I add an additional parameter to
the second createFeatureLayer function, I still get a compiler error. Ideas,
please.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This may be because, when both functions are compiled to JavaScript, their
signature is totally identical. As JavaScript doesn't have types, we end up
creating two functions taking same number of arguments. So, TypeScript
restricts us from creating such functions.</p>
<p>TypeScript supports overloading based on number of parameters, but the steps
to be followed are a bit different if we compare to OO languages. In answer to
another SO question, someone explained it with a nice example: Method
overloading?.</p>
<p>Basically, what we are doing is, we are creating just one function and a
number of declarations so that TypeScript doesn't give compile errors. When
this code is compiled to JavaScript, the concrete function alone will be
visible. As a JavaScript function can be called by passing multiple arguments,
it just works.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This may be because, when both functions are compiled to JavaScript, their
signature is totally identical. As JavaScript doesn't have types, we end up
creating two functions taking same number of arguments. So, TypeScript
restricts us from creating such functions.</p>
<p>TypeScript supports overloading based on number of parameters, but the steps
to be followed are a bit different if we compare to OO languages. In answer to
another SO question, someone explained it with a nice example: Method
overloading?.</p>
<p>Basically, what we are doing is, we are creating just one function and a
number of declarations so that TypeScript doesn't give compile errors. When
this code is compiled to JavaScript, the concrete function alone will be
visible. As a JavaScript function can be called by passing multiple arguments,
it just works.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-does-linq-return-when-the-results-are-empty/" class="u-url">What does LINQ return when the results are empty</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-does-linq-return-when-the-results-are-empty/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T08:28:54+08:00" itemprop="datePublished" title="2023-03-04 08:28">2023-03-04 08:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a question about LINQ query. Normally a query returns a
<code>IEnumerable&lt;T&gt;</code> type. If the return is empty, not sure if it is null or not.
I am not sure if the following <code>ToList()</code> will throw an exception or just a
empty <code>List&lt;string&gt;</code> if nothing found in <code>IEnumerable</code> result?</p>
<div class="code"><pre class="code literal-block"><span class="w">   </span><span class="nv">List</span><span class="o">&lt;</span><span class="nv">string</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{<span class="s2">"a"</span>}<span class="c1">;</span>
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nb">result</span><span class="w"> </span><span class="nv">null</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="k">else</span>?
<span class="w">   </span><span class="nv">IEnumerable</span><span class="o">&lt;</span><span class="nv">string</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">ilist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"ABC"</span><span class="w"> </span><span class="nv">select</span><span class="w"> </span><span class="nv">x</span><span class="c1">;</span>
<span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="nv">Or</span><span class="w"> </span><span class="nv">directly</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">list</span>,<span class="w"> </span><span class="nv">exception</span><span class="w"> </span><span class="nv">thrown</span>?
<span class="w">   </span><span class="nv">List</span><span class="o">&lt;</span><span class="nv">string</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="nv">from</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"ABC"</span><span class="w"> </span><span class="nv">select</span><span class="w"> </span><span class="nv">x</span><span class="ss">)</span>.<span class="nv">ToList</span><span class="ss">()</span><span class="c1">;</span>
</pre></div>

<p>I know it is a very simple question, but I don't have VS available for the
time being.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It will return an empty enumerable. It won't be null. You can sleep sound :)</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can also check the <code>.Any()</code> method:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="o">!</span><span class="nv">YourResult</span>.<span class="nv">Any</span><span class="ss">())</span>
</pre></div>

<p>Just a note that <code>.Any</code> will still retrieve the records from the database;
doing a <code>.FirstOrDefault()/.Where()</code> will be just as much overhead but you
would then be able to catch the object(s) returned from the query</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2336.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2334.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
