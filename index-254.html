<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 254) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-254.html">
<link rel="prev" href="index-255.html" type="text/html">
<link rel="next" href="index-253.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/find-when-a-file-was-deleted-in-git/" class="u-url">Find when a file was deleted in Git</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/find-when-a-file-was-deleted-in-git/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:12:07+08:00" itemprop="datePublished" title="2023-02-17 02:12">2023-02-17 02:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a Git repository with n commits.</p>
<p>I have a file that I need, and that used to be in the repository, and that I
suddenly look for and think "Oh! Where'd that file go?"</p>
<p>Is there a (series of) Git command(s) that will tell me that "file
really_needed.txt was deleted at commit n-13"?</p>
<p>In other words, without looking at every individual commit, and knowing that
my Git repo has every change of every file, can I quickly find the last commit
that HAS that file, so I can get it back?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To show the commits that changed a file, even if the file was deleted, run
this command:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">--</span><span class="n">full</span><span class="o">-</span><span class="n">history</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="p">[</span><span class="n">file</span><span class="w"> </span><span class="n">path</span><span class="p">]</span>
</pre></div>

<p>If you want to see only the last commit, which deleted the file, use <code>-1</code> in
addition to the command above:</p>
<div class="code"><pre class="code literal-block"><span class="n">git</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="o">--</span><span class="n">full</span><span class="o">-</span><span class="n">history</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="p">[</span><span class="n">file</span><span class="w"> </span><span class="n">path</span><span class="p">]</span>
</pre></div>

<p>See also my article: Which commit deleted a file.</p>
<p><br></p>
<h3>Suggest</h3>
<h4>Short answer:</h4>
<div class="code"><pre class="code literal-block">git log --full-history -- your_file
</pre></div>

<p>will show you <em>all</em> commits in your repo's history, including merge commits,
that touched <code>your_file</code>. The last (top) one is the one that deleted the file.</p>
<h4>Some explanation:</h4>
<p>The <code>--full-history</code> flag here is important. Without it, Git performs "history
simplification" when you ask it for the log of a file. The docs are light on
details about exactly how this works and I lack the grit and courage required
to try to figure it out from the source code, but the git-log docs have this
much to say:</p>
<blockquote>
<h4>Default mode</h4>
<p>Simplifies the history to the simplest history explaining the final state of
the tree. Simplest because it prunes some side branches if the end result is
the same (i.e. merging branches with the same content)</p>
</blockquote>
<p>This is obviously concerning when the file whose history we want is <em>deleted</em>
, since the simplest history explaining the final state of a deleted file is
<em>no history</em>. Is there a risk that <code>git log</code> without <code>--full-history</code> will
simply claim that the file was never created? Unfortunately, yes. Here's a
demonstration:</p>
<div class="code"><pre class="code literal-block"><span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="n">init_</span><span class="o">**</span>
<span class="n">Initialised</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">Git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">mark</span><span class="o">/</span><span class="n">example</span><span class="o">/</span><span class="p">.</span><span class="n">git</span><span class="o">/</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_touch</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="ss">"Added foo"</span><span class="n">_</span><span class="o">**</span>
<span class="o">[</span><span class="n">master (root-commit) ddff7a7</span><span class="o">]</span><span class="w"> </span><span class="n">Added</span><span class="w"> </span><span class="n">foo</span>
<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="n">changed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="mi">100644</span><span class="w"> </span><span class="n">foo</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="o">-</span><span class="n">b</span><span class="w"> </span><span class="n">newbranch_</span><span class="o">**</span>
<span class="n">Switched</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="s1">'newbranch'</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_touch</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="ss">"Added bar"</span><span class="n">_</span><span class="o">**</span>
<span class="o">[</span><span class="n">newbranch 7f9299a</span><span class="o">]</span><span class="w"> </span><span class="n">Added</span><span class="w"> </span><span class="n">bar</span>
<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="n">changed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="mi">100644</span><span class="w"> </span><span class="n">bar</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">master_</span><span class="o">**</span>
<span class="n">Switched</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="s1">'master'</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="ss">"Deleted foo"</span><span class="n">_</span><span class="o">**</span>
<span class="n">rm</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="o">[</span><span class="n">master 7740344</span><span class="o">]</span><span class="w"> </span><span class="n">Deleted</span><span class="w"> </span><span class="n">foo</span>
<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="n">changed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="mi">100644</span><span class="w"> </span><span class="n">foo</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">newbranch_</span><span class="o">**</span>
<span class="n">Switched</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="s1">'newbranch'</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="ss">"Deleted bar"</span><span class="n">_</span><span class="o">**</span>
<span class="n">rm</span><span class="w"> </span><span class="s1">'bar'</span>
<span class="o">[</span><span class="n">newbranch 873ed35</span><span class="o">]</span><span class="w"> </span><span class="n">Deleted</span><span class="w"> </span><span class="n">bar</span>
<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="n">changed</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="mi">100644</span><span class="w"> </span><span class="n">bar</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="n">checkout</span><span class="w"> </span><span class="n">master_</span><span class="o">**</span>
<span class="n">Switched</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="s1">'master'</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="k">merge</span><span class="w"> </span><span class="n">newbranch_</span><span class="o">**</span>
<span class="n">Already</span><span class="w"> </span><span class="n">up</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="nc">date</span><span class="err">!</span>
<span class="k">Merge</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s1">'recursive'</span><span class="w"> </span><span class="n">strategy</span><span class="p">.</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">foo_</span><span class="o">**</span>
<span class="k">commit</span><span class="w"> </span><span class="mi">77403443</span><span class="n">a13a93073289f95a782307b1ebc21162</span>
<span class="nl">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Mark</span><span class="w"> </span><span class="n">Amery</span><span class="w"> </span>
<span class="nc">Date</span><span class="err">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">22</span><span class="err">:</span><span class="mi">50</span><span class="err">:</span><span class="mi">50</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>

<span class="w">    </span><span class="n">Deleted</span><span class="w"> </span><span class="n">foo</span>

<span class="k">commit</span><span class="w"> </span><span class="n">ddff7a78068aefb7a4d19c82e718099cf57be694</span>
<span class="nl">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Mark</span><span class="w"> </span><span class="n">Amery</span><span class="w"> </span>
<span class="nc">Date</span><span class="err">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">22</span><span class="err">:</span><span class="mi">50</span><span class="err">:</span><span class="mi">19</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>

<span class="w">    </span><span class="n">Added</span><span class="w"> </span><span class="n">foo</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">bar_</span><span class="o">**</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="o">--</span><span class="k">full</span><span class="o">-</span><span class="n">history</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">foo_</span><span class="o">**</span>
<span class="k">commit</span><span class="w"> </span><span class="mf">2463e56</span><span class="n">a21e8ee529a59b63f2c6fcc9914a2b37c</span>
<span class="k">Merge</span><span class="err">:</span><span class="w"> </span><span class="mi">7740344</span><span class="w"> </span><span class="mi">873</span><span class="n">ed35</span>
<span class="nl">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Mark</span><span class="w"> </span><span class="n">Amery</span><span class="w"> </span>
<span class="nc">Date</span><span class="err">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">22</span><span class="err">:</span><span class="mi">51</span><span class="err">:</span><span class="mi">36</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>

<span class="w">    </span><span class="k">Merge</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="s1">'newbranch'</span>

<span class="k">commit</span><span class="w"> </span><span class="mi">77403443</span><span class="n">a13a93073289f95a782307b1ebc21162</span>
<span class="nl">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Mark</span><span class="w"> </span><span class="n">Amery</span><span class="w"> </span>
<span class="nc">Date</span><span class="err">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">22</span><span class="err">:</span><span class="mi">50</span><span class="err">:</span><span class="mi">50</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>

<span class="w">    </span><span class="n">Deleted</span><span class="w"> </span><span class="n">foo</span>

<span class="k">commit</span><span class="w"> </span><span class="n">ddff7a78068aefb7a4d19c82e718099cf57be694</span>
<span class="nl">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Mark</span><span class="w"> </span><span class="n">Amery</span><span class="w"> </span>
<span class="nc">Date</span><span class="err">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">22</span><span class="err">:</span><span class="mi">50</span><span class="err">:</span><span class="mi">19</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>

<span class="w">    </span><span class="n">Added</span><span class="w"> </span><span class="n">foo</span>
<span class="n">mark</span><span class="nv">@lunchbox</span><span class="err">:</span><span class="o">~/</span><span class="n">example</span><span class="err">$</span><span class="w"> </span><span class="o">**</span><span class="n">_git</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="o">--</span><span class="k">full</span><span class="o">-</span><span class="n">history</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">bar_</span><span class="o">**</span>
<span class="k">commit</span><span class="w"> </span><span class="mi">873</span><span class="n">ed352c5e0f296b26d1582b3b0b2d99e40d37c</span>
<span class="nl">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Mark</span><span class="w"> </span><span class="n">Amery</span><span class="w"> </span>
<span class="nc">Date</span><span class="err">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">22</span><span class="err">:</span><span class="mi">51</span><span class="err">:</span><span class="mi">29</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>

<span class="w">    </span><span class="n">Deleted</span><span class="w"> </span><span class="n">bar</span>

<span class="k">commit</span><span class="w"> </span><span class="mi">7</span><span class="n">f9299a80cc9114bf9f415e1e9a849f5d02f94ec</span>
<span class="nl">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Mark</span><span class="w"> </span><span class="n">Amery</span><span class="w"> </span>
<span class="nc">Date</span><span class="err">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Jan</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">22</span><span class="err">:</span><span class="mi">50</span><span class="err">:</span><span class="mi">38</span><span class="w"> </span><span class="mi">2016</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>

<span class="w">    </span><span class="n">Added</span><span class="w"> </span><span class="n">bar</span>
</pre></div>

<p>Notice how <code>git log -- bar</code> in the terminal dump above resulted in literally
no output; Git is "simplifying" history down into a fiction where <code>bar</code> never
existed. <code>git log --full-history -- bar</code>, on the other hand, gives us the
commit that created <code>bar</code> and the commit that deleted it.</p>
<p>To be clear: this issue isn't merely theoretical. I only looked into the docs
and discovered the <code>--full-history</code> flag because <code>git log -- some_file</code> was
failing for me in a real repository where I was trying to track a deleted file
down. History simplification might sometimes be helpful when you're trying to
understand how a <em>currently-existing</em> file came to be in its current state,
but when trying to track down a file <em>deletion</em> it's more likely to screw you
over by hiding the commit you care about. Always use the <code>--full-history</code> flag
for this use case.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/check-if-checkbox-is-checked-with-jquery/" class="u-url">Check if checkbox is checked with jQuery</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/check-if-checkbox-is-checked-with-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:11:40+08:00" itemprop="datePublished" title="2023-02-17 02:11">2023-02-17 02:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I check if a checkbox in a checkbox array is checked using the id of
the checkbox array?</p>
<p>I am using the following code, but it always returns the count of checked
checkboxes regardless of id.</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">isCheckedById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">checked</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s2">"input[@id="</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"]:checked"</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">;</span>
<span class="w">    </span><span class="n">alert</span><span class="p">(</span><span class="n">checked</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">checked</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>IDs must be unique in your document, meaning that you <strong>shouldn't</strong> do this:</p>
<div class="code"><pre class="code literal-block">&lt;input type="checkbox" name="chk[]" id="chk[]" value="Apples" /&gt;
&lt;input type="checkbox" name="chk[]" id="chk[]" value="Bananas" /&gt;
</pre></div>

<p>Instead, drop the ID, and then select them by name, or by a containing
element:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;fieldset</span><span class="w"> </span><span class="na">id=</span><span class="s">"checkArray"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="w"> </span><span class="na">name=</span><span class="s">"chk[]"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Apples"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="w"> </span><span class="na">name=</span><span class="s">"chk[]"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Bananas"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/fieldset&gt;</span>
</pre></div>

<p>And now the jQuery:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">atLeastOneIsChecked</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'#checkArray:checkbox:checked'</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="o">//</span><span class="n">there</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">selector</span>

<span class="o">//</span><span class="w"> </span><span class="ow">or</span><span class="p">,</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">:</span>

<span class="k">var</span><span class="w"> </span><span class="n">atLeastOneIsChecked</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'input[name="chk[]"]:checked'</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>IDs must be unique in your document, meaning that you <strong>shouldn't</strong> do this:</p>
<div class="code"><pre class="code literal-block">&lt;input type="checkbox" name="chk[]" id="chk[]" value="Apples" /&gt;
&lt;input type="checkbox" name="chk[]" id="chk[]" value="Bananas" /&gt;
</pre></div>

<p>Instead, drop the ID, and then select them by name, or by a containing
element:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;fieldset</span><span class="w"> </span><span class="na">id=</span><span class="s">"checkArray"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="w"> </span><span class="na">name=</span><span class="s">"chk[]"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Apples"</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"checkbox"</span><span class="w"> </span><span class="na">name=</span><span class="s">"chk[]"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Bananas"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/fieldset&gt;</span>
</pre></div>

<p>And now the jQuery:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">atLeastOneIsChecked</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'#checkArray:checkbox:checked'</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="o">//</span><span class="n">there</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">selector</span>

<span class="o">//</span><span class="w"> </span><span class="ow">or</span><span class="p">,</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">container</span><span class="p">:</span>

<span class="k">var</span><span class="w"> </span><span class="n">atLeastOneIsChecked</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="p">(</span><span class="s1">'input[name="chk[]"]:checked'</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/changing-git-commit-message-after-push-given-that-no-one-pulled-from-remote/" class="u-url">Changing git commit message after push (given that no one pulled from remote)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/changing-git-commit-message-after-push-given-that-no-one-pulled-from-remote/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:11:14+08:00" itemprop="datePublished" title="2023-02-17 02:11">2023-02-17 02:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have made a git commit and subsequent push. I would like to change the
commit message. If I understand correctly, this is not advisable because
someone might have pulled from the remote repository before I make such
changes. What if I know that no one has pulled?</p>
<p>Is there a way to do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Changing history</h4>
<p>If it is the most recent commit, you can simply do this:</p>
<div class="code"><pre class="code literal-block">git commit --amend
</pre></div>

<p>This brings up the editor with the last commit message and lets you edit the
message. (You can use <code>-m</code> if you want to wipe out the old message and use a
new one.)</p>
<h4>Pushing</h4>
<p>And then when you push, do this:</p>
<div class="code"><pre class="code literal-block">git push --force-with-lease &lt;repository&gt; &lt;branch&gt;
</pre></div>

<p>Or you can use "+":</p>
<div class="code"><pre class="code literal-block">git push &lt;repository&gt; +&lt;branch&gt;
</pre></div>

<p>Or you can use <code>--force</code>:</p>
<div class="code"><pre class="code literal-block">git push --force &lt;repository&gt; &lt;branch&gt;
</pre></div>

<p>Be careful when using these commands.</p>
<ul>
<li>
<p>If someone else pushed changes to the same branch, you probably want to avoid destroying those changes. The <code>--force-with-lease</code> option is the safest, because it will abort if there are any upstream changes (</p>
</li>
<li>
<p>If you don't specify the branch explicitly, Git will use the default push settings. If your default push setting is "matching", then you may destroy changes on several branches at the same time. </p>
</li>
</ul>
<h4>Pulling / fetching afterwards</h4>
<p>Anyone who already pulled will now get an error message, and they will need to
update (assuming they aren't making any changes themselves) by doing something
like this:</p>
<div class="code"><pre class="code literal-block">git fetch origin
git reset --hard origin/master # Loses local commits
</pre></div>

<p>Be careful when using <code>reset --hard</code>. If you have changes to the branch, those
changes will be destroyed.</p>
<h4>A note about modifying history</h4>
<p>The destroyed data is really just the old commit message, but <code>--force</code>
doesn't know that, and will happily delete other data too. So think of
<code>--force</code> as "I want to destroy data, and I know for sure what data is being
destroyed." But when the destroyed data is committed, you can often recover
old commits from the reflog—the data is actually <em>orphaned</em> instead of
destroyed (although orphaned commits are periodically deleted).</p>
<p>If you don't think you're destroying data, then stay away from <code>--force</code>...
bad things might happen.</p>
<p>This is why <code>--force-with-lease</code> is somewhat safer.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Just say:</p>
<div class="code"><pre class="code literal-block">git commit --amend -m "New commit message"
</pre></div>

<p><em>and then</em></p>
<div class="code"><pre class="code literal-block">git push --force
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-255.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-253.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
