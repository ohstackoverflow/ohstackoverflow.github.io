<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2701) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2701.html">
<link rel="prev" href="index-2702.html" type="text/html">
<link rel="next" href="index-2700.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/string-comparison-using-or-vs-strcmp/" class="u-url">String comparison using '==' or '===' vs. 'strcmp()'</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/string-comparison-using-or-vs-strcmp/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:30:04+08:00" itemprop="datePublished" title="2023-03-05 11:30">2023-03-05 11:30</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It seems that PHP's <code>===</code> operator is case sensitive. So is there a reason to
use <code>strcmp()</code>?</p>
<p>Is it safe to do something like the following?</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span>$<span class="nv">password</span><span class="w"> </span><span class="o">===</span><span class="w"> </span>$<span class="nv">password2</span><span class="ss">)</span><span class="w"> </span>{<span class="w"> </span>...<span class="w"> </span>}
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The reason to use it is because <code>strcmp</code></p>
<blockquote>
<p>returns &lt; 0 if str1 is less than str2; &gt; 0 if str1 is greater than str2, and
0 if they are equal.</p>
</blockquote>
<p><code>===</code> only returns <code>true</code> or <code>false</code>, it doesn't tell you which is the
"greater" string.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You should never use <code>==</code> for string comparison. <code>===</code> is OK.</p>
<div class="code"><pre class="code literal-block">$something = 0;
echo ('password123' == $something) ? 'true' : 'false';
</pre></div>

<p>Just run the above code and you'll see why.</p>
<div class="code"><pre class="code literal-block">$something = 0;
echo ('password123' === $something) ? 'true' : 'false';
</pre></div>

<p>Now, that's a little better.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-localise-a-string-inside-the-ios-info-plist-file/" class="u-url">How to localise a string inside the iOS info.plist file?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-localise-a-string-inside-the-ios-info-plist-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:28:35+08:00" itemprop="datePublished" title="2023-03-05 11:28">2023-03-05 11:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>As you might know the <strong>iOS 8</strong> requires
<strong>NSLocationWhenInUseUsageDescription</strong> key for using user's location. I have
added this key and some general information into my info plist. <img alt="enter image
description here" src="images/6gzmx.png"></p>
<p>How can I use translation string inside the plist file ?</p>
<p>-- Update --</p>
<p>I already have a Localizable string. I'm just wondering that can I use
something like NSLocalizedString(MYSTRING,nil) inside the plist string. I know
that I can create multiple file of info.plist for localisation but I was
wondering there might be an easier way.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You should use <code>InfoPlist.strings</code> file (keep both <code>I</code> &amp; <code>P</code> capital) to
localize values of <code>Info.plist</code>. To do this, go to <code>File-&gt;New-&gt;File</code>, choose
<code>Strings File</code> under <code>Resource</code> tab of <code>iOS</code>, name it <code>InfoPlist</code>, and create.
Open and insert the <code>Info.plist</code> values you want to localize like:</p>
<div class="code"><pre class="code literal-block">NSLocationWhenInUseUsageDescription = "Description of this";
</pre></div>

<p>Now you can localize <code>InfoPlist.strings</code> file with translations.</p>
<p>Select the localization options, or enable localization if needed,</p>
<p><img alt="right side editor" src="images/B4hNo.png"></p>
<p>You should be able to see the file also on the left side editor.</p>
<p><img alt="left side editor" src="images/mG8eT.png"></p>
<p><strong>NOTE</strong> : When testing the localizations on the simulator. You have to change
the language on the simulator itself not just the language in the Xcode
target. ( <strong>Credits</strong> to John Webb)</p>
<p>Here is the official documentation for <code>Info.plist</code> keys localization.</p>
<p><strong>Credits</strong> to <em>Marco</em> , thanks for including the pics in this answer!</p>
<p><br></p>
<h3>Suggest</h3>
<p>All the above did not work for me (XCode 7.3) so I read Apple reference on how
to do, and it is much simpler than described above. According to Apple:</p>
<blockquote>
<p>Localized values are not stored in the Info.plist file itself. Instead, you
store the values for a particular localization in a strings file with the
name InfoPlist.strings. You place this file in the same language-specific
project directory that you use to store other resources for the same
localization.</p>
</blockquote>
<p>Accordingly, I created a string file named <strong>InfoPlist.strings</strong> and placed it
in the xx.lproj folder of the "xx" language (and added it to the project using
File-&gt;Add Files to ...). That's it. No need for the key "Localized resources
can be mixed" = YES, and no need for InfoPlist.strings in base.lproj or
en.lproj.</p>
<p>The application uses the Info.plist key-value as the default value if it can
not find a key in the language specific file. Thus, I put my English value in
the Info.plist file and the translated one in the language specific file,
tested and everything works.</p>
<p>In particular, there is no need to localize the InfoPlist.strings (which
creates a version of the file in the base.lproj, en.lroj, and xx.lproj), and
in my case going that way did not work.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/django-auto-now-and-auto-now-add/" class="u-url">Django auto_now and auto_now_add</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/django-auto-now-and-auto-now-add/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T11:27:00+08:00" itemprop="datePublished" title="2023-03-05 11:27">2023-03-05 11:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>For Django 1.1.</p>
<p>I have this in my models.py:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">User</span>(<span class="n">models</span>.<span class="n">Model</span>):
    <span class="n">created</span> = <span class="n">models</span>.<span class="n">DateTimeField</span>(<span class="n">auto_now_add</span>=<span class="nb">True</span>)
    <span class="nb">modified</span> = <span class="n">models</span>.<span class="n">DateTimeField</span>(<span class="n">auto_now</span>=<span class="nb">True</span>)
</pre></div>

<p>When updating a row I get:</p>
<div class="code"><pre class="code literal-block"><span class="o">[</span><span class="n">Sun Nov 15 02:18:12 2009</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">error</span><span class="o">]</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ptarjan</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">twitter</span><span class="o">-</span><span class="n">meme</span><span class="o">/</span><span class="n">django</span><span class="o">/</span><span class="n">db</span><span class="o">/</span><span class="n">backends</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">base</span><span class="p">.</span><span class="nl">py</span><span class="p">:</span><span class="mi">84</span><span class="err">:</span><span class="w"> </span><span class="nl">Warning</span><span class="p">:</span><span class="w"> </span><span class="k">Column</span><span class="w"> </span><span class="s1">'created'</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="k">null</span>
<span class="o">[</span><span class="n">Sun Nov 15 02:18:12 2009</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">error</span><span class="o">]</span><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="nc">cursor</span><span class="p">.</span><span class="k">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
</pre></div>

<p>The relevant part of my database is:</p>
<div class="code"><pre class="code literal-block"><span class="w">  </span><span class="n n-Quoted">`created`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n n-Quoted">`modified`</span><span class="w"> </span><span class="kt">datetime</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="no">NULL</span><span class="p">,</span>
</pre></div>

<p>Is this cause for concern?</p>
<p>Side question: in my admin tool, those two fields aren't showing up. Is that
expected?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Any field with the <code>auto_now</code> attribute set will also inherit <code>editable=False</code>
and therefore will not show up in the admin panel. There has been talk in the
past about making the <code>auto_now</code> and <code>auto_now_add</code> arguments go away, and
although they still exist, I feel you're better off just using a custom
<code>save()</code> method.</p>
<p>So, to make this work properly, I would recommend not using <code>auto_now</code> or
<code>auto_now_add</code> and instead define your own <code>save()</code> method to make sure that
<code>created</code> is only updated if <code>id</code> is not set (such as when the item is first
created), and have it update <code>modified</code> every time the item is saved.</p>
<p>I have done the exact same thing with other projects I have written using
Django, and so your <code>save()</code> would look like this:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">created</span>     <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">modified</span>    <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">''' On save, update timestamps '''</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">created</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modified</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

<p><strong>Edit in response to comments:</strong></p>
<p>The reason why I just stick with overloading <code>save()</code> vs. relying on these
field arguments is two-fold:</p>
<ol>
<li>The aforementioned ups and downs with their reliability. These arguments are heavily reliant on the way each type of database that Django knows how to interact with treats a date/time stamp field, and seems to break and/or change between every release. (Which I believe is the impetus behind the call to have them removed altogether).</li>
<li>The fact that they only work on DateField, DateTimeField, and TimeField, and by using this technique you are able to automatically populate any field type every time an item is saved.</li>
<li>Use <code>django.utils.timezone.now()</code> vs. <code>datetime.datetime.now()</code>, because it will return a TZ-aware or naive <code>datetime.datetime</code> object depending on <code>settings.USE_TZ</code>.</li>
</ol>
<p>To address why the OP saw the error, I don't know exactly, but it looks like
<code>created</code> isn't even being populated at all, despite having
<code>auto_now_add=True</code>. To me it stands out as a bug, and underscores item #1 in
my little list above: <code>auto_now</code> and <code>auto_now_add</code> are flaky at best.</p>
<p><br></p>
<h3>Suggest</h3>
<p>But I wanted to point out that the opinion expressed in the accepted answer is
somewhat outdated. According to more recent discussions (django bugs #7634 and</p>
<h2>12785), <code>auto_now</code> and <code>auto_now_add</code> are not going anywhere, and even if you</h2>
<p>go to the original discussion, you'll find strong arguments against the RY (as
in DRY) in custom save methods.</p>
<p>A better solution has been offered (custom field types), but didn't gain
enough momentum to make it into django. You can write your own in three lines
(it's Jacob Kaplan-Moss' suggestion).</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>


<span class="k">class</span> <span class="nc">AutoDateTimeField</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">pre_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_instance</span><span class="p">,</span> <span class="n">add</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

<span class="c1">#usage</span>
<span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
<span class="n">updated_at</span> <span class="o">=</span> <span class="n">AutoDateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2702.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2700.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
