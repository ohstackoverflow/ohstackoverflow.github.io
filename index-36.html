<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 36) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-36.html">
<link rel="prev" href="index-37.html" type="text/html">
<link rel="next" href="index-35.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-you-xiao-di-bian-li-java-map-zhong-de-mei-ge-tiao-mu/" class="u-url">如何有效地遍历 Java Map 中的每个条目？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-you-xiao-di-bian-li-java-map-zhong-de-mei-ge-tiao-mu/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:17:57+08:00" itemprop="datePublished" title="2023-02-16 19:17">2023-02-16 19:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>如果我有一个用<code>Map</code>Java 实现接口的对象，并且我希望遍历其中包含的每一对，那么遍历映射的最有效方法是什么？</p>
<p>元素的顺序是否取决于我为界面提供的特定地图实现？</p>
<p><br><br></p>
<h2>解答</h2>
<div class="code"><pre class="code literal-block"><span class="nv">Map</span><span class="o">&lt;</span><span class="nv">String</span>,<span class="w"> </span><span class="nv">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>...
<span class="k">for</span><span class="w"> </span><span class="ss">(</span><span class="nv">Map</span>.<span class="nv">Entry</span><span class="o">&lt;</span><span class="nv">String</span>,<span class="w"> </span><span class="nv">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">entry</span><span class="w"> </span>:<span class="w"> </span><span class="nv">map</span>.<span class="nv">entrySet</span><span class="ss">())</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">System</span>.<span class="nv">out</span>.<span class="nv">println</span><span class="ss">(</span><span class="nv">entry</span>.<span class="nv">getKey</span><span class="ss">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">entry</span>.<span class="nv">getValue</span><span class="ss">())</span><span class="c1">;</span>
}
</pre></div>

<p>在 Java 10+ 上：</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">map</span><span class="o">.</span><span class="n">entrySet</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">getKey</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="o">.</span><span class="n">getValue</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>为了总结其他答案并将它们与我所知道的结合起来，我找到了 10
种主​​要方法（见下文）。另外，我写了一些性能测试（见下面的结果）。例如，如果我们想找到一个映射的所有键和值的总和，我们可以这样写：</p>
<ol>
<li>
<p>使用 <strong>迭代器</strong> 和 <strong>Map.Entry</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>Iterator<map.entry integer>&gt; it = map.entrySet().iterator();
while (it.hasNext()) {
    Map.Entry<integer integer> pair = it.next();
    i += pair.getKey() + pair.getValue();
}</integer></map.entry></p>
</li>
<li>
<p>使用 <strong>foreach</strong> 和 <strong>Map.Entry</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>for (Map.Entry<integer integer> pair : map.entrySet()) {
    i += pair.getKey() + pair.getValue();
}</integer></p>
</li>
<li>
<p>从 Java 8使用 <strong>forEach</strong></p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>map.forEach((k, v) -&gt; i[0] += k + v);</p>
</li>
<li>
<p>使用 <strong>keySet</strong> 和 <strong>foreach</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>for (Integer key : map.keySet()) {
    i += key + map.get(key);
}</p>
</li>
<li>
<p>使用 <strong>keySet</strong> 和 <strong>迭代器</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>Iterator<integer> itr2 = map.keySet().iterator();
while (itr2.hasNext()) {
    Integer key = itr2.next();
    i += key + map.get(key);
}</integer></p>
</li>
<li>
<p>使用 <strong>for</strong> 和 <strong>Map.Entry</strong></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>for (Iterator<map.entry integer>&gt; entries = map.entrySet().iterator(); entries.hasNext(); ) {
    Map.Entry<integer integer> entry = entries.next();
    i += entry.getKey() + entry.getValue();
}</integer></map.entry></p>
</li>
<li>
<p>使用 Java 8 <strong>流 API</strong></p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>map.entrySet().stream().forEach(e -&gt; i[0] += e.getKey() + e.getValue());</p>
</li>
<li>
<p>使用 Java 8 <strong>Stream API 并行</strong></p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>map.entrySet().stream().parallel().forEach(e -&gt; i[0] += e.getKey() + e.getValue());</p>
</li>
<li>
<p>使用 <strong>IterableMap</strong> 的<code>Apache Collections</code></p>
<div class="code"><pre class="code literal-block">long i = 0;
</pre></div>

<p>MapIterator<integer integer> it = iterableMap.mapIterator();
while (it.hasNext()) {
    i += it.next() + it.getValue();
}</integer></p>
</li>
<li>
<p>使用Eclipse (CS) 集合的 <strong>MutableMap</strong></p>
<div class="code"><pre class="code literal-block">final long[] i = {0};
</pre></div>

<p>mutableMap.forEachKeyValue((key, value) -&gt; {
    i[0] += key + value;
});</p>
</li>
</ol>
<p><strong>性能测试</strong> （模式 = AverageTime，系统 = Windows 8.1 64 位，Intel i7-4790 3.60 GHz，16 GB）</p>
<ol>
<li>
<p>对于小地图（100 个元素），分数 0.308 是最好的</p>
<div class="code"><pre class="code literal-block">Benchmark                          Mode  Cnt  Score    Error  Units
</pre></div>

<p>test3_UsingForEachAndJava8         avgt  10   0.308 ±  0.021  µs/op
test10_UsingEclipseMap             avgt  10   0.309 ±  0.009  µs/op
test1_UsingWhileAndMapEntry        avgt  10   0.380 ±  0.014  µs/op
test6_UsingForAndIterator          avgt  10   0.387 ±  0.016  µs/op
test2_UsingForEachAndMapEntry      avgt  10   0.391 ±  0.023  µs/op
test7_UsingJava8StreamApi          avgt  10   0.510 ±  0.014  µs/op
test9_UsingApacheIterableMap       avgt  10   0.524 ±  0.008  µs/op
test4_UsingKeySetAndForEach        avgt  10   0.816 ±  0.026  µs/op
test5_UsingKeySetAndIterator       avgt  10   0.863 ±  0.025  µs/op
test8_UsingJava8StreamApiParallel  avgt  10   5.552 ±  0.185  µs/op</p>
</li>
<li>
<p>对于具有 10000 个元素的地图，分数 37.606 是最好的</p>
<div class="code"><pre class="code literal-block">Benchmark                           Mode   Cnt  Score      Error   Units
</pre></div>

<p>test10_UsingEclipseMap              avgt   10    37.606 ±   0.790  µs/op
test3_UsingForEachAndJava8          avgt   10    50.368 ±   0.887  µs/op
test6_UsingForAndIterator           avgt   10    50.332 ±   0.507  µs/op
test2_UsingForEachAndMapEntry       avgt   10    51.406 ±   1.032  µs/op
test1_UsingWhileAndMapEntry         avgt   10    52.538 ±   2.431  µs/op
test7_UsingJava8StreamApi           avgt   10    54.464 ±   0.712  µs/op
test4_UsingKeySetAndForEach         avgt   10    79.016 ±  25.345  µs/op
test5_UsingKeySetAndIterator        avgt   10    91.105 ±  10.220  µs/op
test8_UsingJava8StreamApiParallel   avgt   10   112.511 ±   0.365  µs/op
test9_UsingApacheIterableMap        avgt   10   125.714 ±   1.935  µs/op</p>
</li>
<li>
<p>对于具有 100000 个元素的地图，分数 1184.767 是最好的</p>
<div class="code"><pre class="code literal-block">Benchmark                          Mode   Cnt  Score        Error    Units
</pre></div>

<p>test1_UsingWhileAndMapEntry        avgt   10   1184.767 ±   332.968  µs/op
test10_UsingEclipseMap             avgt   10   1191.735 ±   304.273  µs/op
test2_UsingForEachAndMapEntry      avgt   10   1205.815 ±   366.043  µs/op
test6_UsingForAndIterator          avgt   10   1206.873 ±   367.272  µs/op
test8_UsingJava8StreamApiParallel  avgt   10   1485.895 ±   233.143  µs/op
test5_UsingKeySetAndIterator       avgt   10   1540.281 ±   357.497  µs/op
test4_UsingKeySetAndForEach        avgt   10   1593.342 ±   294.417  µs/op
test3_UsingForEachAndJava8         avgt   10   1666.296 ±   126.443  µs/op
test7_UsingJava8StreamApi          avgt   10   1706.676 ±   436.867  µs/op
test9_UsingApacheIterableMap       avgt   10   3289.866 ±  1445.564  µs/op</p>
</li>
</ol>
<p>图表（性能测试取决于地图大小）</p>
<p><img alt="在此处输入图像描述" src="images/17VGh.png"></p>
<p>表格（性能测试取决于地图大小）</p>
<div class="code"><pre class="code literal-block">          100     600      1100     1600     2100
test10    0.333    1.631    2.752    5.937    8.024
test3     0.309    1.971    4.147    8.147   10.473
test6     0.372    2.190    4.470    8.322   10.531
test1     0.405    2.237    4.616    8.645   10.707
test2     0.376    2.267    4.809    8.403   10.910
test7     0.473    2.448    5.668    9.790   12.125
test9     0.565    2.830    5.952   13.220   16.965
test4     0.808    5.012    8.813   13.939   17.407
test5     0.810    5.104    8.533   14.064   17.422
test8     5.173   12.499   17.351   24.671   30.403
</pre></div>

<p>所有测试都在GitHub上。</p>
<p><br><br><a href="posts/how-do-i-efficiently-iterate-over-each-entry-in-a-java-map/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-ce-shi-yi-ge-kong-de-javascript-dui-xiang/" class="u-url">如何测试一个空的 JavaScript 对象？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-ce-shi-yi-ge-kong-de-javascript-dui-xiang/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:17:27+08:00" itemprop="datePublished" title="2023-02-16 19:17">2023-02-16 19:17</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>这个问题的答案是 社区的努力</strong>。编辑现有答案以改进这篇文章。它目前不接受新的答案或互动。</p>
<p>在 AJAX 请求之后，有时我的应用程序可能会返回一个空对象，例如：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
</pre></div>

<p>我如何检查是否是这种情况？</p>
<p><br><br></p>
<h2>解答</h2>
<p>ECMA 5+：</p>
<div class="code"><pre class="code literal-block"><span class="c1">// because Object.keys(new Date()).length === 0;</span>
<span class="c1">// we have to do some additional check</span>
<span class="n">obj</span><span class="w"> </span><span class="c1">// 👈 null and undefined check</span>
<span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="n">keys</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="nb">length</span><span class="w"> </span><span class="o">==</span><span class="p">=</span><span class="w"> </span><span class="mi">0</span>
<span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="n">getPrototypeOf</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="p">=</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="n">prototype</span>
</pre></div>

<p>但是请注意，这会创建一个不必要的数组（ 的返回值<code>keys</code>）。</p>
<p>ECMA 5 之前：</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">isEmpty</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="n">prop</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">({});</span>
<span class="p">}</span>
</pre></div>

<p>查询：</p>
<div class="code"><pre class="code literal-block">jQuery.isEmptyObject({}); // true
</pre></div>

<p>罗达什：</p>
<div class="code"><pre class="code literal-block">_.isEmpty({}); // true
</pre></div>

<p>下划线：</p>
<div class="code"><pre class="code literal-block">_.isEmpty({}); // true
</pre></div>

<p>胡克</p>
<div class="code"><pre class="code literal-block">Hoek.deepEqual({}, {}); // true
</pre></div>

<p>ExtJS</p>
<div class="code"><pre class="code literal-block">Ext.Object.isEmpty({}); // true
</pre></div>

<p>AngularJS（版本 1）</p>
<div class="code"><pre class="code literal-block">angular.equals({}, {}); // true
</pre></div>

<p>拉姆达</p>
<div class="code"><pre class="code literal-block">R.isEmpty({}); // true
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>如果ECMAScript 5 支持可用，您可以使用<code>Object.keys()</code>：</p>
<div class="code"><pre class="code literal-block"><span class="nv">function</span><span class="w"> </span><span class="nv">isEmpty</span><span class="ss">(</span><span class="nv">obj</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">Object</span>.<span class="nv">keys</span><span class="ss">(</span><span class="nv">obj</span><span class="ss">)</span>.<span class="nv">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="c1">;</span>
}
</pre></div>

<p>对于 ES3 和更早的版本，没有简单的方法可以做到这一点。您必须明确地遍历属性：</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="n">isEmpty</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><br><br><a href="posts/how-do-i-test-for-an-empty-javascript-object/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/jian-cha-javascript-dui-xiang-zhong-shi-fou-cun-zai-jian/" class="u-url">检查 JavaScript 对象中是否存在键？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/jian-cha-javascript-dui-xiang-zhong-shi-fou-cun-zai-jian/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T19:16:55+08:00" itemprop="datePublished" title="2023-02-16 19:16">2023-02-16 19:16</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>如何检查 JavaScript 对象或数组中是否存在特定键？</p>
<p>如果密钥不存在，而我尝试访问它，它会返回 false 吗？或者抛出错误？</p>
<p><br><br></p>
<h2>解答</h2>
<p>检查未定义性并不是测试键是否存在的准确方法。如果键存在但值实际上是怎么办<code>undefined</code>？</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s2">"key"</span><span class="p">]</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="n">undefined</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">exists</span><span class="o">!</span>
</pre></div>

<p>您应该改为使用<code>in</code>运算符：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">"key"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span><span class="w"> </span><span class="n">regardless</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">value</span>
</pre></div>

<p>如果要检查密钥是否不存在，请记住使用括号：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">not_key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="s2">"key"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="s2">"key"</span><span class="w"> </span><span class="n">doesn</span><span class="s1">'t exist in object</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="o">!</span><span class="s2">"key"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">this</span><span class="o">!</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s2">"false in obj"</span>
</pre></div>

<p>或者，如果您想特别测试对象实例的属性（而不是继承的属性），请使用<code>hasOwnProperty</code>：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">key</span><span class="p">:</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="p">};</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="s2">"key"</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="bp">true</span>
</pre></div>

<p><code>in</code>有关是和<code>hasOwnProperty</code>关键是的方法之间的性能比较<code>undefined</code>，请参阅此 <strong>基准</strong> ：</p>
<p><img alt="基准测试结果" src="images/PEuZT.png"></p>
<p><br></p>
<h3>更多建议</h3>
<h2>快速回答</h2>
<blockquote>
<p>如何检查 JavaScript 对象或数组中是否存在特定键？如果密钥不存在而我尝试访问它，它会返回 false 吗？或者抛出错误？</p>
</blockquote>
<p>使用（关联）数组样式或对象样式直接访问缺少的属性将返回 <em>未定义的</em> 常量。</p>
<h3>运算符和 <em>hasOwnProperty</em> 方法 <em>中的</em> 缓慢和可靠 __</h3>
<p>正如人们已经在这里提到的那样，您可以拥有一个对象，该对象的属性与“未定义”常量相关联。</p>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">bizzareObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">valid_key</span><span class="p">:</span><span class="w">  </span><span class="n">undefined</span><span class="p">};</span>
</pre></div>

<p>在这种情况下，您将不得不使用 <em>hasOwnProperty</em> 或 <em>in</em> operator 来知道密钥是否真的存在。但是， <em>但是价格是多少？</em></p>
<p>所以，我告诉你...</p>
<p><em>in</em> 运算符和 <em>hasOwnProperty</em> 是使用 Javascript 中的 Property Descriptor 机制的“方法”（类似于
Java 语言中的 Java 反射）。</p>
<p>http://www.ecma-international.org/ecma-262/5.1/#sec-8.10</p>
<blockquote>
<p>属性描述符类型用于解释命名属性属性的操作和具体化。属性描述符类型的值是由命名字段组成的记录，其中每个字段的名称是一个属性名称，其值是 8.6.1
中指定的相应属性值。此外，任何字段都可以存在或不存在。</p>
</blockquote>
<p>另一方面，调用对象方法或键将使用 Javascript [[Get]] 机制。那要快得多！</p>
<h3>基准</h3>
<p>https://jsben.ch/HaHQt</p>
<p><img alt="比较 JS 中的密钥访问" src="images/GjzNU.png">.</p>
<h5>
<em>在</em> 运算符中使用</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Impression"</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
</pre></div>

<p>结果是</p>
<div class="code"><pre class="code literal-block"><span class="mf">12</span><span class="p">,</span><span class="mf">931</span><span class="p">,</span><span class="mf">832</span><span class="w"> </span><span class="err">±</span><span class="mf">0.21</span><span class="err">%</span><span class="w"> </span><span class="n">ops</span><span class="o">/</span><span class="n">sec</span><span class="w">      </span><span class="mf">92</span><span class="err">%</span><span class="w"> </span><span class="n">slower</span>
</pre></div>

<h5>使用 hasOwnProperty</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="s2">"Impression"</span><span class="p">)</span>
</pre></div>

<p>结果是</p>
<div class="code"><pre class="code literal-block"><span class="mf">16</span><span class="p">,</span><span class="mf">021</span><span class="p">,</span><span class="mf">758</span><span class="w"> </span><span class="err">±</span><span class="mf">0.45</span><span class="err">%</span><span class="w"> </span><span class="n">ops</span><span class="o">/</span><span class="n">sec</span><span class="w">     </span><span class="mf">91</span><span class="err">%</span><span class="w"> </span><span class="n">slower</span>
</pre></div>

<h5>直接访问元素（括号样式）</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="s2">"Impression"</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span>
</pre></div>

<p>结果是</p>
<div class="code"><pre class="code literal-block"><span class="mf">168</span><span class="p">,</span><span class="mf">270</span><span class="p">,</span><span class="mf">439</span><span class="w"> </span><span class="err">±</span><span class="mf">0.13</span><span class="w"> </span><span class="n">ops</span><span class="o">/</span><span class="n">sec</span><span class="w">     </span><span class="mf">0.02</span><span class="err">%</span><span class="w"> </span><span class="n">slower</span>
</pre></div>

<h5>直接访问元素（对象样式）</h5>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="o">.</span><span class="n">Impression</span><span class="w">  </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span><span class="p">;</span>
</pre></div>

<p>结果是</p>
<div class="code"><pre class="code literal-block"><span class="mf">168</span><span class="p">,</span><span class="mf">303</span><span class="p">,</span><span class="mf">172</span><span class="w"> </span><span class="err">±</span><span class="mf">0.20</span><span class="err">%</span><span class="w">     </span><span class="n">fastest</span>
</pre></div>

<h3>编辑：为属性分配值的原因是什么<code>undefined</code>？</h3>
<p>这个问题让我很困惑。在 Javascript 中，对于不存在的对象至少有两个引用来避免这样的问题：<code>null</code>和<code>undefined</code>.</p>
<p><code>null</code>是原始值，表示有意不存在任何对象值，或者简而言之，确认 <strong>没有</strong>
值。另一方面，<code>undefined</code>是一个未知值（未定义）。如果有一个属性将在以后以 <em>适当的</em>
值使用，请考虑使用<code>null</code>引用而不是<code>undefined</code>因为在初始时刻该属性被 <strong>确认</strong> 为缺乏价值。</p>
<p>比较：</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">};</span><span class="w"> </span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="o">.</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">know</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">absent</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">design</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="p">:</span><span class="w">  </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">defined</span><span class="o">.</span><span class="w"> </span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">output</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="o">.</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">cannot</span><span class="w"> </span><span class="n">say</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="n">value</span><span class="o">.</span><span class="w"> </span><span class="n">In</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">case</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="p">[]</span><span class="o">.</span>
</pre></div>

<h3>建议</h3>
<p>避免带有<code>undefined</code>值的对象。尽可能直接检查并用于<code>null</code>初始化属性值。否则，使用
slow<code>in</code>运算符或<code>hasOwnProperty()</code>方法。</p>
<h3>编辑：12/04/2018 - 不再相关</h3>
<p>正如人们评论的那样，现代版本的 Javascript 引擎（Firefox
除外）已经改变了访问属性的方法。对于这种特殊情况，当前的实现比以前的实现要慢，但是访问密钥和对象之间的区别可以忽略不计。</p>
<p><br><br><a href="posts/checking-if-a-key-exists-in-a-javascript-object/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-37.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-35.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
