<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 963) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-963.html">
<link rel="prev" href="index-964.html" type="text/html">
<link rel="next" href="index-962.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/java-util-date-to-xmlgregoriancalendar/" class="u-url">java.util.Date to XMLGregorianCalendar</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/java-util-date-to-xmlgregoriancalendar/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:49:38+08:00" itemprop="datePublished" title="2023-02-17 20:49">2023-02-17 20:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Isn't there a convenient way of getting from a java.util.Date to a
XMLGregorianCalendar?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I should like to take a step back and a modern look at this 10 years old
question. The classes mentioned, <code>Date</code> and <code>XMLGregorianCalendar</code>, are old
now. I challenge the use of them and offer alternatives.</p>
<ul>
<li>
<code>Date</code> was always poorly designed and is more than 20 years old. This is simple: don’t use it.</li>
<li>
<code>XMLGregorianCalendar</code> is old too and has an old-fashioned design. As I understand it, it was used for producing dates and times in XML format for XML documents. Like <code>2009-05-07T19:05:45.678+02:00</code> or <code>2009-05-07T17:05:45.678Z</code>. These formats agree well enough with ISO 8601 that the classes of java.time, the modern Java date and time API, can produce them, which we prefer.</li>
</ul>
<h3>No conversion necessary</h3>
<p>For many (most?) purposes the modern replacement for a <code>Date</code> will be an
<code>Instant</code>. An <code>Instant</code> is a point in time (just as a <code>Date</code> is).</p>
<div class="code"><pre class="code literal-block">    Instant yourInstant = // ...
    System.out.println(yourInstant);
</pre></div>

<p>An example output from this snippet:</p>
<blockquote>
<p>2009-05-07T17:05:45.678Z</p>
</blockquote>
<p>It’s the same as the latter of my example <code>XMLGregorianCalendar</code> strings
above. As most of you know, it comes from <code>Instant.toString</code> being implicitly
called by <code>System.out.println</code>. With java.time, in many cases we don’t need
the conversions that in the old days we made between <code>Date</code>, <code>Calendar</code>,
<code>XMLGregorianCalendar</code> and other classes (in some cases we do need
conversions, though, I am showing you a couple in the next section).</p>
<h3>Controlling the offset</h3>
<p>Neither a <code>Date</code> nor in <code>Instant</code> has got a time zone nor a UTC offset. The
previously accepted and still highest voted answer by Ben Noland uses the JVMs
current default time zone for selecting the offset of the
<code>XMLGregorianCalendar</code>. To include an offset in a modern object we use an
<code>OffsetDateTime</code>. For example:</p>
<div class="code"><pre class="code literal-block">    ZoneId zone = ZoneId.of("America/Asuncion");
    OffsetDateTime dateTime = yourInstant.atZone(zone).toOffsetDateTime();
    System.out.println(dateTime);
</pre></div>

<blockquote>
<p>2009-05-07T13:05:45.678-04:00</p>
</blockquote>
<p>Again this conforms with XML format. If you want to use the current JVM time
zone setting again, set <code>zone</code> to <code>ZoneId.systemDefault()</code>.</p>
<h3>What if I absolutely need an XMLGregorianCalendar?</h3>
<p>There are more ways to convert <code>Instant</code> to <code>XMLGregorianCalendar</code>. I will
present a couple, each with its pros and cons. First, just as an
<code>XMLGregorianCalendar</code> produces a string like <code>2009-05-07T17:05:45.678Z</code>, it
can also be built from such a string:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">dateTimeString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yourInstant</span><span class="p">.</span><span class="n">toString</span><span class="p">();</span>
<span class="w">    </span><span class="n">XMLGregorianCalendar</span><span class="w"> </span><span class="n">date2</span>
<span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="n">DatatypeFactory</span><span class="p">.</span><span class="n">newInstance</span><span class="p">().</span><span class="n">newXMLGregorianCalendar</span><span class="p">(</span><span class="n">dateTimeString</span><span class="p">);</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">date2</span><span class="p">);</span>
</pre></div>

<blockquote>
<p>2009-05-07T17:05:45.678Z</p>
</blockquote>
<p>Pro: it’s short and I don’t think it gives any surprises. Con: To me it feels
like a waste formatting the instant into a string and parsing it back.</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">ZonedDateTime</span><span class="w"> </span><span class="n">dateTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yourInstant</span><span class="p">.</span><span class="n">atZone</span><span class="p">(</span><span class="n">zone</span><span class="p">);</span>
<span class="w">    </span><span class="n">GregorianCalendar</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GregorianCalendar</span><span class="p">.</span><span class="n">from</span><span class="p">(</span><span class="n">dateTime</span><span class="p">);</span>
<span class="w">    </span><span class="n">XMLGregorianCalendar</span><span class="w"> </span><span class="n">date2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DatatypeFactory</span><span class="p">.</span><span class="n">newInstance</span><span class="p">().</span><span class="n">newXMLGregorianCalendar</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">date2</span><span class="p">);</span>
</pre></div>

<blockquote>
<p>2009-05-07T13:05:45.678-04:00</p>
</blockquote>
<p>Pro: It’s the official conversion. Controlling the offset comes naturally.
Con: It goes through more steps and is therefore longer.</p>
<h3>What if we got a Date?</h3>
<p>If you got an old-fashioned <code>Date</code> object from a legacy API that you cannot
afford to change just now, convert it to <code>Instant</code>:</p>
<div class="code"><pre class="code literal-block">    Instant i = yourDate.toInstant();
    System.out.println(i);
</pre></div>

<p>Output is the same as before:</p>
<blockquote>
<p>2009-05-07T17:05:45.678Z</p>
</blockquote>
<p>If you want to control the offset, convert further to an <code>OffsetDateTime</code> in
the same way as above.</p>
<p>If you’ve got an old-fashioned <code>Date</code> and absolutely need an old-fashioned
<code>XMLGregorianCalendar</code>, just use the answer by Ben Noland.</p>
<h3>Links</h3>
<ul>
<li>Oracle tutorial: Date Time explaining how to use java.time.</li>
<li>XSD Date and Time Data Types on W3Schools.</li>
<li>Wikipedia article: ISO 8601</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>For those that might end up here looking for the opposite conversion (from
<code>XMLGregorianCalendar</code> to <code>Date</code>):</p>
<div class="code"><pre class="code literal-block"><span class="n">XMLGregorianCalendar</span><span class="w"> </span><span class="n">xcal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">assume</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">initialized</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Date</span><span class="w"> </span><span class="n">dt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xcal</span><span class="p">.</span><span class="n">toGregorianCalendar</span><span class="p">().</span><span class="n">getTime</span><span class="p">();</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/import-sql-dump-into-postgresql-database/" class="u-url">Import SQL dump into PostgreSQL database</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/import-sql-dump-into-postgresql-database/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:49:06+08:00" itemprop="datePublished" title="2023-02-17 20:49">2023-02-17 20:49</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>We are switching hosts and the old one provided a SQL dump of the PostgreSQL
database of our site.</p>
<p>Now, I'm trying to set this up on a local WAMP server to test this.</p>
<p>The only problem is that I don't have an idea how to import this database in
the PostgreSQL 9 that I have set up.</p>
<p>I tried pgAdmin III but I can't seem to find an 'import' function. So I just
opened the SQL editor and pasted the contents of the dump there and executed
it, it creates the tables but it keeps giving me errors when it tries to put
the data in it.</p>
<div class="code"><pre class="code literal-block"><span class="n">ERROR</span><span class="o">:</span><span class="w">  </span><span class="n">syntax</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">near</span><span class="w"> </span><span class="s2">"t"</span>
<span class="n">LINE</span><span class="w"> </span><span class="mi">474</span><span class="o">:</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="mi">2011</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">16</span><span class="o">:</span><span class="mi">45</span><span class="o">:</span><span class="mf">01.768633</span><span class="w"> </span><span class="mi">2011</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">16</span><span class="o">:</span><span class="mi">45</span><span class="o">:</span><span class="mf">01.768633</span><span class="w"> </span><span class="n">view</span><span class="o">...</span>

<span class="n">The</span><span class="w"> </span><span class="n">lines</span><span class="o">:</span>
<span class="n">COPY</span><span class="w"> </span><span class="n">tb_abilities</span><span class="w"> </span><span class="o">(</span><span class="n">active</span><span class="o">,</span><span class="w"> </span><span class="n">creation</span><span class="o">,</span><span class="w"> </span><span class="n">modtime</span><span class="o">,</span><span class="w"> </span><span class="n">id</span><span class="o">,</span><span class="w"> </span><span class="n">lang</span><span class="o">,</span><span class="w"> </span><span class="n">title</span><span class="o">,</span><span class="w"> </span><span class="n">description</span><span class="o">)</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">stdin</span><span class="o">;</span>
<span class="n">t</span><span class="w">   </span><span class="mi">2011</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">16</span><span class="o">:</span><span class="mi">45</span><span class="o">:</span><span class="mf">01.768633</span><span class="w">  </span><span class="mi">2011</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">24</span><span class="w"> </span><span class="mi">16</span><span class="o">:</span><span class="mi">45</span><span class="o">:</span><span class="mf">01.768633</span><span class="w">  </span><span class="n">view</span><span class="w">    </span><span class="n">nl</span><span class="w"> </span><span class="o">...</span>
</pre></div>

<p>I've also tried to do this with the command prompt but I can't find the
command that I need.</p>
<p>If I do</p>
<div class="code"><pre class="code literal-block"><span class="nt">psql</span><span class="w"> </span><span class="nt">mydatabase</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nt">C</span><span class="o">:/</span><span class="nt">database</span><span class="o">/</span><span class="nt">db-backup</span><span class="p">.</span><span class="nc">sql</span><span class="o">;</span>
</pre></div>

<p>I get the error</p>
<div class="code"><pre class="code literal-block"><span class="n">ERROR</span><span class="o">:</span><span class="w">  </span><span class="n">syntax</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">near</span><span class="w"> </span><span class="s2">"psql"</span>
<span class="n">LINE</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">psql</span><span class="w"> </span><span class="n">mydatabase</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">C</span><span class="o">:/</span><span class="n">database</span><span class="o">/</span><span class="n">db</span><span class="o">-</span><span class="n">backu</span><span class="o">...</span>
<span class="w">        </span><span class="o">^</span>
</pre></div>

<p>What's the best way to import the database?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">psql databasename &lt; data_base_dump
</pre></div>

<p>That's the command you are looking for.</p>
<p>Beware: <code>databasename</code> must be created before importing. Have a look at the
PostgreSQL Docs Chapter 23. Backup and Restore.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here is the command you are looking for.</p>
<div class="code"><pre class="code literal-block">psql -h hostname -d databasename -U username -f file.sql
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/best-way-to-get-application-folder-path/" class="u-url">Best way to get application folder path</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/best-way-to-get-application-folder-path/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T20:48:20+08:00" itemprop="datePublished" title="2023-02-17 20:48">2023-02-17 20:48</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I see that there are some ways to get the application folder path:</p>
<ol>
<li><code>Application.StartupPath</code></li>
<li><code>System.IO.Path.GetDirectoryName( System.Reflection.Assembly.GetExecutingAssembly().Location)</code></li>
<li><code>AppDomain.CurrentDomain.BaseDirectory</code></li>
<li><code>System.IO.Directory.GetCurrentDirectory()</code></li>
<li><code>Environment.CurrentDirectory</code></li>
<li><code>System.IO.Path.GetDirectoryName( System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase)</code></li>
<li><code>System.IO.Path.GetDirectory(Application.ExecutablePath)</code></li>
</ol>
<p>What is the best way depending on the situation?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>AppDomain.CurrentDomain.BaseDirectory</code> is probably the most useful for
accessing files whose location is relative to the application install
directory.</p>
<p>In an ASP.NET application, this will be the application root directory, not
the bin subfolder - which is probably what you usually want. In a client
application, it will be the directory containing the main executable.</p>
<p>In a VSTO 2005 application, it will be the directory containing the VSTO
managed assemblies for your application, not, say, the path to the Excel
executable.</p>
<p>The others may return different directories depending on your environment -
for example see @Vimvq1987's answer.</p>
<p><code>CodeBase</code> is the place where a file was found and can be a URL beginning with
http://. In which case <code>Location</code> will probably be the assembly download
cache. CodeBase is not guaranteed to be set for assemblies in the GAC.</p>
<p><strong>UPDATE</strong> These days (.NET Core, .NET Standard 1.3+ or .NET Framework 4.6+)
it's better to use <code>AppContext.BaseDirectory</code> rather than
<code>AppDomain.CurrentDomain.BaseDirectory</code>. Both are equivalent, but multiple
AppDomains are no longer supported.</p>
<p><br></p>
<h3>Suggest</h3>
<ol>
<li>
<p><code>Application.StartupPath</code>and 7. <code>System.IO.Path.GetDirectoryName(Application.ExecutablePath)</code> - Is only going to work for Windows Forms application</p>
</li>
<li>
<p><code>System.IO.Path.GetDirectoryName( System.Reflection.Assembly.GetExecutingAssembly().Location)</code></p>
</li>
</ol>
<p>Is going to give you something like:
<code>"C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Temporary ASP.NET
Files\\legal-
services\\e84f415e\\96c98009\\assembly\\dl3\\42aaba80\\bcf9fd83_4b63d101"</code>
which is where the page that you are running is.</p>
<ol>
<li>
<p><code>AppDomain.CurrentDomain.BaseDirectory</code> for web application could be useful and will return something like <code>"C:\\hg\\Services\\Services\\Services.Website\\"</code> which is base directory and is quite useful.</p>
</li>
<li>
<p><code>System.IO.Directory.GetCurrentDirectory()</code> and 5. <code>Environment.CurrentDirectory</code></p>
</li>
</ol>
<p>will get you location of where the process got fired from - so for web app
running in debug mode from Visual Studio something like <code>"C:\\Program Files
(x86)\\IIS Express"</code></p>
<ol>
<li><code>System.IO.Path.GetDirectoryName( System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase)</code></li>
</ol>
<p>will get you location where <code>.dll</code> that is running the code is, for web app
that could be <code>"file:\\C:\\hg\\Services\\Services\\Services.Website\\bin"</code></p>
<p>Now in case of for example console app points 2-6 will be directory where
<code>.exe</code> file is.</p>
<p>Hope this saves you some time.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-964.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-962.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
