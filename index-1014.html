<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1014) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1014.html">
<link rel="prev" href="index-1015.html" type="text/html">
<link rel="next" href="index-1013.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/run-r-script-from-command-line/" class="u-url">Run R script from command line</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/run-r-script-from-command-line/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:33:58+08:00" itemprop="datePublished" title="2023-02-17 22:33">2023-02-17 22:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a file, called <code>a.r</code>, it has a <code>chmod</code> of 755,</p>
<div class="code"><pre class="code literal-block"><span class="n">sayHello</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(){</span>
<span class="w">   </span><span class="nf">print</span><span class="p">(</span><span class="s">'hello'</span><span class="p">)</span>
<span class="p">}</span>

<span class="nf">sayHello</span><span class="p">()</span>
</pre></div>

<p>How can I run this via command-line?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you want the output to print to the terminal it is best to use Rscript</p>
<div class="code"><pre class="code literal-block">Rscript a.R
</pre></div>

<p>Note that when using <code>R CMD BATCH a.R</code> that instead of redirecting output to
standard out and displaying on the terminal a new file called a.Rout will be
created.</p>
<div class="code"><pre class="code literal-block">R CMD BATCH a.R
# Check the output
cat a.Rout
</pre></div>

<p>One other thing to note about using Rscript is that it doesn't load the
<code>methods</code> package by default which can cause confusion. So if you're relying
on anything that methods provides you'll want to load it explicitly in your
script.</p>
<p>If you really want to use the <code>./a.R</code> way of calling the script you could add
an appropriate <code>#!</code> to the top of the script</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/run-r-script-from-command-line/#-1"><code data-line-number="1"></code></a></td>
<td class="code"><code><span class="c1">#!/usr/bin/env Rscript</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/run-r-script-from-command-line/#-2"><code data-line-number="2"></code></a></td>
<td class="code"><code><span class="n">sayHello</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(){</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/run-r-script-from-command-line/#-3"><code data-line-number="3"></code></a></td>
<td class="code"><code><span class="w">   </span><span class="nf">print</span><span class="p">(</span><span class="s">'hello'</span><span class="p">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/run-r-script-from-command-line/#-4"><code data-line-number="4"></code></a></td>
<td class="code"><code><span class="p">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/run-r-script-from-command-line/#-5"><code data-line-number="5"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/run-r-script-from-command-line/#-6"><code data-line-number="6"></code></a></td>
<td class="code"><code><span class="nf">sayHello</span><span class="p">()</span>
</code></td>
</tr>
</table></div>
<p>I will also note that if you're running on a *unix system there is the useful
littler package which provides easy command line piping to R. It may be
necessary to use littler to run shiny apps via a script? Further details can
be found in this question.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This does not answer the question directly. But someone may end up here
because they want to run a oneliner of R from the terminal. For example, if
you just want to install some missing packages and quit, this oneliner can be
very convenient. I use it a lot when I suddenly find out that I miss some
packages, and I want to install them to where I want.</p>
<ul>
<li>
<p>To install to the default location:</p>
<div class="code"><pre class="code literal-block">R -e 'install.packages(c("package1", "package2"))'
</pre></div>

</li>
<li>
<p>To install to a location that requires <code>root</code> privileges:</p>
<div class="code"><pre class="code literal-block">R -e 'install.packages(c("package1", "package2"), lib="/usr/local/lib/R/site-library")'
</pre></div>

</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-we-instantiate-an-abstract-class/" class="u-url">Can we instantiate an abstract class?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-we-instantiate-an-abstract-class/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:33:26+08:00" itemprop="datePublished" title="2023-02-17 22:33">2023-02-17 22:33</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>During one of my interview, I was asked "If we can instantiate an abstract
class?"</p>
<p>My reply was "No. we can't". But, interviewer told me "Wrong, we can."</p>
<p>I argued a bit on this. Then he told me to try this myself at home.</p>
<div class="code"><pre class="code literal-block">abstract class my {
    public void mymethod() {
        System.out.print("Abstract");
    }
}

class poly {
    public static void main(String a[]) {
        my m = new my() {};
        m.mymethod();
    }
}
</pre></div>

<p>Here, I'm creating instance of my class and calling method of abstract class.
Can anyone please explain this to me? Was I really wrong during my interview?</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>Here, i'm creating instance of my class</p>
</blockquote>
<p>No, you are not creating the instance of your abstract class here. Rather you
are creating an instance of an <em>anonymous subclass</em> of your abstract class.
And then you are invoking the method on your <em>abstract class</em> reference
pointing to <em>subclass object</em>.</p>
<p>This behaviour is clearly listed in JLS - Section # 15.9.1: -</p>
<blockquote>
<p>If the class instance creation expression ends in a class body, then the
class being instantiated is an anonymous class. Then:</p>
<ul>
<li>If T denotes a class, then an anonymous direct subclass of the class
named by T is declared. It is a compile-time error if the class denoted by T
is a final class.</li>
<li>If T denotes an interface, then an anonymous direct subclass of Object
that implements the interface named by T is declared.</li>
<li>In either case, the body of the subclass is the ClassBody given in the
class instance creation expression.</li>
<li>
<strong>The class being instantiated is the anonymous subclass.</strong>
</li>
</ul>
</blockquote>
<p>Emphasis mine.</p>
<p>Also, in JLS - Section # 12.5, you can read about the <em>Object Creation
Process</em>. I'll quote one statement from that here: -</p>
<blockquote>
<p>Whenever a new class instance is created, memory space is allocated for it
with room for all the instance variables declared in the class type and all
the instance variables declared in each superclass of the class type,
including all the instance variables that may be hidden.</p>
<p>Just before a reference to the newly created object is returned as the
result, the indicated constructor is processed to initialize the new object
using the following procedure:</p>
</blockquote>
<p>You can read about the complete procedure on the link I provided.</p>
<hr>
<p>To practically see that the class being instantiated is an <em>Anonymous
SubClass</em> , you just need to compile both your classes. Suppose you put those
classes in two different files:</p>
<p><strong>My.java:</strong></p>
<div class="code"><pre class="code literal-block">abstract class My {
    public void myMethod() {
        System.out.print("Abstract");
    }
}
</pre></div>

<p><strong>Poly.java:</strong></p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">Poly</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">My</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="nb nb-Type">String</span><span class="w"> </span><span class="n">a</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">My</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">My</span><span class="p">()</span><span class="w"> </span><span class="p">{};</span>
<span class="w">        </span><span class="n">m</span><span class="o">.</span><span class="n">myMethod</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Now, compile both your source files:</p>
<div class="code"><pre class="code literal-block">javac My.java Poly.java
</pre></div>

<p>Now in the directory where you compiled the source code, you will see the
following class files:</p>
<div class="code"><pre class="code literal-block">My.class
Poly$1.class  // Class file corresponding to anonymous subclass
Poly.class
</pre></div>

<p>See that class - <code>Poly$1.class</code>. It's the class file created by the compiler
corresponding to the anonymous subclass you instantiated using the below code:</p>
<div class="code"><pre class="code literal-block">new My() {};
</pre></div>

<p>So, it's clear that there is a different class being instantiated. It's just
that, that class is given a name only after compilation by the compiler.</p>
<p>In general, all the anonymous subclasses in your class will be named in this
fashion:</p>
<div class="code"><pre class="code literal-block">Poly$1.class, Poly$2.class, Poly$3.class, ... so on
</pre></div>

<p>Those numbers denote the order in which those anonymous classes appear in the
enclosing class.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The above instantiates an anonymous inner class which is a subclass of the
<code>my</code> abstract class. It's not strictly equivalent to instantiating the
abstract class itself. OTOH, every subclass instance is an instance of all its
super classes and interfaces, so most abstract classes are indeed instantiated
by instantiating one of their concrete subclasses.</p>
<p>If the interviewer just said "wrong!" without explaining, and gave this
example, as a unique counterexample, I think he doesn't know what he's talking
about, though.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-install-a-gem-or-update-rubygems-if-it-fails-with-a-permissions-error/" class="u-url">How to install a gem or update RubyGems if it fails with a permissions error</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-install-a-gem-or-update-rubygems-if-it-fails-with-a-permissions-error/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T22:32:51+08:00" itemprop="datePublished" title="2023-02-17 22:32">2023-02-17 22:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to install a gem using <code>gem install mygem</code> or update RubyGems using
<code>gem update --system</code>, and it fails with this error:</p>
<div class="code"><pre class="code literal-block"><span class="n">ERROR</span><span class="o">:</span><span class="w">  </span><span class="n">While</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">gem</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">(</span><span class="n">Gem</span><span class="o">::</span><span class="n">FilePermissionError</span><span class="o">)</span>
<span class="n">You</span><span class="w"> </span><span class="n">don</span><span class="err">'</span><span class="n">t</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">permissions</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="sr">/Library/Ruby/Gems/</span><span class="mf">2.0</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span><span class="n">directory</span><span class="o">.</span>
</pre></div>

<p>Does anyone have an idea how to solve this?</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>You don't have write permissions into the /Library/Ruby/Gems/1.8 directory.</p>
</blockquote>
<p>means exactly that, you don't have permission to write there.</p>
<p>That is the version of Ruby installed by Apple, for their own use. While it's
OK to make minor modifications to that <em>if you know what you're doing</em> ,
because you are not sure about the permissions problem, I'd say it's not a
good idea to continue along that track.</p>
<p>Instead, I'll strongly suggest you look into using either rbenv or RVM to
manage a separate Ruby, installed into a sandbox in your home directory, that
you can modify/fold/spindle/change without worrying about messing up the
system Ruby.</p>
<p>Between the two, I use rbenv, though I used RVM a lot in the past. rbenv takes
a more "hands-off" approach to managing your Ruby installation. RVM has a lot
of features and is very powerful, but, as a result is more intrusive. In
either case, <em>READ</em> the installation documentation for them a couple times
before starting to install whichever you pick.</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>You don't have write permissions into the /Library/Ruby/Gems/1.8 directory.</p>
</blockquote>
<p>means exactly that, you don't have permission to write there.</p>
<p>That is the version of Ruby installed by Apple, for their own use. While it's
OK to make minor modifications to that <em>if you know what you're doing</em> ,
because you are not sure about the permissions problem, I'd say it's not a
good idea to continue along that track.</p>
<p>Instead, I'll strongly suggest you look into using either rbenv or RVM to
manage a separate Ruby, installed into a sandbox in your home directory, that
you can modify/fold/spindle/change without worrying about messing up the
system Ruby.</p>
<p>Between the two, I use rbenv, though I used RVM a lot in the past. rbenv takes
a more "hands-off" approach to managing your Ruby installation. RVM has a lot
of features and is very powerful, but, as a result is more intrusive. In
either case, <em>READ</em> the installation documentation for them a couple times
before starting to install whichever you pick.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1015.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1013.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
