<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 467) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-467.html">
<link rel="prev" href="index-468.html" type="text/html">
<link rel="next" href="index-466.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-yield-keyword-used-for-in-c/" class="u-url">What is the yield keyword used for in C#?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-yield-keyword-used-for-in-c/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:35:06+08:00" itemprop="datePublished" title="2023-02-17 07:35">2023-02-17 07:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In the How Can I Expose Only a Fragment of IList&lt;&gt; question one of the answers
had the following code snippet:</p>
<div class="code"><pre class="code literal-block"><span class="nv">IEnumerable</span><span class="o">&lt;</span><span class="nv">object</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">FilteredList</span><span class="ss">()</span>
{
<span class="w">    </span><span class="nv">foreach</span><span class="ss">(</span><span class="nv">object</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">FullList</span><span class="ss">)</span>
<span class="w">    </span>{
<span class="w">        </span><span class="k">if</span><span class="ss">(</span><span class="nv">IsItemInPartialList</span><span class="ss">(</span><span class="nv">item</span><span class="ss">))</span>
<span class="w">            </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">item</span><span class="c1">;</span>
<span class="w">    </span>}
}
</pre></div>

<p>What does the yield keyword do there? I've seen it referenced in a couple
places, and one other question, but I haven't quite figured out what it
actually does. I'm used to thinking of yield in the sense of one thread
yielding to another, but that doesn't seem relevant here.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>yield</code> contextual keyword actually does quite a lot here.</p>
<p>The function returns an object that implements the <code>IEnumerable&lt;object&gt;</code>
interface. If a calling function starts <code>foreach</code>ing over this object, the
function is called again until it "yields". This is syntactic sugar introduced
in <strong>C# 2.0</strong>. In earlier versions you had to create your own <code>IEnumerable</code>
and <code>IEnumerator</code> objects to do stuff like this.</p>
<p>The easiest way understand code like this is to type-in an example, set some
breakpoints and see what happens. Try stepping through this example:</p>
<div class="code"><pre class="code literal-block"><span class="nv">public</span><span class="w"> </span><span class="nv">void</span><span class="w"> </span><span class="nv">Consumer</span><span class="ss">()</span>
{
<span class="w">    </span><span class="nv">foreach</span><span class="ss">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">Integers</span><span class="ss">())</span>
<span class="w">    </span>{
<span class="w">        </span><span class="nv">Console</span>.<span class="nv">WriteLine</span><span class="ss">(</span><span class="nv">i</span>.<span class="nv">ToString</span><span class="ss">())</span><span class="c1">;</span>
<span class="w">    </span>}
}

<span class="nv">public</span><span class="w"> </span><span class="nv">IEnumerable</span><span class="o">&lt;</span><span class="nv">int</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">Integers</span><span class="ss">()</span>
{
<span class="w">    </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">2</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">4</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">8</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">16</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">16777216</span><span class="c1">;</span>
}
</pre></div>

<p>When you step through the example, you'll find the first call to <code>Integers()</code>
returns <code>1</code>. The second call returns <code>2</code> and the line <code>yield return 1</code> is not
executed again.</p>
<p>Here is a real-life example:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Read</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">Func</span><span class="o">&lt;</span><span class="n">IDataReader</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">make</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="n">object</span><span class="p">[]</span><span class="w"> </span><span class="n">parms</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">using</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateConnection</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">using</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateCommand</span><span class="p">(</span><span class="n">CommandType</span><span class="o">.</span><span class="n">Text</span><span class="p">,</span><span class="w"> </span><span class="n">sql</span><span class="p">,</span><span class="w"> </span><span class="n">connection</span><span class="p">,</span><span class="w"> </span><span class="n">parms</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">command</span><span class="o">.</span><span class="n">CommandTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataBaseSettings</span><span class="o">.</span><span class="n">ReadCommandTimeout</span><span class="p">;</span>
<span class="w">            </span><span class="n">using</span><span class="w"> </span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">command</span><span class="o">.</span><span class="n">ExecuteReader</span><span class="p">())</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">Read</span><span class="p">())</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nb">yield</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">make</span><span class="p">(</span><span class="n">reader</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Iteration. It creates a state machine "under the covers" that remembers where
you were on each additional cycle of the function and picks up from there.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-remove-delete-a-large-file-from-commit-history-in-the-git-repository/" class="u-url">How to remove/delete a large file from commit history in the Git repository?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-remove-delete-a-large-file-from-commit-history-in-the-git-repository/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:34:36+08:00" itemprop="datePublished" title="2023-02-17 07:34">2023-02-17 07:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I accidentally dropped a DVD-rip into a website project, then carelessly <code>git
commit -a -m ...</code>, and, zap, the repo was bloated by 2.2 gigs. Next time I
made some edits, deleted the video file, and committed everything, but the
compressed file is still there in the repository, in history.</p>
<p>I know I can start branches from those commits and rebase one branch onto
another. But what should I do to merge the 2 commits so that the big file
doesn't show in the history and is cleaned in the garbage collection
procedure?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Why not use this simple but powerful command?</p>
<div class="code"><pre class="code literal-block">git filter-branch --tree-filter 'rm -f DVD-rip' HEAD
</pre></div>

<p>The <code>--tree-filter</code> option runs the specified command after each checkout of
the project and then recommits the results. In this case, you remove a file
called DVD-rip from every snapshot, whether it exists or not.</p>
<p>If you know which commit introduced the huge file (say 35dsa2), you can
replace HEAD with 35dsa2..HEAD to avoid rewriting too much history, thus
avoiding diverging commits if you haven't pushed yet. This comment courtesy of
@alpha_989 seems too important to leave out here.</p>
<p>See this link.</p>
<p><br></p>
<h3>Suggest</h3>
<p>What you want to do is highly disruptive if you have published history to
other developers. See “Recovering From Upstream Rebase” in the <code>git rebase</code>
documentation for the necessary steps after repairing your history.</p>
<p>You have at least two options: <code>git filter-branch</code> and an interactive rebase,
both explained below.</p>
<h3>Using <code>git filter-branch</code>
</h3>
<p>I had a similar problem with bulky binary test data from a Subversion import
and wrote about removing data from a git repository.</p>
<p>Say your git history is:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>f772d66<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>cb14efd<span class="w"> </span>Remove<span class="w"> </span>DVD-rip
<span class="p">|</span><span class="w"> </span>D<span class="w">     </span>oops.iso
*<span class="w"> </span>ce36c98<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>oops.iso
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>Note that <code>git lola</code> is a non-standard but highly useful alias. (See the
addendum at the end of this answer for details.) The <code>--name-status</code> switch to
<code>git log</code> shows tree modifications associated with each commit.</p>
<p>In the “Careless” commit (whose SHA1 object name is ce36c98) the file
<code>oops.iso</code> is the DVD-rip added by accident and removed in the next commit,
cb14efd. Using the technique described in the aforementioned blog post, the
command to execute is:</p>
<div class="code"><pre class="code literal-block">git filter-branch --prune-empty -d /dev/shm/scratch \
  --index-filter "git rm --cached -f --ignore-unmatch oops.iso" \
  --tag-name-filter cat -- --all
</pre></div>

<p>Options:</p>
<ul>
<li>
<code>--prune-empty</code> removes commits that become empty ( <em>i.e.</em> , do not change the tree) as a result of the filter operation. In the typical case, this option produces a cleaner history.</li>
<li>
<code>-d</code> names a temporary directory that does not yet exist to use for building the filtered history. If you are running on a modern Linux distribution, specifying a tree in <code>/dev/shm</code> will result in faster execution.</li>
<li>
<code>--index-filter</code> is the main event and runs against the index at each step in the history. You want to remove <code>oops.iso</code> wherever it is found, but it isn’t present in all commits. The command <code>git rm --cached -f --ignore-unmatch oops.iso</code> deletes the DVD-rip when it is present and does not fail otherwise.</li>
<li>
<code>--tag-name-filter</code> describes how to rewrite tag names. A filter of <code>cat</code> is the identity operation. Your repository, like the sample above, may not have any tags, but I included this option for full generality.</li>
<li>
<code>--</code> specifies the end of options to <code>git filter-branch</code>
</li>
<li>
<code>--all</code> following <code>--</code> is shorthand for all refs. Your repository, like the sample above, may have only one ref (master), but I included this option for full generality.</li>
</ul>
<p>After some churning, the history is now:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>8e0a11c<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>e45ac59<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
<span class="p">|</span>
<span class="p">|</span><span class="w"> </span>*<span class="w"> </span>f772d66<span class="w"> </span><span class="o">(</span>refs/original/refs/heads/master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>A<span class="w">   </span>login.html
<span class="p">|</span><span class="w"> </span>*<span class="w"> </span>cb14efd<span class="w"> </span>Remove<span class="w"> </span>DVD-rip
<span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>D<span class="w">   </span>oops.iso
<span class="p">|</span><span class="w"> </span>*<span class="w"> </span>ce36c98<span class="w"> </span>Careless
<span class="p">|</span>/<span class="w">  </span>A<span class="w">   </span>oops.iso
<span class="p">|</span><span class="w">   </span>A<span class="w">   </span>other.html
<span class="p">|</span>
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>Notice that the new “Careless” commit adds only <code>other.html</code> and that the
“Remove DVD-rip” commit is no longer on the master branch. The branch labeled
<code>refs/original/refs/heads/master</code> contains your original commits in case you
made a mistake. To remove it, follow the steps in “Checklist for Shrinking a
Repository.”</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>update-ref<span class="w"> </span>-d<span class="w"> </span>refs/original/refs/heads/master
$<span class="w"> </span>git<span class="w"> </span>reflog<span class="w"> </span>expire<span class="w"> </span>--expire<span class="o">=</span>now<span class="w"> </span>--all
$<span class="w"> </span>git<span class="w"> </span>gc<span class="w"> </span>--prune<span class="o">=</span>now
</pre></div>

<p>For a simpler alternative, clone the repository to discard the unwanted bits.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/src
$<span class="w"> </span>mv<span class="w"> </span>repo<span class="w"> </span>repo.old
$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>file:///home/user/src/repo.old<span class="w"> </span>repo
</pre></div>

<p>Using a <code>file:///...</code> clone URL copies objects rather than creating hardlinks
only.</p>
<p>Now your history is:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>8e0a11c<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>e45ac59<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>The SHA1 object names for the first two commits (“Index” and “Admin page”)
stayed the same because the filter operation did not modify those commits.
“Careless” lost <code>oops.iso</code> and “Login page” got a new parent, so their SHA1s
<em>did</em> change.</p>
<h3>Interactive rebase</h3>
<p>With a history of:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>f772d66<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>cb14efd<span class="w"> </span>Remove<span class="w"> </span>DVD-rip
<span class="p">|</span><span class="w"> </span>D<span class="w">     </span>oops.iso
*<span class="w"> </span>ce36c98<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>oops.iso
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>you want to remove <code>oops.iso</code> from “Careless” as though you never added it,
and then “Remove DVD-rip” is useless to you. Thus, our plan going into an
interactive rebase is to keep “Admin page,” edit “Careless,” and discard
“Remove DVD-rip.”</p>
<p>Running <code>$ git rebase -i 5af4522</code> starts an editor with the following
contents.</p>
<div class="code"><pre class="code literal-block"><span class="nv">pick</span><span class="w"> </span><span class="nv">ce36c98</span><span class="w"> </span><span class="nv">Careless</span>
<span class="nv">pick</span><span class="w"> </span><span class="nv">cb14efd</span><span class="w"> </span><span class="nv">Remove</span><span class="w"> </span><span class="nv">DVD</span><span class="o">-</span><span class="nv">rip</span>
<span class="nv">pick</span><span class="w"> </span><span class="nv">f772d66</span><span class="w"> </span><span class="nv">Login</span><span class="w"> </span><span class="nv">page</span>

#<span class="w"> </span><span class="nv">Rebase</span><span class="w"> </span><span class="mi">5</span><span class="nv">af4522</span>..<span class="nv">f772d66</span><span class="w"> </span><span class="nv">onto</span><span class="w"> </span><span class="mi">5</span><span class="nv">af4522</span>
#
#<span class="w"> </span><span class="nv">Commands</span>:
#<span class="w">  </span><span class="nv">p</span>,<span class="w"> </span><span class="nv">pick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>
#<span class="w">  </span><span class="nv">r</span>,<span class="w"> </span><span class="nv">reword</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">edit</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="nv">message</span>
#<span class="w">  </span><span class="nv">e</span>,<span class="w"> </span><span class="nv">edit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">stop</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">amending</span>
#<span class="w">  </span><span class="nv">s</span>,<span class="w"> </span><span class="nv">squash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commit</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">meld</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">commit</span>
#<span class="w">  </span><span class="nv">f</span>,<span class="w"> </span><span class="nv">fixup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="s2">"squash"</span>,<span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">discard</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">commit</span><span class="err">'s log message</span>
<span class="err">#  x, exec = run command (the rest of the line) using shell</span>
<span class="err">#</span>
<span class="err"># If you remove a line here THAT COMMIT WILL BE LOST.</span>
<span class="err"># However, if you remove everything, the rebase will be aborted.</span>
<span class="err">#</span>
</pre></div>

<p>Executing our plan, we modify it to</p>
<div class="code"><pre class="code literal-block">edit ce36c98 Careless
pick f772d66 Login page

# Rebase 5af4522..f772d66 onto 5af4522
# ...
</pre></div>

<p>That is, we delete the line with “Remove DVD-rip” and change the operation on
“Careless” to be <code>edit</code> rather than <code>pick</code>.</p>
<p>Save-quitting the editor drops us at a command prompt with the following
message.</p>
<div class="code"><pre class="code literal-block"><span class="nv">Stopped</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">ce36c98</span>...<span class="w"> </span><span class="nv">Careless</span>
<span class="nv">You</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">amend</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="nv">now</span>,<span class="w"> </span><span class="nv">with</span>

<span class="w">        </span><span class="nv">git</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="o">--</span><span class="nv">amend</span>

<span class="nv">Once</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">satisfied</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">changes</span>,<span class="w"> </span><span class="nv">run</span>

<span class="w">        </span><span class="nv">git</span><span class="w"> </span><span class="nv">rebase</span><span class="w"> </span><span class="o">--</span><span class="k">continue</span>
</pre></div>

<p>As the message tells us, we are on the “Careless” commit we want to edit, so
we run two commands.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>rm<span class="w"> </span>--cached<span class="w"> </span>oops.iso
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>--amend<span class="w"> </span>-C<span class="w"> </span>HEAD
$<span class="w"> </span>git<span class="w"> </span>rebase<span class="w"> </span>--continue
</pre></div>

<p>The first removes the offending file from the index. The second modifies or
amends “Careless” to be the updated index and <code>-C HEAD</code> instructs git to reuse
the old commit message. Finally, <code>git rebase --continue</code> goes ahead with the
rest of the rebase operation.</p>
<p>This gives a history of:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>lola<span class="w"> </span>--name-status
*<span class="w"> </span>93174be<span class="w"> </span><span class="o">(</span>HEAD,<span class="w"> </span>master<span class="o">)</span><span class="w"> </span>Login<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>login.html
*<span class="w"> </span>a570198<span class="w"> </span>Careless
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>other.html
*<span class="w"> </span>5af4522<span class="w"> </span>Admin<span class="w"> </span>page
<span class="p">|</span><span class="w"> </span>A<span class="w">     </span>admin.html
*<span class="w"> </span>e738b63<span class="w"> </span>Index
<span class="w">  </span>A<span class="w">     </span>index.html
</pre></div>

<p>which is what you want.</p>
<h3>Addendum: Enable <code>git lola</code> via <code>~/.gitconfig</code>
</h3>
<p>Quoting Conrad Parker:</p>
<blockquote>
<p>The best tip I learned at Scott Chacon’s talk at linux.conf.au 2010, Git
Wrangling - Advanced Tips and Tricks was this alias:</p>
<div class="code"><pre class="code literal-block">lol = log --graph --decorate --pretty=oneline --abbrev-commit
</pre></div>

<p>This provides a really nice graph of your tree, showing the branch structure
of merges etc. Of course there are really nice GUI tools for showing such
graphs, but the advantage of <code>git lol</code> is that it works on a console or over
<code>ssh</code>, so it is useful for remote development, or native development on an
embedded board …</p>
<p>So, just copy the following into <code>~/.gitconfig</code> for your full color <code>git
lola</code> action:</p>
<div class="code"><pre class="code literal-block"><span class="k">[alias]</span>
<span class="w">        </span><span class="na">lol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">log --graph --decorate --pretty=oneline --abbrev-commit</span>
<span class="w">        </span><span class="na">lola</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">log --graph --decorate --pretty=oneline --abbrev-commit</span>
</pre></div>

<p>--all
    [color]
            branch = auto
            diff = auto
            interactive = auto
            status = auto
</p>
</blockquote>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-naming-convention-in-python-for-variable-and-function/" class="u-url">What is the naming convention in Python for variable and function?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-naming-convention-in-python-for-variable-and-function/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T07:34:10+08:00" itemprop="datePublished" title="2023-02-17 07:34">2023-02-17 07:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Coming from a C# background the naming convention for variables and method
names are usually either camelCase or PascalCase:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// C# example</span>
<span class="nb">string</span><span class="w"> </span><span class="n">thisIsMyVariable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"a"</span>
<span class="n">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">ThisIsMyMethod</span><span class="p">()</span>
</pre></div>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>
<div class="code"><pre class="code literal-block"><span class="c1"># python example</span>
<span class="n">this_is_my_variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'a'</span>
<span class="n">def</span><span class="w"> </span><span class="n">this_is_my_function</span><span class="p">():</span>
</pre></div>

<p>Is there a more preferable, definitive coding style for Python?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>See Python PEP 8: Function and Variable Names:</p>
<blockquote>
<p>Function names should be lowercase, with words separated by underscores as
necessary to improve readability.</p>
<p>Variable names follow the same convention as function names.</p>
<p>mixedCase is allowed only in contexts where that's already the prevailing
style (e.g. threading.py), to retain backwards compatibility.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>The Google Python Style Guide has the following convention:</p>
<blockquote>
<p><code>module_name</code>, <code>package_name</code>, <code>ClassName</code>, <code>method_name</code>, <code>ExceptionName</code>,
<code>function_name</code>, <code>GLOBAL_CONSTANT_NAME</code>, <code>global_var_name</code>,
<code>instance_var_name</code>, <code>function_parameter_name</code>, <code>local_var_name</code>.</p>
</blockquote>
<p>A similar naming scheme should be applied to a <code>CLASS_CONSTANT_NAME</code></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-468.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-466.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
