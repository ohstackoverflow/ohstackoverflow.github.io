<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 550) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-550.html">
<link rel="prev" href="index-551.html" type="text/html">
<link rel="next" href="index-549.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/git-error-failed-to-push-some-refs-to-remote/" class="u-url">git error: failed to push some refs to remote</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/git-error-failed-to-push-some-refs-to-remote/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:43:20+08:00" itemprop="datePublished" title="2023-02-17 09:43">2023-02-17 09:43</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I can't push now, though I could do it yesterday.</p>
<p>When I use <code>git push origin master</code>, I get an error:</p>
<div class="code"><pre class="code literal-block"><span class="err">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="o">-</span><span class="n">v</span>
<span class="n">origin</span><span class="w">  </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">REDACTED</span><span class="p">.</span><span class="n">git</span><span class="w"> </span><span class="p">(</span><span class="k">fetch</span><span class="p">)</span>
<span class="n">origin</span><span class="w">  </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">REDACTED</span><span class="p">.</span><span class="n">git</span><span class="w"> </span><span class="p">(</span><span class="n">push</span><span class="p">)</span>

<span class="err">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">master</span>
<span class="n">Username</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">'https://github.com'</span><span class="err">:</span><span class="w"> </span><span class="n">REDACTED</span>
<span class="n">Password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">'https://REDACTED@github.com'</span><span class="err">:</span>
<span class="k">To</span><span class="w"> </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">REDACTED</span><span class="p">.</span><span class="n">git</span>
<span class="err">!</span><span class="w"> </span><span class="o">[</span><span class="n">rejected</span><span class="o">]</span><span class="w">         </span><span class="n">master</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="p">(</span><span class="n">non</span><span class="o">-</span><span class="n">fast</span><span class="o">-</span><span class="n">forward</span><span class="p">)</span>
<span class="nl">error</span><span class="p">:</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="ow">some</span><span class="w"> </span><span class="n">refs</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="s1">'https://github.com/REDACTED.git'</span>
<span class="nl">hint</span><span class="p">:</span><span class="w"> </span><span class="n">Updates</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">rejected</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tip</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">behind</span>
<span class="nl">hint</span><span class="p">:</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">counterpart</span><span class="p">.</span><span class="w"> </span><span class="n">Integrate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span>
<span class="nl">hint</span><span class="p">:</span><span class="w"> </span><span class="s1">'git pull ...'</span><span class="p">)</span><span class="w"> </span><span class="k">before</span><span class="w"> </span><span class="n">pushing</span><span class="w"> </span><span class="n">again</span><span class="p">.</span>
<span class="nl">hint</span><span class="p">:</span><span class="w"> </span><span class="n">See</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s1">'Note about fast-forwards'</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="s1">'git push --help'</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">details</span><span class="p">.</span>
</pre></div>

<p>What my working directory and remote repository looks like:</p>
<p><img alt='Screenshot of Windows file folder with these directories: .git, css, js. And
these files: index.php, readme, setsu.php. The word "local" with an arrow
points to the css-folder. Below, screenshot with heading "github", and a css-
folder and index.php-file' src="images/Sz17u.png"></p>
<p><br><br></p>
<h2>Answer</h2>
<p>(Note: starting Oct. 2020, any new repository is created with the default
branch <code>main</code>, not <code>master</code>. And you can rename existing repository default
branch from <code>master</code> to <code>main</code>.<br>
The rest of this 2014 answer has been updated to use "<code>main</code>")</p>
<p>(The following assumes <code>github.com</code> itself is <em>not</em> down, as eri0o points out
in the comments: see <code>www.githubstatus.com</code> to be sure)</p>
<p>If the GitHub repo has seen new commits pushed to it, while you were working
locally, I would advise using:</p>
<div class="code"><pre class="code literal-block">git pull --rebase
git push
</pre></div>

<p>The full syntax is:</p>
<div class="code"><pre class="code literal-block">git pull --rebase origin main
git push origin main
</pre></div>

<p>With Git 2.6+ (Sept. 2015), after having done (once)</p>
<div class="code"><pre class="code literal-block">git config --global pull.rebase true
git config --global rebase.autoStash true
</pre></div>

<p>A simple <code>git pull</code> would be enough.<br>
(Note: with Git 2.27 Q2 2020, a <code>merge.autostash</code> is also available for your
regular pull, without rebase)</p>
<p>That way, you would replay (the <code>--rebase</code> part) your local commits on top of
the newly updated <code>origin/main</code> (or <code>origin/yourBranch</code>: <code>git pull origin
yourBranch</code>).</p>
<p>See a more complete example in the chapter 6 Pull with rebase of the Git
Pocket Book.</p>
<p>I would recommend a:</p>
<div class="code"><pre class="code literal-block"># add and commit first
#
git push -u origin main

# Or git 2.37 Q2 2022+
git config --global push.autoSetupRemote true
git push
</pre></div>

<p>That would establish a tracking relationship between your local main branch
and its upstream branch.<br>
After that, any future push for that branch can be done with a simple:</p>
<div class="code"><pre class="code literal-block">git push
</pre></div>

<p>Again, with Git 2.37+ and its global option <code>push.autoSetupRemote</code>, a simple
<code>git push</code> even for the first one would do the same (I.e: establishing a
tracking relationship between your local <code>main</code> branch and its upstream branch
<code>origin/main</code>).</p>
<p>See "Why do I need to explicitly push a new branch?".</p>
<hr>
<p>Since the OP already reset and redone its commit on top of <code>origin/main</code>:</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">reset</span><span class="w"> </span><span class="o">--</span><span class="nv">mixed</span><span class="w"> </span><span class="nv">origin</span><span class="o">/</span><span class="nv">main</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span>.
<span class="nv">git</span><span class="w"> </span><span class="nv">commit</span><span class="w"> </span><span class="o">-</span><span class="nv">m</span><span class="w"> </span><span class="s2">"This is a new commit for what I originally planned to be amended"</span>
<span class="nv">git</span><span class="w"> </span><span class="nv">push</span><span class="w"> </span><span class="nv">origin</span><span class="w"> </span><span class="nv">main</span>
</pre></div>

<p>There is no need to <code>pull --rebase</code>.</p>
<p>Note: <code>git reset --mixed origin/main</code> can also be written <code>git reset
origin/main</code>, since the <code>--mixed</code> option is the default one when using <code>git
reset</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try:</p>
<div class="code"><pre class="code literal-block">git push -f origin master
</pre></div>

<p>That should solve the problem.</p>
<p>Based on @Mehdi‘s comment, a clarification about <code>—force pushing</code>: The Git
command above works safely only for the first commit. If there were already
commits, pull requests or branches in previous, this resets all of it and set
it from zero. If so, please refer @VonC‘s detailed answer for a better
solution.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-remove-text-from-a-string/" class="u-url">How to remove text from a string?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-remove-text-from-a-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:42:54+08:00" itemprop="datePublished" title="2023-02-17 09:42">2023-02-17 09:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've got a <code>data-123</code> string.</p>
<p>How can I remove <code>data-</code> from the string while leaving the <code>123</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"data-123"</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'data-'</span><span class="p">,</span><span class="s1">''</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span><span class="w">   </span><span class="o">//</span><span class="nb">prints</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span>
</pre></div>

<p>Docs.</p>
<hr>
<p>For all occurrences to be discarded use:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"data-123"</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="o">/</span><span class="n">data</span><span class="o">-/</span><span class="n">g</span><span class="p">,</span><span class="s1">''</span><span class="p">);</span>
</pre></div>

<p>PS: The replace function returns a new string and leaves the original string
unchanged, so use the function return value after the replace() call.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This doesn't have anything to do with jQuery. You can use the JavaScript
<code>replace</code> function for this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="nb">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"data-123"</span><span class="p">;</span>
<span class="nb">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"data-"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">);</span>
</pre></div>

<p>You can also pass a regex to this function. In the following example, it would
replace everything except numerics:</p>
<div class="code"><pre class="code literal-block">str = str.replace(/[^0-9\.]+/g, "");
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-any-way-to-git-checkout-previous-branch/" class="u-url">Is there any way to git checkout previous branch?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-any-way-to-git-checkout-previous-branch/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:42:28+08:00" itemprop="datePublished" title="2023-02-17 09:42">2023-02-17 09:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I sort of want the equivalent of <code>cd -</code> for git. If I am in branch <code>master</code>
and I checkout <code>foo</code>, I would love to be able to type something like <code>git
checkout -</code> to go back to <code>master</code>, and be able to type it again to return to
<code>foo</code>.</p>
<p>Does anything like this exist? Would it be hard to implement?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From the release notes for 1.6.2</p>
<blockquote>
<p><code>@{-1}</code> is a way to refer to the last branch you were on. This is<br>
 accepted not only where an object name is expected, but anywhere a branch
name is expected and acts as if you typed the branch name.<br>
 E.g. <code>git branch --track mybranch @{-1}</code>, <code>git merge @{-1}</code>, and<br><code>git rev-parse --symbolic-full-name @{-1}</code> would work as expected.</p>
</blockquote>
<p>and</p>
<blockquote>
<p><code>git checkout -</code> is a shorthand for <code>git checkout @{-1}</code>.</p>
</blockquote>
<p>To see the list of previous checkouts:</p>
<blockquote>
<p><code>i=0; while [ $? -eq 0 ]; do i=$((i+1)); echo -n "$i. "; git rev-parse
--symbolic-full-name @{-$i} 2&gt; /dev/null; done</code></p>
<p><em>This Bash one-liner script is not perfect but it should work for most
cases. Note that sometimes the number may skip.</em></p>
<p><em><strong>Tip:</strong> You can add it to <code>.bashrc</code> as a <code>function</code>.</em></p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>The simplest way of doing this nowadays is:</p>
<div class="code"><pre class="code literal-block">git checkout -
</pre></div>

<p>... which is an alias of:</p>
<div class="code"><pre class="code literal-block">git checkout @{-1}
</pre></div>

<p><img alt="git checkout minus" src="images/bBm6f.jpg"></p>
<p>If you want to know more about this, I wrote an entire article about it here:
Checkout The Previous Branch In Git.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-551.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-549.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
