<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 968) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-968.html">
<link rel="prev" href="index-969.html" type="text/html">
<link rel="next" href="index-967.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/find-next-in-vim/" class="u-url">"Find next" in Vim</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/find-next-in-vim/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:01:38+08:00" itemprop="datePublished" title="2023-02-17 21:01">2023-02-17 21:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>To search forward in Vim for <code>cake</code>, I'd type <code>/cake</code>, but the cursor jumps to
the first match when I press return. <strong>Is there a Vim command analogous to
"find next"?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p>It is <code>n</code> for next and <code>N</code> for previous.</p>
<p>And if you use reverse search with <code>?</code> (for example, <code>?cake</code>) instead of <code>/</code>,
it is the other way round.</p>
<p>If it is installed on your system, you should try to run <code>vimtutor</code> command
from your terminal, which will start a tutorial of the basic Vim commands.</p>
<p>Rob Wells advice about <code>*</code> and <code>#</code> is also very pertinent.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The most useful shortcut in Vim, IMHO, is the <code>*</code> key.</p>
<p>Put the cursor on a word and hit the <code>*</code> key and you will jump to the next
instance of that word.</p>
<p>The <code>#</code> key does the same, but it jumps to the previous instance of the word.</p>
<p>It is truly a time saver.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/accessing-nested-javascript-objects-and-arrays-by-string-path/" class="u-url">Accessing nested JavaScript objects and arrays by string path</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/accessing-nested-javascript-objects-and-arrays-by-string-path/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:01:04+08:00" itemprop="datePublished" title="2023-02-17 21:01">2023-02-17 21:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a data structure like this :</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">someObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s1">'part1'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s1">'name'</span><span class="p">:</span><span class="w"> </span><span class="s1">'Part 1'</span><span class="p">,</span>
<span class="w">        </span><span class="s1">'size'</span><span class="p">:</span><span class="w"> </span><span class="s1">'20'</span><span class="p">,</span>
<span class="w">        </span><span class="s1">'qty'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'50'</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s1">'part2'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s1">'name'</span><span class="p">:</span><span class="w"> </span><span class="s1">'Part 2'</span><span class="p">,</span>
<span class="w">        </span><span class="s1">'size'</span><span class="p">:</span><span class="w"> </span><span class="s1">'15'</span><span class="p">,</span>
<span class="w">        </span><span class="s1">'qty'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'60'</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s1">'part3'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="s1">'name'</span><span class="p">:</span><span class="w"> </span><span class="s1">'Part 3A'</span><span class="p">,</span>
<span class="w">            </span><span class="s1">'size'</span><span class="p">:</span><span class="w"> </span><span class="s1">'10'</span><span class="p">,</span>
<span class="w">            </span><span class="s1">'qty'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'20'</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s1">'name'</span><span class="p">:</span><span class="w"> </span><span class="s1">'Part 3B'</span><span class="p">,</span>
<span class="w">            </span><span class="s1">'size'</span><span class="p">:</span><span class="w"> </span><span class="s1">'5'</span><span class="p">,</span>
<span class="w">            </span><span class="s1">'qty'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'20'</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s1">'name'</span><span class="p">:</span><span class="w"> </span><span class="s1">'Part 3C'</span><span class="p">,</span>
<span class="w">            </span><span class="s1">'size'</span><span class="p">:</span><span class="w"> </span><span class="s1">'7.5'</span><span class="p">,</span>
<span class="w">            </span><span class="s1">'qty'</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s1">'20'</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">};</span>
</pre></div>

<p>And I would like to access the data using these variable :</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">part1name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"part1.name"</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">part2quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"part2.qty"</span><span class="p">;</span>
<span class="k">var</span><span class="w"> </span><span class="n">part3name1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"part3[0].name"</span><span class="p">;</span>
</pre></div>

<p>part1name should be filled with <code>someObject.part1.name</code> 's value, which is
"Part 1". Same thing with part2quantity which filled with 60.</p>
<p>Is there anyway to achieve this with either pure javascript or JQuery?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I just made this based on some similar code I already had, it appears to work:</p>
<div class="code"><pre class="code literal-block"><span class="k">Object</span><span class="p">.</span><span class="n">byString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\</span><span class="o">[</span><span class="n">(\w+)\</span><span class="o">]/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'.$1'</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nf">convert</span><span class="w"> </span><span class="n">indexes</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">properties</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="o">/^</span><span class="err">\</span><span class="p">.</span><span class="o">/</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span><span class="w">           </span><span class="o">//</span><span class="w"> </span><span class="n">strip</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">leading</span><span class="w"> </span><span class="n">dot</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'.'</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">o</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">o</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>Usage::</p>
<div class="code"><pre class="code literal-block">Object.byString(someObj, 'part3[0].name');
</pre></div>

<p>See a working demo at http://jsfiddle.net/alnitak/hEsys/</p>
<p><strong>EDIT</strong> some have noticed that this code will throw an error if passed a
string where the left-most indexes don't correspond to a correctly nested
entry within the object. This is a valid concern, but IMHO best addressed with
a <code>try / catch</code> block when calling, rather than having this function silently
return <code>undefined</code> for an invalid index.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is now supported by lodash using <code>_.get(obj, property)</code>. See
https://lodash.com/docs#get</p>
<p>Example from the docs:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">'a'</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="s1">'b'</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">'c'</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">};</span>

<span class="n">_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">object</span><span class="p">,</span><span class="w"> </span><span class="s1">'a[0].b.c'</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="mi">3</span>

<span class="n">_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">object</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="s1">'0'</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="p">]);</span>
<span class="o">//</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="mi">3</span>

<span class="n">_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">object</span><span class="p">,</span><span class="w"> </span><span class="s1">'a.b.c'</span><span class="p">,</span><span class="w"> </span><span class="s1">'default'</span><span class="p">);</span>
<span class="o">//</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="s1">'default'</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/disable-output-buffering/" class="u-url">Disable output buffering</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/disable-output-buffering/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T21:00:29+08:00" itemprop="datePublished" title="2023-02-17 21:00">2023-02-17 21:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is output buffering enabled by default in Python's interpreter for
<code>sys.stdout</code>?</p>
<p>If the answer is positive, what are all the ways to disable it?</p>
<p>Suggestions so far:</p>
<ol>
<li>Use the <code>-u</code> command line switch</li>
<li>Wrap <code>sys.stdout</code> in an object that flushes after every write</li>
<li>Set <code>PYTHONUNBUFFERED</code> env var</li>
<li><code>sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)</code></li>
</ol>
<p>Is there any other way to set some global flag in <code>sys</code>/<code>sys.stdout</code>
programmatically during execution?</p>
<hr>
<p>If you just want to flush after a specific write using <code>print</code>, see How can I
flush the output of the print function?.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From Magnus Lycka answer on a mailing list:</p>
<blockquote>
<p>You can skip buffering for a whole python process using <code>python -u</code> or by
setting the environment variable PYTHONUNBUFFERED.</p>
<p>You could also replace sys.stdout with some other stream like wrapper which
does a flush after every call.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="nc">Unbuffered</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
   <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
   <span class="k">def</span> <span class="nf">writelines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datas</span><span class="p">):</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">datas</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
   <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
       <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">Unbuffered</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="nb">print</span> <span class="s1">'Hello'</span>
</pre></div>

</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>I would rather put my answer in How to flush output of print function? or in
Python's print function that flushes the buffer when it's called?, but since
they were marked as duplicates of this one (what I do not agree), I'll answer
it here.</p>
<p>Since Python 3.3, print() supports the keyword argument "flush" (see
documentation):</p>
<div class="code"><pre class="code literal-block">print('Hello World!', flush=True)
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-969.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-967.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
