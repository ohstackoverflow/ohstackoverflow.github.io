<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2348) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2348.html">
<link rel="prev" href="index-2349.html" type="text/html">
<link rel="next" href="index-2347.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/clicking-the-back-button-twice-to-exit-an-activity/" class="u-url">Clicking the back button twice to exit an activity</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/clicking-the-back-button-twice-to-exit-an-activity/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T09:27:40+08:00" itemprop="datePublished" title="2023-03-04 09:27">2023-03-04 09:27</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've noticed this pattern in a lot of Android apps and games recently: when
clicking the back button to "exit" the application, a <code>Toast</code> comes up with a
message similar to "Please click BACK again to exit".</p>
<p>I was wondering, as I'm seeing it more and more often, is that a built-in
feature that you can somehow access in an activity? I've looked at the source
code of many classes but I can't seem to find anything about that.</p>
<p>Of course, I can think about a few ways to achieve the same functionality
quite easily (the easiest is probably to keep a boolean in the activity that
indicates whether the user already clicked once...) but I was wondering if
there's something already here.</p>
<p><strong>EDIT</strong> : As @LAS_VEGAS mentioned, I didn't really mean "exit" in the
traditional meaning. (i.e. terminated) I meant "going back to whatever was
open before the application start activity was launched", if that makes sense
:)</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>In Java Activity:</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="k">boolean</span><span class="w"> </span><span class="n">doubleBackToExitPressedOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>

<span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onBackPressed</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">doubleBackToExitPressedOnce</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">super</span><span class="p">.</span><span class="n">onBackPressed</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">doubleBackToExitPressedOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="ss">"Please click BACK again to exit"</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">();</span>

<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">Handler</span><span class="p">(</span><span class="n">Looper</span><span class="p">.</span><span class="n">getMainLooper</span><span class="p">()).</span><span class="n">postDelayed</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>

<span class="w">        </span><span class="nv">@Override</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">run</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">doubleBackToExitPressedOnce</span><span class="o">=</span><span class="k">false</span><span class="p">;</span><span class="w">                       </span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<blockquote>
<p>In Kotlin Activity:</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">doubleBackToExitPressedOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span>
<span class="n">override</span><span class="w"> </span><span class="n">fun</span><span class="w"> </span><span class="n">onBackPressed</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">doubleBackToExitPressedOnce</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">super</span><span class="o">.</span><span class="n">onBackPressed</span><span class="p">()</span>
<span class="w">            </span><span class="k">return</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">doubleBackToExitPressedOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="n">Toast</span><span class="o">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="s2">"Please click BACK again to exit"</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="o">.</span><span class="n">LENGTH_SHORT</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="w">        </span><span class="n">Handler</span><span class="p">(</span><span class="n">Looper</span><span class="o">.</span><span class="n">getMainLooper</span><span class="p">())</span><span class="o">.</span><span class="n">postDelayed</span><span class="p">(</span><span class="n">Runnable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">doubleBackToExitPressedOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">2000</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>

<p>I Think this handler helps to reset the variable after 2 second.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Sudheesh B Nair's has a nice (and accepted) answer on the question, which i
think should have a better alternative such as;</p>
<p>What's wrong with measuring time passed and checking if <code>TIME_INTERVAL</code>
miliseconds (say 2000) passed since the last back press. The following sample
code uses <code>System.currentTimeMillis();</code> to store the time <code>onBackPressed()</code> is
called;</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="nc">int</span><span class="w"> </span><span class="n">TIME_INTERVAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2000</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">milliseconds</span><span class="p">,</span><span class="w"> </span><span class="n">desired</span><span class="w"> </span><span class="nc">time</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="ow">between</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">presses</span><span class="p">.</span>
<span class="n">private</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">mBackPressed</span><span class="p">;</span>

<span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onBackPressed</span><span class="p">()</span>
<span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mBackPressed</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">TIME_INTERVAL</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="n">currentTimeMillis</span><span class="p">())</span><span class="w"> </span>
<span class="w">    </span><span class="err">{</span><span class="w"> </span>
<span class="w">        </span><span class="n">super</span><span class="p">.</span><span class="n">onBackPressed</span><span class="p">();</span><span class="w"> </span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">getBaseContext</span><span class="p">(),</span><span class="w"> </span><span class="ss">"Tap back button in order to exit"</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">();</span><span class="w"> </span><span class="err">}</span>

<span class="w">    </span><span class="n">mBackPressed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="n">currentTimeMillis</span><span class="p">();</span>
<span class="err">}</span>
</pre></div>

<hr>
<p>Back on accepted answer <em>critique</em> ; Using a <strong><code>flag</code></strong> to indicate if it was
pressed in last <code>TIME_INTERVAL</code> (say 2000) milliseconds and <em>set - reset</em> is
via <code>Handler</code>'s <code>postDelayed()</code> method was the first thing to come in my mind.
But the <code>postDelayed()</code> action should be cancelled when activity is closing,
removing the <code>Runnable</code>.</p>
<p>In order to remove the <code>Runnable</code>, it must not be declared <em>anonymous</em> , and
be declared as member along with the <code>Handler</code> aswell. Then
<code>removeCallbacks()</code> method of <code>Handler</code> can be called appropriately.</p>
<p>The following sample is the demonstration;</p>
<div class="code"><pre class="code literal-block"><span class="n">private</span><span class="w"> </span><span class="k">boolean</span><span class="w"> </span><span class="n">doubleBackToExitPressedOnce</span><span class="p">;</span>
<span class="n">private</span><span class="w"> </span><span class="n">Handler</span><span class="w"> </span><span class="n">mHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Handler</span><span class="p">();</span>

<span class="n">private</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="n">mRunnable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nv">@Override</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">run</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">doubleBackToExitPressedOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span><span class="w">                       </span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span><span class="p">;</span>

<span class="nv">@Override</span><span class="w"> </span>
<span class="n">protected</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onDestroy</span><span class="p">()</span><span class="w"> </span>
<span class="err">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">super</span><span class="p">.</span><span class="n">onDestroy</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mHandler</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">mHandler</span><span class="p">.</span><span class="n">removeCallbacks</span><span class="p">(</span><span class="n">mRunnable</span><span class="p">);</span><span class="w"> </span><span class="err">}</span>
<span class="err">}</span>

<span class="nv">@Override</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onBackPressed</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">doubleBackToExitPressedOnce</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">super</span><span class="p">.</span><span class="n">onBackPressed</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="n">this</span><span class="p">.</span><span class="n">doubleBackToExitPressedOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">    </span><span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="ss">"Please click BACK again to exit"</span><span class="p">,</span><span class="w"> </span><span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">();</span>

<span class="w">    </span><span class="n">mHandler</span><span class="p">.</span><span class="n">postDelayed</span><span class="p">(</span><span class="n">mRunnable</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<hr>
<p>Thanks to @NSouth for contributing; In order to prevent <em>toast message</em>
appearing even after the application is closed, <code>Toast</code> can be declared as a
member - say <code>mExitToast</code> - and can be cancelled via <code>mExitToast.cancel();</code>
just before <code>super.onBackPressed();</code> call.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-git-branching-models-work-for-you/" class="u-url">What Git branching models work for you?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-git-branching-models-work-for-you/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T09:26:15+08:00" itemprop="datePublished" title="2023-03-04 09:26">2023-03-04 09:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Our company is currently using a simple trunk/release/hotfixes branching model
and would like advice on what branching models work best for your company or
development process.</p>
<ol>
<li><strong>Workflows / branching models</strong></li>
</ol>
<p>Below are the three main descriptions of this I have seen, but they are
partially contradicting each other or don't go far enough to sort out the
subsequent issues we've run into (as described below). Thus our team so far
defaults to not so great solutions. Are you doing something better?</p>
<div class="code"><pre class="code literal-block"><span class="o">*</span><span class="w"> </span><span class="nv">gitworkflows</span><span class="ss">(</span><span class="mi">7</span><span class="ss">)</span><span class="w"> </span><span class="nv">Manual</span><span class="w"> </span><span class="nv">Page</span><span class="w"> </span>
<span class="o">*</span><span class="w"> </span><span class="ss">(</span><span class="nv">nvie</span><span class="ss">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">successful</span><span class="w"> </span><span class="nv">Git</span><span class="w"> </span><span class="nv">branching</span><span class="w"> </span><span class="nv">model</span>
<span class="o">*</span><span class="w"> </span><span class="ss">(</span><span class="nv">reinh</span><span class="ss">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">Git</span><span class="w"> </span><span class="nv">Workflow</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">Agile</span><span class="w"> </span><span class="nv">Teams</span>
</pre></div>

<ol>
<li><strong>Merging vs rebasing (tangled vs sequential history)</strong></li>
</ol>
<p>Should one <code>pull --rebase</code> or wait with merging back to the mainline until
your task is finished? Personally I lean towards merging since this preserves
a visual illustration of on which base a task was started and finished, and I
even prefer <code>merge --no-ff</code> for this purpose. It has other drawbacks however.
Also many haven't realized the useful property of merging - that it isn't
commutative (merging a topic branch into master does not mean merging master
into the topic branch).</p>
<ol>
<li><strong>I am looking for a natural workflow</strong></li>
</ol>
<p>Sometimes mistakes happen because our procedures don't capture a specific
situation with simple rules. For example a fix needed for earlier releases
should of course be based sufficiently downstream to be possible to merge
upstream into all branches necessary (is the usage of these terms clear
enough?). However it happens that a fix makes it into the master before the
developer realizes it should have been placed further downstream, and if that
is already pushed (even worse, merged or something based on it) then the
option remaining is cherry-picking, with its associated perils. What simple
rules like such do you use? <em>Also in this is included the awkwardness of one
topic branch necessarily excluding other topic branches (assuming they are
branched from a common baseline). Developers don't want to finish a feature to
start another one feeling like the code they just wrote is not there anymore</em></p>
<ol>
<li><strong>How to avoid creating merge conflicts (due to cherry-pick)?</strong></li>
</ol>
<p>What seems like a sure way to create a merge conflict is to cherry-pick
between branches, they can never be merged again? Would applying the same
commit in revert (how to do this?) in either branch possibly solve this
situation? This is one reason I do not dare to push for a largely merge-based
workflow.</p>
<ol>
<li><strong>How to decompose into topical branches?</strong></li>
</ol>
<p>We realize that it would be awesome to assemble a finished integration from
topic branches, but often work by our developers is not clearly defined
(sometimes as simple as "poking around") and if some code has already gone
into a "misc" topic, it can not be taken out of there again, according to the
question above? How do you work with defining/approving/graduating/releasing
your topic branches?</p>
<ol>
<li>
<strong>Proper procedures like code review and graduating</strong> would of course be lovely. </li>
</ol>
<p>But we simply cannot keep things untangled enough to manage this - any
suggestions? integration branches, illustrations?</p>
<p>Below is a list of related questions:</p>
<ul>
<li>What are some good strategies to allow deployed applications to be hotfixable?</li>
<li>Workflow description for Git usage for in-house development</li>
<li>Git workflow for corporate Linux kernel development</li>
<li>How do you maintain development code and production code? (thanks for this PDF!)</li>
<li>git releases management</li>
<li>Git Cherry-pick vs Merge Workflow</li>
<li>How to cherry-pick multiple commits</li>
<li>How do you merge selective files with git-merge?</li>
<li>How to cherry pick a range of commits and merge into another branch</li>
<li>ReinH Git Workflow</li>
<li>git workflow for making modifications you’ll never push back to origin</li>
<li>Cherry-pick a merge</li>
<li>Proper Git workflow for combined OS and Private code?</li>
<li>Maintaining Project with Git</li>
<li>Why cant Git merge file changes with a modified parent/master.</li>
<li>Git branching / rebasing good practices</li>
<li>When will "git pull --rebase" get me in to trouble?</li>
<li>How are DVCS used in large teams?</li>
</ul>
<p>Also check out what Plastic SCM writes on task driven development, and if
Plastic is not your choice, study nvie's branching model and his supporting
scripts.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The most troubling feature new developers to DVCS need to realize is about the
publication process:</p>
<ul>
<li>you can import (fetch/pull) whatever remote repo you need</li>
<li>you can publish (push) to any (bare) repo you want</li>
</ul>
<p>From that, you can respect a few rules to make your questions easier:</p>
<ul>
<li>only rebase a branch if it hasn't been pushed (not pushed since the last rebase)</li>
<li>only push to a bare repo (mandatory since Git1.7)</li>
<li>follow Linus's advices on rebase and merges</li>
</ul>
<p>Now:</p>
<p><strong>Workflows / branching models</strong> :</p>
<p>each workflow is there to support a release management process, and that is
tailored for each project.<br>
What I can add to the workflow you mention is: each developer should not
create a feature branch, only a "current dev" branch, because the truth is:
the developer often doesn't know what exactly his/her branch will produce: one
feature, several (because it ended up being too complex a feature), none
(because not ready in time for release), another feature (because the original
one had "morphed"),...</p>
<p>Only an "integrator" should established official feature branches on a
"central" repo, which can then be fetched by developers to rebase/merge the
part of their work that fits that feature.</p>
<p><strong>Merging vs rebasing (tangled vs sequential history)</strong> :</p>
<p>I like my answer you mention ("Workflow description for git usage for in-house
development")</p>
<p><strong>I am looking for a natural workflow</strong> :</p>
<p>for fixes, it can help associating each fix with a ticket from a bug tracking,
which helps the developer remember where (i.e. on which branch, i.e. a
dedicated branch "for fixes") he/she should commit such modifications.<br>
Then hooks can help protect a central repo against pushes from non-validated
bug-fixes or from branches from which one shouldn't push. (no specific
solution here, all this need to be adapted to your environment)</p>
<p><strong>How to avoid creating merge conflicts (due to cherry-pick)?</strong></p>
<p>As stated by Jakub Narębski in his answer, cherry-picking should be reserved
for rare situations where it is required.<br>
If your setup involves a lot of cherry-picking (i.e. "it is not rare"), then
something is off.</p>
<blockquote>
<p>Would applying the same commit in revert (how to do this?)</p>
</blockquote>
<p><strong><code>git revert</code></strong> should take care of that, but that is not ideal.</p>
<blockquote>
<p>How to decompose into topical branches?</p>
</blockquote>
<p>As long as a branch as not yet been pushed everywhere, a developer should
reorganize its history of commits (once he/she finally see the development
takes a more definitive and stable shape) into:</p>
<ul>
<li>several branches if needed (one by clear identified feature)</li>
<li>a coherent set of commits within one branch (see Trimming Git Checkins)</li>
</ul>
<p><strong>Proper procedures like code review and graduating ?</strong></p>
<p>Integration branches (in a dedicated integration) repo can help the developer
to:</p>
<ul>
<li>rebase his/her development on top of that remote integration branch (pull --rebase)</li>
<li>solve locally</li>
<li>push the development to that repo</li>
<li>check with the integrator that doesn't result in a mess ;)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>I think, and I might be wrong, that one of the things that's most
misunderstood about git is its distributed nature. This makes it very
different to say subversion in the ways you can work although you can mimick
SVN behaviour should you want. The problem is pretty much any workflow will
do, which is great but also misleading.</p>
<p>If I have my understanding of kernel development (I'll focus on that) right,
everyone has their own git repository for developing the kernel. There is one
repository, linux-2.6.git, looked after by Torvalds, that acts as the release
repository. People clone from here if they wish to start developing a feature
against the "release" branch.</p>
<p>Other repositories do some development. The idea is to clone from linux-2.6,
branch out as many times as you like until such a point as you've got a
working "new" feature. Then, when this is ready, you may make it available to
someone considered trusted, who will pull this branch from your repository
into theirs and merge it into the mainstream. In the linux kernel this happens
on several levels (trusted lieutenants) until it reaches linux-2.6.git at
which point it becomes "the kernel".</p>
<p>Now here's where it gets confusing. Branch names don't need to be consistent
across repositories at all. So I can <code>git pull origin master:vanilla-code</code> and
get a branch from the <code>origin</code>'s master in a branch in my repository called
<code>vanilla-code</code>. Providing I know what's going on, it really doesn't matter -
it is distributed in the sense that all repositories are peers to each other
and not just shared across several computers like SVN.</p>
<p>So, with all of this in mind:</p>
<ol>
<li>I think it is up to each programmer how they do their branching. All you need is a central repository for managing releases etc. Trunk could be <code>head</code>. Releases could be tags or branches and hotfixes are probably branches in themselves. In fact, I'd probably do releases as branches so you can keep patching them.</li>
<li>I would merge and not rebase. If for example you take a repository, clone it, branch and do some dev, then pull from your <code>origin</code> you should, in your repository, probably make another branch and merge the latest <code>master</code> into <code>yourbranch</code> so that someone else can pull your changes with as little effort as possible. There is very rarely a need to truly rebase, in my experience.</li>
<li>I think it's a case of understanding the way Git works and what it can do. It does take a while and a lot of good communication - I only truly started to understand what's going on when I began using git with other developers and even now, some things I'm not sure about.</li>
<li>Merge conflicts are useful. I know, I know, you want it all to work, but, the fact is code changes and you do need to merge the results into something that works. Merge conflicts are in fact just more programming. I've never found an easy explanation for what to do about them, so here it is: note the files that have merge conflicts, go and change them to what they should be, <code>git add .</code> and then <code>git commit</code>.</li>
<li>However it suits. As I've said, each users git repository is their own to play with and branch names <em>don't need to be the same</em>. If you had a staging repository, for example, you could enforce a naming schema, but you don't need to for each developer, only in the release repo.</li>
<li>This is the merge stage. You only merge into release branches etc when you consider code to be reviewed/pass quality testing.</li>
</ol>
<p>I hope that helps. I realise VonC as just posted a very similar explanation...
I can't type fast enough!</p>
<p><strong>Edit</strong> some further thoughts on how to use git in a commercial setting, as
this seems relevant to the OP from the comments:</p>
<ul>
<li>The release repository, we'll call it <code>product.git</code>, is accessible by a number of senior programmers / technical people responsible for actually looking after the product itself. They are analogous to the role of maintainers in OSS.</li>
<li>These programmers probably also in part lead development of new versions, so they might also code themselves and maintain varios repositories. They might manage staging repositories for really new features and they might also have their own repositories. </li>
<li>Below them are programmers responsible for developing individual bits. For example, someone might be responsible for the UI work. They therefore manage the UI.git repository.</li>
<li>Below them are the actual programmers who develop the features as their full day to day job.</li>
</ul>
<p>So what happens? Well, everyone pulls at the start of each day from the
"upstream" source i.e. the release repository (which will also probably
contain the latest material from the previous days development). Everyone does
this, directly. This will go on a branch in their repository, probably called
"master" or maybe if you're me called "latest". The programmer will then do
some work. This work might be something they're not sure about, so they make a
branch, do the work. If it doesn't work, they can delete the branch and go
back. If it does, they will have to merge into the main branch they're
currently working on. We'll say this is a UI programmer working on <code>latest-ui</code>
so he does <code>git checkout latest-ui</code> followed by <code>git merge abc-ui-
mywhizzynewfeature</code>. He then tells his technical lead (the UI lead) hey, I've
completed such a task, pull from me. So the UI lead does <code>git pull user-repo
lastest-ui:lastest-ui-suchafeature-abc</code>. The UI lead then looks at it on that
branch and says, actually, that's very good, I'll merge it into <code>ui-latest</code>.
He might then tell everyone below him to pull from him on their <code>ui-latest</code>
branches or whatever name they've given them, and so the feature gets explored
by the devs. If the team is happy, the UI lead might ask the testing lead to
pull from him and merge the changes. This propagates out to everyone
(downstream of the change) who tests it and submits bug reports etc. Finally,
if the feature passes testing etc, one of the top technical leads might merge
it into the current working copy of the program, at which point all the
changes are then propagated back down. And so on.</p>
<p>It's not a "traditional" way of working and is designed to be "peer driven"
rather than "hierarchical" like SVN/CVS. In essence, everyone has commit
access, but only locally. It is access to the repository and which repository
you designate as the release repo that allows you to use hierarchy.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-you-issue-pull-requests-from-the-command-line-on-github/" class="u-url">Can you issue pull requests from the command line on GitHub?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-you-issue-pull-requests-from-the-command-line-on-github/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T09:24:53+08:00" itemprop="datePublished" title="2023-03-04 09:24">2023-03-04 09:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>It seems like you have to interact with github.com to initiate a pull request.
Is this so?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>UPDATE</strong> : The hub command is now an official github project and also
supports creating pull requests</p>
<p><strong>ORIGINAL</strong> :</p>
<p>Seems like a particularly useful thing to add to the hub command:
http://github.com/defunkt/hub or the github gem:
http://github.com/defunkt/github-gem</p>
<p>I suggest filing an issue with those projects asking for it. The github guys
are pretty responsive.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Git now ships with a subcommand <code>'git request-pull' [-p] &lt;start&gt; &lt;url&gt;
[&lt;end&gt;]</code></p>
<p>You can see the docs here</p>
<p>You may find this useful but it is not exactly the same as GitHub's feature.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2349.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2347.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
