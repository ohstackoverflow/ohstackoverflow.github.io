<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 263) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-263.html">
<link rel="prev" href="index-264.html" type="text/html">
<link rel="next" href="index-262.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ignoring-any-bin-directory-on-a-git-project/" class="u-url">ignoring any 'bin' directory on a git project</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ignoring-any-bin-directory-on-a-git-project/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:26:17+08:00" itemprop="datePublished" title="2023-02-17 02:26">2023-02-17 02:26</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a directory structure like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">.</span><span class="n">git</span><span class="o">/</span>
<span class="o">.</span><span class="n">gitignore</span>
<span class="n">main</span><span class="o">/</span>
<span class="w">  </span><span class="o">...</span>
<span class="n">tools</span><span class="o">/</span>
<span class="w">  </span><span class="o">...</span>
<span class="o">...</span>
</pre></div>

<p>Inside main and tools, and any other directory, at any level, there can be a
'bin' directory, which I want to ignore (and I want to ignore everything under
it too). I've tried each of these patterns in .gitignore but none of them
work:</p>
<div class="code"><pre class="code literal-block"><span class="o">/**/</span><span class="n">bin</span><span class="o">/**/*</span>
<span class="o">/./**/</span><span class="n">bin</span><span class="o">/**/*</span>
<span class="o">./**/</span><span class="n">bin</span><span class="o">/**/*</span>
<span class="o">**/</span><span class="n">bin</span><span class="o">/**/*</span>
<span class="o">*/</span><span class="n">bin</span><span class="o">/**/*</span>
<span class="n">bin</span><span class="o">/**/*</span>
<span class="o">/**/</span><span class="n">bin</span><span class="o">/*</span><span class="w"> </span>#<span class="nb">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">others</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="n">too</span>
</pre></div>

<p>Can anyone help me out? The first pattern (the one I think should be working)
works just fine if I do this:</p>
<div class="code"><pre class="code literal-block">/main/**/bin/**/*
</pre></div>

<p>But I don't want to have an entry for every top-level directory and I don't
want to have to modify .gitignore every time I add a new one.</p>
<p>This is on Windows using the latest msysgit.</p>
<p>EDIT: <strong>one more thing, there are files and directories that have the
substring 'bin' in their names, I don't want those to be ignored :)</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<p>Before version 1.8.2, <code>**</code> didn't have any special meaning in the
<code>.gitignore</code>. As of 1.8.2 git supports <code>**</code> to mean zero or more sub-
directories (see release notes).</p>
<p>The way to ignore all directories called bin anywhere below the current level
in a directory tree is with a <code>.gitignore</code> file with the pattern:</p>
<div class="code"><pre class="code literal-block">bin/
</pre></div>

<p>In the <code>man</code> page, there an example of ignoring a directory called <code>foo</code> using
an analogous pattern.</p>
<p><strong>Edit:</strong> If you already have any bin folders in your git index which you no
longer wish to track then you need to remove them explicitly. Git won't stop
tracking paths that are already being tracked just because they now match a
new <code>.gitignore</code> pattern. Execute a folder remove ( <strong>rm</strong> ) from index only (
<strong>--cached</strong> ) recursivelly ( <strong>-r</strong> ). Command line example for root bin
folder:</p>
<div class="code"><pre class="code literal-block">git rm -r --cached bin
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The <code>.gitignore</code> of your dream seems to be:</p>
<div class="code"><pre class="code literal-block">bin/
</pre></div>

<p>on the top level.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-remove-old-docker-containers/" class="u-url">How to remove old Docker containers</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-remove-old-docker-containers/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:25:44+08:00" itemprop="datePublished" title="2023-02-17 02:25">2023-02-17 02:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This question is related to <em>Should I be concerned about excess, non-running,
Docker containers?</em>.</p>
<p>I'm wondering how to remove old containers. The <code>docker rm 3e552code34a</code> lets
you remove a single one, but I have lots already. <code>docker rm --help</code> doesn't
give a selection option (like all, or by image name).</p>
<p>Maybe there is a directory in which these containers are stored where I can
delete them easily manually?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Since Docker 1.13.x you can use Docker container prune:</p>
<div class="code"><pre class="code literal-block">docker container prune
</pre></div>

<p>This will remove all stopped containers and should work on all platforms the
same way.</p>
<p>There is also a Docker system prune:</p>
<div class="code"><pre class="code literal-block">docker system prune
</pre></div>

<p>which will clean up all unused containers, networks, images (both dangling and
unreferenced), and optionally, volumes, in one command.</p>
<hr>
<p>For older Docker versions, you can string Docker commands together with other
Unix commands to get what you need. Here is an example on how to clean up old
containers that are weeks old:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>docker<span class="w"> </span>ps<span class="w"> </span>--filter<span class="w"> </span><span class="s2">"status=exited"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">'weeks ago'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">'{print $1}'</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>--no-run-if-empty<span class="w"> </span>docker<span class="w"> </span>rm
</pre></div>

<p>To give credit, where it is due, this example is from
https://twitter.com/jpetazzo/status/347431091415703552.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Another method, which I got from Guillaume J. Charmes (credit where it is
due):</p>
<div class="code"><pre class="code literal-block">docker rm `docker ps --no-trunc -aq`
</pre></div>

<p>will remove all containers in an elegant way.</p>
<p>And by Bartosz Bilicki, for Windows:</p>
<div class="code"><pre class="code literal-block"><span class="k">FOR</span><span class="w"> </span><span class="o">/</span><span class="nv">f</span><span class="w"> </span><span class="s2">"tokens=*"</span><span class="w"> </span><span class="o">%</span><span class="nv">i</span><span class="w"> </span><span class="nv">IN</span><span class="w"> </span><span class="ss">(</span><span class="s1">'docker ps -a -q'</span><span class="ss">)</span><span class="w"> </span><span class="k">DO</span><span class="w"> </span><span class="nv">docker</span><span class="w"> </span><span class="nv">rm</span><span class="w"> </span><span class="o">%</span><span class="nv">i</span>
</pre></div>

<p>For PowerShell:</p>
<div class="code"><pre class="code literal-block">docker rm @(docker ps -aq)
</pre></div>

<hr>
<p>An update with Docker 1.13 (Q4 2016), credit to VonC (later in this thread):</p>
<p><strong><code>docker system prune</code></strong> will delete ALL unused data (i.e., in order:
containers stopped, volumes without containers and images with no containers).</p>
<p>See PR 26108 and commit 86de7c0, which are introducing a few new commands to
help facilitate visualizing how much space the Docker daemon data is taking on
disk and allowing for easily cleaning up "unneeded" excess.</p>
<div class="code"><pre class="code literal-block"><span class="nv">docker</span><span class="w"> </span><span class="nv">system</span><span class="w"> </span><span class="nv">prune</span>

<span class="nv">WARNING</span><span class="o">!</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">remove</span>:
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">stopped</span><span class="w"> </span><span class="nv">containers</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">volumes</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">container</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">images</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">container</span><span class="w"> </span><span class="nv">associated</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">them</span>
<span class="nv">Are</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">sure</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="k">continue</span>?<span class="w"> </span>[<span class="nv">y</span><span class="o">/</span><span class="nv">N</span>]<span class="w"> </span><span class="nv">y</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-constructor-and-ngoninit/" class="u-url">Difference between Constructor and ngOnInit</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-constructor-and-ngoninit/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:25:15+08:00" itemprop="datePublished" title="2023-02-17 02:25">2023-02-17 02:25</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Angular provides life cycle hook <code>ngOnInit</code> by default.</p>
<p>Why should <code>ngOnInit</code> be used, if we already have a <code>constructor</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>Constructor</code> is a default method of the class that is executed when the
class is instantiated and ensures proper initialisation of fields in the class
and its subclasses. Angular, or better Dependency Injector (DI), analyses the
constructor parameters and when it creates a new instance by calling <code>new
MyClass()</code> it tries to find providers that match the types of the constructor
parameters, resolves them and passes them to the constructor like</p>
<div class="code"><pre class="code literal-block">new MyClass(someArg);
</pre></div>

<p><code>ngOnInit</code> is a life cycle hook called by Angular to indicate that Angular is
done creating the component.</p>
<p>We have to import <code>OnInit</code> like this in order to use it (actually implementing
<code>OnInit</code> is not mandatory but considered good practice):</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
</pre></div>

<p>then to make use of the method <code>OnInit</code>, we have to implement the class like
this:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">App</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">OnInit</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Called</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ngOnInit</span><span class="p">()</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">ngOnInit</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">Called</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">called</span><span class="w">  </span><span class="n">after</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">ngOnChanges</span><span class="p">()</span><span class="w"> </span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<blockquote>
<p>Implement this interface to execute custom initialization logic after your
directive's data-bound properties have been initialized. ngOnInit is called
right after the directive's data-bound properties have been checked for the
first time, and before any of its children have been checked. It is invoked
only once when the directive is instantiated.</p>
</blockquote>
<p>Mostly we use <code>ngOnInit</code> for all the initialization/declaration and avoid
stuff to work in the constructor. The constructor should only be used to
initialize class members but shouldn't do actual "work".</p>
<p>So you should use <code>constructor()</code> to setup Dependency Injection and not much
else. ngOnInit() is better place to "start" - it's where/when components'
bindings are resolved.</p>
<p>For more information refer here:</p>
<ul>
<li>
<p>https://angular.io/api/core/OnInit</p>
</li>
<li>
<p>Angular Component Constructor Vs OnInit</p>
</li>
</ul>
<p>Important to note that @Input values are not accessible in the constructor
(Thanks to @tim for suggestion in comments)</p>
<p><br></p>
<h3>Suggest</h3>
<p>The article The essential difference between Constructor and ngOnInit in
Angular explores the difference from multiple perspectives. This answer
provides the most important difference explanation related to the component
initialization process which also shows the different in usage.</p>
<p>Angular bootstrap process consists of the two major stages:</p>
<ul>
<li>constructing components tree</li>
<li>running change detection</li>
</ul>
<p>The constructor of the component is called when Angular constructs components
tree. All lifecycle hooks are called as part of running change detection.</p>
<p>When Angular constructs components tree the root module injector is already
configured so you can inject any global dependencies. Also, when Angular
instantiates a child component class the injector for the parent component is
also already set up so you can inject providers defined on the parent
component including the parent component itself. Component constructors is the
only method that is called in the context of the injector so if you need any
dependency that's the only place to get those dependencies.</p>
<p>When Angular starts change detection the components tree is constructed and
the constructors for all components in the tree have been called. Also every
component's template nodes are added to the DOM. The <code>@Input</code> communication
mechanism is processed during change detection so you cannot expect to have
the properties available in the constructor. It will be available on after
<code>ngOnInit</code>.</p>
<p>Let's see a quick example. Suppose you have the following template:</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">my</span><span class="o">-</span><span class="n">app</span><span class="o">&gt;</span>
<span class="w">   </span><span class="o">&lt;</span><span class="n">child</span><span class="o">-</span><span class="n">comp</span><span class="w"> </span><span class="o">[</span><span class="n">i</span><span class="o">]=</span><span class="s1">'prop'</span><span class="o">&gt;</span>
</pre></div>

<p>So Angular starts bootstrapping the application. As I said it first creates
classes for each component. So it calls <code>MyAppComponent</code> constructor. It also
creates a DOM node which is the host element of the <code>my-app</code> component. Then
it proceeds to creating a host element for the <code>child-comp</code> and calling
<code>ChildComponent</code> constructor. At this stage it's not really concerned with the
<code>i</code> input binding and any lifecycle hooks. So when this process is finished
Angular ends up with the following tree of component views:</p>
<div class="code"><pre class="code literal-block">MyAppView
  - MyApp component instance
  - my-app host element data
       ChildCompnentView
         - ChildComponent component instance
         - child-comp host element data
</pre></div>

<p>Only then runs change detection and updates bindings for the <code>my-app</code> and
calls <code>ngOnInit</code> on the MyAppComponent class. Then it proceeds to updating the
bindings for the <code>child-comp</code> and calls <code>ngOnInit</code> on the ChildComponent
class.</p>
<p>You can do your initialization logic in either constructor or <code>ngOnInit</code>
depending on what you need available. For example the article Here is how to
get ViewContainerRef before @ViewChild query is evaluated shows what type of
initialization logic can be required to be performed in the constructor.</p>
<p>Here are some articles that will help you understand the topic better:</p>
<ul>
<li>Everything you need to know about change detection in Angular</li>
<li>Angular’s $digest is reborn in the newer version of Angular</li>
<li>The mechanics of property bindings update in Angular</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-264.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-262.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
