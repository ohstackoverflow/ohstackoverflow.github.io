<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 502) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-502.html">
<link rel="prev" href="index-503.html" type="text/html">
<link rel="next" href="index-501.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-way-to-check-if-a-file-is-in-use/" class="u-url">Is there a way to check if a file is in use?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-way-to-check-if-a-file-is-in-use/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:29:14+08:00" itemprop="datePublished" title="2023-02-17 08:29">2023-02-17 08:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm writing a program in C# that needs to repeatedly access 1 image file. Most
of the time it works, but if my computer's running fast, it will try to access
the file before it's been saved back to the filesystem and throw an error:</p>
<blockquote>
<p>"File in use by another process"</p>
</blockquote>
<p>I would like to find a way around this, but all my Googling has only yielded
creating checks by using exception handling. This is against my religion, so I
was wondering if anyone has a better way of doing it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Updated NOTE on this solution</strong> : Checking with <code>FileAccess.ReadWrite</code> will
fail for Read-Only files so the solution has been modified to check with
<code>FileAccess.Read</code>.</p>
<p><strong>ORIGINAL:</strong> I've used this code for the past several years, and I haven't
had any issues with it.</p>
<p>Understand your hesitation about using exceptions, but you can't avoid them
all of the time:</p>
<div class="code"><pre class="code literal-block"><span class="nt">protected</span><span class="w"> </span><span class="nt">virtual</span><span class="w"> </span><span class="nt">bool</span><span class="w"> </span><span class="nt">IsFileLocked</span><span class="o">(</span><span class="nt">FileInfo</span><span class="w"> </span><span class="nt">file</span><span class="o">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="err">try</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">        </span><span class="err">using(FileStream</span><span class="w"> </span><span class="err">stream</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">file.Open(FileMode.Open,</span><span class="w"> </span><span class="err">FileAccess.Read,</span><span class="w"> </span><span class="err">FileShare.None))</span>
<span class="w">        </span><span class="err">{</span>
<span class="w">            </span><span class="err">stream.Close()</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="nt">catch</span><span class="w"> </span><span class="o">(</span><span class="nt">IOException</span><span class="o">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="err">//the</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">unavailable</span><span class="w"> </span><span class="err">because</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="n">is</span><span class="p">:</span>
<span class="w">        </span><span class="o">//</span><span class="n">still</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="kc">to</span>
<span class="w">        </span><span class="o">//</span><span class="n">or</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">processed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">thread</span>
<span class="w">        </span><span class="o">//</span><span class="n">or</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">exist</span><span class="w"> </span><span class="p">(</span><span class="n">has</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">processed</span><span class="p">)</span>
<span class="w">        </span><span class="n">return</span><span class="w"> </span><span class="n">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="o">//</span><span class="nt">file</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">locked</span>
<span class="w">    </span><span class="nt">return</span><span class="w"> </span><span class="nt">false</span><span class="o">;</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can suffer from a thread race condition on this which there are documented
examples of this being used as a security vulnerability. If you check that the
file is available, but then try and use it you could throw at that point,
which a malicious user could use to force and exploit in your code.</p>
<p>Your best bet is a try catch / finally which tries to get the file handle.</p>
<div class="code"><pre class="code literal-block"><span class="nv">try</span>
{
<span class="w">   </span><span class="nv">using</span><span class="w"> </span><span class="ss">(</span><span class="nv">Stream</span><span class="w"> </span><span class="nv">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">FileStream</span><span class="ss">(</span><span class="s2">"MyFilename.txt"</span>,<span class="w"> </span><span class="nv">FileMode</span>.<span class="nv">Open</span><span class="ss">))</span>
<span class="w">   </span>{
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="nv">File</span><span class="o">/</span><span class="nv">Stream</span><span class="w"> </span><span class="nv">manipulating</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">here</span>
<span class="w">   </span>}
}<span class="w"> </span><span class="nv">catch</span><span class="w"> </span>{
<span class="w">  </span><span class="o">//</span><span class="nv">check</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="nv">why</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">failed</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">ask</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">retry</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">use</span>.
}
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/when-and-how-should-i-use-a-threadlocal-variable/" class="u-url">When and how should I use a ThreadLocal variable?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/when-and-how-should-i-use-a-threadlocal-variable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:28:43+08:00" itemprop="datePublished" title="2023-02-17 08:28">2023-02-17 08:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When should I use a <code>ThreadLocal</code> variable?</p>
<p>How is it used?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>One possible (and common) use is when you have some object that is not thread-
safe, but you want to avoid synchronizing access to that object (I'm looking
at you, SimpleDateFormat). Instead, give each thread its own instance of the
object.</p>
<p>For example:</p>
<div class="code"><pre class="code literal-block"><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Foo</span>
<span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">thread</span><span class="o">-</span><span class="n">safe</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="n">thread</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">ThreadLocal</span><span class="o">&lt;</span><span class="n">SimpleDateFormat</span><span class="o">&gt;</span><span class="w"> </span><span class="n">formatter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadLocal</span><span class="o">&lt;</span><span class="n">SimpleDateFormat</span><span class="o">&gt;</span><span class="p">()</span><span class="err">{</span>
<span class="w">        </span><span class="nv">@Override</span>
<span class="w">        </span><span class="n">protected</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="w"> </span><span class="n">initialValue</span><span class="p">()</span>
<span class="w">        </span><span class="err">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="p">(</span><span class="ss">"yyyyMMdd HHmm"</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span><span class="p">;</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">formatIt</span><span class="p">(</span><span class="nc">Date</span><span class="w"> </span><span class="nc">date</span><span class="p">)</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">formatter</span><span class="p">.</span><span class="k">get</span><span class="p">().</span><span class="nf">format</span><span class="p">(</span><span class="nc">date</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>Documentation.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Since a <code>ThreadLocal</code> is a reference to data within a given <code>Thread</code>, you can
end up with classloading leaks when using <code>ThreadLocal</code>s in application
servers using thread pools. You need to be very careful about cleaning up any
<code>ThreadLocal</code>s you <code>get()</code> or <code>set()</code> by using the <code>ThreadLocal</code>'s <code>remove()</code>
method.</p>
<p>If you do not clean up when you're done, any references it holds to classes
loaded as part of a deployed webapp will remain in the permanent heap and will
never get garbage collected. Redeploying/undeploying the webapp will not clean
up each <code>Thread</code>'s reference to your webapp's class(es) since the <code>Thread</code> is
not something owned by your webapp. Each successive deployment will create a
new instance of the class which will never be garbage collected.</p>
<p>You will end up with out of memory exceptions due to
<code>java.lang.OutOfMemoryError: PermGen space</code> and after some googling will
probably just increase <code>-XX:MaxPermSize</code> instead of fixing the bug.</p>
<p>If you do end up experiencing these problems, you can determine which thread
and class is retaining these references by using Eclipse's Memory Analyzer
and/or by following Frank Kieviet's guide and followup.</p>
<p>Update: Re-discovered Alex Vasseur's blog entry that helped me track down some
<code>ThreadLocal</code> issues I was having.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/" class="u-url">How do I list all cron jobs for all users?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-list-all-cron-jobs-for-all-users/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T08:28:15+08:00" itemprop="datePublished" title="2023-02-17 08:28">2023-02-17 08:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a command or an existing script that will let me view all of a *NIX
system's scheduled cron jobs at once? I'd like it to include all of the user
crontabs, as well as <code>/etc/crontab</code>, and whatever's in <code>/etc/cron.d</code>. It would
also be nice to see the specific commands run by <code>run-parts</code> in
<code>/etc/crontab</code>.</p>
<p>Ideally, I'd like the output in a nice column form and ordered in some
meaningful way.</p>
<p>I could then merge these listings from multiple servers to view the overall
"schedule of events."</p>
<p>I was about to write such a script myself, but if someone's already gone to
the trouble...</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I ended up writing a script (I'm trying to teach myself the finer points of
bash scripting, so that's why you don't see something like Perl here). It's
not exactly a simple affair, but it does most of what I need. It uses Kyle's
suggestion for looking up individual users' crontabs, but also deals with
<code>/etc/crontab</code> (including the scripts launched by <code>run-parts</code> in
<code>/etc/cron.hourly</code>, <code>/etc/cron.daily</code>, etc.) and the jobs in the <code>/etc/cron.d</code>
directory. It takes all of those and merges them into a display something like
the following:</p>
<div class="code"><pre class="code literal-block"><span class="n">mi</span><span class="w">     </span><span class="n">h</span><span class="w">    </span><span class="n">d</span><span class="w">  </span><span class="n">m</span><span class="w">  </span><span class="n">w</span><span class="w">  </span><span class="n">user</span><span class="w">      </span><span class="n">command</span>
<span class="mi">09</span><span class="p">,</span><span class="mi">39</span><span class="w">  </span><span class="o">*</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">php5</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">php5</span><span class="o">/</span><span class="w"> </span><span class="o">-</span><span class="n">type</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">-</span><span class="n">cmin</span><span class="w"> </span><span class="o">+$</span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">php5</span><span class="o">/</span><span class="n">maxlifetime</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">print0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">xargs</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="n">rm</span>
<span class="mi">47</span><span class="w">     </span><span class="o">*/</span><span class="mi">8</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="n">rsync</span><span class="w"> </span><span class="o">-</span><span class="n">axE</span><span class="w"> </span><span class="o">--</span><span class="n">delete</span><span class="w"> </span><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">errors</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="n">mirror</span><span class="o">/</span><span class="w"> </span><span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="nb nb-Type">null</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">apt</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">aptitude</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">find</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">logrotate</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">man</span><span class="o">-</span><span class="n">db</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">ntp</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">standard</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">sysklogd</span>
<span class="mi">27</span><span class="w">     </span><span class="mi">2</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="mi">7</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">weekly</span><span class="o">/</span><span class="n">man</span><span class="o">-</span><span class="n">db</span>
<span class="mi">27</span><span class="w">     </span><span class="mi">2</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="mi">7</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">weekly</span><span class="o">/</span><span class="n">sysklogd</span>
<span class="mi">13</span><span class="w">     </span><span class="mi">3</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">archiver</span><span class="w">  </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">offsite</span><span class="o">-</span><span class="n">backup</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
<span class="mi">32</span><span class="w">     </span><span class="mi">3</span><span class="w">    </span><span class="mi">1</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">monthly</span><span class="o">/</span><span class="n">standard</span>
<span class="mi">36</span><span class="w">     </span><span class="mi">4</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">yukon</span><span class="w">     </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">yukon</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">do</span><span class="o">-</span><span class="n">daily</span><span class="o">-</span><span class="n">stuff</span>
<span class="mi">5</span><span class="w">      </span><span class="mi">5</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">archiver</span><span class="w">  </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">update</span><span class="o">-</span><span class="n">logs</span><span class="w"> </span><span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="nb nb-Type">null</span>
</pre></div>

<p>Note that it shows the user, and more-or-less sorts by hour and minute so that
I can see the daily schedule.</p>
<p>So far, I've tested it on Ubuntu, Debian, and Red Hat AS.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="c1"># System-wide crontab file and cron job directory. Change these for your system.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="nv">CRONTAB</span><span class="o">=</span><span class="s1">'/etc/crontab'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="nv">CRONDIR</span><span class="o">=</span><span class="s1">'/etc/cron.d'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="c1"># Single tab character. Annoyingly necessary.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><span class="nv">tab</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span>-en<span class="w"> </span><span class="s2">"\t"</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="c1"># Given a stream of crontab lines, exclude non-cron job lines, replace</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><span class="c1"># whitespace characters with a single space, and remove any spaces from the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="c1"># beginning of each line.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>clean_cron_lines<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>line<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><span class="w">            </span>egrep<span class="w"> </span>--invert-match<span class="w"> </span><span class="s1">'^($|\s*#|\s*[[:alnum:]_]+=)'</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code><span class="w">            </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/\s+/ /g"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code><span class="w">            </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/^ //"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-19"><code data-line-number="19"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">done</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-20"><code data-line-number="20"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-21"><code data-line-number="21"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-22"><code data-line-number="22"></code></a></td>
<td class="code"><code><span class="c1"># Given a stream of cleaned crontab lines, echo any that don't include the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-23"><code data-line-number="23"></code></a></td>
<td class="code"><code><span class="c1"># run-parts command, and for those that do, show each job file in the run-parts</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-24"><code data-line-number="24"></code></a></td>
<td class="code"><code><span class="c1"># directory as if it were scheduled explicitly.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-25"><code data-line-number="25"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>lookup_run_parts<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-26"><code data-line-number="26"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>line<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-27"><code data-line-number="27"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nv">match</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-o<span class="w"> </span><span class="s1">'run-parts (-{1,2}\S+ )*\S+'</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-28"><code data-line-number="28"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-29"><code data-line-number="29"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">match</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-30"><code data-line-number="30"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-31"><code data-line-number="31"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">else</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-32"><code data-line-number="32"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">cron_fields</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f1-6<span class="w"> </span>-d<span class="s1">' '</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-33"><code data-line-number="33"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">cron_job_dir</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w">  </span><span class="s2">"</span><span class="si">${</span><span class="nv">match</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">'{print $NF}'</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-34"><code data-line-number="34"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-35"><code data-line-number="35"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_job_dir</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-36"><code data-line-number="36"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">for</span><span class="w"> </span>cron_job_file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_job_dir</span><span class="si">}</span><span class="s2">"</span>/*<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w">  </span><span class="c1"># */ &lt;not a comment&gt;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-37"><code data-line-number="37"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_job_file</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_fields</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">cron_job_file</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-38"><code data-line-number="38"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">done</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-39"><code data-line-number="39"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">fi</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-40"><code data-line-number="40"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">fi</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-41"><code data-line-number="41"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">done</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-42"><code data-line-number="42"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-43"><code data-line-number="43"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-44"><code data-line-number="44"></code></a></td>
<td class="code"><code><span class="c1"># Temporary file for crontab lines.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-45"><code data-line-number="45"></code></a></td>
<td class="code"><code><span class="nv">temp</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-46"><code data-line-number="46"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-47"><code data-line-number="47"></code></a></td>
<td class="code"><code><span class="c1"># Add all of the jobs from the system-wide crontab file.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-48"><code data-line-number="48"></code></a></td>
<td class="code"><code>cat<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">CRONTAB</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>clean_cron_lines<span class="w"> </span><span class="p">|</span><span class="w"> </span>lookup_run_parts<span class="w"> </span>&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-49"><code data-line-number="49"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-50"><code data-line-number="50"></code></a></td>
<td class="code"><code><span class="c1"># Add all of the jobs from the system-wide cron directory.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-51"><code data-line-number="51"></code></a></td>
<td class="code"><code>cat<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">CRONDIR</span><span class="si">}</span><span class="s2">"</span>/*<span class="w"> </span><span class="p">|</span><span class="w"> </span>clean_cron_lines<span class="w"> </span>&gt;&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span><span class="w">  </span><span class="c1"># */ &lt;not a comment&gt;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-52"><code data-line-number="52"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-53"><code data-line-number="53"></code></a></td>
<td class="code"><code><span class="c1"># Add each user's crontab (if it exists). Insert the user's name between the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-54"><code data-line-number="54"></code></a></td>
<td class="code"><code><span class="c1"># five time fields and the command.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-55"><code data-line-number="55"></code></a></td>
<td class="code"><code><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>user<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-56"><code data-line-number="56"></code></a></td>
<td class="code"><code><span class="w">    </span>crontab<span class="w"> </span>-l<span class="w"> </span>-u<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">user</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-57"><code data-line-number="57"></code></a></td>
<td class="code"><code><span class="w">        </span>clean_cron_lines<span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-58"><code data-line-number="58"></code></a></td>
<td class="code"><code><span class="w">        </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/^((\S+ +){5})(.+)</span>$<span class="s2">/\1</span><span class="si">${</span><span class="nv">user</span><span class="si">}</span><span class="s2"> \3/"</span><span class="w"> </span>&gt;&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-59"><code data-line-number="59"></code></a></td>
<td class="code"><code><span class="k">done</span><span class="w"> </span>&lt;<span class="w"> </span>&lt;<span class="o">(</span>cut<span class="w"> </span>--fields<span class="o">=</span><span class="m">1</span><span class="w"> </span>--delimiter<span class="o">=</span>:<span class="w"> </span>/etc/passwd<span class="o">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-60"><code data-line-number="60"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-61"><code data-line-number="61"></code></a></td>
<td class="code"><code><span class="c1"># Output the collected crontab lines. Replace the single spaces between the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-62"><code data-line-number="62"></code></a></td>
<td class="code"><code><span class="c1"># fields with tab characters, sort the lines by hour and minute, insert the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-63"><code data-line-number="63"></code></a></td>
<td class="code"><code><span class="c1"># header line, and format the results as a table.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-64"><code data-line-number="64"></code></a></td>
<td class="code"><code>cat<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-65"><code data-line-number="65"></code></a></td>
<td class="code"><code><span class="w">    </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/^(\S+) +(\S+) +(\S+) +(\S+) +(\S+) +(\S+) +(.*)</span>$<span class="s2">/\1\t\2\t\3\t\4\t\5\t\6\t\7/"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-66"><code data-line-number="66"></code></a></td>
<td class="code"><code><span class="w">    </span>sort<span class="w"> </span>--numeric-sort<span class="w"> </span>--field-separator<span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">tab</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>--key<span class="o">=</span><span class="m">2</span>,1<span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-67"><code data-line-number="67"></code></a></td>
<td class="code"><code><span class="w">    </span>sed<span class="w"> </span><span class="s2">"1i\mi\th\td\tm\tw\tuser\tcommand"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-68"><code data-line-number="68"></code></a></td>
<td class="code"><code><span class="w">    </span>column<span class="w"> </span>-s<span class="s2">"</span><span class="si">${</span><span class="nv">tab</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-t
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-69"><code data-line-number="69"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-70"><code data-line-number="70"></code></a></td>
<td class="code"><code>rm<span class="w"> </span>--force<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
</table></div>
<p><br></p>
<h3>Suggest</h3>
<p>I ended up writing a script (I'm trying to teach myself the finer points of
bash scripting, so that's why you don't see something like Perl here). It's
not exactly a simple affair, but it does most of what I need. It uses Kyle's
suggestion for looking up individual users' crontabs, but also deals with
<code>/etc/crontab</code> (including the scripts launched by <code>run-parts</code> in
<code>/etc/cron.hourly</code>, <code>/etc/cron.daily</code>, etc.) and the jobs in the <code>/etc/cron.d</code>
directory. It takes all of those and merges them into a display something like
the following:</p>
<div class="code"><pre class="code literal-block"><span class="n">mi</span><span class="w">     </span><span class="n">h</span><span class="w">    </span><span class="n">d</span><span class="w">  </span><span class="n">m</span><span class="w">  </span><span class="n">w</span><span class="w">  </span><span class="n">user</span><span class="w">      </span><span class="n">command</span>
<span class="mi">09</span><span class="p">,</span><span class="mi">39</span><span class="w">  </span><span class="o">*</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">php5</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">php5</span><span class="o">/</span><span class="w"> </span><span class="o">-</span><span class="n">type</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">-</span><span class="n">cmin</span><span class="w"> </span><span class="o">+$</span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">php5</span><span class="o">/</span><span class="n">maxlifetime</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">print0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">xargs</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="n">rm</span>
<span class="mi">47</span><span class="w">     </span><span class="o">*/</span><span class="mi">8</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="n">rsync</span><span class="w"> </span><span class="o">-</span><span class="n">axE</span><span class="w"> </span><span class="o">--</span><span class="n">delete</span><span class="w"> </span><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">errors</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="n">mirror</span><span class="o">/</span><span class="w"> </span><span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="nb nb-Type">null</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">apt</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">aptitude</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">find</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">logrotate</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">man</span><span class="o">-</span><span class="n">db</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">ntp</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">standard</span>
<span class="mi">17</span><span class="w">     </span><span class="mi">1</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">daily</span><span class="o">/</span><span class="n">sysklogd</span>
<span class="mi">27</span><span class="w">     </span><span class="mi">2</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="mi">7</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">weekly</span><span class="o">/</span><span class="n">man</span><span class="o">-</span><span class="n">db</span>
<span class="mi">27</span><span class="w">     </span><span class="mi">2</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="mi">7</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">weekly</span><span class="o">/</span><span class="n">sysklogd</span>
<span class="mi">13</span><span class="w">     </span><span class="mi">3</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">archiver</span><span class="w">  </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">offsite</span><span class="o">-</span><span class="n">backup</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
<span class="mi">32</span><span class="w">     </span><span class="mi">3</span><span class="w">    </span><span class="mi">1</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">root</span><span class="w">      </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cron</span><span class="o">.</span><span class="n">monthly</span><span class="o">/</span><span class="n">standard</span>
<span class="mi">36</span><span class="w">     </span><span class="mi">4</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">yukon</span><span class="w">     </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">yukon</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">do</span><span class="o">-</span><span class="n">daily</span><span class="o">-</span><span class="n">stuff</span>
<span class="mi">5</span><span class="w">      </span><span class="mi">5</span><span class="w">    </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="o">*</span><span class="w">  </span><span class="n">archiver</span><span class="w">  </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">update</span><span class="o">-</span><span class="n">logs</span><span class="w"> </span><span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="nb nb-Type">null</span>
</pre></div>

<p>Note that it shows the user, and more-or-less sorts by hour and minute so that
I can see the daily schedule.</p>
<p>So far, I've tested it on Ubuntu, Debian, and Red Hat AS.</p>
<div class="code"><table class="codetable">
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-1"><code data-line-number=" 1"></code></a></td>
<td class="code"><code><span class="ch">#!/bin/bash</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-2"><code data-line-number=" 2"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-3"><code data-line-number=" 3"></code></a></td>
<td class="code"><code><span class="c1"># System-wide crontab file and cron job directory. Change these for your system.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-4"><code data-line-number=" 4"></code></a></td>
<td class="code"><code><span class="nv">CRONTAB</span><span class="o">=</span><span class="s1">'/etc/crontab'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-5"><code data-line-number=" 5"></code></a></td>
<td class="code"><code><span class="nv">CRONDIR</span><span class="o">=</span><span class="s1">'/etc/cron.d'</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-6"><code data-line-number=" 6"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-7"><code data-line-number=" 7"></code></a></td>
<td class="code"><code><span class="c1"># Single tab character. Annoyingly necessary.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-8"><code data-line-number=" 8"></code></a></td>
<td class="code"><code><span class="nv">tab</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span>-en<span class="w"> </span><span class="s2">"\t"</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-9"><code data-line-number=" 9"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-10"><code data-line-number="10"></code></a></td>
<td class="code"><code><span class="c1"># Given a stream of crontab lines, exclude non-cron job lines, replace</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-11"><code data-line-number="11"></code></a></td>
<td class="code"><code><span class="c1"># whitespace characters with a single space, and remove any spaces from the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-12"><code data-line-number="12"></code></a></td>
<td class="code"><code><span class="c1"># beginning of each line.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-13"><code data-line-number="13"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>clean_cron_lines<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-14"><code data-line-number="14"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>line<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-15"><code data-line-number="15"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-16"><code data-line-number="16"></code></a></td>
<td class="code"><code><span class="w">            </span>egrep<span class="w"> </span>--invert-match<span class="w"> </span><span class="s1">'^($|\s*#|\s*[[:alnum:]_]+=)'</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-17"><code data-line-number="17"></code></a></td>
<td class="code"><code><span class="w">            </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/\s+/ /g"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-18"><code data-line-number="18"></code></a></td>
<td class="code"><code><span class="w">            </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/^ //"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-19"><code data-line-number="19"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">done</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-20"><code data-line-number="20"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-21"><code data-line-number="21"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-22"><code data-line-number="22"></code></a></td>
<td class="code"><code><span class="c1"># Given a stream of cleaned crontab lines, echo any that don't include the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-23"><code data-line-number="23"></code></a></td>
<td class="code"><code><span class="c1"># run-parts command, and for those that do, show each job file in the run-parts</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-24"><code data-line-number="24"></code></a></td>
<td class="code"><code><span class="c1"># directory as if it were scheduled explicitly.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-25"><code data-line-number="25"></code></a></td>
<td class="code"><code><span class="k">function</span><span class="w"> </span>lookup_run_parts<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-26"><code data-line-number="26"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>line<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-27"><code data-line-number="27"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="nv">match</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-o<span class="w"> </span><span class="s1">'run-parts (-{1,2}\S+ )*\S+'</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-28"><code data-line-number="28"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-29"><code data-line-number="29"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">match</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-30"><code data-line-number="30"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-31"><code data-line-number="31"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">else</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-32"><code data-line-number="32"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">cron_fields</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">line</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f1-6<span class="w"> </span>-d<span class="s1">' '</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-33"><code data-line-number="33"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="nv">cron_job_dir</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w">  </span><span class="s2">"</span><span class="si">${</span><span class="nv">match</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">'{print $NF}'</span><span class="k">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-34"><code data-line-number="34"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-35"><code data-line-number="35"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_job_dir</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-36"><code data-line-number="36"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">for</span><span class="w"> </span>cron_job_file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_job_dir</span><span class="si">}</span><span class="s2">"</span>/*<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w">  </span><span class="c1"># */ &lt;not a comment&gt;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-37"><code data-line-number="37"></code></a></td>
<td class="code"><code><span class="w">                    </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_job_file</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="o">]]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">cron_fields</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">cron_job_file</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-38"><code data-line-number="38"></code></a></td>
<td class="code"><code><span class="w">                </span><span class="k">done</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-39"><code data-line-number="39"></code></a></td>
<td class="code"><code><span class="w">            </span><span class="k">fi</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-40"><code data-line-number="40"></code></a></td>
<td class="code"><code><span class="w">        </span><span class="k">fi</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-41"><code data-line-number="41"></code></a></td>
<td class="code"><code><span class="w">    </span><span class="k">done</span><span class="p">;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-42"><code data-line-number="42"></code></a></td>
<td class="code"><code><span class="o">}</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-43"><code data-line-number="43"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-44"><code data-line-number="44"></code></a></td>
<td class="code"><code><span class="c1"># Temporary file for crontab lines.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-45"><code data-line-number="45"></code></a></td>
<td class="code"><code><span class="nv">temp</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-46"><code data-line-number="46"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-47"><code data-line-number="47"></code></a></td>
<td class="code"><code><span class="c1"># Add all of the jobs from the system-wide crontab file.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-48"><code data-line-number="48"></code></a></td>
<td class="code"><code>cat<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">CRONTAB</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>clean_cron_lines<span class="w"> </span><span class="p">|</span><span class="w"> </span>lookup_run_parts<span class="w"> </span>&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-49"><code data-line-number="49"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-50"><code data-line-number="50"></code></a></td>
<td class="code"><code><span class="c1"># Add all of the jobs from the system-wide cron directory.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-51"><code data-line-number="51"></code></a></td>
<td class="code"><code>cat<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">CRONDIR</span><span class="si">}</span><span class="s2">"</span>/*<span class="w"> </span><span class="p">|</span><span class="w"> </span>clean_cron_lines<span class="w"> </span>&gt;&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span><span class="w">  </span><span class="c1"># */ &lt;not a comment&gt;</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-52"><code data-line-number="52"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-53"><code data-line-number="53"></code></a></td>
<td class="code"><code><span class="c1"># Add each user's crontab (if it exists). Insert the user's name between the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-54"><code data-line-number="54"></code></a></td>
<td class="code"><code><span class="c1"># five time fields and the command.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-55"><code data-line-number="55"></code></a></td>
<td class="code"><code><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>user<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-56"><code data-line-number="56"></code></a></td>
<td class="code"><code><span class="w">    </span>crontab<span class="w"> </span>-l<span class="w"> </span>-u<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">user</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-57"><code data-line-number="57"></code></a></td>
<td class="code"><code><span class="w">        </span>clean_cron_lines<span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-58"><code data-line-number="58"></code></a></td>
<td class="code"><code><span class="w">        </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/^((\S+ +){5})(.+)</span>$<span class="s2">/\1</span><span class="si">${</span><span class="nv">user</span><span class="si">}</span><span class="s2"> \3/"</span><span class="w"> </span>&gt;&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-59"><code data-line-number="59"></code></a></td>
<td class="code"><code><span class="k">done</span><span class="w"> </span>&lt;<span class="w"> </span>&lt;<span class="o">(</span>cut<span class="w"> </span>--fields<span class="o">=</span><span class="m">1</span><span class="w"> </span>--delimiter<span class="o">=</span>:<span class="w"> </span>/etc/passwd<span class="o">)</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-60"><code data-line-number="60"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-61"><code data-line-number="61"></code></a></td>
<td class="code"><code><span class="c1"># Output the collected crontab lines. Replace the single spaces between the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-62"><code data-line-number="62"></code></a></td>
<td class="code"><code><span class="c1"># fields with tab characters, sort the lines by hour and minute, insert the</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-63"><code data-line-number="63"></code></a></td>
<td class="code"><code><span class="c1"># header line, and format the results as a table.</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-64"><code data-line-number="64"></code></a></td>
<td class="code"><code>cat<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-65"><code data-line-number="65"></code></a></td>
<td class="code"><code><span class="w">    </span>sed<span class="w"> </span>--regexp-extended<span class="w"> </span><span class="s2">"s/^(\S+) +(\S+) +(\S+) +(\S+) +(\S+) +(\S+) +(.*)</span>$<span class="s2">/\1\t\2\t\3\t\4\t\5\t\6\t\7/"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-66"><code data-line-number="66"></code></a></td>
<td class="code"><code><span class="w">    </span>sort<span class="w"> </span>--numeric-sort<span class="w"> </span>--field-separator<span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">tab</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>--key<span class="o">=</span><span class="m">2</span>,1<span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-67"><code data-line-number="67"></code></a></td>
<td class="code"><code><span class="w">    </span>sed<span class="w"> </span><span class="s2">"1i\mi\th\td\tm\tw\tuser\tcommand"</span><span class="w"> </span><span class="p">|</span>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-68"><code data-line-number="68"></code></a></td>
<td class="code"><code><span class="w">    </span>column<span class="w"> </span>-s<span class="s2">"</span><span class="si">${</span><span class="nv">tab</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>-t
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-69"><code data-line-number="69"></code></a></td>
<td class="code"><code>
</code></td>
</tr>
<tr>
<td class="linenos linenodiv"><a href="posts/how-do-i-list-all-cron-jobs-for-all-users/#-70"><code data-line-number="70"></code></a></td>
<td class="code"><code>rm<span class="w"> </span>--force<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">temp</span><span class="si">}</span><span class="s2">"</span>
</code></td>
</tr>
</table></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-503.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-501.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
