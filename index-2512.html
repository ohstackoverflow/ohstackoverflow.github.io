<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2512) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2512.html">
<link rel="prev" href="index-2513.html" type="text/html">
<link rel="next" href="index-2511.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/code-coverage-with-mocha/" class="u-url">Code coverage with Mocha</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/code-coverage-with-mocha/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T21:38:55+08:00" itemprop="datePublished" title="2023-03-04 21:38">2023-03-04 21:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am using Mocha for testing my NodeJS application. I am not able to figure
out how to use its code coverage feature. I tried googling it but did not find
any proper tutorial. Please help.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You need an additional library for code coverage, and you are going to be
blown away by how powerful and easy istanbul is. Try the following, after you
get your mocha tests to pass:</p>
<div class="code"><pre class="code literal-block">npm install nyc
</pre></div>

<p>Now, simply place the command nyc in front of your existing test command, for
example:</p>
<div class="code"><pre class="code literal-block">{
  "scripts": {
    "test": "nyc mocha"
  }
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Now ( <strong>2023</strong> ) the preferred way to use istanbul is via its <em>"state of the
art command line interface"</em> nyc.</p>
<h2>Setup</h2>
<p>First, install it in your project with</p>
<div class="code"><pre class="code literal-block">npm i nyc --save-dev
</pre></div>

<p>Then, if you have a npm based project, just change the test script inside the
<code>scripts</code> object of your package.json file to execute code coverage of your
mocha tests:</p>
<div class="code"><pre class="code literal-block">{
  "scripts": {
    "test": "nyc --reporter=text mocha"
  }
}
</pre></div>

<h2>Run</h2>
<p>Now run your tests</p>
<div class="code"><pre class="code literal-block">npm test
</pre></div>

<p>and you will see a table like this in your console, just after your tests
output:</p>
<p><img alt="Istanbul Nyc Mocha code coverage" src="images/AfAJZ.png"></p>
<h2>Customization</h2>
<h4>Html report</h4>
<p>Just use</p>
<div class="code"><pre class="code literal-block">nyc --reporter=html
</pre></div>

<p>instead of <code>text</code>. Now it will produce a report inside
<code>./coverage/index.html</code>.</p>
<h4>Report formats</h4>
<p>Istanbul supports a wide range of report formats. Just look at its reports
library to find the most useful for you. Just add a <code>--reporter=REPORTER_NAME</code>
option for each format you want. For example, with</p>
<div class="code"><pre class="code literal-block">nyc --reporter=html --reporter=text
</pre></div>

<p>you will have both the console and the html report.</p>
<h4>Don't run coverage with npm test</h4>
<p>Just add another script in your <code>package.json</code> and leave the <code>test</code> script
with only your test runner (e.g. mocha):</p>
<div class="code"><pre class="code literal-block">{
  "scripts": {
    "test": "mocha",
    "test-with-coverage": "nyc --reporter=text mocha"
  }
}
</pre></div>

<p>Now run this custom script</p>
<div class="code"><pre class="code literal-block">npm run test-with-coverage
</pre></div>

<p>to run tests with code coverage.</p>
<h4>Force test failing if code coverage is low</h4>
<p>Fail if the total code coverage is below 90%:</p>
<div class="code"><pre class="code literal-block">nyc --check-coverage --lines 90
</pre></div>

<p>Fail if the code coverage of at least one file is below 90%:</p>
<div class="code"><pre class="code literal-block">nyc --check-coverage --lines 90 --per-file
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-stop-event-propagation-with-inline-onclick-attribute/" class="u-url">How to stop event propagation with inline onclick attribute?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-stop-event-propagation-with-inline-onclick-attribute/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T21:37:19+08:00" itemprop="datePublished" title="2023-03-04 21:37">2023-03-04 21:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Consider the following:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"alert('you clicked the header')"</span><span class="w"> </span><span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;span</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"alert('you clicked inside the header');"</span><span class="nt">&gt;</span>something<span class="w"> </span>inside<span class="w"> </span>the<span class="w"> </span>header<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>How can I make it so that when the user clicks the span, it does not fire the
<code>div</code>'s click event?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use event.stopPropagation().</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;span</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"event.stopPropagation(); alert('you clicked inside the header');"</span><span class="nt">&gt;</span>something<span class="w"> </span>inside<span class="w"> </span>the<span class="w"> </span>header<span class="nt">&lt;/span&gt;</span>
</pre></div>

<p>For IE: <code>window.event.cancelBubble = true</code></p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;span</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"window.event.cancelBubble = true; alert('you clicked inside the header');"</span><span class="nt">&gt;</span>something<span class="w"> </span>inside<span class="w"> </span>the<span class="w"> </span>header<span class="nt">&lt;/span&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>There are two ways to get the event object from inside a function:</p>
<ol>
<li>The first argument, in a W3C-compliant browser (Chrome, Firefox, Safari, IE9+)</li>
<li>The window.event object in Internet Explorer (&lt;=8)</li>
</ol>
<p>If you need to support legacy browsers that don't follow the W3C
recommendations, generally inside a function you would use something like the
following:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">var</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">window</span><span class="o">.</span><span class="n">event</span><span class="p">;</span>
<span class="w">  </span><span class="p">[</span><span class="o">...</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<p>which would check first one, and then the other and store whichever was found
inside the event variable. However in an inline event handler there isn't an
<code>e</code> object to use. In that case you have to take advantage of the <code>arguments</code>
collection which is always available and refers to the complete set of
arguments passed to a function:</p>
<div class="code"><pre class="code literal-block"><span class="n">onclick</span><span class="o">=</span><span class="s2">"var event = arguments[0] || window.event; [...]"</span>
</pre></div>

<p>However, generally speaking you should be avoiding inline event handlers if
you need to to anything complicated like stopping propagation. Writing your
event handlers separately and the attaching them to elements is a much better
idea in the medium and long term, both for readability and maintainability.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-see-full-query-from-show-processlist/" class="u-url">How to see full query from SHOW PROCESSLIST?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-see-full-query-from-show-processlist/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T21:35:55+08:00" itemprop="datePublished" title="2023-03-04 21:35">2023-03-04 21:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When I issue <code>SHOW PROCESSLIST</code> query, only the first 100 characters of the
running SQL query are returned in the info column.</p>
<p>Is it possible to change MySQL config or issue a different kind of request to
see complete query (the queries I'm looking at are longer than 100 characters)</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="k">SHOW</span><span class="w"> </span><span class="nv">FULL</span><span class="w"> </span><span class="nv">PROCESSLIST</span>
</pre></div>

<p>If you don't use <code>FULL</code>, "only the first 100 characters of each statement are
shown in the <code>Info</code> field".</p>
<p>When using phpMyAdmin, you should also click on the "Full texts" option ("← T
→" on top left corner of a results table) to see untruncated results.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Show Processlist fetches the information from another table. Here is how you
can pull the data and look at 'INFO' column which contains the whole query :</p>
<div class="code"><pre class="code literal-block">select * from INFORMATION_SCHEMA.PROCESSLIST where db = 'somedb';
</pre></div>

<p>You can add any condition or ignore based on your requirement.</p>
<p>The output of the query is resulted as :</p>
<div class="code"><pre class="code literal-block"><span class="nb">+-------+------+-----------------+--------+---------+------+-----------+----------------------------------------------------------+</span>
<span class="c">| ID    | USER | HOST            | DB     | COMMAND | TIME | STATE     | INFO                                                     |</span>
<span class="nb">+-------+------+-----------------+--------+---------+------+-----------+----------------------------------------------------------+</span>
<span class="c">|     5 | ssss | localhost:41060 | somedb | Sleep   |    3 |           | NULL                                                     |</span>
<span class="c">| 58169 | root | localhost       | somedb | Query   |    0 | executing | select * from sometable where tblColumnName = 'someName' |</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2513.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2511.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
