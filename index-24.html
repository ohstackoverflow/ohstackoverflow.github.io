<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 24) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-24.html">
<link rel="prev" href="index-25.html" type="text/html">
<link rel="next" href="index-23.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-pass-null-a-real-surname-to-a-soap-web-service-in-actionscript-3/" class="u-url">How to pass "Null" (a real surname!) to a SOAP web service in ActionScript 3</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-pass-null-a-real-surname-to-a-soap-web-service-in-actionscript-3/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T18:54:08+08:00" itemprop="datePublished" title="2023-02-16 18:54">2023-02-16 18:54</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>We have an employee whose surname is Null. Our employee lookup application is
killed when that last name is used as the search term (which happens to be
quite often now). The error received (thanks Fiddler!) is:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;soapenv:Fault&gt;</span>
<span class="w">   </span><span class="nt">&lt;faultcode&gt;</span>soapenv:Server.userException<span class="nt">&lt;/faultcode&gt;</span>
<span class="w">   </span><span class="nt">&lt;faultstring&gt;</span>coldfusion.xml.rpc.CFCInvocationException:<span class="w"> </span>[coldfusion.runtime.MissingArgumentException<span class="w"> </span>:<span class="w"> </span>The<span class="w"> </span>SEARCHSTRING<span class="w"> </span>parameter<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>getFacultyNames<span class="w"> </span>function<span class="w"> </span>is<span class="w"> </span>required<span class="w"> </span>but<span class="w"> </span>was<span class="w"> </span>not<span class="w"> </span>passed<span class="w"> </span>in.]<span class="nt">&lt;/faultstring&gt;</span>
</pre></div>

<p>Cute, huh?</p>
<p>The parameter type is <code>string</code>.</p>
<p>I am using:</p>
<ul>
<li>WSDL (SOAP)</li>
<li>Flex 3.5</li>
<li>ActionScript 3</li>
<li>ColdFusion 8</li>
</ul>
<p>Note that the error <strong>does not</strong> occur when calling the webservice as an
object from a ColdFusion page.</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Tracking it down</h2>
<p>At first I thought this was a coercion bug where <code>null</code> was getting coerced to
<code>"null"</code> and a test of <code>"null" == null</code> was passing. It's not. <strong>I was close,
but so very, very wrong. Sorry about that!</strong></p>
<p>I've since done lots of fiddling on wonderfl.net and tracing through the code
in <code>mx.rpc.xml.*</code>. At line 1795 of <code>XMLEncoder</code> (in the 3.5 source), in
<code>setValue</code>, all of the XMLEncoding boils down to</p>
<div class="code"><pre class="code literal-block">currentChild.appendChild(xmlSpecialCharsFilter(Object(value)));
</pre></div>

<p>which is essentially the same as:</p>
<div class="code"><pre class="code literal-block">currentChild.appendChild("null");
</pre></div>

<p>This code, according to my original fiddle, returns an empty XML element. But
why?</p>
<h2>Cause</h2>
<p>According to commenter Justin Mclean on bug report FLEX-33664, the following
is the culprit (see last two tests in my fiddle which verify this):</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>thisIsNotNull:XML<span class="w"> </span>=<span class="w"> </span><span class="nt">&lt;root&gt;</span>null<span class="nt">&lt;/root&gt;</span>;
if(thisIsNotNull<span class="w"> </span>==<span class="w"> </span>null){
<span class="w">    </span>//<span class="w"> </span>always<span class="w"> </span>branches<span class="w"> </span>here,<span class="w"> </span>as<span class="w"> </span>(thisIsNotNull<span class="w"> </span>==<span class="w"> </span>null)<span class="w"> </span>strangely<span class="w"> </span>returns<span class="w"> </span>true
<span class="w">    </span>//<span class="w"> </span>despite<span class="w"> </span>the<span class="w"> </span>fact<span class="w"> </span>that<span class="w"> </span>thisIsNotNull<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>valid<span class="w"> </span>instance<span class="w"> </span>of<span class="w"> </span>type<span class="w"> </span>XML
}
</pre></div>

<p>When <code>currentChild.appendChild</code> is passed the string <code>"null"</code>, it first
converts it to a root XML element with text <code>null</code>, and then tests that
element against the null literal. This is a weak equality test, so either the
XML containing null is coerced to the null type, or the null type is coerced
to a root xml element containing the string "null", and the test passes where
it arguably should fail. One fix might be to always use strict equality tests
when checking XML (or anything, really) for "nullness."</p>
<h2>Solution</h2>
<p>The only reasonable workaround I can think of, short of fixing this bug in
every damn version of ActionScript, is to test fields for "null" and <strong>escape
them as CDATA values.</strong></p>
<p><strong>CDATA values are the most appropriate way to mutate an entire text value
that would otherwise cause encoding/decoding problems.</strong> Hex encoding, for
instance, is meant for individual characters. CDATA values are preferred when
you're escaping the entire text of an element. The biggest reason for this is
that it maintains human readability.</p>
<p><br></p>
<h3>Suggest</h3>
<p>On the xkcd note, the Bobby Tables website has good advice for avoiding the
improper interpretation of user data (in this case, the string "Null") in SQL
queries in various languages, including ColdFusion.</p>
<p>It is not clear from the question that this is the source of the problem, and
given the solution noted in a comment to the first answer (embedding the
parameters in a structure) it seems likely that it was something else.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-check-if-an-array-includes-a-value-in-javascript/" class="u-url">How do I check if an array includes a value in JavaScript?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-check-if-an-array-includes-a-value-in-javascript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T18:53:37+08:00" itemprop="datePublished" title="2023-02-16 18:53">2023-02-16 18:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the most concise and efficient way to find out if a JavaScript array
contains a value?</p>
<p>This is the only way I know to do it:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="k">contains</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>Is there a better and more concise way to accomplish this?</p>
<p>This is very closely related to Stack Overflow question <em>Best way to find an
item in a JavaScript Array?</em> which addresses finding objects in an array using
<code>indexOf</code>.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Modern browsers have <code>Array#includes</code>, which does <em>exactly</em> that and is widely
supported by everyone except IE:</p>
<div class="code"><pre class="code literal-block">console.log(['joe', 'jane', 'mary'].includes('jane')); //true
</pre></div>

<p>You can also use <code>Array#indexOf</code>, which is less direct, but doesn't require
polyfills for outdated browsers.</p>
<div class="code"><pre class="code literal-block">console.log(['joe', 'jane', 'mary'].indexOf('jane') &gt;= 0); //true
</pre></div>

<hr>
<p>Many frameworks also offer similar methods:</p>
<ul>
<li>jQuery: <code>$.inArray(value, array, [fromIndex])</code>
</li>
<li>Underscore.js: <code>_.contains(array, value)</code> (also aliased as <code>_.include</code> and <code>_.includes</code>)</li>
<li>Dojo Toolkit: <code>dojo.indexOf(array, value, [fromIndex, findLast])</code>
</li>
<li>Prototype: <code>array.indexOf(value)</code>
</li>
<li>MooTools: <code>array.indexOf(value)</code>
</li>
<li>MochiKit: <code>findValue(array, value)</code>
</li>
<li>MS Ajax: <code>array.indexOf(value)</code>
</li>
<li>Ext: <code>Ext.Array.contains(array, value)</code>
</li>
<li>Lodash: <code>_.includes(array, value, [from])</code> (is <code>_.contains</code> prior 4.0.0)</li>
<li>Ramda: <code>R.includes(value, array)</code>
</li>
</ul>
<p>Notice that some frameworks implement this as a function, while others add the
function to the array prototype.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Update from 2019: This answer is from 2008 (11 years old!) and is not
relevant for modern JS usage. The promised performance improvement was based
on a benchmark done in browsers of that time. It might not be relevant to
modern JS execution contexts. If you need an easy solution, look for other
answers. If you need the best performance, benchmark for yourself in the
relevant execution environments.</strong></p>
<p>As others have said, the iteration through the array is probably the best way,
but it has been proven that a decreasing <code>while</code> loop is the fastest way to
iterate in JavaScript. So you may want to rewrite your code as follows:</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="k">contains</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">       </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>Of course, you may as well extend Array prototype:</p>
<div class="code"><pre class="code literal-block"><span class="k">Array</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="k">contains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">length</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>

<p>And now you can simply use the following:</p>
<div class="code"><pre class="code literal-block">alert([1, 2, 3].contains(2)); // =&gt; true
alert([1, 2, 3].contains('2')); // =&gt; false
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-a-uri-a-url-and-a-urn/" class="u-url">What is the difference between a URI, a URL, and a URN?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-a-uri-a-url-and-a-urn/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T18:52:59+08:00" itemprop="datePublished" title="2023-02-16 18:52">2023-02-16 18:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between a <strong>URL</strong> , a <strong>URI</strong> , and a <strong>URN</strong>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>From RFC 3986:</p>
<blockquote>
<p>A URI can be further classified as a locator, a name, or both. The term
"Uniform Resource Locator" (URL) refers to the subset of URIs that, in
addition to identifying a resource, provide a means of locating the resource
by describing its primary access mechanism (e.g., its network "location").
The term "Uniform Resource Name" (URN) has been used historically to refer
to both URIs under the "urn" scheme [RFC2141], which are required to remain
globally unique and persistent even when the resource ceases to exist or
becomes unavailable, and to any other URI with the properties of a name.</p>
</blockquote>
<p>So all URLs are URIs, and all URNs are URIs - but URNs and URLs are different,
so you can't say that all URIs are URLs.</p>
<p>If you haven't already read Roger Pate's answer, I'd advise doing so as well.</p>
<p><br></p>
<h3>Suggest</h3>
<p>From RFC 3986:</p>
<blockquote>
<p>A URI can be further classified as a locator, a name, or both. The term
"Uniform Resource Locator" (URL) refers to the subset of URIs that, in
addition to identifying a resource, provide a means of locating the resource
by describing its primary access mechanism (e.g., its network "location").
The term "Uniform Resource Name" (URN) has been used historically to refer
to both URIs under the "urn" scheme [RFC2141], which are required to remain
globally unique and persistent even when the resource ceases to exist or
becomes unavailable, and to any other URI with the properties of a name.</p>
</blockquote>
<p>So all URLs are URIs, and all URNs are URIs - but URNs and URLs are different,
so you can't say that all URIs are URLs.</p>
<p>If you haven't already read Roger Pate's answer, I'd advise doing so as well.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-25.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-23.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
