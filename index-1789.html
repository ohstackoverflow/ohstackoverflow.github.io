<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1789) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1789.html">
<link rel="prev" href="index-1790.html" type="text/html">
<link rel="next" href="index-1788.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/react-after-render-code/" class="u-url">React "after render" code?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/react-after-render-code/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:23:30+08:00" itemprop="datePublished" title="2023-03-03 09:23">2023-03-03 09:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an app where I need to set the height of an element (lets say "app-
content") dynamically. It takes the height of the "chrome" of the app and
subtracts it and then sets the height of the "app-content" to fit 100% within
those constraints. This is super simple with vanilla JS, jQuery, or Backbone
views, but I'm struggling to figure out what the right process would be for
doing this in React?</p>
<p>Below is an example component. I want to be able to set <code>app-content</code>'s height
to be 100% of the window minus the size of the <code>ActionBar</code> and <code>BalanceBar</code>,
but how do I know when everything is rendered and where would I put the
calculation stuff in this React Class?</p>
<div class="code"><pre class="code literal-block">/**<span class="w"> </span>@jsx<span class="w"> </span>React.DOM<span class="w"> </span>*/
var<span class="w"> </span>List<span class="w"> </span>=<span class="w"> </span>require('../list');
var<span class="w"> </span>ActionBar<span class="w"> </span>=<span class="w"> </span>require('../action-bar');
var<span class="w"> </span>BalanceBar<span class="w"> </span>=<span class="w"> </span>require('../balance-bar');
var<span class="w"> </span>Sidebar<span class="w"> </span>=<span class="w"> </span>require('../sidebar');
var<span class="w"> </span>AppBase<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>render:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>(
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">className=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Sidebar</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">className=</span><span class="s">"inner-wrapper"</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;ActionBar</span><span class="w"> </span><span class="na">title=</span><span class="s">"Title Here"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;BalanceBar</span><span class="w"> </span><span class="na">balance=</span><span class="s">{balance}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">className=</span><span class="s">"app-content"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;List</span><span class="w"> </span><span class="na">items=</span><span class="s">{items}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;/div&gt;</span>
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span>);
<span class="w">  </span>}
});

module.exports<span class="w"> </span>=<span class="w"> </span>AppBase;
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>componentDidMount()</p>
<p>This method is called once after your component is rendered. So your code
would look like so.</p>
<div class="code"><pre class="code literal-block">var<span class="w"> </span>AppBase<span class="w"> </span>=<span class="w"> </span>React.createClass({
<span class="w">  </span>componentDidMount:<span class="w"> </span>function()<span class="w"> </span>{
<span class="w">    </span>var<span class="w"> </span>$this<span class="w"> </span>=<span class="w"> </span>$(ReactDOM.findDOMNode(this));
<span class="w">    </span>//<span class="w"> </span>set<span class="w"> </span>el<span class="w"> </span>height<span class="w"> </span>and<span class="w"> </span>width<span class="w"> </span>etc.
<span class="w">  </span>},

<span class="w">  </span>render:<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{
<span class="w">    </span>return<span class="w"> </span>(
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">className=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Sidebar</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">className=</span><span class="s">"inner-wrapper"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;ActionBar</span><span class="w"> </span><span class="na">title=</span><span class="s">"Title Here"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;BalanceBar</span><span class="w"> </span><span class="na">balance=</span><span class="s">{balance}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">className=</span><span class="s">"app-content"</span><span class="nt">&gt;</span>
<span class="w">              </span><span class="nt">&lt;List</span><span class="w"> </span><span class="na">items=</span><span class="s">{items}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;/div&gt;</span>
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span>);
<span class="w">  </span>}
});
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>One drawback of using <code>componentDidUpdate</code>, or <code>componentDidMount</code> is that
they are actually executed before the dom elements are done being drawn, but
after they've been passed from React to the browser's DOM.</p>
<p>Say for example if you needed set node.scrollHeight to the rendered
node.scrollTop, then React's DOM elements may not be enough. You need to wait
until the elements are done being painted to get their height.</p>
<p>Solution:</p>
<p>Use <code>requestAnimationFrame</code> to ensure that your code is run after the painting
of your newly rendered object</p>
<div class="code"><pre class="code literal-block"><span class="n">scrollElement</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="c1">// Store a 'this' ref, and</span>
<span class="w">  </span><span class="n">var</span><span class="w"> </span><span class="n">_this</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="o">;</span>
<span class="w">  </span><span class="c1">// wait for a paint before running scrollHeight dependent code.</span>
<span class="w">  </span><span class="n">window</span><span class="o">.</span><span class="na">requestAnimationFrame</span><span class="o">(</span><span class="kd">function</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_this</span><span class="o">.</span><span class="na">getDOMNode</span><span class="o">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span><span class="n">node</span><span class="o">.</span><span class="na">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="o">.</span><span class="na">scrollHeight</span><span class="o">;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">});</span>
<span class="o">},</span>
<span class="n">componentDidMount</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">this</span><span class="o">.</span><span class="na">scrollElement</span><span class="o">();</span>
<span class="o">},</span>
<span class="c1">// and or</span>
<span class="n">componentDidUpdate</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">this</span><span class="o">.</span><span class="na">scrollElement</span><span class="o">();</span>
<span class="o">},</span>
<span class="c1">// and or</span>
<span class="n">render</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">this</span><span class="o">.</span><span class="na">scrollElement</span><span class="o">()</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="o">[...]</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-declare-and-add-items-to-an-array-in-python/" class="u-url">How to declare and add items to an array in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-declare-and-add-items-to-an-array-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:23:08+08:00" itemprop="datePublished" title="2023-03-03 09:23">2023-03-03 09:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to add items to an array in python.</p>
<p>I run</p>
<div class="code"><pre class="code literal-block">array = {}
</pre></div>

<p>Then, I try to add something to this array by doing:</p>
<div class="code"><pre class="code literal-block">array.append(valueToBeInserted)
</pre></div>

<p>There doesn't seem to be a <code>.append</code> method for this. How do I add items to an
array?</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>{}</code> represents an empty dictionary, not an array/list. For lists or arrays,
you need <code>[]</code>.</p>
<p>To initialize an empty list do this:</p>
<div class="code"><pre class="code literal-block">my_list = []
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block">my_list = list()
</pre></div>

<p>To add elements to the list, use <code>append</code></p>
<div class="code"><pre class="code literal-block">my_list.append(12)
</pre></div>

<p>To <code>extend</code> the list to include the elements from another list use <code>extend</code></p>
<div class="code"><pre class="code literal-block"><span class="n">my_list</span><span class="p">.</span><span class="kr">extend</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">my_list</span>
<span class="o">--&gt;</span><span class="w"> </span><span class="p">[</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
</pre></div>

<p>To remove an element from a list use <code>remove</code></p>
<div class="code"><pre class="code literal-block">my_list.remove(2)
</pre></div>

<p>Dictionaries represent a collection of key/value pairs also known as an
associative array or a map.</p>
<p>To initialize an empty dictionary use <code>{}</code> or <code>dict()</code></p>
<p>Dictionaries have keys and values</p>
<div class="code"><pre class="code literal-block">my_dict = {'key':'value', 'another_key' : 0}
</pre></div>

<p>To extend a dictionary with the contents of another dictionary you may use the
<code>update</code> method</p>
<div class="code"><pre class="code literal-block">my_dict.update({'third_key' : 1})
</pre></div>

<p>To remove a value from a dictionary</p>
<div class="code"><pre class="code literal-block">del my_dict['key']
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you do it this way:</p>
<div class="code"><pre class="code literal-block">array = {}
</pre></div>

<p>you are making a dictionary, not an array.</p>
<p>If you need an array (which is called a list in python ) you declare it like
this:</p>
<div class="code"><pre class="code literal-block">array = []
</pre></div>

<p>Then you can add items like this:</p>
<div class="code"><pre class="code literal-block">array.append('a')
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/count-the-frequency-that-a-value-occurs-in-a-dataframe-column/" class="u-url">Count the frequency that a value occurs in a dataframe column</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/count-the-frequency-that-a-value-occurs-in-a-dataframe-column/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T09:22:43+08:00" itemprop="datePublished" title="2023-03-03 09:22">2023-03-03 09:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a dataset</p>
<div class="code"><pre class="code literal-block">category
cat a
cat b
cat a
</pre></div>

<p>I'd like to be able to return something like (showing unique values and
frequency)</p>
<div class="code"><pre class="code literal-block">category   freq 
cat a       2
cat b       1
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Use <code>value_counts()</code> as @DSM commented.</p>
<div class="code"><pre class="code literal-block">In [37]:
df = pd.DataFrame({'a':list('abssbab')})
df['a'].value_counts()

Out[37]:

b    3
a    2
s    2
dtype: int64
</pre></div>

<p>Also <code>groupby</code> and <code>count</code>. Many ways to skin a cat here.</p>
<div class="code"><pre class="code literal-block">In [38]:
df.groupby('a').count()

Out[38]:

   a
a   
a  2
b  3
s  2

[3 rows x 1 columns]
</pre></div>

<p>See the online docs.</p>
<p>If you wanted to add frequency back to the original dataframe use <code>transform</code>
to return an aligned index:</p>
<div class="code"><pre class="code literal-block">In [41]:
df['freq'] = df.groupby('a')['a'].transform('count')
df

Out[41]:

   a freq
0  a    2
1  b    3
2  s    2
3  s    2
4  b    3
5  a    2
6  b    3

[7 rows x 2 columns]
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If you want to apply to all columns you can use:</p>
<div class="code"><pre class="code literal-block">df.apply(pd.value_counts)
</pre></div>

<p>This will apply a column based aggregation function (in this case
value_counts) to each of the columns.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1790.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1788.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
