<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2657) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2657.html">
<link rel="prev" href="index-2658.html" type="text/html">
<link rel="next" href="index-2656.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-shared-objects-so-static-libraries-a-and-dll-s-so/" class="u-url">Difference between shared objects (.so), static libraries (.a), and DLL's (.so)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-shared-objects-so-static-libraries-a-and-dll-s-so/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T08:13:27+08:00" itemprop="datePublished" title="2023-03-05 08:13">2023-03-05 08:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have been involved in some debate with respect to libraries in Linux, and
would like to confirm some things.</p>
<p>It is to my understanding (please correct me if I am wrong and I will edit my
post later), that there are two ways of using libraries when building an
application:</p>
<ol>
<li>Static libraries (.a files): At link time, a copy of the entire library is put into the final application so that the functions within the library are always available to the calling application</li>
<li>Shared objects (.so files): At link time, the object is just verified against its API via the corresponding header (.h) file. The library isn't actually used until runtime, where it is needed.</li>
</ol>
<p>The obvious advantage of static libraries is that they allow the entire
application to be self-contained, while the benefit of dynamic libraries is
that the ".so" file can be replaced (ie: in case it needs to be updated due to
a security bug) without requiring the base application to be recompiled.</p>
<p>I have heard some people make a distinction between shared objects and dynamic
link libraries (DLL's), even though they are both ".so" files. Is there any
distinction between shared objects and DLLs when it comes to C/C++ development
on Linux or any other POSIX compliant OS (ie: MINIX, UNIX, QNX, etc)? I am
told that one key difference (so far) is that shared objects are just used at
runtime, while DLL's must be opened first using the dlopen() call within the
application.</p>
<p>Finally, I have also heard some developers mention "shared archives", which,
to my understanding, are also static libraries themselves, but are never used
by an application directly. Instead, other static libraries will link against
the "shared archives" to pull some (but not all) functions/resources from the
shared archive into the static library being built.</p>
<p>Thank you all in advance for your assistance.</p>
<h2>Update</h2>
<hr>
<p><strong>In the context in which these terms were provided to me, it was effectively
erroneous terms used by a team of Windows developers that had to learn Linux.
I tried to correct them, but the (incorrect) language norms stuck.</strong></p>
<ol>
<li>Shared Object: A library that is automatically linked into a program when the program starts, and exists as a standalone file. The library is included in the linking list at compile time (ie: <code>LDOPTS+=-lmylib</code> for a library file named <code>mylib.so</code>). <strong>The library must be present at compile time, and when the application starts.</strong>
</li>
<li>Static Library: A library that is merged into the actual program itself at build time for a single (larger) application containing the application code and the library code that is automatically linked into a program when the program is built, and the final binary containing both the main program and the library itself exists as a single standalone binary file. The library is included in the linking list at compile time (ie: <code>LDOPTS+=-lmylib</code> for a library file named <code>mylib.a</code>). <strong>The library must be present at compile time.</strong>
</li>
<li>DLL: Essentially the same as a shared object, but rather than being included in the linking list at compile time, the library is loaded via <code>dlopen()</code>/<code>dlsym()</code> commands so that the library does not need to be present at build time for the program to compile. <strong>Also, the library does not need to be present (necessarily) at application startup or compile time</strong> , as it is only needed at the moment the <code>dlopen</code>/<code>dlsym</code> calls are made.</li>
<li>Shared Archive: Essentially the same as a static library, but is compiled with the "export-shared" and "<code>-fPIC</code>" flags. The library is included in the linking list at compile time (ie: <code>LDOPTS+=-lmylibS</code> for a library file named <code>mylibS.a</code>). The distinction between the two is that this additional flag is required if a shared object or DLL wants to statically link the shared archive into its own code AND be able to make the functions in the shared object available to other programs, rather than just using them internal to the DLL. This is useful in the case when someone provides you with a static library, and you wish to repackage it as an SO. <strong>The library must be present at compile time.</strong>
</li>
</ol>
<h2>Additional Update</h2>
<p>The distinction between "<code>DLL</code>" and "<code>shared library</code>" was just a (lazy,
inaccurate) colloquialism in the company I worked in at the time (Windows
developers being forced to shift to Linux development, and the term stuck),
adhering to the descriptions noted above.</p>
<p>Additionally, the trailing "<code>S</code>" literal after the library name, in the case
of "shared archives" was just a convention used at that company, and not in
the industry in general.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I've always thought that DLLs and shared objects are just different terms for
the same thing - Windows calls them DLLs, while on UNIX systems they're shared
objects, with the general term - dynamically linked library - covering both
(even the function to open a .so on UNIX is called <code>dlopen()</code> after 'dynamic
library').</p>
<p>They are indeed only linked at application startup, however your notion of
verification against the header file is incorrect. The header file defines
prototypes which are required in order to compile the code which uses the
library, but at link time the linker looks inside the library itself to make
sure the functions it needs are actually there. The linker has to find the
function bodies somewhere at link time or it'll raise an error. It ALSO does
that at runtime, because as you rightly point out the library itself might
have changed since the program was compiled. This is why ABI stability is so
important in platform libraries, as the ABI changing is what breaks existing
programs compiled against older versions.</p>
<p>Static libraries are just bundles of object files straight out of the
compiler, just like the ones that you are building yourself as part of your
project's compilation, so they get pulled in and fed to the linker in exactly
the same way, and unused bits are dropped in exactly the same way.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I've always thought that DLLs and shared objects are just different terms for
the same thing - Windows calls them DLLs, while on UNIX systems they're shared
objects, with the general term - dynamically linked library - covering both
(even the function to open a .so on UNIX is called <code>dlopen()</code> after 'dynamic
library').</p>
<p>They are indeed only linked at application startup, however your notion of
verification against the header file is incorrect. The header file defines
prototypes which are required in order to compile the code which uses the
library, but at link time the linker looks inside the library itself to make
sure the functions it needs are actually there. The linker has to find the
function bodies somewhere at link time or it'll raise an error. It ALSO does
that at runtime, because as you rightly point out the library itself might
have changed since the program was compiled. This is why ABI stability is so
important in platform libraries, as the ABI changing is what breaks existing
programs compiled against older versions.</p>
<p>Static libraries are just bundles of object files straight out of the
compiler, just like the ones that you are building yourself as part of your
project's compilation, so they get pulled in and fed to the linker in exactly
the same way, and unused bits are dropped in exactly the same way.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/difference-between-objectforkey-and-valueforkey/" class="u-url">Difference between objectForKey and valueForKey?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/difference-between-objectforkey-and-valueforkey/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T08:09:28+08:00" itemprop="datePublished" title="2023-03-05 08:09">2023-03-05 08:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between <code>objectForKey</code> and <code>valueForKey</code>? I looked both
up in the documentation and they seemed the same to me.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>objectForKey:</code> is an <code>NSDictionary</code> method. An <code>NSDictionary</code> is a collection
class similar to an <code>NSArray</code>, except instead of using indexes, it uses keys
to differentiate between items. A key is an arbitrary string you provide. No
two objects can have the same key (just as no two objects in an <code>NSArray</code> can
have the same index).</p>
<p><code>valueForKey:</code> is a KVC method. It works with ANY class. <code>valueForKey:</code> allows
you to access a property using a string for its name. So for instance, if I
have an <code>Account</code> class with a property <code>accountNumber</code>, I can do the
following:</p>
<div class="code"><pre class="code literal-block"><span class="bp">NSNumber</span><span class="w"> </span><span class="o">*</span><span class="n">anAccountNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSNumber</span><span class="w"> </span><span class="n">numberWithInt</span><span class="o">:</span><span class="mi">12345</span><span class="p">];</span>
<span class="n">Account</span><span class="w"> </span><span class="o">*</span><span class="n">newAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">Account</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">init</span><span class="p">];</span>

<span class="p">[</span><span class="n">newAccount</span><span class="w"> </span><span class="n">setAccountNumber</span><span class="o">:</span><span class="n">anAccountNUmber</span><span class="p">];</span>

<span class="bp">NSNumber</span><span class="w"> </span><span class="o">*</span><span class="n">anotherAccountNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">newAccount</span><span class="w"> </span><span class="n">accountNumber</span><span class="p">];</span>
</pre></div>

<p>Using KVC, I can access the property dynamically:</p>
<div class="code"><pre class="code literal-block"><span class="bp">NSNumber</span><span class="w"> </span><span class="o">*</span><span class="n">anAccountNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSNumber</span><span class="w"> </span><span class="n">numberWithInt</span><span class="o">:</span><span class="mi">12345</span><span class="p">];</span>
<span class="n">Account</span><span class="w"> </span><span class="o">*</span><span class="n">newAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">Account</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">init</span><span class="p">];</span>

<span class="p">[</span><span class="n">newAccount</span><span class="w"> </span><span class="n">setValue</span><span class="o">:</span><span class="n">anAccountNumber</span><span class="w"> </span><span class="n">forKey</span><span class="o">:</span><span class="s">@"accountNumber"</span><span class="p">];</span>

<span class="bp">NSNumber</span><span class="w"> </span><span class="o">*</span><span class="n">anotherAccountNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">newAccount</span><span class="w"> </span><span class="n">valueForKey</span><span class="o">:</span><span class="s">@"accountNumber"</span><span class="p">];</span>
</pre></div>

<p>Those are equivalent sets of statements.</p>
<p>I know you're thinking: wow, but sarcastically. KVC doesn't look all that
useful. In fact, it looks "wordy". But when you want to change things at
runtime, you can do lots of cool things that are much more difficult in other
languages (but this is beyond the scope of your question).</p>
<p>If you want to learn more about KVC, there are many tutorials if you Google
especially at Scott Stevenson's blog. You can also check out the
NSKeyValueCoding Protocol Reference.</p>
<p><br></p>
<h3>Suggest</h3>
<p>When you do <code>valueForKey:</code> you need to give it an NSString, whereas
<code>objectForKey:</code> can take any NSObject subclass as a key. This is because for
Key-Value Coding, the keys are always strings.</p>
<p>In fact, the documentation states that even when you give <code>valueForKey:</code> an
NSString, it will invoke <code>objectForKey:</code> anyway unless the string starts with
an <code>@</code>, in which case it invokes <code>[super valueForKey:]</code>, which may call
<code>valueForUndefinedKey:</code> which may raise an exception.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/android-listview-with-different-layouts-for-each-row/" class="u-url">Android ListView with different layouts for each row</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/android-listview-with-different-layouts-for-each-row/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T08:07:49+08:00" itemprop="datePublished" title="2023-03-05 08:07">2023-03-05 08:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am trying to determine the best way to have a single ListView that contains
different layouts for each row. I know how to create a custom row + custom
array adapter to support a custom row for the entire list view, but how can I
implement many different row styles in the ListView?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Since you know how many types of layout you would have - it's possible to use
those methods.</p>
<p><code>getViewTypeCount()</code> - this methods returns information how many types of
rows do you have in your list</p>
<p><code>getItemViewType(int position)</code> - returns information which layout type you
should use based on position</p>
<p>Then you inflate layout only if it's null and determine type using
<code>getItemViewType</code>.</p>
<p>Look at <strong>this tutorial</strong> for further information.</p>
<p>To achieve some optimizations in structure that you've described in comment I
would suggest:</p>
<ul>
<li>Storing views in object called <code>ViewHolder</code>. It would increase speed because you won't have to call <code>findViewById()</code> every time in <code>getView</code> method. See List14 in API demos.</li>
<li>Create one generic layout that will conform all combinations of properties and hide some elements if current position doesn't have it.</li>
</ul>
<p>I hope that will help you. If you could provide some XML stub with your data
structure and information how exactly you want to map it into row, I would be
able to give you more precise advise. By pixel.</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>I know how to create a custom row + custom array adapter to support a custom
row for the entire list view. But how can one listview support many
different row styles?</p>
</blockquote>
<p>You already know the basics. You just need to get your custom adapter to
return a different layout/view based on the row/cursor information being
provided.</p>
<p>A <code>ListView</code> can support multiple row styles because it derives from
AdapterView:</p>
<blockquote>
<p>An AdapterView is a view <strong><em>whose children are determined by an Adapter.</em></strong></p>
</blockquote>
<p>If you look at the Adapter, you'll see methods that account for using row-
specific views:</p>
<div class="code"><pre class="code literal-block">abstract int getViewTypeCount()
// Returns the number of types of Views that will be created ...

abstract int getItemViewType(int position)
// Get the type of View that will be created ...

abstract View getView(int position, View convertView, ViewGroup parent)
// Get a View that displays the data ...
</pre></div>

<p>The latter two methods <strong><em>provide the position</em></strong> so you can use that to
<strong><em>determine the type of view</em></strong> you should use <strong><em>for that row</em></strong>.</p>
<hr>
<p>Of course, you generally don't use AdapterView and Adapter directly, but
rather use or derive from one of their subclasses. The subclasses of Adapter
may add additional functionality that change how to get custom layouts for
different rows. <strong><em>Since the view used for a given row is driven by the
adapter, the trick is to get the adapter to return the desired view for a
given row.</em></strong> How to do this differs depending on the specific adapter.</p>
<p>For example, to use <strong><em>ArrayAdapter</em></strong> ,</p>
<ul>
<li>override <code>getView()</code> to inflate, populate, and return the desired view for the given position. The <code>getView()</code> method includes an opportunity reuse views via the <code>convertView</code> parameter.</li>
</ul>
<p>But to use derivatives of <strong><em>CursorAdapter</em></strong> ,</p>
<ul>
<li>override <code>newView()</code> to inflate, populate, and return the desired view for the current cursor state (i.e. the current "row") [you also need to override <code>bindView</code> so that widget can reuse views]</li>
</ul>
<p>However, to use <strong><em>SimpleCursorAdapter</em></strong> ,</p>
<ul>
<li>define a <code>SimpleCursorAdapter.ViewBinder</code> with a <code>setViewValue()</code> method to inflate, populate, and return the desired view for a given row (current cursor state) and data "column". The method can define just the "special" views and defer to SimpleCursorAdapter's standard behavior for the "normal" bindings.</li>
</ul>
<p>Look up the specific examples/tutorials for the kind of adapter you end up
using.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2658.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2656.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
