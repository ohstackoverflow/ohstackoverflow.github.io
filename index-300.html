<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 300) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-300.html">
<link rel="prev" href="index-301.html" type="text/html">
<link rel="next" href="index-299.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/access-control-allow-origin-multiple-origin-domains/" class="u-url">Access-Control-Allow-Origin Multiple Origin Domains?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/access-control-allow-origin-multiple-origin-domains/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:22:45+08:00" itemprop="datePublished" title="2023-02-17 03:22">2023-02-17 03:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a way to allow multiple cross-domains using the <code>Access-Control-
Allow-Origin</code> header?</p>
<p>I'm aware of the <code>*</code>, but it is too open. I really want to allow just a couple
domains.</p>
<p>As an example, something like this:</p>
<div class="code"><pre class="code literal-block">Access-Control-Allow-Origin: http://domain1.example, http://domain2.example
</pre></div>

<p>I have tried the above code but it does not seem to work in Firefox.</p>
<p>Is it possible to specify multiple domains or am I stuck with just one?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Sounds like the recommended way to do it is to have your server read the
Origin header from the client, compare that to the list of domains you would
like to allow, and if it matches, echo the value of the <code>Origin</code> header back
to the client as the <code>Access-Control-Allow-Origin</code> header in the response.</p>
<p>With <code>.htaccess</code> you can do it like this:</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span>----------------------------------------------------------------------
#<span class="w"> </span>Allow<span class="w"> </span>loading<span class="w"> </span>of<span class="w"> </span>external<span class="w"> </span>fonts
#<span class="w"> </span>----------------------------------------------------------------------
<span class="nt">&lt;FilesMatch</span><span class="w"> </span><span class="err">"\.(ttf|otf|eot|woff|woff2)$"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;IfModule</span><span class="w"> </span><span class="err">mod_headers.c</span><span class="nt">&gt;</span>
<span class="w">        </span>SetEnvIf<span class="w"> </span>Origin<span class="w"> </span>"http(s)?://(www\.)?(google.com|staging.google.com|development.google.com|otherdomain.example|dev02.otherdomain.example)$"<span class="w"> </span>AccessControlAllowOrigin=$0
<span class="w">        </span>Header<span class="w"> </span>add<span class="w"> </span>Access-Control-Allow-Origin<span class="w"> </span>%{AccessControlAllowOrigin}e<span class="w"> </span>env=AccessControlAllowOrigin
<span class="w">        </span>Header<span class="w"> </span>merge<span class="w"> </span>Vary<span class="w"> </span>Origin
<span class="w">    </span><span class="nt">&lt;/IfModule&gt;</span>
<span class="nt">&lt;/FilesMatch&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Another solution I'm using in PHP:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="nt">http_origin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">$</span><span class="nt">_SERVER</span><span class="cp">[</span><span class="s1">'HTTP_ORIGIN'</span><span class="cp">]</span><span class="o">;</span>

<span class="nt">if</span><span class="w"> </span><span class="o">($</span><span class="nt">http_origin</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"http://www.domain1.com"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">$</span><span class="nt">http_origin</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"http://www.domain2.com"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">$</span><span class="nt">http_origin</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"http://www.domain3.com"</span><span class="o">)</span>
<span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="err">header("</span><span class="n">Access-Control-Allow-Origin</span><span class="p">:</span><span class="w"> </span><span class="err">$</span><span class="n">http_origin</span><span class="err">"</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-sort-an-nsmutablearray-with-custom-objects-in-it/" class="u-url">How do I sort an NSMutableArray with custom objects in it?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-sort-an-nsmutablearray-with-custom-objects-in-it/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:22:17+08:00" itemprop="datePublished" title="2023-02-17 03:22">2023-02-17 03:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What I want to do seems pretty simple, but I can't find any answers on the
web. I have an <code>NSMutableArray</code> of objects, and let's say they are 'Person'
objects. I want to sort the <code>NSMutableArray</code> by Person.birthDate which is an
<code>NSDate</code>.</p>
<p>I think it has something to do with this method:</p>
<div class="code"><pre class="code literal-block"><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">sortedArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">drinkDetails</span><span class="w"> </span><span class="n">sortedArrayUsingSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="o">???</span><span class="p">)];</span>
</pre></div>

<p>In Java I would make my object implement Comparable, or use Collections.sort
with an inline custom comparator...how on earth do you do this in Objective-C?</p>
<p><br><br></p>
<h2>Answer</h2>
<h3>Compare method</h3>
<p>Either you implement a compare-method for your object:</p>
<div class="code"><pre class="code literal-block"><span class="p">-</span> <span class="p">(</span><span class="n">NSComparisonResult</span><span class="p">)</span><span class="nf">compare:</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">otherObject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">birthDate</span><span class="w"> </span><span class="n">compare</span><span class="o">:</span><span class="n">otherObject</span><span class="p">.</span><span class="n">birthDate</span><span class="p">];</span>
<span class="p">}</span>

<span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">sortedArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">drinkDetails</span><span class="w"> </span><span class="n">sortedArrayUsingSelector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">compare</span><span class="o">:</span><span class="p">)];</span>
</pre></div>

<h3>NSSortDescriptor (better)</h3>
<p>or usually even better:</p>
<div class="code"><pre class="code literal-block"><span class="bp">NSSortDescriptor</span><span class="w"> </span><span class="o">*</span><span class="n">sortDescriptor</span><span class="p">;</span>
<span class="n">sortDescriptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="bp">NSSortDescriptor</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithKey</span><span class="o">:</span><span class="s">@"birthDate"</span>
<span class="w">                                           </span><span class="nl">ascending</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">sortedArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">drinkDetails</span><span class="w"> </span><span class="n">sortedArrayUsingDescriptors</span><span class="o">:</span><span class="l">@[</span><span class="n">sortDescriptor</span><span class="l">]</span><span class="p">];</span>
</pre></div>

<p>You can easily sort by multiple keys by adding more than one to the array.
Using custom comparator-methods is possible as well. Have a look at the
documentation.</p>
<h3>Blocks (shiny!)</h3>
<p>There's also the possibility of sorting with a block since Mac OS X 10.6 and
iOS 4:</p>
<div class="code"><pre class="code literal-block"><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">sortedArray</span><span class="p">;</span>
<span class="n">sortedArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">drinkDetails</span><span class="w"> </span><span class="n">sortedArrayUsingComparator</span><span class="o">:^</span><span class="n">NSComparisonResult</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">.</span><span class="n">birthDate</span><span class="w"> </span><span class="n">compare</span><span class="o">:</span><span class="n">b</span><span class="p">.</span><span class="n">birthDate</span><span class="p">];</span>
<span class="p">}];</span>
</pre></div>

<h2>Performance</h2>
<p>The <code>-compare:</code> and block-based methods will be quite a bit faster, in
general, than using <code>NSSortDescriptor</code> as the latter relies on KVC. The
primary advantage of the <code>NSSortDescriptor</code> method is that it provides a way
to define your sort order using data, rather than code, which makes it easy to
e.g. set things up so users can sort an <code>NSTableView</code> by clicking on the
header row.</p>
<p><br></p>
<h3>Suggest</h3>
<p>See the <code>NSMutableArray</code> method <code>sortUsingFunction:context:</code></p>
<p>You will need to set up a <em>compare</em> function which takes two objects (of type
<code>Person</code>, since you are comparing two <code>Person</code> objects) and a <em>context</em>
parameter.</p>
<p>The two objects are just instances of <code>Person</code>. The third object is a string,
e.g. @"birthDate".</p>
<p>This function returns an <code>NSComparisonResult</code>: It returns <code>NSOrderedAscending</code>
if <code>PersonA.birthDate</code> &lt; <code>PersonB.birthDate</code>. It will return
<code>NSOrderedDescending</code> if <code>PersonA.birthDate</code> &gt; <code>PersonB.birthDate</code>. Finally,
it will return <code>NSOrderedSame</code> if <code>PersonA.birthDate</code> == <code>PersonB.birthDate</code>.</p>
<p>This is rough pseudocode; you will need to flesh out what it means for one
date to be "less", "more" or "equal" to another date (such as comparing
seconds-since-epoch etc.):</p>
<div class="code"><pre class="code literal-block"><span class="n">NSComparisonResult</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="o">*</span><span class="n">firstPerson</span><span class="p">,</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="o">*</span><span class="n">secondPerson</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">firstPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">[</span><span class="n">secondPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">])</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSOrderedAscending</span><span class="p">;</span>
<span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">firstPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">secondPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">])</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSOrderedDescending</span><span class="p">;</span>
<span class="w">  </span><span class="k">else</span><span class="w"> </span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSOrderedSame</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>If you want something more compact, you can use ternary operators:</p>
<div class="code"><pre class="code literal-block"><span class="n">NSComparisonResult</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="n">Person</span><span class="w"> </span><span class="o">*</span><span class="n">firstPerson</span><span class="p">,</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="o">*</span><span class="n">secondPerson</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">([</span><span class="n">firstPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">[</span><span class="n">secondPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">])</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">NSOrderedAscending</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">([</span><span class="n">firstPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">secondPerson</span><span class="w"> </span><span class="n">birthDate</span><span class="p">])</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">NSOrderedDescending</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">NSOrderedSame</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Inlining could perhaps speed this up a little, if you do this a lot.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/git-undo-all-working-dir-changes-including-new-files/" class="u-url">git: undo all working dir changes including new files</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/git-undo-all-working-dir-changes-including-new-files/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T03:21:52+08:00" itemprop="datePublished" title="2023-02-17 03:21">2023-02-17 03:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How to delete all changes from working directory including new untracked
files. I know that <code>git checkout -f</code> does that, but it doesn't delete new
untracked files created since last commit.</p>
<p>Does anybody have an idea how to do that?</p>
<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">reset</span><span class="w"> </span><span class="o">--</span><span class="nv">hard</span><span class="w"> </span>#<span class="w"> </span><span class="nv">removes</span><span class="w"> </span><span class="nv">staged</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">working</span><span class="w"> </span><span class="nv">directory</span><span class="w"> </span><span class="nv">changes</span>

##<span class="w"> </span><span class="o">!!</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">careful</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="o">!!</span>
##<span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">deleting</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">don</span><span class="err">'t want to</span>
<span class="err">## read comments and manual.</span>
<span class="err">git clean -f -d # remove untracked</span>
<span class="err">git clean -f -x -d # CAUTION: as above but removes ignored files like config.</span>
<span class="err">git clean -fxd :/ # CAUTION: as above, but cleans untracked and ignored files through the entire repo (without :/, the operation affects only the current directory)</span>
</pre></div>

<p>To see what will be deleted before-hand, without actually deleting it, use the
<code>-n</code> flag (this is basically a test-run). When you are ready to actually
delete, then remove the <code>-n</code> flag:</p>
<p><code>git clean -nfd</code></p>
<p><br></p>
<h3>Suggest</h3>
<p>Safest method, which I use frequently:</p>
<div class="code"><pre class="code literal-block">git clean -fd
</pre></div>

<p>Syntax explanation as per <code>/docs/git-clean</code> page:</p>
<ul>
<li>
<code>-f</code> (alias: <code>--force</code>). If the Git configuration variable clean.requireForce is not set to false, git clean will refuse to delete files or directories unless given -f, -n or -i. Git will refuse to delete directories with .git sub directory or file unless a second -f is given.</li>
<li>
<code>-d</code>. Remove untracked directories in addition to untracked files. If an untracked directory is managed by a different Git repository, it is not removed by default. Use -f option twice if you really want to remove such a directory.</li>
</ul>
<p>As mentioned in the comments, it might be preferable to do a <code>git clean -nd</code>
which does a dry run and tells you what would be deleted before actually
deleting it.</p>
<p>Link to <code>git clean</code> doc page: https://git-scm.com/docs/git-clean</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-301.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-299.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
