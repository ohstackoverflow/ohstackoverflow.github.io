<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2105) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2105.html">
<link rel="prev" href="index-2106.html" type="text/html">
<link rel="next" href="index-2104.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-overload-init-method-based-on-argument-type/" class="u-url">How to overload __init__ method based on argument type?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-overload-init-method-based-on-argument-type/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:03:23+08:00" itemprop="datePublished" title="2023-03-03 17:03">2023-03-03 17:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Let's say I have a class that has a member called data which is a list.</p>
<p>I want to be able to initialize the class with, for example, a filename (which
contains data to initialize the list) or with an actual list.</p>
<p>What's your technique for doing this?</p>
<p>Do you just check the type by looking at <code>__class__</code>?</p>
<p>Is there some trick I might be missing?</p>
<p>I'm used to C++ where overloading by argument type is easy.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A much neater way to get 'alternate constructors' is to use classmethods. For
instance:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nl">MyData</span><span class="p">:</span>
<span class="p">...</span><span class="w">     </span><span class="n">def</span><span class="w"> </span><span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="p">)</span><span class="err">:</span>
<span class="p">...</span><span class="w">         </span><span class="ss">"Initialize MyData from a sequence"</span>
<span class="p">...</span><span class="w">         </span><span class="n">self</span><span class="p">.</span><span class="k">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">data</span>
<span class="p">...</span><span class="w">     </span>
<span class="p">...</span><span class="w">     </span><span class="nv">@classmethod</span>
<span class="p">...</span><span class="w">     </span><span class="n">def</span><span class="w"> </span><span class="n">fromfilename</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="err">:</span>
<span class="p">...</span><span class="w">         </span><span class="ss">"Initialize MyData from a file"</span>
<span class="p">...</span><span class="w">         </span><span class="k">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">open</span><span class="p">(</span><span class="n">filename</span><span class="p">).</span><span class="n">readlines</span><span class="p">()</span>
<span class="p">...</span><span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">cls</span><span class="p">(</span><span class="k">data</span><span class="p">)</span>
<span class="p">...</span><span class="w">     </span>
<span class="p">...</span><span class="w">     </span><span class="nv">@classmethod</span>
<span class="p">...</span><span class="w">     </span><span class="n">def</span><span class="w"> </span><span class="n">fromdict</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="w"> </span><span class="n">datadict</span><span class="p">)</span><span class="err">:</span>
<span class="p">...</span><span class="w">         </span><span class="ss">"Initialize MyData from a dict's items"</span>
<span class="p">...</span><span class="w">         </span><span class="k">return</span><span class="w"> </span><span class="n">cls</span><span class="p">(</span><span class="n">datadict</span><span class="p">.</span><span class="n">items</span><span class="p">())</span>
<span class="p">...</span><span class="w"> </span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">MyData</span><span class="p">(</span><span class="o">[</span><span class="n">1, 2, 3</span><span class="o">]</span><span class="p">).</span><span class="k">data</span>
<span class="o">[</span><span class="n">1, 2, 3</span><span class="o">]</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">MyData</span><span class="p">.</span><span class="n">fromfilename</span><span class="p">(</span><span class="ss">"/tmp/foobar"</span><span class="p">).</span><span class="k">data</span>
<span class="o">[</span><span class="n">'foo\n', 'bar\n', 'baz\n'</span><span class="o">]</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">MyData</span><span class="p">.</span><span class="n">fromdict</span><span class="p">(</span><span class="err">{</span><span class="ss">"spam"</span><span class="err">:</span><span class="w"> </span><span class="ss">"ham"</span><span class="err">}</span><span class="p">).</span><span class="k">data</span>
<span class="o">[</span><span class="n">('spam', 'ham')</span><span class="o">]</span>
</pre></div>

<p>The reason it's neater is that there is no doubt about what type is expected,
and you aren't forced to guess at what the caller intended for you to do with
the datatype it gave you. The problem with <code>isinstance(x, basestring)</code> is that
there is no way for the caller to tell you, for instance, that even though the
type is not a basestring, you should treat it as a string (and not another
sequence.) And perhaps the caller would like to use the same type for
different purposes, sometimes as a single item, and sometimes as a sequence of
items. Being explicit takes all doubt away and leads to more robust and
clearer code.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Excellent question. I've tackled this problem as well, and while I agree that
"factories" (class-method constructors) are a good method, I would like to
suggest another, which I've also found very useful:</p>
<p>Here's a sample (this is a <code>read</code> method and not a constructor, but the idea
is the same):</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">read</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">str</span><span class="o">=</span><span class="nv">None</span>,<span class="w"> </span><span class="nv">filename</span><span class="o">=</span><span class="nv">None</span>,<span class="w"> </span><span class="nv">addr</span><span class="o">=</span><span class="mi">0</span><span class="ss">)</span>:
<span class="w">    </span><span class="s2">""</span><span class="err">" Read binary data and return a store object. The data</span>
<span class="err">        store is also saved in the interal 'data' attribute.</span>

<span class="err">        The data can either be taken from a string (str </span>
<span class="err">        argument) or a file (provide a filename, which will </span>
<span class="err">        be read in binary mode). If both are provided, the str </span>
<span class="err">        will be used. If neither is provided, an ArgumentError </span>
<span class="err">        is raised.</span>
<span class="w">    </span><span class="s2">""</span><span class="err">"</span>
<span class="err">    if str is None:</span>
<span class="err">        if filename is None:</span>
<span class="err">            raise ArgumentError('Please supply a string or a filename')</span>

<span class="err">        file = open(filename, 'rb')</span>
<span class="err">        str = file.read()</span>
<span class="err">        file.close()</span>
<span class="err">    ...</span>
<span class="err">    ... # rest of code</span>
</pre></div>

<p>The key idea is here is using Python's excellent support for named arguments
to implement this. Now, if I want to read the data from a file, I say:</p>
<div class="code"><pre class="code literal-block">obj.read(filename="blob.txt")
</pre></div>

<p>And to read it from a string, I say:</p>
<div class="code"><pre class="code literal-block">obj.read(str="\x34\x55")
</pre></div>

<p>This way the user has just a single method to call. Handling it inside, as you
saw, is not overly complex</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-effect-of-adding-return-false-to-a-click-event-listener/" class="u-url">What's the effect of adding 'return false' to a click event listener?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-effect-of-adding-return-false-to-a-click-event-listener/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:02:57+08:00" itemprop="datePublished" title="2023-03-03 17:02">2023-03-03 17:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Many times I've seen links like these in HTML pages:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">'#'</span><span class="w"> </span><span class="na">onclick=</span><span class="s">'someFunc(3.1415926); return false;'</span><span class="nt">&gt;</span>Click<span class="w"> </span>here<span class="w"> </span>!<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>What's the effect of the <code>return false</code> in there?</p>
<p>Also, I don't usually see that in buttons.</p>
<p>Is this specified anywhere? In some spec in w3.org?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The return value of an event handler determines whether or not the default
browser behaviour should take place as well. In the case of clicking on links,
this would be following the link, but the difference is most noticeable in
form submit handlers, where you can cancel a form submission if the user has
made a mistake entering the information.</p>
<p>I don't believe there is a W3C specification for this. All the ancient
JavaScript interfaces like this have been given the nickname "DOM 0", and are
mostly unspecified. You may have some luck reading old Netscape 2
documentation.</p>
<p>The modern way of achieving this effect is to call <code>event.preventDefault()</code>,
and this is specified in the DOM 2 Events specification.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You can see the difference with the following example:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;a</span><span class="w"> </span><span class="na">href=</span><span class="s">"http://www.google.co.uk/"</span><span class="w"> </span><span class="na">onclick=</span><span class="s">"return (confirm('Follow this link?'))"</span><span class="nt">&gt;</span>Google<span class="nt">&lt;/a&gt;</span>
</pre></div>

<p>Clicking "Okay" returns true, and the link is followed. Clicking "Cancel"
returns false and doesn't follow the link. If javascript is disabled the link
is followed normally.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-search-git-branches-for-a-file-or-directory/" class="u-url">How can I search Git branches for a file or directory?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-search-git-branches-for-a-file-or-directory/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:02:32+08:00" itemprop="datePublished" title="2023-03-03 17:02">2023-03-03 17:02</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Git, how could I search for a file or directory by path across a number of
branches?</p>
<p>I've written something in a branch, but I don't remember which one. Now I need
to find it.</p>
<p><strong>Clarification</strong> : I'm looking for a file which I created on one of my
branches. I'd like to find it by path, and not by its contents, as I don't
remember what the contents are.</p>
<p><br><br></p>
<h2>Answer</h2>
<p><code>git log</code> + <code>git branch</code> will find it for you:</p>
<div class="code"><pre class="code literal-block"><span class="c">% git log --all -- somefile</span>

<span class="n">commit</span><span class="w"> </span><span class="s">55d2069a092e07c56a6b4d321509ba7620664c63</span>
<span class="n">Author</span><span class="p">:</span><span class="w"> </span><span class="n">Dustin</span><span class="w"> </span><span class="n">Sallings</span><span class="w"> </span><span class="o">&lt;</span><span class="n">dustin</span><span class="p">@</span><span class="nb">spy</span><span class="p">.</span><span class="n">net</span><span class="o">&gt;</span>
<span class="n">Date</span><span class="p">:</span><span class="w">   </span><span class="n">Tue</span><span class="w"> </span><span class="n">Dec</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="mi">14</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">22</span><span class="w"> </span><span class="mi">2008</span><span class="w"> </span><span class="o">-</span><span class="mi">0800</span>

<span class="w">    </span><span class="n">added</span><span class="w"> </span><span class="n">somefile</span>


<span class="c">% git branch -a --contains 55d2069</span>
<span class="w">  </span><span class="n">otherbranch</span>
</pre></div>

<p>Supports globbing, too:</p>
<div class="code"><pre class="code literal-block"><span class="c">% git log --all -- '**/my_file.png'</span>
</pre></div>

<p>The single quotes are necessary (at least if using the Bash shell) so the
shell passes the glob pattern to git unchanged, instead of expanding it (just
like with Unix <code>find</code>).</p>
<p><br></p>
<h3>Suggest</h3>
<p>git ls-tree might help. To search across all existing branches:</p>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span>`<span class="nv">git</span><span class="w"> </span><span class="k">for</span><span class="o">-</span><span class="nv">each</span><span class="o">-</span><span class="nv">ref</span><span class="w"> </span><span class="o">--</span><span class="nv">format</span><span class="o">=</span><span class="s2">"%(refname)"</span><span class="w"> </span><span class="nv">refs</span><span class="o">/</span><span class="nv">heads</span>`<span class="c1">; do</span>
<span class="w">  </span><span class="nv">echo</span><span class="w"> </span><span class="mh">$b</span><span class="nv">ranch</span><span class="w"> </span>:<span class="c1">; git ls-tree -r --name-only $branch | grep '&lt;foo&gt;'</span>
<span class="nv">done</span>
</pre></div>

<p>The advantage of this is that you can also search with regular expressions for
the file name.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2106.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2104.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
