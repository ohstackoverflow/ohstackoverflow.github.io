<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2130) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2130.html">
<link rel="prev" href="index-2131.html" type="text/html">
<link rel="next" href="index-2129.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/efficiency-of-purely-functional-programming/" class="u-url">Efficiency of purely functional programming</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/efficiency-of-purely-functional-programming/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:39:30+08:00" itemprop="datePublished" title="2023-03-03 17:39">2023-03-03 17:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Does anyone know what is the worst possible asymptotic slowdown that can
happen when programming purely functionally as opposed to imperatively (i.e.
allowing side-effects)?</p>
<p><em>Clarification from comment by itowlson</em> : is there any problem for which the
best known non-destructive algorithm is asymptotically worse than the best
known destructive algorithm, and if so by how much?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>According to Pippenger [1996], when comparing a Lisp system that is purely
functional (and has strict evaluation semantics, not lazy) to one that can
mutate data, an algorithm written for the impure Lisp that runs in O( <em>n</em> )
can be translated to an algorithm in the pure Lisp that runs in O( <em>n</em> log <em>n</em>
) time (based on work by Ben-Amram and Galil [1992] about simulating random
access memory using only pointers). Pippenger also establishes that there are
algorithms for which that is the best you can do; there are problems which are
O( <em>n</em> ) in the impure system which are Ω( <em>n</em> log <em>n</em> ) in the pure system.</p>
<p>There are a few caveats to be made about this paper. The most significant is
that it does not address lazy functional languages, such as Haskell. Bird,
Jones and De Moor [1997] demonstrate that the problem constructed by Pippenger
can be solved in a lazy functional language in O( <em>n</em> ) time, but they do not
establish (and as far as I know, no one has) whether or not a lazy functional
language can solve all problems in the same asymptotic running time as a
language with mutation.</p>
<p>The problem constructed by Pippenger requires Ω( <em>n</em> log <em>n</em> ) is specifically
constructed to achieve this result, and is not necessarily representative of
practical, real-world problems. There are a few restrictions on the problem
that are a bit unexpected, but necessary for the proof to work; in particular,
the problem requires that results are computed on-line, without being able to
access future input, and that the input consists of a sequence of atoms from
an unbounded set of possible atoms, rather than a fixed size set. And the
paper only establishes (lower bound) results for an impure algorithm of linear
running time; for problems that require a greater running time, it is possible
that the extra O(log <em>n</em> ) factor seen in the linear problem may be able to be
"absorbed" in the process of extra operations necessary for algorithms with
greater running times. These clarifications and open questions are explored
briefly by Ben-Amram [1996].</p>
<p>In practice, many algorithms can be implemented in a pure functional language
at the same efficiency as in a language with mutable data structures. For a
good reference on techniques to use for implementing purely functional data
structures efficiently, see Chris Okasaki's "Purely Functional Data
Structures" [Okasaki 1998] (which is an expanded version of his thesis
[Okasaki 1996]).</p>
<p>Anyone who needs to implement algorithms on purely-functional data structures
should read Okasaki. You can always get at worst an O(log <em>n</em> ) slowdown per
operation by simulating mutable memory with a balanced binary tree, but in
many cases you can do considerably better than that, and Okasaki describes
many useful techniques, from amortized techniques to real-time ones that do
the amortized work incrementally. Purely functional data structures can be a
bit difficult to work with and analyze, but they provide many benefits like
referential transparency that are helpful in compiler optimization, in
parallel and distributed computing, and in implementation of features like
versioning, undo, and rollback.</p>
<p>Note also that all of this discusses only asymptotic running times. Many
techniques for implementing purely functional data structures give you a
certain amount of constant factor slowdown, due to extra bookkeeping necessary
for them to work, and implementation details of the language in question. The
benefits of purely functional data structures may outweigh these constant
factor slowdowns, so you will generally need to make trade-offs based on the
problem in question.</p>
<h4>References</h4>
<ul>
<li>Ben-Amram, Amir and Galil, Zvi 1992. "On Pointers versus Addresses" Journal of the ACM, 39(3), pp. 617-648, July 1992</li>
<li>Ben-Amram, Amir 1996. "Notes on Pippenger's Comparison of Pure and Impure Lisp" Unpublished manuscript, DIKU, University of Copenhagen, Denmark</li>
<li>Bird, Richard, Jones, Geraint, and De Moor, Oege 1997. "More haste, less speed: lazy versus eager evaluation" Journal of Functional Programming 7, 5 pp. 541–547, September 1997</li>
<li>Okasaki, Chris 1996. "Purely Functional Data Structures" PhD Thesis, Carnegie Mellon University</li>
<li>Okasaki, Chris 1998. "Purely Functional Data Structures" Cambridge University Press, Cambridge, UK</li>
<li>Pippenger, Nicholas 1996. "Pure Versus Impure Lisp" ACM Symposium on Principles of Programming Languages, pages 104–109, January 1996</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>There are indeed several algorithms and data structures for which no
asymptotically efficient purely functional solution (t.i. one implementable in
pure lambda calculus) is known, even with laziness.</p>
<ul>
<li>The aforementioned union-find</li>
<li>Hash tables</li>
<li>Arrays</li>
<li>Some graph algorithms</li>
<li>...</li>
</ul>
<p>However, we assume that in "imperative" languages access to memory is O(1)
whereas in theory that can't be so asymptotically (i.e. for unbounded problem
sizes) and access to memory within a huge dataset is always O(log n), which
can be emulated in a functional language.</p>
<p>Also, we must remember that actually all modern functional languages provide
mutable data, and Haskell even provides it without sacrificing purity (the ST
monad).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/setting-mime-type-for-excel-document/" class="u-url">Setting mime type for excel document</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/setting-mime-type-for-excel-document/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:39:09+08:00" itemprop="datePublished" title="2023-03-03 17:39">2023-03-03 17:39</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>MS Excel has the following observed MIME types:</p>
<ul>
<li>
<code>application/vnd.ms-excel</code> (official)</li>
<li><code>application/msexcel</code></li>
<li><code>application/x-msexcel</code></li>
<li><code>application/x-ms-excel</code></li>
<li><code>application/x-excel</code></li>
<li><code>application/x-dos_ms_excel</code></li>
<li><code>application/xls</code></li>
<li><code>application/x-xls</code></li>
<li>
<code>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</code> (xlsx)</li>
</ul>
<p>Is there any one type that would work for all versions? If not, do we need to
set <code>response.setContentType()</code> with each one of these mime types
individually?</p>
<p>Also, we use file streaming in our application to display document (not just
excel - any type of document). In doing so, how can we retain the filename if
the user opts to save the file - currently, the name of the servlet that
renders the file appears as the default name.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I believe the standard MIME type for Excel files is <code>application/vnd.ms-
excel</code>.</p>
<p>Regarding the name of the document, you should set the following header in the
response:</p>
<div class="code"><pre class="code literal-block"><span class="nt">header</span><span class="o">(</span><span class="s1">'Content-Disposition: attachment; filename="name_of_excel_file.xls"'</span><span class="o">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Waking up an old thread here I see, but I felt the urge to add the "new" .xlsx
format.</p>
<p>According to http://filext.com/file-extension/XLSX the extension for .xlsx is
<code>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</code>. It might
be a good idea to include it when checking for mime types!</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/create-an-empty-object-in-javascript-with-or-new-object/" class="u-url">Create an empty object in JavaScript with {} or new Object()?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/create-an-empty-object-in-javascript-with-or-new-object/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:38:45+08:00" itemprop="datePublished" title="2023-03-03 17:38">2023-03-03 17:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>There are <strong>two different</strong> ways to create an empty object in JavaScript:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">objectA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="k">var</span><span class="w"> </span><span class="n">objectB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="p">()</span>
</pre></div>

<p>Is there any difference in how the script engine handles them? Is there any
reason to use one over the other?</p>
<p>Similarly it is also possible to create an empty array using different syntax:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">arrayA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="k">var</span><span class="w"> </span><span class="n">arrayB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">()</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<h3>Objects</h3>
<p>There is no benefit to using <code>new Object()</code>, whereas <code>{}</code> can make your code
more compact, and more readable.</p>
<p>For defining empty objects they're technically the same. The <code>{}</code> syntax is
shorter, neater (less Java-ish), and allows you to instantly populate the
object inline - like so:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="s1">'Frog'</span><span class="p">,</span>
<span class="w">  </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'/img/picture.jpg'</span><span class="p">,</span>
<span class="w">  </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span>
<span class="w">  </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span>
<span class="p">};</span>
</pre></div>

<h3>Arrays</h3>
<p>For arrays, there's similarly almost no benefit to ever using <code>new Array()</code>
over <code>[]</code> — with one minor exception:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">emptyArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</pre></div>

<p>creates a 100 item long array with all slots containing <code>undefined</code>, which may
be nice/useful in certain situations (such as <code>(new Array(9)).join('Na-Na ') +
'Batman!'</code>).</p>
<h3>My recommendation</h3>
<ol>
<li>Never use <code>new Object();</code> — it's clunkier than <code>{}</code> and looks silly.</li>
<li>Always use <code>[]</code> — except when you need to quickly create an "empty" array with a predefined length.</li>
</ol>
<p><br></p>
<h3>Suggest</h3>
<p>Yes, There is a difference, they're not the same. It's true that you'll get
the same results but the engine works in a different way for both of them. One
of them is an object literal, and the other one is a constructor, two
different ways of creating an object in javascript.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">objectA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="o">//</span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">literal</span>

<span class="k">var</span><span class="w"> </span><span class="n">objectB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="p">()</span><span class="w"> </span><span class="o">//</span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">constructor</span>
</pre></div>

<p>In JS everything is an object, but you should be aware about the following
thing with new Object(): It can receive a parameter, and depending on that
parameter, it will create a string, a number, or just an empty object.</p>
<p>For example: <code>new Object(1)</code>, will return a Number. <code>new Object("hello")</code> will
return a string, it means that the object constructor can delegate -depending
on the parameter- the object creation to other constructors like string,
number, etc... It's highly important to keep this in mind when you're managing
dynamic data to create objects..</p>
<p>Many authors recommend not to use the object constructor when you can use a
certain literal notation instead, where you will be sure that what you're
creating is what you're expecting to have in your code.</p>
<p>I suggest you to do a further reading on the differences between literal
notation and constructors on javascript to find more details.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2131.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2129.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
