<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1078) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1078.html">
<link rel="prev" href="index-1079.html" type="text/html">
<link rel="next" href="index-1077.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/no-matching-client-found-for-package-name-google-analytics-multiple-productflavors-buildtypes/" class="u-url">No matching client found for package name (Google Analytics) - multiple productFlavors &amp; buildTypes</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/no-matching-client-found-for-package-name-google-analytics-multiple-productflavors-buildtypes/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:41:08+08:00" itemprop="datePublished" title="2023-02-18 00:41">2023-02-18 00:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>Context:</strong></p>
<p>I'm trying to set up Google Analytics for my app. (having 4 custom
<code>buildTypes</code> and more than a few <code>productFlavors</code>)</p>
<p>It works fine when I select the <code>Build Variant</code> which has the <code>applicationId</code>
set to <code>com.my.app.package.name</code> (the package name used when generating the
<code>google-services.json</code>). But, my other flavors have different applicationIds.</p>
<p>I followed the offical devguide to set it up.</p>
<p>Error I get when any another build variant is selected in <code>Build Variants Tab</code>
(which has a different <code>applicationId</code> (package name) is as follows:</p>
<blockquote>
<p>Error:Execution failed for task
':app:processAllcategoriesDebugfreeGoogleServices'.
</p>
<blockquote>
<p>No matching client found for package name 'com.my.app.package.name.debug'</p>
</blockquote>
</blockquote>
<p><strong>Explanation of Error Message:</strong></p>
<p>In the task name in the error message above <code>Debugfree</code> is my custom
<code>buildType</code> and <code>Allcategories</code> is one of my <code>productFlavors</code>.</p>
<p><strong><em>I understand the error and know the package name is different from what i
used when generating the json, but that is what I'm trying to figure a way
around.</em></strong></p>
<p><strong>Problem:</strong></p>
<p>Now, the <code>google-services.json</code> resides in the <code>app</code> folder and hence I am not
being able to separate them out for each product flavor by dropping them in
the flavor specific source set folder.</p>
<p><strong>Questions:</strong></p>
<ol>
<li>My custom <code>byildType</code> for debugging suffixes <code>.debug</code> to the <code>applicationId</code> (package name). Is there a way I can make it work with the <code>google-services.json</code> which has my release <code>applicationId</code> (i.e. without the suffix <code>.debug</code>)</li>
<li>Is there a way to have multiple product flavors configured in the same <code>google-services.json</code> file without using separate files and tasks to copy the required file to <code>app</code> folder. I know it can be done using <code>task</code> as mentioned in this post. Is there a simpler way to just have one file or pick right file based on gradle configuration?</li>
<li>I see the <code>package_name</code> field in <code>google-services.json</code> has the package name <code>com.my.app.package.name</code>. Can I add multiple package names manually to work for all build variants? If yes, how to do that? Could not find any instructions in documentations.</li>
</ol>
<p><br><br></p>
<h2>Answer</h2>
<p>Found this:</p>
<blockquote>
<p>The google-services.json file is generally placed in the app/ directory,
<strong>but as of version 2.0.0-alpha3 of the plugin support was added for build
types</strong> , which would make the following directory structure valid:</p>
<div class="code"><pre class="code literal-block">app/src/
    main/google-services.json
    dogfood/google-services.json
    mytype1/google-services.json
    ...
</pre></div>

</blockquote>
<p>Source</p>
<p>Source 2</p>
<p><br></p>
<h3>Suggest</h3>
<p>Found this:</p>
<blockquote>
<p>The google-services.json file is generally placed in the app/ directory,
<strong>but as of version 2.0.0-alpha3 of the plugin support was added for build
types</strong> , which would make the following directory structure valid:</p>
<div class="code"><pre class="code literal-block">app/src/
    main/google-services.json
    dogfood/google-services.json
    mytype1/google-services.json
    ...
</pre></div>

</blockquote>
<p>Source</p>
<p>Source 2</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/view-s-getwidth-and-getheight-returns-0/" class="u-url">View's getWidth() and getHeight() returns 0</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/view-s-getwidth-and-getheight-returns-0/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:40:34+08:00" itemprop="datePublished" title="2023-02-18 00:40">2023-02-18 00:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am creating all of the elements in my android project dynamically. I am
trying to get the width and height of a button so that I can rotate that
button around. I am just trying to learn how to work with the android
language. However, it returns 0.</p>
<p>I did some research and I saw that it needs to be done somewhere other than in
the <code>onCreate()</code> method. If someone can give me an example of how to do it,
that would be great.</p>
<p>Here is my current code:</p>
<div class="code"><pre class="code literal-block"><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">animation</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.view.animation.Animation</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.view.animation.LinearInterpolator</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.view.animation.RotateAnimation</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Button</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">android.widget.LinearLayout</span><span class="p">;</span>

<span class="n">public</span> <span class="k">class</span> <span class="nc">AnimateScreen</span> <span class="n">extends</span> <span class="n">Activity</span> <span class="p">{</span>


<span class="o">//</span><span class="n">Called</span> <span class="n">when</span> <span class="n">the</span> <span class="n">activity</span> <span class="ow">is</span> <span class="n">first</span> <span class="n">created</span><span class="o">.</span>
<span class="nd">@Override</span>
<span class="n">public</span> <span class="n">void</span> <span class="n">onCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">super</span><span class="o">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">);</span>

    <span class="n">LinearLayout</span> <span class="n">ll</span> <span class="o">=</span> <span class="n">new</span> <span class="n">LinearLayout</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>

    <span class="n">LinearLayout</span><span class="o">.</span><span class="n">LayoutParams</span> <span class="n">layoutParams</span> <span class="o">=</span> <span class="n">new</span> <span class="n">LinearLayout</span><span class="o">.</span><span class="n">LayoutParams</span><span class="p">(</span><span class="n">LinearLayout</span><span class="o">.</span><span class="n">LayoutParams</span><span class="o">.</span><span class="n">WRAP_CONTENT</span><span class="p">,</span> <span class="n">LinearLayout</span><span class="o">.</span><span class="n">LayoutParams</span><span class="o">.</span><span class="n">WRAP_CONTENT</span><span class="p">);</span>
    <span class="n">layoutParams</span><span class="o">.</span><span class="n">setMargins</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="n">Button</span> <span class="n">bt</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Button</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
    <span class="n">bt</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">String</span><span class="o">.</span><span class="n">valueOf</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">getWidth</span><span class="p">()));</span>

    <span class="n">RotateAnimation</span> <span class="n">ra</span> <span class="o">=</span> <span class="n">new</span> <span class="n">RotateAnimation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">,</span><span class="n">bt</span><span class="o">.</span><span class="n">getWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span><span class="n">bt</span><span class="o">.</span><span class="n">getHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">ra</span><span class="o">.</span><span class="n">setDuration</span><span class="p">(</span><span class="mi">3000</span><span class="n">L</span><span class="p">);</span>
    <span class="n">ra</span><span class="o">.</span><span class="n">setRepeatMode</span><span class="p">(</span><span class="n">Animation</span><span class="o">.</span><span class="n">RESTART</span><span class="p">);</span>
    <span class="n">ra</span><span class="o">.</span><span class="n">setRepeatCount</span><span class="p">(</span><span class="n">Animation</span><span class="o">.</span><span class="n">INFINITE</span><span class="p">);</span>
    <span class="n">ra</span><span class="o">.</span><span class="n">setInterpolator</span><span class="p">(</span><span class="n">new</span> <span class="n">LinearInterpolator</span><span class="p">());</span>

    <span class="n">bt</span><span class="o">.</span><span class="n">startAnimation</span><span class="p">(</span><span class="n">ra</span><span class="p">);</span>

    <span class="n">ll</span><span class="o">.</span><span class="n">addView</span><span class="p">(</span><span class="n">bt</span><span class="p">,</span><span class="n">layoutParams</span><span class="p">);</span>

    <span class="n">setContentView</span><span class="p">(</span><span class="n">ll</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<p>Any help is appreciated.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You are calling <code>getWidth()</code> too early. The UI has not been sized and laid out
on the screen yet.</p>
<p>I doubt you want to be doing what you are doing, anyway -- widgets being
animated do not change their clickable areas, and so the button will still
respond to clicks in the original orientation regardless of how it has
rotated.</p>
<p>That being said, you can use a dimension resource to define the button size,
then reference that dimension resource from your layout file and your source
code, to avoid this problem.</p>
<p><br></p>
<h3>Suggest</h3>
<p>We can use</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Override</span>
<span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">onWindowFocusChanged</span><span class="p">(</span><span class="k">boolean</span><span class="w"> </span><span class="n">hasFocus</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">super</span><span class="p">.</span><span class="n">onWindowFocusChanged</span><span class="p">(</span><span class="n">hasFocus</span><span class="p">);</span>
<span class="w">  </span><span class="o">//</span><span class="n">Here</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">size</span><span class="err">!</span>
<span class="w"> </span><span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-it-worth-using-python-s-re-compile/" class="u-url">Is it worth using Python's re.compile?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-it-worth-using-python-s-re-compile/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T00:40:04+08:00" itemprop="datePublished" title="2023-02-18 00:40">2023-02-18 00:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there any benefit in using compile for regular expressions in Python?</p>
<div class="code"><pre class="code literal-block">h = re.compile('hello')
h.match('hello world')
</pre></div>

<p>vs</p>
<div class="code"><pre class="code literal-block">re.match('hello', 'hello world')
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>I've had a lot of experience running a compiled regex 1000s of times versus
compiling on-the-fly, and have not noticed any perceivable difference.
Obviously, this is anecdotal, and certainly not a great argument <em>against</em>
compiling, but I've found the difference to be negligible.</p>
<p>EDIT: After a quick glance at the actual Python 2.5 library code, I see that
Python internally compiles AND CACHES regexes whenever you use them anyway
(including calls to <code>re.match()</code>), so you're really only changing WHEN the
regex gets compiled, and shouldn't be saving much time at all - only the time
it takes to check the cache (a key lookup on an internal <code>dict</code> type).</p>
<p>From module re.py (comments are mine):</p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="err">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="p">).</span><span class="k">match</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>

<span class="n">def</span><span class="w"> </span><span class="n">_compile</span><span class="p">(</span><span class="o">*</span><span class="k">key</span><span class="p">)</span><span class="err">:</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="k">top</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">function</span>
<span class="w">    </span><span class="n">cachekey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="p">(</span><span class="k">key</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">),)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">key</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_cache</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="n">cachekey</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">None</span><span class="err">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">p</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="p">...</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Does</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">compilation</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="n">miss</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="p">...</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Caches</span><span class="w"> </span><span class="n">compiled</span><span class="w"> </span><span class="n">regex</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">_cache</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nl">_MAXCACHE</span><span class="p">:</span>
<span class="w">        </span><span class="n">_cache</span><span class="p">.</span><span class="n">clear</span><span class="p">()</span>
<span class="w">    </span><span class="n">_cache</span><span class="o">[</span><span class="n">cachekey</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">p</span>
</pre></div>

<p>I still often pre-compile regular expressions, but only to bind them to a
nice, reusable name, not for any expected performance gain.</p>
<p><br></p>
<h3>Suggest</h3>
<p>For me, the biggest benefit to <code>re.compile</code> is being able to separate
definition of the regex from its use.</p>
<p>Even a simple expression such as <code>0|[1-9][0-9]*</code> (integer in base 10 without
leading zeros) can be complex enough that you'd rather not have to retype it,
check if you made any typos, and later have to recheck if there are typos when
you start debugging. Plus, it's nicer to use a variable name such as num or
num_b10 than <code>0|[1-9][0-9]*</code>.</p>
<p>It's certainly possible to store strings and pass them to re.match; however,
that's <em>less</em> readable:</p>
<div class="code"><pre class="code literal-block"><span class="nv">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"..."</span>
#<span class="w"> </span><span class="k">then</span>,<span class="w"> </span><span class="nv">much</span><span class="w"> </span><span class="nv">later</span>:
<span class="nv">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">re</span>.<span class="nv">match</span><span class="ss">(</span><span class="nv">num</span>,<span class="w"> </span><span class="nv">input</span><span class="ss">)</span>
</pre></div>

<p>Versus compiling:</p>
<div class="code"><pre class="code literal-block"><span class="nv">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">re</span>.<span class="nv">compile</span><span class="ss">(</span><span class="s2">"..."</span><span class="ss">)</span>
#<span class="w"> </span><span class="k">then</span>,<span class="w"> </span><span class="nv">much</span><span class="w"> </span><span class="nv">later</span>:
<span class="nv">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">num</span>.<span class="nv">match</span><span class="ss">(</span><span class="nv">input</span><span class="ss">)</span>
</pre></div>

<p>Though it is fairly close, the last line of the second feels more natural and
simpler when used repeatedly.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1079.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1077.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
