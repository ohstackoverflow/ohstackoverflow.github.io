<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2746) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2746.html">
<link rel="prev" href="index-2747.html" type="text/html">
<link rel="next" href="index-2745.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-ytowont9/" class="u-url">What is 'YTowOnt9'?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-ytowont9/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T14:47:43+08:00" itemprop="datePublished" title="2023-03-05 14:47">2023-03-05 14:47</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Our (PHP) framework sometimes renders hidden inputs with value <code>YTowOnt9</code>. I
can't find that string anywhere in the (huge) codebase, and can't figure out
where it came from. I decided to Google for that particular string, and the
result surprised me. Over half a million - kind of random - hits. I haven't
found any page describing the value itself. It has 0 hits on Stack Overflow.</p>
<p>Is <code>YTowOnt9</code> some kind of magic string?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It seems to be a PHP-serialized empty array, base 64 encoded.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>base64<span class="w"> </span>-D<span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="w"> </span><span class="s1">'YTowOnt9'</span>
a:0:<span class="o">{}</span>
$<span class="w"> </span>php<span class="w"> </span>-r<span class="w"> </span><span class="s1">'var_dump(unserialize(base64_decode("YTowOnt9")));'</span>
array<span class="o">(</span><span class="m">0</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="o">}</span>
</pre></div>

<p>There are many scripts that serialize arrays of data. When the arrays have
data, they vary greatly, so the Base64 encoded PHP-serialized values do too,
but when they are empty they are all the same. It makes it look as if a lot of
very different PHP scripts have this random string in common.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-pep8-s-e128-continuation-line-under-indented-for-visual-indent/" class="u-url">What is PEP8's E128: continuation line under-indented for visual indent?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-pep8-s-e128-continuation-line-under-indented-for-visual-indent/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T14:46:29+08:00" itemprop="datePublished" title="2023-03-05 14:46">2023-03-05 14:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Just opened a file with Sublime Text (with Sublime Linter) and noticed a PEP8
formatting error that I'd never seen before. Here's the text:</p>
<div class="code"><pre class="code literal-block">urlpatterns = patterns('',
    url(r'^$', listing, name='investment-listing'),
)
</pre></div>

<p>It's flagging the second argument, the line that starts <code>url(...)</code></p>
<p>I was about to disable this check in ST2 but <strong><em>I'd like to know what I'm
doing wrong</em></strong> before I ignore it. You never know, if it seems important I
might even change my ways :)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>PEP-8 recommends you indent lines to the opening parentheses if you put
anything on the first line, so it should either be indenting to the opening
bracket:</p>
<div class="code"><pre class="code literal-block">urlpatterns = patterns('',
                       url(r'^$', listing, name='investment-listing'))
</pre></div>

<p>or not putting any arguments on the starting line, then indenting to a uniform
level:</p>
<div class="code"><pre class="code literal-block">urlpatterns = patterns(
    '',
    url(r'^$', listing, name='investment-listing'),
)

urlpatterns = patterns(
    '', url(r'^$', listing, name='investment-listing'))
</pre></div>

<p>I suggest taking a read through PEP-8 - you can skim through a lot of it, and
it's pretty easy to understand, unlike some of the more technical PEPs.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This goes also for statements like this (auto-formatted by PyCharm):</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">combine_sample_generators</span><span class="ss">(</span><span class="nv">sample_generators</span>[<span class="s1">'train'</span>]<span class="ss">)</span>,<span class="w"> </span>\
<span class="w">           </span><span class="nv">combine_sample_generators</span><span class="ss">(</span><span class="nv">sample_generators</span>[<span class="s1">'dev'</span>]<span class="ss">)</span>,<span class="w"> </span>\
<span class="w">           </span><span class="nv">combine_sample_generators</span><span class="ss">(</span><span class="nv">sample_generators</span>[<span class="s1">'test'</span>]<span class="ss">)</span>
</pre></div>

<p>Which will give the same style-warning. In order to get rid of it I had to
rewrite it to:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="k">return</span><span class="w"> </span>\
<span class="w">        </span><span class="nv">combine_sample_generators</span><span class="ss">(</span><span class="nv">sample_generators</span>[<span class="s1">'train'</span>]<span class="ss">)</span>,<span class="w"> </span>\
<span class="w">        </span><span class="nv">combine_sample_generators</span><span class="ss">(</span><span class="nv">sample_generators</span>[<span class="s1">'dev'</span>]<span class="ss">)</span>,<span class="w"> </span>\
<span class="w">        </span><span class="nv">combine_sample_generators</span><span class="ss">(</span><span class="nv">sample_generators</span>[<span class="s1">'test'</span>]<span class="ss">)</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/web-workers-without-a-separate-javascript-file/" class="u-url">Web workers without a separate Javascript file?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/web-workers-without-a-separate-javascript-file/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T14:44:44+08:00" itemprop="datePublished" title="2023-03-05 14:44">2023-03-05 14:44</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>As far as I can tell, web workers need to be written in a separate JavaScript
file, and called like this:</p>
<div class="code"><pre class="code literal-block">new Worker('longrunning.js')
</pre></div>

<p>I'm using the closure compiler to combine and minify all my JavaScript source
code, and I'd rather not have to have my workers in separate files for
distribution. Is there some way to do this?</p>
<div class="code"><pre class="code literal-block">new Worker(function() {
    //Long-running work here
});
</pre></div>

<p>Given that first-class functions are so crucial to JavaScript, why does the
standard way to do background work have to load a whole other JavaScript file
from the web server?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers</p>
<blockquote>
<p>What if you want to create your worker script on the fly, or create a self-
contained page without having to create separate worker files? With Blob(),
you can "inline" your worker in the same HTML file as your main logic by
creating a URL handle to the worker code as a string</p>
</blockquote>
<h3>Full example of BLOB inline worker:</h3>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">id</span><span class="o">=</span><span class="s">"worker1"</span> <span class="na">type</span><span class="o">=</span><span class="s">"javascript/worker"</span><span class="p">&gt;</span>
<span class="w">  </span><span class="c1">// This script won't be parsed by JS engines because its type is javascript/worker.</span>
<span class="w">  </span><span class="nx">self</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">self</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="s1">'msg from worker'</span><span class="p">);</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="c1">// Rest of your worker code goes here.</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">blob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Blob</span><span class="p">([</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'#worker1'</span><span class="p">).</span><span class="nx">textContent</span>
<span class="w">  </span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s2">"text/javascript"</span><span class="w"> </span><span class="p">})</span>

<span class="w">  </span><span class="c1">// Note: window.webkitURL.createObjectURL() in Chrome 10+.</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Worker</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">blob</span><span class="p">));</span>
<span class="w">  </span><span class="nx">worker</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Received: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">);</span><span class="w"> </span><span class="c1">// Start the worker.</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The html5rocks solution of embedding the web worker code in HTML is fairly
horrible.<br>
And a blob of escaped JavaScript-as-a-string is no better, not least because
it complicates work-flow (Closure compiler can't operate on strings).</p>
<p>Personally I really like the toString methods, but @dan-man THAT regex!</p>
<p>My preferred approach:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">Build</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">anonymous</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">body</span>
<span class="k">var</span><span class="w"> </span><span class="n">blobURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">URL</span><span class="o">.</span><span class="n">createObjectURL</span><span class="p">(</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Blob</span><span class="p">([</span><span class="w"> </span><span class="s1">'('</span><span class="p">,</span>

<span class="n">function</span><span class="p">(){</span>
<span class="w">    </span><span class="o">//</span><span class="n">Long</span><span class="o">-</span><span class="n">running</span><span class="w"> </span><span class="n">work</span><span class="w"> </span><span class="n">here</span>
<span class="p">}</span><span class="o">.</span><span class="n">toString</span><span class="p">(),</span>

<span class="s1">')()'</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="p">:</span><span class="w"> </span><span class="s1">'application/javascript'</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">),</span>

<span class="n">worker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Worker</span><span class="p">(</span><span class="w"> </span><span class="n">blobURL</span><span class="w"> </span><span class="p">);</span>

<span class="o">//</span><span class="w"> </span><span class="n">Won</span><span class="s1">'t be needing this anymore</span>
<span class="n">URL</span><span class="o">.</span><span class="n">revokeObjectURL</span><span class="p">(</span><span class="w"> </span><span class="n">blobURL</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>Support is the intersection of these three tables:</p>
<ul>
<li>http://caniuse.com/#feat=webworkers</li>
<li>http://caniuse.com/#feat=blobbuilder</li>
<li>http://caniuse.com/#feat=bloburls</li>
</ul>
<p>This won't work for a <strong>SharedWorker</strong> however, because the URL must be an
exact match, even if the optional 'name' parameter matches. For a
SharedWorker, you'll need a separate JavaScript file.</p>
<hr>
<h4>2015 update - The ServiceWorker singularity arrives</h4>
<p>Now there's an even more powerful way of solving this problem. Again, store
the worker code as a function, (rather than a static string) and convert using
.toString(), then insert the code into CacheStorage under a static URL of your
choice.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Post code from window to ServiceWorker...</span>
<span class="n">navigator</span><span class="p">.</span><span class="n">serviceWorker</span><span class="p">.</span><span class="n">controller</span><span class="p">.</span><span class="n">postMessage</span><span class="p">(</span>
<span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s">'/my_workers/worker1.js'</span><span class="p">,</span><span class="w"> </span><span class="s">'('</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">workerFunction1</span><span class="p">.</span><span class="n">toString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">')()'</span><span class="w"> </span><span class="p">]</span>
<span class="p">);</span>

<span class="c1">// Insert via ServiceWorker.onmessage. Or directly once window.caches is exposed</span>
<span class="n">caches</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="w"> </span><span class="s">'myCache'</span><span class="w"> </span><span class="p">).</span><span class="nb">then</span><span class="p">(</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="w"> </span><span class="s">'/my_workers/worker1.js'</span><span class="p">,</span>
<span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="n">Response</span><span class="p">(</span><span class="w"> </span><span class="n">workerScript</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">headers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s">'content-type'</span><span class="p">:</span><span class="s">'application/javascript'</span><span class="p">}})</span>
<span class="w"> </span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>There are two possible fall-backs. ObjectURL as above, or more seamlessly, put
a <strong>real</strong> JavaScript file at /my_workers/worker1.js</p>
<p>Advantages of this approach are:</p>
<ol>
<li>SharedWorkers can also be supported.</li>
<li>Tabs can share a single cached copy at a fixed address. The blob approach proliferates random objectURLs for every tab.</li>
</ol>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2747.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2745.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
