<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1694) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1694.html">
<link rel="prev" href="index-1695.html" type="text/html">
<link rel="next" href="index-1693.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-clean-node-modules-folder-of-packages-that-are-not-in-package-json/" class="u-url">How to clean node_modules folder of packages that are not in package.json?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-clean-node-modules-folder-of-packages-that-are-not-in-package-json/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:07:52+08:00" itemprop="datePublished" title="2023-03-03 07:07">2023-03-03 07:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Assume I install project packages with <code>npm install</code> that looks into
<code>package.json</code> for modules to be installed. After a while I see that I don't
need some specific module and remove its dependency from <code>package.json</code>. Then
I remove some other modules from <code>package.json</code> because they are not needed
anymore and others are replaced with alternatives.</p>
<p>Now I want to clean <code>node_modules</code> folder so that only modules listed in
<code>package.json</code> stay there and the rest must go, something like <code>npm clean</code>. I
know I can remove them manually but would like to have some nice ready to use
sugar functionality for that.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I think you're looking for <code>npm prune</code></p>
<blockquote>
<p><code>npm prune [&lt;name&gt; [&lt;name ...]]</code></p>
<p>This command removes "extraneous" packages. If a package name is provided,
then only packages matching one of the supplied names are removed.</p>
<p>Extraneous packages are packages that are not listed on the parent package's
dependencies list.</p>
</blockquote>
<p>See the docs: https://docs.npmjs.com/cli/prune</p>
<p><br></p>
<h3>Suggest</h3>
<p>You could remove your node_modules/ folder and then reinstall the dependencies
from package.json.</p>
<div class="code"><pre class="code literal-block">rm -rf node_modules/
npm install
</pre></div>

<p>This would erase all installed packages in the current folder and only install
the dependencies from package.json. If the dependencies have been previously
installed npm will try to use the cached version, avoiding downloading the
dependency a second time.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/scp-secure-copy-to-ec2-instance-without-password/" class="u-url">scp (secure copy) to ec2 instance without password</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/scp-secure-copy-to-ec2-instance-without-password/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:07:27+08:00" itemprop="datePublished" title="2023-03-03 07:07">2023-03-03 07:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an EC2 instance running (FreeBSD 9 AMI ami-8cce3fe5), and I can ssh
into it using my amazon-created key file without password prompt, no problem.</p>
<p>However, when I want to copy a file to the instance using scp I am asked to
enter a password:</p>
<div class="code"><pre class="code literal-block"><span class="n">scp</span><span class="w"> </span><span class="n">somefile</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">mykey</span><span class="p">.</span><span class="n">pem</span><span class="w"> </span><span class="n">root</span><span class="nv">@my</span><span class="p">.</span><span class="n">ec2</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="o">/</span>

<span class="nl">Password</span><span class="p">:</span>
</pre></div>

<p>Any ideas why this is happening/how it can be prevented?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I figured it out. I had the arguments in the wrong order. This works:</p>
<div class="code"><pre class="code literal-block"><span class="n">scp</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">mykey</span><span class="p">.</span><span class="n">pem</span><span class="w"> </span><span class="n">somefile</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">root</span><span class="nv">@my</span><span class="p">.</span><span class="n">ec2</span><span class="p">.</span><span class="n">id</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="o">/</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-define-an-empty-object-in-php/" class="u-url">How to define an empty object in PHP</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-define-an-empty-object-in-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T07:07:01+08:00" itemprop="datePublished" title="2023-03-03 07:07">2023-03-03 07:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>with a new array I do this:</p>
<div class="code"><pre class="code literal-block"><span class="err">$</span><span class="n">aVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="p">();</span>

<span class="err">$</span><span class="n">aVal</span><span class="o">[</span><span class="n">key1</span><span class="o">][</span><span class="n">var1</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"something"</span><span class="p">;</span>
<span class="err">$</span><span class="n">aVal</span><span class="o">[</span><span class="n">key1</span><span class="o">][</span><span class="n">var2</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"something else"</span><span class="p">;</span>
</pre></div>

<p>Is there a similar syntax for an object</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">object</span><span class="p">)</span><span class="o">$</span><span class="n">oVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">;</span>

<span class="o">$</span><span class="n">oVal</span><span class="o">-&gt;</span><span class="n">key1</span><span class="o">-&gt;</span><span class="n">var1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something"</span><span class="p">;</span>
<span class="o">$</span><span class="n">oVal</span><span class="o">-&gt;</span><span class="n">key1</span><span class="o">-&gt;</span><span class="n">var2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something else"</span><span class="p">;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block">$x = new stdClass();
</pre></div>

<p>A comment in the manual sums it up best:</p>
<blockquote>
<p>stdClass is the default PHP object. stdClass has no properties, methods or
parent. It does not support magic methods, and implements no interfaces.</p>
<p>When you cast a scalar or array as Object, you get an instance of stdClass.
You can use stdClass whenever you need a generic object instance.</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>The standard way to create an "empty" object is:</p>
<div class="code"><pre class="code literal-block">$oVal = new stdClass();
</pre></div>

<p>But I <strong>personally</strong> prefer to use:</p>
<div class="code"><pre class="code literal-block">$oVal = (object)[];
</pre></div>

<p>It's shorter and I personally consider it clearer because <em>stdClass</em> could be
misleading to novice programmers (i.e. "Hey, I want an object, not a
class!"...).</p>
<hr>
<p><strong><code>(object)[]</code> is equivalent to <code>new stdClass()</code>.</strong></p>
<p>See the PHP manual (here):</p>
<blockquote>
<p><strong>stdClass</strong> : Created by typecasting to object.</p>
</blockquote>
<p>and here:</p>
<blockquote>
<p>If an object is converted to an object, it is not modified. If a value of
any other type is converted to an object, <strong>a new instance of the stdClass
built-in class is created</strong>.</p>
</blockquote>
<p>and here (starting with PHP 7.3.0, <code>var_export()</code> exports an object casting an
array with <code>(object)</code>):</p>
<blockquote>
<p>Now exports stdClass objects as an array cast to an object ((object) array(
... )), rather than using the nonexistent method stdClass::__setState(). The
practical effect is that now stdClass is exportable, and the resulting code
will even work on earlier versions of PHP.</p>
</blockquote>
<hr>
<p>However remember that <strong>empty($oVal) returns false</strong> , as @PaulP said:</p>
<blockquote>
<p>Objects with no properties are no longer considered empty.</p>
</blockquote>
<p>Regarding your example, if you write:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="n">oVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">stdClass</span><span class="p">();</span>
<span class="o">$</span><span class="n">oVal</span><span class="o">-&gt;</span><span class="n">key1</span><span class="o">-&gt;</span><span class="n">var1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something"</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">PHP</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">8</span>
<span class="w">                                 </span><span class="o">//</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fatal</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">PHP</span><span class="w"> </span><span class="o">&gt;=</span><span class="mi">8</span>
<span class="o">$</span><span class="n">oVal</span><span class="o">-&gt;</span><span class="n">key1</span><span class="o">-&gt;</span><span class="n">var2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"something else"</span><span class="p">;</span>
</pre></div>

<p>PHP &lt; 8 creates the following Warning, implicitly creating the property <code>key1</code>
(an object itself)</p>
<blockquote>
<p>Warning: Creating default object from empty value</p>
</blockquote>
<p>PHP &gt;= 8 creates the following Error:</p>
<blockquote>
<p>Fatal error: Uncaught Error: Undefined constant "key1"</p>
</blockquote>
<p>In my opinion your best option is:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="n">oVal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">object</span><span class="p">)[</span>
<span class="w">  </span><span class="s1">'key1'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">object</span><span class="p">)[</span>
<span class="w">    </span><span class="s1">'var1'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"something"</span><span class="p">,</span>
<span class="w">    </span><span class="s1">'var2'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">"something else"</span><span class="p">,</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">];</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1695.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1693.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
