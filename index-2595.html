<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2595) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2595.html">
<link rel="prev" href="index-2596.html" type="text/html">
<link rel="next" href="index-2594.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-add-a-custom-http-header-to-ajax-request-with-js-or-jquery/" class="u-url">How can I add a custom HTTP header to ajax request with js or jQuery?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-add-a-custom-http-header-to-ajax-request-with-js-or-jquery/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T03:35:56+08:00" itemprop="datePublished" title="2023-03-05 03:35">2023-03-05 03:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Does anyone know how to add or create a custom HTTP header using JavaScript or
jQuery?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are several solutions depending on what you need...</p>
<p>If you want to <strong>add a custom header (or set of headers) to an individual
request</strong> then just add the <code>headers</code> property:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// Request with custom header</span>
$<span class="p">.</span><span class="n">ajax</span><span class="p">({</span>
<span class="w">    </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s">'foo/bar'</span><span class="p">,</span>
<span class="w">    </span><span class="n">headers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">'x-my-custom-header'</span><span class="p">:</span><span class="w"> </span><span class="s">'some value'</span><span class="w"> </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>If you want to <strong>add a default header (or set of headers) to every request</strong>
then use <code>$.ajaxSetup()</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">.</span><span class="nc">ajaxSetup</span><span class="o">(</span><span class="p">{</span>
<span class="w">    </span><span class="n">headers</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="s1">'x-my-custom-header'</span><span class="o">:</span><span class="w"> </span><span class="s1">'some value'</span><span class="w"> </span><span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span><span class="w"> </span><span class="nt">Sends</span><span class="w"> </span><span class="nt">your</span><span class="w"> </span><span class="nt">custom</span><span class="w"> </span><span class="nt">header</span>
<span class="o">$</span><span class="p">.</span><span class="nc">ajax</span><span class="o">(</span><span class="p">{</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'foo/bar'</span><span class="w"> </span><span class="p">}</span><span class="o">);</span>

<span class="o">//</span><span class="w"> </span><span class="nt">Overwrites</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">default</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="nt">with</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">header</span>
<span class="o">$</span><span class="p">.</span><span class="nc">ajax</span><span class="o">(</span><span class="p">{</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'foo/bar'</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="o">:</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="s1">'x-some-other-header'</span><span class="o">:</span><span class="w"> </span><span class="s1">'some value'</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">}</span><span class="o">);</span>
</pre></div>

<p>If you want to <strong>add a header (or set of headers) to every request</strong> then use
the <code>beforeSend</code> hook with <code>$.ajaxSetup()</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">.</span><span class="nc">ajaxSetup</span><span class="o">(</span><span class="p">{</span>
<span class="w">    </span><span class="n">beforeSend</span><span class="p">:</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">xhr</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">xhr</span><span class="o">.</span><span class="nf">setRequestHeader</span><span class="p">(</span><span class="s1">'x-my-custom-header'</span><span class="p">,</span><span class="w"> </span><span class="s1">'some value'</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span><span class="w"> </span><span class="nt">Sends</span><span class="w"> </span><span class="nt">your</span><span class="w"> </span><span class="nt">custom</span><span class="w"> </span><span class="nt">header</span>
<span class="o">$</span><span class="p">.</span><span class="nc">ajax</span><span class="o">(</span><span class="p">{</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'foo/bar'</span><span class="w"> </span><span class="p">}</span><span class="o">);</span>

<span class="o">//</span><span class="w"> </span><span class="nt">Sends</span><span class="w"> </span><span class="nt">both</span><span class="w"> </span><span class="nt">custom</span><span class="w"> </span><span class="nt">headers</span>
<span class="o">$</span><span class="p">.</span><span class="nc">ajax</span><span class="o">(</span><span class="p">{</span><span class="w"> </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="s1">'foo/bar'</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="o">:</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="s1">'x-some-other-header'</span><span class="o">:</span><span class="w"> </span><span class="s1">'some value'</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">}</span><span class="o">);</span>
</pre></div>

<p><strong>Edit (more info):</strong> One thing to be aware of is that with <code>ajaxSetup</code> you
can only define one set of default headers and you can only define one
<code>beforeSend</code>. If you call <code>ajaxSetup</code> multiple times, only the last set of
headers will be sent and only the last before-send callback will execute.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Or, if you want to send the custom header for every future request, then you
could use the following:</p>
<div class="code"><pre class="code literal-block"><span class="o">$</span><span class="p">.</span><span class="nc">ajaxSetup</span><span class="o">(</span><span class="p">{</span>
<span class="w">    </span><span class="n">headers</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="s2">"CustomHeader"</span><span class="o">:</span><span class="w"> </span><span class="s2">"myValue"</span><span class="w"> </span><span class="p">}</span>
<span class="err">}</span><span class="o">);</span>
</pre></div>

<p>This way every future ajax request will contain the custom header, unless
explicitly overridden by the options of the request. You can find more info on
<code>ajaxSetup</code> here</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/populating-spring-value-during-unit-test/" class="u-url">Populating Spring @Value during Unit Test</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/populating-spring-value-during-unit-test/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T03:35:10+08:00" itemprop="datePublished" title="2023-03-05 03:35">2023-03-05 03:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to write a Unit Test for a simple bean that's used in my program to
validate forms. The bean is annotated with <code>@Component</code> and has a class
variable that is initialized using</p>
<div class="code"><pre class="code literal-block">@Value("<span class="cp">${</span><span class="n">this</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">value</span><span class="cp">}</span>")<span class="w"> </span>private<span class="w"> </span>String<span class="w"> </span>thisProperty;
</pre></div>

<p>I would like to write unit tests for the validation methods inside this class,
however, if possible I would like to do so without utilizing the properties
file. My reasoning behind this, is that if the value I'm pulling from the
properties file changes, I would like that to not affect my test case. My test
case is testing the code that validates the value, not the value itself.</p>
<p>Is there a way to use Java code inside my test class to initialize a Java
class and populate the Spring @Value property inside that class then use that
to test with?</p>
<p>I did find this How To that seems to be close, but still uses a properties
file. I would rather it all be Java code.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If possible I would try to write those test without Spring Context. If you
create this class in your test without spring, then you have full control over
its fields.</p>
<p>To set the <code>@value</code> field you can use Springs <code>ReflectionTestUtils</code> - it has
a method <code>setField</code> to set private fields.</p>
<p>@see JavaDoc: ReflectionTestUtils.setField(java.lang.Object, java.lang.String,
java.lang.Object)</p>
<p><br></p>
<h3>Suggest</h3>
<p>Since Spring 4.1 you could set up property values just in code by using
<code>org.springframework.test.context.TestPropertySource</code> annotation on Unit Tests
class level. You could use this approach even for injecting properties into
dependent bean instances</p>
<p>For example</p>
<div class="code"><pre class="code literal-block">@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes<span class="w"> </span>=<span class="w"> </span>FooTest.Config.class)
@TestPropertySource(properties<span class="w"> </span>=<span class="w"> </span>{
<span class="w">    </span>"some.bar.value=testValue",
})
public<span class="w"> </span>class<span class="w"> </span>FooTest<span class="w"> </span>{

<span class="w">  </span>@Value("<span class="cp">${</span><span class="n">some</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">value</span><span class="cp">}</span>")
<span class="w">  </span>String<span class="w"> </span>bar;

<span class="w">  </span>@Test
<span class="w">  </span>public<span class="w"> </span>void<span class="w"> </span>testValueSetup()<span class="w"> </span>{
<span class="w">    </span>assertEquals("testValue",<span class="w"> </span>bar);
<span class="w">  </span>}


<span class="w">  </span>@Configuration
<span class="w">  </span>static<span class="w"> </span>class<span class="w"> </span>Config<span class="w"> </span>{

<span class="w">    </span>@Bean
<span class="w">    </span>public<span class="w"> </span>static<span class="w"> </span>PropertySourcesPlaceholderConfigurer<span class="w"> </span>propertiesResolver()<span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>new<span class="w"> </span>PropertySourcesPlaceholderConfigurer();
<span class="w">    </span>}

<span class="w">  </span>}

}
</pre></div>

<p><strong>Note:</strong> It's necessary to have instance of
<code>org.springframework.context.support.PropertySourcesPlaceholderConfigurer</code> in
Spring context</p>
<p><strong>Edit 24-08-2017:</strong> If you are using SpringBoot 1.4.0 and later you could
initialize tests with <code>@SpringBootTest</code> and <code>@SpringBootConfiguration</code>
annotations. More info here</p>
<p>In case of SpringBoot we have following code</p>
<div class="code"><pre class="code literal-block">@SpringBootTest
@SpringBootConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
@TestPropertySource(properties<span class="w"> </span>=<span class="w"> </span>{
<span class="w">    </span>"some.bar.value=testValue",
})
public<span class="w"> </span>class<span class="w"> </span>FooTest<span class="w"> </span>{

<span class="w">  </span>@Value("<span class="cp">${</span><span class="n">some</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">value</span><span class="cp">}</span>")
<span class="w">  </span>String<span class="w"> </span>bar;

<span class="w">  </span>@Test
<span class="w">  </span>public<span class="w"> </span>void<span class="w"> </span>testValueSetup()<span class="w"> </span>{
<span class="w">    </span>assertEquals("testValue",<span class="w"> </span>bar);
<span class="w">  </span>}

}
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/console-log-timestamps-in-chrome/" class="u-url">console.log timestamps in Chrome?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/console-log-timestamps-in-chrome/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T03:34:02+08:00" itemprop="datePublished" title="2023-03-05 03:34">2023-03-05 03:34</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there any quick way of getting Chrome to output timestamps in <code>console.log</code>
writes (like Firefox does). Or is prepending <code>new Date().getTime()</code> the only
option?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In Chrome, there is the option in Console Settings (Either press F1 or select
Developer Tools -&gt; Console -&gt; Settings [upper-right corner] ) named "Show
timestamps" which is exactly what I needed.</p>
<p>I've just found it. No other dirty hacks needed that destroys placeholders and
erases place in the code where the messages was logged from.</p>
<h4>Update for Chrome 68+</h4>
<p>The "Show timestamps" setting has been moved to the Preferences pane of the
"DevTools settings", found in the upper-right corner of the DevTools drawer:</p>
<p><img alt="Show timestamps how-to picture" src="images/to9n2.png"></p>
<p><br></p>
<h3>Suggest</h3>
<p>Try this:</p>
<div class="code"><pre class="code literal-block"><span class="n">console</span><span class="o">.</span><span class="n">logCopy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">console</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">currentDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'['</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">()</span><span class="o">.</span><span class="n">toUTCString</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'] '</span><span class="p">;</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">logCopy</span><span class="p">(</span><span class="n">currentDate</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<p>Or this, in case you want a timestamp:</p>
<div class="code"><pre class="code literal-block"><span class="n">console</span><span class="o">.</span><span class="n">logCopy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">console</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'['</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'] '</span><span class="p">;</span>
<span class="w">    </span><span class="n">this</span><span class="o">.</span><span class="n">logCopy</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<p>To log <strong>more than one thing</strong> <em>and</em> in a nice way (like object tree
representation):</p>
<div class="code"><pre class="code literal-block"><span class="n">console</span><span class="o">.</span><span class="n">logCopy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">console</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'['</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Date</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'] '</span><span class="p">;</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">logCopy</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="n">arguments</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>

<p><strong>With format string</strong> (JSFiddle)</p>
<div class="code"><pre class="code literal-block"><span class="n">console</span><span class="o">.</span><span class="n">logCopy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">console</span><span class="p">);</span>

<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Timestamp</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">prepend</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Date</span><span class="p">()</span><span class="o">.</span><span class="n">toJSON</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">True</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="o">.</span><span class="n">splice</span><span class="p">()</span>
<span class="w">        </span><span class="k">var</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">Array</span><span class="o">.</span><span class="n">prototype</span><span class="o">.</span><span class="n">slice</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">arguments</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">then</span><span class="o">...</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">must</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">string</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">typeof</span><span class="w"> </span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">"string"</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">Prepend</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="p">(</span><span class="n">possibly</span><span class="w"> </span><span class="n">format</span><span class="p">)</span><span class="w"> </span><span class="n">string</span>
<span class="w">            </span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="si">%o</span><span class="s2">: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">Insert</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span>
<span class="w">            </span><span class="n">args</span><span class="o">.</span><span class="n">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">timestamp</span><span class="p">);</span>

<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">Log</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">array</span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">logCopy</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="s2">"Normal"</span><span class="w"> </span><span class="nb">log</span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">logCopy</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>

<p>Outputs with that:</p>
<p><img alt="Sample output" src="images/JY8Uf.png"></p>
<p>P.S.: Tested in Chrome only.</p>
<p>P.P.S.: <code>Array.prototype.slice</code> is not perfect here for it would be logged as
an array of objects rather than a series those of.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2596.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2594.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
