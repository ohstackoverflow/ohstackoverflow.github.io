<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 184) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-184.html">
<link rel="prev" href="index-185.html" type="text/html">
<link rel="next" href="index-183.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/dang-jian-pan-cun-zai-shi-ru-he-shi-uitextfield-xiang-shang-yi-dong-kai-shi-bian-ji/" class="u-url">当键盘存在时如何使 UITextField 向上移动 - 开始编辑？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/dang-jian-pan-cun-zai-shi-ru-he-shi-uitextfield-xiang-shang-yi-dong-kai-shi-bian-ji/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:15:52+08:00" itemprop="datePublished" title="2023-02-17 00:15">2023-02-17 00:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>使用 iOS SDK：</p>
<p>我有一个可以调出键盘的<code>UIView</code>with s 。<code>UITextField</code>我需要它能够：</p>
<ol>
<li>
<p><code>UIScrollView</code>调出键盘后，允许滚动内容以查看其他文本字段</p>
</li>
<li>
<p>自动“跳转”（通过向上滚动）或缩短</p>
</li>
</ol>
<p>我知道我需要一个<code>UIScrollView</code>. 我已经尝试将 my 的类更改<code>UIView</code>为 a
<code>UIScrollView</code>，但我仍然无法向上或向下滚动文本框。</p>
<p>我需要 a<code>UIView</code>和 a吗<code>UIScrollView</code>？一个进入另一个吗？</p>
<p>需要实现什么才能自动滚动到活动文本字段？</p>
<p>理想情况下，尽可能多的组件设置将在 Interface Builder 中完成。我只想为需要的代码编写代码。</p>
<p>注意：我正在使用的<code>UIView</code>（或<code>UIScrollView</code>）是由标签栏（）提出的<code>UITabBar</code>，它需要正常运行。</p>
<hr>
<p>我正在为键盘出现时添加滚动条。尽管不需要，但我觉得它提供了更好的界面，因为用户可以滚动和更改文本框等。</p>
<p><code>UIScrollView</code>当键盘上下移动时，我可以在更改框架大小的地方使用它。我只是在使用：</p>
<div class="code"><pre class="code literal-block"><span class="nt">-</span><span class="o">(</span><span class="nt">void</span><span class="o">)</span><span class="nt">textFieldDidBeginEditing</span><span class="o">:(</span><span class="nt">UITextField</span><span class="w"> </span><span class="o">*)</span><span class="nt">textField</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">//Keyboard</span><span class="w"> </span><span class="err">becomes</span><span class="w"> </span><span class="err">visible</span>
<span class="w">    </span><span class="err">scrollView.frame</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">CGRectMake(scrollView.frame.origin.x,</span>
<span class="w">                                  </span><span class="err">scrollView.frame.origin.y,</span>
<span class="w">    </span><span class="err">scrollView.frame.size.width,</span>
<span class="w">    </span><span class="err">scrollView.frame.size.height</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">215</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">50)</span><span class="p">;</span><span class="w">   </span><span class="err">//</span><span class="w"> </span><span class="err">Resize</span>
<span class="p">}</span>

<span class="nt">-</span><span class="o">(</span><span class="nt">void</span><span class="o">)</span><span class="nt">textFieldDidEndEditing</span><span class="o">:(</span><span class="nt">UITextField</span><span class="w"> </span><span class="o">*)</span><span class="nt">textField</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">Keyboard</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">hide</span>
<span class="w">    </span><span class="err">scrollView.frame</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">CGRectMake(scrollView.frame.origin.x,</span>
<span class="w">                                  </span><span class="err">scrollView.frame.origin.y,</span>
<span class="w">                                  </span><span class="err">scrollView.frame.size.width,</span>
<span class="w">                                  </span><span class="err">scrollView.frame.size.height</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">215</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">50)</span><span class="p">;</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Resize</span>
<span class="p">}</span>
</pre></div>

<p>但是，这不会自动“向上移动”或将较低的文本字段置于可见区域的中心，这是我真正想要的。</p>
<p><br><br></p>
<h2>解答</h2>
<ol>
<li>
<p><code>ScrollView</code>如果您现在拥有的内容不适合 iPhone 屏幕，您将只需要一个。（如果您将其添加<code>ScrollView</code>为组件的超级视图只是为了<code>TextField</code>在键盘出现时向上滚动，则不需要。）</p>
</li>
<li>
<p>防止<code>TextField</code>s 被键盘覆盖的标准方法是在显示键盘时向上/向下移动视图。</p>
</li>
</ol>
<p>这是一些示例代码：</p>
<div class="code"><pre class="code literal-block"><span class="cp">#define kOFFSET_FOR_KEYBOARD 80.0</span>

<span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">keyboardWillShow</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Animate the current view out of the way</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">setViewMovedUp</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">setViewMovedUp</span><span class="o">:</span><span class="nb">NO</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">keyboardWillHide</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">setViewMovedUp</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">setViewMovedUp</span><span class="o">:</span><span class="nb">NO</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">textFieldDidBeginEditing:</span><span class="p">(</span><span class="bp">UITextField</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">sender</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">sender</span><span class="w"> </span><span class="n">isEqual</span><span class="o">:</span><span class="n">mailTf</span><span class="p">])</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//move the main view, so that the keyboard does not hide it.</span>
<span class="w">        </span><span class="k">if</span><span class="w">  </span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">setViewMovedUp</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">//method to move the view up/down whenever the keyboard is shown/dismissed</span>
<span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setViewMovedUp:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">movedUp</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">beginAnimations</span><span class="o">:</span><span class="nb">nil</span><span class="w"> </span><span class="n">context</span><span class="o">:</span><span class="nb">NULL</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">setAnimationDuration</span><span class="o">:</span><span class="mf">0.3</span><span class="p">];</span><span class="w"> </span><span class="c1">// if you want to slide up the view</span>

<span class="w">    </span><span class="n">CGRect</span><span class="w"> </span><span class="n">rect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">movedUp</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 1. move the view's origin up so that the text field that will be hidden come above the keyboard </span>
<span class="w">        </span><span class="c1">// 2. increase the size of the view so that the area behind the keyboard is covered up.</span>
<span class="w">        </span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">kOFFSET_FOR_KEYBOARD</span><span class="p">;</span>
<span class="w">        </span><span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">kOFFSET_FOR_KEYBOARD</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// revert back to the normal state.</span>
<span class="w">        </span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">kOFFSET_FOR_KEYBOARD</span><span class="p">;</span>
<span class="w">        </span><span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">kOFFSET_FOR_KEYBOARD</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rect</span><span class="p">;</span>

<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">commitAnimations</span><span class="p">];</span>
<span class="p">}</span>


<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillAppear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewWillAppear</span><span class="o">:</span><span class="n">animated</span><span class="p">];</span>
<span class="w">    </span><span class="c1">// register for keyboard notifications</span>
<span class="w">    </span><span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">addObserver</span><span class="o">:</span><span class="nb">self</span>
<span class="w">                                         </span><span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">keyboardWillShow</span><span class="p">)</span>
<span class="w">                                             </span><span class="nl">name</span><span class="p">:</span><span class="n">UIKeyboardWillShowNotification</span>
<span class="w">                                           </span><span class="nl">object</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>

<span class="w">    </span><span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">addObserver</span><span class="o">:</span><span class="nb">self</span>
<span class="w">                                         </span><span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">keyboardWillHide</span><span class="p">)</span>
<span class="w">                                             </span><span class="nl">name</span><span class="p">:</span><span class="n">UIKeyboardWillHideNotification</span>
<span class="w">                                           </span><span class="nl">object</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillDisappear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewWillDisappear</span><span class="o">:</span><span class="n">animated</span><span class="p">];</span>
<span class="w">    </span><span class="c1">// unregister for keyboard notifications while not visible.</span>
<span class="w">    </span><span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">removeObserver</span><span class="o">:</span><span class="nb">self</span>
<span class="w">                                             </span><span class="nl">name</span><span class="p">:</span><span class="n">UIKeyboardWillShowNotification</span>
<span class="w">                                           </span><span class="nl">object</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>

<span class="w">    </span><span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">removeObserver</span><span class="o">:</span><span class="nb">self</span>
<span class="w">                                             </span><span class="nl">name</span><span class="p">:</span><span class="n">UIKeyboardWillHideNotification</span>
<span class="w">                                           </span><span class="nl">object</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p><code>UIScrollView</code>我在组合多个 时也遇到了很多问题<code>UITextFields</code>，其中一个或多个在编辑时会被键盘遮挡。</p>
<p><code>UIScrollView</code>如果您没有正确滚动，请考虑以下事项。</p>
<p>1）确保您的 contentSize
大于<code>UIScrollView</code>框架大小。理解的方式<code>UIScrollViews</code>就是<code>UIScrollView</code>在contentSize中定义的内容上就像一个查看窗口。因此，为了让<code>UIScrollview</code>滚动到任何地方，contentSize
必须大于<code>UIScrollView</code>. 否则，不需要滚动，因为 contentSize 中定义的所有内容都已经可见。顺便说一句，默认 contentSize
= <code>CGSizeZero</code>.</p>
<p>2)
既然您已经了解它<code>UIScrollView</code>确实是进入您的“内容”的窗口，那么确保键盘不会遮挡您的<code>UIScrollView's</code>查看“窗口”的方法是调整其大小，<code>UIScrollView</code>以便在存在键盘时，您可以看到该<code>UIScrollView</code>窗口大小为原始<code>UIScrollView</code>frame.size.height
减去键盘的高度。这将确保您的窗口只有那么小的可视区域。</p>
<p>3)
这里有一个问题：当我第一次实现这个时，我想我必须获得<code>CGRect</code>编辑过的文本字段并调用<code>UIScrollView's</code>scrollRecToVisible
方法。我通过调用该<code>UITextFieldDelegate</code>方法来实现该方法。这实际上有一个奇怪的副作用，即滚动会 <em>卡</em>
入到位。很长一段时间我都不知道那是什么。然后我注释掉了Delegate
方法，一切正常！！(???)。事实证明，我相信实际上隐式地将当前编辑的内容隐式地带到了可视窗口中。我对该方法的实现和随后对
的调用是多余的，并且是奇怪的副作用的原因。<code>textFieldDidBeginEditing``scrollRecToVisible</code>
__<code>UITextField``textFieldDidBeginEditing``UIScrollView``UITextField``UITextFieldDelegate``scrollRecToVisible</code></p>
<p>所以这里是当键盘出现时正确滚动到位<code>UITextField</code>的步骤。<code>UIScrollView</code></p>
<div class="code"><pre class="code literal-block"><span class="c1">// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">viewDidLoad</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// register for keyboard notifications</span>
<span class="w">    </span><span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">addObserver</span><span class="o">:</span><span class="nb">self</span><span class="w"> </span>
<span class="w">                                             </span><span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">keyboardWillShow</span><span class="o">:</span><span class="p">)</span><span class="w"> </span>
<span class="w">                                                 </span><span class="nl">name</span><span class="p">:</span><span class="n">UIKeyboardWillShowNotification</span><span class="w"> </span>
<span class="w">                                               </span><span class="nl">object</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">window</span><span class="p">];</span>
<span class="w">    </span><span class="c1">// register for keyboard notifications</span>
<span class="w">    </span><span class="p">[[</span><span class="bp">NSNotificationCenter</span><span class="w"> </span><span class="n">defaultCenter</span><span class="p">]</span><span class="w"> </span><span class="n">addObserver</span><span class="o">:</span><span class="nb">self</span><span class="w"> </span>
<span class="w">                                             </span><span class="nl">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">keyboardWillHide</span><span class="o">:</span><span class="p">)</span><span class="w"> </span>
<span class="w">                                                 </span><span class="nl">name</span><span class="p">:</span><span class="n">UIKeyboardWillHideNotification</span><span class="w"> </span>
<span class="w">                                               </span><span class="nl">object</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">window</span><span class="p">];</span>
<span class="w">    </span><span class="n">keyboardIsShown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">    </span><span class="c1">//make contentSize bigger than your scrollSize (you will need to figure out for your own use case)</span>
<span class="w">    </span><span class="n">CGSize</span><span class="w"> </span><span class="n">scrollContentSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">320</span><span class="p">,</span><span class="w"> </span><span class="mi">345</span><span class="p">);</span>
<span class="w">    </span><span class="nb">self</span><span class="p">.</span><span class="n">scrollView</span><span class="p">.</span><span class="n">contentSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scrollContentSize</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">keyboardWillHide:</span><span class="p">(</span><span class="bp">NSNotification</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">n</span>
<span class="p">{</span>
<span class="w">    </span><span class="bp">NSDictionary</span><span class="o">*</span><span class="w"> </span><span class="n">userInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">n</span><span class="w"> </span><span class="n">userInfo</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// get the size of the keyboard</span>
<span class="w">    </span><span class="n">CGSize</span><span class="w"> </span><span class="n">keyboardSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">userInfo</span><span class="w"> </span><span class="n">objectForKey</span><span class="o">:</span><span class="n">UIKeyboardFrameEndUserInfoKey</span><span class="p">]</span><span class="w"> </span><span class="n">CGRectValue</span><span class="p">].</span><span class="n">size</span><span class="p">;</span>


<span class="w">    </span><span class="c1">// resize the scrollview</span>
<span class="w">    </span><span class="n">CGRect</span><span class="w"> </span><span class="n">viewFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">scrollView</span><span class="p">.</span><span class="n">frame</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// I'm also subtracting a constant kTabBarHeight because my UIScrollView was offset by the UITabBar so really only the portion of the keyboard that is leftover pass the UITabBar is obscuring my UIScrollView.</span>
<span class="w">    </span><span class="n">viewFrame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">keyboardSize</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">kTabBarHeight</span><span class="p">);</span>

<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">beginAnimations</span><span class="o">:</span><span class="nb">nil</span><span class="w"> </span><span class="n">context</span><span class="o">:</span><span class="nb">NULL</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">setAnimationBeginsFromCurrentState</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">scrollView</span><span class="w"> </span><span class="n">setFrame</span><span class="o">:</span><span class="n">viewFrame</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">commitAnimations</span><span class="p">];</span>

<span class="w">    </span><span class="n">keyboardIsShown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">keyboardWillShow:</span><span class="p">(</span><span class="bp">NSNotification</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="nv">n</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// This is an ivar I'm using to ensure that we do not do the frame size adjustment on the `UIScrollView` if the keyboard is already shown.  This can happen if the user, after fixing editing a `UITextField`, scrolls the resized `UIScrollView` to another `UITextField` and attempts to edit the next `UITextField`.  If we were to resize the `UIScrollView` again, it would be disastrous.  NOTE: The keyboard notification will fire even when the keyboard is already shown.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">keyboardIsShown</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="bp">NSDictionary</span><span class="o">*</span><span class="w"> </span><span class="n">userInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">n</span><span class="w"> </span><span class="n">userInfo</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// get the size of the keyboard</span>
<span class="w">    </span><span class="n">CGSize</span><span class="w"> </span><span class="n">keyboardSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">userInfo</span><span class="w"> </span><span class="n">objectForKey</span><span class="o">:</span><span class="n">UIKeyboardFrameEndUserInfoKey</span><span class="p">]</span><span class="w"> </span><span class="n">CGRectValue</span><span class="p">].</span><span class="n">size</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// resize the noteView</span>
<span class="w">    </span><span class="n">CGRect</span><span class="w"> </span><span class="n">viewFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">self</span><span class="p">.</span><span class="n">scrollView</span><span class="p">.</span><span class="n">frame</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// I'm also subtracting a constant kTabBarHeight because my UIScrollView was offset by the UITabBar so really only the portion of the keyboard that is leftover pass the UITabBar is obscuring my UIScrollView.</span>
<span class="w">    </span><span class="n">viewFrame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="p">(</span><span class="n">keyboardSize</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">kTabBarHeight</span><span class="p">);</span>

<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">beginAnimations</span><span class="o">:</span><span class="nb">nil</span><span class="w"> </span><span class="n">context</span><span class="o">:</span><span class="nb">NULL</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">setAnimationBeginsFromCurrentState</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">scrollView</span><span class="w"> </span><span class="n">setFrame</span><span class="o">:</span><span class="n">viewFrame</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="bp">UIView</span><span class="w"> </span><span class="n">commitAnimations</span><span class="p">];</span>
<span class="w">    </span><span class="n">keyboardIsShown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<ol>
<li>在以下位置注册键盘通知<code>viewDidLoad</code>
</li>
<li>在以下位置注销键盘通知<code>viewDidUnload</code>
</li>
<li>确保已<code>contentSize</code>设置并大于您的<code>UIScrollView</code>at<code>viewDidLoad</code>
</li>
<li>__<code>UIScrollView</code> 存在键盘时 <em>缩小</em>
</li>
<li>__<code>UIScrollView</code> 当键盘消失时 <em>恢复</em> 原状。</li>
<li>使用 ivar 来检测键盘是否已经显示在屏幕上，因为每次点击 a 时都会发送键盘通知，<code>UITextField</code>即使键盘已经存在，以避免在它已经 <em>缩小</em> 时 <em>缩小</em><code>UIScrollView</code> __</li>
</ol>
<p>需要注意的一件事是，<code>UIKeyboardWillShowNotification</code>当您在另一个<code>UITextField</code>. 我通过使用 ivar
来解决这个问题，以避免<code>UIScrollView</code>在键盘已经在屏幕上时调整大小。<code>UIScrollView</code>当键盘已经存在时无意中调整大小将是灾难性的！</p>
<p>希望这段代码可以让你们中的一些人省去很多麻烦。</p>
<p><br><br><a href="posts/how-can-i-make-a-uitextfield-move-up-when-the-keyboard-is-present-on-starting-to-edit/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-che-xiao-git-commit-amend-er-bu-shi-git-commit/" class="u-url">如何撤消“git commit --amend”而不是“git commit”</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-che-xiao-git-commit-amend-er-bu-shi-git-commit/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:15:15+08:00" itemprop="datePublished" title="2023-02-17 00:15">2023-02-17 00:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我不小心修改了我之前的提交。提交应该是分开的，以保留我对特定文件所做更改的历史记录。</p>
<p>有没有办法撤消最后一次提交？如果我做类似的事情<code>git reset --hard HEAD^</code>，第一次提交也会被撤消。</p>
<p>（我还没有推送到任何远程目录）</p>
<p><br><br></p>
<h2>解答</h2>
<p>您需要做的是创建一个新的提交，其细节与当前<code>HEAD</code>提交相同，但父级为<code>HEAD</code>. <code>git reset
--soft</code>将移动分支指针，以便下一次提交发生在与当前分支头所在位置不同的提交之上。</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">Move</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">head</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="err">'s pointing at the old commit</span>
<span class="err"># Leave the index intact for redoing the commit.</span>
<span class="err"># HEAD@{1} gives you "the commit that HEAD pointed at before </span>
<span class="err"># it was moved to where it currently points at". Note that this is</span>
<span class="err"># different from HEAD~1, which gives you "the commit that is the</span>
<span class="err"># parent node of the commit that HEAD is currently pointing to."</span>
<span class="err">git reset --soft HEAD@{1}</span>

<span class="err"># commit the current tree using the commit details of the previous</span>
<span class="err"># HEAD commit. (Note that HEAD@{1} is pointing somewhere different from the</span>
#<span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">command</span>.<span class="w"> </span><span class="nv">It</span><span class="err">'s now pointing at the erroneously amended commit.)</span>
<span class="err"># The -C option takes the given commit and reuses the log message and</span>
<span class="err"># authorship information.</span>
<span class="err">git commit -C HEAD@{1}</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>使用参考日志：</p>
<div class="code"><pre class="code literal-block">git branch fixing-things HEAD@{1}
git reset fixing-things
</pre></div>

<p>然后你应该只在你的工作副本中有所有你以前修改过的更改并且可以再次提交</p>
<p>查看以前索引类型的完整列表<code>git reflog</code></p>
<p><br><br><a href="posts/how-to-undo-git-commit-amend-done-instead-of-git-commit/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-yi-dui-xiang-zuo-wei-cheng-yuan-xun-huan-bian-li-pu-tong-javascript-dui-xiang/" class="u-url">如何以对象作为成员循环遍历普通 JavaScript 对象</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-yi-dui-xiang-zuo-wei-cheng-yuan-xun-huan-bian-li-pu-tong-javascript-dui-xiang/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T00:14:47+08:00" itemprop="datePublished" title="2023-02-17 00:14">2023-02-17 00:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>如何遍历 JavaScript 对象中的所有成员，包括作为对象的值？</p>
<p>例如，我如何循环遍历它（分别访问“your_name”和“your_message”）？</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">validation_messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"key_1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"your_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jimmy"</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"your_msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello world"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="s2">"key_2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s2">"your_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billy"</span><span class="p">,</span>
<span class="w">        </span><span class="s2">"your_msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo equals bar"</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>解答</h2>
<div class="code"><pre class="code literal-block"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">validation_messages</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">prototype</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="n">validation_messages</span><span class="p">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="k">key</span><span class="p">))</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>

<span class="w">    </span><span class="nf">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">validation_messages</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">prop</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">prototype</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="n">obj</span><span class="p">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">code</span>
<span class="w">        </span><span class="n">alert</span><span class="p">(</span><span class="n">prop</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">" = "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">prop</span><span class="o">]</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>在 ECMAScript 5 下，您可以组合<code>Object.keys()</code>and <code>Array.prototype.forEach()</code>：</p>
<div class="code"><pre class="code literal-block"><span class="nf">var</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="k">first</span><span class="err">:</span><span class="w"> </span><span class="ss">"John"</span><span class="p">,</span>
<span class="w">  </span><span class="k">last</span><span class="err">:</span><span class="w"> </span><span class="ss">"Doe"</span>
<span class="err">}</span><span class="p">;</span>

<span class="o">//</span>
<span class="o">//</span><span class="w">  </span><span class="n">Visit</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">inherited</span><span class="w"> </span><span class="n">enumerable</span><span class="w"> </span><span class="n">keys</span>
<span class="o">//</span>
<span class="k">Object</span><span class="p">.</span><span class="n">keys</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="n">forEach</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="k">key</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>

<span class="w">  </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="k">key</span><span class="p">,</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">);</span>

<span class="err">}</span><span class="p">);</span>
</pre></div>

<p><br><br><a href="posts/how-to-loop-through-a-plain-javascript-object-with-the-objects-as-members/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-185.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-183.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
