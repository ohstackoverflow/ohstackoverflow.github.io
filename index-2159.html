<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2159) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2159.html">
<link rel="prev" href="index-2160.html" type="text/html">
<link rel="next" href="index-2158.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/typescript-export-vs-default-export/" class="u-url">TypeScript export vs. default export</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/typescript-export-vs-default-export/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:21:17+08:00" itemprop="datePublished" title="2023-03-03 19:21">2023-03-03 19:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference in TypeScript between <code>export</code> and <code>default export</code>?</p>
<p>In all the tutorials, I see people <code>export</code>ing their classes and I cannot
compile my code if I don't add the <code>default</code> keyword before exporting.</p>
<p>Also, I couldn't find any trace of the default export keyword in the official
TypeScript documentation.</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="n">collection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>

<span class="p">}</span>
</pre></div>

<p>Does not compile. But:</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="n">collection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>

<span class="p">}</span>
</pre></div>

<p>Does.</p>
<p>The error is:</p>
<blockquote>
<p>error TS1192: Module '"src/app/MyClass"' has no default export.</p>
</blockquote>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>Default Export (<code>export default</code>)</strong></p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">MyClass</span><span class="o">.</span><span class="n">ts</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k">export</span>
<span class="k">export</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">*/</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>The main difference is that you can only have one default export per file and
you import it like so:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">MyClass</span> <span class="kn">from</span> <span class="s2">"./MyClass"</span><span class="p">;</span>
</pre></div>

<p>You can give it any name you like. For example this works fine:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">MyClassAlias</span> <span class="kn">from</span> <span class="s2">"./MyClass"</span><span class="p">;</span>
</pre></div>

<p><strong>Named Export (<code>export</code>)</strong></p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">MyClass</span><span class="o">.</span><span class="n">ts</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">exports</span>
<span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyClass</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">*/</span><span class="w"> </span><span class="p">}</span>
<span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">MyOtherClass</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">/*</span><span class="w"> </span><span class="o">...</span><span class="w"> </span><span class="o">*/</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>When you use a named export, you can have multiple exports per file and you
need to import the exports surrounded in braces:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">MyClass</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"./MyClass"</span><span class="p">;</span>
</pre></div>

<p><em>Note: Adding the braces will fix the error you're describing in your question
and the name specified in the braces needs to match the name of the export.</em></p>
<p>Or say your file exported <em>multiple</em> classes, then you could import both like
so:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">MyClass</span><span class="p">,</span> <span class="n">MyOtherClass</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"./MyClass"</span><span class="p">;</span>
<span class="o">//</span> <span class="n">use</span> <span class="n">MyClass</span> <span class="ow">and</span> <span class="n">MyOtherClass</span>
</pre></div>

<p>Or you could give either of them a different name in this file:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">MyClass</span><span class="p">,</span> <span class="n">MyOtherClass</span> <span class="k">as</span> <span class="n">MyOtherClassAlias</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"./MyClass"</span><span class="p">;</span>
<span class="o">//</span> <span class="n">use</span> <span class="n">MyClass</span> <span class="ow">and</span> <span class="n">MyOtherClassAlias</span>
</pre></div>

<p>Or you could import everything that's exported by using <code>* as</code>:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="o">*</span> <span class="k">as</span> <span class="n">MyClasses</span> <span class="kn">from</span> <span class="s2">"./MyClass"</span><span class="p">;</span>
<span class="o">//</span> <span class="n">use</span> <span class="n">MyClasses</span><span class="o">.</span><span class="n">MyClass</span> <span class="ow">and</span> <span class="n">MyClasses</span><span class="o">.</span><span class="n">MyOtherClass</span> <span class="n">here</span>
</pre></div>

<p><strong>Which to use?</strong></p>
<p>In ES6, default exports are concise because their use case is more common;
however, when I am working on code internal to a project in TypeScript, I
prefer to use named exports instead of default exports almost all the time
because it works very well with code refactoring. For example, if you default
export a class and rename that class, it will only rename the class in that
file and not any of the other references in other files. With named exports it
will rename the class and all the references to that class in all the other
files.</p>
<p>It also plays very nicely with barrel files (files that use namespace
exports—<code>export *</code>—to export other files). An example of this is shown in the
"example" section of this answer.</p>
<p>Note that my opinion on using named exports even when there is only one export
is contrary to the TypeScript Handbook—see the "Red Flags" section. I believe
this recommendation only applies when you are creating an API for other people
to use and the code is not internal to your project. When I'm designing an API
for people to use, I'll use a default export so people can do <code>import
myLibraryDefaultExport from "my-library-name";</code>. If you disagree with me about
doing this, I would love to hear your reasoning.</p>
<p>That said, find what you prefer! You could use one, the other, or both at the
same time.</p>
<p><strong>Additional Points</strong></p>
<p>A default export is actually a named export with the name <code>default</code>, so if the
file has a default export then you can also import by doing:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">default</span> <span class="k">as</span> <span class="n">MyClass</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"./MyClass"</span><span class="p">;</span>
</pre></div>

<p>And take note these other ways to import exist:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">MyDefaultExportedClass</span><span class="o">,</span> <span class="p">{</span> <span class="n">Class1</span><span class="p">,</span> <span class="n">Class2</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">"./SomeFile"</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">MyDefaultExportedClass</span><span class="o">,</span> <span class="o">*</span> <span class="k">as</span> <span class="n">Classes</span> <span class="kn">from</span> <span class="s2">"./SomeFile"</span><span class="p">;</span>
<span class="kn">import</span> <span class="s2">"./SomeFile"</span><span class="p">;</span> <span class="o">//</span> <span class="n">runs</span> <span class="n">SomeFile</span><span class="o">.</span><span class="n">js</span> <span class="n">without</span> <span class="n">importing</span> <span class="nb">any</span> <span class="n">exports</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I was trying to solve the same problem, but found an interesting advice by
Basarat Ali Syed, of <strong>TypeScript Deep Dive</strong> fame, that we should avoid the
generic <code>export default</code> declaration for a class, and instead append the
<code>export</code> tag to the class declaration. The imported class should be instead
listed in the <code>import</code> command of the module.</p>
<p>That is: instead of</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="p">}</span>
<span class="k">export</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">Foo</span><span class="p">;</span>
</pre></div>

<p>and the simple <code>import Foo from './foo';</code> in the module that will import, one
should use</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="p">}</span>
</pre></div>

<p>and <code>import {Foo} from './foo'</code> in the importer.</p>
<p>The reason for that is difficulties in the refactoring of classes, and the
added work for exportation. The original post by Basarat is in Avoid Export
Default</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-the-differences-between-json-and-jsonp/" class="u-url">What are the differences between JSON and JSONP?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-the-differences-between-json-and-jsonp/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:20:18+08:00" itemprop="datePublished" title="2023-03-03 19:20">2023-03-03 19:20</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Format wise, file type wise and practical use wise?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>JSONP is JSON with padding. That is, you put a string at the beginning and a
pair of parentheses around it. For example:</p>
<div class="code"><pre class="code literal-block"><span class="c1">//JSON</span>
<span class="p">{</span><span class="s">"name"</span><span class="p">:</span><span class="s">"stackoverflow"</span><span class="p">,</span><span class="s">"id"</span><span class="p">:</span><span class="mi">5</span><span class="p">}</span>
<span class="c1">//JSONP</span>
<span class="n">func</span><span class="p">({</span><span class="s">"name"</span><span class="p">:</span><span class="s">"stackoverflow"</span><span class="p">,</span><span class="s">"id"</span><span class="p">:</span><span class="mi">5</span><span class="p">});</span>
</pre></div>

<p>The result is that you can load the JSON as a script file. If you previously
set up a function called <code>func</code>, then that function will be called with one
argument, which is the JSON data, when the script file is done loading. This
is usually used to allow for cross-site AJAX with JSON data. If you know that
example.com is serving JSON files that look like the JSONP example given
above, then you can use code like this to retrieve it, even if you are not on
the example.com domain:</p>
<div class="code"><pre class="code literal-block"><span class="n">function</span><span class="w"> </span><span class="k">func</span><span class="p">(</span><span class="n">json</span><span class="p">){</span>
<span class="w">  </span><span class="n">alert</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">var</span><span class="w"> </span><span class="n">elm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"script"</span><span class="p">);</span>
<span class="n">elm</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span><span class="w"> </span><span class="s2">"text/javascript"</span><span class="p">);</span>
<span class="n">elm</span><span class="o">.</span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://example.com/jsonp"</span><span class="p">;</span>
<span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">elm</span><span class="p">);</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Basically, you're not allowed to request JSON data from another domain via
AJAX due to same-origin policy. AJAX allows you to fetch data after a page has
already loaded, and then execute some code/call a function once it returns. We
can't use AJAX but we are allowed to inject <code>&lt;script&gt;</code> tags into our own page
and those are allowed to reference scripts hosted at other domains.</p>
<p>Usually you would use this to include libraries from a CDN such as jQuery.
However, we can abuse this and use it to fetch data instead! JSON is already
valid JavaScript (for the most part), but we can't just return JSON in our
script file, because we have no way of knowing when the script/data has
finished loading and we have no way of accessing it unless it's assigned to a
variable or passed to a function. So what we do instead is tell the web
service to call a function on our behalf when it's ready.</p>
<p>For example, we might request some data from a stock exchange API, and along
with our usual API parameters, we give it a callback, like
<code>?callback=callThisWhenReady</code>. The web service then wraps the data with our
function and returns it like this: <code>callThisWhenReady({...data...})</code>. Now as
soon as the script loads, your browser will try to execute it (as normal),
which in turns calls our arbitrary function and feeds us the data we wanted.</p>
<p>It works much like a normal AJAX request except instead of calling an
anonymous function, we have to use named functions.</p>
<p>jQuery actually supports this seamlessly for you by creating a uniquely named
function for you and passing that off, which will then in turn run the code
you wanted.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/typeerror-missing-1-required-positional-argument-self/" class="u-url">TypeError: Missing 1 required positional argument: 'self'</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/typeerror-missing-1-required-positional-argument-self/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T19:19:30+08:00" itemprop="datePublished" title="2023-03-03 19:19">2023-03-03 19:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have some code like:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Pump:</span>    
    <span class="n">def</span> <span class="n">__init__</span>(<span class="nb">self</span>):
        <span class="nb">print</span>(<span class="s">"init"</span>)

    <span class="n">def</span> <span class="n">getPumps</span>(<span class="nb">self</span>):
        <span class="nb">pass</span>

<span class="n">p</span> = <span class="n">Pump</span>.<span class="n">getPumps</span>()
<span class="nb">print</span>(<span class="n">p</span>)
</pre></div>

<p>But I get an error like:</p>
<div class="code"><pre class="code literal-block">Traceback (most recent call last):
  File "C:\Users\Dom\Desktop\test\test.py", line 7, in &lt;module&gt;
    p = Pump.getPumps()
TypeError: getPumps() missing 1 required positional argument: 'self'
</pre></div>

<p>Why doesn't <code>__init__</code> seem to be called, and what does this exception mean?
My understanding is that <code>self</code> is passed to the constructor and methods
automatically. What am I doing wrong here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To use the class, first create an instance, like so:</p>
<div class="code"><pre class="code literal-block">p = Pump()
p.getPumps()
</pre></div>

<p>A full example:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; class TestClass:
...     def __init__(self):
...         print("in init")
...     def testFunc(self):
...         print("in Test Func")
...
&gt;&gt;&gt; testInstance = TestClass()
in init
&gt;&gt;&gt; testInstance.testFunc()
in Test Func
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You need to initialize it first:</p>
<div class="code"><pre class="code literal-block">p = Pump().getPumps()
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2160.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2158.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
