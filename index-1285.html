<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 1285) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-1285.html">
<link rel="prev" href="index-1286.html" type="text/html">
<link rel="next" href="index-1284.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-specify-the-exit-code-of-a-console-application-in-net/" class="u-url">How do I specify the exit code of a console application in .NET?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-specify-the-exit-code-of-a-console-application-in-net/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:42:08+08:00" itemprop="datePublished" title="2023-02-18 05:42">2023-02-18 05:42</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a trivial console application in .NET. It's just a test part of a
larger application. I'd like to specify the "exit code" of my console
application. How do I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Three options:</p>
<ul>
<li>You can return it from <code>Main</code> if you declare your <code>Main</code> method to return <code>int</code>.</li>
<li>You can call <code>Environment.Exit(code)</code>.</li>
<li>You can set the exit code using properties: <code>Environment.ExitCode = -1;</code>. This will be used if nothing else sets the return code or uses one of the other options above).</li>
</ul>
<p>Depending on your application (console, service, web application, etc.),
different methods can be used.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In addition to the answers covering the return int's... a plea for sanity.
Please, please define your exit codes in an enum, with Flags if appropriate.
It makes debugging and maintenance so much easier (and, as a bonus, you can
easily print out the exit codes on your help screen - you do have one of
those, right?).</p>
<div class="code"><pre class="code literal-block"><span class="k">enum</span><span class="w"> </span><span class="n">ExitCode</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">  </span><span class="n">InvalidLogin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="n">InvalidFilename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="n">UnknownError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="p">}</span>

<span class="nb nb-Type">int</span><span class="w"> </span><span class="n">Main</span><span class="p">(</span><span class="n">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="nb nb-Type">int</span><span class="p">)</span><span class="n">ExitCode</span><span class="o">.</span><span class="n">Success</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-any-pythonic-way-to-combine-two-dicts-adding-values-for-keys-that-appear-in-both/" class="u-url">Is there any pythonic way to combine two dicts (adding values for keys that appear in both)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-any-pythonic-way-to-combine-two-dicts-adding-values-for-keys-that-appear-in-both/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:41:41+08:00" itemprop="datePublished" title="2023-02-18 05:41">2023-02-18 05:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>For example I have two dicts:</p>
<div class="code"><pre class="code literal-block">Dict A: {'a': 1, 'b': 2, 'c': 3}
Dict B: {'b': 3, 'c': 4, 'd': 5}
</pre></div>

<p>I need a pythonic way of 'combining' two dicts such that the result is:</p>
<div class="code"><pre class="code literal-block">{'a': 1, 'b': 5, 'c': 7, 'd': 5}
</pre></div>

<p>That is to say: if a key appears in both dicts, add their values, if it
appears in only one dict, keep its value.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use <code>collections.Counter</code>:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">B</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">'b'</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span> <span class="o">+</span> <span class="n">B</span>
<span class="n">Counter</span><span class="p">({</span><span class="s1">'c'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>

<p>Counters are basically a subclass of <code>dict</code>, so you can still do everything
else with them you'd normally do with that type, such as iterate over their
keys and values.</p>
<p><br></p>
<h3>Suggest</h3>
<p>A more generic solution, which works for non-numeric values as well:</p>
<div class="code"><pre class="code literal-block"><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="s1">'a'</span><span class="err">:</span><span class="w"> </span><span class="s1">'foo'</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="err">:</span><span class="s1">'bar'</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="err">:</span><span class="w"> </span><span class="s1">'baz'</span><span class="err">}</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="s1">'a'</span><span class="err">:</span><span class="w"> </span><span class="s1">'spam'</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="err">:</span><span class="s1">'ham'</span><span class="p">,</span><span class="w"> </span><span class="s1">'x'</span><span class="err">:</span><span class="w"> </span><span class="s1">'blah'</span><span class="err">}</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dict</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="w"> </span><span class="o">+</span>
<span class="w">    </span><span class="o">[</span><span class="n">(k, a[k</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">set</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="k">set</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="err">]</span><span class="p">)</span>
</pre></div>

<p>or even more generic:</p>
<div class="code"><pre class="code literal-block"><span class="n">def</span><span class="w"> </span><span class="n">combine_dicts</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">op</span><span class="o">=</span><span class="n">operator</span><span class="p">.</span><span class="k">add</span><span class="p">)</span><span class="err">:</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">dict</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">items</span><span class="p">()</span><span class="w"> </span><span class="o">+</span>
<span class="w">        </span><span class="o">[</span><span class="n">(k, op(a[k</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">))</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">set</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="k">set</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="err">]</span><span class="p">)</span>
</pre></div>

<p>For example:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">:</span><span class="mi">4</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">:</span><span class="mi">7</span><span class="p">}</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">operator</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">combine_dicts</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">)</span>
<span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">'x'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/convert-python-dict-into-a-dataframe/" class="u-url">Convert Python dict into a dataframe</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/convert-python-dict-into-a-dataframe/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-18T05:41:14+08:00" itemprop="datePublished" title="2023-02-18 05:41">2023-02-18 05:41</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a Python dictionary like the following:</p>
<div class="code"><pre class="code literal-block">{u'2012-06-08': 388,
 u'2012-06-09': 388,
 u'2012-06-10': 388,
 u'2012-06-11': 389,
 u'2012-06-12': 389,
 u'2012-06-13': 389,
 u'2012-06-14': 389,
 u'2012-06-15': 389,
 u'2012-06-16': 389,
 u'2012-06-17': 389,
 u'2012-06-18': 390,
 u'2012-06-19': 390,
 u'2012-06-20': 390,
 u'2012-06-21': 390,
 u'2012-06-22': 390,
 u'2012-06-23': 390,
 u'2012-06-24': 390,
 u'2012-06-25': 391,
 u'2012-06-26': 391,
 u'2012-06-27': 391,
 u'2012-06-28': 391,
 u'2012-06-29': 391,
 u'2012-06-30': 391,
 u'2012-07-01': 391,
 u'2012-07-02': 392,
 u'2012-07-03': 392,
 u'2012-07-04': 392,
 u'2012-07-05': 392,
 u'2012-07-06': 392}
</pre></div>

<p>The keys are Unicode dates and the values are integers. I would like to
convert this into a pandas dataframe by having the dates and their
corresponding values as two separate columns. Example: col1: Dates col2:
DateValue (the dates are still Unicode and datevalues are still integers)</p>
<div class="code"><pre class="code literal-block">     Date         DateValue
0    2012-07-01    391
1    2012-07-02    392
2    2012-07-03    392
.    2012-07-04    392
.    ...           ...
.    ...           ...
</pre></div>

<p>Any help in this direction would be much appreciated. I am unable to find
resources on the pandas docs to help me with this.</p>
<p>I know one solution might be to convert each key-value pair in this dict, into
a dict so the entire structure becomes a dict of dicts, and then we can add
each row individually to the dataframe. But I want to know if there is an
easier way and a more direct way to do this.</p>
<p>So far I have tried converting the dict into a series object but this doesn't
seem to maintain the relationship between the columns:</p>
<div class="code"><pre class="code literal-block">s  = Series(my_dict,index=my_dict.keys())
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>The error here, is since calling the DataFrame constructor with scalar values
(where it expects values to be a list/dict/... i.e. have multiple columns):</p>
<div class="code"><pre class="code literal-block"><span class="nv">pd</span>.<span class="nv">DataFrame</span><span class="ss">(</span><span class="nv">d</span><span class="ss">)</span>
<span class="nv">ValueError</span>:<span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">scalar</span><span class="w"> </span><span class="nv">values</span>,<span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">pass</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">index</span>
</pre></div>

<p>You could take the items from the dictionary (i.e. the key-value pairs):</p>
<div class="code"><pre class="code literal-block">In [11]: pd.DataFrame(d.items())  # or list(d.items()) in python 3
Out[11]:
             0    1
0   2012-07-02  392
1   2012-07-06  392
2   2012-06-29  391
3   2012-06-28  391
...

In [12]: pd.DataFrame(d.items(), columns=['Date', 'DateValue'])
Out[12]:
          Date  DateValue
0   2012-07-02        392
1   2012-07-06        392
2   2012-06-29        391
</pre></div>

<p>But I think it makes more sense to pass the Series constructor:</p>
<div class="code"><pre class="code literal-block">In [21]: s = pd.Series(d, name='DateValue')
Out[21]:
2012-06-08    388
2012-06-09    388
2012-06-10    388

In [22]: s.index.name = 'Date'

In [23]: s.reset_index()
Out[23]:
          Date  DateValue
0   2012-06-08        388
1   2012-06-09        388
2   2012-06-10        388
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>When converting a dictionary into a pandas dataframe where you want the keys
to be the columns of said dataframe and the values to be the row values, you
can do simply put brackets around the dictionary like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">dict_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="s1">'key 1'</span><span class="err">:</span><span class="w"> </span><span class="s1">'value 1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'key 2'</span><span class="err">:</span><span class="w"> </span><span class="s1">'value 2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'key 3'</span><span class="err">:</span><span class="w"> </span><span class="s1">'value 3'</span><span class="err">}</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="o">[</span><span class="n">dict_</span><span class="o">]</span><span class="p">)</span>

<span class="w">    </span><span class="k">key</span><span class="w"> </span><span class="mi">1</span><span class="w">     </span><span class="k">key</span><span class="w"> </span><span class="mi">2</span><span class="w">     </span><span class="k">key</span><span class="w"> </span><span class="mi">3</span>
<span class="mi">0</span><span class="w">   </span><span class="k">value</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span><span class="k">value</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="k">value</span><span class="w"> </span><span class="mi">3</span>
</pre></div>

<p>EDIT: In the pandas docs one option for the <code>data</code> parameter in the DataFrame
constructor is a list of dictionaries. Here we're passing a list with one
dictionary in it.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-1286.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-1284.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
