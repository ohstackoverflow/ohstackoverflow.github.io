<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 329) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-329.html">
<link rel="prev" href="index-330.html" type="text/html">
<link rel="next" href="index-328.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-the-path-to-the-current-script-with-node-js/" class="u-url">How do I get the path to the current script with Node.js?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-the-path-to-the-current-script-with-node-js/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:06:59+08:00" itemprop="datePublished" title="2023-02-17 04:06">2023-02-17 04:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How would I get the path to the script in Node.js?</p>
<p>I know there's <code>process.cwd</code>, but that only refers to the directory where the
script was called, not of the script itself. For instance, say I'm in
<code>/home/kyle/</code> and I run the following command:</p>
<div class="code"><pre class="code literal-block">node /home/kyle/some/dir/file.js
</pre></div>

<p>If I call <code>process.cwd()</code>, I get <code>/home/kyle/</code>, not <code>/home/kyle/some/dir/</code>. Is
there a way to get that directory?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I found it after looking through the documentation again. What I was looking
for were the <code>__filename</code> and <code>__dirname</code> module-level variables.</p>
<ul>
<li>
<code>__filename</code> is the file name of the current module. This is the resolved absolute path of the current module file. (ex:<code>/home/kyle/some/dir/file.js</code>)</li>
<li>
<code>__dirname</code> is the directory name of the current module. (ex:<code>/home/kyle/some/dir</code>)</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>So basically you can do this:</p>
<div class="code"><pre class="code literal-block">fs.readFile(path.resolve(__dirname, 'settings.json'), 'UTF-8', callback);
</pre></div>

<p>Use resolve() instead of concatenating with '/' or '\' else you will run into
cross-platform issues.</p>
<p>Note: __dirname is the local path of the module or included script. If you are
writing a plugin which needs to know the path of the main script it is:</p>
<div class="code"><pre class="code literal-block">require.main.filename
</pre></div>

<p>or, to just get the folder name:</p>
<div class="code"><pre class="code literal-block"><span class="nv">require</span><span class="ss">(</span><span class="s1">'path'</span><span class="ss">)</span>.<span class="k">dirname</span><span class="ss">(</span><span class="nv">require</span>.<span class="nv">main</span>.<span class="nv">filename</span><span class="ss">)</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-sanitize-user-input-with-php/" class="u-url">How can I sanitize user input with PHP?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-sanitize-user-input-with-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:06:28+08:00" itemprop="datePublished" title="2023-02-17 04:06">2023-02-17 04:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a catchall function somewhere that works well for sanitizing user
input for SQL injection and XSS attacks, while still allowing certain types of
HTML tags?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It's a common misconception that user input can be filtered. PHP even has a
(now deprecated) "feature", called magic-quotes, that builds on this idea.
It's nonsense. Forget about filtering (or cleaning, or whatever people call
it).</p>
<p>What you should do, to avoid problems, is quite simple: whenever you embed a a
piece of data within a foreign code, you must treat it according to the
formatting rules of that code. But you must understand that such rules could
be too complicated to try to follow them all manually. For example, in SQL,
rules for strings, numbers and identifiers are all different. For your
convenience, in most cases there is a dedicated tool for such an embedding.
For example, when you need to use a PHP variable in the SQL query, you have to
use a prepared statement, that will take care of all the proper
formatting/treatment.</p>
<p>Another example is HTML: If you embed strings within HTML markup, you must
escape it with <code>htmlspecialchars</code>. This means that every single <code>echo</code> or
<code>print</code> statement should use <code>htmlspecialchars</code>.</p>
<p>A third example could be shell commands: If you are going to embed strings
(such as arguments) to external commands, and call them with <code>exec</code>, then you
must use <code>escapeshellcmd</code> and <code>escapeshellarg</code>.</p>
<p>Also, a very compelling example is JSON. The rules are so numerous and
complicated that you would never be able to follow them all manually. That's
why you should never ever create a JSON string manually, but always use a
dedicated function, <code>json_encode()</code> that will correctly format every bit of
data.</p>
<p>And so on and so forth ...</p>
<p>The <em>only</em> case where you need to actively filter data, is if you're accepting
preformatted input. For example, if you let your users post HTML markup, that
you plan to display on the site. However, you should be wise to avoid this at
all cost, since no matter how well you filter it, it will always be a
potential security hole.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Do not try to prevent SQL injection by sanitizing input data.</p>
<p>Instead, <strong>do not allow data to be used in creating your SQL code</strong>. Use
Prepared Statements (i.e. using parameters in a template query) that uses
bound variables. It is the only way to be guaranteed against SQL injection.</p>
<p>Please see my website http://bobby-tables.com/ for more about preventing SQL
injection.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/filename-too-long-in-git-for-windows/" class="u-url">Filename too long in Git for Windows</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/filename-too-long-in-git-for-windows/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:05:27+08:00" itemprop="datePublished" title="2023-02-17 04:05">2023-02-17 04:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using <code>Git-1.9.0-preview20140217</code> for Windows. As I know, this release
should fix the issue with too long filenames. But not for me.</p>
<p>Surely I'm doing something wrong: I did <code>git config core.longpaths true</code> and
<code>git add .</code> and then <code>git commit</code>. Everything went well. But when I now do a
<code>git status</code>, I get a list of files with <code>Filename too long</code>, for example:</p>
<blockquote>
<p><code>node_modules/grunt-contrib-imagemin/node_modules/pngquant-
bin/node_modules/bin-
wrapper/node_modules/download/node_modules/request/node_modules/form-
data/node_modules/combined-stream/node_modules/delayed-
stream/test/integration/test-handle-source-errors.js: Filename too long</code></p>
</blockquote>
<p>It is quite simple to reproduce for me: just create a Yeoman web application
with the Angular generator ("yo angular") and remove <code>node_modules</code> from the
<code>.gitignore</code> file. Then repeat the aforementioned Git commands.</p>
<p>What am I missing here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Git has a limit of 4096 characters for a filename, except on Windows when Git
is compiled with msys. It uses an older version of the Windows API and there's
a limit of 260 characters for a filename.</p>
<p>So as far as I understand this, it's a limitation of msys and not of Git. You
can read the details here: https://github.com/msysgit/git/pull/110</p>
<p>You can circumvent this by using another Git client on Windows or set
<code>core.longpaths</code> to <code>true</code> as explained in other answers.</p>
<div class="code"><pre class="code literal-block">git config --system core.longpaths true
</pre></div>

<p>Git is build as a combination of scripts and compiled code. With the above
change some of the scripts might fail. That's the reason for core.longpaths
not to be enabled by default.</p>
<p>The windows documentation at https://learn.microsoft.com/en-
us/windows/win32/fileio/maximum-file-path-limitation?tabs=cmd#enable-long-
paths-in-windows-10-version-1607-and-later has some more information:</p>
<blockquote>
<p>Starting in Windows 10, version 1607, MAX_PATH limitations have been removed
from common Win32 file and directory functions. However, you must opt-in to
the new behavior.</p>
<p>A registry key allows you to enable or disable the new long path behavior.
To enable long path behavior set the registry key at
HKLM\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type:
REG_DWORD)</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>You should be able to run the command</p>
<div class="code"><pre class="code literal-block">git config --system core.longpaths true
</pre></div>

<p>or add it to one of your Git configuration files manually to turn this
functionality on, once you are on a supported version of Git. It looks like
maybe 1.9.0 and after.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-330.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-328.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
