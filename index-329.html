<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 329) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-329.html">
<link rel="prev" href="index-330.html" type="text/html">
<link rel="next" href="index-328.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-sanitize-user-input-with-php/" class="u-url">How can I sanitize user input with PHP?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-sanitize-user-input-with-php/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:06:28+08:00" itemprop="datePublished" title="2023-02-17 04:06">2023-02-17 04:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a catchall function somewhere that works well for sanitizing user
input for SQL injection and XSS attacks, while still allowing certain types of
HTML tags?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It's a common misconception that user input can be filtered. PHP even has a
(now deprecated) "feature", called magic-quotes, that builds on this idea.
It's nonsense. Forget about filtering (or cleaning, or whatever people call
it).</p>
<p>What you should do, to avoid problems, is quite simple: whenever you embed a a
piece of data within a foreign code, you must treat it according to the
formatting rules of that code. But you must understand that such rules could
be too complicated to try to follow them all manually. For example, in SQL,
rules for strings, numbers and identifiers are all different. For your
convenience, in most cases there is a dedicated tool for such an embedding.
For example, when you need to use a PHP variable in the SQL query, you have to
use a prepared statement, that will take care of all the proper
formatting/treatment.</p>
<p>Another example is HTML: If you embed strings within HTML markup, you must
escape it with <code>htmlspecialchars</code>. This means that every single <code>echo</code> or
<code>print</code> statement should use <code>htmlspecialchars</code>.</p>
<p>A third example could be shell commands: If you are going to embed strings
(such as arguments) to external commands, and call them with <code>exec</code>, then you
must use <code>escapeshellcmd</code> and <code>escapeshellarg</code>.</p>
<p>Also, a very compelling example is JSON. The rules are so numerous and
complicated that you would never be able to follow them all manually. That's
why you should never ever create a JSON string manually, but always use a
dedicated function, <code>json_encode()</code> that will correctly format every bit of
data.</p>
<p>And so on and so forth ...</p>
<p>The <em>only</em> case where you need to actively filter data, is if you're accepting
preformatted input. For example, if you let your users post HTML markup, that
you plan to display on the site. However, you should be wise to avoid this at
all cost, since no matter how well you filter it, it will always be a
potential security hole.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Do not try to prevent SQL injection by sanitizing input data.</p>
<p>Instead, <strong>do not allow data to be used in creating your SQL code</strong>. Use
Prepared Statements (i.e. using parameters in a template query) that uses
bound variables. It is the only way to be guaranteed against SQL injection.</p>
<p>Please see my website http://bobby-tables.com/ for more about preventing SQL
injection.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/filename-too-long-in-git-for-windows/" class="u-url">Filename too long in Git for Windows</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/filename-too-long-in-git-for-windows/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:05:27+08:00" itemprop="datePublished" title="2023-02-17 04:05">2023-02-17 04:05</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm using <code>Git-1.9.0-preview20140217</code> for Windows. As I know, this release
should fix the issue with too long filenames. But not for me.</p>
<p>Surely I'm doing something wrong: I did <code>git config core.longpaths true</code> and
<code>git add .</code> and then <code>git commit</code>. Everything went well. But when I now do a
<code>git status</code>, I get a list of files with <code>Filename too long</code>, for example:</p>
<blockquote>
<p><code>node_modules/grunt-contrib-imagemin/node_modules/pngquant-
bin/node_modules/bin-
wrapper/node_modules/download/node_modules/request/node_modules/form-
data/node_modules/combined-stream/node_modules/delayed-
stream/test/integration/test-handle-source-errors.js: Filename too long</code></p>
</blockquote>
<p>It is quite simple to reproduce for me: just create a Yeoman web application
with the Angular generator ("yo angular") and remove <code>node_modules</code> from the
<code>.gitignore</code> file. Then repeat the aforementioned Git commands.</p>
<p>What am I missing here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Git has a limit of 4096 characters for a filename, except on Windows when Git
is compiled with msys. It uses an older version of the Windows API and there's
a limit of 260 characters for a filename.</p>
<p>So as far as I understand this, it's a limitation of msys and not of Git. You
can read the details here: https://github.com/msysgit/git/pull/110</p>
<p>You can circumvent this by using another Git client on Windows or set
<code>core.longpaths</code> to <code>true</code> as explained in other answers.</p>
<div class="code"><pre class="code literal-block">git config --system core.longpaths true
</pre></div>

<p>Git is build as a combination of scripts and compiled code. With the above
change some of the scripts might fail. That's the reason for core.longpaths
not to be enabled by default.</p>
<p>The windows documentation at https://learn.microsoft.com/en-
us/windows/win32/fileio/maximum-file-path-limitation?tabs=cmd#enable-long-
paths-in-windows-10-version-1607-and-later has some more information:</p>
<blockquote>
<p>Starting in Windows 10, version 1607, MAX_PATH limitations have been removed
from common Win32 file and directory functions. However, you must opt-in to
the new behavior.</p>
<p>A registry key allows you to enable or disable the new long path behavior.
To enable long path behavior set the registry key at
HKLM\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type:
REG_DWORD)</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>You should be able to run the command</p>
<div class="code"><pre class="code literal-block">git config --system core.longpaths true
</pre></div>

<p>or add it to one of your Git configuration files manually to turn this
functionality on, once you are on a supported version of Git. It looks like
maybe 1.9.0 and after.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/master-branch-and-origin-master-have-diverged-how-to-undiverge-branches/" class="u-url">master branch and 'origin/master' have diverged, how to 'undiverge' branches'?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/master-branch-and-origin-master-have-diverged-how-to-undiverge-branches/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T04:04:59+08:00" itemprop="datePublished" title="2023-02-17 04:04">2023-02-17 04:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Somehow my <code>master</code> and my <code>origin/master</code> branch have diverged.<br>
I actually don't want them to diverge.</p>
<p>How can I view these differences and <strong>merge</strong> them?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can review the differences with a:</p>
<div class="code"><pre class="code literal-block">git log HEAD..origin/main

# old repositories
git log HEAD..origin/master
</pre></div>

<p>before pulling it (fetch + merge) (see also "How do you get git to always pull
from a specific branch?")</p>
<p>Note: since Git 2.28 (Q3 2020), the default branch is configurable, and now
(2021+) set to <code>main</code>, no longer <code>master</code>.<br>
The rest of the answer reflects that more recent convention.</p>
<hr>
<p>When you have a message like:</p>
<blockquote>
<p>"Your branch and 'origin/main' have diverged, # and have 1 and 1 different
commit(s) each, respectively."</p>
</blockquote>
<p>Check if you need to update <code>origin</code>.<br>
If <code>origin</code> is up-to-date, then some commits have been pushed to <code>origin</code> from
another repo while you made your own commits locally.</p>
<div class="code"><pre class="code literal-block">... o ---- o ---- A ---- B  origin/main (upstream work)
                   \
                    C  main(your work)
</pre></div>

<p>You based commit <code>C</code> on commit <code>A</code> because that was the latest work you had
fetched from <code>upstream</code> at the time.</p>
<p>However, before you tried to push back to <code>origin</code>, someone else pushed the
commit <code>B</code>.<br>
Development history has diverged into separate paths.</p>
<p>You can then merge or rebase. See Pro Git: Git Branching - Rebasing for
details.</p>
<h3>Merge</h3>
<p>Use the <code>git merge</code> command:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>merge<span class="w"> </span>origin/main

<span class="c1"># old repositories</span>
$<span class="w"> </span>git<span class="w"> </span>merge<span class="w"> </span>origin/master
</pre></div>

<p>This tells Git to integrate the changes from <code>origin/main</code> into your work and
create a merge commit.<br>
The graph of history now looks like this:</p>
<div class="code"><pre class="code literal-block">... o ---- o ---- A ---- B  origin/main (upstream work)
                   \      \
                    C ---- M  main (your work)
</pre></div>

<p>The new merge, commit <code>M</code>, has <em>two</em> parents, each representing one path of
development that led to the content stored in that commit.</p>
<p>Note that the history behind <code>M</code> is now non-linear.</p>
<h3>Rebase</h3>
<p>Use the <code>git rebase</code> command:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>rebase<span class="w"> </span>origin/main

<span class="c1"># old repositories</span>
$<span class="w"> </span>git<span class="w"> </span>rebase<span class="w"> </span>origin/master
</pre></div>

<p>This tells Git to replay commit <code>C</code> (your work) as if you had based it on
commit <code>B</code> instead of <code>A</code>.<br>
CVS and Subversion users routinely rebase their local changes on top of
<code>upstream</code> work when they update before commit.<br>
Git just adds explicit separation between the commit and rebase steps.</p>
<p>The graph of history now looks like this:</p>
<div class="code"><pre class="code literal-block">... o ---- o ---- A ---- B  origin/main (upstream work)
                          \
                           C'  main (your work)
</pre></div>

<p>Commit <code>C'</code> is a new commit created by the <code>git rebase</code> command.<br>
It is different from <code>C</code> in two ways:</p>
<ol>
<li>It has a different history: <code>B</code> instead of <code>A</code>.</li>
<li>Its content accounts for changes in both <code>B</code> and <code>C</code>; it is the same as <code>M</code> from the merge example.</li>
</ol>
<p>Note that the history behind <code>C'</code> is still linear.<br>
We have chosen (for now) to allow only linear history in
<code>cmake.org/cmake.git</code>.<br>
This approach preserves the CVS-based workflow used previously and may ease
the transition.<br>
An attempt to push <code>C'</code> into our repository will work (assuming you have
permissions and no one has pushed while you were rebasing).</p>
<p>The <code>git pull</code> command provides a shorthand way to <code>fetch</code> from <code>origin</code> and
<code>rebase</code> local work on it:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span>--rebase
</pre></div>

<p>This combines the above <code>fetch</code> and <code>rebase</code> steps into one command.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I had this and am mystified as to what has caused it, even after reading the
above responses. My solution was to do</p>
<div class="code"><pre class="code literal-block">git reset --hard origin/master
</pre></div>

<p>Then that just resets my (local) copy of master (which I assume is screwed up)
to the correct point, as represented by (remote) origin/master.</p>
<blockquote>
<p><strong>WARNING</strong> : You will lose all changes not yet pushed to <code>origin/master</code>.</p>
</blockquote>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-330.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-328.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
